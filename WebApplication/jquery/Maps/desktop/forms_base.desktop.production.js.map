{"version":3,"sources":["jquery/rendering/js/services/bizagi.render.services.service.js","jquery/rendering/js/services/bizagi.render.services.multiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.controller.js","jquery/rendering/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/container/bizagi.rendering.form.js","jquery/rendering/js/base/render/bizagi.rendering.render.js","jquery/rendering/js/base/render/bizagi.rendering.combo.js","jquery/rendering/js/base/render/bizagi.rendering.date.js","jquery/rendering/js/base/render/bizagi.rendering.extendedText.js","jquery/rendering/js/base/render/bizagi.rendering.grid.js","jquery/rendering/js/base/render/bizagi.rendering.label.js","jquery/rendering/js/base/render/bizagi.rendering.search.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.render.js","jquery/rendering/js/base/render/bizagi.rendering.handSignature.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.column.js","jquery/rendering/js/bizagi.rendering.facade.js","jquery/rendering/js/services/bizagi.render.services.endPoints.js","jquery/rendering/js/services/bizagi.render.services.context.js","jquery/rendering/js/services/bizagi.render.services.metadataMultiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.validation.js","jquery/rendering/js/base/bizagi.rendering.element.js","jquery/rendering/js/base/container/bizagi.rendering.container.js","jquery/rendering/js/base/container/bizagi.rendering.formTemplate.js","jquery/rendering/js/base/container/bizagi.rendering.layout.js","jquery/rendering/js/base/container/bizagi.rendering.accordion.js","jquery/rendering/js/base/container/bizagi.rendering.accordionItem.js","jquery/rendering/js/base/container/bizagi.rendering.group.js","jquery/rendering/js/base/container/bizagi.rendering.section.js","jquery/rendering/js/base/container/bizagi.rendering.horizontal.js","jquery/rendering/js/base/container/bizagi.rendering.panel.js","jquery/rendering/js/base/container/bizagi.rendering.contentPanel.js","jquery/rendering/js/base/container/bizagi.rendering.searchForm.js","jquery/rendering/js/base/container/bizagi.rendering.tab.js","jquery/rendering/js/base/container/bizagi.rendering.tabItem.js","jquery/rendering/js/base/render/bizagi.rendering.render.base.js","jquery/rendering/js/base/render/bizagi.rendering.collectionnavigator.js","jquery/rendering/js/base/render/bizagi.rendering.check.js","jquery/rendering/js/base/render/bizagi.rendering.number.js","jquery/rendering/js/base/render/bizagi.rendering.numberScientificNotation.js","jquery/rendering/js/base/render/bizagi.rendering.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.text.js","jquery/rendering/js/base/render/bizagi.rendering.readonly.js","jquery/rendering/js/base/render/bizagi.rendering.button.js","jquery/rendering/js/base/render/bizagi.rendering.fileprint.js","jquery/rendering/js/base/render/bizagi.rendering.link.js","jquery/rendering/js/base/render/bizagi.rendering.checkList.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.image.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.link.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.label.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.text.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.upload.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.boolean.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.dateTime.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.number.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.money.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.placeholder.js","jquery/rendering/js/base/render/bizagi.rendering.geolocation.js","jquery/rendering/js/base/render/bizagi.rendering.upload.js","jquery/rendering/js/base/render/bizagi.rendering.ecm.js","jquery/rendering/js/base/render/bizagi.rendering.yesno.js","jquery/rendering/js/base/render/bizagi.rendering.letter.js","jquery/rendering/js/base/render/bizagi.rendering.formLink.js","jquery/rendering/js/base/render/bizagi.rendering.document.js","jquery/rendering/js/base/render/bizagi.rendering.cascadingCombo.js","jquery/rendering/js/base/render/bizagi.rendering.list.js","jquery/rendering/js/base/render/bizagi.rendering.multiSelect.js","jquery/rendering/js/base/render/bizagi.rendering.searchList.js","jquery/rendering/js/base/render/bizagi.rendering.money.js","jquery/rendering/js/base/render/bizagi.rendering.radio.js","jquery/rendering/js/base/render/bizagi.rendering.userfield.js","jquery/rendering/js/base/render/bizagi.rendering.image.js","jquery/rendering/js/base/render/bizagi.rendering.association.js","jquery/rendering/js/base/render/bizagi.rendering.getUser.js","jquery/rendering/js/base/render/query/bizagi.rendering.queryProcess.js","jquery/rendering/js/base/render/query/bizagi.rendering.querySearchUser.js","jquery/rendering/js/base/render/query/bizagi.rendering.queryAdvanced.js","jquery/rendering/js/base/render/bizagi.rendering.comboSelected.js","jquery/rendering/js/base/render/bizagi.rendering.userPassword.js","jquery/rendering/js/base/render/bizagi.rendering.stakeholder.js","jquery/rendering/js/base/render/bizagi.rendering.actionLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.range.js","jquery/rendering/js/base/render/bizagi.rendering.rangeDate.js","jquery/rendering/js/base/render/bizagi.rendering.rangeMoney.js","jquery/rendering/js/base/render/bizagi.rendering.rangeNumber.js","jquery/rendering/js/base/render/bizagi.rendering.entityTemplate.js","jquery/rendering/js/base/render/bizagi.rendering.polymorphicLauncher.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.readonly.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.document.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.letter.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.combo.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.search.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.date.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.hidden.js","jquery/rendering/js/base/bizagi.rendering.base.factory.js","jquery/rendering/js/bizagi.rendering.device.factory.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","bizagi","render","services","endPoints","getEndPoints","params","renderHandlerPathRest","context","form-get-data","proxyPrefix","form-submit-data","form-submit-data-upload","render-property-refresh","render-multiaction","render-upload-cancel-image","render-upload-data-url","render-upload-add-url","render-upload-delete-url","render-ecm-upload-url","render-multiaction-metadata","render-grid-edit-url","render-grid-save-url","render-grid-add-url","render-grid-rollback-url","render-grid-commit-url","render-grid-checkpoint-url","render-save-entity","render-stakeholder-associated","render-search-default-image","render-search-form-get-data","render-search-advanced-url","render-letter-notEditable-url","render-letter-content-url","render-letter-save-url","render-letter-content-icons","render-userfield-definition","render-document-generate","render-document-generateAllDocuments","render-processes-startform","render-processes-getstartform","render-entity-layout-image64","render-entity-layout-imageByteArray","render-entity-layout-upload-files","render-query-getUsersList","case-handler-getCaseSummary","case-handler-getCaseSummaryByGuid","case-handler-getCaseAssignees","case-handler-getWorkItems","case-handler-getWorkItemsByGuid","admin-getUsersList","admin-getUsersList-FromPreferences","admin-getUsersList-ForStakeholders","admin-getUsersList-ForXpathIdBossUser","admin-getUsersList-ForXpathIdDelegate","admin-getUsersForAssignation","admin-users-config","admin-usersform","admin-GenerateDataToSendByEmail","admin-sendUserEmail","sharepointProxyPrefix","alert","$","Class","extend","init","this","util","isEmpty","getUrl","service","setProxyPrefix","BA_ACTION_PARAMETER_PREFIX","BA_CONTEXT_PARAMETER_PREFIX","BA_PAGE_CACHE","BA_MULTIACTION_WITH_LIMIT_NUMBER","BA_MULTIACTION_WITH_LIMIT_QUEUE","serviceLocator","multiactionService","multiactionservice","multiactionServiceWithLimit","guid","Math","override","enableECMMetadataMultiaction","multiactionMetadataService","metadatamultiactionservice","userfieldRequests","deviceType","isSmartphoneDevice","deviceEnum","smartphone","isTabletDevice","tablet","desktop","deviceCode","getDeviceCode","multiaction","multiactionWithLimit","metadataECMMultiaction","getFormData","data","action","idProcess","idForm","idEntity","surrogateKey","idRender","xpathContext","requestedForm","recordXPath","summaryForm","idCase","idWorkitem","idTask","idPageCache","contextType","guidEntity","isRefresh","isActionStartForm","additionalXpaths","idStartScope","readOnlyForm","printversion","recordXpath","downloadOfflineForm","editable","prepare","chrono","initAndStart","ajaxParams","url","type","dataType","serviceType","avoidLoader","ajax","pipe","response","stopAndLog","form","properties","transformGridDataToReadOnly","_data","hasOwnProperty","id","allowAdd","allowDelete","allowEdit","allowGrouping","allowMore","allowSearch","each","key","value","e","getSearchFormData","xpath","idSearchForm","processDataValues","o","submitData","resolveData","contexttype","transitions","surrogatekey","forcePlanCompletion","actionType","toString","toUpperCase","debug","beforeSend","xhr","status","renderingService","name","newName","isEmptyObject","search","substr","getPropertyData","extra","property","sessionId","guidentity","pxpath","prows","ppage","undefined","pfilter","psort","porder","pcaseId","pguidEntity","psurrogatedKey","pactionXpath","ptemplateGuid","pparameters","multiactionConnection","push","getData","getSearchData","term","getCollapseData","collapseState","getGridData","sort","order","page","rows","searchFilter","getGridDataExclusivesSelected","xpathfilter","getUploadCancelImage","pathToBase","getUploadFileUrl","fileId","verifyPathToBase","jQuery","param","getXSRFToken","downloadFile","self","fileUrl","queue","processData","then","binary_file","readFileAsJSON","arguments","contentType","getResponseHeader","media","byteArrayToBlob","stringToByteArray","def","Deferred","reader","FileReader","onloadend","reject","responseText","result","readAsText","promise","binary","getUploadFileEntityUrl","isContextContainerWidgetRender","xpathActions","getUploadAddUrl","getUploadAddFileUrl","isUserPreferences","deleteImage","deleteUploadFile","getECMMetadata","idFileUpload","xPath","idAttrib","interceptor","intercept","source","checkOutFile","cancelCheckOut","deleteECMFile","updateECMFileContent","metaValues","updateECMMetadata","getFileProperties","getFile","getAllDocuments","idWorkItem","getUploadFileEntity","uploadECMFile","fileUpload","fileName","getECMFileUrl","p_sessionId","isFileOnECM","idUpload","read","editGridRecord","addGridRecord","addGridRecordData","saveGridRecord","disableServerGridValidations","deleteGridRecord","getFlipAssociation","flipstate","parseJSON","rollbackGridAction","getSearchDefaultImage","processDataCriteria","criteria","submitSearch","JSON","encode","allowFullSearch","maxRecords","associateStakeholder","associatedUser","refreshAssociateStakeholder","getLetterNotEditableUrl","getLetterContent","getCanGenerateLetter","saveLetterContent","content","fullUrl","getLetterEditorIconsPath","executeButton","getFilePrint","disposition","editLinkForm","saveLinkForm","rollbackLinkForm","commitLinkForm","commitGridAction","sendCheckpoint","sendCheckpointAction","getUserfieldDefinition","userfield","guidUserfield","device","refreshControl","refreshGridCell","column","typeRender","executeRule","rule","create","executeInterface","executeSAPConnector","guidsap","executeConnector","guidConnector","executePipeline","pipeline","generateDocumentTemplate","append","h_pageCacheId","contextXpath","xpathcontext","groupMappingId","groupMapping","xpathAttribute","controlId","getAllDocumentsDownloadUrl","getCaseNumber","replace","isMobile","getCaseAssignees","getWorkitems","onlyUserWorkItems","getGridExportFile","exportType","sendEmail","to","subject","message","selected","invalidatePageCache","getUsersList","getUsersListFromQueryForm","getUsersListFromPreferences","getUsersListForXpathIdBossUser","getUsersListForXpathIdDelegate","getUsersListForStakeholders","getUsersForAssignation","getUsersForm","generateDataToSendByEmail","sendUserEmail","eMailTo","body","getConfiguration","indexOf","getTemplate","forcePersonalizedColumns","templateType","templateGuid","isDefaultTemplate","detectDevice","hasStartForm","guidWFClass","getStartForm","guidprocess","surrogatedKey","mappingstakeholders","cache","editActionForm","getActions","extendParams","ptags","pmaxitems","executeActions","pguidConstructor","pguidAction","getPolymorphicActions","serializePolymorphicActions","values","actions","getParents","node","parents","fillTree","list","children","getChildren","child","displayName","hasConstructor","guidObject","guidConstructor","length","getEntityImage64","width","height","entity","getFilesDataForLayoutUploadControl","processUploadFile","verifyMobilePathToBase","formData","isMashupContext","replaceAll","limit","batch","batchTimer","maxNumberOfActions","deferredBatchExecuting","resolve","disabledRequests","circularDependencies","replicateServiceMethods","getService","eval","proxyMethod","method","parameters","apply","originalPrepare","add","makeCircularDependenciesError","error","messageTmpl","localization","getResource","printf","dependencyFrom","dependencyTo","deferred","h_action","detectCircularDependencies","addNode","clearTimeout","batchTimeout","tag","singleAction","fn","resolveDependencies","i","multiactionError","fire","setTimeout","Object","keys","item","when","execute","rejectDeferreds","done","responses","fail","errorMessage","finalResponse","parse","disableRequests","validateIfBatchIsExecuting","THROW_ERROR","dateFormat","buildConditions","conditions","bGridDetected","bCheckEditability","innerDependencies","operator","expressions","buildConditionOperator","sJsCondition","expression","simple","bGDetected","searchGridReferenceInCondition","buildSimpleCondition","complex","conditionsOperator","condition","sXpath","sArgument","ensureValueJs","ensureEditable","control","renderId","containerId","gridXpathInfo","processGridXpath","gridXpath","remainingXpath","includes","detectedArgumentType","detectConditionArgumentType","argumentType","buildXpath","boolean","argument","buildArgument","enableActionIsChangedSupport","getRender","getRenderById","getColumn","Error","renderType","normalizeType","isRelatedEntityRender","showTime","test","number","toLowerCase","Number","NaN","date","dateFormatter","getDateFromInvariant","Date","setHours","formatInvariant","setMilliseconds","Array","isArray","map","stringify","searchGridReferenceInXpath","isEditable","showRenderNotFoundError","isVisible","visible","isParentVisible","parent","evalGridXpath","evalXpath","grid","gridColumn","cellValue","getCellCurrentValue","index","isString","display","renderToEval","renders","getRenders","rendersToEval","bIsGrid","getColumnDateCorrectFunction","getValue","mapValue","isFileUploaded","isValidEmail","match","RegExp","isButtonPressed","pressed","isGridButtonPressed","arrGridXpath","columns","isChanged","_isChanged","isControlChanged","changed","controlChanged","isGridColumnChanged","gridToEval","xpathColumn","columnChanged","columnToEval","grep","onDeletedGridRow","rowDeleted","idMatches","exec","showContainerNotFoundError","getCurrentDate","includeTime","currentDate","invariantDate","isNaN","isNumeric","getTime","matches","searchForGridReference","commands","command","searchForGridReferenceInCommand","substring","bGridReferenceFound","getGridControl","getControlCell","getColumnDateValueDateAndTime","getColumnDateValueOnlyDate","getColumnDateValueForNoValue","controllers","controller","validations","canvas","enableDebug","_super","initializeValidations","validationBox","appendTo","widget","ui","bizagi_notifications","expand","triggerGlobalHandler","collapse","hide","itemIcon","minimized","clearEnabled","title","orientation","bind","onNotificationClick","buildValidations","fnValidations","buildAllValidations","showErrorMessage","showErrorAlertDialog","showValidationMessage","showAlertMessage","showInfoMessage","focus","icon","itemAdditionalClass","performValidationFn","clearValidationMessages","lastActionButton","getLastActionButton","validating","performValidations","countValidationMessages","hideValidationMessages","setValidationMessage","isIE8","retype","unbind","not","showValidationMessages","expandNotificationBox","autofocus","isExpandedNotificationBox","invalidElements","bRendersValid","validateRenders","bFormValid","triggerHandler","sJSCode","enabled","buildValidation","validationCommand","logError","sStatement","evalValidation","sJsValidation","gridReference","validateEditability","validateEditabilityOnValidations","tokens","sGridStatement","bValid","isValid","forEach","element","showValidationMessageById","console","log","globalDependencies","initialCallFunctions","initialCallFunctionsDeferred","buildActions","internalSubmitActions","initialCallTimeout","initialCallIncrements","actionsHistory","period","processInternalSubmitAction","buildAction","isSummaryOrGlobalForm","typeForm","evalClientAction","serverCommand","concat","elseCommands","isClientAction","dontExecute","len","hashes","executeOnlyClientActions","hash","md5","hashC","unbindActions","handle","refreshActions","newActions","_","dependencies","dependenciesId","buildFunction","renderById","inArray","addDependency","ev","args","j","gridColumns","searchGridColumns","asyncFn","sJsAction","sJsElseAction","bAutomaticRestore","bCondition","queueAction","isServerCommand","buildCommand","buildRestoreCommand","elseCommand","commandType","isRecentAction","prefix","runAction","timeOutActionsHistory","detectCommandArgumentType","commandGridDetected","controlType","container","parseBoolean","ruleObj","guidRule","xpathContextRow","interfaceObj","guidInterface","connectorObj","pipelineObj","guidPipeline","restoreRender","originalProperties","textFormat","changeRenderBackground","background","changeRenderForeground","color","changeRenderVisibility","changeRenderEditability","changeRenderRequired","required","restoreContainer","getContainer","changeContainerBackground","backgroundColor","changeContainerVisibility","toogleContainer","changeContainerEditability","isValidRender","newVisualChange","getVisualChange","isGridComponent","ready","lenIndex","indexes","getIndexes","changeCellBackgroundColor","logVisualChange","changeBackgroundColor","changeButtonBackground","getButton","css","addClass","style","setProperty","changeCellColor","changeColor","changeButtonForeground","changeColumnVisibility","changeCellVisibility","renderingDeferred","changeVisibility","changeButtonVisibility","isMobileDevice","changeFormButtonVisibility","show","changeColumnEditability","changeCellEditability","changeEditability","changeButtonEditability","removeAttr","attr","triggerClick","trigger","changeColumnRequired","changeCellRequired","changeRequired","changeRenderValue","fromAction","changeCellValue","asyncRenderDeferred","setDisplayValue","changeRenderMinValue","changeCellMinValue","normalizeQueryType","changeMinValue","changeRenderMaxValue","changeCellMaxValue","changeMaxValue","executeCalculatedField","runFormula","bizagiQueue","refreshContainer","internalQueue","addParallel","refreshCell","submitFormData","interfaceObject","interface","submitRender","submitOnChange","cleanRenderData","promises","gridPromises","cleanCellData","cleanData","visualChanges","changeActiveItem","loadingDeferred","setAsActiveContainer","buttons","findIndex","navigation","getNavigation","setNavigationButtons","changes","cell","ELEMENT_TYPE_CONTAINER","ELEMENT_TYPE_RENDER","ELEMENT_TYPE_COLUMN","renderFactory","dataService","resources","observableElement","disposed","initializeData","subscribers","getXpathContext","getPageCache","getXpath","getFormContainer","getElementType","resize","size","layout","isScrolledIntoView","effect","eventType","event","one","getRenderedElement","getMode","getParams","getFormType","isReadyToSave","getCustomHandlers","dispose","timeOutDispose","off","disposeTime","isDisposed","processFailMessage","isOfflineForm","errorType","validationController","code","startLoading","endLoading","beforeToRefresh","afterToRefresh","getResourceByKey","resource","fallback","restoreAppearance","getOrientation","rendering","TYPE_QUERY_FORM","uniqueId","ceil","random","childrenHash","elements","createRenderElement","createContainerElement","createFormElement","originalElement","clone","mode","processDuplicateRender","registerRender","isDesign","getElement","getElementsByType","clonedElement","isClone","cloneRender","internalRender","applyContainerDefaults","html","renderContainerHtml","postRenderContainer","renderContainer","isRendered","replaceTag","replaceSelector","replaceChildrenTag","replaceChildrenHtml","replaceFirstWithoutPatterns","executeChildrenPostRender","configureHandlers","applyPlaceHolderPolyfill","configureDesignView","configureLayoutView","config","window","placeHolderConfig","forceApply","Placeholders","enable","childrenElements","childElement","postRenderElement","renderChildrenHtml","temp","renderElement","collectRenderValues","renderValues","canBeSent","collectData","hasChanged","collectRenderValuesQueryForm","canBeSentQueryForm","collectDataQueryForm","firstChild","getRendersByXpath","hasValidGrids","childrenPromises","getFocus","getCustomHandler","customHandlers","timeOutChildrenDispose","saveChildrenVisualChanges","unregisterChildren","removeActions","currentContainer","replaceWith","triggerChildrenActions","restoreChildrenVisualChanges","restoreAppearanceAfterRefresh","restoreContainerAppearance","always","refreshDesignContainer","messageValidation","l","triggerRenderChange","registerActions","actionController","unregisterRender","replaceChild","splice","getChildById","restoreElementAppearance","childrenVisualChanges","rendersById","rendersByXpath","rendersByXpathId","rendersByType","pageCacheId","displayAsReadOnly","userConfirmationMessage","hasRule","paramsRender","processPath","breadCrumb","split","allowValidateAndSaveAction","enableActionValidateAndSave","enableExecuteQuickActions","isFeatureEnabled","allowExecuteQuickActions","useQuickActions","hasQuickActions","initializeButtons","originalProcessButton","processButton","isRoutingDisabled","applicationParent","isOfflineFormsV2Supported","button","caption","ordinal","next","nextWithoutValidations","cancel","back","createnewcase","validate","save","quickAction","routing","refresh","buildButtonStyle","setParam","xpathId","listRendesByType","getRenderByType","listRendesByTypeLength","renderKey","listRender","getGridByColumn","grids","columnsIds","template","fasttmpl","helptext","helpText","queryForm","globalForm","allowQuickActions","complexGatewayContainer","hasClass","activeTransitions","processButtons","mainForm","$canvas","getValidationsContainer","validation","readyDeferred","find","checkboxLabel","transitionId","removeClass","format","newFontSize","bold","isIE","italic","underline","strikethru","strStyle","getContextType","getEndPointAction","formtype","getButtons","on","preventDefault","stopImmediatePropagation","buttonProperties","btn","routingDisabled","prop","propagateExternalEvents","timeOutButton","processDefer","contains","document","documentElement","get","preProcessButton","postProcessButton","setLoaderDeferred","loaderDeferred","deleteLoaderDeferred","isLoaderDeferredSet","useOrSetLoaderDeferred","getLoaderPromise","appendWaitForLoader","getResolveOrReject","defer","getAllTabs","getAllTabsLength","innerTabsLoading","confirmationStatus","getConfirmationStatus","hasConfirmation","showConfirmationBox","submitForm","customHandler","validateForm","saveForm","isNativeMobileDevice","allowOnlineActions","collectRenderValuesForSubmit","deferredsToWait","deferreds","saveParams","offlineType","removeCaseSyncError","removeSyncErrorOnSubmit","removeStartCaseSyncError","removeTaskCaseSyncError","internalSubmitFormOffline","internalSubmitForm","checkWidgetsData","isComplexGatewayPainted","executeButtonAction","loading","start","countProps","showMessageBox","waitingDeferreds","isSaveForDraft","online","syncDeferred","syncParams","stop","offlineAction","buttonPropertiesAction","radNumber","showToastOnSuccessSync","showMobileToast","IdCase","caseNumber","CaseNumber","isOfflineRefreshWithEdition","shouldRefresh","refreshForm","showNotification","text","recreateNativeButtons","bHasValidations","alertMessage","propertiesToDisplayMessages","validationToDisplayMessages","messages","modalError","failHandler","partialSubmitFormOffline","animate","scrollTop","submitDataAction","performAction","checkpointAction","commitAction","prepareCheckpointAction","prepareCommitAction","getButtonAction","flowControlDeferred","sendRollbackAction","jqxhrList","abortAll","res","res2","messageType","addValidationMessage","validationMessage","addErrorMessage","options","selectedTabs","getSelectedTabs","selectedSection","getSelectedSection","isEdited","tabContainers","tabs","tabContainer","tab","activeTab","addSubmitAction","waitingTemplate","waitingOverlay","waitingMessage","tmpl","isSharePoint","getSize","position","getOffset","top","min-height","min-width","outerHeight","left","outerWidth","remove","getFocusedElement","setFocusedElement","errorJson","setSize","offset","updateOriginalValue","executeSubmitData","isRefreshingAfterSync","clearOnlyServer","join","tryToExecuteFunction","internalSubmitOnChange","bRefreshForm","notCollect","cancelPreviousRequest","focusIdentifier","idCaseObject","IdScope","objMessage","strMessage","connection","pop","abort","buttonId","checkpointUrl","commitUrl","rollbackUrl","timeOutController","getFloatingButton","evt","click","isConnected","configureNetworkHandlers","BIZAGI_ENVIRONMENT","handleConnectionChange","handleOfflineSyncEvent","formParams","hasSyncError","offlineFormId","paramsId","database","validateLocalDataForTaskExists","dataResult","applySyncLoader","tasks","warn","isStart","isSyncLoaderRunning","loaderIndex","processQuickButton","isEnable","some","formProperties","hasButtonsConfirmation","needsUserConfirmation","buttonConfirmationMsg","hasFormConfirmation","formConfirmationMsg","saveWorkInProgress","isStartForm","formType","contextEvent","processTemplate","controls","processedTemplate","g1","g2","string","layoutCollection","getCss","layoutGuid","layoutguid","loadStyle","getContextEvent","stripslashes","activate","active","cssclass","expandedIcon","getExpandedIcon","collapsedIcon","getCollapsedIcon","expandedClassIcon","bImmediate","displayAs","sectionContent","renderSectionContent","getBreadcrumb","unshift","getParentDisplayName","getSectionParent","originalParams","getSectionOrientationRTL","cssClass","panel","renderResult","performSearch","searchParams","refreshResults","getRemoteData","collectSearchValues","isMapEmpty","maxRows","dataUrl","records","totalPages","deviceMaxRecordsExceeded","onSearchFinished","errorObject","submitArray","operation","getCriteriaOperation","criteriaData","typeSearch","parseAdditionalProperties","tabItems","counter","tooltip","tabOrientation","getActiveTab","loadOnDemand","containsFocusedElement","setActiveTab","selectedTab","renderTabContent","postRenderTimeout","maxRendersPerScreen","rendersExecuted","renderOptimization","startOptimization","stopOptimization","included","includedInResult","maxLength","trim","valueFormat","isHidden","editabilityEnabled","labelAlign","valueAlign","originalValue","previousValue","calculateInitialLayoutProperties","displayType","getDefaultLabelAlign","getDefaultValueAlign","getRTLAlign","renderWidth","calculateRenderWidth","labelWidth","valueWidth","label","layoutType","renderTemplateName","renderTemplate","encodeString","isFullRender","parseFloat","isExtendedText","isExtended","displayOptionClass","getDisplayOptionClass","labelAlignClass","getAlignClass","valueAlignClass","flexAlignClass","mapAlignClassName","columnAlign","stringLabelWidth","stringValueWidth","printVersion","showFullRender","internalRenderControl","state","replaceControlHtml","resolveResult","renderControl","renderReadOnly","configureSubmitOnChange","isLabelFormat","executePostRender","_element","timeOutRender","internalPostRender","getControl","emptyControlByAsyncRenderDeferred","processLayout","postRenderPrintVersion","postRender","postRenderReadOnly","performExecutionModeMethods","performDesignModeMethods","configureHandlersQueryForm","configureHandlersReadOnly","internalSetInitialValue","internalSetInitialValueFlag","inlineAdd","hasValue","isQueryForm","filter","messageData","isQuery","val","columnEditable","controlValueIsChanged","changeFontBold","changeFontItalic","changeFontUnderline","changeFontStrikethru","changeFontSize","setValue","triggerEvents","identicalObjects","checkRequired","changeRequiredLabel","triggerRenderValidate","validateInputRetype","enableCheck","displayValue","getDisplayValue","sanitizeHTML","getLabel","mustImplement","getControlFiller","readOnlyValue","isObject","encodeHtmlText","changeDisplayOption","changeLabelAlign","alignType","changeValueAlign","customizeRenderWidth","getElementsToStylize","originalColor","currentStyle","getFormattingLabel","compareValue","baseValue","defaultValue","forceCollectData","getNormalizedDate","fullFormat","compareValueObj","_findAction","targetObj","guidAction","objectValue","valuestrikethru","valueunderline","empty","emptyControlByChangeEditability","changeEditabilityCellControl","renderColumn","decorated","getDecorated","internalRenderCellControl","onCellChange","labelElement","controlElement","prepend","saveGridChildrenVisualChanges","controlFiller","currentElement","restoreGridChildrenVisualChanges","restoreGridAppearance","refreshDesignControl","clearDisplayValue","input","change","is","getRenderId","tryCatch","queryValue","searchType","rangeQuery","newParameter","orderType","displayXpath","force","displayOnly","time","defaultControl","first","innerControl","autoScrollBottom","timeOutEffect","align","submitOnChangexpathContext","getCacheIdCase","percent2Number","getIdCase","getIdWorkitem","getidTask","getSessionId","backgroundImage","needBGPaint","background-color","background-image","closest","startActionExecution","actionExecutionDeferred","endActionExecution","readyActionExecution","isFromCreatedRow","isNewRow","submitInvalidatePageCacheRequest","pageCacheToInvalidate","isDesignMode","isExecutionMode","preventDefaultForAnchorTag","isSharepointContext","isWebpartContext","getMainForm","currentForm","fromRender","setInterceptionObserver","$context","callbackFn","intersectionObserver","IntersectionObserver","pluginInitialized","disconnect","POLL_INTERVAL","observe","setResizeObserver","resizeObserver","ResizeObserver","decorateRenders","restoreCellAppearance","gridChildrenVisualChanges","formatValue","processLabelLayout","processControlLayout","warm","$label","changeFontColor","changeTextDecoration","$control","$elements","$element","textDecoration","getCellBackgroundFunction","true","columnDate","changeInputBackgroundColor","false","default","hasLocalData","enableTyping","complementData","isDependant","getParentCombo","valueControl","renderCombo","renderComboTemplate","dataPromise","getTemplateName","emptyValue","emptyLabelForCombo","getTemplateParams","unique","randomNumber","items","formatItem","showEmpty","showCurrentData","getDummyData","remoteDataLoaded","recalculate","allowActions","msgObj","auxMsg","resetData","combo","getSelectedValue","currentValue","parseAdditionalValues","newItem","hidden","bCurrentDataFound","emptyFound","dataValue","comboData","isExtraItem","escapeValue","validateValue","translated","findDataValueById","withAddForm","withEditForm","allowDetail","inlineEdit","getKeys","pointer","totalRows","inlineAddRecords","row","showPreview","drawControls","drawActions","drawControl","drawForms","drawPreview","templateItem","hasData","getTotalRows","getRow","getNextRow","getPreviousRow","getFirstRow","getLastRow","setPointer","isTherePendingInlineRow","addKey","newId","removeKey","navigationform","getParameters","submitAddRequest","addUrl","submitEditRequest","editUrl","submitDeleteRequest","deleteUrl","submitSaveRequest","saveUrl","dataFail","submitRollbackRequest","validateControls","showLetters","randomId","allowDecimals","getDefaultAllowDecimals","numDecimals","BIZAGI_DEFAULT_CURRENCY_INFO","decimalDigits","symbol","positiveFormat","negativeFormat","decimalSymbol","decimalSeparator","digitGroupSymbol","groupSeparator","groupDigits","setGroupDigits","colorize","colorizeOnNegative","dataTypeMinValue","calculateMinValue","dataTypeMaxValue","calculateMaxValue","abs","toFixed","isAndroidDevice","numericInput","numeric","attachRetypeDouble","attachFormatCurrency","removeValidations","formatNumericInput","$input","digitGroupSeparator","minValue","getMinValue","maxValue","getMaxValue","percentage","inputValue","inputLength","oldVal","isInvalidFormat","tempValue","asNumber","messageToShow","isValidRenderMessage","parseInt","executeFormatCurrencyPlugin","formatCurrency","regions","language","blur","tmpData","isIE11","clipboardData","originalEvent","totalVal","keydown","keyUnicode","charCode","keyCode","formatTimeout","floatPart","selectionStart","selectionEnd","currentPosition","keyup","keypress","character","String","fromCharCode","roundToDecimalPlace","removeTrailingZeros","positive","regExp","re","validMessage","getDefaultGroupDigits","thousands","performMinValue","newValue","performMaxValue","createTooltip","currentTitle","toolTipZindex","getMaxZindex","zIndex","timeOutFocus","numericSN","ud","timeFormat","datePickerRegional","formatDate","getDateFormat","indexDateTimeSeparation","lastIndexOf","datePickerFormat","timePickerFormat","i18n","uppercaseDatePlaceholder","rtl","intHandler","isNow","dateControl","getDateControl","timeControl","getTimeControl","onChangeHandler","updatingTime","getNormalizeDate","getFullYear","getTimeFormat","setValueFromCalendarButtons","hasMaxLines","maxLines","regularExpressionExpression","regularExpressionMessage","regularExpression","isEmptyField","textarea","validationMessages","regEx","decodedValue","decodeURI","valueToDisplay","areThereEditableColumns","areThereTotalizedColumns","initProperties","enabledChecks","exclusiveChanges","originalEnabledChecks","columnProperties","groupBy","isExclusive","hasExclusiveCheck","columnRender","singleInstance","totalize","reverse","showSummary","rowsPerPage","initEditabilityProperties","initAddAndDeleteProperties","isSortable","keyColumn","skipInitialLoad","allowFilter","groupSummary","groupText","groupCollapsed","groupOrder","formShowMode","floatingHeader","sortBy","sortOrder","addLabel","editLabel","deleteLabel","exportOptionsLabel","detailLabel","tableCssClass","alreadySaved","overrideGetRemoteData","cellOverrides","isRTL","changeOrderData","rowKey","reverseDataRows","shift","removeRemainingColumns","numColumns","remainingColumns","getColumnType","columnIndex","getGridTemplate","applyTemplate","columnInitializers","initialize","encodeXpath","sortType","spliceRowData","spliceIndex","spliceRowDataVisible","spliceRowDataEditable","rowTemplate","total","buildCellXpathFilter","dataResp","collectGridChange","isPressed","configureColumnSubmitOnChange","keysToDelete","columnExclusiveChanges","columnEnabledChecks","columnXpath","canColumnBeSent","checkedObject","v","cellOverride","getCellOverride","getCellValue","setError","changeCellProperties","saveGrid","tmpEditable","changeColumnsEditability","newRows","saveInlineAddedRows","saveRows","getDepthData","target","isBoolean","updateAffectedCellManually","canBeExported","hasErrors","getDataNewRows","merge","uniqueMessages","isValueValid","k","messagesLength","gridValidationMessage","columnVisible","setCellOverrides","len_v","newRecords","handleJSONResponse","submitForGridChange","timeOutColumn","getEnabledChecks","cleanNewRecords","setRowAsSaved","hasColorHeader","headerFormat","isRTLOrientation","canBeExport","getExclusiveChangeByRow","idRow","el","isCurrentGridCell","columnId","getIndexForCurrentCell","allowDinamiclabel","bindingValue","configureHelpText","performLabelLineBreak","advancedSearch","submitVersion","searchForms","allowSuggest","allowTyping","allowClear","searchLength","enableLocalStorage","expireCache","h_contexttype","enableQuerySuggestBehavior","regexC","hideStatus","selectedValue","mask","regex","showDesignValidations","isNull","getFormattedValue","getDesignModeValue","formatBoolean","formatMonetaryValue","formatDecimalValue","formatDateValue","submitOnChangexpathContextRow","runButtonAction","error_obj","getErrorFormatted","filesCount","horizontal","checkListGroup","vertical","templateUri","useDefaultImage","getImage64","getImageUri","replaceMultiple","allowSendInMail","getValueFilesByData","dataFiles","valueAuxFiles","getDataFilesWithoutScope","valueResult","err","formContainer","files","getUploadXpath","indexHour","dateObj","formattedDateTime","showsymbol","currencySymbol","geolocation","navigator","allowUpdate","getCurrentPosition","succes_callback","fail_callback","getErrorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","performPrecision","latitude","longitude","toPrecision","maxFileSizeOfProperty","maxSize","maxFileSizeOfUser","BIZAGI_SETTINGS","UploadMaxFileSize","maxfiles","validExtensions","singleExtensions","defExtensions","haveFiles","noFiles","file","renderUploadItem","replaceFilesHtml","itemTemplate","getTemplateItemName","buildItemUrl","filename","deleteUploadItem","fileItem","newRow","buildAddParams","BIZAGI_SESSION_NAME","getUploadXpathContext","setRenderRequired","validateObjectStructure","uploadId","validateArrayStructure","reduce","isFormatValid","validator","bzValidator","errors","maxFiles","q_xpath","showMetadata","listControl","fileProperties","getFileExtension","isImage","lengthValues","renderFileLayout","loader","productBuildToAbout","replaceItemHtml","metadataTemplate","metaData","ecm_ecmStatus","ecmStatus","ecm_isVisible","ecm_allowUpdateMetadata","allowUpdateMetadata","ecm_allowDelete","ecm_allowUpdateContent","allowUpdateContent","ecm_allowView","allowView","ecm_allowCheckOut","allowCheckOut","ecm_allowCancelCheckOut","allowCancelCheckOut","ecm_allowEdit","idFileUploads","extension","cookie","lockUploadItem","unlockUploadItem","isEmptyValue","letterOpened","getContextXpath","maximized","likeButton","getFormLinkXpath","executeSubmitOnChange","saveFormLinkData","submitCommitRequest","submitCheckpointRequest","submitDataRequest","downloadalldocuments","allowGenerate","preRenderControl","downloadAllDocuments","documents","getControlHtml","renderDocumentsHtml","renderActionsHtml","noActivateButton","allowgenerate","activateButton","getDocumentXpath","renderDocumentItem","getTemplateItem","joined","buildAllDocumentsUrl","caseId","workitemId","htmlControl","updateControlForPrintMode","validateContainer","replaceActionsHtml","buttonExecuted","$generateLink","isPropagationStopped","stopPropagation","documentTemplateGenerate","attachEvents","downloadAllFiles","deleteDocumentTemplate","resolveDeleteDocumentTemplate","resolveDocumentTemplateGenerate","messageText","autoOpenDocuments","showDocumentPreview","returnCssTypeFile","lenght","redrawDocuments","documentContainer","renderAllDocumentDownload","removeDeleteButton","startIndex","restOfWord","finishIndex","downloadAllDocumentsLink","getErrorTemplate","getTemplateDownload","getTemplateReadonly","getDocumentFile","getAllDocumentFiles","blobFile","downloadBlobFile","dependants","parentCombo","initializingCascadingCombo","bindDependantCombo","isInitialValue","deferredVisible","parentValue","dependantCombo","onChangeFunction","refreshDependantCombo","focusDependant","cleanInput","isEventBinded","unbindDependantCombo","dependant","inputCombo","parentLength","parentArray","slice","configured","itemSelected","listSize","normalizeData","getDataValue","addElement","removeElement","idToRemove","markAsChecked","found","isChecked","canAddMoreItems","$tagsContainer","toArray","acc","getElementWidth","MORE_OPTION_WIDTH","styles","getComputedStyle","filterList","query","$container","stringContainer","stringToSearch","addSelectedElements","findItemById","hasSearchForm","removeLastElement","getListItems","BASE_IMAGE","EMPTY_IMAGE","EMPTY_VALUE","DELAY_TO_SAVE","RESOURCES_FALLBACK","DONE_BUTTON","EDIT_BUTTON","CLEAR_BUTTON","UPLOAD_SUCCESS","UPLOAD_ERROR","TITLE_DONE","TITLE_DRAW","TITLE_EDIT","STATE_TYPE","edit","draw","success","saveDeferred","saveTimestamp","currentState","render_signature_action_edit","render_signature_action_done","render_signature_action_clear","getSignatureContainer","initialized","renderSignature","setState","BzjSignature","setData","binaryValue","Blob","b64toBlob","isValidField","getBase64","base64","dataFile","buildAddFileParams","FormData","isVersion2OrSuperior","compatibilityVersion","blob","blobTob64","getDataUrl","charAt","executeFormFailHandler","assign","saveSignature","dataImage","postSignature","executePartialSaveForm","collectDataToSave","signature","postSignatureOnline","getDataFileFromSignature","saveImageOffline","path","buildOfflineImageId","blobImage","getFormParams","operationType","saveOfflineImage","offlineId","fileService","getOfflineImageName","isSignature","tmpTimeStamp","buildItemUrlOffline","imageId","loadImageFromForm","getOfflineImage","db","AttachmentType","$actions","setActions","isTaskForm","buildOfflineFileLoadingKey","atob","array","Uint8Array","setSignature","initialWidth","entries","entry","contentRect","selectorClass","contextClass","getSignatureContext","getFileDependencies","fileDependencies","loadFile","renderUserfieldControl","extendedData","userEditableControl","getEditableControl","renderComplex","loadUserfieldReadOnly","userReadOnlyControl","getReadonlyControl","getReadonlyValue","setEditableValue","getEditableValue","getPropertyValue","propertyName","jqXHR","textStatus","errorThrown","getRenderElements","getServerResourceURL","userfieldGuid","getRenderValue","showDialog","showPopup","initialParams","userfieldName","startUserfieldLoading","endUserfieldLoading","getUserfieldControl","isColumn","getControlXpathContext","getUserFieldInstance","replicateUserfieldMethods","timeOutUserField","userfieldInstance","isUserPreference","initializeWidthAndHeight","isAutoWidth","isAutoHeight","currentUser","idUser","forceBase64","getFileService","resolveBlobFromPath","buildFullItemUrl","allowFlip","flipped","leftData","rightData","processPropertyValue","flip","makeJsonBase","getColumnData","getRightAssociation","formatJson","associationData","leftId","association","idRight","checked","rightId","removeValue","leftXpath","rightXpath","leftFactName","rightFactName","allowDelegatedUser","loadtemplates","getUserData","decodedDisplayValue","MAX_TAGS_SUPPORTED","OPERATORS","like","defaultLabel","appliesTo","equals","equal","not-equals","starts-with","ends-with","greater-equals-than","less-equals-than","between","is-null","wildcard","skip","filterType","DATATYPE","getOptions","currentFilter","controlInitial","controlEnd","queryFilter","processComplexValue","isCurrentDefaultFilter","renderReadOnlyFilter","getCurrentFilter","$templateFilterReadonly","filterName","$filterValueContainer","isCurrentBetweenFilter","renderReadOnlyBetween","isCurrentTagFilter","renderReadOnlyTags","from","$ChildToAdd","getTagId","formatTagItem","configureFilterHandlers","configureTagHandlers","configureDefaultHandlers","isModeWildcard","filterTagExist","filterOptionIsShowed","clickOnFilter","onToggleDataView","onToggleDataOptions","valueTag","$tagInput","getValidTagValue","addTag","removeLastTag","tagId","removeTag","$buttonClean","setCurrentFilter","closeFloatView","isCurrentNullFilter","floatViewIsCollapsed","renderFloatView","$listView","filters","$floatList","showFloatListView","datasource","floatListHandlers","$containerControl","$containerRender","widthControl","my","at","of","collision","timeoutMouseDown","destroyFloatView","$list","$floatListContext","innerText","showHideCleanButton","destroyFilterContent","setSelectedFilter","onFilterChange","tagIsAdded","newTagItem","tagItem","isMaximumTagsValid","$templateItem","before","tags","lastTag","performTagItems","listString","$listTag","cleanDataFilter","getCurrentAction","defineLiteControl","typeFilter","getSearchType","performQueryValue","newQueryValue","formatInputValue","getRenderProperties","propertiesRender","typeControl","renderProperties","getRequiredProperties","isRange","isMinimumValue","isMinimum","isMaximumValue","isMaximum","setLiteControls","renderLiteControl","getTemplateByType","operators","$cleanButton","onToggleHideElement","elementClass","$buttonClose","toggleClass","idFilter","isCurrentFilter","isCurrentWildcardFilter","isCurrentContainsFilter","isCurrentStartsWithFilter","isCurrentEqualsThanFilter","isCurrentEndsWithFilter","currentAction","defaultFilter","prepareForSetValue","setFilter","performDataValue","dataList","performListValue","noFilterSettled","advancedQuery","leftValues","filterData","rightValues","orderArraySelected","a","b","nA","nB","dataListArray","renderControlReadOnly","valuePassword","userName","userNames","entities","valueXpath","currentPage","refreshStakeholderList","deferredActions","engine","templateEngine","autoGenerateData","selecttemplate","processPropertyValueArgs","tagslist","maxItems","processPropertyValueDataTmplArgs","defaultAllowActions","allowactions","isHorizontal","templatetype","executeActionImmediately","processPropertyValueExecuteAction","notifyExecution","actionName","readOnly","templateDefined","actionManager","guidProcess","processStartForm","processActionFormCollection","processActionForm","addActionToQueue","actionsList","additionalXpath","idParentWorkitem","entityXpath","newValueActionsList","removeActionToQueue","controlValue","countSameActions","count","getPropertiesActionLaucher","actionsLaucher","setRanageControls","minControl","maxControl","$maxCanvas","$minCanvas","renderRangeControl","min","max","defineRangeControl","dateMin","suscribe","observer","notify","dateMax","typeRangeControl","moneyMin","money","moneyMax","numberMin","numberMax","getTagList","processPropertyValueExecuteConstructor","displayNamee","taglist","decoratedClass","showColumn","readonly","isReadonly","instanceDecoratedClass","applyOverrides","propertyOverrides","invalidElement","overrideDecoratedRenderProperties","renderSummary","postRenderSummary","getCell","setSurrogateKey","defaultvalue","setDefaultValue","getCompositeValue","overrideProperties","getSortName","getAnyDecoratedInstance","getSortColumn","timeOutDecorated","arrayEach","originalGetData","getDataForAllCells","findDataById","fetchingData","valueForGrid","tableCell","compositeValue","formattedDate","templates","loadOverrides","initAsyncStuff","loadTemplates","loadTemplate","templateDestination","templateService","resolvedTemplate","getCommonTemplate","containerParams","mobileform","formTemplate","usersForm","section","contentPanel","nestedForm","tabItem","accordion","accordionItem","group","mobilegroup","searchForm","renderParams","extendedText","mobiletext","check","yesno","cascadingCombo","multiSelect","radio","image","ecm","upload","searchList","letter","formLink","link","layoutImage","layoutLink","layoutLabel","layoutText","layoutDateTime","layoutNumber","layoutMoney","layoutPlaceholder","actionLauncher","layoutBoolean","layoutUpload","entityTemplate","polymorphicLauncher","userfieldWrapper","getSearchRender","getQueryRender","fileprint","collectionnavigator","getUser","rangeDate","rangeMoney","rangeNumber","activityCheckList","columnParams","exclusiveCheck","uploadecm","numberScientificNotation","queryExtendedText","queryText","queryCheck","queryYesNo","queryNumber","queryMoney","queryDate","queryCombo","queryCascadingCombo","querySuggest","queryLabel","queryList","queryMultiSelect","querySearch","queryRadio","queryState","queryCaseState","queryProcess","querySearchUser","execution_device","cachedFactory","getRenderFactory","print","factory","getDataService","executionDeferred","deviceFactory","getFactory","subscribe","unsubscribe","publish","update","doc","ownerDocument","location","queryString","getQueryString","sendExecutingPostMessageWebparts","process","refreshing","pathProcess","insertBefore","lastWidth","lastHeight","timeoutResize","resizeInPopUpHTML","configureOpenForm","configureRefresh","configureRouting","configureRenderError","configureResize","configureGlobalHandlers","enableE2EInterface","errorTemplate","transformGridControl","processForm","getFailDeferred","jsonErrorMessage","refreshParams","fastEmpty","canvasParent","isOpen","timeoutTrigger","resizeTimeout","forceResize","triggerParams","heightActivitiFormContainer","renderForm","buttonContainer","heightButtonContainer","renderBehavior","postMessageSocket","heightCanvas","innerHeight","iframeCommunicator"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.render.services.service\",\n{\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\",\n  BA_MULTIACTION_WITH_LIMIT_NUMBER: 5,\n  BA_MULTIACTION_WITH_LIMIT_QUEUE: \"multiaction\" },\n\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(params) {\n    params = params || {};\n    params.context = params.context || \"workflow\";\n    params.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.serviceLocator = new bizagi.render.services.context(params);\n    this.multiactionService = new bizagi.render.services.multiactionservice(this);\n    this.multiactionServiceWithLimit = new bizagi.render.services.multiactionservice(this, this.Class.BA_MULTIACTION_WITH_LIMIT_NUMBER, this.Class.BA_MULTIACTION_WITH_LIMIT_QUEUE);\n    this.guid = Math.guid();\n\n    if (bizagi.override.enableECMMetadataMultiaction) {\n      this.multiactionMetadataService = new bizagi.render.services.metadatamultiactionservice(this);\n    }\n\n    // Userfield definitions mini-cache\n    this.userfieldRequests = {};\n\n    this.deviceType = params.deviceType || (bizagi.util.isSmartphoneDevice() ? bizagi.deviceEnum.smartphone : bizagi.util.isTabletDevice() ? bizagi.deviceEnum.tablet : bizagi.deviceEnum.desktop);\n    this.deviceCode = bizagi.util.getDeviceCode();\n  },\n\n  /*\r\n      *   Return the multiaction-service\r\n      */\n  multiaction: function multiaction() {\n    return this.multiactionService;\n  },\n\n  /*\r\n     *   Return the multiaction-service\r\n     */\n  multiactionWithLimit: function multiactionWithLimit() {\n    return this.multiactionServiceWithLimit;\n  },\n\n  metadataECMMultiaction: function metadataECMMultiaction() {\n    return bizagi.override.enableECMMetadataMultiaction ? this.multiactionMetadataService : this;\n  },\n  /*\r\n      *   SINGLE SERVICES METHODS\r\n      */\n\n  /*\r\n          *   Gets form data\r\n          *   Returns a promise of the data being retrieved\r\n          */\n  getFormData: function getFormData(params) {\n    var self = this;\n\n    // Check if the params contains mocked data\n    if (params && params.data) {\n      return params.data;\n    }\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action || \"LOADFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idProcess)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idProcess\"] = params.idProcess;\n    if (params.idForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    if (params.idEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idEntity\"] = params.idEntity;\n    if (params.surrogateKey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.requestedForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"requestedForm\"] = params.requestedForm;\n    if (params.recordXPath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordXPath\"] = params.recordXPath;\n    if (params.summaryForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"summaryForm\"] = params.summaryForm;\n    if (params.idCase)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    if (params.idWorkitem)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    if (params.idTask)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idTask\"] = params.idTask;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contextType)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contextType;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (!bizagi.util.isEmpty(params.isRefresh))\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isRefresh\"] = params.isRefresh;\n    if (params.isActionStartForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\n    if (params.additionalXpaths)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    if (params.idStartScope)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    if (typeof params.readOnlyForm !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"readonlyform\"] = params.readOnlyForm;\n    if (typeof params.printversion !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"printForm\"] = params.printversion;\n    if (typeof params.recordXpath !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    if (params.guid)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guid\"] = params.guid;\n    if (params.downloadOfflineForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"downloadofflineform\"] = 1;\n\n    if (params.editable === false) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"DisplayFormAsReadOnly\"] = true;\n    }\n\n    // Support parameter from ui\n    // Parameters that affects all the same attributes of render\n    if (params.printversion) {\n      //Print limit grid rows\n      var BA_ALL_PARAMETER_PREFIX = \"all_\";\n\n      if (params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"]) {\n        data[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"] = params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"];\n      }\n    }\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n\n    // Call ajax and returns promise\n    bizagi.chrono.initAndStart(\"data\");\n    var ajaxParams = {\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: params.action || \"LOAD\" };\n\n    if (params.downloadOfflineForm) {\n      ajaxParams.avoidLoader = true;\n    }\n    return $.ajax(ajaxParams).\n    pipe(function (response) {\n      bizagi.chrono.stopAndLog(\"data\");\n\n      // Transform data for read only version\n      if (params.printversion) {\n        try {\n          response.form.properties.editable = \"False\";\n\n          var transformGridDataToReadOnly = function transformGridDataToReadOnly(_data) {\n            if (_data == null) {\n              return _data;\n            }\n            if (_data.hasOwnProperty('type') && _data.type == 'grid') {\n              _data.id = data.id + \"-print\";\n              _data.allowAdd = \"False\";\n              _data.allowDelete = \"False\";\n              _data.allowEdit = \"False\";\n              _data.allowGrouping = \"False\";\n              _data.allowMore = \"False\";\n              _data.allowSearch = \"False\";\n            } else {\n              $.each(data, function (key, value) {\n                if (_typeof(value) == 'object') {\n                  _data[key] = transformGridDataToReadOnly(_data[key]);\n                }\n              });\n            }\n            return _data;\n          };\n          response = transformGridDataToReadOnly(response);\n        } catch (e) {\n        }\n      }\n\n      return response;\n    });\n  },\n  /*\r\n      *   Gets a search form data\r\n      *   Returns a promise of the data being retrieved\r\n      */\n  getSearchFormData: function getSearchFormData(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHFORM\";\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idSearchForm)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHFORM\" });\n\n  },\n\n  processDataValues: function processDataValues(data) {\n    var o;\n    data = $.extend(true, {}, data);\n    for (o in data) {\n      if (data.hasOwnProperty(o) && $.type(data[o]) == \"object\") {\n        // for search\n        if (data[o].hasOwnProperty(\"id\")) {\n          data[o] = data[o].id;\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Sends a form action to the server\r\n      */\n  submitData: function submitData(params) {\n    var self = this;\n\n    // Define data\n    data = self.resolveData(params.data || {}, params.xpathContext);\n    data = self.processDataValues(data);\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action;\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.transitions)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"transitions\"] = params.transitions;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.forcePlanCompletion)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"forcePlanCompletion\"] = params.forcePlanCompletion;\n\n    /* if (params.isActionStartForm)\r\n                                                                                                        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\r\n                                                                                                        */\n    var actionType = params.action.toString().toUpperCase();\n\n    // Log submit data\n    bizagi.debug(\"Data sent\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: actionType,\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n      } });\n\n  },\n  /*\r\n      * Get data processing xpathcontext\r\n      */\n  resolveData: function resolveData(data, xpathContext) {\n    var name, newName, value;\n    if (!$.isEmptyObject(data) && xpathContext) {\n      if (xpathContext.search(/\\[id=\\d+\\]/) !== -1) {\n        for (name in data) {\n          if (name.search(/\\[id=\\d+\\]/) !== -1 && xpathContext == name.substr(0, name.search(/\\]/) + 1)) {\n            newName = name.substr(name.search(/\\]/) + 2);\n            value = data[name];\n            data[newName] = value;\n            delete data[name];\n          }\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Fetch a property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   property\r\n      */\n  getPropertyData: function getPropertyData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n\n    if (params.sessionId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.guidentity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.pxpath)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpath\"] = params.pxpath;\n    if (params.prows)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.prows;\n    if (params.ppage)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.ppage;\n    if (params.pfilter != undefined && params.pfilter != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = params.pfilter;\n    /*else\r\n                                                                              data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = \"\";*/\n    if (params.psort != undefined && params.psort != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.psort;\n    if (params.porder)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.porder;\n    if (params.pcaseId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"caseId\"] = params.pcaseId;\n    if (params.pguidEntity)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidEntity\"] = params.pguidEntity;\n    if (params.psurrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.psurrogatedKey;\n    }\n    if (params.pactionXpath) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"actionXpath\"] = params.pactionXpath;\n    }\n    if (params.ptemplateGuid) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"templateGuid\"] = params.ptemplateGuid;\n    }\n    if (params.pparameters) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parameters\"] = params.pparameters;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      */\n  getData: function getData(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch search data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   term\r\n      */\n  getSearchData: function getSearchData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"term\"] = params.term;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  /*\r\n      * Refresh tha data property from the server\r\n      * Params:\r\n      *   -   collapsestate\r\n      */\n  getCollapseData: function getCollapseData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"collapseState\"] = params.collapseState;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"collapseState\" }));\n\n  },\n\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch grid data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   sort\r\n      *   -   page\r\n      *   -   rows\r\n      */\n  getGridData: function getGridData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.order;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  getGridDataExclusivesSelected: function getGridDataExclusivesSelected(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathfilter\"] = params.xpathfilter;\n    return this.getPropertyData($.extend(params, {\n      property: \"exclusivesSelected\" }));\n\n  },\n\n  /*\r\n      *   Returns the upload plugin cancel image\r\n      */\n  getUploadCancelImage: function getUploadCancelImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-upload-cancel-image\");\n  },\n  /*\r\n      *   Returns the upload file url for each file\r\n      */\n  getUploadFileUrl: function getUploadFileUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  downloadFile: function downloadFile(params) {\n    var self = this;\n    var fileUrl = self.getUploadFileUrl(params);\n\n    return $.ajax({\n      url: fileUrl,\n      type: \"GET\",\n      queue: params.queue,\n      dataType: \"binary\",\n      processData: false //Always false for binary dataType\n    }).\n    then(function (binary_file) {\n      if (binary_file.type == \"application/json\") {\n        return self.readFileAsJSON(binary_file);\n      }\n\n      if (typeof binary_file == \"string\") {\n        var xhr = arguments[2];\n        var contentType = xhr.getResponseHeader('Content-type');\n        binary_file = bizagi.util.media.byteArrayToBlob(self.stringToByteArray(binary_file), contentType);\n      }\n      return binary_file;\n    });\n  },\n\n  readFileAsJSON: function readFileAsJSON(binary_file) {\n    var def = new $.Deferred();\n    var reader = new FileReader();\n    reader.onloadend = function () {\n      def.reject({ responseText: reader.result });\n    };\n    reader.readAsText(binary_file);\n    return def.promise();\n  },\n\n  stringToByteArray: function stringToByteArray(binary) {\n    return bizagi.util.stringToByteArray(binary);\n  },\n\n\n  getUploadFileEntityUrl: function getUploadFileEntityUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    if (params.isContextContainerWidgetRender) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\n    } else {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    }\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddUrl: function getUploadAddUrl() {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-add-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDFILE\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddFileUrl: function getUploadAddFileUrl(isUserPreferences) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"form-submit-data-upload\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = isUserPreferences === true ? \"SAVEUSERIMAGE\" : \"savefile\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n\n  deleteImage: function deleteImage(params) {\n    var self = this;\n\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"DELETEUSERIMAGE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing image '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  deleteUploadFile: function deleteUploadFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing file in upload '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n\n  },\n  /*\r\n      * Return file meta data\r\n      */\n  getECMMetadata: function getECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    // Log submit data\n    bizagi.debug(\"Get file metadata '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  checkOutFile: function checkOutFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"checkOutFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * cancelCheckOut\r\n      **/\n  cancelCheckOut: function cancelCheckOut(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"cancelCheckOut\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  deleteECMFile: function deleteECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"delete\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"delete file'\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update ECM file content\r\n      **/\n  updateECMFileContent: function updateECMFileContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMFileContent\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file content '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update file content\r\n      **/\n  updateECMMetadata: function updateECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file meta data '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getFileProperties: function getFileProperties(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getFileProperties\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Get file properties '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n  },\n  /**\r\n      * Get file item\r\n      * @param params\r\n      * @returns {{}|*}\r\n      */\n  getFile: function getFile(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /**\r\n      * Document Templates generate rest service\r\n      * @param params\r\n      * @returns {string}\r\n      */\n  getAllDocuments: function getAllDocuments(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\n    var data = {};\n\n    data[\"contextXpath\"] = params.xpathContext;\n    data[\"xpathAttribute\"] = params.xpath;\n    data[\"idCase\"] = params.idCase;\n    data[\"idWorkItem\"] = params.idWorkItem;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  getUploadFileEntity: function getUploadFileEntity(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n\n    if (params.isContextContainerWidgetRender) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\n    } else {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    }\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  uploadECMFile: function uploadECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"uploadECMFile\";\n    data.fileUpload = params.fileUpload; // Content of file\n    data.xPath = params.xPath;\n\n    data.idAttrib = params.idAttrib;\n    data.fileName = params.fileName;\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Upload ECM file '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getECMFileUrl: function getECMFileUrl(params) {\n    var self = this;\n    var url = params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"File\";\n\n    // Define data\n    var data = params.extra || {};\n\n    data.action = \"viewECMFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.fileName = params.fileName;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    if (params.p_sessionId) {\n      data.p_sessionId = params.p_sessionId;\n    }\n\n\n    // Log submit data\n    bizagi.debug(\"View uploaded file '\" + params.xPath + \"'\", data);\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n  /*\r\n      *\r\n      */\n  isFileOnECM: function isFileOnECM(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    data[\"action\"] = \"isFileOnECM\";\n    data[\"idUpload\"] = params.idUpload;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl(\"render-ecm-upload-url\"), data);\n  },\n  /*\r\n      *   Start a grid record edition\r\n      */\n  editGridRecord: function editGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EDITRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending edit request for relation '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-edit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"EDITRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecord: function addGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row, and sending the data at the same time\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecordData: function addGridRecordData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATIONWITHDATA\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Build data to submit\n    var submitData = self.processDataValues(params.submitData || {});\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATIONWITHDATA\" });\n\n  },\n  /*\r\n      *   Submits the grid record data to the server\r\n      */\n  saveGridRecord: function saveGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disableServerGridValidations\"] = params.disableServerGridValidations || false;\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVERELATION\" });\n\n  },\n  /*\r\n      *   Deletes a grid record in the server\r\n      */\n  deleteGridRecord: function deleteGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending delete request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"REMOVERELATION\" });\n\n  },\n\n  /*\r\n      * Get association flipped status\r\n      */\n  getFlipAssociation: function getFlipAssociation(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"flipped\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"flipstate\"] = params.flipstate;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log request data\n    bizagi.debug(\"Sending request for flip association control '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"text\" }).\n    pipe(function (response) {\n      try {\n        // Try to attempt to parse JSON\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        // If JSON is not valid we need to return the original text response\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Cancels an add or edit request for a grid\r\n      */\n  rollbackGridAction: function rollbackGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ROLLBACK\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-rollback-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ROLLBACK\" });\n\n  },\n  /*\r\n      *   Returns the search render default image\r\n      */\n  getSearchDefaultImage: function getSearchDefaultImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-search-default-image\");\n  },\n\n  processDataCriteria: function processDataCriteria(criteria) {\n    var o;\n    criteria = $.extend(true, [], criteria);\n    for (o in criteria) {\n      if (criteria.hasOwnProperty(o) && criteria[o].hasOwnProperty(\"value\") && $.type(criteria[o].value) == \"object\") {\n        // for search\n        if (criteria[o].value.hasOwnProperty(\"id\") && criteria[o].value.hasOwnProperty(\"label\")) {\n          criteria[o].value = criteria[o].value.id;\n        }\n      }\n    }\n    return criteria;\n  },\n\n  /*\r\n      *   Perform entity search in the server\r\n      */\n  submitSearch: function submitSearch(params) {\n    var self = this,criteria;\n\n    // Define data\n    var data = params.extra || {};\n\n    var sort = params.sort && params.sort !== \"\" ? params.sort : \"\";\n\n    if (params.order && params.order !== \"\" && sort !== \"\")\n    sort += \" \" + params.order;\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHENTITYFORRENDER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"pageSize\"] = params.rows;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n\n    criteria = self.processDataCriteria(params.criteria);\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchCriteria\"] = JSON.encode(criteria);\n\n    // Optional search params\n    if (params.allowFullSearch)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"allowFullSearch\"] = params.allowFullSearch;\n    if (params.maxRecords)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxRowsAllowed\"] = params.maxRecords;\n\n    // Log submit data\n    bizagi.debug(\"Performing advanced search\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-advanced-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHENTITYFORRENDER\" });\n\n  },\n\n  /*\r\n      *   Submits the stakeholder associated\r\n      */\n  associateStakeholder: function associateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    data[\"associatedUser\"] = params.associatedUser;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\" });\n\n  },\n\n  /*\r\n      *   Refresh the stakeholder associated list\r\n      */\n  refreshAssociateStakeholder: function refreshAssociateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /*\r\n      *   Gets the link to the letter\r\n      */\n  getLetterNotEditableUrl: function getLetterNotEditableUrl(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Call ajax and returns promise\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-notEditable-url\");\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Gets the content for editable letters\r\n      */\n  getLetterContent: function getLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"html\" }).\n    pipe(function (response) {\n      try {\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Get the can generate letter flag\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CANGENERATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *   Saves the content for editable letters\r\n      */\n  saveLetterContent: function saveLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"UPDATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Define content\n    var content = params.content || \"\";\n\n    // Define url\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-save-url\");\n    var fullUrl = url + \"?\" + jQuery.param(data);\n\n    // Log submit data\n    bizagi.debug(\"Save request for letter sent to: \" + fullUrl, content);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: fullUrl,\n      data: content,\n      type: \"POST\",\n      dataType: \"html\" });\n\n  },\n  /*\r\n      *   Returns the icons path for the letter plugin\r\n      */\n  getLetterEditorIconsPath: function getLetterEditorIconsPath() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-letter-content-icons\");\n  },\n  /*\r\n      *   Executes a button action in the server\r\n      */\n  executeButton: function executeButton(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"buttonRule\" }));\n\n  },\n  /**\r\n      * Executes a fileprint action in the server\r\n      * @param params\r\n      * @returns {{}|*}\r\n      */\n  getFilePrint: function getFilePrint(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"data\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /*\r\n      *   Start a link form edition\r\n      */\n  editLinkForm: function editLinkForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n  /*\r\n      *   Saves the content of the link form\r\n      */\n  saveLinkForm: function saveLinkForm(params) {\n    // Actually it does the same than edit grid records\n    //return this.saveGridRecord(params);\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVEFORMLINKRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVEFORMLINKRELATION\" });\n\n  },\n  /*\r\n      *   Rollbacks the link form edition\r\n      */\n  rollbackLinkForm: function rollbackLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.rollbackGridAction(params);\n  },\n  /*   Commit the link form edition\r\n      */\n  commitLinkForm: function commitLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.commitGridAction(params);\n  },\n  /*   Sends schekpoint action\r\n      */\n  sendCheckpoint: function sendCheckpoint(params) {\n    // Actually it does the same than rollback grid records\n    return this.sendCheckpointAction(params);\n  },\n  /*\r\n      *   Loads the userfield definition\r\n      */\n  getUserfieldDefinition: function getUserfieldDefinition(params) {\n    var self = this;\n    params = params || {};\n\n    // Check in deferreds cache\n    if (self.userfieldRequests[params.userfield])\n    return self.userfieldRequests[params.userfield];\n\n    // Required params: idCase\n    self.userfieldRequests[params.userfield] = $.read(self.serviceLocator.getUrl(\"render-userfield-definition\"),\n    {\n      guidUserfield: params.userfield,\n      device: params.device || \"desktop\" });\n\n\n\n    // Return deferred\n    return self.userfieldRequests[params.userfield];\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshControl: function refreshControl(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESH\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"PARTIALREFRESH\" });\n\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshGridCell: function refreshGridCell(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESHGRIDCELL\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidcolumn\"] = params.column;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n    params.typeRender ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"typeRender\"] = params.typeRender : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Request to execute rule on server\r\n      * @param {object} params h_pageCacheId, guidrule\r\n      */\n  executeRule: function executeRule(params) {\n    var self = this;\n\n\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTERULE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidrule\"] = params.rule || \"\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute interface on server\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeInterface: function executeInterface(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEINTERFACE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidinterface\"] = params[\"interface\"] || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute SAP Connecor\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeSAPConnector: function executeSAPConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTESAP\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidsap\"] = params.guidsap || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute a Bizagi connector\r\n      * @param params\r\n      * @return {{}}\r\n      */\n  executeConnector: function executeConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTECONNECTOR\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidConnector\"] = params.guidConnector || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /**\r\n      * Request to execute pipeline on server\r\n      * @param {object} params h_pageCacheId, guidpipeline\r\n      */\n  executePipeline: function executePipeline(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEPIPELINE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidpipeline\"] = params.pipeline || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  generateDocumentTemplate: function generateDocumentTemplate(params) {\n    var self = this;\n    params = params || {};\n    params.append = params.append ? params.append : false;\n\n    return $.create(\n    self.serviceLocator.getUrl(\"render-document-generate\"),\n    {\n      h_pageCacheId: params.idPageCache,\n      contextXpath: params.xpathcontext,\n      groupMappingId: params.groupMapping,\n      xpathAttribute: params.xpath,\n      append: params.append,\n      controlId: params.id });\n\n\n  },\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  getAllDocumentsDownloadUrl: function getAllDocumentsDownloadUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\n    var data = {};\n    data[\"h_pageCacheId\"] = params.idPageCache;\n    data[\"contextXpath\"] = params.xpathContext;\n    data[\"xpathAttribute\"] = params.xpath;\n    data[\"idCase\"] = params.idCase;\n    data[\"idWorkItem\"] = params.idWorkItem;\n    data[\"p_sessionId\"] = params.sessionId;\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n\n  },\n\n\n  getCaseNumber: function getCaseNumber(params) {\n    var self = this;\n    //this function use sendEMail\n    //and not possible use dat ain ajax\n    //this is workaround (rhonyp)\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"case-handler-getCaseSummary\").replace(\"{idCase}\", params.idCase) + \"?eventAsTasks=false&onlyUserWorkItems=true&mobileDevice=\" + bizagi.isMobile(),\n      type: \"GET\",\n      dataType: \"json\" });\n\n  },\n\n  getCaseAssignees: function getCaseAssignees(params) {\n    var self = this;\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl(\"case-handler-getCaseAssignees\"), {\n      idCase: params.idCase }).\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  getWorkitems: function getWorkitems(params) {\n    var self = this;\n    params = params || {};\n\n    return $.read(self.serviceLocator.getUrl(\"case-handler-getWorkItems\"), {\n      idCase: params.idCase,\n      onlyUserWorkItems: params.onlyUserWorkItems || \"\" });\n\n  },\n\n  /**\r\n      * Executes a grid export action in the server\r\n      * @param params\r\n      * @returns {string}\r\n      */\n  getGridExportFile: function getGridExportFile(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.exportType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /*\r\n      * Executes a send email action in the server\r\n      */\n  sendEmail: function sendEmail(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"sendEmail\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n\n    // Email parameters\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"to\"] = params.to;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"subject\"] = params.subject;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"message\"] = params.message;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"selected\"] = JSON.encode(params.selected);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    var url = params.url || self.serviceLocator.getUrl(\"form-get-data\");\n\n    return $.create(url, data);\n  },\n\n  /*\r\n      * Request to invalidates page cache in server, since it is no needed anymore\r\n      */\n  invalidatePageCache: function invalidatePageCache(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"INVALIDATEPAGECACHE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"INVALIDATEPAGECACHE\" });\n\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersList: function getUsersList(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersList\"), params);\n  },\n  /*\r\n     * Search users usign parameters suchs as userName, fullName, domain and organization\r\n     * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n     * @return {deferred} ajax object with JSON content\r\n     */\n  getUsersListFromQueryForm: function getUsersListFromQueryForm(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"render-query-getUsersList\"), params);\n  },\n  /*\r\n      * Search users for preferences usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListFromPreferences: function getUsersListFromPreferences(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-FromPreferences\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the boss field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdBossUser: function getUsersListForXpathIdBossUser(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdBossUser\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the delegate field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdDelegate: function getUsersListForXpathIdDelegate(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdDelegate\"), params);\n  },\n\n  /*\r\n      * Search users for Stakeholders\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListForStakeholders: function getUsersListForStakeholders(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForStakeholders\"), params);\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersForAssignation: function getUsersForAssignation(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersForAssignation\"), params);\n  },\n\n  /**\r\n      * Get Users Creation/Edition Form\r\n      */\n  getUsersForm: function getUsersForm(params) {\n    var self = this;\n    return $.create(self.serviceLocator.getUrl(\"admin-usersform\"), params);\n  },\n  /**\r\n      *   Return generate Data To Send By Email\r\n      */\n  generateDataToSendByEmail: function generateDataToSendByEmail(params) {\n    var self = this;\n    params = params || {};\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-GenerateDataToSendByEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Return generate Send user password Mail\r\n      */\n  sendUserEmail: function sendUserEmail(params) {\n    var self = this;\n    params = params || {};\n    var data = {\n      action: \"SendUserEmail\",\n      emailTo: params.eMailTo,\n      subject: params.subject,\n      body: params.body };\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-sendUserEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /**\r\n      * Get bizagi configuration\r\n      * @param {Function}   type callback function when the file load is succed\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getConfiguration: function getConfiguration() {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"admin-users-config\");\n\n    return $.read(url);\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyPathToBase: function verifyPathToBase(pathToBase, url) {\n\n    if (url.indexOf(\"http\") != -1 && pathToBase != \"\") {\n      return url;\n    } else {\n      return pathToBase + url;\n    }\n\n  },\n\n  /**\r\n      * Get template of entity\r\n      * @param params { guid, prepare}\r\n      */\n  getTemplate: function getTemplate(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADTEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = \"entity\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guid;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isProcessData\"] = params.forcePersonalizedColumns;\n\n    if (params.templateType) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templatetype\"] = params.templateType;\n    }\n\n    if (params.templateGuid) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templateguid\"] = params.templateGuid;\n    }\n\n    if (params.isDefaultTemplate != undefined) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isDefaultTemplate\"] = params.isDefaultTemplate;\n    }\n\n    // Fix device type since on mobility there are tablet_ios, tablet_android, smartphone_ios, smartphone_ios\n    // and the service recives either tablet or smartphone\n    var deviceType = bizagi.util.detectDevice();\n    if (bizagi.util.isTabletDevice()) {\n      deviceType = \"tablet\";\n    } else if (bizagi.util.isSmartphoneDevice()) {\n      deviceType = \"mobile\";\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = deviceType;\n\n    // When prepare is true just return data, this feature is used by multiaction service\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-get-data\"), data);\n  },\n\n  /**\r\n      * Chek if an entity has startform\r\n      * @param params\r\n      * @return {*}\r\n      */\n  hasStartForm: function hasStartForm(params) {\n    var self = this;\n    var data = {};\n\n    if (params.guidWFClass) {\n      data.guidWFClass = params.guidWFClass;\n    }\n\n    return $.read(self.serviceLocator.getUrl(\"render-processes-startform\"), data);\n  },\n\n  /**\r\n      * Get the start form of the case\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getStartForm: function getStartForm(params) {\n    var self = this;\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADSTARTFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidprocess\"] = params.guidprocess;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idCase) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    }\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idWorkitem) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    }\n    if (params.additionalXpaths) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n    if (params.surrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.surrogatedKey;\n    }\n    if (params.recordXpath) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    }\n    if (params.mappingstakeholders) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"mappingstakeholders\"] = params.mappingstakeholders;\n    }\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      cache: true });\n\n  },\n  /*\r\n      *   Start a link form edition\r\n      */\n  editActionForm: function editActionForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getActions: function getActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.pmaxitems) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxitems\"] = params.pmaxitems;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n\n  /**\r\n      * Execute actions or constructors\r\n      * @param params\r\n      */\n  executeActions: function executeActions(params) {\n    var self = this;\n    var extendParams = $.extend({}, params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.pguidConstructor) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidConstructor\"] = params.pguidConstructor;\n    }\n\n    if (params.pguidAction) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidAction\"] = params.pguidAction;\n    }\n    if (params.prepare) {\n      return data;\n    }\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getPolymorphicActions: function getPolymorphicActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.additionalXpaths) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /**\r\n      * Make a JSON tree of polymorphic constructors categories\r\n      * @param values\r\n      * @return {Array}\r\n      */\n  serializePolymorphicActions: function serializePolymorphicActions(values) {\n    // json serializer\n    var actions = [];\n    var GUID_ENTITY = 0,DISPLAY_NAME = 1,XPATHCONTEXT = 2,TYPE = 3,GUID_OBJECT = 4,GUID_CONSTRUCTOR = 5,GUID_PARENT_ENTITY = 6;\n\n    /**\r\n                                                                                                                                 * Get children by guid of entity\r\n                                                                                                                                 * @param guid\r\n                                                                                                                                 * @return {Array}\r\n                                                                                                                                 */\n    var getChildren = function getChildren(guid) {\n      var children = [];\n      guid = guid || \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_PARENT_ENTITY] == guid) {\n          children.push(value);\n        }\n      });\n      return children;\n    };\n\n    /**\r\n        * Get parents by action object\r\n        * @param node\r\n        * @return {string}\r\n        */\n    var getParents = function getParents(node) {\n      node = node || {};\n      var parents = \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_ENTITY] == node[GUID_PARENT_ENTITY]) {\n          parents += getParents(value) + value[DISPLAY_NAME] + \" > \";\n        }\n      });\n      return parents;\n    };\n\n\n    /**\r\n        * Make a tree of actions\r\n        * @param list\r\n        * @param guid\r\n        * @return {*}\r\n        */\n    var fillTree = function fillTree(list, guid) {\n      var node;\n      var children = getChildren(guid);\n      $.each(children, function (key, value) {\n        var child = fillTree([], value[GUID_ENTITY]);\n        node = {\n          \"guidEntity\": value[GUID_ENTITY],\n          \"displayName\": value[DISPLAY_NAME],\n          \"hasConstructor\": value[GUID_CONSTRUCTOR] ? true : false,\n          \"type\": value[TYPE],\n          \"guidObject\": value[GUID_OBJECT],\n          \"guidConstructor\": value[GUID_CONSTRUCTOR],\n          \"xpathContext\": value[XPATHCONTEXT],\n          \"children\": child,\n          \"parents\": getParents(value) };\n\n        if (node.guidConstructor !== \"\" || node.children.length > 0) {\n          list.push(node);\n        }\n      });\n\n      return list;\n    };\n    fillTree(actions, \"\");\n    return actions;\n  },\n\n  /**\r\n      * Gets the image for an entity xpath\r\n      * @param params\r\n      */\n  getEntityImage64: function getEntityImage64(params) {\n    var self = this,\n    data = {\n      width: params.data,\n      height: params.height,\n      xpath: params.xpath },\n\n    url = self.serviceLocator.getUrl(\"render-entity-layout-image64\").replace(\"{entity}\", params.entity).replace(\"{surrogateKey}\", params.surrogateKey);\n\n    return $.ajax({\n      url: url,\n      data: data });\n\n  },\n\n  /**\r\n      * Get data files when user access from my stuff, because there is no scope\r\n      */\n  getFilesDataForLayoutUploadControl: function getFilesDataForLayoutUploadControl(params) {\n    var self = this;\n    return $.read(self.serviceLocator.getUrl(\"render-entity-layout-upload-files\"), params);\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(params) {\n    return $.ajax({\n      url: this.verifyMobilePathToBase(bizagi.services.ajax.pathToBase || \"\", params.url),\n      data: params.formData,\n      type: \"POST\",\n      contentType: false,\n      processData: false });\n\n  },\n\n  /**\r\n      * Commit an add or edit request for a grid\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  commitGridAction: function commitGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"COMMIT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-commit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"COMMIT\" });\n\n  },\n  /*\r\n      *   Commit an add or edit request for a grid\r\n      */\n  sendCheckpointAction: function sendCheckpointAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CHECKPOINT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending checkpoint request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-checkpoint-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"CHECKPOINT\" });\n\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyMobilePathToBase: function verifyMobilePathToBase(pathToBase, url) {\n    return bizagi.util.isMashupContext() ? (url || \"\").replaceAll(pathToBase, \"\") : url;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to multiaction rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.render.services.multiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\n{\n\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(service, limit, queue) {\n    this.service = service;\n    this.serviceLocator = service.serviceLocator;\n\n    // Multiaction - batch stuff\n    this.batch = {};\n    this.batchTimer = 50;\n    this.maxNumberOfActions = limit || 0;\n    this.queue = queue || null;\n    this.deferredBatchExecuting = $.Deferred();\n    this.deferredBatchExecuting.resolve();\n    this.disabledRequests = false;\n    this.circularDependencies = new bizagi.circularDependencies();\n\n    // Create proxyed version of methods\n    this.replicateServiceMethods();\n  },\n\n  /*\r\n     *   Returns the internal service\r\n     */\n  getService: function getService() {\n    return this.service;\n  },\n\n  /*\r\n     *   Create a proxied multiaction version for service calls\r\n     */\n  replicateServiceMethods: function replicateServiceMethods() {\n    var self = this;\n    for (var key in this.service.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"multiaction\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ return this.proxyMethod(this.getService().' + key + ', arguments);};tmp');\n    }\n  },\n\n  /*\r\n     *   Perform the proxy call for each service method\r\n     */\n  proxyMethod: function proxyMethod(method, parameters) {\n    var service = this.service;\n\n    // Check if has only one argument, else execute directly\n    if (!parameters || parameters.length != 1) {\n      return method.apply(service, parameters);\n    }\n\n    // Check if the argument is object, else execute directly\n    if (_typeof(parameters[0]) != \"object\") {\n      return method.apply(service, parameters);\n    }\n\n    var params = parameters[0];\n\n    // If the caller is requesting a prepare call, just execute the method with the current parameters\n    if (params.prepare == true) return method.apply(service, parameters);\n\n    // Prepare the ajax instead of sending it\n    var originalPrepare = params.prepare;\n    params.prepare = true;\n\n    var action = method.apply(service, parameters);\n    if (originalPrepare === undefined || originalPrepare == null) delete params.prepare;else\n    params.prepare = originalPrepare;\n    return this.add(action);\n  },\n\n  /**\r\n     * This method make a standard error message\r\n     */\n  makeCircularDependenciesError: function makeCircularDependenciesError(error) {\n    var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n    return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n  },\n\n\n  /*\r\n     *   Add an action to be performed in a multiaction, and be resolved later\r\n     *   returns a deferred\r\n     */\n  add: function add(action) {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    var name = action.h_action || \"unnamed\";\n\n    // Put here all actions to ignore in circular dependencies\n    var exceptionActions = [\"PROCESSPROPERTYVALUE\", \"LOADTEMPLATE\", \"ADDRELATIONWITHDATA\", \"GETFILE\"];\n\n    if (exceptionActions.indexOf(name) < 0 && bizagi.override.detectCircularDependencies) {\n      self.circularDependencies.addNode(name, action);\n    }\n\n    // First clear previous timeout\n    clearTimeout(self.batchTimeout);\n    var tag = action.tag = Math.guid();\n    var singleAction = { action: action, deferred: deferred };\n    self.batch[tag] = singleAction;\n\n    var fn = function fn() {\n      var resolveDependencies = self.circularDependencies.resolve();\n\n      if (resolveDependencies.error) {\n        // Reset Queue\n        for (var i in self.batch) {\n          var message = resolveDependencies.error.multiactionError;\n          self.batch[i].deferred.reject(message);\n        }\n        self.batch = {};\n      } else\n      if (!self.disabledRequests) {\n        self.deferredBatchExecuting = self.fire();\n      }\n    };\n\n    // Start a new timeout\n    self.batchTimeout = setTimeout(fn, self.batchTimer);\n\n    // If we have a limit, then fire it again\n    if (self.maxNumberOfActions != 0) {\n      if (Object.keys(self.batch).length >= self.maxNumberOfActions) {\n        clearTimeout(self.batchTimeout);\n        fn();\n      }\n    }\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Fires up the multiaction\r\n     */\n  fire: function fire() {\n    var self = this;\n    var batch = {};\n\n    // Prepare actions and clone batch manually\n    var actions = [];\n    $.each(self.batch, function (tag, item) {\n      actions.push(item.action);\n      batch[tag] = item;\n    });\n\n    // Reset batch\n    self.batch = {};\n\n    // Fire ajax \n    return $.when(self.execute({ actions: actions, rejectDeferreds: false })).\n    done(function (responses) {\n\n      // Process each response\n      $.each(responses, function (i, response) {\n        var tag = response.tag;\n        if (!response.error) {\n          batch[tag].deferred.resolve(response.result);\n        } else {\n          batch[tag].deferred.reject(response.error, response, response.error.message);\n        }\n\n        // Remove paired tag from collection\n        delete batch[tag];\n      });\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: \"Operation didn't executed\" }, '', \"Operation didn't executed\");\n      });\n    }).fail(function (xhr, type, error) {\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      var errorMessage = typeof error !== \"undefined\" ? error.message : error || \"Operation didn't executed\";\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: errorMessage }, '', \"Operation didn't executed\");\n      });\n    });\n  },\n  /*\r\n     *   Sends a multiaction to the server\r\n     */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction\"),\n      data: data,\n      queue: this.queue,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(response.error, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse = {};\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Disable the request, restart the form is mandatory who calls this method \r\n      * or unexpected behavior will happen on the form\r\n      */\n  disableRequests: function disableRequests() {\n    var self = this;\n    self.disabledRequests = true;\n  },\n\n  /**\r\n      * Identify if batch action is running, by default is resolved\r\n      * @returns Deferred object if batch action is running\r\n      */\n  validateIfBatchIsExecuting: function validateIfBatchIsExecuting() {\n    var self = this;\n    return self.deferredBatchExecuting;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Command controller \r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for action and validation controllers\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.command.controllers.controller\", {\n  /* \r\n                                                          *   Set to true in order to debug\r\n                                                          */\n  THROW_ERROR: true },\n\n{\n  /*  \r\n  *   Constructor\r\n  */\n  init: function init(form) {\n    this.form = form;\n    this.dateFormat = form.getResource(\"dateFormat\");\n  },\n  /*\r\n     *   Returns the condition in JS\r\n     */\n  buildConditions: function buildConditions(conditions, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var operator = conditions.expressions && conditions.expressions.length > 1 ? self.buildConditionOperator(conditions.operator) : conditions.operator;\n    innerDependencies = innerDependencies || [];\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    //  Validate trtue and false conditions\n    if (operator == \"true\")\n    return \"true\";\n    if (operator == \"false\")\n    return \"false\";\n\n    var sJsCondition = \"\";\n\n    for (var i = 0; i < conditions.expressions.length; i++) {\n      var expression = conditions.expressions[i];\n\n      if (expression.simple) {\n        var bGDetected = self.searchGridReferenceInCondition(expression.simple);\n        sJsCondition += self.buildSimpleCondition(expression.simple, bGDetected, bCheckEditability, innerDependencies);\n\n      } else if (expression.complex) {\n        sJsCondition += \"(\" + self.buildConditions(expression.complex, bGridDetected, bCheckEditability, innerDependencies) + \") \";\n      }\n\n      // Adds operator\n      sJsCondition += i < conditions.expressions.length - 1 ? operator : \"\";\n    }\n\n    return sJsCondition;\n  },\n  /*\r\n     *   Builds the condition operator\r\n     */\n  buildConditionOperator: function buildConditionOperator(conditionsOperator) {\n    if (conditionsOperator == \"and\")\n    return \" && \";\n    if (conditionsOperator == \"or\")\n    return \" || \";\n    return conditionsOperator;\n  },\n  /*\r\n     *   Builds a simple condition\r\n     */\n  buildSimpleCondition: function buildSimpleCondition(condition, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var sXpath;\n    var xpath;\n    var sArgument = \"\";\n    var operator = condition.operator;\n    var ensureValueJs = \"\";\n    var ensureEditable = \"\";\n    var ensureVisible = \"\";\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    // List of controls excluded to editability validation\n    // Just keep empty the value of element\n    var excludeEditabilityRule = { \"boolean\": \"\" };\n    var control = condition.xpath && condition.renderId ?\n    condition.xpath + '.' + condition.renderId :\n    condition.xpath || condition.renderId || condition.containerId;\n\n\n    if (bGridDetected && condition.containerId) {\n      var gridXpathInfo = self.processGridXpath(condition.xpath);\n      control = gridXpathInfo.gridXpath + \".\" + condition.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + condition.renderId;\n    }\n\n    if (!innerDependencies.includes(control)) {\n      innerDependencies.push(control);\n    }\n\n    var detectedArgumentType = self.detectConditionArgumentType(control, condition.argumentType);\n\n    // Build xpath\n    sXpath = self.buildXpath(control, detectedArgumentType, bGridDetected);\n    if (detectedArgumentType != \"boolean\") {\n      ensureValueJs += \"!bizagi.util.isEmpty(\" + sXpath + \") && \";\n    }\n\n    // Check if the render is editable, only when the parameter is provided\n    if (bCheckEditability && control && control.length > 0 && !excludeEditabilityRule.hasOwnProperty(detectedArgumentType)) {\n      ensureEditable = \"self.isVisible('\" + control + \"') && self.isEditable('\" + control + \"') && \";\n    }\n\n    // Build argument\n    if (!bizagi.util.isEmpty(condition.argument)) {\n      sArgument = self.buildArgument(condition.argument, detectedArgumentType, bGridDetected);\n\n      // If the argument is xpath it must be filled to for some operators\n      if (detectedArgumentType == \"xpath\") {\n        ensureValueJs += \"!bizagi.util.isEmpty(\" + sArgument + \") && \";\n      }\n\n    } else if (condition.argument === \"\") {\n      // Also check the case when the argument is empty\n      sArgument = \"\\\"\\\"\";\n    }\n\n    // Build condition\n\n    if (operator == \"includes\") {\n      return ensureEditable + ensureValueJs + \"self.includes(\" + sXpath + \",\" + sArgument + \") \";\n    }\n    //if (operator == \"changes\") return \"true\";\n    if (operator == \"changes\") {\n      // If key enableActionIsChangedSupport is true, allow to evaluate the valid control\n      // that execute the action \"is changed\" (see ticket TM12723)\n      if (bizagi.override && !bizagi.override.enableActionIsChangedSupport) {\n        return \"self.isChanged(\" + sXpath + \", params.changed)\";\n      } else {\n        if (bGridDetected) {\n          return \"self.isGridColumnChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        } else {\n          return \"self.isControlChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        }\n      }\n    }\n    if (operator == \"equals\")\n    return ensureEditable + ensureValueJs + sXpath + \" == \" + sArgument;\n    if (operator == \"not-equals\")\n    return ensureEditable + sXpath + \" != \" + sArgument;\n    if (operator == \"less-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" < \" + sArgument;\n    if (operator == \"less-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" <= \" + sArgument;\n    if (operator == \"greater-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" > \" + sArgument;\n    if (operator == \"greater-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" >= \" + sArgument;\n    if (operator == \"like\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"is-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" == 0 || bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-not-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"!bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" != 0 && !bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-true\")\n    return ensureEditable + \"( \" + sXpath + \" == true || \" + sXpath + \" == 'true' )\";\n    if (operator == \"is-false\")\n    return ensureEditable + \"( \" + sXpath + \" == false || \" + sXpath + \" == 'false' || \" + sXpath + \" == 'False' )\";\n    if (operator == \"does-not-contain\")\n    return ensureEditable + \"(bizagi.util.isEmpty(\" + sXpath + \") || \" + sXpath + \".toString().indexOf(\" + sArgument + \") < 0 )\";\n    if (operator == \"contains\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == true \";\n    if (operator == \"does-not-begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == false \";\n    if (operator == \"file-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"file-not-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"!self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"is-invalid-email\")\n    return ensureEditable + \"!self.isValidEmail(\" + sXpath + \") \";\n    if (operator == \"letter-edited\")\n    return \"false\"; //TODO\n    if (operator == \"letter-not-edited\")\n    return \"false\"; //TODO\n    if (operator == \"cell-change\")\n    return \"column == \" + sArgument;\n\n    if (operator == \"on-press\") {\n      if (bGridDetected) {\n        var id = self.buildXpath(control, \"id\", bGridDetected);\n        return \"self.isGridButtonPressed(\" + id + \", params.pressed)\";\n      } else {\n        return \"self.isButtonPressed('\" + control + \"', params.pressed)\";\n      }\n    }\n    if (operator == \"on-load\") {\n      return \"true\";\n    }\n\n    // ondelete behavior on grid control  \n    if (operator == 'on-deleted-row') {\n      xpath = control || \"\";\n      return \"self.onDeletedGridRow('\" + xpath + \"', params.rowDeleted)\";\n    }\n\n    // If there is another operator code throw exception\n    throw new \"There is no implementation for operator code \"() + operator;\n  },\n  /*\r\n     *   Detects the argument type based on the render\r\n     */\n  detectConditionArgumentType: function detectConditionArgumentType(control, argumentType) {\n    var self = this;\n\n    if (argumentType === undefined || argumentType == \"const\") {\n\n      // Search render\n      var form = self.form;\n      var render = form.getRender(control) || form.getRenderById(control);\n\n      // If the render doesn't exist, is because it has the visible property assigned to false\n      // and isn't present in the form's metadata, for this case returns the default value (text)\n      if (render == null) {\n        return 'text';\n      }\n\n      // Check if the render is a grid\n      if (render.properties.type == \"grid\") {\n        var gridXpath = self.processGridXpath(control);\n\n        if (gridXpath.remainingXpath === \"\") {\n          // The target is the grid\n          return \"xpath\";\n        } else {\n          render = render.getColumn(gridXpath.remainingXpath);\n          if (render == null) {\n            throw new Error(\"RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller\");\n          }\n        }\n      }\n\n      var dataType = render.properties.dataType;\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n\n      if (self.isRelatedEntityRender(renderType)) {\n        return 'entity';\n      }\n\n      // Number\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 6 || dataType == 7 || dataType == 10 || dataType == 11) {\n        return 'number';\n      }\n\n      // Money\n      if (dataType == 8) {\n        return 'money';\n      }\n\n      // Date\n      if (dataType == 12 || dataType == 13) {\n        if (render.properties.showTime == true) {\n          return 'datetime';\n        } else {\n          return 'date';\n        }\n      }\n\n      // Boolean\n      if (dataType == 5) {\n        return 'boolean';\n      }\n\n      // Button\n      if (renderType == \"button\") {\n        return \"button\";\n      }\n\n      // form\n      if (\"form\" === renderType || /queryForm/i.test(renderType)) {\n        return \"form\";\n      }\n\n      // Default\n      return 'text';\n\n    } else if (argumentType == \"xpath\" || argumentType == \"function\" || argumentType == \"entity\") {\n      return argumentType;\n    }\n\n    // Default return text\n    return 'text';\n  },\n  /*\r\n     *   Detects if a render type must be binded to a xpath with related entity\r\n     */\n  isRelatedEntityRender: function isRelatedEntityRender(renderType) {\n    return [\"combo\", \"list\", \"radio\", \"search\", \"searchCombo\", \"columnCombo\", \"columnSearch\", \"queryMultiSelect\"].includes(renderType) || /^cascadingcombo$/i.test(renderType);\n  },\n\n  buildXpath: function buildXpath(xpath, argumentType, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (argumentType == 'xpath' && !bGridDetected) {\n      return \"self.evalXpath('\" + xpath + \"', '\" + self.detectConditionArgumentType(xpath, \"const\") + \"')\";\n    } else if (argumentType == 'id') {\n      return \"'\" + xpath + \"'\";\n    } else if (argumentType == 'function') {\n      var xpathArgumentType = self.detectConditionArgumentType(xpath, \"const\");\n      return \"self.evalXpath('\" + xpath + \"', '\" + xpathArgumentType + \"')\";\n    } else if (bGridDetected) {\n      return \"self.evalGridXpath(params, '\" + xpath + \"', '\" + argumentType + \"')\";\n    }\n\n    return \"self.evalXpath('\" + xpath + \"', '\" + argumentType + \"')\";\n  },\n  buildArgument: function buildArgument(argument, argumentType, bGridDetected, xpathContext) {\n    var self = this;\n    var number;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    if (argumentType == 'text') {\n      // Text\n      argument = argument == null ? \"\" : argument;\n      argument = typeof argument != 'string' ? argument.toString() : argument;\n      if (argument.indexOf(\"'\") != -1)\n      argument = argument.replaceAll(\"'\", \"\\\\'\");\n\n      // Remove line breaks because they will fail with the eval command\n      if (argument.indexOf(\"\\n\") != -1)\n      argument = argument.replaceAll(\"\\n\", \"\");\n\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'boolean') {\n      // Boolean\n      if (typeof argument == \"string\") {\n        return argument == \"Default\" ? argument : eval(argument.toLowerCase()) == true ? \"true\" : \"false\";\n      } else {\n        return eval(argument) == true ? \"true\" : \"false\";\n      }\n    }\n    if (argumentType == 'number') {\n      // Number\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'money') {\n      // MONEY\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'date') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument);\n      if (!date || date == 0)\n      date = new Date(0);\n\n      // Remove time\n      date.setHours(0, 0, 0, 0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date) + \"').setHours(0,0,0,0)\";\n    }\n    if (argumentType == 'datetime') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument, true);\n      if (!date || date == 0) {\n        date = new Date(0);\n      }\n      //date.setSeconds(0);\n      date.setMilliseconds(0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date, true) + \"', true).getTime()\";\n    }\n    if (argumentType == 'color') {\n      // Color\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'entity') {\n\n      if (bizagi.util.isEmpty(argument)) {\n        return null;\n      }\n      try {\n        argument = _typeof(argument) != \"object\" ? JSON.parse(argument) : argument;\n      } catch (e) {\n        argument = argument || {};\n      }\n\n      if (argument && argument.id) {\n        // Entity value\n        result = argument.id;\n      } else if (argument && Array.isArray(argument.value)) {\n        // Entity multi values\n        var result = argument.value.map(function (value) {\n          return value.id;\n        });\n      } else {\n        // Entity value\n        result = argument.id || argument;\n      }\n\n      return JSON.stringify(result);\n    }\n    if (argumentType == 'xpath') {\n      // Xpath value\n      var xpath = argument.toString();\n\n      bGridDetected = self.searchGridReferenceInXpath(xpath);\n\n      // Process grid xpaths\n      if (bGridDetected) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n\n      if (xpathContext) {\n        xpath = xpathContext + \".\" + xpath;\n      }\n\n      return self.buildXpath(xpath, argumentType, bGridDetected);\n    }\n    if (argumentType == 'json') {\n      // Xpath value\n      return JSON.encode(argument);\n    }\n    if (argumentType == 'function') {\n      if (argument == \"BAToday\") {\n        return \"self.getCurrentDate()\";\n      }\n      if (argument == \"BANow\") {\n        return \"self.getCurrentDate(true)\";\n      }\n\n      // If there is another function type code throw exception\n      throw \"There is no implementation for function \" + argument;\n    }\n\n    if (argumentType == undefined) {\n      return null;\n    }\n\n    // If there is another argument type code throw exception\n    throw \"There is no implementation for argument type \" + argumentType;\n  },\n  /*\r\n     *   Evals if an xpath is editable\r\n     */\n  isEditable: function isEditable(xpath) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    return render.properties.editable;\n  },\n\n  isVisible: function isVisible(xpath) {\n    var self = this;\n\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    if (render.properties.visible) {\n      return self.isParentVisible(render.parent);\n    } else {\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n      if (/^hidden$/i.test(renderType)) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  isParentVisible: function isParentVisible(render) {\n    var self = this;\n    if (render.parent) {\n      if (render.properties.visible) {\n        return self.isParentVisible(render.parent);\n      } else {\n        return false;\n      }\n    } else {\n      return render.properties.visible;\n    }\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalGridXpath: function evalGridXpath(params, xpath, argumentType) {\n    var self = this;\n\n    if (params === undefined) {\n      return this.evalXpath(xpath, argumentType);\n    }\n\n    var grid = params.grid;\n\n    if (grid === undefined || grid === null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Grid renders\n    var gridXpath = self.processGridXpath(xpath);\n\n    // Return the value\n    var gridColumn = grid.getColumn(gridXpath.remainingXpath);\n\n    if (!gridColumn) {\n      return false;\n      //throw \"There is no a valid render for xpath \" + xpath;\n    }\n\n    var cellValue = grid.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n    if (gridColumn.properties.type == \"columnRadio\") {\n      if (cellValue && !bizagi.util.isString(cellValue)) {\n        if (cellValue.length > 0 && cellValue[0].length > 0)\n        cellValue = cellValue[0][0];else\n\n        cellValue = cellValue.id;\n      } else\n      if (!bizagi.util.isString(cellValue))\n      cellValue = 0;\n    }\n\n    if (gridColumn.properties.type == \"columnCombo\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnSearch\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnDate\") {\n      if (cellValue) {\n        cellValue = !gridColumn.properties.showTime ?\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0, 0, 0, 0) :\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n      }\n    }\n    // Parse empty values\n    if (bizagi.util.isEmpty(cellValue)) {\n      // If the render is a boolean return false for actions\n      if (argumentType == \"boolean\") {\n        if (gridColumn.properties.display == \"check\") {\n          return false;\n        } else {\n          return null;\n        }\n      }\n    }\n\n    // Parse boolean and non-empty date types\n    if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n      return eval(self.buildArgument(cellValue, argumentType));\n    }\n\n    return cellValue;\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalXpath: function evalXpath(xpath, argumentType) {\n    var self = this,i,renderToEval;\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length === 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    i = 0;\n    while (i < rendersToEval.length) {\n      renderToEval = rendersToEval[i++];\n      var bIsGrid = renderToEval.properties.type == 'grid';\n      if (!bIsGrid) {\n        // Normal renders\n        var value = renderToEval.getValue();\n        var renderType = bizagi.util.normalizeType(renderToEval.properties.type || \"\");\n\n        if (argumentType === undefined || argumentType === \"undefined\") {\n          return value;\n        }\n\n        // If the render is a combo and the value is null return 0 for validations and actions\n        if ([\"combo\", \"list\", \"search\", \"radio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n          if (bizagi.util.isEmpty(value) || value.id == \"\") {\n            value = 0;\n          }\n        }\n\n        // If the render is a queryMultiSelect and the value is empty array of objects\n        // return mapValue for validations and actions\n        if (/^queryMultiSelect$/i.test(renderType)) {\n          return renderToEval && renderToEval.mapValue(value);\n        }\n\n        if (renderType === \"comboSelected\") {\n          return typeof value === \"string\" ? JSON.parse(value).value : value;\n        }\n\n        if (bizagi.util.isEmpty(value)) {\n          // If the render is a check and the value is null return false for validations and actions\n          if (renderType === \"boolean\" && renderToEval.properties.display === \"check\") {\n            return false;\n          }\n\n          return value;\n        }\n\n        if (argumentType === \"xpath\") {\n          return eval(self.buildArgument(xpath, argumentType));\n        } else {\n          return eval(self.buildArgument(value, argumentType));\n        }\n      } else {\n\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n\n        // Return the value\n        var gridColumn = renderToEval.getColumn(gridXpath.remainingXpath);\n\n        if (!gridColumn) {\n          continue;\n        }\n\n        var cellValue = renderToEval.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n        if (gridColumn.properties.type == \"columnRadio\") {\n          if (cellValue && !bizagi.util.isString(cellValue)) {\n            if (cellValue.length > 0 && cellValue[0].length > 0)\n            cellValue = cellValue[0][0];else\n\n            cellValue = cellValue.id;\n          } else\n          if (!bizagi.util.isString(cellValue))\n          cellValue = 0;\n        }\n\n        if (gridColumn.properties.type == \"columnCombo\" || gridColumn.properties.type == \"columnSearch\" || gridColumn.properties.type == \"columnList\") {\n          if (cellValue && cellValue.id)\n          cellValue = cellValue.id;else\n          if (typeof cellValue != \"number\" && typeof cellValue != \"string\")\n          cellValue = 0;\n        }\n\n        // Parse empty values\n        if (bizagi.util.isEmpty(cellValue)) {\n          // If the render is a boolean return false for actions\n          if (argumentType == \"boolean\") {\n            if (gridColumn.properties.display == \"check\") {\n              return false;\n            } else {\n              return null;\n            }\n          }\n        }\n\n        // Parse boolean and non-empty date types\n        if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n          return eval(self.buildArgument(cellValue, argumentType));\n        }\n\n        if (typeof gridColumn != \"undefined\" && typeof gridColumn.properties != \"undefined\" && typeof gridColumn.properties.type != \"undefined\" && gridColumn.properties.type == \"columnDate\") {\n          //cellValue = (cellValue && !gridColumn.properties.showTime)?bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0,0,0,0):bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n          cellValue = self.getColumnDateCorrectFunction(cellValue, gridColumn.properties.showTime)(cellValue);\n        }\n\n        return cellValue;\n      }\n      throw \"There is no a valid render for xpath \" + xpath;\n    }\n  },\n  /*\r\n     *   Check if the upload render has any files uploaded\r\n     */\n  isFileUploaded: function isFileUploaded(xpath) {\n    var self = this;\n\n    var value = self.evalXpath(xpath);\n\n    if (value && value.length) {\n      if (value.length > 0)\n      return true;\n    }\n\n    return false;\n  },\n  /*\r\n     *   Check if a render has a valid email value\r\n     */\n  isValidEmail: function isValidEmail(value) {\n    var regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/gi;\n    if (value && value.match(new RegExp(regex))) {\n      return true;\n    }\n    return false;\n  },\n  /**\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isButtonPressed: function isButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var render = this.getRenderById(control);\n    if (typeof render === \"undefined\" || render === null || !/^button$/i.test(bizagi.util.normalizeType(render.properties.type))) {\n      return false;\n    }\n\n    return pressed;\n  },\n  /*\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isGridButtonPressed: function isGridButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var arrGridXpath = this.processGridXpath(control);\n    var gridXpath = arrGridXpath.gridXpath;\n    var render = this.getRender(gridXpath);\n    var column = arrGridXpath.remainingXpath || \"\";\n\n\n    if (pressed && render && render.columns) {\n      $.each(render.columns, function (key, value) {\n        if ((value.properties.xpath === column || value.properties.id === column) && value.properties.type === \"columnButton\") {\n          pressed = true;\n        }\n      });\n    }\n    return pressed;\n  },\n\n  /**\r\n     * Check if a control has been changed\r\n     */\n  isChanged: function isChanged(value, _isChanged) {\n    if (value === undefined || value === null) {\n      return false;\n    }\n\n    return _isChanged;\n  },\n\n  /**\r\n      * Check if a control has been changed\r\n      */\n  isControlChanged: function isControlChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var renderToEval = this.getRender(control);\n      var controlChanged = params.render;\n      if (renderToEval == null || controlChanged == null) return false;\n\n      return controlChanged.properties.id === renderToEval.properties.id &&\n      controlChanged.properties.xpath === renderToEval.properties.xpath;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Check if a column has been changed\r\n      */\n  isGridColumnChanged: function isGridColumnChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var arrGridXpath = this.processGridXpath(control);\n      var gridXpath = arrGridXpath.gridXpath;\n      var gridToEval = this.getRender(gridXpath);\n\n      if (gridToEval == null) return false;\n\n      var xpathColumn = arrGridXpath.remainingXpath || \"\";\n      var columnChanged = params.render.getColumn(params.column);\n      var columnToEval = gridToEval.getColumn(xpathColumn);\n\n      if (columnToEval && columnChanged) {\n        return columnToEval.properties.xpath === columnChanged.properties.xpath &&\n        columnToEval.properties.id === columnChanged.properties.id;\n      }\n\n      return false;\n    }\n  },\n\n  /**\r\n     * Check if a control has the item\r\n     */\n  includes: function includes(value, argument) {\n    if (typeof value == \"undefined\" || value === null) {\n      return false;\n    }\n    if (typeof argument == \"undefined\" || argument === null) {\n      return false;\n    }\n    var inArray = $.grep(value, function (e) {\n      return e.id == argument;\n    });\n    if (inArray.length > 0) {\n      return true;\n    }\n    return false;\n  },\n\n  /**\r\n     *  Check if the grid has been deleted a row\r\n     */\n  onDeletedGridRow: function onDeletedGridRow(xpath, rowDeleted) {\n    var self = this;\n    var grid = self.getRender(xpath) || {};\n\n    if (grid && rowDeleted) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *   Wrapper for get renders, return null if no renders have been found\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this,\n    form = self.form,\n    regex = /id=([\\w-]+)/gi;\n    var renders = null;\n\n    // Check if the xpath is an id\n    var idMatches = regex.exec(xpath);\n    if (idMatches && idMatches.length > 1) {\n      var render = self.getRenderById(idMatches[1]);\n      if (render) {\n        if (render.length == 0)\n        return null;else\n        {\n          renders = [];\n          renders.push(render);\n          return renders;\n        }\n      } else {\n        return null;\n      }\n\n    }\n\n    renders = form.getRenders(xpath);\n    if (renders.length == 0)\n    return null;\n    return renders;\n  },\n  /*\r\n     *   Wrapper for get only one editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this,\n    form = self.form;\n\n    return form.getRender(xpath);\n  },\n  /*\r\n     *   Wrapper to get a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this,\n    form = self.form;\n\n    return form.getRenderById(id);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showRenderNotFoundError: function showRenderNotFoundError(xpath) {\n    bizagi.debug(\"Cannot find render in DOM: \" + xpath);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showContainerNotFoundError: function showContainerNotFoundError(containerId) {\n    bizagi.debug(\"Cannot find container in DOM: \" + containerId);\n  },\n  /*\r\n     *   Returns the current date\r\n     */\n  getCurrentDate: function getCurrentDate(includeTime) {\n    var currentDate = new Date();\n    var invariantDate = bizagi.util.dateFormatter.getDateFromInvariant(bizagi.util.dateFormatter.formatInvariant(currentDate));\n    if (!includeTime && invariantDate && !isNaN(Date.parse(invariantDate)) && !$.isNumeric(invariantDate)) {\n      invariantDate.setHours(0, 0, 0, 0);\n    }\n    return invariantDate.getTime();\n\n  },\n  /*\r\n     *   Return the grid xpath parts\r\n     */\n  processGridXpath: function processGridXpath(xpath) {\n    // Eval using regular expressions\n    var regex = new RegExp(/([\\w\\.-]*)\\[(\\d*)\\]\\.([\\w\\.|\\w-\\.]*)/g);\n    var matches = regex.exec(xpath);\n    var index, remainingXpath, gridXpath;\n    if (matches) {\n      gridXpath = matches[1];\n      index = matches[2];\n      remainingXpath = matches[3];\n    } else {\n      index = \"\";\n      remainingXpath = \"\";\n    }\n\n    return { xpath: xpath, index: index, remainingXpath: remainingXpath, gridXpath: gridXpath };\n  },\n  /*\r\n     *   Check if an action/validation contains reference to a grid\r\n     */\n  searchForGridReference: function searchForGridReference(conditions, commands) {\n    var self = this;\n    var i;\n    // Check in conditions\n    if (conditions) {\n      return self.searchGridReferenceInCondition(conditions);\n    }\n\n    // Check in commands\n    if (commands) {\n      for (i in commands) {\n        var command = commands[i];\n        return self.searchForGridReferenceInCommand(command);\n      }\n    }\n\n    return null;\n  },\n  /*\r\n      *   Check if an action/validation contains reference to a grid\r\n      */\n  searchForGridReferenceInCommand: function searchForGridReferenceInCommand(command) {\n    if (command.xpath && command.xpath.indexOf(\"[]\") > 0) {\n      return command.xpath.substring(0, command.xpath.indexOf(\"[]\"));\n    }\n\n    // Check in argument if argumentType is xpath\n    if (command.argumentType == 'xpath') {\n      if (command.argument.indexOf(\"[]\") > 0) {\n        return command.argument.substring(0, command.argument.indexOf(\"[]\"));\n      }\n    }\n  },\n\n  /*\r\n     *   Check if a condition contains reference to a grid\r\n     */\n  searchGridReferenceInCondition: function searchGridReferenceInCondition(condition) {\n    var self = this;\n    var bGridReferenceFound;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      for (i in condition.expressions) {\n        if (condition.expressions.hasOwnProperty(i)) {\n          bGridReferenceFound = self.searchGridReferenceInCondition(condition.expressions[i]);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n        }\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridReferenceInCondition(condition.simple);\n\n    } else if (condition.complex) {\n      return self.searchGridReferenceInCondition(condition.complex);\n    } else {\n      // Looking for grid reference within xpath\n      if (condition.xpath || condition.renderId) {\n        // Check in condition.xpath\n        bGridReferenceFound = self.searchGridReferenceInXpath(condition.xpath) || self.searchGridReferenceInXpath(condition.renderId);\n        if (bGridReferenceFound)\n        return bGridReferenceFound;\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType == 'xpath') {\n          bGridReferenceFound = self.searchGridReferenceInXpath(condition.argument);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n\n        }\n\n      }\n    }\n\n    return null;\n  },\n  /*\r\n     *   Check if a xpath contains a grid reference\r\n     */\n  searchGridReferenceInXpath: function searchGridReferenceInXpath(xpath) {\n    // Check in condition.xpath\n    if (xpath && xpath.indexOf(\"[]\") > 0) {\n      return xpath.substring(0, xpath.indexOf(\"[]\"));\n    }\n    return null;\n  },\n  getGridControl: function getGridControl(xpath, surrogateKey) {\n    var self = this;\n    var remainingXpath = self.processGridXpath(xpath).remainingXpath;\n    var grid = self.getRender(xpath);\n    var column = grid.getControlCell(surrogateKey, remainingXpath);\n\n    return column;\n\n  },\n\n  //#region No side effects functions\n  getColumnDateCorrectFunction: function getColumnDateCorrectFunction(value, showTime) {\n    var self = this;\n    if (!value) return self.getColumnDateValueForNoValue;\n    if (value && showTime) return self.getColumnDateValueDateAndTime;\n    if (value && !showTime) return self.getColumnDateValueOnlyDate;\n    return value;\n  },\n\n  getColumnDateValueForNoValue: function getColumnDateValueForNoValue(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value);\n  },\n\n  getColumnDateValueOnlyDate: function getColumnDateValueOnlyDate(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value).setHours(0, 0, 0, 0);\n  },\n\n  getColumnDateValueDateAndTime: function getColumnDateValueDateAndTime(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value, true).getTime();\n  }\n\n  //#endregion side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Rendering Validation controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will parse and execute all the validations defined for the form\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.action\", {}, {\n  /* \r\n                                                                                        *   Constructor\r\n                                                                                        */\n  init: function init(form, actions) {\n    var self = this;\n\n    // Call base\n    this._super(form);\n\n    // Set a new hash containing all the dependencies subscribing the events\n    self.globalDependencies = {};\n    self.initialCallFunctions = {};\n    self.initialCallFunctionsDeferred = new $.Deferred();\n\n    // Build actions\n    if (actions)\n    self.buildActions(actions);\n\n    // Keep references\n    self.actions = actions;\n    self.internalSubmitActions = {};\n\n    // Set initial timer to trigger initial functions using a setTimeout, and distributing them in differente timespans\n    self.initialCallTimeout = 25;\n    self.initialCallIncrements = 25;\n    self.actionsHistory = {};\n    self.period = 50;\n  },\n  /*\r\n     *   Adds an internal submit action to be executed with all the given rules\r\n     */\n  processInternalSubmitAction: function processInternalSubmitAction(xpath, action) {\n    var self = this;\n\n    // if the action is registered, don't add it again\n    // only one internal submit action is allowed per control\n    if (self.internalSubmitActions[xpath])\n    return;\n\n    // Add to hash and build it\n    self.internalSubmitActions[xpath] = action;\n    self.buildAction(action, true);\n  },\n\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var self = this;\n    var result = false;\n\n    if (self.form.properties.typeForm === \"SummaryForm\" || self.form.properties.typeForm === \"GlobalForm\") result = true;\n    return result;\n  },\n\n  evalClientAction: function evalClientAction(action) {\n    var self = this,i = 0,serverCommand = false,command;\n    var commands = [].concat(action.commands, action.elseCommands);\n    var length = commands.length;\n\n    for (; i < length; i++) {\n      command = commands[i];\n      if (!self.isClientAction(command)) {\n        serverCommand = true;\n        break;\n      }\n    }\n\n    if (serverCommand) {\n      action.enabled = false;\n    }\n  },\n\n  /* Process all given  actions*/\n  buildActions: function buildActions(actions, dontExecute) {\n    var self = this,i,len;\n    var hashes = {};\n\n    // Added in BA56628, it is removed because it affects the actions in global, summary, and record view forms\n    // if (self.form.properties.displayAsReadOnly && self.isSummaryOrGlobalForm())\n    //    actions = [];\n\n    var executeOnlyClientActions = self.isSummaryOrGlobalForm();\n\n    for (i = 0, len = actions.length; i < len; i++) {\n      // If action is not \"valid\" we can omit that instruction\n      try {\n        var action = actions[i];\n        var hash = bizagi.util.md5(JSON.stringify(action.conditions));\n        var hashC = bizagi.util.md5(JSON.stringify(action.commands));\n        if (hashes[hash]) {\n          if (hashes[hash].indexOf(hashC) === -1) {\n            // si la condicion es igual y los comandos diferentes\n            executeOnlyClientActions && self.evalClientAction(action);\n            self.buildAction(action, dontExecute);\n            hashes[hash].push(hashC);\n          }\n        } else {\n          executeOnlyClientActions && self.evalClientAction(action);\n          self.buildAction(action, dontExecute);\n          hashes[hash] = [hashC];\n        }\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, actions[i]);\n        }\n      }\n    }\n  },\n  /*\r\n     *   Remove all current handlers\r\n     */\n  unbindActions: function unbindActions() {\n    var self = this;\n\n    // Remove all previous handlers\n    $.each(self.globalDependencies, function (i, render) {\n      render.unbind(\"renderchange.action\");\n    });\n\n    self.globalDependencies = {};\n\n    // Reset timers and collections\n    $.each(self.initialCallFunctions, function (i, handle) {\n      clearTimeout(handle);\n    });\n    self.initialCallFunctions = {};\n  },\n  /* \r\n     *   Re-execute actions, cleaning the handlers first\r\n     */\n  refreshActions: function refreshActions(newActions) {\n    var self = this;\n\n    self.initialCallTimeout = 25;\n    self.initialCallFunctions = {};\n\n    newActions = newActions || [];\n\n    // Build the actions again\n    self.actions = self.actions.concat(newActions);\n    self.buildActions(self.actions, true);\n\n    // Build internal actions again\n    $.each(self.internalSubmitActions, function (_, action) {\n      try {\n        self.buildAction(action, false);\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, action);\n        }\n      }\n    });\n  },\n  /* Process a single action*/\n  buildAction: function buildAction(action, dontExecute) {\n    var self = this;\n    var form = self.form;\n    var dependencies = [];\n    var dependenciesId = [];\n    var innerDependencies = [];\n\n    var isEnabled = action.enabled != undefined ? action.enabled : true;\n\n    if (!isEnabled) return;\n\n    // If the condition operator is true, we gotta dig in the actions to check if it modifies a grid\n    // To include an auto-dependency, so each time the grid is changed that condition will be executed\n    if (action.conditions && action.conditions.operator == \"true\") {\n      $.each(action.commands, function (_, command) {\n        var gridReference = self.searchGridReferenceInXpath(command.xpath);\n        if (gridReference) {\n          if (!innerDependencies.includes(gridReference))\n          innerDependencies.push(gridReference);\n        }\n      });\n    }\n\n    function isValidDependency(type) {\n      var notValid = [\"groupedgrid\", \"collectionnavigator\"];\n\n      return notValid.indexOf(type) === -1;\n    }\n\n    function addDependency(render) {\n      if (isValidDependency(render.properties.type)) {\n        dependenciesId.push(render.properties.id);\n        dependencies.push(render);\n      }\n    }\n\n\n    // Build anonymous function\n    var fn = self.buildFunction(action.conditions, action.commands, action.elseCommands, innerDependencies);\n\n    // Find dependencies to attach triggers\n    if (innerDependencies) {\n      for (var i = 0; i < innerDependencies.length; i++) {\n        if (typeof innerDependencies[i] != \"undefined\") {\n          var renders = form.getRenders(innerDependencies[i]);\n          if (renders.length === 0) {\n            var renderById = form.getRenderById(innerDependencies[i]);\n            renders = renderById ? [renderById] : null;\n          }\n\n          if (renders) {\n            $.each(renders, function (_, render) {\n              if ($.inArray(render.properties.id, dependenciesId) < 0 && render.properties.editable) {\n                addDependency(render);\n              }\n            });\n            if (dependencies.length === 0) {\n              addDependency(renders[0]);\n            }\n          }\n        }\n      }\n    }\n\n    // Attach handlers\n    $.each(dependencies, function (_, render) {\n      render.bind(\"renderchange.action\", function (ev, args) {\n        args = args || {};\n\n        // Default changed argument to true\n        args.changed = args.changed !== undefined ? args.changed : true;\n\n        // If a grid action has been performed, try to filter it by column, to avoid execute all grid actions each time                \n        if (args.column) {\n          for (var j = 0; j < action.gridColumns.length; j++) {\n            if (args.column == action.gridColumns[j]) {\n              // Call function\n              fn(self, args);\n              return;\n            }\n          }\n        } else {\n          // Call function\n          fn(self, args);\n        }\n      });\n\n      // Add to global dependencies hash\n      self.globalDependencies[render.properties.id] = render;\n\n      // If render is a grid ... trigger function at this point\n      if (render.properties.type === 'grid') {\n        dontExecute = true;\n\n        // Search column dependencies\n        action.gridColumns = [];\n        self.searchGridColumns(action.conditions, action.gridColumns);\n      }\n    });\n\n    // Check if it has to execute\n    if (dontExecute)\n    return;\n\n    // Execute the action because it must execute when the page loads with pre-defined value\n    // Create an async function to trigger it later\n    var asyncFn = function asyncFn(self) {\n\n      var guid = Math.guid();\n      // Create the timeout\n      var handle = setTimeout(function () {\n        try {\n          // TODO: Define render to set parameter to \"fn\" function\n          fn(self);\n          delete self.initialCallFunctions[guid];\n        } catch (e) {\n        } finally\n        {\n          clearTimeout(handle);\n        }\n      }, self.initialCallTimeout);\n\n      // Save a reference\n      self.initialCallFunctions[guid] = handle;\n      self.initialCallTimeout += self.initialCallIncrements;\n    };\n\n    // Run it\n    asyncFn(self);\n  },\n  /*\r\n     * Creates the function to execute based on the action metadata\r\n     */\n  buildFunction: function buildFunction(conditions, commands, elseCommands, innerDependencies) {\n    var self = this;\n\n    var gridReference = self.searchForGridReference(conditions, commands);\n    var bGridDetected = gridReference != null ? gridReference : false;\n    var sJsCondition = \"\";\n    var sJsAction = \"\";\n    var sStatement;\n    var sJsElseAction = \"\";\n    var bAutomaticRestore = elseCommands ? false : true;\n    var bCondition = conditions ? true : false;\n    var i;\n\n    // Build Condition\n    if (bCondition) {\n      sJsCondition += self.buildConditions(conditions, bGridDetected, false, innerDependencies);\n    }\n\n    // Build and execute actions\n    for (i = 0; i < commands.length; i++) {\n      // Parse command\n      var queueAction = self.isServerCommand(commands[i]) ? \"addParallel\" : \"add\";\n      var command = self.buildCommand(commands[i], bGridDetected);\n\n      // Check if command ending with semicolon and remove it\n      command = command.indexOf(\";\") >= 1 ? command.replace(\";\", \"\") : command;\n      sJsAction += \"actionQueue.\" + queueAction + \"(function(){return \" + command + \" ;}); \\r\\n\";\n\n      if (bAutomaticRestore) {\n        sJsElseAction += self.buildRestoreCommand(commands[i], bGridDetected);\n      }\n    }\n\n    // Build non-automatic else commands\n    if (!bAutomaticRestore) {\n      sJsElseAction += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n      sJsElseAction += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n      for (i = 0; i < elseCommands.length; i++) {\n        var queueAction = self.isServerCommand(elseCommands[i]) ? \"addParallel\" : \"add\";\n        var elseCommand = self.buildCommand(elseCommands[i], bGridDetected);\n        // Check if command ending with semicolon and remove it\n        elseCommand = elseCommand.indexOf(\";\") >= 1 ? elseCommand.replace(\";\", \"\") : elseCommand;\n        sJsElseAction += \"actionQueue.\" + queueAction + \"(function(){return \" + elseCommand + \" ;}); \\r\\n\";\n      }\n      sJsElseAction += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n      sJsElseAction += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n      sJsElseAction += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n    }\n\n    // Build final function\n    //sStatement = \"var baTmpFn = function(self, i, column){ \\r\\n\";\n    sStatement = \"var baTmpFn = function(self, params){ \\r\\n\";\n    sStatement += \"params = params || {};\\r\\n\";\n    if (bGridDetected) {\n      sStatement += \"var i = params.key;\\r\\n\";\n      sStatement += \"var column = params.column;\\r\\n\";\n    }\n    if (bCondition) {\n      sStatement += \"if (\" + sJsCondition + \"){ \\r\\n\";\n    }\n\n    // Creates defferreds\n    sStatement += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n    sStatement += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n    sStatement += sJsAction;\n    sStatement += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n    sStatement += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n    sStatement += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n\n    if (bCondition) {\n      sStatement += \"\\r\\n } \";\n      if (sJsElseAction.length > 0) {\n        sStatement += \"else { \\r\\n\" + sJsElseAction + \" }\\r\\n\";\n      }\n    }\n\n    sStatement += \"};\\r\\n\";\n\n\n    if (!bGridDetected) {\n      sStatement += \"baTmpFn\";\n    } else {\n      var sGridStatement = \"var baGridTmpFn = function(self, args){ \\r\\n\";\n      sGridStatement += \"args = args || {};\\r\\n\";\n      sGridStatement += \"\\t var grid = args.render || self.form.getRender('\" + gridReference + \"') || []; \\r\\n\";\n      sGridStatement += \"\\t grid = grid.grid ? grid : (self.form.getRender('\" + gridReference + \"') || []); \\r\\n\";\n      sGridStatement += \"\\t args.grid = grid; \\r\\n\";\n      sGridStatement += \"if(args.surrogateKey === undefined){\\r\\n\";\n      sGridStatement += \"\\t var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"\\t $.each(data, function(i, index) {\\r\\n\";\n      sGridStatement += \"\\t\\t args.key = index; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args);\\r\\n\";\n      sGridStatement += \"\\t });\\r\\n\";\n      sGridStatement += \"} else {\\r\\n\";\n      sGridStatement += \"\\t args.key = args.surrogateKey; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args ); \\r\\n\";\n      sGridStatement += \"}\\r\\n\";\n      sGridStatement += \"};\\r\\n\";\n      sStatement += sGridStatement;\n      sStatement += \"baGridTmpFn\";\n    }\n\n    // Return interpreted function\n    return eval(sStatement);\n  },\n\n  /*\r\n     *   This method checks if a command must be performed by the client, or by the server\r\n     */\n  isServerCommand: function isServerCommand(command) {\n    var commandType = command.command;\n\n    return [\"refresh\", \"submit-data\", \"execute-rule\", \"execute-interface\", \"execute-sap\", \"execute-connector\", \"execute-excel-bot\", \"execute-pipeline\"].includes(commandType);\n  },\n\n  isClientAction: function isClientAction(command) {\n    var commandType = command.command;\n\n    return [\"background-color\", \"forecolor\", \"visible\", \"required\", \"collapse\", \"set-active\"].includes(commandType);\n  },\n\n  isRecentAction: function isRecentAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    if (self.actionsHistory[tag] != null) {\n      return true;\n    }\n    $.when(self.runAction(prefix, command)).done(function () {\n      delete self.actionsHistory[tag];\n      bizagi.log(\"resolve \" + tag);\n    });\n    return false;\n  },\n\n  runAction: function runAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    self.actionsHistory[tag] = new $.Deferred();\n    var timeOutActionsHistory = setTimeout(self.actionsHistory[tag].resolve, self.period);\n    self.actionsHistory[tag].done(clearTimeout.bind(null, timeOutActionsHistory));\n    return self.actionsHistory[tag].promise();\n  },\n  /*\r\n     *   Builds the action JS\r\n     */\n  buildCommand: function buildCommand(command, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    var gridReference = bGridDetected;\n\n    // Parse argument\n    var commandType = command.command;\n    var detectedArgumentType = self.detectCommandArgumentType(command.argumentType, commandType);\n    var argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected, command.xpathContext);\n    var xpath = command.xpath;\n\n    var commandGridDetected = self.searchForGridReferenceInCommand(command);\n    if (commandGridDetected && command.containerId) {\n      var gridXpathInfo = self.processGridXpath(xpath);\n      xpath = gridXpathInfo.gridXpath + \".\" + command.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + command.renderId;\n    } else\n    if (xpath && command.renderId) {\n      xpath = xpath + \".\" + command.renderId;\n    }\n    // If a render id is given, we use it with priority over only xpath\n    else if (command.renderId) {\n        xpath = \"id=\" + command.renderId + \"\";\n      }\n\n    // Process grid xpaths\n    if (bGridDetected && xpath) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (command.xpath && command.xpath.length > 0 || command.renderId && command.renderId.length > 0) {\n      // Build render command\n      switch (commandType) {\n        case 'background-color':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonBackground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderBackground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'forecolor':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonForeground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderForeground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'visible':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonVisibility('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderVisibility('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'readonly':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonEditability('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderEditability('\" + xpath + \"', '\" + argument + \"');\";\n          }\n          break;\n        case 'required':\n          return \"self.changeRenderRequired('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-value':\n          // Check specific argument type\n          if (bGridDetected && command.argumentType === \"xpath\" && !!command.xpathContext) {\n            // When we are going to evaluate a xpath is necessary add a xpathcontext if it exist\n            if (typeof command.xpathContext !== \"undefined\") {\n              command.argument = command.xpathContext + \".\" + command.argument;\n            }\n            argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected);\n          }\n\n          return \"self.changeRenderValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-min':\n          return \"self.changeRenderMinValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-max':\n          return \"self.changeRenderMaxValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'calculate':\n          return \"self.executeCalculatedField('\" + xpath + \"');\";\n          break;\n        case 'submit-value':\n          return \"self.submitRender('\" + xpath + \"', '\" + argument + \"');\";\n          break;\n        case 'clean-data':\n          return \"self.cleanRenderData('\" + xpath + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          commandGridDetected = self.searchForGridReferenceInCommand(command);\n\n          if (commandGridDetected) {\n            return \"self.refreshGridCell('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          } else {\n            return \"self.refreshControl('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"','\" + commandType + \"');\";\n          }\n          break;\n        case 'trigger-click':\n          return \"self.triggerClick('\" + xpath + \"');\";\n          break;}\n\n\n    } else {\n      // Build container command\n      switch (commandType) {\n        case 'background-color':\n          return \"self.changeContainerBackground('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'visible':\n          return \"self.changeContainerVisibility('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'collapse':\n          return \"self.toogleContainer('\" + command.container + \"', \" + !bizagi.util.parseBoolean(argument) + \");\";\n          break;\n        case 'set-active':\n          return \"self.changeActiveItem('\" + command.container + \"');\";\n          break;\n        case 'readonly':\n          return \"self.changeContainerEditability('\" + command.container + \"', '\" + argument + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          // Set prepare parameter to multiaction purposes \n          return \"self.refreshContainer('\" + command.container + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          break;}\n\n    }\n\n    // Global  actions without specific target\n    if (commandType === 'submit-data') {\n      return \"self.submitFormData();\";\n    }\n\n    if (commandType === 'execute-rule') {\n      var ruleObj = command.argument || {};\n      var guidRule = \"\";\n      try {\n        guidRule = JSON.parse(ruleObj).guid;\n      } catch (e) {\n      }\n\n      var xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        var xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeRule('\" + guidRule + \"', printf('\" + xpathContextRow + \"',i) ,'\" + commandType + \"');\";\n      } else {\n        return \"self.executeRule('\" + guidRule + \"','\" + xpathContext + \"','\" + commandType + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-interface') {\n      var interfaceObj = command.argument || {};\n      var guidInterface = \"\";\n\n      try {\n        guidInterface = JSON.parse(interfaceObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeInterface('\" + guidInterface + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeInterface('\" + guidInterface + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-sap') {\n      var connectorObj = command.argument || {};\n      var guidsap = \"\";\n\n      try {\n        guidsap = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeSAPConnector('\" + guidsap + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeSAPConnector('\" + guidsap + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-connector' || commandType === 'execute-excel-bot') {\n      var connectorObj = command.argument || {};\n      var guidConnector = \"\";\n\n      try {\n        guidConnector = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeConnector('\" + guidConnector + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeConnector('\" + guidConnector + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    // Command to execute Pipeline\n    if (commandType === 'execute-pipeline') {\n      var pipelineObj = command.argument || {};\n      var guidPipeline = \"\";\n\n      try {\n        guidPipeline = JSON.parse(pipelineObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executePipeline('\" + guidPipeline + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executePipeline('\" + guidPipeline + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return \"\";\n  },\n  /* \r\n     *   Builds the JS command to restore automatically a command when condition is not met\r\n     */\n  buildRestoreCommand: function buildRestoreCommand(command, bGridDetected) {\n    var xpath = command.xpath;\n    var commandType = command.command;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // If a render id is given, we use it with priority over only xpath\n    if (command.renderId) {\n      xpath = \"id=\" + command.renderId + \"\";\n    }\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    // Build restore action\n    if (xpath && xpath.length > 0) {\n      return \"self.restoreRender('\" + xpath + \"', '\" + commandType + \"');\";\n    } else {\n      return \"self.restoreContainer('\" + command.container + \"', '\" + commandType + \"');\";\n    }\n  },\n  /* \r\n     *   Detect the command argument type based on the command type\r\n     */\n  detectCommandArgumentType: function detectCommandArgumentType(argumentType, commandType) {\n    if (argumentType === undefined) {\n      return argumentType;\n\n    } else if (argumentType == \"const\") {\n\n      if (commandType == 'background-color')\n      return 'color';\n      if (commandType == 'forecolor')\n      return 'color';\n      if (commandType == 'visible')\n      return 'boolean';\n      if (commandType == 'readonly')\n      return 'boolean';\n      if (commandType == 'required')\n      return 'boolean';\n      if (commandType == 'set-value')\n      return 'text';\n      if (commandType == 'collapse')\n      return 'boolean';\n      if (commandType == 'set-active')\n      return 'number';\n      if (commandType == 'set-min')\n      return 'text';\n      if (commandType == 'set-max')\n      return 'text';\n      if (commandType == 'calculate')\n      return undefined;\n      if (commandType == 'refresh')\n      return undefined;\n      if (commandType == 'submit-value')\n      return 'json';\n\n    } else if (argumentType === \"xpath\" || argumentType === \"entity\" || argumentType === \"function\") {\n      return argumentType;\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return null;\n  },\n  /* \r\n     *   Builds the JS command to restore a render when condition is not met\r\n     */\n  restoreRender: function restoreRender(xpath, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var properties = render.originalProperties;\n      var textFormat = properties.textFormat || {};\n      if (commandType == 'background-color')\n      self.changeRenderBackground(xpath, textFormat.background || '');\n      if (commandType == 'forecolor')\n      self.changeRenderForeground(xpath, textFormat.color || 'none');\n      if (commandType == 'visible')\n      self.changeRenderVisibility(xpath, properties.visible != undefined ? properties.visible : true);\n      if (commandType == 'readonly')\n      self.changeRenderEditability(xpath, properties.editable != undefined ? properties.editable : true);\n      if (commandType == 'required')\n      self.changeRenderRequired(xpath, properties.required != undefined ? properties.required : false);\n      // NOte: Command 6 does not have restoration\n    });\n  },\n  /* \r\n     *   Builds the JS command to restore a container when condition is not met\r\n     */\n  restoreContainer: function restoreContainer(containerId, commandType) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(xpath);\n      }\n      return;\n    }\n\n    var properties = container.originalProperties;\n    if (commandType == 'background-color')\n    self.changeContainerBackground(containerId, properties.backgroundColor || 'none');\n    if (commandType == 'visible')\n    self.changeContainerVisibility(containerId, properties.visible != undefined ? properties.visible : true);\n    if (commandType == 'collapse')\n    self.toogleContainer(containerId, true);\n    // NOte: Command 8 does not have restoration\n    if (commandType == 'readonly')\n    self.changeContainerEditability(containerId, properties.editable != undefined ? properties.editable : true);\n  },\n  /* \r\n     *   Sets a new color for the background of the render\r\n     *   Applies also to grid cells!\r\n     */\n  changeRenderBackground: function changeRenderBackground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"backgroundColor\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeBackgroundColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellBackgroundColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellBackgroundColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n\n    });\n  },\n  /*\r\n      *   Sets a new color for the background of the button\r\n      *   Applies also to grid cells!\r\n      */\n  changeButtonBackground: function changeButtonBackground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n\n    element.css(\"background-image\", \"none\");\n    element.addClass(\"ui-fast-transition\");\n\n    if (typeof element[0] !== \"undefined\") {\n      element[0].style.setProperty(\"background-color\", argument, \"important\");\n    }\n  },\n\n  /* \r\n     *   Sets a new color for the foreground of the render\r\n     */\n  changeRenderForeground: function changeRenderForeground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"color\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Sets a new color for the foreground of the render\r\n      */\n  changeButtonForeground: function changeButtonForeground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.css(\"color\", argument, \"!important\");\n  },\n  /* \r\n     *   Changes the visibility of the render\r\n     */\n  changeRenderVisibility: function changeRenderVisibility(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"visibility\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeVisibility(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellVisibility(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnVisibility(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellVisibility(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the visibility of the button\r\n      */\n  changeButtonVisibility: function changeButtonVisibility(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var visible = bizagi.util.parseBoolean(argument) == true;\n\n    if (bizagi.util.isMobileDevice()) {\n      self.changeFormButtonVisibility(guid, visible);\n    } else {\n      var element = self.form.getButton(guid);\n      if (visible) {\n        element.show();\n        element.css(\"display\", \"\");\n      } else {\n        element.hide();\n      }\n    }\n  },\n\n\n  /* \r\n     *   Changes the editability of the render\r\n     */\n  changeRenderEditability: function changeRenderEditability(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"editability\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeEditability(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellEditability(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnEditability(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellEditability(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the editability of the button\r\n      */\n  changeButtonEditability: function changeButtonEditability(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    if (bizagi.util.parseBoolean(argument) == true) {\n      element.removeAttr(\"disabled\");\n    } else {\n      element.attr(\"disabled\", \"disabled\");\n    }\n  },\n  /*\r\n      *  trigger Click button\r\n      */\n  triggerClick: function triggerClick(xpath) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.trigger(\"click\");\n  },\n\n  /* \r\n     *   Changes the required value of the render\r\n     */\n  changeRenderRequired: function changeRenderRequired(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var rendersToEval = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      if (bizagi.util.parseBoolean(render.properties.editable)) {\n        rendersToEval.push(render);\n      }\n    });\n\n    if (rendersToEval.length === 0) {\n      rendersToEval = renders;\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"required\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeRequired(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellRequired(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnRequired(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellRequired(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /* \r\n     *   Changes the render internal value\r\n     */\n  changeRenderValue: function changeRenderValue(xpath, argument) {\n    var self = this;\n\n    if (argument != null && _typeof(argument) === \"object\") {\n      argument = $.extend(argument, { fromAction: true });\n    }\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          if (render.asyncRenderDeferred) {\n            $.when(render.asyncRenderDeferred).done(function () {\n              render.setDisplayValue(argument);\n            });\n          } else {\n            render.setDisplayValue(argument);\n          }\n        });\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellValue(gridXpath.index, gridXpath.remainingXpath, argument);\n\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellValue(indexes[j], gridXpath.remainingXpath, argument);\n            }\n          }\n        });\n      }\n    });\n  },\n  /**\r\n      * Changes the render minimum value\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeRenderMinValue: function changeRenderMinValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"minValue\", argument);\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          var renderType = bizagi.util.normalizeQueryType(render.properties.type);\n          if ([\"number\", \"date\", \"money\"].includes(renderType)) {\n            render.changeMinValue(argument);\n            self.logVisualChange(newVisualChange);\n          }\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        newVisualChange.xpath = gridXpath.remainingXpath;\n\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMinValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMinValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  changeRenderMaxValue: function changeRenderMaxValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"maxValue\", argument);\n\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          render.changeMaxValue(argument);\n          self.logVisualChange(newVisualChange);\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMaxValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMaxValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  executeCalculatedField: function executeCalculatedField(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      $.when(render.ready()).done(function () {\n        render.runFormula();\n      });\n    });\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshControl: function refreshControl(xpath, xpathContext, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n    var queue = new bizagiQueue();\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process matching renders\n    $.each(renders, function (i, render) {\n      queue.add(render.ready().pipe(function () {\n        return render.refreshControl({ xpath: xpath, xpathContext: xpathContext });\n      }));\n    });\n\n    // Return queue deferred\n    return queue.execute();\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshContainer: function refreshContainer(containerId, xpathContext) {\n    var self = this;\n    var container = self.form.getContainer(containerId);\n\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(containerId);\n      }\n      return;\n    }\n\n    return $.when(container.ready()).\n    pipe(function () {\n      return container.refreshContainer({ xpathContext: xpathContext });\n    });\n  },\n  /**\r\n      * Refresh a cell of grid\r\n      */\n  refreshGridCell: function refreshGridCell(xpath, xpathContext) {\n    var self = this;\n    var queue = new bizagiQueue();\n    var def = new $.Deferred();\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n        return false;\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n        return false;\n      });\n    }\n\n    if (rendersToEval.length === 0) {\n      return;\n    }\n\n    // Check xpathContext of the form (addForm or editForm)\n    if (self.form && self.form.properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? self.form.properties.xpathContext + \".\" + xpathContext : self.form.properties.xpathContext;\n    }\n\n    queue.add(def.promise());\n\n    $.when.apply($, $.map(rendersToEval, function (grid) {\n      grid.ready();\n    })).\n    done(function () {\n      var len = rendersToEval.length;\n      var internalQueue = new bizagiQueue();\n      for (var i = 0; i < len; i++) {\n        var grid = rendersToEval[i];\n\n        var gridXpath = self.processGridXpath(xpath);\n        if (!bizagi.util.isEmpty(gridXpath.index)) {\n          // Process a specific row\n          internalQueue.add(grid.refreshCell({\n            key: gridXpath.index,\n            column: gridXpath.remainingXpath,\n            xpathContext: xpathContext }));\n\n        } else {\n          // Process all rows\n          var indexes = grid.getIndexes();\n          var lenIndex = indexes.length;\n          for (var j = 0; j < lenIndex; j++) {\n            internalQueue.addParallel(grid.refreshCell({\n              key: indexes[j],\n              column: gridXpath.remainingXpath,\n              xpathContext: xpathContext }));\n\n          }\n        }\n      }\n\n      $.when(internalQueue.execute()).\n      done(function () {\n        def.resolve();\n      });\n    });\n\n\n    return queue.execute();\n  },\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitFormData: function submitFormData(params) {\n    var self = this;\n\n    // For the submit action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.submitData(params);\n    });\n  },\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(rule, xpathContext, commandType) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n    var prefix = rule + \".\" + xpathContext;\n    if (self.isRecentAction(prefix, commandType)) {\n      return;\n    } else {\n      // Process the action\n      return $.when(form.ready()).\n      pipe(function () {\n        return form.executeRule({ rule: rule, xpathContext: xpathContext });\n      });\n    }\n  },\n  executeInterface: function executeInterface(interfaceObject, xpathContext) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executeInterface({ \"interface\": interfaceObject, xpathContext: xpathContext });\n    });\n  },\n\n\n  executeSAPConnector: function executeSAPConnector(guidsap, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeSAPConnector({ guidsap: guidsap, xpathContext: xpathContext });\n    });\n  },\n\n  executeConnector: function executeConnector(guidConnector, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeConnector({ guidConnector: guidConnector, xpathContext: xpathContext });\n    });\n  },\n\n  executePipeline: function executePipeline(pipeline, xpathContext) {\n    var self = this;\n    // For the execute pipeline  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executePipeline({ pipeline: pipeline, xpathContext: xpathContext });\n    });\n  },\n  /*\r\n     *   Submit the given render and refresh dependencies after that\r\n     */\n  submitRender: function submitRender(xpath, argument) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process the action in the render\n    return $.when(render.ready()).pipe(function () {\n      return render.submitOnChange();\n    });\n  },\n  /*\r\n     * Cleans current value\r\n     */\n  cleanRenderData: function cleanRenderData(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var promises = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        promises.push($.when(render.ready()).then(function () {\n          return $.when(render.renderingDeferred).then(function () {\n            return $.when(render.cleanData()).then(function () {\n              return self.changeRenderRequired(xpath, render.properties.required != undefined ? render.properties.required : false);\n            });\n          });\n        }));\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        promises.push($.when(render.ready()).then(function () {\n          var gridPromises = [];\n\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            gridPromises.push($.when(render.cleanCellData(gridXpath.index, gridXpath.remainingXpath)));\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              gridPromises.push($.when(render.cleanCellData(indexes[j], gridXpath.remainingXpath)));\n            }\n          }\n\n          return $.when.apply($, gridPromises);\n        }));\n      }\n    });\n\n    return $.when.apply($, promises);\n  },\n  /* \r\n     *   Changes container background color\r\n     */\n  changeContainerBackground: function changeContainerBackground(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeBackgroundColor(argument);\n      container.visualChanges[\"backgroundColor\"] = argument;\n    });\n  },\n  /* \r\n     *   Shows or hides a container\r\n     */\n  changeContainerVisibility: function changeContainerVisibility(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready(true)).done(function () {\n      $.when(container.renderingDeferred).done(function () {\n        container.changeVisibility(argument);\n        container.visualChanges[\"visibility\"] = argument;\n      });\n    });\n  },\n  /* \r\n     *   Expand or collapse a group container\r\n     */\n  toogleContainer: function toogleContainer(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (/group/i.test(container.properties.type)) {\n      $.when(container.ready()).done(function () {\n        container.toogleContainer(argument);\n      });\n    }\n  },\n  /* \r\n     *   Select a determinate sub-container in a tab or an accordion\r\n     */\n  changeActiveItem: function changeActiveItem(containerId) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (container.properties.type === \"tabItem\" && container.loadingDeferred) {\n      container.loadingDeferred.resolve();\n    }\n    $.when(container.ready()).done(function () {\n      container.setAsActiveContainer();\n    });\n  },\n  /* \r\n     *   Changes container editability\r\n     */\n  changeContainerEditability: function changeContainerEditability(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeEditability(argument);\n      container.visualChanges[\"editability\"] = argument;\n    });\n  },\n  /*\r\n     *   Search for grid columns\r\n     */\n  searchGridColumns: function searchGridColumns(condition, gridColumns) {\n    var self = this;\n    var column;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      var j, lenIndex;\n      for (j = 0, lenIndex = condition.expressions.length; j < lenIndex; j++) {\n        self.searchGridColumns(condition.expressions[j], gridColumns);\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridColumns(condition.simple, gridColumns);\n\n    } else if (condition.complex) {\n      return self.searchGridColumns(condition.complex, gridColumns);\n    } else {\n      var xpath = condition.xpath || condition.renderId;\n      if (xpath) {\n        // Check in condition.xpath\n        if (xpath && xpath.indexOf(\"[]\") > 0) {\n          column = xpath.substring(xpath.indexOf(\"[]\") + 3);\n          gridColumns.push(column);\n        }\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType === 'xpath') {\n          if (condition.argument.indexOf(\"[]\") > 0) {\n            column = condition.argument.substring(condition.argument.indexOf(\"[]\") + 3);\n            gridColumns.push(column);\n          }\n        }\n      }\n    }\n\n    return null;\n  },\n  /**/\n\n  isGridComponent: function isGridComponent(render, xpath) {\n    var renderType = bizagi.util.normalizeType(render.properties.type);\n    return /grid$/i.test(renderType) && xpath.indexOf('[') >= 0;\n  },\n  /**/\n\n  isValidRender: function isValidRender(render) {\n    var notValid = [\"collectionnavigator\"];\n\n    return notValid.indexOf(render.properties.type) === -1;\n  },\n\n  /**\r\n      * Helper to override the visibility and editability in mobile devices. \r\n      * @param {} guid\r\n      * @param {} visible\r\n      * @returns {}\r\n      */\n  changeFormButtonVisibility: function changeFormButtonVisibility(guid, visible) {\n    var self = this;\n    var form = self.form;\n    var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\n    var index = buttons.findIndex(function (item) {return item.id === guid;});\n    var navigation = form.getNavigation();\n\n    if (index !== -1)\n    buttons[index].visible = visible;\n\n    form.buttons = buttons || [];\n    navigation.setNavigationButtons(form);\n  },\n\n  /**\r\n      * Create new object of visual changes\r\n      * @param element\r\n      * @param command\r\n      * @param argument\r\n      * @returns {Object}\r\n      */\n  getVisualChange: function getVisualChange(element, command, argument) {\n    return new Object({\n      element: element,\n      command: command,\n      argument: argument,\n      indexes: [],\n      xpath: \"\" });\n\n  },\n\n  /**\r\n      * Add changes to log\r\n      * @param changes\r\n      */\n  logVisualChange: function logVisualChange(changes) {\n    if (changes.indexes.length > 0) {\n      for (var i = 0; i < changes.indexes.length; i++) {\n        var cell = changes.element.getControlCell(changes.indexes[i], changes.xpath);\n        if (cell) cell.visualChanges[changes.command] = changes.argument;\n      }\n    } else {\n      changes.element.visualChanges[changes.command] = changes.argument;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Form Container Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a form container class that defines basic stuff regarding the device\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.form\", {}, {\n  /*\r\n                                              *   Constructor\r\n                                              */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n    var device = bizagi.util.detectDevice();\n\n    // Creates a hashtable to maintain references by id\n    self.rendersById = {};\n    self.rendersByXpath = {};\n    self.rendersByXpathId = {};\n    self.rendersByType = {};\n\n    // Set page cache id\n    self.idPageCache = data.pageCacheId;\n\n    // Set default mode\n    self.mode = params.mode || \"execution\";\n    self.focus = params.focus;\n\n    // Set rendering params\n    self.params = params;\n\n    // Call base\n    this._super(params);\n\n    // Define confirmation message \n    var message = \"\";\n\n    if (device !== \"desktop\") {\n      message = this.getResource(\"render-form-user-confirmation-message\").replace(/<br(\\/| \\/)>/g, \"\\n\");\n    } else {\n      message = this.getResource(\"render-form-user-confirmation-message\");\n    }\n\n    // Default properties\n    var properties = self.properties;\n    properties.sessionId = data.sessionId;\n    properties.displayAsReadOnly = bizagi.util.parseBoolean(data.displayAsReadOnly) || false;\n    properties.userConfirmationMessage = properties.userConfirmationMessage || message;\n    properties.orientation = properties.orientation || \"ltr\";\n    properties.hasRule = bizagi.util.parseBoolean(properties.hasRule) || false;\n    properties.contexttype = params.contexttype || \"\";\n    properties.paramsRender = params.paramsRender || {};\n    properties.processPath = params.data.processPath ? params.data.processPath.replaceAll(\"|/|\", \"  &rsaquo;  \") : \"\";\n    properties.breadCrumb = params.data.processPath ? params.data.processPath.split(\"|/|\") : [];\n    properties.type = properties.type || \"form\";\n\n    // Set validations & actions\n    this.validations = data.validations;\n    this.actions = data.actions;\n\n    // Enable the \"Validate and Save\" action for Form Buttons\n    self.allowValidateAndSaveAction = bizagi.override && bizagi.override.enableActionValidateAndSave === true;\n\n    // Enable execution of Quick actions\n    var enableExecuteQuickActions = bizagi.util.isFeatureEnabled(\"enableExecuteQuickActions\");\n    var allowExecuteQuickActions = enableExecuteQuickActions !== null ? enableExecuteQuickActions : true;\n    self.useQuickActions = allowExecuteQuickActions && self.hasQuickActions(data, allowExecuteQuickActions);\n\n    // Initialize buttons\n    self.initializeButtons(data);\n\n    // Define transitions to Complex Gateway\n    if (data.transitions) {\n      self.transitions = data.transitions;\n    }\n\n    this.originalProcessButton = this.processButton;\n\n    //Custom behaviour for application parent activated.\n    self.isRoutingDisabled = false;\n    if (params.applicationParent) {\n      switch (params.applicationParent) {\n        case 'NEWWORKPORTAL':\n          self.isRoutingDisabled = true;\n          break;}\n\n    }\n\n    self.isOfflineFormsV2Supported = bizagi.util.isMobileDevice() && bizagi.util.isOfflineFormsV2Supported();\n    self.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    self.rendersById[properties.id] = self;\n  },\n\n  /*\r\n     *   Initializes button metadata\r\n     */\n  initializeButtons: function initializeButtons(data) {\n    var self = this;\n\n    self.buttons = [];\n\n    // Process buttons\n    if (data.buttons) {\n      $.each(data.buttons, function (i, item) {\n        var button = item.button.properties;\n\n        // Process caption\n        button.caption = !bizagi.util.isEmpty(button.caption) && self.getResource(button.caption) !== button.caption ? self.getResource(button.caption) : button.caption;\n\n        // Process actions\n        if (button.actions) {\n          $.each(button.actions, function (i, action) {\n            button[action] = true;\n          });\n        }\n\n        // Add other properties\n        button.ordinal = i;\n        button.action = button.next ? \"next\" :\n        button.nextWithoutValidations ? \"nextWithoutValidations\" :\n        button.submitData ? \"save\" :\n        button.cancel ? \"cancel\" :\n        button.back ? \"back\" :\n        button.createnewcase ? \"createnewcase\" :\n        button.validate ? \"validate\" : \"\";\n\n        // Explicit add save operation\n        button.save = button.action === \"save\";\n\n        // Allow Quick action\n        button.quickAction = button.type === \"quickactions\";\n\n        // Add inherent behaviours\n        if (button.next || button.back || button.nextWithoutValidations) {\n          button.routing = true;\n        }\n\n        if (button.hasRule) {\n          button.executeRule = true;\n        }\n\n        if (self.allowValidateAndSaveAction && button.validate) {\n          button.submitData = true;\n          button.refresh = true;\n          button.save = true;\n          if (button.action === \"next\" || button.action === \"createnewcase\") {\n            button.refresh = false;\n          }\n        }\n\n        // Prepare button style\n        button.style = self.buildButtonStyle(button);\n\n        // Add to button array\n        self.buttons.push(button);\n      });\n    }\n  },\n\n  /*\r\n     *   Get the original params used to fetch the form\r\n     */\n  getParams: function getParams() {\n    return this.params;\n  },\n\n  setParam: function setParam(property, value) {\n    if (this.params) {\n      this.params[property] = value;\n    }\n  },\n\n  /*\r\n     *   Get current rendering mode\r\n     */\n  getMode: function getMode() {\n    return this.mode;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    if (self.params) {\n      return self.params.customHandlers;\n    }\n  },\n  /*\r\n     * Method to index renders\r\n     */\n  registerRender: function registerRender(render) {\n    var self = this;\n    var xpath = render.properties.xpath;\n    var id = render.properties.id;\n    var type = render.properties.type;\n    var xpathId = xpath ? xpath + \".\" + id : undefined;\n\n    self.rendersById[id] = render;\n    if (xpath) {\n      if (!self.rendersByXpath[xpath]) {\n        self.rendersByXpath[xpath] = [];\n      }\n      self.rendersByXpath[xpath].push(render);\n    }\n\n    if (xpathId) {\n      if (!self.rendersByXpathId[xpathId]) {\n        self.rendersByXpathId[xpathId] = [];\n      }\n      self.rendersByXpathId[xpathId].push(render);\n    }\n\n    if (!self.rendersByType[type]) {\n      self.rendersByType[type] = [];\n    }\n    self.rendersByType[type].push(render);\n  },\n  /*\r\n     * Method to unregister render\r\n     */\n  unregisterRender: function unregisterRender(render) {\n    var self = this;\n\n    if (self.rendersById[render.properties.id]) {\n      delete self.rendersById[render.properties.id];\n    }\n\n    if (render.properties.xpath) {\n      if ($.isArray(self.rendersByXpath[render.properties.xpath]) &&\n      self.rendersByXpath[render.properties.xpath].length > 1) {\n        for (var i = 0, l = self.rendersByXpath[render.properties.xpath].length; i < l; i++) {\n          var element = self.rendersByXpath[render.properties.xpath][i];\n          if (bizagi.util.md5(JSON.stringify(element.properties)) === bizagi.util.md5(JSON.stringify(render.properties))) {\n            self.rendersByXpath[render.properties.xpath].splice(i, 1);\n            self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id].splice(i, 1);\n            break;\n          }\n        }\n      } else {\n        delete self.rendersByXpath[render.properties.xpath];\n        delete self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id];\n      }\n    }\n\n    // Unregister from renders by type\n    if (render.properties.type) {\n      var listRendesByType = self.getRenderByType(render.properties.type);\n      var listRendesByTypeLength = listRendesByType.length;\n      var renderKey = render.properties.id || render.properties.xpath;\n\n      for (var i = 0; i < listRendesByTypeLength; i++) {\n        var listRender = listRendesByType[i];\n        if (typeof listRender.properties.id != \"undefined\" && listRender.properties.id == renderKey ||\n        typeof listRender.properties.xpath != \"undefined\" && listRender.properties.xpath == renderKey) {\n          // Unregister element\n          self.rendersByType[render.properties.type].splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n  /*\r\n     * Method to access a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this;\n\n    return self.rendersById[id];\n  },\n\n  getGridByColumn: function getGridByColumn(id) {\n    var self = this;\n    var grids = self.getRenderByType('grid');\n    var i = 0,columnIndex;\n\n    for (; i < grids.length; i++) {\n      columnIndex = grids[i].columnsIds.indexOf(id);\n      if (columnIndex != -1) {\n        return grids[i];\n      }\n    }\n\n    return null;\n  },\n\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this;\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath && xpath.indexOf)\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    return self.rendersByXpathId[xpath] ?\n    self.rendersByXpathId[xpath] : self.rendersByXpath[xpath] ?\n    self.rendersByXpath[xpath] : [];\n  },\n  /**\r\n      * Get all render with the same type\r\n      */\n  getRenderByType: function getRenderByType(type) {\n    var self = this;\n\n    // Check that type is defined\n    if (typeof type == \"string\" && type.length > 0) {\n      // Search controls by type\n      return self.rendersByType[type] ? self.rendersByType[type] : [];\n    }\n    return [];\n  },\n\n  /*\r\n     *   Build the container html\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    // TODO: Unify markup of forms. Currently the template has validations to apply a different markup if it is \n    //a query form. In the future, all forms should have the same markup to minimize complexity. See form.tmpl.html.\n    var html = $.fasttmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() === \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation,\n      isEmpty: bizagi.util.isEmpty(self.children) && bizagi.util.isEmpty(self.transitions), // Sections and Gateway\n      allowQuickActions: self.useQuickActions // Quick actions\n    });\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(form) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Add a mode class\n    form.addClass(\"ui-bizagi-rendering-mode-\" + mode);\n\n    // Call base\n    this._super(form);\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    if (form.length > 1) {\n      $(form).each(function () {\n        if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\n          complexGatewayContainer = this;\n        }\n      });\n    } else {\n      complexGatewayContainer = $(\".ui-bizagi-container-complexgateway\", form);\n    }\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Process buttons\n    self.processButtons(form);\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function (e, mainForm) {\n      var $canvas = self.getValidationsContainer(mainForm);\n\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations, $canvas);\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n\n    // Set events for complex gateway interface\n    $(complexGatewayContainer).find(\".ui-checkbox\").bind(\"click\", function () {\n      var checkboxLabel = $(\"label\", this);\n\n      var transitionId = checkboxLabel.data(\"value\") || \"\";\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      if (bizagi.util.parseBoolean(checkboxLabel.data(\"checked\"))) {\n        // Uncheck element\n        checkboxLabel.removeClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", false);\n        self.activeTransitions[transitionId] = false;\n      } else {\n        // Check element\n        checkboxLabel.addClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", true);\n        self.activeTransitions[transitionId] = true;\n      }\n    });\n\n\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n  },\n  /*\r\n     *   Format form buttons to allow further customization\r\n     */\n  buildButtonStyle: function buildButtonStyle(button) {\n\n    var style = {};\n    if (button.format) {\n      if (button.format.size) {\n        if (button.format.size != \"0\") {\n          var newFontSize = 100 + Number(button.format.size) * 10 + \"%\";\n          style[\"font-size\"] = newFontSize + \" !important\";\n        }\n      }\n      if (button.format.bold) {\n        style[\"font-weight\"] = \"bold !important\";\n        if (bizagi.util.isIE()) {\n          style[\"font-family\"] = \"'Open Sans', 'Helvetica Neue', Arial, Helvetica, sans-serif !important\";\n        }\n      }\n      if (button.format.italic) {\n        style[\"font-style\"] = \"italic !important\";\n      }\n      if (button.format.underline || button.format.strikethru) {\n        var strikethru = bizagi.util.parseBoolean(button.format.strikethru) ? \"line-through \" : \"\";\n        var underline = bizagi.util.parseBoolean(button.format.underline) ? \"underline \" : \"\";\n        style[\"text-decoration\"] = strikethru + underline + \" !important\";\n      }\n      if (button.format.background) {\n        style[\"background-color\"] = button.format.background + \" !important\";\n        style[\"background-image\"] = \"none !important\";\n      }\n      if (button.format.color) {\n        style[\"color\"] = button.format.color + \" !important\";\n      }\n    }\n\n    var strStyle = \"\";\n    for (key in style) {\n      strStyle += key + \":\" + style[key] + \";\";\n    }\n    return strStyle;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   Returns a promise\r\n     */\n  render: function render() {\n    var self = this;\n\n    // Creates a deferred, so we can check when form has been included in dom\n    if (!self.readyDeferred)\n    self.readyDeferred = new $.Deferred();\n\n    // Call base\n    var result = this._super();\n\n    return result;\n  },\n  /*\r\n     *   Sets a promise that the form will be included in the DOM\r\n     *   so we can apply some tedious plugins that require that\r\n     */\n  ready: function ready() {\n    var self = this;\n\n    return self.readyDeferred.promise();\n  },\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n  /*\r\n     *  Return context type, when the parent form is entity\r\n     */\n  getContextType: function getContextType() {\n    return this.properties.contexttype || \"\";\n  },\n\n  /*\r\n     * Return the endpoint action, when the form will be refresh\r\n     */\n  getEndPointAction: function getEndPointAction() {\n    var self = this,\n    properties = self.properties;\n\n    if (properties.formtype == \"startform\")\n    return \"LOADSTARTFORM\";\n\n    return undefined;\n\n  },\n\n  /*\r\n     *   Returns the page cache id for the element\r\n     */\n  getPageCache: function getPageCache() {\n    return this.idPageCache;\n  },\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    return this;\n  },\n  /*\r\n     *   Method to process button actions in the form\r\n     */\n  processButtons: function processButtons() {\n    var self = this;\n    var buttons = self.getButtons();\n\n    // Don't process buttons if they are undefined in the template\n    if (!buttons || buttons.length === 0) return;\n\n    // Attach a handler for each button\n    buttons.on(\"click\", function (e) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n\n      self.startLoading();\n\n      var button = $(this);\n      var ordinal = button.attr(\"ordinal\");\n      var buttonProperties = self.buttons.find(function (btn) {\n        return btn.ordinal == ordinal;\n      });\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Disable button to prevent multiple click actions\n      button.prop(\"disabled\", true);\n\n      if (button.hasOwnProperty('disabled')) {\n        button.button(\"disable\"); // Setting styles\n      }\n\n      // External Events\n      self.propagateExternalEvents(e);\n\n      // Execute button\n      // QAF-1418 - add setTimeout\n      var timeOutButton = setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n          if ($.contains(document.documentElement, button.get(0))) {//check if button is still in DOM\n            button.prop(\"disabled\", false); //enable button\n\n            if (button.hasOwnProperty('enable')) {\n              button.button(\"enable\"); //Setting styles\n            }\n          }\n        });\n        clearTimeout(timeOutButton);\n      }, 100);\n    });\n  },\n  /*\r\n     * Execute codes just before sending information to server\r\n     */\n  preProcessButton: function preProcessButton(buttonProperties) {\n    return true;\n  },\n  /*\r\n     * Execute codes just after sending information to server\r\n     */\n  postProcessButton: function postProcessButton(responses, buttonProperties) {\n    return true; // true means continue\n  },\n\n  setLoaderDeferred: function setLoaderDeferred() {\n    var self = this;\n\n    self.loaderDeferred = $.Deferred().resolve();\n  },\n\n  deleteLoaderDeferred: function deleteLoaderDeferred() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        delete self.loaderDeferred;\n      }).fail(function () {\n        delete self.loaderDeferred;\n      });\n    }\n  },\n\n  useOrSetLoaderDeferred: function useOrSetLoaderDeferred() {\n    var self = this;\n\n    if (!self.isLoaderDeferredSet()) {\n      self.setLoaderDeferred();\n    }\n  },\n\n  getLoaderPromise: function getLoaderPromise() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      return self.loaderDeferred.promise();\n    } else {\n      return;\n    }\n  },\n\n  isLoaderDeferredSet: function isLoaderDeferredSet() {\n    var self = this;\n\n    if (self.loaderDeferred) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  appendWaitForLoader: function appendWaitForLoader(params) {\n    var self = this;\n    var promise = params.promise;\n    var create = params.create || false;\n\n    if (!self.isLoaderDeferredSet()) {\n      if (create) {\n        self.setLoaderDeferred();\n      } else {\n        return;\n      }\n    }\n\n    self.loaderDeferred = self.loaderDeferred.then(function () {\n      return function () {\n        return promise;\n      }();\n    });\n  },\n\n  getResolveOrReject: function getResolveOrReject() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        deferred.resolve();\n      }).fail(function () {\n        deferred.resolve();\n      });\n    } else {\n      deferred.resolve();\n    }\n\n    return deferred.promise();\n  },\n\n  /*\r\n     *   Executes a single button action\r\n     */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var properties = self.properties;\n    if (!buttonProperties.routing) {\n      bizagi.chrono.initAndStart(\"submitForm\");\n    }\n    bizagi.chrono.init(\"waiting\");\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Resolve asynchronous tabItems\n    var form = self.getFormContainer();\n    var getAllTabs = form.getRenderByType(\"tabItem\");\n    var getAllTabsLength = getAllTabs.length;\n\n    form.innerTabsLoading = true;\n\n    self.useOrSetLoaderDeferred();\n\n    // Check\n    for (var i = 0; i < getAllTabsLength; i++) {\n      var render = getAllTabs[i];\n      // Resolve internal deferred\n      if (render.loadingDeferred && render.parent.container) {\n        render.loadingDeferred.resolve();\n      }\n    }\n\n    delete form.innerTabsLoading;\n\n    $.when(self.ready(), self.getResolveOrReject()).done(function () {\n      self.deleteLoaderDeferred();\n      // Validate the form\n      var valid = bizagi.util.parseBoolean(buttonProperties.validate) ? self.validationController.performValidations() : true;\n      if (valid) {\n\n        if ([\"save\", \"next\", \"back\", \"createnewcase\", \"nextWithoutValidations\"].includes(buttonProperties.action) && !self.isOfflineForm) {\n          $(document).data('auto-save', '');\n        }\n\n        // Check for user confirmation if configured and the button is configured to enroute\n        var confirmationStatus = self.getConfirmationStatus(properties, buttonProperties);\n\n        if (confirmationStatus.hasConfirmation) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(confirmationStatus.message, null, false)).done(function () {\n            // Submits the form\n            if (self.preProcessButton(buttonProperties)) {\n              //Trigger the event after ProcessButton\n              self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n              $.when(self.submitForm(buttonProperties)).done(function () {\n                defer.resolve();\n              }).fail(function () {\n                defer.reject(arguments);\n              });\n            }\n          }).fail(function () {\n            defer.reject();\n          });\n\n        } else {\n          if (self.preProcessButton(buttonProperties)) {\n            //Trigger the event after ProcessButton\n            self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n            $.when(self.submitForm(buttonProperties)).done(function () {\n              $(document).trigger(\"FORMACTION\", buttonProperties);\n              defer.resolve();\n            }).fail(function () {\n              defer.reject(arguments);\n            });\n          }\n        }\n\n      } else {\n\n        self.endLoading();\n        if (buttonProperties.submitData) {\n          $.when(self.submitData()).done(function () {\n            defer.reject();\n          });\n        } else {\n          defer.reject();\n        }\n\n        self.validationController.expandNotificationBox();\n      }\n\n      var customHandler = self.getCustomHandler(\"afterFormButtonClick\");\n      if (customHandler) {\n        customHandler(buttonProperties);\n      }\n    });\n\n    return defer.promise();\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  validateForm: function validateForm() {\n    var self = this;\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Validate the form\n    return self.validationController.performValidations();\n  },\n  /*\r\n     *   Submits all the form to the server and returns a deferred to check when the process finishes\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions()) {\n      return $.when(function () {\n        return null;\n      });\n    }\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Wait for deferreds\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n\n      var saveParams = {\n        action: \"SAVE\",\n        data: data,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        isOfflineForm: self.isOfflineForm || false };\n\n\n      if (self.isOfflineForm) {\n        saveParams.offlineType = self.params.offlineType;\n      }\n\n      // Submit the form\n      return $.when(self.dataService.submitData(saveParams)).\n      always(function () {\n        self.endLoading();\n      });\n    });\n  },\n  removeCaseSyncError: function removeCaseSyncError() {\n    var editPromise = undefined;\n    if (!this.removeSyncErrorOnSubmit) return;\n    this.removeSyncErrorOnSubmit = false;\n    var offlineType = this.params.offlineType == \"task\" ? \"task\" : \"start\";\n    var editPromise = offlineType == \"start\" ? this.dataService.removeStartCaseSyncError(this.params) :\n    this.dataService.removeTaskCaseSyncError(this.params);\n    return editPromise;\n  },\n  /*\r\n     *   Creates a json array with key values to send to the server\r\n     */\n  submitForm: function submitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.isReadyToSave()).\n    then(function () {\n      if (self.isOfflineForm) {\n        $.when(self.removeCaseSyncError()).\n        then(\n        //Even if the removeSyncError promise fails the internalSubmit should be executed without break the promise chain\n        function () {return self.internalSubmitFormOffline(buttonProperties);},\n        function () {return self.internalSubmitFormOffline(buttonProperties);}).\n\n        then(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      } else\n      {\n        $.when(self.internalSubmitForm(buttonProperties)).\n        done(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      }\n    }).\n    fail(function () {\n      self.endLoading();\n      bizagi.log(\"The form is not saved, no changes were found\");\n      defer.reject();\n    });\n    return defer.promise();\n  },\n  checkWidgetsData: function checkWidgetsData() {\n    //\n  },\n  isComplexGatewayPainted: function isComplexGatewayPainted() {\n    return false;\n  },\n\n  /**\r\n      * Get last action button\r\n      * @returns {*}\r\n      */\n  getLastActionButton: function getLastActionButton() {\n    return this.lastActionButton;\n  },\n\n  /**\r\n      * Internal - Creates a json array with key values to send to the database\r\n      * @param {} buttonProperties\r\n      * @returns {}\r\n      */\n  internalSubmitFormOffline: function internalSubmitFormOffline(buttonProperties) {\n    var self = this;\n    var message = \"\";\n    var data;\n    var defer = $.Deferred();\n\n    if (self.isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.save) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    } else {\n      // When the action is validate            \n      return;\n    }\n\n    var executeButtonAction = null;\n\n    // Start asynchronous operation\n    bizagi.loading.start();\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      // in offline this don't happend => Reset data because when an execute rule operation has been performed, it saved already all the data\n      if (data == undefined) {\n        data = {};\n      }\n\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule_\" + buttonProperties.id;\n    }\n\n    if (self.transitions) {\n      var transitions = [];\n      $.each(this.activeTransitions, function (key, value) {\n        value ? transitions.push(key) : \"\";\n      });\n\n      if (bizagi.util.countProps(transitions) == 0) {\n        bizagi.showMessageBox(\n        bizagi.localization.getResource(\"render-widget-complexgateway-path\"),\n        bizagi.localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n\n        self.endLoading();\n        return \"\";\n      }\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(executeButtonAction);\n    }\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.submitData({\n        action: buttonProperties.action,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        transitions: transitions || \"\",\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: actions })).\n      then(function (responses) {\n\n        if (!self.postProcessButton(responses, buttonProperties)) {\n          return;\n        }\n\n        //Offline action stored\n        var isSaveForDraft = self.params.offlineType !== \"task\" && buttonProperties.action === \"save\";\n        if (self.online && self.isOfflineFormsV2Supported && !isSaveForDraft) {\n          var syncDeferred = new $.Deferred();\n          var syncParams = $.extend({ deferred: syncDeferred }, self.params);\n          $(document).trigger(\"tryPushCase.offline\", syncParams);\n        }\n\n        //Backward comp\n        if (!self.isOfflineFormsV2Supported) {\n          $(document).trigger(\"tryPushData.offline\");\n        }\n\n        $.when(syncDeferred).\n        then(function (result) {\n          bizagi.loading.stop();\n          if (buttonProperties.routing) {\n            if (!self.online && self.isOfflineFormsV2Supported) {\n              self.triggerHandler(\"routing\", {\n                offlineAction: buttonProperties.action,\n                idCase: self.params.idCase,\n                idWorkitem: self.params.idWorkitem,\n                buttonPropertiesAction: buttonProperties.action,\n                radNumber: self.params.radNumber });\n\n            } else {\n              //Show toast synchronized\n              if (self.showToastOnSuccessSync) {\n                self.showToastOnSuccessSync = false;\n                bizagi.util.showMobileToast({\n                  type: \"success\",\n                  message: bizagi.localization.getResource(\"workportal-offline-sync-success\") });\n\n              }\n              self.triggerHandler(\"routing\", {\n                idCase: result.IdCase,\n                caseNumber: result.CaseNumber,\n                buttonPropertiesAction: buttonProperties.action });\n\n            }\n          } else {\n\n            //The case was not sync\n            if (!self.online && result == undefined) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n            // After successfully response refresh the form\n            if (buttonProperties.refresh || result && result.shouldRefresh) {\n              self.refreshForm();\n            }\n            if (self.showToastOnSuccessSync && self.online) {\n              self.showToastOnSuccessSync = false;\n              bizagi.util.showMobileToast({\n                type: \"success\",\n                message: bizagi.localization.getResource(\"workportal-offline-save-and-sync-success\") });\n\n            } else {\n              var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-successful\", \"Saved\");\n              bizagi.util.showNotification({ text: message, stop: false, type: \"success\" });\n            }\n          }\n          defer.resolve();\n        }).\n        fail(function (error) {\n          bizagi.loading.stop();\n          bizagi.util.recreateNativeButtons(self);\n          var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n          bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n          if ($.isArray(error)) {\n            var responses = error;\n            var bHasValidations;\n            var alertMessage = \"\";\n            $.each(responses, function (i, response) {\n              var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n              bHasValidations = propertiesToDisplayMessages.bHasValidations;\n              alertMessage = propertiesToDisplayMessages.alertMessage;\n            });\n            if (bHasValidations && alertMessage !== \"\") {\n              bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n            }\n          }\n          self.failHandler(error);\n          defer.reject(error);\n        });\n      }).fail(function (error) {\n        var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n        bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n        defer.reject(error);\n      });\n    });\n\n  },\n\n  /**\r\n      * To save handSignature or any filetype render after editting in offline mode\r\n      * @param {Array} data - RederValues from collecData() \r\n      */\n  partialSubmitFormOffline: function partialSubmitFormOffline(data) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.dataService.submitData({\n      action: \"save\",\n      data: data,\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      idForm: self.properties.id,\n      prepare: true,\n      transitions: \"\",\n      idCase: self.params.idCase,\n      idWorkitem: self.params.idWorkitem,\n      isOfflineForm: self.isOfflineForm || false,\n      offlineType: self.params.offlineType || \"\",\n      actions: [] })).\n\n    fail(function (error) {\n      var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-fail\", \"Not saved\");\n      bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n      defer.reject(error);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Internal - Creates a json array with key values to send to the server\r\n     */\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var data = {};\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase || buttonProperties.back) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    var submitDataAction = null;\n    var executeButtonAction = null;\n    var performAction = null;\n    var checkpointAction = null;\n    var commitAction = null;\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      if (data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase || buttonProperties.nextWithoutValidations) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi.\n          localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      if (data && data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n\n      performAction = self.dataService.submitData({\n        action: self.getButtonAction(buttonProperties.action),\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n      performAction.tag = \"performAction\";\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n      actions.push(checkpointAction);\n      actions.push(executeButtonAction);\n      actions.push(commitAction);\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    // Execute the batch\n    bizagi.chrono.initAndStart(\"submitForm-ajax\");\n\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply(this, data.deferreds).\n      done(function (response) {\n        flowControlDeferred.resolve(response);\n      }).\n      fail(function () {\n        flowControlDeferred.reject();\n        console.log(\"Error: It was not possible resolve async actions on form \");\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    waitingDeferreds.push(flowControlDeferred);\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.multiaction().execute({ actions: actions })).done(function (responses) {\n        bizagi.chrono.stop(\"submitForm-ajax\");\n        // End asynchronous operation\n        self.endLoading();\n        // Find validations\n        var bHasValidations;\n        var alertMessage = \"\";\n        $.each(responses, function (i, response) {\n\n          var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n          bHasValidations = propertiesToDisplayMessages.bHasValidations;\n          alertMessage = propertiesToDisplayMessages.alertMessage;\n\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase,\n              routingDisabled: buttonProperties.routingDisabled });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else {\n          if (alertMessage !== \"\") {/*If there is an alertMessage show in a modal error*/\n            bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n          }\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        defer.resolve();\n      }).fail(function (res, res2, response) {\n        if (buttonProperties.executeRule) {\n          self.sendRollbackAction(buttonProperties.id);\n        }\n\n        if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\n        response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\n            return $.when(self.internalSubmitForm($.extend({}, buttonProperties, { forcePlanCompletion: true })));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          self.failHandler(response);\n          defer.reject(response);\n        }\n      });\n    });\n    return defer.promise();\n  },\n  validationToDisplayMessages: function validationToDisplayMessages(bHasValidations, messageType, message, alertMessage) {\n    var self = this;\n\n    if (messageType == \"validationMessages\") {\n      // Something went wrong, we gotta display messages in notifications grid\n      self.addValidationMessage(message);\n      bHasValidations = true;\n    }\n    if (messageType == \"alertMessages\") {\n      // Something went wrong, we gotta display alert message\n      if (alertMessage === \"\") {\n        alertMessage = message;\n      } else {\n        alertMessage = alertMessage + \"\\n\\n\" + message;\n      }\n\n      bHasValidations = true;\n    }\n\n    return { \"bHasValidations\": bHasValidations, \"alertMessage\": alertMessage };\n  },\n\n  /*\r\n     *   Add a validation message to the form\r\n     */\n  addValidationMessage: function addValidationMessage(validationMessage, focus, icon, itemAdditionalClass, autofocus, type) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    if (!self.validationController) {\n      var $canvas = self.getValidationsContainer();\n      self.validationController = new bizagi.command.controllers.validation(self, undefined, $canvas);\n    }\n\n    if (typeof validationMessage == \"string\") {\n      self.validationController.showValidationMessage(validationMessage, focus, icon, itemAdditionalClass, type);\n    } else {\n      $.each(validationMessage, function (i, message) {\n        self.validationController.showValidationMessage(message, focus, icon, itemAdditionalClass, type);\n      });\n    }\n    self.validationController.expandNotificationBox(autofocus);\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var self = this;\n\n    // First hide and clear validation box\n    if (self.validationController) {\n      self.validationController.clearValidationMessages(params);\n    }\n\n  },\n  /*\r\n     *   Add an error message to the form\r\n     */\n  addErrorMessage: function addErrorMessage(errorMessage) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    self.validationController.showErrorMessage(errorMessage);\n    self.validationController.expandNotificationBox();\n  },\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm(focus) {\n    var self = this;\n    var properties = self.properties;\n    var deferred = $.Deferred();\n\n    focus = focus || self.getFocus();\n\n    // Normalize new focus structure if not present\n    if (focus && !focus.id) {\n      focus = {\n        id: focus };\n\n    }\n\n    var options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      selectedSection: self.getSelectedSection(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      isRefresh: true,\n      contextType: self.getContextType() || \"\",\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\" };\n\n\n    if (self.isOfflineRefreshWithEdition) {\n      options.isEdited = true;\n      self.isOfflineRefreshWithEdition = false;\n    }\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    self.startLoading();\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n      deferred.resolve();\n    }).fail(function () {\n      deferred.reject();\n    }).always(function () {\n      self.endLoading();\n    });\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Get opened tabs configuration\r\n     */\n  getSelectedTabs: function getSelectedTabs() {\n    var self = this;\n    var tabContainers = self.getElementsByType(\"tab\");\n    var tabs = $.map(tabContainers, function (tabContainer) {\n      return { tab: tabContainer.properties.id, selected: tabContainer.activeTab };\n    });\n    var selectedTabs = {};\n    for (var i = 0, length = tabs.length; i < length; i++) {\n      selectedTabs[tabs[i].tab] = tabs[i].selected;\n    }\n    return selectedTabs;\n  },\n\n  /**\r\n      * Get the actual section selected\r\n      */\n  getSelectedSection: function getSelectedSection() {\n    var params = this.getParams() || {};\n    return params.selectedSection;\n  },\n  /*\r\n     *   Template method to get the buttons objects\r\n     */\n  getButtons: function getButtons() {\n  },\n  /*\r\n     *   Adds an action on the fly to process the submit on change\r\n     */\n  addSubmitAction: function addSubmitAction(xpath, action) {\n    var self = this;\n    self.actionController.processInternalSubmitAction(xpath, action);\n  },\n  /**\r\n      *   Adds an overlay to the form, and sets a waiting message\r\n      *\r\n      *   @argument {bool} delay Apply delay\r\n      */\n  startLoading: function startLoading() {\n    var self = this;\n    var waitingTemplate = self.renderFactory.getTemplate(\"form-waiting\");\n\n    if (self.waitingOverlay && self.waitingMessage)\n    return;\n\n    // This hack is only for desktop\n    if (!bizagi.util.isTabletDevice()) {\n      // Detect canvas parent with scroll\n      var isSharePoint = self.params.context === \"sharepoint\";\n      var canvas = self.params.canvas;\n      if (isSharePoint) {\n        canvas = bizagi.util.scrollTop(canvas);\n\n        if (!!!canvas.context) {\n          canvas = $(\"body\", $(document));\n        }\n      } else {\n        canvas = $(\"body\", $(document));\n      }\n\n      // Configures overlay\n      var size = this.getSize();\n      var position = this.getOffset();\n      if (size.height == $(window).height()) {\n        position.top = 0;\n      }\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(canvas);\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(canvas);\n      self.waitingOverlay.css({\n        \"height\": \"100%\",\n        \"width\": \"100%\",\n        \"min-height\": size.height,\n        \"min-width\": size.width });\n\n      self.waitingMessage.css({\n        \"top\": position.top + Math.ceil((size.height - self.waitingMessage.outerHeight()) / 2) + \"px\",\n        \"left\": Math.ceil((size.width - self.waitingMessage.outerWidth()) / 2) + \"px\" });\n\n      canvas.css(\"position\", \"relative\");\n\n    } else {\n      // Configures overlay\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(\"body\", $(document));\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(\"body\", $(document));\n    }\n  },\n  /*\r\n     *   Removes the overlay and restores the form edition\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n    if (self.waitingOverlay && self.waitingMessage) {\n      self.waitingOverlay.remove();\n      self.waitingMessage.remove();\n      self.waitingOverlay = null;\n      self.waitingMessage = null;\n\n      var canvas = self.params.canvas;\n\n      if (canvas != undefined)\n      canvas.css(\"position\", \"\");\n    }\n  },\n  /*\r\n     *   Get the focused render in the current request\r\n     */\n  getFocusedElement: function getFocusedElement() {\n    var self = this;\n    return self.focus;\n  },\n  /*\r\n     *   Set the focused render in the current request\r\n     */\n  setFocusedElement: function setFocusedElement(focus) {\n    var self = this;\n    self.focus = focus;\n  },\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    return this.triggerHandler(\"globalHandler\", { eventType: eventType, data: data });\n  },\n  /*\r\n     *   Generic handler to attach fail workflow for some operations\r\n     */\n  failHandler: function failHandler(error) {\n    var self = this;\n\n    // Check if the error is in multiaction format\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n    }\n\n    //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n    if (error && error.length && error.length > 1) error = error[0];\n    if (error.error) error = error.error;\n    if (error.error) error = error.error;\n\n    // Handle normal messages\n    if (_typeof(error) == \"object\" && error.message) {\n      if (error.errorType === \"WaitForCompletionPlanException\" || error.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n        error = bizagi.localization.getResource(error.message);\n      } else {\n        error = error.message;\n      }\n\n    } else if (typeof error == \"string\") {\n      // Parse to json\n      try {\n        var errorJson = JSON.parse(error);\n        if (errorJson.errorType === \"WaitForCompletionPlanException\" || errorJson.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n          errorJson.message = bizagi.localization.getResource(errorJson.message);\n        }\n        error = errorJson.message;\n      } catch (e) {\n      }\n    }\n\n    // Workflow engine error, we gotta show it with error\n    self.addErrorMessage(error);\n    self.endLoading();\n  },\n  /* \r\n     *   Resizes the element\r\n     */\n  resize: function resize(size) {\n    // Just save the size, for reference\n    this.setSize(size);\n  },\n  /*\r\n     *   Sets the internal size for the form\r\n     */\n  setSize: function setSize(size) {\n    this.size = size;\n  },\n  /*\r\n     *   Gets the internal size for the form\r\n     */\n  getSize: function getSize() {\n    if (this.size) {\n      return this.size;\n    }\n    var canvas = this.params.canvas ? this.params.canvas : this.getFormContainer().container;\n\n    var canvasWidth = canvas.width();\n    var canvasHeight = canvas.height();\n\n    return {\n      width: canvasWidth,\n      height: canvasHeight };\n\n  },\n  getOffset: function getOffset() {\n    var canvas = this.getFormContainer().container;\n\n    return canvas.offset();\n  },\n\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitData: function submitData(args) {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    return;\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    if (isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    // Don't do anything if there is no data\n    if ($.isEmptyObject(data)) {\n      self.isOfflineRefreshWithEdition = false;\n      return;\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n    var executeSubmitData = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Call the service\n    if (isOfflineForm) {\n      executeSubmitData = self.dataService.submitData({\n        action: self.isRefreshingAfterSync ? \"submitdata\" : \"save\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\",\n        isOfflineForm: isOfflineForm,\n        offlineType: self.params.offlineType,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem });\n\n    } else {\n      executeSubmitData = self.dataService.multiaction().submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        idPageCache: self.properties.idPageCache,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\" });\n\n    }\n\n    return $.when.apply($, waitingDeferreds).then(function () {\n      return $.when(executeSubmitData).fail(function (message) {\n        message = self.processFailMessage(message);\n      });\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n    var deferred = $.Deferred();\n\n    // Concat inheritance context\n    if (properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    $.when(self.dataService.multiaction().executeRule({\n      idPageCache: properties.idPageCache,\n      rule: args.rule,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      var type = message && message.type ? message.type : \"\";\n      var form = self.getFormContainer();\n\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages({ clearOnlyServer: true });\n\n      if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        if (type === \"alertMessages\") {\n          bizagi.modalError && bizagi.modalError.show(message.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n        } else {\n          form.addValidationMessage.apply(self, [message.messages, undefined, undefined, undefined, false, \"serverMessage\"]);\n        }\n\n        deferred.reject(message);\n      } else {\n        deferred.resolve(message);\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n      deferred.reject(message);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * This function send a request to the server to execute an interface\r\n      */\n  executeInterface: function executeInterface(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeInterface({\n      idPageCache: properties.idPageCache,\n      \"interface\": args[\"interface\"],\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute an SAP connector\r\n      */\n  executeSAPConnector: function executeSAPConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeSAPConnector({\n      idPageCache: properties.idPageCache,\n      guidsap: args.guidsap,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an Connector\r\n      */\n  executeConnector: function executeConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.\n      xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeConnector({\n      idPageCache: properties.idPageCache,\n      guidConnector: args.guidConnector,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an pipeline\r\n      */\n  executePipeline: function executePipeline(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executePipeline({\n      idPageCache: properties.idPageCache,\n      pipeline: args.pipeline,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  refreshActions: function refreshActions(actions) {\n    var self = this;\n    self.actionController.refreshActions(actions);\n  },\n  /***/\n  tryToExecuteFunction: function tryToExecuteFunction(xpath) {\n    if (this.getMode() == \"execution\") {\n      this.actionController && this.actionController.tryToExecuteFunction(xpath);\n    }\n  },\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  removeActions: function removeActions() {\n    var self = this;\n    self.actionController.unbindActions();\n  },\n  /*\r\n     *   Iterate through all renders and collect the data to send, then update original values for each render\r\n     */\n  collectRenderValuesForSubmit: function collectRenderValuesForSubmit(data) {\n    var self = this;\n    data = data || {};\n\n    // Collect data\n    self.collectRenderValues(data);\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    return data;\n  },\n\n  /**\r\n      *\r\n      * @param params {data, bRefreshForm,properties}\r\n      * @returns {*}\r\n      */\n  internalSubmitOnChange: function internalSubmitOnChange(params) {\n    params = params || {};\n    var self = this;\n    var properties = params.properties;\n    var defer = new $.Deferred();\n    var data = params.data || {};\n    var bRefreshForm = typeof params.bRefreshForm != \"undefined\" ? params.bRefreshForm : true;\n    var notCollect = params.notCollect ? params.notCollect : undefined;\n\n    // Collect data\n    if (!(notCollect && !$.isEmptyObject(data))) {\n      self.collectRenderValuesForSubmit(data);\n    }\n\n    self.startLoading();\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      // Submit the form\n      self.dataService.multiaction().submitData({\n        action: \"SUBMITONCHANGE\",\n        data: data,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype }).\n      done(function (response) {\n        // Cancel previous multiactions and process property value\n        self.cancelPreviousRequest();\n        // After successfully response refresh the form\n        self.endLoading();\n        // If response message has error in validation, do not refresh the form\n        // and show validation message\n        if (response && response.type == \"validationMessages\") {\n          if (typeof self.clearValidationMessages == \"function\") {\n            self.clearValidationMessages();\n          }\n\n          self.addValidationMessage(response.messages);\n          defer.resolve();\n        } else if (bRefreshForm) {\n          var focusIdentifier = {\n            id: properties.id,\n            xpath: properties.xpath };\n\n          if (properties.idCase !== undefined) {\n            $.extend(focusIdentifier, {\n              idCaseObject: bizagi.cache.idCaseObject });\n\n          }\n          if (response.IdScope) {\n            self.properties.idStartScope = response.IdScope;\n          }\n          $.when(self.refreshForm(focusIdentifier)).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.resolve();\n          });\n        } else {\n          defer.resolve();\n        }\n      }).fail(function (message) {\n        self.endLoading();\n        var objMessage = _typeof(message) == 'object' ? message.responseText ? JSON.parse(message.responseText) : message : {};\n        var strMessage = objMessage.message || message;\n        var type = objMessage.type || \"error\";\n\n        // Omit processing when the ajax didn't process\n        if (![\"not-processed\", \"not-shown\"].includes(type)) {\n          // Clear previous validations\n          self.validationController.clearValidationMessages();\n\n          if (objMessage.type === \"alert\") {\n            self.validationController.showAlertMessage(strMessage);\n          } else {\n            self.validationController.showErrorMessage(strMessage);\n          }\n        }\n\n        defer.resolve();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  cancelPreviousRequest: function cancelPreviousRequest() {\n    if (bizagi.multiactionConnection && bizagi.multiactionConnection.length) {\n      var length = bizagi.multiactionConnection.length;\n      var i = 0,connection;\n      for (; i < length; i++) {\n        connection = bizagi.multiactionConnection.pop();\n        if (connection && connection.abort) {\n          bizagi.showErrorAlertDialog = false;\n          connection.abort();\n        }\n      }\n    }\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(buttonId) {\n    var self = this;\n\n    var checkpointAction = self.dataService.sendCheckpoint({\n      url: self.properties.checkpointUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    checkpointAction.tag = \"checkpoint\";\n\n    return checkpointAction;\n  },\n\n  prepareCommitAction: function prepareCommitAction(buttonId) {\n    var self = this;\n\n    var commitAction = self.dataService.commitLinkForm({\n      url: self.properties.commitUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    commitAction.tag = \"commit\";\n\n    return commitAction;\n  },\n\n  sendRollbackAction: function sendRollbackAction(buttonId) {\n    var self = this;\n\n    self.dataService.rollbackLinkForm({\n      url: self.properties.rollbackUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache });\n\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    self.endLoading();\n\n    var timeOutController = setTimeout(function () {\n      if (self.params) {\n        delete self.params.canvas;\n      }\n      delete self.params;\n      delete self.control;\n      if (self.validationController) {\n        self.unbind(\"rendervalidate\");\n        delete self.validationController;\n      }\n\n      if (self.actionController) {\n        self.actionController.unbindActions();\n        delete self.actionController;\n      }\n      clearTimeout(timeOutController);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n  getButton: function getButton(guid) {\n    return $(\".ui-bizagi-button[data-id='\" + guid + \"']\", this.container);\n  },\n\n  getFloatingButton: function getFloatingButton(guid) {\n    return $(\"li[data-id='\" + guid + \"']\", this.container);\n  },\n\n  propagateExternalEvents: function propagateExternalEvents(evt) {\n    // Menu-Overflow\n    var $menuOverflow = $(\".bz-overflow-menu\");\n    if ($menuOverflow)\n    $(document).trigger('click.overflow');\n\n    // ECM with preview image\n    var zoomIsOpen = $(\".jquery-image-zoom\") && $(\".jquery-image-zoom\").css(\"display\") == \"block\";\n\n    if (zoomIsOpen)\n    $(\"div.jquery-image-zoom a\").click();\n  },\n\n  getButtonAction: function getButtonAction(action) {\n    return this.allowValidateAndSaveAction && action === \"validate\" ? \"save\" : action;\n  },\n\n  /***/\n  isConnected: function isConnected() {\n    return true;\n  },\n\n  /**\r\n      * Add handlers to network management\r\n      */\n  configureNetworkHandlers: function configureNetworkHandlers() {\n    var self = this;\n    self.online = bizagi.util.isConnected();\n    if (self.isOfflineForm && bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      self.online = self.getParams().online;\n      console.log(\"CONNECTED: \", self.online);\n    }\n\n    // Update the online status based on connectivity\n    if (bizagi.util.isNativeMobileDevice() || bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      $(document).off(\"online.form\");\n      $(document).on(\"online.form\", this.handleConnectionChange.bind(self));\n\n      $(document).off(\"offline.form\");\n      $(document).on(\"offline.form\", this.handleConnectionChange.bind(self));\n\n      //Connection gained with form opened\n      $(document).off(\"offline-notify-form-sync-event\");\n      $(document).on(\"offline-notify-form-sync-event\", this.handleOfflineSyncEvent.bind(self));\n    }\n  },\n\n  /**\r\n      * Event handler\r\n      * @param event\r\n      */\n  handleConnectionChange: function handleConnectionChange(event) {\n    var form = this.getFormContainer();\n    if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      this.online = event.type === \"online\";\n    } else {\n      this.online = bizagi.util.isConnected();\n    }\n\n    // You lost connection.\n    if (event.type === \"offline\") {\n      form.triggerHandler(\"offlineForm\");\n    }\n\n    // You are now back online.\n    if (event.type === \"online\") {\n      form.triggerHandler(\"onlineForm\");\n    }\n  },\n\n  /**\r\n      * Push successful hanlder, refresh form and copy current work\r\n      */\n  handleOfflineSyncEvent: function handleOfflineSyncEvent(event, params) {\n    var self = this;\n    var formParams = self.params || {};\n    if (formParams.hasSyncError) {\n      return;\n    }\n    var offlineFormId = formParams.idCase + \"-\" + formParams.idWorkitem;\n    switch (params.type) {\n      case \"download-form-success\":\n        /**\r\n                                     * 1. Store current data in offline submit\r\n                                     * 2. Refresh form\r\n                                     * 3. Merge data using offline isEdited method\r\n                                     */\n        var paramsId = params.idCase + \"-\" + params.idWorkitem;\n        if (offlineFormId === paramsId) {\n          console.log(\"Form downloaded successfully. It will be refreshed\", params);\n\n          $.when(self.dataService.database.validateLocalDataForTaskExists(paramsId).then(function (dataResult) {\n            if (dataResult === true) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n\n            $.when(self.refreshForm(null, false)).then(function () {\n              applySyncLoader(false);\n            });\n          }));\n        }\n        break;\n      case \"push-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"push-tasks-error\":\n        applySyncLoader(false);\n        if (self.validationController != undefined) {\n          self.validationController.clearValidationMessages();\n          self.validationController.showErrorMessage(params.message);\n        }\n        break;\n      case \"fetch-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"download-finished\":{\n          applySyncLoader(false);\n          break;\n        }\n      case \"download-error\":\n        applySyncLoader(false);\n        break;\n      default:\n        console.warn(\"Event hast not implementation in bizagi.rendering.form - handleOfflineSyncEvent\", params.type, params);\n        break;}\n\n\n    function applySyncLoader(isStart) {\n      var loaders = 3;\n      var proceed = false;\n      if (isStart) {\n        proceed = !(self.isSyncLoaderRunning === true);\n      } else\n      {\n        proceed = self.isSyncLoaderRunning === true;\n      }\n      if (proceed) {\n        self.isSyncLoaderRunning = isStart;\n        for (var loaderIndex = 0; loaderIndex < loaders; loaderIndex++) {\n          if (isStart) {\n            bizagi.loading.start();\n          } else\n          {\n            bizagi.loading.stop();\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Check if allow to call the button actions\r\n      * @returns {boolean|*}\r\n      */\n  allowOnlineActions: function allowOnlineActions() {\n    if (typeof this.online === \"undefined\") return true;\n    return this.online || !this.online && this.isOfflineForm;\n  },\n\n  /**\r\n      * Method to process button actions in the form\r\n      * @param ordinal\r\n      */\n  processQuickButton: function processQuickButton(ordinal) {\n    var self = this;\n    var buttonProperties = self.buttons.find(function (btn) {\n      return btn.ordinal == ordinal;\n    });\n\n    if (buttonProperties) {\n\n      self.startLoading();\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Execute button - QAF-1418 - add setTimeout\n      setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n        });\n      }, 100);\n\n    }\n\n  },\n\n  /**\r\n      * Check if quick actions are configured\r\n      * @param data\r\n      * @param isEnable\r\n      * @returns {boolean}\r\n      */\n  hasQuickActions: function hasQuickActions(data, isEnable) {\n\n    if (!isEnable) return false;\n\n    return (data.buttons || []).some(function (item) {\n      var button = item.button.properties;\n      return button && button.type === \"quickactions\";\n    });\n\n  },\n\n  /**\r\n      * Perform validation container\r\n      * @param form\r\n      * @param mainForm\r\n      * @returns {*}\r\n      */\n  getValidationsContainer: function getValidationsContainer(mainForm) {\n    var form = this;\n    var formContainer = typeof mainForm !== \"undefined\" ? mainForm : form;\n\n    return formContainer.container;\n\n  },\n\n  /**\r\n      * Return if exist confirmation user and the message\r\n      * @param {*} formProperties \r\n      * @param {*} buttonProperties \r\n      */\n  getConfirmationStatus: function getConfirmationStatus(formProperties, buttonProperties) {\n    var hasButtonsConfirmation = bizagi.util.parseBoolean(buttonProperties.needsUserConfirmation) || false;\n    var buttonConfirmationMsg = buttonProperties.userConfirmationMessage || \"\";\n\n    var hasFormConfirmation = bizagi.util.parseBoolean(formProperties.needsUserConfirmation) && bizagi.util.parseBoolean(buttonProperties.routing);\n    var formConfirmationMsg = formProperties.userConfirmationMessage || \"\";\n\n    var messageConfirmation = hasButtonsConfirmation ? buttonConfirmationMsg : formConfirmationMsg;\n\n    return {\n      hasConfirmation: hasButtonsConfirmation || hasFormConfirmation,\n      message: messageConfirmation };\n\n  },\n\n  saveWorkInProgress: function saveWorkInProgress() {\n    var self = this;\n    var data = self.collectRenderValuesForSubmit();\n    if (!bizagi.util.isEmpty(data)) {\n      return self.dataService.submitData({\n        action: 'submitdata',\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: [] });\n\n    } else {\n      return $.Deferred().resolve(undefined).promise();\n    }\n  },\n\n  /**\r\n      * Check if it is a start form\r\n      * @returns {*|boolean}\r\n      */\n  isStartForm: function isStartForm() {\n    var form = this.getFormContainer();\n    var formType = form && form.properties && form.properties.formtype || \"\";\n\n    return /startform/i.test(formType);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a base render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.render\", {\n  postRenderTimeout: 0,\n  maxRendersPerScreen: 50,\n  rendersExecuted: 0,\n  renderOptimization: false,\n  TYPE_QUERY_FORM: \"queryForm\",\n  startOptimization: function startOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 500;\n    bizagi.rendering.render.rendersExecuted = 0;\n    // Cancelled optimization temporally, because its on experimental stage\n    bizagi.rendering.render.renderOptimization = false;\n  },\n  stopOptimization: function stopOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 0;\n    bizagi.rendering.render.rendersExecuted = 0;\n    bizagi.rendering.render.renderOptimization = false;\n  } },\n{\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.included = typeof properties.included != \"undefined\" ? bizagi.util.parseBoolean(properties.included) : false;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.displayName = properties.displayName || \"\";\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.includedInResult = typeof properties.includedInResult != \"undefined\" ? bizagi.util.parseBoolean(properties.includedInResult) : false;\n\n    var renderType = bizagi.util.normalizeType(properties.type);\n    if (/^hidden$/i.test(renderType)) {\n      properties.visible = false;\n    }\n\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.maxLength = properties.maxLength || 0;\n    properties.helpText = bizagi.util.trim(properties.helpText) || \"\";\n    properties.textFormat = properties.textFormat || {};\n    properties.valueFormat = properties.valueFormat || {};\n    properties.isHidden = typeof properties.isHidden != \"undefined\" ? bizagi.util.parseBoolean(properties.isHidden) : false;\n    properties.visible = properties.isHidden ? false : properties.visible;\n    //BUG 26867 -    Verify if the control was editable in sometime. Apply only in the column grid (canBeSent). \n    //Change the value property on changeEditability, changeEditabilityCellControl\n    properties.editabilityEnabled = false;\n\n    // Old color and background color\n    if (properties.color) {\n      properties.textFormat.color = properties.color;\n    }\n\n    if (properties.backgroundColor) {\n      properties.textFormat.backgroundColor = properties.backgroundColor;\n    }\n\n    // Non-editable fields cannot be required\n    properties.required = properties.editable ? properties.required : false;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Check contexttype\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n\n    // Save original properties\n    self.originalProperties = {\n      textFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      valueFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      visible: properties.visible,\n      editable: properties.editable,\n      required: properties.required,\n      labelAlign: properties.labelAlign,\n      valueAlign: properties.valueAlign };\n\n\n    // Create value property\n    self.value = typeof properties.value !== \"undefined\" ? properties.value : null;\n\n    // Register original value property\n    self.properties.originalValue = self.value;\n    self.properties.previousValue = self.value;\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n  /*\r\n     *   Calculate aligns, display types, rtl and widths\r\n     */\n  calculateInitialLayoutProperties: function calculateInitialLayoutProperties() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set visual defaults\n    properties.displayType = properties.displayType || \"normal\";\n    properties.labelAlign = properties.labelAlign || self.getDefaultLabelAlign(properties.displayType);\n    properties.valueAlign = properties.valueAlign || self.getDefaultValueAlign(properties.displayType);\n\n    // Check rtl orientation\n    if (properties.orientation === \"rtl\") {\n      properties.labelAlign = self.getRTLAlign(properties.labelAlign);\n      properties.valueAlign = self.getRTLAlign(properties.valueAlign);\n    }\n\n    // Calculate render with\n    var renderWidth = self.calculateRenderWidth(properties.labelWidth, properties.valueWidth, properties.displayType);\n    properties.labelWidth = renderWidth.label;\n    properties.valueWidth = renderWidth.control;\n\n    if (properties.layoutType === \"percentage\") {\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.labelWidth == 0) {\n      properties.displayType = \"value\";\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.valueWidth == 0) {\n      properties.displayType = \"label\";\n    }\n\n    if (properties.type === \"userfield\") {\n      if ([\"both\", \"normal\", \"reversed\"].includes(properties.displayType)) {\n        properties.valueWidth = properties.valueWidth || 50;\n        properties.labelWidth = properties.labelWidth || 50;\n      } else if (properties.displayType === \"vertical\") {\n        properties.valueWidth = 100;\n        properties.labelWidth = 100;\n      } else if (properties.displayType === \"label\") {\n        properties.valueWidth = 0;\n        properties.labelWidth = 100;\n      } else {\n        properties.valueWidth = 100;\n        properties.labelWidth = 0;\n      }\n    }\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_RENDER;\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  render: function render(renderTemplateName) {\n    return this.renderElement(renderTemplateName);\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  renderElement: function renderElement(renderTemplateName) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    renderTemplateName = renderTemplateName || \"render\";\n    var renderTemplate = self.renderFactory.getTemplate(renderTemplateName);\n\n    // Resolve render label\n    var label = properties.displayName;\n    if (typeof label == \"string\") {\n      // Replace line breaks for html line breaks\n      label = bizagi.util.encodeString(label);\n    }\n\n    var isFullRender = bizagi.util.detectDevice() !== \"desktop\" && (properties.type === \"association\" || properties.type === \"uploadecm\" || (properties.type === \"actionLauncher\" || properties.type === \"polymorphicLauncher\") && bizagi.util.isTabletDevice() || properties.type === \"grid\" && !bizagi.util.isTabletDevice());\n    var labelWidth = parseFloat(properties.labelWidth);\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      helpText: properties.helpText,\n      editable: properties.editable,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      xpath: properties.xpath,\n      tag: properties.tag,\n      displayType: properties.displayType,\n      displayOptionClass: self.getDisplayOptionClass(properties.displayType),\n      labelAlignClass: self.getAlignClass(properties.labelAlign),\n      valueAlignClass: self.getAlignClass(properties.valueAlign),\n      flexAlignClass: bizagi.util.mapAlignClassName(properties.columnAlign),\n      labelWidth: labelWidth,\n      stringLabelWidth: labelWidth + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      valueWidth: parseFloat(properties.valueWidth),\n      stringValueWidth: parseFloat(properties.valueWidth) + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      layoutType: properties.layoutType,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      includedInResult: properties.includedInResult,\n      included: properties.included,\n      type: properties.type,\n      showFullRender: isFullRender,\n      required: properties.required });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n  /*\r\n     *   Returns the resolved result from a promise when the promise has been executed already\r\n     */\n  resolveResult: function resolveResult(promise) {\n    return bizagi.resolveResult(promise);\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred) {\n      return false;\n    }\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Renders the control html\r\n     */\n  internalRenderControl: function internalRenderControl() {\n    var self = this;\n    var properties = self.properties;\n    self.control = null;\n\n    if (self.renderFactory.printVersion) {\n      properties.editable = false;\n      return self.renderControl();\n    } else if (properties.editable) {\n      return self.renderControl();\n    }\n\n    return self.renderReadOnly();\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRenderElement: function postRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set element variable\n    self.element = element;\n\n    if (properties.submitOnChange)\n    self.configureSubmitOnChange();\n\n    // Process internal layout\n    isLabelFormat = true;\n\n    var executePostRender = function executePostRender(_element) {\n      if (bizagi.rendering.render.renderOptimization &&\n      bizagi.rendering.render.rendersExecuted > bizagi.rendering.render.maxRendersPerScreen) {\n\n        // Execute post-render control\n        var timeOutRender = setTimeout(function () {\n          self.internalPostRender(_element);\n          bizagi.rendering.render.postRenderTimeout += 50;\n          clearTimeout(timeOutRender);\n        }, bizagi.rendering.render.postRenderTimeout);\n\n      } else {\n        self.internalPostRender(_element);\n      }\n      bizagi.rendering.render.rendersExecuted++;\n    };\n\n    if (self.asyncRenderDeferred) {\n      // Wait for async result\n      $.when(self.asyncRenderDeferred).\n      done(function (html) {\n        var control = self.getControl();\n        if (typeof self.emptyControlByAsyncRenderDeferred == \"function\") {\n          self.emptyControlByAsyncRenderDeferred();\n        }\n        control.append(html);\n\n        // Execute post-render control\n        executePostRender(element);\n        self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n      });\n    } else {\n      // Execute post-render control\n      executePostRender(element);\n    }\n  },\n  /*\r\n     *   Executes the post render handlers\r\n     */\n  internalPostRender: function internalPostRender(element) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    self.control = self.getControl();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred) {\n      self.renderingDeferred.resolve();\n    }\n\n    // Execute post-renders\n    if (properties.editable) {\n      // Post-render editable version\n      if (self.renderFactory.printVersion && self.postRenderPrintVersion) {\n        self.postRenderPrintVersion();\n      } else {\n        self.postRender();\n      }\n\n    } else {\n      // Post-render readonly version\n      self.postRenderReadOnly(element);\n    }\n\n    // Perform execution mode methods\n    if (mode == \"execution\") {\n      self.performExecutionModeMethods();\n    } else {\n      self.performDesignModeMethods();\n    }\n\n    self.processLayout(isLabelFormat, self.properties.textFormat || {});\n    self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n  },\n  /*\r\n     *   Execute runtime only methods\r\n     */\n  performExecutionModeMethods: function performExecutionModeMethods() {\n    var self = this;\n    var properties = self.properties;\n    if (self.getFormType() == self.Class.TYPE_QUERY_FORM) {\n      self.configureHandlersQueryForm();\n    }\n\n    // Apply handlers\n    if (properties.editable) {\n      self.configureHandlers();\n    } else {\n      self.configureHandlersReadOnly();\n    }\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /**\r\n      * Execute design only methods\r\n      */\n  performDesignModeMethods: function performDesignModeMethods() {\n    var self = this;\n\n    // Execute custom code for each render\n    self.configureDesignView();\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /*\r\n     *   Replaces a {{control}} string in the specified element\r\n     */\n  replaceControlHtml: function replaceControlHtml(html, replace) {\n    html = html || \"\";\n    replace = replace || \"\";\n    return html.replaceFirstWithoutPatterns(\"{{control}}\", replace);\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.element)) {\n      bizagi.log(\" render hasn't been rendered!\", this, \"error\");\n    }\n\n    return this.element;\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    var properties = self.properties;\n    self.internalSetInitialValueFlag = true;\n\n    // Set the initial value\n    if (properties.editable) {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    } else {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    }\n    self.internalSetInitialValueFlag = false;\n  },\n  /*\r\n     * Public method to determine if a value is valid or not\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var inlineAdd = self.grid && self.grid.properties && self.grid.properties.inlineAdd;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false && !inlineAdd) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (bizagi.util.parseBoolean(properties.required)) {\n      var form = self.getFormContainer();\n      var hasValue = false;\n      var renders = self.grid ? [self] : form.getRenders(properties.xpath);\n      var isQueryForm = /^query/i.test(properties.type);\n\n      renders.filter(function (render) {\n        return render.properties.id == properties.id;\n      }).forEach(function (render) {\n        if (render.hasValue() && (render.properties.editable || inlineAdd)) {\n          hasValue = true;\n          return false;\n        }\n      });\n\n      if (!hasValue && !self.properties.isClone) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        var messageData = { xpath: properties.xpath, message: message };\n\n        if (isQueryForm) {\n          messageData = $.extend({}, messageData, {\n            id: properties.id,\n            isQuery: isQueryForm });\n\n        }\n\n        invalidElements.push(messageData);\n        return false;\n      }\n    }\n\n    // Check retypes\n    if (properties.retype == \"duplicate\") {\n      // Don't process cloned renders, just originals\n      if (self.cloneRender) {\n        if (self.cloneRender.getValue() != self.getValue()) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    } else if (properties.retype == \"double\") {\n      var control = $(\"input\", self.element);\n\n      //Waits until the control has the second value written\n      if (control && control.data(\"oldValue\")) {\n        if (control.val() === \"\") {\n\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({\n            xpath: properties.xpath,\n            message: message });\n\n\n          return false;\n        } else if (control.val() != control.data(\"oldValue\")) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n\n          return false;\n        }\n      }\n    }\n\n    // Check maxlength\n    var columnEditable = self.grid && self.grid.getColumn ? self.grid.getColumn(self.properties.xpath).properties.editable : true;\n    if (properties.type !== \"userPassword\" && properties.maxLength !== undefined && properties.maxLength > 0 && bizagi.util.isNumeric(properties.maxLength)) {\n      if (columnEditable || !columnEditable && self.controlValueIsChanged()) {\n        var maxLength = new Number(properties.maxLength);\n        var value = self.getValue();\n\n        if (value && value.toString().length > maxLength) {\n          message = self.getResource(\"render-text-maxLength-error\").replaceAll(\"#maxLength#\", maxLength);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    // Next line decides if only spaces are accepted as valid texts or not. Anyway the spaces are still saved as self.value has not changed\n    var value = self.getValue();\n\n    if (value && self.properties.type === \"text\") {\n      value = typeof value === \"string\" ? value.trim() : value;\n    }\n\n    return !bizagi.util.isEmpty(value);\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n     */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Method to process the render the layout\r\n     */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.getControl() == null) return;\n\n    // Set customizations\n    format = format || {};\n\n    if (format.color) {\n      self.changeColor(format.color, isLabelFormat);\n    }\n    if (format.background) {\n      self.changeBackgroundColor(format.background);\n    }\n    //if bold is true in modeler, we receive nothing in execution (!formal.bold)\n    if (format.bold || !format.bold || !isLabelFormat) {\n      self.changeFontBold(format.bold, isLabelFormat);\n    }\n    if (format.italic) {\n      self.changeFontItalic(format.italic, isLabelFormat);\n    }\n    if (format.underline) {\n      self.changeFontUnderline(format.underline, isLabelFormat);\n    }\n    if (format.strikethru) {\n      self.changeFontStrikethru(format.strikethru, isLabelFormat);\n    }\n    if (format.size) {\n      self.changeFontSize(format.size, isLabelFormat);\n    }\n\n    // Set required and visiblity\n    properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\n    var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\n    if (properties.required) {\n      self.changeRequired(properties.required);\n    }\n    if (!visible) {\n      if (self.grid) {\n        self.changeCellVisibility(visible);\n      } else {\n        self.changeVisibility(visible);\n      }\n    }\n  },\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (!bizagi.util.identicalObjects(value, self.value)) {\n      // set previous value\n      self.properties.previousValue = self.properties.originalValue = self.value;\n\n      // Change internal value\n      self.value = self.properties.value = value;\n      if (self.properties.required && self.getMode() == \"execution\") {\n\n        if (self.checkRequired([])) {\n          self.changeRequiredLabel(false);\n        } else {\n          self.changeRequiredLabel(true);\n        }\n      }\n\n      // Trigger events\n      if (triggerEvents && !self.internalSetInitialValueFlag) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (!self.hasValue()) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        return false;\n      }\n    }\n    return true;\n  },\n\n  validateInputRetype: function validateInputRetype() {\n    var self = this;\n    if (self.properties.retype && self.cloneRender) {\n      return self.getValue() == self.cloneRender.getValue();\n    }\n    return true;\n  },\n\n  /*\r\n     *   Triggers the render change event\r\n     */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    params.changed = params.changed !== undefined ? params.changed : true;\n    self.triggerHandler(\"renderchange\", { render: self, changed: params.changed });\n  },\n  /*\r\n     *   Triggers the render validate event\r\n     */\n  triggerRenderValidate: function triggerRenderValidate() {\n    var self = this;\n    self.triggerHandler(\"rendervalidate\", { render: self });\n  },\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    // Set internal value\n    self.setValue(value, false);\n\n    if (!self.properties.editable && (self.properties.display !== \"check\" || self.properties.display === \"check\" && bizagi.override.enableCheck === true)) {\n      // Render as simple value\n      var displayValue = self.getDisplayValue(value);\n      if (typeof displayValue == \"string\" || typeof displayValue == \"number\") {\n        displayValue = bizagi.util.sanitizeHTML(displayValue);\n        $(control).html(\"<label class='readonly-control'>\" + displayValue + \"</label>\");\n      }\n    }\n  },\n  /*\r\n     *   Returns the internal value\r\n     */\n  getValue: function getValue() {\n    return this.value;\n  },\n  /*\r\n     *   Returns the value to display, ex. non-editable renders\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    return this.getValue();\n  },\n  /*\r\n     *   Template method to get the label element\r\n     */\n  getLabel: function getLabel() {\n    bizagi.util.mustImplement(\"getLabel\");\n  },\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    bizagi.util.mustImplement(\"getControl\");\n  },\n  /*\r\n     *   Template method to get the control filler element\r\n     */\n  getControlFiller: function getControlFiller() {\n    bizagi.util.mustImplement(\"getControlFiller\");\n  },\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n  },\n  /*\r\n     *   Adds a validation message to the render\r\n     */\n  setValidationMessage: function setValidationMessage(message) {\n    this.validationMessage = message;\n  },\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var result = this.getValue();\n    var readOnlyValue = \"\";\n\n    if (bizagi.util.isObject(result) && typeof result.value !== \"undefined\") {\n      readOnlyValue = bizagi.util.sanitizeHTML(result.value);\n    } else if (!bizagi.util.isEmpty(result)) {\n      if (bizagi.util.isString(result)) {\n        readOnlyValue = bizagi.util.encodeHtmlText(result);\n      } else {\n        readOnlyValue = result;\n      }\n    }\n\n    return readOnlyValue;\n  },\n\n  /*\r\n     *  Method to render print version\r\n     */\n  postRenderPrintVersion: function postRenderPrintVersion() {\n  },\n\n  /*\r\n     *   Customizes render display type with custom css classes\r\n     */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    this.properties.displayType = displayType;\n  },\n\n  /*\r\n     *   Return the right display option class\r\n     */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label align\r\n     */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    this.properties.labelAlign = alignType;\n  },\n\n  /*\r\n     *   Customizes render value align\r\n     */\n  changeValueAlign: function changeValueAlign(alignType) {\n    this.properties.valueAlign = alignType;\n  },\n\n  /*\r\n     *   Return the right align class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label and value width\r\n     */\n  customizeRenderWidth: function customizeRenderWidth() {\n  },\n\n  /* Customizes render color*/\n  changeColor: function changeColor(color, isLabelFormat) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    if (control && label) {\n      if (color != 'none') {\n        // Hide - show the render\n        if (self.properties.displayType === \"value\" || !isLabelFormat) {\n          self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"color\", color, \"!important\");\n          });\n        } else {\n          self.element.each(function () {\n            this.style.setProperty('color', color, 'important');\n          });\n\n          if (self.properties.type == \"grid\") {\n            self.getControl().find(\".bz-mobile-grid__header-title\").each(function () {\n              this.style.setProperty('color', color, 'important');\n            });\n          }\n\n          self.getLabel().find(\"label\").css(\"color\", color, \"!important\");\n          if (self.properties.editable === false) {\n            self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n            self.getElementsToStylize($(\"label\", self.getControl()).css(\"color\", color, \"!important\"));\n          }\n        }\n      } else {\n        self.element.css(\"color\", \"\");\n        self.getLabel().find(\"label\").css(\"color\", \"\");\n        self.getControl().css(\"color\", \"\");\n\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          self.getElementsToStylize(element).css(\"color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Customizes render background color*/\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n\n    if (control && label) {\n      if (color != 'none') {\n        self.element.each(function () {\n          this.style.setProperty('background-color', color, 'important');\n        });\n\n        if (typeof label.find('label').style !== \"undefined\") {\n          self.getLabel().find(\"label\").style(\"background-color\", color, \"important\");\n        } else {\n          self.getLabel().find(\"label\").css(\"background-color\", color, \"!important\");\n        }\n\n        var currentStyle = self.getLabel().attr(\"style\");\n        currentStyle += \"; background-color:\" + color + \"!important\";\n        self.getLabel().attr(\"style\", currentStyle);\n      } else {\n        self.element.css(\"background-color\", \"\");\n        self.getLabel().find(\"label\").css(\"background-color\", \"\");\n        self.getControl().css(\"background-color\", \"\");\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          $(element).css(\"background-color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Returns the formatting label to be used for bold, italic, underline, strikethrough and size*/\n  getFormattingLabel: function getFormattingLabel() {\n    var self = this;\n    return self.getLabel().find(\"label\");\n  },\n\n  /* Customizes the font weight */\n  changeFontBold: function changeFontBold(bold, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(bold) != false && isLabelFormat) {\n      self.getFormattingLabel().css(\"font-weight\", \"bold\", \"!important\");\n      self.getControl().each(function (i, element) {\n        $(element).css(\"font-weight\", \"bold\", \"!important\");\n      });\n\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"font-weight\", \"normal\", \"!important\");\n    }\n    if (!isLabelFormat) {\n      if (bizagi.util.parseBoolean(bold) == true) {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"bold\", \"!important\");\n        });\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"normal\", \"!important\");\n        });\n        self.getControl().css(\"font-weight\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n    var result = true;\n    var renderType = bizagi.util.normalizeType(properties.type);\n    var form = self.getFormContainer();\n\n    //To force to send value when control's retype is duplicate, fixed to start forms.\n    if (properties.retype === \"duplicate\" && self.cloneRender && form.isStartForm()) return true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (renderType === \"grid\" && self.ready().state() === \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n      if (value && value.length !== undefined) {\n        value = value[0];\n      }\n      if (compareValue && compareValue.length !== undefined) {\n        compareValue = compareValue[0];\n      }\n      if (baseValue && baseValue.length !== undefined) {\n        baseValue = baseValue[0];\n      }\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      baseValue = baseValue && baseValue.id ? baseValue.id : baseValue;\n      if (typeof baseValue != \"undefined\" && baseValue != null) {\n        result = compareValue == value && compareValue != baseValue ? false : true;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"boolean\" || renderType === \"queryBoolean\" || renderType === \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (renderType === \"searchNumber\") {\n      result = !!value;\n    } else if (renderType === \"number\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"text\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"date\") {\n      if (!compareValue && !value) {\n        result = false;\n      } else {\n        if (!properties.showTime) {\n          value = bizagi.util.getNormalizedDate(value, properties.fullFormat);\n          compareValue = bizagi.util.getNormalizedDate(compareValue, properties.fullFormat);\n        }\n\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"actionLauncher\") {\n      //Object must be an array\n      result = false;\n      var compareValueObj = [];\n      try {\n        if (typeof compareValue === \"string\") {\n          compareValueObj = JSON.parse(compareValue);\n        } else {\n          compareValueObj = compareValue;\n        }\n      } catch (e) {\n      }\n\n      var _findAction = function _findAction(guid, targetObj) {\n        guid = guid || \"\";\n        targetObj = targetObj || [];\n        var result = false;\n        for (var i = 0, l = targetObj.length; i < l; i++) {\n          if (targetObj[i].guidAction == guid) {\n            result = true;\n            break;\n          }\n        }\n        return result;\n      };\n\n      if (compareValueObj.length == value.length) {\n        for (var i = 0, l = compareValueObj.length; i < l; i++) {\n          if (!_findAction(compareValueObj[i].guidAction, value)) {\n            result = true;\n          }\n        }\n\n      } else {\n        result = true;\n      }\n    } else if (renderType === \"polymorphicLauncher\" || renderType === \"entityTemplate\") {\n      //Object must be an array\n      if (compareValue.length != value.length) {\n        result = true;\n      } else {\n        result = JSON.encode(value) == JSON.encode(compareValue) ? false : true;\n      }\n    } else if (renderType === \"searchList\") {\n      var objectValue = {};\n      try {\n        objectValue = JSON.parse(value);\n      } catch (e) {\n        console.log(\"Error when detect change value on searchList control\");\n      }\n      result = JSON.encode(compareValue) == JSON.encode(objectValue.value) ? false : true;\n    } else if ([\"signature\", \"image\"].includes(renderType)) {\n      // When a image/signature is uploaded or removed from a Form,\n      // the change is saved automatically to the activity's scope\n      result = false;\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  },\n\n  /* Customizes the font italic style */\n  changeFontItalic: function changeFontItalic(italic, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"italic\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"italic\", \"!important\");\n        }\n      } else {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"normal\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"normal\", \"!important\");\n        }\n      }\n    } else {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n      } else {\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  /* Customizes the font underline */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var strikethru = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(underline) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", strikethru + \"underline\", \"!important\");\n      self.getControl().each(function (i, element) {\n        self.getElementsToStylize(element).css(\"text-decoration\", strikethru + \"underline\");\n      });\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", strikethru, \"!important\");\n    }\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(underline) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n        }\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n        });\n      }\n    }\n  },\n\n  /* Customizes the font Strikethrough property */\n  changeFontStrikethru: function changeFontStrikethru(strikethru, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var underline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueunderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(strikethru) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", underline + \"line-through\", \"!important\");\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", underline, \"!important\");\n    }\n\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(strikethru) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n        }\n      } else {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline, \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline, \"!important\");\n        }\n      }\n    }\n  },\n\n  /* Customizes the font size property */\n  changeFontSize: function changeFontSize(size, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (size != \"0\") {\n      var label = self.getFormattingLabel();\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      if (isLabelFormat) {\n        label.css(\"font-size\", newFontSize, \"!important\");\n      }\n      if (self.properties.displayType == \"value\" || !isLabelFormat) {\n        var control = self.getControl();\n        if (_typeof(control.children()) == \"object\" && control.children().length > 0) {\n          self.getElementsToStylize(control.children()).css(\"font-size\", newFontSize, \"!important\");\n        } else {\n          self.getElementsToStylize(control).css(\"font-size\", newFontSize, \"!important\");\n          // Next line applies to Cascading combo and combo in order to increase the control space with large value fonts\n          if (self.properties.type.indexOf(\"ombo\") != -1 && size > 4) (\".ui-selectmenu\", control).children(0).height(2 * size + 20);\n        }\n\n        self.getElementsToStylize(control.find(\".ui-bizagi-render-date\")).css(\"line-height\", \"normal\");\n      }\n    }\n  },\n\n  /**\r\n      * in mobiles, don't apply styles to icon's elements\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(context);\n  },\n\n  /* Changes the render visibility*/\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(argument) == true) {\n      if (properties.type !== \"hidden\") {\n        self.element.show();\n        self.element.css(\"display\", \"\");\n\n        if (properties.required) {\n          if (!self.hasValue()) {\n            self.changeRequiredLabel(true);\n          }\n        }\n      }\n    } else if (self.element) {\n      self.element.hide();\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n  /* Changes the render editability*/\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Renders again\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n      $.when(self.internalRenderControl()).done(function (html) {\n        if (typeof self.emptyControlByChangeEditability == \"function\")\n        self.emptyControlByChangeEditability();\n        if (!self.asyncRenderDeferred)\n        control.append(html);\n        self.postRenderElement(self.element);\n      });\n    }\n  },\n\n  /**\r\n      * Change cell editability and attach bindings\r\n      * @param argument\r\n      * @param key\r\n      * @param xpath\r\n      */\n  changeEditabilityCellControl: function changeEditabilityCellControl(argument, key, xpath) {\n    var self = this;\n    var properties = self.properties;\n    var renderColumn = self.grid.getColumn(xpath);\n    var decorated = renderColumn.getDecorated(key);\n\n    // Renders again\n    properties.editable = argument === \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Render cell control\n    self.internalRenderCellControl(properties.editable, key, renderColumn, decorated);\n  },\n\n  /**\r\n      * Render cell control by command action\r\n      * @param editable\r\n      * @param key\r\n      * @param renderColumn\r\n      * @param decorated\r\n      */\n  internalRenderCellControl: function internalRenderCellControl(editable, key, renderColumn, decorated) {\n    var self = this;\n    var control = self.getControl();\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n\n      $.when(self.internalRenderControl()).done(function (html) {\n\n        if (!self.asyncRenderDeferred) {\n          control.append(html);\n        }\n\n        self.postRenderElement(self.element);\n\n        if (editable) {\n\n          renderColumn.bind(\"rendered\", function () {\n            renderColumn.readyDeferred.resolve();\n          });\n\n          decorated.unbind(\"renderchange\");\n\n          // If the render changes set the flag on\n          decorated.bind(\"renderchange\", function (render, args) {\n            renderColumn.changed = true;\n            self.grid.onCellChange(renderColumn, null, key, args);\n          });\n\n        }\n      });\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (self.getMode() == \"execution\" && self.checkRequired([])) {\n      self.changeRequiredLabel(false);\n    } else if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * Does't change internal value of control, if you need it\r\n      * please use changeRequired method\r\n      *\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /*\r\n     *   Refresh the control with a new data\r\n     */\n  refreshControl: function refreshControl(args) {\n    var self = this;\n    var properties = self.properties;\n    var originalValue = self.value;\n    var form = self.getFormContainer();\n    var idForm = form.properties.id || \"\";\n\n    args = args || {};\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the ajax service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      idForm: idForm })).\n    pipe(function (data) {\n      if (self.grid && bizagi.override.restoreAppearanceAfterRefresh) {\n        self.saveGridChildrenVisualChanges();\n      }\n      // Clear variables\n      self.control = self.controlFiller = self.label = null;\n\n      // Update properties data\n      var currentElement = self.element;\n      self.initializeData(data.render);\n\n      // Render the control again\n      return $.when(self.render()).pipe(function (html) {\n        var result = $(html);\n        //Dont remove unused rendered var\n        var rendered = self.postRenderElement(result);\n        self.properties.originalValue = self.value;\n        return result;\n      }).pipe(function (result) {\n\n        // When the content has been post-renderized, replace it\n        currentElement.replaceWith(result);\n\n        // Prevent multiple refresh on grid\n        if (!self.grid) {\n          self.triggerRenderChange({ changed: false });\n        }\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          if (self.grid) {\n            self.restoreGridChildrenVisualChanges();\n            self.restoreGridAppearance();\n          } else {\n            self.restoreAppearance();\n          }\n        }\n\n        // Execute personalized stuff before to refresh it\n        self.afterToRefresh();\n      });\n\n    }).fail(function (message) {\n      var message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the control with a new data\r\n      */\n  refreshDesignControl: function refreshDesignControl(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Clear variables\n    self.control = self.controlFiller = self.label = null;\n\n    $.extend(data.render.properties, {\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"form\",\n      idPageCache: properties.idPageCache });\n\n\n    // Update properties data\n    var currentElement = self.element;\n    self.initializeData(data.render);\n\n    // Render the control again\n    return $.when(self.render()).pipe(function (html) {\n      var result = $(html);\n      //Dont remove unused rendered var\n      var rendered = self.postRenderElement(result);\n      self.properties.originalValue = self.value;\n      return result;\n    }).pipe(function (result) {\n      // When the content has been post-renderized, replace it\n      currentElement.replaceWith(result);\n      self.triggerRenderChange();\n\n      // Execute personalized stuff before to refresh it\n      self.beforeToRefresh();\n    });\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.setValue(\"\");\n    self.clearDisplayValue();\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"input\");\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else if (self.properties.editable === false) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  /*\r\n     *   Updates original value for some comparisons\r\n     */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value;\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          renderValues[properties.xpath] = value;\n        } else if (value === \"\" || value === null) {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n\n    //Validate if the input has a retype configured and check that both values matches, otherwise delete the original value\n    if (!self.validateInputRetype()) {\n      renderValues[properties.xpath] = \"\";\n    }\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      result.push(true);\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *  Configure additional Handlers for queryForm type\r\n     */\n  configureHandlersQueryForm: function configureHandlersQueryForm() {\n    var self = this;\n    var checkIncluded = self.element.find(\".ui-bizagi-render-control-included\");\n    checkIncluded.change(function () {\n      self.properties.included = $(this).is(\":checked\");\n    });\n  },\n  getRenderId: function getRenderId() {\n    var self = this;\n\n    return bizagi.util.tryCatch(\n    function () {return self.properties.id;},\n    null);\n\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var queryValue = null;\n    if (!bizagi.util.isEmpty(xpath)) {\n      if (value !== null && typeof value !== \"undefined\") {\n        var isObject = typeof value.id !== \"undefined\";\n        if (isObject) {\n          queryValue = !bizagi.util.isEmpty(value.id) ? [value] : null;\n        } else {\n          queryValue = value !== \"\" ? value : null;\n        }\n      }\n      if (queryValue !== null || properties.included) {\n        var searchType = (self.properties.typeSearch || self.properties.rangeQuery || \"NONE\").toUpperCase();\n        var newParameter = {\n          \"value\": queryValue,\n          \"included\": self.properties.included,\n          \"xpath\": properties.xpath,\n          \"searchType\": searchType,\n          \"orderType\": \"NONE\",\n          \"renderId\": self.getRenderId() };\n\n\n        if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n          newParameter.displayXpath = properties.displayXpath;\n        }\n\n        renderValues.push(newParameter);\n      }\n    }\n  },\n\n  /*\r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this,force;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n    var editable = bizagi.util.parseBoolean(properties.editable) || bizagi.util.parseBoolean(properties.editabilityEnabled);\n\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n\n    // The render can be sent if it is editable and is not \"display only\"\n    if (!displayOnly && editable) {\n      return true;\n    }\n\n    if (properties.xpath) {\n      var form = self.getFormContainer();\n      if (form.getRenders(properties.xpath).length == 1) {\n        force = $.forceCollectData ? $.forceCollectData.toString() : false;\n        $.forceCollectData = force ? undefined : $.forceCollectData;\n        if (self.controlValueIsChanged()) {\n          $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n          return true;\n        }\n        $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n      }\n    }\n\n    return false;\n  },\n  /*\r\n     *  Method to determine if the render value can be sent to search\r\n     */\n  canBeSentQueryForm: function canBeSentQueryForm() {\n    var self = this,force;\n    var properties = self.properties;\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n    return true;\n  },\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus(time) {\n    var self = this;\n\n    // Focus is only allowed when the render is visible\n    if (!self.properties.visible) return;\n\n    // Call base\n    this._super();\n    var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n\n    // Configures effect\n    var effect = function effect() {\n      var control = self.getControl();\n      var defaultControl = self.properties.type != \"grid\" ? $(\"input, select, option, textarea\", control) : $(\"input, select, option, textarea\", control).first();\n      if (defaultControl.length > 0) {\n\n        // Focus control\n        $.each(defaultControl, function (i) {\n          var innerControl = defaultControl[i];\n          if ($(innerControl).attr(\"type\") != \"hidden\" && $(innerControl).css(\"display\") != \"none\" && $(innerControl).css(\"visibility\") != \"hidden\") {\n\n            try {\n              if (!bizagi.util.isIE()) {\n                bizagi.util.autoScrollBottom(layout);\n              }\n              innerControl.focus();\n            } catch (e) {\n            }\n          }\n        });\n      }\n    };\n\n    // Wait until the render is ready to apply the focus effect\n    $.when(self.ready()).\n    done(function () {\n      // Run effect\n      if (time > 0) {\n        var timeOutEffect = setTimeout(function () {\n          effect();\n          clearTimeout(timeOutEffect);\n        }, time);\n      } else {\n        effect();\n      }\n    });\n  },\n\n  /*\r\n     *   Resolves default align for each display type\r\n     */\n  getDefaultLabelAlign: function getDefaultLabelAlign(displayType) {\n    return \"default\";\n  },\n\n  /*\r\n     *   Resolves default value align for each display type\r\n     */\n  getDefaultValueAlign: function getDefaultValueAlign(displayType) {\n    return \"default\";\n  },\n  /*\r\n     *   Transform the align type when using RTL orientation\r\n     */\n  getRTLAlign: function getRTLAlign(align) {\n    /* if (align === \"default\"){ \r\n                                                return \"right\";\r\n                                            } */\n    return align;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n    var properties = self.properties;\n    var xpath = \"\";\n\n    if (!properties.editable) return;\n\n    // Build action\n    properties.dependencies = properties.dependencies || 'all';\n\n    if (properties.xpath) {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.xpath;\n      } else {\n        xpath = properties.xpath;\n      }\n    } else {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.id;\n      } else {\n        xpath = properties.id;\n      }\n    }\n\n    var action = {\n      \"conditions\": {\n        \"expressions\": [\n        {\n          \"simple\": {\n            \"xpath\": xpath,\n            \"renderId\": properties.id,\n            \"operator\": \"changes\",\n            \"argumentType\": \"const\" } }] },\n\n\n\n\n      \"commands\": [\n      {\n        \"xpath\": xpath,\n        \"command\": 'submit-value',\n        \"argument\": properties.dependencies }],\n\n\n      \"dependencies\": [xpath],\n      \"elseCommands\": [] };\n\n\n    if (properties.submitOnChangexpathContext && self.grid) {\n      action.conditions.expressions[0].simple.containerId = self.grid.properties.id;\n    }\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n\n  /*\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  submitOnChange: function submitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var defer = $.Deferred();\n\n    // Add context parameter\n    if (self.properties.contexttype != \"\" && data) {\n      data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = self.properties.contexttype;\n    }\n\n    $.when(self.isReadyToSave()).done(function () {\n      self.internalSubmitOnChange(data, bRefreshForm, notCollect).done(function () {\n        defer.resolve();\n      }).fail(function () {\n        defer.reject();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  getCacheIdCase: function getCacheIdCase() {\n    var self = this;\n    var idCase = self.getParams().idCase;\n\n    if (bizagi.cache === undefined) {\n      bizagi.cache = {};\n      bizagi.cache.idCaseObject = {\n        idCase: idCase !== undefined ? idCase : bizagi.cache.idCase !== undefined ? bizagi.cache.idCase : undefined };\n\n    } else {\n      if (idCase !== undefined && bizagi.cache.idCaseObject !== undefined) {\n        bizagi.cache.idCaseObject.idCase = idCase;\n      } else {\n        if (idCase !== undefined && bizagi.cache.idCaseObject === undefined) {\n          bizagi.cache.idCaseObject = {};\n          bizagi.cache.idCaseObject.idCase = idCase;\n        }\n      }\n    }\n\n    if (idCase === undefined) {\n      if (bizagi.cache.idCaseObject === undefined) {\n        idCase = undefined;\n      } else {\n        idCase = bizagi.cache.idCaseObject.idCase;\n      }\n    } else {\n      idCase = idCase;\n    }\n\n    return idCase;\n  },\n  /*\r\n     *   Internal method\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var parameters = {\n      data: data,\n      bRefreshForm: bRefreshForm,\n      notCollect: notCollect,\n      properties: {\n        idCase: self.getCacheIdCase(),\n        id: properties.id,\n        xpath: properties.xpath,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype } };\n\n\n\n    return form.internalSubmitOnChange(parameters);\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n    return null;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n    return null;\n  },\n  /*\r\n     *   Calculates render label and value width\r\n     */\n  calculateRenderWidth: function calculateRenderWidth(labelWidth, valueWidth, displayType) {\n    var self = this;\n    // Read values\n    // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\n    if (valueWidth == \"100\" && typeof labelWidth === \"undefined\") {\n      labelWidth = \"0\";\n    } else {\n      labelWidth = labelWidth ? labelWidth != \"0\" ? labelWidth : \"50\" : \"50%\";\n    }\n    valueWidth = valueWidth ? valueWidth != \"0\" ? valueWidth : \"50\" : \"50%\";\n\n    if (displayType == \"normal\" || displayType == \"both\" || displayType == \"reversed\") {\n\n      // Special case with lower values, so they want both fields in \"auto\" width\n      if (labelWidth && bizagi.util.percent2Number(labelWidth) < 5 &&\n      valueWidth && bizagi.util.percent2Number(valueWidth) < 5) {\n        return { label: 0, control: 100 };\n      }\n      // Normalize percentages\n      if (labelWidth && !valueWidth) {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = 100 - labelWidth;\n\n      } else if (!labelWidth && valueWidth) {\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n        labelWidth = 100 - valueWidth;\n      } else {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n\n        // Check 100% percentage\n        if (labelWidth + valueWidth != 100 && typeof self.properties != \"undefined\" && self.properties.layoutType != \"pixels\") {\n          valueWidth = 100 - labelWidth;\n        }\n      }\n    } else {\n      labelWidth = 100;\n      valueWidth = 100;\n    }\n\n    return { label: labelWidth, control: valueWidth };\n  },\n  /*\r\n     *   Get param value idCase\r\n     */\n  getIdCase: function getIdCase() {\n    var self = this;\n    return self.getFormContainer().params.idCase || bizagi.context.idCase;\n  },\n  /*\r\n     *   Get param value idWorkitem\r\n     */\n  getIdWorkitem: function getIdWorkitem() {\n    var self = this;\n    return self.getFormContainer().params.idWorkitem || bizagi.context.idWorkitem;\n  },\n  /*\r\n     *   Get param value idTask\r\n     */\n  getidTask: function getidTask() {\n    var self = this;\n    return self.getFormContainer().params.idTask || bizagi.context.idTask;\n  },\n  /*\r\n     *   Get param value sessionId\r\n     */\n  getSessionId: function getSessionId() {\n    var self = this;\n    return self.getFormContainer().properties.sessionId;\n  },\n\n  /*\r\n     *   CELL STUFF\r\n     *   TODO: Move to other place\r\n     */\n\n  /* Customizes cell color*/\n  changeCellColor: function changeCellColor(color) {\n    var self = this;\n    var control = self.getControl();\n    if (control) {\n      if (color != 'none') {\n        control.css(\"color\", color);\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", color);\n        });\n      } else {\n        control.css(\"color\", \"\");\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", \"\");\n        });\n      }\n    }\n  },\n\n  /**\r\n      * Customizes cell background color\r\n      * @param color\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var backgroundColor = \"\";\n    var backgroundImage = \"\";\n\n    if (control) {\n      if (color != 'none') {\n        backgroundColor = color;\n        backgroundImage = \"none\";\n      }\n\n      if (self.properties.editable) {\n        var needBGPaint = false;\n\n        control.find(\"input, textarea, .ui-selectmenu\").each(function (i, element) {\n\n          if ((element.type == \"text\" || element.type == \"textarea\") && !$(element).hasClass('ui-select-data'))\n          needBGPaint = true;\n\n          $(element).css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n\n        if (!needBGPaint) {\n          control.closest(\"td\").each(function (i, element) {\n            $(element).css({\n              \"background-color\": backgroundColor,\n              \"background-image\": backgroundImage });\n\n          });\n        }\n\n      } else {\n        control.each(function (i, element) {\n          //TODO: Validar si se aplican los estilos en tablet aun sin esta linea, cuidado con desktop\n          var item = $(element).hasClass(\"ui-bizagi-cell-readonly\") ? control.closest(\"td\") : $(element);\n          item.css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n      }\n    }\n\n\n  },\n\n  /**\r\n      * Changes the cell visibility\r\n      * @param argument\r\n      */\n  changeCellVisibility: function changeCellVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Hide - show the render\n      if (bizagi.util.parseBoolean(argument) == true) {\n        //control.show();\n        control.css(\"visibility\", \"visible\");\n        control.css(\"display\", \"\");\n\n        self.element && self.element.show();\n      } else {\n        //control.hide();\n        control.css(\"visibility\", \"hidden\");\n      }\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n\n  /**\r\n      * Changes the cell required\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Check if argument is true and control donot have any value\n      if (bizagi.util.parseBoolean(argument) == true && bizagi.util.isEmpty(self.value)) {\n        control.addClass('control-required');\n        control.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      } else {\n        control.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", control).remove();\n      }\n      // Update properties\n      properties.required = argument;\n    }\n  },\n\n  /**\r\n      * Method to create deferred at the moment to start multiaction\r\n      */\n  startActionExecution: function startActionExecution() {\n    var self = this;\n    self.startLoading();\n    self.actionExecutionDeferred = new $.Deferred();\n  },\n\n  /**\r\n      * method to resolve the deferred when multiaction finish\r\n      */\n  endActionExecution: function endActionExecution() {\n    var self = this;\n    self.endLoading();\n    if (self.actionExecutionDeferred) self.actionExecutionDeferred.resolve();\n    delete self.actionExecutionDeferred;\n  },\n\n  /**\r\n      * Method to return the promise to anyone that needs to know if multiaction ended\r\n      * @returns {*}\r\n      */\n  readyActionExecution: function readyActionExecution() {\n    var self = this;\n    if (!self.actionExecutionDeferred) return $.when(true);\n    return self.actionExecutionDeferred.promise();\n  },\n\n  /**\r\n      * Verifies is the elements was inside a new row in a grid\r\n      * @returns {boolean}\r\n      */\n  isFromCreatedRow: function isFromCreatedRow() {\n    var self = this;\n\n    if (self.grid) {\n      var i = self.grid.columns.length;\n\n      while (i-- > 0) {\n        if (self.grid.columns[i].properties.xpath == self.properties.xpath) {\n          if (self.grid.columns[i].isNewRow == true) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Submits a invalidate page cache request\r\n      * @param params\r\n      */\n  submitInvalidatePageCacheRequest: function submitInvalidatePageCacheRequest(params) {\n    var self = this,\n    properties = self.properties;\n    var pageCacheToInvalidate = params ? params.idPageCache : properties.idPageCache;\n\n\n    self.dataService.invalidatePageCache({ idPageCache: pageCacheToInvalidate });\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isDesignMode: function isDesignMode() {\n    return this.getMode() === \"design\";\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isExecutionMode: function isExecutionMode() {\n    return this.getMode() === \"execution\";\n  },\n\n  /***/\n  preventDefaultForAnchorTag: function preventDefaultForAnchorTag() {\n    if (bizagi.util.isSharepointContext() || bizagi.util.isWebpartContext()) {\n      $(\"a[href='#']\", this.getControl()).click(function (ev) {\n        ev.preventDefault();\n      });\n    }\n  },\n\n  getMainForm: function getMainForm(currentForm) {\n    var fromRender = currentForm.params.fromRender;\n    if (typeof fromRender != \"undefined\")\n    this.getMainForm(fromRender.getFormContainer());else\n\n    return currentForm;\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the intersection\r\n      * of a target element with an ancestor element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setInterceptionObserver: function setInterceptionObserver($context, callbackFn) {\n    var self = this;\n\n    var intersectionObserver = new IntersectionObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        intersectionObserver.disconnect();\n      }\n    });\n\n    intersectionObserver.POLL_INTERVAL = 100; // Time in milliseconds.\n    intersectionObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the resize\r\n      * of a target element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setResizeObserver: function setResizeObserver($context, callbackFn) {\n    var self = this;\n\n    var resizeObserver = new ResizeObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        resizeObserver.disconnect();\n      }\n    });\n    resizeObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Restore appearance of grid\r\n      */\n  restoreGridAppearance: function restoreGridAppearance() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.restoreAppearance();\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        for (var i = 0; i < indexes.length; i++) {\n          column.decorateRenders[indexes[i]].restoreCellAppearance();\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Save visual changes of children in grid\r\n      */\n  saveGridChildrenVisualChanges: function saveGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.gridChildrenVisualChanges = [];\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] = cell.visualChanges;\n          }\n\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Restore visual changes of children in grid\r\n      */\n  restoreGridChildrenVisualChanges: function restoreGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            cell.visualChanges = self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] || {};\n          }\n\n        }\n      });\n    }\n\n    delete self.gridChildrenVisualChanges;\n  },\n\n  /**\r\n      * Restore appearance of cell\r\n      */\n  restoreCellAppearance: function restoreCellAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n      switch (command) {\n        case \"color\":\n          self.changeCellColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeCellBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeCellRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditabilityCellControl(self.visualChanges[command], self.surrogateKey, self.properties.xpath);\n          break;\n        case \"visibility\":\n          self.changeCellVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  },\n\n  /**\r\n      * Method to perform the format to value\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  formatValue: function formatValue(value) {\n    return value;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Combo Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for combo renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.combo\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.hasLocalData = properties.data || false;\n    // TODO: Review additional value in radio control\n    properties.value = properties.value && properties.value.length > 0 ? properties.value[0] : properties.defaultValue && properties.defaultValue.length > 0 ? properties.defaultValue[0] : null;\n\n    if (typeof properties.enableTyping === \"undefined\") properties.enableTyping = true;\n    if (properties.value && properties.value.id === undefined) properties.value = null;\n    this.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData) {\n      properties.data = this.complementData(properties.data);\n    }\n\n    // This line is to set a flag to fetch the data when rendering, or on demand, by default is false, overriding it on desktop implementation\n    properties.loadOnDemand = false;\n  },\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var params = {};\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n\n    if (self.isDependant && self.properties && /^cascadingcombo$/i.test(renderType) && self.getParentCombo) {\n      var valueControl = self.getParentCombo().getValue();\n      if (valueControl && valueControl.id) {\n        params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = valueControl.id;\n      }\n    }\n\n    return self.renderCombo(params);\n  },\n\n  /*\r\n     *   Renders the combo\r\n     */\n  renderCombo: function renderCombo(params) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.loadOnDemand) {\n      // Render the combo without data\n      var html = self.renderComboTemplate();\n      return html;\n    } else {\n\n      // Set data promise \n      var defer = new $.Deferred();\n      var dataPromise = self.getData(params);\n\n      // Attach callback \n      $.when(dataPromise).done(function (data) {\n        // Render combo\n        var html = self.renderComboTemplate(data);\n        self.properties.data = data;\n        defer.resolve(html);\n\n      }).fail(function (data) {\n        var html = self.renderComboTemplate({});\n        defer.resolve(html);\n      });\n\n      // Returns a promise so we can hold post-render method until this is done\n      return defer.promise();\n    }\n  },\n\n  renderComboTemplate: function renderComboTemplate(data) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var emptyValue = bizagi.override.emptyLabelForCombo || self.getResource(\"render-combo-empty-selection\");\n    var value = properties.value ? \"\" : emptyValue;\n    data = data || self.properties.data || {};\n\n    if (self.properties.type === \"columnCombo\" && value === \"\" && _typeof(properties.value) === \"object\" && properties.value.id === \"\" && (properties.value.value === \"\" || properties.value.value === self.getResource(\"render-combo-empty-value\"))) {\n      value = self.getResource(\"render-combo-empty-selection\");\n    }\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: data,\n      align: properties.valueAlign,\n      value: value,\n      editable: properties.editable }));\n\n\n\n    return html;\n  },\n\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self._super();\n    var item = self.getValue();\n    var control = self.getControl();\n\n    if (self.control && self.control.parent()) {\n      self.control.parent().addClass(\"ui-bizagi-noneditable-\" + self.properties.displayType);\n    }\n    if (item) {\n\n      if (item.value != null && typeof item.value === \"boolean\") {\n        if (bizagi.util.parseBoolean(item.value) === true) {\n          item.value = this.getResource(\"render-boolean-yes\");\n\n        } else if (bizagi.util.parseBoolean(item.value) == false) {\n          item.value = this.getResource(\"render-boolean-no\");\n        }\n      }\n\n      // Returns the cached value from the properties to avoid server side fetching\n      if (self.getResource(\"render-combo-empty-value\") === item.value || self.getResource(\"render-combo-empty-selection\") === item.value) {\n        control.text(\"\");\n      } else {\n        control.html(\"<label class='readonly-control'>\" + self.formatItem(item.value) + \"</label>\");\n      }\n    } else {\n      // Render empty \n      control.text(\"\");\n    }\n  },\n\n  /*\r\n     *   Gets the template used by the combo render\r\n     *   can be overriden in subclasses to reuse logic and just change the template\r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  },\n\n  /*\r\n     *   Determines if we need to show the empty node or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showEmpty: function showEmpty() {\n    return true;\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    return true;\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var mode = self.getMode();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode !== \"execution\") return self.getDummyData();\n\n    if (properties.hasLocalData || isOfflineForm) {\n\n      // Resolve with local data    \n      defer.resolve(properties.data);\n\n    } else {\n      var renderType = bizagi.util.normalizeType(properties.type);\n\n      // Check if the data has been cached\n      if (properties.remoteDataLoaded && !/^cascadingcombo$/i.test(renderType)) {\n        defer.resolve(properties.data);\n      } else {\n        // Go to server\n        self.dataService.multiaction().getData({\n          url: properties.dataUrl,\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache,\n          extra: params,\n          contexttype: self.properties.contexttype || null }).\n        done(function (data) {\n\n          // Resolve the data\n          if (!properties.recalculate) {\n            properties.remoteDataLoaded = true;\n          }\n          properties.data = self.complementData(data);\n          defer.resolve(properties.data);\n\n        }).fail(function (data) {\n\n          var allowActions = true;\n          var form = self.getFormContainer();\n\n          if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\")\n          allowActions = form.allowOnlineActions();\n\n          if (data.type === \"not-processed\" && allowActions)\n          return;\n\n          // Show error from server\n          var msgObj = self.properties.displayName + \": \";\n\n          if (typeof data === \"string\") {\n            var auxMsg = JSON && JSON.parse(data) || $.parseJSON(data);\n          } else {\n            var auxMsg = data;\n          }\n\n          msgObj += auxMsg.message;\n\n          form.addValidationMessage(msgObj);\n\n          defer.reject(data);\n        });\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n     */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      properties.data = [];\n      properties.data = self.complementData(properties.data);\n\n      // Add another data\n      properties.data.push({ id: \"\", value: \"Item 1\" });\n      properties.data.push({ id: \"\", value: \"Item 2\" });\n\n      return properties.data;\n    }\n  },\n\n  /*\r\n     *   Resets the data in order to fetch it again when needed\r\n     */\n  resetData: function resetData() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.hasLocalData = false;\n    properties.data = null;\n    properties.remoteDataLoaded = false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n\n    if (self.combo && self.combo.length > 0) {\n      // When there is a combo painted, we fetch the selected value from it\n      return self.getSelectedValue();\n    } else {\n      var displayValue = \"\";\n      var item = self.getValue();\n\n      if (item) {\n        // Check on cached propert from server first if the key exists\n        displayValue = self.formatItem(item.value);\n      }\n\n      return displayValue;\n    }\n  },\n\n\n  /*\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n  },\n\n  /*\r\n     *   Adds custom parameters to process the template\r\n     */\n  getTemplateParams: function getTemplateParams() {\n    return {};\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n\n    if (value !== undefined && value !== null) {\n      if ($.isArray(value)) {\n\n        for (var i = 0, length = value.length; i < length; i++) {\n          if (value[i] != null && typeof value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value[i]) === true) {\n              value[i] = this.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value[i]) === false) {\n              value[i] = this.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n        return value.join(\" - \");\n      } else {\n        return value;\n      }\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos        \n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) === \"object\" && (value.id === undefined || value.id === \"\")) {\n          renderValues[properties.xpath] = \"\";\n        } else {\n          // Add the value to the server\n          renderValues[properties.xpath] = typeof value.id !== \"undefined\" ? value.id : \"\";\n        }\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var currentValue = self.getValue();\n    var originalValue = properties.originalValue;\n    var defaultValue = properties.defaultValue;\n\n    var result = true;\n\n    if ($.forceCollectData) {\n      return result;\n    }\n\n    currentValue = currentValue && currentValue.length !== undefined ? currentValue[0] : currentValue;\n    originalValue = originalValue && originalValue.length !== undefined ? originalValue[0] : originalValue;\n    defaultValue = defaultValue && defaultValue.length !== undefined ? defaultValue[0] : defaultValue;\n\n    currentValue = currentValue && currentValue.id !== undefined ? currentValue.id : currentValue;\n    originalValue = originalValue && originalValue.id !== undefined ? originalValue.id : originalValue;\n    defaultValue = defaultValue && defaultValue.id !== undefined ? defaultValue.id : defaultValue;\n\n    if (defaultValue !== undefined) {\n      if (defaultValue != originalValue || defaultValue != currentValue) {\n        result = true;\n      } else {\n        result = false;\n      }\n    } else {\n      result = currentValue != originalValue ? true : false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     * Parses additional values info in order to format them correctly\r\n     */\n  parseAdditionalValues: function parseAdditionalValues(data) {\n    var self = this;\n\n    return $.map(data, function (item) {\n      var value = item.value ? self.formatItem(item.value) : item;\n      var newItem = { id: item.id, value: value };\n\n      if (item.hidden) newItem.hidden = true;\n      return item;\n    });\n  },\n\n  /*\r\n     *   Complement data from server before control implementation\r\n     */\n  complementData: function complementData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var bCurrentDataFound = false;\n    $.each(data, function (i, item) {\n\n      if (item.value !== undefined && item.value !== null) {\n        item.value = self.formatItem(item.value);\n        if (properties.value) {\n          if (item.id == properties.value.id) {\n            bCurrentDataFound = true;\n          }\n        }\n      } else {\n        item.value = \"\";\n      }\n    });\n\n    // Add empty node if configured\n    if (self.showEmpty()) {\n      var emptyFound = false;\n      for (var i = 0, length = data.length; i < length; i++) {\n        if (data[i].id === \"\") {\n          emptyFound = true;\n          break;\n        }\n      }\n\n      if (!emptyFound) {\n        var dataValue = bizagi.override.emptyLabelForCombo || bizagi.localization.getResource(\"render-combo-empty-value\");\n        data.unshift({ id: \"\", value: dataValue });\n      }\n    }\n\n    if (properties.value) {\n      if (!bCurrentDataFound && self.showCurrentData()) {\n        data.unshift({ id: properties.value.id, value: properties.value.value, hidden: true });\n      }\n    }\n\n    // Add additional value\n    return self.parseAdditionalValues(data);\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    var currentValue = self.getValue();\n\n    if (bizagi.util.isEmpty(currentValue)) return false;\n    if (Object.prototype.toString.apply(currentValue) === \"[object Object]\" && (bizagi.util.isEmpty(currentValue.id) || currentValue.id == 0)) return false;\n\n    // Else\n    return true;\n  },\n\n  /*\r\n     * Cleans current data\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    this.column && !this.column.comboData && this.getData();\n  },\n\n  isExtraItem: function isExtraItem() {\n    var self = this;\n    var data = self.value || {};\n    var value = data.value || \"\";\n\n    return value === \"\" || value === self.getResource(\"render-combo-empty-selection\") || value === self.getResource(\"render-combo-empty-value\");\n  },\n\n  escapeValue: function escapeValue(value) {\n    if (bizagi.util.isString(value)) {\n      var valueToReturn = value.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n      return valueToReturn;\n    } else {\n      return value;\n    }\n  },\n\n  /**\r\n      *  Maps the value, when this one comes from actions\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  validateValue: function validateValue(value) {\n    if (value.id != undefined && (typeof value.id === \"number\" && value.id !== null || typeof value.id === \"string\" && value.id.length > 0)) {\n      if (value.value !== null && typeof value.value === \"boolean\") {\n        translated = true;\n        if (bizagi.util.parseBoolean(value.value) === true) {\n          value.value = bizagi.localization.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(value.value) === false) {\n          value.value = bizagi.localization.getResource(\"render-boolean-no\");\n        }\n      } else if (value.value != null && _typeof(value.value) === \"object\") {\n        for (var i = 0, length = value.value.length; i < length; i++) {\n          if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value.value[i]) === true) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Finds an element in the combo data values by id\r\n      * @param {int} id\r\n      * @returns {Object}\r\n      */\n  findDataValueById: function findDataValueById(id) {\n    return (this.properties.data || []).find(function (e) {\n      return e.id == id;\n    });\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Render Date Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for date renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.date\", {}, {\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n    var ud = bizagi.util.dateFormatter;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/gi) === -1) {\n        properties.fullFormat = properties.fullFormat + \" \" + properties.timeFormat;\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = ud.getDateFromInvariant(properties.value, properties.showTime);\n      // Format date to current format\n      if (date != 0) {\n        // Value must always hold the value with invariant format\n        self.value = properties.value;\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else {\n        self.value = null;\n      }\n    }\n\n    // Fix dateFormat for datepicker\n    dateFormat = self.getDateFormat(properties.fullFormat);\n\n    var indexDateTimeSeparation = properties.fullFormat.substring(0, properties.fullFormat.indexOf(\":\")).lastIndexOf(\" \");\n    if (!properties.showTime)\n    properties.fullFormat =\n    indexDateTimeSeparation > 0 ? properties.fullFormat.substring(0, indexDateTimeSeparation) : properties.fullFormat;\n\n    properties.datePickerFormat = dateFormat.datePickerFormat;\n    properties.timePickerFormat = dateFormat.timePickerFormat;\n\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"date\");\n    var fullFormat = properties.fullFormat;\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      showTime: properties.showTime,\n      value: properties.value,\n      editable: properties.editable,\n      dateFormat: bizagi.override && bizagi.override.uppercaseDatePlaceholder === true ? fullFormat.toUpperCase() : fullFormat,\n      rtl: properties.orientation == \"rtl\" });\n\n    return html;\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers(intHandler, isNow) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set control references\n    var dateControl = self.getDateControl();\n    var timeControl = self.getTimeControl();\n\n    // Attach change event\n    dateControl.bind(\"change\", function () {\n      self.onChangeHandler();\n    });\n\n    if (properties.showTime) {\n      timeControl.bind(\"change\", function (e, isNow) {\n        if (self.updatingTime) {\n          delete self.updatingTime;\n          return;\n        }\n        self.onChangeHandler(isNow);\n      });\n    }\n  },\n\n  /*\r\n      *   Formats the date time value to the hidden control\r\n      */\n  onChangeHandler: function onChangeHandler() {\n  },\n\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var displayValue;\n\n    if (!properties.displayValue && value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n    } else {\n      displayValue = \"\";\n    }\n\n    // We can return the display value isntance\n    return properties.displayValue || displayValue || \"\";\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          // Formats the value in full invariant (with time) in order to send to the server\n          var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n          if (typeof date != \"undefined\")\n          if (date !== 0) {\n            if (!properties.showTime) {\n              date.setHours(0, 0, 0, 0);\n            }\n            renderValues[properties.xpath] = bizagi.util.dateFormatter.formatInvariant(date, true);\n          }\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n  },\n\n  /*\r\n      *   Gets the time control\r\n      */\n  getTimeControl: function getTimeControl() {\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable) === true) {\n        value = self.getNormalizeDate(bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime));\n        var message;\n\n        // Check that we have a valid data\n        if (value != 0) {\n          // Check min value\n          if (properties.minValue && (typeof properties.minValue === \"string\" || typeof properties.minValue == \"number\")) {\n            var minValue = self.getNormalizeDate(\n            typeof properties.minValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.minValue, properties.showTime) :\n            new Date(properties.minValue));\n\n\n            if (value < minValue) {\n              message = this.getResource(\"render-date-minimum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#minValue#\", bizagi.util.dateFormatter.formatDate(minValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n\n          // Check max value\n          if (properties.maxValue && (typeof properties.maxValue == \"string\" || typeof properties.maxValue == \"number\")) {\n            var maxValue = self.getNormalizeDate(\n            typeof properties.maxValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.maxValue, properties.showTime) :\n            new Date(properties.maxValue));\n\n\n            if (value > maxValue) {\n              message = this.getResource(\"render-date-maximum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#maxValue#\", bizagi.util.dateFormatter.formatDate(maxValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n        }\n      }\n    }\n    return bValid;\n  },\n\n  /**\r\n      * Translate standar date format to jquery date picker\r\n      * @property {string} format Control's date format\r\n      * @returns {JSON object} A JSON Object whith the date and time format\r\n      */\n  getDateFormat: function getDateFormat(format) {\n    var datePickerFormat = format;\n    var timePickerFormat = undefined;\n    var init;\n\n    if (format.search(\"h\") != -1 || format.search(\"H\") != -1) {\n      if (format.search(\"h\") != -1) {\n        init = format.search(\"h\");\n      } else {\n        init = format.search(\"H\");\n      }\n\n      datePickerFormat = format.substring(0, init - 1);\n      timePickerFormat = format.substr(init);\n    }\n\n    // Fix month\n    if (datePickerFormat.indexOf(\"MMMM\") >= 0) {\n      datePickerFormat = datePickerFormat.replaceAll(\"MMMM\", \"MM\");\n    } else if (datePickerFormat.indexOf(\"MMM\") >= 0) {\n      // Month name short\n      datePickerFormat = datePickerFormat.replaceAll(\"MMM\", \"M\");\n    } else if (datePickerFormat.indexOf(\"MM\") >= 0) {\n      // Month two digits\n      datePickerFormat = datePickerFormat.replaceAll(\"MM\", \"mm\");\n    } else if (datePickerFormat.indexOf(\"M\") >= 0) {\n      // Month one digits\n      datePickerFormat = datePickerFormat.replaceAll(\"M\", \"m\");\n    }\n\n    // Fix years\n    if (datePickerFormat.search(\"yyyy\") != -1) {\n      datePickerFormat = datePickerFormat.replaceAll(\"yyyy\", \"yy\");\n    } else {\n      if (datePickerFormat.search(\"yy\") != -1) {\n        datePickerFormat = datePickerFormat.replaceAll(\"yy\", \"y\");\n      }\n    }\n\n    datePickerFormat = datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n\n    return {\n      datePickerFormat: datePickerFormat,\n      timePickerFormat: timePickerFormat };\n\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    this._super();\n    if (typeof properties.maxValue == \"undefined\")\n    properties.maxValue = \"12/31/\" + parseInt(new Date().getFullYear() + 200).toString() + \" 00:00:00\"; //Current year + 200 IE or 9999\n    if (typeof properties.minValue == \"undefined\")\n    properties.minValue = \"01/01/\" + parseInt(new Date().getFullYear() - 200).toString() + \" 00:00:00\"; //Current year - 200 IE or 1753 for SQL Server compat\n  },\n\n  /**\r\n      * Sets milliseconds to 0 in date\r\n      * @param {Date} date date to be treated\r\n      * @returns {Date} date converted with milliseconds 0\r\n      */\n  getNormalizeDate: function getNormalizeDate(date) {\n    var self = this;\n    if (date != 0 && date != null) {\n      if (!self.properties.showTime) {\n        date.setHours(0, 0, 0, 0);\n      } else date.setMilliseconds(0);\n    }\n    return date;\n  },\n\n  /**\r\n      * Configure the timeformat\r\n      */\n  getTimeFormat: function getTimeFormat(format) {\n    return format.replaceAll(\"m\", \"i\").replaceAll(\"tt\", \"A\");\n  },\n\n  /**\r\n      * Sets value to the control\r\n      * @param {Date} date date to asign\r\n      * @returns {}\r\n      */\n  setValueFromCalendarButtons: function setValueFromCalendarButtons(date) {\n    var self = this;\n    if (date) date = self.getNormalizeDate(date);else\n    {\n      value = null;\n      self.setValue(\"\");\n      self.setDisplayValue(\"\");\n    }\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.minValue = value;\n    }\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.maxValue = value;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Text Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for text renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.extendedText\", {}, {\n\n  /**\r\n                                                       * Update or init the element data\r\n                                                       * @param {} data\r\n                                                       */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    this.hasMaxLines = this.properties.maxLines ? true : false;\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // Fill default properties\n    properties.maxLines = this.properties.maxLines || 6;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || self.getResource(\"render-text-regular-expression-default-message\");\n\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"extendedText\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n\n    var control = self.getControl();\n    self.textarea = control.find(\"textarea\");\n\n    // If is textarea, then enable resize element.\n    if (self.textarea) {\n      self.textarea.css({ resize: \"both\" });\n    } else {\n      self.textarea.css({ resize: \"none\" });\n    }\n\n    // Attach event for retype double\n    if (self.properties.retype === \"double\")\n    self.attachRetypeDouble();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set the default maxlength for the input if is 0 or undefined set to infinity\n    // this resolve issue with scope strings that don't have maxlength\n    if (properties.maxLength)\n    self.textarea.prop('maxlength', properties.maxLength);\n\n    if (properties.maxLines) {\n      self.textarea.prop('rows', properties.maxLines);\n    } else {\n      self.textarea.prop('rows', 6);\n    }\n\n    // Attach change event\n    self.textarea.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.textarea.val());\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.textarea.val(), true);\n        } else {\n          // Set error message\n          var message = validationMessages[0].message;\n          bizagi.showMessageBox(message, \"Bizagi\", \"error\");\n        }\n      }\n    });\n\n    // Attach blur event\n    self.textarea.bind(\"blur\", function () {\n      // Updates internal value\n      self.setValue(self.textarea.val());\n    });\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var regEx = new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\");\n\n    // Offline capability\n    if (this.isOfflineForm && bizagi.util.isMobileDevice()) {\n      value = value && _typeof(value) === \"object\" && value.value ? value.value : value;\n    }\n\n    // Check regular expression\n    if (properties.regularExpression) {\n      if (properties.editable) {\n        if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)) && self.properties && self.properties.xpath === \"userName\")) {\n          message = properties.regularExpression.message;\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        } else {\n          if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)))) {\n            message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    } else {\n      if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n        if (properties.editable) {\n          message = this.getResource(\"render-text-regular-expression-default-message\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (self.properties.editable == false) {\n      // Render as simple value\n      if (typeof value == \"string\") {\n\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(valueToDisplay);\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectData: function collectData(renderValues) {\n    // Call base\n    this._super(renderValues);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * More information SUITE-9407\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value) {\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    this._super(decodedValue);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Int} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Grid Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for grids\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.grid\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n    self.originalProperties = bizagi.clone(data.properties);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    self.initProperties();\n\n    // Set columns\n    var areThereEditableColumns;\n    var areThereTotalizedColumns;\n    self.columns = [];\n    self.columnsIds = [];\n    self.enabledChecks = {};\n    self.exclusiveChanges = {};\n    self.originalEnabledChecks = [];\n    $.each(data.elements, function (i, column) {\n      var columnProperties = column.render.properties;\n\n      // the groupby property is taken of column\n      if (columnProperties.groupBy) {\n        properties.groupBy = columnProperties.xpath || \"\";\n        properties.allowGrouping = !bizagi.util.isEmpty(properties.groupBy) ? true : false;\n      }\n\n      if (/columnBoolean/i.test(columnProperties.type) && columnProperties.isExclusive) {\n        properties.hasExclusiveCheck = true;\n        column.render.properties.required = false;\n        self.enabledChecks[columnProperties.xpath] = [];\n      }\n\n      // If inlineEdit is false then all columns must be read only\n      if (!self.properties.inlineEdit) {\n        column.render.properties.editable = false;\n      }\n\n      // Create renderColumns\n      var columnRender = self.renderFactory.getColumn({\n        type: columnProperties.type,\n        data: column.render,\n        parent: self,\n        singleInstance: properties.singleInstance });\n\n\n      self.columns.push(columnRender);\n      self.columnsIds.push(column.render.properties.id);\n\n      if (columnProperties.editable) {\n        areThereEditableColumns = true;\n      }\n\n      if (columnProperties.totalize && columnProperties.totalize.operation) {\n        areThereTotalizedColumns = true;\n\n        // Default summary format\n        columnProperties.totalize.format = columnProperties.totalize.format || {};\n        columnProperties.totalize.format.bold = columnProperties.totalize.format.bold !== undefined ? columnProperties.totalize.format.bold : true;\n      }\n    });\n\n    // Reverse columns when using right to left orientation\n    if (properties.orientation === \"rtl\")\n    self.columns = self.columns.reverse();\n\n    // Turn off inline edit if there are any editable columns        \n    if (properties.inlineEdit && !areThereEditableColumns) {\n      properties.inlineEdit = false;\n      properties.allowEdit = false;\n    }\n\n    // Check if the grid has totalizers\n    if (areThereTotalizedColumns) {\n      properties.showSummary = true;\n      properties.rowsPerPage = 0;\n    }\n  },\n\n  initProperties: function initProperties() {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    /** Edit properties\r\n                                       * @default editable true\r\n                                       * @default  allowAdd true\r\n                                       */\n    $.extend(properties, self.initEditabilityProperties(\n    properties.editable,\n    properties.allowEdit,\n    properties.inlineEdit,\n    properties.withEditForm),\n    self.initAddAndDeleteProperties(\n    properties.editable,\n    properties.allowAdd,\n    properties.inlineAdd,\n    properties.allowDelete));\n\n\n    /* Define details properties*/\n    properties.allowDetail = bizagi.util.parseBoolean(properties.allowDetail) != null ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.isSortable = bizagi.util.parseBoolean(properties.isSortable) != null ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    /* Define general properties */\n    properties.keyColumn = \"\";\n    properties.data = properties.data || null;\n    properties.displayType = \"value\";\n    properties.skipInitialLoad = properties.skipInitialLoad || false;\n    properties.allowMore = bizagi.util.parseBoolean(properties.allowMore) || false;\n    properties.allowFilter = bizagi.util.parseBoolean(properties.allowFilter) || false;\n    properties.allowGrouping = false;\n    properties.groupBy = \"\";\n    properties.groupSummary = properties.groupSummary || null;\n    properties.groupText = this.getResource(\"render-grid-group-text\");\n    properties.groupCollapsed = bizagi.util.parseBoolean(properties.groupCollapsed) || false;\n    properties.groupOrder = properties.groupOrder || \"asc\";\n    properties.formShowMode = bizagi.util.parseBoolean(properties.formShowMode) || \"popup\";\n    properties.floatingHeader = bizagi.util.parseBoolean(properties.floatingHeader) || false;\n\n    properties.sortBy = properties.sortBy ? properties.sortBy : properties.data && properties.data.sort ? properties.data.sort : properties.keyColumn;\n    properties.sortOrder = properties.sortOrder !== undefined && properties.sortOrder !== null ? properties.sortOrder === \"True\" ? \"asc\" : \"desc\" : properties.data && properties.data.order ? properties.data.order : \"asc\";\n    properties.sort = properties.sortBy + \" \" + properties.sortOrder;\n\n    properties.rowsPerPage = properties.allowGrouping ? 1000 : properties.rowsPerPage || 20;\n    properties.page = 1;\n    properties.records = 0;\n    properties.totalPages = 0;\n\n    properties.addLabel = properties.addLabel || $.trim(this.getResource(\"render-grid-add-label\")) + \" \" + properties.displayName;\n    properties.editLabel = properties.editLabel || $.trim(this.getResource(\"render-grid-edit-label\")) + \" \" + properties.displayName;\n    properties.deleteLabel = properties.deleteLabel || this.getResource(\"render-ecm-confirm-bt-delete\") + \" \" + properties.displayName;\n    properties.exportOptionsLabel = properties.exportOptionsLabel || this.getResource(\"render-grid-export-options-label\") + properties.displayName;\n    properties.detailLabel = properties.detailLabel || this.getResource(\"render-collection-navigator-details-form\");\n\n    // Apply style to entire table\n    properties.tableCssClass = properties.cssClass || \"\";\n\n    properties.alreadySaved = false;\n\n    // When grid open in modal window and the parent is entity\n    if (properties.contexttype != \"entity\") {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Define if it is editable or not        \n    /* This part change all cells in the table to no editable,\r\n     * you must use it when the parent container has noeditable property,\r\n     * so this table is noeditable too.\r\n     */\n    try {\n      if (self.parent && typeof self.parent.properties.editable == \"boolean\" && !self.parent.properties.editable || !properties.editable) {\n        properties.editable = false;\n        properties.allowEdit = false;\n        properties.inlineEdit = false;\n        properties.allowAdd = false;\n        properties.inlineAdd = false;\n        properties.allowDelete = false;\n      }\n    } catch (e) {\n    }\n\n    // If grid has not allowEdit property in true, all fields within the grid\n    // must be no editables, so these lines changes this behavior\n    if (!properties.allowEdit || !properties.inlineEdit && !properties.withEditForm) {\n      properties.editable = false;\n    }\n\n    // Calculate render width\n    properties.labelWidth = 0;\n    properties.valueWidth = \"100%\";\n\n    // This property will be used to make custom grids with another data source\n    properties.overrideGetRemoteData = properties.overrideGetRemoteData || undefined;\n    //this property use to create a single decorated or a array of decorated\n    properties.singleInstance = bizagi.util.isEmpty(properties.singleInstance) ? true : properties.singleInstance;\n\n    // Check if the grid its opened whitin dialog form and has contextType\n    properties.contextType = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : null;\n\n    // Create a collection to collect changes\n    self.changes = {};\n\n    // Create a collection to override properties per cell\n    self.cellOverrides = {};\n\n    // Check orientation and change order of data if its necesary (rtl)\n    if (self.isRTL() && properties.data != null) {\n      properties.data.rows = self.changeOrderData(properties.data.rows);\n    }\n  },\n\n  initEditabilityProperties: function initEditabilityProperties(editable, allowEdit, inlineEdit, withEditForm) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowEdit = bizagi.util.parseBoolean(allowEdit) !== null ? bizagi.util.parseBoolean(allowEdit) : true;\n    inlineEdit = bizagi.util.parseBoolean(inlineEdit) !== null ? bizagi.util.parseBoolean(inlineEdit) : true;\n    withEditForm = bizagi.util.parseBoolean(withEditForm) !== null ? bizagi.util.parseBoolean(withEditForm) : false;\n\n    if (!editable) {\n      allowEdit = inlineEdit = withEditForm = false;\n    }\n\n    return {\n      editable: editable,\n      allowEdit: allowEdit,\n      inlineEdit: inlineEdit,\n      withEditForm: withEditForm };\n\n  },\n\n  initAddAndDeleteProperties: function initAddAndDeleteProperties(editable, allowAdd, inlineAdd, allowDelete) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowAdd = bizagi.util.parseBoolean(allowAdd) != null ? bizagi.util.parseBoolean(allowAdd) : true;\n    inlineAdd = bizagi.util.parseBoolean(inlineAdd) != null ? bizagi.util.parseBoolean(inlineAdd) : true;\n    // Define Delete \n    allowDelete = bizagi.util.parseBoolean(allowDelete) != null ? bizagi.util.parseBoolean(allowDelete) : true;\n\n    if (!allowAdd) {\n      inlineAdd = false;\n    }\n\n    if (!editable) {\n      allowAdd = inlineAdd = allowDelete = false;\n    }\n\n    return {\n      allowAdd: allowAdd,\n      inlineAdd: inlineAdd,\n      allowDelete: allowDelete };\n\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    return this.properties.data && this.properties.data.rows.length > 0;\n  },\n\n  isRTL: function isRTL() {\n    var properties = this.properties;\n    if (!properties) return true;\n    return typeof properties.orientation == \"string\" && properties.orientation.toUpperCase() == \"RTL\" ? true : false;\n  },\n\n  changeOrderData: function changeOrderData(data) {\n    var reverseDataRows = [];\n    var rows = data || [];\n    var rowKey;\n\n    $.each(rows, function (key, value) {\n      // Extract row key\n      rowKey = value.shift();\n      reverseDataRows = value.reverse();\n      // add element in the start\n      reverseDataRows.unshift(rowKey);\n\n      rows[key] = reverseDataRows;\n    });\n\n    return rows;\n  },\n\n  /**\r\n      * Specific fix RTL with localizated\r\n      * @param data\r\n      * @returns {*|Array}\r\n      */\n  removeRemainingColumns: function removeRemainingColumns(data, numColumns) {\n    var rows = data || [];\n    var remainingColumns = 0;\n    if (rows.length > 0) {\n      // \"- 1\" because the first column represent id row\n      remainingColumns = rows[0].length - numColumns - 1;\n    }\n    if (remainingColumns > 0) {\n      $.each(rows, function (key, value) {\n        // Remove remaining columns\n        for (var i = 0; i < remainingColumns; i++) {\n          value.pop();\n        }\n      });\n    }\n    return rows;\n  },\n\n  /* \r\n      *   Gets a column definition by xpath\r\n      */\n  getColumn: function getColumn(xpath) {\n    var self = this;\n    var result = null;\n    $.each(self.columns, function (i, column) {\n      if (\n      column.properties.xpath == xpath ||\n      column.properties.id == xpath ||\n      column.properties.xpath + \".\" + column.properties.id == xpath)\n      {\n        result = column;\n      }\n    });\n\n    return result;\n  },\n\n  getColumnType: function getColumnType(id) {\n    var self = this;\n    var columnIndex = self.columnsIds.indexOf(id);\n\n    if (columnIndex != -1) {\n      return self.columns[columnIndex].properties.type;\n    }\n\n    return null;\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var defer = new $.Deferred();\n\n    // Set dummy data when not in execution mode\n    var mode = self.getMode();\n    if (mode !== \"execution\") {\n      properties.data = self.getDummyData();\n    }\n\n    var template = self.getGridTemplate();\n\n    // Render template\n    var html = self.applyTemplate(template);\n\n    // Initialize columns\n    var columnInitializers = [];\n    $.each(self.columns, function (i, column) {\n\n      // Add to column initializer array so we can synch out the promises\n      var result = column.initialize();\n      if (result)\n      columnInitializers.push(result);\n    });\n\n    // Resolve when all columns has been loaded\n    $.when.apply($, columnInitializers).done(function () {\n      defer.resolve(html);\n    });\n\n    return defer.promise();\n  },\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    this._super();\n\n    // Make control to behave as a block container\n    // TODO: Move to instances. This does not apply to mobiles\n    control.addClass(\"ui-bizagi-render-grid-container\").\n    addClass(\"ui-bizagi-render-display-block\");\n  },\n\n  /*\r\n      *   Returns the grid template to be used\r\n      */\n  getGridTemplate: function getGridTemplate() {\n    return this.renderFactory.getTemplate(\"grid\");\n  },\n\n  /*\r\n      *   Applies the template to the render and returns the resolved element\r\n      */\n  applyTemplate: function applyTemplate(template) {\n    var self = this,\n    properties = self.properties;\n    orientation = self.properties.orientation;\n\n    return $.fasttmpl(template, {\n      id: bizagi.util.encodeXpath(properties.xpath),\n      displayName: bizagi.util.encodeXpath(properties.displayName),\n      allowAdd: properties.allowAdd,\n      addLabel: properties.addLabel });\n\n  },\n  /*\r\n      *   Method to render non editable values\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    // Override read-only presets\n    //  properties.allowAdd = false;\n    // Render the same, just change some presets\n    return self.renderControl();\n  },\n  /*\r\n      *   Fetch the data into a deferred\r\n      */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      sort: properties.sortBy,\n      order: properties.sortType,\n      page: properties.page,\n      rows: properties.rowsPerPage,\n      searchFilter: properties.searchFilter,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      return properties.overrideGetRemoteData(params);\n    } else {\n      // Resolve with remote data\n      return self.dataService.multiaction().getGridData(params).then(function (data) {\n        self.originalProperties = self.originalProperties || {};\n        self.originalProperties.data = bizagi.clone(data);\n\n        // Resolve with fetched data\n        properties.page = data.page;\n        properties.records = data.records;\n        properties.totalPages = data.totalPages;\n\n        return data;\n      }).fail(function (error) {\n        console.error(error.message || \"Error\");\n      });\n    }\n  },\n  /*\r\n      insert a blank item in the selected column in the data matrix\r\n      */\n  spliceRowData: function spliceRowData(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.rows) {\n      $.each(data.rows, function (key, value) {\n        var spliceIndex = index || data.rows[key].length;\n        data.rows[key].splice(spliceIndex, 0, \"\");\n      });\n    }\n  },\n\n  spliceRowDataVisible: function spliceRowDataVisible(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.visible) {\n      $.each(data.visible, function (key, value) {\n        var spliceIndex = index || data.visible[key].length;\n        data.visible[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  spliceRowDataEditable: function spliceRowDataEditable(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.editable) {\n      $.each(data.editable, function (key, value) {\n        var spliceIndex = index || data.editable[key].length;\n        data.editable[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  /*\r\n      *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n      */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      var rowTemplate = [\"1\"];\n\n      // Add a value for each column\n      for (var i = 0; i < self.columns.length; i++) {\n        rowTemplate.push(\"\");\n      }\n\n      var data = {\n        \"page\": 1,\n        \"total\": 1,\n        \"records\": 1,\n        \"rows\": [rowTemplate] };\n\n\n      return data;\n    }\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType });\n\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this,\n    properties = self.properties;\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + self.buildCellXpathFilter(id) : properties.xpath + self.buildCellXpathFilter(id);\n\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n      return self.dataService.saveGridRecord({\n        url: properties.saveUrl,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        submitData: data,\n        contexttype: properties.contextType,\n        disableServerGridValidations: data.disableServerGridValidations || false }).\n      pipe(function (dataResp) {\n        self.endLoading();\n        return dataResp;\n      }).fail(function (dataFail) {\n        var form = self.getFormContainer();\n        var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n        //Convert String to object\n        if (typeof message == \"string\") {\n          try {\n            message = JSON.parse(message).message;\n          } catch (e) {\n            message = message.match(/\"message\":(.*)\",/)[0];\n            message = message.substr(11, message.length - 13);\n          }\n\n        } else if (!message.message) {\n          message = dataFail;\n        }\n        form.validateForm();\n        form.clearValidationMessages();\n        form.addValidationMessage(message);\n      });\n    });\n  },\n  /*\r\n      *   Submits a grid delete record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n  /*\r\n      *   Submits a grid add record request\r\n      *   Returns a deferred when done, the server returns an id for the new record\r\n      */\n  submitAddRequest: function submitAddRequest() {\n    var self = this,\n    properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n  /*\r\n      *   Submits a grid rollback request\r\n      *   Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this,\n    properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: params ? params.idPageCache : properties.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /**\r\n      * Collect a single cell change made in the grid to send the data when the user saves the form\r\n      * @param params\r\n      */\n  collectGridChange: function collectGridChange(params) {\n    var self = this;\n    params = params || {};\n    var id = params.id;\n    var dataType = params.dataType;\n    var xpath = params.xpath;\n    var value = params.value;\n    var trigger = typeof params.trigger !== \"undefined\" ? params.trigger : true;\n    var isPressed = params.pressed || false;\n    var renderType = dataType && bizagi.util.normalizeType(dataType);\n\n    self.changes[id] = self.changes[id] || {};\n\n    if (/^columnsearch$/i.test(renderType) && value && typeof value.id !== \"undefined\") {\n      self.changes[id][xpath] = value.id;\n    } else {\n      self.changes[id][xpath] = value;\n    }\n\n    if (trigger) {\n      self.triggerRenderChange({ key: id, column: xpath, pressed: isPressed });\n    }\n  },\n  /*\r\n      *   Configures a column to perform a submit on change when the user changes a cell\r\n      */\n  configureColumnSubmitOnChange: function configureColumnSubmitOnChange(xpath) {\n    var self = this;\n    var properties = self.properties;\n\n    // Build action\n    var action = {\n      commands: [{\n        xpath: properties.xpath,\n        command: 'submit-value',\n        argument: 'all' }],\n\n      conditions: {\n        operator: 'and',\n        expressions: [\n        {\n          simple: {\n            operator: 'cell-change',\n            xpath: properties.xpath + '[].' + xpath,\n            argumentType: 'text',\n            argument: xpath } }] },\n\n\n\n\n      dependencies: [properties.xpath] };\n\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).\n    done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var keysToDelete = [];\n\n    if (self.exclusiveChanges) {\n      //Add filter to parse all checks in tru to false. DON'T CHANGE CODE ORDER\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          // If there are any change, its needed to include as a change the filter to set all rows in false\n          var xpathExclusiveFilter = properties.xpath + \"[\" + xpath + \"=true].\" + xpath;\n          renderValues[xpathExclusiveFilter] = false;\n        }\n      }\n    }\n\n    for (var id in self.changes) {\n      // Dont collect data from totalizers \n      if (id != \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\n            var value = self.changes[id][columnXpath];\n\n            renderValues[xpath] = value;\n          }\n        }\n      }\n\n      // Clean changes \n      keysToDelete.push(id);\n\n    }\n    //If any exclusive check is true, set the new value in renderValues. DON'T CHANGE CODE ORDER\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          var checkedObject = self.exclusiveChanges[xpath];\n          if (checkedObject && checkedObject.value) {\n            var columnSimpleXpathEnabled = properties.xpath + self.buildCellXpathFilter(checkedObject.key) + \".\" + xpath;\n            renderValues[columnSimpleXpathEnabled] = checkedObject.value;\n          }\n        }\n      }\n    }\n\n    // Clean changes array in order to prevent duplicate data\n    // when execute SUBMITDATA in multiaction, that make and error\n    // in circular dependencies, specially when we add inline record\n    $.each(keysToDelete, function (key, v) {\n      delete self.changes[v];\n    });\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (!$.isEmptyObject(self.changes)) {\n      result.push(true);\n      return true;\n    } else {\n      if (!$.isEmptyObject(self.exclusiveChanges)) {\n        result.push(true);\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  /*\r\n      *   Check if a column data can be sent to the server\r\n      */\n  canColumnBeSent: function canColumnBeSent(id, columnXpath) {\n    var self = this,i,j,xpath;\n    for (i in self.columns) {\n      if (self.columns.hasOwnProperty(i)) {\n        var column = self.columns[i];\n        if (column.properties.type !== \"columnUserfield\") {\n          if (column.properties.xpath == columnXpath) {\n            var cellOverride = self.getCellOverride(id, column.columnIndex - 1);\n            return column.canBeSent(id, cellOverride);\n          }\n        } else {\n          for (j in column.properties) {\n            if (column.properties.hasOwnProperty(j)) {\n              if (Object.prototype.toString.apply(column.properties[j]) === \"[object String]\") {\n                xpath = column.properties[j].substr(column.properties[j].lastIndexOf(\".\") + 1);\n                if (xpath === columnXpath) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n\n      }\n    }\n\n    return false;\n  },\n  /* \r\n      *  Method to determine if the render value can be sent to the server or not\r\n      */\n  canBeSent: function canBeSent() {\n    var self = this;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n\n    // The render can be sent if it is \"display only\" and inline Edit is available\n    if (!displayOnly && (properties.inlineEdit || properties.inlineAdd || !$.isEmptyObject(self.changes))) {\n      return true;\n    }\n    return false;\n  },\n  /*\r\n      *   Return the value for a requested cell\r\n      */\n  getCellValue: function getCellValue(key, xpath) {\n    var self = this;\n    var data = self.properties.data.rows;\n    for (var i = 0; i < data.length; i++) {\n      if (data[i][0] == key) {\n        for (var j = 0; j < self.columns.length; j++) {\n          if (self.columns[j].properties.xpath == xpath) {\n            var result = data[i][j + 1];\n            return result;\n          }\n        }\n      }\n    }\n    return null;\n  },\n  /*\r\n      *\r\n      */\n  getCellCurrentValue: function getCellCurrentValue(key, xpath) {\n    var self = this;\n\n    var control = self.getControlCell(key, xpath);\n    if (control && typeof control.getValue === \"function\") {\n      return control.getValue();\n    }\n    return null;\n  },\n  /*\r\n      *   Gets control\r\n      */\n  getControlCell: function getControlCell(key, xpath) {\n    var self = this;\n    var control = null;\n    if (typeof self.columns != \"undefined\")\n    for (var j = 0; j < self.columns.length; j++) {\n      if (\n      self.columns[j].properties.xpath == xpath ||\n      self.columns[j].properties.id == xpath ||\n      self.columns[j].properties.xpath + \".\" + self.columns[j].properties.id == xpath)\n      {\n        control = self.columns[j].getDecorated(key);\n        break;\n      }\n    }\n\n\n    return control;\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /*\r\n      *   Fetch the data again and updates the content\r\n      */\n  refresh: function refresh() {\n  },\n  /*\r\n      *   Sets an error on the cell\r\n      */\n  setError: function setError(key, columnXpath) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a cell\r\n      */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n  },\n  /*\r\n      *  Changes the required for cell\r\n      */\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the editability for a cell\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n  },\n  /*\r\n      *  Refresh behaviors of cell\r\n      */\n  changeCellProperties: function changeCellProperties(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the max value for a cell\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the min value for a cell\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n\n  },\n\n  /*\r\n     *   Changes the editability for a column\r\n     */\n  changeColumnEditability: function changeColumnEditability(xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a column\r\n      */\n  changeColumnVisibility: function changeColumnVisibility(xpath, argument) {\n  },\n  /*\r\n      *   Changes the required for a column\r\n      */\n  changeColumnRequired: function changeColumnRequired(xpath, argument) {\n  },\n\n  /*\r\n      *  Clean data of cell\r\n      */\n  cleanCellData: function cleanCellData(key, xpath) {\n  },\n\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var control = self.getControl();\n\n    self.saveGrid().done(function () {\n      var tmpEditable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n      // Clears control\n      control.empty();\n\n      var originalProperties = self.originalProperties;\n\n      $.extend(self.properties, self.initEditabilityProperties(\n      tmpEditable,\n      originalProperties.allowEdit,\n      originalProperties.inlineEdit,\n      originalProperties.withEditForm),\n      self.initAddAndDeleteProperties(\n      tmpEditable,\n      originalProperties.allowAdd,\n      originalProperties.inlineAdd,\n      originalProperties.allowDelete));\n\n\n      self.properties.editabilityEnabled = self.properties.editabilityEnabled || self.properties.editable;\n\n      // argument because it is necessary to propagate the default value to the column controls\n      if (!tmpEditable) {\n        self.changeColumnsEditability(false);\n      } else if (self.properties.allowEdit && self.properties.inlineEdit) {\n        self.changeColumnsEditability(argument);\n      }\n\n      if (typeof self.internalRenderControl == \"function\") {\n        $.when(self.internalRenderControl()).done(function (html) {\n          control.append(html);\n          self.postRenderElement(self.element);\n        });\n      }\n    });\n\n  },\n\n  saveGrid: function saveGrid() {\n    var self = this;\n    var defer = $.Deferred();\n\n    var rows = $(\"[data-bizagi-component=rows]\", self.element).find(\"[data-new-row=true]\");\n\n    if (rows.length > 0) {\n      var newRows = $.map(rows, function (row, i) {\n        return $(row).data(\"business-key\");\n      });\n\n      self.saveInlineAddedRows(newRows).done(function () {\n        $.when(self.saveRows()).done(function () {\n          self.refresh();\n          defer.resolve();\n        });\n      });\n    } else {\n      defer.resolve();\n    }\n\n    return defer.promise();\n  },\n\n  changeColumnsEditability: function changeColumnsEditability(value) {\n    var self = this;\n    var columns = self.columns || [];\n\n    $.each(columns, function (i, column) {\n      column.properties.editable = value == \"Default\" ? column.originalProperties.editable : bizagi.util.parseBoolean(value);\n    });\n  },\n\n  /**\r\n      *   Refresh behaviors of cell\r\n      */\n  refreshCell: function refreshCell(params) {\n    var self = this;\n    var properties = self.properties;\n    var key = params.key;\n    var column = params.column;\n    var xpathContext = params.xpathContext !== \"\" ? params.xpathContext + \".\" + self.properties.xpath + self.buildCellXpathFilter(key) : self.properties.xpath + self.buildCellXpathFilter(key);\n    var cell = self.getControlCell(key, params.column);\n    var form = self.getFormContainer();\n    var idForm = form.properties.id;\n\n    if (!cell) {\n      return;\n    }\n\n    // Execute personalized stuff before to refresh it\n    cell.beforeToRefresh();\n\n    // Call service\n    return $.when(self.dataService.multiaction().refreshGridCell({\n      idRender: properties.id,\n      column: cell.properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: xpathContext,\n      idForm: idForm,\n      typeRender: bizagi.util.normalizeType(cell.properties.type) })).\n    done(function (data) {\n      // Extract values\n      var getDepthData = function getDepthData(target) {\n        if (target && _typeof(target) == \"object\" && target.length >= 1) {\n          return target[0].length >= 1 ? target[0][0] : target[0];\n        }\n        return \"\";\n      };\n      var newValue = getDepthData(data.rows);\n      var editable = getDepthData(data.editable);\n      if (!bizagi.util.isBoolean(editable)) {\n        editable = editable || true;\n      }\n      var visible = getDepthData(data.visible);\n      if (!bizagi.util.isBoolean(visible)) {\n        visible = visible || true;\n      }\n\n      // Change Visibility & Editability\n      self.changeCellVisibility(key, column, visible);\n      self.changeCellEditability(key, column, editable);\n\n      // Change control value\n      var cellValue = cell.formatValue(newValue);\n\n      cell.setValue(cellValue);\n      cell.setDisplayValue(cellValue);\n\n      // Trigger grid change\n      self.triggerRenderChange({ key: key, column: column, changed: false });\n\n      if (bizagi.override.restoreAppearanceAfterRefresh) {\n        cell.restoreCellAppearance();\n      }\n\n      // Update the affected cell manually after a refresh\n      //TODO:temporary solution\n      //review the DRAGON-5982 \n      if (cell.column != undefined && bizagi.util.detectDevice() == \"desktop\") {\n        self.updateAffectedCellManually(key, cellValue, cell.column.columnIndex);\n      }\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh({ action: \"refreshCell\" });\n    });\n  },\n\n  /*\r\n      *   Triggers the render change event\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    // Property to verify exporting updated grids\n    if (!bizagi.util.isEmpty(params) && params.changed != false)\n    self.properties.canBeExported = false;\n    self.triggerHandler(\"renderchange\", {\n      render: self,\n      surrogateKey: params.key,\n      column: params.column,\n      changed: params.changed,\n      rowDeleted: params.rowDeleted,\n      pressed: params.pressed });\n\n  },\n\n  /*\r\n      *   Validate the grid\r\n      */\n  validate: function validate() {\n    this.isValid([]);\n  },\n  /* \r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var bValid = true;\n\n    // Clear error message\n    self.hasErrors = false;\n    self.setValidationMessage(\"\");\n\n    // Check for required columns and null values\n    if (self.properties.data && self.properties.data.rows) {\n      var newRows = self.getDataNewRows();\n      // Preserve elements in data.rows\n      // Check required\n      if (newRows.length == 0 && bizagi.util.parseBoolean(self.properties.required)) {\n        if (!self.hasValue()) {\n          message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({\n            xpath: self.properties.xpath,\n            message: message });\n\n          bValid = false;\n        }\n      }\n\n      var data = $.merge($.merge([], self.properties.data.rows), newRows);\n\n      for (var i = 0; i < self.columns.length; i++) {\n        var messages = [];\n        var uniqueMessages = {};\n\n        for (var j = 0; j < data.length; j++) {\n          var value = data[j][i + 1];\n          var key = data[j][0];\n          var xpath = self.columns[i].properties.xpath;\n          if (self.changes[key] !== undefined && self.changes[key][self.columns[i].properties.xpath] !== undefined) {\n            value = self.changes[key][self.columns[i].properties.xpath];\n          }\n\n          // Check if the column is valid\n          var valueValid = self.columns[i].isValueValid(key, value, messages, self.getCellOverride(key, i));\n          if (!valueValid) {\n            bValid = false;\n\n            self.hasErrors = true;\n            self.setError(key, self.columns[i].properties.xpath);\n          }\n        }\n        for (var k = 0, messagesLength = messages.length; k < messagesLength; k++) {\n          if (uniqueMessages[messages[k]] == null) {\n            uniqueMessages[messages[k]] = messages[k];\n          }\n        }\n\n        if (messages.length > 0) {\n          var gridValidationMessage = self.getResource(\"render-grid-validation\").replaceAll(\"#grid#\", self.properties.displayName);\n          for (key in uniqueMessages) {\n            invalidElements.push({\n              xpath: self.properties.xpath,\n              message: gridValidationMessage + \" \" + key });\n\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n  /*\r\n      *   Enables submit on change feature for the current render\r\n      */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    // Don't do anything we will trigger submit on change manually only when the grid add or edit form has been edited   \n  },\n  /*\r\n      *   Get cell override\r\n      */\n  getCellOverride: function getCellOverride(key, column) {\n    var self = this;\n\n    // Convert to numbers\n    column = Number(column);\n\n    // Find overrides\n    var columnProperties = self.columns[column].properties;\n    if (!self.cellOverrides[key])\n    self.cellOverrides[key] = {};\n    if (!self.cellOverrides[key][column]) {\n      self.cellOverrides[key][column] = {\n        visible: columnProperties.columnVisible && columnProperties.visible,\n        editable: columnProperties.editable,\n        required: columnProperties.required };\n\n    }\n\n    return self.cellOverrides[key][column];\n  },\n\n  /*\r\n      * Set cell overrides based on the data\r\n      */\n  setCellOverrides: function setCellOverrides(data, columns) {\n    var self = this;\n    var key;\n\n    // Init visibility overrides\n    if (data.visible) {\n      for (var i = 0, len = data.visible.length; i < len; i++) {\n        key = data.visible[i][0];\n        for (var j = 0, len_v = data.visible[i].length; j < len_v; j++) {\n\n          // Skip key columns\n          if (j > 0) {\n            var columnVisible = self.getCellOverride(key, j - 1).visible;\n            self.cellOverrides[key][j - 1].visible = columnVisible ? bizagi.util.parseBoolean(data.visible[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init editability overrides\n    if (data.editable) {\n      for (var i = 0, len = data.editable.length; i < len; i++) {\n        key = data.editable[i][0];\n        for (var j = 0, len_v = data.editable[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0) {\n            var columnEditable = columns ? bizagi.util.parseBoolean(columns[j - 1].properties.editable) : true;\n            self.getCellOverride(key, j - 1).editable = columnEditable ? bizagi.util.parseBoolean(data.editable[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init required overrides\n    if (data.required) {\n      for (var i = 0, len = data.required.length; i < len; i++) {\n        key = data.required[i][0];\n        for (var j = 0, len_v = data.required[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0)\n          self.getCellOverride(key, j - 1).required = bizagi.util.parseBoolean(data.required[i][j]);\n        }\n      }\n    }\n  },\n  /*\r\n      *   Returns the row indexes for the data\r\n      */\n  getIndexes: function getIndexes() {\n    var self = this;\n    var data = $.merge(self.properties.data.rows, self.getDataNewRows());\n    return $.map(data, function (item, i) {\n      return item[0];\n    });\n  },\n  /**\r\n      *  Return object with value of all new records unsaved within the grid\r\n      *  @return {object} all new records\r\n      */\n  getDataNewRows: function getDataNewRows() {\n    var self = this;\n    var newRows = [];\n\n    if (_typeof(self.newRecords) == \"object\" && !$.isEmptyObject(self.newRecords)) {\n      $.each(self.newRecords, function (rowKey) {\n        var cellValue = [];\n        cellValue.push(rowKey);\n        for (var i = 0, length = self.columns.length; i < length; i++) {\n          cellValue.push(self.getCellCurrentValue(rowKey, self.columns[i].properties.xpath));\n        }\n        // Add cell value row to new rows\n        newRows.push(cellValue);\n      });\n    }\n    return newRows;\n  },\n\n  /**\r\n      * Return the object with the required url to access the exported grid to the desired format\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getGridExportFile: function getGridExportFile(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getGridExportFile({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"\",\n      idPageCache: properties.idPageCache,\n      disposition: params.disposition,\n      exportType: params.exportType,\n      sort: properties.sort,\n      idForm: self.getFormContainer().properties.id }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  submitForGridChange: function submitForGridChange() {\n    var self = this;\n    return self.submitOnChange(null, false);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutColumn = setTimeout(function () {\n      if (self.columns) {\n        $.each(self.columns, function (i, column) {\n          column.dispose();\n        });\n      }\n      clearTimeout(timeOutColumn);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  getEnabledChecks: function getEnabledChecks(params) {\n    var self = this;\n    var properties = self.properties;\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      rows: properties.rowsPerPage,\n      xpathfilter: params.xpath });\n\n    // Default ajax call\n    var defer = new $.Deferred();\n    // Resolve with remote data\n    self.dataService.multiaction().getGridDataExclusivesSelected(params).done(function (data) {\n      // Resolve with fetched data\n      properties.page = data.page;\n      properties.records = data.records;\n      properties.totalPages = data.totalPages;\n\n      // Check RTL\n      if (self.isRTL()) {\n        data.rows = self.changeOrderData(data.rows);\n      }\n      defer.resolve(data);\n    });\n    return defer.promise();\n  },\n\n  buildCellXpathFilter: function buildCellXpathFilter(key) {\n    if (bizagi.util.isNumeric(key)) return \"[id=\" + key + \"]\";\n    return \"[id='\" + key + \"']\";\n  },\n\n  cleanNewRecords: function cleanNewRecords() {\n    // Mark it as saved\n    this.newRecords = {};\n  },\n\n  /**\r\n      * Set inline added new row as saved, removing data new-row attribute\r\n      * @param key\r\n      */\n  setRowAsSaved: function setRowAsSaved(key) {\n    var $control = this.getControl();\n    var $row = $(\"[data-bizagi-component=rows]\", $control).\n    find(\"tr[data-business-key=\" + key + \"]\");\n\n    $row.attr(\"data-new-row\", 'false');\n  },\n\n  /**\r\n      *\r\n      * Customizes render background color\r\n      *\r\n      * This method is called when the backgroud color is setted by Form Designer\r\n      *\r\n      * @param color\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    this._super(color);\n\n    var control = this.getControl();\n\n    control.find(\".bz-rn-grid-header-title, .bz-rn-grid-header-title-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    control.find(\".bz-rn-grid-container-foother, .bz-rn-grid-container-foother-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    return this;\n  },\n\n  /**\r\n      * Check has header format\r\n      * @returns {boolean}\r\n      */\n  hasColorHeader: function hasColorHeader() {\n    var headerFormat = this.properties.headerFormat || {};\n\n    return headerFormat ? !bizagi.util.isEmpty(headerFormat.color) : false;\n  },\n\n  /**\r\n      * Check if the orientation is RTL\r\n      * @param parent\r\n      * @param orientation\r\n      * @returns {*|boolean|boolean}\r\n      */\n  isRTLOrientation: function isRTLOrientation(parent, orientation) {\n    if ((!orientation || orientation === \"auto\") && parent) {\n      return this.isRTLOrientation(parent.parent, parent.properties.orientation);\n    }\n\n    return /^rtl$/i.test(orientation);\n  },\n\n  /**\r\n      * Check If has changes for send to server\r\n      * @returns {boolean}\r\n      */\n  canBeExport: function canBeExport() {\n    var self = this;\n\n    // Check If normal column-control has changes\n    for (var id in self.changes) {\n      // Don't collect data from totalizers\n      if (id !== \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) return false;\n        }\n      }\n    }\n\n    // Check If exclusive-check control has changes\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {\n        // Brings the xpath columns with changes\n        if (self.exclusiveChanges[xpath] && self.enabledChecks[xpath]) return false;\n      }\n    }\n\n    // Don't have changes\n    return true;\n  },\n\n  /**\r\n      * Get exclusive-check change by Row\r\n      * @param idRow\r\n      * @returns {{}}\r\n      */\n  getExclusiveChangeByRow: function getExclusiveChangeByRow(idRow) {\n    var value = {};\n\n    for (var xpath in this.enabledChecks) {\n      if (this.enabledChecks.hasOwnProperty(xpath)) {\n        var obj = (this.enabledChecks[xpath] || []).\n        find(function (el) {\n          return el.id == idRow && el.changed;\n        });\n\n        if (obj) {\n          value[xpath] = obj.value;\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Check If xpath or id of column is valid\r\n      * @param columnXpath\r\n      * @param columnId\r\n      * @param xpath\r\n      * @returns {boolean}\r\n      */\n  isCurrentGridCell: function isCurrentGridCell(columnXpath, columnId, xpath) {\n    return columnXpath === xpath || columnId === xpath || columnXpath + \".\" + columnId === xpath;\n  },\n\n  /**\r\n      * Get index for current cell\r\n      * @param xpath\r\n      * @returns {number|number}\r\n      */\n  getIndexForCurrentCell: function getIndexForCurrentCell(xpath) {\n    var self = this;\n\n    return (self.columns || []).findIndex(function (cell) {\n      return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n    }) || 0;\n  },\n\n  /**\r\n      * Check if it is a Summary o Global Form\r\n      * @returns {*|boolean}\r\n      */\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var form = this.getFormContainer();\n    var properties = form && form.properties || {};\n\n    return form && [\"SummaryForm\", \"GlobalForm\"].includes(properties.typeForm);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Label Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for labels\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.label\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // A label itself is never \"required\" as other controls\n    var properties = self.properties;\n    properties.required = false;\n\n    // Set properties\n    self.properties.displayType = \"label\";\n    //self.properties.labelAlign = self.originalProperties.labelAlign || \"left\";\n    self.properties.displayName = data.properties.displayName || \"\";\n\n    if (bizagi.util.parseBoolean(self.properties.allowDinamiclabel)) {\n      this.properties.displayName = data.properties.displayName || bizagi.localization.getResource(\"render-label-default-display-name\");\n    }\n\n    self.bindingValue();\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    //this.changeLabelAlign(this.properties.labelAlign || \"left\");\n\n    if (typeof this.configureHelpText == \"function\")\n    this.configureHelpText();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    this.changeLabelAlign(this.properties.labelAlign || \"left\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required label\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  bindingValue: function bindingValue() {\n    var self = this;\n\n    if (self.properties.allowDinamiclabel && self.properties.value) {\n      if (_typeof(self.properties.value) === \"object\" && self.properties.value[0]) {\n        self.properties.displayName = self.properties.value[0].value;\n      } else if (typeof self.properties.value === \"string\" && self.properties.value !== \"\") {\n        self.properties.displayName = self.performLabelLineBreak(self.properties.value);\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    //Labels never change\n    return false;\n  },\n\n  /**\r\n      * Process the break line character\r\n      * @param value\r\n      * @returns {string}\r\n      */\n  performLabelLineBreak: function performLabelLineBreak(value) {\n    var label = value || \"\";\n\n    return label.replace(/\\\\n/gm, \"\\n\");\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Search Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for search renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.search\", {}, {\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    var submitOnChange = data.properties.submitOnChange;\n    if (self.getMode() === \"execution\") {\n      // Normalize submitOnChange property\n      // QAF-3297 - Compatibility for old versions of advanced search where the \"submitOnChange\" property default is true\n      // New \"submitVersion\" property default is 2\n      if (data.properties.advancedSearch) {\n        submitOnChange = typeof submitOnChange !== \"undefined\" ? submitOnChange : (data.properties.submitVersion || 1) > 1 ? false : true;\n      }\n    }\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.submitOnChange = bizagi.util.parseBoolean(submitOnChange) || false;\n\n    properties.searchForms = properties.searchForms || [];\n\n    // Default maxRecords is 20\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.advancedSearch = bizagi.util.parseBoolean(properties.advancedSearch) === null ? false : bizagi.util.parseBoolean(properties.advancedSearch);\n    properties.allowSuggest = bizagi.util.parseBoolean(properties.allowSuggest) !== null ? bizagi.util.parseBoolean(properties.allowSuggest) : false;\n    properties.allowFullSearch = properties.allowFullSearch || false;\n    properties.allowAdd = bizagi.util.parseBoolean(properties.allowAdd) || false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowTyping) !== null ? bizagi.util.parseBoolean(properties.allowTyping) : false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowSuggest) ? true : properties.allowTyping;\n    properties.allowClear = bizagi.util.parseBoolean(properties.allowClear) !== null ? bizagi.util.parseBoolean(properties.allowClear) : false;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // This length defines the behavior of the suggest, 2 characters are used by default meaning after 2 characters are written the search will take place\n    properties.searchLength = properties.searchLength || 2;\n\n    // Expire local storage cache\n    properties.enableLocalStorage = false;\n    properties.expireCache = 1000 * 60 * 15; // 15 minutes\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"search\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      allowTyping: properties.allowTyping,\n      advancedSearch: properties.advancedSearch,\n      allowSuggest: properties.allowSuggest,\n      editable: properties.editable,\n      allowClear: properties.allowClear,\n      hasValue: self.hasValue() });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || form.params.contexttype || false;\n\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n\n    params.h_contexttype = self.properties.enableQuerySuggestBehavior ? \"metadata\" : params.h_contexttype;\n\n    // QA-471 When the contexttype is metadata it does not send xpathcontext\n    if (params && params.h_contexttype && params.h_contexttype === 'metadata') {\n      properties.xpathContext = '';\n    }\n\n    // BA35025 - JFA\n    if (properties.term.indexOf(\"\\'\") > -1) {\n      var regexC = new RegExp(\"\\'\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\\'\\\\'\");\n    }\n\n    // QAF-6448 - JFA\n    if (properties.term.indexOf(\"\\\"\") > -1) {\n      var regexC = new RegExp(\"\\\"\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\"\");\n    }\n\n    // Resolve with remote data\n    self.dataService.multiaction().getSearchData({\n      url: properties.dataUrl,\n      contexttype: params.h_contexttype,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.allowFullSearch ? \"%\" + properties.term : properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise(defer);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value\r\n      * @param {} triggerEvents\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    self._super(value, triggerEvents);\n\n    if (value != undefined) {\n      this.value = value;\n      this.selectedValue = value.label;\n    } else {\n      this.value = null;\n      this.selectedValue = null;\n    }\n  },\n\n  /* Maps the value, when this one comes from actions*/\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var xpath = self.properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos\n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) == \"object\" && value.id === undefined)\n        return;\n        // Add the value to the server\n        renderValues[xpath] = value;\n      }\n    }\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {}\r\n      */\n  submitData: function submitData() {\n    var self = this;\n    var data = {};\n\n    // Add current data\n    if (!self.grid) {\n      data[self.properties.xpath] = self.getValue();\n    }\n\n    // Executes submit on change\n    self.submitOnChange(data, undefined, false);\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    return this._super(invalidElements);\n  },\n\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (typeof value == \"undefined\" || value == null) return false;\n\n    if (_typeof(value) === \"object\" && value.id !== \"\" && typeof value.id !== \"undefined\") return true;\n    return !bizagi.util.isEmpty(value);\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Render Layout Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Andrés Fernando Muñoz\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define a base layout render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n$.Class.extend(\"bizagi.rendering.layoutRender\", {}, {\n  /*\r\n                                                       *   Returns the html templated element\r\n                                                       */\n  renderElement: function renderElement(template) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    template = template || \"render-layout\";\n    var renderTemplate = self.renderFactory.getTemplate(template);\n\n    // Resolve render label\n    var label = properties.displayName;\n\n    if (typeof label == \"string\") {\n      label = bizagi.util.encodeString(label);\n    }\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      hide: properties.hide });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = self.element;\n    }\n    if (!self.control || self.control.length == 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  /*\r\n     * Customizes the font italic style *\r\n     */\n  changeFontItalic: function changeFontItalic(italic) {\n    if (bizagi.util.parseBoolean(italic)) {\n      this.getControl().css(\"font-style\", \"italic\", \"!important\");\n    } else {\n      this.getControl().css(\"font-style\", \"normal\", \"!important\");\n    }\n    return this;\n  },\n\n  /*\r\n     * Customizes the font underline\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline) {\n    var valueFormat = this.properties.valueFormat || {},\n    valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n\n    if (bizagi.util.parseBoolean(underline)) {\n      this.getControl().css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n    } else {\n      this.getControl().find(\"*\").each(function (i, element) {\n        $(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n      });\n    }\n\n    return this;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render HandSignature Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for HandSignature control\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.handSignature\", {}, {\n\n  BASE_IMAGE: \"data:image/png;base64,\",\n  EMPTY_IMAGE: \"R0lGODlhAQABAIAAAP7//wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\",\n  EMPTY_VALUE: \"\",\n  DELAY_TO_SAVE: 1000,\n\n  // Fallback if resources\n  RESOURCES_FALLBACK: {\n    DONE_BUTTON: \"Done\",\n    EDIT_BUTTON: \"Edit\",\n    CLEAR_BUTTON: \"Clear\",\n    UPLOAD_SUCCESS: \"Your signature have been uploaded successfully\",\n    UPLOAD_ERROR: \"The signature have not been uploaded. Try again\",\n    TITLE_DONE: \"Click \\\"Done\\\" to upload the signature\",\n    TITLE_DRAW: \"Draw here your signature\",\n    TITLE_EDIT: \"Click \\\"Edit\\\" to start drawing\" },\n\n\n  // Type of state\n  STATE_TYPE: {\n    edit: 1,\n    draw: 2,\n    done: 3,\n    success: 4,\n    error: 5 },\n\n\n  /**\r\n                 * Whether or not is plugin initialized\r\n                 * @var isOfflineForm boolean\r\n                 */\n  pluginInitialized: false,\n\n  saveDeferred: null,\n  saveTimestamp: 0,\n\n  /**\r\n                     * Update or init the element data\r\n                     * @param data\r\n                     */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.editable = bizagi.util.parseBoolean(properties.editable) === true;\n    properties.addUrl = properties.addUrl || this.dataService.serviceLocator.getUrl(\"form-submit-data-upload\");\n    properties.deleteUrl = properties.deleteUrl || this.dataService.serviceLocator.getUrl(\"render-upload-delete-url\");\n    properties.isChanged = false;\n\n    this.currentState = this.STATE_TYPE.edit;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"hand-signature\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      isDesign: !self.isExecutionMode(),\n      render_signature_action_edit: self.getResourceByKey(\"render-signature-action-edit\", self.RESOURCES_FALLBACK.EDIT_BUTTON),\n      render_signature_action_done: self.getResourceByKey(\"render-signature-action-done\", self.RESOURCES_FALLBACK.DONE_BUTTON),\n      render_signature_action_clear: self.getResourceByKey(\"render-signature-action-clear\", self.RESOURCES_FALLBACK.CLEAR_BUTTON) });\n\n  },\n\n  /**\r\n      * After rendering element\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    // Apply plugin\n    if (this.isExecutionMode()) {\n      var $container = self.getSignatureContainer();\n\n      // Wait until current element is rendered\n      self.setResizeObserver($container, function (initialized) {\n        self.renderSignature();\n        self.setState(self.currentState);\n\n        if ([self.STATE_TYPE.draw, self.STATE_TYPE.done].includes(self.currentState)) {\n          $container.BzjSignature(\"enable\");\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Apply plugin\n    if (this.isExecutionMode()) {\n      var $container = self.getSignatureContainer();\n\n      // Wait until current element is rendered\n      self.setResizeObserver($container, function () {\n        self.renderSignature();\n      });\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"hand-signature-readonly\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      isDesign: !self.isExecutionMode() });\n\n  },\n\n  setData: function setData(value) {\n    var self = this;\n    var previousValue = self.getData();\n\n    if (bizagi.util.isEmpty(value)) {\n      this.properties.binaryValue = null;\n    } else {\n      if (value instanceof Blob) {\n        this.properties.binaryValue = value;\n      } else {\n        this.properties.binaryValue = bizagi.util.b64toBlob(value, \"image/png\");\n      }\n    }\n\n    if (previousValue != this.properties.binaryValue) {\n\n      if (self.properties.required && self.isExecutionMode()) {\n        var isValidField = !self.checkRequired([]);\n        self.changeRequiredLabel(isValidField);\n      }\n\n      if (this.properties.isChanged) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  getData: function getData() {\n    return this.properties.binaryValue || [];\n  },\n\n  getBase64: function getBase64() {\n    return this.properties.base64 || \"\";\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.properties.value || [];\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      */\n  hasValue: function hasValue() {\n    if (!this.pluginInitialized) {\n      return !bizagi.util.isEmpty(this.properties.value);\n    } else {\n      var value = this.getData();\n      return !bizagi.util.isEmpty(value);\n    }\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Don't check non-visible renders\n    if (bizagi.util.parseBoolean(self.properties.visible) === false) {\n      return true;\n    }\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (self.properties.required && !self.hasValue()) {\n      var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n      invalidElements.push({ xpath: self.properties.xpath, message: message });\n      return false;\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    var form = this.getFormContainer();\n    if (!form.isOfflineForm) return true;\n    return this.properties.isChanged;\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(dataFile) {\n    var data = {\n      url: this.properties.addUrl,\n      formData: this.buildAddFileParams(dataFile) };\n\n\n    return this.dataService.processUploadFile(data);\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var properties = self.properties;\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(prefix + \"xpath\", properties.xpath);\n    formData.append(prefix + \"idRender\", properties.id);\n    formData.append(prefix + \"xpathContext\", properties.xpathContext);\n    formData.append(prefix + self.Class.BA_PAGE_CACHE, properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(prefix + \"action\", \"savefile\");\n\n    var fileName = \"signature_\" + bizagi.util.randomNumber() + \".png\";\n    formData.append(self.properties.xpath, dataFile, fileName);\n\n    if (properties.contexttype) {\n      formData.append(prefix + \"contexttype\", properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl() {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var url = \"\";\n\n    if (!this.isExecutionMode()) return $.Deferred().resolve(url).promise();\n\n    var parameters = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: \"fileFullContent\",\n      queue: \"onlineimages\",\n      sessionId: form.properties.sessionId,\n      contexttype: properties.contexttype || undefined,\n      dataType: \"text\" };\n\n\n    if (isVersion2OrSuperior) {\n\n      if (bizagi.util.isEmpty(self.properties.value) && !self.hasValue()) return $.Deferred().resolve(\"\").promise();\n\n      parameters.property = \"fileBinaryContent\";\n      parameters.sessionId = form.properties.sessionId;\n\n      return self.dataService.downloadFile(parameters).\n      then(function (blob) {\n        self.setData(blob);\n        if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n        return bizagi.util.blobTob64(blob, false);\n      }).\n      then(function (base64) {\n        return bizagi.util.getDataUrl(base64, properties.url);\n      });\n    }\n\n    return self.dataService.multiaction().getPropertyData(parameters, \"text\").\n    then(function (data) {\n      if (data.charAt(0) === \"\\\"\") data = data.slice(1, -1);\n      if (data !== \"\") url = self.BASE_IMAGE + data;\n      self.setData(bizagi.util.b64toBlob(data));\n      return url;\n    });\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var error_obj = bizagi.util.getErrorFormatted(error);\n    var message = error_obj;\n\n    if (typeof error_obj === \"undefined\" || error_obj && !error_obj.message) {\n      message = Object.assign({}, _typeof(error_obj) === \"object\" ? error_obj : {}, {\n        \"message\": bizagi.localization.getResource(\"workportal-general-error\") });\n\n    }\n\n    this.getFormContainer().failHandler(message);\n  },\n\n  /**\r\n      * Save data control\r\n      * @returns {*}\r\n      */\n  saveSignature: function saveSignature(dataImage) {\n    var self = this;\n\n    return $.when(self.postSignature(dataImage)).\n    then(function (base64) {\n      self.setData(base64);\n      self.properties.url = bizagi.util.getDataUrl(base64, self.EMPTY_VALUE);\n      self.executePartialSaveForm();\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    });\n  },\n\n  executePartialSaveForm: function executePartialSaveForm() {\n    var self = this;\n    var data = {};\n    var form = this.getFormContainer();\n\n    if (!form.isOfflineForm) return;\n    self.collectDataToSave(data);\n    form.partialSubmitFormOffline(data).then(function () {\n      //console.log(\"Signature saved\");\n    });\n  },\n\n  /**\r\n      * Delete image\r\n      * @returns {*}\r\n      */\n  deleteImage: function deleteImage() {\n    return this.dataService.deleteImage({\n      url: this.properties.deleteUrl,\n      idRender: this.properties.id,\n      xpath: this.properties.xpath,\n      xpathContext: this.properties.xpathContext,\n      idPageCache: this.properties.idPageCache,\n      contexttype: this.properties.contexttype });\n\n  },\n\n  /**\r\n      * Execute upload image\r\n      * @param dataImage\r\n      * @returns {*}\r\n      */\n  postSignature: function postSignature(dataImage) {\n    var signature = dataImage.replace(/^data:image\\/(png|jpg|jpeg);base64,/, \"\");\n    return this.postSignatureOnline(signature);\n  },\n\n  /**\r\n      * Execute upload image for online mode\r\n      * @param signature\r\n      * @returns {*}\r\n      */\n  postSignatureOnline: function postSignatureOnline(signature) {\n    var self = this;\n    var dataFile = self.getDataFileFromSignature(signature);\n\n    if (bizagi.util.isEmpty(dataFile)) {\n      return self.getData();\n    }\n\n    return self.processUploadFile(dataFile).then(function () {\n      self.properties.isChanged = true;\n      return signature;\n    });\n  },\n\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var $control = this.getControl();\n    $control.empty();\n  },\n\n  // region // #region METHODS TO OFFLINE\n\n  /**\r\n   * Create an image offline\r\n   * @param path File in Browser or Path in Mobile Devices\r\n   * @param promise Promise to be resolved when save is completed\r\n   */\n  saveImageOffline: function saveImageOffline(path) {\n    var self = this;\n    var id = self.buildOfflineImageId();\n\n    return $.when(function () {\n      return path;\n    }()).then(function (blobImage) {\n      // Save the image as attachment\n      var formParams = self.getFormParams();\n      var parameters = {\n        idCase: formParams.idCase,\n        idWorkitem: formParams.idWorkitem,\n        id: id,\n        operationType: \"edition\",\n        offlineType: formParams.offlineType };\n\n\n      return self.dataService.saveOfflineImage(parameters, blobImage);\n    });\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectDataToSave: function collectDataToSave(renderValues) {\n    var self = this;\n    if (self.isOfflineForm && bizagi.util.isOfflineFormsV2Supported()) {\n      if (!self.properties.isChanged) return;\n\n      renderValues[self.properties.xpath] = {\n        offlineId: self.buildOfflineImageId(),\n        name: self.dataService.fileService.getOfflineImageName(self.getValue()),\n        isSignature: true };\n\n    }\n  },\n\n  /**\r\n      * This method allows wait until the signature is persisted to execute the form save \r\n      * @param {*} renderValues \r\n      * @returns \r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.saveTimestamp == 0) return;\n    var tmpTimeStamp = new Date().getTime() - self.saveTimestamp;\n\n    if (tmpTimeStamp < self.DELAY_TO_SAVE) {\n      var def = new $.Deferred();\n      setTimeout(function () {\n        $.when(self.saveDeferred).always(function () {\n          def.resolve();\n        });\n      }, self.DELAY_TO_SAVE + 10 - tmpTimeStamp);\n      renderValues.deferreds = renderValues.deferreds || [];\n      renderValues.deferreds.push(def.promise());\n    } else\n    if (self.saveDeferred) {\n      renderValues.deferreds = renderValues.deferreds || [];\n      renderValues.deferreds.push(self.saveDeferred.promise());\n    }\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @returns {*}\r\n      */\n  buildItemUrlOffline: function buildItemUrlOffline() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getFormParams();\n    var imageId = self.buildOfflineImageId();\n    var loadImageFromForm = !properties.isChanged;\n\n    var parameters = {\n      idCase: formParams.idCase,\n      idWorkitem: formParams.idWorkitem,\n      id: imageId,\n      offlineType: formParams.offlineType,\n      loadImageFromForm: loadImageFromForm };\n\n\n    return $.when(self.dataService.getOfflineImage(parameters, bizagi.util.db.AttachmentType.Blob)).\n    then(function (blob) {\n      self.setData(blob);\n      if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n      return bizagi.util.blobTob64(blob, false);\n    }).\n    then(function (base64) {\n      return bizagi.util.getDataUrl(base64, properties.url);\n    });\n  },\n\n  // endregion // #endregion\n\n  // region // #region UTILS TO CONTROL\n\n  /**\r\n   * Update actions\r\n   * @param state\r\n   */\n  setState: function setState(state) {\n    var self = this;\n    var $actions = $(\".bz-actions\", this.getControl());\n    var message = \"\";\n\n    self.currentState = state;\n\n    switch (state) {\n      case self.STATE_TYPE.edit:\n        message = self.getResourceByKey(\"render-signature-title-edit\", self.RESOURCES_FALLBACK.TITLE_EDIT);\n        break;\n      case self.STATE_TYPE.draw:\n        message = self.getResourceByKey(\"render-signature-title-draw\", self.RESOURCES_FALLBACK.TITLE_DRAW);\n        break;\n      case self.STATE_TYPE.done:\n        message = self.getResourceByKey(\"render-signature-title-done\", self.RESOURCES_FALLBACK.TITLE_DONE);\n        break;}\n\n\n    // Update message\n    $(\".bz-actions__status\", $actions).text(message);\n\n    // Update actions\n    self.setActions(state);\n  },\n\n  /**\r\n      * Update action state\r\n      * @param state\r\n      */\n  setActions: function setActions(state) {\n    var self = this;\n    var $actions = $(\".bz-actions\", this.getControl());\n\n    if ([self.STATE_TYPE.draw].includes(state)) {\n      // Hidden action\n      $actions.find(\"[data-action='edit']\").addClass(\"bz-hidden\");\n\n      // Show actions\n      $actions.find(\"[data-action='clear']\").removeClass(\"bz-hidden\");\n      $actions.find(\"[data-action='save']\").removeClass(\"bz-hidden\");\n    } else if ([self.STATE_TYPE.edit].includes(state)) {\n      // Show actions\n      $actions.find(\"[data-action='edit']\").removeClass(\"bz-hidden\");\n\n      // Hidden action\n      $actions.find(\"[data-action='clear']\").addClass(\"bz-hidden\");\n      $actions.find(\"[data-action='save']\").addClass(\"bz-hidden\");\n    }\n  },\n\n  buildOfflineImageId: function buildOfflineImageId() {\n    var self = this;\n    var form = self.getFormContainer();\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var isStartForm = !form.properties.isTaskForm;\n\n    return self.dataService.fileService.buildOfflineImageId(self.properties.value, self.properties.xpathContext, self.properties.xpath, isVersion2OrSuperior, isStartForm);\n  },\n\n  buildOfflineFileLoadingKey: function buildOfflineFileLoadingKey() {\n    var self = this;\n    var form = self.getFormContainer();\n    var idCase = form.getParams().idCase;\n    var idWorkitem = form.getParams().idWorkitem;\n\n    var key = idCase;\n    if (!bizagi.util.isEmpty(idWorkitem)) key += \"-\" + idWorkitem;\n    key += \"-\";\n    if (!bizagi.util.isEmpty(self.properties.xpathContext)) key += \"-\" + self.properties.xpathContext;\n    key += self.properties.xpath;\n\n    return key;\n  },\n\n  getDataFileFromSignature: function getDataFileFromSignature(signature) {\n    try {\n      var binary = atob(signature);\n      var array = bizagi.util.stringToByteArray(binary);\n\n      return new Blob([new Uint8Array(array)], { type: \"image/png\" });\n    } catch (e) {\n      return \"\";\n    }\n  },\n\n  setSignature: function setSignature($container) {\n    var url = this.properties && this.properties.url;\n\n    try {\n      if (!bizagi.util.isEmpty(url)) {\n        $container.BzjSignature(\"reset\");\n        $container.BzjSignature(\"setData\", url);\n      }\n    } catch (err) {\n    }\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the resize\r\n      * of a target element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setResizeObserver: function setResizeObserver($context, callbackFn) {\n    var self = this;\n    var initialWidth = 0;\n\n    var resizeObserver = new ResizeObserver(function (entries) {\n      var entry = entries[0];\n      if (entry.contentRect) {\n        if (initialWidth !== entry.contentRect.width && entry.contentRect.width !== 0) {\n          initialWidth = entry.contentRect.width;\n          if (typeof callbackFn === \"function\") {\n            callbackFn();\n          }\n        }\n      }\n    });\n\n    resizeObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Get container of control\r\n      * @param selectorClass\r\n      * @returns {*}\r\n      */\n  getSignatureContainer: function getSignatureContainer(selectorClass) {\n    var contextClass = selectorClass || \".bz-signature__container\";\n    return this.getSignatureContext(contextClass);\n  },\n\n  /**\r\n      * Get context of control\r\n      * @param selectorClass\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getSignatureContext: function getSignatureContext(selectorClass) {\n    var $control = this.getControl();\n    return $(selectorClass, $control);\n  }\n\n  // endregion // #endregion\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Column Decorator Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi UI Forms\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for Columns\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.columns.column\", {}, {\n  /*\r\n                                                                         *   Constructor\r\n                                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(this.properties));\n\n    this.decoratedClass = params.decorated;\n    this.data = params.data;\n    if (params.singleInstance) {\n      this.decorated = new this.decoratedClass({\n        data: this.data,\n        parent: this.parent,\n        renderFactory: this.renderFactory,\n        dataService: this.dataService });\n\n      this.decorated.getControl = this.getControl;\n      params.decorated = this.decorated;\n      this.decorated.properties.isColumn = true;\n    } else {\n      this.decorateRenders = [];\n    }\n    this.grid = params.parent;\n\n    // Set base column styles\n    var properties = this.properties;\n\n    properties.columnVisible = bizagi.util.parseBoolean(properties.columnVisible) != null ? bizagi.util.parseBoolean(properties.columnVisible) : true;\n    properties.align = properties.align || 'center';\n    properties.textFormat = properties.textFormat || {};\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.singleInstance = params.singleInstance;\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.showColumn = typeof properties.showColumn != \"undefined\" ? bizagi.util.parseBoolean(properties.showColumn) : true;\n    properties.isSortable = typeof properties.isSortable != \"undefined\" ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    // Define if it is editable or not        \n    try {\n      if (params.parent && typeof params.parent.properties.editable == \"boolean\" && !params.parent.properties.editable) {\n        properties.editable = false;\n      }\n    } catch (e) {\n    }\n\n    // Define if the column is readonly\n    this.readonly = properties.readonly !== undefined ? properties.readonly : false;\n    if (this.readonly) properties.editable = required = false;\n  },\n\n  /*\r\n     *   Return true if the column is read-only, so we can make a quick render\r\n     */\n  isReadonly: function isReadonly() {\n    return false;\n  },\n\n  /*\r\n     *   Method to retrieve the decorated control\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    return $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n  },\n  /*\r\n     *   Returns the decorated cell instance to use\r\n     */\n  getDecorated: function getDecorated(surrogateKey) {\n    var self = this;\n    var properties = self.properties;\n    if (properties.singleInstance) {\n      return self.decorated;\n    } else {\n      var decorated = self.decorateRenders[surrogateKey];\n      if (decorated == undefined) {\n        if (_typeof(self.decorateRenders) != \"object\") {\n          self.decorateRenders = [];\n        }\n        var instanceDecoratedClass = new this.decoratedClass({\n          data: bizagi.clone(this.data),\n          parent: this.parent,\n          renderFactory: this.renderFactory,\n          dataService: this.dataService });\n\n        decorated = instanceDecoratedClass;\n        self.decorateRenders[surrogateKey] = instanceDecoratedClass;\n\n        // Set surrogate key to all controls\n        decorated.surrogateKey = surrogateKey;\n\n        // Execute decorated overrides\n        self.applyOverrides(decorated);\n\n        var dataType = bizagi.util.normalizeType(decorated.properties.type);\n        // Also override setDisplayValue on summary row for non numeric columns\n        if (surrogateKey === \"summary\" && !/columnMoney/i.test(dataType) && !/columnNumber/i.test(dataType)) {\n\n          decorated.setDisplayValue = function (value) {\n            var control = this.getControl();\n\n            // Replace line breaks for html line breaks\n            control.html(value);\n          };\n        }\n      }\n      return decorated;\n    }\n  },\n  /*\r\n     *   Set a ready function to execute when the render has been inserted in the dom\r\n     */\n  ready: function ready() {\n    return this.readyDeferred.promise();\n  },\n  /*\r\n     *   Load stuff needed for the column\r\n     *   It could return a promise if the column need to load async stuff\r\n     */\n  initialize: function initialize() {\n    // Override to do any stuff needed here\n  },\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent(surrogateKey, cellOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    if (cellOverrides) {\n      decorated.properties.visible = cellOverrides.visible;\n      decorated.properties.editable = cellOverrides.editable;\n    }\n    return decorated.canBeSent() || !self.properties.editable && self.hasChanged() || !decorated.properties.editable && self.hasChanged();\n  },\n  /*\r\n     *   Method to check if a value is valid or not in this render\r\n     */\n  isValueValid: function isValueValid(surrogateKey, value, messages, propertyOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var invalidElements = [];\n\n    if (propertyOverrides.visible) {\n      self.setValue(surrogateKey, value);\n\n      // Override properties\n      decorated.properties = $.extend(decorated.properties, propertyOverrides);\n\n      if (self.grid && typeof decorated.grid === \"undefined\") {\n        decorated.grid = self.grid;\n      }\n\n      // Validate field\n      decorated.isValid(invalidElements);\n    }\n\n    if (invalidElements.length > 0) {\n      $.each(invalidElements, function (i, invalidElement) {\n        messages.push(invalidElement.message);\n      });\n      return false;\n    }\n\n    return true;\n  },\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n  },\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value) {\n    var self = this;\n    var properties = self.properties;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Set flag to check when a render has changed\n    self.changed = false;\n\n    // If the render is not editable return the readonly version of the column\n    //Fix: Uncaught RangeError: Maximum call stack size exceeded\n    if (!properties.editable && arguments[3] !== \"CALLER_RENDER_READ_ONLY_COLUMNSLINK\")\n    return self.renderReadOnly.apply(self, arguments);\n\n    // Returns the decorated render inside a custom layout for columns\n    self.readyDeferred = new $.Deferred();\n    var cell = decorated.render(\"cell\");\n\n    // If the render changes set the flag on\n    decorated.bind(\"renderchange\", function () {\n      self.changed = true;\n    });\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.postRenderElement(cell);\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Changes editable to false to render read-only\n    decorated.properties.editable = false;\n\n    // Perform the internal render\n    self.readyDeferred = new $.Deferred();\n    var result = decorated.render(\"cell.readonly\");\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    // Returns the decorated render inside a custom layout for columns\n    return result;\n  },\n\n  /*\r\n     *  Returns the html template to draw the summary cell\r\n     */\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    var result = self.renderFactory.getTemplate(\"cell.summary\");\n    return $.tmpl(result).html();\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var editable = self.properties.editable;\n    decorated.properties.editable = false;\n    if (self.properties.singleInstance) {\n      decorated.element = cell;\n    }\n    decorated.postRenderElement(cell);\n    decorated.properties.editable = editable;\n  },\n\n  /*\r\n     * Return false to all columns that doesn't need special treatment (like number or currency)\r\n     */\n  postRenderSummary: function postRenderSummary() {\n    return false;\n  },\n\n  /*\r\n     *   Returns the cell html to be inserted in the table\r\n     */\n  getCell: function getCell() {\n    return this.decorated.getDisplayValue();\n  },\n  /*\r\n     *   Sets the surrogate key for this row\r\n     */\n  setSurrogateKey: function setSurrogateKey(key) {\n    this.surrogateKey = key;\n  },\n  /*\r\n     *   Sets the internal value, only must be called internally\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated != \"undefined\" && decorated != null) {\n\n      decorated.properties.originalValue = value;\n      decorated.properties.previousValue = value;\n\n      if ((value === null || value === undefined) && (self.properties.defaultvalue !== undefined || self.properties.defaultValue !== undefined) && decorated.grid != undefined) {\n        value = self.setDefaultValue(surrogateKey, decorated);\n      }\n\n      decorated.properties.value = value;\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = undefined;\n\n    if (self.properties.defaultvalue !== null && self.properties.defaultvalue !== undefined) {\n      value = self.properties.defaultvalue;\n    } else {\n      if (self.properties.defaultValue !== null && self.properties.defaultValue !== undefined) {\n        value = self.properties.defaultValue;\n      }\n    }\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  },\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    return decorated.getValue();\n  },\n  /*\r\n     *   Gets the composite value (applies for non-standard render values)\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    return this.getValue(surrogateKey);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_COLUMN;\n  },\n  /*\r\n     *   Determines if a render has changed its value\r\n     */\n  hasChanged: function hasChanged() {\n    return this.changed;\n  },\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.decorated)\n    this.decorated.trigger(eventType, data);\n  },\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.decorated)\n    this.decorated.triggerHandler(eventType, data);\n  },\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.bind(eventType, fn);\n  },\n  /*\r\n     *   Unbinds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.unbind(eventType, fn);\n  },\n  /*\r\n     *   Override decorated properties\r\n     */\n  overrideDecoratedRenderProperties: function overrideDecoratedRenderProperties(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    // Override decorated control properties\n    decorated.properties.editable = this.properties.editable;\n    decorated.properties.visible = this.properties.visible;\n    decorated.properties.required = this.properties.required;\n  },\n\n  overrideProperties: function overrideProperties(properties) {\n    var self = this;\n\n    self.properties.editable = properties.editable || self.properties.editable;\n    self.properties.visible = properties.visible || self.properties.visible;\n    self.properties.required = properties.required || self.properties.required;\n  },\n\n  /*\r\n     *   Returns the xpath used to sort the grid\r\n     */\n  getSortName: function getSortName() {\n    var self = this;\n\n    // Check if there is an override for the default behaviour \n    var decorated = self.getAnyDecoratedInstance();\n    if (decorated && decorated.getSortColumn) {\n      return decorated.getSortColumn();\n    }\n\n    // Default behaviour\n    return self.properties.xpath;\n  },\n\n  /*\r\n     *   Returns any of the decorated instances, if there are none, return null\r\n     */\n  getAnyDecoratedInstance: function getAnyDecoratedInstance() {\n    var self = this;\n    var first;\n\n    // Get the first key for the hash\n    for (first in this.decorateRenders) {break;}\n\n    // Return the first decorated render\n    if (first) return this.decorateRenders[first];\n\n    return null;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutDecorated = setTimeout(function () {\n      if (self.decorated) {\n        self.decorated.unbind(\"renderchange\");\n        self.decorated.dispose();\n      }\n\n      if (self.decorateRenders) {\n        bizagi.util.arrayEach(self.decorateRenders, function (key, render) {\n          if (render) {\n            render.unbind(\"renderchange\");\n            render.dispose();\n          }\n        });\n      }\n      clearTimeout(timeOutDecorated);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will process a rendering page by calling an ajax service to retrieve the model,\r\n                                                                                                                                                                                                                                                                                                                                                                                *       and then process it to create base layout, and then call the device render factory\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Define BizAgi Rendering namespace\nbizagi.rendering = bizagi.rendering || {};\n\n/*\r\n                                            *   This class will define a method to process the page\r\n                                            *   1. Fetch the data\r\n                                            *   2. Call the device factory to appropriately render the content\r\n                                            */\n$.Class.extend(\"bizagi.rendering.facade\", {\n  form: undefined,\n  executionDeferred: new $.Deferred() },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    params = params || {};\n\n    // Set observable element\n    this.observableElement = $({});\n\n    // Injection of Device, only for print version purpose\n    var device = params.device || \"\";\n\n    // Defines a device factory for all rendering\n    this.deviceFactory = new bizagi.rendering.device.factory();\n\n    // Creates a data service instance\n    this.dataService = new bizagi.render.services.service(params);\n\n    // Retrieves the render factory\n    this.renderFactory = this.deviceFactory.getRenderFactory(this.dataService, device);\n  },\n  getFactory: function getFactory() {\n    var self = this;\n    return {\n      deviceFactory: self.deviceFactory,\n      dataService: self.dataService,\n      renderFactory: self.renderFactory };\n\n  },\n  /*\r\n     *   Subscribe method\r\n     */\n  subscribe: function subscribe() {\n    this.observableElement.bind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Unsubscribe method\r\n     */\n  unsubscribe: function unsubscribe() {\n    this.observableElement.unbind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Publish method\r\n     */\n  publish: function publish() {\n    return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   This method will re-execute the process\r\n     */\n  update: function update(params) {\n    var self = this;\n\n    // Update rendering mode\n    if (params.mode)\n    self.mode = params.mode;\n\n    // Enable form buttons on desktop view\n    return self.execute($.extend({\n      canvas: self.canvas,\n      mode: self.mode },\n    params));\n  },\n  /*\r\n     *   Start point method to use in the main javascript pages\r\n     *   This method will process everything and attach the html directly to the dom\r\n     */\n  execute: function execute(params) {\n    var self = this;\n    var doc = this.ownerDocument;\n    var body = $(\"body\", doc);\n    params = params || {};\n\n    // Creates ready deferred\n    if (self.executionDeferred && self.executionDeferred.state) {\n      if (self.executionDeferred.state() == \"resolved\") {\n        self.executionDeferred = $.Deferred();\n      }\n    } else {\n      self.executionDeferred = $.Deferred();\n    }\n\n    // Performance measurement stuff\n    bizagi.chrono.initAndStart(\"rendering+data\", true);\n    bizagi.rendering.render.startOptimization();\n\n    // Override mode\n    if (typeof params.mode === \"undefined\") {\n      if (!bizagi.util.isEmpty(window.location.search)) {\n        var queryString = bizagi.util.getQueryString();\n        params.mode = queryString[\"mode\"];\n      }\n    }\n\n    // If the canvas is not given, we need to create one\n    var canvas = self.canvas = params.canvas = params.canvas || $(\"<div />\").appendTo(body);\n    self.mode = params.mode;\n\n    self.sendExecutingPostMessageWebparts();\n\n    self.process(params).done(function (form) {\n\n      // Clear canvas    \n      if (!params.refreshing) {\n        canvas.empty();\n      }\n\n      // Append content\n      canvas.append(form.container);\n\n      // Include process path\n      $(form.pathProcess).insertBefore(form.container);\n\n      // Keep reference in class\n      self.form = form;\n      self.form.setSize({ width: self.lastWidth, height: self.lastHeight });\n\n      // Save window size variables\n      var timeoutResize = setTimeout(function () {\n        self.lastWidth = $(window).width();\n        self.lastHeight = $(window).height();\n        if (window.self !== window.top)\n        self.resizeInPopUpHTML();\n        clearTimeout(timeoutResize);\n      }, 2000);\n\n      // Publish an event to check if the form has been set in the DOM\n      form.triggerHandler(\"ondomincluded\");\n\n      // Notify to module users that the form has been rendered\n      self.publish(\"rendering-formRendered\", { form: form });\n      //Configure triggers\n      self.configureOpenForm(form);\n\n      // Configure handlers\n      self.configureRefresh(form, canvas);\n      self.configureRouting(form, canvas);\n      self.configureRenderError(form, canvas);\n      self.configureResize(form);\n      self.configureGlobalHandlers(form);\n\n      // Check if it is a summary form\n      if (params.summaryForm) {\n        form.container.addClass(\"ui-bizagi-summary-form\");\n      }\n\n      // Ends main timer and log everything\n      bizagi.chrono.stopAndLog(\"rendering\");\n      bizagi.chrono.stopAndLog(\"rendering+data\");\n      bizagi.chrono.stopAndLog(\"submitForm\");\n      bizagi.chrono.stopAndLog(\"submitForm-ajax\");\n      bizagi.chrono.stopAndLog(\"waiting\");\n\n      // Resolves deferred\n      bizagi.rendering.render.stopOptimization();\n\n      // Expose public reference of form\n      if (bizagi.override.enableE2EInterface) {\n        self.Class.form = self.form;\n        self.Class.executionDeferred.resolve(self.form);\n      }\n\n      self.executionDeferred.resolve(self.form);\n\n    }).fail(function (message, errorType) {\n\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n\n        if (typeof message === \"undefined\" || message === \"\") {\n          message = bizagi.localization.getResource(\"render-error-unknown\");\n        }\n\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        self.publish(\"rendering-formRenderedError\", message);\n        self.canvas.triggerHandler(\"errorform\", message);\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering\");\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n\n        self.executionDeferred.reject();\n      });\n    });\n\n    return self.executionDeferred.promise();\n  },\n  /*\r\n     *   Returns the execution deferred to determine if the component is ready or not\r\n     */\n  ready: function ready() {\n    return this.executionDeferred.promise();\n  },\n  /*\r\n     *   Loads data and render factory in order to process the form\r\n     *   Returns a deferred to set callbacks when the process is done\r\n     */\n  process: function process(params) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Call get form data service\n    var dataPromise = self.dataService.getFormData(params);\n\n    var canvas = self.canvas || params.canvas;\n\n    bizagi.showErrorAlertDialog = false;\n    // Set callback when requests have been done\n    $.when(dataPromise, self.renderFactory).\n    done(function (data, renderFactory) {\n      bizagi.showErrorAlertDialog = true;\n\n      // When there is no data trigger an event\n      if (bizagi.util.isEmpty(data)) {\n        self.publish(\"no-data-found\");\n        defer.fail();\n        return;\n      }\n\n      if (data && data.type == \"reload\") {\n        var form = self.form;\n        if (form) {\n          form.endLoading();\n          form.dispose();\n        }\n        // Trigger handler on canvas\n        canvas.triggerHandler(\"routing\", data);\n\n      } else if (data && data.type == \"suspended\") {\n        var errorTemplate = renderFactory.getTemplate(\"info-message\");\n        var message = bizagi.localization.getResource(\"render-case-suspended\");\n        var errorHtml = $.tmpl(errorTemplate, {\n          message: message });\n\n        // Remove loading icon from summary container\n        errorHtml.appendTo(canvas);\n\n        defer.fail();\n\n      } else if (data && data.type != \"error\") {\n        if (params.hasOwnProperty('printversion')) {\n          data = self.transformGridControl(data);\n          data.form.properties.editable = \"False\";\n        }\n\n        bizagi.chrono.initAndStart(\"rendering\");\n        params.type = data.form && data.form.properties.type || params.type;\n        var form = self.processForm(data.form, renderFactory, params);\n\n        // Resolve deferred\n        defer.resolve(form);\n\n      } else {\n        self.getFailDeferred(data, defer);\n      }\n    }).fail(function (errorMessage) {\n      self.getFailDeferred(errorMessage, defer);\n    });\n\n    return defer.promise();\n  },\n  /**\r\n      * In the print version widget when grid control was rendered, the main render has broken\r\n      * Is necesary change id of grid control to fixed these  problems\r\n      */\n  transformGridControl: function transformGridControl(data) {\n    var self = this;\n    if (data == null) {\n      return data;\n    }\n\n    if (data.hasOwnProperty('type') && data.type == 'grid') {\n      data.id = data.id + \"-print\";\n      data.allowAdd = \"False\";\n      data.allowDelete = \"False\";\n      data.allowEdit = \"False\";\n      data.allowGrouping = \"False\";\n      data.allowMore = \"False\";\n      data.allowSearch = \"False\";\n    } else {\n      $.each(data, function (key, value) {\n        if (_typeof(value) == 'object') {\n          data[key] = self.transformGridControl(data[key]);\n        }\n      });\n    }\n    return data;\n  },\n  /**\r\n      * Resolve deferred\r\n      */\n  getFailDeferred: function getFailDeferred(errorMessage, defer) {\n    var self = this;\n    var message = \"\";\n    var jsonErrorMessage = {};\n    try {\n      jsonErrorMessage = JSON.parse(errorMessage.responseText);\n    } catch (e) {\n      jsonErrorMessage = { message: errorMessage.responseText, errorType: \"ERRORUNKNOWN\" };\n    }\n\n\n    if (jsonErrorMessage.message) {\n      message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n      message += \"<br>Error Message: \" + jsonErrorMessage.message;\n    } else {\n      if (jsonErrorMessage.errorType == \"JSharpNotSupportedException\") {\n        message += \"<br>Error Message: \" + bizagi.localization.getResource(\"jsharp-required\");\n      }\n    }\n\n    // Error in metadata InvalidFormMetadata\n    if (jsonErrorMessage.errorType == 'ERRORUNKNOWN') {\n      defer.reject(message, jsonErrorMessage.errorType);\n    } else {\n\n      defer.reject(message);\n    }\n  },\n  /*\r\n     *   Process the form\r\n     */\n  processForm: function processForm(data, renderFactory, params) {\n    var form = renderFactory.getContainer($.extend(params, {\n      type: params.type || \"form\",\n      data: data }));\n\n\n    // Render the full form\n    form.render();\n\n    return form;\n  },\n  /*\r\n     *   Performs a resize\r\n     */\n  resize: function resize(args) {\n    var self = this;\n    if (self.form) {\n      self.form.trigger(\"renderresize\", args);\n    }\n  },\n  /*\r\n     *   Binds a refresh handler to detect when the whole form needs to fetch all data from server\r\n     */\n  configureRefresh: function configureRefresh(form, canvas) {\n    var self = this;\n\n    // Attach a refresh handler to recreate all the form\n    form.bind(\"refresh\", function (_, refreshParams) {\n\n      // Find the scroll top\n      var parent = form.container.parent();\n      parent = bizagi.util.scrollTop(parent);\n      var scrollTop = parent.scrollTop();\n\n      $(self.form).trigger(\"onRefreshStarted\");\n\n      //Dispose current form\n      form.dispose(refreshParams);\n      canvas.fastEmpty();\n      var canvasParent = canvas.parent();\n      if (canvasParent.find(\".ui-bizagi-button-container\").length > 0) {\n        canvasParent.find(\".ui-bizagi-button-container\").remove();\n      }\n\n      if (self.executionDeferred && self.executionDeferred.state) {\n        if (self.executionDeferred.state() == \"resolved\") {\n          self.executionDeferred = $.Deferred();\n        }\n      }\n\n      var formParams = self.form.getParams();\n      if (bizagi.util.isMobileDevice() && formParams.isOfflineForm === true) {\n        $.extend(refreshParams, {\n          isOfflineForm: true,\n          offlineType: formParams.offlineType,\n          isOpen: formParams.isOpen });\n\n        refreshParams.online = (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\" ?\n        form.online : bizagi.util.isConnected();\n      }\n\n      // Re-execute process\n      $.when(self.execute($.extend(refreshParams, {\n        canvas: canvas,\n        refreshing: true,\n        idCase: formParams.idCase,\n        displayName: formParams.displayName }))).\n      done(function () {\n\n        // Restore scroll at same position\n        var timeoutTrigger = setTimeout(function () {\n          parent.scrollTop(scrollTop);\n          $(self.form).trigger(\"onRefreshFinished\");\n          clearTimeout(timeoutTrigger);\n        }, 100);\n      });\n\n      return self.executionDeferred.promise();\n    });\n  },\n  /*\r\n     *   Binds a resize hanlder to configure the resize behaviour\r\n     */\n  configureResize: function configureResize(form) {\n    var self = this;\n\n    // Attach resize handler\n    form.bind(\"renderresize\", function (_, args) {\n      args = args || {};\n      // Just allow one resize at a time\n      if (self.resizeTimeout)\n      return;\n      var resizeFn = function resizeFn() {\n        // Call resize event in form\n        var width = $(window).width();\n        var height = $(window).height();\n        if (args.forceResize || width != self.lastWidth) {\n\n          // Logging stuff\n          bizagi.chrono.initAndStart(\"resize\");\n\n          // Perform resize\n          form.resize({\n            width: width,\n            height: height });\n\n          self.lastWidth = width;\n          self.lastHeight = height;\n\n          // Logging stuff\n          bizagi.chrono.stopAndLog(\"resize\");\n          bizagi.chrono.log(\"resize\");\n        }\n\n        self.resizeTimeout = null;\n        clearTimeout(self.resizeTimeout);\n      };\n      self.resizeTimeout = setTimeout(resizeFn, 0);\n\n    });\n    self.resize();\n  },\n  /*\r\n     *   Binds a routing handler to detect when the workportal need to enroute the case\r\n     */\n  configureRouting: function configureRouting(form, canvas) {\n    // Attach a routing handler to notify to the caller\n    form.bind(\"routing\", function (context, triggerParams) {\n      //Dispose current form\n      form.dispose();\n\n      // Trigger handler on canvas\n      canvas.triggerHandler(\"routing\", triggerParams);\n    });\n  },\n  /*\r\n     *   Binds a generic handler that will be replicated to facade instantiators\r\n     */\n  configureGlobalHandlers: function configureGlobalHandlers(form) {\n    var self = this;\n\n    // Attach a routing handler to notify to the caller\n    form.bind(\"globalHandler\", function (_, args) {\n      // Trigger handler on canvas\n      return self.publish(args.eventType, args.data);\n    });\n  },\n  /*\r\n     *   Bind trigger for form opening\r\n     */\n  configureOpenForm: function configureOpenForm(form) {\n    $(document).trigger(\"openForm\", { form: form });\n  },\n\n  /*\r\n     * Binds error form handler to detect when the render element nop posible get information or error in server\r\n     */\n  configureRenderError: function configureRenderError(form, canvas) {\n    var self = this;\n\n    form.bind(\"formRenderingError\", function (event, errorMessage) {\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n        var message = \"<br>Error: \";\n\n        errorMessage = errorMessage.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n\n        var jsonErrorMessage = JSON.parse(errorMessage);\n        if (jsonErrorMessage.message) {\n          message += jsonErrorMessage.message;\n          message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n        }\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        //send the type error to differentiate between a form and an item for render\n        self.canvas.triggerHandler(\"errorform\", \"renderItemError\");\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n        bizagi.chrono.stopAndLog(\"rendering\");\n      });\n    });\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    if (self.form) {\n      self.form.dispose();\n    }\n    bizagi.util.dispose(self);\n  },\n\n  resizeInPopUpHTML: function resizeInPopUpHTML() {\n    if ($(\".activitiFormContainer\").length > 0 && bizagi.util.getQueryString().type != \"cases\") {\n      var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\n      var renderForm = $(\".activitiFormContainer #ui-bizagi-webpart-render-container\");\n      var buttonContainer = $(\".ui-bizagi-button-container\", \".activitiFormContainer\");\n      var heightButtonContainer = buttonContainer.outerHeight() || 0;\n      var renderBehavior = bizagi.util.getQueryString().renderBehavior || \"\";\n      renderBehavior = renderBehavior.replace(\"#\", \"\");\n\n      if (renderBehavior == \"PopUp\") {\n        if (typeof self.postMessageSocket == \"undefined\") {\n          var heightCanvas = $(\".activitiFormContainer\").height() - 50 || 396;\n          $(\"#render-canvas\").height(heightCanvas);\n          $(\"#render-canvas\").css(\"overflowY\", \"scroll\");\n        } else $(\".activitiFormContainer\").height($(\".activitiFormContainer\").height() + $(\".ui-bizagi-button-container\").height() + 30);\n        $(\".ui-bizagi-button-container\").css(\"position\", \"absolute\");\n        $(\".ui-bizagi-button-container\").appendTo(\".activitiFormContainer\");\n        if ($(\".ui-bizagi-button-container\").length > 1) {\n          $(\".ui-bizagi-button-container:first\").hide();\n          renderForm.css(\"marginTop\", \"-17px\");\n        }\n      }\n      if (buttonContainer.length > 0) {\n        //display buttons\n        renderForm.height(heightActivitiFormContainer - 97 - heightButtonContainer);\n      }\n      if ($(\".ui-bizagi-button-container\").children().length == 0)\n      $(\"#render-canvas\").height($(\"#render-canvas\").height() + heightButtonContainer);else\n      {\n        buttonContainer.width(\"100%\");\n        buttonContainer.css(\"marginLeft\", 0);\n        buttonContainer.css(\"bottom\", 0);\n      }\n    } else if (bizagi.util.getQueryString().type == \"render\") {\n      $(\"html\").css(\"overflowX\", \"hidden\");\n      $(\"#render\").height() <= window.innerHeight + 5 ? $(\"html\").css(\"overflowY\", \"hidden\") :\n      $(\"html\").css(\"overflowY\", \"scroll\");\n      $(\".ui-widget-overlay\").height(650);\n    }\n  },\n\n  sendExecutingPostMessageWebparts: function sendExecutingPostMessageWebparts() {\n    if (bizagi && bizagi.iframeCommunicator) {\n      bizagi.iframeCommunicator.trigger(\"executing-rendering\", {});\n    }\n  } });","/*\r\n*   Name: BizAgi Services Rendering End Points\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script defines all the end-points used to retrieve ajax stuff\r\n*   -   All urls must be relative to the base application\r\n*/\n\n// Create or define namespace\nbizagi.render = typeof bizagi.render !== \"undefined\" ? bizagi.render : {};\nbizagi.render.services = typeof bizagi.render.services !== \"undefined\" ? bizagi.render.services : {};\nbizagi.render.services.endPoints = [];\n\n// Creates a endpoint hash factory to resolve custom requirements\nbizagi.render.services.getEndPoints = function (params) {\n\n  var renderHandlerPathRest = \"Rest/Handlers/Render\";\n  var renderUploadHandlerPathRest = \"Rest/Handlers/Render/Upload\";\n  var renderFileHandlerPathRest = \"Rest/Handlers/RenderFile\";\n  var letterHandlerPathRest = \"Rest/Handlers/Letter\";\n  var multiActionHandlerPathRest = \"Rest/Handlers/MultiAction\";\n  var metadataHandlerPathRest = \"Rest/Handlers/Metadata\";\n  var metadataMultiactionHandlerPathRest = \"Rest/Handlers/MetadataMultiAction\";\n  // Default workportal end-points\n  if (params.context == \"workflow\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.proxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.proxyPrefix + metadataHandlerPathRest,\n      \"render-multiaction-metadata\": params.proxyPrefix + metadataMultiactionHandlerPathRest,\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.proxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.proxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.proxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\",\n      \"render-entity-layout-upload-files\": params.proxyPrefix + \"Api/Entities/{entity}/Files/{surrogateKey}/Array?xpath={xpath}\",\n      \"render-query-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsersForQueryFormsById/{queryFormId}/\",\n      \"case-handler-getCaseSummary\": params.proxyPrefix + \"Rest/Cases/{idCase}/SummaryGuid\",\n      \"case-handler-getCaseSummaryByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getCaseAssignees\": params.proxyPrefix + \"Rest/Cases/{idCase}/AssigneesGuid\",\n      \"case-handler-getWorkItems\": params.proxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\",\n      \"admin-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsers\",\n      \"admin-getUsersList-FromPreferences\": params.proxyPrefix + \"Rest/Users/SearchUsersFromPreferences\",\n      \"admin-getUsersList-ForStakeholders\": params.proxyPrefix + \"Rest/Users/SearchUsersForStakeholders\",\n      \"admin-getUsersList-ForXpathIdBossUser\": params.proxyPrefix + \"Rest/Users/SearchUsersForBosses\",\n      \"admin-getUsersList-ForXpathIdDelegate\": params.proxyPrefix + \"Rest/Users/SearchUsersForDelegates\",\n      \"admin-getUsersForAssignation\": params.proxyPrefix + \"Rest/Users/UsersForAssignation\",\n      \"admin-users-config\": params.proxyPrefix + \"Api/Authentication/BizagiConfig\",\n      //users administration\n      \"admin-usersform\": params.proxyPrefix + \"Rest/Handlers/Render\",\n      \"admin-GenerateDataToSendByEmail\": params.proxyPrefix + \"Rest/Users/GenerateDataToSendByEmail\",\n      \"admin-sendUserEmail\": params.proxyPrefix + \"Rest/Users/SendUserEmail\" };\n\n  }\n  // Sharepoint end-points (must be customized for each project)\n  if (params.context == \"sharepoint\" || params.context == \"portal\") {\n    if (typeof params.sharepointProxyPrefix === \"undefined\") alert(\"sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'\");\n    return {\n      \"form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.sharepointProxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.sharepointProxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.sharepointProxyPrefix + metadataHandlerPathRest,\n      \"render-grid-edit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": \"jquery/css/bizagi/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.sharepointProxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": \"jquery/css/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.sharepointProxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\",\n      \"case-handler-getCaseSummary\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/Summary\",\n      \"case-handler-getCaseSummaryByGuid\": params.sharepointProxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getWorkItems\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\" };\n\n  }\n\n  if (params.context == \"entitymanagement\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=entity\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  if (params.context == \"search\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=metadata\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  return {};\n};","/*\r\n*   Name: BizAgi Rendering Service Context Factory\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the endpoints to be used based on the given context\r\n*/\n\n$.Class.extend(\"bizagi.render.services.context\", {}, {\n  /* \r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    this.context = params.context;\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n  },\n\n  /*\r\n     *   Returns the given url for a specified service\r\n     */\n  getUrl: function getUrl(service) {\n    if (this.endPoints[service] == null) {\n      alert(\"No endpoint defined for: \" + service);\n    }\n    return this.endPoints[service];\n  },\n\n  setProxyPrefix: function setProxyPrefix(params) {\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n  } });","/*\r\n *   Name: BizAgi Rendering Services\r\n *   Author: Einer Perez\r\n *   Comments:\r\n *   -   This class will provide a facade to access to multiaction rendering REST services\r\n */\nbizagi.render.services.multiactionservice.extend(\"bizagi.render.services.metadatamultiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"h_pageCacheId\" },\n{\n\n  /*\r\n  *   Sends a multiaction to the server\r\n  */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      if (action[self.Class.BA_PAGE_CACHE]) {\n        data[self.Class.BA_PAGE_CACHE] = action[self.Class.BA_PAGE_CACHE];\n      }\n      delete action[self.Class.BA_PAGE_CACHE];\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action metadata\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction-metadata\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(this, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse;\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  } });","/**\r\n *   Name: Bizagi Rendering Validation controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.validation\", {}, {\n\n  /* \r\n                                                                                            *   Constructor\r\n                                                                                            */\n  init: function init(form, validations, canvas) {\n    // Enable evalValidation function with console log trace\n    this.enableDebug = false;\n\n    // Call base\n    this._super(form);\n\n    // Perform notifications\n    this.initializeValidations(canvas, validations);\n  },\n\n  /**\r\n      * Perform validations component\r\n      * @param canvas\r\n      * @param validations\r\n      */\n  initializeValidations: function initializeValidations(canvas, validations) {\n    var self = this;\n    var validationBox = $('<div />').appendTo(canvas);\n\n    //Notifies that a modal view appear/disappear\n    $.widget(\"ui.bizagi_notifications\", $.ui.bizagi_notifications, {\n      expand: function expand() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      collapse: function collapse() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      },\n      hide: function hide() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n\n    // Apply plugin\n    validationBox.bizagi_notifications({\n      itemIcon: \"ui-icon-circle-close\",\n      minimized: false,\n      clearEnabled: false,\n      title: bizagi.localization.getResource(\"render-form-validations-header-text\"),\n      device: bizagi.util.detectDevice(),\n      orientation: self.form.properties.orientation });\n\n\n    // Bind click\n    validationBox.bind(\"itemClick\", function (e, ui) {\n      self.onNotificationClick(ui.data);\n    });\n\n    // Build validations\n    if (validations) {\n      self.buildValidations(validations);\n    }\n\n    // Keep references\n    self.validationBox = validationBox;\n    self.validations = validations || [];\n  },\n\n  /* \r\n     *   Method to incorporate automatic validation rules \r\n     */\n  buildValidations: function buildValidations(validations) {\n    var self = this;\n    var fnValidations = self.buildAllValidations(validations);\n\n    self.form.bind(\"rendervalidate\", function () {\n      return fnValidations(self);\n    });\n  },\n\n  /* \r\n     *   Method to add a simple error message in the validation box\r\n     */\n  showErrorMessage: function showErrorMessage(message) {\n    bizagi.showErrorAlertDialog = false;\n    this.showValidationMessage(message, null, \"ui-icon-circle-close\", \"ui-state-error\");\n  },\n\n  /* \r\n     *   Method to add a simple alert message in the validation box\r\n     */\n  showAlertMessage: function showAlertMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-alert\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple info message in the validation box\r\n     */\n  showInfoMessage: function showInfoMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-info\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple validation message in the validation box\r\n     */\n  showValidationMessage: function showValidationMessage(message, focus, icon, itemAdditionalClass, type, renderId) {\n    var self = this;\n    var form = self.form;\n    var render = null;\n\n    if (renderId) {\n      render = form.getRenderById(renderId) || null;\n    } else {\n      render = focus ? form.getRender(focus) : null;\n    }\n\n    bizagi.showErrorAlertDialog = false;\n\n    // Method to perform validations after the render has been changed, or the notifications has been clicked\n    var performValidationFn = function performValidationFn() {\n      // First hide and clear validation box\n      self.clearValidationMessages();\n\n      var lastActionButton = form ? form.getLastActionButton() : {};\n      var skipValidation = lastActionButton && lastActionButton.action === \"nextWithoutValidations\";\n\n      if (!skipValidation) {\n        // Run validations\n        self.validating = true;\n        self.performValidations();\n        self.validating = false;\n      }\n\n      // Attempt to hide if there are no validations\n      if (self.countValidationMessages() == 0) {\n        self.hideValidationMessages();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } else {\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      }\n\n      //form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n    };\n    self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n    // Add message\n    self.validationBox.bizagi_notifications(\"addNotification\", message, focus, icon, itemAdditionalClass, performValidationFn, type, renderId);\n\n    if (render) {\n      // Add error message to render\n      render.setValidationMessage(message);\n\n      if (!bizagi.util.isIE8()) {\n\n        // Bind event when render change\n        if (!self.validating) render.bind(\"rendervalidate\", function () {\n          performValidationFn();\n          if (render.properties.retype != \"double\") {\n            render.unbind(\"rendervalidate\");\n          }\n        });\n      }\n    }\n  },\n\n  /*\r\n     *   Count the number of validation messages\r\n     */\n  countValidationMessages: function countValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"count\");\n  },\n\n  /*\r\n     *   Remove all the validations\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var validationsBoxes = $(\".ui-bizagi-notifications-container\", \"body\").not(\".ui-bizagi-log-container\");\n\n    return validationsBoxes.bizagi_notifications(\"clearAll\", undefined, params);\n  },\n\n  /*\r\n     *   Hide the validation notifications box\r\n     */\n  hideValidationMessages: function hideValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"hide\");\n  },\n\n  /*\r\n     *   Show the validation notifications box\r\n     */\n  showValidationMessages: function showValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"show\");\n  },\n\n  /*\r\n     *   Expand the notification box\r\n     */\n  expandNotificationBox: function expandNotificationBox(autofocus) {\n    // Select first error and expand notifications\n    if (autofocus !== false) this.validationBox.bizagi_notifications(\"autoFocusFirstError\");\n    return this.validationBox.bizagi_notifications(\"expand\");\n  },\n\n  isExpandedNotificationBox: function isExpandedNotificationBox() {\n    return this.validationBox.bizagi_notifications(\"isExpanded\") && this.validationBox.bizagi_notifications(\"isContentVisible\");\n  },\n\n  /*\r\n     *   Run all validation rules in the form container\r\n     */\n  performValidations: function performValidations(invalidElements) {\n    var self = this;\n\n    // First hide and clear validation box\n    self.clearValidationMessages();\n    self.validationBox.bizagi_notifications(\"initBatch\");\n\n    // Run render validations\n    var bRendersValid = self.validateRenders(invalidElements);\n\n    // Run form validations\n    var bFormValid = self.validations.length > 0 ? self.form.triggerHandler(\"rendervalidate\") : true;\n    self.validationBox.bizagi_notifications(\"endBatch\");\n\n    // Show validations if invalid\n    if (!bFormValid || !bRendersValid) {\n      self.validationBox.bizagi_notifications(\"show\");\n      return false;\n    }\n\n    return true;\n  },\n\n  /* PRIVATE METHODS */\n\n  /*  \r\n                        *   Construct validations javascript rules\r\n                        */\n  buildAllValidations: function buildAllValidations(validations) {\n    var self = this;\n    var sJSCode = \"\";\n\n    for (var i = 0; i < validations.length; i++) {\n\n      var isEnabled = validations[i].enabled != undefined ? validations[i].enabled : true;\n      if (isEnabled) {\n        // If validation is not \"valid\" we can omit that instruction\n        try {\n          sJSCode += self.buildValidation(validations[i].conditions, validations[i].validationCommand);\n        } catch (e) {\n          if (e.message != \"RenderNotFoundException\") {\n            bizagi.logError(\"Validation cannot be parsed: \" + e.message, validations[i]);\n          }\n        }\n      }\n    }\n\n    // Build final function\n    var sStatement = \"var baTmpFn = function(self, params){\\r\\n var bValid = true;\\r\\n \" + sJSCode + \"\\r\\n return bValid;}; baTmpFn\";\n\n    // Return interpreted function\n    return self.evalValidation(sStatement);\n  },\n\n  /*\r\n     *   Build a single javascript validation rule\r\n     */\n  buildValidation: function buildValidation(conditions, validationCommand) {\n    var self = this;\n    var sJsCondition = \"\";\n    var sJsValidation = \"\";\n\n    // Detect grid references\n    var gridReference = self.searchForGridReference(conditions);\n    var bGridDetected = gridReference != null;\n    var validateEditability = typeof bizagi.override.validateEditabilityOnValidations != \"undefined\" ? bizagi.override.validateEditabilityOnValidations : true;\n\n    // Build Conditions\n    sJsCondition += \"( \" + self.buildConditions(conditions, bGridDetected, validateEditability) + \" )\";\n\n    // Fix message for quotes and break lines\n    validationCommand.message = validationCommand.message.replace(/'/g, \"\\\\'\");\n    validationCommand.message = validationCommand.message.replace(/\\n/g, \" \");\n\n    // Build Message\n    var focus = validationCommand.focus || \"\";\n    if (bGridDetected) focus = gridReference;\n    if (validationCommand.tokens)\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"', JSON.parse('\" + JSON.encode(validationCommand.tokens) + \"')); bValid = false;\\r\\n\";else\n\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"'); bValid = false;\\r\\n\";\n\n    // Build final statement\n    if (!bGridDetected) {\n\n\n      return \"if (\" + sJsCondition + \"){\\r\\n \" + sJsValidation + \" \\r\\n}\";\n    } else {\n      var sGridStatement = \"var grid = self.form.getRender('\" + gridReference + \"');\\r\\n\";\n      sGridStatement += \"if(grid === null) return true;\\r\\n\";\n      sGridStatement += \"var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"var bGridValid = true;\\r\\n\";\n      sGridStatement += \"$.each(data, function(_, i) {\\r\\n\";\n      sGridStatement += \"if (\" + sJsCondition + \"){\\r\\n bGridValid = false; \\r\\n}\";\n      sGridStatement += \"});\\r\\n\";\n      sGridStatement += \"if (bGridValid == false){\\r\\n \" + sJsValidation + \"\\r\\n}\";\n      return sGridStatement;\n    }\n  },\n\n  /* \r\n     *   Method triggered when the validation item has been clicked\r\n     */\n  onNotificationClick: function onNotificationClick(data) {\n    var self = this;\n    var form = self.form;\n    var xpath = data.focus;\n    var renderId = data.id;\n\n    if (xpath) {\n      var render = renderId ? form.getRenderById(renderId) : form.getRender(xpath);\n\n      if (render) {\n        render.focus();\n      }\n    }\n  },\n\n  /* \r\n     *   Method to loop\r\n     */\n  validateRenders: function validateRenders(invalidElements) {\n    var self = this;\n    invalidElements = invalidElements || [];\n\n    // Do a check\n    var bValid = self.form.isValid(invalidElements);\n    if (!bValid) {\n      invalidElements.forEach(function (element) {\n        if (element.id) {\n          // Parameters: message, xpath, icon, itemAdditionalClass, type, renderId\n          self.showValidationMessageById(element.message, element.xpath, element.id);\n        } else if (element.message || element.xpath) {\n          self.showValidationMessage(element.message, element.xpath);\n        }\n      });\n    }\n\n    return bValid;\n  },\n\n  /*\r\n     *\tEval validation string, for debug purposes\r\n     */\n  evalValidation: function evalValidation(command) {\n    var self = this;\n\n    if (self.enableDebug && console != undefined) {\n      console.log(command);\n    }\n\n    return eval(command);\n  },\n\n  /**\r\n      * Method to add a simple validation message in the validation box\r\n      * @param message\r\n      * @param xpath\r\n      * @param renderId\r\n      */\n  showValidationMessageById: function showValidationMessageById(message, xpath, renderId) {\n    this.showValidationMessage(message, xpath, undefined, false, undefined, renderId);\n  } });","/*\r\n*   Name: BizAgi Element Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class with common stuff related to all renders and containers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.element\", {\n  ELEMENT_TYPE_CONTAINER: 1,\n  ELEMENT_TYPE_RENDER: 2,\n  ELEMENT_TYPE_COLUMN: 3 },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    // Set render factory\n    this.renderFactory = params.renderFactory;\n\n    // Set data service\n    this.dataService = params.dataService;\n\n    // Set reference to parent\n    this.parent = params.parent;\n\n    // Set l10n service\n    this.resources = bizagi.localization;\n\n    // Set the observable element\n    this.observableElement = $(\"<div />\");\n\n    // Set the dispose flag\n    this.disposed = false;\n\n    // Update data\n    this.initializeData(params.data);\n\n    // Define an object to hold the subscribe collection\n    this.subscribers = [];\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Set the internal data\n    this.properties = {};\n    if (data && data.properties) this.properties = data.properties;\n\n    // Set xpath context\n    this.properties.xpathContext = this.getXpathContext();\n\n    // Set page cache\n    this.properties.idPageCache = this.getPageCache();\n\n    //History of visual changes from actions\n    self.visualChanges = self.visualChanges || {};\n  },\n\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    // By default return parent's xpath context\n    // This method is overriden in form container which contains the real xpath context\n\n    return this.parent != undefined && typeof this.parent.getXpathContext == \"function\" ? this.parent.getXpathContext() : \"\";\n  },\n\n  /*\r\n     *   Returns the xpath of the element\r\n     */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n  /*\r\n     *   Returns the page cache for the current element\r\n     */\n  getPageCache: function getPageCache() {\n    // By default return parent's page cache\n    // This method is overriden in form container which contains the real page cache\n\n    return this.parent != undefined && typeof this.parent.getPageCache == \"function\" ? this.parent.getPageCache() : \"\";\n  },\n\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    // By default return parent's form container\n    // This method is overriden in form container which returns itself\n    if (typeof this.parent != \"undefined\")\n    return this.parent.getFormContainer();\n  },\n\n\n  /*\r\n     *   Returns the mapped resource\r\n     */\n  getResource: function getResource(key) {\n    return this.resources.getResource(key);\n  },\n\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {},\n\n  /*\r\n                                                *   Resizes the element\r\n                                                */\n  resize: function resize(size) {\n\n  },\n\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus() {\n\n    if (this.properties.required) {\n      var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n      // Check if element is visible into scroll\n      if (!bizagi.util.isScrolledIntoView(this.element, layout)) {\n        $(this.element).attr('tabindex', -1).focus();\n      }\n      if (this.element) {\n        this.element.effect('highlight', 2000);\n      }\n    }\n\n    //Check if the element has parent\n    if (this.parent && typeof this.parent.focus == 'function') {\n      this.parent.focus();\n    }\n  },\n\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.parent) return this.parent.triggerGlobalHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.trigger(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.triggerHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.bind(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Un-binds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.unbind(eventType, fn);\n    return null;\n  },\n\n  /*\r\n     *   Binds a one time event\r\n     */\n  one: function one(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.one(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {},\n\n  /*\r\n                                                        *   Get current rendering mode\r\n                                                        */\n  getMode: function getMode() {\n    if (this.parent) return this.parent.getMode();\n  },\n\n  /*\r\n     *   Get current rendering params\r\n     */\n  getParams: function getParams() {\n    if (this.parent) return this.parent.getParams();\n  },\n\n  /*\r\n     * Get current form type (ex. queryform, form)\r\n     */\n  getFormType: function getFormType() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    return form.properties.type || \"form\";\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {},\n\n  /*\r\n                              *   Returns a promise that will resolve when the element is ready to save\r\n                              */\n  isReadyToSave: function isReadyToSave() {},\n\n  /*\r\n                                              *   Get the custom handlers set for this execution\r\n                                              */\n  getCustomHandlers: function getCustomHandlers() {\n    return null;\n  },\n\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n    self.disposed = true;\n\n    var timeOutDispose = setTimeout(function () {\n      if (self.subscribers != null) {\n        // Remove all subcriptions\n        $.each(self.subscribers, function (i, item) {\n          self.unbind(item.event);\n        });\n      }\n      delete self.subscribers;\n\n      if (self.observableElement) self.observableElement.off();\n      bizagi.util.dispose(self);\n      clearTimeout(timeOutDispose);\n    }, bizagi.override.disposeTime || 50);\n  },\n\n  /*\r\n     *   Check if the current object is disposed\r\n     */\n  isDisposed: function isDisposed() {\n    return this.disposed;\n  },\n\n  /*\r\n     *   This method process the error or alert messages coming from the server, and adds them to the validation controller\r\n     */\n  processFailMessage: function processFailMessage(message) {\n    var self = this;\n    var form = self.getFormContainer();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    if (message.errorType === \"CustomMessageException\") {\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      var error = bizagi.localization.getResource(message.message);\n      form.validationController.showErrorMessage(error);\n    } else if (message.errorType === \"InvalidCaseStateException\") {\n      var params = form.getParams();\n\n      form.validationController.clearValidationMessages();\n\n      // Redirection Here\n      form.container.trigger(\"routing\", { idCase: params.idCase || bizagi.context.idCase });\n    } else {\n      var message = message || {};\n      message = typeof message == \"string\" ? JSON.parse(message) : message;\n      var type = message.type || \"error\";\n      var code = message.code || \"code\";\n      message = message.responseText || message.message || message;\n\n      // Omit processing when the ajax didn't process\n      if (type === \"not-processed\") return;\n      if (type === \"not-shown\") return;\n      if (isOfflineForm && code === \"AUTH_ERROR\") return;\n\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      if (type == \"alert\") {\n        form.validationController.showAlertMessage(message);\n      } else {\n        form.validationController.showErrorMessage(message);\n      }\n    }\n\n    return message;\n  },\n\n  /*\r\n     *   Sets a waiting overlay above the current element\r\n     */\n  startLoading: function startLoading() {/* Override in implementations */},\n\n  /*\r\n                                                                             *   Removes the waiting overlay\r\n                                                                             */\n  endLoading: function endLoading() {/* Override in implementations */},\n\n  /**\r\n                                                                          *   Prepare control to remove it from the render, that allows to\r\n                                                                          *   clean all elements of the control or to do any stuff before to remove\r\n                                                                          */\n  beforeToRefresh: function beforeToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      *   Run before that the control has been refreshed\r\n      */\n  afterToRefresh: function afterToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      * This method returns the localized version of the resource\r\n      * @param resource\r\n      * @param fallback\r\n      * @returns {string}\r\n      */\n  getResourceByKey: function getResourceByKey(resource, fallback) {\n    fallback = fallback || resource;\n\n    return bizagi.localization.getResource(resource, fallback);\n  },\n  /**\r\n      * Restore appearance using type of command\r\n      */\n  restoreAppearance: function restoreAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n\n      switch (command) {\n        case \"color\":\n          self.changeColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditability(self.visualChanges[command]);\n          break;\n        case \"visibility\":\n          self.changeVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  },\n\n  getOrientation: function getOrientation() {\n    var control = this;\n    while (control) {\n      properties = control.properties || {};\n      if (properties.orientation !== \"auto\") return properties.orientation;\n      control = control.parent;\n    }\n    return \"auto\";\n  } });","/*\r\n *   Name: BizAgi Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base container class with common stuff related to all containers\r\n */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.container\", {\n  TYPE_QUERY_FORM: \"queryForm\" },\n{\n\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Set defaults\n    var properties = self.properties;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(properties));\n\n    // Create children\n    this.children = [];\n    this.childrenHash = {};\n\n    if (data.elements) {\n      $.each(data.elements, function (i, element) {\n        if (element.render) {\n          self.createRenderElement(element);\n        } else if (element.container) {\n          self.createContainerElement(element);\n        } else if (element.form) {\n          self.createFormElement(element);\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Creates a render element\r\n     */\n  createRenderElement: function createRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n    var originalElement;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.render.properties.editable = properties.editable;\n      /*if (element.render.properties.type == \"grid\")\r\n                                                                    element.render.properties.inlineEdit = false;*/\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.render.properties.required = properties.required;\n    }\n\n    //clone originalElement to apply duplicate render properties correctly\n    if (element.render.properties.retype == \"duplicate\") {\n      originalElement = bizagi.clone(element);\n    }\n\n    var render = self.renderFactory.getRender({\n      type: element.render.properties.type,\n      data: element.render,\n      dataService: self.dataService,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Add to children\n    self.children.push(render);\n\n    // Check for duplicate\n    if (element.render.properties.retype == \"duplicate\") {\n      self.processDuplicateRender(render, originalElement);\n    }\n\n    //TODO: at this point not posible add the retype double at this point not exist input\n\n    // Register in form container\n    self.getFormContainer().registerRender(render);\n  },\n  /*\r\n     *   Creates a container element\r\n     */\n  createContainerElement: function createContainerElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.container.properties.required = properties.required;\n    }\n\n    var container = self.renderFactory.getContainer({\n      type: element.container.properties.type,\n      data: element.container,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode(),\n      isDesign: self.getMode() === \"design\" });\n\n\n    self.children.push(container);\n\n    // Register in form container\n    self.getFormContainer().registerRender(container);\n  },\n  /*\r\n     *   Creates a form element\r\n     */\n  createFormElement: function createFormElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    var form = self.renderFactory.getContainer({\n      type: element.form.properties.type || \"form\",\n      data: element.form,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode() });\n\n    self.children.push(form);\n  },\n  /*\r\n     *   Gets the current container\r\n     */\n  getElement: function getElement() {\n    var self = this;\n    return self.container;\n  },\n  /*\r\n     *   Gets a collection for all elements matching a type\r\n     */\n  getElementsByType: function getElementsByType(type, elements) {\n    elements = elements || [];\n    var self = this;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.properties.type == type) {\n        elements.push(child);\n      }\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.getElementsByType(type, elements);\n      }\n    });\n\n    return elements;\n  },\n  /*\r\n     *   Process renders with duplicate property\r\n     */\n  processDuplicateRender: function processDuplicateRender(render, element) {\n    var self = this;\n    var clonedElement = JSON.parse(JSON.encode(element.render));\n\n    // Changes properties\n    clonedElement.properties.displayName = clonedElement.properties.displayName + \" \" + self.getResource(\"render-text-duplicate-label-sufix\");\n    clonedElement.properties.xpath = clonedElement.properties.xpath + \".clone\";\n    clonedElement.properties.isClone = true;\n\n    // Creates clone\n    var clone = self.renderFactory.getRender({\n      type: clonedElement.properties.type,\n      data: clonedElement,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Associates with main render\n    render.cloneRender = clone;\n\n    // Add to collection\n    self.children.push(clone);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_CONTAINER;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  render: function render() {\n    var self = this,\n    mode = self.getMode(),\n    result;\n\n    // Render container\n    result = self.internalRender();\n\n    // Apply container defaults\n    self.applyContainerDefaults();\n\n    // Add container id\n    result.attr(\"data-container-id\", self.properties.id);\n\n    //Add container tag property\n    if (self.properties.tag) {\n      result.attr(\"data-tag\", self.properties.tag);\n    }\n\n    //Add class to the requested form, to specify if is add form, edit form, or detail form\n    if (self.params)\n    if (self.params.requestedForm)\n    result.addClass(self.params.requestedForm);\n\n    return result;\n  },\n  /*\r\n     *   Internal  rendering\r\n     */\n  internalRender: function internalRender() {\n    var self = this;\n\n    // Render the container\n    var html = self.renderContainerHtml();\n\n    // Convert html string to jquery object\n    var container = self.container = $(html);\n\n    // Post-render\n    self.postRenderContainer(container);\n\n    return self.container;\n  },\n  /*\r\n     *   Renders container html\r\n     */\n  renderContainerHtml: function renderContainerHtml() {\n    var self = this;\n    // Start rendering deferred\n    self.renderingDeferred = self.renderingDeferred || new $.Deferred();\n\n    return this.renderContainer();\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred)\n    return false;\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.container))\n    alert(\"container hasn't been rendered!\");\n\n    return this.container;\n  },\n  /*\r\n     *   Set container defaults\r\n     */\n  applyContainerDefaults: function applyContainerDefaults() {\n    var self = this,\n    properties = self.properties;\n\n    // Set customizations\n    if (properties.backgroundColor)\n    self.changeBackgroundColor(properties.backgroundColor);\n\n    // Set editability and visiblity\n    if (!properties.visible)\n    self.changeVisibility(properties.visible);\n  },\n  /*\r\n     *  Changes background color\r\n     */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var properties = self.properties;\n\n    properties.backgroundColor = color;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.changeBackgroundColor(color);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeBackgroundColor(color);\n      }\n    });\n  },\n  /*\r\n     *   Hides / Show container\r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    // Hide - show the render\n    if (properties.visible) {\n      self.container.show();\n\n    } else {\n      self.container.hide();\n    }\n  },\n  /* Changes editability */\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        $.when(child.ready()).done(function () {\n          child.changeEditability(argument);\n        });\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeEditability(argument);\n      }\n    });\n  },\n  /*\r\n     *   Replaces a <x/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceTag: function replaceTag(container, tag, replace) {\n    bizagi.util.replaceSelector(container, tag, replace);\n  },\n  /*\r\n     *   Replaces a <children/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceChildrenTag: function replaceChildrenTag(container, replace) {\n    this.replaceTag(container, \".children\", replace);\n  },\n  /*\r\n     *   Replaces a {{children}} string in the specified element\r\n     */\n  replaceChildrenHtml: function replaceChildrenHtml(html, replace) {\n    return html.replaceFirstWithoutPatterns(\"{{children}}\", replace);\n  },\n  /*\r\n     *   Template method to render the container layout, returns a string with all the builded html,\r\n     *   must be overriden in all children\r\n     */\n  renderContainer: function renderContainer() {\n  },\n  /*\r\n     *   Template method to process each jquery object\r\n     *   must be overriden in each container\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n      self.applyPlaceHolderPolyfill();\n\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  },\n\n  applyPlaceHolderPolyfill: function applyPlaceHolderPolyfill() {\n    var self = this;\n    var config = window.placeHolderConfig || {};\n    if (('placeholder' in $('<input>')[0] || 'placeHolder' in $('<input>')[0]) && !config.forceApply) {\n      // don't run the polyfill when the browser has native support\n      return;\n    }\n    Placeholders.enable();\n  },\n  /*\r\n     *   Process container children\r\n     */\n  executeChildrenPostRender: function executeChildrenPostRender(container) {\n    var self = this;\n    var childrenElements = container.children();\n\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n          child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n          child.postRenderContainer(childElement);\n        }\n      } else {\n        self.executeChildrenPostRender(childElement);\n      }\n    });\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n\n  },\n  /**\r\n      *   Renders all children html\r\n      */\n  renderChildrenHtml: function renderChildrenHtml() {\n    var self = this;\n    var temp = \"\";\n\n    $.each(self.children, function (i, child) {\n      var type = child.getElementType();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n      temp += child.renderElement();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n      temp += child.renderContainerHtml();\n      self.childrenHash[child.properties.uniqueId] = child;\n    });\n\n    return temp;\n  },\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     */\n  collectRenderValues: function collectRenderValues(renderValues) {\n    var self = this;\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.collectRenderValues(renderValues);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n          // Check if the render can be sent to the server\n          if (child.canBeSent()) {\n            child.collectData(renderValues);\n          }\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Iterate through all the renders and check if has changed\r\n     */\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    result = result || [];\n\n    if (!result.length) {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          if (result.length || child.hasChanged(result)) {\n            return false;\n          }\n        });\n      }\n    } else {\n      return result;\n    }\n  },\n\n  /*\r\n     *    Creates a json array parameters to search result\r\n     */\n  collectRenderValuesQueryForm: function collectRenderValuesQueryForm(renderValues) {\n    var self = this;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.collectRenderValuesQueryForm(renderValues);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        // Check if the render can be sent to the server\n        if (child.canBeSentQueryForm()) {\n          child.collectDataQueryForm(renderValues);\n        }\n      }\n    });\n  },\n  /*\r\n     *   Gets the first child\r\n     */\n  firstChild: function firstChild() {\n    return this.children[0];\n  },\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath, renders) {\n    var self = this;\n\n    renders = renders || [];\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.getRenders(xpath, renders);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        if (xpath == child.properties.xpath) {\n          renders.push(child);\n        }\n      }\n    });\n\n    return renders;\n  },\n  /*\r\n     *   Gets the first editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var result = null;\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        if (result == null)\n        result = render;\n      }\n    });\n\n    // if no render has been found, skip editable condition\n    if (result == null) {\n      $.each(renders, function (i, render) {\n        result = render;\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n      *   Gets all renders by xpath\r\n      */\n  getRendersByXpath: function getRendersByXpath(xpath) {\n    var self = this;\n    return self.getRenders(xpath);\n  },\n\n  /*\r\n     *   Gets a container by the id\r\n     */\n  getContainer: function getContainer(id) {\n    var self = this;\n\n    if (self.properties.id == id)\n    return this;\n\n    var result;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        var o = child.getContainer(id);\n        if (o != null) {\n          result = o;\n          return false;\n        }\n      }\n    });\n\n    return result;\n  },\n  /*\r\n     *   Validate all renders in the container\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            child.isValid(invalidElements);\n          }\n        }\n      });\n    }\n\n    return invalidElements.length == 0;\n  },\n\n  /*\r\n     *   Validate all grids in the container\r\n     */\n  hasValidGrids: function hasValidGrids(invalidElements) {\n    var self = this;\n\n    $.each(self.children, function (i, child) {\n      if (child.properties.visible) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.hasValidGrids(invalidElements);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER && typeof child.grid != \"undefined\") {\n          // Go to the render\n          child.isValid(invalidElements);\n        }\n      }\n    });\n\n    return invalidElements.length == 0;\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready to save\r\n     */\n  isReadyToSave: function isReadyToSave() {\n    var self = this;\n    var childrenPromises = $.map(self.children, function (child) {\n      return child.isReadyToSave();\n    });\n    return $.when.apply($, childrenPromises);\n  },\n  /*\r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        var result = child.getFocus();\n        if (!bizagi.util.isEmpty(result)) {\n          focus = result;\n        }\n      }\n    });\n\n    return focus;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n  },\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n\n    // Iterate through elements\n    var timeOutChildrenDispose = setTimeout(function () {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          child.dispose();\n        });\n      }\n      clearTimeout(timeOutChildrenDispose);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  /*\r\n     *   Refresh the current container\r\n     */\n  refreshContainer: function refreshContainer(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      contexttype: self.properties.contexttype || \"\",\n      idForm: form && form.properties && form.properties.id ? form.properties.id : \"\" //To fix BA56877.\n    })).done(function (data) {\n\n      if (!self.isDisposed()) {\n        self.saveChildrenVisualChanges(self);\n\n        // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n        self.unregisterChildren();\n        delete self.children;\n        delete self.childrenHash;\n\n        self.getFormContainer().removeActions();\n\n        // update editable\n        if (self.properties.editable === false) {\n          data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n        }\n\n        // Update the data\n        self.initializeData(data.container);\n\n        // Render the container again\n        var currentContainer = self.container;\n        var result = self.render();\n\n        if (self.properties.type == \"tabItem\") {\n          $(result).addClass(\"childrenActive\");\n        }\n\n        currentContainer.replaceWith(result);\n\n        // Rebind the actions\n        var actions = data.container && data.container.actions ? data.container.actions : [];\n        self.getFormContainer().refreshActions(actions);\n\n        self.triggerChildrenActions();\n        self.restoreChildrenVisualChanges(self);\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          self.restoreContainerAppearance(data.container);\n        }\n\n        // Execute personalized stuff after to refresh it\n        self.afterToRefresh();\n\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the current container\r\n      */\n  refreshDesignContainer: function refreshDesignContainer(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh(data);\n    //self.setActiveTab(data.elements);\n\n    $.extend(data.properties, {\n      editable: properties.editable,\n      contexttype: properties.contexttype || \"\",\n      idPageCache: properties.idPageCache,\n      idRender: properties.id,\n      messageValidation: properties.messageValidation,\n      uniqueId: properties.uniqueId,\n      visible: properties.visible,\n      xpath: properties.xpath,\n      mode: \"design\",\n      xpathContext: properties.xpathContext || \"\" });\n\n\n\n    if (!self.isDisposed()) {\n      // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n      self.unregisterChildren();\n      delete self.children;\n      delete self.childrenHash;\n\n      // update editable\n      if (self.properties.editable === false) {\n        data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n      }\n\n      // Update the data\n      self.initializeData(data.container);\n\n      // Render the container again\n      var currentContainer = self.container;\n      var result = self.render();\n\n      if (self.properties.type == \"tabItem\") {\n        $(result).addClass(\"childrenActive\");\n      }\n\n      currentContainer && currentContainer.replaceWith(result);\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh();\n    }\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].beforeToRefresh();\n    }\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].afterToRefresh();\n    }\n  },\n\n  /*\r\n     *   Re-execute children actions\r\n     */\n  triggerChildrenActions: function triggerChildrenActions() {\n    var self = this;\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.triggerChildrenActions();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.triggerRenderChange({ changed: false });\n      }\n    }\n  },\n\n\n  /*\r\n     * register actions container\r\n     */\n  registerActions: function registerActions(actions) {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (actions) {\n      form.actionController.buildActions(actions);\n    }\n  },\n\n  /*\r\n     * unregister children container\r\n     */\n  unregisterChildren: function unregisterChildren() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.unregisterChildren();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        form.unregisterRender(child);\n      }\n    }\n  },\n  /*\r\n     * Replace child\r\n     */\n  replaceChild: function replaceChild(element) {\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.uniqueId == element.properties.uniqueId) {\n        children.splice(i, 1);\n        children.splice(i, 0, element);\n        break;\n      }\n    }\n  },\n  /*\r\n     * Gets child\r\n     */\n  getChildById: function getChildById(id) {\n\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.id == id) {\n        return child;\n      }\n    }\n\n    return null;\n  },\n\n  /**\r\n      * Restore appearance of container\r\n      * @param data\r\n      */\n  restoreContainerAppearance: function restoreContainerAppearance(data) {\n    var self = this;\n\n    self.restoreAppearance();\n\n    (data.elements || []).forEach(function (element) {\n      if (element.container) {\n        self.restoreContainerAppearance(element.container);\n      } else if (element.render) {\n        self.restoreElementAppearance(element.render);\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore appearance of control\r\n      * @param data\r\n      */\n  restoreElementAppearance: function restoreElementAppearance(data) {\n    var self = this;\n    var element = self.getChildById(data.properties.id);\n\n    if (!!element) element.restoreAppearance();\n  },\n\n  /**\r\n      * Save visual changes of children\r\n      * @param data\r\n      */\n  saveChildrenVisualChanges: function saveChildrenVisualChanges(data) {\n    var self = this;\n    self.childrenVisualChanges = self.childrenVisualChanges || {};\n\n    (data.children || []).forEach(function (element) {\n      var type = element.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n        self.saveChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore visual changes of children\r\n      * @param data\r\n      */\n  restoreChildrenVisualChanges: function restoreChildrenVisualChanges(data) {\n    var self = this;\n\n    (data.children || []).forEach(function (element) {\n\n      var type = element.getElementType();\n      var visualChanges = self.childrenVisualChanges && self.childrenVisualChanges[element.properties.id] || {};\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        element.visualChanges = visualChanges;\n        self.restoreChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        element.visualChanges = visualChanges;\n      }\n\n    });\n\n    delete self.childrenVisualChanges;\n  } });","/**\r\n * Render a new type of form called template\r\n *\r\n * @author Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.formTemplate\", {\n\n  /**\r\n                                                   *   Constructor\r\n                                                   */\n  init: function init(params) {\n    this._super(params);\n    if (params.paramsRender && params.paramsRender.contextEvent) {\n      self.contextEvent = params.paramsRender.contextEvent;\n    }\n  },\n\n  /**\r\n      * Process controls on template\r\n      * @param template\r\n      * @param controls\r\n      * @return {*}\r\n      */\n  processTemplate: function processTemplate(template, controls) {\n    var regexControl = /\\{\\{([\\w:]*)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\})\\}\\}/g;\n    var regexRepeater = /\\{\\{(((repeater)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\}))|([\\/repeater]+:item)|(\\/repeater)|(repeater)|(separator))\\}\\}/g;\n\n    // Remove all repeaters key words\n    var processedTemplate = template.replace(regexRepeater, \"\");\n\n    // replace controls\n    processedTemplate = processedTemplate.replace(regexControl, function (match, g1, g2, offset, string) {\n      var parameters = JSON.parse(g2);\n\n      return controls[parameters.id] || '';\n    });\n\n    processedTemplate = processedTemplate.replace(/{{([\\w:]*)\\s*}}/g, function () {\n      return '';\n    });\n\n\n    return processedTemplate;\n  },\n\n  /**\r\n      * Render layout container\r\n      * @return {*}\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var layoutCollection = self.getRenderByType(\"layout\");\n    var layout = layoutCollection.length > 0 ? layoutCollection[0] : {};\n    var template = typeof layout.getTemplate == \"function\" ? layout.getTemplate() : \"\";\n    var css = typeof layout.getCss == \"function\" ? layout.getCss() : \"\";\n    var mode = self.getMode();\n    var layoutGuid = self.properties.layoutguid || Math.guid();\n\n    var controls = {};\n\n    /**\r\n                        * Render all elements within first layout container\r\n                        */\n    if (layout.children) {\n      $.each(layout.children, function (i, child) {\n        // ignore layoutPlaceholder control in execution\n        if (!(mode == 'execution' && child.properties.type == 'layoutPlaceholder')) {\n\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            controls[child.properties.id] = child.renderElement();\n          }\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            controls[child.properties.id] = child.renderContainerHtml();\n          }\n          self.childrenHash[child.properties.uniqueId] = child;\n        }\n      });\n    }\n\n    // Load css\n    bizagi.util.loadStyle(css, layoutGuid);\n\n    return self.processTemplate(template, controls);\n  },\n\n  /**\r\n      * Get the context in which loads the formTemplate\r\n      *\r\n      */\n  getContextEvent: function getContextEvent() {\n    return self.contextEvent;\n  } });","$.Class.extend(\"bizagi.rendering.layout\", {}, {\n\n  /**\r\n                                                 * Get html template\r\n                                                 * @return {*}\r\n                                                 */\n  getTemplate: function getTemplate() {\n    var self = this;\n    var mode = self.getMode();\n    var html = self.properties.html || \"\";\n\n    // Add a container, this is important in design to calculate the scroll \n    if (mode == 'design' && html) {\n      html = \"<div class='bz-design-template'>\" + html + \"</div>\";\n    }\n\n    return bizagi.util.stripslashes(html);\n  },\n\n  /**\r\n      * Get string css of layout container\r\n      * @return {*}\r\n      */\n  getCss: function getCss() {\n    var self = this;\n    var css = self.properties.css || \"\";\n\n    var mode = self.getMode();\n    if (mode == \"design\") {\n      css = css && css.desktop;\n    }\n\n    return bizagi.util.stripslashes(css);\n  },\n\n\n  /*\r\n      *   Template method to process each jquery object\r\n      *   must be overriden in each container\r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  } });","/*\r\n*   Name: BizAgi Accordion Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordion\", {}, {\n\n  /*\r\n                                                   *   Constructor\r\n                                                   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Enumerate the children appending a property\n    $.each(self.children, function (i, child) {\n      child.properties.ordinal = i;\n    });\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"accordion\");\n\n    // Render the accordion\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: BizAgi Accordion Item Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion item class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordionItem\", {}, {\n\n  /*\r\n                                                       *   Render the container layout\r\n                                                       */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"accordionItem\");\n\n    // Render the accordionItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      ordinal: properties.ordinal,\n      displayName: properties.displayName,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Fires when the accordionItem is selected \r\n     */\n  activate: function activate() {\n    var self = this;\n    self.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  } });","/*\r\n*   Name: Bizagi Group Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a group container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.group\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property \n    properties.cssclass = properties.cssclass || \"cssClassContainer\";\n\n    properties.collapse = typeof properties.collapse != \"undefined\" && bizagi.util.parseBoolean(properties.collapse) ? true : false;\n  },\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"group\");\n\n    // Define icons\n    self.expandedIcon = self.getExpandedIcon();\n    self.collapsedIcon = self.getCollapsedIcon();\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      expandedClassIcon: self.expandedIcon,\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      collapse: properties.collapse,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      cssclass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Returns the expanded icon\r\n     */\n  getExpandedIcon: function getExpandedIcon() {},\n\n  /*\r\n                                                  *   Returns the collapsed icon\r\n                                                  */\n  getCollapsedIcon: function getCollapsedIcon() {},\n\n  /* \r\n                                                    *   Expands or collapse the container \r\n                                                    */\n  toogleContainer: function toogleContainer(argument, bImmediate) {} });","/*\r\n *   Name: Bizagi Section Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a section container class for all devices\r\n */\n\n$.Class.extend(\n\"bizagi.rendering.section\",\n{},\n{\n  /**\r\n   * Constructor\r\n   * @param {object} params - section information\r\n   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n    properties.displayAs = properties.displayAs || \"section\";\n  },\n\n  /**\r\n      * Render the trigger of the section.\r\n      * @returns string with html code.\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = this.renderFactory.getTemplate(\"section-header\");\n\n    // Render the section trigger\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      guid: properties.guid });\n\n    this.sectionContent = $(this.renderSectionContent())[0];\n    return html;\n  },\n\n  /**\r\n      * Render the content of the section.\r\n      * Overwritable on devices.\r\n      */\n  renderSectionContent: function renderSectionContent() {},\n\n  /**\r\n                                                             * Return the breadcrumb of the section.\r\n                                                             * @returns An array with breadcrumb. For example: [\"activity\", \"parent section\", \"child section\"]\r\n                                                             */\n  getBreadcrumb: function getBreadcrumb() {\n    var container = this;\n    var breadCrumb = [];\n\n    while (container) {\n      var properties = container.properties || {};\n      var params = container.params || {};\n\n      if (properties.type === \"section\") {\n        var displayName = properties.displayName ? properties.displayName : \"\";\n        breadCrumb.unshift(displayName);\n      } else if (params.type === \"form\") {\n        breadCrumb.unshift(this.getResourceByKey(\"render-section-breadcrumb-main-form\", \"Main form\"));\n      }\n      container = container.parent;\n    }\n    return breadCrumb;\n  },\n\n  /**\r\n      * Gets the display name of the previous section or form.\r\n      * @returns String with the display name\r\n      */\n  getParentDisplayName: function getParentDisplayName() {\n    var self = this;\n    var parent = self.getSectionParent(self.parent);\n    var displayName = \"\";\n\n    //TODO Improve this code implementation \n    if (parent.properties.type == \"form\") {\n      if (parent.properties.formtype && parent.properties.formtype == \"startform\") {\n        displayName = parent.params && parent.params.originalParams && parent.params.originalParams.displayName ? parent.params.originalParams.displayName : \"\";\n      } else\n      {\n        displayName = parent.properties.displayName || parent.params.displayName || parent.params.radNumber || parent.params.idCase;\n      }\n    } else {\n      displayName = parent.properties.displayName || \"\";\n    }\n\n    return displayName;\n  },\n\n  /**\r\n      * Gets the section's parent.\r\n      * @returns Object parent\r\n      */\n  getSectionParent: function getSectionParent(parent) {\n    if (parent.properties.type === \"section\" || !parent.parent) {\n      return parent;\n    } else {\n      return this.getSectionParent(parent.parent);\n    }\n  },\n\n  /**\r\n      * Gets if the section's  orientation is RTL.\r\n      * @returns Object\r\n      */\n  getSectionOrientationRTL: function getSectionOrientationRTL(obj) {\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"ltr\") return false;\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"rtl\") return true;\n    if (obj.parent) return this.getSectionOrientationRTL(obj.parent);\n    return false;\n  } });","/*\r\n*   Name: BizAgi Horizontal Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a tab item class for all devices\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.horizontal\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"horizontal\");\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.panel\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n\n    if (properties.type == \"nestedForm\") {\n      var formContainer = self.getFormContainer();\n      formContainer.rendersById[properties.idForm] = self;\n    }\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"panel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      loading: properties.loading,\n      message: properties.message,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssClass: properties.cssclass });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set height\n    if (properties.height) {\n      panel.height(properties.height);\n    }\n\n    // Call base\n    self._super(panel);\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.contentPanel\", {}, {\n\n  /*\r\n                                                      *   Constructor\r\n                                                      */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"contentPanel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      mode: self.getMode(),\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      cssClass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    // Call base\n    this._super(panel);\n  } });","/**\r\n *   Name: Bizagi Panel Container Class\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will define a panel container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.searchForm\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"searchForm\");\n\n    if (properties.contexttype !== \"entity\" && self.parent) {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n\n    // Render result\n    html = html.replaceFirstWithoutPatterns(\"{{result}}\", self.renderResult());\n\n    return html;\n  },\n\n  /*\r\n     *   Perform a search and render the results\r\n     */\n  performSearch: function performSearch(searchParams) {\n    var properties = this.properties;\n\n    // Set parameter to search\n    properties.searchParams = searchParams;\n\n    // Submit the search to the server\n    this.submitSearch();\n  },\n\n  /*\r\n     *   Submits the query to the server\r\n     */\n  submitSearch: function submitSearch() {\n    // Makes the results to update its contents\n    this.refreshResults();\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    return this.parent.ready();\n  },\n\n  /*\r\n     *   Method to fill the result data\r\n     *   (THIS IS CALLED WITHIN GRID RENDER SCOPE)\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Collect data\n    var data = self.collectSearchValues();\n\n    if (bizagi.util.isMapEmpty(data)) {\n      bizagi.showMessageBox(this.getResource(\"render-search-advanced-no-filters\"), this.getResource(\"render-form-dialog-box-search\"), \"error\");\n      return null;\n    }\n\n    params.rows = properties.searchParams && properties.searchParams.maxRecords && properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : params.rows;\n\n    // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)         \n    if (properties.searchParams && typeof properties.searchParams.maxRows !== \"undefined\") {\n      params.rows = properties.searchParams.maxRows || params.rows;\n    }\n\n    // Resolve with remote data\n    self.dataService.submitSearch($.extend(params, {\n      url: properties.dataUrl,\n      idRender: properties.idRender,\n      idPageCache: properties.idPageCache,\n      idSearchForm: properties.id,\n      allowFullSearch: properties.searchParams.allowFullSearch ? properties.searchParams.allowFullSearch : null,\n      maxRecords: properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : null,\n      criteria: data })).\n\n    done(function (response) {\n\n      // Resolve with fetched data    \n      properties.page = response.page;\n      properties.records = response.records;\n      properties.totalPages = response.totalPages || 0;\n\n      //In tablets are allowed about 10000 records as maximum\n      if (response.records > 10000) {\n        properties.deviceMaxRecordsExceeded = true;\n        response.deviceMaxRecordsExceeded = true;\n      } else {\n        delete properties.deviceMaxRecordsExceeded;\n      }\n\n      defer.resolve(response);\n\n      // Call virtual method\n      self.onSearchFinished();\n    }).fail(function (errorObject) {\n      bizagi.showErrorAlertDialog = false;\n      if (errorObject.responseText) {\n        try {\n          var message = JSON.parse(errorObject.responseText).message;\n          bizagi.showMessageBox(message, \"\", \"error\");\n        } catch (e) {\n        }\n      }\n      defer.reject();\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     *   - Overriden because server needs this in array\r\n     */\n  collectSearchValues: function collectSearchValues() {\n    var self = this;\n\n    // Collect data\n    var data = {};\n    this.collectRenderValues(data);\n\n    // Changes to array\n    var submitArray = [];\n    for (key in data) {\n      var xpath = key;\n      var value = data[key];\n      var operation = self.getCriteriaOperation(self.getRender(xpath));\n      var criteriaData = {};\n      if (!bizagi.util.isEmpty(value)) {\n        criteriaData[\"xpath\"] = xpath;\n        criteriaData[\"value\"] = value;\n        criteriaData[\"operation\"] = operation;\n        submitArray.push(criteriaData);\n      }\n    }\n\n    return submitArray;\n  },\n\n  /*\r\n     *   This method find out the criterial operation to be executed according to\r\n     *   data type. Text renders use LIKE operation, but other data types such like\r\n     *   numerics use exact match operatiors\r\n     */\n  getCriteriaOperation: function getCriteriaOperation(render) {\n    var self = this;\n    var properties = self.properties;\n\n    var operation = \"EQUALS\";\n    if (render.properties.dataType == \"15\") {\n      if (typeof render.properties.typeSearch === \"undefined\" || render.properties.typeSearch === \"approx\") {\n        if (properties.allowFullSearch) {\n          operation = \"FULLLIKE\";\n        } else {\n          operation = \"LIKE\";\n        }\n      }\n    }\n    return operation;\n  },\n\n  /*\r\n     *   Render the result controls for the query\r\n     *   Resolved in each device\r\n     */\n  renderResult: function renderResult() {\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n  },\n\n  /*\r\n     *   Function to parse the dataType\r\n     */\n  parseAdditionalProperties: function parseAdditionalProperties(dataType) {\n\n    // Number\n    if (dataType == 1 || dataType == 2 || dataType == 3 ||\n    dataType == 4 || dataType == 6 || dataType == 7 ||\n    dataType == 10 || dataType == 11) {\n      return { type: \"columnNumber\" };\n    }\n\n    // Oracle Number\n    if (dataType == 29) {\n      return { type: \"columnNumberScientificNotation\" };\n    }\n\n    // Money\n    if (dataType == 8) {\n      return { type: \"columnMoney\" };\n    }\n\n    // Date\n    if (dataType == 12 || dataType == 13) {\n      return { type: \"columnDate\" };\n    }\n\n    // Boolean\n    if (dataType == 5) {\n      return { type: \"columnBoolean\" };\n    }\n\n    // Text\n    return { type: \"columnText\" };\n  },\n\n  /*\r\n     *\r\n     */\n  onSearchFinished: function onSearchFinished() {\n    // Empty function, overrided for Tablet version for now\n  } });","/*\r\n *   Name: BizAgi Tab Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a tab container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tab\", {}, {\n\n  /*\r\n                                              *   Constructor\r\n                                              */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Default properties\n    var properties = self.properties;\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property\n    properties.cssclass = properties.cssclass || \"\";\n  },\n\n  /*\r\n      *   Render the container layout\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var tabItems = $.map(self.children, function (child, key) {\n      child.properties.counter = key;\n      child.properties.tooltip = child.properties.tooltip || child.properties.displayName || \"\";\n      return child.properties;\n    });\n    var template = self.renderFactory.getTemplate(\"tab\");\n    var mode = self.getMode();\n\n    // Render the tab\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      tabs: tabItems,\n      mode: mode,\n      isDesign: self.getMode() !== \"execution\",\n      editable: properties.editable,\n      tabOrientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssclass: properties.cssclass });\n\n\n    // Get active container based on focus\n    var activeTab = self.activeTab = self.getActiveTab();\n\n    // Render children\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      self.children[i].properties.loadOnDemand = i != activeTab;\n    }\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n      *   Return the active tab containing the focus, or the first tab\r\n      */\n  getActiveTab: function getActiveTab() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = this.getFormContainer().getParams();\n    var mode = self.getMode();\n\n    if (mode === \"execution\") {\n      if (!formParams.isRefresh && properties.activeTab) {\n        self.getFormContainer().setFocusedElement(properties.activeTab);\n      }\n    }\n\n    var selectedTabs = formParams && formParams.selectedTabs ? formParams.selectedTabs : {};\n\n    // Fetch from selected tabs collection\n    if (selectedTabs[self.properties.id] >= 0) {\n      return selectedTabs[self.properties.id];\n    }\n\n    // Check for focused elements\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      if (self.children[i].containsFocusedElement()) return i;\n    }\n    return 0;\n  },\n\n  /**\r\n      * Update position of tab\r\n      * @param index\r\n      */\n  setActiveTab: function setActiveTab(index) {\n    var self = this;\n\n    self.triggerHandler(\"selected\", { index: index, tab: self.children[index] });\n\n    if (self.children[index]) {\n      var form = self.getFormContainer();\n\n      self.children[index].activate();\n      self.activeTab = index;\n\n      var selectedTab = {};\n      selectedTab[self.children[index].parent.properties.id] = index;\n      form.setParam(\"selectedTabs\", selectedTab);\n    }\n  } });","/**\r\n *   Name: Bizagi Tab Item Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a tab item class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tabItem\", {}, {\n\n  /*\r\n                                                 *   Render the container layout\r\n                                                 */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"tabItem\");\n\n    // Render the tabItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      uniqueId: properties.uniqueId,\n      counter: properties.counter,\n      tabOrientation: properties.orientation,\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    // Render content\n    html = self.renderTabContent(html);\n\n    return html;\n  },\n\n  /*\r\n     * Renders the tab content\r\n     */\n  renderTabContent: function renderTabContent(html) {\n    // Render children\n    return this.replaceChildrenHtml(html, this.renderChildrenHtml());\n  },\n\n  /*\r\n     *   Fires when the tab is selected \r\n     */\n  activate: function activate() {\n    this.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  },\n\n  /*\r\n     *   Return true if this tab contains the active focused element\r\n     */\n  containsFocusedElement: function containsFocusedElement() {\n    var self = this;\n    var focus = self.getFormContainer().getFocusedElement();\n\n    if (focus) {\n\n      // Locate element\n      if (focus.xpath) {\n        // Search by xpath and id\n        var elements = self.getFormContainer().getRenders(focus.xpath);\n        var element;\n\n        $.each(elements, function (i, item) {\n          // Just select editable control\n          if (item.properties.id == focus.id && item.properties.editable) {\n            element = item;\n          }\n        });\n      } else {\n        // Search just using id\n        var element = self.getFormContainer().getContainer(focus) || self.getFormContainer().getRenderById(focus);\n      }\n\n      // Search element parent\n      if (element) {\n        while (element.parent) {\n          if (element.properties.id == self.properties.id || element.parent.properties.id == self.properties.id) return true;\n          element = element.parent;\n        }\n      }\n    }\n\n    return false;\n  } });","/*\r\n *   Name: Bizagi Render Base Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a base render class with common stuff related to all renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.render.base\", {}, {\n\n  /**\r\n                                                      * Method to process the render the layout\r\n                                                      * @param {boolean} isLabelFormat\r\n                                                      * @param {string} format\r\n                                                      */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var properties = this.properties;\n\n    if (typeof isLabelFormat !== \"boolean\") {\n      console.warm(\"error calling processLayout, 'isLabelFormat' is not boolean\");\n      return;\n    }\n\n    if (isLabelFormat) {\n      this.processLabelLayout(format);\n    } else {\n      this.processControlLayout(format);\n\n      // Set required and visiblity\n      properties.required = typeof properties.required !== \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n      var visible = typeof properties.visible !== \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n      if (properties.required) {\n        this.changeRequired(properties.required);\n      }\n\n      if (!visible) {\n        this.changeVisibility(visible);\n      }\n    }\n  },\n\n  /**\r\n      * Method to process the label in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processLabelLayout: function processLabelLayout(format) {\n    var $label = this.getLabel();\n    if ($label == null) return;\n\n    // Set customizations\n    format = format || {};\n    if (typeof format.bold === \"undefined\") {\n      format.bold = true; // Default value\n    }\n\n    this.changeBackgroundColor(format.background).\n    changeFontColor($label, format.color).\n    changeFontBold($label, format.bold).\n    changeFontSize($label, format.size).\n    changeFontItalic($label, format.italic).\n    changeTextDecoration($label, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Method to process the control in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processControlLayout: function processControlLayout(format) {\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    // Set customizations\n    format = format || {};\n\n    this.changeFontColor($elements, format.color).\n    changeFontBold($elements, format.bold).\n    changeFontItalic($elements, format.italic).\n    changeFontSize($elements, format.size).\n    changeTextDecoration($elements, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $label = this.getLabel();\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    return this.\n    changeFontColor($label, color).\n    changeFontColor($elements, color);\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} $element\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeFontColor: function changeFontColor($element, color) {\n    if ($element === undefined) return this;\n    if (color === undefined) return this;\n\n    var style = color !== \"none\" ? color : \"\";\n    $element.css(\"color\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font size property\r\n      * @param {} $element\r\n      * @param {} size\r\n      * @returns {}\r\n      */\n  changeFontSize: function changeFontSize($element, size) {\n    if (size === undefined) return this;\n    if ($element === undefined) return this;\n\n    if (size !== \"0\") {\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      $element.css(\"font-size\", newFontSize);\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font italic style\r\n      * @param {} $element\r\n      * @param {} italic\r\n      * @returns {}\r\n      */\n  changeFontItalic: function changeFontItalic($element, italic) {\n    var style = bizagi.util.parseBoolean(italic) ? \"italic\" : \"normal\";\n\n    $element.css(\"font-style\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font weight\r\n      * @param {} $label\r\n      * @param {} bold\r\n      * @returns {}\r\n      */\n  changeFontBold: function changeFontBold($label, bold) {\n    var style = bizagi.util.parseBoolean(bold) ? \"bold\" : \"normal\";\n\n    $label.css(\"font-weight\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.css(\"background-color\", color);\n    } else {\n      this.element.css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render cell background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    return this.getCellBackgroundFunction(this.properties.editable.toString(), this.properties.type)(color);\n  },\n\n  getCellBackgroundFunction: function getCellBackgroundFunction(editable, type) {\n    var options = {\n      'true': { //editable\n        'columnDate': this.changeInputBackgroundColor.bind(this) },\n\n      'false': { //no editable\n        'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n      },\n      'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n    };\n\n    return options[editable][type] || options['default'];\n  },\n\n  changeInputBackgroundColor: function changeInputBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", color);\n    } else {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel() {\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * \r\n      */\n  getRTLAlign: function getRTLAlign(align) {\n    if (typeof align == \"undefined\" || align == \"\") {\n      return \"default\";\n    }\n    return align;\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultLabelAlign: function getDefaultLabelAlign() {\n    return \"default\";\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultValueAlign: function getDefaultValueAlign() {\n    return \"default\";\n  } });","/*\r\n*   Name: Bizagi Render CollectionNavigator\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for collection navigator renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.collectionnavigator\", {}, {\n\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    self._super(params);\n\n    var properties = self.properties;\n    properties.allowAdd = typeof properties.allowAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.allowAdd) : true;\n    properties.withAddForm = properties.withAddForm && properties.allowAdd;\n    properties.allowEdit = typeof properties.allowEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.allowEdit) : true;\n    properties.withEditForm = properties.withEditForm && properties.allowEdit;\n    properties.allowDetail = typeof properties.allowDetail != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.inlineAdd = typeof properties.inlineAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineAdd) : true;\n    properties.inlineAdd = properties.inlineAdd && properties.allowAdd;\n    properties.inlineEdit = typeof properties.inlineEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineEdit) : true;\n    properties.inlineEdit = properties.inlineEdit && properties.allowEdit;\n    properties.allowDelete = typeof properties.allowDelete != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n\n    self.orientation = self.properties.orientation || \"ltr\",\n    self.data = self.properties.data;\n    self.keys = self.data ? self.getKeys(self.data.rows) : [];\n    self.pointer = 0;\n    self.totalRows = 0;\n    self.inlineAddRecords = [];\n\n    if (self.data) {\n      self.totalRows = self.data.rows.length;\n    }\n  },\n  /*\r\n     * Normalize keys\r\n     */\n  getKeys: function getKeys(rows) {\n    rows = rows || [];\n    var keys = [];\n\n    for (var i = 0, l = rows.length; i < l; i++) {\n      var row = rows[i];\n      keys.push(row[0]);\n    }\n    return keys;\n  },\n\n  /*\r\n     *   Render the control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var templateItem = \"collectionnavigator\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var mode = self.getMode();\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId,\n      displayName: properties.displayName ? properties.displayName : \"\",\n      id: properties.id,\n      guid: properties.guid,\n      showPreview: self.showPreview(),\n      mode: mode,\n      orientation: self.getFormContainer().properties.orientation });\n\n\n    html = self.drawControls(html);\n\n    return html;\n  },\n\n  /*\r\n     * Render version readonly of control\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /*\r\n     * Draw navigation controls\r\n     */\n  drawControls: function drawControls(html) {\n\n  },\n\n  /*\r\n     *  render several actions in the navigation palete\r\n     *  ex. save, cancel \r\n     */\n  drawActions: function drawActions(controls) {\n\n  },\n\n  /*\r\n     * Render navigation controls (next, previous, last, first. etc )\r\n     */\n  drawControl: function drawControl(controls) {\n\n  },\n\n  /*\r\n     * Draw forms options (add form, edit form, navigation form)\r\n     */\n  drawForms: function drawForms(controls) {\n\n  },\n\n  /*\r\n     * Draw a preview views, it will be show when the collection hasn't records\r\n     */\n  drawPreview: function drawPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var templateItem = mode === \"execution\" ? \"collectionnavigator-execution\" : \"collectionnavigator-preview\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var html = $.tmpl(template);\n\n    self.canvas.append(html);\n\n  },\n\n  /*\r\n     * Returns true if the collection has data\r\n     */\n  hasData: function hasData() {\n    return this.getTotalRows() > 0;\n  },\n\n  /*\r\n     * Returns the key of current row\r\n     */\n  getRow: function getRow() {\n    return this.keys[this.pointer];\n  },\n\n  /*\r\n     * Returns the key of next row\r\n     */\n  getNextRow: function getNextRow() {\n    var self = this;\n\n    if (self.getTotalRows() > self.pointer + 1)\n    self.pointer += 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of previous row\r\n     */\n  getPreviousRow: function getPreviousRow() {\n    var self = this;\n\n    if (self.pointer > 0)\n    self.pointer -= 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of first row\r\n     */\n  getFirstRow: function getFirstRow() {\n    var self = this;\n\n    self.pointer = 0;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of last row\r\n     */\n  getLastRow: function getLastRow() {\n    var self = this;\n\n    self.pointer = self.keys.length - 1;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the total numbers of rows in collection\r\n     */\n  getTotalRows: function getTotalRows() {\n    return this.keys.length;\n  },\n\n  getIndexes: function getIndexes() {\n    return this.properties.data.rows;\n  },\n\n  /*\r\n     * Sets the pointer to a specific position\r\n     */\n  setPointer: function setPointer(index) {\n    this.pointer = index - 1;\n  },\n\n  /*\r\n     * Returns true is there is a inline row pending to save\r\n     */\n  isTherePendingInlineRow: function isTherePendingInlineRow() {\n    return this.inlineAddRecords.length > 0;\n  },\n\n  /*\r\n     * Adds new row to collection\r\n     */\n  addKey: function addKey(newId) {\n    this.keys.push(newId);\n  },\n\n  /*\r\n     * Removes row in collection\r\n     */\n  removeKey: function removeKey() {\n    var self = this;\n    var index = self.pointer;\n\n    if (index >= 0) {\n      self.keys.splice(index, 1);\n\n      var totalRows = self.getTotalRows();\n      if (totalRows > 0 && index >= totalRows) {\n        self.setPointer(totalRows);\n      }\n    }\n  },\n\n  /*\r\n     * Returns true if the control should show the preview view\r\n     * ex. if the collection is empty \r\n     */\n  showPreview: function showPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    if (mode == \"execution\") {\n      return !self.hasData();\n    } else {\n      return !bizagi.util.parseBoolean(properties.navigationform);\n    }\n  },\n\n  /*\r\n     * Returns the parameters needed for the request\r\n     */\n  getParameters: function getParameters(params) {\n    var self = this;\n\n    var parameters = {};\n    var properties = self.properties;\n    var recordXpath = properties.xpath + \"[id=\" + params.id + \"]\";\n\n    parameters.idRender = properties.id;\n    parameters.recordXPath = recordXpath;\n    parameters.xpathContext = properties.xpathContext;\n    parameters.idPageCache = properties.idPageCache;\n    parameters.requestedForm = params.requestedForm;\n    parameters.contextType = properties.contextType || properties.contexttype;\n    parameters.url = params.url;\n    parameters.editable = params.editable;\n    orientation: properties.orientation || \"ltr\";\n\n\n    return parameters;\n  },\n\n  /*\r\n     *   Submits a collection navigator add record request\r\n     *   Returns a deferred when done, the server returns an id for the new record\r\n     */\n  submitAddRequest: function submitAddRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n\n  /*\r\n     *   Submits a edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype || '',\n      orientation: properties.orientation || \"ltr\" });\n\n  },\n\n  /*\r\n     *   Submits a collection delete record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n\n  /*\r\n     *   Submits a collection navigator edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + \"[id=\" + id + \"]\" : properties.xpath + \"[id=\" + id + \"]\";\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      if (!bizagi.util.isEmpty(data)) {\n        data.idPageCache = data.idPageCache || self.form.getPageCache();\n        self.dataService.saveGridRecord({\n          url: properties.saveUrl,\n          idRender: properties.id,\n          xpath: properties.xpath,\n          xpathContext: xpathContext,\n          contexttype: properties.contextType || properties.contexttype || \"\",\n          submitData: data }).\n        done(function (response) {\n          defer.resolve(response);\n        }).fail(function (dataFail) {\n          var form = self.getFormContainer();\n          var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n          //Convert String to object\n          if (typeof message == \"string\") {\n            try {\n              message = JSON.parse(message).message;\n            } catch (e) {\n              message = message.match(/\"message\":(.*)\",/)[0];\n              message = message.substr(11, message.length - 13);\n            }\n\n          } else if (!message.message) {\n            message = dataFail;\n          }\n          form.validateForm();\n          form.clearValidationMessages();\n          form.addValidationMessage(message);\n        });\n      } else {\n        defer.resolve();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Submits a collection navigator rollback request\r\n     *   Returns a deferred when done\r\n     */\n  submitRollbackRequest: function submitRollbackRequest(error) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: error.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache });\n\n\n\n    return self.dataService.getData(params);\n  },\n\n  isValid: function isValid(invalidElements) {\n    var form = this.form;\n\n    if (typeof form !== \"undefined\") {\n      (form.children || []).forEach(function (child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            if (!child.isValid(invalidElements)) {\n              var content = invalidElements[invalidElements.length - 1];\n              invalidElements[invalidElements.length - 1] = $.extend(content, {\n                id: child.properties.id });\n\n            }\n          }\n        }\n      });\n    }\n\n    return invalidElements.length === 0;\n  },\n\n  validateControls: function validateControls(invalidElements) {\n    if (!this.form) return false;\n    return this.form.validationController.performValidations(invalidElements);\n  } });","/**\r\n *   Name: Bizagi Render Check Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for check renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.check\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n\n    properties.showLetters = bizagi.override && bizagi.override.enableCheck === true && !properties.editable;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"check\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmpty(value)) return false;\n\n    var booleanValue = bizagi.util.parseBoolean(value);\n\n    return !(booleanValue === false && this.properties.required);\n  } });","/*\r\n*   Name: Bizagi Render Number Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.number\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.setGroupDigits();\n    properties.colorize = properties.colorizeOnNegative || false;\n    properties.dataTypeMinValue = this.calculateMinValue(properties.dataType);\n    properties.dataTypeMaxValue = this.calculateMaxValue(properties.dataType);\n\n    if (typeof properties.value != \"undefined\" && /[e][-+]/gi.test(properties.value) && Math.abs(parseFloat(properties.value)) < 1) {\n      properties.value = self.value = parseFloat(properties.value).toFixed(properties.numDecimals);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"number\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      editable: self.properties.editable,\n      value: bizagi.isMobile() ? self.getDisplayValue() : \"\", // Only apply to mobile because in the template value is required (Bug: 11624)\n      type: bizagi.util.isAndroidDevice() ? \"tel\" : \"text\", // Change type control for android device\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self._super();\n\n    var control = self.getControl();\n    var properties = self.properties;\n\n    self.numericInput = control.find(\"input\");\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numeric(self.properties.decimalSymbol);\n\n    // Attach event for retype double\n    if (properties.retype === \"double\") {\n      self.attachRetypeDouble();\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Attach Format Currency Plugin to format the input\n    this.attachFormatCurrency();\n  },\n\n  /**\r\n      * Removes Validation Messages\r\n      */\n  removeValidations: function removeValidations() {\n    var form = this.getFormContainer().parent || this.getFormContainer();\n\n    form.clearValidationMessages();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,smartphone...).\r\n      * @returns {}\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n  formatNumericInput: function formatNumericInput($input) {\n    var self = this;\n    var properties = self.properties;\n    var message = bizagi.localization.getResource(\"render-number-retype-fail\");\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController == \"undefined\") {\n      var $canvas = form.getValidationsContainer();\n      form.validationController = new bizagi.command.controllers.validation(form, self.validations, $canvas);\n    }\n\n    var validationController = form.validationController || form.parent.validationController;\n    var decimalSeparator = \".\";\n    var digitGroupSeparator = \",\";\n\n    if (typeof BIZAGI_DEFAULT_CURRENCY_INFO == \"undefined\") {\n      decimalSeparator = self.getResource(\"numericFormat\").decimalSymbol || \".\";\n      digitGroupSeparator = self.getResource(\"numericFormat\").digitGroupSymbol || \",\";\n    } else\n    {\n      decimalSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator;\n      digitGroupSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator;\n    }\n\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (properties.percentage) self.numericInput.val(self.numericInput.val().replace(\"%\", \"\"));\n    var inputValue = self.numericInput.val();\n    inputValue = decimalSeparator == \",\" ? inputValue.replace(/\\,0+$/, '') : inputValue.replace(/\\.0+$/, '');\n    inputValue = inputValue.replace(properties.symbol, \"\");\n    //Replace all the ocurrences of the digitGroupSeparator\n    inputValue = bizagi.util.replaceAll(inputValue, digitGroupSeparator, \"\");\n    if (inputValue.toString().indexOf(decimalSeparator) != -1) {\n      if (decimalSeparator == \",\") inputValue = inputValue.replace(/([0-9]+(\\,[0-9]+[1-9])?)(\\,?0+$)/, '$1');\n      if (decimalSeparator == \".\") inputValue = inputValue.replace(/([0-9]+(\\.[0-9]+[1-9])?)(\\.?0+$)/, '$1');\n    }\n\n    if (inputValue != undefined && inputValue.length > 0) self.numericInput.val(inputValue);\n\n    if (/(.+)-$/.test(inputValue)) {\n      inputValue = inputValue.replace(/(.+)-$/, '-$1');\n      self.numericInput.val(inputValue);\n    }\n\n    var inputLength = inputValue.replace(/[^0-9]+/g, \"\").length;\n    var xPath = self.properties.xpath;\n    var oldVal = self.numericInput.val();\n\n\n    if (self.isInvalidFormat != null && self.isInvalidFormat == true ||\n    inputValue != \"\" && [\"$\", \"£\", \"€\", \"¥\", properties.symbol].indexOf(inputValue) != -1) {\n      self.setValue(\"\");\n      self.getControl().find(\"input\").val(\"\");\n      self.numericInput.val(\"\");\n      return;\n    }\n\n    if (bizagi.util.trim(inputValue) == \"\") {\n      self.setValue(\"\");\n      return;\n    }\n\n    //The \",\" is changed to \".\" For the correct operation of \"parseFloat ()\"\n    var tempValue = parseFloat(inputValue.replace(\",\", \".\"));\n    if (isNaN(tempValue)) {\n      tempValue = self.numericInput.asNumber();\n    }\n\n    if (minValue !== undefined && minValue != null && tempValue < minValue) {\n      message = bizagi.localization.getResource(\"render-numeric-minimum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#minValue#\", minValue.toString());\n    } else\n    if (maxValue !== undefined && maxValue !== null && tempValue > maxValue) {\n      message = bizagi.localization.getResource(\"render-numeric-maximum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#maxValue#\", maxValue.toString());\n    } else\n    message = message + \" \" + oldVal + \"\";\n\n\n    // Do datatype validations\n    if (\n    minValue !== undefined && minValue !== null && tempValue < minValue ||\n    maxValue !== undefined && maxValue !== null && tempValue > maxValue ||\n    self.properties.dataType == 10 && inputLength > 15 ||\n    self.properties.dataType == 1 && inputLength > 19 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    oldVal.match(/[^$£€¥,-.()\\d]/))\n    {\n      if (typeof validationController != \"undefined\" && validationController != null) {\n        self.removeValidations();\n\n        var messageToShow = message;\n        if (messageToShow.indexOf(oldVal) === -1) {\n          messageToShow = message + \" \" + oldVal + \"\";\n        }\n\n        validationController.showValidationMessage(messageToShow, xPath);\n        self.isValidRender = false;\n        self.isValidRenderMessage = messageToShow;\n      }\n      message = message.replace(oldVal, \"\");\n      return;\n    } else\n    {\n      self.isValidRender = true;\n      self.isValidRenderMessage = \"\";\n    }\n\n    // Fix decimals specially when it starts with 0 (0000234 -> 234, 00000 -> 0)\n    if ($input.value.toString().length > 0 && !properties.allowDecimals && !properties.groupDigits) {\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if (properties.symbol.length > 0) $input.value = $input.value.toString().replace(properties.symbol + \"0\", properties.symbol);\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if ($input.value.replaceAll('0', '').length == 0)\n      $input.value = properties.symbol + \"0\";else\n      if ($input.value.toString() == parseInt($input.value)) $input.value = properties.symbol + $input.value;\n    } else {\n      //Fix type money when number start with 0 (0000234 -> 234, 00000 -> 0)\n      if (self.properties.type === \"money\" || self.properties.type === \"number\" || self.properties.type === \"columnMoney\" || self.properties.type === \"columnNumber\") {\n        $input.value = $input.value.toString().replace(/^0+/, '');\n        if ($input.value === \"\") {\n          $input.value = 0;\n        }\n      }\n    }\n    self.executeFormatCurrencyPlugin();\n\n    // Updates internal value\n    self.setValue(self.numericInput.asNumber({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits }));\n\n\n    if (properties.percentage) {\n      if (self.numericInput && self.numericInput.val().indexOf(\"%\") == -1)\n      self.numericInput.val(self.numericInput.val() + '%');\n    }\n    message = message.replace(oldVal, \"\");\n\n  },\n  /**\r\n      * Adds the format currency plugin\r\n      * @returns {}\r\n      */\n  attachFormatCurrency: function attachFormatCurrency() {\n    var self = this;\n    var properties = self.properties;\n    self.isValidRender = self.isValidRender || true;\n\n    // Extend formatCurrency language\n    if ($.formatCurrency.regions[bizagi.language] == null)\n    $.formatCurrency.regions[bizagi.language] = this.getResource(\"numericFormat\");\n\n    // Attach events\n    self.numericInput.blur(function () {\n      self.formatNumericInput(this);\n    })\n\n    // Avoiding pasting invalid characters\n    .bind('paste', function (e) {\n      try {\n        var tmpData = bizagi.util.isIE() || bizagi.util.isIE11() ? window.clipboardData.getData(\"text\") : e.originalEvent.clipboardData.getData(\"Text\");\n\n\n\n        // Next lines checks if there is something different to numbers symbol, decimalSymbol and digitGroupSybol\n        var totalVal = \"/[^0-9\";\n        if (properties.decimalSymbol.length > 0) {\n          totalVal += properties.decimalSymbol;\n        }\n        // Next lines only for currency type\n        if (properties.dataType == 8) {\n          if (properties.symbol.length > 0) {\n            totalVal += properties.symbol;\n          }\n          if (properties.digitGroupSymbol.length > 0) {\n            totalVal += properties.digitGroupSymbol;\n          }\n        }\n        totalVal += \"\\\\-\\\\s]/gi\";\n        try {\n          if (tmpData.replace(eval(totalVal), '').length != tmpData.length)\n          e.preventDefault();\n        }\n        catch (e) {\n        }\n      }\n      catch (e) {\n        bizagi.log(\"Error to pasting content\");\n        self.isInvalidFormat = true;\n      }\n    })\n    // Now we implement keydown instead of keyup in order to include preventDefault\n    .keydown(function (e) {\n      self.previousValue = this.value;\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      // Validation for currency info\n      if (typeof BIZAGI_DEFAULT_CURRENCY_INFO != \"undefined\")\n      if (BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits == 0) properties.allowDecimals = false;\n      if (properties.dataType < 5 || properties.dataType == 8 && properties.allowDecimals == false)\n      if (keyUnicode == 188 || keyUnicode == 190 || keyUnicode == 110)\n      e.preventDefault();\n      if (this.value)\n      if (e !== undefined && this.value.length > 0 && (properties.dataType == 8 || properties.dataType == 10)) {\n        // Just numbers\n        if (keyUnicode > 47 && keyUnicode < 58) {\n          if (self.formatTimeout) {\n            clearTimeout(self.formatTimeout);\n          }\n\n          var floatPart = this.value + \"\";\n          //var  floatPart = stringPart.replaceAll(properties.digitGroupSymbol, \"\").replaceAll(properties.symbol,\"\").trim().replaceAll(properties.decimalSymbol,\".\");\n          if (properties.digitGroupSymbol && properties.digitGroupSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.digitGroupSymbol, \"\");\n          }\n          if (properties.symbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.symbol, \"\");\n          }\n\n          floatPart = $.trim(floatPart);\n          if (properties.decimalSymbol && properties.decimalSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.decimalSymbol, \".\");\n          }\n          // If increasing one digit (x10) will overtake the maxValue\n          if (floatPart * 10 > properties.dataTypeMaxValue) {\n            e.preventDefault();\n          }\n        } else\n        if (keyUnicode == 109 || keyUnicode == 189) {\n          if (this.selectionStart != 0 || this.selectionEnd != this.value.length) {\n            var currentPosition = this.selectionEnd;\n            this.value = properties.symbol + \"-\" + this.value.replace(properties.symbol, \"\");\n            this.selectionStart = this.selectionEnd = currentPosition + 1;\n          } else if (this.selectionStart == 0 && this.selectionEnd == this.value.length) {\n            this.value = \"-\";\n            this.selectionStart = this.selectionEnd = this.value.length;\n          }\n        }\n      }\n    }).\n\n    keyup(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (e !== undefined) {\n        switch (keyUnicode) {\n          case 16:\n            break; // Shift\n          case 17:\n            break; // Ctrl\n          case 13:\n            break; // Intro\n          case 18:\n            break; // Alt\n          case 27:\n            this.value = '';\n            break; // Esc: clear entry\n          case 35:\n            break; // End\n          case 36:\n            break; // Home\n          case 37:\n            break; // cursor left\n          case 38:\n            break; // cursor up\n          case 39:\n            break; // cursor right\n          case 40:\n            break; // cursor down\n          case 78:\n            break; // N (Opera 9.63+ maps the \".\" from the number key section to the \"N\" key too!) (See: http://unixpapa.com/js/key.html search for \". Del\")\n          case 110:\n            break; // . number block (Opera 9.63+ maps the \".\" from the number block to the \"N\" key (78) !!!)\n          case 188:\n            break; // , comma\n          case 190:\n            break; // .\n          default:\n            {\n\n            }}\n\n      }\n    }).keypress(function (e) {\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (typeof e !== \"undefined\") {\n        if (keyUnicode == 35 || keyUnicode == 37 || keyUnicode == 39) {\n          e.preventDefault();\n        } else if (properties.dataType != 8 && keyUnicode == 36) {\n          e.preventDefault();\n        }\n\n        // When no decimals are permited\n        var character = String.fromCharCode(keyUnicode);\n        if (properties.allowDecimals === false && properties.numDecimals === 0 && character === properties.decimalSymbol)\n        e.preventDefault();\n      }\n    });\n\n  },\n\n  executeFormatCurrencyPlugin: function executeFormatCurrencyPlugin() {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.numericInput) {\n      self.numericInput.formatCurrency({\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n\n    if (properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      var value = self.numericInput.val();\n      var positive = true;\n\n      if (value.indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var regExp = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(regExp, \"$1\");\n\n      regExp = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(regExp, \"\");\n      self.numericInput.val(value);\n\n      if (!positive) self.numericInput.val(\"(\" + value + \")\");\n    }\n\n    if (properties.percentage)\n    self.numericInput.val(self.numericInput.val() + '%');\n  },\n\n  /**\r\n      * Returns the display value of the render\r\n      * @returns {*}\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var value = self.getValue() !== undefined ? self.getValue() : $(\"input\", control).val() || \"\";\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n\n    label.formatCurrency({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize });\n\n\n    if (properties.percentage)\n    label = $('<label/>').html(label.text() + '%');\n\n    // Removing unrequired zeros as requested by BA26331\n    if (!properties.editable && properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      value = label.text();\n      var positive = true;\n\n      if (value.toString().indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var re = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(re, \"$1\");\n\n      re = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(re, \"\");\n\n      if (!positive) value = \"(\" + value + \")\";\n      return value;\n    }\n\n    return label.text();\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var message;\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (typeof value == \"string\" && value != \"\") {\n      value = Number(value);\n    }\n\n    // Check min value\n    if (self.hasValue()) {\n      if (!bizagi.util.isEmpty(minValue)) {\n        if (value < minValue) {\n          message = this.getResource(\"render-numeric-minimum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#minValue#\", minValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n      // Check max value\n      if (!bizagi.util.isEmpty(maxValue)) {\n        if (value > maxValue) {\n          message = this.getResource(\"render-numeric-maximum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#maxValue#\", maxValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n\n    }\n\n    if (self.isValidRender === false && !(bValid && bizagi.util.isMobileDevice())) {\n      bValid = false;\n      var validMessage = self.isValidRenderMessage ? self.isValidRenderMessage : \"error\";\n      invalidElements.push({ xpath: properties.xpath, message: validMessage });\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Get minimum value\r\n      * @returns {*}\r\n      */\n  getMinValue: function getMinValue() {\n    var minValue = this.properties.minValue;\n\n    if (minValue !== undefined && minValue !== null)\n    return minValue;\n\n    return this.properties.dataTypeMinValue;\n  },\n\n  /**\r\n      * Get maximum value\r\n      * @returns {*}\r\n      */\n  getMaxValue: function getMaxValue() {\n    var maxValue = this.properties.maxValue;\n\n    if (maxValue !== undefined && maxValue !== null)\n    return maxValue;\n\n    return this.properties.dataTypeMaxValue;\n  },\n\n  /**\r\n      * Return the allow decimals default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n      // Decimal and money data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Return the group digits default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n\n      // Decimal data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\r\n      * Return the group digits default property based on digitGroupSymbol\r\n      * @returns {*}\r\n      */\n  setGroupDigits: function setGroupDigits() {\n    var self = this;\n    if (typeof self.properties.thousands !== \"undefined\") {\n      if (self.properties.digitGroupSymbol) {//some cultures\n        return bizagi.util.parseBoolean(self.properties.thousands);\n      } else {\n        return false;\n      }\n    } else if (self.properties.digitGroupSymbol) {//some cultures\n      return this.getDefaultGroupDigits(self.properties.dataType);\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Calculate Minimum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMinValue: function calculateMinValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return -922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 0; // tinyint\n    }\n    if (dataType === 3) {\n      return -32768; // smallint\n    }\n    if (dataType === 2) {\n      return -2147483648; // int\n    }\n    if (dataType === 1) {\n      return -999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate Maximum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMaxValue: function calculateMaxValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return 922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 255; // tinyint\n    }\n    if (dataType === 3) {\n      return 32767; // smallint\n    }\n    if (dataType === 2) {\n      return 2147483647; // int\n    }\n    if (dataType === 1) {\n      return 999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMinValue: function performMinValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMinValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMaxValue: function performMaxValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMaxValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Changes the render minimum value\r\n      * @param value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var newValue = this.performMinValue(value);\n\n    this.properties.minValue = this.properties.dataTypeMinValue = newValue;\n  },\n  /**\r\n      * Changes the render maximum value\r\n      * @param value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var newValue = this.performMaxValue(value);\n\n    this.properties.maxValue = this.properties.dataTypeMaxValue = newValue;\n  },\n\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    try {\n      // Destroy tooltips\n      control.tooltip(\"destroy\");\n    } catch (e) {\n    }\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  } });","\n/*\r\n*   Name: Bizagi Render Number Scientific notation Class\r\n*   Author: Laura Ariza\r\n*   Comments:\r\n*   -   This script will define basic stuff for scientific notation numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.numberScientificNotation\", {\n  /*\r\n                                                               *   Update or init the element data\r\n                                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n  },\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"numberScientificNotation\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  /*\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    self.numericInput = control.find(\"input\");\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getValue().replace('.', self.properties.decimalSymbol);\n  },\n\n  setValue: function setValue(value) {\n    var self = this;\n    value = (value || '').toString().replace(self.properties.decimalSymbol, '.');\n    self._super(value);\n  },\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue() || \"\";\n    var compareValue = properties.originalValue || \"\";\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n    result = compareValue.toLowerCase() == value.toLowerCase() ? false : true;\n    return result;\n  } });","/**\r\n *   Name: Bizagi Render Hidden Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hiddens\r\n */\n\n$.Class.extend(\"bizagi.rendering.hidden\", {}, {\n\n  /**\r\n                                                 * Returns the in-memory processed element\r\n                                                 */\n  renderControl: function renderControl() {\n    if (this.getMode() === \"design\") {\n      return \"<div>\" + bizagi.localization.getResource(\"render-hidden-displayName\") + \"</div>\";\n    } else {\n      return \"<div />\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var properties = this.properties;\n\n    // Call base\n    this._super();\n\n    // Set the initial value\n    if (properties.value !== undefined) {\n      this.setDisplayValue(properties.value);\n    }\n  } });","/**\r\n *   Name: Bizagi Render Text Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for text renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.text\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param data\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || this.getResource(\"render-text-regular-expression-default-message\");\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"text\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      value: this.properties.value,\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      helpText: this.properties.helpText,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"text-read-only\");\n    var value = this.getValue();\n\n    if (bizagi.util.isString(value)) {\n      value = value.replaceAll(\"`\", \"&#96;\");\n    }\n\n    // Render template\n    return $.fasttmpl(template, { value: value, editable: this.properties.editable });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    this.input = this.getControl().find(\"input\");\n\n    //Attach event for retype double\n    if (this.properties.retype === \"double\")\n    this.attachRetypeDouble();\n  },\n\n  /**\r\n      * function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check mask property\n    if (properties.mask)\n    self.input.mask({ mask: properties.mask });\n\n    // Attach change event\n    self.input.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.input.val(), false);\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.input.val(), true);\n        }\n      }\n\n    }).keypress(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n\n      if (e !== undefined) {\n        if (keyUnicode == 13) {\n          $(this).trigger(\"change\");\n        }\n      }\n    });\n    //QA33146 - maxlength does not support in Android Devices. \n    if (bizagi.util.isAndroidDevice() && properties.maxLength > 0) {\n      self.input.bind(\"keyup\", function (e) {\n        var inputLength = $(this).val() && $(this).val().length;\n        if (inputLength >= properties.maxLength) {\n          e.preventDefault();\n          e.target.value = e.target.value.substring(0, properties.maxLength);\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n\n    // When the form have big data, block browser executing RegExp. QAF-1418.\n    // Check regular expression\n    if (typeof value == \"string\") {\n      if (properties.regularExpression) {\n        if (properties.editable) {\n          var regex = new RegExp(\"\");\n          try {\n            regex = new RegExp(properties.regularExpression.expression);\n          }\n          catch (e) {\n            if (bizagi.override.showDesignValidations) {\n              bizagi.log(e);\n              invalidElements.push({ xpath: properties.xpath, message: e.message });\n              bValid = false;\n            }\n          }\n\n          if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex) && self.properties && self.properties.xpath === \"userName\")) {\n            var message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          } else {\n            if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex))) {\n              var message = properties.regularExpression.message;\n              invalidElements.push({ xpath: properties.xpath, message: message });\n              bValid = false;\n            }\n          }\n        }\n      } else {\n        // Strange behavior on IE. When matchs are united on IE have is very slow\n        // solution, divide matchs\n        //.*? means for more information search: \"Lazy matching regexp\"\n        if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n          if (properties.editable) {\n            var message = this.getResource(\"render-text-regular-expression-default-message\");\n\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (!bizagi.util.parseBoolean(self.properties.editable)) {\n      // Render as simple value\n      if (typeof value === \"string\") {\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(\"<label class='readonly-control'>\" + valueToDisplay + \"</label>\");\n      } else {\n        if (bizagi.util.isNull(value)) {\n          control.html(\"\");\n        }\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * @param value\r\n      */\n  setValue: function setValue(value) {\n    this._super(value);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Integer} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (typeof value !== \"string\" || maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","/**\r\n *   Name: Bizagi Render Readonly Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.readonly\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"readonly-value\");\n    var value = this.getMode() == 'execution' ?\n    this.getFormattedValue(this.properties.value, this.properties.dataType) :\n    this.getDesignModeValue(this.properties.renderType);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: this.properties.id,\n      value: value });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      *  Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Get data value with format\r\n      * @param value\r\n      * @param dataType\r\n      */\n  getFormattedValue: function getFormattedValue(value, dataType) {\n    if (bizagi.util.isEmpty(value)) return \"\";\n\n    // If dataType is integer\n    if ([1, 2, 3, 4, 7].includes(dataType)) return value;\n\n    // If dataType is boolean\n    if ([5, 17].includes(dataType)) return bizagi.util.formatBoolean(value);\n\n    // If dataType is monetary\n    if ([8].includes(dataType)) return bizagi.util.formatMonetaryValue(value);\n\n    // If dataType is real or float\n    if ([6, 10, 11].includes(dataType)) return bizagi.util.formatDecimalValue(value);\n\n    // If dataType is date\n    if ([12, 13].includes(dataType)) return bizagi.util.formatDateValue(value);\n\n    // Otherwise, If dataType is string\n    return bizagi.util.sanitizeHTML(value) || \"\";\n  },\n\n  /***/\n  getDesignModeValue: function getDesignModeValue(renderType) {\n\n    // If dataType is integer\n    if (renderType == 'number') return '123';\n    if (renderType == 'string') return 'abc';\n    if (renderType == 'date') return '1/1/1900';\n    if (renderType == 'boolean') return 'false';\n    if (renderType == 'currency') return '$123';\n\n    return \"\";\n  },\n\n  /** \r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.style(\"background\", color, \"important\");\n    } else {\n      this.element.css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Gets jQuery Object to stylize\r\n      * @param {jQuery Object} $context jQuery Object\r\n      */\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\".bz-input--readonly\", $context);\n  } });","/**\r\n *   Name: Bizagi Render Button Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for button renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.button\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.caption = properties.caption || \"\";\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // A button cannot be required\n    properties.required = false;\n\n    // This flag enable/disable default behaviors of buttons\n    // auto save and execute rule\n    properties.preventDefault = properties.preventDefault || false;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"button\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      caption: self.properties.caption,\n      cssClass: self.properties.cssclass || \"\",\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render behaviour after to be processed\r\n      */\n  postRender: function postRender() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Saves the form\r\n      * @returns {}\r\n      */\n  saveForm: function saveForm() {\n    var form = this.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n      * Executes the button action\r\n      * @returns {}\r\n      */\n  executeButton: function executeButton() {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = properties.xpathContext || \"\";\n\n    if (properties.submitOnChangexpathContextRow) {\n      xpathContext = xpathContext ? xpathContext + \".\" + properties.submitOnChangexpathContextRow : properties.submitOnChangexpathContextRow;\n    }\n\n    // Set the loading feedback\n    self.getFormContainer().startLoading();\n\n    return self.dataService.multiaction().executeButton({\n      idRender: properties.id,\n      xpath: properties.xpath || \"\",\n      xpathContext: xpathContext || \"\",\n      idPageCache: properties.idPageCache }).\n    always(function () {\n      self.getFormContainer().endLoading();\n      return arguments ? arguments[0] : undefined;\n    });\n  },\n\n  /**\r\n      * Refresh the current form\r\n      * @returns {}\r\n      */\n  refreshForm: function refreshForm() {\n    var form = this.getFormContainer();\n    form.refreshForm(this.properties.id);\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      * @returns {}\r\n      */\n  processButton: function processButton() {\n    var self = this;\n\n    if (self.properties.editable) {\n      // Save the form prior opening the dialog\n      self.runButtonAction();\n    }\n  },\n\n  /**\r\n      * Triggers the render change event\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n\n    var pressed = params.pressed || false;\n\n    self.triggerHandler(\"renderchange\", { render: self, pressed: pressed });\n  },\n\n  /**\r\n      * Run button actions\r\n      * @returns {}\r\n      */\n  runButtonAction: function runButtonAction() {\n    var self = this;\n\n    // Save the form prior opening the dialog\n    self.getFormContainer().clearValidationMessages();\n\n    self.saveForm().pipe(function () {\n      return self.executeButton();\n    }).done(function (result) {\n\n      var type = result && result.type ? result.type : \"\";\n\n      if (result == null || result == true || result.result === \"success\" || result.type === \"success\") {\n        return self.refreshForm();\n      } else if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        try {\n          if (type === \"alertMessages\") {\n            bizagi.modalError && bizagi.modalError.show(result.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n          } else {\n            // Add validation messages\n            self.getFormContainer().addValidationMessage(result.messages);\n          }\n        } catch (e) {\n        }\n      }\n    }).fail(function (error) {\n\n      try {\n        // Add error messages\n        var error_obj = bizagi.util.getErrorFormatted(error);\n        var message = typeof error_obj === \"undefined\" ? {\n          \"message\": bizagi.localization.getResource(\"workportal-general-error\") } :\n        error_obj;\n\n        self.getFormContainer().failHandler(message);\n      } catch (e) {\n      }\n\n    });\n\n  },\n\n  processLayout: function processLayout(isLabelFormat, format) {\n    if (isLabelFormat) {\n      this.changeBackgroundColor(format.background);\n      this._super(!isLabelFormat, format);\n    }\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.getElementsToStylize(this.getControl()).style(\"background\", color, \"important\");\n    } else {\n      this.getElementsToStylize(this.getControl()).css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"input\", $context);\n  },\n\n  /**\r\n      *  Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  } });","/**\r\n *   Name: Bizagi Render Fileprint Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for fileprint renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.fileprint\", {}, {\n\n  /**\r\n                                                    * Update or init the element data\r\n                                                    * @param data\r\n                                                    */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var caption = $.trim(properties.caption);\n\n    properties.caption = !bizagi.util.isEmpty(caption) ? caption : \"render-fileprint-property-caption\";\n    properties.filesCount = properties.filesCount ? properties.filesCount : 0;\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n    // A button cannot be required\n    properties.required = false;\n  },\n\n  /**\r\n      * Method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"fileprint\");\n\n    return $.fasttmpl(template, {\n      caption: this.properties.caption });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Downloads the file and try to open it\r\n      */\n  downloadFile: function downloadFile() {\n    return this.dataService.getFilePrint({\n      idRender: this.properties.id,\n      xpathContext: this.properties.xpathContext || \"\",\n      idPageCache: this.properties.idPageCache,\n      contexttype: this.properties.contexttype,\n      disposition: \"download\" }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  } });","/**\r\n *   Name: Bizagi Render Simple Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.link\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data\r\n                                               * @returns {}\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n    properties.required = false;\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"link\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      displayName: self.properties.displayName,\n      align: self.properties.valueAlign,\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Do nothing\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  } });","/*\r\n *   Name: BizAgi Render Radio Class\r\n *   Author: Ivan Ricardo Taimal Narvaez\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.checkList\", {}, {\n\n  /*\r\n                                                    *   Update or init the element data\r\n                                                    */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n    self.setValue(properties.items);\n    self.updateOriginalValue();\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n    self.checkListGroup = $(\".ui-bizagi-render-checkList .ui-bizagi-render-checkList-item\", control);\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var items = self.properties.items || [];\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: items }));\n\n    return html;\n  },\n\n  /*\r\n      *   Gets the template used by the combo render\r\n      *   can be overriden in subclasses to reuse logic and just change the template\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"checkList\";\n  },\n\n  /*\r\n      *   Determines if we need to show the empty node or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /*\r\n      *   Determines if we need to show the current data regardless if it belongs to data or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /*\r\n      *   Adds custom parameters to process the template\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal };\n\n  },\n  /*\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n\n  },\n\n  setValue: function setValue(value) {;\n    this.value = bizagi.clone(value);\n  },\n\n  getValue: function getValue(data) {;\n    return this.value || [];\n  } });","/*\r\n*   Name: BizAgi render layout Image Class\r\n*   Author: Andrés Fernando Muñoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for non editable image control inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutImage\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    mode = self.getMode(),\n    useDefaultImage = false,\n    valueObj = self.properties.value || {},\n    uri = \"\";\n\n    //\n    var templateUri = self.renderFactory.getTemplate(\"layout-image\");\n\n    //Solucion temporal mientras se ajusta la respuesta del servicio cambiar despues de demo de 21/07/2015\n    /*if (value.value && value.value !== \"\" && value.value.length > 100){\r\n        var template64 = self.renderFactory.getTemplate(\"layout-image64\");\r\n        return $.fasttmpl(template64, { url: value.value, useDefaultImage: useDefaultImage });\r\n    }*/\n\n    /* if (mode === 'execution' && valueObj.value && valueObj.value.length > 0) {\r\n            uri = self.getImageUri();\r\n        }\r\n        else{\r\n            useDefaultImage = true;\r\n        } */\n\n    return $.fasttmpl(templateUri, { useDefaultImage: true });\n  },\n\n  /**\r\n      * Gets the base 64 image, specify in each device in order to change the size\r\n      */\n  getImage64: function getImage64() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      width: 96,\n      height: 96 };\n\n\n    return self.dataService.getEntityImage64(params);\n  },\n\n  /**\r\n      * Gets the url to get the array image, specify in each device in order to change the size\r\n      */\n  getImageUri: function getImageUri() {\n    var self = this;\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Andrés Fernando Muñoz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLink\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-link\");\n    // Render template\n    var html = $.fasttmpl(template, { displayName: self.properties.displayName });\n    return html;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Sánchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLabel\", {}, {\n\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    this.properties.required = false;\n\n    // Set properties\n    this.properties.displayType = \"label\";\n    this.properties.labelAlign = this.originalProperties.labelAlign || \"left\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-label\");\n    var value = self.properties.displayName || self.properties.value || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Mauricio Sanchez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutText\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    //properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-text\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value, editable: self.properties.editable });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  } });","/**\r\n *   Name: Bizagi Render Layout Simple Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable upload renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutUpload\", {}, {\n\n  /**\r\n                                                       *   Update or init the element data\r\n                                                       */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.editable = true;\n    properties.allowDelete = true;\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n  },\n\n  /**\r\n      * Get value files by data\r\n      */\n  getValueFilesByData: function getValueFilesByData(properties) {\n    var self = this;\n    var defer = $.Deferred();\n    var dataFiles;\n\n    if (properties.value.value) {//Normal entityTemplate in form QAF-2319\n      dataFiles = properties.value.value;\n    } else {//QAF-2210\n      dataFiles = properties.value;\n    }\n\n    var valueAuxFiles;\n    try {\n      if (self.isContextContainerWidgetRender()) {\n        valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + dataFiles + \"}\");\n        defer.resolve(properties, valueAuxFiles);\n      } else {//context: my stuff\n        $.when(self.getDataFilesWithoutScope()).done(function (valueResult) {\n          valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + valueResult + \"}\");\n          defer.resolve(properties, valueAuxFiles);\n        });\n      }\n    } catch (err) {\n      valueAuxFiles = JSON.parse(\"{ \\\"files\\\": []}\");\n      defer.resolve(properties, valueAuxFiles);\n      console.warn(\"Exception converting data files. Error: \", err);\n    }\n\n    return defer.promise();\n  },\n\n  isContextContainerWidgetRender: function isContextContainerWidgetRender() {\n    var self = this;\n    var formContainer = self.getFormContainer();\n\n    return formContainer.params.paramsRender && formContainer.params.paramsRender.idRender;\n  },\n\n  /**\r\n      * Get data files when access from My stuff\r\n      */\n  getDataFilesWithoutScope: function getDataFilesWithoutScope() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey };\n\n\n    return self.dataService.getFilesDataForLayoutUploadControl(params);\n  },\n\n  /**\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      *   Returns the xpath to be used\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Render Layout Boolean Class\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for boolean renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutBoolean\", {}, {\n  /*\r\n                                                        * Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-boolean\");\n    // Render template\n    var html = $.fasttmpl(template, { value: this.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  setValue: function setValue(value, triggerEvents) {\n    if (value === null || value === \"\") {\n      this.properties.value = \"\";\n    } else\n    if (value.toString().toLowerCase() === \"true\" || value.toString().toLowerCase() === \"false\") {\n      this.properties.value = bizagi.util.parseBoolean(value) ? this.getResource(\"render-boolean-yes\") : this.getResource(\"render-boolean-no\");\n    }\n    this._super(this.properties.value, triggerEvents);\n  } });","/**\r\n * Name: BizAgi Render Layout DateTime Class\r\n * Author: Andres Fernando Muñoz\r\n * Comments:\r\n * - This script will define basic stuff for text renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutDateTime\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/ig) === -1) {\n        properties.fullFormat = properties.fullFormat + ' ' + properties.timeFormat;\n      }\n    } else\n    {\n      var indexHour = properties.fullFormat.search(/[h|H]+/ig);\n      if (indexHour !== -1) {\n        properties.fullFormat = properties.fullFormat.substring(0, indexHour - 1);\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(properties.value, properties.showTime);\n\n      // Format date to current format\n      if (date != 0) {\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        self.value = properties.value; // Value must always hold the value with invariant format\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else\n      {\n        self.value = null;\n      }\n    } else\n    {\n      self.value = null;\n      properties.value = \"\";\n      properties.displayValue = \"\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-date-time\");\n    var value = self.properties.value === null || self.properties.value === \"\" ? \"\" : self.properties.value;\n\n    // Render template\n    return $.fasttmpl(template, { value: value });\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this,dateObj;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n    var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n\n    if (value.length == INVARIANT_FORMAT.length || value.length == INVARIANT_FORMAT.length + 1) {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\n    } else\n    {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\n      if (dateObj && !isNaN(Date.parse(dateObj)) && !$.isNumeric(dateObj)) {\n        dateObj.setHours(0, 0, 0, 0);\n      }\n\n    }\n    // Set value in input\n    if (value && !isNaN(Date.parse(value))) {\n      var formattedDateTime = bizagi.util.dateFormatter.formatDate(dateObj, properties.fullFormat, self.i18n);\n      dateControl.text(formattedDateTime);\n    }\n  },\n\n  /**\r\n      * Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n    var self = this;\n    self.dateControl = $(\".ui-bizagi-render-date-time\", self.getControl());\n    return self.dateControl;\n  } });","/*\r\n*   Name: BizAgi Render Layout number Class\r\n*   Author: Andres Fernando Muñoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutNumber\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.getDefaultGroupDigits(properties.dataType);\n    properties.colorize = properties.colorizeOnNegative || false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-number\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  /*\r\n      *   Returns the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n    var regExp2 = /[\\u20AC \\u0024\\u00A3]/;\n    if (!value.toString().match(regExp2)) {\n      label.formatCurrency(\n      {\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n    return label.text();\n  },\n\n  /*\r\n      *   Return the allow decimals default property based on the datatype\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /*\r\n      *   Return the group digits default property based on the datatype\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  } });","/*\r\n*   Name: BizAgi Render Layout Money Class\r\n*   Author: Andrés Fernando Muñoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for money renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutMoney\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol :\n      typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n    } else\n    {\n      properties.symbol = \"\";\n    }\n    properties.groupDigits = true;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Sánchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutPlaceholder\", {}, {\n\n  /*\r\n                                                            * Constructor\r\n                                                            */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-placeholder\");\n    var value = self.properties.value || self.properties.displayName || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/**\r\n *   Name: Bizagi Render Geolocation control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for geolocation renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.geolocation\", {}, {\n\n  /**\r\n                                                      * Constructor\r\n                                                      * @param {} data\r\n                                                      */\n  init: function init(data) {\n    // Call base\n    this._super(data);\n    this.geolocation = window.navigator.geolocation;\n\n    var properties = this.properties;\n    properties.allowUpdate = bizagi.util.parseBoolean(properties.allowUpdate) === true;\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"geolocation\");\n\n    // Render template\n    var html = $.fasttmpl(template, self.properties);\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Call base\n    return this._super(invalidElements);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} succes_callback\r\n      * @param {} fail_callback\r\n      */\n  getCurrentPosition: function getCurrentPosition(succes_callback, fail_callback) {\n    var self = this;\n\n    if (typeof self.geolocation === \"undefined\") {\n      if (fail_callback)\n      fail_callback(bizagi.localization.getResource(\"render-control-unsuported-by-browser\").replace(\"{0}\", self.properties.type));\n      return;\n    }\n\n    var onSuccess = function onSuccess(position) {\n      if (succes_callback)\n      succes_callback(position);\n    };\n\n    var onError = function onError(error) {\n      var strMessage = self.getErrorMessage(error);\n\n      if (fail_callback)\n      fail_callback(strMessage);\n    };\n\n    return self.geolocation.getCurrentPosition(onSuccess, onError);\n  },\n\n  /**\r\n      * Get message of error\r\n      * @param error\r\n      * @returns {*|string}\r\n      */\n  getErrorMessage: function getErrorMessage(error) {\n    var strMessage = \"\";\n\n    // Check for known errors\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n      case 1:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;\n      case error.POSITION_UNAVAILABLE:\n      case 2:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-position-unavailable\");\n        break;\n      case error.TIMEOUT:\n      case 3:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-timeout\");\n        break;\n      default:\n        strMessage = \"WD: \" + bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;}\n\n\n    return strMessage;\n  },\n\n  /**\r\n      * Change precision number of coordinates\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  performPrecision: function performPrecision(data) {\n    var geolocation = data.split(\" \") || \"\";\n\n    if (!geolocation) return data;\n\n    try {\n      var latitude = parseFloat(geolocation[0].trim());\n      var longitude = parseFloat(geolocation[1].trim());\n\n      return latitude.toPrecision(10) + \" \" + longitude.toPrecision(10);\n    } catch (e) {\n      return data;\n    }\n  } });","/**\r\n *   Name: Bizagi Render Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for uploads\r\n */\n\n$.Class.extend(\"bizagi.rendering.upload\", {}, {\n  /***\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    var maxFileSizeOfProperty = Number(properties.maxSize) || 0;\n    var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 4091904;\n\n    properties.maxSize = maxFileSizeOfProperty || maxFileSizeOfUser;\n    properties.maxfiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n      var defExtensions = [];\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length > 0) {\n          defExtensions.push(\"*.\" + singleExtensions[i]);\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = defExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddUrl();\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) || false;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null && properties.editable ? bizagi.util.parseBoolean(properties.allowDelete) : false;\n\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"upload\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable,\n      haveFiles: self.filesCount !== 0,\n      noFiles: self.filesCount === 0,\n      allowSendInMail: properties.allowSendInMail });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {jQuery|*}\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var itemTemplate = self.getTemplateItemName();\n    var template = self.renderFactory.getTemplate(itemTemplate);\n    var form = self.getFormContainer();\n    var printVersion = form.params && form.params.printversion;\n\n    // Don't render urls when not running in execution mode\n    var url = !self.isExecutionMode() ? \"\" : self.buildItemUrl(file); // TODO: Review if need it: javascript:void(0);\n\n    var html = $.fasttmpl(template, {\n      id: file.id,\n      mode: mode,\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: bizagi.util.decodeURI(file.fileName),\n      editable: self.properties.editable,\n      printVersion: printVersion || false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getUploadXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: form.properties.sessionId,\n      contexttype: properties.contexttype });\n\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Removes a file from the upload control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = self.getUploadXpath() + (bizagi.util.isNumeric(fileId) ? \"[id=\" + fileId + \"]\" : \"[id='\" + fileId + \"']\");\n\n    return self.dataService.deleteUploadFile({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype }).\n    pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n\n    // Set files property\n    self.files = value || []; // Dont remove this line\n    self.filesCount = self.files.length;\n\n    // Call base\n    self._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*}\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var bValid = true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && properties.editable) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (self.filesCount <= 0 && !newRow) {\n        var inlineEdit = self.grid ? self.grid.properties.inlineEdit : true;\n\n        if (inlineEdit) {\n          message = self.getResource(\"render-required-upload\").replaceAll(\"#label#\", properties.displayName);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    data[prefix + \"xpath\"] = self.getUploadXpath();\n    data[prefix + \"idRender\"] = properties.id;\n    data[prefix + \"xpathContext\"] = properties.xpathContext;\n    data[prefix + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[prefix + \"contexttype\"] = properties.contexttype;\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the xpathContext to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpathContext: function getUploadXpathContext() {\n    return this.getXpathContext() || this.properties.xpathContext;\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (self.grid && self.grid.properties.inlineAdd === true) {\n        if (!self.hasValue() && !self.getControl().parents(\"tr\").data(\"new-row\")) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      } else {\n        if (!self.hasValue()) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  setRenderRequired: function setRenderRequired(invalidElements, properties) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n    invalidElements.push({ xpath: properties.xpath, message: message });\n  },\n\n  /**\r\n      * Templates\r\n      */\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  },\n\n  /**\r\n      * Method to perform the format to value\r\n      * @param value\r\n      * @returns {((*)[]|*)[]}\r\n      */\n  formatValue: function formatValue(value) {\n    var validateObjectStructure = function validateObjectStructure(item) {\n      return !!(item.uploadId && item.fileName);\n    };\n    var validateArrayStructure = function validateArrayStructure(item) {\n      return !!(item[0] && item[1]);\n    };\n\n    return (value || []).reduce(function (result, item) {\n      var isFormatValid = false;\n      var validator = bizagi.util.bzValidator(item).\n      add(validateObjectStructure).\n      validate(function (response) {\n        isFormatValid = response.errors && !response.errors.length;\n        if (isFormatValid) {\n          result.push([item.uploadId, item.fileName]);\n        }\n      });\n\n      if (!isFormatValid) {\n        validator.add(validateArrayStructure, \"The value is not in a valid format\").\n        validate(function (response) {\n          if (response.errors && response.errors.length > 0) {\n            console.warn(response.errors);\n          } else {\n            result.push([item]);\n          }\n        });\n      }\n\n      return result;\n    }, []);\n  } });","/**\r\n *   Name: Bizagi Render ECM upload control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for ECM Control\r\n */\n\n$.Class.extend(\"bizagi.rendering.ecm\", {}, {\n\n  /**\r\n                                              * Update or init the element data\r\n                                              * @param data\r\n                                              */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var self = this;\n    var properties = self.properties;\n\n    properties.maxSize = Number(properties.maxSize) || (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : properties.maxSize = Number(properties.maxSize) || 4091904);\n    properties.maxFiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.split(\";\");\n      for (var i = 0; i < singleExtensions.length; i++) {\n        singleExtensions[i] = \"*.\" + singleExtensions[i];\n      }\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=uploadECMFile\";\n    properties.editUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=updateECMFileContent\";\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n    properties.q_xpath = bizagi.util.encodeXpath(properties.xpath);\n    properties.showMetadata = properties.showMetadata === undefined || properties.showMetadata === null ? true : bizagi.util.parseBoolean(properties.showMetadata);\n\n    var dateFormat = this.getResource(\"dateFormat\");\n    var timeFormat = this.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n\n    properties.xpathContext = this.parent.properties.xpathContext || properties.xpathContext || \"\";\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param listControl\r\n      * @param fileProperties\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl(listControl, fileProperties) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"ecm\");\n    var mode = self.getMode();\n    var defer = new $.Deferred();\n\n    properties.value = fileProperties ? [[fileProperties.idFileUpload, fileProperties.fileName]] : self.value;\n    var html = $.fasttmpl(template, properties, {\n      getFileExtension: self.getFileExtension,\n      isImage: self.isImage });\n\n\n    if (self.properties.value != undefined) {\n\n      var lengthValues = self.properties.value.length;\n\n      if (lengthValues === 0) {\n        defer.resolve(html);\n      }\n\n      $.each(self.properties.value, function (key, value) {\n        var data = {};\n\n        data.idFileUpload = value[0];\n        data.fileName = value[1];\n        data.idPageCache = self.properties.idPageCache;\n        data.xpathContext = self.getXpathContext();\n        data.xPath = self.properties.xpath;\n        data.editable = self.properties.editable;\n        data.idAttrib = self.properties.idAttrib;\n\n        var form = self.getFormContainer();\n        if (form && form.properties && form.properties.sessionId) {\n          data.sessionId = form.properties.sessionId;\n        }\n\n        if (mode === \"execution\") {\n          $.when(self.renderFileLayout(data, fileProperties)).done(function (item) {\n            lengthValues--;\n\n            if (bizagi.loader.productBuildToAbout && bizagi.loader.productBuildToAbout.indexOf(\"10.4\") === 0) {\n              item = item.replaceAll(\"Handlers/MetadataFile\", \"Handlers/Metadata\");\n            }\n\n            html = self.replaceItemHtml(html, self.properties.id + \"-\" + data.idFileUpload, item);\n            if (lengthValues === 0) {\n              defer.resolve(html);\n            }\n          });\n\n        }\n      });\n    } else {\n      defer.resolve(html);\n    }\n    return defer.promise();\n  },\n\n  replaceItemHtml: function replaceItemHtml(html, id, replace) {\n    return html.replace(\"{{\" + id + \"}}\", replace);\n  },\n\n  renderFileLayout: function renderFileLayout(data, fileProperties) {\n    var self = this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\n\n    var deferred = $.Deferred();\n\n    $.when(self.dataService.getECMMetadata(data),\n    fileProperties ? [fileProperties] : self.dataService.getFileProperties(data)).\n    done(function (metaData, fileProperties) {\n\n      fileProperties[0].data = data;\n\n      // Make xpath context\n      fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\n      fileProperties[0].xpath = self.properties.xpath;\n\n      metaData[0].filename = data.fileName;\n      metaData[0].url = self.buildItemUrl(fileProperties[0]);\n\n      // Define File Properties\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].ecm_isVisible = fileProperties[0].isVisible;\n      metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\n      metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\n      metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\n      metaData[0].ecm_allowView = fileProperties[0].allowView;\n      metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\n      metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\n      metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].idFileUploads = fileProperties[0].idFileUpload;\n      metaData[0].xpath = fileProperties[0].xpath;\n      metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\n      metaData[0].deviceType = bizagi.detectDevice();\n\n      var html = $.fasttmpl(metadataTemplate, metaData[0]);\n      deferred.resolve(html);\n    });\n\n    return deferred.promise();\n  },\n\n  isImage: function isImage(file) {\n    var extension = this.getFileExtension(file);\n    var image = [\"JPG\", \"JPEG\", \"GIF\", \"PNG\", \"BMP\"];\n\n    return image.indexOf(extension.toUpperCase()) > -1 ? true : false;\n  },\n\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n\n    if (!file.data) {\n      file.data = { fileName: file.fileName, idAttrib: file.idAttrib };\n    }\n\n    return self.dataService.getECMFileUrl({\n      idFileUpload: file.idFileUpload,\n      xPath: file.xpath || file.xPath,\n      xpathContext: file.xpathContext,\n      idAttrib: file.data.idAttrib,\n      idPageCache: self.properties.idPageCache,\n      fileName: file.data.fileName.replace(/ /g, \"_\"),\n      p_sessionId: p_sessionId,\n      sessionId: file.data.sessionId || \"\" });\n\n  },\n\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var data = {};\n\n    // data.fileExt = properties.validExtensions;\n    // data.fileDesc = properties.validExtensions ? self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions : \"\";\n    data.xPath = properties.xpath;\n    data.idAttrib = properties.idAttrib;\n    data.xpathContext = properties.xpathContext;\n    data.metaValues = [];\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n\n    return data;\n  },\n\n  /**\r\n      * Get name of file extension\r\n      * @param fileName\r\n      * @returns {*}\r\n      */\n  getFileExtension: function getFileExtension(fileName) {\n    fileName = fileName || \"\";\n    return fileName.split(\".\").pop();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super(value, triggerEvents);\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length ? self.files.length : properties.value;\n  },\n\n  /**\r\n      * Gets xpath context\r\n      * @returns {*|string}\r\n      */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Removes a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.deleteECMFile(params).pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Lock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  lockUploadItem: function lockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.checkOutFile(params);\n  },\n\n  /**\r\n      * Unlock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  unlockUploadItem: function unlockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.cancelCheckOut(params);\n  } });","/**\r\n *   Name: Bizagi Render Yes-no Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for yes-no renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.yesno\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"yesno\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {boolean}\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmptyValue(value)) return false;\n    return bizagi.util.parseBoolean(value) !== null;\n  } });","/**\r\n *   Name: Bizagi Render Letter Class\r\n*   Author: Diego Parra\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for letter renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.letter\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Create a variable to check if the letter has been opened when editable\n    this.letterOpened = false;\n  },\n\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"letter\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"letter.readonly\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getLetterContent: function getLetterContent() {\n    // Set flag to true\n    this.letterOpened = true;\n\n    return this.dataService.getLetterContent({\n      url: this.properties.getUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Sends the content to the server in order to save\r\n      * @param {} content\r\n      */\n  saveLetterContent: function saveLetterContent(content) {\n    return this.dataService.saveLetterContent({\n      url: this.properties.saveUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache,\n      content: content });\n\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter() {\n    return this.dataService.getCanGenerateLetter({\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Saves the form\r\n      */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) return true;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) return true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required) {\n      if (self.letterOpened == false) {\n        message = self.getResource(\"render-letter-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Returns the current xpath\r\n      */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the current context xpath\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  } });","/**\r\n *   Name: Bizagi Render Form Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for form link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.formLink\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n\n    properties.displayType = \"value\";\n    properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"formLink\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      id: properties.id,\n      align: properties.valueAlign,\n      displayName: properties.displayName,\n      value: properties.value,\n      editable: properties.editable,\n      likeButton: bizagi.util.parseBoolean(properties.likeButton) || false });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n\n  },\n\n  /**\r\n      * Method to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Submits a edit request for a link display form\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    return self.dataService.editLinkForm({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: self.getFormLinkXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache });\n\n  },\n\n  /**\r\n      * Submits a link save request for the displayed form\r\n      * @param data\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: xpathContext,\n      submitData: data }).\n    done(function (response) {\n      var executeSubmitOnChange = true;\n\n      if (response && response.type === \"validationMessages\")\n      executeSubmitOnChange = false;\n\n      if (executeSubmitOnChange)\n      self.submitOnChange({});\n    });\n  },\n\n  /**\r\n      * Sends all the data to the server then refreshes the form\r\n      * @param data\r\n      * @returns {*} Returns a promise\r\n      */\n  saveFormLinkData: function saveFormLinkData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    var submitData = $.extend({}, data);\n    delete submitData.idPageCache;\n\n    return $.when(!bizagi.util.isEmpty(submitData) ? self.dataService.multiaction().submitData({\n      action: \"SAVE\",\n      data: submitData,\n      idPageCache: data.idPageCache,\n      xpathContext: xpathContext }) :\n    undefined);\n  },\n\n  /**\r\n      * Submits a rollback request\r\n      * @param params\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.rollbackLinkForm({\n          url: properties.rollbackUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: params ? params.idPageCache : properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a commit request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCommitRequest: function submitCommitRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.commitLinkForm({\n          url: properties.commitUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a checkpoint request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCheckpointRequest: function submitCheckpointRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.sendCheckpoint({\n          url: properties.checkpointUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a submitData request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitDataRequest: function submitDataRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.submitData({\n          url: properties.checkpointUrl,\n          action: \"SUBMITDATA\",\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Get Form Link xpath to use\r\n      * @returns {*}\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Don't do anything\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    // Don't do anything\n  } });","/**\r\n *   Name: Bizagi Render Document Generator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for document generator render\r\n */\n\n$.Class.extend(\"bizagi.rendering.document\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    var properties = this.properties;\n\n    properties.validate = bizagi.util.parseBoolean(properties.validate) != null ? bizagi.util.parseBoolean(properties.validate) : false;\n    properties.downloadalldocuments = properties.downloadalldocuments ? properties.downloadalldocuments : false;\n    properties.allowGenerate = properties.allowGenerate !== undefined ? properties.allowGenerate : true;\n    properties.append = properties.append ? properties.append : false;\n\n    if (properties.caption) {\n      properties.caption = $.trim(properties.caption);\n\n      if (properties.caption.length === 0) {\n        properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n      }\n    } else {\n      properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n\n    self.preRenderControl();\n\n    var properties = self.properties;\n    var mode = self.getMode();\n    var downloadAllDocuments = properties.downloadalldocuments;\n    var allowGenerate = properties.allowGenerate;\n    var template = self.renderFactory.getTemplate(self.getTemplate());\n    var documents = properties.value || [];\n    var noFiles = documents ? documents.length === 0 : true;\n\n    // Render template\n    var html = self.getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles);\n\n    // Render current children\n    var items = this.renderDocumentsHtml(documents);\n    items += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param template\r\n      * @param mode\r\n      * @param downloadAllDocuments\r\n      * @param allowGenerate\r\n      * @param properties\r\n      * @param noFiles\r\n      * @returns {*|jQuery}\r\n      */\n  getControlHtml: function getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n\n    return $.fasttmpl(template, {\n      noActivateButton: false,\n      editable: mode !== \"execution\",\n      mode: mode,\n      downloadalldocuments: downloadAllDocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append,\n      caption: properties.caption,\n      noFiles: noFiles,\n      allowSendInMail: properties.allowSendInMail });\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getXpath: function getXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  preRenderControl: function preRenderControl() {\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {boolean}\r\n      */\n  activateButton: function activateButton() {\n    return true;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  },\n\n  /**\r\n      * Renders a single document item\r\n      * @param file\r\n      * @returns {*|jQuery}\r\n      */\n  renderDocumentItem: function renderDocumentItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildItemUrl(file);\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: file.fileName,\n      id: file.id,\n      mode: mode,\n      editable: self.properties.editable,\n      joined: false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: self.getSessionId() });\n\n  },\n\n  /**\r\n      * Builds the download all items item url\r\n      * @returns {*}\r\n      */\n  buildAllDocumentsUrl: function buildAllDocumentsUrl() {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getAllDocumentsDownloadUrl({\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      idCase: properties.caseId,\n      idWorkItem: properties.workitemId,\n      sessionId: self.getSessionId() });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @returns {string}\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    return \"<div></div>\";\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode !== \"design\") {\n      var control = self.getControl();\n      var htmlControl = self.renderControl();\n\n      control.append(htmlControl);\n\n      self.updateControlForPrintMode(control);\n\n      // Execute the same as post-render\n      self.postRender();\n    }\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  validateContainer: function validateContainer() {\n    // Check if the form is valid, then generate\n    var form = this.getFormContainer();\n    return form.validateForm();\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  save: function save() {\n    var form = this.getFormContainer();\n\n    return form.saveForm();\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Replaces a {{actions}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceActionsHtml: function replaceActionsHtml(html, replace) {\n    return html.replace(\"{{actions}}\", replace);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) return true;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false) return true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && !properties.buttonExecuted) {\n      if (self.value) {\n        if (self.value.length > 0) return true;\n        message = self.getResource(\"render-document-required-text\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Attach handler\n    var $generateLink = $(\".ui-bizagi-button-documentgenerator\", self.getControl());\n\n    if (self.isExecutionMode()) {\n      $generateLink.click(function (e) {\n        if (e.isPropagationStopped()) return;\n        e.stopPropagation();\n\n        self.properties.buttonExecuted = true;\n\n        if (self.properties.validate) {\n          // Check if the form is valid, then generate\n          var isValid = self.validateContainer();\n          if (isValid) {\n            self.documentTemplateGenerate();\n          }\n        } else {\n          // Just generate the form\n          self.documentTemplateGenerate();\n        }\n\n        self.properties.buttonExecuted = false;\n      });\n\n      // Configure basic handlers\n      self.attachEvents();\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    if (this.isExecutionMode()) {\n      this.attachEvents();\n    }\n  },\n\n  /**\r\n      *  Configure event handlers\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var $control = self.getControl();\n\n    // Configure download handler for document item\n    $(\".ui-bizagi-document-upload-item a > span\", $control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      var $item = $(this).closest(\".ui-bizagi-document-upload-item\");\n      var file = $item.data();\n\n      if (!file.joined) {\n        self.downloadFile(file);\n      } else {\n        self.downloadAllFiles({ filename: \"TemplatesConcatFilesToPDF.pdf\" });\n      }\n    });\n\n    // Configure preview handler\n    $(\".ui-bizagi-container-documents-item-delete\", $control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      self.deleteDocumentTemplate($(this).data(\"filename\"));\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      * @param filename\r\n      */\n  deleteDocumentTemplate: function deleteDocumentTemplate(filename) {\n    var self = this;\n    var params = {\n      xpath: self.properties.xpath + \"[fileName='\" + filename + \"']\",\n      idRender: self.properties.id,\n      xpathContext: self.getContextXpath(),\n      idPageCache: self.properties.idPageCache };\n\n\n    self.startLoading();\n\n    $.when(self.dataService.deleteUploadFile(params)).\n    done(function () {\n      $.when(self.dataService.multiaction().getPropertyData({\n        xpath: self.properties.xpath,\n        idRender: self.properties.id,\n        xpathContext: self.getContextXpath(),\n        idPageCache: self.properties.idPageCache,\n        property: \"value\" })).\n      done(function (documents) {\n        self.resolveDeleteDocumentTemplate(documents, false, self.properties.downloadalldocuments);\n\n        // Finish loading\n        self.endLoading();\n      });\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n\n    self.startLoading();\n\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    self.save().done(function () {\n\n      bizagi.showErrorAlertDialog = false;\n\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function () {\n\n        // Fetch again the value property\n        $.when(self.dataService.multiaction().getPropertyData({\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: self.getContextXpath(),\n          idPageCache: properties.idPageCache,\n          property: \"value\" })).\n        done(function (documents) {\n          self.resolveDocumentTemplateGenerate(documents, false, properties.downloadalldocuments);\n\n          // Finish loading\n          self.endLoading();\n        });\n\n      }).fail(function (error) {\n        self.endLoading();\n\n        // Add error messages\n        self.showErrorMessage(error);\n      });\n    }).fail(function (message) {\n      self.endLoading();\n\n      // Add error messages\n      self.showErrorMessage(message);\n    });\n  },\n\n  /**\r\n      * Show the error message when something went wrong with the service.\r\n      * @param error\r\n      */\n  showErrorMessage: function showErrorMessage(error) {\n    var self = this;\n    var form = self.getFormContainer();\n    var messageText = self.resources.getResource('render-upload-alert-maxsize').replace(\"{0}\", BIZAGI_SETTINGS.UploadMaxFileSize);\n\n    try {\n      messageText = error && typeof error.responseText !== \"undefined\" ? JSON.parse(error.responseText).message : error;\n    } catch (e) {\n    }\n\n    form.addErrorMessage(messageText);\n    form.endLoading();\n  },\n\n  /**\r\n      * Shows the document if the flag is set. (virtual Function)\r\n      */\n  autoOpenDocuments: function autoOpenDocuments() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @param url\r\n      * @param filename\r\n      */\n  showDocumentPreview: function showDocumentPreview(url, filename) {\n  },\n\n  /**\r\n      * Identifies the extension of the file in a simpler way that ECM does\r\n      * @param file\r\n      * @returns {string}\r\n      */\n  returnCssTypeFile: function returnCssTypeFile(file) {\n\n    if (file == undefined || file.lenght === 0) {\n      return \"ui-bizagi-document-upload-item-generic-file\";\n    }\n\n    var extension = file.substr(file.lastIndexOf('.') + 1);\n\n    switch (extension) {\n      case 'docx':\n        return \"ui-bizagi-document-upload-item-doc\";\n      case 'pdf':\n        return \"ui-bizagi-document-upload-item-pdf\";\n      case 'xlsx':\n        return \"ui-bizagi-document-upload-item-xls\";\n      default:\n        return \"ui-bizagi-document-upload-item-generic-file\";}\n\n  },\n\n  /**\r\n      * Redraw documents when needed\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadAllDocuments) {\n    var self = this;\n    var control = self.getControl();\n    var html = \"\";\n    var documentContainer = $(\"[data-component='files']\", control);\n\n    // Clear current links\n    documentContainer.empty();\n\n    // Draw links again\n    html += this.renderDocumentsHtml(documents);\n\n    // Check if there are documents and the flag to download all are available to show the link.\n    html += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    documentContainer.append(html);\n\n    //Set value\n    self.setValue(documents);\n  },\n\n  /**\r\n      * This method must be implemented by the specific class of each device. (Virtual method)\r\n      * @param file\r\n      * @returns {*|*|*}\r\n      */\n  renderAllDocumentDownload: function renderAllDocumentDownload(file) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildAllDocumentsUrl();\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: properties.allowDelete,\n      filename: file.fileName,\n      mode: mode,\n      joined: true });\n\n\n    return self.removeDeleteButton(html);\n  },\n\n  /**\r\n      * removeDeleteButton\r\n      * @param html\r\n      * @returns {*}\r\n      */\n  removeDeleteButton: function removeDeleteButton(html) {\n    var startIndex = html.indexOf(\"<span class=\\\"ui-bizagi-container-documents-item-delete\");\n\n    if (startIndex > 0) {\n      var restOfWord = html.substring(startIndex);\n      var finishIndex = restOfWord.indexOf(\"</span>\") + 7;\n\n      return html.substring(0, startIndex) + restOfWord.substring(finishIndex);\n    } else {\n      return html;\n    }\n  },\n\n  /**\r\n      * Process request of DeleteDocumentTemplate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDocumentTemplateGenerate: function resolveDocumentTemplateGenerate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.autoOpenDocuments();\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Process request of DocumentTemplateGenerate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDeleteDocumentTemplate: function resolveDeleteDocumentTemplate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Method to renders the documents\r\n      * @param documents\r\n      * @returns {string}\r\n      */\n  renderDocumentsHtml: function renderDocumentsHtml(documents) {\n    var items = \"\";\n\n    for (var i = 0; i < documents.length; i++) {\n      var document = { id: documents[i][0], fileName: documents[i][1] };\n      var item = this.renderDocumentItem(document);\n\n      items += item;\n    }\n\n    return items;\n  },\n\n  /**\r\n      * Methos to renders action of document\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      * @returns {string}\r\n      */\n  renderActionsHtml: function renderActionsHtml(documents, noFiles, downloadAllDocuments) {\n    var actions = \"\";\n\n    if (downloadAllDocuments && !noFiles && documents.length > 0) {\n      var downloadAllDocumentsLink = { fileName: this.getResource(\"render-document-downloadalldocuments\") };\n      var action = this.renderAllDocumentDownload(downloadAllDocumentsLink);\n\n      actions += action;\n    }\n\n    return actions;\n  },\n\n  getTemplate: function getTemplate() {\n    return \"document\";\n  },\n\n  getTemplateItem: function getTemplateItem() {\n    return \"document-item\";\n  },\n\n  getErrorTemplate: function getErrorTemplate() {\n    return \"form-error\";\n  },\n\n  getTemplateDownload: function getTemplateDownload() {\n    return \"document-download\";\n  },\n\n  getTemplateReadonly: function getTemplateReadonly() {\n    return \"document-readonly\";\n  },\n\n  /**\r\n      * Get blob file\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  getDocumentFile: function getDocumentFile(file) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getFile({\n      idRender: properties.id,\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      contexttype: properties.contexttype }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  /**\r\n      * Get the download all items item\r\n      * @returns {*}\r\n      */\n  getAllDocumentFiles: function getAllDocumentFiles() {\n    return this.dataService.getAllDocuments({\n      xpath: this.getDocumentXpath(this.properties.xpath),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache,\n      idCase: this.properties.caseId,\n      idWorkItem: this.properties.workitemId }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  /**\r\n      * Download file\r\n      * @param file\r\n      */\n  downloadFile: function downloadFile(file) {\n    var self = this;\n\n    this.getDocumentFile(file).then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (error) {\n      var form = self.getFormContainer();\n      form && form.failHandler(error);\n    });\n  },\n\n  /**\r\n      * Download file\r\n      * @param file\r\n      */\n  downloadAllFiles: function downloadAllFiles(file) {\n    var self = this;\n\n    this.getAllDocumentFiles().then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (error) {\n      var form = self.getFormContainer();\n      form && form.failHandler(error);\n    });\n  } });","/*\r\n*   Name: Bizagi Render Cascading Combo Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for cascading combo renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.cascadingCombo\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Create dependency collection\n    self.dependants = [];\n    self.isDependant = false;\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.hasLocalData = bizagi.util.isEmpty(properties.parentCombo) ? properties.hasLocalData : false;\n\n    if (properties.value && properties.value.id === undefined)\n    properties.value = null;\n\n    self.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData)\n    properties.data = self.complementData(properties.data);\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n\n    // Check if this is a dependant combo\n    var parentCombo = self.parentCombo = self.getParentCombo();\n    if (parentCombo != null) {\n      var renderType = bizagi.util.normalizeType(parentCombo.properties.type);\n\n      if (/^cascadingcombo$/i.test(renderType)) {\n        self.isDependant = true;\n      }\n    }\n\n    // Apply element plugin, set a flag to avoid dependant combo ajax requests\n    self.initializingCascadingCombo = true;\n\n    // Call base\n    var result = this._super();\n\n    if (mode !== \"execution\") {\n      self.initializingCascadingCombo = false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n  /*\r\n     *   Refresh the combo, after it has been painted\r\n     */\n  refresh: function refresh(params, isInitialValue) {\n    var self = this;\n\n    // Wait until current element is rendered\n    $.when(self.isRendered()).done(function () {\n\n      // Unbind previous handler\n      // self.parentCombo.unbindDependantCombo(self);\n\n      // Clear current control\n      var control = self.getControl();\n      var mode = self.getMode();\n      control.empty();\n\n      // Render combo again\n      $.when(self.renderCombo(params)).then(function (html) {\n        // Append new element\n        control.html(html);\n\n        // Post-render method\n        self.postRender();\n\n        if (mode == \"execution\") {\n          self.configureHandlers();\n        }\n\n        // Set current value\n        if (self.getValue() !== undefined) {\n          self.setDisplayValue(self.getValue());\n        }\n\n        if (self.deferredVisible) {\n          self.deferredVisible.resolve();\n        }\n\n        self.trigger(\"select\", [self.value, isInitialValue]);\n\n      });\n    });\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode != \"execution\") return self.getDummyData();\n\n    // Do not load dependant combos when there are no parent id\n    if (self.isDependant) {\n      if (self.parentCombo && params) {\n        self.properties.remoteDataLoaded = false;\n      }\n\n      // Return an empty array when there are no parent defined when the combo is dependant\n\n      var parentValue = self.parentCombo.selectedValue ? self.parentCombo.selectedValue.id : '';\n\n      if (parentValue != '') {\n        params = params || {};\n        if (!params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"]) {\n          params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n        }\n        return this._super(params);\n      } else {\n        return [];\n      }\n    }\n\n    return this._super(params);\n  },\n\n\n  /* \r\n     *   Bind the combos to create the cascading feature\r\n     */\n  bindDependantCombo: function bindDependantCombo(dependantCombo) {\n    var self = this;\n    var renderType = bizagi.util.normalizeType(dependantCombo.properties.type);\n\n    // Check it is a cascading combo\n    if (/^cascadingcombo$/i.test(renderType)) {\n\n      // Append to dependant combos\n      self.dependants.push(dependantCombo);\n\n      // When this combo is selected we need to make the other combo to auto fill with an extra filter\n      dependantCombo.onChangeFunction = function (event, item, isInitialValue) {\n        // Fill items for next combo\n        self.refreshDependantCombo(dependantCombo, item.id, self.focusDependant, isInitialValue);\n\n        //if initial value is true, it prevents deleting the next combo\n        if (!isInitialValue) {\n          // Clean next inputs\n          dependantCombo.cleanInput();\n        }\n      };\n\n      if (!self.isEventBinded(\"select\")) {\n        self.bind(\"select\", dependantCombo.onChangeFunction);\n      }\n\n      // After the event binding has been made, we need to fill the new dependant render if this instance (the parent) has a value\n      if (!bizagi.util.isEmpty(self.getValue())) {\n\n        // Auto fill dependant items with current value\n        if (self.properties.hasLocalData) {\n          self.refreshDependantCombo(dependantCombo, self.getValue().id);\n        }\n\n      }\n    }\n  },\n  isEventBinded: function isEventBinded(event) {\n    if (typeof $._data(this.observableElement.get(0), \"events\") === \"undefined\") {\n      return false;\n    } else {\n      if (typeof $._data(this.observableElement.get(0), \"events\")[event] === \"undefined\") {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n\n\n  /* \r\n     *   Unbind the combos that are being redrawn\r\n     */\n  unbindDependantCombo: function unbindDependantCombo(dependantCombo) {\n    // When this combo is selected we need to make the other combo to auto fill with an extra filter\n    this.unbind(\"select\", dependantCombo.onChangeFunction);\n  },\n\n  /*\r\n     *   Fills the next dependant combo based on the given value\r\n     */\n  refreshDependantCombo: function refreshDependantCombo(dependant, parentValue, focus, isInitialValue) {\n    var self = this;\n    var params = {};\n    params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n\n    dependant.deferredVisible = $.Deferred();\n\n    if (!isInitialValue) {\n      // Clear dependant value\n      dependant.setValue(\"\", false);\n    }\n\n    dependant.refresh(params, isInitialValue);\n\n    if (focus) {\n      $.when(dependant.deferredVisible.promise()).done(function () {\n        dependant.inputCombo.trigger(\"click\");\n      });\n    }\n  },\n\n  /*\r\n     *   Empty html when render from action\r\n      */\n\n  emptyControlByChangeEditability: function emptyControlByChangeEditability() {\n    var control = this.getControl();\n    control.empty();\n  },\n\n  /* \r\n     *   Cleans the combo value\r\n     */\n  cleanInput: function cleanInput() {\n    this.triggerHandler(\"select\", { id: 0 });\n  },\n\n  /*\r\n     *   Search for the other cascading combo refering this one, by idRender\r\n     */\n  getParentCombo: function getParentCombo() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check if parentCombo is defined\n    if (properties.parentCombo === undefined)\n    return null;\n\n    // Get form reference\n    var form = self.getFormContainer();\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n    var controls = /^cascadingcombo$/i.test(renderType) ? form.getRenderByType(properties.type) : [];\n\n    var i = 0;\n    var j = 0;\n    var parents = [];\n\n    var control = null;\n\n    for (; i < controls.length; i++) {\n      if (properties.parentCombo === controls[i].properties.id) {\n        parents.push({ control: controls[i], index: i });\n      }\n    }\n\n    if (parents.length > 1) {\n      var parentLength, parent, xpathParent, parentArray;\n\n      for (; j < parents.length; j++) {\n        parent = parents[j].control;\n        xpathParent = parent.properties.xpath;\n        parentArray = xpathParent.split(\".\");\n        parentLength = parentArray.length;\n        xpathParent = parentArray.slice(0, parentLength - 1).join(\".\");\n\n        if (xpathParent === properties.xpath) {\n          control = controls[parents[j].index];\n          break;\n        }\n      }\n    } else {\n      control = form.getRenderById(properties.parentCombo);\n    }\n\n    // Return parent combo\n    return control;\n  },\n\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this;\n\n    // If the render has dependants we can't send to the server\n    return self._super() && bizagi.util.isMapEmpty(self.dependants);\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    var mode = this.getMode();\n\n    if (mode != \"execution\") return true;\n    return false;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n\n    if (!self.configured) {\n      // Call super\n      self._super();\n      self.configured = true;\n    }\n  },\n\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (self.isDependant && self.canBeSent() && self.itemSelected !== undefined)\n    return self._super(data, bRefreshForm);\n    return defer.resolve();\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    // Call original method\n    self._super();\n\n    if (self.value && self.isDependant == false) {\n      self.internalSetInitialValueFlag = true;\n      self.trigger(\"select\", [self.value, true]);\n    }\n\n    self.internalSetInitialValueFlag = false;\n  } });","/*\r\n*   Name: Bizagi Render List Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for list renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.list\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data \r\n                                               * @returns {} \r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.listSize = properties.listSize || 0;\n  },\n\n  /**\r\n      * Gets the template used by the combo render can be overriden in subclasses\r\n      * to reuse logic and just change the template\r\n      * @returns {} \r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"list\";\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs\r\n      * to data or not Can be overriden to change behaviour    \r\n      * @returns {} \r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  } });","/**\r\n *   Name: Bizagi Render MultiSelect Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for multiselect renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.multiSelect\", {}, {\n\n  /**\r\n                                                      * Update or init the element data\r\n                                                      * @param data\r\n                                                      */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    if (Array.isArray(this.value)) {\n      this.value = this.properties.value = JSON.encode({ \"value\": this.value });\n      this.properties.originalValue = this.properties.previousValue = this.value;\n    }\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.enableTyping = bizagi.util.parseBoolean(properties.enableTyping) !== null ? bizagi.util.parseBoolean(properties.enableTyping) : true;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @returns {*[]}\r\n      */\n  getData: function getData() {\n    var self = this;\n    var defer = new $.Deferred();\n    var properties = this.properties;\n\n    // Go to server\n    self.dataService.multiaction().getData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contexttype || null,\n      idPageCache: properties.idPageCache }).\n    done(function (data) {\n      properties.data = self.normalizeData(data);\n\n      defer.resolve(properties.data);\n\n    }).fail(function (data) {\n      var allowActions = true;\n      var form = self.getFormContainer();\n\n      if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\") {\n        allowActions = form.allowOnlineActions();\n      }\n\n      if (data.type === \"not-processed\" && allowActions) return;\n\n      defer.reject(data);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (Array.isArray(value)) {\n      value = JSON.encode({ \"value\": value });\n    }\n\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.value || [];\n  },\n\n  /**\r\n      * Get list of data\r\n      * @returns {*|Array}\r\n      */\n  getDataValue: function getDataValue() {\n    var list;\n\n    try {\n      list = JSON.parse(this.value);\n\n      return list.value || [];\n    } catch (e) {\n      return [];\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {*|Array|boolean}\r\n      */\n  hasValue: function hasValue() {\n    var values = this.getDataValue();\n\n    return values && values.length > 0;\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".bz-multiselect .bz-multiselect__tag:not(.bz-multiselect__plus)\", context);\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value\r\n      */\n  addElement: function addElement(value) {\n    var newValue = this.getDataValue();\n\n    newValue.push(value);\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value\r\n      */\n  removeElement: function removeElement(value) {\n    var idToRemove = value.id;\n    var newValue = this.getDataValue().\n    filter(function (item) {\n      return item.id !== idToRemove;\n    });\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Submit the selected data to the server in order to be saved\r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Mark a item how checked\r\n      * @param id\r\n      * @returns {*}\r\n      */\n  markAsChecked: function markAsChecked(id) {\n    var self = this;\n\n    return self.selected.some(function (item, index) {\n      var found = item.id === id;\n\n      if (found) self.selected.splice(index, 1);\n      return found;\n    });\n  },\n\n  isChecked: function isChecked(values, id) {\n    return values.some(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Method to verify if can add more items\r\n      * @param $tagsContainer\r\n      * @returns {boolean}\r\n      */\n  canAddMoreItems: function canAddMoreItems($tagsContainer) {\n    var self = this;\n    var containerWidth = parseInt($tagsContainer.css(\"width\"));\n    var $children = $tagsContainer.children();\n\n    var childrenWidth = $children.\n    toArray().\n    reduce(function (acc, child) {\n      acc += self.getElementWidth(child);\n      return acc;\n    }, 0);\n\n    return containerWidth > childrenWidth + self.Class.MORE_OPTION_WIDTH;\n\n  },\n\n  /**\r\n      * getElementWidth\r\n      * @param element\r\n      * @returns {*}\r\n      */\n  getElementWidth: function getElementWidth(element) {\n    var styles = window.getComputedStyle(element);\n    var outerWidth = $(element).outerWidth();\n    return outerWidth + [\n    \"padding-left\",\n    \"padding-right\",\n    \"margin-left\",\n    \"margin-right\"].\n    reduce(function (acc, property) {\n      acc += parseInt(styles[property]);\n      return acc;\n    }, 0);\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * @param query\r\n      * @param $container\r\n      */\n  filterList: function filterList(query, $container) {\n\n    $container.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = query.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n  },\n\n  /**\r\n      * Find item by id\r\n      * @param id\r\n      * @returns {[]}\r\n      */\n  findItemById: function findItemById(id) {\n    return (this.properties.data || []).find(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  },\n\n  /**\r\n      * Complement data from server before control implementation\r\n      * @param data\r\n      */\n  normalizeData: function normalizeData(data) {\n    (data || []).forEach(function (item) {\n      item.value = typeof item.value !== \"undefined\" && item.value !== null ? item.value : \"\";\n    });\n\n    return data;\n  } });","/*\r\n*   Name: Bizagi Render Search List Control\r\n*   Author: UI Forms Team\r\n*/\n\n$.Class.extend(\"bizagi.rendering.searchList\", {}, {\n\n  /**\r\n                                                     * Update or init the element data\r\n                                                     * @param {} data \r\n                                                     * @returns {} \r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // Set value\n    self.setValue(properties.value);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {} \r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      value: properties.value,\n      allowTyping: properties.allowTyping,\n      items: properties.value,\n      hasSearchForm: properties.searchForms ? true : false,\n      editable: properties.editable },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {} \r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setValue: function setValue(value) {\n    this.value = JSON.encode({ \"value\": value });\n    this.triggerRenderChange();\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value = { id:integer,value:[string || array] }\r\n      * @returns {} \r\n      */\n  addElement: function addElement(value) {\n    var list = JSON.parse(this.value);\n\n    list.value.push(value);\n\n    this.setValue(list.value);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value = { id:integer }\r\n      * @returns {} \r\n      */\n  removeElement: function removeElement(value) {\n    var list = JSON.parse(this.value);\n    var result = [];\n\n    $.each(list.value, function (key, val) {\n      if (val.id != value.id) {\n        result.push({ id: val.id, value: val.value });\n      }\n    });\n\n    this.setValue(result);\n  },\n\n  /**\r\n      * Remove last element to global value\r\n      * @returns {} \r\n      */\n  removeLastElement: function removeLastElement() {\n    var list = JSON.parse(this.value);\n\n    if (list.value.length > 0) {\n      list.value.pop();\n      this.setValue(list.value);\n    }\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    self.dataService.getSearchData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {} \r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {} \r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Check if the control has value\r\n      * @returns {} \r\n      */\n  hasValue: function hasValue() {\n    var list = this.getListItems();\n\n    return list.length > 0;\n  },\n\n  getListItems: function getListItems() {\n    var value = this.getValue();\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    return finalValue || [];\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","/**\r\n *   Name: Bizagi Render Money Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for money numbers\r\n */\n\n$.Class.extend(\"bizagi.rendering.money\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      var symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol : symbol;\n    } else {\n      properties.symbol = \"\";\n    }\n\n    properties.groupDigits = true;\n  } });","/**\r\n *   Name: Bizagi Render Radio Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.radio\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param data\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n\n    // Set a random identifier to fix a problem when using radio buttons inside grids and the plugin mismatch the elements because all of them have the same name\n    properties.unique = bizagi.util.randomNumber(1000, 1000000);\n  },\n\n  /**\r\n      * Gets the template used by the combo render\r\n      * Can be overridden in subclasses to reuse logic and just change the template\r\n      * @returns {string}\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"radio\";\n  },\n\n  /**\r\n      * Determines if we need to show the empty node or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs to data or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /**\r\n      * Adds custom parameters to process the template\r\n      * @returns {{vertical: boolean}}\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal,\n      horizontal: properties.horizontal };\n\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n    var selectedItem = self.element.find(\".ui-radio-state-checked\");\n\n    selectedItem.removeClass(\"ui-radio-state-checked\");\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n    self.clearDisplayValue();\n  },\n\n  /**\r\n      * Check value of control is changed\r\n      * @returns {boolean}\r\n      */\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n\n    var result = true;\n\n    if (value && value.length !== undefined) {\n      value = value[0];\n    }\n    if (compareValue && compareValue.length !== undefined) {\n      compareValue = compareValue[0];\n    }\n    if (baseValue && baseValue.length !== undefined) {\n      baseValue = baseValue[0];\n    }\n\n    value = value && value.id !== undefined ? value.id : value;\n    compareValue = compareValue && compareValue.id !== undefined ? compareValue.id : compareValue;\n    baseValue = baseValue && baseValue.id !== undefined ? baseValue.id : baseValue;\n\n    if (baseValue !== undefined) {\n      if (baseValue == value && value == compareValue) {\n        result = false;\n      } else {\n        if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n          result = false;\n        } else {\n          result = compareValue == value ? false : true;\n        }\n      }\n    } else {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    }\n\n    return result;\n  },\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var control = this.getControl();\n    control.empty();\n  } });","/*\r\n*   Name: BizAgi User field render\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the basic behavior for userfields\r\n*/\n$.Class.extend(\"bizagi.rendering.userfieldDefinition\", {}, {\n\n  /*************************************************************/\n  /* Private section of the userfield                          */\n  /*************************************************************/\n\n  /*\r\n                                                                  *   Method to be overriden by userfields in order to ensure that custom files are loaded before the execution\r\n                                                                  */\n  getFileDependencies: function getFileDependencies() {\n    return null;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    var defer = $.Deferred();\n    var fileDependencies = self.getFileDependencies();\n    if (fileDependencies && fileDependencies.length > 0) {\n      bizagi.loader.loadFile(fileDependencies).\n      then(function () {\n        // After all dependencies has been resolved\n        self.internalRenderControl();\n        defer.resolve();\n      });\n\n    } else {\n      $.when(self.renderUserfieldControl()).done(function () {\n        defer.resolve();\n      });\n    }\n\n    return defer.promise();\n  },\n\n  renderUserfieldControl: function renderUserfieldControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n\n    var loadUserfield = function loadUserfield() {\n      var userEditableControl = self.getEditableControl();\n      if (userEditableControl) {\n        self.input = control.html(userEditableControl);\n      }\n      self.renderComplex();\n      def.resolve();\n    };\n\n\n    loadUserfield();\n\n\n    return def.promise();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n    var loadUserfieldReadOnly = function loadUserfieldReadOnly() {\n      try {\n        var userReadOnlyControl = self.getReadonlyControl();\n        if (userReadOnlyControl) {\n          self.input = control.html(userReadOnlyControl);\n        }\n        self.renderComplex();\n\n      } catch (error) {\n        var displayName = self.properties.displayName || \"Widget\";\n        control.html(\"<h6>\" + displayName + \"</h6>\");\n      }\n\n    };\n\n    if (self.ready) {\n      self.ready().done(function () {\n        loadUserfieldReadOnly();\n      });\n    } else {\n      loadUserfieldReadOnly();\n    }\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getReadonlyValue();\n  },\n\n  /*\r\n     *   Sets the value in the rendered control \r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call base\n    self.setValue(value);\n\n    // Set editable value in control\n    self.setEditableValue(value);\n  },\n\n  getValue: function getValue() {\n    var self = this;\n    return self.getEditableValue();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type == \"error\") {\n        // Workflow engine error, we gotta show it with error\n        self.getFormContainer().addErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Saves the form\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderElements: function getRenderElements(xpath) {\n    var self = this;\n    var result = $();\n    var controls = self.getFormContainer().getRenders(xpath);\n    $.each(controls, function (i, item) {\n      result = result.add($(item.element));\n    });\n\n    return result;\n  },\n\n  getServerResourceURL: function getServerResourceURL(resource) {\n    var self = this;\n    var url = \"Rest/Userfields/{0}/resource/{1}/{2}\";\n    url = url.replace(\"{0}\", self.properties.userfieldGuid);\n    resource = resource.replace(\"\\\\\", \"__\").replace(\"/\", \"__\");\n    var device = bizagi.util.detectDevice();\n    url = url.replace(\"{1}\", device);\n    url = url.replace(\"{2}\", resource);\n    //Rest/Userfields/{0}/resource/desktop/{1}\n    return url;\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderValue: function getRenderValue(xpath) {\n    var self = this;\n    var controls = self.getFormContainer().getRenders(xpath);\n    var control;\n    $.each(controls, function (index, item) {\n      if (!control || item.properties.editable) {\n        control = item;\n      }\n    });\n    if (control) {\n      return control.getValue();\n    } else {\n      return null;\n    }\n  },\n\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var form = self.getFormContainer();\n    form.refreshForm(properties.id);\n  },\n\n  /*\r\n     * Shows a jquery dialog\r\n     */\n  showDialog: function showDialog(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showDialog method\");\n  },\n\n  /*\r\n     *   Shows a browser popup\r\n     */\n  showPopup: function showPopup(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showPopup method\");\n  },\n\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value = self.properties.value;\n  } });\n\n\n\n\n\n$.Class.extend(\"bizagi.rendering.basicUserField\", {}, {\n\n  /*************************************************************/\n  /* methods to be overriden by the implementations            */\n  /*************************************************************/\n  getEditableControl: function getEditableControl() {\n  },\n\n  renderComplex: function renderComplex() {\n  },\n\n  // Returns the value of the control\n  getEditableValue: function getEditableValue() {\n    return bizagi.rendering.render.prototype.getValue.apply(this, arguments);\n  },\n\n  // \n  setEditableValue: function setEditableValue(value) {\n    return bizagi.rendering.render.prototype.setValue.apply(this, arguments);\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n  },\n\n  getReadonlyValue: function getReadonlyValue() {\n    // if the method is not overriden then call the parent method \n    return bizagi.rendering.render.prototype.getDisplayValue.apply(this, arguments);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    // Call base\n    self._super();\n  } });\n\n\n\n/*\r\n        *   This control will wrap any userfield in order to load the code remotely, \r\n        *   when executing renderControl, which is an async method\r\n        */\n$.Class.extend(\"bizagi.rendering.userfieldWrapper\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n    // Save userfield guid and name\n    self.initialParams = params;\n    self.userfieldGuid = this.properties.userfieldGuid;\n    self.userfieldName = this.properties.control;\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startUserfieldLoading: function startUserfieldLoading() {\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endUserfieldLoading: function endUserfieldLoading() {\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  internalPostRender: function internalPostRender() {\n    var self = this;\n    self.startUserfieldLoading();\n    $.when(self.getUserfieldControl()).\n    done(function (control) {\n      control.element = self.element;\n\n      // Add grid and surrogatekey properties if the userfield is a column userfield\n      if (self.column) {\n        control.isColumn = true;\n        control.grid = self.grid;\n        control.surrogateKey = self.surrogateKey;\n        control.properties.xpathContext = self.getControlXpathContext(control);\n        control.getControl = self.column.getControl;\n      }\n\n      return control.internalPostRender();\n    }).\n    always(function () {\n      self.endUserfieldLoading();\n    });\n  },\n\n  /*\r\n     *   Helper for userfields to fetch the xpathContext\r\n     */\n  getControlXpathContext: function getControlXpathContext(control) {\n    var self = this;\n    var properties = control.properties;\n\n    if (control.isColumn) {\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\" : control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\";\n    }\n\n    return properties.xpathContext;\n  },\n\n\n  getUserFieldInstance: function getUserFieldInstance(params) {\n    console.log(\"not implemented\");\n  },\n\n  /*\r\n     *   Replicate all userfield methods to this instance in order to create a proxy\r\n     */\n  replicateUserfieldMethods: function replicateUserfieldMethods(control) {\n    var self = this;\n    for (var key in control.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"subscribe\" || key == \"unsubscribe\" ||\n      key == \"publish\" || key == \"render\" || key == \"triggerHandler\" || key == \"dispose\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ if (this.userfieldInstance) return this.userfieldInstance.' + key + '.apply(this.userfieldInstance, arguments); return null;};tmp');\n    }\n\n    // Replicate properties and value\n    control.properties = self.properties;\n    control.value = self.value;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutUserField = setTimeout(function () {\n      if (self.userfieldInstance) {\n        self.userfieldInstance.unbind(\"renderchange\");\n        self.userfieldInstance.dispose();\n      }\n      clearTimeout(timeOutUserField);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","/**\r\n *   Name: Bizagi Render Image Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for image control\r\n */\n\n$.Class.extend(\"bizagi.rendering.image\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\n{\n\n  BASE_IMAGE: \"data:image/png;base64,\",\n\n  /**\r\n                                         * Update or init the element data\r\n                                         * @param data\r\n                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var maxSize = 4091904;\n\n    if (properties.maxSize) {\n      maxSize = Number(properties.maxSize);\n    } else if (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\") {\n      maxSize = Number(BIZAGI_SETTINGS.UploadMaxFileSize);\n    }\n\n    properties.maxSize = maxSize;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) === true;\n    properties.validExtensions = properties.validExtensions || \"\";\n    properties.isChanged = false;\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length != 0) {\n          singleExtensions[i] = \"*.\" + singleExtensions[i].replaceAll(\" \", \"\");\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddFileUrl(properties.isUserPreference);\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null;\n    self.initializeWidthAndHeight();\n\n  },\n\n  /**\r\n      * Update or init the element data\r\n      * @param data\r\n      */\n  initializeWidthAndHeight: function initializeWidthAndHeight() {\n    var properties = this.properties;\n\n    properties.isAutoWidth = false;\n    properties.isAutoHeight = false;\n\n    if (properties.width === -1) {\n      properties.width = \"100%\";\n      properties.isAutoWidth = true;\n    } else {\n      properties.width = properties.width + \"px\";\n    }\n\n    if (properties.height === -1) {\n      properties.height = \"auto\";\n      properties.isAutoHeight = true;\n    } else {\n      properties.height = properties.height + \"px\";\n    }\n  },\n\n  setData: function setData(value) {\n    var self = this;\n    var previousValue = self.getData();\n    if (bizagi.util.isEmpty(value)) {\n      this.properties.binaryValue = null;\n    } else {\n      this.properties.binaryValue = value instanceof Blob ? value : bizagi.util.b64toBlob(value, \"image/png\");\n    }\n\n    if (previousValue != this.properties.binaryValue) {\n\n      if (self.properties.required && self.isExecutionMode()) {\n        var isValidField = !self.checkRequired([]);\n        self.changeRequiredLabel(isValidField);\n      }\n\n      if (this.properties.isChanged) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  getData: function getData() {\n    return this.properties.binaryValue || [];\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"image\");\n    var form = self.getFormContainer();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      if (!self.isDisposed()) {\n        self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\n\n        if (!bizagi.util.isEmpty(self.properties.url)) {\n          if (form.properties.compatibilityVersion < 2)\n          self.properties.value = [[0, \"uploaded\"]];\n        } else {\n          self.properties.value = [];\n        }\n\n        self.setValue(self.properties.value);\n\n        var html = $.fasttmpl(template, { url: self.properties.url });\n        return html;\n      }\n    });\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"image-readonly\");\n    var html = $.fasttmpl(template);\n\n    return html;\n  },\n\n  /**\r\n      * This method return the name of template of items, please make a override in each device\r\n      * @returns {*}\r\n      */\n  getTemplateItem: function getTemplateItem() {\n    return this.renderFactory.getTemplate(\"image-item\");\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  renderUploadItem: function renderUploadItem() {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.getTemplateItem();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      var url = dataUrl || \"\";\n\n      var html = $.fasttmpl(template, {\n        url: url,\n        allowDelete: self.properties.allowDelete,\n        editable: self.properties.editable,\n        mode: mode });\n\n\n      self.properties.url = url;\n\n      return html;\n    });\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(params) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var url = \"\";\n\n    if (!this.isExecutionMode()) return $.Deferred().resolve(\"\").promise();\n\n    var parameters = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype,\n      property: params && params.property ? params.property : \"fileContent\",\n      dataType: \"text\" };\n\n\n    if (properties.isUserPreference) {\n      self.currentUser = bizagi.currentUser.idUser;\n      parameters.xpathContext = \"@Context.Users[id == \" + self.currentUser + \"]\";\n      parameters.contexttype = \"entity\";\n      parameters.surrogatekey = self.currentUser;\n    }\n\n    if (isVersion2OrSuperior) {\n      if (bizagi.util.isEmpty(self.properties.value) && !self.hasValue()) return $.Deferred().resolve(\"\").promise();\n\n      // forceBase64 - Allow to get the thumbnail image on desktop devices\n      if (!self.properties.forceBase64) {\n        parameters.sessionId = form.properties.sessionId;\n        parameters.property = \"fileBinaryContent\";\n        return self.dataService.downloadFile(parameters).\n        then(function (blob) {\n          self.setData(blob);\n          if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n          return bizagi.util.blobTob64(blob, false);\n        }).\n        then(function (base64) {\n          return bizagi.util.getDataUrl(base64, properties.url);\n        });\n      }\n    }\n\n    return self.dataService.multiaction().getPropertyData(parameters, \"text\").\n    then(function (data) {\n      if (data.charAt(0) === \"\\\"\") data = data.slice(1, -1);\n      if (data !== \"\") url = self.BASE_IMAGE + data;\n      self.setData(bizagi.util.b64toBlob(data));\n      return url;\n    });\n  },\n\n  buildItemUrlOffline: function buildItemUrlOffline() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getFormParams();\n    var loadImageFromForm = !properties.isChanged;\n    var id = self.buildOfflineImageId();\n\n    var parameters = {\n      idCase: formParams.idCase,\n      idWorkitem: formParams.idWorkitem,\n      id: id,\n      offlineType: formParams.offlineType,\n      loadImageFromForm: loadImageFromForm };\n\n\n    return $.when(self.dataService.getOfflineImage(parameters, bizagi.util.db.AttachmentType.Blob)).\n    then(function (blob) {\n      self.setData(blob);\n      if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n      return bizagi.util.blobTob64(blob, false);\n    }).\n    then(function (base64) {\n      return bizagi.util.getDataUrl(base64, properties.url);\n    });\n  },\n\n  /**\r\n      * Create an image offline\r\n      * @param path File in Browser or Path in Mobile Devices\r\n      * @param promise Promise to be resolved when save is completed\r\n      */\n  saveImageOffline: function saveImageOffline(path) {\n    var self = this;\n    var id = self.buildOfflineImageId();\n    var fileName = self.fileProperties !== undefined ? self.fileProperties.name : path.name;\n\n    return self.dataService.getFileService().resolveBlobFromPath(path, fileName).\n    then(function (blobImage) {\n      // Save the image as attachment\n      var formParams = self.getFormParams();\n      var parameters = {\n        idCase: formParams.idCase,\n        idWorkitem: formParams.idWorkitem,\n        id: id,\n        operationType: \"edition\",\n        offlineType: formParams.offlineType };\n\n\n      return self.dataService.saveOfflineImage(parameters, blobImage);\n    });\n  },\n\n  /**\r\n      * Builds the upload item url in real size\r\n      * @returns {*}\r\n      */\n  buildFullItemUrl: function buildFullItemUrl() {\n    return this.buildItemUrl({ \"property\": \"fileFullContent\" });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return this.properties.isChanged;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.properties.value || [];\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.visible) === false) {\n      return true;\n    }\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (self.properties.required) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (!newRow) {\n        var value = self.getValue();\n\n        if (value.length === 0) {\n          var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({ xpath: self.properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = self.getUploadXpath();\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = properties.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = properties.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = 'savefile';\n\n    if (properties.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contexttype;\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var $control = this.getControl();\n    $control.empty();\n  },\n\n  buildOfflineImageId: function buildOfflineImageId() {\n    var self = this;\n    var form = self.getFormContainer();\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n\n    return self.dataService.fileService.buildOfflineImageId(self.properties.value, self.properties.xpathContext, self.properties.xpath, isVersion2OrSuperior);\n  } });","/*\r\n*   Name: BizAgi Render Association Class\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define basic stuff for association renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.association\", {}, {\n\n  /*\r\n                                                     *   Update or init the element data\r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var properties = self.properties;\n\n    // Fill default properties\n    properties.property = \"flipped\";\n    properties.idRender = self.properties.id;\n    properties.allowFlip = typeof properties.allowFlip != \"undefined\" ? bizagi.util.parseBoolean(properties.allowFlip) : true;\n    properties.flipped = typeof properties.flipped != \"undefined\" ? bizagi.util.parseBoolean(properties.flipped) : false;\n    properties.flipstate = properties.flipped;\n\n\n    // data of entities (left and right)\n    properties.leftData = properties.leftData || [];\n    properties.rightData = properties.rightData || [];\n\n    if (properties.value) {\n      self.processPropertyValue();\n    }\n  },\n\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).\n    done(function (flip) {\n\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var html = $.fasttmpl(template, self.properties, {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n\n  /*\r\n     * Returns the flip state\r\n     */\n  getFlipAssociation: function getFlipAssociation() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode == \"execution\")\n    return self.dataService.getFlipAssociation(self.properties);\n\n    return false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var value = self.getValue();\n\n    return value;\n  },\n\n  /*\r\n     *   Get the template \r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"association\";\n  },\n\n\n  /**\r\n     * Get Left Data, verify if flipper flags sets true\r\n     * \r\n     * @param column {'0'||'1'}\r\n     */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.data;\n    var data = [];\n    var associationData = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(associationData, function (key, item) {\n      data.push({ id: item.id, value: item.value });\n    });\n\n    return data;\n  },\n\n  /**\r\n     * Association of right elements\r\n     */\n  getRightAssociation: function getRightAssociation(leftId) {\n    var self = this;\n    var properties = self.data;\n    var association = [];\n\n\n    var isChecked = function isChecked(leftId, idRight) {\n      var checked = false;\n      $.each(properties.formatJson.value, function (key, value) {\n        if (!checked && value.id == leftId && value.value.indexOf(idRight) >= 0) {\n          checked = true;\n        }\n      });\n\n      return checked;\n    };\n\n    // create association and check element\n    if (properties.flipped) {\n      // left element\n      $.each(properties.leftData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(data.id, leftId) });\n\n\n      });\n    } else {\n      $.each(properties.rightData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(leftId, data.id) });\n\n      });\n    }\n\n    return association;\n  },\n\n\n  removeElement: function removeElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Remove right element from left panel\n          $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n            if (leftId == removeValue) {\n              // Splice from array\n              self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n            }\n          });\n        }\n      } else if (data.id == leftId) {\n        // Remove right element from left panel\n        $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n          if (rightId == removeValue) {\n            // Splice from array\n            self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n          }\n        });\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n\n  addElement: function addElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Add right element to left panel\n          self.properties.formatJson.value[key][\"value\"].push(leftId);\n        }\n      } else if (data.id == leftId) {\n        // Add right element to left panel\n        self.properties.formatJson.value[key][\"value\"].push(rightId);\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n  makeJsonBase: function makeJsonBase() {\n    var self = this;\n    self.properties.formatJson = self.properties.formatJson || {\n      leftXpath: self.properties.leftXpath,\n      rightXpath: self.properties.rightXpath,\n      leftFactName: self.properties.leftFactName,\n      rightFactName: self.properties.rightFactName,\n      value: self.properties.value };\n\n  },\n\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n\n    if (self.properties.formatJson) {\n      var values = self.properties.formatJson.value;\n    } else {\n      values = self.properties.value;\n    }\n\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var data = values[i];\n      if (data && data.value.length > 0) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /*\r\n     * This method process the value.\r\n     * changes the format to send request\r\n     */\n  processPropertyValue: function processPropertyValue() {\n    var self = this;\n    var properties = self.properties;\n    var values = properties.value;\n    var result = [];\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var value = values[i];\n      result.push({ id: value[0], value: value[1] });\n    }\n\n    properties.value = result;\n  } });","/**\r\n * Description of control\r\n *\r\n * @author:\r\n */\n\n$.Class.extend(\"bizagi.rendering.getUser\", {}, {\n  /*\r\n                                                  * Constructor\r\n                                                  */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    var properties = this.properties;\n    properties.allowDelegatedUser = this.properties.xpath && this.properties.xpath === \"idDelegate\";\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"render-getUser\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var result = this._super();\n    var html = result;\n    if (!bizagi.util.isString(html)) {\n      html = result[0] && result[0].value ? result[0].value : \"\";\n    }\n\n    return html;\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    return bValid;\n  } });","/**\r\n *   Name: Bizagi Render Query Process\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for query process renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.queryProcess\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n     * Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"queryProcess\");\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  loadtemplates: function loadtemplates() {\n  } });","/**\r\n *   Name: BizAgi Render Query Search User\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for query search user renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.querySearchUser\", {}, {\n  /*\r\n                                                          * Constructor\r\n                                                          */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"render-querySearchUser\");\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  /*\r\n      *   Fetch the data into a deferred\r\n      */\n  getUserData: function getUserData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || false;\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n    //GET DATA\n    var data = [{ \"id\": 1, \"value\": \"user1\" }, { \"id\": 2, \"value\": \"user2\" }, { \"id\": 3, \"value\": \"user3\" }, {\n      \"id\": 4,\n      \"value\": \"user4\" },\n    { \"id\": 5, \"value\": \"user5\" }, { \"id\": 6, \"value\": \"user6\" }, { \"id\": 7, \"value\": \"user7\" }, {\n      \"id\": 8,\n      \"value\": \"user8\" },\n    { \"id\": 9, \"value\": \"user9\" }, { \"id\": 10, \"value\": \"user10\" }];\n    properties.data = data;\n    defer.resolve(properties.data);\n    return defer.promise(defer);\n\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var displayValue = self.getDisplayValue();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (self.properties.editable == false) {\n      // Render as simple value\n      if (typeof value == \"string\") {\n\n        // Replace line breaks for html line breaks\n        var decodedDisplayValue = bizagi.util.decodeURI(displayValue);\n        var valueToDisplay = bizagi.util.encodeString(decodedDisplayValue);\n\n        control.html(valueToDisplay);\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * More information SUITE-9407\r\n      */\n  setValue: function setValue(value) {\n    /*ISUPP-4116/*\r\n                                       /*var decodedValue = bizagi.util.decodeURI(value);*/\n    var self = this;\n    self._super(value);\n  } });","/**\r\n *   Name: Bizagi Render Query Filter Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for query wrapper\r\n */\n\n$.Class.extend(\"bizagi.rendering.queryAdvanced\", {}, {\n\n  MAX_TAGS_SUPPORTED: 50,\n\n  OPERATORS: {\n    \"like\": {\n      label: \"workportal-widget-filter-operators-contains\",\n      defaultLabel: \"Contains\",\n      appliesTo: [\"Text\"],\n      operator: \"APPROX\",\n      action: \"like\" },\n\n    \"equals\": {\n      label: \"workportal-widget-filter-operators-equals-to\",\n      appliesTo: [\"Text\", \"Number\", \"Currency\"],\n      operator: \"EXACT\",\n      action: \"tags\" },\n\n    \"equal\": {\n      label: \"workportal-widget-filter-operators-equals-to\",\n      appliesTo: [\"DateTime\"],\n      operator: \"EXACT\",\n      action: \"equal\" },\n\n    \"not-equals\": {\n      label: \"workportal-widget-filter-operators-different-to\",\n      appliesTo: [\"Text\", \"Number\", \"Currency\"],\n      operator: \"NOTEXACTORNULL\",\n      action: \"tags\" },\n\n    \"starts-with\": {\n      label: \"workportal-widget-filter-operators-starts-with\",\n      defaultLabel: \"Starts with\",\n      appliesTo: [\"Text\"],\n      operator: \"WILDCARD\",\n      action: \"starts-with\" },\n\n    \"ends-with\": {\n      label: \"workportal-widget-filter-operators-ends-with\",\n      defaultLabel: \"Ends with\",\n      appliesTo: [\"Text\"],\n      operator: \"WILDCARD\",\n      action: \"ends-with\" },\n\n    \"greater-equals-than\": {\n      label: \"workportal-widget-filter-operators-greater-or-equal-than\",\n      appliesTo: [\"Number\", \"DateTime\", \"Currency\"],\n      operator: \"FROM\",\n      action: \"from\" },\n\n    \"less-equals-than\": {\n      label: \"workportal-widget-filter-operators-less-or-equal-than\",\n      appliesTo: [\"Number\", \"DateTime\", \"Currency\"],\n      operator: \"TO\",\n      action: \"to\" },\n\n    \"between\": {\n      label: \"workportal-widget-filter-operators-between\",\n      defaultLabel: \"Between\",\n      appliesTo: [\"Number\", \"DateTime\", \"Currency\"],\n      operator: \"BETWEEN\",\n      action: \"between\" },\n\n    \"is-null\": {\n      label: \"workportal-widget-filter-operators-is-empty\",\n      defaultLabel: \"Is empty\",\n      appliesTo: [\"Text\", \"Number\", \"DateTime\", \"Currency\"],\n      operator: \"EXACT\",\n      action: \"is-null\" },\n\n    \"wildcard\": {\n      label: \"Wildcard\",\n      appliesTo: [\"Text\"],\n      operator: \"WILDCARD\",\n      action: \"wildcard\",\n      skip: true },\n\n    \"default\": {\n      label: \"Default\",\n      appliesTo: [\"Number\", \"Currency\"],\n      operator: \"EXACT\",\n      action: \"default\",\n      skip: true } },\n\n\n\n  // region // #region CONTROL BASE\n\n  /**\r\n   * Constructor\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n\n    // Call base\n    this._super(data);\n\n    var properties = this.properties;\n\n    properties.filterType = properties.filterType || \"\";\n    properties.renderType = this.Class.DATATYPE;\n    properties.data = this.getOptions();\n    properties.orientation = properties.orientation || \"\";\n\n    this.currentFilter = {};\n    this.controlInitial = null;\n    this.controlEnd = null;\n\n  },\n\n  /**\r\n      * Method to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var $control = this.getControl();\n    this.queryFilter = $(\".bz-query-filter\", $control);\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Method to customize each control\r\n      * @returns {jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"query.advanced\");\n    var html = $.fasttmpl(template, {});\n\n    return html;\n  },\n\n  processComplexValue: function processComplexValue(value) {\n    var newValue = value;\n    var isString = newValue && $.trim(newValue).length > 0;\n    var isArray = isString && /^\\[.*?\\]$/i.test(newValue);\n\n    if (isString && isArray) {\n      newValue = JSON.parse(newValue);\n    } else if (isString) {\n      newValue = [newValue];\n    } else {\n      newValue = newValue || [];\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var result;\n\n    if (this.isCurrentDefaultFilter()) {\n      result = this._super();\n    } else {\n      result = this.renderReadOnlyFilter();\n    }\n\n    return result;\n  },\n\n  renderReadOnlyFilter: function renderReadOnlyFilter() {\n    var template = this.renderFactory.getTemplate(\"query.advanced.readonly\");\n    var filter = this.getCurrentFilter();\n    var value = this.getValue() == \"null\" || bizagi.util.isNull(this.getValue()) ? \"\" : this.getValue();\n    var $templateFilterReadonly = $.tmpl(template, {\n      filterName: this.getResourceByKey(filter.label, filter.defaultLabel) });\n\n\n    var $filterValueContainer = $(\".bz-query-advanced__filter\", $templateFilterReadonly);\n\n    if (this.isCurrentBetweenFilter()) {\n      this.renderReadOnlyBetween($filterValueContainer);\n    } else if (this.isCurrentTagFilter()) {\n      this.renderReadOnlyTags($filterValueContainer);\n    } else {\n      $filterValueContainer.append(\"<li class='bz-query-advanced__filter-input'><span>\" + value + \"</span></li>\");\n    }\n\n    return $templateFilterReadonly;\n  },\n\n  renderReadOnlyBetween: function renderReadOnlyBetween(container) {\n    var values = this.processComplexValue(this.getValue());\n    if (values.length === 0) return;\n\n    var valueFrom = values[0] == \"null\" || bizagi.util.isNull(values[0]) ? \"\" : values[0];\n    var valueTo = values[1] == \"null\" || bizagi.util.isNull(values[1]) ? \"\" : values[1];\n    var from = \"<li class='bz-query-advanced__filter-input-from'><span>\" + valueFrom + \"</span></li>\";\n    var to = \"<li class='bz-query-advanced__filter-input-to'><span>\" + valueTo + \"</span></li>\";\n\n    container.append(from).append(to);\n  },\n\n  renderReadOnlyTags: function renderReadOnlyTags(container) {\n    var values = this.processComplexValue(this.getValue());\n    if (values.length === 0) return;\n\n    var template = this.renderFactory.getTemplate(\"query.advanced-pill\");\n\n    // Render tag items\n    values.forEach(function (value) {\n      var $ChildToAdd = $.tmpl(template, {\n        id: this.getTagId(),\n        value: this.formatTagItem(value || \"\"),\n        editable: false });\n\n\n      // Append tag\n      container.append($ChildToAdd);\n    });\n\n  },\n\n  /**\r\n      * The render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Call to base\n    this._super();\n\n    // Call to filters\n    this.configureFilterHandlers();\n\n    // Call to tag handlers\n    this.configureTagHandlers();\n\n    // Call to default handlers, Not apply to wildcard filter\n    if (!/Text/i.test(this.properties.renderType))\n    this.configureDefaultHandlers();\n  },\n\n  /**\r\n      * Add handlers to query-filter control\r\n      */\n  configureFilterHandlers: function configureFilterHandlers() {\n    var self = this;\n    var $control = self.getControl();\n    var $filterContainer = $(\".bz-query-advanced__tags\", $control);\n\n    $filterContainer.on(\"click\", function (evt) {\n      var $context = $(evt.target);\n      var isModeWildcard = $control.find(\".bz-query-advanced\").data(\"mode-wildcard\") || false;\n\n      var filterTagExist = self.filterOptionIsShowed();\n      var clickOnFilter = $context.hasClass(\"bz-query-advanced__filter\") ||\n      $context.hasClass(\"bz-query-advanced__tag\") ||\n      $context.hasClass(\"bz-query-advanced__tag-span\") ||\n      $context.hasClass(\"bz-btn-icn bz-query-advanced__tag-arrow\");\n\n      if (!isModeWildcard && (filterTagExist && clickOnFilter || !filterTagExist)) {\n        self.onToggleDataView();\n      }\n\n    });\n\n    $control.on(\"click\", \".bz-query-advanced__clean\", function () {\n      self.onToggleDataOptions();\n    });\n\n  },\n\n  /**\r\n      * Add handlers to query-filter control\r\n      */\n  configureTagHandlers: function configureTagHandlers() {\n    var self = this;\n    var $control = this.getControl();\n\n    // Add pill on enter and tab\n    $control.on(\"keydown\", \"input[data-action='tags']\", function (evt) {\n      var key = evt.key || evt.charCode || evt.keyCode;\n      var valueTag = null;\n\n      if (key === \"Tab\" || key === \"Enter\") {\n        var $tagInput = $(this);\n        valueTag = self.getValidTagValue($tagInput.val());\n\n        if (valueTag) {\n          self.addTag({ id: self.getTagId(), value: valueTag, displayValue: valueTag });\n          $tagInput.val(\"\");\n          evt.preventDefault();\n        }\n      } else if (key === \"Backspace\") {\n        valueTag = $(this).val();\n\n        if (!valueTag) {\n          self.removeLastTag();\n        }\n      }\n    });\n\n    // Add pill on focus out\n    $control.on(\"blur\", \"input[data-action='tags']\", function () {\n      var $tagInput = $(this);\n      var valueTag = self.getValidTagValue($tagInput.val());\n\n      if (valueTag) {\n        self.addTag({ id: self.getTagId(), value: valueTag, displayValue: valueTag });\n        $tagInput.val(\"\");\n      }\n    });\n\n    // Remove pills on click\n    $control.on(\"click\", \".bz-query-advanced__remove-pill-icon\", function (evt) {\n      var tagId = Number($(evt.target).attr(\"data-id\") || 0);\n      self.removeTag(tagId);\n    });\n\n  },\n\n  /**\r\n      * Add handlers to query-filter control\r\n      */\n  configureDefaultHandlers: function configureDefaultHandlers() {\n    var self = this;\n    var $control = self.getControl();\n    var $buttonClean = $(\".bz-query-advanced__clean\", $control);\n\n    $control.on(\"change\", \".bz-query-advanced__input\", function () {\n      if (!self.filterOptionIsShowed()) {\n        if ($.trim(this.value).length > 0) {\n          self.setCurrentFilter({ id: \"default\" });\n          $buttonClean.removeClass('bz-hidden');\n\n          // Hide list of filters\n          self.closeFloatView();\n        } else {\n          self.setCurrentFilter({ id: \"\" });\n          $buttonClean.addClass('bz-hidden');\n        }\n      }\n    });\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    // For base filter\n    if (!this._super(invalidElements)) return false;\n\n    // For single filter\n    if (!!this.controlInitial && !this.controlInitial.isValid(invalidElements)) return false;\n\n    // For between filter\n    if (!!this.controlEnd && !this.controlEnd.isValid(invalidElements)) return false;\n\n    return true;\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {boolean|*}\r\n      */\n  hasValue: function hasValue() {\n    if (this.isCurrentNullFilter()) return true;\n    return this._super();\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LIST FILTERS\n\n  /**\r\n   * Toggle of data view\r\n   */\n  onToggleDataView: function onToggleDataView() {\n    this.floatViewIsCollapsed() ? this.closeFloatView() : this.renderFloatView();\n  },\n\n  /**\r\n      * Check if float list is collapsed\r\n      * @returns {boolean}\r\n      */\n  floatViewIsCollapsed: function floatViewIsCollapsed() {\n    var $listView = $(\".bz-query-advanced__content\", this.element);\n\n    return $listView && $listView.length > 0;\n  },\n\n  /**\r\n      * Get data and render the float list view\r\n      */\n  renderFloatView: function renderFloatView() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"query.advanced-item\");\n\n    var filters = self.properties.data;\n    var $floatList = self.showFloatListView(template, { datasource: filters }, {});\n\n    self.floatListHandlers($floatList);\n  },\n\n  /**\r\n      * Show float list view\r\n      * @param template\r\n      * @param data\r\n      */\n  showFloatListView: function showFloatListView(template, data) {\n    var self = this;\n    var $control = self.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n    var $floatList = $.tmpl(template, data);\n    var widthControl = self.queryFilter.width() - 2;\n\n    $containerRender.addClass(\"bz-query-advanced__visible\");\n    $containerControl.addClass(\"bz-query-advanced__visible bz-query-advanced__floats\");\n    $containerControl.append($floatList);\n\n    $floatList.width(widthControl);\n\n    $floatList.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: self.queryFilter,\n      collision: \"fit\" }).\n    hide();\n\n    // Display view\n    $floatList.show();\n\n    // Stop bubbling outside the dropdown\n    $floatList.on(\"mousedown\", function (ev) {\n      ev.preventDefault();\n      return false;\n    });\n\n    // Add global handler to close the float view\n    var timeoutMouseDown = setTimeout(function () {\n      $(document).one(\"mousedown.query-advanced\", function () {\n        $floatList.trigger('closeView');\n      });\n      clearTimeout(timeoutMouseDown);\n    }, 0);\n\n    return $floatList;\n  },\n\n  /**\r\n      * Update the float list view\r\n      */\n  closeFloatView: function closeFloatView() {\n    var $control = this.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    var $listView = $($containerRender).find(\".bz-query-advanced__content\");\n\n    $listView.hide();\n\n    this.destroyFloatView($listView);\n  },\n\n  /**\r\n      * Destroy the float list view\r\n      * @param $list\r\n      */\n  destroyFloatView: function destroyFloatView($list) {\n    var $control = this.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    if ($containerControl.hasClass(\"bz-query-advanced__visible\")) {\n      $containerControl.removeClass(\"bz-query-advanced__visible\");\n    }\n\n    if ($containerControl.hasClass(\"bz-query-advanced__floats\")) {\n      $containerControl.removeClass(\"bz-query-advanced__floats\");\n    }\n\n    if ($containerRender.hasClass(\"bz-query-advanced__visible\")) {\n      $containerRender.removeClass(\"bz-query-advanced__visible\");\n    }\n\n    $list.remove();\n  },\n\n  floatListHandlers: function floatListHandlers($floatListContext) {\n    var self = this;\n    var $listContainer = $floatListContext.find(\".bz-query-advanced__list li\");\n\n    $listContainer.click(function () {\n      var $context = $(this);\n\n      var id = $context.data(\"id\");\n      var element = $(\"span\", $context)[0];\n      var value = element.innerText;\n\n      var newValue = { id: id, value: value };\n\n      if (self.getCurrentFilter().id !== newValue.id) {\n        if (!self.filterOptionIsShowed()) {\n          self.showHideCleanButton(true);\n        }\n\n        self.destroyFilterContent();\n        self.setSelectedFilter(newValue);\n      } else {\n        self.closeFloatView();\n      }\n\n\n      // Add focus to first control\n      if (self.controlInitial) {\n        $(\"input\", self.controlInitial.getControl()).focus();\n      }\n    });\n\n\n    $floatListContext.on(\"closeView\", function () {\n      self.closeFloatView();\n\n      $(document).unbind(\"mousedown.query-advanced\");\n    });\n  },\n\n  setSelectedFilter: function setSelectedFilter(item) {\n    this.onFilterChange(item);\n    this.closeFloatView();\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO TAGS FILTER\n\n  tagIsAdded: function tagIsAdded(newTagItem) {\n    var values = (this.getDataValue() || []).\n    map(function (tagItem) {\n      return tagItem.value;\n    });\n\n    return values.includes(newTagItem.value);\n  },\n\n  addTag: function addTag(tagItem) {\n    if (this.tagIsAdded(tagItem)) return;\n\n    var form = this.getFormContainer();\n    form.clearValidationMessages();\n\n    if (this.isMaximumTagsValid()) {\n      var $container = $(\".bz-query-advanced__filter-input\", this.getControl());\n      var template = this.renderFactory.getTemplate(\"query.advanced-pill\");\n      var $templateItem = $.tmpl(template, {\n        id: tagItem.id,\n        value: tagItem.displayValue,\n        editable: this.properties.editable });\n\n\n      // Append tag\n      $container.before($templateItem);\n\n      // Update data\n      this.addElement(tagItem);\n    } else {\n      var message = this.getResourceByKey(\"workportal-tags-error-limit-exceeded\", \"You cannot add more than #maxTags# criteria elements\").replace(\"#maxTags#\", this.MAX_TAGS_SUPPORTED);\n      form.addErrorMessage(message);\n    }\n  },\n\n  removeTag: function removeTag(tagId) {\n    $(\"li[data-id=\" + tagId + \"]\", this.getControl()).remove();\n    // remove and update data\n    this.removeElement({ id: tagId });\n  },\n\n  removeLastTag: function removeLastTag() {\n    var tags = this.getDataValue();\n    var lastTag = tags[tags.length - 1];\n    // remove and update data\n    if (lastTag) {\n      this.removeTag(lastTag.id);\n    }\n  },\n\n  /**\r\n      * Get new id for tag filter\r\n      * @returns {number}\r\n      */\n  getTagId: function getTagId() {\n    return Math.ceil(Math.random() * 1000000);\n  },\n\n  /**\r\n      * Add format to tag\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  formatTagItem: function formatTagItem(value) {\n    return $.trim(value);\n  },\n\n  /**\r\n      * Add format to string\r\n      */\n  performTagItems: function performTagItems() {\n    var resultString = \"\";\n    var listString = (this.getDataValue() || []).\n    filter(function (item) {\n      return item && !!item.value;\n    }).map(function (item) {\n      return item.value;\n    });\n\n    if (listString.length > 1) {\n      resultString = JSON.encode(listString);\n    } else {\n      resultString = listString && listString[0] || \"\";\n    }\n\n    return resultString;\n  },\n\n  /**\r\n      * Check if maximum number of tag is valid\r\n      * @returns {boolean}\r\n      */\n  isMaximumTagsValid: function isMaximumTagsValid() {\n    var list = this.getDataValue() || [];\n\n    return list && list.length < this.MAX_TAGS_SUPPORTED;\n  },\n\n  /**\r\n      * Get list of data\r\n      * @returns {*|Array}\r\n      */\n  getDataValue: function getDataValue() {\n    var list;\n\n    try {\n      list = JSON.parse(this.value);\n\n      return list || [];\n    } catch (e) {\n      return [];\n    }\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    if (this.isCurrentTagFilter()) return this.performTagItems();\n\n    // Call to base\n    return this._super();\n  },\n\n  /**\r\n      * Return the value\r\n      * @param {*} value\r\n      */\n  getValidTagValue: function getValidTagValue(value) {\n    return $.trim(value);\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value\r\n      */\n  addElement: function addElement(value) {\n    var newValue = this.getDataValue();\n\n    newValue.push(value);\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value\r\n      */\n  removeElement: function removeElement(value) {\n    var idToRemove = value.id;\n    var newValue = this.getDataValue().\n    filter(function (item) {\n      return item.id !== idToRemove;\n    });\n\n    this.setValue(newValue);\n  },\n\n  filterOptionIsShowed: function filterOptionIsShowed() {\n    var $control = this.getControl();\n    var $listTag = $(\".bz-query-advanced__filter > .bz-query-advanced__tag\", $control);\n\n    return $listTag && $listTag.length > 0;\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO QUERY FORMS\n\n  /**\r\n   * Toggle the clean options\r\n   */\n  onToggleDataOptions: function onToggleDataOptions() {\n    this.showHideCleanButton();\n\n    this.cleanDataFilter(true);\n  },\n\n  /**\r\n      * onFilterChange, destroy current content and add render new content\r\n      * @param {*} item\r\n      */\n  onFilterChange: function onFilterChange(item) {\n    // Update filter\n    this.cleanDataFilter(false);\n    this.setCurrentFilter(item);\n\n    var $control = this.getControl();\n    var action = this.getCurrentAction();\n\n    // Remove data-action\n    $(\".bz-query-advanced__input\", $control).removeAttr(\"data-action\");\n    $(\".bz-query-advanced__tags\", $control).removeAttr(\"data-action\");\n\n    if (action) {\n      $(\".bz-query-advanced__tags\", $control).attr(\"data-action\", action);\n\n      this.defineLiteControl({ typeFilter: action });\n\n      if (this.isCurrentNullFilter()) {\n        this.setValue(this.getValue());\n      }\n    }\n  },\n\n  /**\r\n      * Remove data of control\r\n      * @param refresh\r\n      */\n  cleanDataFilter: function cleanDataFilter(refresh) {\n    this.controlInitial = null;\n    this.controlEnd = null;\n\n    this.destroyFilterContent();\n    this.setCurrentFilter({ id: \"\" });\n    this.cleanData();\n\n    $(\".bz-query-advanced__tag\", this.getControl()).remove();\n\n    if (refresh) {\n      this.defineLiteControl({ typeFilter: \"\" });\n    }\n  },\n\n  /**\r\n      * Get type of search\r\n      * @returns {string}\r\n      */\n  getSearchType: function getSearchType() {\n    var currentFilter = this.getCurrentFilter();\n    return currentFilter && currentFilter.operator || \"EXACT\";\n  },\n\n  /**\r\n      * Destroy content of filters\r\n      */\n  destroyFilterContent: function destroyFilterContent() {\n    // Remove data-action\n    $(\".bz-query-advanced__filter\", this.getControl()).empty();\n  },\n\n  /**\r\n      * Perform query-value by search type\r\n      * @param queryValue\r\n      * @param searchType\r\n      * @returns {*}\r\n      */\n  performQueryValue: function performQueryValue(queryValue, searchType) {\n    var newQueryValue = queryValue;\n\n    if (searchType === \"starts-with\") {\n      newQueryValue = newQueryValue ? newQueryValue + \"%\" : \"%\";\n    } else if (searchType === \"ends-with\") {\n      newQueryValue = newQueryValue ? \"%\" + newQueryValue : \"%\";\n    } else if (searchType === \"is-null\") {\n      newQueryValue = \"null\";\n    } else if ([\"equals\", \"not-equals\"].includes(searchType)) {\n      newQueryValue = this.performTagItems();\n    }\n\n    return newQueryValue;\n  },\n\n  formatInputValue: function formatInputValue(value) {\n    return typeof value !== \"undefined\" && !bizagi.util.isEmpty(value) ? value : \"null\";\n  },\n\n  /**\r\n      * Add selected elements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n    var self = this;\n    var $control = this.getControl();\n    var values = this.getDataValue() || [];\n    var editable = this.properties.editable;\n\n    var $tagsContainer = $(\".bz-query-advanced__filter-input\", $control);\n    var template = this.renderFactory.getTemplate(\"query.advanced-pill\");\n\n    // Clean data\n    $tagsContainer.remove(\".bz-query-advanced__pill\");\n\n    // Render tag items\n    values.forEach(function (tagItem) {\n\n      var $ChildToAdd = $.tmpl(template, {\n        id: tagItem.id,\n        value: self.formatTagItem(tagItem.value || \"\"),\n        editable: editable });\n\n\n      // Append tag\n      $tagsContainer.before($ChildToAdd);\n    });\n\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LITE CONTROLS\n\n  /**\r\n   * Return render properties\r\n   * @param {*} params\r\n   */\n  getRenderProperties: function getRenderProperties(params) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    params = params || {};\n\n    var propertiesRender = {\n      \"id\": properties.id,\n      \"xpath\": properties.xpath + \"_\" + params.typeControl,\n      \"displayType\": \"value\",\n      \"type\": properties.type,\n      \"orientation\": properties.orientation };\n\n\n    var renderProperties = {\n      data: {\n        properties: $.extend({},\n        propertiesRender,\n        self.getRequiredProperties()) },\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (params.isRange) {\n\n      renderProperties.data.properties.isRange = params.isRange || false;\n      renderProperties.data.properties.isMinimumValue = params.isMinimum || false;\n      renderProperties.data.properties.isMaximumValue = params.isMaximum || false;\n\n      if (params.isMinimum) {\n        renderProperties.data.properties.displayName = bizagi.localization.getResource(\"bz-rp-components-time-from-label\");\n      } else {\n        renderProperties.data.properties.displayName = bizagi.localization.getResource(\"bz-rp-components-time-to-label\");\n      }\n    }\n\n    return renderProperties;\n  },\n\n  /**\r\n      * Define the controls depend of filter type\r\n      * @param params\r\n      */\n  defineLiteControl: function defineLiteControl(params) {\n  },\n\n  /**\r\n      * Set the rendered controls\r\n      * @param controlInitial\r\n      * @param controlEnd\r\n      */\n  setLiteControls: function setLiteControls(controlInitial, controlEnd) {\n  },\n\n  /**\r\n      * Render control\r\n      * @param filterType\r\n      * @param $canvas\r\n      * @param control\r\n      */\n  renderLiteControl: function renderLiteControl(filterType, $canvas, control) {\n  },\n\n  /**\r\n      * Get template by type of control\r\n      * @param filterType\r\n      */\n  getTemplateByType: function getTemplateByType(filterType) {\n  },\n\n  getRequiredProperties: function getRequiredProperties() {\n    return {};\n  },\n\n  // endregion // #endregion\n\n  // region // #region UTILS TO FILTERS\n\n  /**\r\n   * Get Datasource by data type\r\n   * @returns {}\r\n   */\n  getOptions: function getOptions() {\n    var self = this;\n    var operators = self.OPERATORS;\n    var filterType = self.properties.renderType;\n    var result = [];\n\n    for (var item in operators) {\n      var operator = operators[item];\n\n      if ($.inArray(filterType, operator.appliesTo) >= 0 && !operator.skip) {\n        result.push({\n          value: self.getResourceByKey(operator.label, operator.defaultLabel),\n          id: item });\n\n      }\n    }\n\n    return result;\n  },\n\n  showHideCleanButton: function showHideCleanButton(show) {\n    var $control = this.getControl();\n\n    if (!!$control) {\n      var $cleanButton = $(\".bz-query-advanced__clean\", $control);\n      $cleanButton && show ? $cleanButton.removeClass('bz-hidden') : $cleanButton.addClass('bz-hidden');\n    }\n  },\n\n  onToggleHideElement: function onToggleHideElement(elementClass) {\n    var $control = this.getControl();\n\n    if (!!$control) {\n      var $buttonClose = $(elementClass, $control);\n\n      $buttonClose && $buttonClose.toggleClass(\"bz-hidden\");\n    }\n  },\n\n  setCurrentFilter: function setCurrentFilter(filter) {\n    var operators = this.OPERATORS;\n    var idFilter = filter && filter.id ? filter.id : \"\";\n\n    if (idFilter && operators[idFilter]) {\n      this.currentFilter = Object.assign({}, operators[idFilter], { id: idFilter });\n    } else {\n      this.currentFilter = {};\n    }\n\n  },\n\n  getCurrentFilter: function getCurrentFilter() {\n    return this.currentFilter || {};\n  },\n\n  getCurrentAction: function getCurrentAction() {\n    var filter = this.getCurrentFilter();\n    var action = filter && filter.action;\n\n    return action || \"\";\n  },\n\n  isCurrentTagFilter: function isCurrentTagFilter() {\n    return this.isCurrentFilter(\"tags\");\n  },\n\n  isCurrentBetweenFilter: function isCurrentBetweenFilter() {\n    return this.isCurrentFilter(\"between\");\n  },\n\n  isCurrentNullFilter: function isCurrentNullFilter() {\n    return this.isCurrentFilter(\"is-null\");\n  },\n\n  isCurrentWildcardFilter: function isCurrentWildcardFilter() {\n    return this.isCurrentFilter(\"wildcard\");\n  },\n\n  isCurrentContainsFilter: function isCurrentContainsFilter() {\n    return this.isCurrentFilter(\"like\");\n  },\n\n  isCurrentStartsWithFilter: function isCurrentStartsWithFilter() {\n    return this.isCurrentFilter(\"starts-with\");\n  },\n\n  isCurrentEqualsThanFilter: function isCurrentEqualsThanFilter() {\n    return this.isCurrentFilter(\"less-equals-than\") ||\n    this.isCurrentFilter(\"greater-equals-than\");\n  },\n\n  isCurrentEndsWithFilter: function isCurrentEndsWithFilter() {\n    return this.isCurrentFilter(\"ends-with\");\n  },\n\n  isCurrentFilter: function isCurrentFilter(filter) {\n    return this.getCurrentAction() === filter;\n  },\n\n  isCurrentDefaultFilter: function isCurrentDefaultFilter() {\n    var currentAction = this.getCurrentAction();\n    return currentAction === this.defaultFilter ||\n    currentAction === {} ||\n    currentAction === \"\";\n  },\n\n  /**\r\n      * This method returns the localized version of the resource\r\n      * @param resource\r\n      * @param fallback\r\n      * @returns {string}\r\n      */\n  getResourceByKey: function getResourceByKey(resource, fallback) {\n    fallback = fallback || resource;\n\n    return bizagi.localization.getResource(resource, fallback);\n  },\n\n  prepareForSetValue: function prepareForSetValue() {\n    var currentFilter = this.getCurrentFilter();\n    var noFilterSettled = bizagi.util.isEmpty(currentFilter);\n\n    if (noFilterSettled) {\n      this.setFilter(this.defaultFilter);\n    }\n  },\n\n  /**\r\n      * Perform data value by filter type\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  performDataValue: function performDataValue(value) {\n    var self = this;\n    var newValue = value;\n\n    if (self.isCurrentTagFilter()) {\n      var dataList = [];\n      var isString = newValue && $.trim(newValue).length > 0;\n      var isArray = isString && /^\\[.*?\\]$/i.test(newValue);\n\n      if (isString && !isArray) {\n        dataList = [newValue];\n      } else if (isArray) {\n        dataList = self.getDataValue() || [];\n      }\n\n      var list = (dataList || []).map(function (item) {\n        return {\n          id: self.getTagId(),\n          value: item };\n\n      });\n\n      return list || \"\";\n    } else if (newValue && $.trim(newValue).length > 0) {\n      if (self.isCurrentStartsWithFilter()) {\n        newValue = newValue.replace(/%$/i, \"\");\n      } else if (self.isCurrentEndsWithFilter()) {\n        newValue = newValue.replace(/^%/i, \"\");\n      }\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Perform list value by filter type\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  performListValue: function performListValue(value) {\n    var action = this.getCurrentAction();\n    var newValue = value;\n\n    if (action === \"between\") {\n      var dataList = [];\n      var isString = newValue && $.trim(newValue).length > 0;\n      var isArray = isString && /^\\[.*?\\]$/i.test(newValue);\n\n      if (isString && isArray) {\n        dataList = JSON.parse(value);\n\n        newValue = {\n          from: dataList[0] && dataList[0] !== \"null\" ? dataList[0] : \"\",\n          to: dataList[1] && dataList[1] !== \"null\" ? dataList[1] : \"\" };\n\n      } else {\n        //if value is not an array\n        newValue = {\n          from: value,\n          to: value };\n\n      }\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Update current filter type\r\n      * @param filterType\r\n      */\n  setFilter: function setFilter(filterType) {\n    var action = \"\";\n    var noFilterSettled = bizagi.util.isEmpty(this.getCurrentFilter());\n\n    if (!!filterType) {\n      this.setCurrentFilter({ id: filterType });\n      action = this.getCurrentAction();\n    }\n\n    !noFilterSettled && this.showHideCleanButton(true);\n\n    this.defineLiteControl({ typeFilter: action });\n  },\n\n  // endregion // #endregion\n\n  /**\r\n   * Add the render data to the given collection in order to send data to the server\r\n   * @param renderValues\r\n   */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var queryValue = null;\n\n    if (!bizagi.util.isEmpty(xpath)) {\n      var searchType = self.getSearchType();\n      var filter = this.getCurrentFilter();\n      var filterType = filter && filter.id || \"\";\n\n      if (value !== null && typeof value !== \"undefined\") {\n        queryValue = value !== \"\" ? value : null;\n      }\n\n      if (queryValue !== null || properties.included || filterType === \"is-null\") {\n        var newQueryValue = self.performQueryValue(queryValue, filterType);\n\n        var newParameter = {\n          value: newQueryValue,\n          included: self.properties.included,\n          xpath: properties.xpath,\n          searchType: searchType,\n          orderType: \"NONE\",\n          filterType: filterType,\n          advancedQuery: properties.advancedQuery || false,\n          renderId: self.getRenderId() };\n\n\n        if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n          newParameter.displayXpath = properties.displayXpath;\n        }\n\n        renderValues.push(newParameter);\n      }\n    }\n  } });","/*\r\n *   Name: Bizagi Render ComboSelected class\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will define basic stuff for comboSelected renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.comboSelected\", {}, {\n  /* \r\n                                                       * Constructor \r\n                                                       */\n  init: function init(params) {\n    // Call base \n    this._super(params);\n    this.leftValues = this.filterData();\n    this.rightValues = JSON.parse(JSON.stringify(this.properties.value));\n  },\n  /*\r\n     * Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"render-comboSelected\");\n    var html = $.fasttmpl(template, { dataList: this.leftValues });\n    return html;\n  },\n\n  orderArraySelected: function orderArraySelected(dataList) {\n    var arrayOrder = dataList;\n\n    var order = arrayOrder.sort(function (a, b) {\n      var nA = a.value === undefined || a.value === null ? \"\" : a.value.toString().toLowerCase();\n      var nB = b.value === undefined || b.value === null ? \"\" : b.value.toString().toLowerCase();\n      if (nA < nB)\n      return -1;else\n      if (nA > nB)\n      return 1;\n      return 0;\n    });\n\n    return order;\n  },\n\n  /*\r\n     * Filter data before set\r\n     */\n  filterData: function filterData() {\n    var self = this;\n    var dataListArray = [];\n\n    if (self.properties.data) {\n      $.each(self.properties.data, function (i, data) {\n        var el = $.grep(self.properties.value, function (value, e) {\n          return self.properties.xpath == \"Organizations\" ? value.id == data.id : value.id === data.id;\n        });\n\n        if (!el.length) {\n          dataListArray.push(data);\n        }\n      });\n    }\n\n    return dataListArray;\n  },\n\n  /*\r\n     * Template method to implement in each children to customize each control\r\n     */\n  renderControlReadOnly: function renderControlReadOnly() {\n    var template = this.renderFactory.getTemplate(\"render-comboSelectedReadOnly\");\n    var html = $.fasttmpl(template, {});\n    return html;\n  } });","/*\r\n *   Name: BizAgi Render userPassword class\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will define basic stuff for userPassword render\r\n */\n$.Class.extend(\"bizagi.rendering.userPassword\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n    this.properties.value = null;\n    self.properties = this.properties;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"render-userPassword\");\n    // Render template\n    var html = $.fasttmpl(template, { valuePassword: self.properties.value });\n    return html;\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n\n    return bValid;\n  } });","/*\r\n *   Name: BizAgi Render Stateholder\r\n *   Author: Fabian Moreno\r\n */\n\n$.Class.extend(\"bizagi.rendering.stakeholder\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    if (typeof this.properties.value === \"undefined\") {\n      this.properties.value = [];\n    }\n\n    if (typeof this.properties.data === \"undefined\") {\n      this.properties.data = [];\n    }\n    self.properties = this.properties;\n  },\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"stakeholder\");\n\n    var params = {\n      currentUser: bizagi.currentUser.userName,\n      userNames: typeof self.properties.value == \"string\" ? JSON.parse(self.properties.value).value : self.properties.value,\n      entities: self.properties.data };\n\n\n    // Render template\n    var html = $.fasttmpl(template, params);\n    return html;\n  },\n\n  getData: function getData(valueXpath, currentPage, filter, sort, order) {\n    var self = this;\n\n    if (typeof currentPage === \"undefined\" || currentPage == null)\n    currentPage = \"1\";\n\n    var params = {\n      pxpath: valueXpath,\n      prows: \"10\",\n      ppage: currentPage.toString(),\n      xpath: valueXpath,\n      idRender: self.properties.id,\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      property: \"dataxpath\",\n      contexttype: \"entity\",\n      pfilter: filter,\n      psort: sort };\n\n\n    if (order) params.porder = order;\n\n    return self.dataService.multiaction().getPropertyData(params);\n  },\n\n  associatedUser: function associatedUser(idEntity, guidEntity, idUser) {\n    var self = this;\n\n    return self.dataService.associateStakeholder({\n\n      idPageCache: self.properties.idPageCache,\n      contexttype: \"entity\",\n      surrogateKey: parseInt(idEntity),\n      associatedUser: JSON.encode({ dataType: \"Int\", value: idUser == \"null\" ? idUser : parseInt(idUser) }),\n      guidentity: guidEntity });\n\n  },\n\n  refreshStakeholderList: function refreshStakeholderList() {\n    var self = this;\n\n    return self.dataService.refreshAssociateStakeholder({\n\n      idRender: self.properties.id,\n      contexttype: \"entity\",\n      property: \"value\",\n      idPageCache: self.properties.idPageCache });\n\n  } });","/**\r\n * Base definition of Action Launcher and Entity template controls\r\n *\r\n * @author: Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.actionLauncher\", {}, {\n\n  /*\r\n                                                         * Initialize the control with data provided\r\n                                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    if (mode == \"execution\") {\n      self.engine = new bizagi.templateEngine({\n        renderFactory: self.renderFactory,\n        cache: true,\n        autoGenerateData: false,\n        templateGuid: properties.selecttemplate });\n\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"ptags\": self.properties.tagslist || [],\n      \"pmaxitems\": self.properties.maxItems,\n      \"pactionXpath\": self.properties.xpathActions };\n\n\n    self.processPropertyValueDataTmplArgs = {\n      \"pactionXpath\": self.properties.xpathActions,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"ptemplateGuid\": properties.selecttemplate,\n      \"property\": \"dataTemplate\",\n      \"xpathActions\": self.properties.xpathActions };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    var defaultAllowActions = data.properties.type === \"entityTemplate\" ? false : true;\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ?\n    defaultAllowActions : data.properties.allowactions;\n    self.properties.isHorizontal = typeof data.properties.isHorizontal == \"undefined\" ?\n    true : data.properties.isHorizontal;\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ?\n    false : data.properties.allowSearch;\n    self.properties.selecttemplate = typeof data.properties.selecttemplate == \"undefined\" ?\n    \"\" : data.properties.selecttemplate;\n    self.properties.templatetype = typeof properties.templatetype != \"undefined\" ?\n    properties.templatetype : 'none';\n\n    self.properties.sessionId = form.params.data.sessionId;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteAction = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeAction\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidAction\": action.guidAction,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteAction).done(function (data) {\n      self.notifyExecution(data, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      * @param actionName\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher-design\");\n      var params = {\n        type: properties.type,\n        isHorizontal: properties.isHorizontal,\n        allowSearch: properties.allowSearch,\n        templateDefined: properties.templatetype != 'none',\n        allowactions: properties.allowactions };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    var value = self.getValue();\n    var bValid = false;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) {\n      return true;\n    }\n\n    // Check required\n    if (properties.required) {\n      if (self.value) {\n        if (self.value.length > 0)\n        return true;\n        message = self.getResource(\"render-required-register-action\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidProcess || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayName,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        // If it has additional xpath this action is a form of collection\n        if (action.xpathContext) {\n          $.when(self.processActionFormCollection(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        } else {\n\n          if (action.actionType === \"Form\") {\n            action.xpathContext = undefined;\n            action.contextType = \"entitytemplate\";\n            action.guidEntity = action.guidEntity || self.properties.guidEntity;\n          }\n\n          $.when(self.processActionForm(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        }\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity };\n\n        break;\n      case \"Rule\":\n        action.params = {\n          xpathActions: action.xpathActions || \"\",\n          recordXpath: recordXpath };\n\n        break;}\n\n\n    var newValueActionsList = bizagi.clone(actionsList);\n    newValueActionsList.push(action);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var newValueActionsList = bizagi.clone(self.getValue());\n    newValueActionsList.splice(index, 1);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidAction;\n\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n     * Normalize action launcher control properties\r\n     * @param actionsLaucher\r\n     * @returns {*}\r\n     */\n  getPropertiesActionLaucher: function getPropertiesActionLaucher(actionsLaucher) {\n    var self = this;\n    var form = self.getFormContainer();\n    /**\r\n                                         * The properties of actionLaucher have to 7 properties mandatory\r\n                                         * 0: guidProcess\r\n                                         * 1: displayName\r\n                                         * 2: title\r\n                                         * 3: actionType\r\n                                         * 4: guidaction\r\n                                         * 5: xpathContext\r\n                                         * 6: readOnlyForm: default: false\r\n                                         */\n    for (var i = 0, length = actionsLaucher.length, j = length; i < j; i += 1) {\n      //some ocassions server return 6 or 7 items\n      //return 6 properties when launch form action from action launcher control.\n      //in this case dont return xpathContext.\n      // So, add item position 5, simulate xpathContext empty.\n      if (actionsLaucher[i].length === 6) {\n        actionsLaucher[i].splice(5, 0, \"\");\n\n        if (actionsLaucher[i][3] == \"Process\" && form.properties.xpathContext) {\n          actionsLaucher[i][5] = form.properties.xpathContext;\n        }\n      }\n    }\n\n    return actionsLaucher;\n  } });","/**\r\n * Base definition of a range control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.range\", {}, {\n  /*\r\n                                                * Constructor\r\n                                                */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n  },\n\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    properties = self.properties;\n    var template;\n    var html = \"\";\n    // Render template\n    template = self.renderFactory.getTemplate(\"render-range\");\n    html = $.fasttmpl(template, {});\n    return html;\n  },\n  /**\r\n      * Sets the range controls in DOM\r\n      * @param minControl: min range control\r\n      * @param maxControl: max range control\r\n      */\n  setRanageControls: function setRanageControls(minControl, maxControl) {\n    var self = this;\n    self.minControl = minControl || null;\n    self.maxControl = maxControl || null;\n    var control = self.getControl();\n\n    var $maxCanvas = $(\".bz-range-maximum\", control);\n    var $minCanvas = $(\".bz-range-minimum\", control);\n\n    //var $maxCanvas = $('<div>hola</div>');\n    //var $minCanvas = $('<div>hola</div>');\n\n    self.renderRangeControl($minCanvas, minControl);\n    self.renderRangeControl($maxCanvas, maxControl);\n  },\n\n  /*\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    var self = this;\n    var minValue = self.minControl.getValue();\n    var maxValue = self.maxControl.getValue();\n\n    var value = {\n      min: minValue,\n      max: maxValue };\n\n    return value;\n  },\n\n  renderRangeControl: function renderRangeControl($canvas, control) {\n    $.when(control.render(\"render\")).done(function (html) {\n      $canvas.empty().append(html);\n      control.postRenderElement($canvas);\n    });\n  } });","/**\r\n * Base definition of a range date control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeDate\", {}, {\n\n  /**\r\n                                                    * Defines de min date an de max date to the range control\r\n                                                    */\n  defineRangeControl: function defineRangeControl(params) {\n    var self = this;\n\n    var dateMin = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var dateMax = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n\n    var minControl = new dateMin(self.getRenderProperties(\"min\"));\n    var maxControl = new dateMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range money control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeMoney\", {}, {\n\n  /**\r\n                                                     * Defines de min money an de max money to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var moneyMin = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var moneyMax = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new moneyMin(self.getRenderProperties(\"min\"));\n    var maxControl = new moneyMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range number control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeNumber\", {}, {\n\n  /**\r\n                                                     * Defines de min number an de max number to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var numberMin = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var numberMax = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new numberMin(self.getRenderProperties(\"min\"));\n    var maxControl = new numberMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of entity template\r\n *\r\n * @author: Andres Fernando Muñoz\r\n * based on action launcher control\r\n */\n$.Class.extend(\"bizagi.rendering.entityTemplate\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ? true : data.properties.allowactions;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate-design\");\n      html = $.fasttmpl(template, {});\n    } else\n    if (self.properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  } });","/**\r\n * Base definition of Polymorphic launcher\r\n *\r\n * @author: Edward J Morales\r\n */\n\n$.Class.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\n  /*\r\n                                                              * Constructor\r\n                                                              */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ? false : data.properties.allowSearch;\n    self.properties.additionalXpath = self.properties.additionalXpath || [];\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"ptags\": self.getTagList(self.properties.tagslist),\n      \"additionalXpaths\": self.properties.additionalXpath };\n\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteConstructor = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeConstructor\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidConstructor\": action.guidConstructor,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteConstructor).done(function (data) {\n      self.notifyExecution(data.response, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-design\");\n      var params = {\n        type: properties.type,\n        allowSearch: properties.allowSearch };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher\");\n      html = $.fasttmpl(template);\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidObject || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                         /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayNamee,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        $.when(self.processActionForm(action)).done(function (idStartScope) {\n          action.idStartScope = idStartScope;\n          def.resolve(action);\n        });\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        if (typeof action.idStartScope !== \"undefined\") {\n          action.params.idStartScope = action.idStartScope;\n        }\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity,\n          guidEntity: action.guidEntity };\n\n        break;\n      case \"Rule\":\n        //TODO\n        break;}\n\n\n    actionsList.push(action);\n    self.setValue(actionsList);\n    self.setDisplayValue(actionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var value = self.getValue();\n    value.splice(index, 1);\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidObject || value.guidAction;\n        action.displayName = value.displayName;\n        action.guidConstructor = value.guidConstructor;\n        action.actionType = value.actionType;\n        action.xpathContext = value.xpathContext;\n        action.guidEntity = value.guidEntity;\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n      * Get list of tags\r\n      * @param taglist\r\n      * @return {Array}\r\n      */\n  getTagList: function getTagList(taglist) {\n    taglist = taglist || [];\n    var result = [];\n\n    for (var i = taglist.length; i > 0; i--) {\n      result.push(taglist[i - 1].value);\n    }\n    return result.length > 0 ? result : \"\";\n  } });","/**\r\n *   Name: Bizagi Render Column ReadOnly Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly-columns\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.columns.readonly\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    // Define the column as readonly\n    properties.editable = required = false;\n  },\n\n  /**\r\n      * Return true if the column is read-only, so we can make a quick render\r\n      */\n  isReadonly: function isReadonly() {\n    return true;\n  },\n\n  /**\r\n      * Method to check if a value is valid or not in this render\r\n      */\n  isValueValid: function isValueValid() {\n    // It is always valid because the column is readonly\n    return true;\n  } });","/*\r\n*   Name: BizAgi Render Document Generator\r\n*   Author: Mauricio Gonzalez\r\n*   Comments:\r\n*   -   This script will define basic stuff for document generator render\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.document\", {}, {});","/*\r\n*   Name: BizAgi Render Letter\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for letter render\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.letter\", {}, {});","/*\r\n*   Name: BizAgi Render Combo Column Decorator Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for Combo Columns\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.combo\", {}, {\n\n  /*\r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n    properties.recalculate = bizagi.util.parseBoolean(properties.recalculate) || false;\n\n    if (bizagi.util.isOfflineForm({ context: this })) {\n      properties.recalculate = false;\n    }\n  },\n\n\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n    var properties = this.properties;\n\n    this._super(decorated);\n\n    if (!properties.recalculate) {\n      decorated.originalGetData = decorated.getData;\n      decorated.getData = this.getDataForAllCells;\n      decorated.findDataById = this.findDataById;\n    }\n  },\n\n  findDataById: function findDataById(id) {\n    var self = this;\n    var result = {};\n    if (this.column && this.column.comboData) {\n      $.each(this.column.comboData, function (key, value) {\n        if (value.id == id) {\n          result = value;\n        }\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Single data fetch for all the cells\r\n     */\n  getDataForAllCells: function getDataForAllCells(params) {\n    var column = this.column;\n    if (column.comboData) return column.comboData;\n    if (column.fetchingData) return column.dataPromise;\n\n    // Start fetching\n    column.fetchingData = true;\n    column.dataPromise = $.when(this.originalGetData(params)).\n    pipe(function (result) {\n      column.comboData = result;\n      column.fetchingData = false;\n      return result;\n    });\n\n    return column.dataPromise;\n  },\n\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    if (value && bizagi.util.isString(value)) {\n      self._super(surrogateKey, value);\n    } else if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {return i != 0;}) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (self.properties.type == \"columnRadio\") {\n      self._super(surrogateKey, null);\n      decorated.selectedValue = value;\n    } else if (value && typeof value == \"number\") {\n      self._super(surrogateKey, value);\n    } else {\n      // Set null values when the entry array is null\n      self._super(surrogateKey, null);\n      decorated.selectedValue = \"\";\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultValue[0];\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value.id;\n\n    return value;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    var label = decorated.getSelectedValue();\n\n    // Build value for grid data\n    var valueForGrid = [];\n    if (value && (value.id > 0 || bizagi.util.isString(value.id))) {\n      valueForGrid.push([]);\n      valueForGrid[0].push(value.id);\n      valueForGrid[0].push(label);\n    } else {\n      valueForGrid.push([]);\n    }\n\n    return valueForGrid;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    if (value) return value.id;\n    return value;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  renderReadOnly: function renderReadOnly(key, value) {\n    var self = this;\n    var decorated = self.getDecorated(key);\n    var properties = self.properties;\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + key + \"]\" : self.grid.properties.xpath + \"[id=\" + key + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(key, value);\n\n    return result;\n  } });","/**\r\n *   Name: BizAgi Render Combo Column Decorator Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define basic stuff for Combo Columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.search\", {}, {\n  /*\r\n                                                        *   Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    if (properties.advancedSearch && this.getMode() === \"execution\") {\n      properties.submitOnChange = bizagi.util.parseBoolean(properties.submitOnChange) || false;\n      properties.submitOnChange = (properties.submitVersion || 1) > 1 ? properties.submitOnChange : true;\n    }\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param decorated\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    // Change the xpath context\n    var xpathContext;\n\n    if (this.properties.xpathContext.length > 0) {\n      xpathContext = this.properties.xpathContext + \".\" + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    } else {\n      xpathContext = this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    }\n\n    decorated.properties.xpathContext = xpathContext;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    return value;\n  },\n\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    var compositeValue = self.getCompositeValue(surrogateKey);\n    if (!!compositeValue && typeof compositeValue.id !== \"undefined\" && compositeValue.id == value) {\n      value = compositeValue;\n    }\n\n    if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\n          return i != 0;\n        }) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (value && value.id && value.label) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.label;\n    } else {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = \"\";\n    }\n  } });","/**\r\n*   Name: Bizagi Render Date Column Decorator Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for Date Columns\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.columns.date\", {}, {\n\n  /*\r\n                                                      *   Sets the internal value\r\n                                                      */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) return;\n\n    self._super(surrogateKey, value);\n    if ((value === null || value === undefined) && self.properties.defaultvalue !== undefined) {\n      value = self.setDefaultValue(surrogateKey, decorated);\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey === \"summary\") return self._super(surrogateKey, value);\n\n    if (value == null) {\n      decorated.setValue(value, false);\n      decorated.properties.displayValue = \"\";\n    }\n\n    var date = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime);\n\n    if (date === 0) {\n      // force another attempt in order to check invariant format for the value with time or without time (reverse option)\n      date = bizagi.util.dateFormatter.getDateFromInvariant(value, !decorated.properties.showTime);\n    }\n    // Format date to current format\n    if (date !== 0) {\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      var formattedDate = bizagi.util.dateFormatter.formatDate(date, decorated.properties.fullFormat, datePickerRegional);\n\n      // Set formatted value in display value property\n      decorated.properties.displayValue = formattedDate;\n\n      // Send original value to decorated control, because it must be with invariant format\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultvalue;\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n\n    value = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime || false);\n\n    value = bizagi.util.dateFormatter.formatInvariant(value, true);\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  } });","/**\r\n *   Name: Bizgi Render Hidden Column Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hidden-columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.hidden\", {}, {\n\n  /**\r\n                                                         * Method to determine if the render value can be sent to the server or not\r\n                                                         * @returns {}\r\n                                                         */\n  canBeSent: function canBeSent() {\n    return true;\n  } });","/*\r\n *   Name: Bizagi Base Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define an abstract render factory in order to do common stuff for all device factories\r\n */\n\n$.Class.extend(\"bizagi.rendering.base.factory\", {}, {\n  /* \r\n                                                      *   Constructor\r\n                                                      */\n  init: function init(dataService) {\n    this.templates = {};\n    this.dataService = dataService;\n  },\n\n  /**\r\n     * Load client resources in order to override a default behavior\r\n     */\n  loadOverrides: function loadOverrides() {\n  },\n  /*\r\n     *   This function will load asynchronous stuff needed in the module\r\n     */\n  initAsyncStuff: function initAsyncStuff() {\n    return $.when.apply($, [this.loadOverrides(), this.loadTemplates()]);\n  },\n  /*\r\n     *   Load all the templates used for rendering\r\n     */\n  loadTemplates: function loadTemplates() {\n  },\n  /*\r\n     *   Load one template and save it internally\r\n     */\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return bizagi.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedTemplate) {\n      self.templates[template] = resolvedTemplate;\n    });\n  },\n  /*\r\n     * Returns a common  used template for the framework\r\n     */\n  getCommonTemplate: function getCommonTemplate(template) {\n    return this.templates[template];\n  },\n  /*\r\n     *   Returns the appropiate container based on the container type\r\n     */\n  getContainer: function getContainer(params) {\n    // TODO: REMOVE IMPLEMENTATION\n\n    var type = params.type;\n    var data = params.data;\n    var containerParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"form\") {\n      return new bizagi.rendering.form(containerParams);\n    }\n\n    if (type == \"mobileform\") {\n      return new bizagi.rendering.mobileform(containerParams);\n    }\n\n    if (type == \"template\") {\n      return new bizagi.rendering.formTemplate(containerParams);\n    }\n\n    if (type == \"queryForm\") {\n      return new bizagi.rendering.queryForm(containerParams);\n    }\n\n    if (type == \"layout\") {\n      return new bizagi.rendering.layout(containerParams);\n    }\n\n    if (type == \"usersForm\") {\n      return new bizagi.rendering.usersForm(containerParams);\n    }\n\n    if (type == \"panel\") {\n      return new bizagi.rendering.panel(containerParams);\n    }\n\n    if (type == \"section\") {\n      return new bizagi.rendering.section(containerParams);\n    }\n\n    if (type == \"contentPanel\" || type == \"contentpanel\") {\n      return new bizagi.rendering.contentPanel(containerParams);\n    }\n\n    if (type.toLowerCase() == \"nestedform\") {\n      return new bizagi.rendering.nestedForm(containerParams);\n    }\n\n    if (type == \"tab\") {\n      return new bizagi.rendering.tab(containerParams);\n    }\n\n    if (type == \"tabItem\" || type == \"tabitem\") {\n      return new bizagi.rendering.tabItem(containerParams);\n    }\n\n    if (type == \"horizontal\") {\n      return new bizagi.rendering.horizontal(containerParams);\n    }\n\n    if (type == \"accordion\") {\n      return new bizagi.rendering.accordion(containerParams);\n    }\n\n    if (type == \"accordionItem\") {\n      return new bizagi.rendering.accordionItem(containerParams);\n    }\n\n    if (type == \"group\") {\n      return new bizagi.rendering.group(containerParams);\n    }\n\n    if (type == \"mobilegroup\") {\n      return new bizagi.rendering.mobilegroup(containerParams);\n    }\n\n    if (type == \"searchForm\") {\n      containerParams.context = \"search\";\n      containerParams.contexttype = \"metadata\";\n      return new bizagi.rendering.searchForm(containerParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate render based on the render type\r\n     */\n  getRender: function getRender(params) {\n\n    // TODO: REMOVE IMPLEMENTATION\n    var type = params.type;\n    var data = params.data;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (!type)\n    type = \"label\";\n\n    if (type == \"text\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(renderParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(renderParams);\n    }\n    if (type == \"mobiletext\") {\n      return new bizagi.rendering.mobiletext(renderParams);\n    }\n\n    if (type == \"association\") {\n      return new bizagi.rendering.association(renderParams);\n    }\n\n    if (type == \"label\") {\n      return new bizagi.rendering.label(renderParams);\n    }\n\n    if (type == \"hidden\") {\n      return new bizagi.rendering.hidden(renderParams);\n    }\n\n    if (type == \"number\") {\n      return new bizagi.rendering.number(renderParams);\n    }\n\n    if (type == \"money\") {\n      return new bizagi.rendering.money(renderParams);\n    }\n\n    if (type == \"date\") {\n      return new bizagi.rendering.date(renderParams);\n    }\n\n    if (type == \"boolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(renderParams);\n    }\n\n    if (type == \"combo\") {\n      return new bizagi.rendering.combo(renderParams);\n    }\n\n    if (/^cascadingcombo$/i.test(type)) {\n      return new bizagi.rendering.cascadingCombo(renderParams);\n    }\n\n    if (type == \"list\") {\n      return new bizagi.rendering.list(renderParams);\n    }\n\n    if (type == \"multiSelect\") {\n      return new bizagi.rendering.multiSelect(renderParams);\n    }\n\n    if (type == \"radio\") {\n      return new bizagi.rendering.radio(renderParams);\n    }\n\n    if (type == \"image\") {\n      // Override for test purposes\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"uploadecm\") {\n      // Check if its ECM file            \n      return new bizagi.rendering.ecm(renderParams);\n    }\n\n    if (type == \"upload\") {\n      return new bizagi.rendering.upload(renderParams);\n    }\n    if (type == \"grid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"groupedgrid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"search\") {\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"suggest\") {\n      renderParams.data.properties.enableQuerySuggestBehavior = true;\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"searchList\") {\n      return new bizagi.rendering.searchList(renderParams);\n    }\n\n    if (type == \"letter\") {\n      return new bizagi.rendering.letter(renderParams);\n    }\n\n    if (type == \"button\") {\n      return new bizagi.rendering.button(renderParams);\n    }\n\n    if (type == \"formLink\") {\n      return new bizagi.rendering.formLink(renderParams);\n    }\n\n    if (type == \"link\") {\n      return new bizagi.rendering.link(renderParams);\n    }\n\n    if (type == \"layoutImage\") {\n      return new bizagi.rendering.layoutImage(renderParams);\n    }\n\n    if (type == \"layoutLink\") {\n      return new bizagi.rendering.layoutLink(renderParams);\n    }\n\n    if (type == \"layoutLabel\") {\n      return new bizagi.rendering.layoutLabel(renderParams);\n    }\n\n    if (type == \"layoutText\") {\n      return new bizagi.rendering.layoutText(renderParams);\n    }\n\n    if (type == \"layoutDateTime\") {\n      return new bizagi.rendering.layoutDateTime(renderParams);\n    }\n\n    if (type == \"layoutNumber\") {\n      return new bizagi.rendering.layoutNumber(renderParams);\n    }\n\n    if (type == \"layoutMoney\") {\n      return new bizagi.rendering.layoutMoney(renderParams);\n    }\n\n    if (type == \"layoutPlaceholder\") {\n      return new bizagi.rendering.layoutPlaceholder(renderParams);\n    }\n\n    if (type == \"actionLauncher\") {\n      return new bizagi.rendering.actionLauncher(renderParams);\n    }\n\n    if (type == \"layoutBoolean\") {\n      return new bizagi.rendering.layoutBoolean(renderParams);\n    }\n\n    if (type == \"layoutUpload\") {\n      return new bizagi.rendering.layoutUpload(renderParams);\n    }\n\n    if (type == \"entityTemplate\") {\n      return new bizagi.rendering.entityTemplate(renderParams);\n    }\n\n    if (type == \"polymorphicLauncher\") {\n      return new bizagi.rendering.polymorphicLauncher(renderParams);\n    }\n\n    if (type == \"userfield\") {\n      return new bizagi.rendering.userfieldWrapper(renderParams);\n    }\n\n    // Check search renders (starts with \"search\")\n    if (type.indexOf(\"search\") == 0) {\n      return this.getSearchRender(params);\n    }\n\n    if (type.indexOf(\"query\") == 0) {\n      return this.getQueryRender(params);\n    }\n\n    if (type == \"document\") {\n      return new bizagi.rendering.document(renderParams);\n    }\n\n    if (type == \"image\") {\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"fileprint\") {\n      return new bizagi.rendering.fileprint(renderParams);\n    }\n    if (type == \"geolocation\") {\n      return new bizagi.rendering.geolocation(renderParams);\n    }\n\n    if (type == \"collectionnavigator\") {\n      return new bizagi.rendering.collectionnavigator(renderParams);\n    }\n\n    if (type == \"getUser\") {\n      return new bizagi.rendering.getUser(renderParams);\n    }\n\n    if (type == \"rangeDate\") {\n      return new bizagi.rendering.rangeDate(renderParams);\n    }\n\n    if (type == \"rangeMoney\") {\n      return new bizagi.rendering.rangeMoney(renderParams);\n    }\n\n    if (type == \"rangeNumber\") {\n      return new bizagi.rendering.rangeNumber(renderParams);\n    }\n\n    if (type == \"activityCheckList\") {\n      return new bizagi.rendering.activityCheckList(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate column based on the render type\r\n     */\n  getColumn: function getColumn(params) {\n    var type = params.type;\n    var data = params.data;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type == \"columnText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        columnParams.decorated = bizagi.rendering.extendedText;\n      } else {\n        // Creates one normal text render\n        columnParams.decorated = bizagi.rendering.text;\n      }\n      return new bizagi.rendering.columns.text(columnParams);\n    }\n\n    if (type == \"columnSearchList\") {\n      columnParams.decorated = bizagi.rendering.searchList;\n      return new bizagi.rendering.columns.searchList(columnParams);\n    }\n\n    if (type == \"columnNumber\") {\n      columnParams.decorated = bizagi.rendering.number;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnMoney\") {\n      columnParams.decorated = bizagi.rendering.money;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnDate\") {\n      columnParams.decorated = bizagi.rendering.date;\n      return new bizagi.rendering.columns.date(columnParams);\n    }\n\n    if (type == \"columnBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        columnParams.decorated = bizagi.rendering.check;\n        if (params.data.properties.isExclusive) {\n          return new bizagi.rendering.columns.exclusiveCheck(columnParams);\n        }\n      } else {\n        // Creates one yes-no render\n        columnParams.decorated = bizagi.rendering.yesno;\n      }\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnCombo\") {\n      columnParams.decorated = bizagi.rendering.combo;\n      return new bizagi.rendering.columns.combo(columnParams);\n    }\n\n    if (type == \"columnRadio\") {\n      columnParams.decorated = bizagi.rendering.radio;\n      return new bizagi.rendering.columns.radio(columnParams);\n    }\n\n    if (type == \"columnList\") {\n      columnParams.decorated = bizagi.rendering.list;\n      return new bizagi.rendering.columns.list(columnParams);\n    }\n\n    if (type == \"columnHidden\") {\n      columnParams.decorated = bizagi.rendering.hidden;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnUpload\") {\n      columnParams.decorated = bizagi.rendering.upload;\n      return new bizagi.rendering.columns.upload(columnParams);\n    }\n\n    if (type == \"columnImage\") {\n      columnParams.decorated = bizagi.rendering.image;\n      return new bizagi.rendering.columns.image(columnParams);\n    }\n\n    if (type == \"columnUploadEcm\") {\n      columnParams.decorated = bizagi.rendering.ecm;\n      return new bizagi.rendering.columns.uploadecm(columnParams);\n    }\n    if (type == \"columnLink\") {\n      columnParams.decorated = bizagi.rendering.link;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnFormLink\") {\n      columnParams.decorated = bizagi.rendering.formLink;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnUserfield\") {\n      columnParams.decorated = bizagi.rendering.userfieldWrapper;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnSearch\") {\n      columnParams.decorated = bizagi.rendering.search;\n      return new bizagi.rendering.columns.search(columnParams);\n    }\n\n    if (type == \"columnLabel\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnReadonly\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.readonly(columnParams);\n    }\n\n    if (type == \"columnDocument\") {\n      columnParams.decorated = bizagi.rendering.document;\n      return new bizagi.rendering.columns.document(columnParams);\n    }\n\n    if (type == \"columnLetter\") {\n      columnParams.decorated = bizagi.rendering.letter;\n      return new bizagi.rendering.columns.letter(columnParams);\n    }\n\n    if (type == \"columnButton\") {\n      columnParams.decorated = bizagi.rendering.button;\n      return new bizagi.rendering.columns.button(columnParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getSearchRender: function getSearchRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"searchText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(searchParams);\n    }\n\n    if (type == \"searchBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(searchParams);\n    }\n\n    if (type == \"searchNumber\") {\n      if (data.properties.dataType == 29) {\n        //Creates a Scientific Notation render\n        return new bizagi.rendering.numberScientificNotation(searchParams);\n      }\n      return new bizagi.rendering.number(searchParams);\n    }\n\n    if (type == \"searchMoney\") {\n      return new bizagi.rendering.money(searchParams);\n    }\n\n    if (type == \"searchDate\") {\n      return new bizagi.rendering.date(searchParams);\n    }\n\n    if (type == \"searchCombo\") {\n      return new bizagi.rendering.combo(searchParams);\n    }\n\n    if (type == \"searchSuggest\") {\n      return new bizagi.rendering.search(searchParams);\n    }\n\n    if (type == \"searchLabel\") {\n      return new bizagi.rendering.label(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getQueryRender: function getQueryRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"queryText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.queryExtendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.queryText(searchParams);\n    }\n\n    if (type == \"queryBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.queryCheck(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.queryYesNo(searchParams);\n    }\n\n    if (type == \"queryNumber\") {\n\n      return new bizagi.rendering.queryNumber(searchParams);\n    }\n\n    if (type == \"queryMoney\") {\n      return new bizagi.rendering.queryMoney(searchParams);\n    }\n\n    if (type == \"queryDate\") {\n      return new bizagi.rendering.queryDate(searchParams);\n    }\n\n    if (type == \"queryCombo\") {\n      return new bizagi.rendering.queryCombo(searchParams);\n    }\n\n    if (type == \"queryCascadingCombo\") {\n      return new bizagi.rendering.queryCascadingCombo(searchParams);\n    }\n\n    if (type == \"querySuggest\") {\n      return new bizagi.rendering.querySuggest(searchParams);\n    }\n\n    if (type == \"queryLabel\") {\n      return new bizagi.rendering.queryLabel(searchParams);\n    }\n\n    if (type == \"queryList\") {\n      return new bizagi.rendering.queryList(searchParams);\n    }\n\n    if (type == \"queryMultiSelect\") {\n      return new bizagi.rendering.queryMultiSelect(searchParams);\n    }\n\n    if (type == \"querySearch\") {\n      return new bizagi.rendering.querySearch(searchParams);\n    }\n\n    if (type == \"queryRadio\") {\n      return new bizagi.rendering.queryRadio(searchParams);\n    }\n\n    if (type == \"queryState\") {\n      return new bizagi.rendering.queryState(searchParams);\n    }\n\n    if (type == \"queryCaseState\") {\n      return new bizagi.rendering.queryCaseState(searchParams);\n    }\n\n    if (type == \"queryProcess\") {\n      return new bizagi.rendering.queryProcess(searchParams);\n    }\n\n    if (type == \"querySearchUser\") {\n      return new bizagi.rendering.querySearchUser(searchParams);\n    }\n\n    if (type == \"queryHidden\") {\n      return new bizagi.rendering.hidden(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Method to fetch templates from a private dictionary\r\n     */\n  getTemplate: function getTemplate(template) {\n    var self = this;\n    return self.templates[template];\n  } });","/*\r\n*   Name: Bizagi Device Render Factory\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will detect the current device and then will load the appropriate factory on demand\r\n*/\n\n$.Class.extend(\"bizagi.rendering.device.factory\", {}, {\n\n  /**\r\n                                                         * Constructor, detects the device\r\n                                                         * @param params\r\n                                                         */\n  init: function init(params) {\n    this.execution_device = bizagi.util.detectDevice();\n    this.cachedFactory = {};\n  },\n\n  /**\r\n      * Returns the appropriate render factory based on the device detection\r\n      * Because it loads the scripts on demand it must return a promise\r\n      * @param dataService\r\n      * @param device\r\n      * @returns {*}\r\n      */\n  getRenderFactory: function getRenderFactory(dataService, device) {\n    var self = this;\n    device = device || \"desktop\";\n    var defer = new $.Deferred();\n\n    if (typeof self.cachedFactory[device] !== \"undefined\") {\n      // Reset print version value\n      self.cachedFactory[device].printVersion = false;\n      // Resolve with cached factory                \n      defer.resolve(self.cachedFactory[device]);\n    } else {\n      // If factory is not cached then build it\n      if (device === \"print\") {\n\n        // Load print version references\n        self.cachedFactory[device] = new bizagi.rendering.print.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (device === \"desktop\") {\n\n        // Load desktop references\n        self.cachedFactory[device] = new bizagi.rendering.desktop.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (bizagi.util.isTabletDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.tablet.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else if (bizagi.util.isSmartphoneDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.smartphone.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else {\n        // if no device suuported\n        bizagi.showMessageBox(\"Not supported device: \" + device);\n        defer.reject(\"Not supported device: \" + device);\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns the current data service being used\r\n      * @returns {*}\r\n      */\n  getDataService: function getDataService() {\n    return this.dataService;\n  } });"]}