{"version":3,"sources":["jquery/common/bizagi.grid/js/bizagi.grid.js","jquery/common/bizagi/js/bizagi.util.js","jquery/renderingflat/js/common/bizagi.rendering.util.js","jquery/common/jquery.formatCurrency/jquery.formatCurrency.js","jquery/rendering/js/plugins/common/jquery.mobiscroll.js","jquery/renderingflat/js/plugins/bizagi.mobile.grid/js/bizagi.mobile.grid.js","jquery/rendering/js/services/bizagi.render.services.service.js","jquery/rendering/js/services/bizagi.render.services.multiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.controller.js","jquery/rendering/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/render/bizagi.rendering.render.js","jquery/rendering/js/base/container/bizagi.rendering.form.js","jquery/rendering/js/base/render/bizagi.rendering.combo.js","jquery/rendering/js/base/render/bizagi.rendering.date.js","jquery/rendering/js/base/render/bizagi.rendering.extendedText.js","jquery/rendering/js/base/render/bizagi.rendering.grid.js","jquery/rendering/js/base/render/bizagi.rendering.label.js","jquery/rendering/js/base/render/bizagi.rendering.search.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.render.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.column.js","jquery/renderingflat/js/smartphone/container/helpers/bizagi.rendering.smartphone.helpers.searchForm.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.text.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.date.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.combo.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.ecm.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.searchList.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.search.js","jquery/rendering/js/bizagi.rendering.facade.js","jquery/rendering/js/plugins/common/jquery.mask.js","jquery/rendering/js/plugins/common/jquery.numeric.js","jquery/renderingflat/js/plugins/bizagi.mobile.pagination.grid/js/bizagi.mobile.pagination.grid.js","jquery/common/base/js/lib/mobile/jquery.timeago.js","jquery/common/base/js/lib/mobile/jquery.tabs.js","jquery/common/base/js/lib/mobile/jquery.helptext.js","jquery/rendering/js/services/bizagi.render.services.endPoints.js","jquery/rendering/js/services/bizagi.render.services.context.js","jquery/rendering/js/services/bizagi.render.services.metadataMultiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.validation.js","jquery/renderingflat/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/bizagi.rendering.element.js","jquery/rendering/js/base/container/bizagi.rendering.container.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.container.js","jquery/rendering/js/base/render/bizagi.rendering.render.base.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.render.js","jquery/rendering/js/base/container/bizagi.rendering.formTemplate.js","jquery/rendering/js/base/container/bizagi.rendering.layout.js","jquery/rendering/js/base/container/bizagi.rendering.accordion.js","jquery/rendering/js/base/container/bizagi.rendering.accordionItem.js","jquery/rendering/js/base/render/bizagi.rendering.collectionnavigator.js","jquery/rendering/js/base/container/bizagi.rendering.group.js","jquery/rendering/js/base/container/bizagi.rendering.horizontal.js","jquery/rendering/js/base/container/bizagi.rendering.panel.js","jquery/rendering/js/base/container/bizagi.rendering.contentPanel.js","jquery/rendering/js/base/container/bizagi.rendering.searchForm.js","jquery/rendering/js/base/container/bizagi.rendering.tab.js","jquery/rendering/js/base/container/bizagi.rendering.tabItem.js","jquery/rendering/js/base/container/bizagi.rendering.nestedForm.js","jquery/rendering/js/base/render/bizagi.rendering.actionLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.entityTemplate.js","jquery/rendering/js/base/render/bizagi.rendering.polymorphicLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.check.js","jquery/rendering/js/base/render/bizagi.rendering.number.js","jquery/rendering/js/base/render/bizagi.rendering.numberScientificNotation.js","jquery/rendering/js/base/render/bizagi.rendering.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.text.js","jquery/rendering/js/base/render/bizagi.rendering.readonly.js","jquery/rendering/js/base/render/bizagi.rendering.button.js","jquery/rendering/js/base/render/bizagi.rendering.fileprint.js","jquery/rendering/js/base/render/bizagi.rendering.link.js","jquery/rendering/js/base/render/bizagi.rendering.checkList.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.image.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.link.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.label.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.text.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.upload.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.boolean.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.dateTime.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.number.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.money.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.placeholder.js","jquery/rendering/js/base/render/bizagi.rendering.geolocation.js","jquery/rendering/js/base/render/bizagi.rendering.association.js","jquery/rendering/js/base/render/bizagi.rendering.upload.js","jquery/rendering/js/base/render/bizagi.rendering.ecm.js","jquery/rendering/js/base/render/bizagi.rendering.yesno.js","jquery/rendering/js/base/render/bizagi.rendering.letter.js","jquery/rendering/js/base/render/bizagi.rendering.formLink.js","jquery/rendering/js/base/render/bizagi.rendering.cascadingCombo.js","jquery/rendering/js/base/render/bizagi.rendering.list.js","jquery/rendering/js/base/render/bizagi.rendering.multiSelect.js","jquery/rendering/js/base/render/bizagi.rendering.searchList.js","jquery/rendering/js/base/render/bizagi.rendering.money.js","jquery/rendering/js/base/render/bizagi.rendering.radio.js","jquery/rendering/js/base/render/bizagi.rendering.image.js","jquery/rendering/js/base/render/bizagi.rendering.userfield.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.readonly.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.combo.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.date.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.search.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.document.js","jquery/rendering/js/base/render/bizagi.rendering.range.js","jquery/rendering/js/base/render/bizagi.rendering.rangeDate.js","jquery/rendering/js/base/render/bizagi.rendering.rangeMoney.js","jquery/rendering/js/base/render/bizagi.rendering.rangeNumber.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.form.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.panel.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.contentPanel.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.tab.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.tabItem.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.horizontal.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.group.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.searchForm.js","jquery/renderingflat/js/smartphone/container/helpers/bizagi.rendering.smartphone.slide.startForm.js","jquery/renderingflat/js/smartphone/container/helpers/bizagi.rendering.smartphone.slide.form.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.actionLauncher.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.entityTemplate.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.polymorphicLauncher.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.extendedText.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.label.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.number.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.numberScientificNotation.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.money.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.yesno.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.check.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.list.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.multiSelect.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.radio.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.cascadingCombo.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.collectionnavigator.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.hidden.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.upload.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.grid.beta.js","jquery/renderingflat/js/smartphone/container/helpers/bizagi.rendering.smartphone.helpers.grid.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.grid.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.letter.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.button.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.fileprint.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.link.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.checkList.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.activityCheckList.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.image.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.link.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.label.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.text.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.dateTime.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.number.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.money.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.upload.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.image.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.image.native.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.formLink.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.geolocation.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.association.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.userfield.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.column.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.combo.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.document.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.date.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.text.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.number.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.image.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.upload.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.link.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.search.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.uploadecm.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.button.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.numberScientificNotation.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.radio.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.list.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.exclusiveCheck.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.document.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.rangeDate.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.rangeMoney.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.rangeNumber.js","jquery/rendering/js/base/bizagi.rendering.base.factory.js","jquery/renderingflat/js/smartphone/bizagi.rendering.smartphone.factory.js","jquery/rendering/js/bizagi.rendering.device.factory.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","$","widget","options","id","columns","sortBy","sortType","showSummary","collapse","collapseState","data","indexedData","maxColumns","buttonsPst","title","tableCssClass","headerStyles","floatingHeader","hasExclusiveCheck","template","grid","waiting","table","emptyTable","column","specialColumn","row","rowButtons","cell","specialCell","pager","buttons","dynamicPager","summary","summaryCell","actions","add","edit","remove","details","allowMore","enableXlsExport","enablePdfExport","mode","_init","self","this","element","page","changes","totalRows","totalPages","selectedRow","components","asyncCells","scrollableArea","columnByIndex","columnByName","columnKeyIndex","each","i","key","label","name","tooltip","index","split","addClass","attr","calculateKeyIndex","startLoading","bUseTimeout","waitingFn","waitingTimeout","append","fasttmpl","setTimeout","endLoading","clearTimeout","empty","setData","refresh","getData","rows","j","getChanges","_cleanComponents","_cleanButtons","draw","refreshSummary","columnIndex","_getComponent","drawing","refreshSummaryCell","drawSummary","postRenderSummary","getCell","cells","is","children","find","html","drawSummaryCell","replaceWith","onCellReady","changeCellValue","value","deleteCellExclusiveValues","orientation","gridRtl","isDesign","drawTable","appendTo","postRender","attachPaginator","attachHandlers","$tableContainer","$table","offset","parseInt","css","replace","stickyTableHeaders","fixedOffset","zIndex","cacheHeaderHeight","bind","trigger","length","hide","_getButton","show","_replaceElement","drawHeader","drawBody","drawPager","drawButtons","drawGridExportOptions","drawRowButtons","drawDynamicPager","isExactMatch","exactMatch","drawColumn","_canShowButtons","drawSpecialColumn","columnProperties","bizAgiProperties","cssClass","cssclass","header","columntitlealign","columnAlign","isSortable","xpath","initialSortBy","sortActive","controlType","bizagi","util","getColumnType","type","isHorizontalRadio","horizontal","extend","isKey","sortOrder","columnCssClass","headerLabelStyles","flexAlign","mapAlignClassName","drawRow","rowData","isNewRow","newRow","rnd","Math","floor","random","businessKey","drawCell","_canShowRowButtons","drawSpecialCell","cellAlign","hidden","summarizeBy","result","onDrawCell","calculateSummary","undefined","done","state","resolveResult","messageValidation","promise","drawGroupHeader","drawFooter","pages","total","push","number","active","records","tooltips","parameters","buttonsRtl","exportOptions","rtl","postRenderRow","_triggerHandler","asyncResult","when","selectDynamicPager","onDynamicPager","changePage","currentPage","Number","newPage","onPageRequested","getCurrentPage","isValid","sortAttribute","indexOf","sortColumn","onSortRequested","selectRow","onRowUnselected","selectedBusinessKey","onRowSelected","unselectRow","operation","defaultvalue","columnValues","map","max","min","columnValue","Array","processAction","action","params","onEditRow","onDeleteRow","onShowMore","onShowDetails","onAddRow","onShowExportGridOptions","_buildRefreshParameters","onCollapseGrid","onDrawControl","onDrawGroupHeader","replaceFirstWithoutPatterns","sortColumnIndex","callback","call","component","foundComponent","button","jQuery","context","smartphone","tablet","DEVICES","printf","msg","arg","args","slice","arguments","a","val","shift","charCodeAt","round","String","bizagiQueue","async","sync","queue","callbacks","addParallel","execute","starter","Deferred","queueLength","pipe","apply","deferred","resolve","fail","reject","deviceEnum","fn","callInside","fx","tagName","toLowerCase","contentWindow","e","browser","msie","execScript","toString","webkit","mozilla","eval","callInsidePopup","document","ready","CSSStyleDeclaration","getPropertyValue","getAttribute","setProperty","styleName","priority","setAttribute","rule","RegExp","escape","cssText","removeProperty","removeAttribute","getPropertyPriority","test","text","style","get","nl2br","br2nl","controlValueIsChanged","control","properties","getValue","compareValue","originalValue","forceCollectData","includes","parseBoolean","Date","getTime","getMaxZindex","elm","maxZindex","zindex","equalizeHeights","selector","heights","outerHeight","autoSave","deferredSave","detectDevice","_data","anonymizedUserInformation","username","email","domain","picture","isAnonymized","datepickerResource","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","dateFormat","firstDay","isRTL","showMonthAfterYear","yearSuffix","liveProcessesEvents","newLiveProcess","createEvent","initEvent","routeEvents","route","saveEvent","lastWidget","nextWidget","liveSave","widgetName","deferredLiveSave","indeX","location","href","workportal","widgets","BIZAGI_WORKPORTAL_WIDGET_PROFLY","saveLivePromise","dispatchEvent","md5","message","CryptoJS","s","p","m","l","lib","n","r","Base","b","h","mixIn","hasOwnProperty","init","$super","create","clone","q","WordArray","words","sigBytes","t","stringify","concat","clamp","g","ceil","v","enc","Hex","k","join","parse","substr","Latin1","fromCharCode","u","Utf8","decodeURIComponent","Error","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_nDataBytes","_append","_process","blockSize","_minBufferSize","_doProcessBlock","splice","Hasher","cfg","_doReset","update","finalize","_doFinalize","_createHelper","_createHmacHelper","HMAC","algo","abs","sin","MD5","_hash","w","x","y","z","A","B","C","D","c","d","f","HmacMD5","multiReplace","mapDataToReplace","reg","replaceAll","pcFrom","pcTo","replaceAllGlobalRegExp","temp","re","capitalize","charAt","toUpperCase","startsWith","str","getInitials","initials","sign","isNaN","JSON","encode","measureString","string","fontSize","width","detach","trim","endsWith","suffix","isIE7","isIE","documentMode","isIE8","isIE9","isIE10","isIE11","navigator","userAgent","match","isIE11OrLower","isIE10OrLower","isEdge","appName","objectValues","array","Object","keys","itm","values","getIEVersion","sAgent","window","indexMSIE","version","substring","isChrome","vendor","isFirefox","minVersion","ua","M","tem","exec","appVersion","getBrowser","bw","emptyNavigatorInfo","info","language","setIphoneXOverrides","isNativePluginSupported","bizagiapp","isIphoneX","isiOSDevice","isString","isObject","isArray","isNull","isBoolean","getInternetExplorerVersion","isNumeric","parseFloat","isFinite","isGUID","mustImplement","notImplementedMethod","console","log","exe","encodeXpath","isEmpty","isEmptyObject","isEmptyCombo","object","property","other","decodeURI","infinityControl","finishDecoded","decodedValue","hasNonVisibleChars","ch","percent2Number","isObjectEmpty","isMapEmpty","replaceSelector","container","elementToReplace","unwrap","hasScroll","el","direction","identicalObjects","obj1","obj2","countProps","count","isScrolledIntoView","elem","layout","scrollTop","elemTop","top","height","centerElementIntoScroll","actualScroll","elementTop","elementHeight","newTop","encodeHtml","decodeHtmlEntities","getHashParams","hash","loadFile","defer","url","src","loader","then","initWebpart","webpart","device","initialized","initializing","loadingDeferred","getQueryString","pairs","pos","argname","extendQueryString","additionalParams","plainUrl","existingParams","newParams","param","getStackTrace","callstack","isCallstackPopulated","dont","exist","stack","len","lines","opera","entry","currentFunction","callee","caller","fname","highLightElement","removeClass","autoScrollBottom","elScrollHeight","scrollHeight","autoScrollInterval","autoScroll","itemScroll","limitTop","limitBottom","idInterval","outSide","clearInterval","mousemove","event","pageY","autoScrollTopInterval","autoScrollBottomInterval","classCSS","setInterval","valueMaxScrollBottom","innerHeight","removeAutoScroll","unbind","getMaxZIndex","showPopup","callbackFn","left","newWindow","open","BAPopupWindow","BAPopupCallback","BACloseWindow","controls","submitForm","close","showQuirksModePopup","quirksModePage","BIZAGI_PATH_TO_BASE","BAQuirksPopupWindow","windowParams","popupWindow","quirksOnLoad","loadedBody","iframe","afterLoad","userParams","callbackParams","loadingFunction","body","createPopup","popupName","onClose","popupTitle","handleClose","overlay","popup","closeButton","popupContent","additionalClass","center","closeHandler","click","fullPopup","content","createOkCancelPopup","onOk","onCancel","buttonsContainer","buttonOk","buttonCancel","localization","getResource","okHandler","cancelHandler","ok","cancel","dialog","modal","closeQuirksModePopup","quirksPopup","getStyle","pathName","getFontFace","getAllChildrens","matchStyles","stringCss","awesomeBrowser","file","styleSheets","rules","cssRules","BIZAGI_ENVIRONMENT","cssTextOriginal","selectorText","lastLevel","styleSheet","suckBrowser","cookie","expires","days","setDate","getDate","raw","toUTCString","path","secure","decode","randomNumber","setContext","reloadCSS","queryString","_name","_call","_params","_singleton","singleton","_timeOut","timeout","_maxIterations","iterations","_context","_killWhenExitContext","killWhenExitContext","timeOut","maxIterations","itsRunning","timeInit","executeTimeOut","now","actualIterations","ieFunction","pointer","timeOutRunning","isDate","dateField","timeField","resultDate","hasTime","resultTime","arrayDate","unicode2htmlencode","input","htmlHex","getHeadElement","hd","getElementsByTagName","docEl","documentElement","createElement","insertBefore","firstChild","loadStyle","styleText","layoutGuid","node","getElementById","createTextNode","childNodes","nodeValue","replaceChild","appendChild","loadIconStyle","icon","userfieldname","innerHTML","formatDecimalAndMoneyCell","tableData","externalMoneyFormat","moneyFormat","decimalFormat","externalDecimalFormat","decimalSymbol","decimalSeparator","digitGroupSymbol","groupSeparator","roundToDecimalPlace","decimalDigits","symbol","colorize","groupDigits","negativeFormat","positiveFormat","columnTitle","fields","formatMoney","numberValue","formatDecimal","override","removeTrailingZeros","positive","BIZAGI_DEFAULT_CURRENCY_INFO","formatBoolean","formatInvariantBoolean","htmlContent","not","$element","format","formatCurrency","formatMonetaryCells","tmpResult","intSection","decimalSection","decimalResult","isNegative","decimalDigitPosition","fixDecimalDigits","getOnlyNumbersByString","stringValue","toFixed","formatInvariantMoney","defaultFormat","allowDecimals","formatInvariantNumber","numberFormat","thousands","containsLetter","NaN","formatNumber","percentage","formatInvariantDate","dateTimeFormat","isValidDate","getFormatDate","formatDate","dateFormatter","formatDateFromInvariantStringDate","stringInvariantDate","dateValue","defaultFormatDate","H","getHours","getMinutes","getSeconds","ms","getMilliseconds","hideTimeWhenHourMinutesSecondsAreZero","formatValueByDataType","dataType","replaceLineBreak","formatMonetaryCell","formatDecimalCell","parseDate","valueOf","LZ","getDateFromFormat","getRelativeTime","date","onlyUnitsTime","timeZone","moment","tz","currentUser","timeZoneName","time","kendo","diff","timeDiff","getTimeDiffDescription","unit","timeDivisor","unitAmount","resourceAgo","compareDates","date1","dateformat1","date2","dateformat2","d1","d2","getDifferenceBetweenDates","i18n","token","i_format","getFullYear","getMonth","E","getDay","isValidResource","months","i_val","year","getYear","month","hh","mm","ss","ampm","_getInt","month_name","day_name","ff","_isInteger","_val","minlength","maxlength","_token","preferEuro","generalFormats","monthFirst","dateFirst","checkList","analyzeTimeFormat","timeFormat","returnObj","show24Hours","showSeconds","separator","lastToken","getDateFromInvariant","showTime","INVARIANT_FORMAT","setHours","formatInvariant","getDateFromISO","ISO_FORMAT","formatISO","formatISO8601","dateObject","restartTimeToMidnight","isFormatISO8601","stringDate","sleep","delay","start","getDateFormatByDatePickerJqueryUI","sleepUntil","def","internalSleepUntil","sleepFor","browserSupportLocalStorage","setItemLocalStorage","localStorage","setItem","getItemLocalStorage","getItem","removeItemLocalStorage","removeItem","clearLocalStorage","clear","bizagiConfig","showConsoleLog","stopLoading","elementToapply","isEventSupported","eventName","isSupported","needsFallback","circularDependencies","Function","list","lastNodeAdded","addNode","OBJ","foundObjChildNode","_search","_addNode","nodeObj","timeStamp","addChild","resolved","seen","_getFirstNodeWithChilds","_resolve","_resetList","childs","hasObject","error","dependencyFrom","dependencyFromObj","dependencyTo","dependencyToObj","standardError","status","responseText","makeErrorMessage","multiactionError","toSearch","collection","messageTmpl","cssExtended","instance","cssToAdd","cssExtendedApplyChanges","option","$this","attrToAdd","tmpStyle","arrProperties","resultProperties","cssProperty","canvas","parent","sortJSON","way","sort","shortNumber","newNumber","lenghtNumber","escapeHtml","div","formatMonetaryValue","formatDecimalValue","formatDateValue","showNotification","div_sync","fadeIn","stop","fadeOut","isModeOnline","isOfflineForm","dispose","arrayEach","getStandardNotation","tmp","decimalNumber","exponentialNumber","scientificNotationFormat","sdLimit","expMinLimit","expMaxLimit","sNregex","sNFormat","exp","prefix","originalPointIndex","tempParts","significantDigits","intPart","from","to","significantFlag","firstDigit","restDigits","stripslashes","isHTMLValidText","resetData","sessionStorage","isAuthenticate","changeData","isMobileDevice","isNativeMobileDevice","isTabletDevice","isAndroidTabletDevice","isiOSTabletDevice","isSmartphoneDevice","isAndroidSmartphoneDevice","isiOSSmartphoneDevice","formContainer","getFormContainer","formParams","getParams","detectAndroidVersion","indexAndroid","androidVersion","getPathUrl","solvedUrl","locationParts","pathname","basePath","protocol","host","pathToBaseBackwards","getAndroidVersion","mobileImagePath","image","dataImage","photoSplit","resource","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","byteNumbers","byteArray","Uint8Array","Blob","stringToByteArray","hasOfflineFormsEnabled","BIZAGI_ENABLE_OFFLINE_FORMS","isFlatDesignEnabled","BIZAGI_ENABLE_FLAT","isMobileGridEnabled","BIZAGI_ENABLE_MOBILE_GRID","isNativeHeaderEnabled","NATIVE_HEADER_ENABLE","isQuickSearchEnabled","BIZAGI_ENABLE_QUICK_SEARCH","isOAuth2Enabled","BIZAGI_AUTH_TYPE","getNativeComponent","BIZAGI_NATIVE_COMPONENT","isVersionSupported","supported","BIZAGI_SERVER_VERSION","isCordovaSupported","cordova","isTabletNativeSupported","isSmartphoneNativeSupported","plugins","Keyboard","hideKeyboardAccessoryBar","detectRealDevice","settedDevice","BIZAGI_DEFAULT_DEVICE","isAndroid","isAndroidDevice","getChannelType","BIZAGI_SERVER_CHANNEL","channel","isDataUrl","getDataUrl","currentUrl","tempUrl","processFailMessage","getErrorFormatted","code","statusText","errorCode","errorType","tmp_block_header","disableWorkPortalMenu","blockHeight","prependTo","position","background","opacity","z-index","enableWorkPortalMenu","enableMenuSection","idMenu","controllers","menu","setActiveSection","getURLWithASlashAtTheEnd","downloadFile","isCompleteUrl","showModalOnFail","_defer","_showModalOnFail","_urlDownload","applicationUrl","_iframeExists","_onCantDownload","that","defaultMessage","tryCatch","contentDocument","isMaintenanceWindow","jsonResponse","showModal","maintenanceWindows","modalError","_reject","onload","downloadFileByPOST","inputValues","formPOST","contents","showErrorAlertDialog","ajax","submit","executeActionRoutingFromWorkportal","idCase","idWorkItem","publish","BIZAGI_WORKPORTAL_ACTION_ROUTING","getMessageFromNetworkState","sanitizeHTML","sanified","DOMPurify","sanitize","arrayUnique","items","debounce","func","wait","immediate","later","callNow","debounce2","fire","isNativeImageEditorSupported","enableImageEditor","errorMessage","validateUrlWellFormed","urlWithProtocol","nodeWithUrl","cleanNodeWithUrl","IN_PLACE","urlWithoutSpaces","encodeHtmlText","valueToDisplay","decodedDisplayValue","encodeString","setCaretPosition","ctrl","setSelectionRange","focus","createTextRange","range","moveEnd","moveStart","select","getCaretPosition","oField","iCaretPos","selection","oSel","createRange","selectionStart","escapeRegex","getFeatureObject","arr","featureObjectCache","features","getConfigFeatures","pivot","getFeatureObjectIte","bizagiConfiguration","BIZAGI_MOBILE_FEATURES","resetConfigFeatures","isFailResponse","formatItem","performTermMatches","strValue","term","withoutFormat","highlightMatches","regEx","getDesktopResolution","resolution","devicePixelRatio","screenWidth","screen","screenHeight","deviceXDPI","logicalXDPI","getDeviceCode","BIZAGI_DEVICE_MARKET_NAME","normalizeType","normalizeQueryType","hideOrShowXToCloseDialog","isEnableFeature","feature","isHtml","possibleHtml","_try","_catch","listFunctions","_listFunctions","next","end","variable","reduce","newVar","prop","getComputedStyle","scroll","overflow","scrollerParent","HTMLElement","SVGElement","ps","parents","parentNode","scrollingElement","startkendo","kendoMobileApplication","mobile","Application","skin","browserHistory","ui","progress","started","bizagiNavigate","navigate","isMashupContext","BIZAGI_MASHUP_CONTEXT","isSharepointContext","BIZAGI_SHAREPOINT_CONTEXT","isWebpartContext","isWebpart","startTimeline","showTimeLine","startGraphicquery","showGraphicQuery","startSelectUser","showSelectUser","userId","userName","guid","isEmptyValue","initializeReferrerParams","referrerParams","getLPQueriesParameters","sidebarData","getLPQueriesSelectedItemFromTree","selectedTreeItem","setLPQueriesParameters","parametersSidebar","tree","cleanLPQueriesParameters","setLPQueriesReferrer","referrer","isConnected","connection","Connection","NONE","onLine","isRenderingUrlAllowed","request","endPoint","whiteList","pattern","applyEyeFunction","setShowIcon","after","addEvent","setHideIcon","direct","className","ev","accessibilityEnter","cb","extraEvent","preventDefault","stopPropagation","which","recreateNativeButtons","navigation","setNavigationButtons","isOverrideFeatureEnabled","featureName","createDynamicClass","nameClass","renderParams","dynamicFunction","languages","es","es-ES","es-AR","es-BO","es-Cl","es-CO","es-CR","es-DO","es-EC","es-SV","es-GT","es-HN","es-MX","es-NI","es-PA","es-PY","es-PR","es-PE","es-US","es-UY","es-VE","en","en-AU","en-BZ","en-CA","en-029","en-IN","en-IE","en-JM","en-MY","en-NZ","en-PH","en-SG","en-ZA","en-TT","en-GB","en-US","en-ZW","de","de-AT","de-DE","de-LI","de-LU","de-CH","fr","fr-BE","fr-CA","fr-LU","fr-MC","fr-CH","fr-FR","it","it-IT","it-CH","ja","ja-JA","ja-JP","nl","nl-NL","nl-BE","pt","pt-BR","pt-PT","ru","ru-RU","cs","cs-CZ","ar","ar-DZ","ar-BH","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LB","ar-LY","ar-MA","ar-OM","ar-QA","ar-SA","ar-SY","ar-TN","ar-AE","ar-YE","zh","zh-HK","zh-MO","zh-CN","zh-Hans","zh-SG","zh-TW","zh-Hant","getNormalizedDate","fullFormat","dateTime","setMilliseconds","isFeatureEnabled","getLastProcessInboxKey","lastProcessInboxKey","getUserHash","lastProcessInboxInit","getLastProcessInboxCreate","processInfo","createLastProcessInboxProcess","sortInfo","createLastProcessInboxSort","filterInfo","createLastProcessInboxFilter","processColumnsInfo","createLastProcessInboxColumns","inputTrayInfo","createLastProcessInboxInputTray","processInfoName","idWorkflow","sortDirection","sortFieldName","filterValue","filterFieldName","filterType","processColumns","getLastProcessInbox","lastProcessInbox","setLastProcessInbox","smartInboxId","setLastProcessInboxProcessColumns","getLiveFiltersFromStorage","filters","modelStorage","serialize","setLiveFiltersToStorage","assign","setLastProcessInboxLiveFilter","liveFilters","setLastProcessInboxSort","setLastProcessInboxFilter","setLastProcessInboxInputTray","inputTray","getLastProcessInboxProcessInfo","allProcesses","getLastProcessInboxSmartInboxId","getLastProcessInboxSort","getLastProcessInboxFilter","getLastProcessInboxLiveFilter","getLastProcessInboxProcessColumns","getLastProcessInboxInputTray","removeLastProcessInbox","removeLastProcessInboxSort","removeLastProcessLiveFilters","getSyncTimeStampKey","syncTimeStampKey","storeSyncTimeStamp","currentDate","getSyncTimeStamp","syncTimeStamp","BIZAGI_USER","BIZAGI_PROXY_PREFIX","BIZAGI_DOMAIN","hashCode","defaultWidget","newValueStr","_preferService","services","preferences","_widgets","_mobile","set","newVal","_desktop","_newValueView","changePreference","INBOX_VIEW_TYPE","_actualValue","getPreference","BIZAGI_WORKPORTAL_WIDGET_INBOX","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","_device","isMobile","getMobileFeaturesKey","userKey","mobileFeaturesKey","getMobileFeatures","stringFeatures","storeMobileFeatures","mobileFeatures","storedFeatures","updatedFeatures","getCardviewMaxColumsAllowed","maxColumnsEnabled","enabled","blobTob64","blob","onlyData","reader","FileReader","readAsDataURL","onloadend","base64data","blobToText","readAsText","binaryData","newUrl","deepExtend","out","originalType","align","rigth","justify","default","isMobileErrorTracesEnabled","mobileErrorTracesEnabled","mobileErrorTraces","isMobileSmartInboxEnabled","mobileSmartInboxEnabled","mobileSmartInbox","isMobileLiveFiltersEnabled","mobileLiveFiltersEnabled","mobileLiveFilters","any","grep","first","groupBy","item","downloadBlobFile","blobFile","fileName","msSaveOrOpenBlob","URL","createObjectURL","link","download","revokeObjectURL","removeChild","handleJSONResponse","jsonFile","err","bzValidator","validators","errors","callbackValidator","warn","validate","callbackResponse","forEach","validator","getRegionOrCulture","region","regionInfo","regions","culture","generateRegex","settings","destination","defaults","global","eventOnDecimalsEntered","regex","num","multiCeroPattern","search","numParts","isPositive","hasDecimals","decimals","originalDecimals","money","$destination","toNumber","method","asNumber","parseType","validateParseType","scenarioInfo","getFileScenario","category","scenario","BIZAGI_SMARTPHONE_PATH","_defineProperty","defineProperty","enumerable","configurable","writable","b64EncodeUnicode","btoa","p1","pasteEventName","caret","begin","mask","placeholder","_prepareBuffer","_bindEvents","_checkVal","allowPartials","destroy","removeData","res","buffer","tests","formatted","_setData","eventsBound","_escapeMask","defs","definitions","partialPosition","firstNonMaskPos","maskEscaped","ignore","focusText","_writeBuffer","change","keyCode","SHIFT","SPACE","BACKSPACE","DELETE","_clearBuffer","_shiftL","ESCAPE","charCode","ctrlKey","altKey","metaKey","_seekNext","_shiftR","completed","originalPos","allow","lastMatch","literals","replacements","getter","#","*","selectionEnd","duplicate","numeric","decimal","keypress","nodeName","shiftKey","blur","numericSN","eq","F","J","parseValue","setValue","hasClass","prev","outerWidth","offsetHeight","clientHeight","O","N","P","K","enable","disabled","disable","I","PI","closest","formatResult","display","headerText","onChange","theme","wheels","showLabel","setText","cancelText","insertAfter","onSelect","delegate","readonly","originalEvent","wheelDelta","detail","G","o","onShow","scroller","themes","presets","preset","methods","readOnly","showOnFocus","changedTouches","L","isDisabled","getInst","setDefaults","dateOrder","timeWheels","startYear","endYear","shortYearCutoff","monthText","dayText","yearText","hourText","minuteText","secText","ampmText","stepHour","stepMinute","stepSecond","minDate","maxDate","ap","Q","0","1","invalid","dates","daysOfWeek","daysOfMonth","datetime","inputClass","android","ios","jqm","jqmBody","jqmHeader","jqmWheel","jqmClickPick","jqmSet","jqmCancel","mobilePagination","defaultOptions","firstPage","actualPage","listElement","firstClass","previous","previousClass","nextClass","last","lastClass","liClass","arrowClass","clickCallBack","pagination","previousPage","nextPage","query","lastProcessedValue","force","filter","prepend","modalPagerTemplate","modalPager","modalContainer","listItems","modalListContainer","useWithBlock","kendoMobileModalView","useNativeScrolling","on","itemSelected","keyup","mobileGrid","columnKeyStyle","columnHiddenStyle","kendoTmpl","bSpecialColumnAdded","bSpecialCellAdded","pagerData","hasPagination","pagerContainer","pagerOptions","actionSheet","_showActions","titleLabel","setDataToShow","evt","target","actionClicked","cancelClicked","getNewRowKeys","getContainer","displayName","editLabel","deleteLabel","detailLabel","timeago","timestamp","$t","refreshMillis","allowFuture","localeTitle","cutoff","strings","prefixAgo","prefixFromNow","suffixAgo","suffixFromNow","seconds","minute","minutes","hour","hours","day","years","wordSeparator","numbers","inWords","distance","distanceMillis","$l","substitute","stringOrFunction","isFunction","iso8601","isTime","bztabs","activeTab","tabNumber","activate","popUp","beforeActivate","tabCountPopup","tabHeader","tabCountReal","widthRow","textContent","tabCurrent","widthTabSelected","updateTabSize","origin","changeTab","dataRef","currentTarget","tabChildren","toggle","tempTabs","moveAtTheEnd","reorderTabs","domIncluded","headerWidth","innerWidth","totalWidth","pop","helpText","dir","$html","render","endPoints","getEndPoints","renderHandlerPathRest","form-get-data","proxyPrefix","form-submit-data","form-submit-data-upload","render-property-refresh","render-multiaction","render-upload-cancel-image","render-upload-data-url","render-upload-add-url","render-upload-delete-url","render-ecm-upload-url","render-multiaction-metadata","render-grid-edit-url","render-grid-save-url","render-grid-add-url","render-grid-rollback-url","render-grid-commit-url","render-grid-checkpoint-url","render-save-entity","render-stakeholder-associated","render-search-default-image","render-search-form-get-data","render-search-advanced-url","render-letter-notEditable-url","render-letter-content-url","render-letter-save-url","render-letter-content-icons","render-userfield-definition","render-document-generate","render-document-generateAllDocuments","render-processes-startform","render-processes-getstartform","render-entity-layout-image64","render-entity-layout-imageByteArray","render-entity-layout-upload-files","render-query-getUsersList","case-handler-getCaseSummary","case-handler-getCaseSummaryByGuid","case-handler-getCaseAssignees","case-handler-getWorkItems","case-handler-getWorkItemsByGuid","admin-getUsersList","admin-getUsersList-FromPreferences","admin-getUsersList-ForStakeholders","admin-getUsersList-ForXpathIdBossUser","admin-getUsersList-ForXpathIdDelegate","admin-getUsersForAssignation","admin-users-config","admin-usersform","admin-GenerateDataToSendByEmail","admin-sendUserEmail","sharepointProxyPrefix","alert","Class","getUrl","service","setProxyPrefix","BA_ACTION_PARAMETER_PREFIX","BA_CONTEXT_PARAMETER_PREFIX","BA_PAGE_CACHE","BA_MULTIACTION_WITH_LIMIT_NUMBER","BA_MULTIACTION_WITH_LIMIT_QUEUE","serviceLocator","multiactionService","multiactionservice","multiactionServiceWithLimit","enableECMMetadataMultiaction","multiactionMetadataService","metadatamultiactionservice","userfieldRequests","deviceType","desktop","deviceCode","multiaction","multiactionWithLimit","metadataECMMultiaction","getFormData","idProcess","idForm","idEntity","surrogateKey","idRender","xpathContext","requestedForm","recordXPath","summaryForm","idWorkitem","idTask","idPageCache","contextType","guidEntity","isRefresh","isActionStartForm","additionalXpaths","idStartScope","readOnlyForm","printversion","recordXpath","downloadOfflineForm","editable","prepare","chrono","initAndStart","ajaxParams","serviceType","avoidLoader","response","stopAndLog","form","transformGridDataToReadOnly","allowAdd","allowDelete","allowEdit","allowGrouping","allowSearch","getSearchFormData","idSearchForm","processDataValues","submitData","resolveData","contexttype","transitions","surrogatekey","forcePlanCompletion","actionType","debug","beforeSend","xhr","renderingService","newName","getPropertyData","extra","sessionId","guidentity","pxpath","prows","ppage","pfilter","psort","porder","pcaseId","pguidEntity","psurrogatedKey","pactionXpath","ptemplateGuid","pparameters","multiactionConnection","getSearchData","getCollapseData","getGridData","order","searchFilter","getGridDataExclusivesSelected","xpathfilter","getUploadCancelImage","pathToBase","getUploadFileUrl","fileId","verifyPathToBase","getXSRFToken","fileUrl","processData","binary_file","readFileAsJSON","getResponseHeader","media","byteArrayToBlob","binary","getUploadFileEntityUrl","isContextContainerWidgetRender","xpathActions","getUploadAddUrl","getUploadAddFileUrl","isUserPreferences","deleteImage","deleteUploadFile","getECMMetadata","idFileUpload","xPath","idAttrib","interceptor","intercept","source","checkOutFile","cancelCheckOut","deleteECMFile","updateECMFileContent","metaValues","updateECMMetadata","getFileProperties","getFile","getAllDocuments","getUploadFileEntity","uploadECMFile","fileUpload","getECMFileUrl","p_sessionId","isFileOnECM","idUpload","read","editGridRecord","addGridRecord","addGridRecordData","saveGridRecord","disableServerGridValidations","deleteGridRecord","getFlipAssociation","flipstate","parseJSON","rollbackGridAction","getSearchDefaultImage","processDataCriteria","criteria","submitSearch","allowFullSearch","maxRecords","associateStakeholder","associatedUser","refreshAssociateStakeholder","getLetterNotEditableUrl","getLetterContent","getCanGenerateLetter","saveLetterContent","fullUrl","getLetterEditorIconsPath","executeButton","getFilePrint","disposition","editLinkForm","saveLinkForm","rollbackLinkForm","commitLinkForm","commitGridAction","sendCheckpoint","sendCheckpointAction","getUserfieldDefinition","userfield","guidUserfield","refreshControl","refreshGridCell","typeRender","executeRule","executeInterface","executeSAPConnector","guidsap","executeConnector","guidConnector","executePipeline","pipeline","generateDocumentTemplate","h_pageCacheId","contextXpath","xpathcontext","groupMappingId","groupMapping","xpathAttribute","controlId","getAllDocumentsDownloadUrl","getCaseNumber","getCaseAssignees","getWorkitems","onlyUserWorkItems","getGridExportFile","exportType","sendEmail","subject","selected","invalidatePageCache","getUsersList","getUsersListFromQueryForm","getUsersListFromPreferences","getUsersListForXpathIdBossUser","getUsersListForXpathIdDelegate","getUsersListForStakeholders","getUsersForAssignation","getUsersForm","generateDataToSendByEmail","sendUserEmail","eMailTo","getConfiguration","getTemplate","forcePersonalizedColumns","templateType","templateGuid","isDefaultTemplate","hasStartForm","guidWFClass","getStartForm","guidprocess","surrogatedKey","mappingstakeholders","cache","editActionForm","getActions","extendParams","ptags","pmaxitems","executeActions","pguidConstructor","pguidAction","getPolymorphicActions","serializePolymorphicActions","getParents","fillTree","getChildren","child","hasConstructor","guidObject","guidConstructor","getEntityImage64","entity","getFilesDataForLayoutUploadControl","processUploadFile","verifyMobilePathToBase","formData","limit","batch","batchTimer","maxNumberOfActions","deferredBatchExecuting","disabledRequests","replicateServiceMethods","getService","proxyMethod","originalPrepare","makeCircularDependenciesError","h_action","detectCircularDependencies","batchTimeout","tag","singleAction","resolveDependencies","rejectDeferreds","responses","finalResponse","disableRequests","validateIfBatchIsExecuting","THROW_ERROR","buildConditions","conditions","bGridDetected","bCheckEditability","innerDependencies","operator","expressions","buildConditionOperator","sJsCondition","expression","simple","bGDetected","searchGridReferenceInCondition","buildSimpleCondition","complex","conditionsOperator","condition","sXpath","sArgument","ensureValueJs","ensureEditable","renderId","containerId","gridXpathInfo","processGridXpath","gridXpath","remainingXpath","detectedArgumentType","detectConditionArgumentType","argumentType","buildXpath","boolean","argument","buildArgument","enableActionIsChangedSupport","getRender","getRenderById","getColumn","renderType","isRelatedEntityRender","searchGridReferenceInXpath","isEditable","showRenderNotFoundError","isVisible","visible","isParentVisible","evalGridXpath","evalXpath","gridColumn","cellValue","getCellCurrentValue","renderToEval","renders","getRenders","rendersToEval","bIsGrid","getColumnDateCorrectFunction","mapValue","isFileUploaded","isValidEmail","isButtonPressed","pressed","isGridButtonPressed","arrGridXpath","isChanged","_isChanged","isControlChanged","changed","controlChanged","isGridColumnChanged","gridToEval","xpathColumn","columnChanged","columnToEval","onDeletedGridRow","rowDeleted","idMatches","showContainerNotFoundError","getCurrentDate","includeTime","invariantDate","matches","searchForGridReference","commands","command","searchForGridReferenceInCommand","bGridReferenceFound","getGridControl","getControlCell","getColumnDateValueDateAndTime","getColumnDateValueOnlyDate","getColumnDateValueForNoValue","controller","validations","enableDebug","_super","initializeValidations","validationBox","bizagi_notifications","expand","triggerGlobalHandler","itemIcon","minimized","clearEnabled","onNotificationClick","buildValidations","fnValidations","buildAllValidations","showErrorMessage","showValidationMessage","showAlertMessage","showInfoMessage","itemAdditionalClass","performValidationFn","clearValidationMessages","lastActionButton","getLastActionButton","validating","performValidations","countValidationMessages","hideValidationMessages","setValidationMessage","retype","showValidationMessages","expandNotificationBox","autofocus","isExpandedNotificationBox","invalidElements","bRendersValid","validateRenders","bFormValid","triggerHandler","sJSCode","buildValidation","validationCommand","logError","sStatement","evalValidation","sJsValidation","gridReference","validateEditability","validateEditabilityOnValidations","tokens","sGridStatement","bValid","showValidationMessageById","globalDependencies","initialCallFunctions","initialCallFunctionsDeferred","buildActions","internalSubmitActions","initialCallTimeout","initialCallIncrements","actionsHistory","period","processInternalSubmitAction","buildAction","isSummaryOrGlobalForm","typeForm","evalClientAction","serverCommand","elseCommands","isClientAction","dontExecute","hashes","executeOnlyClientActions","hashC","unbindActions","handle","refreshActions","newActions","_","dependencies","dependenciesId","buildFunction","renderById","inArray","addDependency","gridColumns","searchGridColumns","asyncFn","sJsAction","sJsElseAction","bAutomaticRestore","bCondition","queueAction","isServerCommand","buildCommand","buildRestoreCommand","elseCommand","commandType","isRecentAction","runAction","timeOutActionsHistory","detectCommandArgumentType","commandGridDetected","ruleObj","guidRule","xpathContextRow","interfaceObj","guidInterface","connectorObj","pipelineObj","guidPipeline","restoreRender","originalProperties","textFormat","changeRenderBackground","changeRenderForeground","color","changeRenderVisibility","changeRenderEditability","changeRenderRequired","required","restoreContainer","changeContainerBackground","backgroundColor","changeContainerVisibility","toogleContainer","changeContainerEditability","isValidRender","newVisualChange","getVisualChange","isGridComponent","lenIndex","indexes","getIndexes","changeCellBackgroundColor","logVisualChange","changeBackgroundColor","changeButtonBackground","getButton","changeCellColor","changeColor","changeButtonForeground","changeColumnVisibility","changeCellVisibility","renderingDeferred","changeVisibility","changeButtonVisibility","changeFormButtonVisibility","changeColumnEditability","changeCellEditability","changeEditability","changeButtonEditability","removeAttr","triggerClick","changeColumnRequired","changeCellRequired","changeRequired","changeRenderValue","fromAction","asyncRenderDeferred","setDisplayValue","changeRenderMinValue","changeCellMinValue","changeMinValue","changeRenderMaxValue","changeCellMaxValue","changeMaxValue","executeCalculatedField","runFormula","refreshContainer","internalQueue","refreshCell","submitFormData","interfaceObject","interface","submitRender","submitOnChange","cleanRenderData","promises","gridPromises","cleanCellData","cleanData","visualChanges","changeActiveItem","setAsActiveContainer","findIndex","getNavigation","isFloatingButtonsEnabled","changeFloatingButtonVisibility","ELEMENT_TYPE_CONTAINER","ELEMENT_TYPE_RENDER","ELEMENT_TYPE_COLUMN","renderFactory","dataService","resources","observableElement","disposed","initializeData","subscribers","getXpathContext","getPageCache","getXpath","getElementType","resize","size","effect","eventType","one","getRenderedElement","getMode","getFormType","isReadyToSave","getCustomHandlers","timeOutDispose","off","disposeTime","isDisposed","validationController","beforeToRefresh","afterToRefresh","getResourceByKey","fallback","restoreAppearance","getOrientation","rendering","TYPE_QUERY_FORM","uniqueId","childrenHash","elements","createRenderElement","createContainerElement","createFormElement","originalElement","processDuplicateRender","registerRender","getElement","getElementsByType","clonedElement","isClone","cloneRender","internalRender","applyContainerDefaults","renderContainerHtml","postRenderContainer","renderContainer","isRendered","replaceTag","replaceChildrenTag","replaceChildrenHtml","executeChildrenPostRender","configureHandlers","applyPlaceHolderPolyfill","configureDesignView","configureLayoutView","config","placeHolderConfig","forceApply","Placeholders","childrenElements","childElement","postRenderElement","renderChildrenHtml","renderElement","collectRenderValues","renderValues","canBeSent","collectData","hasChanged","collectRenderValuesQueryForm","canBeSentQueryForm","collectDataQueryForm","getRendersByXpath","hasValidGrids","childrenPromises","getFocus","getCustomHandler","customHandlers","timeOutChildrenDispose","saveChildrenVisualChanges","unregisterChildren","removeActions","currentContainer","triggerChildrenActions","restoreChildrenVisualChanges","restoreAppearanceAfterRefresh","restoreContainerAppearance","always","refreshDesignContainer","triggerRenderChange","registerActions","actionController","unregisterRender","getChildById","restoreElementAppearance","childrenVisualChanges","getMenu","postRenderTimeout","maxRendersPerScreen","rendersExecuted","renderOptimization","startOptimization","stopOptimization","included","includedInResult","maxLength","valueFormat","isHidden","editabilityEnabled","labelAlign","valueAlign","previousValue","calculateInitialLayoutProperties","displayType","getDefaultLabelAlign","getDefaultValueAlign","getRTLAlign","renderWidth","calculateRenderWidth","labelWidth","valueWidth","layoutType","renderTemplateName","renderTemplate","isFullRender","isExtendedText","isExtended","displayOptionClass","getDisplayOptionClass","labelAlignClass","getAlignClass","valueAlignClass","flexAlignClass","stringLabelWidth","stringValueWidth","printVersion","showFullRender","internalRenderControl","replaceControlHtml","renderControl","renderReadOnly","configureSubmitOnChange","isLabelFormat","executePostRender","_element","timeOutRender","internalPostRender","getControl","emptyControlByAsyncRenderDeferred","processLayout","postRenderPrintVersion","postRenderReadOnly","performExecutionModeMethods","performDesignModeMethods","configureHandlersQueryForm","configureHandlersReadOnly","internalSetInitialValue","internalSetInitialValueFlag","inlineAdd","hasValue","isQueryForm","messageData","isQuery","columnEditable","bold","changeFontBold","italic","changeFontItalic","underline","changeFontUnderline","strikethru","changeFontStrikethru","changeFontSize","triggerEvents","checkRequired","changeRequiredLabel","triggerRenderValidate","validateInputRetype","enableCheck","displayValue","getDisplayValue","getLabel","getControlFiller","validationMessage","readOnlyValue","changeDisplayOption","changeLabelAlign","alignType","changeValueAlign","customizeRenderWidth","getElementsToStylize","originalColor","currentStyle","getFormattingLabel","baseValue","defaultValue","isStartForm","compareValueObj","_findAction","targetObj","guidAction","objectValue","valuestrikethru","valueunderline","newFontSize","emptyControlByChangeEditability","changeEditabilityCellControl","renderColumn","decorated","getDecorated","internalRenderCellControl","readyDeferred","onCellChange","labelElement","controlElement","saveGridChildrenVisualChanges","controlFiller","currentElement","restoreGridChildrenVisualChanges","restoreGridAppearance","refreshDesignControl","clearDisplayValue","updateOriginalValue","getRenderId","queryValue","searchType","typeSearch","rangeQuery","newParameter","orderType","displayXpath","displayOnly","defaultControl","innerControl","timeOutEffect","submitOnChangexpathContext","addSubmitAction","bRefreshForm","notCollect","internalSubmitOnChange","getCacheIdCase","idCaseObject","getIdCase","getIdWorkitem","getidTask","getSessionId","backgroundImage","needBGPaint","background-color","background-image","startActionExecution","actionExecutionDeferred","endActionExecution","readyActionExecution","isFromCreatedRow","submitInvalidatePageCacheRequest","pageCacheToInvalidate","isDesignMode","isExecutionMode","preventDefaultForAnchorTag","getMainForm","currentForm","fromRender","setInterceptionObserver","$context","intersectionObserver","IntersectionObserver","pluginInitialized","disconnect","POLL_INTERVAL","observe","setResizeObserver","resizeObserver","ResizeObserver","decorateRenders","restoreCellAppearance","gridChildrenVisualChanges","formatValue","processLabelLayout","processControlLayout","warm","$label","changeFontColor","changeTextDecoration","$control","$elements","textDecoration","getCellBackgroundFunction","true","columnDate","changeInputBackgroundColor","false","postRenderSingle","configureHelpText","checkListGroup","contextEdition","renderEdition","postRenderEdit","setDisplayValueEdit","actualscroll","kendoTmpls","inputEdition","contexttmp","contextEdit","backActionCommon","scrollTo","actionSave","getContainerRender","getArrowContainer","arrow","getArrow","getContainerHelpText","containerHelpText","getContainerMessage","containerMessage","getContextEdit","dspType","excludeControls","renderSingle","setPlaceHolder","renderedElement","toggleClass","changeRequiredLabelByVal","before","changeRequiredControl","configureLabel","containerHelp","ele","rendersById","rendersByXpath","rendersByXpathId","rendersByType","pageCacheId","displayAsReadOnly","userConfirmationMessage","hasRule","paramsRender","processPath","breadCrumb","allowValidateAndSaveAction","enableActionValidateAndSave","enableExecuteQuickActions","allowExecuteQuickActions","useQuickActions","hasQuickActions","initializeButtons","originalProcessButton","processButton","isRoutingDisabled","applicationParent","isOfflineFormsV2Supported","caption","ordinal","nextWithoutValidations","back","createnewcase","save","quickAction","routing","buildButtonStyle","setParam","xpathId","listRendesByType","getRenderByType","listRendesByTypeLength","renderKey","listRender","getGridByColumn","grids","columnsIds","helptext","queryForm","globalForm","allowQuickActions","complexGatewayContainer","activeTransitions","processButtons","mainForm","$canvas","getValidationsContainer","validation","checkboxLabel","transitionId","strStyle","getContextType","getEndPointAction","formtype","getButtons","stopImmediatePropagation","buttonProperties","btn","routingDisabled","propagateExternalEvents","timeOutButton","processDefer","contains","preProcessButton","postProcessButton","setLoaderDeferred","loaderDeferred","deleteLoaderDeferred","isLoaderDeferredSet","useOrSetLoaderDeferred","getLoaderPromise","appendWaitForLoader","getResolveOrReject","getAllTabs","getAllTabsLength","innerTabsLoading","confirmationStatus","getConfirmationStatus","hasConfirmation","showConfirmationBox","customHandler","validateForm","saveForm","allowOnlineActions","collectRenderValuesForSubmit","deferredsToWait","deferreds","saveParams","offlineType","removeCaseSyncError","removeSyncErrorOnSubmit","removeStartCaseSyncError","removeTaskCaseSyncError","internalSubmitFormOffline","internalSubmitForm","checkWidgetsData","isComplexGatewayPainted","executeButtonAction","loading","showMessageBox","waitingDeferreds","isSaveForDraft","online","syncDeferred","syncParams","offlineAction","buttonPropertiesAction","radNumber","showToastOnSuccessSync","showMobileToast","IdCase","caseNumber","CaseNumber","isOfflineRefreshWithEdition","shouldRefresh","refreshForm","bHasValidations","alertMessage","propertiesToDisplayMessages","validationToDisplayMessages","messages","failHandler","partialSubmitFormOffline","animate","submitDataAction","performAction","checkpointAction","commitAction","prepareCheckpointAction","prepareCommitAction","getButtonAction","flowControlDeferred","sendRollbackAction","jqxhrList","abortAll","res2","messageType","addValidationMessage","addErrorMessage","selectedTabs","getSelectedTabs","selectedSection","getSelectedSection","isEdited","tabContainers","tabs","tabContainer","tab","waitingTemplate","waitingOverlay","waitingMessage","tmpl","isSharePoint","getSize","getOffset","min-height","min-width","getFocusedElement","setFocusedElement","errorJson","setSize","executeSubmitData","isRefreshingAfterSync","clearOnlyServer","tryToExecuteFunction","cancelPreviousRequest","focusIdentifier","IdScope","objMessage","strMessage","abort","buttonId","checkpointUrl","commitUrl","rollbackUrl","timeOutController","getFloatingButton","configureNetworkHandlers","handleConnectionChange","handleOfflineSyncEvent","hasSyncError","offlineFormId","paramsId","database","validateLocalDataForTaskExists","dataResult","applySyncLoader","tasks","isStart","isSyncLoaderRunning","loaderIndex","processQuickButton","isEnable","some","formProperties","hasButtonsConfirmation","needsUserConfirmation","buttonConfirmationMsg","hasFormConfirmation","formConfirmationMsg","saveWorkInProgress","formType","contextEvent","processTemplate","processedTemplate","g1","g2","layoutCollection","getCss","layoutguid","getContextEvent","withAddForm","withEditForm","allowDetail","inlineEdit","getKeys","inlineAddRecords","showPreview","drawControls","drawActions","drawControl","drawForms","drawPreview","templateItem","hasData","getTotalRows","getRow","getNextRow","getPreviousRow","getFirstRow","getLastRow","setPointer","isTherePendingInlineRow","addKey","newId","removeKey","navigationform","getParameters","submitAddRequest","addUrl","submitEditRequest","editUrl","submitDeleteRequest","deleteUrl","submitSaveRequest","saveUrl","dataFail","submitRollbackRequest","getRemoteData","dataUrl","validateControls","expandedIcon","getExpandedIcon","collapsedIcon","getCollapsedIcon","expandedClassIcon","bImmediate","panel","renderResult","performSearch","searchParams","refreshResults","collectSearchValues","maxRows","deviceMaxRecordsExceeded","onSearchFinished","errorObject","submitArray","getCriteriaOperation","criteriaData","parseAdditionalProperties","tabItems","counter","tabOrientation","getActiveTab","loadOnDemand","containsFocusedElement","setActiveTab","selectedTab","renderTabContent","deferredActions","engine","templateEngine","autoGenerateData","selecttemplate","processPropertyValueArgs","tagslist","maxItems","processPropertyValueDataTmplArgs","defaultAllowActions","allowactions","isHorizontal","templatetype","executeActionImmediately","processPropertyValueExecuteAction","notifyExecution","actionName","templateDefined","actionManager","guidProcess","processStartForm","processActionFormCollection","processActionForm","addActionToQueue","actionsList","additionalXpath","idParentWorkitem","entityXpath","newValueActionsList","removeActionToQueue","controlValue","countSameActions","getPropertiesActionLaucher","actionsLaucher","getTagList","processPropertyValueExecuteConstructor","displayNamee","taglist","hasLocalData","enableTyping","complementData","isDependant","getParentCombo","valueControl","renderCombo","renderComboTemplate","dataPromise","getTemplateName","emptyValue","emptyLabelForCombo","getTemplateParams","unique","showEmpty","showCurrentData","getDummyData","remoteDataLoaded","recalculate","allowActions","msgObj","auxMsg","combo","getSelectedValue","currentValue","parseAdditionalValues","newItem","bCurrentDataFound","emptyFound","dataValue","unshift","comboData","isExtraItem","escapeValue","validateValue","translated","findDataValueById","showLetters","randomId","getDefaultAllowDecimals","numDecimals","setGroupDigits","colorizeOnNegative","dataTypeMinValue","calculateMinValue","dataTypeMaxValue","calculateMaxValue","numericInput","attachRetypeDouble","attachFormatCurrency","removeValidations","formatNumericInput","$input","digitGroupSeparator","minValue","getMinValue","maxValue","getMaxValue","inputValue","inputLength","oldVal","isInvalidFormat","tempValue","messageToShow","isValidRenderMessage","executeFormatCurrencyPlugin","tmpData","clipboardData","totalVal","keydown","keyUnicode","formatTimeout","floatPart","currentPosition","character","regExp","validMessage","getDefaultGroupDigits","performMinValue","newValue","performMaxValue","createTooltip","currentTitle","toolTipZindex","timeOutFocus","ud","datePickerRegional","getDateFormat","indexDateTimeSeparation","lastIndexOf","datePickerFormat","timePickerFormat","uppercaseDatePlaceholder","intHandler","isNow","dateControl","getDateControl","timeControl","getTimeControl","onChangeHandler","updatingTime","getNormalizeDate","getTimeFormat","setValueFromCalendarButtons","hasMaxLines","maxLines","regularExpressionExpression","regularExpressionMessage","regularExpression","isEmptyField","textarea","validationMessages","areThereEditableColumns","areThereTotalizedColumns","initProperties","enabledChecks","exclusiveChanges","originalEnabledChecks","isExclusive","columnRender","singleInstance","totalize","reverse","rowsPerPage","initEditabilityProperties","initAddAndDeleteProperties","keyColumn","skipInitialLoad","allowFilter","groupSummary","groupText","groupCollapsed","groupOrder","formShowMode","addLabel","exportOptionsLabel","alreadySaved","overrideGetRemoteData","cellOverrides","changeOrderData","rowKey","reverseDataRows","removeRemainingColumns","numColumns","remainingColumns","getGridTemplate","applyTemplate","columnInitializers","initialize","spliceRowData","spliceIndex","spliceRowDataVisible","spliceRowDataEditable","rowTemplate","buildCellXpathFilter","dataResp","collectGridChange","isPressed","configureColumnSubmitOnChange","keysToDelete","columnExclusiveChanges","columnEnabledChecks","columnXpath","canColumnBeSent","checkedObject","cellOverride","getCellOverride","getCellValue","setError","changeCellProperties","saveGrid","tmpEditable","changeColumnsEditability","newRows","saveInlineAddedRows","saveRows","getDepthData","updateAffectedCellManually","canBeExported","hasErrors","getDataNewRows","merge","uniqueMessages","isValueValid","messagesLength","gridValidationMessage","columnVisible","setCellOverrides","len_v","newRecords","submitForGridChange","timeOutColumn","getEnabledChecks","cleanNewRecords","setRowAsSaved","hasColorHeader","headerFormat","isRTLOrientation","canBeExport","getExclusiveChangeByRow","idRow","isCurrentGridCell","columnId","getIndexForCurrentCell","allowDinamiclabel","bindingValue","performLabelLineBreak","advancedSearch","submitVersion","searchForms","allowSuggest","allowTyping","allowClear","searchLength","enableLocalStorage","expireCache","h_contexttype","enableQuerySuggestBehavior","regexC","hideStatus","selectedValue","showDesignValidations","getFormattedValue","getDesignModeValue","submitOnChangexpathContextRow","runButtonAction","error_obj","filesCount","vertical","templateUri","useDefaultImage","getImage64","getImageUri","replaceMultiple","allowSendInMail","getValueFilesByData","dataFiles","valueAuxFiles","getDataFilesWithoutScope","valueResult","files","getUploadXpath","indexHour","dateObj","formattedDateTime","showsymbol","currencySymbol","geolocation","allowUpdate","getCurrentPosition","succes_callback","fail_callback","getErrorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","performPrecision","latitude","longitude","toPrecision","allowFlip","flipped","leftData","rightData","processPropertyValue","flip","makeJsonBase","getColumnData","getRightAssociation","formatJson","associationData","leftId","association","isChecked","idRight","checked","removeElement","rightId","removeValue","addElement","leftXpath","rightXpath","leftFactName","rightFactName","maxFileSizeOfProperty","maxSize","maxFileSizeOfUser","BIZAGI_SETTINGS","UploadMaxFileSize","maxfiles","validExtensions","singleExtensions","defExtensions","haveFiles","noFiles","renderUploadItem","replaceFilesHtml","itemTemplate","getTemplateItemName","buildItemUrl","filename","deleteUploadItem","fileItem","buildAddParams","BIZAGI_SESSION_NAME","getUploadXpathContext","setRenderRequired","validateObjectStructure","uploadId","validateArrayStructure","isFormatValid","maxFiles","q_xpath","showMetadata","listControl","fileProperties","getFileExtension","isImage","lengthValues","renderFileLayout","productBuildToAbout","replaceItemHtml","metadataTemplate","metaData","ecm_ecmStatus","ecmStatus","ecm_isVisible","ecm_allowUpdateMetadata","allowUpdateMetadata","ecm_allowDelete","ecm_allowUpdateContent","allowUpdateContent","ecm_allowView","allowView","ecm_allowCheckOut","allowCheckOut","ecm_allowCancelCheckOut","allowCancelCheckOut","ecm_allowEdit","idFileUploads","extension","lockUploadItem","unlockUploadItem","letterOpened","getContextXpath","maximized","likeButton","getFormLinkXpath","executeSubmitOnChange","saveFormLinkData","submitCommitRequest","submitCheckpointRequest","submitDataRequest","dependants","parentCombo","initializingCascadingCombo","bindDependantCombo","isInitialValue","deferredVisible","parentValue","dependantCombo","onChangeFunction","refreshDependantCombo","focusDependant","cleanInput","isEventBinded","unbindDependantCombo","dependant","inputCombo","parentLength","parentArray","configured","listSize","normalizeData","getDataValue","idToRemove","markAsChecked","found","canAddMoreItems","$tagsContainer","toArray","acc","getElementWidth","MORE_OPTION_WIDTH","styles","filterList","$container","stringContainer","stringToSearch","addSelectedElements","findItemById","hasSearchForm","removeLastElement","getListItems","BASE_IMAGE","isUserPreference","initializeWidthAndHeight","isAutoWidth","isAutoHeight","binaryValue","isValidField","compatibilityVersion","getTemplateItem","isVersion2OrSuperior","idUser","forceBase64","base64","buildItemUrlOffline","getFormParams","loadImageFromForm","buildOfflineImageId","getOfflineImage","db","AttachmentType","saveImageOffline","getFileService","resolveBlobFromPath","blobImage","operationType","saveOfflineImage","buildFullItemUrl","fileService","getFileDependencies","fileDependencies","renderUserfieldControl","extendedData","userEditableControl","getEditableControl","renderComplex","loadUserfieldReadOnly","userReadOnlyControl","getReadonlyControl","getReadonlyValue","setEditableValue","getEditableValue","propertyName","jqXHR","textStatus","errorThrown","getRenderElements","getServerResourceURL","userfieldGuid","getRenderValue","showDialog","initialParams","userfieldName","startUserfieldLoading","endUserfieldLoading","getUserfieldControl","isColumn","getControlXpathContext","getUserFieldInstance","replicateUserfieldMethods","timeOutUserField","userfieldInstance","decoratedClass","showColumn","isReadonly","instanceDecoratedClass","applyOverrides","propertyOverrides","invalidElement","overrideDecoratedRenderProperties","renderSummary","setSurrogateKey","setDefaultValue","getCompositeValue","overrideProperties","getSortName","getAnyDecoratedInstance","getSortColumn","timeOutDecorated","originalGetData","getDataForAllCells","findDataById","fetchingData","valueForGrid","tableCell","formattedDate","compositeValue","downloadalldocuments","allowGenerate","preRenderControl","downloadAllDocuments","documents","getControlHtml","renderDocumentsHtml","renderActionsHtml","noActivateButton","allowgenerate","activateButton","getDocumentXpath","renderDocumentItem","joined","buildAllDocumentsUrl","caseId","workitemId","htmlControl","updateControlForPrintMode","validateContainer","replaceActionsHtml","buttonExecuted","$generateLink","isPropagationStopped","documentTemplateGenerate","attachEvents","downloadAllFiles","deleteDocumentTemplate","resolveDeleteDocumentTemplate","resolveDocumentTemplateGenerate","messageText","autoOpenDocuments","showDocumentPreview","returnCssTypeFile","lenght","redrawDocuments","documentContainer","renderAllDocumentDownload","removeDeleteButton","startIndex","restOfWord","finishIndex","downloadAllDocumentsLink","getErrorTemplate","getTemplateDownload","getTemplateReadonly","getDocumentFile","getAllDocumentFiles","setRanageControls","minControl","maxControl","$maxCanvas","$minCanvas","renderRangeControl","defineRangeControl","dateMin","suscribe","observer","notify","dateMax","getRenderProperties","typeRangeControl","renderProperties","moneyMin","moneyMax","numberMin","numberMax","autoSaveEvents","newData","modalViewDidAppear","modalViewDidDisappear","selectedElement","saveBox","messageComplexGateway","errorComplexGateway","nonSupportedMethods","res1","messageError","validateFeatureSupport","handler","saveButton","nextButton","view_container","getViewContainer","bindTouchEvents","touchMoveStart","targetTouches","currentPositionY","showLoading","originalParams","isFormButtonsEnabled","undoRemoveLastSuscriber","notifier","class_name","sticky","contentPanel","VISIBLE_TABS","suscribeMethods","checkPlusVisibility","tabItem","tabReadyDeferred","tabActiveDeferred","headerShow","headerHide","group","subscribeOnTouch","searchForm","resultsGrid","results","criteriaContainer","resultsContainer","searchFormParams","searchFormDeferred","renderSearchForm","createRenderContainer","getSearchContainerData","errorTemplate","getCommonTemplate","slideForm","loadSearchTab","currentSearchForm","containerGridResults","containerSearchCriteria","applyButtons","renderAddForm","addContainer","addFormParams","indicator","saveDataAddForm","currentAddForm","handleSearchFormZindex","refreshParams","dataHasXpath","mapping","setDisplayValueToControl","renderControlSearchForm","addForm","displayBottomButtons","searchFormContainer","searchFormToLoad","otherElements","isDefault","searchFormData","containerButtons","templateBtn","btnSearch","btnSelect","btnAdd","btnCancel","setSearchState","allowNew","virtual","renderEditionAddForm","kendoView","viewContainer","isAddForm","pane","modalViewDisplayed","slideFormParams","slideContainer","configureViewHandlers","goBack","renderSlideForm","formClass","onSave","containerParams","saveButtonLabel","cancelButtonLabel","error_message","actionLauncher","configureQueueVisibility","templateData","wrap","actionsContainer","configureTemplateHandlers","expr","FilterAction","subscribe","multipleSelection","act","executeAction","showConfirmationDialog","slide","showSaveButton","savedData","editMode","rewriteContextType","xpathContextWithKey","xpathContextWithoutKey","IdEntity","startForm","actionsToExecuteContainer","listOfActions","getMappingAction","removeActionSelector","openActionSelector","extraParams","dataAction","actionsToExecuteTitle","htmlTemplate","calculateFilters","polymorphicLauncher","totalActions","lessActions","templateArguments","treeActionsList","getTreeItems","bindHandlers","level","templateTreeItem","$targetData","onActionClicked","pageCache","$target","extendedText","TEXTAREA_LINE_HEIGHT","calculateHeight","resolvedValue","newHeight","retypeDouble","numberScientificNotation","inputDisplay","attachFormatSientificNotation","scientificNotationNumber","scientificNotationNumberDisplay","outerHTML","numericIcon","DEFAULT_PROPERTIES","maxYearsToDisplay","inputControl","controlElements","defaultDateControl","getFormattedDate","minDateControl","maxDateControl","setFullYear","isValidMinMaxValue","mobiscroll","calendar","showScrollArrows","lang","BIZAGI_LANGUAGE","inst","timeS","onSet","valueText","getVal","is24h","onBeforeShow","disableScroll","initializer","fullDateFormated","setHour","getFullFormatedDate","preprocessDateValue","isClearButton","currentTime","fullFormattedDate","setNewDateValue","fullDate","dateFromFormat","formatedFullDate","applyDateFormat","initIndexTime","endIndexTime","validateMinAndMaxValue","showMandatoryMessage","isMinValue","vValue","yesno","nValue","parsedValue","check","requiredElement","configureListHandlers","modalViewTemplate","modalView","configureModalViewHandlers","inputContainer","closeModalViewPromise","modalViewList","setModalViewDisplayValue","_value","$li","multiSelect","base","SEARCH_MIN_LENGTH","temporalElements","openModalView","onUnselectElement","onShowSelectedElements","valuesToShow","$listView","showFloatListView","datasource","$tagElements","modalListHandlers","$listContainer","addNewValuesToInput","tempArray","totalValues","elementTemplate","$ChildToAdd","viewMoreTemplate","$viewMore","$floatListContext","checkbox","addTemporalElement","closeFloatView","elementToRemove","$containerControl","$floatList","widthControl","my","at","of","collision","radio","selectedRadio","radioItem","cascadingCombo","ex","onComboChange","parentComboValue","initialValueSet","configureCombo","processComboData","showDisplayValue","inputSpan","comboValue","collectionnavigator","upload","QUALITY_PICTURE","LIMIT","EXTENSIONSIMG","EXTENSIONSFILE","EXTENSIONSVIDEO","EXTENSIONSAUDIO","allow_upload","checkExtensions","validOptions","video","nonSupportedExtension","uploadOptions","upload_options","checkImageFile","containerRender","itemAddfile","itIsMaxNumberFilesReached","fileAPISupported","buildUploadControl","addInteractions","fileInput","handlerUploadImage","appear","getImageResolutionItems","handlerResolutionUpload","dataFile","extensions","fullPath","checkMaxSizeFile","checkFileTypes","onUploadFileCompleted","checkMaxFiles","attachDeleteHandler","executeFormFailHandler","camera","getPicture","checkMaxSize","getFileDataInfo","fileData","modalResolutionUpload","buttonIndex","onFail","quality","sourceType","Camera","PictureSourceType","PHOTOLIBRARY","saveImage","CAMERA","mediaType","MediaType","PICTURE","destinationType","DestinationType","FILE_URI","correctOrientation","targetWidth","targetHeight","capture","captureVideo","dataVideo","checkMaxSizeVideo","saveVideo","actionSelected","ResolutionType","ORIGINAL","getImageResolution","transformImageSize","editedImageURL","localUrl","base64Image","errorResponse","addParams","queueID","FileUploadOptions","fileKey","mimeType","uploadKey","getImagePath","uploadFile","uploadWrapper","actualFiles","audio","nonSupportedExtensionsArr","getUploadChoices","buildAddFileParams","FormData","itemsUpload","ecm","respString","holder","startWaiting","$button","stopWaiting","$inputFile","adjustUrl","filesLinkElements","closeAccordionSection","elementBase","tmpidElement","elementsEvent","lock","unlock","del","elementReference","panelMetadata","btnSave","addEventsEcm","removeEventsEcm","menuItem","metadata","slideUp","nTimeoutAccordionSection","setMobiscroll","slideDown","elementsToCheck","isInvalid","metadataelement","tmpElement","oldValue","description","idmetadata","actualValue","idMetadata","metadataValues","valueDate","captureAudio","mediaFiles","audioUrl","localURL","saveAudio","Filename","dataAudio","enableVideo","enableAudio","enableImage","validateFileExtensions","nameArchivo","meta","metadataType","$arrayEcmControls","arrayItems","idfileupload","searchList","modalViewTemplates","inputTemplates","configureReadOnly","configureModalView","newElement","showResults","showNoResultsMessage","processRequest","suggestions","appendFoundItem","siblings","$newElement","lastElement","isModalViewContainer","li","defaultElement","req","finalValue","gridView","helpers","GRID_PAGE_SIZE","cellMetadata","getViewTemplate","view","View","stretch","scrollContent","contentElement","addRow","onFilterRow","modalTemplate","columnFilter","buildColumnFilter","modalFilterTemplate","modalFilter","attachModalFilterHandlers","localstorage","buildColumns","showHeaders","cssIndex","tags","applyGridPlugin","fetchData","updateData","configureHeaderAndFooterFixed","attachScrollHandler","scrollLeft","tableLeft","scrollHeader","transformLeft","transform","webkitTransform","OTransform","transformTop","tbody","cols","colgroup","col","offsetWidth","tbodyLeftTable","footer","scrollContainer","buildColumnModel","currentGrid","scrollElement","gridDefaultSortBy","cellReady","rowSelected","rowUnselected","editRow","deleteRow","showFormDetails","pageRequested","sortRequested","triggerGridPluginHandler","getRowIndexByKey","showMore","getHeaderStyles","columnModel","columnLabel","dataReady","dataReadyDeferred","fetchTotalData","onTotalData","showTotals","originalEditable","parentPromise","dataservice","propertiesGridForm","addPage","idAsigned","enableEditSubmitRequest","hideLabel","argumentsGrid","formlink","formLink","actionSaveNewRow","actionCancel","actionCancelRow","_sendRelation","_getData","_InternalRenderLinkForm","editPage","hideSaveButton","resp","noAction","history","current","applyActionUpdateGrid","allRows","acum","columnsTotalizers","bizagi_grid_smartphone","totalizer","hasTotalizer","totalData","isValidGrid","gridControlReady","showDetail","omitKeys","operationState","showTotal","sum","return_value","avg","formatTotalizedResult","bindRenderChange","isBinding","newid","disableProcessButons","argumentsfl","containerForm","executeSubmitShowDetailRequest","originalMethod","selfIntern","inlineAddPromise","inlineAddDeferred","rowLength","errorsMessage","ADVANCED_SEARCH_ID","ADVANCED_ADDITION_ID","SEARCH_DELAY","inputText","_simplySearch","hasMozillaHelpText","additionallabel","autoCompleteSearchResults","elemObject","itemautocomplete","wrapper","elementUl","searchItem","renderSearchItem","formSearchParams","itemId","addToSuggestions","alSuggestions","autocomplete","letter","fileprint","isValidValue","getFullyDecodedURI","linkEncode","encodeURI","linktarget","onCheckListGroupChange","addButton","newItemName","goalActivity","addEditButton","cancelEditButton","additionalElements","notifyLoadItems","resolvedItems","hasChanges","idActivity","itemsResolved","activityWork","activityFormTitle","activityDescription","prepareNewItem","contentHolder","deleteItem","itemPosition","selectItem","repaintControl","itemSelectedName","itemContent","addSelectedHandlers","addItem","guidItem","checkListHtml","refreshValue","layoutImage","success","urlCreator","webkitURL","imageUrl","idcase","idworkitem","contextxpath","layoutLink","proxy","onClickElement","navigateFromRender","reference","referenceType","layoutLabel","layoutText","layoutDateTime","layoutNumber","layoutMoney","layoutUpload","getHTMLFiles","$addImage","$deleteImage","isNative","resolutionUpload","imageAdd","imageDelete","resolutionButtonHandler","useCamera","coordinates","getBoundingClientRect","popoverOptions","CameraPopoverOptions","uploadFileCompleted","showAsyncImage","Image","getContext","drawImage","toDataURL","baseParams","zoom","img","$preview","originalImageWidth","imageEditorParams","mobileImageEditorParams","openImageEditor","imageMaxSize","imageURL","orgiginalDisplayType","_isRefreshForm","getFormLinkXpathContext","hasentryrule","openLink","resolveCheckpointRequest","openLinkRule","paintFormLink","rollbackForm","dataRuleResp","wiew_container","saveRecord","error_code","hideHeadersButtonEdit","hasexitrule","closeExitRule","resolveSubmitCommitRequest","parentXpathContext","cordinate","updateDisplayValue","onSuccess","coords","onError","columnData","dataAssociation","addEventControl","showDefaultContainer","defaultHeader","defaultContainer","contextElement","associateElement","dissociateElement","headers","parentId","itemAdd","itemRemove","basicUserField","defaultUserField","controlName","originalGetControl","applyColumnStyles","cellIcon","isInlineRow","xpathPath","calculateValue","resolveValue","datepicker","getImageXpathContext","columnXpathSplit","nameFile","getECMXpathContext","h_xpath","simpleXpathArray","simpleXpath","clearOtherRows","rowsNumber","rowIndex","applyDocumentTemplatesFormat","documentList","previewTooltip","returnType","generateLink","rangeDate","rangeMoney","rangeNumber","templates","loadOverrides","initAsyncStuff","loadTemplates","loadTemplate","templateDestination","templateService","resolvedTemplate","mobileform","formTemplate","usersForm","section","nestedForm","accordion","accordionItem","mobilegroup","mobiletext","layoutPlaceholder","layoutBoolean","entityTemplate","userfieldWrapper","getSearchRender","getQueryRender","getUser","activityCheckList","columnParams","exclusiveCheck","uploadecm","queryExtendedText","queryText","queryCheck","queryYesNo","queryNumber","queryMoney","queryDate","queryCombo","queryCascadingCombo","querySuggest","queryLabel","queryList","queryMultiSelect","querySearch","queryRadio","queryState","queryCaseState","queryProcess","querySearchUser","factory","enableMSF","resolvedRemplate","getGridTemplates","tmplIcons","enableCustomizations","getJavaScript","beta","execution_device","cachedFactory","getRenderFactory","print","getDataService","executionDeferred","deviceFactory","getFactory","unsubscribe","doc","ownerDocument","sendExecutingPostMessageWebparts","process","refreshing","pathProcess","lastWidth","lastHeight","timeoutResize","resizeInPopUpHTML","configureOpenForm","configureRefresh","configureRouting","configureRenderError","configureResize","configureGlobalHandlers","enableE2EInterface","transformGridControl","processForm","getFailDeferred","jsonErrorMessage","fastEmpty","canvasParent","isOpen","timeoutTrigger","resizeTimeout","forceResize","triggerParams","heightActivitiFormContainer","renderForm","buttonContainer","heightButtonContainer","renderBehavior","postMessageSocket","heightCanvas","iframeCommunicator"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: \r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This widget will implement a custom grid for bizagi rendering module\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Markup: <div></div>\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Styles:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   - Desktop: css/bizagi/desktop/controls/bizagi.grid.css\r\n                                                                                                                                                                                                                                                                                                                                                                                *   - Tablet: css/bizagi/tablet/controls/bizagi.grid.css\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// TODO: Create templates\n\n(function ($) {\n  $.widget(\"ui.bizagi_grid\", {\n    options: {\n      id: \"no-id\",\n      columns: [],\n      sortBy: \"\",\n      sortType: \"asc\",\n      showSummary: false,\n      collapse: false,\n      collapseState: false,\n      data: {},\n      indexedData: {},\n      maxColumns: 0,\n      buttonsPst: false,\n      title: '',\n      tableCssClass: '', // Style for entire table              \n      headerStyles: '',\n      floatingHeader: false,\n      hasExclusiveCheck: false,\n      template: {\n        grid: \"\",\n        waiting: \"\",\n        table: \"\",\n        emptyTable: \"\",\n        column: \"\",\n        specialColumn: \"\",\n        row: \"\",\n        rowButtons: \"\",\n        cell: \"\",\n        specialCell: \"\",\n        pager: \"\",\n        buttons: \"\",\n        dynamicPager: \"\",\n        summary: \"\",\n        summaryCell: \"\" },\n\n      actions: {\n        add: true,\n        edit: true,\n        remove: true,\n        details: true,\n        allowMore: false,\n        enableXlsExport: false,\n        enablePdfExport: false },\n\n      mode: \"execution\" },\n\n    /*\r\n                           *   Constructor\r\n                           */\n    _init: function _init() {\n      var self = this;\n      var options = self.options;\n      var element = self.element;\n\n      // Set object variables\n      self.page = 1;\n      self.changes = {};\n      self.totalRows = 0;\n      self.totalPages = 0;\n      self.data = options.data;\n      self.selectedRow = 0;\n      self.components = {};\n      self.buttons = {};\n      self.asyncCells = {};\n      self.scrollableArea = options.scrollableArea || self;\n\n      // Build column indexes\n      self.columnByIndex = {};\n      self.columnByName = {};\n      self.columnKeyIndex = 0;\n      $.each(options.columns, function (i, column) {\n        // Fix non-present properties\n        column.key = typeof column.key !== \"undefined\" ? column.key : false;\n        column.label = typeof column.label !== \"undefined\" ? column.label : column.name;\n        column.sortType = \"asc\";\n        column.tooltip = typeof column.tooltip !== \"undefined\" ? column.tooltip : \"\";\n\n        // Index the column\n        self.columnByIndex[column.index] = column;\n        self.columnByName[column.name] = column;\n        if (column.key) {\n          self.columnKeyIndex = column.index;\n        }\n      });\n\n      // Set sort options\n      options.sortBy = options.sortBy || self.columnByIndex[0].name;\n      if (self.columnByName[options.sortBy]) {\n        self.columnByName[options.sortBy].sortType = options.sortType;\n      } else {\n        if (self.columnByName[options.sortBy.split(\".\")[0]]) {\n          self.columnByName[options.sortBy.split(\".\")[0]].sortType = options.sortType;\n        }\n      }\n\n      // Add base classes\n      element.addClass(\"ui-bizagi-grid-wrapper\");\n      element.attr(\"data-bizagi-id\", options.id);\n\n      // Calculate\n      self.calculateKeyIndex();\n\n      //collapse state\n      self.collapseState = options.collapseState;\n\n      // Start waiting signal \n      self.startLoading(false);\n    },\n    /*\r\n       *   Method to start loading for ajax data and update the ui\r\n       */\n    startLoading: function startLoading(bUseTimeout) {\n      var self = this;\n      bUseTimeout = typeof bUseTimeout !== \"undefined\" ? bUseTimeout : true;\n\n      if (self.options.mode !== \"execution\" || typeof self.options.sortBy === \"undefined\") {\n        return;\n      }\n\n      // Draw the waiting template when the endLoading delays more than 250ms\n      var waitingFn = function waitingFn() {\n        var element = self.element;\n        var options = self.options;\n\n        // Set null to timeout\n        self.waitingTimeout = null;\n\n        element.append($.fasttmpl(options.template.waiting));\n      };\n\n      if (bUseTimeout) {\n        self.waitingTimeout = setTimeout(waitingFn, 250);\n      } else {\n        waitingFn();\n      }\n    },\n\n    /*\r\n       *   Method to remove the loading message\r\n       */\n    endLoading: function endLoading() {\n      var self = this;\n      var element = self.element;\n\n      // Remove waiting timeout\n      if (self.waitingTimeout) {\n        clearTimeout(self.waitingTimeout);\n        self.waitingTimeout = null;\n      }\n\n      // Remove everything\n      element.empty();\n    },\n\n    /*\r\n       *   This method updates the data and refreshes the grid\r\n       */\n    setData: function setData(data) {\n      var self = this;\n\n      // Set internal data\n      self.data = data;\n      self.calculateKeyIndex();\n\n      // Call refresh\n      self.refresh();\n    },\n    /*\r\n       *   This method retrieves the actual data from the grid\r\n       */\n    getData: function getData() {\n      var self = this;\n\n      // Return internal data\n      return self.data;\n    },\n\n    /*\r\n       *   Calculate key index\r\n       */\n    calculateKeyIndex: function calculateKeyIndex() {\n      var self = this;\n      var columns = self.options.columns;\n      var data = self.data;\n\n      indexedData = {};\n\n      if (data.rows) {\n        $.each(data.rows, function (i, row) {\n          var key;\n          var row;\n          $.each(columns, function (j, column) {\n            if (column.key) key = row[j];\n          });\n          indexedData[key] = row;\n        });\n      }\n      self.indexedData = indexedData;\n    },\n\n    /*\r\n       *   This method retrieves the changes made by the user\r\n       */\n    getChanges: function getChanges() {\n    },\n\n    /*\r\n       *   This method refreshes the grid\r\n       */\n    refresh: function refresh() {\n      var self = this;\n\n      // Cleans components\n      self._cleanComponents();\n      self._cleanButtons();\n\n      // Call the draw method\n      self.components = {};\n      self.draw();\n    },\n\n    /*\r\n       *   This method refreshes only the summary\r\n       */\n    refreshSummary: function refreshSummary(columnIndex) {\n      var self = this;\n      var options = self.options;\n      var summary = self._getComponent(\"summary\");\n\n      // Do nothing if the component is drawing or there is no summary\n      if (self.drawing) return;\n      if (!summary) return;\n\n      // Resolve summary\n      if (options.showSummary) {\n\n        if (columnIndex) {\n          // Refresh an specific summary\n          self.refreshSummaryCell(columnIndex);\n\n        } else {\n          // Clean and re-draw summary\n          summary.empty();\n          summary.append(self.drawSummary());\n\n          // Execute post-render\n          self.postRenderSummary(summary);\n        }\n      }\n    },\n\n    /*\r\n       *   Refresh a single summary cell\r\n       */\n    refreshSummaryCell: function refreshSummaryCell(columnIndex) {\n      var self = this;\n      var options = self.options;\n      var summary = self._getComponent(\"summary\");\n      var getCell = function getCell(summary, columnIndex) {\n        var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\n        return $(cells[columnIndex]);\n      };\n      var cell = getCell(summary, columnIndex);\n\n      // Omit index key\n      var column = self.columnByIndex[columnIndex];\n      if (column.key) return; // Omit key column\n\n      // Clean and Execute render\n      var html = self.drawSummaryCell(column);\n      cell.replaceWith(html);\n\n      // Recalculate cell\n      cell = getCell(summary, columnIndex);\n\n      // Execute post-render\n      self.onCellReady(column, \"summary\", cell, false);\n    },\n\n    /*\r\n       *   This method changes a cell value in the grid\r\n       */\n    changeCellValue: function changeCellValue(key, columnIndex, value) {\n      var self = this;\n      if (self.indexedData[key]) {\n        self.indexedData[key][columnIndex] = value;\n      }\n    },\n\n    deleteCellExclusiveValues: function deleteCellExclusiveValues(columnIndex) {\n      var self = this;\n      if (self.indexedData) {\n        $.each(self.indexedData, function (key) {\n          self.indexedData[key][columnIndex] = false;\n        });\n      }\n    },\n\n    /*\r\n       *   This method draws the full grid associated with the data\r\n       */\n    draw: function draw() {\n      var self = this;\n      var options = self.options;\n      var element = self.element;\n\n      // Start global drawing flag\n      self.drawing = true;\n\n      // Ends waiting signal\n      self.endLoading();\n\n      if (options.orientation === \"rtl\") {\n\n        // Resolve grid template\n        var html = $.fasttmpl(options.template.gridRtl, {\n          label: options.title,\n          buttonsPst: options.buttonsPst,\n          collapse: options.collapse,\n          collapseState: self.collapseState,\n          isDesign: options.mode === \"design\" });\n\n\n      } else {\n        // Resolve grid template\n        var html = $.fasttmpl(options.template.grid, {\n          label: options.title,\n          buttonsPst: options.buttonsPst,\n          collapse: options.collapse,\n          collapseState: self.collapseState,\n          isDesign: options.mode === \"design\" });\n\n      }\n\n      // Call sub-drawers\n      html = self.drawTable(html);\n      self.grid = $(html).appendTo(element);\n\n      // Post render the grid\n      self.postRender(self.grid);\n\n      if (options.mode !== \"design\") {\n        // Attach paginator desktop\n        self.attachPaginator();\n\n        // Attach handlers\n        self.attachHandlers();\n      }\n\n      if (options.mode === \"execution\" && options.floatingHeader) {\n        var $tableContainer = self._getComponent(\"table\");\n        var $table = $(\"table\", $tableContainer);\n        var offset = parseInt($(self.scrollableArea).css(\"padding-top\").replace(/[^\\d.]/g, '')) || 0;\n\n        $table.stickyTableHeaders({\n          fixedOffset: offset > 0 ? offset - 1 : offset,\n          scrollableArea: self.scrollableArea,\n          zIndex: 1000,\n          cacheHeaderHeight: true });\n\n        $tableContainer.bind(\"scroll\", function () {\n          $table.trigger(\"resize.stickyTableHeaders\");\n        });\n      }\n\n      // Toggle visibility depending from row count\n      if (self.data.rows.length === 0) {\n        self._getComponent(\"table\").hide();\n        self._getComponent(\"pager\").hide();\n        self._getButton(\"remove\").hide();\n        self._getButton(\"edit\").hide();\n        self._getComponent(\"dynamicPager\").hide();\n        self._getComponent(\"emptyTable\").show();\n\n      } else {\n        self._getComponent(\"table\").show();\n        self._getButton(\"remove\").show();\n        self._getButton(\"edit\").show();\n        self._getComponent(\"emptyTable\").hide();\n\n        if (options.actions.allowMore) {\n          self._getComponent(\"dynamicPager\").show();\n          self._getComponent(\"pager\").hide();\n        } else {\n          self._getComponent(\"pager\").show();\n          self._getComponent(\"dynamicPager\").hide();\n        }\n\n        if (options.actions.edit) {\n          self._getButton(\"edit\").show();\n        }\n\n        if (options.actions.enableXlsExport || options.actions.enablePdfExport) {\n          self._getButton('show-grid-export-options').show();\n        } else {\n          self._getButton('show-grid-export-options').css('display', 'none');\n        }\n\n      }\n\n      // End global drawing flag\n      self.drawing = false;\n    },\n\n    attachPaginator: function attachPaginator() {\n    },\n\n    /*\r\n       *   This method draws the table associated with the data\r\n       */\n    drawTable: function drawTable(html) {\n      var self = this;\n      var options = self.options;\n\n      // Resolve table template\n      var table = $.fasttmpl(options.template.table, {\n        showSummary: options.showSummary,\n        tableCssClass: options.tableCssClass,\n        orientation: options.orientation });\n\n      var emptyTable = $.fasttmpl(options.template.emptyTable);\n\n      // Resolve header\n      table = self._replaceElement(table, \"columns\", self.drawHeader());\n\n      // Resolve body\n      table = self._replaceElement(table, \"rows\", self.drawBody());\n\n      // Resolve summary\n      if (options.showSummary) {\n        table = self._replaceElement(table, \"summary\", self.drawSummary());\n      }\n\n      // Resolve pager\n      html = self._replaceElement(html, \"pager\", self.drawPager());\n\n      // Resolve buttons\n      html = self._replaceElement(html, \"buttons\", self.drawButtons());\n\n      //Resolve export options menu\n      html = self._replaceElement(html, \"gridExportOptions\", self.drawGridExportOptions());\n\n      // Resolve row buttons\n      html = self._replaceElement(html, \"rowButtons\", self.drawRowButtons());\n\n      // Resolve dynamic Pager\n      html = self._replaceElement(html, \"dynamicPager\", self.drawDynamicPager());\n\n      // Perform grid replaces\n      html = self._replaceElement(html, \"table\", table);\n      html = self._replaceElement(html, \"emptyTable\", emptyTable);\n      return html;\n    },\n    /*\r\n       * Find if a column has a exact match for sort it\r\n       */\n    isExactMatch: function isExactMatch() {\n      var self = this;\n      var columns = self.options.columns;\n      var sortBy = self.options.sortBy;\n      var i = 0,length = columns.length;\n      for (; i < length;) {\n        if (sortBy == columns[i++].name) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /*\r\n       *   This method draws the grid header\r\n       */\n    drawHeader: function drawHeader() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve columns\n      var columns = \"\";\n\n      self.exactMatch = self.isExactMatch();\n\n      $.each(options.columns, function (i, column) {\n        if (self.options.maxColumns > 0) {\n          if (i <= self.options.maxColumns) {\n            // Draw normal column\n            columns += self.drawColumn(column);\n          }\n        } else {\n          // Draw normal column\n          columns += self.drawColumn(column);\n        }\n      });\n\n      if (self.options.maxColumns > 0 && self._canShowButtons()) {\n        // Draw special column\n        columns += self.drawSpecialColumn();\n      }\n\n      return columns;\n    },\n\n    /*\r\n       *   This method draws a column header\r\n       */\n    drawColumn: function drawColumn(column) {\n      var self = this;\n      var options = self.options;\n\n      var columnProperties = column.bizAgiProperties || {};\n      var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\n      var headerStyles = options.headerStyles ? options.headerStyles.header : \"\";\n      headerStyles += (headerStyles !== \"\" ? \"; text-align:\" : \"text-align:\") + (columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\");\n      var columnAlign = columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\";\n      var isSortable = options.isSortable && columnProperties.isSortable && typeof columnProperties.xpath !== \"undefined\";\n      var initialSortBy = options.sortBy.split(\".\")[0];\n      var sortActive = false;\n      if (isSortable && (column.name === options.sortBy || column.name === initialSortBy && !self.exactMatch)) sortActive = true;\n      var controlType = bizagi.util.getColumnType(columnProperties.type);\n      var isHorizontalRadio = controlType === \"radio\" && columnProperties.horizontal;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.column, $.extend({}, column, {\n        isKey: column.key,\n        sortActive: sortActive,\n        sortType: options.sortOrder,\n        isSortable: isSortable,\n        tooltip: column.tooltip || \"\",\n        columnCssClass: cssClass,\n        headerLabelStyles: options.headerStyles ? options.headerStyles.label : \"\",\n        headerStyles: headerStyles,\n        controlType: controlType,\n        isHorizontalRadio: isHorizontalRadio,\n        columnAlign: columnAlign,\n        flexAlign: bizagi.util.mapAlignClassName(columnAlign) }));\n\n    },\n    /*\r\n       *   This method draws a special column header that will be drawn when the grid can't show more columns\r\n       */\n    drawSpecialColumn: function drawSpecialColumn() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.specialColumn);\n    },\n\n    drawDynamicPager: function drawDynamicPager() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.dynamicPager);\n    },\n\n    /*\r\n       *   This method draws the table body\r\n       */\n    drawBody: function drawBody() {\n      var self = this;\n\n      // Resolve rows\n      var rows = \"\";\n      $.each(self.data.rows, function (i, row) {\n        rows += self.drawRow(row);\n      });\n\n      return rows;\n    },\n\n    /*\r\n       *   This method draws a grid row\r\n       */\n    drawRow: function drawRow(rowData, isNewRow) {\n      var self = this;\n      var options = self.options;\n      var key = rowData[self.columnKeyIndex];\n      var newRow = isNewRow || false;\n      var rnd = Math.floor(Math.random() * 10000);\n      var row = $.fasttmpl(options.template.row, {\n        key: rnd,\n        isNewRow: isNewRow,\n        businessKey: key });\n\n\n      // Resolve cells\n      var cells = \"\";\n      $.each(rowData, function (i, cell) {\n        if (self.options.maxColumns > 0) {\n          if (i < self.options.maxColumns + 1) {\n            // Draw normal cell\n            cells += self.drawCell(i, key, cell, newRow);\n          }\n        } else {\n          // Draw normal cell\n          cells += self.drawCell(i, key, cell, newRow);\n        }\n      });\n\n      if (self.options.maxColumns > 0 && self._canShowRowButtons()) {\n        // Draw special column\n        cells += self.drawSpecialCell(self.options.maxColumns + 1);\n      }\n\n      // Resolve cells template\n      row = self._replaceElement(row, \"cells\", cells);\n      return row;\n    },\n\n    /*\r\n       *   This method draws the cells for summary\r\n       */\n    drawSummary: function drawSummary() {\n      var self = this;\n      var options = self.options;\n      var row = $.fasttmpl(options.template.summary);\n      var cells = \"\";\n\n      // Resolve summary cells\n      $.each(options.columns, function (i, column) {\n        if (self.options.maxColumns > 0) {\n          if (i <= self.options.maxColumns) {\n            // Draw summary column\n            cells += self.drawSummaryCell(column);\n          }\n        } else {\n          // Draw summary column\n          cells += self.drawSummaryCell(column);\n        }\n      });\n\n      // Resolve cells template\n      row = self._replaceElement(row, \"summary-cells\", cells);\n      return row;\n    },\n\n    /*\r\n       *   This method draws a single summary cell\r\n       */\n    drawSummaryCell: function drawSummaryCell(column) {\n      var self = this;\n      var options = self.options;\n\n      var columnProperties = column.bizAgiProperties || {};\n      var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.summaryCell, {\n        hidden: column.hidden || false,\n        summarizeBy: column.summarizeBy,\n        cellAlign: cellAlign });\n\n\n      var result = self.onDrawCell(column, \"summary\", self.calculateSummary(column), false);\n      result = result != undefined && typeof result != \"number\" ? result.replace(\"summaryValue\", self.calculateSummary(column)) : result;\n\n      if (!result) {\n        result = \"\";\n      }\n\n      var async = _typeof(result) === \"object\" && result.done;\n      if (async) {\n        if (result.state() === \"resolved\") {\n          // Fetch resolved result\n          cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\n        } else {\n          // Wait for result\n          cell = self._replaceElement(cell, \"cellContent\", \"\");\n          self.asyncCells[key + \"-\" + columnIndex] = result;\n        }\n\n      } else {\n        // Resolve cell content\n        cell = self._replaceElement(cell, \"cellContent\", result);\n      }\n\n      return cell;\n    },\n\n    /*\r\n       *   This method draws the grid cell\r\n       */\n    drawCell: function drawCell(columnIndex, key, value, isNewRow) {\n      var self = this;\n      var options = self.options;\n      isNewRow = isNewRow || false;\n      var messageValidation = \"\";\n\n      // Ensure that data is mapped into a column\n      if (!self.columnByIndex[columnIndex]) {\n        return \"\";\n      }\n\n      // Get message\n      if (columnIndex > 0) {\n        messageValidation = self.columnByIndex[columnIndex].bizAgiProperties && self.columnByIndex[columnIndex].bizAgiProperties.messageValidation;\n      }\n\n      var columnProperties = self.columnByIndex[columnIndex].bizAgiProperties || {};\n      var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\n      var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\n      var controlType = bizagi.util.getColumnType(columnProperties.type);\n      var isHorizontalRadio = controlType === \"radio\" && columnProperties.horizontal;\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.cell, {\n        isKey: self.columnByIndex[columnIndex].key,\n        hidden: options.columns[columnIndex].hidden || false,\n        isDesign: options.mode === \"design\",\n        messageValidation: messageValidation,\n        columnCssClass: cssClass,\n        id: options.columns[columnIndex].bizAgiProperties ? options.columns[columnIndex].bizAgiProperties.id : undefined,\n        cellAlign: cellAlign,\n        flexAlign: bizagi.util.mapAlignClassName(cellAlign),\n        controlType: controlType,\n        isHorizontalRadio: isHorizontalRadio });\n\n\n      var result = self.onDrawCell(self.columnByIndex[columnIndex], key, value, isNewRow);\n      if (!result) {\n        result = \"\";\n      }\n      var async = _typeof(result) === \"object\" && result.done;\n      if (async) {\n        if (result.state() === \"resolved\") {\n          // Fetch resolved result\n          cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\n        } else {\n          // Wait for result\n          cell = self._replaceElement(cell, \"cellContent\", \"\");\n          self.asyncCells[key + \"-\" + columnIndex] = result;\n        }\n\n      } else {\n        // Resolve cell content\n        cell = self._replaceElement(cell, \"cellContent\", result);\n      }\n\n      self.columnByIndex[columnIndex]['cell'] = $(cell);\n      return cell;\n    },\n    /*\r\n       *   Returns the resolved result from a promise when the promise has been executed already\r\n       */\n    resolveResult: function resolveResult(promise) {\n      var result;\n\n      promise.done(function (data) {\n        result = data;\n      });\n\n      return result;\n    },\n    /*\r\n       *   This method draws a special cell that will be drawn when the grid can't show more columns\r\n       */\n    drawSpecialCell: function drawSpecialCell(columnIndex) {\n      var self = this;\n      var options = self.options;\n\n      /* // Ensure that data is mapped into a column\r\n                                  if (!self.columnByIndex[columnIndex]) {\r\n                                      return \"\";\r\n                                  } */\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.specialCell);\n\n      return cell;\n    },\n    /*\r\n       *   This method draws a group header\r\n       */\n    drawGroupHeader: function drawGroupHeader() {\n      // TODO: Implement for PC version\n    },\n    /*\r\n       *   This method draws a footer\r\n       */\n    drawFooter: function drawFooter() {\n      // TODO: Implement for PC version\n    },\n    /*\r\n       *   This method draws a grid pager\r\n       */\n    drawPager: function drawPager() {\n      var self = this;\n      var options = self.options;\n\n      // Calculate pages\n      var pages = [];\n      for (var i = 1; i <= self.data.total; i++) {\n        pages.push({\n          number: i,\n          active: i == self.data.page });\n\n      }\n\n      // Resolve pager template\n      return $.fasttmpl(options.template.pager, {\n        page: self.data.page,\n        pages: pages,\n        records: self.data.records });\n\n    },\n    /*\r\n       *   This method draws a grid button actions\r\n       */\n    drawButtons: function drawButtons() {\n      var self = this;\n      var options = self.options;\n      var tooltips = options.tooltips || {};\n\n      var parameters = $.extend(options.actions, tooltips);\n\n      if (self._canShowButtons()) {\n        // Resolve buttons template\n        if (options.orientation === \"rtl\") {\n          return $.fasttmpl(options.template.buttonsRtl, parameters);\n        } else {\n          return $.fasttmpl(options.template.buttons, parameters);\n        }\n      } else {\n        return \"\";\n      }\n    },\n\n    /*\r\n       * This method draws the export options menu\r\n       */\n    drawGridExportOptions: function drawGridExportOptions() {\n      var self = this;\n      var options = self.options;\n      var actions = options.actions;\n      var tooltips = options.tooltips || {};\n\n      var parameters = $.extend({\n        orientation: options.orientation,\n        enableXlsExport: actions.enableXlsExport,\n        enablePdfExport: actions.enablePdfExport },\n      tooltips);\n\n      return $.fasttmpl(options.template.exportOptions, parameters);\n    },\n\n    /*\r\n       *   This method draws a row buttons,\r\n       *   those buttons will be invisible, and will be activated when the user selects a row\r\n       */\n    drawRowButtons: function drawRowButtons() {\n      var self = this;\n      var options = self.options;\n\n      if (self._canShowRowButtons()) {\n        // Resolve row buttons template\n        if (options.orientation === \"rtl\") {\n          return $.fasttmpl(options.template.rowButtons.rtl, options.actions);\n        } else {\n          return $.fasttmpl(options.template.rowButtons, options.actions);\n        }\n      } else {\n        return \"\";\n      }\n    },\n    /*\r\n       *   Execute post-renders in all the grid\r\n       */\n    postRender: function postRender() {\n      var self = this;\n      var options = self.options;\n\n      // Get grid rows\n      var rows = self._getComponent(\"cells\");\n      if (rows) {\n        $.each(rows, function (i, row) {\n          row = $(row);\n          self.postRenderRow(row);\n        });\n      }\n\n      // Get summary row\n      if (options.showSummary) {\n        var summary = self._getComponent(\"summary\");\n        self.postRenderSummary(summary);\n      }\n\n      self._triggerHandler(\"gridControlReady\");\n    },\n\n    /*\r\n       *   Execute post-renders in each cell after the element has been created\r\n       */\n    postRenderRow: function postRenderRow(row) {\n      var self = this;\n      var key = row.attr(\"data-business-key\");\n      var isNewRow = row.attr(\"data-new-row\");\n      var cells = row.is(\"[data-bizagi-component=cells]\") ? row.children() : row.find(\"[data-bizagi-component=cells]\").children();\n\n      $.each(cells, function (i, cell) {\n        var column = self.columnByIndex[i];\n        if (typeof column == \"undefined\" || column.key) return; // Omit key column\n\n        // Check if the cell has an async result\n        var asyncResult = self.asyncCells[key + \"-\" + column.index];\n        if (asyncResult) {\n          $.when(asyncResult).\n          done(function (html) {\n            // Append async result\n            cell = $(cell);\n            cell.append(html);\n            self.onCellReady(column, key, cell, isNewRow);\n          });\n        } else {\n          self.onCellReady(column, key, $(cell), isNewRow);\n        }\n      });\n    },\n\n    /*\r\n       *   Execute post-renders in each summary cell after the element has been created\r\n       */\n    postRenderSummary: function postRenderSummary(summary) {\n      var self = this;\n      var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\n\n      $.each(cells, function (i, cell) {\n        var column = self.columnByIndex[i];\n        if (column.key) return; // Omit key column\n\n        // Check if the cell has an async result\n        var asyncResult = self.asyncCells[key + \"-\" + column.index];\n        if (asyncResult) {\n          $.when(asyncResult).\n          done(function (html) {\n            // Append async result\n            cell = $(cell);\n            cell.append(html);\n            self.onCellReady(column, \"summary\", cell, false);\n          });\n        } else {\n          self.onCellReady(column, \"summary\", $(cell), false);\n        }\n      });\n    },\n\n    /*\r\n       *   Method to attach any handler to the grid\r\n       */\n    attachHandlers: function attachHandlers() {},\n\n    //TODO IMPLEMENTANDO\n    selectDynamicPager: function selectDynamicPager() {\n      this.onDynamicPager();\n    },\n\n    /*\r\n       *   Changes the current page in the grid\r\n       */\n    changePage: function changePage(page) {\n      var self = this;\n      var currentPage = Number(self.data.page);\n      var total = self.data.total;\n      var newPage = page;\n\n      // Process previous page\n      if (page === \"previous\") {\n        if (currentPage > 1) {\n          newPage = currentPage - 1;\n        } else {\n          return;\n        }\n      }\n\n      // Process next page\n      if (page === \"next\") {\n        if (currentPage < total) {\n          newPage = currentPage + 1;\n        } else {\n          return;\n        }\n      }\n\n      //refresh components cells and rows\n      self._cleanComponents();\n\n      // Update internal options\n      self.page = Number(newPage);\n\n      // Execute handler\n      self.onPageRequested();\n    },\n\n    /**\r\n        * Get current page of data\r\n        * @returns {*}\r\n        */\n    getCurrentPage: function getCurrentPage() {\n      var data = this.data || {};\n\n      return data.page || 1;\n    },\n\n    /*\r\n       *  Verify cells before sumitonchange\r\n       */\n    isValid: function isValid() {\n      // Trigger handler\n      return this._triggerHandler(\"isValid\");\n    },\n\n    /*\r\n       *   Sort the grid by a column\r\n       */\n    sortBy: function sortBy(columnIndex, sortType) {\n      var self = this;\n      var options = self.options;\n      var column = self.columnByIndex[columnIndex];\n\n      if (typeof options.sortBy === \"undefined\") {\n        return true;\n      }\n\n      // Set new sort type reversed to current, if the sort column has not changed\n      if (typeof column.name === \"undefined\") column.name = column.label;\n      if (column.name == options.sortBy) {\n        sortType = sortType || (options.sortOrder == \"asc\" ? \"desc\" : \"asc\");\n      } else {\n        if (column.name == options.sortBy.split(\".\")[0]) {\n          sortType = sortType || (options.sortType == \"asc\" ? \"desc\" : \"asc\");\n        } else {\n          sortType = sortType || options.sortType;\n        }\n      }\n\n      // Update internal options\n      if (options.sortBy.split(\".\").length > 1) {\n        if (options.sortBy.split(\".\")[0] != column.name) {\n          options.sortBy = column.name;\n        } else {\n          options.sortBy = column.name;\n        }\n      } else {\n        options.sortBy = column.name;\n      }\n\n      if (typeof column.bizAgiProperties.sortAttribute !== \"undefined\" && column.bizAgiProperties.type.indexOf(\"column\") !== -1) {\n        options.sortBy = column.name + \".\" + column.bizAgiProperties.sortAttribute;\n      }\n\n      options.sortColumn = column;\n      options.sortType = sortType;\n      options.sortOrder = sortType;\n\n      //refresh components cells and rows\n      self._cleanComponents();\n\n      // Execute handler\n      self.onSortRequested();\n    },\n\n    /*\r\n       *   Selects a row in the grid\r\n       */\n    selectRow: function selectRow(key, businessKey) {\n      var self = this;\n\n      if (self.selectedRow == key) {\n        // Invoke un-select handler\n        self.onRowUnselected();\n\n        // Update internal options\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      } else {\n        if (self.selectedRow != 0) {\n          // Invoke un-select handler\n          self.onRowUnselected();\n        }\n\n        // Update internal options\n        self.selectedRow = key;\n        self.selectedBusinessKey = businessKey;\n\n        // Invoke select handler\n        self.onRowSelected();\n      }\n    },\n\n    /*\r\n       *   Unselects a row in the grid\r\n       */\n    unselectRow: function unselectRow() {\n      var self = this;\n\n      if (self.selectedRow != 0) {\n        // Invoke un-select handler\n        self.onRowUnselected();\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      }\n    },\n\n    /*\r\n       *   Calculates the summary for a column given the data\r\n       */\n    calculateSummary: function calculateSummary(column) {\n      var self = this;\n      var operation = column.summarizeBy;\n\n      //Consider the default values in the operations\n      $.each(self.data.rows, function (i, value) {\n        if (typeof self.data.rows[i][column.index] !== \"undefined\" && self.data.rows[i][column.index] == null && column.bizAgiProperties.defaultvalue != null) {\n          self.data.rows[i][column.index] = column.bizAgiProperties.defaultvalue;\n        }\n      });\n      var columnValues = $.map(self.data.rows, function (row, i) {return row[column.index];});\n      var result;\n\n      // Don't calculate anything if there are no rows\n      if (columnValues.length == 0) return 0;\n\n      // Resolve operations\n      if (operation === \"sum\") {\n        result = 0;\n        $.each(columnValues, function (i, value) {if (value != null) result += Number(value);});\n\n      } else if (operation === \"min\") {\n        result = columnValues[0] || 0;\n        $.each(columnValues, function (i, value) {if (typeof value === \"number\" && value != null && value < result) result = Number(value);});\n        if (result === Math.max()) result = null;\n\n      } else if (operation === \"max\") {\n        result = columnValues[0] || 0;\n        $.each(columnValues, function (i, value) {if (typeof value === \"number\" && value != null && value > result) result = Number(value);});\n        if (result === Math.min()) result = null;\n\n      } else if (operation === \"avg\") {\n        result = 0;\n        $.each(columnValues, function (i, value) {if (value != null) result += Number(value);});\n        result = result / columnValues.length;\n\n      } else if (operation === \"count\") {\n        result = 0;\n        columnValues = self.data.rows;\n\n        for (i = 0; i < columnValues.length; i++) {\n          var columnValue = columnValues[i][column.index];\n\n          if (columnValue instanceof Array && columnValue.length > 0) {\n            result += 1;\n          } else\n          if (!(columnValue instanceof Array) && columnValue !== null && columnValue !== \"\") {\n            result += 1;\n          }\n        }\n      }\n      return result;\n    },\n\n    /*\r\n       *   Process an action in order to do something with the grid\r\n       */\n    processAction: function processAction(action, params) {\n      var self = this;\n\n      var key = params && params.key ? params.key : self.selectedBusinessKey;\n      if (action === \"edit\") {\n        self.onEditRow(key);\n      }\n      if (action === \"remove\") {\n        self.onDeleteRow(key);\n      }\n      if (action === \"more\") {\n        self.onShowMore(key);\n      }\n      if (action === \"details\") {\n        self.onShowDetails(key);\n      }\n      if (action === \"add\") {\n        self.onAddRow();\n      }\n\n      if (action === \"show-grid-export-options\") {\n        self.onShowExportGridOptions();\n      }\n    },\n    /*\r\n       *   Executes the page requested handler\r\n       */\n    onPageRequested: function onPageRequested() {\n      var self = this;\n\n      // Start loading signal \n      self.startLoading();\n\n      // Trigger handler\n      return self._triggerHandler(\"pageRequested\", self._buildRefreshParameters());\n    },\n    /*\r\n       *   Executes the sort requested handler\r\n       */\n    onSortRequested: function onSortRequested() {\n      var self = this;\n\n      // Start loading signal \n      self.startLoading();\n\n      // Trigger handler\n      return self._triggerHandler(\"sortRequested\", self._buildRefreshParameters());\n    },\n    /*\r\n       *   Executes the row selected handler\r\n       */\n    onRowSelected: function onRowSelected() {\n      var self = this;\n\n      return self._triggerHandler(\"rowSelected\", { key: self.selectedBusinessKey });\n    },\n    /*\r\n       *   Executes the row un-selected handler\r\n       */\n    onRowUnselected: function onRowUnselected() {\n      var self = this;\n      return self._triggerHandler(\"rowUnselected\", { key: self.selectedBusinessKey });\n    },\n\n    /*\r\n       * Executes collapse grid\r\n       */\n    onCollapseGrid: function onCollapseGrid() {\n      var self = this;\n      return self._triggerHandler(\"performCollapseGrid\");\n    },\n\n    //TODO:llamar\n    onDynamicPager: function onDynamicPager() {\n      var self = this;\n      return self._triggerHandler(\"moreRows\", { key: self.selectedBusinessKey });\n    },\n\n    /*\r\n       *   Executes the on draw cell handler\r\n       */\n    onDrawCell: function onDrawCell(column, key, value, isNewRow) {\n      var self = this;\n      return self._triggerHandler(\"drawCell\", {\n        column: column,\n        key: key,\n        value: value,\n        isNewRow: isNewRow });\n\n    },\n    /*\r\n       *   Executes on cell ready handler\r\n       */\n    onCellReady: function onCellReady(column, key, cell, isNewRow) {\n      var self = this;\n      return self._triggerHandler(\"cellReady\", {\n        column: column,\n        key: key,\n        cell: cell,\n        isNewRow: isNewRow });\n\n    },\n\n    /*\r\n       *   Executes the on draw control handler\r\n       */\n    onDrawControl: function onDrawControl() {\n      //TODO: Implement this\n    },\n    /*\r\n       *   Executes the on draw group header handler\r\n       */\n    onDrawGroupHeader: function onDrawGroupHeader() {\n      //TODO: Implement this\n    },\n    /*\r\n       *   Executes the on add row handler\r\n       */\n    onAddRow: function onAddRow() {\n      var self = this;\n      return self._triggerHandler(\"addRow\");\n    },\n    /*\r\n       *   Executes the on edit row handler\r\n       */\n    onEditRow: function onEditRow(key) {\n      var self = this;\n      return self._triggerHandler(\"editRow\", { key: key });\n    },\n    /*\r\n       *   Executes the on delete row handler\r\n       */\n    onDeleteRow: function onDeleteRow(key) {\n      var self = this;\n      return self._triggerHandler(\"deleteRow\", { key: key });\n    },\n    /*\r\n       *   Executes the on show more handler\r\n       */\n    onShowMore: function onShowMore(key) {\n      var self = this;\n      return self._triggerHandler(\"showMore\", { key: key });\n    },\n    /*\r\n       *   Executes the on show details handler\r\n       */\n    onShowDetails: function onShowDetails(key) {\n      var self = this;\n      return self._triggerHandler(\"showFormDetails\", { key: key });\n    },\n    /*\r\n       * Executes the on show export grid options \r\n       */\n    onShowExportGridOptions: function onShowExportGridOptions() {\n      var self = this;\n      return self._triggerHandler(\"showGridExportOptions\");\n    },\n\n    /*\r\n       *   Replaces a matched element in the container for the specified \"replace\" element\r\n       */\n    _replaceElement: function _replaceElement(html, element, replace) {\n      return html.replaceFirstWithoutPatterns(\"{{element \" + element + \"}}\", replace);\n    },\n\n    /*\r\n       *   Return the event handler parameters object\r\n       */\n    _buildRefreshParameters: function _buildRefreshParameters() {\n      var self = this;\n      var options = self.options;\n      var sortColumn = options.sortColumn != undefined ? options.sortColumn.index : 1;\n      return {\n        page: self.page,\n        sortBy: options.sortBy,\n        sortType: options.sortOrder,\n        sortColumnIndex: sortColumn };\n\n    },\n    /*\r\n       *   Calls directly to handler callback\r\n       */\n    _triggerHandler: function _triggerHandler(type, data) {\n      var callback = this.options[type];\n      if (!callback) {\n        return null;\n      }\n      return callback.call(this.element[0], data);\n    },\n    /*\r\n       *   Gets the component\r\n       */\n    _getComponent: function _getComponent(component) {\n      var self = this;\n      var element = self.element;\n      if (!self.components[component]) {\n        var foundComponent = $(\"[data-bizagi-component=\" + component + \"]\", element);\n        if (foundComponent != null && foundComponent.length > 0) {\n          self.components[component] = foundComponent;\n        }\n      }\n      return self.components[component];\n    },\n    /*\r\n       *   Gets the specific Button\r\n       */\n    _getButton: function _getButton(button) {\n      var self = this;\n      var element = self.element;\n      if (!self.buttons[button])\n      self.buttons[button] = $(\"[data-action=\" + button + \"]\", element);\n      return self.buttons[button];\n    },\n    /*\r\n       * Cleans the components \r\n       */\n    _cleanComponents: function _cleanComponents() {\n      var self = this;\n      self.components = {};\n    },\n    /*\r\n       * Cleans the buttons \r\n       */\n    _cleanButtons: function _cleanButtons() {\n      var self = this;\n      self.buttons = {};\n    },\n    /*\r\n       *  Template method to check if buttons component must be rendered\r\n       */\n    _canShowButtons: function _canShowButtons() {\n      return true;\n    },\n    /*\r\n       *  Template method to check if row buttons must be displayed when the row is selected\r\n       */\n    _canShowRowButtons: function _canShowRowButtons() {\n      return true;\n    } });\n\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Utils\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide misc helpers to all modules\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Create or Define BizAgi namespace\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.util = typeof bizagi.util !== \"undefined\" ? bizagi.util : {};\nbizagi.context = typeof bizagi.context !== \"undefined\" ? bizagi.context : {};\nbizagi.util.smartphone = typeof bizagi.util.smartphone !== \"undefined\" ? bizagi.util.smartphone : {};\nbizagi.util.tablet = typeof bizagi.util.tablet !== \"undefined\" ? bizagi.util.tablet : {};\n\nvar DEVICES = {};\n\n// Device Type\nDEVICES[DEVICES['desktop'] = 0] = 'desktop';\nDEVICES[DEVICES['smartphone'] = 1] = 'smartphone';\nDEVICES[DEVICES['tablet'] = 2] = 'tablet';\n\n// Add definition\nbizagi.deviceEnum = DEVICES;\n\n/*\r\n                              *   Define mini-plugin to acceess iframe's boundaries\r\n                              */\n(function ($) {\n  $.fn.callInside = function (fx, args) {\n    if ($(this)[0].tagName.toLowerCase() != \"iframe\")\n    return null;\n    // Don't execute the code when the content window is not ready yet    \n    if ($(this)[0].contentWindow == null)\n    return null;\n    // Check if the iframe is cross domain\n    try {\n      // Evals the content\n      $(this)[0].contentWindow.args = args;\n    } catch (e) {\n      // If an exception is thrown here this is a cross domain access\n      return null;\n    }\n\n    if ($.browser.msie) {\n      return $(this)[0].contentWindow.execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    } else if ($.browser.webkit || $.browser.mozilla) {\n      return $(this)[0].contentWindow.eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    }\n  };\n})(jQuery);\n(function ($) {\n  $.fn.callInsidePopup = function (fx, args) {\n    // This is window here\n    var self = this;\n    $(document).ready(function () {\n      // Check if the iframe is cross domain\n      try {\n        // Evals the content\n        $(self)[0].args = args;\n      } catch (e) {\n        // If an exception is thrown here this is a cross domain access\n        return null;\n      }\n\n      if ($.browser.msie) {\n        return $(self)[0].execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      } else if ($.browser.webkit || $.browser.mozilla) {\n        return $(self)[0].eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      }\n\n    });\n  };\n})(jQuery);\n(function ($) {\n\n  // add support for CSS functions for \"setProperty\" in ie8\n  var isStyleFuncSupported = !!CSSStyleDeclaration.prototype.getPropertyValue;\n  if (!isStyleFuncSupported) {\n    CSSStyleDeclaration.prototype.getPropertyValue = function (a) {\n      return this.getAttribute(a);\n    };\n    CSSStyleDeclaration.prototype.setProperty = function (styleName, value, priority) {\n      this.setAttribute(styleName, value);\n      var priority = typeof priority != 'undefined' ? priority : '';\n      if (priority != '') {\n        // Add priority manually\n        var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*' + RegExp.escape(value) + '(\\\\s*;)?', 'gmi');\n        this.cssText = this.cssText.replace(rule, styleName + ': ' + value + ' !' + priority + ';');\n      }\n    };\n\n    CSSStyleDeclaration.prototype.removeProperty = function (a) {\n      return this.removeAttribute(a);\n    };\n\n    CSSStyleDeclaration.prototype.getPropertyPriority = function (styleName) {\n      var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*[^\\\\s]*\\\\s*!important(\\\\s*;)?', 'gmi');\n      return rule.test(this.cssText) ? 'important' : '';\n    };\n  }\n\n  // Escape regex chars with \\\n  RegExp.escape = function (text) {\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n  };\n\n  // The style function\n  jQuery.fn.style = function (styleName, value, priority) {\n    // DOM node\n    var node = this.get(0);\n    // Ensure we have a DOM node \n    if (typeof node == 'undefined') {\n      return;\n    }\n    // CSSStyleDeclaration\n    var style = this.get(0).style;\n    // Getter/Setter\n    if (typeof styleName != 'undefined') {\n      if (typeof value != 'undefined') {\n        // Set style property\n        var priority = typeof priority != 'undefined' ? priority : '';\n        // Hack to IE8\n        if (style.setProperty) {\n          style.setProperty(styleName, value, priority);\n        } else {\n          style.setAttribute(styleName, value, priority);\n        }\n      } else {\n        // Get style property\n\n        return style.getPropertyValue(styleName);\n      }\n    } else {\n      // Get CSSStyleDeclaration\n      return style;\n    }\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.nl2br = function (value) {\n    return value.replace(/(\\r\\n|\\n\\r|\\r|\\n|\\\\r\\\\n|\\\\n\\\\r|\\\\r|\\\\n)/g, \"<br>\");\n  };\n})(jQuery);\n\n\n\n(function ($) {\n  jQuery.br2nl = function (value) {\n    return value.replace(/\\r\\n|\\r|\\n/g, \"\\r\");\n  };\n})(jQuery);\n\n/**\r\n             *   Can be compare control between their intance value and existing value\r\n             */\n//TODO: DEPL- Please move this out of here, this is rendering logic, it must exists as a function for the render, and every erender could override its implementation\n(function ($) {\n  jQuery.controlValueIsChanged = function (control) {\n    var self = control;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (control.properties.type == \"grid\" && control.ready().state() == \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\", \"queryState\"].includes(properties.type) || /^cascadingcombo$/i.test(properties.type)) {\n      if (value && value.length !== undefined)\n      value = value[0];\n      if (compareValue && compareValue.length !== undefined)\n      compareValue = compareValue[0];\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      result = compareValue == value ? false : true;\n    } else if (properties.type == \"boolean\" || properties.type == \"queryBoolean\" || properties.type == \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (properties.type == \"searchNumber\") {\n\n      result = value ? true : false;\n    } else if (properties.type === \"date\") {\n      result = new Date(compareValue).getTime() !== new Date(value).getTime();\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.getMaxZindex = function () {\n    var elm = $(\"*\");\n    var maxZindex = 1;\n\n    $.each(elm, function (key, value) {\n      var zindex = parseInt($(value).css(\"z-index\"));\n      if (zindex > maxZindex) {\n        maxZindex = zindex + 1;\n      }\n\n    });\n\n    return maxZindex;\n  };\n})(jQuery);\n\n/**\r\n             * Set the same max height to multiples divs\r\n             */\n(function ($) {\n  jQuery.equalizeHeights = function (selector) {\n    var heights = new Array();\n    // Loop to get all element heights\n    $(selector).each(function () {\n\n      // Need to let sizes be whatever they want so no overflow on resize\n      $(this).css('min-height', '0');\n      $(this).css('max-height', 'none');\n      $(this).css('height', 'auto');\n\n      // Then add size (no units) to array\n      heights.push($(this).outerHeight());\n    });\n\n    // Find max height of all elements\n    var max = Math.max.apply(Math, heights);\n\n    // Set all heights to max height\n    $(selector).each(function () {\n      $(this).css('height', max + 'px');\n    });\n  };\n})(jQuery);\n\n//TODO: DEPL - Move this to rendering\nbizagi.util.autoSave = function () {\n  var deferredSave = $.Deferred();\n  //if attr data-event exist trigger event auto-save or resolve the deferred\n  if (bizagi.util.detectDevice() !== \"desktop\") {\n    if ($(document).data('auto-save')) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  } else {\n    if ($._data($(document)[0], 'events')[\"save-form\"] && $._data($(document)[0], 'events')[\"save-form\"].length > 0) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  }\n  return deferredSave.promise();\n};\n//--  **Users Deleted** the name will fill on first reques in UsersPictures\nbizagi.util.anonymizedUserInformation = {\n  id: \"00000000-0000-0000-0000-000000000000\",\n  name: \"\",\n  username: \"\",\n  email: \"\",\n  domain: \"\",\n  picture: \"\",\n  isAnonymized: true };\n\n\n//-- **Resources for date picker**\nbizagi.util.datepickerResource = [];\n// taken  from https://github.com/jquery/jquery-ui/tree/master/ui/i18n\nbizagi.util.datepickerResource[\"en\"] = { closeText: \"Done\", prevText: \"Prev\", nextText: \"Next\", currentText: \"Today\", monthNames: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"], dayNames: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"], dayNamesShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"], dayNamesMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"], weekHeader: \"Wk\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"es\"] = { closeText: \"Cerrar\", prevText: \"&#x3C;Ant\", nextText: \"Sig&#x3E;\", currentText: \"Hoy\", monthNames: [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"], monthNamesShort: [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"sep\", \"oct\", \"nov\", \"dic\"], dayNames: [\"domingo\", \"lunes\", \"martes\", \"mircoles\", \"jueves\", \"viernes\", \"sbado\"], dayNamesShort: [\"dom\", \"lun\", \"mar\", \"mi\", \"jue\", \"vie\", \"sb\"], dayNamesMin: [\"D\", \"L\", \"M\", \"X\", \"J\", \"V\", \"S\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ar\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], monthNamesShort: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"dd/mm/yy\", firstDay: 0, isRTL: true, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"cs\"] = { closeText: \"Zavt\", prevText: \"&#x3C;Dve\", nextText: \"Pozdji&#x3E;\", currentText: \"Nyn\", monthNames: [\"leden\", \"nor\", \"bezen\", \"duben\", \"kvten\", \"erven\", \"ervenec\", \"srpen\", \"z\", \"jen\", \"listopad\", \"prosinec\"], monthNamesShort: [\"led\", \"no\", \"be\", \"dub\", \"kv\", \"er\", \"vc\", \"srp\", \"z\", \"j\", \"lis\", \"pro\"], dayNames: [\"nedle\", \"pondl\", \"ter\", \"steda\", \"tvrtek\", \"ptek\", \"sobota\"], dayNamesShort: [\"ne\", \"po\", \"t\", \"st\", \"t\", \"p\", \"so\"], dayNamesMin: [\"ne\", \"po\", \"t\", \"st\", \"t\", \"p\", \"so\"], weekHeader: \"Td\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"de\"] = { closeText: \"Schlieen\", prevText: \"&#x3C;Zurck\", nextText: \"Vor&#x3E;\", currentText: \"Heute\", monthNames: [\"Januar\", \"Februar\", \"Mrz\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mr\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"], dayNames: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"], dayNamesShort: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], dayNamesMin: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], weekHeader: \"KW\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"fr\"] = { closeText: \"Fermer\", prevText: \"Prcdent\", nextText: \"Suivant\", currentText: \"Aujourd'hui\", monthNames: [\"janvier\", \"fvrier\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"aot\", \"septembre\", \"octobre\", \"novembre\", \"dcembre\"], monthNamesShort: [\"janv.\", \"fvr.\", \"mars\", \"avr.\", \"mai\", \"juin\", \"juil.\", \"aot\", \"sept.\", \"oct.\", \"nov.\", \"dc.\"], dayNames: [\"dimanche\", \"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\"], dayNamesShort: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"], dayNamesMin: [\"D\", \"L\", \"M\", \"M\", \"J\", \"V\", \"S\"], weekHeader: \"Sem.\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"it\"] = { closeText: \"Chiudi\", prevText: \"&#x3C;Prec\", nextText: \"Succ&#x3E;\", currentText: \"Oggi\", monthNames: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"], monthNamesShort: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"], dayNames: [\"Domenica\", \"Luned\", \"Marted\", \"Mercoled\", \"Gioved\", \"Venerd\", \"Sabato\"], dayNamesShort: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"], dayNamesMin: [\"Do\", \"Lu\", \"Ma\", \"Me\", \"Gi\", \"Ve\", \"Sa\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ja\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], monthNamesShort: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"yy/mm/dd\", firstDay: 0, isRTL: false, showMonthAfterYear: true, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"nl\"] = { closeText: \"Sluiten\", prevText: \"\", nextText: \"\", currentText: \"Vandaag\", monthNames: [\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"], monthNamesShort: [\"jan\", \"feb\", \"mrt\", \"apr\", \"mei\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"], dayNames: [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"], dayNamesShort: [\"zon\", \"maa\", \"din\", \"woe\", \"don\", \"vri\", \"zat\"], dayNamesMin: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"], weekHeader: \"Wk\", dateFormat: \"dd-mm-yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"pt\"] = { closeText: \"Fechar\", prevText: \"Anterior\", nextText: \"Seguinte\", currentText: \"Hoje\", monthNames: [\"Janeiro\", \"Fevereiro\", \"Maro\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"], monthNamesShort: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"], dayNames: [\"Domingo\", \"Segunda-feira\", \"Tera-feira\", \"Quarta-feira\", \"Quinta-feira\", \"Sexta-feira\", \"Sbado\"], dayNamesShort: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sb\"], dayNamesMin: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sb\"], weekHeader: \"Sem\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ru\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], monthNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"zh\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], monthNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"yy-mm-dd\", firstDay: 1, isRTL: false, showMonthAfterYear: true, yearSuffix: \"\" };\n\n//--  **Communication between Workportal and LiveProcesses**\n\n// Create new Live Process\nbizagi.util.liveProcessesEvents = bizagi.util.liveProcessesEvents || {};\nbizagi.util.liveProcessesEvents.newLiveProcess = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.newLiveProcess.initEvent('new-live-process', true, true);\n\n// Event for changing route inside LiveProcesses\nbizagi.util.liveProcessesEvents.routeEvents = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.routeEvents.initEvent('parent-route-events', true, true);\nbizagi.util.liveProcessesEvents.routeEvents.route = '/';\n\n// Verify save condition\nbizagi.util.liveProcessesEvents.saveEvent = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.saveEvent.initEvent('save-live', true, true);\nbizagi.util.liveProcessesEvents.saveEvent.lastWidget = '';\nbizagi.util.liveProcessesEvents.saveEvent.nextWidget = '';\n\nbizagi.util.liveSave = function (widgetName) {\n  bizagi.util.liveProcessesEvents.saveEvent.nextWidget = widgetName;\n  var deferredLiveSave = $.Deferred();\n  var indeX = 0;\n  // next try/catch avoids crossdomain messages in the middle of \"Next button\" execution\n  try {\n    indeX = $(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess');\n  }\n  catch (e) {\n    indeX = -1;\n  }\n  if (\n  (widgetName !== bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY || widgetName === bizagi.util.liveProcessesEvents.saveEvent.lastWidget) &&\n  $(document).find('iframe').length > 0 && indeX > 0)\n  {\n    bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise = deferredLiveSave;\n    document.dispatchEvent(bizagi.util.liveProcessesEvents.saveEvent);\n  } else {\n    deferredLiveSave.resolve();\n  }\n  $.when(deferredLiveSave).done(function () {bizagi.util.liveProcessesEvents.saveEvent.lastWidget = widgetName;});\n  return deferredLiveSave.promise();\n};\n\n/**\r\n    * CryptoJS MD5\r\n    * @param {} message\r\n    * @returns {}\r\n    */\nbizagi.util.md5 = function (message) {\n  // Code here will be linted with JSHint.\n  /* jshint ignore:start */\n  var CryptoJS = CryptoJS || function (s, p) {var m = {},l = m.lib = {},n = function n() {},r = l.Base = { extend: function extend(b) {n.prototype = this;var h = new n();b && h.mixIn(b);h.hasOwnProperty(\"init\") || (h.init = function () {h.$super.init.apply(this, arguments);});h.init.prototype = h;h.$super = this;return h;}, create: function create() {var b = this.extend();b.init.apply(b, arguments);return b;}, init: function init() {}, mixIn: function mixIn(b) {for (var h in b) {b.hasOwnProperty(h) && (this[h] = b[h]);}b.hasOwnProperty(\"toString\") && (this.toString = b.toString);}, clone: function clone() {return this.init.prototype.extend(this);} },q = l.WordArray = r.extend({ init: function init(b, h) {b = this.words = b || [];this.sigBytes = h != p ? h : 4 * b.length;}, toString: function toString(b) {return (b || t).stringify(this);}, concat: function concat(b) {var h = this.words,a = b.words,j = this.sigBytes;b = b.sigBytes;this.clamp();if (j % 4) for (var g = 0; g < b; g++) {h[j + g >>> 2] |= (a[g >>> 2] >>> 24 - 8 * (g % 4) & 255) << 24 - 8 * ((j + g) % 4);} else if (65535 < a.length) for (g = 0; g < b; g += 4) {h[j + g >>> 2] = a[g >>> 2];} else h.push.apply(h, a);this.sigBytes += b;return this;}, clamp: function clamp() {var b = this.words,h = this.sigBytes;b[h >>> 2] &= 4294967295 << 32 - 8 * (h % 4);b.length = s.ceil(h / 4);}, clone: function clone() {var b = r.clone.call(this);b.words = this.words.slice(0);return b;}, random: function random(b) {for (var h = [], a = 0; a < b; a += 4) {h.push(4294967296 * s.random() | 0);}return new q.init(h, b);} }),v = m.enc = {},t = v.Hex = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {var k = a[j >>> 2] >>> 24 - 8 * (j % 4) & 255;g.push((k >>> 4).toString(16));g.push((k & 15).toString(16));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j += 2) {g[j >>> 3] |= parseInt(b.substr(j, 2), 16) << 24 - 4 * (j % 8);}return new q.init(g, a / 2);} },a = v.Latin1 = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {g.push(String.fromCharCode(a[j >>> 2] >>> 24 - 8 * (j % 4) & 255));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j++) {g[j >>> 2] |= (b.charCodeAt(j) & 255) << 24 - 8 * (j % 4);}return new q.init(g, a);} },u = v.Utf8 = { stringify: function stringify(b) {try {return decodeURIComponent(escape(a.stringify(b)));} catch (g) {throw Error(\"Malformed UTF-8 data\");}}, parse: function parse(b) {return a.parse(unescape(encodeURIComponent(b)));} },g = l.BufferedBlockAlgorithm = r.extend({ reset: function reset() {this._data = new q.init();this._nDataBytes = 0;}, _append: function _append(b) {\"string\" == typeof b && (b = u.parse(b));this._data.concat(b);this._nDataBytes += b.sigBytes;}, _process: function _process(b) {var a = this._data,g = a.words,j = a.sigBytes,k = this.blockSize,m = j / (4 * k),m = b ? s.ceil(m) : s.max((m | 0) - this._minBufferSize, 0);b = m * k;j = s.min(4 * b, j);if (b) {for (var l = 0; l < b; l += k) {this._doProcessBlock(g, l);}l = g.splice(0, b);a.sigBytes -= j;}return new q.init(l, j);}, clone: function clone() {var b = r.clone.call(this);b._data = this._data.clone();return b;}, _minBufferSize: 0 });l.Hasher = g.extend({ cfg: r.extend(), init: function init(b) {this.cfg = this.cfg.extend(b);this.reset();}, reset: function reset() {g.reset.call(this);this._doReset();}, update: function update(b) {this._append(b);this._process();return this;}, finalize: function finalize(b) {b && this._append(b);return this._doFinalize();}, blockSize: 16, _createHelper: function _createHelper(b) {return function (a, g) {return new b.init(g).finalize(a);};}, _createHmacHelper: function _createHmacHelper(b) {return function (a, g) {return new k.HMAC.init(b, g).finalize(a);};} });var k = m.algo = {};return m;}(Math);(function (s) {function p(a, k, b, h, l, j, m) {a = a + (k & b | ~k & h) + l + m;return (a << j | a >>> 32 - j) + k;}function m(a, k, b, h, l, j, m) {a = a + (k & h | b & ~h) + l + m;return (a << j | a >>> 32 - j) + k;}function l(a, k, b, h, l, j, m) {a = a + (k ^ b ^ h) + l + m;return (a << j | a >>> 32 - j) + k;}function n(a, k, b, h, l, j, m) {a = a + (b ^ (k | ~h)) + l + m;return (a << j | a >>> 32 - j) + k;}for (var r = CryptoJS, q = r.lib, v = q.WordArray, t = q.Hasher, q = r.algo, a = [], u = 0; 64 > u; u++) {a[u] = 4294967296 * s.abs(s.sin(u + 1)) | 0;}q = q.MD5 = t.extend({ _doReset: function _doReset() {this._hash = new v.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function _doProcessBlock(g, k) {for (var b = 0; 16 > b; b++) {var h = k + b,w = g[h];g[h] = (w << 8 | w >>> 24) & 16711935 | (w << 24 | w >>> 8) & 4278255360;}var b = this._hash.words,h = g[k + 0],w = g[k + 1],j = g[k + 2],q = g[k + 3],r = g[k + 4],s = g[k + 5],t = g[k + 6],u = g[k + 7],v = g[k + 8],x = g[k + 9],y = g[k + 10],z = g[k + 11],A = g[k + 12],B = g[k + 13],C = g[k + 14],D = g[k + 15],c = b[0],d = b[1],e = b[2],f = b[3],c = p(c, d, e, f, h, 7, a[0]),f = p(f, c, d, e, w, 12, a[1]),e = p(e, f, c, d, j, 17, a[2]),d = p(d, e, f, c, q, 22, a[3]),c = p(c, d, e, f, r, 7, a[4]),f = p(f, c, d, e, s, 12, a[5]),e = p(e, f, c, d, t, 17, a[6]),d = p(d, e, f, c, u, 22, a[7]),c = p(c, d, e, f, v, 7, a[8]),f = p(f, c, d, e, x, 12, a[9]),e = p(e, f, c, d, y, 17, a[10]),d = p(d, e, f, c, z, 22, a[11]),c = p(c, d, e, f, A, 7, a[12]),f = p(f, c, d, e, B, 12, a[13]),e = p(e, f, c, d, C, 17, a[14]),d = p(d, e, f, c, D, 22, a[15]),c = m(c, d, e, f, w, 5, a[16]),f = m(f, c, d, e, t, 9, a[17]),e = m(e, f, c, d, z, 14, a[18]),d = m(d, e, f, c, h, 20, a[19]),c = m(c, d, e, f, s, 5, a[20]),f = m(f, c, d, e, y, 9, a[21]),e = m(e, f, c, d, D, 14, a[22]),d = m(d, e, f, c, r, 20, a[23]),c = m(c, d, e, f, x, 5, a[24]),f = m(f, c, d, e, C, 9, a[25]),e = m(e, f, c, d, q, 14, a[26]),d = m(d, e, f, c, v, 20, a[27]),c = m(c, d, e, f, B, 5, a[28]),f = m(f, c, d, e, j, 9, a[29]),e = m(e, f, c, d, u, 14, a[30]),d = m(d, e, f, c, A, 20, a[31]),c = l(c, d, e, f, s, 4, a[32]),f = l(f, c, d, e, v, 11, a[33]),e = l(e, f, c, d, z, 16, a[34]),d = l(d, e, f, c, C, 23, a[35]),c = l(c, d, e, f, w, 4, a[36]),f = l(f, c, d, e, r, 11, a[37]),e = l(e, f, c, d, u, 16, a[38]),d = l(d, e, f, c, y, 23, a[39]),c = l(c, d, e, f, B, 4, a[40]),f = l(f, c, d, e, h, 11, a[41]),e = l(e, f, c, d, q, 16, a[42]),d = l(d, e, f, c, t, 23, a[43]),c = l(c, d, e, f, x, 4, a[44]),f = l(f, c, d, e, A, 11, a[45]),e = l(e, f, c, d, D, 16, a[46]),d = l(d, e, f, c, j, 23, a[47]),c = n(c, d, e, f, h, 6, a[48]),f = n(f, c, d, e, u, 10, a[49]),e = n(e, f, c, d, C, 15, a[50]),d = n(d, e, f, c, s, 21, a[51]),c = n(c, d, e, f, A, 6, a[52]),f = n(f, c, d, e, q, 10, a[53]),e = n(e, f, c, d, y, 15, a[54]),d = n(d, e, f, c, w, 21, a[55]),c = n(c, d, e, f, v, 6, a[56]),f = n(f, c, d, e, D, 10, a[57]),e = n(e, f, c, d, t, 15, a[58]),d = n(d, e, f, c, B, 21, a[59]),c = n(c, d, e, f, r, 6, a[60]),f = n(f, c, d, e, z, 10, a[61]),e = n(e, f, c, d, j, 15, a[62]),d = n(d, e, f, c, x, 21, a[63]);b[0] = b[0] + c | 0;b[1] = b[1] + d | 0;b[2] = b[2] + e | 0;b[3] = b[3] + f | 0;}, _doFinalize: function _doFinalize() {var a = this._data,k = a.words,b = 8 * this._nDataBytes,h = 8 * a.sigBytes;k[h >>> 5] |= 128 << 24 - h % 32;var l = s.floor(b / 4294967296);k[(h + 64 >>> 9 << 4) + 15] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;k[(h + 64 >>> 9 << 4) + 14] = (b << 8 | b >>> 24) & 16711935 | (b << 24 | b >>> 8) & 4278255360;a.sigBytes = 4 * (k.length + 1);this._process();a = this._hash;k = a.words;for (b = 0; 4 > b; b++) {h = k[b], k[b] = (h << 8 | h >>> 24) & 16711935 | (h << 24 | h >>> 8) & 4278255360;}return a;}, clone: function clone() {var a = t.clone.call(this);a._hash = this._hash.clone();return a;} });r.MD5 = t._createHelper(q);r.HmacMD5 = t._createHmacHelper(q);})(Math);\n  /* jshint ignore:end */\n  return CryptoJS.MD5(message).toString();\n};\n\n/**\r\n    * Replace all coincidences in a text, based on key value object\r\n    *  @argument mapDataToReplace = {\"keyTofind\":\"valueToReplace\",...}\r\n    */\nbizagi.util.multiReplace = function (text, mapDataToReplace) {\n  mapDataToReplace = mapDataToReplace || {};\n\n  for (var key in mapDataToReplace) {\n    var reg = new RegExp(key, \"g\");\n    text = text.replace(reg, mapDataToReplace[key]);\n  }\n  return text;\n};\n/*\r\n    *   Creates a replace all method that is left from the String Class\r\n    */\nbizagi.util.replaceAll = function (text, pcFrom, pcTo) {\n  // Call the method located in bizagi.loader\n  return bizagi.replaceAll(text, pcFrom, pcTo);\n};\n/*\r\n    *replaces global expressions regulars\r\n    */\nbizagi.util.replaceAllGlobalRegExp = function (text, pcFrom, pcTo) {\n  var temp = text;\n\n  var re = new RegExp(pcFrom, \"g\");\n  temp = temp.replace(re, pcTo);\n\n  return temp.toString();\n};\n// Also append it to the string class\nString.prototype.replaceAll = function (pcFrom, pcTo) {\n  return bizagi.util.replaceAll(this, pcFrom, pcTo);\n};\n// Capitalize a string\nString.prototype.capitalize = function () {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n};\n// Add this (Create an starts with function) to the string prototype\nString.prototype.startsWith = function (str) {\n  return this.slice(0, str.length) == str;\n};\n\n/**\r\n    * get Initials of a string/name and if the name is empty return the anonymized icon\r\n    */\nString.prototype.getInitials = function () {\n  var initials = \"\";\n  if (this.length === 0) {\n    initials = '<svg  class=\"bz-icon bz-icon-24 bz-icon-svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-user-deactivated\"></use></svg>';\n  } else {\n    try {\n      var removeRepeatSpaces = this.replace(/  +/g, ' ');\n      var words = removeRepeatSpaces.split(' ');\n      for (var i = 0; i < words.length; i += 1) {\n        initials += words[i][0] || '';\n        if (initials.length == 2) {\n          break;\n        }\n      }\n    } catch (e) {}\n\n    initials = initials.toUpperCase();\n  }\n  return initials;\n};\n\nMath.sign = Math.sign || function (x) {\n  x = +x; // convert to a number\n  if (x === 0 || isNaN(x)) {\n    return x;\n  }\n  return x > 0 ? 1 : -1;\n};\n\n// Add a clone to the object prototype\nbizagi.clone = function (obj) {\n  if (obj == undefined) return undefined;\n  if (obj == null) return null;\n  return JSON.parse(JSON.encode(obj));\n};\n// Measures the pixel size of a string\nbizagi.measureString = function (string, fontSize) {\n  var test = $(\"<span/>\").appendTo(\"body\");\n  test.text(string);\n  if (fontSize)\n  test.css(\"font-size\", fontSize);\n  var width = test.width();\n  test.detach();\n  return width;\n};\n/*\r\n    *   Creates a trim method\r\n    */\nbizagi.util.trim = function (text) {\n  if (typeof text === \"undefined\" || text == null)\n  return text;\n  // Call the method located in bizagi.loader\n  return text.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n};\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n/*\r\n    * Method to detect IE7 visitors\r\n    */\nbizagi.util.isIE7 = function () {\n  return bizagi.util.isIE() && document.documentMode == 7;\n};\n/*\r\n    * Method to detect IE8 visitors\r\n    */\nbizagi.util.isIE8 = function () {\n  return bizagi.util.isIE() && document.documentMode == 8;\n};\n/*\r\n    * Method to detect IE9 visitors\r\n    */\nbizagi.util.isIE9 = function () {\n  return bizagi.util.isIE() && document.documentMode == 9;\n};\n/*\r\n    * Method to detect IE10 visitors\r\n    */\nbizagi.util.isIE10 = function () {\n  return bizagi.util.isIE() && document.documentMode == 10;\n};\n/*\r\n    * Method to detect IE11 visitors\r\n    */\nbizagi.util.isIE11 = function () {\n  return !!navigator.userAgent.match(/Trident\\/7.0/) && !navigator.userAgent.match(/MSIE/i);\n};\n\n/*\r\n    * Method to detect IE11 or lower\r\n    */\nbizagi.util.isIE11OrLower = function () {\n  return bizagi.util.isIE11() || bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE10 or lower\r\n    */\nbizagi.util.isIE10OrLower = function () {\n  return bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE12 or Edge(Windows 10) visitors\r\n    */\nbizagi.util.isEdge = function () {\n  if (/Edge\\/*./i.test(navigator.userAgent)) {\n    return true;\n  }\n  return false;\n};\n/*\r\n    * Method to detect IE visitors\r\n    */\nbizagi.util.isIE = function () {\n  return navigator.appName.indexOf(\"Internet Explorer\") > 0 || !!navigator.userAgent.match(/Trident/);\n};\n/*\r\n    *   Object Values wrapper\r\n    */\nbizagi.util.objectValues = function (array) {\n  if (bizagi.util.isIE())\n  return Object.keys(array).map(function (itm) {return array[itm];});else\n\n  return Object.values(array);\n};\n/*\r\n    * Get the specific version of IE \r\n    */\nbizagi.util.getIEVersion = function () {\n  var sAgent = window.navigator.userAgent;\n  var indexMSIE = sAgent.indexOf(\"MSIE\");\n  var version = 0;\n  if (indexMSIE > 0) {\n    version = parseInt(sAgent.substring(indexMSIE + 5, sAgent.indexOf(\".\", indexMSIE)));\n  } else\n  if (!!navigator.userAgent.match(/Trident/) || window.navigator.userAgent.indexOf(\"Edge\") > -1) {// Condition Check IF IE 11 and or MS Edge\n    version = 11;\n  }\n  return version;\n};\n/*\r\n    * Method to detect is chrome browser\r\n    */\nbizagi.util.isChrome = function () {\n  return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n/*\r\n    * Method to detect is Firefox browser\r\n    */\nbizagi.util.isFirefox = function (minVersion) {\n  function getVersion() {\n    var ua = navigator.userAgent,tem,M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return { name: 'IE', version: tem[1] || '' };\n    }\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\bOPR|Edge\\/(\\d+)/);\n      if (tem != null) {return { name: 'Opera', version: tem[1] };}\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {M.splice(1, 1, tem[1]);}\n    return {\n      name: M[0],\n      version: M[1] };\n\n  }\n  return /Firefox/.test(navigator.userAgent) && (minVersion === undefined || minVersion <= getVersion().version);\n};\n/*\r\n    * return the browser name this function can be modified if needs more browsers\r\n    */\nbizagi.util.getBrowser = function () {\n  var bw = \"undetected\";\n  if (bizagi.util.isChrome()) {\n    bw = \"chrome\";\n  } else if (bizagi.util.isFirefox()) {\n    bw = \"firefox\";\n  } else if (bizagi.util.isEdge()) {\n    bw = \"edge\";\n  } else if (bizagi.util.isIE11()) {\n    bw = \"ie11\";\n\n  } else if (bizagi.util.isIE10()) {\n    bw = \"ie10\";\n  }\n  return bw;\n};\n\n/**\r\n    * Empty Navigator Info\r\n    */\nbizagi.util.emptyNavigatorInfo = function () {\n  if (bizagi.navigator && bizagi.navigator.info) {\n    bizagi.navigator.info = {};\n  }\n};\n\n/**\r\n    * Auto call setting the browser class for css specific selectors, etc..\r\n    */\n$(document).ready(function () {\n  $(\"html\").\n  addClass(\"browser-\" + bizagi.util.getBrowser()).\n  addClass(\"device-\" + bizagi.detectDevice());\n  if (bizagi.language) {\n    var language = bizagi.language.split(\"-\");\n    if (language && language.length > 0) {\n      $(\"html\").addClass(\"language-\" + language[0]);\n    }\n  }\n});\n\n\n\n\n/**\r\n     * Method to detect iOS version X and apply styles to that device \r\n     */\nbizagi.util.setIphoneXOverrides = function () {\n  if (bizagi.util.isNativePluginSupported() && typeof bizagiapp.isIphoneX !== 'undefined') {\n    bizagiapp.isIphoneX(function (value) {\n      var flagIphoneX = value;\n      var styleIphoneX = \".bz-menu-home .bz-menu-carousel .bz-menu-carousel-seat{padding:0 16px 16px}.bz-home-header .km-navbar{padding:35px 16px 5px}#menuHome .bz-home-header .km-navbar{padding:30px 3px 0}#menuHome .km-navbar .km-rightitem{font-size:19px;right:.4em;top:32px}#menuHome .km-navbar .km-leftitem{font-size:24px;left:0;top:25px}#taskFeed .km-navbar .km-rightitem{font-size:19px;top:25px;right:0}#taskFeed .km-navbar .km-leftitem{font-size:24px;top:20px;left:0}#homePortal #menuHome .km-view-title .km-buttongroup{margin-left:0;top:2px}.bz-render-header,.search-container{padding-top:25px}#activity-search,.search-container .bz-wp-mu-button-search{padding-top:40px}#content-newCase-drawer{padding-top:25px}#menuHome{background:#EBEDF1!important}.km-flat .km-content{background-color:#fff} .k-loading-mask{top:0!important}\";\n\n      if (flagIphoneX === 'true') {\n        $('head').append('<style type=\"text/css\" id=\"iphoneXStyle\"></style>');\n        $('#iphoneXStyle').text(styleIphoneX);\n\n      } else if (bizagi.util.isiOSDevice()) {\n        $('head').append('<style type=\"text/css\" id=\"iphoneStyle\"></style>');\n        var paddingStyle = \"#homePortal .bz-home-header > div{padding-top:.8em}\";\n        $('#iphoneStyle').text(paddingStyle);\n      }\n    });\n  }\n};\n\nbizagi.util.isString = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object String]\";\n};\n\nbizagi.util.isObject = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Object]\";\n};\n\nbizagi.util.isArray = function (value) {\n  return Array.isArray(value);\n};\nbizagi.util.isNull = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Null]\";\n};\nbizagi.util.isBoolean = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Boolean]\";\n};\n\n/*\r\n    *   Method to detect IE version\r\n    */\nbizagi.util.getInternetExplorerVersion = function () {\n  if (!bizagi.util.isIE())\n  return -1;\n  return Number(document.documentMode);\n};\n/*  \r\n    *   Detect a device based on the width\r\n    */\nbizagi.util.detectDevice = function () {\n  // Call the method located in bizagi.loader\n  return bizagi.detectDevice();\n};\n\n// Check if a string is number\nbizagi.util.isNumeric = function (n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\n// Check if a string is GUID\nbizagi.util.isGUID = function (n) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n);\n};\n// Throw not implemented exception\nbizagi.util.mustImplement = function (notImplementedMethod) {\n  try {\n    console.log(\"Not implemented exception: \" + notImplementedMethod);\n  } catch (exe) {\n  } //IE console variable not exist\n  //throw \"You must implement \" + notImplementedMethod;\n};\n// Encodes the xpath \nbizagi.util.encodeXpath = function (xpath) {\n  if (bizagi.util.isEmpty(xpath) || typeof xpath.replaceAll === \"undefined\")\n  return \"\";\n  return xpath.replaceAll(\".\", \"_\").replaceAll(\"=\", \"_\").replaceAll(\"[\", \"_\").replaceAll(\"]\", \"_\");\n};\n// Parses a value to return the correct boolean value\nbizagi.util.parseBoolean = function (value) {\n  if (value === undefined) {\n    return null;\n  }\n\n  if (value === null) {\n    return null;\n  }\n\n  if (value === '') {\n    return null;\n  }\n\n  // Parse true values\n  if (value === true || value === 1 || value.toString() === \"true\" || value === \"1\") {\n    return true;\n  }\n  if (value.toString().toLowerCase() === \"true\") {\n    return true;\n  }\n\n  // Parse false values\n  if (value !== null && value === false || value === 0 || value.toString() === \"false\" || value === \"0\") {\n    return false;\n  }\n  if (value.toString().toLowerCase() === \"false\") {\n    return false;\n  }\n\n  return null;\n};\n/*\r\n    *   Checks if a given string is empty\r\n    */\nbizagi.util.isEmpty = function (value) {\n  if (value === 0)\n  return false;\n\n  if (value === undefined || value === null || value === \"\") {\n    return true;\n  }\n\n  if (typeof value === \"Array\") {\n    return value.length == 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n    return value.length === 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    if ($.isEmptyObject(value)) {\n      return true;\n    } else {\n      return bizagi.util.isEmptyCombo(value);\n    }\n  }\n\n  // Side effect - I can't delete the last item in the multiselect and searchlist\n  /* if (value == \"{\\\"value\\\":[]}\"){\r\n       return true;\r\n   }  */\n\n  return false;\n};\n\nbizagi.util.isEmptyCombo = function (object) {\n  if (Object.prototype.toString.apply(object) === \"[object Object]\") {\n    var property,id = false,\n    value = false,\n    other = false;\n    for (property in object) {\n      if (object.hasOwnProperty(property)) {\n        if (property === \"id\") {\n          id = true;\n        } else {\n          if (property === \"value\") {\n            value = true;\n          } else {\n            other = true;\n          }\n        }\n        if (other) {\n          return false;\n        }\n      }\n    }\n    if (id) {\n      if (object[\"id\"] === \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n  return undefined;\n};\n\n/**\r\n    * Decode data from encodeURI charset\r\n    */\nbizagi.util.decodeURI = function (value) {\n  value = value || \"\";\n  var finishDecoded = false;\n  var decodedValue = value;\n  var infinityControl;\n\n  // Try to decode data value\n  while (!finishDecoded) {\n    try {\n      infinityControl = decodeURI(decodedValue);\n      if (bizagi.util.hasNonVisibleChars(infinityControl)) {\n        decodedValue = value;\n        break;\n      }\n      if (infinityControl == decodedValue) {\n        finishDecoded = true;\n      } else {\n        decodedValue = infinityControl;\n      }\n    } catch (e) {\n      finishDecoded = true;\n    }\n  }\n\n  return decodedValue;\n};\n\nbizagi.util.hasNonVisibleChars = function (value) {\n  value = value || \"\";\n  var length = value.length;\n  var i = 0,\n  result = false,\n  ch;\n  for (; i < length;) {\n    ch = value.charCodeAt(i++);\n    if (ch < 32 || ch > 126) {\n      result = true;\n      break;\n    }\n  }\n  return result;\n};\n\n/* \r\n    *   Converts a percent into a number\r\n    */\nbizagi.util.percent2Number = function (value) {\n  return Number(String(value).replace(\"%\", \"\"));\n};\n/*\r\n    *   Check if a object is empty\r\n    */\nbizagi.util.isObjectEmpty = function (obj) {\n  if (obj.length > 0)\n  return false;\n  return true;\n};\n/*\r\n    *   Check if a map object is empty\r\n    */\nbizagi.util.isMapEmpty = function (map) {\n  // First we validate a special case\n  if (map.length == 1 && map[0].length == 0)\n  return true;\n  // Then we do normal validation\n  for (var key in map) {\n    if (map.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n};\n/*\r\n    *   Replaces a matched selector in the container for the specified \"replace\" element\r\n    */\nbizagi.util.replaceSelector = function (container, selector, replace) {\n  // Replace children tag\n  var elementToReplace = $(selector, container);\n  if (elementToReplace.length > 0) {\n    elementToReplace.append(replace);\n    elementToReplace.children().unwrap();\n  }\n};\n/*\r\n    *   Determines if a control as a scrollbar \r\n    */\nbizagi.util.hasScroll = function (el, direction) {\n  if (el.length)\n  el = el[0];\n  direction = direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n  var result = !!el[direction];\n  if (!result) {\n    el[direction] = 1;\n    result = !!el[direction];\n    el[direction] = 0;\n  }\n  return result;\n};\n\n//TODO: DEPL - Rename this to areIdenticalObjects\nbizagi.util.identicalObjects = function (obj1, obj2) {\n  var self = this;\n\n  if (_typeof(obj1) !== _typeof(obj2)) {\n    return false;\n  }\n\n  if (typeof obj1 === \"function\") {\n    return obj1.toString() === obj2.toString();\n  }\n\n  if (obj1 instanceof Object && obj2 instanceof Object) {\n\n    // Count properties\n    if (bizagi.util.countProps(obj1) !== bizagi.util.countProps(obj2)) {\n      return false;\n    }\n\n    var r = true;\n    for (k in obj1) {\n      r = bizagi.util.identicalObjects(obj1[k], obj2[k]);\n      if (!r) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return obj1 === obj2;\n  }\n};\n\nbizagi.util.countProps = function (obj) {\n  var count = 0;\n  for (k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      count++;\n    }\n  }\n  return count;\n};\n/*\r\n    *   Determines if a element has visibility\r\n    */\nbizagi.util.isScrolledIntoView = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var scrollTop = layout.scrollTop();\n  var elemTop = $(elem).offset().top;\n  var elemBottom = elemTop + $(elem).height();\n  var docViewBottom = scrollTop + $(layout).height();\n  return elemBottom <= docViewBottom && elemTop >= scrollTop;\n};\nbizagi.util.centerElementIntoScroll = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var actualScroll = layout.scrollTop();\n  var elementTop = $(elem).offset().top;\n  var elementHeight = $(elem).height();\n  var offset = 0;\n  if (elementTop > 0) {\n    offset = elementTop + elementHeight;\n  } else {\n    offset = elementTop - elementHeight;\n  }\n  var newTop = actualScroll + offset;\n  layout.scrollTop(newTop);\n};\n/*\r\n    *   Encode a html string\r\n    */\nbizagi.util.encodeHtml = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  return text;\n};\n\n/*\r\n    *   Encode a string as HTML\r\n    */\nbizagi.util.decodeHtmlEntities = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&apos;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\\'');\n  }\n  return text;\n};\n/*\r\n    *   Read the location hash\r\n    */\nbizagi.util.getHashParams = function () {\n  var params = window.location.hash.substring(1).split(\"#\");\n  return params;\n};\n/*\r\n    *   Loads a file on-demand\r\n    */\nbizagi.util.loadFile = function (params) {\n  var defer = new $.Deferred();\n  var url = params && params.src ? params.src : params;\n  var type = params && params.type ? params.type : null;\n\n  bizagi.loader.loadFile({ src: url, type: type }).\n  then(function () {\n    defer.resolve();\n  });\n\n  return defer.promise();\n};\n\n/*\r\n    *   Initializes a webpart on-demand\r\n    */\nbizagi.util.initWebpart = function (webpart, device) {\n  var defer = new $.Deferred();\n\n  device = device || bizagi.detectDevice();\n\n  if (webpart.initialized) {\n    // If already initialized resolve the deferred\n    defer.resolve();\n  } else {\n\n    if (webpart.initializing) {\n      $.when(webpart.loadingDeferred.promise()).\n      done(function () {\n        defer.resolve();\n      });\n    } else {\n\n      webpart.loadingDeferred = new $.Deferred();\n      webpart.initializing = true;\n      bizagi.loader.initWebpart(webpart, device, function () {\n\n        // Resolve deferreds\n        webpart.loadingDeferred.resolve();\n        webpart.initializing = false;\n        defer.resolve();\n      });\n    }\n  }\n\n  return defer.promise();\n};\n/*\r\n    *   Read the query string parameteres\r\n    */\nbizagi.util.getQueryString = function (url) {\n  var params = {};\n  url = url || window.location.href;\n  var query = url.indexOf(\"?\") > 0 ? url.substring(url.indexOf(\"?\") + 1) : \"\";\n  var pairs = query.split(\"&\");\n  for (var i = pairs.length - 1; i >= 0; i--) {\n    var pos = pairs[i].indexOf('=');\n    if (pos == -1)\n    continue;\n    var argname = pairs[i].substring(0, pos);\n    var value = pairs[i].substring(pos + 1);\n    params[argname] = unescape(value);\n  }\n  return params;\n};\n/*\r\n    *   Extend querystring\r\n    */\nbizagi.util.extendQueryString = function (url, additionalParams) {\n  var plainUrl = url.indexOf(\"?\") > 0 ? url.substring(0, url.indexOf(\"?\")) : url;\n  var existingParams = bizagi.util.getQueryString(url);\n  var newParams = $.extend({}, existingParams, additionalParams);\n  return plainUrl + \"?\" + $.param(newParams);\n};\nbizagi.util.getStackTrace = function () {\n  var callstack = [];\n  var isCallstackPopulated = false;\n  try {\n    i.dont.exist += 0; //doesn't exist- that's the point\n  } catch (e) {\n    if (e.stack) {//Firefox\n      var lines = e.stack.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          callstack.push(lines[i]);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    } else if (window.opera && e.message) {//Opera\n      var lines = e.message.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          var entry = lines[i];\n          //Append next line also since it has the file info\n          if (lines[i + 1]) {\n            entry += ' at ' + lines[i + 1];\n            i++;\n          }\n          callstack.push(entry);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    }\n  }\n  if (!isCallstackPopulated) {//IE and Safari\n    var currentFunction = arguments.callee.caller;\n    while (currentFunction) {\n      var fn = currentFunction.toString();\n      var fname = fn.substring(fn.indexOf(\"function\") + 8, fn.indexOf('')) || 'anonymous';\n      callstack.push(fname);\n      currentFunction = currentFunction.caller;\n    }\n  }\n  return callstack;\n};\n/*\r\n    *\thighlight elements\r\n    */\nbizagi.util.highLightElement = function (el) {\n  el.addClass('ui-highlight-control');\n  $.when(\n  setTimeout(function () {\n    el.addClass('ui-highlight-off-control');\n  }, 450)).\n  done(\n  setTimeout(function () {\n    el.removeClass('ui-highlight-control ui-highlight-off-control');\n  }, 800));\n};\n/*\r\n    *\tscroll to bottom\r\n    */\nbizagi.util.autoScrollBottom = function (el) {\n  try {\n    var elScrollHeight;\n    elScrollHeight = el[0].scrollHeight;\n    el.scrollTop(elScrollHeight);\n  } catch (e) {}\n};\n\n/*create auto scroll with limit top and limit bottom */\nbizagi.util.autoScrollInterval = { init: false };\nbizagi.util.autoScroll = function (itemScroll, limitTop, limitBottom, idInterval) {\n  var outSide = false;\n  /* prevent a previous interval */\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval[idInterval] = 0;\n  bizagi.util.autoScrollInterval['init'] = true;\n  $('body').addClass('autoscroll');\n  $('body.autoscroll').mousemove(function (event) {\n    if (event.pageY < limitTop) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollTopInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else if (event.pageY > limitBottom) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollBottomInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else {\n      clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      outSide = false;\n    }\n  });\n};\n/*create auto scroll movement top */\nbizagi.util.autoScrollTopInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  if (itemScroll.scrollTop() == 0) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      if (itemScroll.scrollTop() > 0) {\n        itemScroll.scrollTop(itemScroll.scrollTop() - 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n\n/*create auto scroll movement bottom */\nbizagi.util.autoScrollBottomInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  var valueMaxScrollBottom = $(itemScroll)[0].scrollHeight - $(itemScroll).innerHeight();\n  if (itemScroll.scrollTop() >= valueMaxScrollBottom) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      bizagi.util.autoScrollBottom($('html'));\n      if (itemScroll.scrollTop() < valueMaxScrollBottom) {\n        itemScroll.scrollTop(itemScroll.scrollTop() + 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n/*remove auto scroll*/\nbizagi.util.removeAutoScroll = function (classCSS, idInterval) {\n  $('body.' + classCSS).unbind('mousemove').removeClass(classCSS);\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval.init = false;\n};\n\nbizagi.util.getMaxZIndex = function (selector) {\n  selector = selector || $(\"div,span\");\n  return Math.max.apply(null, $(selector).map(function () {\n    var zIndex;\n    return isNaN(zIndex = parseInt($(this).css(\"z-index\"), 10)) ? 0 : zIndex;\n  }));\n};\n\n/*\r\n    * Creates a native popup to open an url\r\n    */\nbizagi.showPopup = function (url, params, callbackFn) {\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(url, \"\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  // Define args to call the function\n  window.BAPopupWindow = newWindow;\n  window.BAPopupCallback = callbackFn;\n  // Define BACLoseWindow in this context, so the external content calls window.opener.BACloseWindow\n  window.BACloseWindow = function (controls, submitForm) {\n    // Close dialog\n    window.BAPopupWindow.close();\n    // Executes the callback to assign values and submit form (if requested)\n    window.BAPopupCallback(controls, submitForm);\n  };\n};\n/**\r\n    * Creates a native popup in quirks mode to open an url\r\n    * \r\n    * @param url string page to open into popup\r\n    * @param params json {width,height,title,afterLoad}\r\n    */\nbizagi.showQuirksModePopup = function (url, params) {\n  var quirksModePage = window.BIZAGI_PATH_TO_BASE + \"quirks.html\";\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(quirksModePage, \"bizagiPopup\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  window.BAQuirksPopupWindow = newWindow;\n  // Attempto to set a window title\n  setTimeout(function () {\n    try {\n      newWindow.document.title = params.title;\n    } catch (e) {}\n  }, 50);\n  // We use a hack to eval content inside the popup\n  $(newWindow).callInsidePopup(function (windowParams) {\n\n    var $ = windowParams.jQuery;\n    var popupWindow = windowParams.popupWindow;\n    popupWindow.quirksOnLoad = function () {\n      var loadedBody = $(\"body\", popupWindow.document);\n      var iframe = $(\"iframe\", loadedBody);\n      // Remove waiting\n      loadedBody.removeClass(\"ui-bizagi-loading-message\");\n      iframe.show();\n      // Hacks the iframe\n      // This event will fire each time the iframe change its location\n      var afterLoad = windowParams.userParams.afterLoad;\n      if (afterLoad && afterLoad != null) {\n        var callbackParams = $.extend(windowParams.userParams, {\n          popupWindow: popupWindow });\n\n        iframe.callInside(afterLoad, callbackParams);\n      }\n    };\n    var loadingFunction = function loadingFunction() {\n      var body = $(\"body\", popupWindow.document);\n      // Create the iframe inside the new window\n      if (body.length > 0) {\n        body.append(\"<iframe scrolling='yes' id='innerFrameContent' src='\" + windowParams.url + \"' style='width: 100%; height: 100%; display:none' frameborder='0' onload='quirksOnLoad();'></iframe>\");\n      } else {\n        // Try again\n        setTimeout(function () {\n          loadingFunction();\n        }, 50);\n      }\n    };\n    // Execute loading function\n    loadingFunction();\n  }, {\n    jQuery: $,\n    userParams: params,\n    popupWindow: newWindow,\n    url: url });\n\n};\n/*\r\n    *   Returns the resolved result from a promise when the promise has been executed already\r\n    */\nbizagi.resolveResult = function (promise) {\n  var result;\n  promise.done(function (data) {\n    result = data;\n  });\n  return result;\n};\n/*\r\n    *   Creates a popup using overlay style\r\n    */\nbizagi.createPopup = function (params) {\n  var popupName = params.name,\n  onClose = params.onClose,\n  popupHeader;\n  var popupTitle = params.title ? params.title : '';\n  var handleClose = typeof params.handleClose == 'boolean' ? params.handleClose : true;\n  var overlay = $('<div class=\"ui-widget-overlay ' + popupName + '-overlay\" />');\n  var popup = $('<div class=\"' + popupName + '-popup  ui-popup-modal\"/>').appendTo(overlay);\n  var closeButton = $('<div class=\"' + popupName + '-btn-close biz-btn-close\"><i class=\"biz-icon ui-close-btn bz-studio bz-black bz-false_16x16_black\"></i></div>').appendTo(popup);\n  if (params.title) {\n    popupHeader = $('<div class=\"' + popupName + '-popup-header ui-popup-header\" ><h3>' + popupTitle + '</h3></div>').appendTo(popup);\n  }\n\n  var popupContent = $('<div class=\"' + popupName + '-popup-content\" />').appendTo(popup);\n  // Add to body\n  popup.hide();\n  if (params.additionalClass)\n  popup.addClass(params.additionalClass);\n  var container = params.container || \"body\";\n  overlay.appendTo($(container, document));\n\n  if (params.center) {\n    // Resize popup to the center\n    popup.css(\"top\", (overlay.height() - popup.height()) / 2);\n    popup.css(\"left\", (overlay.width() - popup.width()) / 2);\n  }\n  popup.show();\n  // Close handler\n  var closeHandler = function closeHandler(params) {\n    overlay.detach();\n    if (onClose)\n    onClose(params);\n  };\n\n  if (handleClose) {\n    closeButton.click(closeHandler);\n  }\n  // Return a full independent object\n  return {\n    fullPopup: popup,\n    overlay: overlay,\n    content: popupContent,\n    close: function close(params) {\n      closeHandler(params);\n    } };\n\n};\n/*\r\n    * Create an Ok, Cancel popup using bizagi.createPopup()\r\n    */\n\nbizagi.createOkCancelPopup = function (params) {\n  params.name = \"popup-ok-cancel\";\n  var onOk = params.onOk,\n  onCancel = params.onCancel;\n  var popup = bizagi.createPopup(params);\n  var container = $(\"<div></div>\").addClass(\"container-okcancel-popup\");\n  var message = $(\"<div></div>\").addClass(\"message-okcancel-popup ui-light-bevel-border biz-gradient-v\");\n  var buttonsContainer = $(\"<div></div>\").addClass(\"buttonsContainer-okcancel-popup biz-actions-bar\");\n  message.text(params.message);\n  message.appendTo(container);\n  var buttonOk = $(\"<span></span>\").addClass(\"ok-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  var buttonCancel = $(\"<span></span>\").addClass(\"cancel-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  buttonOk.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-ok\"));\n  buttonCancel.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-cancel\"));\n  buttonOk.appendTo(buttonsContainer);\n  buttonCancel.appendTo(buttonsContainer);\n  buttonsContainer.appendTo(container);\n  container.appendTo(popup.content);\n  var okHandler = function okHandler() {\n    popup.close();\n    if (typeof onOk == \"function\") {\n      onOk();\n    }\n  };\n  buttonOk.click(okHandler);\n  var cancelHandler = function cancelHandler() {\n    popup.close();\n    if (typeof onCancel == \"function\") {\n      onCancel();\n    }\n  };\n  buttonCancel.click(cancelHandler);\n  return {\n    close: function close() {\n      popup.close();\n    },\n    ok: function ok() {\n      okHandler();\n    },\n    cancel: function cancel() {\n      cancelHandler();\n    } };\n\n};\n/*\r\n    * Create an generic dialog\r\n    */\nbizagi.dialog = function (params) {\n\n  var dialog = $(\"<div></div>\").addClass(\"biz-dialog\");\n  var msg = $(\"<p></p>\");\n  msg.text(params.message || \"\");\n  msg.appendTo(dialog);\n  dialog.appendTo($(\"body\", document));\n  dialog.dialog({\n    title: params.title,\n    modal: true,\n    buttons: params.buttons,\n    close: function close() {\n      dialog.dialog(\"destroy\");\n    } });\n\n};\n/*\r\n    *   Close the quirks mode popup window\r\n    */\nbizagi.closeQuirksModePopup = function () {\n  var quirksPopup = window.BAQuirksPopupWindow;\n  window.BAQuirksPopupWindow = null;\n  try {\n    if (quirksPopup)\n    quirksPopup.close();\n  } catch (e) {}\n};\n/**\r\n    * Get css class definition to string\r\n    */\nbizagi.getStyle = function (style) {\n  var pathName = location.href.replace(\"/default.aspx\", \"\");\n  var getFontFace = style.match(/@/) ? true : false;\n  var matchFontFace = \"@font-face\";\n  var getAllChildrens = style.match(/\\*/) ? true : false;\n  var matchStyles = new RegExp(style.replace(\"*\", \"\"), \"g\");\n  var stringCss = \"\";\n  var css;\n  if (style == \"\") {\n    return \"\";\n  }\n  var awesomeBrowser = function awesomeBrowser(style) {\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].rules || document.styleSheets[file].cssRules;\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (document.styleSheets[file].href != null && (document.styleSheets[file].href.match(/less.css/g) == null || BIZAGI_ENVIRONMENT == \"release\")) {\n\n            var cssTextOriginal = css[key].cssText ? css[key].cssText : '';\n            // Get all matches\n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n\n                if ($.browser.webkit) {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"\");\n                } else if ($.browser.msie && $.browser.version == \"8.0\") {\n                  stringCss += css[key].style.cssText;\n                } else {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"../../jquery/workportal/css/desktop\");\n                }\n              }\n            } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n              stringCss += css[key].cssText;\n            }\n\n            // Get @font-face\n            if (getFontFace) {\n              if (css[key] != undefined && cssTextOriginal != undefined) {\n                if (cssTextOriginal.indexOf(matchFontFace) != -1) {\n\n                  if ($.browser.webkit) {\n                    stringCss += cssTextOriginal.replace(/jquery\\/workportal\\/css\\/desktop\\//g, \"\").replace(/\\(path\\)/g, \"\");\n                  } else {\n                    stringCss += cssTextOriginal.replace(/\\(path\\)/g, \"../../\");\n                  }\n\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var suckBrowser = function suckBrowser(style) {\n    if ($.browser.version == \"8.0\") {\n      // That is crazy, but it has the same document.styleSheets structure to chrome and mozilla\n      return awesomeBrowser(style);\n    }\n    var lastLevel;\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].cssRules || document.styleSheets[file].rules;\n\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (BIZAGI_ENVIRONMENT == \"release\") {\n            // Get all matches \n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          } else if (css[key].href != null && css[key].href != undefined && css[key].href.match(/less.css/g) == null) {\n            // Get all matches \n            lastLevel = css[key].styleSheet.cssRules || [];\n            for (var n = 0; n < lastLevel.length; n++) {\n              if (getAllChildrens) {\n                if ((lastLevel[n].selectorText != undefined || lastLevel[n].selectorText != null) && lastLevel[n].selectorText.match(matchStyles) != null) {\n                  //stringCss += lastLevel[n].cssText;\n                  stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n                }\n              } else if (lastLevel[n].selectorText != undefined && lastLevel[n].selectorText == style) {\n                // stringCss += lastLevel[n].cssText;\n                stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var result = $.browser.msie ? suckBrowser(style) : awesomeBrowser(style);\n  return result;\n};\n/**\r\n    * Set and retrieve Cookie\r\n    */\nbizagi.cookie = function (key, value, options) {\n  // key and at least value given, set cookie...\n  if (arguments.length > 1 && String(value) !== \"[object Object]\") {\n    options = $.extend({}, options);\n    if (value === null || value === undefined) {\n      options.expires = -1;\n    }\n\n    if (typeof options.expires === 'number') {\n      var days = options.expires,\n      t = options.expires = new Date();\n      t.setDate(t.getDate() + days);\n    }\n\n    value = String(value);\n    return document.cookie = [\n    encodeURIComponent(key), '=',\n    options.raw ? value : encodeURIComponent(value),\n    options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n    options.path ? '; path=' + options.path : '',\n    options.domain ? '; domain=' + options.domain : '',\n    options.secure ? '; secure' : ''].\n    join('');\n  }\n\n  // key and possibly options given, get cookie...\n  options = value || {};\n  var result,decode = options.raw ? function (s) {\n    return s;\n  } : decodeURIComponent;\n  return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;\n};\n/**\r\n    * Returns a random integer between min and max\r\n    */\nbizagi.util.randomNumber = function (min, max) {\n  min = min || 1;\n  max = max || 10000000;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\r\n    * Set global context values\r\n    * @param params onject\r\n    * @param reset boolean\r\n    */\nbizagi.util.setContext = function (params, reset) {\n  params = params || {};\n  reset = reset || false;\n  if (reset) {\n    bizagi.context = {};\n  }\n  $.each(params, function (key, value) {\n    bizagi.context[key] = value;\n  });\n\n  // Fix camel case in idWorkItem Property\n  bizagi.context[\"idWorkItem\"] = bizagi.context[\"idWorkitem\"];\n};\n\nbizagi.util.reloadCSS = function () {\n  var queryString = '?reload=' + new Date().getTime();\n  $('link[rel=\"stylesheet\"]').each(function () {\n    this.href = this.href.replace(/\\?.*|$/, queryString);\n  });\n};\n\n/**\r\n    * Control recursive calls of setTimeout\r\n    * @param params json {name:name of call,call: function call}\r\n    * @return void\r\n    */\nbizagi.util.setInterval = function (params) {\n  var _name = params.name || 'default';\n  var _call = params.call || function () {};\n  var _params = params.params || {};\n  var _singleton = params.singleton || false;\n  var _timeOut = params.timeout || 5000;\n  var _maxIterations = params.iterations || 1000;\n  var _context = params.context || \"true;\";\n  // If callback its diferent to context, remove from hash\n  var _killWhenExitContext = params.hasOwnProperty('killWhenExitContext') ? params.killWhenExitContext : true;\n  bizagi.timeOut = bizagi.timeOut || {};\n  if (bizagi.timeOut[_name] == undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n  // Check if singleton (run once)\n  if (_singleton && bizagi.timeOut[_name] != undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n\n  bizagi.timeOut[_name].push({\n    name: _name,\n    params: _params,\n    call: _call,\n    singleton: _singleton,\n    timeOut: _timeOut,\n    iterations: 0,\n    maxIterations: _maxIterations,\n    context: _context,\n    killWhenExitContext: _killWhenExitContext,\n    itsRunning: false,\n    timeInit: Math.round(new Date().getTime()) });\n\n  var executeTimeOut = function executeTimeOut() {\n    $.each(bizagi.timeOut, function (k, v) {\n      $.each(v, function (key, value) {\n        var now = Math.round(new Date().getTime());\n        var actualIterations = Math.round((now - value.timeInit) / value.timeOut);\n        bizagi.timeOut[value.name][key]['iterations'] = actualIterations;\n        if (actualIterations < value.maxIterations) {\n          // Check context\t\t\t\t\t\n          if (eval(value.context)) {\n            if (!value.itsRunning) {\n              if (value.params)\n                // Create a virtual function to IE\n                if ($.browser.msie) {\n                  var ieFunction = function ieFunction() {\n                    return value.call(value.params);\n                  };\n                }\n\n              bizagi.timeOut[value.name][key]['pointer'] = $.browser.msie ? setInterval(ieFunction, value.timeOut, 'JavaScript') : setInterval(value.call, value.timeOut, value.params);\n              bizagi.timeOut[value.name][key]['itsRunning'] = true;\n            }\n          } else if (value.killWhenExitContext) {\n            bizagi.timeOut[value.name].splice(key, 1);\n            clearTimeout(value.pointer);\n          } else {\n            bizagi.timeOut[value.name][key]['itsRunning'] = false;\n            clearTimeout(value.pointer);\n          }\n        } else {\n          // Cancel timeout and remove call from hash\n          clearTimeout(value.pointer);\n          bizagi.timeOut[value.name].splice(key, 1);\n        }\n      });\n    });\n  };\n\n  if (!bizagi.timeOutRunning) {\n    bizagi.timeOutRunning = true;\n    setInterval(executeTimeOut, 1000);\n  }\n};\nbizagi.util.isDate = function (value) {\n  // type A) dd/mm/aaaa \n  // type B) aaaa/mm/dd\n  // type C) aa/mm/dd\n\n  var dateRegEx_typeA = /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/,\n  dateRegEx_typeB = /^\\d{4}\\/\\d{1,2}\\/\\d{1,2}$/,\n  dateRegEx_typeC = /^\\d{1,2}\\/\\d{1,2}\\/\\d{1,2}$/,\n  timeRegEx = /^\\d{1,2}:\\d{2}(:\\d{2})?(\\s[aApP][mM])?$/,\n  result = false,\n  resultDate = false,\n  hasTime = false,\n  resultTime = false;\n\n  value = value || '';\n\n  var arrayDate = value.toString().split(\" \"),\n  dateField,\n  timeField;\n\n  dateField = arrayDate[0];\n\n  if (dateRegEx_typeA.test(dateField) || dateRegEx_typeB.test(dateField) || dateRegEx_typeC.test(dateField)) {\n    resultDate = true;\n  }\n\n  if (arrayDate.length > 1) {\n\n    timeField = arrayDate[1];\n\n    hasTime = true;\n\n    //Checks if AM/PM included in the time element\n    if (arrayDate.length == 3)\n    timeField = timeField + ' ' + arrayDate[2];\n\n    if (timeRegEx.test(timeField))\n    resultTime = true;\n  }\n\n  if (hasTime)\n  result = resultDate && resultTime;else\n\n  result = resultDate;\n\n  return result;\n};\n/*\r\n    *   Encodes unicode characters into html\r\n    */\nbizagi.util.unicode2htmlencode = function (input) {\n  // Shorten\n  var natCCA = 'charCodeAt';\n  input = input.replace(/\\r\\n/g, '\\n');\n  var i,b1,hex,\n  len = input.length,\n  htmlHex = '';\n  for (i = 0; i < len; i++) {\n    b1 = input[natCCA](i);\n    hex = b1.toString(16);\n    htmlHex += '&#x' + hex + ';';\n  }\n  return htmlHex;\n};\n/*\r\n    *   Gets the head element from the DOM\r\n    */\nbizagi.util.getHeadElement = function () {\n  var hd = document.getElementsByTagName(\"head\")[0];\n  var docEl = document && document.documentElement;\n  if (!hd) {\n    hd = document.createElement(\"head\");\n    docEl.insertBefore(hd, docEl.firstChild);\n  }\n  // replace head so it runs fast next time.\n  bizagi.util.getHeadElement = function () {\n    return hd;\n  };\n  return hd;\n};\n/*\r\n    *   Loads a css text into the current document\r\n    */\nbizagi.util.loadStyle = function (styleText, layoutGuid) {\n\n  var element = document.getElementById(layoutGuid);\n\n  if (styleText && !element) {// less\n    var css = document.createElement(\"style\");\n    css.type = \"text/css\";\n    css.id = layoutGuid;\n    if (css.styleSheet) {// IE\n      css.styleSheet.cssText = styleText;\n    } else {\n      (function (node) {\n        if (css.childNodes.length) {\n          if (css.firstChild.nodeValue !== node.nodeValue) {\n            css.replaceChild(node, css.firstChild);\n          }\n        } else {\n          css.appendChild(node);\n        }\n      })(document.createTextNode(styleText));\n    }\n    bizagi.util.getHeadElement().appendChild(css);\n  }\n};\n\n/*\r\n    *   Loads a css text of the icon widget into the current document\r\n    */\nbizagi.util.loadIconStyle = function (icon, userfieldname) {\n  bizagi.log(\"bizagi.util.loadIconStyle\");\n  var css = document.createElement(\"style\");\n  css.type = \"text/css\";\n\n  var cssText = \".mtool-item-image-\" + userfieldname + \" { background:url(data:image/png;base64,\" + icon + \"); }\";\n  css.innerHTML = cssText;\n\n  bizagi.util.getHeadElement().appendChild(css);\n};\n\nbizagi.util.formatDecimalAndMoneyCell = function (tableData, externalMoneyFormat) {\n  var moneyFormat, decimalFormat, i, j;\n  var externalDecimalFormat = {\n    decimalSymbol: externalMoneyFormat.decimalSeparator,\n    digitGroupSymbol: externalMoneyFormat.groupSeparator,\n    roundToDecimalPlace: externalMoneyFormat.decimalDigits };\n\n  var defaultMoneyFormat = {\n    symbol: \"\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n\n  moneyFormat = $.extend(defaultMoneyFormat, externalMoneyFormat);\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n\n  for (i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n    if (tableData.columnTitle[i].type.toUpperCase() == \"FLOAT\" || tableData.columnTitle[i].type.toUpperCase() == \"REAL\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        var numberValue = bizagi.util.formatDecimal(tableData.rows[j].fields[i], decimalFormat);\n        //Gets rids of unnecessary zeros\n        if (bizagi.override.removeTrailingZeros === true) {\n          var positive = true;\n          if (numberValue.toString().indexOf(\")\") != -1) {\n            positive = false;\n            numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n          }\n          var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"$1\");\n          re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"\");\n\n          if (!positive) numberValue = \"(\" + numberValue + \")\";\n        }\n        tableData.rows[j].fields[i] = numberValue;\n      }\n    }\n  }\n\n  return tableData;\n};\n\n\nbizagi.util.formatBoolean = function (value) {\n  if (bizagi.util.parseBoolean(value) == true) {\n    return bizagi.localization.getResource(\"render-boolean-yes\");\n  } else if (bizagi.util.parseBoolean(value) == false) {\n    return bizagi.localization.getResource(\"render-boolean-no\");\n  } else {\n    return \"\";\n  }\n};\n\nbizagi.util.formatInvariantBoolean = function (htmlContent) {\n  htmlContent = htmlContent || \"\";\n  $(\".formatBoolean\", htmlContent).not(\".formatted\").each(function (index, element) {\n    var $element = $(element);\n    var content = $element.html();\n    $element.addClass(\"formatted\");\n    try {\n      var formatBoolean = bizagi.util.formatBoolean(content);\n      $element.html(formatBoolean);\n    } catch (e) {\n      $element.html(content);\n    }\n  });\n};\n\nbizagi.util.formatDecimal = function (value, format) {\n  var i = $(\"<i/>\").text(value);\n  if (i.formatCurrency) {i.formatCurrency(format);}\n  return i.text();\n};\n\n/*\r\n    * Format monetary cells\r\n    */\nbizagi.util.formatMonetaryCells = function (tableData, moneyFormat) {\n\n  var defaultFormat = {\n    symbol: \"\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n\n  moneyFormat = moneyFormat || defaultFormat;\n\n  for (var i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (var j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n  }\n\n  return tableData;\n\n};\n\n/*\r\n    * Format monetary values, the format must have the structure of the next example:\r\n    *\r\n    * var defaultFormat = {\r\n    *        symbol: \"\",\r\n    *        decimalSeparator: \",\",\r\n    *        groupSeparator: \".\",\r\n    *        decimalDigits: \"2\"\r\n    *    };\r\n    */\nbizagi.util.formatMoney = function (value, format) {\n  var result = \"\",\n  tmpResult = \"\",\n  intSection = \"\",\n  decimalSection = \"\",\n  decimalResult = \"\",\n  isNegative = value < 0;\n\n  if (value == null) {\n    value = \"\";\n  }\n\n  value = value.toString();\n\n  if (value.length >= 1) {\n    var decimalDigitPosition = value.indexOf(\".\");\n\n    if (decimalDigitPosition > 0) {\n      value = bizagi.util.fixDecimalDigits(value, format.decimalDigits);\n      intSection = value.substring(0, decimalDigitPosition).replace(/\\D/g, '');\n    } else {\n      var zeroChar = \"0\";\n\n      for (var i = 0; i < format.decimalDigits; i++) {\n        decimalResult += zeroChar;\n      }\n      intSection = value.replace(/\\D/g, '');\n    }\n\n    //take only the number characters removing other characters\n    value = value.replace(/\\D/g, '');\n    //take the decimal section\n    if (format.decimalDigits > 0) {\n      decimalSection = decimalDigitPosition > 0 ? format.decimalSeparator + value.substring(value.length - format.decimalDigits, value.length) : format.decimalSeparator + decimalResult;\n    } else {\n      decimalSection = \"\";\n    }\n    //insert groupSeparators into int section\n    if (intSection.length > 3) {\n      var count = 0;\n\n      //insert separator from end to begin\n      for (var i = intSection.length - 1; i >= 0; i--) {\n        if (count == 3) {\n          tmpResult += \".\";\n          count = 0;\n        }\n        tmpResult += intSection[i];\n        count += 1;\n      }\n      //revert the string to get the result value\n      for (var i = tmpResult.length - 1; i >= 0; i--) {\n        result += tmpResult[i];\n      }\n    } else {\n      result = intSection;\n    }\n\n    //replace the correct group separator\n    result = result.replaceAll(\".\", format.groupSeparator);\n    //unify all sections and finish format\n    if (isNegative) {\n      var negativeFormat = bizagi.localization.getResource('numericFormat').negativeFormat;\n      result = negativeFormat.replace(\"%s\", format.symbol).replace(\"%n\", result + decimalSection);\n    } else {\n      result = format.symbol + result + decimalSection;\n    }\n\n    return result;\n  } else {\n    return value;\n  }\n\n\n};\n\n/**\r\n    * Remove all characters except numbers\r\n    */\nbizagi.util.getOnlyNumbersByString = function (stringValue) {\n  return stringValue.replace(/\\D/g, '');\n};\n\n/*\r\n       This method was created because the \"toFixed()\" JavaScript method in some cases round the numbers when it is not needed.\r\n       Can return string or number.\r\n   */\nbizagi.util.fixDecimalDigits = function (value, decimalDigits) {\n  var decimalDigitPosition,\n  intSection,\n  decimalSection;\n\n  decimalDigitPosition = value.indexOf('.');\n  intSection = value.substring(0, decimalDigitPosition);\n  decimalSection = value.substring(decimalDigitPosition + 1, value.length);\n\n  if (decimalDigits > decimalSection.length) {\n    for (var i = decimalSection.length; i < decimalDigits; i++) {\n      value += '0';\n    }\n  } else {\n    value = parseFloat(value).toFixed(decimalDigits);\n  }\n\n  return value;\n\n};\n\n/*\r\n    * Format html  money\r\n    */\nbizagi.util.formatInvariantMoney = function (htmlContent, moneyFormat) {\n  htmlContent = htmlContent || \"\";\n  var defaultFormat = {\n    symbol: moneyFormat.symbol,\n    decimalSeparator: moneyFormat.decimalSeparator || \",\",\n    groupSeparator: moneyFormat.groupSeparator || \".\",\n    decimalDigits: moneyFormat.decimalDigits || \"2\" };\n\n  if (moneyFormat.allowDecimals === false) {\n    defaultFormat.decimalDigits = \"0\";\n  }\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = parseFloat(content);\n      if (!isNaN(value)) {\n        var formatMoney = bizagi.util.formatMoney(value, defaultFormat);\n        $(elem).html(formatMoney);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html  number\r\n    */\nbizagi.util.formatInvariantNumber = function (htmlContent, numberFormat) {\n  htmlContent = htmlContent || \"\";\n  var decimalDigits = \"2\";\n  if (numberFormat.decimalDigits == \"0\")\n  decimalDigits = \"0\";else\n\n  decimalDigits = numberFormat.decimalDigits || \"2\";\n\n  var groupSeparator = bizagi.util.isString(numberFormat.groupSeparator) && numberFormat.groupSeparator ? numberFormat.groupSeparator : \".\";\n\n  var defaultFormat = {\n    symbol: \"\",\n    decimalSeparator: numberFormat.decimalSeparator || \",\",\n    groupSeparator: numberFormat.groupSeparator || numberFormat.thousands ? groupSeparator : \"\",\n    decimalDigits: decimalDigits };\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var containsLetter = content.match(/[a-zA-Z]/);\n      var value = containsLetter != null && containsLetter.length > 0 ? NaN : parseFloat(content);\n      if (!isNaN(value)) {\n        var formatNumber = bizagi.util.formatMoney(value, defaultFormat);\n        if (numberFormat.percentage) {\n          formatNumber = formatNumber.toString() + \"%\";\n        }\n        $(elem).html(formatNumber);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html with invariant date\r\n    */\nbizagi.util.formatInvariantDate = function (htmlContent, dateFormat) {\n  htmlContent = htmlContent || \"\";\n  dateFormat = dateFormat || \"MM/dd/yyyy hh:mm:ss\";\n  $(\".formatDate\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = new Date(content);\n      var dateTimeFormat = dateFormat;\n\n      if (bizagi.util.isValidDate(value))\n      dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n      var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat /*self.getResource(\"dateFormat\")*/);\n      $(elem).html(formatDate);\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/**\r\n    * Return format date with resources from string invariant date. It use the format specified\r\n    * @param stringInvariantDate\r\n    */\nbizagi.util.formatDateFromInvariantStringDate = function (stringInvariantDate) {\n  if (bizagi.util.isValidDate(stringInvariantDate)) {\n    var dateTimeFormat = bizagi.localization.getResource(\"dateFormat\") + ' ' + bizagi.localization.getResource(\"timeFormat\");\n    var value = new Date(stringInvariantDate);\n    dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n    var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat);\n    return formatDate;\n  }\n  return stringInvariantDate || \"\";\n};\n\nbizagi.util.getFormatDate = function (dateValue, defaultFormatDate) {\n  var dateTimeFormat = defaultFormatDate;\n\n  var H = dateValue.getHours();\n  var m = dateValue.getMinutes();\n  var s = dateValue.getSeconds();\n  var ms = dateValue.getMilliseconds();\n  var hide = bizagi.override.hideTimeWhenHourMinutesSecondsAreZero;\n\n  //Don't show time when hour, minutes, seconds and milliseconds are 0\n  if (H === 0 && m === 0 && s === 0 && ms === 0 && hide)\n  dateTimeFormat = bizagi.localization.getResource(\"dateFormat\");\n\n  return dateTimeFormat;\n};\n\n/**\r\n    * Format value by dataType\r\n    */\nbizagi.util.formatValueByDataType = function (value, dataType) {\n  /**\r\n                                                                 * Types Definedin Backend\r\n                                                                 * None = 0,BigInt = 1,Int = 2,SmallInt = 3,TinyInt = 4,Boolean = 5,Decimal = 6,Numeric = 7,Money = 8,Float = 10,Real = 11,DateTime = 12,SmallDateTime = 13,\r\n                                                                 Char = 14,VarChar = 15,Text = 16,Binary = 17,VarBinary = 18,Image = 19,Guid = 20,NChar = 21,NVarChar = 22,NText = 23,MxMBidirectionalRelationship = 24,\r\n                                                                 MxMUnidirectionalRelationship = 25,EntityDisabled = 26,UserAuth = 27,MxMUnidirectionalRelationshipWithoutFilter = 28,OracleNumber = 29,\r\n                                                                 Stakeholder = 30,ActivityItems = 31\r\n                                                                 *\r\n                                                                 * */\n  var result = value;\n  switch (dataType) {\n    case \"NText\":\n    case 23:\n    case \"Char\":\n    case 14:\n    case \"VarChar\":\n    case 15:\n    case \"Text\":\n    case 16:\n      if (value && value.length > 30) {\n        result = bizagi.util.replaceLineBreak(value);\n      }\n      break;\n    case \"Boolean\":\n    case 5:\n    case \"Binary\":\n    case 17:\n      result = bizagi.util.formatBoolean(value);\n      break;\n    case \"Int\":\n    case 2:\n    case \"BigInt\":\n    case 1:\n    case \"SmallInt\":\n    case 3:\n    case \"TinyInt\":\n    case 4:\n    case \"Numeric\":\n    case 7:\n      result = value === undefined || value === null ? \"\" : value;\n      break;\n    case \"Money\":\n    case 8:\n      result = bizagi.util.formatMonetaryCell(value);\n      break;\n    case \"Float\":\n    case 10:\n    case \"Real\":\n    case 11:\n    case \"Decimal\":\n    case 6:\n      result = bizagi.util.formatDecimalCell(value);\n      break;\n    case \"DateTime\":\n    case 12:\n    case \"SmallDateTime\":\n    case 13:\n      result = bizagi.util.formatDateFromInvariantStringDate(value);\n      break;}\n\n  if (result == null) {\n    result = \"\";\n  }\n  return result;\n};\n\n/**\r\n    * Check if it is a valid date\r\n    */\nbizagi.util.isValidDate = function (params) {\n  if (typeof params != \"undefined\" && params != null) {\n    var parseDate = new Date(params);\n    return !isNaN(parseDate.valueOf());\n  } else return false;\n};\n\n/*\r\n    *   Defines a date time formatter that will be available globally\r\n    */\nbizagi.util.monthNames = new Array('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');\nbizagi.util.dayNames = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat');\n\nbizagi.util.dateFormatter = new function () {\n  this.LZ = function (x) {\n    return (x < 0 || x > 9 ? \"\" : \"0\") + x;\n  };\n  /*\r\n      *   isDate ( date_string, format_string )\r\n      *   Returns true if date string matches format of format string and\r\n      *   is a valid date. Else returns false.\r\n      *   It is recommended that you trim whitespace around the value before\r\n      *   passing it to this function, as whitespace is NOT ignored!\r\n      */\n  this.isDate = function (val, format) {\n    var date = this.getDateFromFormat(val, format);\n    if (date == 0) {\n      return false;\n    }\n    return true;\n  };\n\n  this.getRelativeTime = function (date, dateFormat, onlyUnitsTime, timeZone) {\n\n    var self = this;\n    var now = timeZone ? new Date(moment().tz(bizagi.currentUser.timeZoneName).format()) : new Date();\n    var time = date instanceof Date ? date : kendo.parseDate(date, dateFormat);\n    var diff = now.getTime() - time.getTime();\n    var timeDiff = getTimeDiffDescription(diff, 'year', 31536000000, onlyUnitsTime);\n\n    if (!timeDiff) {\n      timeDiff = getTimeDiffDescription(diff, 'month', 2628000000, onlyUnitsTime);\n      if (!timeDiff) {\n        timeDiff = getTimeDiffDescription(diff, 'week', 604800000, onlyUnitsTime);\n        if (!timeDiff) {\n          timeDiff = getTimeDiffDescription(diff, 'day', 86400000, onlyUnitsTime);\n          if (!timeDiff) {\n            timeDiff = getTimeDiffDescription(diff, 'hour', 3600000, onlyUnitsTime);\n            if (!timeDiff) {\n              timeDiff = getTimeDiffDescription(diff, 'minute', 60000, onlyUnitsTime);\n              if (!timeDiff) {\n                if (onlyUnitsTime) {\n                  if (diff === 0) {\n                    timeDiff = getTimeDiffDescription(diff + 1, 'minute', 1, onlyUnitsTime);\n                  } else {\n                    timeDiff = getTimeDiffDescription(diff, 'minute', 1, onlyUnitsTime);\n                  }\n                } else {\n                  timeDiff = getTimeDiffDescription(diff, 'second', 2000, onlyUnitsTime);\n                  if (!timeDiff) {\n                    timeDiff = bizagi.localization.getResource(\"workportal-relativetime-momentago\");\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return timeDiff;\n\n    /*\r\n                      * Get Time Difference\r\n                      */\n    function getTimeDiffDescription(diff, unit, timeDivisor, onlyUnitsTime) {\n      var unitAmount = (diff / timeDivisor).toFixed(0);\n\n      if (unitAmount > 0) {\n        if (onlyUnitsTime) {\n          return unitAmount == 1 ? bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount) : bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount);\n        } else {\n          var resourceAgo = bizagi.localization.getResource(\"workportal-relativetime-ago\");\n          return unitAmount == 1 ? resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount)) : resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount));\n        }\n\n      } else {\n        return null;\n      }\n    }\n  };\n\n  /*\r\n      *   compareDates(date1,date1format,date2,date2format)\r\n      *   Compare two date strings to see which is greater.\r\n      *   Returns:\r\n      *   1 if date1 is greater than date2\r\n      *   0 if date2 is greater than date1 of if they are the same\r\n      *  -1 if either of the dates is in an invalid format\r\n      */\n  this.compareDates = function (date1, dateformat1, date2, dateformat2) {\n    var d1 = getDateFromFormat(date1, dateformat1);\n    var d2 = getDateFromFormat(date2, dateformat2);\n    if (d1 == 0 || d2 == 0) {\n      return -1;\n    } else if (d1 > d2) {\n      return 1;\n    }\n    return 0;\n  };\n  /*\r\n      *   getDifferenceBetweenDates(date1,date2, unit)\r\n      *   Compare two date objects to see difference between them. The number result by unit specified.\r\n      *\r\n      *   Returns:\r\n      *   Difference value between two dates.\r\n      *   Message string if either of the dates is in an invalid format\r\n      */\n  this.getDifferenceBetweenDates = function (date1, date2, unit) {\n    if (date1 instanceof Date && date1 instanceof Date) {\n      switch (unit) {\n        case \"seconds\":\n          return (date2.getTime() - date1.getTime()) / 1000;\n        case \"milliseconds\":\n          return date2.getTime() - date1.getTime();\n        default:\n          return \"unit is not Defined\";}\n\n    } else {\n      return \"one param not is Date\";\n    }\n\n  };\n  /*\r\n      *   formatDate (date_object, format)\r\n      *   Returns a date in the output format specified.\r\n      *   The format string uses the same abbreviations as in getDateFromFormat()\r\n      */\n  this.formatDate = function (date, format, i18n) {\n    // Check if date is valid\n    if (!bizagi.util.isValidDate(date) || date == 0) {\n      return \"\";\n    }\n\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    format = format + \"\";\n    var result = \"\";\n    var i_format = 0;\n    var c;\n    var token;\n    var y = date.getFullYear() + \"\";\n    var M = date.getMonth() + 1;\n    var d = date.getDate();\n    var E = date.getDay();\n    var H = date.getHours();\n    var m = date.getMinutes();\n    var s = date.getSeconds();\n    var f = date.getMilliseconds();\n    // Convert real date parts into formatted versions\n    var value = new Object();\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    if (y.length < 4 || y.charAt(0) === \"-\" && y.length < 5) {\n      y = \"\" + (y - 0 + 1900);\n    }\n    value[\"y\"] = \"\" + y;\n    value[\"yyyy\"] = y;\n    value[\"yy\"] = y.substring(2, 4);\n    value[\"M\"] = M;\n    value[\"MM\"] = this.LZ(M);\n    value[\"MMM\"] = monthNames[M + 11];\n    value[\"MMMM\"] = monthNames[M - 1];\n    value[\"NNN\"] = monthNames[M + 11];\n    value[\"d\"] = d;\n    value[\"dd\"] = this.LZ(d);\n    value[\"ddd\"] = dayNames[E + 7];\n    value[\"dddd\"] = dayNames[E];\n    value[\"E\"] = dayNames[E + 7];\n    value[\"EE\"] = dayNames[E];\n    value[\"H\"] = H;\n    value[\"HH\"] = this.LZ(H);\n    value[\"tt\"] = H < 12 ? \"am\" : \"pm\";\n    value[\"TT\"] = H < 12 ? \"AM\" : \"PM\";\n\n\n    if (H == 0) {\n      value[\"h\"] = 12;\n    } else if (H > 12) {\n      value[\"h\"] = H - 12;\n    } else {\n      value[\"h\"] = H;\n    }\n    value[\"hh\"] = this.LZ(value[\"h\"]);\n    if (H > 11) {\n      value[\"K\"] = H - 12;\n    } else {\n      value[\"K\"] = H;\n    }\n    value[\"k\"] = H + 1;\n    value[\"KK\"] = this.LZ(value[\"K\"]);\n    value[\"kk\"] = this.LZ(value[\"k\"]);\n    if (H > 11) {\n      value[\"a\"] = \"PM\";\n    } else {\n      value[\"a\"] = \"AM\";\n    }\n    value[\"m\"] = m;\n    value[\"mm\"] = this.LZ(m);\n    value[\"s\"] = s;\n    value[\"ss\"] = this.LZ(s);\n    value[\"FFF\"] = f;\n\n    while (i_format < format.length) {\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      if (value[token] != null) {\n        result = result + value[token];\n      } else {\n        result = result + token;\n      }\n    }\n    return result;\n  };\n  /*\r\n      *   getDateFromFormat( date_string , format_string )\r\n      *\r\n      *   This function takes a date string and a format string. It matches\r\n      *   If the date string matches the format string, it returns the \r\n      *   getTime() of the date. If it does not match, it returns 0.\r\n      */\n  this.getDateFromFormat = function (val, format, i18n) {\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    val = val + \"\";\n    format = format + \"\";\n    var i_val = 0;\n    var i_format = 0;\n    var c;\n    var token;\n    var x = 0,\n    y = 0;\n    var now = new Date();\n    var year = now.getYear();\n    var month = now.getMonth() + 1;\n    var date = 1;\n    var hh = now.getHours();\n    var mm = now.getMinutes();\n    var ss = now.getSeconds();\n    var FFF = now.getMilliseconds();\n    var ampm = \"\";\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    while (i_format < format.length) {\n      // Get next token from format string\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      // Extract contents of value based on format token\n      if (token == \"yyyy\" || token == \"yy\" || token == \"y\") {\n        if (token == \"yyyy\") {\n          x = 4;\n          y = 4;\n        }\n        if (token == \"yy\") {\n          x = 2;\n          y = 2;\n        }\n        if (token == \"y\") {\n          x = 2;\n          y = 4;\n        }\n        year = _getInt(val, i_val, x, y);\n        if (year == null) {\n          return 0;\n        }\n        i_val += year.length;\n        if (year.length == 2) {\n          if (year > 70) {\n            year = 1900 + (year - 0);\n          } else {\n            year = 2000 + (year - 0);\n          }\n        }\n      } else if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\") {\n        month = 0;\n        for (var i = 0; i < monthNames.length; i++) {\n          var month_name = monthNames[i];\n          if (val.substring(i_val, i_val + month_name.length).toLowerCase() == month_name.toLowerCase()) {\n            if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\" && i > 11) {\n              month = i + 1;\n              if (month > 12) {\n                month -= 12;\n              }\n              i_val += month_name.length;\n              break;\n            }\n          }\n        }\n\n        //This is because bizagi assumes MM and M like integers in some cases\n        if (month == 0) {\n          month = _getInt(val, i_val, 1, 2);\n          if (month == null || month < 1 || month > 12) {\n            return 0;\n          }\n          i_val += month.length;\n        }\n\n        if (month < 1 || month > 12) {\n          return 0;\n        }\n      } else if (token == \"dddd\" || token == \"EE\" || token == \"E\") {\n        for (var j = 0; j < dayNames.length; j++) {\n          var day_name = dayNames[j];\n          if (val.substring(i_val, i_val + day_name.length).toLowerCase() == day_name.toLowerCase()) {\n            i_val += day_name.length;\n            break;\n          }\n        }\n      } else if (token == \"MM\" || token == \"M\") {\n        month = _getInt(val, i_val, 1, 2);\n        if (month == null || month < 1 || month > 12) {\n          return 0;\n        }\n        i_val += month.length;\n      } else if (token == \"dd\" || token == \"d\") {\n        date = _getInt(val, i_val, 1, 2);\n        if (date == null || date < 1 || date > 31) {\n          return 0;\n        }\n        i_val += date.length;\n      } else if (token == \"hh\" || token == \"h\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 12) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"HH\" || token == \"H\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 23) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"KK\" || token == \"K\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 11) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"kk\" || token == \"k\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 24) {\n          return 0;\n        }\n        i_val += hh.length;\n        hh--;\n      } else if (token == \"mm\" || token == \"m\") {\n        mm = _getInt(val, i_val, token.length, 2);\n        if (mm == null || mm < 0 || mm > 59) {\n          return 0;\n        }\n        i_val += mm.length;\n      } else if (token == \"ss\" || token == \"s\") {\n        ss = _getInt(val, i_val, token.length, 2);\n        if (ss == null || ss < 0 || ss > 59) {\n          return 0;\n        }\n        i_val += ss.length;\n      } else if (token == \"FFF\") {\n        ff = _getInt(val, i_val, token.length, 3);\n        if (ff == null || ff < 0 || ff > 999) {\n          return 0;\n        }\n        i_val += ff.length;\n      } else if (token == \"a\" || token == \"tt\") {\n        if (val.substring(i_val, i_val + 2).toLowerCase() == \"am\") {\n          ampm = \"AM\";\n        } else if (val.substring(i_val, i_val + 2).toLowerCase() == \"pm\") {\n          ampm = \"PM\";\n        } else {\n          return 0;\n        }\n        i_val += 2;\n      } else {\n        if (val.substring(i_val, i_val + token.length) != token) {\n          return 0;\n        } else {\n          i_val += token.length;\n        }\n      }\n    }\n\n    // Is date valid for month?\n    if (month == 2) {\n      // Check for leap year\n      if (year % 4 == 0 && year % 100 != 0 || year % 400 == 0) {// leap year\n        if (date > 29) {\n          return 0;\n        }\n      } else {\n        if (date > 28) {\n          return 0;\n        }\n      }\n    }\n    if (month == 4 || month == 6 || month == 9 || month == 11) {\n      if (date > 30) {\n        return 0;\n      }\n    }\n    // Correct hours value\n    if (hh < 12 && ampm == \"PM\") {\n      hh = hh - 0 + 12;\n    } else if (hh > 11 && ampm == \"AM\") {\n      hh -= 12;\n    }\n    var newdate = new Date(year, month - 1, date, hh, mm, ss);\n    return newdate;\n\n    /*\r\n                     *   Utility method for parsing in getDateFromFormat()\r\n                     */\n    function _isInteger(_val) {\n      var digits = \"1234567890\";\n      for (var k = 0; k < _val.length; k++) {\n        if (digits.indexOf(_val.charAt(k)) == -1) {\n          return false;\n        }\n      }\n      return true;\n    };\n    /*\r\n        *   Utility method for parsing in getDateFromFormat()\r\n        */\n    function _getInt(str, l, minlength, maxlength) {\n      for (var m = maxlength; m >= minlength; m--) {\n        var _token = str.substring(l, l + m);\n        if (_token.length < minlength) {\n          return null;\n        }\n        if (_isInteger(_token)) {\n          return _token;\n        }\n      }\n      return null;\n    };\n  };\n  /*\r\n      * parseDate( date_string [, prefer_euro_format] )\r\n      *\r\n      * This function takes a date string and tries to match it to a\r\n      * number of possible date formats to get the value. It will try to\r\n      * match against the following international formats, in this order:\r\n      * y-M-d   MMM d, y   MMM d,y   y-MMM-d   d-MMM-y  MMM d\r\n      * M/d/y   M-d-y      M.d.y     MMM-d     M/d      M-d\r\n      * d/M/y   d-M-y      d.M.y     d-MMM     d/M      d-M\r\n      * A second argument may be passed to instruct the method to search\r\n      * for formats like d/M/y (european format) before M/d/y (American).\r\n      * Returns a Date object or null if no patterns match.\r\n      */\n  this.parseDate = function (val) {\n    var preferEuro = arguments.length == 2 ? arguments[1] : false;\n    var generalFormats = new Array('y-M-d', 'MMM d, y', 'MMM d,y', 'y-MMM-d', 'd-MMM-y', 'MMM d');\n    var monthFirst = new Array('M/d/y', 'M-d-y', 'M.d.y', 'MMM-d', 'M/d', 'M-d');\n    var dateFirst = new Array('d/M/y', 'd-M-y', 'd.M.y', 'd-MMM', 'd/M', 'd-M');\n    var checkList = new Array(generalFormats, preferEuro ? dateFirst : monthFirst, preferEuro ? monthFirst : dateFirst);\n    var d;\n    for (var i = 0; i < checkList.length; i++) {\n      var l = window[checkList[i]];\n      for (var j = 0; j < l.length; j++) {\n        d = getDateFromFormat(val, l[j]);\n        if (d != 0) {\n          return new Date(d);\n        }\n      }\n    }\n    return null;\n  };\n  /*\r\n      *   Method to analyze a time format and checks separator, and hour format, and seconds\r\n      */\n  this.analyzeTimeFormat = function (timeFormat) {\n    var i = 0;\n    var c;\n    // Define return object\n    var returnObj = {\n      show24Hours: false,\n      showSeconds: false,\n      separator: \":\" };\n\n    // Analize format\n    var token,lastToken = \"\";\n    while (i < timeFormat.length) {\n      // Get next token from format string\n      c = timeFormat.charAt(i);\n      token = \"\";\n      while (timeFormat.charAt(i) == c && i < timeFormat.length) {\n        token += timeFormat.charAt(i++);\n      }\n\n      // Extract contents of value based on format token\n      if (token == \"hh\" || token == \"h\") {\n        lastToken = token;\n        returnObj.show24Hours = false;\n      } else if (token == \"HH\" || token == \"H\") {\n        lastToken = token;\n        returnObj.show24Hours = true;\n      } else if (token == \"mm\" || token == \"m\") {\n        lastToken = token;\n      } else if (token == \"ss\" || token == \"s\") {\n        lastToken = token;\n        returnObj.showSeconds = true;\n      } else if (token == \"a\") {\n        lastToken = token;\n      } else {\n        if (lastToken.toUpperCase() == \"H\" || lastToken.toUpperCase() == \"HH\") {\n          returnObj.separator = token;\n        }\n      }\n    }\n\n    return returnObj;\n  };\n  this.getDateFromInvariant = function (value, showTime) {\n    value = value == null ? \"\" : value;\n    value = typeof value != \"string\" ? value.toString() : value;\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" H:mm:ss\" : \"\");\n    if (showTime) {\n      if (value && (value.toLowerCase().indexOf(\"am\") > 0 || value.toLowerCase().indexOf(\"pm\") > 0)) {\n        INVARIANT_FORMAT = \"MM/dd/yyyy h:mm:ss a\";\n      }\n    }\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    } else if (date == 0 && showTime && value != null && value != \"\") {\n      INVARIANT_FORMAT = \"MM/dd/yyyy\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n      date.setHours(0, 0, 0, 0);\n    }\n\n    return date;\n  };\n  this.formatInvariant = function (date, showTime) {\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" HH:mm:ss\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, INVARIANT_FORMAT);\n    return formattedDate;\n  };\n  this.getDateFromISO = function (value, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    // If the date could not be parsed, try it out with seconds\n    if (date == 0 && showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm:ss\" : \"\");\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    }\n\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd HH:mm\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      // If the date could not be parsed, try it out with seconds\n      if (date == 0) {\n        ISO_FORMAT = \"yyyy-MM-dd HH:mm:ss\";\n        date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      }\n    }\n\n    return date;\n  };\n  this.formatISO = function (date, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, ISO_FORMAT);\n    return formattedDate;\n  };\n\n  this.formatISO8601 = function (dateObject, restartTimeToMidnight) {\n    var restartTimeToMidnight = restartTimeToMidnight || false;\n    var ISO_FORMAT8601 = \"yyyy-MM-ddTHH:mm:ss\";\n    if (restartTimeToMidnight) {\n      dateObject.setHours(0, 0, 0, 0);\n    }\n    return bizagi.util.dateFormatter.formatDate(dateObject, ISO_FORMAT8601);\n  };\n\n  this.isFormatISO8601 = function (stringDate) {\n    var ISO_8601_WITH_TIME = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n    return ISO_8601_WITH_TIME.test(stringDate);\n  };\n\n  this.sleep = function (delay) {\n    // Delay in miliseconds\n    var start = new Date().getTime();\n    while (new Date().getTime() < start + delay) {\n      // wait\n    }\n  };\n  this.getDateFormatByDatePickerJqueryUI = function () {\n    return bizagi.localization.getResource(\"dateFormat\").replace(\"yyyy\", \"yy\");\n  };\n}();\n\nbizagi.util.sleepUntil = function (callback, delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepUntil() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      var continueWaiting = !callback();\n      if (!continueWaiting) {\n        def.resolve();\n        clearTimeout(timeout);\n        return;\n      } else\n      internalSleepUntil(name);\n    }, delay);\n  }\n  internalSleepUntil();\n  return def.promise();\n};\n\nbizagi.util.sleepFor = function (delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepFor() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      def.resolve();\n      clearTimeout(timeout);\n    }, delay);\n  }\n  internalSleepFor();\n  return def.promise();\n};\n\n\n/*\r\n    * Use localStorage in html5 verfiy supports and operations \r\n    * http://dev.w3.org/html5/webstorage/#dom-storage-setitem\r\n    */\n\nbizagi.util.browserSupportLocalStorage = function () {\n  try {\n    return 'localStorage' in window && window['localStorage'] !== null;\n  } catch (e) {\n    return false;\n  }\n};\n/*\r\n    *set the item  in the local storage\r\n    */\nbizagi.util.setItemLocalStorage = function (key, value) {\n  if (bizagi.util.browserSupportLocalStorage()) {\n    localStorage.setItem(key, value);\n    return true;\n  } else {\n    return false;\n  }\n};\n\nbizagi.util.getItemLocalStorage = function (key) {\n  return localStorage.getItem(key);\n};\n\nbizagi.util.removeItemLocalStorage = function (key) {\n  localStorage.removeItem(key);\n};\n\nbizagi.util.clearLocalStorage = function () {\n  if (bizagi.util.browserSupportLocalStorage())\n  localStorage.clear();\n};\n\nfunction printf(msg) {\n  var args = Array.prototype.slice.call(arguments, 1),arg;\n  return msg.replace(/(%[disv])/g, function (a, val) {\n    arg = args.shift();\n    if (arg !== undefined) {\n      switch (val.charCodeAt(1)) {\n        case 100:\n          return +arg; // d\n        case 105:\n          return Math.round(+arg); // i\n        case 115:\n          return String(arg); // s\n        case 118:\n          return arg; // v\n      }\n    }\n    return val;\n  });\n}\n\n\n// Fix problem with console.log when we forgot to remove it\n(function () {\n  var environment = typeof BIZAGI_ENVIRONMENT != \"undefined\" ? BIZAGI_ENVIRONMENT : \"release\";\n  if (environment == 'debug') {\n    if (_typeof(window.console) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    }\n  } else {\n    if ((typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    } else if (bizagiConfig && !bizagiConfig.showConsoleLog) {\n      console.log = function (a) {/*Nothing to do*/};\n    }\n  }\n})();\n\n\nbizagi.util.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"ui-widget-overlay ui-front\" style=\"z-index: 1001;\"><div class=\"ui-bizagi-loading-message-center\" style=\"position: absolute; top: 48%; left: 48%; display: ;\"><div class=\"ui-bizagi-loading-icon\"></div></div></div>');\n};\nbizagi.util.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".ui-widget-overlay:first\", elementToapply).remove();\n};\n\nbizagi.util.smartphone.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"bz-util-loading-container\"> <div class=\"ui-bizagi-loading-icon bz-util-loading\"></div>  </div>');\n};\nbizagi.util.smartphone.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".bz-util-loading-container\", elementToapply).remove();\n};\n\n\n\n/**\r\n    * determines whether the element in the browser supports the event we are looking for, eg 'paste', 'input', 'blur', etc. More info check modernizer.js.\r\n    * @param  {string|*}           eventName  is the name of an event to test for (e.g. \"resize\")\r\n    * @param  {(Object|string|*)=} element    is the element|document|window|tagName to test on\r\n    * @return {boolean}\r\n    */\nbizagi.util.isEventSupported = function (eventName, element) {\n  var needsFallback = !('onblur' in document.documentElement);\n  var isSupported;\n\n  if (!eventName) {\n    return false;\n  }\n  if (!element || typeof element === 'string') {\n    element = document.createElement(element || 'div');\n  }\n\n  // Testing via the `in` operator is sufficient for modern browsers and IE.\n  // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n  // \"resize\", whereas `in` \"catches\" those.\n  eventName = 'on' + eventName;\n  isSupported = eventName in element;\n\n  // Fallback technique for old Firefox - bit.ly/event-detection\n  if (!isSupported && needsFallback) {\n    if (!element.setAttribute) {\n      // Switch to generic element if it lacks `setAttribute`.\n      // It could be the `document`, `window`, or something else.\n      element = document.createElement('div');\n    }\n    if (element.setAttribute && element.removeAttribute) {\n      element.setAttribute(eventName, '');\n      isSupported = typeof element[eventName] === 'function';\n\n      if (element[eventName] !== undefined) {\n        // If property was created, \"remove it\" by setting value to `undefined`.\n        element[eventName] = undefined;\n      }\n      element.removeAttribute(eventName);\n    }\n  }\n  return isSupported;\n};\n\n\n/**\r\n    * Execute deferreds in order\r\n    * @example var a = new bizagiQueue(); a.add(function);\r\n    * \r\n    */\nfunction bizagiQueue() {\n  var self = this;\n  var queue = [];\n  var async;\n  var sync;\n\n  self.length = function () {\n    return queue.length;\n  };\n\n  self.add = function (callback) {\n    if (!sync) {\n      sync = true;\n      async = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.addParallel = function (callback) {\n    if (!async) {\n      async = true;\n      sync = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    // Put a parallel on last item\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.execute = function () {\n    var starter = new $.Deferred();\n    var promise = starter.promise();\n    var queueLength = queue.length;\n    for (var i = 0; i < queueLength; i++) {\n      promise = promise.pipe(function () {\n        var element = queue.shift();\n        return $.when.apply($, $.map(element.callbacks, function (callback) {\n          // Function support\n          if (typeof callback == \"function\") {\n            var deferred = $.Deferred();\n            $.when(callback()).done(function () {\n              deferred.resolve();\n            }).fail(function () {\n              deferred.reject();\n            });\n            return deferred.promise();\n          }\n          // Deferred support\n          return callback;\n        }));\n      });\n    }\n\n    starter.resolve();\n    promise = promise.done(function () {\n      // Reset queue\n      queue = [];\n    });\n\n    return promise;\n  };\n}\n\n\n/**\r\n   * Calculate circular dependencies \r\n   * \r\n   * @example var a = new bizagi.circularDependencies(); a.addNode('name',obj);\r\n   * a.resolve(node);\r\n   * \r\n   */\n//TODO: DEPL - Check this because we agreed to a much simpler solution\nbizagi.circularDependencies = function () {\n  var circularDependencies = new Function();\n  var self = circularDependencies.prototype;\n  self.list = []; //[{ name: \"root\", obj: {}, nodeObj: {}, childs: {} }];\n  self.lastNodeAdded; // Undefined reference\n\n  self.addNode = function (name, obj) {\n    var OBJ = JSON.encode(obj);\n    var foundObjChildNode = _search(name, OBJ);\n    if (foundObjChildNode) {\n      var lastNode = self.lastNodeAdded || self.list[self.list.length - 1];\n      lastNode.nodeObj.addChild(foundObjChildNode.nodeObj);\n      self.lastNodeAdded = foundObjChildNode;\n    } else {\n      var node = new _addNode(name, OBJ);\n      self.list.push({\n        name: name,\n        obj: OBJ,\n        nodeObj: node,\n        timeStamp: new Date().getTime() });\n\n      return node;\n    }\n  };\n\n  self.resolve = function (node, resolved, seen) {\n    // if dont setted node variable, take the first one -> root\n    node = node || _getFirstNodeWithChilds() || self.list[0].nodeObj;\n    var resolveDependencies = new _resolve(node, resolved, seen);\n    return resolveDependencies;\n  };\n\n  var _resetList = function _resetList() {\n    self.list = [];\n  };\n\n  var _getFirstNodeWithChilds = function _getFirstNodeWithChilds() {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].nodeObj.childs.length > 0) {\n        return self.list[i].nodeObj;\n      }\n    }\n    return self.list.length > 0 ? self.list[0].nodeObj : {};\n  };\n\n  var _search = function _search(name, obj) {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].name == name) {\n        // remove tag element\n        var now = new Date().getTime();\n        var timeToKeep = 1000; //milliseconds\n        if (self.list[i].timeStamp + timeToKeep < now) {\n          //remove element from the list\n          self.list.splice(i, 1);\n        } else if (self.list[i].obj == obj) {\n          return self.list[i];\n        }\n      }\n    }\n    return false;\n  };\n\n  var _addNode = function (name, obj) {\n    name = name || \"\";\n    obj = obj || {};\n    var node = function node(name, obj) {\n      this.name = name;\n      this.obj = obj;\n      this.childs = [];\n    };\n    var self = node.prototype;\n\n    self.addChild = function (node) {\n      this.childs.push(node);\n    };\n\n    return node;\n  }();\n\n  var _resolve = function (node, resolved, seen) {\n    var resolve = function resolve(node, resolved, seen) {\n      this.node = node || {};\n      this.node.childs = this.node.childs || [];\n      this.resolved = resolved || [];\n      this.seen = seen || [];\n\n      this.seen.push(this.node);\n\n      for (var i = 0; i < this.node.childs.length; i++) {\n        if (!self.hasObject(this.node.childs[i], this.resolved)) {\n          if (self.hasObject(this.node.childs[i], this.seen)) {\n            //throw new _error(\"error node:\" + node.name + \" -> \" + node.childs[i].name);\n            _resetList();\n            var error = {\n              dependencyFrom: this.node.name,\n              dependencyFromObj: this.node.obj,\n              dependencyTo: this.node.childs[i].name,\n              dependencyToObj: this.node.childs[i].obj,\n              path: this.seen };\n\n\n            return {\n              error: $.extend({\n                standardError: {\n                  status: \"error\",\n                  responseText: JSON.encode({ message: self.makeErrorMessage(error), type: \"alert\" }) },\n\n                multiactionError: {\n                  message: self.makeErrorMessage(error),\n                  type: \"alert\" } },\n\n              error) };\n\n          } else {\n            return resolve(this.node.childs[i], this.resolved, this.seen);\n          }\n        }\n      }\n      if (this.resolved) {\n        this.resolved.push(this.node);\n      }\n    };\n\n    var self = resolve.prototype;\n\n    self.hasObject = function (toSearch, collection) {\n\n      for (var i = 0; i < collection.length; i++) {\n        if (collection[i].name == toSearch.name) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    self.makeErrorMessage = function (error) {\n      var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n      return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n\n      /*  return {\r\n                                                                                  responseText: parsedMessage,\r\n                                                                                  message: parsedMessage,\r\n                                                                                  extraInfo: error\r\n                                                                              };*/\n    };\n\n    return resolve;\n  }();\n\n  return self;\n};\n\n/**\r\n    * Apply css string style (one or more). It works to add or override a specific style even if it has !important\r\n    * \r\n    * @example bizagi.util.cssExtended($('.myClass'), 'display:none!important;color:red');\r\n    * \r\n    */\nbizagi.util.cssExtended = function (instance, options) {\n  var cssToAdd = options.split(\";\");\n\n  for (i = 0; i < cssToAdd.length; i++) {\n    if (cssToAdd[i] != \"\") {\n      bizagi.util.cssExtendedApplyChanges(instance, cssToAdd[i]);\n    }\n  }\n\n};\n\n/**\r\n    * Apply the style change \r\n    * \r\n    */\nbizagi.util.cssExtendedApplyChanges = function (instance, option) {\n\n  for (var i = 0; i < instance.length; i++) {\n    var $this = $(instance[i]);\n    var attrToAdd = option.split(\":\")[0];\n\n    if ($this.attr('style')) {\n      var tmpStyle = $this.attr('style').split(\";\");\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      for (j = 0; j < tmpStyle.length; j++) {\n        var cssProperty = tmpStyle[j].split(\":\");\n\n        if ($.trim(cssProperty[0]) != attrToAdd && $.trim(cssProperty[0]) != \"\") {\n          arrProperties.push(cssProperty[0] + \":\" + cssProperty[1] + \";\");\n        }\n        resultProperties = JSON.stringify(arrProperties).replace(/\\\",\"/g, ' ').replace(/\\[\"/g, ' ').replace(/\\\"]/g, ' ');\n      }\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    } else if ($this.css(attrToAdd)) {\n      var tmpStyle = $this.css(attrToAdd);\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      arrProperties.push(option + \";\");\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    }\n  }\n};\n\n/*\r\n    * Find element to make scroll top\r\n    */\nbizagi.util.scrollTop = function (canvas) {\n  if (canvas && canvas[0]) {\n    while (canvas[0].tagName !== \"HTML\" && canvas.css(\"overflow-y\") != \"scroll\" && canvas.css(\"overflow-y\") != \"auto\" && canvas.parent().length > 0) {\n      canvas = canvas.parent();\n    }\n  }\n  return canvas;\n};\n\n/*\r\n    * Sort a JSON array by attribute and order type (ascendant or descendant)\r\n    * example: data = [ {attr1:val1, attr2:val2} , {attr1:val3, attr2:val4 },... ]  , key = \"attr2\" , way = \"asc\"\r\n    */\nbizagi.util.sortJSON = function (data, key, way) {\n  return data.sort(function (a, b) {\n    var x = a[key];\n    var y = b[key];\n    if (way === 'asc') {\n      return x < y ? -1 : x > y ? 1 : 0;\n    }\n    if (way === 'desc') {\n      return x > y ? -1 : x < y ? 1 : 0;\n    }\n  });\n};\n\n/*\r\n    * Reducir formato numrico a notacin abrevidad (K:1000 - M:1000000 - B:1000000000)\r\n    */\nbizagi.util.shortNumber = function (number) {\n  var newNumber = number.toString();\n  var lenghtNumber = newNumber.length;\n\n  if (lenghtNumber >= 4 && lenghtNumber < 7) {\n    newNumber = '+' + newNumber.charAt(0) + 'K';\n  } else if (lenghtNumber >= 7 && lenghtNumber < 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'M';\n  } else if (lenghtNumber >= 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'B';\n  }\n\n  return '&nbsp;&nbsp;&nbsp;' + newNumber;\n};\n\n/*\r\n    * Aplicar formato salto de linea\r\n    */\nbizagi.util.replaceLineBreak = function (string) {\n  return typeof string === \"string\" ? string.replace(/\\r\\n|\\r|\\n|<br>|<br\\/>/g, \"<br/>\") : string;\n};\n\n// http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/\nbizagi.util.escapeHtml = function (str) {\n  var div = document.createElement('div');\n  div.appendChild(document.createTextNode(str));\n  return div.innerHTML;\n};\n\n/*\r\n    * Aplicar formato Tipo moneda\r\n    */\nbizagi.util.formatMonetaryCell = function (value) {\n  return bizagi.util.formatMonetaryValue(value);\n};\n\n/*\r\n    * Aplicar formato tipo decimal\r\n    */\nbizagi.util.formatDecimalCell = function (value) {\n  return bizagi.util.formatDecimalValue(value);\n};\n\n/**\r\n    * Add format to date value\r\n    */\nbizagi.util.formatDateValue = function (value) {\n  return bizagi.util.formatDateFromInvariantStringDate(value);\n};\n\n/**\r\n    * Add format to money value\r\n    * @param value\r\n    * @returns {*|string|string}\r\n    */\nbizagi.util.formatMonetaryValue = function (value) {\n  return bizagi.util.formatMoney(value, BIZAGI_DEFAULT_CURRENCY_INFO);\n};\n\n/**\r\n    * Add format for decimal value\r\n    * @param value\r\n    * @returns {*}\r\n    */\nbizagi.util.formatDecimalValue = function (value) {\n  var decimalFormat;\n  var externalDecimalFormat = {\n    decimalSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator,\n    digitGroupSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator,\n    roundToDecimalPlace: BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n  var numberValue = bizagi.util.formatDecimal(value, decimalFormat);\n  if (bizagi.override.removeTrailingZeros === true) {\n    var positive = true;\n    if (numberValue.toString().indexOf(\")\") != -1) {\n      positive = false;\n      numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n    }\n    var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"$1\");\n    re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"\");\n\n\n    if (!positive) numberValue = \"(\" + numberValue + \")\";\n  }\n  return numberValue;\n};\n\n/*\r\n    * Crea notificacion de corta duracion, principalmente uilizada en para los procesos offline\r\n    */\nbizagi.util.showNotification = function (params) {\n  var params = params || {};\n  var div_sync = $('<div id=\"sync-notification\" class=\"bz-cm-icon\"></div>').text(params.text || \"\");\n  div_sync.appendTo($('body'));\n  div_sync.fadeIn(1500, function () {\n    div_sync.stop();\n  });\n\n  div_sync.fadeOut(2000, function () {\n    div_sync.remove();\n  });\n};\n\n/*\r\n    * Verificar el estado de la conexin\r\n    */\nbizagi.util.isModeOnline = function () {\n  return typeof bizagi.context.isOfflineForm !== \"undefined\" && !bizagi.context.isOfflineForm;\n};\n\nbizagi.util.dispose = function (obj) {\n  for (key in obj) {\n    if (_typeof(obj[key]) == \"object\") delete obj[key];\n    if (typeof obj[key] == \"function\") {obj[key] = null;delete obj[key];}\n  }\n};\n\nbizagi.util.arrayEach = function (array, callback) {\n  if (!!array) {\n    if (Object.prototype.toString.apply(array) === \"[object Array]\" && Object.prototype.toString.apply(callback) === \"[object Function]\") {\n      var index, value;\n      for (index in array) {\n        if (array.hasOwnProperty(index)) {\n          value = callback.call(array[index], index, array[index]);\n          if (value === false) {\n            return;\n          }\n        }\n      }\n    } else {\n      $.each(array, callback);\n    }\n  }\n};\n\n//remove all the character except the +, - and decimal point\nbizagi.util.getStandardNotation = function (number, decimalSymbol) {\n  var plusCharacter = '+';\n  var minusCharacter = '-';\n  var decimalSymbol = decimalSymbol || '.';\n  var expSymbol = 'e';\n  var tmp = '';\n  //remove all the character except the +, -, decimal point and the numbers\n  var decimalNumber = false;\n  var exponentialNumber = false;\n  number = (number.length > 0 ? number.toString().toLowerCase() : '').replace(/ /g, '');\n  for (var i = 0; i < number.length; i++) {\n    if ((number[i] === plusCharacter || number[i] === minusCharacter) && (i === 0 || number[i - 1] == expSymbol)) {\n      tmp += number[i];\n    } else if (!isNaN(Number(number[i]))) {\n      tmp += number[i];\n    } else if (number[i] === decimalSymbol && !decimalNumber) {\n      tmp += number[i];\n      decimalNumber = true;\n    } else if (number[i] === expSymbol && !exponentialNumber) {\n      tmp += number[i];\n      exponentialNumber = true;\n    }\n  }\n  return tmp;\n};\n//Return it in normalized scientific notation\nbizagi.util.scientificNotationFormat = function (number, decimalSymbol, sdLimit, expMinLimit, expMaxLimit) {\n  decimalSymbol = decimalSymbol || '.';\n  number = bizagi.util.getStandardNotation(number, decimalSymbol);\n  sdLimit = sdLimit > 0 ? sdLimit : 38;\n  expMinLimit = expMinLimit > 0 ? expMinLimit : -125;\n  expMaxLimit = expMaxLimit > 0 ? expMaxLimit : 125;\n  var expSimbol = 'e';\n  var sNregex = new RegExp('[0-9]+(' + decimalSymbol + '[0-9]+)?(e[+-]?[0-9]+)?');\n  var sNFormat = number.match(sNregex);\n\n  //get que prefix\n  var exp = 0;\n\n  var prefix = number[0] === '-' ? number[0] : '';\n  var originalPointIndex = 0;\n\n  number = number.replace(prefix, '');\n\n  //if the number is not in scientific notation\n  if (sNFormat && sNFormat[0] && sNFormat[2]) {\n    var tempParts = sNFormat[0] ? sNFormat[0].replace(sNFormat[2], '').split(decimalSymbol) : '';\n\n    var significantDigits = '';\n    var intPart = '';\n\n    //calculate significant digits\n    //remove zeros at the left\n    tempParts[0] = tempParts[0].replace(/^0+/g, '');\n\n    if (tempParts[0].length > 1) {\n      significantDigits = tempParts[0].slice(1);\n      originalPointIndex = significantDigits.length;\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(sNFormat[1] || '');\n    } else if (tempParts[0].length === 1) {\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(tempParts[1] || '');\n    } else {\n      originalPointIndex = tempParts[1].length;\n      tempParts[1] = tempParts[1].replace(/^0+/g, '');\n      originalPointIndex = tempParts[1].length - 1 - originalPointIndex;\n      intPart = tempParts[1][0];\n      significantDigits = tempParts[1].slice(1);\n    }\n    //remove . and zeros from significant digits\n    significantDigits = significantDigits.replace(decimalSymbol, '').replace(/0+$/g, '');\n\n    if (significantDigits.length >= sdLimit) {\n      significantDigits = significantDigits.slice(0, sdLimit - 1);\n    }\n    exp = Number(sNFormat[2].replace(expSimbol, '')) + originalPointIndex;\n    exp = exp > expMaxLimit ? expMaxLimit : exp < expMinLimit ? expMinLimit : exp;\n    return prefix + intPart + (significantDigits ? decimalSymbol + significantDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n  } else if (number) {\n\n    originalPointIndex = number.indexOf(decimalSymbol);\n    var from = 0;\n    var to = number.length - 1;\n\n    //remove decimal point\n    number = number.replace(decimalSymbol, '');\n\n    //from\n    var i = from;\n    while (!significantFlag) {\n      if (number[i] !== '0' && number[i] !== decimalSymbol) {\n        significantFlag = true;\n        from = i;\n      } else {i++;}\n    }\n    //to\n    var significantFlag = false;\n    var j = to;\n    while (!significantFlag) {\n      if (number[j] !== '0' && number[j] !== decimalSymbol && '-') {\n        significantFlag = true;\n        to = j + 1;\n      } else {j--;}\n    }\n    to = to > sdLimit + from ? sdLimit + from : to;\n    if (originalPointIndex !== -1) {\n      //find significant digits\n      var significantFlag = false;\n      var significantDigits = number.slice(from, to);\n      var pointIndex = from + 1;\n      exp = originalPointIndex - pointIndex;\n      if (significantDigits.length > 0 && !isNaN(Number(significantDigits[0]))) {\n        return prefix + significantDigits[0] + (significantDigits.length > 1 ? decimalSymbol + significantDigits.slice(1) : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n\n    } else {\n      //Int numbers\n      var firstDigit = number.slice(from, from + 1);\n      var restDigits = number.slice(from + 1, number.length);\n      exp = restDigits.length;\n      restDigits = restDigits.replace(/0+$/g, '');\n      if (restDigits.length > sdLimit) {\n        restDigits = number.slice(from + 1, sdLimit + from);\n      }\n      if (Number(firstDigit)) {\n        return prefix + firstDigit + (restDigits.length > 0 ? decimalSymbol + restDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n    }\n  } else {return '';}\n};\n\n/**\r\n    * Remove all backslashes that represent scape of characters\r\n    */\nbizagi.util.stripslashes = function (str) {\n  return str.replace(/\\\\'/g, '\\'').replace(/\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\').replace(/\\\\0/g, '\\0');\n};\n\n/*\r\n    * Validates if the text is a valid opening and closing tags, including classes\r\n    */\nbizagi.util.isHTMLValidText = function (text) {\n  var ex = new RegExp(/<(.|\\n)*?>/g);\n  return ex.test(text);\n};\n\nbizagi.util.resetData = function () {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, { isAuthenticate: \"false\" });\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\nbizagi.util.changeData = function (params) {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, params);\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR MOBILE DEVICE\n// ------------------------------------------------------------------------\n\nbizagi.util.isMobileDevice = function (device) {\n  device = device || bizagi.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\",\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Check is native mobile device\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeMobileDevice = function (device) {\n  return bizagi.util.isMobileDevice(device) && bizagi.util.isNativePluginSupported();\n};\n\n/** \r\n    * Verify mobile device type\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Tablet android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Tablet iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && !(device.indexOf(\"android\") === -1);\n};\n\n\n/**\r\n    * Verify mobile device type\r\n    * @returns {}\r\n    */\nbizagi.util.isSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Smartphone android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Smartphone iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"ios\") !== -1;\n};\n\n/**\r\n    * Check is offline form\r\n    * @param {} container \r\n    * @returns {} \r\n    */\nbizagi.util.isOfflineForm = function (params) {\n  if (!bizagi.util.isMobileDevice() || typeof params === \"undefined\")\n  return false;\n\n  var context = params.context || null;\n  var container = params.container || null;\n\n  var formContainer = container !== null ?\n  container : context !== null ? context.getFormContainer() : null;\n\n  if (formContainer === null)\n  return false;\n\n  var formParams = formContainer.getParams() || {};\n  var isOfflineForm = typeof formParams.isOfflineForm !== \"undefined\" &&\n  bizagi.util.parseBoolean(formParams.isOfflineForm);\n\n  return isOfflineForm;\n};\n\nbizagi.util.detectAndroidVersion = function () {\n  var indexAndroid = navigator.userAgent.toLowerCase().indexOf(\"android\");\n  var androidVersion = navigator.userAgent.toLowerCase().substring(indexAndroid + 8, indexAndroid + 13);\n  androidVersion = androidVersion.replaceAll(\".\", \"\");\n  return Number(androidVersion);\n};\n\nbizagi.util.getPathUrl = function (url) {\n  var solvedUrl = \"\";\n  var locationParts = location.pathname.split(\"/\");\n  var basePath = location.protocol + \"//\" + location.host;\n\n  if (BIZAGI_PATH_TO_BASE[0] == \"/\") {\n    solvedUrl = basePath + BIZAGI_PATH_TO_BASE + url;\n  } else {\n    var pathToBaseBackwards = BIZAGI_PATH_TO_BASE.split(\"../\").length;\n    for (var i = 0, l = locationParts.length; i < l - pathToBaseBackwards; i++) {\n      basePath += locationParts[i] + \"/\";\n    }\n\n    basePath = basePath[basePath.length - 1] === \"/\" ? basePath : basePath + \"/\";\n    solvedUrl = basePath + url;\n  }\n  return solvedUrl;\n};\n\n/**\r\n    * Get Android version\r\n    * @returns {} \r\n    */\nbizagi.util.getAndroidVersion = function () {\n  var userAgent = navigator.userAgent.toLowerCase();\n  var match = userAgent.match(/android\\s([0-9\\.]*)/);\n\n  return match ? parseFloat(match[1]) : false;\n};\n\n/**\r\n    * Get image path to android device\r\n    * @param {} image \r\n    * @returns {} \r\n    */\nbizagi.util.mobileImagePath = function (image) {\n  var dataImage = image;\n  var version = bizagi.util.getAndroidVersion();\n\n  if (!version)\n  return dataImage;\n\n  if (dataImage.substring(0, 21) === \"content://com.android\" && version <= 4.4) {\n    var photoSplit = dataImage.split(\"%3A\");\n    if (photoSplit.length > 1) {\n      dataImage = \"content://media/external/images/media/\" + photoSplit[1];\n    } else {\n      photoSplit = dataImage.split(\"/\");\n      dataImage = \"content://media/external/images/media/\" + photoSplit[photoSplit.length - 1];\n    }\n  }\n\n  return dataImage;\n};\n\n/**\r\n    * Validate resource \r\n    * @param {} resource resource name\r\n    * @returns {} \r\n    */\nbizagi.util.isValidResource = function (resource) {\n  if (!bizagi.localization) return false;\n  return bizagi.localization.getResource(resource) !== resource;\n};\n\n/***\r\n    * Transform base64 image to blob\r\n    * @b64Data \r\n    * @contentType \r\n    * @sliceSize \r\n    */\nbizagi.util.b64toBlob = function (b64Data, contentType, sliceSize) {\n  contentType = contentType || '';\n  sliceSize = sliceSize || 512;\n\n  var byteCharacters = atob(b64Data);\n  var byteArrays = [];\n\n  for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    var byteNumbers = new Array(slice.length);\n    for (var i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    var byteArray = new Uint8Array(byteNumbers);\n\n    byteArrays.push(byteArray);\n  }\n\n  var blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\n/**\r\n    * Converts an string to a byte array, util in old browsers requests\r\n    * @param str\r\n    */\nbizagi.util.stringToByteArray = function (str) {\n  var byteArray = new Uint8Array(str.length);\n  for (var i = 0; i < str.length; i++) {\n    byteArray[i] = str.charCodeAt(i) & 0xff;\n  }\n  return byteArray;\n};\n\n// ------------------------------------------------------------------------\n// NATIVE-HYBRID ENVIRONMENT\n// ------------------------------------------------------------------------\n\n/** \r\n * Verify the offline forms is enabled\r\n * @returns {} \r\n */\nbizagi.util.hasOfflineFormsEnabled = function () {\n  return typeof BIZAGI_ENABLE_OFFLINE_FORMS !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_OFFLINE_FORMS) === true;\n};\n\n/**\r\n    * \r\n    * Verify the flat design is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isFlatDesignEnabled = function () {\n  return typeof BIZAGI_ENABLE_FLAT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_FLAT) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isMobileGridEnabled = function () {\n  return typeof BIZAGI_ENABLE_MOBILE_GRID !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_MOBILE_GRID) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeHeaderEnabled = function () {\n  return typeof NATIVE_HEADER_ENABLE !== \"undefined\" && bizagi.util.parseBoolean(NATIVE_HEADER_ENABLE) === true;\n};\n\n/**\r\n    * Validate the Quick search is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isQuickSearchEnabled = function () {\n  return typeof BIZAGI_ENABLE_QUICK_SEARCH !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_QUICK_SEARCH) === true;\n};\n\n/** \r\n    * Verify the OAuth2 is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isOAuth2Enabled = function () {\n  return typeof BIZAGI_AUTH_TYPE !== \"undefined\" && BIZAGI_AUTH_TYPE === \"OAuth\";\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.getNativeComponent = function () {\n  return typeof BIZAGI_NATIVE_COMPONENT !== \"undefined\" ? BIZAGI_NATIVE_COMPONENT : \"\";\n};\n\n/**\r\n    * Check server version\r\n    * @returns {}\r\n    */\nbizagi.util.isVersionSupported = function () {\n  var supported = true;\n\n  if (typeof BIZAGI_SERVER_VERSION !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_VERSION)) {\n    var version = BIZAGI_SERVER_VERSION.match(/\\d+\\.\\d+/);\n    supported = version ? parseFloat(version.shift()) >= 11.0 : true;\n  }\n\n  return supported;\n};\n\n/**\r\n    * Cordova componet is supported\r\n    * @returns {} \r\n    */\nbizagi.util.isCordovaSupported = function () {\n  return typeof cordova !== \"undefined\";\n};\n\n/**\r\n    * Native plugin of Cordova is supported \r\n    * @returns {} \r\n    */\nbizagi.util.isNativePluginSupported = function () {\n  return typeof bizagiapp !== \"undefined\";\n};\n\n/**\r\n    * Tablet native\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Smartphone native\r\n    * @returns {} \r\n    */\nbizagi.util.isSmartphoneNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isSmartphoneDevice();\n};\n\n/**\r\n    * Enables accesory bar\r\n    */\nif (bizagi.util.isNativePluginSupported() && window.cordova && window.cordova.plugins.Keyboard) {\n  cordova.plugins.Keyboard.hideKeyboardAccessoryBar(false);\n};\n\n/**\r\n    * Verify real device\r\n    * @returns {} \r\n    */\nbizagi.util.detectRealDevice = function () {\n  var settedDevice = typeof BIZAGI_DEFAULT_DEVICE !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEFAULT_DEVICE) ?\n  BIZAGI_DEFAULT_DEVICE : null;\n\n  BIZAGI_DEFAULT_DEVICE = \"\";\n  var device = bizagi.detectDevice();\n  BIZAGI_DEFAULT_DEVICE = settedDevice;\n\n  return device;\n};\n\n/**\r\n    * Method to detect Android visitors\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroid = function () {\n  return navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n};\n\nbizagi.util.isAndroidDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") > -1;\n};\n\nbizagi.util.isiOSDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") === -1;\n};\n\n\n/**\r\n    * Get server channel\r\n    * @returns {}\r\n    */\nbizagi.util.getChannelType = function () {\n  if (typeof BIZAGI_SERVER_CHANNEL !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_CHANNEL)) {\n    return BIZAGI_SERVER_CHANNEL;\n  }\n  return bizagi.loader.channel || \"\";\n};\n\n/**\r\n    * Check data url\r\n    * @param {} data \r\n    * @returns {} \r\n    */\nbizagi.util.isDataUrl = function (data) {\n  var regex = /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i;\n\n  try {\n    return !!data.toString().match(regex);\n  } catch (error) {}\n\n  return false;\n};\n\n/**\r\n    * Get valid data url\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\n/**\r\n    * Get response message of services\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.processFailMessage = function (data) {\n  var message = data || {};\n\n  try {\n    message = typeof message == \"string\" ? JSON.parse(message) : message;\n    message = message.responseText || message.message || message;\n  } catch (e) {\n    message = data;\n  }\n\n  return message;\n};\n\n/**\r\n    * Get object jSON\r\n    */\nbizagi.util.getErrorFormatted = function (str) {\n  var error = str;\n\n  if (!error) return str;\n\n  if (typeof error == \"string\") {\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n      error = {\n        type: \"error\",\n        code: \"code\",\n        message: str };\n\n    }\n  }\n\n  if (_typeof(error) == \"object\" && (error.message || error.statusText)) {\n    return {\n      type: error.type || \"error\",\n      code: error.code || error.errorCode || error.errorType || error.statusText || \"code\",\n      message: error.message };\n\n  } else {\n    if (error && error.length && error.length >= 1) error = error[0];\n    if (error.responseText) error = error.responseText;\n    if (error.error) error = error.error;\n  }\n\n  return bizagi.util.getErrorFormatted(error);\n};\n/**\r\n    * Disable and enable workportal menu from live process\r\n    */\nvar tmp_block_header = \"<div class='blockHeaderByLiveProcess'></div>\";\nbizagi.util.disableWorkPortalMenu = function () {\n  var blockHeight = $(\"body\").find(\"#ui-bizagi-wp-menu\").height();\n  $(tmp_block_header).prependTo(\"body\");\n  $(\"body\").find(\".blockHeaderByLiveProcess\").css({ \"position\": \"absolute\", \"width\": \"100%\", \"height\": blockHeight + \"px\", \"background\": \"gray\", \"opacity\": \"0.9\", \"z-index\": \"101\" });\n};\n\nbizagi.util.enableWorkPortalMenu = function () {\n  $(\"body\").find(\".blockHeaderByLiveProcess\").detach();\n};\n\n/**\r\n    * this method activates the section of the menu that is sent in the idMenu variable\r\n    */\nbizagi.util.enableMenuSection = function (idMenu) {\n  var menu = new bizagi.workportal.controllers.menu();\n  menu.setActiveSection.apply($(\"#main_menu li#\" + idMenu)[0]);\n};\n\nbizagi.util.getURLWithASlashAtTheEnd = function (url) {\n  var getLastChar = function getLastChar(stringValue) {\n    return stringValue.substr(stringValue.length - 1);\n  };\n  return getLastChar(url) === '/' ? url : url + '/';\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a file\r\n    * validate if the Maintenance Window has started and redirect the user\r\n    * validate if an error is returned\r\n    * rejects defer on download fails\r\n    * IMPORTANT: defer never resolves (technical restriction)\r\n    * @param {String} url \r\n    * @param {Boolean} isCompleteUrl \r\n    * @param {Boolean} showModalOnFail \r\n    */\nbizagi.util.downloadFile = function (url, isCompleteUrl, showModalOnFail) {\n  var _defer = new $.Deferred(),\n  _showModalOnFail = showModalOnFail === undefined ? true : showModalOnFail,\n  _firstURlPart = isCompleteUrl ? \"\" : bizagi.util.getURLWithASlashAtTheEnd(bizagiConfig.applicationUrl),\n  _urlDownload = _firstURlPart + url,\n  _iframeID = \"iframe-download\",\n  _iframeExists = $('#' + _iframeID).length !== 0,\n  _reject = function _reject(jsonResponse, showModal) {\n    if (showModal)\n    bizagi.modalError.show(jsonResponse.message, undefined, false);\n    _defer.reject(jsonResponse);\n  },\n  _onCantDownload = function _onCantDownload() {\n    var that = $(this)[0],\n    defaultMessage = bizagi.localization.getResource(\"workportal-general-error-message-contact-administrator\"),\n    text = bizagi.util.tryCatch(\n    function () {return $(that.contentDocument).text();},\n    defaultMessage),\n\n    isMaintenanceWindow = text.indexOf(\"HTTP Error 503\") !== -1,\n    jsonResponse = bizagi.util.tryCatch(\n    function () {return JSON.parse(text);},\n    {\n      code: \"error\",\n      status: \"error\",\n      message: text === \"\" ? defaultMessage : text }),\n\n\n    showModal = _showModalOnFail && !isMaintenanceWindow;\n    if (isMaintenanceWindow)\n    bizagiConfig.maintenanceWindows.start();\n    _reject(jsonResponse, showModal);\n  },\n  _createIframe = function _createIframe() {\n    var iframe = $(\"<iframe/>\");\n    iframe.attr({\n      style: \"visibility:hidden;display:none\",\n      id: _iframeID }).\n\n    appendTo('body');\n    iframe[0].onload = _onCantDownload;\n  };\n\n  if (!_iframeExists)\n  _createIframe();\n  $('#' + _iframeID).attr(\"src\", _urlDownload);\n  return _defer;\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a excel file\r\n    * @param {String} url \r\n    * @param {} params \r\n    */\nbizagi.util.downloadFileByPOST = function (url, params) {\n  if ($('#iframe-download').length !== 0) {//If the iframe already exists, remove it\n    $('#iframe-download').remove();\n  }\n\n  $(\"<iframe/>\").attr({\n    style: \"visibility:hidden;display:none\",\n    id: \"iframe-download\" }).\n  appendTo('body');\n\n  var inputValues = \"\";\n  for (var i = 0; i < params.length; i++) {\n    inputValues = inputValues + \"<input type='text' name='\" + params[i].name + \"' value='\" + params[i].value + \"'>\";\n  }\n\n  var formPOST = \"<form id='formPOST' action='\" + url + \"' method='POST'>\" +\n  inputValues +\n  \"</form>\";\n\n  $('#iframe-download').contents().find(\"body\").append(formPOST);\n  if (bizagi.util.isIE11()) {\n    bizagi.showErrorAlertDialog = false;\n    $.ajax({ type: \"POST\",\n      url: url,\n      data: params,\n      dataType: 'text' }).\n    then(function () {\n      $(\"#formPOST\", $('#iframe-download').contents()).submit();\n    });\n  } else {\n    $(\"#formPOST\", $('#iframe-download').contents()).submit();\n  }\n};\n\nbizagi.util.executeActionRoutingFromWorkportal = function (idCase, idWorkItem) {\n  bizagi.workportal.controllers.menu.prototype.publish(\"executeAction\", {\n    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n    idCase: idCase,\n    idWorkItem: idWorkItem });\n\n};\n\n/**\r\n   * Gets the final message when the user is offline or online (In Offline forms)\r\n   * @param {} state \r\n   * @returns {} The corresponding message depending on the case\r\n   */\n\nbizagi.util.getMessageFromNetworkState = function (state) {\n  if (state) {\n    return bizagi.localization.getResource(\"render-without-globalform-offline-userOnline\", \"The case has been created successfully, please wait until the server synchronizes\");\n  } else {\n    return bizagi.localization.getResource(\"render-without-globalform-offline\", \"Your offline case has been created successfully. It will synchronized as soon as you go online.\");\n  }\n};\n\n/**\r\n    * DOMPurify sanitizes HTML and prevents XSS attacks\r\n    * @param str\r\n    * @returns {null|*|string}\r\n    */\nbizagi.util.sanitizeHTML = function (str) {\n  var value = typeof str !== \"undefined\" && str !== null ? str.toString() : str;\n  var sanified = DOMPurify.sanitize(value);\n  var decode = document.createElement(\"div\");\n\n  decode.innerHTML = sanified;\n\n  return decode.childNodes.length === 0 ? \"\" : String(decode.childNodes[0].nodeValue);\n};\n\nbizagi.util.arrayUnique = function (array) {\n  var items = array.concat();\n\n  for (var i = 0, length = items.length; i < length; ++i) {\n    for (var j = i + 1; j < length; ++j) {\n      if (items[i] === items[j]) {\n        items.splice(j -= 1, 1);\n      }\n\n    }\n  }\n\n  return items;\n};\n\n\n/**\r\n    * Debounce\r\n    * Taken from https://davidwalsh.name/javascript-debounce-function\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce = function (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n};\n\n/**\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce2 = function (func, wait, immediate) {\n  var self = this;\n  var timeout;\n  var fn = function fn() {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n  return {\n    timeout: timeout,\n    cancel: function cancel() {\n      clearTimeout(timeout);\n    },\n    fire: function fire() {\n      fn.call(self, arguments);\n    } };\n\n};\n\n/**\r\n    * Validate if the mobile image editor is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeImageEditorSupported = function () {\n  return bizagi.util.isNativePluginSupported() && bizagi.util.isiOSDevice() && bizagi.override.enableImageEditor;\n};\n/**\r\n    * Error Message\r\n    */\nbizagi.util.errorMessage = function (message) {\n  return \"<div class=\\\"admin-stakeholder-message\\\"> \" +\n  \"<i class=\\\"bz-wp-empty__img\\\"></i> \" +\n  \"<p class=\\\"bz-wp-empty__info bz-wp-empty__info--first\\\"> \" +\n  message +\n  \"</p></div>\";\n};\n\n\n/**\r\n    * Validate URL \r\n    */\nbizagi.util.validateUrlWellFormed = function (url) {\n  var patternToValidateUrl = /^((http|https|ftp):\\/\\/)/,\n  urlWithProtocol = patternToValidateUrl.test(url) ? url : \"http://\" + url,\n  nodeWithUrl = document.createElement('a');\n  nodeWithUrl.setAttribute('href', urlWithProtocol);\n  var cleanNodeWithUrl = DOMPurify.sanitize(nodeWithUrl, { IN_PLACE: true }),\n  urlWithoutSpaces = url ? url.replace(/ /g, \"\") : \"\";\n  return bizagi.util.isEmpty(urlWithoutSpaces) ? null : cleanNodeWithUrl.href;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @param data\r\n    * @returns {string}\r\n    */\nbizagi.util.encodeHtmlText = function (data) {\n  var value = data || \"\";\n  var valueToDisplay = \"\";\n\n  if (typeof value === \"string\") {\n    var decodedDisplayValue = bizagi.util.decodeURI(value);\n\n    valueToDisplay = bizagi.util.encodeString(decodedDisplayValue);\n  }\n\n  return valueToDisplay;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @returns {string}\r\n    * @param str\r\n    */\nbizagi.util.encodeString = function (str) {\n  var result = str || \"\";\n\n  result = result.replaceAll(\"&\", \"&amp;\");\n  result = result.replaceAll(\"$\", \"&#36;\");\n  result = result.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n  result = result.replaceAll(\"\\\"\", \"&#34;\").replaceAll(\"'\", \"&#39;\").replaceAll(\"/\", \"&#47;\");\n  result = result.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, \"$1<br />$2\");\n\n  return result;\n};\n\n/**\r\n    * Set Caret position \r\n    * Set the caret in specific position of an element type input\r\n    * @param {} func, position, input element \r\n    * @returns {} The function not return any value.\r\n    */\nbizagi.util.setCaretPosition = function (pos, ctrl) {\n  var self = this;\n\n  // Modern browsers\n  if (ctrl.setSelectionRange) {\n    ctrl.focus();\n    ctrl.setSelectionRange(pos, pos);\n\n    // IE8 and below\n  } else if (ctrl.createTextRange) {\n    var range = ctrl.createTextRange();\n    range.collapse(true);\n    range.moveEnd('character', pos);\n    range.moveStart('character', pos);\n    range.select();\n  }\n};\n\n\n/**\r\n    * Get position of caret\r\n    * Get the position of caret in a specific element input\r\n    * @param {} func, input element \r\n    * @returns {} Return the position of caret in an element input\r\n    */\nbizagi.util.getCaretPosition = function (oField) {\n\n  // Initialize\n  var iCaretPos = 0;\n\n  // IE Support\n  if (document.selection) {\n\n    // Set focus on the element\n    oField.focus();\n\n    // To get cursor position, get empty selection range\n    var oSel = document.selection.createRange();\n\n    // Move selection start to 0 position\n    oSel.moveStart('character', -oField.value.length);\n\n    // The caret position is selection length\n    iCaretPos = oSel.text.length;\n  } else if (oField.selectionStart || oField.selectionStart == '0') // Firefox support\n    iCaretPos = oField.selectionStart;\n\n  // Return results\n  return iCaretPos;\n};\n\n/**\r\n    * To escape values\r\n    * @param {} value \r\n    * @returns {} \r\n    */\nbizagi.util.escapeRegex = function (value) {\n  value = value || \"\";\n\n  return value.replace(/([\\^\\$\\(\\)\\[\\]\\{\\}\\*\\.\\+\\?\\|\\\\])/gi, \"\\\\$1\");\n};\n\n/**\r\n    * Function to get a featureObject by path within the global bizagiConfig.features object. Example: \"userService.v1.enabled\"\r\n    */\nbizagi.util.getFeatureObject = function (path) {\n  var arr = path.split('.');\n  this.featureObjectCache = this.featureObjectCache || {};\n\n  function getFeatureObjectIte(arr) {\n    var features = bizagi.util.getConfigFeatures();\n\n    if (typeof path !== \"string\" || typeof features == \"undefined\") return;\n\n    var pivot = features;\n    for (var i = 0, len = arr.length; i < len; i++) {\n      pivot = pivot[arr[i]];\n      if (typeof pivot === \"undefined\") return;\n    }\n    return pivot;\n  };\n  if (path in this.featureObjectCache) {\n    return this.featureObjectCache[path];\n  } else {\n    return this.featureObjectCache[path] = getFeatureObjectIte(arr);\n  }\n};\n\n/**\r\n    * Load features from mobile\r\n    */\nbizagi.util.getConfigFeatures = function () {\n  var bizagiConfiguration = window.bizagiConfig || bizagiConfig || {};\n\n  if (bizagi.util.isMobileDevice() && typeof BIZAGI_MOBILE_FEATURES !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_MOBILE_FEATURES)) {\n    bizagiConfiguration.features = JSON.parse(BIZAGI_MOBILE_FEATURES || \"{}\");\n  }\n\n  return bizagiConfiguration.features;\n};\n\n/**\r\n    * Reset features flag\r\n    */\nbizagi.util.resetConfigFeatures = function () {\n  bizagi.util.featureObjectCache = undefined;\n};\n\n/**\r\n    * Check fail request\r\n    * @param result\r\n    * @returns {*|boolean}\r\n    */\nbizagi.util.isFailResponse = function (result) {\n  return result && (result.type && result.type === \"error\" || result.status && result.status === \"error\" || result.code && result.code === \"UNKNOWN_ERROR\");\n};\n\n/**\r\n    * Formats value of each item\r\n    * @param {string, boolean or array} value\r\n    * @example\r\n    * value = \"string\" => \"string\"\r\n    * value = true => \"yes\" or \"si\", the localized value\r\n    * value = false => \"no\", the localized value\r\n    * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n    * @returns {string}\r\n    */\nbizagi.util.formatItem = function (value) {\n  if (value !== undefined && value !== null) {\n    if ($.isArray(value)) {\n\n      for (var i = 0, length = value.length; i < length; i++) {\n        if (value[i] != null && typeof value[i] == \"boolean\") {\n          if (bizagi.util.parseBoolean(value[i]) === true) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n\n          } else if (bizagi.util.parseBoolean(value[i]) === false) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n          }\n        }\n        value[i] = bizagi.util.sanitizeHTML(value[i]);\n      }\n\n      return value.join(\" - \");\n    } else {\n      return bizagi.util.sanitizeHTML(value);\n    }\n  } else {\n    return \"\";\n  }\n};\n\n\n/**\r\n    * Process response matches\r\n    * @param {} strValue\r\n    * @param term\r\n    * @param withoutFormat\r\n    * @returns {}\r\n    */\nbizagi.util.performTermMatches = function (strValue, term, withoutFormat) {\n  var parseValue;\n\n  if (_typeof(strValue) === \"object\") {\n    parseValue = bizagi.util.formatItem(strValue);\n  } else if (typeof strValue === \"string\") {\n    if (withoutFormat) {\n      parseValue = bizagi.util.sanitizeHTML(strValue);\n    } else {\n      parseValue = bizagi.util.highlightMatches(strValue, term);\n    }\n  } else {\n    parseValue = strValue;\n  }\n\n  return parseValue;\n};\n\n/**\r\n    * Process response to highlight matches\r\n    * @param strValue\r\n    * @param term\r\n    * @returns {string}\r\n    */\nbizagi.util.highlightMatches = function (strValue, term) {\n  var data = bizagi.util.escapeRegex(term).replaceAll(\"%\", \"\");\n  var regEx = new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + data + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\");\n\n  return bizagi.util.sanitizeHTML(strValue).replace(regEx, \"<strong>$1</strong>\");\n};\n\n/**\r\n    * Calculate window resolution for Desktop\r\n    * @returns {string}\r\n    */\nbizagi.util.getDesktopResolution = function () {\n  var resolution = \"\";\n  var devicePixelRatio = 1;\n  var screenWidth = window.screen.width;\n  var screenHeight = window.screen.height;\n\n  if ('deviceXDPI' in screen) {\n    devicePixelRatio = screen.deviceXDPI / screen.logicalXDPI;\n  } else if ('devicePixelRatio' in window) {\n    devicePixelRatio = window.devicePixelRatio;\n  }\n\n  devicePixelRatio = Number(devicePixelRatio.toFixed(3));\n\n  if (screenWidth && screenWidth > 0 && screenHeight && screenHeight > 0) {\n    resolution = screenWidth * devicePixelRatio + \"x\" + screenHeight * devicePixelRatio;\n  }\n\n  return resolution;\n};\n\n/**\r\n    * Get the market name for device\r\n    * @returns {*|string}\r\n    */\nbizagi.util.getDeviceCode = function () {\n  var deviceCode = \"\";\n\n  if (bizagi.util.isMobileDevice()) {\n    deviceCode = typeof BIZAGI_DEVICE_MARKET_NAME !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEVICE_MARKET_NAME) ? BIZAGI_DEVICE_MARKET_NAME : \"\";\n  } else {\n    deviceCode = bizagi.util.getDesktopResolution();\n  }\n\n  return deviceCode;\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/smartphone/, '').\n  replace(/tablet/, '').\n  replace(/offline/, '');\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeQueryType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/query/, '').\n  toLowerCase();\n};\n\n/**\r\n    * Hide or show the X button in the show dialog method \r\n    * \r\n    */\nbizagi.util.hideOrShowXToCloseDialog = function (dialog, show) {\n  var selector = \".ui-dialog-titlebar-close\";\n  if (show) {\n    $(selector, dialog).show();\n  } else {\n    $(selector, dialog).hide();\n  }\n};\n\n/**\r\n    * review if a feature key is enabled\r\n    * @param {string} feature nombre de la llave del feature\r\n    */\nbizagi.util.isEnableFeature = function (feature) {\n  if (bizagi.features === undefined) bizagi.features = [];\n  return bizagi.features[feature] !== false;\n};\n\n\n/**\r\n    * review if the posibleHtml has html content\r\n    * @param {string} possibleHtml to review\r\n    */\nbizagi.util.isHtml = function (possibleHtml) {\n  return /<[a-z][\\s\\S]*>/i.test(possibleHtml);\n};\n\n/**\r\n    * if the _try function fails the _catch() or _catch value will be executed and returned\r\n    * @param {Function} _try \r\n    * @param {Function | any} _catch \r\n    */\nbizagi.util.tryCatch = function (_try, _catch) {\n  try {\n    return _try();\n  } catch (e) {\n    return typeof _catch === \"function\" ? _catch() : _catch;\n  }\n};\n\n/**\r\n    * keep functions with next and at the end execute all functions are reduced by with method like a pipe using the variable\r\n    */\nbizagi.util.pipe = function (f, listFunctions) {\n  var _listFunctions = listFunctions === undefined ? [] : listFunctions;\n  _listFunctions.push(f);\n\n  return {\n    next: function next(f) {\n      return bizagi.util.pipe(f, _listFunctions);\n    },\n    end: function end(variable) {\n      return _listFunctions.reduce(function (newVar, f) {\n        return f(newVar);\n      }, variable);\n    } };\n\n},\n\n/**\r\n    * A function to get the scrolling parent of an html element.\r\n    */\nfunction ($) {\n\n  var parents = function parents(node, ps) {\n    if (node.parentNode === null) return ps;\n\n    return parents(node.parentNode, ps.concat([node]));\n  };\n\n  var style = function style(node, prop) {\n    return getComputedStyle(node, null).getPropertyValue(prop);\n  };\n\n  var overflow = function overflow(node) {\n    return style(node, \"overflow\") + style(node, \"overflow-y\") + style(node, \"overflow-x\");\n  };\n\n  var scroll = function scroll(node) {\n    return /(auto|scroll)/.test(overflow(node));\n  };\n\n  // Get the closest ancestor element that is scrollable.\n  $.scrollerParent = function (node) {\n    if (!(node instanceof HTMLElement || node instanceof SVGElement)) return;\n\n    var ps = parents(node.parentNode, []);\n\n    for (var i = 0; i < ps.length; i += 1) {\n      if (scroll(ps[i])) return ps[i];\n    }\n\n    return document.scrollingElement || document.documentElement;\n  };\n}(jQuery);\n\nbizagi.util.startkendo = function (params) {\n  if (typeof bizagi.kendoMobileApplication === \"undefined\") {\n    bizagi.kendoMobileApplication = new kendo.mobile.Application($(\"body\"), {\n      skin: \"flat\",\n      browserHistory: false,\n      init: function init(e) {\n        kendo.ui.progress($(\".km-flat\"), true);\n        params.started && params.started();\n      } });\n\n\n    bizagi.kendoMobileApplication.bizagiNavigate = function (e, t) {\n      this.navigate(e, t);\n    };\n  } else {\n    params.started && params.started();\n  }\n};\n\n/**\r\n    * Checks if bizagi is running in mashup.\r\n    */\nbizagi.util.isMashupContext = function () {\n  return typeof BIZAGI_MASHUP_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_MASHUP_CONTEXT) === true;\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.isSharepointContext = function () {\n  return typeof BIZAGI_SHAREPOINT_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_SHAREPOINT_CONTEXT) === true;\n};\n\n/**\r\n    * Checks if bizagi is running in webpart.\r\n    */\nbizagi.util.isWebpartContext = function () {\n  return typeof isWebpart !== \"undefined\" && bizagi.util.parseBoolean(isWebpart) === true;\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number }\r\n    */\nbizagi.util.startTimeline = function (data) {\n  new bizagi.workportal.widgets.widget().showTimeLine(data);\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number, isAdhoc: Boolean, idProcess: Number }\r\n    */\nbizagi.util.startGraphicquery = function (data) {\n  new bizagi.workportal.widgets.widget().showGraphicQuery(data);\n};\n\n/**\r\n    * start select user functionality\r\n    */\nbizagi.util.startSelectUser = function () {\n  return function (resolve, reject) {\n    var defer = $.Deferred();\n    new bizagi.workportal.widgets.widget().showSelectUser(defer);\n    defer.done(function (userId, userName, guid) {\n      resolve({\n        userId: userId,\n        userName: userName,\n        guid: guid });\n\n    }).fail(function () {\n      resolve({});\n    });\n  };\n};\n\n/* Checks if a given value with format {id, value} is empty\r\n   * @param value\r\n   * @returns {boolean}\r\n   */\nbizagi.util.isEmptyValue = function (value) {\n  if (value === 0) return false;\n  if (value === undefined || value === null || value === \"\") return true;\n  if (typeof value === \"Array\") return value.length === 0;\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") return value.length === 0;\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    for (var key in value) {\n      if (value.hasOwnProperty(key) && !bizagi.util.isEmptyValue(value[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR LIVE PROCESSES\n// ------------------------------------------------------------------------\n\n/**\r\n * Init refferer Params as an empty object\r\n */\nbizagi.util.initializeReferrerParams = function () {\n  if (!bizagi.referrerParams) {\n    bizagi.referrerParams = {};\n  }\n};\n\n/**\r\n    * Get data to update sidebar\r\n    */\nbizagi.util.getLPQueriesParameters = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.sidebarData;\n};\n\n/**\r\n    * Get selected tree item (Selected process)\r\n    */\nbizagi.util.getLPQueriesSelectedItemFromTree = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.selectedTreeItem;\n};\n\n/**\r\n    * Set data and save \r\n    */\nbizagi.util.setLPQueriesParameters = function (parametersSidebar, tree) {\n  bizagi.util.initializeReferrerParams();\n  bizagi.referrerParams.sidebarData = parametersSidebar;\n  bizagi.referrerParams.selectedTreeItem = tree;\n};\n\n/**\r\n    * Clean data to reset LP Queries component\r\n    */\nbizagi.util.cleanLPQueriesParameters = function () {\n  if (bizagi.referrerParams) {\n    bizagi.referrerParams.sidebarData = null;\n    bizagi.referrerParams.selectedTreeItem = null;\n  }\n};\n\n/**\r\n    * Set referrerParams referrer \r\n    */\nbizagi.util.setLPQueriesReferrer = function () {\n  bizagi.referrerParams.referrer = \"LPQueries\";\n};\n\n/**\r\n    * Check if there is internet connection\r\n    */\nbizagi.util.isConnected = function () {\n  if (bizagi.util.isNativeMobileDevice()) {\n    if (navigator && typeof navigator.connection !== \"undefined\" && typeof Connection !== \"undefined\")\n    return !(navigator.connection.type == Connection.NONE || navigator.connection.type == \"unknown\");\n    return true;\n  } else if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n    return window.navigator ? window.navigator.onLine : true;\n  }\n\n  return true;\n};\n\n/**\r\n    * Check If rendering url is allowed\r\n    * @param request\r\n    * @returns {boolean}\r\n    */\nbizagi.util.isRenderingUrlAllowed = function (request) {\n  var endPoint;\n  //The url Rest/Processes/RecentProcesses and Rest/Processes/OfflineProcessTree should be excluded from the whitelist\n  var whiteList = [\n  \"Rest/(Handlers|Userfields|DocumentTemplates|(Processes(?!/(RecentProcesses|OfflineProcessTree)))|Cases|Authentication|Users)\",\n  \"Api/(Authentication|Entities|Users)\"];\n\n  var url = (request || \"\").\n  replaceAll(\"..\\/\", \"\").\n  replaceAll(\".\\/\", \"\");\n\n  while (endPoint = whiteList.shift()) {\n    var pattern = new RegExp(endPoint, \"i\");\n    if (url.match(pattern) !== null) return true;\n  }\n\n  return false;\n};\n\n/**\r\n    * Captura todos los elementos input de tipo contrasea y aade el icono de ver/ocultar el valor (el icono incluye\r\n    * funcionalidad propia).\r\n    *\r\n    * Para mas informacin ver la aplicacin de esta funcin en los widget de login.\r\n    *\r\n    * - Esta funcin requiere jQuery (variable $) globalmente.\r\n    * - Se aplica generalmente en la funcin render de los widget.\r\n    * - Asegurarse que todos los input de contrasea han sido cargados antes de ejecutar esta funcin, de lo contrario los\r\n    *   nuevos inputs no tendran la funcionalidad de ver/ocultar valor.\r\n    *\r\n    * @param {jQuery | HTMLElement} content\r\n    */\nbizagi.util.applyEyeFunction = function (content) {\n  function setShowIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg  class='eye_show_icon'  xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M15 7.8C14.9 7.6 12.7 3 8 3S1.1 7.6 1 7.8v.4c.1.2 2.3 4.8 7 4.8s6.9-4.6 7-4.8v-.4zM8 12c-3.5 0-5.5-3.1-5.9-4 .4-.9 2.4-4 5.9-4 3.5 0 5.5 3.1 5.9 4-.4.9-2.4 4-5.9 4z\\\"/>\\n\" +\n    \"<path d=\\\"M8 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='text']\").attr(\"type\", \"password\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function setHideIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg class='eye_hide_icon' xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M3.6 10.5l.7-.7a12.1 12.1 0 0 1-2-1.6C3.1 7.3 5.4 5 8 5h1l.8-.8A6 6 0 0 0 8 4C4.3 4 1.4 7.8 1.2 7.9l-.2.3.3.3a12.3 12.3 0 0 0 2.3 2zm8.7-4.9l-.7.7a12.4 12.4 0 0 1 2.1 1.9C12.9 9 10.6 11 8 11H7l-.8.8L8 12c3.7 0 6.6-3.3 6.7-3.5l.3-.3-.2-.3a12.8 12.8 0 0 0-2.5-2.3zM1.5 15h-.4a.5.5 0 0 1 0-.7l13-13a.5.5 0 1 1 .7.7l-13 13h-.3z\\\"/><path d=\\\"M6.3 7.8a1.7 1.7 0 0 1 1.5-1.5l.9-.9H8A2.7 2.7 0 0 0 5.3 8a2.7 2.7 0 0 0 .1.7l.9-.9zm3.4.4a1.7 1.7 0 0 1-1.5 1.5l-.9.9H8A2.7 2.7 0 0 0 10.7 8a2.7 2.7 0 0 0-.1-.7l-.9.9z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='password']\").attr(\"type\", \"text\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function addEvent(direct) {\n    return function (element) {\n      if (direct) {\n        var className = $(this).attr('class') || '';\n        var input = $(this).parent().find(\"input\");\n        if (className === 'eye_show_icon') {\n          setHideIcon(input);\n        } else {\n          setShowIcon(input);\n        }\n      } else {\n        $($(element, content).parent().find('svg')[0]).click(function (ev) {\n          var className = $(this).attr('class') || '';\n          var input = $(this).parent().find(\"input\");\n          if (className === 'eye_show_icon') {\n            setHideIcon(input);\n          } else {\n            setShowIcon(input);\n          }\n        });\n      }\n    };\n  }\n\n  $(content).find(\"input[type='password']\").map(function (index, element) {\n    if (index > 0) {\n      setShowIcon(element);\n      addEvent(false)(element);\n    }\n  });\n};\n\n/**\r\n    * Aadir eventos de accessibility a un elemento, el evento consiste en las siguientes teclas:\r\n    * - Enter, Click, Space.\r\n    * Ayuda a que los elementos puedan ser accedidos (activar evento de click) de multiples maneras incluyendo teclado.\r\n    * @param {*} element jQuery element\r\n    * @param {Function} cb Callback\r\n    * @param {string[]} [extraEvent] Array of extra events\r\n    */\nbizagi.util.accessibilityEnter = function (element, cb, extraEvent) {\n  if (typeof cb !== \"function\") {\n    throw new Error('Error in \"accessibilityEnter\" function: You must provide a valid callback');\n  }\n  /**\r\n     * @type {*|jQuery|HTMLElement}\r\n     * @const\r\n     */\n  extraEvent = $.isArray(extraEvent) ? extraEvent : [];\n  extraEvent.indexOf('click') !== -1 ? extraEvent : extraEvent.push('click');\n\n  element.bind(\"keypress\", function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n\n    if (e.which === 13 || e.which === 32) {// Events: enter or space\n      cb(e);\n    }\n  });\n\n  element.bind(extraEvent.join(', '), function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n    cb(e);\n  });\n};\n\n/**\r\n    * Recreate native buttons for iOS\r\n    */\n\nbizagi.util.recreateNativeButtons = function (context) {\n  var params = context.getFormContainer().getParams();\n  if (bizagi.util.isNativePluginSupported() && bizagi.util.isiOSSmartphoneDevice()) {\n    var navigation = params.navigation;\n    if (typeof navigation !== \"undefined\") {\n      navigation.setNavigationButtons(context);\n    }\n  }\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isOverrideFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName] || null;\n\n  return bizagi.util.parseBoolean(feature) === true;\n};\n\n/**\r\n    * Create dynamic class using the name\r\n    */\nbizagi.util.createDynamicClass = function (nameClass, renderParams) {\n  if (nameClass) {\n    try {\n      // Create a dynamic function to avoid problem with eval calls when minifying the code\n      var dynamicFunction = \"var dynamicFn = function(renderParams){ \\r\\n\";\n      dynamicFunction += \"return new \" + nameClass + \"(renderParams);\\r\\n\";\n      dynamicFunction += \"}\\r\\n\";\n      dynamicFunction += \"dynamicFn\";\n      dynamicFunction = eval(dynamicFunction);\n\n      // Call the dynamic function\n      return dynamicFunction(renderParams);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  // No class supported\n  return null;\n};\n\n/**\r\n    * Mobiscroll languages\r\n    */\nbizagi.util.languages = {\n  \"es\": \"es\", \"es-ES\": \"es\", \"es-AR\": \"es\", \"es-BO\": \"es\", \"es-Cl\": \"es\", \"es-CO\": \"es\", \"es-CR\": \"es\", \"es-DO\": \"es\", \"es-EC\": \"es\", \"es-SV\": \"es\", \"es-GT\": \"es\", \"es-HN\": \"es\", \"es-MX\": \"es\", \"es-NI\": \"es\", \"es-PA\": \"es\", \"es-PY\": \"es\", \"es-PR\": \"es\", \"es-PE\": \"es\", \"es-US\": \"es\", \"es-UY\": \"es\", \"es-VE\": \"es\",\n  \"en\": \"en-US\", \"en-AU\": \"en-US\", \"en-BZ\": \"en-US\", \"en-CA\": \"en-US\", \"en-029\": \"en-US\", \"en-IN\": \"en-US\", \"en-IE\": \"en-US\", \"en-JM\": \"en-US\", \"en-MY\": \"en-US\", \"en-NZ\": \"en-US\", \"en-PH\": \"en-US\", \"en-SG\": \"en-US\", \"en-ZA\": \"en-US\", \"en-TT\": \"en-US\", \"en-GB\": \"en-US\", \"en-US\": \"en-US\", \"en-ZW\": \"en-US\",\n  \"de\": \"de\", \"de-AT\": \"de\", \"de-DE\": \"de\", \"de-LI\": \"de\", \"de-LU\": \"de\", \"de-CH\": \"de\",\n  \"fr\": \"fr\", \"fr-BE\": \"fr\", \"fr-CA\": \"fr\", \"fr-LU\": \"fr\", \"fr-MC\": \"fr\", \"fr-CH\": \"fr\", \"fr-FR\": \"fr\",\n  \"it\": \"it\", \"it-IT\": \"it\", \"it-CH\": \"it\",\n  \"ja\": \"ja\", \"ja-JA\": \"ja\", \"ja-JP\": \"ja\",\n  \"nl\": \"nl\", \"nl-NL\": \"nl\", \"nl-BE\": \"nl\",\n  \"pt\": \"pt-PT\", \"pt-BR\": \"pt-PT\", \"pt-PT\": \"pt-PT\",\n  \"ru\": \"ru\", \"ru-RU\": \"ru\",\n  \"cs\": \"cs\", \"cs-CZ\": \"cs\",\n  \"ar\": \"ar\", \"ar-DZ\": \"ar\", \"ar-BH\": \"ar\", \"ar-EG\": \"ar\", \"ar-IQ\": \"ar\", \"ar-JO\": \"ar\", \"ar-KW\": \"ar\", \"ar-LB\": \"ar\", \"ar-LY\": \"ar\", \"ar-MA\": \"ar\", \"ar-OM\": \"ar\", \"ar-QA\": \"ar\", \"ar-SA\": \"ar\", \"ar-SY\": \"ar\", \"ar-TN\": \"ar\", \"ar-AE\": \"ar\", \"ar-YE\": \"ar\",\n  \"zh\": \"zh\", \"zh-HK\": \"zh\", \"zh-MO\": \"zh\", \"zh-CN\": \"zh\", \"zh-Hans\": \"zh\", \"zh-SG\": \"zh\", \"zh-TW\": \"zh\", \"zh-Hant\": \"zh\" };\n\n\n/**\r\n                                                                                                                              * Sets time to 0 in the date\r\n                                                                                                                              * @param value\r\n                                                                                                                              * @param fullFormat\r\n                                                                                                                              * @param showTime\r\n                                                                                                                              * @returns {Date} date converted with milliseconds 0\r\n                                                                                                                              */\nbizagi.util.getNormalizedDate = function (value, fullFormat, showTime) {\n  var dateTime = value;\n\n  try {\n    if (!!value && typeof value === \"string\") {\n      dateTime = bizagi.util.dateFormatter.getDateFromInvariant(value, showTime);\n    }\n\n    if (dateTime && dateTime !== 0 && dateTime != null) {\n      if (!showTime) {\n        dateTime.setHours(0, 0, 0, 0);\n      } else {\n        dateTime.setMilliseconds(0);\n      }\n\n      dateTime = bizagi.util.dateFormatter.formatDate(dateTime, fullFormat);\n    }\n  } catch (e) {\n  }\n\n  return dateTime;\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName];\n\n  return bizagi.util.parseBoolean(feature);\n};\n\n/**\r\n    * LOCAL STORAGE\r\n    */\n\n/**\r\n        * Last process inbox\r\n        * @returns lastProcessInboxKey string\r\n        */\nbizagi.util.getLastProcessInboxKey = function () {\n  var lastProcessInboxKey = 'lastProcessInbox';\n  lastProcessInboxKey = lastProcessInboxKey.concat(\"_\", bizagi.util.getUserHash());\n  return lastProcessInboxKey;\n};\n\n/**\r\n    * Constructor();\r\n    */\n\n/**\r\n       * Set last process inbox in local storage\r\n       * @returns void()\r\n       */\nbizagi.util.lastProcessInboxInit = function () {\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(bizagi.util.getLastProcessInboxCreate()));\n};\n\n/**\r\n    * Create last process inbox\r\n    * @returns {} lastProcessInbox\r\n    */\nbizagi.util.getLastProcessInboxCreate = function () {\n  return {\n    \"processInfo\": bizagi.util.createLastProcessInboxProcess(),\n    \"sortInfo\": bizagi.util.createLastProcessInboxSort(),\n    \"filterInfo\": bizagi.util.createLastProcessInboxFilter(),\n    \"processColumnsInfo\": bizagi.util.createLastProcessInboxColumns(),\n    \"inputTrayInfo\": bizagi.util.createLastProcessInboxInputTray() };\n\n};\n\n/**\r\n    * Create last process inbox default\r\n    * @returns {} processInfo\r\n    */\nbizagi.util.createLastProcessInboxProcess = function () {\n  return {\n    \"processInfoName\": null,\n    \"idWorkflow\": -1 };\n\n};\n\n/**\r\n    * Create sort info\r\n    * @return {} sortInfo\r\n    */\nbizagi.util.createLastProcessInboxSort = function () {\n  return {\n    \"sortDirection\": \"asc\",\n    \"sortFieldName\": null,\n    \"sortOrder\": null };\n\n};\n\n/**\r\n    * Create filter info\r\n    * filterType (equal, like, startsWith, endsWith )\r\n    * @return {} filterInfo\r\n    */\nbizagi.util.createLastProcessInboxFilter = function () {\n  return {\n    \"filterValue\": null,\n    \"filterFieldName\": null,\n    \"filterType\": \"equal\" };\n\n};\n\n/**\r\n    * Create process columns info\r\n    * @return {} columnsInfo\r\n    */\nbizagi.util.createLastProcessInboxColumns = function () {\n  return {\n    \"processColumns\": [] };\n\n};\n\n/**\r\n    * Create input tray info\r\n    * @return string inputTrayInfo\r\n    */\nbizagi.util.createLastProcessInboxInputTray = function () {\n  return \"inbox\";\n};\n\n/**\r\n    * INIT\r\n    */\n\n/**\r\n        * Init last process inbox\r\n        * @returns lastProcessInbox {}\r\n        */\nbizagi.util.getLastProcessInbox = function () {\n  var lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n\n  if (!lastProcessInbox) {\n    // New object\n    bizagi.util.lastProcessInboxInit();\n    // Get object\n    lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n  }\n\n  return JSON.parse(lastProcessInbox);\n};\n\n/**\r\n    * SET\r\n    */\n\n/**\r\n        * Save current process info\r\n        * @param processName string\r\n        * @param idWorkflow integrer\r\n        * @return void()\r\n        */\nbizagi.util.setLastProcessInbox = function (processInfoName, idWorkflow, smartInboxId) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  if (lastProcessInbox.processInfo) {\n    if (lastProcessInbox.processInfo.idWorkflow != idWorkflow) {\n      lastProcessInbox.processColumnsInfo = null;\n    } else if (!bizagi.util.isEmpty(smartInboxId) && lastProcessInbox.processInfo.smartInboxId != smartInboxId) {\n      lastProcessInbox.processColumnsInfo = null;\n    }\n  }\n\n  // set data\n  lastProcessInbox.processInfo.processInfoName = processInfoName;\n  lastProcessInbox.processInfo.idWorkflow = parseInt(idWorkflow || -1);\n  lastProcessInbox.processInfo.smartInboxId = typeof smartInboxId != \"undefined\" ? smartInboxId : null;\n\n  // When last process inbox change is required to delete Filters\n  if (lastProcessInbox.filterInfo) {\n    lastProcessInbox.filterInfo = bizagi.util.createLastProcessInboxFilter();\n  }\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save process columns info\r\n    * @param processColumns []\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxProcessColumns = function (processColumns) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.processColumnsInfo = lastProcessInbox.processColumnsInfo || {};\n  lastProcessInbox.processColumnsInfo.processColumns = processColumns || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/*\r\n   * Get Live filter from storage\r\n   * @param id object\r\n   * @return object\r\n   */\nbizagi.util.getLiveFiltersFromStorage = function (id) {\n  var filters = [];\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\");\n  try {\n    var serialize = JSON.parse(modelStorage);\n    filters = typeof serialize[id] != \"undefined\" ? JSON.parse(serialize[id]) : filters;\n  } catch (e) {\n    filters = [];\n  }\n\n  return filters;\n};\n\n/*\r\n   * Save Live filter in storage\r\n   * @param id object\r\n   * @param value object\r\n   * @return void()\r\n   */\nbizagi.util.setLiveFiltersToStorage = function (id, value) {\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\") || \"[]\";\n  var serialize = JSON.parse(modelStorage);\n\n  serialize[id] = JSON.stringify(value);\n\n\n  bizagi.util.setItemLocalStorage(\"livefilters\", JSON.encode(Object.assign({}, serialize)));\n};\n\n/**\r\n    * Save sort info\r\n    * @param liveFilters array\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxLiveFilter = function (liveFilters) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.liveFilters = liveFilters || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n\n/**\r\n    * Save sort info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxSort = function (sortFieldName, direction, sortOrder) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.sortInfo.sortFieldName = sortFieldName || null;\n  lastProcessInbox.sortInfo.sortDirection = direction || 'asc';\n  lastProcessInbox.sortInfo.sortOrder = sortOrder || null;\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save filter info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxFilter = function (filterValue, filterFieldName, filterType) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.filterInfo.filterValue = filterValue || null;\n  lastProcessInbox.filterInfo.filterFieldName = filterFieldName || null;\n  lastProcessInbox.filterInfo.filterType = filterType || 'equal';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save input Tray inbox info\r\n    * @param inputTray string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxInputTray = function (inputTray) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.inputTrayInfo = inputTray || '';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * GET\r\n    */\n\n/**\r\n        * Get process info\r\n        * @return {} process info\r\n        */\nbizagi.util.getLastProcessInboxProcessInfo = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // localization / default\n  if (bizagi.localization && lastProcessInbox.processInfo.processInfoName == null) {\n    lastProcessInbox.processInfo.processInfoName = bizagi.localization.getResource(\"workportal-widget-inbox-all-processes\");\n  }\n  lastProcessInbox.processInfo.allProcesses = lastProcessInbox.processInfo.idWorkflow === -1;\n  // response\n  return lastProcessInbox.processInfo;\n};\n\n/**\r\n    * Get smartinbox id\r\n    * @return string smartinbox id\r\n    */\nbizagi.util.getLastProcessInboxSmartInboxId = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processInfo.smartInboxId;\n};\n\n/**\r\n    * Get sort info\r\n    * @return {} sort info\r\n    */\nbizagi.util.getLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.sortInfo;\n};\n\n/**\r\n    * Get filter info\r\n    * @return {} filter info\r\n    */\nbizagi.util.getLastProcessInboxFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.filterInfo;\n};\n\n/**\r\n    * Get live filter info\r\n    * @return {} live filter info\r\n    */\nbizagi.util.getLastProcessInboxLiveFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.liveFilters;\n};\n\n/**\r\n    * Get process columns info\r\n    * @return [] process columns info\r\n    */\nbizagi.util.getLastProcessInboxProcessColumns = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processColumnsInfo;\n};\n\n/**\r\n    * Get input tray info\r\n    * @return string inputTray info\r\n    */\nbizagi.util.getLastProcessInboxInputTray = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.inputTrayInfo;\n};\n\n/**\r\n    * DELETE\r\n    */\n\n/**\r\n        * Remove last process inbox\r\n        * @return void()\r\n        */\nbizagi.util.removeLastProcessInbox = function () {\n  bizagi.util.removeItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.sortInfo) {\n    // set data\n    lastProcessInbox.sortInfo = bizagi.util.createLastProcessInboxSort();\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessLiveFilters = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.liveFilters) {\n    // set data\n    lastProcessInbox.liveFilters = [];\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\nbizagi.util.getSyncTimeStampKey = function () {\n  var syncTimeStampKey = 'syncTimeStamp';\n  syncTimeStampKey = syncTimeStampKey.concat(\"_\", bizagi.util.getUserHash());\n  return syncTimeStampKey;\n};\n\nbizagi.util.storeSyncTimeStamp = function (currentDate) {\n  bizagi.util.setItemLocalStorage(bizagi.util.getSyncTimeStampKey(), currentDate.toString());\n};\n\nbizagi.util.getSyncTimeStamp = function () {\n  var syncTimeStamp = bizagi.util.getItemLocalStorage(bizagi.util.getSyncTimeStampKey());\n  return syncTimeStamp ? new Date(syncTimeStamp) : undefined;\n};\n\nbizagi.util.getUserHash = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  return userKey.hashCode();\n};\n\n/**\r\n    * set or get the value in the defaultWidget\r\n    * if is mobile use cookie\r\n    * if is desktop save the value DETAIL or TABLE\r\n    * if is desktop on get returns inbox or inboxGrid only\r\n    */\nbizagi.util.defaultWidget = function (newValueStr) {\n  var _preferService = bizagi.services.preferences(),\n  _widgets = bizagi.workportal.widgets.widget,\n  _val2Str = function _val2Str(val) {\n    return val === 'DETAIL' ? _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX : _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n  },\n  _str2Val = function _str2Val(str) {\n    return str === 'inbox' ? 'DETAIL' : 'TABLE';\n  },\n  _mobile = {\n    set: function set(newVal) {\n      bizagi.cookie(\"bizagiDefaultWidget\", newVal, { expires: 30 });\n    },\n    get: function get() {\n      return bizagi.cookie(\"bizagiDefaultWidget\");\n    } },\n\n  _desktop = {\n    set: function set(newVal) {\n      var _newValueView = _str2Val(newVal);\n      _preferService.changePreference(_preferService.name.INBOX_VIEW_TYPE, _newValueView);\n    },\n    get: function get() {\n      var _actualValue = _preferService.getPreference(_preferService.name.INBOX_VIEW_TYPE);\n      return _val2Str(_actualValue);\n    } },\n\n  _device = bizagi.util.isMobile ? _mobile : _desktop;\n\n  if (newValueStr !== undefined)\n  _device.set(newValueStr);\n  return _device.get();\n};\n\nbizagi.util.getMobileFeaturesKey = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  var mobileFeaturesKey = 'mobileFeatures';\n  mobileFeaturesKey = mobileFeaturesKey.concat(\"_\", userKey);\n  return mobileFeaturesKey;\n};\n\nbizagi.util.getMobileFeatures = function () {\n  var stringFeatures = bizagi.util.getItemLocalStorage(bizagi.util.getMobileFeaturesKey());\n  var updatedFeatures = $.extend(!bizagi.util.isEmpty(stringFeatures) ? JSON.parse(stringFeatures) : {}, bizagiConfig.features);\n  return updatedFeatures;\n};\n\nbizagi.util.storeMobileFeatures = function (mobileFeatures) {\n  var storedFeatures = bizagi.util.getMobileFeatures();\n  var updatedFeatures = $.extend(storedFeatures, mobileFeatures);\n  bizagi.util.setItemLocalStorage(bizagi.util.getMobileFeaturesKey(), JSON.stringify(updatedFeatures));\n};\n\nbizagi.util.getCardviewMaxColumsAllowed = function () {\n  var maxColumns = 100;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n  if (mobileFeatures && mobileFeatures.maxColumnsEnabled &&\n  mobileFeatures.maxColumnsEnabled.enabled === true) {\n    maxColumns = mobileFeatures.maxColumnsEnabled.value;\n  }\n  return maxColumns;\n};\n\nbizagi.util.blobTob64 = function (blob, onlyData) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n  reader.readAsDataURL(blob);\n  reader.onloadend = function () {\n    base64data = reader.result;\n    if (onlyData) {\n      base64data = base64data.split(',')[1];\n    }\n    def.resolve(base64data);\n  };\n  return def;\n};\n/**\r\n    * Convert blob to text\r\n    * @param {*} blob \r\n    */\nbizagi.util.blobToText = function (blob) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n\n  reader.readAsText(blob);\n  reader.onloadend = function () {\n    def.resolve(reader.result);\n  };\n\n  return def.promise();\n};\n\n/**\r\n    * Get valid data url\r\n    * @param {} properties\r\n    * @returns {}\r\n    */\n\n/**\r\n       * Get valid data url\r\n       * @param {} properties\r\n       * @returns {}\r\n       */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.getDataUrl = function (binaryData, url) {\n  var currentUrl;\n\n  try {\n    if (typeof binaryData !== \"undefined\" && !bizagi.util.isEmpty(binaryData)) {\n      var data = binaryData;\n      var newUrl = data.value || data;\n\n      if (Array.isArray(newUrl)) {\n        var tempUrl = newUrl.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = newUrl;\n      }\n    } else {\n      currentUrl = url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.console = {};\nbizagi.util.console.log = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.log(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.log.apply(this, arguments);\n};\n\nbizagi.util.console.error = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.error(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.error.apply(this, arguments);\n};\n\nbizagi.util.deepExtend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    var obj = arguments[i];\n\n    if (!obj)\n    continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (_typeof(obj[key]) === 'object') {\n          if (obj[key] instanceof Array == true)\n          out[key] = obj[key].slice(0);else\n\n          out[key] = deepExtend(out[key], obj[key]);\n        } else\n\n        out[key] = obj[key];\n      }\n    }\n  }\n\n  return out;\n};\n\nbizagi.util.extend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    if (!arguments[i])\n    continue;\n\n    for (var key in arguments[i]) {\n      if (arguments[i].hasOwnProperty(key))\n      out[key] = arguments[i][key];\n    }\n  }\n\n  return out;\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n/**\r\n    * Get the justify-content property to apply to a control according to the specified \"align\" property\r\n    * @param {string} align - left, right, center, default or justify\r\n    */\nbizagi.util.mapAlignClassName = function (align) {\n  var descs = {\n    'rigth': 'flex-end',\n    'left': 'flex-start',\n    'justify': 'flex-start',\n    'default': 'center',\n    'center': 'center' };\n\n  return descs[align] || \"center\";\n};\n\nbizagi.util.isMobileErrorTracesEnabled = function () {\n  var mobileErrorTracesEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileErrorTraces && mobileFeatures.mobileErrorTraces.enabled === true) {\n    mobileErrorTracesEnabled = true;\n  }\n\n  return mobileErrorTracesEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileSmartInboxEnabled = function () {\n  var mobileSmartInboxEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileSmartInbox && mobileFeatures.mobileSmartInbox.enabled === true) {\n    mobileSmartInboxEnabled = true;\n  }\n\n  return mobileSmartInboxEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileLiveFiltersEnabled = function () {\n  var mobileLiveFiltersEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileLiveFilters && mobileFeatures.mobileLiveFilters.enabled === true) {\n    mobileLiveFiltersEnabled = true;\n  }\n\n  return mobileLiveFiltersEnabled && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n$.any = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return false;\n  var result = $.grep(data, callback);\n  return result != null && result !== undefined && result.length > 0;\n};\n\n$.first = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return null;\n  var result = $.grep(data, callback);\n  return result == null || result === undefined || result.length == 0 ? null : result[0];\n};\n\n$.groupBy = function (data, property) {\n  if (data === undefined || data == null || data.length == 0) return {};\n  var result = {};\n  $.each(data, function (i, item) {\n    if (item === undefined) return;\n    if (result[item[property]] === undefined) result[item[property]] = [];\n    result[item[property]].push(item);\n  });\n  return result;\n};\n\n/**\r\n    * Downloads the file and try to open it\r\n    * @param blobFile\r\n    * @param fileName\r\n    */\nbizagi.util.downloadBlobFile = function (blobFile, fileName) {\n  if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n    window.navigator.msSaveOrOpenBlob(blobFile, fileName);\n  } else {\n    var url = window.URL.createObjectURL(blobFile);\n    var link = document.createElement(\"a\");\n\n    link.style = \"display: none\";\n    document.body.appendChild(link);\n\n    link.href = url;\n    link.download = fileName;\n\n    link.click();\n\n    window.URL.revokeObjectURL(url);\n    link.parentNode.removeChild(link);\n  }\n};\n\n/**\r\n    * Verify if blob type json is an error\r\n    * @param {*} jsonFile Blob tipo JSON\r\n    */\nbizagi.util.handleJSONResponse = function (jsonFile) {\n  var deferred = new $.Deferred();\n\n  if (jsonFile && /application\\/json/i.test(jsonFile.type)) {\n    bizagi.util.blobToText(jsonFile).then(function (result) {\n      var json = JSON.parse(result);\n\n      if (json.type === \"error\") {\n        deferred.reject(result);\n      } else {\n        deferred.resolve(jsonFile);\n      }\n    }).fail(function (err) {\n      deferred.reject(err);\n    });\n  } else {\n    deferred.resolve(jsonFile);\n  }\n\n  return deferred.promise();\n};\n\n/**\r\n    * Method to validate the valid format of values\r\n    * @param value\r\n    * @returns {{add: function(), validate: function()}}\r\n    */\nbizagi.util.bzValidator = function (value) {\n  var validators = [];\n  var errors = [];\n\n  return {\n    add: function add(callbackValidator, message) {\n      if (typeof callbackValidator == \"function\") {\n        validators.push({\n          callback: callbackValidator,\n          message: message });\n\n      } else {\n        console.warn(\"Callback is not a function\");\n      }\n\n      return this;\n    },\n    validate: function validate(callbackResponse) {\n      errors = [];\n\n      try {\n        if (validators && validators.length > 0) {\n          validators.forEach(function (validator) {\n            var result = validator.callback(value);\n            if (!bizagi.util.isBoolean(result)) {\n              errors.push(\"Callback evaluation is not a function: \" + validator.message);\n            } else if (!result) {\n              errors.push(validator.message || \"Validation error\");\n            }\n          });\n        } else {\n          errors.push(\"There are not validators added\");\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n\n      // Call response\n      callbackResponse({ errors: errors });\n\n      // Clean validators\n      validators = [];\n\n      return this;\n    },\n    isValid: function isValid() {\n      return errors && !errors.length;\n    } };\n\n};","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}bizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.util = typeof bizagi.util !== \"undefined\" ? bizagi.util : {};\nbizagi.context = typeof bizagi.context !== \"undefined\" ? bizagi.context : {};\n\n/**\r\n                                                                               * Method to detect iPad visitors\r\n                                                                               */\nbizagi.util.randomNumber = function (min, max) {\n  min = min || 1;\n  max = max || 10000000;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\r\n    *   Returns the resolved result from a promise when the promise has been executed already\r\n    */\nbizagi.resolveResult = function (promise) {\n  var result;\n  promise.done(function (data) {\n    result = data;\n  });\n  return result;\n};\n\n/**\r\n    *   Returns a boolean if there are two equal objects\r\n    */\nbizagi.util.identicalObjects = function (obj1, obj2) {\n  var self = this;\n\n  if (_typeof(obj1) !== _typeof(obj2)) {\n    return false;\n  }\n\n  if (typeof obj1 === \"function\") {\n    return obj1.toString() === obj2.toString();\n  }\n\n  if (obj1 instanceof Object && obj2 instanceof Object) {\n\n    // Count properties\n    if (bizagi.util.countProps(obj1) !== bizagi.util.countProps(obj2)) {\n      return false;\n    }\n\n    var r = true;\n    for (k in obj1) {\n      r = bizagi.util.identicalObjects(obj1[k], obj2[k]);\n      if (!r) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return obj1 === obj2;\n  }\n};\n\n\nbizagi.util.countProps = function (obj) {\n  var count = 0;\n  for (k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      count++;\n    }\n  }\n  return count;\n};\n\n/**\r\n    *   Encode a html string\r\n    */\nbizagi.util.encodeHtml = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  return text;\n};\n\n/**\r\n    *   Encodes the xpath\r\n    */\nbizagi.util.encodeXpath = function (xpath) {\n  if (bizagi.util.isEmpty(xpath))\n  return \"\";\n  return xpath.replaceAll(\".\", \"_\").replaceAll(\"=\", \"_\").replaceAll(\"[\", \"_\").replaceAll(\"]\", \"_\");\n};\n\n/**\r\n    *   Add a clone to the object prototype\r\n    */\nbizagi.clone = function (obj) {\n  return JSON.parse(JSON.encode(obj));\n};\n\n/**\r\n    *   Generates a random guid\r\n    */\nMath.guid = function () {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n};\n\n/**\r\n    * Execute deferreds in order\r\n    * @example var a = new bizagiQueue(); a.add(function);\r\n    *\r\n    */\nfunction bizagiQueue() {\n  var self = this;\n  var queue = [];\n\n  self.add = function (callback) {\n    queue.push({ callbacks: [callback] });\n  };\n\n  self.addParallel = function (callback) {\n    if (queue.length == 0)\n    return self.add(callback);\n\n    // Put a parallel on last item\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.execute = function () {\n    var starter = new $.Deferred();\n    var promise = starter.promise();\n    var queueLength = queue.length;\n    for (var i = 0; i < queueLength; i++) {\n      promise = promise.pipe(function () {\n        var element = queue.shift();\n        return $.when.apply($, $.map(element.callbacks, function (callback) {\n          // Function support\n          if (typeof callback == \"function\")\n          return callback();\n          // Deferred support\n          return callback;\n        }));\n      });\n    };\n\n    starter.resolve();\n    promise = promise.done(function () {\n      // Reset queue\n      queue = [];\n    });\n\n    return promise;\n  };\n};\n\n/**\r\n    *   Check if a map object is empty\r\n    */\nbizagi.util.isMapEmpty = function (map) {\n  // First we validate a special case\n  if (map.length == 1 && map[0].length == 0)\n  return true;\n  // Then we do normal validation\n  for (var key in map) {\n    if (map.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\r\n    * Find element to make scroll top\r\n    */\nbizagi.util.scrollTop = function (canvas) {\n  if (canvas && canvas[0]) {\n    while (canvas[0].tagName !== \"HTML\" && canvas.css(\"overflow-y\") != \"scroll\" && canvas.css(\"overflow-y\") != \"auto\" && canvas.parent().length > 0) {\n      canvas = canvas.parent();\n    }\n  }\n  return canvas;\n};\n\n/*\r\n   *   Read the query string parameteres\r\n   */\nbizagi.util.getQueryString = function (url) {\n  var params = {};\n  url = url || window.location.href;\n  var query = url.indexOf(\"?\") > 0 ? url.substring(url.indexOf(\"?\") + 1) : \"\";\n  var pairs = query.split(\"&\");\n  for (var i = 0; i < pairs.length; i++) {\n    var pos = pairs[i].indexOf('=');\n    if (pos == -1)\n    continue;\n    var argname = pairs[i].substring(0, pos);\n    var value = pairs[i].substring(pos + 1);\n    params[argname] = unescape(value);\n  }\n  return params;\n};\n\n\n/*\r\n   *   Info scenarios\r\n   */\nvar scenarioInfo = function scenarioInfo(params) {\n  var self = this;\n  var _state = {};\n\n  /**\r\n                   * Return url where is located specific scenario\r\n                   *\r\n                   * @param params\r\n                   * @returns {string}\r\n                   */\n  self.getFileScenario = function (params) {\n    params = params || {};\n    var url = \"\";\n    var scenario = params.scenario.split(\".\") || [];\n    var category = scenario[0];\n\n    url = BIZAGI_SMARTPHONE_PATH + \"scenarios/\" + category + \"/\" + params.scenario + \".js\";\n\n    return url;\n  };\n\n  return {\n    getFileScenario: self.getFileScenario };\n\n};\n\n/**\r\n    *   Determines if parameter 'n' is numeric\r\n    */\nbizagi.util.isNumeric = function (n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\n/**\r\n    *   Determines if a element has visibility\r\n    */\nbizagi.util.isScrolledIntoView = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var scrollTop = layout.scrollTop();\n  var elemTop = $(elem).offset().top;\n  var elemBottom = elemTop + $(elem).height();\n  var docViewBottom = scrollTop + $(layout).height();\n  return elemBottom <= docViewBottom && elemTop >= scrollTop;\n};\n\n/**\r\n    * determines whether the element in the browser supports the event we are looking for, eg 'paste', 'input', 'blur', etc. More info check modernizer.js.\r\n    * @param  {string|*}           eventName  is the name of an event to test for (e.g. \"resize\")\r\n    * @param  {(Object|string|*)=} element    is the element|document|window|tagName to test on\r\n    * @return {boolean}\r\n    */\nbizagi.util.isEventSupported = function (eventName, element) {\n  var needsFallback = !('onblur' in document.documentElement);\n  var isSupported;\n\n  if (!eventName) {\n    return false;\n  }\n  if (!element || typeof element === 'string') {\n    element = document.createElement(element || 'div');\n  }\n\n  // Testing via the `in` operator is sufficient for modern browsers and IE.\n  // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n  // \"resize\", whereas `in` \"catches\" those.\n  eventName = 'on' + eventName;\n  isSupported = eventName in element;\n\n  // Fallback technique for old Firefox - bit.ly/event-detection\n  if (!isSupported && needsFallback) {\n    if (!element.setAttribute) {\n      // Switch to generic element if it lacks `setAttribute`.\n      // It could be the `document`, `window`, or something else.\n      element = document.createElement('div');\n    }\n    if (element.setAttribute && element.removeAttribute) {\n      element.setAttribute(eventName, '');\n      isSupported = typeof element[eventName] === 'function';\n\n      if (element[eventName] !== undefined) {\n        // If property was created, \"remove it\" by setting value to `undefined`.\n        element[eventName] = undefined;\n      }\n      element.removeAttribute(eventName);\n    }\n  }\n  return isSupported;\n};\n/*\r\n    * Method to detect Android visitors\r\n    */\nbizagi.util.isAndroid = function () {\n  return navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n};\n\n/**\r\n    * Functions to loading\r\n    */\n(function ($) {\n  $.fn.startLoading = function (params) {\n    bizagi.util.smartphone.startLoading();\n  };\n\n  $.fn.endLoading = function () {\n    bizagi.util.smartphone.stopLoading();\n  };\n})(jQuery);\n\n/***\r\n             * Removes the objects and dispose\r\n             * @param obj\r\n             */\n\nbizagi.util.dispose = function (obj) {\n  for (key in obj) {\n    if (_typeof(obj[key]) == \"object\") delete obj[key];\n    if (typeof obj[key] == \"function\") {obj[key] = null;delete obj[key];}\n  }\n};\n\n/**\r\n   * Remove all backslashes that represent scape of characters\r\n   */\nbizagi.util.stripslashes = function (str) {\n  return str.replace(/\\\\'/g, '\\'').replace(/\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\').replace(/\\\\0/g, '\\0');\n};\n\n/**\r\n    * CryptoJS MD5 \r\n    * @param {} message \r\n    * @returns {} \r\n    */\nbizagi.util.md5 = function (message) {\n  // Code here will be linted with JSHint.\n  /* jshint ignore:start */\n  var CryptoJS = CryptoJS || function (s, p) {var m = {},l = m.lib = {},n = function n() {},r = l.Base = { extend: function extend(b) {n.prototype = this;var h = new n();b && h.mixIn(b);h.hasOwnProperty(\"init\") || (h.init = function () {h.$super.init.apply(this, arguments);});h.init.prototype = h;h.$super = this;return h;}, create: function create() {var b = this.extend();b.init.apply(b, arguments);return b;}, init: function init() {}, mixIn: function mixIn(b) {for (var h in b) {b.hasOwnProperty(h) && (this[h] = b[h]);}b.hasOwnProperty(\"toString\") && (this.toString = b.toString);}, clone: function clone() {return this.init.prototype.extend(this);} },q = l.WordArray = r.extend({ init: function init(b, h) {b = this.words = b || [];this.sigBytes = h != p ? h : 4 * b.length;}, toString: function toString(b) {return (b || t).stringify(this);}, concat: function concat(b) {var h = this.words,a = b.words,j = this.sigBytes;b = b.sigBytes;this.clamp();if (j % 4) for (var g = 0; g < b; g++) {h[j + g >>> 2] |= (a[g >>> 2] >>> 24 - 8 * (g % 4) & 255) << 24 - 8 * ((j + g) % 4);} else if (65535 < a.length) for (g = 0; g < b; g += 4) {h[j + g >>> 2] = a[g >>> 2];} else h.push.apply(h, a);this.sigBytes += b;return this;}, clamp: function clamp() {var b = this.words,h = this.sigBytes;b[h >>> 2] &= 4294967295 << 32 - 8 * (h % 4);b.length = s.ceil(h / 4);}, clone: function clone() {var b = r.clone.call(this);b.words = this.words.slice(0);return b;}, random: function random(b) {for (var h = [], a = 0; a < b; a += 4) {h.push(4294967296 * s.random() | 0);}return new q.init(h, b);} }),v = m.enc = {},t = v.Hex = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {var k = a[j >>> 2] >>> 24 - 8 * (j % 4) & 255;g.push((k >>> 4).toString(16));g.push((k & 15).toString(16));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j += 2) {g[j >>> 3] |= parseInt(b.substr(j, 2), 16) << 24 - 4 * (j % 8);}return new q.init(g, a / 2);} },a = v.Latin1 = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {g.push(String.fromCharCode(a[j >>> 2] >>> 24 - 8 * (j % 4) & 255));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j++) {g[j >>> 2] |= (b.charCodeAt(j) & 255) << 24 - 8 * (j % 4);}return new q.init(g, a);} },u = v.Utf8 = { stringify: function stringify(b) {try {return decodeURIComponent(escape(a.stringify(b)));} catch (g) {throw Error(\"Malformed UTF-8 data\");}}, parse: function parse(b) {return a.parse(unescape(encodeURIComponent(b)));} },g = l.BufferedBlockAlgorithm = r.extend({ reset: function reset() {this._data = new q.init();this._nDataBytes = 0;}, _append: function _append(b) {\"string\" == typeof b && (b = u.parse(b));this._data.concat(b);this._nDataBytes += b.sigBytes;}, _process: function _process(b) {var a = this._data,g = a.words,j = a.sigBytes,k = this.blockSize,m = j / (4 * k),m = b ? s.ceil(m) : s.max((m | 0) - this._minBufferSize, 0);b = m * k;j = s.min(4 * b, j);if (b) {for (var l = 0; l < b; l += k) {this._doProcessBlock(g, l);}l = g.splice(0, b);a.sigBytes -= j;}return new q.init(l, j);}, clone: function clone() {var b = r.clone.call(this);b._data = this._data.clone();return b;}, _minBufferSize: 0 });l.Hasher = g.extend({ cfg: r.extend(), init: function init(b) {this.cfg = this.cfg.extend(b);this.reset();}, reset: function reset() {g.reset.call(this);this._doReset();}, update: function update(b) {this._append(b);this._process();return this;}, finalize: function finalize(b) {b && this._append(b);return this._doFinalize();}, blockSize: 16, _createHelper: function _createHelper(b) {return function (a, g) {return new b.init(g).finalize(a);};}, _createHmacHelper: function _createHmacHelper(b) {return function (a, g) {return new k.HMAC.init(b, g).finalize(a);};} });var k = m.algo = {};return m;}(Math);(function (s) {function p(a, k, b, h, l, j, m) {a = a + (k & b | ~k & h) + l + m;return (a << j | a >>> 32 - j) + k;}function m(a, k, b, h, l, j, m) {a = a + (k & h | b & ~h) + l + m;return (a << j | a >>> 32 - j) + k;}function l(a, k, b, h, l, j, m) {a = a + (k ^ b ^ h) + l + m;return (a << j | a >>> 32 - j) + k;}function n(a, k, b, h, l, j, m) {a = a + (b ^ (k | ~h)) + l + m;return (a << j | a >>> 32 - j) + k;}for (var r = CryptoJS, q = r.lib, v = q.WordArray, t = q.Hasher, q = r.algo, a = [], u = 0; 64 > u; u++) {a[u] = 4294967296 * s.abs(s.sin(u + 1)) | 0;}q = q.MD5 = t.extend({ _doReset: function _doReset() {this._hash = new v.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function _doProcessBlock(g, k) {for (var b = 0; 16 > b; b++) {var h = k + b,w = g[h];g[h] = (w << 8 | w >>> 24) & 16711935 | (w << 24 | w >>> 8) & 4278255360;}var b = this._hash.words,h = g[k + 0],w = g[k + 1],j = g[k + 2],q = g[k + 3],r = g[k + 4],s = g[k + 5],t = g[k + 6],u = g[k + 7],v = g[k + 8],x = g[k + 9],y = g[k + 10],z = g[k + 11],A = g[k + 12],B = g[k + 13],C = g[k + 14],D = g[k + 15],c = b[0],d = b[1],e = b[2],f = b[3],c = p(c, d, e, f, h, 7, a[0]),f = p(f, c, d, e, w, 12, a[1]),e = p(e, f, c, d, j, 17, a[2]),d = p(d, e, f, c, q, 22, a[3]),c = p(c, d, e, f, r, 7, a[4]),f = p(f, c, d, e, s, 12, a[5]),e = p(e, f, c, d, t, 17, a[6]),d = p(d, e, f, c, u, 22, a[7]),c = p(c, d, e, f, v, 7, a[8]),f = p(f, c, d, e, x, 12, a[9]),e = p(e, f, c, d, y, 17, a[10]),d = p(d, e, f, c, z, 22, a[11]),c = p(c, d, e, f, A, 7, a[12]),f = p(f, c, d, e, B, 12, a[13]),e = p(e, f, c, d, C, 17, a[14]),d = p(d, e, f, c, D, 22, a[15]),c = m(c, d, e, f, w, 5, a[16]),f = m(f, c, d, e, t, 9, a[17]),e = m(e, f, c, d, z, 14, a[18]),d = m(d, e, f, c, h, 20, a[19]),c = m(c, d, e, f, s, 5, a[20]),f = m(f, c, d, e, y, 9, a[21]),e = m(e, f, c, d, D, 14, a[22]),d = m(d, e, f, c, r, 20, a[23]),c = m(c, d, e, f, x, 5, a[24]),f = m(f, c, d, e, C, 9, a[25]),e = m(e, f, c, d, q, 14, a[26]),d = m(d, e, f, c, v, 20, a[27]),c = m(c, d, e, f, B, 5, a[28]),f = m(f, c, d, e, j, 9, a[29]),e = m(e, f, c, d, u, 14, a[30]),d = m(d, e, f, c, A, 20, a[31]),c = l(c, d, e, f, s, 4, a[32]),f = l(f, c, d, e, v, 11, a[33]),e = l(e, f, c, d, z, 16, a[34]),d = l(d, e, f, c, C, 23, a[35]),c = l(c, d, e, f, w, 4, a[36]),f = l(f, c, d, e, r, 11, a[37]),e = l(e, f, c, d, u, 16, a[38]),d = l(d, e, f, c, y, 23, a[39]),c = l(c, d, e, f, B, 4, a[40]),f = l(f, c, d, e, h, 11, a[41]),e = l(e, f, c, d, q, 16, a[42]),d = l(d, e, f, c, t, 23, a[43]),c = l(c, d, e, f, x, 4, a[44]),f = l(f, c, d, e, A, 11, a[45]),e = l(e, f, c, d, D, 16, a[46]),d = l(d, e, f, c, j, 23, a[47]),c = n(c, d, e, f, h, 6, a[48]),f = n(f, c, d, e, u, 10, a[49]),e = n(e, f, c, d, C, 15, a[50]),d = n(d, e, f, c, s, 21, a[51]),c = n(c, d, e, f, A, 6, a[52]),f = n(f, c, d, e, q, 10, a[53]),e = n(e, f, c, d, y, 15, a[54]),d = n(d, e, f, c, w, 21, a[55]),c = n(c, d, e, f, v, 6, a[56]),f = n(f, c, d, e, D, 10, a[57]),e = n(e, f, c, d, t, 15, a[58]),d = n(d, e, f, c, B, 21, a[59]),c = n(c, d, e, f, r, 6, a[60]),f = n(f, c, d, e, z, 10, a[61]),e = n(e, f, c, d, j, 15, a[62]),d = n(d, e, f, c, x, 21, a[63]);b[0] = b[0] + c | 0;b[1] = b[1] + d | 0;b[2] = b[2] + e | 0;b[3] = b[3] + f | 0;}, _doFinalize: function _doFinalize() {var a = this._data,k = a.words,b = 8 * this._nDataBytes,h = 8 * a.sigBytes;k[h >>> 5] |= 128 << 24 - h % 32;var l = s.floor(b / 4294967296);k[(h + 64 >>> 9 << 4) + 15] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;k[(h + 64 >>> 9 << 4) + 14] = (b << 8 | b >>> 24) & 16711935 | (b << 24 | b >>> 8) & 4278255360;a.sigBytes = 4 * (k.length + 1);this._process();a = this._hash;k = a.words;for (b = 0; 4 > b; b++) {h = k[b], k[b] = (h << 8 | h >>> 24) & 16711935 | (h << 24 | h >>> 8) & 4278255360;}return a;}, clone: function clone() {var a = t.clone.call(this);a._hash = this._hash.clone();return a;} });r.MD5 = t._createHelper(q);r.HmacMD5 = t._createHmacHelper(q);})(Math);\n  /* jshint ignore:end */\n  return CryptoJS.MD5(message).toString();\n};\n\n\n/***\r\n   * Transform base64 image to blob\r\n   * @b64Data \r\n   * @contentType \r\n   * @sliceSize \r\n   */\nbizagi.util.b64toBlob = function (b64Data, contentType, sliceSize) {\n  contentType = contentType || '';\n  sliceSize = sliceSize || 512;\n\n  var byteCharacters = atob(b64Data);\n  var byteArrays = [];\n\n  for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    var byteNumbers = new Array(slice.length);\n    for (var i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    var byteArray = new Uint8Array(byteNumbers);\n\n    byteArrays.push(byteArray);\n  }\n\n  var blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\nbizagi.util.arrayEach = function (array, callback) {\n  if (!!array) {\n    if (Object.prototype.toString.apply(array) === \"[object Array]\" && Object.prototype.toString.apply(callback) === \"[object Function]\") {\n      var index, value;\n      for (index in array) {\n        if (array.hasOwnProperty(index)) {\n          value = callback.call(array[index], index, array[index]);\n          if (value === false) {\n            return;\n          }\n        }\n      }\n    } else {\n      $.each(array, callback);\n    }\n  }\n};\n\nfunction printf(msg) {\n  var args = Array.prototype.slice.call(arguments, 1),arg;\n  return msg.replace(/(%[disv])/g, function (a, val) {\n    arg = args.shift();\n    if (arg !== undefined) {\n      switch (val.charCodeAt(1)) {\n        case 100:\n          return +arg; // d\n        case 105:\n          return Math.round(+arg); // i\n        case 115:\n          return String(arg); // s\n        case 118:\n          return arg; // v\n      }\n    }\n    return val;\n  });\n}\n\n/*\r\n  * Validates if the text is a valid opening and closing tags, including classes\r\n  */\nbizagi.util.isHTMLValidText = function (text) {\n  var ex = new RegExp(/<(.|\\n)*?>/g);\n  return ex.test(text);\n};\n\n\n/*\r\n   *   Determines if a control as a scrollbar \r\n   */\nbizagi.util.hasScroll = function (el, direction) {\n  if (el.length)\n  el = el[0];\n  direction = direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n  var result = !!el[direction];\n  if (!result) {\n    el[direction] = 1;\n    result = !!el[direction];\n    el[direction] = 0;\n  }\n  return result;\n};\n\n/**\r\n    * Convert String to Base64 Unicode\r\n    * @param {} str \r\n    * @returns {} \r\n    */\nbizagi.util.b64EncodeUnicode = function (string) {\n  return btoa(encodeURIComponent(string).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode(\"0x\" + p1);\n  }));\n};\n\n//remove all the character except the +, - and decimal point\nbizagi.util.getStandardNotation = function (number, decimalSymbol) {\n  var plusCharacter = '+';\n  var minusCharacter = '-';\n  var decimalSymbol = decimalSymbol || '.';\n  var expSymbol = 'e';\n  var tmp = '';\n  //remove all the character except the +, -, decimal point and the numbers\n  var decimalNumber = false;\n  var exponentialNumber = false;\n  number = (number.length > 0 ? number.toString().toLowerCase() : '').replace(/ /g, '');\n  for (var i = 0; i < number.length; i++) {\n    if ((number[i] === plusCharacter || number[i] === minusCharacter) && (i === 0 || number[i - 1] == expSymbol)) {\n      tmp += number[i];\n    } else if (!isNaN(Number(number[i]))) {\n      tmp += number[i];\n    } else\n    if (number[i] === decimalSymbol && !decimalNumber) {\n      tmp += number[i];\n      decimalNumber = true;\n    } else\n    if (number[i] === expSymbol && !exponentialNumber) {\n      tmp += number[i];\n      exponentialNumber = true;\n    }\n  }\n  return tmp;\n};\n\n//Return it in normalized scientific notation\nbizagi.util.scientificNotationFormat = function (number, decimalSymbol, sdLimit, expMinLimit, expMaxLimit) {\n  decimalSymbol = decimalSymbol || '.';\n  number = bizagi.util.getStandardNotation(number, decimalSymbol);\n  sdLimit = sdLimit > 0 ? sdLimit : 38;\n  expMinLimit = expMinLimit > 0 ? expMinLimit : -125;\n  expMaxLimit = expMaxLimit > 0 ? expMaxLimit : 125;\n  var expSimbol = 'e';\n  var sNregex = new RegExp('[0-9]+(' + decimalSymbol + '[0-9]+)?(e[+-]?[0-9]+)?');\n  var sNFormat = number.match(sNregex);\n\n  //get que prefix\n  var exp = 0;\n\n  var prefix = number[0] === '-' ? number[0] : '';\n  var originalPointIndex = 0;\n\n  number = number.replace(prefix, '');\n\n  //if the number is not in scientific notation\n  if (sNFormat && sNFormat[0] && sNFormat[2]) {\n    var tempParts = sNFormat[0] ? sNFormat[0].replace(sNFormat[2], '').split(decimalSymbol) : '';\n\n    var significantDigits = '';\n    var intPart = '';\n\n    //calculate significant digits\n    //remove zeros at the left\n    tempParts[0] = tempParts[0].replace(/^0+/g, '');\n\n    if (tempParts[0].length > 1) {\n      significantDigits = tempParts[0].slice(1);\n      originalPointIndex = significantDigits.length;\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(sNFormat[1] || '');\n    } else\n    if (tempParts[0].length === 1) {\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(tempParts[1] || '');\n    } else\n    {\n      originalPointIndex = tempParts[1].length;\n      tempParts[1] = tempParts[1].replace(/^0+/g, '');\n      originalPointIndex = tempParts[1].length - 1 - originalPointIndex;\n      intPart = tempParts[1][0];\n      significantDigits = tempParts[1].slice(1);\n    }\n    //remove . and zeros from significant digits\n    significantDigits = significantDigits.replace(decimalSymbol, '').replace(/0+$/g, '');\n\n    if (significantDigits.length >= sdLimit) {\n      significantDigits = significantDigits.slice(0, sdLimit - 1);\n    }\n    exp = Number(sNFormat[2].replace(expSimbol, '')) + originalPointIndex;\n    exp = exp > expMaxLimit ? expMaxLimit : exp < expMinLimit ? expMinLimit : exp;\n    return prefix + intPart + (significantDigits ? decimalSymbol + significantDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n  } else\n  if (number) {\n\n    originalPointIndex = number.indexOf(decimalSymbol);\n    var from = 0;\n    var to = number.length - 1;\n\n    //remove decimal point\n    number = number.replace(decimalSymbol, '');\n\n    //from\n    var i = from;\n    while (!significantFlag) {\n      if (number[i] !== '0' && number[i] !== decimalSymbol) {significantFlag = true;from = i;} else\n      {i++;}\n    }\n    //to\n    var significantFlag = false;\n    var j = to;\n    while (!significantFlag) {\n      if (number[j] !== '0' && number[j] !== decimalSymbol && '-') {significantFlag = true;to = j + 1;} else\n      {j--;}\n    }\n    to = to > sdLimit + from ? sdLimit + from : to;\n    if (originalPointIndex !== -1) {\n      //find significant digits\n      var significantFlag = false;\n      var significantDigits = number.slice(from, to);\n      var pointIndex = from + 1;\n      exp = originalPointIndex - pointIndex;\n      if (significantDigits.length > 0 && !isNaN(Number(significantDigits[0]))) {\n        return prefix + significantDigits[0] + (significantDigits.length > 1 ? decimalSymbol + significantDigits.slice(1) : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else\n      {return '0';}\n\n    } else\n    {\n      //Int numbers\n      var firstDigit = number.slice(from, from + 1);\n      var restDigits = number.slice(from + 1, number.length);\n      exp = restDigits.length;\n      restDigits = restDigits.replace(/0+$/g, '');\n      if (restDigits.length > sdLimit) {\n        restDigits = number.slice(from + 1, sdLimit + from);\n      }\n      if (Number(firstDigit)) {\n        return prefix + firstDigit + (restDigits.length > 0 ? decimalSymbol + restDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n    }\n  } else\n  {return '';}\n};\n\nbizagi.util.isString = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object String]\";\n};\n\nbizagi.util.isArray = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Array]\";\n};","//  This file is part of the jQuery formatCurrency Plugin.\n//\n//    The jQuery formatCurrency Plugin is free software: you can redistribute it\n//    and/or modify it under the terms of the GNU General Public License as published \n//    by the Free Software Foundation, either version 3 of the License, or\n//    (at your option) any later version.\n\n//    The jQuery formatCurrency Plugin is distributed in the hope that it will\n//    be useful, but WITHOUT ANY WARRANTY; without even the implied warranty \n//    of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//    GNU General Public License for more details.\n//\n//    You should have received a copy of the GNU General Public License along with \n//    the jQuery formatCurrency Plugin.  If not, see <http://www.gnu.org/licenses/>.\n\n(function ($) {\n\n  $.formatCurrency = {};\n\n  $.formatCurrency.regions = [];\n\n  // default Region is en\n  $.formatCurrency.regions[''] = {\n    symbol: '$',\n    positiveFormat: '%s%n',\n    negativeFormat: '(%s%n)',\n    decimalSymbol: '.',\n    digitGroupSymbol: ',',\n    groupDigits: true };\n\n\n  $.fn.formatCurrency = function (destination, settings) {\n\n    if (arguments.length == 1 && typeof destination !== \"string\") {\n      settings = destination;\n      destination = false;\n    }\n\n    // initialize defaults\n    var defaults = {\n      name: \"formatCurrency\",\n      colorize: false,\n      region: '',\n      global: true,\n      roundToDecimalPlace: 2, // roundToDecimalPlace: -1; for no rounding; 0 to round to the dollar; 1 for one digit cents; 2 for two digit cents; 3 for three digit cents; ...\n      eventOnDecimalsEntered: false };\n\n    // initialize default region\n    defaults = $.extend(defaults, $.formatCurrency.regions['']);\n    // override defaults with settings passed in\n    settings = $.extend(defaults, settings);\n\n    // check for region setting\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n\n    return this.each(function () {\n      var $this = $(this);\n\n      // get number\n      var num = '0';\n      var multiCeroPattern = new RegExp(\"^(0+|-0+)\", \"g\");\n      num = $this[$this.is('input, select, textarea') ? 'val' : 'html']();\n\n      //identify '(123)' as a negative number\n      if (num.search('\\\\(') >= 0) {\n        num = '-' + num;\n      }\n\n      // Identify 0000 and -0000 pattern, and replace to 0\n      if (!num.match(/[1-9]/g)) num = num.replace(multiCeroPattern, 0);\n\n      if (num === '' || num === '-' && settings.roundToDecimalPlace === -1) {\n        return;\n      }\n\n      // if the number is valid use it, otherwise clean it\n      if (isNaN(num)) {\n        // clean number\n        num = num.replace(settings.regex, '');\n\n        if (num === '' || num === '-' && settings.roundToDecimalPlace === -1) {\n          return;\n        }\n\n        if (settings.decimalSymbol != '.') {\n          num = num.replace(settings.decimalSymbol, '.'); // reset to US decimal for arithmetic\n        }\n        if (isNaN(num)) {\n          num = '0';\n        }\n      }\n\n      // evalutate number input\n      var numParts = String(num).split('.');\n      var isPositive = num == Math.abs(num);\n      var hasDecimals = numParts.length > 1;\n      var decimals = hasDecimals ? numParts[1].toString() : '0';\n      var originalDecimals = decimals;\n\n      // format number\n      num = Math.abs(numParts[0]);\n      num = isNaN(num) ? 0 : num;\n      if (settings.roundToDecimalPlace >= 0) {\n        decimals = parseFloat('1.' + decimals); // prepend \"0.\"; (IE does NOT round 0.50.toFixed(0) up, but (1+0.50).toFixed(0)-1\n        decimals = decimals.toFixed(settings.roundToDecimalPlace); // round\n        if (decimals.substring(0, 1) == '2') {\n          num = Number(num) + 1;\n        }\n        decimals = decimals.substring(2); // remove \"0.\"\n      }\n      num = String(num);\n\n      if (settings.groupDigits) {\n        for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++) {\n          num = num.substring(0, num.length - (4 * i + 3)) + settings.digitGroupSymbol + num.substring(num.length - (4 * i + 3));\n        }\n      }\n\n      if (hasDecimals && settings.roundToDecimalPlace == -1 || settings.roundToDecimalPlace > 0) {\n        num += settings.decimalSymbol + decimals;\n      }\n\n      // format symbol/negative\n      var format = isPositive ? settings.positiveFormat : settings.negativeFormat;\n      var money = format.replace(/%s/g, settings.symbol);\n      money = money.replace(/%n/g, num);\n\n      // setup destination\n      var $destination = $([]);\n      if (!destination) {\n        $destination = $this;\n      } else {\n        $destination = $(destination);\n      }\n      // set destination\n      $destination[$destination.is('input, select, textarea') ? 'val' : 'html'](money);\n\n      if (\n      hasDecimals &&\n      settings.eventOnDecimalsEntered &&\n      originalDecimals.length > settings.roundToDecimalPlace)\n      {\n        $destination.trigger('decimalsEntered', originalDecimals);\n      }\n\n      // colorize\n      if (settings.colorize) {\n        $destination.css('color', isPositive ? 'black' : 'red');\n      }\n    });\n  };\n\n  // Remove all non numbers from text\n  $.fn.toNumber = function (settings) {\n    var defaults = $.extend({\n      name: \"toNumber\",\n      region: '',\n      global: true },\n    $.formatCurrency.regions['']);\n\n    settings = jQuery.extend(defaults, settings);\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n\n    return this.each(function () {\n      var method = $(this).is('input, select, textarea') ? 'val' : 'html';\n      $(this)[method]($(this)[method]().replace('(', '(-').replace(settings.regex, ''));\n    });\n  };\n\n  // returns the value from the first element as a number\n  $.fn.asNumber = function (settings) {\n    var defaults = $.extend({\n      name: \"asNumber\",\n      region: '',\n      parse: true,\n      parseType: 'Float',\n      global: true },\n    $.formatCurrency.regions['']);\n    settings = jQuery.extend(defaults, settings);\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n    settings.parseType = validateParseType(settings.parseType);\n\n    var method = $(this).is('input, select, textarea') ? 'val' : 'html';\n    var num = $(this)[method]();\n    num = num ? num : \"\";\n    num = num.replace('(', '(-');\n    num = num.replace(settings.regex, '');\n    if (!settings.parse) {\n      return num;\n    }\n\n    if (num.length == 0) {\n      num = '0';\n    }\n\n    if (settings.decimalSymbol != '.') {\n      num = num.replace(settings.decimalSymbol, '.'); // reset to US decimal for arthmetic\n    }\n\n    return window['parse' + settings.parseType](num);\n  };\n\n  function getRegionOrCulture(region) {\n    var regionInfo = $.formatCurrency.regions[region];\n    if (regionInfo) {\n      return regionInfo;\n    } else\n    {\n      if (/(\\w+)-(\\w+)/g.test(region)) {\n        var culture = region.replace(/(\\w+)-(\\w+)/g, \"$1\");\n        return $.formatCurrency.regions[culture];\n      }\n    }\n    // fallback to extend(null) (i.e. nothing)\n    return null;\n  }\n\n  function validateParseType(parseType) {\n    switch (parseType.toLowerCase()) {\n      case 'int':\n        return 'Int';\n      case 'float':\n        return 'Float';\n      default:\n        throw 'invalid parseType';}\n\n  }\n\n  function generateRegex(settings) {\n    if (settings.symbol === '') {\n      return new RegExp(\"[^\\\\d\" + settings.decimalSymbol + \"-]\", \"g\");\n    } else\n    {\n      var symbol = settings.symbol.replace('$', '\\\\$').replace('.', '\\\\.');\n      return new RegExp(symbol + \"|[^\\\\d\" + settings.decimalSymbol + \"-]\", \"g\");\n    }\n  }\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}(function (a) {\n  function k(b, c) {\n    function j() {var a = document.body,b = document.documentElement;return Math.max(a.scrollHeight, a.offsetHeight, b.clientHeight, b.scrollHeight, b.offsetHeight);}function u(b) {e = a(\"li.dw-v\", b).eq(0).index();d = a(\"li.dw-v\", b).eq(-1).index();f = i.height;F = m;}function x(b) {var a = i.headerText;return a ? \"function\" == typeof a ? a.call(B, b) : a.replace(/{value}/i, b) : \"\";}function p() {m.temp = J && null !== m.val && m.val != b.val() || null === m.values ? i.parseValue(b.val() ? b.val() : \"\", m) : m.values.slice(0);m.setValue(!0);}\n    function z(b, c, e, u, f) {i.validate.call(B, y, e);a(\".dww ul\", y).each(function (u) {var i = a(this),d = a('li[data-val=\"' + m.temp[u] + '\"]', i),i = d.index(),g = d,d = i;if (!g.hasClass(\"dw-v\")) {for (var h = g, x = 0, j = 0; h.prev().length && !h.hasClass(\"dw-v\");) {h = h.prev(), x++;}for (; g.next().length && !g.hasClass(\"dw-v\");) {g = g.next(), j++;}j < x && j && 1 == !f || !x || !h.hasClass(\"dw-v\") || 1 == f ? d += j : (g = h, d -= x);m.temp[u] = g.data(\"val\");}if (i != d || u == e || void 0 === e) m.scroll(a(this), d, u == e ? b : 0, c, u);});m.change(u);}function k() {\n      var b = 0,c = 0,u = a(window).width(),\n      e = a(window).height(),d = a(window).scrollTop(),i = a(\".dwo\", y),f = a(\".dw\", y),g,h;a(\".dwc\", y).each(function () {g = a(this).outerWidth(!0);b += g;c = g > c ? g : c;});g = b > u ? c : b;f.width(g);g = f.outerWidth();h = f.outerHeight();f.css({ left: (u - g) / 2, top: d + (e - h) / 2 });i.height(0).height(j());\n    }function w(b) {var a = +b.data(\"pos\") + 1;l(b, a > d ? e : a, 1);}function E(b) {var a = +b.data(\"pos\") - 1;l(b, a < e ? d : a, 2);}var m = this,B = b,b = a(B),M,i = a.extend({}, D),O,y,N = {},P = {},J = b.is(\"input\"),K = !1;m.enable = function () {i.disabled = !1;J && b.prop(\"disabled\", !1);};\n    m.disable = function () {i.disabled = !0;J && b.prop(\"disabled\", !0);};m.scroll = function (b, a, c, u, e) {\n      var d = (O - a) * i.height;b.attr(\"style\", (c ? H + \"-transition:all \" + c.toFixed(1) + \"s ease-out;\" : \"\") + (I ? H + \"-transform:translate3d(0,\" + d + \"px,0);\" : \"top:\" + d + \"px;\"));if (c) {\n        var g = 0;clearInterval(N[e]);N[e] = setInterval(function () {g += 0.1;b.data(\"pos\", Math.round((a - u) * Math.sin(g / c * (Math.PI / 2)) + u));g >= c && (clearInterval(N[e]), b.data(\"pos\", a));}, 100);clearTimeout(P[e]);P[e] = setTimeout(function () {\n          \"mixed\" == i.mode && !b.hasClass(\"dwa\") &&\n          b.closest(\".dwwl\").find(\".dwwb\").fadeIn(\"fast\");\n        }, 1E3 * c);\n      } else b.data(\"pos\", a);\n    };m.setValue = function (a, c, e) {var u = i.formatResult(m.temp);m.val = u;m.values = m.temp.slice(0);K && a && z(e);c && J && b.val(u).trigger(\"change\");};m.validate = function (b, a, c, u) {z(b, a, c, !0, u);};m.change = function (b) {var c = i.formatResult(m.temp);\"inline\" == i.display ? m.setValue(!1, b) : a(\".dwv\", y).html(x(c));b && i.onChange.call(B, c, m);};m.hide = function () {\n      if (!1 === i.onClose.call(B, m.val, m)) return !1;a(\".dwtd\").prop(\"disabled\", !1).removeClass(\"dwtd\");\n      b.blur();y && y.remove();K = !1;a(window).unbind(\".dw\");\n    };m.show = function () {\n      if (i.disabled || K) return !1;var c = i.height,e = i.rows * c;p();for (var d = '<div class=\"' + i.theme + '\">' + (\"inline\" == i.display ? '<div class=\"dw dwbg dwi\"><div class=\"dwwr\">' : '<div class=\"dwo\"></div><div class=\"dw dwbg\"><div class=\"dwwr\">' + (i.headerText ? '<div class=\"dwv\"></div>' : \"\")), f = 0; f < i.wheels.length; f++) {\n        var d = d + ('<div class=\"dwc' + (\"scroller\" != i.mode ? \" dwpm\" : \" dwsc\") + (i.showLabel ? \"\" : \" dwhl\") + '\"><div class=\"dwwc dwrc\"><table cellpadding=\"0\" cellspacing=\"0\"><tr>'),\n        h;for (h in i.wheels[f]) {\n          var d = d + ('<td><div class=\"dwwl dwrc\">' + (\"scroller\" != i.mode ? '<div class=\"dwwb dwwbp\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\"><span>+</span></div><div class=\"dwwb dwwbm\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\"><span>&ndash;</span></div>' : \"\") + '<div class=\"dwl\">' + h + '</div><div class=\"dww dwrc\" style=\"height:' + e + \"px;min-width:\" + i.width + 'px;\"><ul>'),x;for (x in i.wheels[f][h]) {d += '<li class=\"dw-v\" data-val=\"' + x + '\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\">' + i.wheels[f][h][x] +\n            \"</li>\";}d += '</ul><div class=\"dwwo\"></div></div><div class=\"dwwol\"></div></div></td>';\n        }d += \"</tr></table></div></div>\";\n      }d += (\"inline\" != i.display ? '<div class=\"dwbc\"><span class=\"dwbw dwb-s\"><a href=\"#\" class=\"dwb\">' + i.setText + '</a></span><span class=\"dwbw dwb-c\"><a href=\"#\" class=\"dwb\">' + i.cancelText + \"</a></span></div>\" : '<div class=\"dwcc\"></div>') + \"</div></div></div>\";y = a(d);z();\"inline\" != i.display ? y.appendTo(\"body\") : b.is(\"div\") ? b.html(y) : y.insertAfter(b);K = !0;M.init(y, m);\"inline\" != i.display && (a(\".dwb-s a\",\n      y).click(function () {m.setValue(!1, !0);m.hide();i.onSelect.call(B, m.val, m);return !1;}), a(\".dwb-c a\", y).click(function () {m.hide();i.onCancel.call(B, m.val, m);return !1;}), a(\"input,select\").each(function () {a(this).prop(\"disabled\") || a(this).addClass(\"dwtd\");}), a(\"input,select\").prop(\"disabled\", !0), k(), a(window).bind(\"resize.dw\", k));y.delegate(\".dwwl\", \"DOMMouseScroll mousewheel\", function (b) {\n        if (!i.readonly) {\n          b.preventDefault();var b = b.originalEvent,b = b.wheelDelta ? b.wheelDelta / 120 : b.detail ? -b.detail / 3 : 0,c = a(\"ul\",\n          this),d = +c.data(\"pos\"),d = Math.round(d - b);u(c);l(c, d, b < 0 ? 1 : 2);\n        }\n      }).delegate(\".dwb, .dwwb\", G, function () {a(this).addClass(\"dwb-a\");}).delegate(\".dwwb\", G, function (b) {if (!i.readonly) {b.preventDefault();b.stopPropagation();var c = a(this).closest(\".dwwl\").find(\"ul\");func = a(this).hasClass(\"dwwbp\") ? w : E;u(c);clearInterval(g);g = setInterval(function () {func(c);}, i.delay);func(c);}}).delegate(\".dwwl\", G, function (b) {\n        if (!r && i.mode != \"clickpick\" && !i.readonly) {\n          b.preventDefault();r = true;s = a(\"ul\", this).addClass(\"dwa\");i.mode ==\n          \"mixed\" && a(\".dwwb\", this).fadeOut(\"fast\");v = +s.data(\"pos\");u(s);t = o(b);A = new Date();q = t;m.scroll(s, v);\n        }\n      });i.onShow.call(B, y, m);\n    };m.init = function (c) {\n      M = a.extend({ defaults: {}, init: n }, a.scroller.themes[c.theme ? c.theme : i.theme]);a.extend(i, M.defaults, c);m.settings = i;O = Math.floor(i.rows / 2);var d = a.scroller.presets[i.preset];b.unbind(\".dw\");d && (d = d.call(B, m), a.extend(i, d, c), a.extend(C, d.methods));void 0 !== b.data(\"dwro\") && (B.readOnly = h(b.data(\"dwro\")));K && m.hide();\"inline\" == i.display ? m.show() : (p(), J && i.showOnFocus && (\n      b.data(\"dwro\", B.readOnly), B.readOnly = !0, b.bind(\"focus.dw\", m.show)));\n    };m.values = null;m.val = null;m.temp = null;m.init(c);\n  }function w(b) {for (var a in b) {if (void 0 !== z[b[a]]) return !0;}return !1;}function o(b) {return E ? b.originalEvent ? b.originalEvent.changedTouches[0].pageY : b.changedTouches[0].pageY : b.pageY;}function h(b) {return !0 === b || \"true\" == b;}function l(b, c, g, u, f) {\n    var h = b.closest(\".dwwr\").find(\"ul\").index(b),c = c > d ? d : c,c = c < e ? e : c,b = a(\"li\", b).eq(c);F.temp[h] = b.data(\"val\");F.validate(u ? c == f ? 0.1 : Math.abs(0.1 * (c -\n    f)) : 0, f, h, g);\n  }var j = {},g,n = function n() {},f,e,d,F,p = new Date().getTime(),r = !1,s = null,t,q,A,v,z = document.createElement(z).style,I = w([\"perspectiveProperty\", \"WebkitPerspective\", \"MozPerspective\", \"OPerspective\", \"msPerspective\"]) && \"webkitPerspective\" in document.documentElement.style,H = function () {var b = [\"Webkit\", \"Moz\", \"O\", \"ms\"],a;for (a in b) {if (w([b[a] + \"Transform\"])) return \"-\" + b[a].toLowerCase();}return \"\";}(),E = \"ontouchstart\" in window,G = E ? \"touchstart\" : \"mousedown\",L = E ? \"touchend\" : \"mouseup\",D = { width: 70, height: 40,\n    rows: 3, delay: 300, disabled: !1, readonly: !1, showOnFocus: !0, showLabel: !0, wheels: [], theme: \"\", headerText: \"{value}\", display: \"modal\", mode: \"scroller\", preset: \"\", setText: \"Set\", cancelText: \"Cancel\", onShow: n, onClose: n, onSelect: n, onCancel: n, onChange: n, formatResult: function formatResult(b) {for (var a = \"\", d = 0; d < b.length; d++) {a += (0 < d ? \" \" : \"\") + b[d];}return a;}, parseValue: function parseValue(b, a) {\n      for (var d = a.settings.wheels, b = b.split(\" \"), e = [], f = 0, g = 0; g < d.length; g++) {for (var h in d[g]) {\n          if (void 0 !== d[g][h][b[f]]) e.push(b[f]);else for (var j in d[g][h]) {\n            e.push(j);\n            break;\n          }f++;\n        }}return e;\n    }, validate: n },\n  C = { init: function init(b) {void 0 === b && (b = {});return this.each(function () {this.id || (p += 1, this.id = \"scoller\" + p);j[this.id] = new k(this, b);});}, enable: function enable() {return this.each(function () {var b = j[this.id];b && b.enable();});}, disable: function disable() {return this.each(function () {var b = j[this.id];b && b.disable();});}, isDisabled: function isDisabled() {var b = j[this[0].id];if (b) return b.settings.disabled;}, option: function option(b, a) {\n      return this.each(function () {\n        var d = j[this.id];if (d) {\n          var e = {};\"object\" === _typeof(b) ?\n          e = b : e[b] = a;d.init(e);\n        }\n      });\n    }, setValue: function setValue(b, a, d) {return this.each(function () {var e = j[this.id];e && (e.temp = b, e.setValue(!0, a, d));});}, getInst: function getInst() {return j[this[0].id];}, getValue: function getValue() {var b = j[this[0].id];if (b) return b.values;}, show: function show() {var b = j[this[0].id];if (b) return b.show();}, hide: function hide() {return this.each(function () {var b = j[this.id];b && b.hide();});}, destroy: function destroy() {\n      return this.each(function () {\n        var b = j[this.id];b && (b.hide(), a(this).unbind(\".dw\"), delete j[this.id], a(this).is(\"input\") && (\n        this.readOnly = h(a(this).data(\"dwro\"))));\n      });\n    } };\n  a(document).bind(E ? \"touchmove\" : \"mousemove\", function (b) {r && (b.preventDefault(), q = o(b), b = v + (t - q) / f, b = b > d + 1 ? d + 1 : b, b = b < e - 1 ? e - 1 : b, F.scroll(s, b));});a(document).bind(L, function (b) {if (r) {b.preventDefault();s.removeClass(\"dwa\");var c = new Date() - A,b = v + (t - q) / f,b = b > d + 1 ? d + 1 : b,b = b < e - 1 ? e - 1 : b;300 > c ? (c = (q - t) / c, c = c * c / 0.0012, 0 > q - t && (c = -c)) : c = q - t;l(s, Math.round(v - c / f), 0, !0, Math.round(b));r = !1;s = null;}clearInterval(g);a(\".dwb-a\").removeClass(\"dwb-a\");});a.fn.scroller = function (b) {\n    if (C[b]) return C[b].apply(this,\n    Array.prototype.slice.call(arguments, 1));if (\"object\" === _typeof(b) || !b) return C.init.apply(this, arguments);a.error(\"Unknown method\");\n  };a.scroller = { setDefaults: function setDefaults(b) {a.extend(D, b);}, presets: {}, themes: {} };\n})(jQuery);(function (a) {\n  var k = new Date(),w = { dateFormat: \"mm/dd/yy\", dateOrder: \"mmddy\", timeWheels: \"hhiiA\", timeFormat: \"hh:ii A\", startYear: k.getFullYear() - 100, endYear: k.getFullYear() + 1, monthNames: \"January,February,March,April,May,June,July,August,September,October,November,December\".split(\",\"), monthNamesShort: \"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec\".split(\",\"), dayNames: \"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday\".split(\",\"), dayNamesShort: \"Sun,Mon,Tue,Wed,Thu,Fri,Sat\".split(\",\"), shortYearCutoff: \"+10\",\n    monthText: \"Month\", dayText: \"Day\", yearText: \"Year\", hourText: \"Hours\", minuteText: \"Minutes\", secText: \"Seconds\", ampmText: \"&nbsp;\", stepHour: 1, stepMinute: 1, stepSecond: 1, separator: \" \" },\n  k = function k(o) {\n    function h(b, a, c) {return void 0 !== p[a] ? +b[p[a]] : void 0 !== c ? c : H[r[a]] ? H[r[a]]() : r[a](H);}function l(b, a) {return Math.floor(b / a) * a;}function j(b) {var a = h(b, \"h\", 0);return new Date(h(b, \"y\"), h(b, \"m\"), h(b, \"d\"), h(b, \"ap\") ? a + 12 : a, h(b, \"i\", 0), h(b, \"s\", 0));}var g = a(this),n;if (g.is(\"input\")) {\n      switch (g.attr(\"type\")) {\n        case \"date\":n =\n          \"yy-mm-dd\";break;case \"datetime\":n = \"yy-mm-ddTHH:ii:ssZ\";break;case \"datetime-local\":n = \"yy-mm-ddTHH:ii:ss\";break;case \"month\":n = \"yy-mm\";w.dateOrder = \"mmyy\";break;case \"time\":n = \"HH:ii:ss\";}\n      var f = g.attr(\"min\"),g = g.attr(\"max\");f && (w.minDate = a.scroller.parseDate(n, f));g && (w.maxDate = a.scroller.parseDate(n, g));\n    }var e = a.extend({}, w, o.settings),d = 0,f = [],k = [],p = {},r = { y: \"getFullYear\", m: \"getMonth\", d: \"getDate\", h: function h(b) {b = b.getHours();b = z && 12 <= b ? b - 12 : b;return l(b, E);}, i: function i(b) {return l(b.getMinutes(), G);},\n      s: function s(b) {return l(b.getSeconds(), L);}, ap: function ap(b) {return v && 11 < b.getHours() ? 1 : 0;} },\n    s = e.preset,t = e.dateOrder,q = e.timeWheels,A = t.match(/D/),v = q.match(/a/i),z = q.match(/h/),I = \"datetime\" == s ? e.dateFormat + e.separator + e.timeFormat : \"time\" == s ? e.timeFormat : e.dateFormat,H = new Date(),E = e.stepHour,G = e.stepMinute,L = e.stepSecond,D = e.minDate,C = e.maxDate;n = n ? n : I;if (s.match(/date/i)) {\n      a.each([\"y\", \"m\", \"d\"], function (b, a) {b = t.search(RegExp(a, \"i\"));-1 < b && k.push({ o: b, v: a });});k.sort(function (b, a) {return b.o > a.o ? 1 : -1;});\n      a.each(k, function (b, a) {p[a.v] = b;});for (var g = {}, b = 0; 3 > b; b++) {if (b == p.y) {d++;g[e.yearText] = {};for (var c = D ? D.getFullYear() : e.startYear, Q = C ? C.getFullYear() : e.endYear; c <= Q; c++) {g[e.yearText][c] = t.match(/yy/i) ? c : (c + \"\").substr(2, 2);}} else if (b == p.m) {d++;g[e.monthText] = {};for (c = 0; 12 > c; c++) {g[e.monthText][c] = t.match(/MM/) ? e.monthNames[c] : t.match(/M/) ? e.monthNamesShort[c] : t.match(/mm/) && 9 > c ? \"0\" + (c + 1) : c + 1;}} else if (b == p.d) {d++;g[e.dayText] = {};for (c = 1; 32 > c; c++) {g[e.dayText][c] = t.match(/dd/i) && 10 > c ? \"0\" + c : c;}}}f.push(g);\n    }if (s.match(/time/i)) {\n      g =\n      {};if (q.match(/h/i)) {p.h = d++;g[e.hourText] = {};for (c = 0; c < (z ? 12 : 24); c += E) {g[e.hourText][c] = z && 0 == c ? 12 : q.match(/hh/i) && 10 > c ? \"0\" + c : c;}}if (q.match(/i/)) {p.i = d++;g[e.minuteText] = {};for (c = 0; 60 > c; c += G) {g[e.minuteText][c] = q.match(/ii/) && 10 > c ? \"0\" + c : c;}}if (q.match(/s/)) {p.s = d++;g[e.secText] = {};for (c = 0; 60 > c; c += L) {g[e.secText][c] = q.match(/ss/) && 10 > c ? \"0\" + c : c;}}v && (p.ap = d++, d = q.match(/A/), g[e.ampmText] = { \"0\": d ? \"AM\" : \"am\", 1: d ? \"PM\" : \"pm\" });f.push(g);\n    }return { wheels: f, headerText: function headerText() {\n        return a.scroller.formatDate(I, j(o.temp),\n        e);\n      }, formatResult: function formatResult(b) {return a.scroller.formatDate(n, j(b), e);}, parseValue: function parseValue(b) {var c = new Date(),d = [];try {c = a.scroller.parseDate(n, b, e);} catch (g) {}for (var f in p) {d[p[f]] = c[r[f]] ? c[r[f]]() : r[f](c);}return d;}, validate: function validate(b, c) {\n        var d = o.temp,f = { m: 0, d: 1, h: 0, i: 0, s: 0, ap: 0 },g = { m: 11, d: 31, h: l(z ? 11 : 23, E), i: l(59, G), s: l(59, L), ap: 1 },j = !0,n = !0;a.each(D || C ? \"y,m,d,ap,h,i,s\".split(\",\") : c == p.y || c == p.m || void 0 === c ? [\"d\"] : [], function (c, l) {\n          if (void 0 !== p[l]) {\n            var o = f[l],i = g[l],z = 31,k = h(d, l),s = a(\"ul\", b).eq(p[l]),\n            q,x;\"d\" == l && (q = h(d, \"y\"), x = h(d, \"m\"), i = z = 32 - new Date(q, x, 32).getDate(), A && a(\"li\", s).each(function () {var b = a(this),c = b.data(\"val\"),d = new Date(q, x, c).getDay();b.html(t.replace(/[my]/gi, \"\").replace(/dd/, 10 > c ? \"0\" + c : c).replace(/d/, c).replace(/DD/, e.dayNames[d]).replace(/D/, e.dayNamesShort[d]));}));j && D && (o = D[r[l]] ? D[r[l]]() : r[l](D));n && C && (i = C[r[l]] ? C[r[l]]() : r[l](C));if (\"y\" != l) {\n              var F = a('li[data-val=\"' + o + '\"]', s).index(),w = a('li[data-val=\"' + i + '\"]', s).index();a(\"li\", s).removeClass(\"dw-v\").slice(F, w + 1).addClass(\"dw-v\");\n              \"d\" == l && a(\"li\", s).removeClass(\"dw-h\").slice(z).addClass(\"dw-h\");k < o && (k = o);k > i && (k = i);\n            }j && (j = k == o);n && (n = k == i);if (e.invalid && \"d\" == l) {\n              var v = [];e.invalid.dates && a.each(e.invalid.dates, function (b, a) {a.getFullYear() == q && a.getMonth() == x && v.push(a.getDate() - 1);});if (e.invalid.daysOfWeek) {var I = new Date(q, x, 1).getDay();a.each(e.invalid.daysOfWeek, function (b, a) {for (var c = a - I; c < z; c = c + 7) {c >= 0 && v.push(c);}});}e.invalid.daysOfMonth && a.each(e.invalid.daysOfMonth, function (b, a) {\n                a = (a + \"\").split(\"/\");a[1] ? a[0] - 1 == x && v.push(a[1] -\n                1) : v.push(a[0] - 1);\n              });a.each(v, function (b, c) {a(\"li\", s).eq(c).removeClass(\"dw-v\");});\n            }\n          }\n        });\n      }, methods: { getDate: function getDate(b) {var c = a(this).scroller(\"getInst\");if (c) return j(b ? c.temp : c.values);}, setDate: function setDate(b, c, d) {void 0 == c && (c = !1);return this.each(function () {var e = a(this).scroller(\"getInst\");if (e) {for (var f in p) {e.temp[p[f]] = b[r[f]] ? b[r[f]]() : r[f](b);}e.setValue(!0, c, d);}});} } };\n\n  };a.scroller.presets.date = k;a.scroller.presets.datetime = k;a.scroller.presets.time = k;a.scroller.formatDate = function (o, h, l) {\n    if (!h) return null;\n    for (var l = a.extend({}, w, l), j = function j(a) {for (var e = 0; d + 1 < o.length && o.charAt(d + 1) == a;) {e++, d++;}return e;}, g = function g(a, d, e) {d = \"\" + d;if (j(a)) for (; d.length < e;) {d = \"0\" + d;}return d;}, n = function n(a, d, e, f) {return j(a) ? f[d] : e[d];}, f = \"\", e = !1, d = 0; d < o.length; d++) {if (e) \"'\" == o.charAt(d) && !j(\"'\") ? e = !1 : f += o.charAt(d);else switch (o.charAt(d)) {\n        case \"d\":f += g(\"d\", h.getDate(), 2);break;case \"D\":f += n(\"D\", h.getDay(), l.dayNamesShort, l.dayNames);break;case \"o\":f += g(\"o\", (h.getTime() - new Date(h.getFullYear(), 0, 0).getTime()) / 864E5,\n          3);break;case \"m\":f += g(\"m\", h.getMonth() + 1, 2);break;case \"M\":f += n(\"M\", h.getMonth(), l.monthNamesShort, l.monthNames);break;case \"y\":f += j(\"y\") ? h.getFullYear() : (10 > h.getYear() % 100 ? \"0\" : \"\") + h.getYear() % 100;break;case \"h\":var k = h.getHours(),f = f + g(\"h\", 12 < k ? k - 12 : 0 == k ? 12 : k, 2);break;case \"H\":f += g(\"H\", h.getHours(), 2);break;case \"i\":f += g(\"i\", h.getMinutes(), 2);break;case \"s\":f += g(\"s\", h.getSeconds(), 2);break;case \"a\":f += 11 < h.getHours() ? \"pm\" : \"am\";break;case \"A\":f += 11 < h.getHours() ? \"PM\" : \"AM\";break;case \"'\":j(\"'\") ? f +=\n          \"'\" : e = !0;break;default:f += o.charAt(d);}}\n    return f;\n  };a.scroller.parseDate = function (k, h, l) {\n    var j = new Date();if (!k || !h) return j;for (var h = \"object\" == _typeof(h) ? h.toString() : h + \"\", g = a.extend({}, w, l), l = j.getFullYear(), n = j.getMonth() + 1, f = j.getDate(), e = -1, d = j.getHours(), j = j.getMinutes(), F = 0, p = -1, r = !1, s = function s(a) {(a = v + 1 < k.length && k.charAt(v + 1) == a) && v++;return a;}, t = function t(a) {\n      s(a);a = h.substr(A).match(RegExp(\"^\\\\d{1,\" + (\"@\" == a ? 14 : \"!\" == a ? 20 : \"y\" == a ? 4 : \"o\" == a ? 3 : 2) + \"}\"));if (!a) return 0;A += a[0].length;return parseInt(a[0],\n      10);\n    }, q = function q(a, d, e) {a = s(a) ? e : d;for (d = 0; d < a.length; d++) {if (h.substr(A, a[d].length).toLowerCase() == a[d].toLowerCase()) return A += a[d].length, d + 1;}return 0;}, A = 0, v = 0; v < k.length; v++) {if (r) \"'\" == k.charAt(v) && !s(\"'\") ? r = !1 : A++;else switch (k.charAt(v)) {\n        case \"d\":f = t(\"d\");break;case \"D\":q(\"D\", g.dayNamesShort, g.dayNames);break;case \"o\":e = t(\"o\");break;case \"m\":n = t(\"m\");break;case \"M\":n = q(\"M\", g.monthNamesShort, g.monthNames);break;case \"y\":l = t(\"y\");break;case \"H\":d = t(\"H\");break;case \"h\":d = t(\"h\");break;case \"i\":j =\n          t(\"i\");break;case \"s\":F = t(\"s\");break;case \"a\":p = q(\"a\", [\"am\", \"pm\"], [\"am\", \"pm\"]) - 1;break;case \"A\":p = q(\"A\", [\"am\", \"pm\"], [\"am\", \"pm\"]) - 1;break;case \"'\":s(\"'\") ? A++ : r = !0;break;default:A++;}}\n    100 > l && (l += new Date().getFullYear() - new Date().getFullYear() % 100 + (l <= g.shortYearCutoff ? 0 : -100));if (-1 < e) {n = 1;f = e;do {g = 32 - new Date(l, n - 1, 32).getDate();if (f <= g) break;n++;f -= g;} while (1);}d = new Date(l, n - 1, f, -1 == p ? d : p && 12 > d ? d + 12 : !p && 12 == d ? 0 : d, j, F);if (d.getFullYear() != l || d.getMonth() + 1 != n || d.getDate() != f) throw \"Invalid date\";return d;\n  };\n})(jQuery);(function (a) {\n  var k = { inputClass: \"\" };a.scroller.presets.select = function (w) {\n    var o = a.extend({}, k, w.settings),h = a(this),l = this.id + \"_dummy\";a('label[for=\"' + this.id + '\"]').attr(\"for\", l);var j = a('label[for=\"' + l + '\"]'),j = j.length ? j.text() : h.attr(\"name\"),g = [],n = [{}];n[0][j] = {};var f = n[0][j];a(\"option\", h).each(function () {var d = a(this).attr(\"value\");f[d] = a(this).text();a(this).prop(\"disabled\") && g.push(d);});a(\"#\" + l).remove();var e = a('<input type=\"text\" id=\"' + l + '\" value=\"' + f[h.val()] + '\" class=\"' + o.inputClass + '\" readonly />').insertBefore(h);\n    o.showOnFocus && e.focus(function () {w.show();});h.hide().closest(\".ui-field-contain\").trigger(\"create\");return { width: 200, wheels: n, headerText: !1, formatResult: function formatResult(a) {return f[a[0]];}, parseValue: function parseValue() {return [h.val()];}, validate: function validate(d) {a.each(g, function (e, f) {a('li[data-val=\"' + f + '\"]', d).removeClass(\"dw-v\");});}, onSelect: function onSelect(a, f) {e.val(a);h.val(f.values[0]).trigger(\"change\");}, onChange: function onChange(a, f) {\"inline\" == o.display && (e.val(a), h.val(f.temp[0]).trigger(\"change\"));}, onClose: function onClose() {e.blur();} };\n  };\n})(jQuery);(function (a) {a.scroller.themes.android = { defaults: { dateOrder: \"Mddyy\", mode: \"clickpick\", height: 50 } };})(jQuery);(function (a) {var k = { defaults: { dateOrder: \"Mddyy\", mode: \"mixed\", rows: 5, width: 70, showLabel: !1 } };a.scroller.themes[\"android-ics\"] = k;a.scroller.themes[\"android-ics light\"] = k;})(jQuery);(function (a) {a.scroller.themes.ios = { defaults: { dateOrder: \"MMdyy\", rows: 5, height: 30, width: 55, headerText: !1, showLabel: !1 } };})(jQuery);(function (a) {\n  a.scroller.themes.jqm = { defaults: { jqmBody: \"c\", jqmHeader: \"b\", jqmWheel: \"d\", jqmClickPick: \"c\", jqmSet: \"b\", jqmCancel: \"c\" }, init: function init(k, w) {\n      var o = w.settings;a(\".dw\", k).removeClass(\"dwbg\").addClass(\"ui-overlay-shadow ui-corner-all ui-body-a\");a(\".dwb-s a\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmSet);a(\".dwb-c a\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmCancel);a(\".dwwb\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmClickPick);a(\".dwv\", k).addClass(\"ui-header ui-bar-\" +\n      o.jqmHeader);a(\".dwwr\", k).addClass(\"ui-body-\" + o.jqmBody);a(\".dwpm .dww\", k).addClass(\"ui-body-\" + o.jqmWheel);\"inline\" != o.display && a(\".dw\", k).addClass(\"pop in\");k.trigger(\"create\");a(\".dwo\", k).click(function () {w.hide();});\n    } };\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /* \r\n                                                                                                                                                                                                                                                                                                                                                                                * Simple Grid Control for Bizagi Mobile\r\n                                                                                                                                                                                                                                                                                                                                                                                * @author: Richar Urbano <Richar.Urbano@Bizagi.com>\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n(function ($) {\n  $.fn.mobileGrid = function (options) {\n\n    var defaultOptions = {\n      id: \"no-id\",\n      columns: [],\n      sortBy: \"\",\n      sortType: \"asc\",\n      showSummary: false,\n      collapse: false,\n      collapseState: false,\n      data: {},\n      indexedData: {},\n      maxColumns: 0,\n      buttonsPst: false,\n      title: \"\",\n      tableCssClass: \"\",\n      headerStyles: \"\",\n      columnKeyStyle: \"bz-rn-grid-column-key\",\n      columnHiddenStyle: \"bz-rn-grid-column-hidden\",\n      template: {\n        grid: \"\",\n        waiting: \"\",\n        table: \"\",\n        emptyTable: \"\",\n        column: \"\",\n        specialColumn: \"\",\n        row: \"\",\n        rowButtons: \"\",\n        cell: \"\",\n        specialCell: \"\",\n        pager: \"\",\n        buttons: \"\",\n        dynamicPager: \"\",\n        summary: \"\",\n        summaryCell: \"\" },\n\n      actions: {\n        add: true,\n        edit: true,\n        remove: true,\n        details: true },\n\n      mode: \"execution\" };\n\n\n    var self = this;\n    self.element = this;\n    self.options = $.extend(defaultOptions, options || {});\n\n    // Init plugin\n    init();\n\n    return {\n      setData: setData,\n      getData: getData,\n      getNewRowKeys: getNewRowKeys,\n      changeCellValue: changeCellValue,\n      refreshSummary: refreshSummary,\n      getContainer: getContainer,\n      processAction: processAction };\n\n\n    /**\r\n                                       * Constructor\r\n                                       * @returns {} \r\n                                       */\n    function init() {\n      var options = self.options;\n      var element = self.element;\n\n      // Set object variables\n      self.page = 1;\n      self.changes = {};\n      self.totalRows = 0;\n      self.totalPages = 0;\n      self.data = options.data;\n      self.selectedRow = 0;\n      self.components = {};\n      self.buttons = {};\n      self.asyncCells = {};\n\n      // Build column indexes\n      self.columnByIndex = {};\n      self.columnByName = {};\n      self.columnKeyIndex = 0;\n\n      $.each(options.columns, function (i, column) {\n        // Fix non-present properties\n        column.key = typeof column.key !== \"undefined\" ? column.key : false;\n        column.label = typeof column.label !== \"undefined\" ? column.label : column.name;\n        column.sortType = \"asc\";\n\n        // Index the column\n        self.columnByIndex[column.index] = column;\n        self.columnByName[column.name] = column;\n        if (column.key) {\n          self.columnKeyIndex = column.index;\n        }\n      });\n\n      // Set sort options\n      options.sortBy = options.sortBy || self.columnByIndex[0].name;\n      if (self.columnByName[options.sortBy]) {\n        self.columnByName[options.sortBy].sortType = options.sortType;\n      } else {\n        if (self.columnByName[options.sortBy.split(\".\")[0]]) {\n          self.columnByName[options.sortBy.split(\".\")[0]].sortType = options.sortType;\n        }\n      }\n\n      // Add base classes\n      //element.addClass(\"ui-bizagi-grid-wrapper\");\n      element.attr(\"data-bizagi-id\", options.id);\n\n      // Calculate\n      calculateKeyIndex();\n\n      //collapse state\n      self.collapseState = options.collapseState;\n\n      // Start waiting signal \n      //self.startLoading(false);\n    }\n\n    /**\r\n       * Method to start loading for ajax data and update the ui\r\n       * @returns {} \r\n       */\n    function startLoading(bUseTimeout) {\n      bUseTimeout = typeof bUseTimeout !== \"undefined\" ? bUseTimeout : true;\n\n      if (self.options.mode != \"execution\" || typeof self.options.sortBy === \"undefined\") {\n        return;\n      }\n\n      // Draw the waiting template when the endLoading delays more than 250ms\n      var waitingFn = function waitingFn() {\n        var element = self.element;\n        var options = self.options;\n\n        // Set null to timeout\n        self.waitingTimeout = null;\n\n        element.empty();\n        element.append($.kendoTmpl(options.template.waiting));\n      };\n\n      if (bUseTimeout) {\n        self.waitingTimeout = setTimeout(waitingFn, 250);\n      } else {\n        waitingFn();\n      }\n    }\n\n    /**\r\n       * Method to remove the loading message\r\n       * @returns {} \r\n       */\n    function endLoading() {\n      var element = self.element;\n\n      // Remove waiting timeout\n      if (self.waitingTimeout) {\n        clearTimeout(self.waitingTimeout);\n        self.waitingTimeout = null;\n      }\n\n      // Remove everything\n      element.empty();\n    }\n\n    /**\r\n       * This method updates the data and refreshes the grid\r\n       * @param {} data \r\n       * @returns {} \r\n       */\n    function setData(data) {\n      // Set internal data\n      self.data = data;\n      calculateKeyIndex();\n\n      // Call refresh\n      refresh();\n    }\n\n    /**\r\n       * This method retrieves the actual data from the grid\r\n       * @returns {} \r\n       */\n    function getData() {\n      // Return internal data\n      return self.data;\n    }\n\n    /**\r\n       * Calculate key index\r\n       * @returns {} \r\n       */\n    function calculateKeyIndex() {\n      var options = self.options;\n      var columns = options.columns;\n      var data = self.data;\n      var indexedData = {};\n\n      if (data.rows) {\n        $.each(data.rows, function (i, row) {\n          var key;\n          var row;\n          $.each(columns, function (j, column) {\n            if (column.key) key = row[j];\n          });\n\n          indexedData[key] = row;\n        });\n      }\n      self.indexedData = indexedData;\n    }\n\n    /**\r\n       * This method refreshes the grid\r\n       * @returns {} \r\n       */\n    function refresh() {\n      // Cleans components\n      _cleanComponents();\n      //_cleanButtons();\n\n      // Call the draw method\n      self.components = {};\n      draw();\n    }\n\n    /**\r\n       * This method refreshes only the summary\r\n       * @param {} columnIndex \r\n       * @returns {} \r\n       */\n    function refreshSummary(columnIndex) {\n      //var self = this;\n      var options = self.options;\n      var summary = _getComponent(\"summary\");\n\n      // Do nothing if the component is drawing or there is no summary\n      if (self.drawing) return;\n      if (!summary) return;\n\n      // Resolve summary\n      if (options.showSummary) {\n\n        if (columnIndex) {\n          // Refresh an specific summary\n          refreshSummaryCell(columnIndex);\n\n        } else {\n          // Clean and re-draw summary\n          summary.empty();\n          summary.append(drawSummary());\n\n          // Execute post-render\n          postRenderSummary(summary);\n        }\n      }\n    }\n\n    /**\r\n       * This method changes a cell value in the grid\r\n       * @param {} key \r\n       * @param {} columnIndex \r\n       * @param {} value \r\n       * @returns {} \r\n       */\n    function changeCellValue(key, columnIndex, value) {\n      if (self.indexedData[key]) {\n        self.indexedData[key][columnIndex] = value;\n      }\n    }\n\n    /**\r\n       * This method draws the full grid associated with the data\r\n       * @returns {} \r\n       */\n    function draw() {\n      var options = self.options;\n      var element = self.element;\n\n      // Start global drawing flag\n      self.drawing = true;\n\n      // Ends waiting signal\n      endLoading();\n\n      // Resolve grid template\n      var html = $.kendoTmpl(options.template.grid, {\n        label: options.title,\n        buttonsPst: options.buttonsPst,\n        collapse: options.collapse,\n        collapseState: self.collapseState,\n        isDesign: options.mode === \"design\" });\n\n\n      // Call sub-drawers\n      html = drawTable(html);\n      self.grid = $(html).appendTo(element);\n\n      // Post render the grid\n      postRender(self.grid);\n\n      // Attach paginator desktop\n      attachPaginator();\n\n      // Attach handlers\n      attachHandlers();\n\n      // Toggle visibility depending from row count\n      if (self.data.rows.length === 0) {\n        _getComponent(\"table\").hide();\n        _getComponent(\"pager\").hide();\n\n        _getComponent(\"emptyTable\").show();\n\n      } else {\n        _getComponent(\"table\").show();\n        _getComponent(\"pager\").show();\n\n        //_getComponent(\"dynamicPager\").hide();\n        _getComponent(\"emptyTable\").hide();\n      }\n\n      // End global drawing flag\n      self.drawing = false;\n    }\n\n    /**\r\n       * This method draws the table associated with the data\r\n       * @param {} html \r\n       * @returns {} \r\n       */\n    function drawTable(html) {\n      var options = self.options;\n\n      // Resolve table template\n      var table = $.kendoTmpl(options.template.table, {\n        showSummary: options.showSummary,\n        tableCssClass: options.tableCssClass });\n\n\n      var emptyTable = $.kendoTmpl(options.template.emptyTable);\n\n      // Resolve header\n      table = _replaceElement(table, \"columns\", drawHeader());\n\n      // Resolve body\n      table = _replaceElement(table, \"rows\", drawBody());\n\n      // Resolve pager\n      html = _replaceElement(html, \"pager\", drawPager());\n\n      // Perform grid replaces\n      html = _replaceElement(html, \"table\", table);\n      html = _replaceElement(html, \"emptyTable\", emptyTable);\n\n      return html;\n    }\n\n    /*\r\n      *   Execute post-renders in all the grid\r\n      */\n    function postRender() {\n      //var options = self.options;\n\n      // Get grid rows\n      var rows = _getComponent(\"cells\");\n      if (rows) {\n        $.each(rows, function (i, row) {\n          row = $(row);\n          postRenderRow(row);\n        });\n      }\n    }\n\n    /**\r\n      * Find if a column has a exact match for sort it\r\n      * @returns {} \r\n      */\n    function isExactMatch() {\n      var options = self.options;\n      var columns = options.columns;\n      var sortBy = options.sortBy;\n\n      var i = 0;\n      var length = columns.length;\n\n      for (; i < length;) {\n        if (sortBy === columns[i++].name) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    /**\r\n       * Execute post-renders in each cell after the element has been created\r\n       * @param {} row \r\n       * @returns {} \r\n       */\n    function postRenderRow(row) {\n      //var self = this;\n      var key = row.attr(\"data-business-key\");\n      var isNewRow = row.attr(\"data-new-row\");\n      var cells = row.is(\"[data-bizagi-component=cells]\") ? row.children() : row.find(\"[data-bizagi-component=cells]\").children();\n\n      $.each(cells, function (i, cell) {\n        var column = self.columnByIndex[i];\n        if (column.key) return; // Omit key column\n\n        // Check if the cell has an async result\n        var asyncResult = self.asyncCells[key + \"-\" + column.index];\n        if (asyncResult) {\n          $.when(asyncResult).\n          done(function (html) {\n            // Append async result\n            cell = $(cell);\n            cell.append(html);\n            onCellReady(column, key, cell, isNewRow);\n          });\n        } else {\n          onCellReady(column, key, $(cell), isNewRow);\n        }\n      });\n    }\n\n    /**\r\n       * This method draws the table body\r\n       * @returns {} \r\n       */\n    function drawBody() {\n      // Resolve rows\n      var rows = \"\";\n\n      $.each(self.data.rows, function (i, row) {\n        rows += drawRow(row);\n      });\n\n      return rows;\n    }\n\n    /**\r\n       * This method draws a grid row\r\n       * @param {} rowData \r\n       * @param {} isNewRow \r\n       * @returns {} \r\n       */\n    function drawRow(rowData, isNewRow) {\n      var options = self.options;\n      var key = rowData[self.columnKeyIndex];\n      var newRow = isNewRow || false;\n      var rnd = Math.floor(Math.random() * 10000);\n\n      var row = $.kendoTmpl(options.template.row, {\n        key: rnd,\n        isNewRow: isNewRow,\n        businessKey: key });\n\n\n      // Resolve cells\n      var cells = \"\";\n      var bSpecialCellAdded = false;\n      $.each(rowData, function (i, cell) {\n        if (bSpecialCellAdded) {\n          return;\n        }\n\n        if (options.maxColumns > 0) {\n          if (i < options.maxColumns + 1) {\n            // Draw normal cell\n            cells += drawCell(i, key, cell, newRow);\n          } else {\n            // Draw special cell\n            cells += drawSpecialCell(i, key, cell);\n            bSpecialCellAdded = true;\n          }\n        } else {\n          // Draw normal cell\n          cells += drawCell(i, key, cell, newRow);\n        }\n      });\n\n      // Resolve cells template\n      row = _replaceElement(row, \"cells\", cells);\n      return row;\n    }\n\n    /**\r\n       * This method draws the grid header\r\n       * @returns {} \r\n       */\n    function drawHeader() {\n      var options = self.options;\n\n      // Resolve columns\n      var columns = \"\";\n      var bSpecialColumnAdded = false;\n\n      self.exactMatch = isExactMatch();\n\n      $.each(options.columns, function (i, column) {\n        if (bSpecialColumnAdded) {\n          return;\n        }\n\n        if (options.maxColumns > 0) {\n          if (i <= self.options.maxColumns) {\n            // Draw normal column\n            columns += drawColumn(column);\n          } else {\n            // Draw special column\n            columns += drawSpecialColumn(column);\n            bSpecialColumnAdded = true;\n          }\n        } else {\n          // Draw normal column\n          columns += drawColumn(column);\n        }\n      });\n\n      return columns;\n    }\n\n    /**\r\n       * This method draws a column header\r\n       * @param {} column \r\n       * @returns {} \r\n       */\n    function drawColumn(column) {\n      var options = self.options;\n      var cssClass;\n\n      if (column.key) {\n        cssClass = options.columnKeyStyle;\n      } else {\n        if (column.hidden) {\n          cssClass = options.columnHiddenStyle;\n        } else {\n          cssClass = typeof column.bizAgiProperties != \"undefined\" && column.bizAgiProperties.cssclass ? column.bizAgiProperties.cssclass : \"\";\n        }\n      }\n\n      // Resolve column template\n      var sortActive = column.name === options.sortBy ? column.name === options.sortBy : column.name === options.sortBy.split(\".\")[0] && !self.exactMatch ? column.name === options.sortBy.split(\".\")[0] : false;\n\n      return $.kendoTmpl(options.template.column, $.extend({}, column, {\n        sortActive: sortActive,\n        sortType: options.sortOrder,\n        headerLabelStyles: options.headerStyles ? options.headerStyles.label : \"\",\n        headerStyles: options.headerStyles ? options.headerStyles.header : \"\",\n        columnCssClass: cssClass }));\n\n    }\n\n    /**\r\n       * This method draws the grid cell\r\n       * @param {} columnIndex \r\n       * @param {} key \r\n       * @param {} value \r\n       * @param {} isNewRow \r\n       * @returns {} \r\n       */\n    function drawCell(columnIndex, key, value, isNewRow) {\n      var options = self.options;\n      var messageValidation = \"\";\n\n      isNewRow = isNewRow || false;\n\n      // Ensure that data is mapped into a column\n      if (!self.columnByIndex[columnIndex]) {\n        return \"\";\n      }\n\n      // Get message\n      if (columnIndex > 0) {\n        messageValidation = self.columnByIndex[columnIndex].bizAgiProperties && self.columnByIndex[columnIndex].bizAgiProperties.messageValidation;\n      }\n\n      var isKey = self.columnByIndex[columnIndex].key;\n      var hidden = options.columns[columnIndex].hidden || false;\n      var cssClass;\n\n      if (isKey) {\n        cssClass = options.columnKeyStyle;\n      } else {\n        if (hidden) {\n          cssClass = options.columnHiddenStyle;\n        } else {\n          cssClass = typeof self.columnByIndex[columnIndex].bizAgiProperties != \"undefined\" && self.columnByIndex[columnIndex].bizAgiProperties.cssclass ? self.columnByIndex[columnIndex].bizAgiProperties.cssclass : \"\";\n        }\n      }\n\n      // Resolve cell template\n      var cell = $.kendoTmpl(options.template.cell, {\n        isKey: isKey,\n        hidden: hidden,\n        isDesign: options.mode === \"design\",\n        messageValidation: messageValidation,\n        columnCssClass: cssClass });\n\n\n      var result = onDrawCell(self.columnByIndex[columnIndex], key, value, isNewRow);\n      if (!result) {\n        result = \"\";\n      }\n\n      var async = _typeof(result) === \"object\" && result.done;\n      if (async) {\n        if (result.state() === \"resolved\") {\n          // Fetch resolved result\n          cell = _replaceElement(cell, \"cellContent\", resolveResult(result));\n        } else {\n          // Wait for result\n          cell = _replaceElement(cell, \"cellContent\", \"\");\n          self.asyncCells[key + \"-\" + columnIndex] = result;\n        }\n\n      } else {\n        // Resolve cell content\n        cell = _replaceElement(cell, \"cellContent\", result);\n      }\n\n      self.columnByIndex[columnIndex][\"cell\"] = $(cell);\n\n      return cell;\n    }\n\n    /**\r\n       * This method draws a grid pager\r\n       * @returns {} \r\n       */\n    function drawPager() {\n      var options = self.options;\n      var pagerData = {};\n\n      pagerData.hasPagination = self.data.total > 1 ? true : false;\n      pagerData.page = Number(self.data.page);\n\n      // Calculate pages\n      pagerData.pages = [];\n      for (var i = 1; i <= self.data.total; i++) {\n        pagerData.pages.push({\n          number: i,\n          active: i === pagerData.page });\n\n      }\n\n      // Set style pagination            \n      pagerData.previousPage = self.data.page > 1 ? self.data.page - 1 : 1;\n      pagerData.nextPage = self.data.page < self.data.total ? self.data.page + 1 : self.data.total;\n      pagerData.totalPages = self.data.total;\n\n      return $.kendoTmpl(options.template.pager, pagerData);\n    }\n\n    /**\r\n       * Returns the resolved result from a promise when the promise has been executed already\r\n       * @param {} promise \r\n       * @returns {} \r\n       */\n    function resolveResult(promise) {\n      var result;\n\n      promise.done(function (data) {\n        result = data;\n      });\n\n      return result;\n    }\n\n    /**\r\n       * Method to attach any handler to the pager grid\r\n       * @returns {} \r\n       */\n    function attachPaginator() {\n      if (self.data.total > 1) {\n\n        var pagerContainer = _getComponent(\"pager\").find(\"ul\");\n        var pagerOptions = {\n          totalPages: self.data.total,\n          actualPage: Number(self.data.page),\n          listElement: pagerContainer,\n          clickCallBack: function clickCallBack(options) {\n            changePage(options.page);\n          } };\n\n\n        // Create pagination control \n        pagerContainer.mobilePagination(pagerOptions);\n      }\n    }\n\n    /**\r\n       * Method to attach any handler to the grid\r\n       * @returns {} \r\n       */\n    function attachHandlers() {\n\n      // Add selection events\n      _getComponent(\"rows\").find(\"tr\").on(\"click\", function () {\n        var key = $(this).attr(\"data-key\");\n        var businessKey = $(this).attr(\"data-business-key\");\n\n        selectRow(key, businessKey);\n      });\n\n      // Add sort events\n      _getComponent(\"columns\").find(\".bz-rn-grid-column\").on(\"click\", function () {\n        var columnIndex = $(this).attr(\"data-column-index\");\n\n        sortBy(columnIndex);\n      });\n\n      // ActionSheet to process actions\n      _getComponent(\"rows\").find(\"tr\").actionSheet({\n        actions: _showActions(),\n        titleLabel: \"Selected Row\",\n        setDataToShow: function setDataToShow(evt) {\n          var that = this;\n          var key = $(evt.target).closest(\"tr\").attr(\"data-key\");\n          var businessKey = $(evt.target).closest(\"tr\").attr(\"data-business-key\");\n\n          that.params = { key: key, businessKey: businessKey };\n        },\n        actionClicked: function actionClicked(action) {\n          var that = this;\n\n          processAction(action.guid, that.params);\n          unselectRow();\n        },\n        cancelClicked: function cancelClicked(event) {\n          unselectRow();\n        } });\n\n    }\n\n    /**\r\n       *  Method to get the valid options to the grid\r\n       * @returns {} \r\n       */\n    function _showActions() {\n      var actions = [];\n      var options = self.options;\n      var tooltips = options.tooltips || {};\n      var parameters = $.extend(options.actions, tooltips);\n\n      if (parameters.edit) {\n        actions.push({ guid: \"edit\", displayName: parameters.editLabel });\n      }\n\n      if (parameters.remove) {\n        actions.push({ guid: \"remove\", displayName: parameters.deleteLabel });\n      }\n\n      if (parameters.details) {\n        actions.push({ guid: \"details\", displayName: parameters.detailLabel });\n      }\n\n      return actions;\n    }\n\n    /**\r\n       * Process an action in order to do something with the grid\r\n       * @param {} action \r\n       * @param {} params \r\n       * @returns {} \r\n       */\n    function processAction(action, params) {\n\n      if (action === \"edit\") {\n        onEditRow(params);\n      }\n\n      if (action === \"remove\") {\n        onDeleteRow();\n      }\n\n      if (action === \"details\") {\n        onShowDetails(params);\n      }\n    }\n\n    /**\r\n       * Changes the current page in the grid\r\n       * @param {} page \r\n       * @returns {} \r\n       */\n    function changePage(page) {\n      var currentPage = Number(self.data.page);\n      var total = self.data.total;\n      var newPage = page;\n\n      if (newPage === currentPage || newPage < 1 || newPage > total)\n      return;\n\n      //refresh components cells and rows\n      _cleanComponents();\n\n      // Update internal options\n      self.page = Number(newPage);\n\n      // Execute handler\n      onPageRequested();\n    }\n\n    /**\r\n       * Sort the grid by a column\r\n       * @param {} columnIndex \r\n       * @param {} sortType \r\n       * @returns {} \r\n       */\n    function sortBy(columnIndex, sortType) {\n      var options = self.options;\n      var column = self.columnByIndex[columnIndex];\n\n      if (typeof options.sortBy === \"undefined\") {\n        return;\n      }\n\n      // Set new sort type reversed to current, if the sort column has not changed\n      if (typeof column.name === \"undefined\") {\n        column.name = column.label;\n      }\n\n      if (column.name === options.sortBy) {\n        sortType = sortType || (options.sortOrder === \"asc\" ? \"desc\" : \"asc\");\n      } else {\n        if (column.name === options.sortBy.split(\".\")[0]) {\n          sortType = sortType || (options.sortType === \"asc\" ? \"desc\" : \"asc\");\n        } else {\n          sortType = sortType || options.sortType;\n        }\n      }\n\n      // Update internal options\n      if (options.sortBy.split(\".\").length > 1) {\n        if (options.sortBy.split(\".\")[0] !== column.name) {\n          options.sortBy = column.name;\n        } else {\n          options.sortBy = column.name;\n        }\n      } else {\n        options.sortBy = column.name;\n      }\n\n      options.sortColumn = column;\n      options.sortType = sortType;\n      options.sortOrder = sortType;\n\n      //refresh components cells and rows\n      _cleanComponents();\n\n      // Execute handler\n      onSortRequested();\n    }\n\n    /**\r\n       *  Selects a row in the grid\r\n       * @param {} key \r\n       * @param {} businessKey \r\n       * @returns {} \r\n       */\n    function selectRow(key, businessKey) {\n\n      if (self.selectedRow === key) {\n        // Invoke un-select handler\n        onRowUnselected();\n\n        // Update internal options\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      } else {\n        if (self.selectedRow !== 0) {\n          // Invoke un-select handler\n          onRowUnselected();\n        }\n\n        // Update internal options\n        self.selectedRow = key;\n        self.selectedBusinessKey = businessKey;\n\n        // Invoke select handler\n        onRowSelected();\n      }\n    }\n\n    /**\r\n       * Unselects a row in the grid\r\n       * @returns {} \r\n       */\n    function unselectRow() {\n      if (self.selectedRow !== 0) {\n        // Invoke un-select handler\n        onRowUnselected();\n\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      }\n    }\n\n    /**\r\n       * Executes the on draw cell handler\r\n       * @param {} column \r\n       * @param {} key \r\n       * @param {} value \r\n       * @param {} isNewRow \r\n       * @returns {} \r\n       */\n    function onDrawCell(column, key, value, isNewRow) {\n      return _triggerHandler(\"drawCell\", { column: column, key: key, value: value, isNewRow: isNewRow });\n    }\n\n    /**\r\n       * Executes on cell ready handler\r\n       * @param {} column \r\n       * @param {} key \r\n       * @param {} cell \r\n       * @param {} isNewRow \r\n       * @returns {} \r\n       */\n    function onCellReady(column, key, cell, isNewRow) {\n      return _triggerHandler(\"cellReady\", { column: column, key: key, cell: cell, isNewRow: isNewRow });\n    }\n\n    /**\r\n       * Executes the row selected handle\r\n       * @returns {} \r\n       */\n    function onRowSelected() {\n      return _triggerHandler(\"rowSelected\", { key: self.selectedRow });\n    }\n\n    /**\r\n       * Executes the row un-selected handler\r\n       * @returns {} \r\n       */\n    function onRowUnselected() {\n      return _triggerHandler(\"rowUnselected\", { key: self.selectedRow });\n    }\n\n    /**\r\n       * Executes the on delete row handler\r\n       * @returns {} \r\n       */\n    function onDeleteRow() {\n      return _triggerHandler(\"deleteRow\", { key: self.selectedBusinessKey });\n    }\n\n    /**\r\n       * Executes the on show details handler\r\n       * @returns {} \r\n       */\n    function onShowDetails() {\n      return _triggerHandler(\"showFormDetails\", { key: self.selectedBusinessKey });\n    }\n\n    /**\r\n       * Executes the on edit row handler\r\n       * @returns {} \r\n       */\n    function onEditRow() {\n      return _triggerHandler(\"editRow\", { key: self.selectedBusinessKey });\n    }\n\n    /**\r\n       * Executes the page requested handler\r\n       * @returns {} \r\n       */\n    function onPageRequested() {\n      // Start loading signal \n      //startLoading();\n\n      // Trigger handler\n      return _triggerHandler(\"pageRequested\", _buildRefreshParameters());\n    }\n\n    /**\r\n       * Executes the sort requested handler\r\n       * @returns {} \r\n       */\n    function onSortRequested() {\n      // Start loading signal \n      //startLoading();\n\n\n      // Trigger handler\n      return _triggerHandler(\"sortRequested\", _buildRefreshParameters());\n    }\n\n    /**\r\n       * Calls directly to handler callback\r\n       * @param {} type \r\n       * @param {} data \r\n       * @returns {} \r\n       */\n    function _triggerHandler(type, data) {\n      var callback = options[type];\n\n      if (!callback) {\n        return null;\n      }\n      return callback.call(self.element, data);\n    }\n\n    /**\r\n       * Cleans the components \r\n       * @returns {} \r\n       */\n    function _cleanComponents() {\n      self.components = {};\n    }\n\n    /**\r\n       * Gets the component\r\n       * @param {} component \r\n       * @returns {} \r\n       */\n    function _getComponent(component) {\n      var element = self.element;\n\n      if (!self.components[component]) {\n        var foundComponent = $(\"[data-bizagi-component=\" + component + \"]\", element);\n        if (foundComponent != null && foundComponent.length > 0) {\n          self.components[component] = foundComponent;\n        }\n      }\n      return self.components[component];\n    }\n\n    /**\r\n       * Replaces a matched element in the container for the specified \"replace\" element\r\n       * @param {} html \r\n       * @param {} element \r\n       * @param {} replace \r\n       * @returns {} \r\n       */\n    function _replaceElement(html, element, replace) {\n      return html.replace(\"{{element \" + element + \"}}\", replace);\n    }\n\n    /**\r\n       * Return the event handler parameters object\r\n       * @returns {} \r\n       */\n    function _buildRefreshParameters() {\n      var options = self.options;\n      var sortColumn = options.sortColumn != undefined ? options.sortColumn.index : 1;\n      return { page: self.page, sortBy: options.sortBy, sortType: options.sortOrder, sortColumnIndex: sortColumn };\n    }\n\n    /**\r\n       * Return the new created ids\r\n       * @returns {} \r\n       */\n    function getNewRowKeys() {\n      var rows = _getComponent(\"rows\").find(\"[data-new-row]\");\n\n      return $.map(rows, function (row, i) {\n        return $(row).data(\"business-key\");\n      });\n    }\n\n    /**\r\n       * Get current content \r\n       * @returns {} \r\n       */\n    function getContainer() {\n      return $(self.element);\n    }\n\n\n  };\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.render.services.service\",\n{\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\",\n  BA_MULTIACTION_WITH_LIMIT_NUMBER: 5,\n  BA_MULTIACTION_WITH_LIMIT_QUEUE: \"multiaction\" },\n\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(params) {\n    params = params || {};\n    params.context = params.context || \"workflow\";\n    params.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.serviceLocator = new bizagi.render.services.context(params);\n    this.multiactionService = new bizagi.render.services.multiactionservice(this);\n    this.multiactionServiceWithLimit = new bizagi.render.services.multiactionservice(this, this.Class.BA_MULTIACTION_WITH_LIMIT_NUMBER, this.Class.BA_MULTIACTION_WITH_LIMIT_QUEUE);\n    this.guid = Math.guid();\n\n    if (bizagi.override.enableECMMetadataMultiaction) {\n      this.multiactionMetadataService = new bizagi.render.services.metadatamultiactionservice(this);\n    }\n\n    // Userfield definitions mini-cache\n    this.userfieldRequests = {};\n\n    this.deviceType = params.deviceType || (bizagi.util.isSmartphoneDevice() ? bizagi.deviceEnum.smartphone : bizagi.util.isTabletDevice() ? bizagi.deviceEnum.tablet : bizagi.deviceEnum.desktop);\n    this.deviceCode = bizagi.util.getDeviceCode();\n  },\n\n  /*\r\n      *   Return the multiaction-service\r\n      */\n  multiaction: function multiaction() {\n    return this.multiactionService;\n  },\n\n  /*\r\n     *   Return the multiaction-service\r\n     */\n  multiactionWithLimit: function multiactionWithLimit() {\n    return this.multiactionServiceWithLimit;\n  },\n\n  metadataECMMultiaction: function metadataECMMultiaction() {\n    return bizagi.override.enableECMMetadataMultiaction ? this.multiactionMetadataService : this;\n  },\n  /*\r\n      *   SINGLE SERVICES METHODS\r\n      */\n\n  /*\r\n          *   Gets form data\r\n          *   Returns a promise of the data being retrieved\r\n          */\n  getFormData: function getFormData(params) {\n    var self = this;\n\n    // Check if the params contains mocked data\n    if (params && params.data) {\n      return params.data;\n    }\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action || \"LOADFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idProcess)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idProcess\"] = params.idProcess;\n    if (params.idForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    if (params.idEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idEntity\"] = params.idEntity;\n    if (params.surrogateKey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.requestedForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"requestedForm\"] = params.requestedForm;\n    if (params.recordXPath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordXPath\"] = params.recordXPath;\n    if (params.summaryForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"summaryForm\"] = params.summaryForm;\n    if (params.idCase)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    if (params.idWorkitem)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    if (params.idTask)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idTask\"] = params.idTask;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contextType)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contextType;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (!bizagi.util.isEmpty(params.isRefresh))\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isRefresh\"] = params.isRefresh;\n    if (params.isActionStartForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\n    if (params.additionalXpaths)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    if (params.idStartScope)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    if (typeof params.readOnlyForm !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"readonlyform\"] = params.readOnlyForm;\n    if (typeof params.printversion !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"printForm\"] = params.printversion;\n    if (typeof params.recordXpath !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    if (params.guid)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guid\"] = params.guid;\n    if (params.downloadOfflineForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"downloadofflineform\"] = 1;\n\n    if (params.editable === false) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"DisplayFormAsReadOnly\"] = true;\n    }\n\n    // Support parameter from ui\n    // Parameters that affects all the same attributes of render\n    if (params.printversion) {\n      //Print limit grid rows\n      var BA_ALL_PARAMETER_PREFIX = \"all_\";\n\n      if (params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"]) {\n        data[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"] = params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"];\n      }\n    }\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n\n    // Call ajax and returns promise\n    bizagi.chrono.initAndStart(\"data\");\n    var ajaxParams = {\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: params.action || \"LOAD\" };\n\n    if (params.downloadOfflineForm) {\n      ajaxParams.avoidLoader = true;\n    }\n    return $.ajax(ajaxParams).\n    pipe(function (response) {\n      bizagi.chrono.stopAndLog(\"data\");\n\n      // Transform data for read only version\n      if (params.printversion) {\n        try {\n          response.form.properties.editable = \"False\";\n\n          var transformGridDataToReadOnly = function transformGridDataToReadOnly(_data) {\n            if (_data == null) {\n              return _data;\n            }\n            if (_data.hasOwnProperty('type') && _data.type == 'grid') {\n              _data.id = data.id + \"-print\";\n              _data.allowAdd = \"False\";\n              _data.allowDelete = \"False\";\n              _data.allowEdit = \"False\";\n              _data.allowGrouping = \"False\";\n              _data.allowMore = \"False\";\n              _data.allowSearch = \"False\";\n            } else {\n              $.each(data, function (key, value) {\n                if (_typeof(value) == 'object') {\n                  _data[key] = transformGridDataToReadOnly(_data[key]);\n                }\n              });\n            }\n            return _data;\n          };\n          response = transformGridDataToReadOnly(response);\n        } catch (e) {\n        }\n      }\n\n      return response;\n    });\n  },\n  /*\r\n      *   Gets a search form data\r\n      *   Returns a promise of the data being retrieved\r\n      */\n  getSearchFormData: function getSearchFormData(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHFORM\";\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idSearchForm)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHFORM\" });\n\n  },\n\n  processDataValues: function processDataValues(data) {\n    var o;\n    data = $.extend(true, {}, data);\n    for (o in data) {\n      if (data.hasOwnProperty(o) && $.type(data[o]) == \"object\") {\n        // for search\n        if (data[o].hasOwnProperty(\"id\")) {\n          data[o] = data[o].id;\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Sends a form action to the server\r\n      */\n  submitData: function submitData(params) {\n    var self = this;\n\n    // Define data\n    data = self.resolveData(params.data || {}, params.xpathContext);\n    data = self.processDataValues(data);\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action;\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.transitions)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"transitions\"] = params.transitions;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.forcePlanCompletion)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"forcePlanCompletion\"] = params.forcePlanCompletion;\n\n    /* if (params.isActionStartForm)\r\n                                                                                                        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\r\n                                                                                                        */\n    var actionType = params.action.toString().toUpperCase();\n\n    // Log submit data\n    bizagi.debug(\"Data sent\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: actionType,\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n      } });\n\n  },\n  /*\r\n      * Get data processing xpathcontext\r\n      */\n  resolveData: function resolveData(data, xpathContext) {\n    var name, newName, value;\n    if (!$.isEmptyObject(data) && xpathContext) {\n      if (xpathContext.search(/\\[id=\\d+\\]/) !== -1) {\n        for (name in data) {\n          if (name.search(/\\[id=\\d+\\]/) !== -1 && xpathContext == name.substr(0, name.search(/\\]/) + 1)) {\n            newName = name.substr(name.search(/\\]/) + 2);\n            value = data[name];\n            data[newName] = value;\n            delete data[name];\n          }\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Fetch a property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   property\r\n      */\n  getPropertyData: function getPropertyData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n\n    if (params.sessionId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.guidentity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.pxpath)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpath\"] = params.pxpath;\n    if (params.prows)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.prows;\n    if (params.ppage)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.ppage;\n    if (params.pfilter != undefined && params.pfilter != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = params.pfilter;\n    /*else\r\n                                                                              data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = \"\";*/\n    if (params.psort != undefined && params.psort != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.psort;\n    if (params.porder)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.porder;\n    if (params.pcaseId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"caseId\"] = params.pcaseId;\n    if (params.pguidEntity)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidEntity\"] = params.pguidEntity;\n    if (params.psurrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.psurrogatedKey;\n    }\n    if (params.pactionXpath) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"actionXpath\"] = params.pactionXpath;\n    }\n    if (params.ptemplateGuid) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"templateGuid\"] = params.ptemplateGuid;\n    }\n    if (params.pparameters) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parameters\"] = params.pparameters;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      */\n  getData: function getData(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch search data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   term\r\n      */\n  getSearchData: function getSearchData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"term\"] = params.term;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  /*\r\n      * Refresh tha data property from the server\r\n      * Params:\r\n      *   -   collapsestate\r\n      */\n  getCollapseData: function getCollapseData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"collapseState\"] = params.collapseState;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"collapseState\" }));\n\n  },\n\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch grid data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   sort\r\n      *   -   page\r\n      *   -   rows\r\n      */\n  getGridData: function getGridData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.order;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  getGridDataExclusivesSelected: function getGridDataExclusivesSelected(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathfilter\"] = params.xpathfilter;\n    return this.getPropertyData($.extend(params, {\n      property: \"exclusivesSelected\" }));\n\n  },\n\n  /*\r\n      *   Returns the upload plugin cancel image\r\n      */\n  getUploadCancelImage: function getUploadCancelImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-upload-cancel-image\");\n  },\n  /*\r\n      *   Returns the upload file url for each file\r\n      */\n  getUploadFileUrl: function getUploadFileUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  downloadFile: function downloadFile(params) {\n    var self = this;\n    var fileUrl = self.getUploadFileUrl(params);\n\n    return $.ajax({\n      url: fileUrl,\n      type: \"GET\",\n      queue: params.queue,\n      dataType: \"binary\",\n      processData: false //Always false for binary dataType\n    }).\n    then(function (binary_file) {\n      if (binary_file.type == \"application/json\") {\n        return self.readFileAsJSON(binary_file);\n      }\n\n      if (typeof binary_file == \"string\") {\n        var xhr = arguments[2];\n        var contentType = xhr.getResponseHeader('Content-type');\n        binary_file = bizagi.util.media.byteArrayToBlob(self.stringToByteArray(binary_file), contentType);\n      }\n      return binary_file;\n    });\n  },\n\n  readFileAsJSON: function readFileAsJSON(binary_file) {\n    var def = new $.Deferred();\n    var reader = new FileReader();\n    reader.onloadend = function () {\n      def.reject({ responseText: reader.result });\n    };\n    reader.readAsText(binary_file);\n    return def.promise();\n  },\n\n  stringToByteArray: function stringToByteArray(binary) {\n    return bizagi.util.stringToByteArray(binary);\n  },\n\n\n  getUploadFileEntityUrl: function getUploadFileEntityUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    if (params.isContextContainerWidgetRender) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\n    } else {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    }\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddUrl: function getUploadAddUrl() {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-add-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDFILE\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddFileUrl: function getUploadAddFileUrl(isUserPreferences) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"form-submit-data-upload\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = isUserPreferences === true ? \"SAVEUSERIMAGE\" : \"savefile\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n\n  deleteImage: function deleteImage(params) {\n    var self = this;\n\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"DELETEUSERIMAGE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing image '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  deleteUploadFile: function deleteUploadFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing file in upload '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n\n  },\n  /*\r\n      * Return file meta data\r\n      */\n  getECMMetadata: function getECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    // Log submit data\n    bizagi.debug(\"Get file metadata '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  checkOutFile: function checkOutFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"checkOutFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * cancelCheckOut\r\n      **/\n  cancelCheckOut: function cancelCheckOut(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"cancelCheckOut\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  deleteECMFile: function deleteECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"delete\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"delete file'\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update ECM file content\r\n      **/\n  updateECMFileContent: function updateECMFileContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMFileContent\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file content '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update file content\r\n      **/\n  updateECMMetadata: function updateECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file meta data '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getFileProperties: function getFileProperties(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getFileProperties\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Get file properties '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n  },\n  /**\r\n      * Get file item\r\n      * @param params\r\n      * @returns {{}|*}\r\n      */\n  getFile: function getFile(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /**\r\n      * Document Templates generate rest service\r\n      * @param params\r\n      * @returns {string}\r\n      */\n  getAllDocuments: function getAllDocuments(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\n    var data = {};\n\n    data[\"contextXpath\"] = params.xpathContext;\n    data[\"xpathAttribute\"] = params.xpath;\n    data[\"idCase\"] = params.idCase;\n    data[\"idWorkItem\"] = params.idWorkItem;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  getUploadFileEntity: function getUploadFileEntity(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n\n    if (params.isContextContainerWidgetRender) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\n    } else {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    }\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  uploadECMFile: function uploadECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"uploadECMFile\";\n    data.fileUpload = params.fileUpload; // Content of file\n    data.xPath = params.xPath;\n\n    data.idAttrib = params.idAttrib;\n    data.fileName = params.fileName;\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Upload ECM file '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getECMFileUrl: function getECMFileUrl(params) {\n    var self = this;\n    var url = params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"File\";\n\n    // Define data\n    var data = params.extra || {};\n\n    data.action = \"viewECMFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.fileName = params.fileName;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    if (params.p_sessionId) {\n      data.p_sessionId = params.p_sessionId;\n    }\n\n\n    // Log submit data\n    bizagi.debug(\"View uploaded file '\" + params.xPath + \"'\", data);\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n  /*\r\n      *\r\n      */\n  isFileOnECM: function isFileOnECM(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    data[\"action\"] = \"isFileOnECM\";\n    data[\"idUpload\"] = params.idUpload;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl(\"render-ecm-upload-url\"), data);\n  },\n  /*\r\n      *   Start a grid record edition\r\n      */\n  editGridRecord: function editGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EDITRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending edit request for relation '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-edit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"EDITRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecord: function addGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row, and sending the data at the same time\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecordData: function addGridRecordData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATIONWITHDATA\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Build data to submit\n    var submitData = self.processDataValues(params.submitData || {});\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATIONWITHDATA\" });\n\n  },\n  /*\r\n      *   Submits the grid record data to the server\r\n      */\n  saveGridRecord: function saveGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disableServerGridValidations\"] = params.disableServerGridValidations || false;\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVERELATION\" });\n\n  },\n  /*\r\n      *   Deletes a grid record in the server\r\n      */\n  deleteGridRecord: function deleteGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending delete request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"REMOVERELATION\" });\n\n  },\n\n  /*\r\n      * Get association flipped status\r\n      */\n  getFlipAssociation: function getFlipAssociation(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"flipped\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"flipstate\"] = params.flipstate;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log request data\n    bizagi.debug(\"Sending request for flip association control '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"text\" }).\n    pipe(function (response) {\n      try {\n        // Try to attempt to parse JSON\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        // If JSON is not valid we need to return the original text response\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Cancels an add or edit request for a grid\r\n      */\n  rollbackGridAction: function rollbackGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ROLLBACK\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-rollback-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ROLLBACK\" });\n\n  },\n  /*\r\n      *   Returns the search render default image\r\n      */\n  getSearchDefaultImage: function getSearchDefaultImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-search-default-image\");\n  },\n\n  processDataCriteria: function processDataCriteria(criteria) {\n    var o;\n    criteria = $.extend(true, [], criteria);\n    for (o in criteria) {\n      if (criteria.hasOwnProperty(o) && criteria[o].hasOwnProperty(\"value\") && $.type(criteria[o].value) == \"object\") {\n        // for search\n        if (criteria[o].value.hasOwnProperty(\"id\") && criteria[o].value.hasOwnProperty(\"label\")) {\n          criteria[o].value = criteria[o].value.id;\n        }\n      }\n    }\n    return criteria;\n  },\n\n  /*\r\n      *   Perform entity search in the server\r\n      */\n  submitSearch: function submitSearch(params) {\n    var self = this,criteria;\n\n    // Define data\n    var data = params.extra || {};\n\n    var sort = params.sort && params.sort !== \"\" ? params.sort : \"\";\n\n    if (params.order && params.order !== \"\" && sort !== \"\")\n    sort += \" \" + params.order;\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHENTITYFORRENDER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"pageSize\"] = params.rows;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n\n    criteria = self.processDataCriteria(params.criteria);\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchCriteria\"] = JSON.encode(criteria);\n\n    // Optional search params\n    if (params.allowFullSearch)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"allowFullSearch\"] = params.allowFullSearch;\n    if (params.maxRecords)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxRowsAllowed\"] = params.maxRecords;\n\n    // Log submit data\n    bizagi.debug(\"Performing advanced search\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-advanced-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHENTITYFORRENDER\" });\n\n  },\n\n  /*\r\n      *   Submits the stakeholder associated\r\n      */\n  associateStakeholder: function associateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    data[\"associatedUser\"] = params.associatedUser;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\" });\n\n  },\n\n  /*\r\n      *   Refresh the stakeholder associated list\r\n      */\n  refreshAssociateStakeholder: function refreshAssociateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /*\r\n      *   Gets the link to the letter\r\n      */\n  getLetterNotEditableUrl: function getLetterNotEditableUrl(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Call ajax and returns promise\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-notEditable-url\");\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Gets the content for editable letters\r\n      */\n  getLetterContent: function getLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"html\" }).\n    pipe(function (response) {\n      try {\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Get the can generate letter flag\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CANGENERATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *   Saves the content for editable letters\r\n      */\n  saveLetterContent: function saveLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"UPDATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Define content\n    var content = params.content || \"\";\n\n    // Define url\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-save-url\");\n    var fullUrl = url + \"?\" + jQuery.param(data);\n\n    // Log submit data\n    bizagi.debug(\"Save request for letter sent to: \" + fullUrl, content);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: fullUrl,\n      data: content,\n      type: \"POST\",\n      dataType: \"html\" });\n\n  },\n  /*\r\n      *   Returns the icons path for the letter plugin\r\n      */\n  getLetterEditorIconsPath: function getLetterEditorIconsPath() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-letter-content-icons\");\n  },\n  /*\r\n      *   Executes a button action in the server\r\n      */\n  executeButton: function executeButton(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"buttonRule\" }));\n\n  },\n  /**\r\n      * Executes a fileprint action in the server\r\n      * @param params\r\n      * @returns {{}|*}\r\n      */\n  getFilePrint: function getFilePrint(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"data\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /*\r\n      *   Start a link form edition\r\n      */\n  editLinkForm: function editLinkForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n  /*\r\n      *   Saves the content of the link form\r\n      */\n  saveLinkForm: function saveLinkForm(params) {\n    // Actually it does the same than edit grid records\n    //return this.saveGridRecord(params);\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVEFORMLINKRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVEFORMLINKRELATION\" });\n\n  },\n  /*\r\n      *   Rollbacks the link form edition\r\n      */\n  rollbackLinkForm: function rollbackLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.rollbackGridAction(params);\n  },\n  /*   Commit the link form edition\r\n      */\n  commitLinkForm: function commitLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.commitGridAction(params);\n  },\n  /*   Sends schekpoint action\r\n      */\n  sendCheckpoint: function sendCheckpoint(params) {\n    // Actually it does the same than rollback grid records\n    return this.sendCheckpointAction(params);\n  },\n  /*\r\n      *   Loads the userfield definition\r\n      */\n  getUserfieldDefinition: function getUserfieldDefinition(params) {\n    var self = this;\n    params = params || {};\n\n    // Check in deferreds cache\n    if (self.userfieldRequests[params.userfield])\n    return self.userfieldRequests[params.userfield];\n\n    // Required params: idCase\n    self.userfieldRequests[params.userfield] = $.read(self.serviceLocator.getUrl(\"render-userfield-definition\"),\n    {\n      guidUserfield: params.userfield,\n      device: params.device || \"desktop\" });\n\n\n\n    // Return deferred\n    return self.userfieldRequests[params.userfield];\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshControl: function refreshControl(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESH\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"PARTIALREFRESH\" });\n\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshGridCell: function refreshGridCell(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESHGRIDCELL\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidcolumn\"] = params.column;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n    params.typeRender ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"typeRender\"] = params.typeRender : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Request to execute rule on server\r\n      * @param {object} params h_pageCacheId, guidrule\r\n      */\n  executeRule: function executeRule(params) {\n    var self = this;\n\n\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTERULE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidrule\"] = params.rule || \"\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute interface on server\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeInterface: function executeInterface(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEINTERFACE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidinterface\"] = params[\"interface\"] || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute SAP Connecor\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeSAPConnector: function executeSAPConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTESAP\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidsap\"] = params.guidsap || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute a Bizagi connector\r\n      * @param params\r\n      * @return {{}}\r\n      */\n  executeConnector: function executeConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTECONNECTOR\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidConnector\"] = params.guidConnector || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /**\r\n      * Request to execute pipeline on server\r\n      * @param {object} params h_pageCacheId, guidpipeline\r\n      */\n  executePipeline: function executePipeline(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEPIPELINE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidpipeline\"] = params.pipeline || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  generateDocumentTemplate: function generateDocumentTemplate(params) {\n    var self = this;\n    params = params || {};\n    params.append = params.append ? params.append : false;\n\n    return $.create(\n    self.serviceLocator.getUrl(\"render-document-generate\"),\n    {\n      h_pageCacheId: params.idPageCache,\n      contextXpath: params.xpathcontext,\n      groupMappingId: params.groupMapping,\n      xpathAttribute: params.xpath,\n      append: params.append,\n      controlId: params.id });\n\n\n  },\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  getAllDocumentsDownloadUrl: function getAllDocumentsDownloadUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\n    var data = {};\n    data[\"h_pageCacheId\"] = params.idPageCache;\n    data[\"contextXpath\"] = params.xpathContext;\n    data[\"xpathAttribute\"] = params.xpath;\n    data[\"idCase\"] = params.idCase;\n    data[\"idWorkItem\"] = params.idWorkItem;\n    data[\"p_sessionId\"] = params.sessionId;\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n\n  },\n\n\n  getCaseNumber: function getCaseNumber(params) {\n    var self = this;\n    //this function use sendEMail\n    //and not possible use dat ain ajax\n    //this is workaround (rhonyp)\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"case-handler-getCaseSummary\").replace(\"{idCase}\", params.idCase) + \"?eventAsTasks=false&onlyUserWorkItems=true&mobileDevice=\" + bizagi.isMobile(),\n      type: \"GET\",\n      dataType: \"json\" });\n\n  },\n\n  getCaseAssignees: function getCaseAssignees(params) {\n    var self = this;\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl(\"case-handler-getCaseAssignees\"), {\n      idCase: params.idCase }).\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  getWorkitems: function getWorkitems(params) {\n    var self = this;\n    params = params || {};\n\n    return $.read(self.serviceLocator.getUrl(\"case-handler-getWorkItems\"), {\n      idCase: params.idCase,\n      onlyUserWorkItems: params.onlyUserWorkItems || \"\" });\n\n  },\n\n  /**\r\n      * Executes a grid export action in the server\r\n      * @param params\r\n      * @returns {string}\r\n      */\n  getGridExportFile: function getGridExportFile(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.exportType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /*\r\n      * Executes a send email action in the server\r\n      */\n  sendEmail: function sendEmail(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"sendEmail\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n\n    // Email parameters\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"to\"] = params.to;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"subject\"] = params.subject;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"message\"] = params.message;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"selected\"] = JSON.encode(params.selected);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    var url = params.url || self.serviceLocator.getUrl(\"form-get-data\");\n\n    return $.create(url, data);\n  },\n\n  /*\r\n      * Request to invalidates page cache in server, since it is no needed anymore\r\n      */\n  invalidatePageCache: function invalidatePageCache(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"INVALIDATEPAGECACHE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"INVALIDATEPAGECACHE\" });\n\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersList: function getUsersList(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersList\"), params);\n  },\n  /*\r\n     * Search users usign parameters suchs as userName, fullName, domain and organization\r\n     * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n     * @return {deferred} ajax object with JSON content\r\n     */\n  getUsersListFromQueryForm: function getUsersListFromQueryForm(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"render-query-getUsersList\"), params);\n  },\n  /*\r\n      * Search users for preferences usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListFromPreferences: function getUsersListFromPreferences(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-FromPreferences\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the boss field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdBossUser: function getUsersListForXpathIdBossUser(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdBossUser\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the delegate field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdDelegate: function getUsersListForXpathIdDelegate(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdDelegate\"), params);\n  },\n\n  /*\r\n      * Search users for Stakeholders\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListForStakeholders: function getUsersListForStakeholders(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForStakeholders\"), params);\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersForAssignation: function getUsersForAssignation(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersForAssignation\"), params);\n  },\n\n  /**\r\n      * Get Users Creation/Edition Form\r\n      */\n  getUsersForm: function getUsersForm(params) {\n    var self = this;\n    return $.create(self.serviceLocator.getUrl(\"admin-usersform\"), params);\n  },\n  /**\r\n      *   Return generate Data To Send By Email\r\n      */\n  generateDataToSendByEmail: function generateDataToSendByEmail(params) {\n    var self = this;\n    params = params || {};\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-GenerateDataToSendByEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Return generate Send user password Mail\r\n      */\n  sendUserEmail: function sendUserEmail(params) {\n    var self = this;\n    params = params || {};\n    var data = {\n      action: \"SendUserEmail\",\n      emailTo: params.eMailTo,\n      subject: params.subject,\n      body: params.body };\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-sendUserEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /**\r\n      * Get bizagi configuration\r\n      * @param {Function}   type callback function when the file load is succed\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getConfiguration: function getConfiguration() {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"admin-users-config\");\n\n    return $.read(url);\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyPathToBase: function verifyPathToBase(pathToBase, url) {\n\n    if (url.indexOf(\"http\") != -1 && pathToBase != \"\") {\n      return url;\n    } else {\n      return pathToBase + url;\n    }\n\n  },\n\n  /**\r\n      * Get template of entity\r\n      * @param params { guid, prepare}\r\n      */\n  getTemplate: function getTemplate(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADTEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = \"entity\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guid;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isProcessData\"] = params.forcePersonalizedColumns;\n\n    if (params.templateType) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templatetype\"] = params.templateType;\n    }\n\n    if (params.templateGuid) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templateguid\"] = params.templateGuid;\n    }\n\n    if (params.isDefaultTemplate != undefined) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isDefaultTemplate\"] = params.isDefaultTemplate;\n    }\n\n    // Fix device type since on mobility there are tablet_ios, tablet_android, smartphone_ios, smartphone_ios\n    // and the service recives either tablet or smartphone\n    var deviceType = bizagi.util.detectDevice();\n    if (bizagi.util.isTabletDevice()) {\n      deviceType = \"tablet\";\n    } else if (bizagi.util.isSmartphoneDevice()) {\n      deviceType = \"mobile\";\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = deviceType;\n\n    // When prepare is true just return data, this feature is used by multiaction service\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-get-data\"), data);\n  },\n\n  /**\r\n      * Chek if an entity has startform\r\n      * @param params\r\n      * @return {*}\r\n      */\n  hasStartForm: function hasStartForm(params) {\n    var self = this;\n    var data = {};\n\n    if (params.guidWFClass) {\n      data.guidWFClass = params.guidWFClass;\n    }\n\n    return $.read(self.serviceLocator.getUrl(\"render-processes-startform\"), data);\n  },\n\n  /**\r\n      * Get the start form of the case\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getStartForm: function getStartForm(params) {\n    var self = this;\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADSTARTFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidprocess\"] = params.guidprocess;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idCase) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    }\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idWorkitem) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    }\n    if (params.additionalXpaths) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n    if (params.surrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.surrogatedKey;\n    }\n    if (params.recordXpath) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    }\n    if (params.mappingstakeholders) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"mappingstakeholders\"] = params.mappingstakeholders;\n    }\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      cache: true });\n\n  },\n  /*\r\n      *   Start a link form edition\r\n      */\n  editActionForm: function editActionForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getActions: function getActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.pmaxitems) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxitems\"] = params.pmaxitems;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n\n  /**\r\n      * Execute actions or constructors\r\n      * @param params\r\n      */\n  executeActions: function executeActions(params) {\n    var self = this;\n    var extendParams = $.extend({}, params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.pguidConstructor) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidConstructor\"] = params.pguidConstructor;\n    }\n\n    if (params.pguidAction) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidAction\"] = params.pguidAction;\n    }\n    if (params.prepare) {\n      return data;\n    }\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getPolymorphicActions: function getPolymorphicActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.additionalXpaths) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /**\r\n      * Make a JSON tree of polymorphic constructors categories\r\n      * @param values\r\n      * @return {Array}\r\n      */\n  serializePolymorphicActions: function serializePolymorphicActions(values) {\n    // json serializer\n    var actions = [];\n    var GUID_ENTITY = 0,DISPLAY_NAME = 1,XPATHCONTEXT = 2,TYPE = 3,GUID_OBJECT = 4,GUID_CONSTRUCTOR = 5,GUID_PARENT_ENTITY = 6;\n\n    /**\r\n                                                                                                                                 * Get children by guid of entity\r\n                                                                                                                                 * @param guid\r\n                                                                                                                                 * @return {Array}\r\n                                                                                                                                 */\n    var getChildren = function getChildren(guid) {\n      var children = [];\n      guid = guid || \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_PARENT_ENTITY] == guid) {\n          children.push(value);\n        }\n      });\n      return children;\n    };\n\n    /**\r\n        * Get parents by action object\r\n        * @param node\r\n        * @return {string}\r\n        */\n    var getParents = function getParents(node) {\n      node = node || {};\n      var parents = \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_ENTITY] == node[GUID_PARENT_ENTITY]) {\n          parents += getParents(value) + value[DISPLAY_NAME] + \" > \";\n        }\n      });\n      return parents;\n    };\n\n\n    /**\r\n        * Make a tree of actions\r\n        * @param list\r\n        * @param guid\r\n        * @return {*}\r\n        */\n    var fillTree = function fillTree(list, guid) {\n      var node;\n      var children = getChildren(guid);\n      $.each(children, function (key, value) {\n        var child = fillTree([], value[GUID_ENTITY]);\n        node = {\n          \"guidEntity\": value[GUID_ENTITY],\n          \"displayName\": value[DISPLAY_NAME],\n          \"hasConstructor\": value[GUID_CONSTRUCTOR] ? true : false,\n          \"type\": value[TYPE],\n          \"guidObject\": value[GUID_OBJECT],\n          \"guidConstructor\": value[GUID_CONSTRUCTOR],\n          \"xpathContext\": value[XPATHCONTEXT],\n          \"children\": child,\n          \"parents\": getParents(value) };\n\n        if (node.guidConstructor !== \"\" || node.children.length > 0) {\n          list.push(node);\n        }\n      });\n\n      return list;\n    };\n    fillTree(actions, \"\");\n    return actions;\n  },\n\n  /**\r\n      * Gets the image for an entity xpath\r\n      * @param params\r\n      */\n  getEntityImage64: function getEntityImage64(params) {\n    var self = this,\n    data = {\n      width: params.data,\n      height: params.height,\n      xpath: params.xpath },\n\n    url = self.serviceLocator.getUrl(\"render-entity-layout-image64\").replace(\"{entity}\", params.entity).replace(\"{surrogateKey}\", params.surrogateKey);\n\n    return $.ajax({\n      url: url,\n      data: data });\n\n  },\n\n  /**\r\n      * Get data files when user access from my stuff, because there is no scope\r\n      */\n  getFilesDataForLayoutUploadControl: function getFilesDataForLayoutUploadControl(params) {\n    var self = this;\n    return $.read(self.serviceLocator.getUrl(\"render-entity-layout-upload-files\"), params);\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(params) {\n    return $.ajax({\n      url: this.verifyMobilePathToBase(bizagi.services.ajax.pathToBase || \"\", params.url),\n      data: params.formData,\n      type: \"POST\",\n      contentType: false,\n      processData: false });\n\n  },\n\n  /**\r\n      * Commit an add or edit request for a grid\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  commitGridAction: function commitGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"COMMIT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-commit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"COMMIT\" });\n\n  },\n  /*\r\n      *   Commit an add or edit request for a grid\r\n      */\n  sendCheckpointAction: function sendCheckpointAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CHECKPOINT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending checkpoint request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-checkpoint-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"CHECKPOINT\" });\n\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyMobilePathToBase: function verifyMobilePathToBase(pathToBase, url) {\n    return bizagi.util.isMashupContext() ? (url || \"\").replaceAll(pathToBase, \"\") : url;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to multiaction rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.render.services.multiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\n{\n\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(service, limit, queue) {\n    this.service = service;\n    this.serviceLocator = service.serviceLocator;\n\n    // Multiaction - batch stuff\n    this.batch = {};\n    this.batchTimer = 50;\n    this.maxNumberOfActions = limit || 0;\n    this.queue = queue || null;\n    this.deferredBatchExecuting = $.Deferred();\n    this.deferredBatchExecuting.resolve();\n    this.disabledRequests = false;\n    this.circularDependencies = new bizagi.circularDependencies();\n\n    // Create proxyed version of methods\n    this.replicateServiceMethods();\n  },\n\n  /*\r\n     *   Returns the internal service\r\n     */\n  getService: function getService() {\n    return this.service;\n  },\n\n  /*\r\n     *   Create a proxied multiaction version for service calls\r\n     */\n  replicateServiceMethods: function replicateServiceMethods() {\n    var self = this;\n    for (var key in this.service.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"multiaction\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ return this.proxyMethod(this.getService().' + key + ', arguments);};tmp');\n    }\n  },\n\n  /*\r\n     *   Perform the proxy call for each service method\r\n     */\n  proxyMethod: function proxyMethod(method, parameters) {\n    var service = this.service;\n\n    // Check if has only one argument, else execute directly\n    if (!parameters || parameters.length != 1) {\n      return method.apply(service, parameters);\n    }\n\n    // Check if the argument is object, else execute directly\n    if (_typeof(parameters[0]) != \"object\") {\n      return method.apply(service, parameters);\n    }\n\n    var params = parameters[0];\n\n    // If the caller is requesting a prepare call, just execute the method with the current parameters\n    if (params.prepare == true) return method.apply(service, parameters);\n\n    // Prepare the ajax instead of sending it\n    var originalPrepare = params.prepare;\n    params.prepare = true;\n\n    var action = method.apply(service, parameters);\n    if (originalPrepare === undefined || originalPrepare == null) delete params.prepare;else\n    params.prepare = originalPrepare;\n    return this.add(action);\n  },\n\n  /**\r\n     * This method make a standard error message\r\n     */\n  makeCircularDependenciesError: function makeCircularDependenciesError(error) {\n    var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n    return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n  },\n\n\n  /*\r\n     *   Add an action to be performed in a multiaction, and be resolved later\r\n     *   returns a deferred\r\n     */\n  add: function add(action) {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    var name = action.h_action || \"unnamed\";\n\n    // Put here all actions to ignore in circular dependencies\n    var exceptionActions = [\"PROCESSPROPERTYVALUE\", \"LOADTEMPLATE\", \"ADDRELATIONWITHDATA\", \"GETFILE\"];\n\n    if (exceptionActions.indexOf(name) < 0 && bizagi.override.detectCircularDependencies) {\n      self.circularDependencies.addNode(name, action);\n    }\n\n    // First clear previous timeout\n    clearTimeout(self.batchTimeout);\n    var tag = action.tag = Math.guid();\n    var singleAction = { action: action, deferred: deferred };\n    self.batch[tag] = singleAction;\n\n    var fn = function fn() {\n      var resolveDependencies = self.circularDependencies.resolve();\n\n      if (resolveDependencies.error) {\n        // Reset Queue\n        for (var i in self.batch) {\n          var message = resolveDependencies.error.multiactionError;\n          self.batch[i].deferred.reject(message);\n        }\n        self.batch = {};\n      } else\n      if (!self.disabledRequests) {\n        self.deferredBatchExecuting = self.fire();\n      }\n    };\n\n    // Start a new timeout\n    self.batchTimeout = setTimeout(fn, self.batchTimer);\n\n    // If we have a limit, then fire it again\n    if (self.maxNumberOfActions != 0) {\n      if (Object.keys(self.batch).length >= self.maxNumberOfActions) {\n        clearTimeout(self.batchTimeout);\n        fn();\n      }\n    }\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Fires up the multiaction\r\n     */\n  fire: function fire() {\n    var self = this;\n    var batch = {};\n\n    // Prepare actions and clone batch manually\n    var actions = [];\n    $.each(self.batch, function (tag, item) {\n      actions.push(item.action);\n      batch[tag] = item;\n    });\n\n    // Reset batch\n    self.batch = {};\n\n    // Fire ajax \n    return $.when(self.execute({ actions: actions, rejectDeferreds: false })).\n    done(function (responses) {\n\n      // Process each response\n      $.each(responses, function (i, response) {\n        var tag = response.tag;\n        if (!response.error) {\n          batch[tag].deferred.resolve(response.result);\n        } else {\n          batch[tag].deferred.reject(response.error, response, response.error.message);\n        }\n\n        // Remove paired tag from collection\n        delete batch[tag];\n      });\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: \"Operation didn't executed\" }, '', \"Operation didn't executed\");\n      });\n    }).fail(function (xhr, type, error) {\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      var errorMessage = typeof error !== \"undefined\" ? error.message : error || \"Operation didn't executed\";\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: errorMessage }, '', \"Operation didn't executed\");\n      });\n    });\n  },\n  /*\r\n     *   Sends a multiaction to the server\r\n     */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction\"),\n      data: data,\n      queue: this.queue,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(response.error, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse = {};\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Disable the request, restart the form is mandatory who calls this method \r\n      * or unexpected behavior will happen on the form\r\n      */\n  disableRequests: function disableRequests() {\n    var self = this;\n    self.disabledRequests = true;\n  },\n\n  /**\r\n      * Identify if batch action is running, by default is resolved\r\n      * @returns Deferred object if batch action is running\r\n      */\n  validateIfBatchIsExecuting: function validateIfBatchIsExecuting() {\n    var self = this;\n    return self.deferredBatchExecuting;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Command controller \r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for action and validation controllers\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.command.controllers.controller\", {\n  /* \r\n                                                          *   Set to true in order to debug\r\n                                                          */\n  THROW_ERROR: true },\n\n{\n  /*  \r\n  *   Constructor\r\n  */\n  init: function init(form) {\n    this.form = form;\n    this.dateFormat = form.getResource(\"dateFormat\");\n  },\n  /*\r\n     *   Returns the condition in JS\r\n     */\n  buildConditions: function buildConditions(conditions, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var operator = conditions.expressions && conditions.expressions.length > 1 ? self.buildConditionOperator(conditions.operator) : conditions.operator;\n    innerDependencies = innerDependencies || [];\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    //  Validate trtue and false conditions\n    if (operator == \"true\")\n    return \"true\";\n    if (operator == \"false\")\n    return \"false\";\n\n    var sJsCondition = \"\";\n\n    for (var i = 0; i < conditions.expressions.length; i++) {\n      var expression = conditions.expressions[i];\n\n      if (expression.simple) {\n        var bGDetected = self.searchGridReferenceInCondition(expression.simple);\n        sJsCondition += self.buildSimpleCondition(expression.simple, bGDetected, bCheckEditability, innerDependencies);\n\n      } else if (expression.complex) {\n        sJsCondition += \"(\" + self.buildConditions(expression.complex, bGridDetected, bCheckEditability, innerDependencies) + \") \";\n      }\n\n      // Adds operator\n      sJsCondition += i < conditions.expressions.length - 1 ? operator : \"\";\n    }\n\n    return sJsCondition;\n  },\n  /*\r\n     *   Builds the condition operator\r\n     */\n  buildConditionOperator: function buildConditionOperator(conditionsOperator) {\n    if (conditionsOperator == \"and\")\n    return \" && \";\n    if (conditionsOperator == \"or\")\n    return \" || \";\n    return conditionsOperator;\n  },\n  /*\r\n     *   Builds a simple condition\r\n     */\n  buildSimpleCondition: function buildSimpleCondition(condition, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var sXpath;\n    var xpath;\n    var sArgument = \"\";\n    var operator = condition.operator;\n    var ensureValueJs = \"\";\n    var ensureEditable = \"\";\n    var ensureVisible = \"\";\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    // List of controls excluded to editability validation\n    // Just keep empty the value of element\n    var excludeEditabilityRule = { \"boolean\": \"\" };\n    var control = condition.xpath && condition.renderId ?\n    condition.xpath + '.' + condition.renderId :\n    condition.xpath || condition.renderId || condition.containerId;\n\n\n    if (bGridDetected && condition.containerId) {\n      var gridXpathInfo = self.processGridXpath(condition.xpath);\n      control = gridXpathInfo.gridXpath + \".\" + condition.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + condition.renderId;\n    }\n\n    if (!innerDependencies.includes(control)) {\n      innerDependencies.push(control);\n    }\n\n    var detectedArgumentType = self.detectConditionArgumentType(control, condition.argumentType);\n\n    // Build xpath\n    sXpath = self.buildXpath(control, detectedArgumentType, bGridDetected);\n    if (detectedArgumentType != \"boolean\") {\n      ensureValueJs += \"!bizagi.util.isEmpty(\" + sXpath + \") && \";\n    }\n\n    // Check if the render is editable, only when the parameter is provided\n    if (bCheckEditability && control && control.length > 0 && !excludeEditabilityRule.hasOwnProperty(detectedArgumentType)) {\n      ensureEditable = \"self.isVisible('\" + control + \"') && self.isEditable('\" + control + \"') && \";\n    }\n\n    // Build argument\n    if (!bizagi.util.isEmpty(condition.argument)) {\n      sArgument = self.buildArgument(condition.argument, detectedArgumentType, bGridDetected);\n\n      // If the argument is xpath it must be filled to for some operators\n      if (detectedArgumentType == \"xpath\") {\n        ensureValueJs += \"!bizagi.util.isEmpty(\" + sArgument + \") && \";\n      }\n\n    } else if (condition.argument === \"\") {\n      // Also check the case when the argument is empty\n      sArgument = \"\\\"\\\"\";\n    }\n\n    // Build condition\n\n    if (operator == \"includes\") {\n      return ensureEditable + ensureValueJs + \"self.includes(\" + sXpath + \",\" + sArgument + \") \";\n    }\n    //if (operator == \"changes\") return \"true\";\n    if (operator == \"changes\") {\n      // If key enableActionIsChangedSupport is true, allow to evaluate the valid control\n      // that execute the action \"is changed\" (see ticket TM12723)\n      if (bizagi.override && !bizagi.override.enableActionIsChangedSupport) {\n        return \"self.isChanged(\" + sXpath + \", params.changed)\";\n      } else {\n        if (bGridDetected) {\n          return \"self.isGridColumnChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        } else {\n          return \"self.isControlChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        }\n      }\n    }\n    if (operator == \"equals\")\n    return ensureEditable + ensureValueJs + sXpath + \" == \" + sArgument;\n    if (operator == \"not-equals\")\n    return ensureEditable + sXpath + \" != \" + sArgument;\n    if (operator == \"less-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" < \" + sArgument;\n    if (operator == \"less-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" <= \" + sArgument;\n    if (operator == \"greater-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" > \" + sArgument;\n    if (operator == \"greater-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" >= \" + sArgument;\n    if (operator == \"like\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"is-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" == 0 || bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-not-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"!bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" != 0 && !bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-true\")\n    return ensureEditable + \"( \" + sXpath + \" == true || \" + sXpath + \" == 'true' )\";\n    if (operator == \"is-false\")\n    return ensureEditable + \"( \" + sXpath + \" == false || \" + sXpath + \" == 'false' || \" + sXpath + \" == 'False' )\";\n    if (operator == \"does-not-contain\")\n    return ensureEditable + \"(bizagi.util.isEmpty(\" + sXpath + \") || \" + sXpath + \".toString().indexOf(\" + sArgument + \") < 0 )\";\n    if (operator == \"contains\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == true \";\n    if (operator == \"does-not-begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == false \";\n    if (operator == \"file-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"file-not-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"!self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"is-invalid-email\")\n    return ensureEditable + \"!self.isValidEmail(\" + sXpath + \") \";\n    if (operator == \"letter-edited\")\n    return \"false\"; //TODO\n    if (operator == \"letter-not-edited\")\n    return \"false\"; //TODO\n    if (operator == \"cell-change\")\n    return \"column == \" + sArgument;\n\n    if (operator == \"on-press\") {\n      if (bGridDetected) {\n        var id = self.buildXpath(control, \"id\", bGridDetected);\n        return \"self.isGridButtonPressed(\" + id + \", params.pressed)\";\n      } else {\n        return \"self.isButtonPressed('\" + control + \"', params.pressed)\";\n      }\n    }\n    if (operator == \"on-load\") {\n      return \"true\";\n    }\n\n    // ondelete behavior on grid control  \n    if (operator == 'on-deleted-row') {\n      xpath = control || \"\";\n      return \"self.onDeletedGridRow('\" + xpath + \"', params.rowDeleted)\";\n    }\n\n    // If there is another operator code throw exception\n    throw new \"There is no implementation for operator code \"() + operator;\n  },\n  /*\r\n     *   Detects the argument type based on the render\r\n     */\n  detectConditionArgumentType: function detectConditionArgumentType(control, argumentType) {\n    var self = this;\n\n    if (argumentType === undefined || argumentType == \"const\") {\n\n      // Search render\n      var form = self.form;\n      var render = form.getRender(control) || form.getRenderById(control);\n\n      // If the render doesn't exist, is because it has the visible property assigned to false\n      // and isn't present in the form's metadata, for this case returns the default value (text)\n      if (render == null) {\n        return 'text';\n      }\n\n      // Check if the render is a grid\n      if (render.properties.type == \"grid\") {\n        var gridXpath = self.processGridXpath(control);\n\n        if (gridXpath.remainingXpath === \"\") {\n          // The target is the grid\n          return \"xpath\";\n        } else {\n          render = render.getColumn(gridXpath.remainingXpath);\n          if (render == null) {\n            throw new Error(\"RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller\");\n          }\n        }\n      }\n\n      var dataType = render.properties.dataType;\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n\n      if (self.isRelatedEntityRender(renderType)) {\n        return 'entity';\n      }\n\n      // Number\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 6 || dataType == 7 || dataType == 10 || dataType == 11) {\n        return 'number';\n      }\n\n      // Money\n      if (dataType == 8) {\n        return 'money';\n      }\n\n      // Date\n      if (dataType == 12 || dataType == 13) {\n        if (render.properties.showTime == true) {\n          return 'datetime';\n        } else {\n          return 'date';\n        }\n      }\n\n      // Boolean\n      if (dataType == 5) {\n        return 'boolean';\n      }\n\n      // Button\n      if (renderType == \"button\") {\n        return \"button\";\n      }\n\n      // form\n      if (\"form\" === renderType || /queryForm/i.test(renderType)) {\n        return \"form\";\n      }\n\n      // Default\n      return 'text';\n\n    } else if (argumentType == \"xpath\" || argumentType == \"function\" || argumentType == \"entity\") {\n      return argumentType;\n    }\n\n    // Default return text\n    return 'text';\n  },\n  /*\r\n     *   Detects if a render type must be binded to a xpath with related entity\r\n     */\n  isRelatedEntityRender: function isRelatedEntityRender(renderType) {\n    return [\"combo\", \"list\", \"radio\", \"search\", \"searchCombo\", \"columnCombo\", \"columnSearch\", \"queryMultiSelect\"].includes(renderType) || /^cascadingcombo$/i.test(renderType);\n  },\n\n  buildXpath: function buildXpath(xpath, argumentType, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (argumentType == 'xpath' && !bGridDetected) {\n      return \"self.evalXpath('\" + xpath + \"', '\" + self.detectConditionArgumentType(xpath, \"const\") + \"')\";\n    } else if (argumentType == 'id') {\n      return \"'\" + xpath + \"'\";\n    } else if (argumentType == 'function') {\n      var xpathArgumentType = self.detectConditionArgumentType(xpath, \"const\");\n      return \"self.evalXpath('\" + xpath + \"', '\" + xpathArgumentType + \"')\";\n    } else if (bGridDetected) {\n      return \"self.evalGridXpath(params, '\" + xpath + \"', '\" + argumentType + \"')\";\n    }\n\n    return \"self.evalXpath('\" + xpath + \"', '\" + argumentType + \"')\";\n  },\n  buildArgument: function buildArgument(argument, argumentType, bGridDetected, xpathContext) {\n    var self = this;\n    var number;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    if (argumentType == 'text') {\n      // Text\n      argument = argument == null ? \"\" : argument;\n      argument = typeof argument != 'string' ? argument.toString() : argument;\n      if (argument.indexOf(\"'\") != -1)\n      argument = argument.replaceAll(\"'\", \"\\\\'\");\n\n      // Remove line breaks because they will fail with the eval command\n      if (argument.indexOf(\"\\n\") != -1)\n      argument = argument.replaceAll(\"\\n\", \"\");\n\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'boolean') {\n      // Boolean\n      if (typeof argument == \"string\") {\n        return argument == \"Default\" ? argument : eval(argument.toLowerCase()) == true ? \"true\" : \"false\";\n      } else {\n        return eval(argument) == true ? \"true\" : \"false\";\n      }\n    }\n    if (argumentType == 'number') {\n      // Number\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'money') {\n      // MONEY\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'date') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument);\n      if (!date || date == 0)\n      date = new Date(0);\n\n      // Remove time\n      date.setHours(0, 0, 0, 0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date) + \"').setHours(0,0,0,0)\";\n    }\n    if (argumentType == 'datetime') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument, true);\n      if (!date || date == 0) {\n        date = new Date(0);\n      }\n      //date.setSeconds(0);\n      date.setMilliseconds(0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date, true) + \"', true).getTime()\";\n    }\n    if (argumentType == 'color') {\n      // Color\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'entity') {\n\n      if (bizagi.util.isEmpty(argument)) {\n        return null;\n      }\n      try {\n        argument = _typeof(argument) != \"object\" ? JSON.parse(argument) : argument;\n      } catch (e) {\n        argument = argument || {};\n      }\n\n      if (argument && argument.id) {\n        // Entity value\n        result = argument.id;\n      } else if (argument && Array.isArray(argument.value)) {\n        // Entity multi values\n        var result = argument.value.map(function (value) {\n          return value.id;\n        });\n      } else {\n        // Entity value\n        result = argument.id || argument;\n      }\n\n      return JSON.stringify(result);\n    }\n    if (argumentType == 'xpath') {\n      // Xpath value\n      var xpath = argument.toString();\n\n      bGridDetected = self.searchGridReferenceInXpath(xpath);\n\n      // Process grid xpaths\n      if (bGridDetected) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n\n      if (xpathContext) {\n        xpath = xpathContext + \".\" + xpath;\n      }\n\n      return self.buildXpath(xpath, argumentType, bGridDetected);\n    }\n    if (argumentType == 'json') {\n      // Xpath value\n      return JSON.encode(argument);\n    }\n    if (argumentType == 'function') {\n      if (argument == \"BAToday\") {\n        return \"self.getCurrentDate()\";\n      }\n      if (argument == \"BANow\") {\n        return \"self.getCurrentDate(true)\";\n      }\n\n      // If there is another function type code throw exception\n      throw \"There is no implementation for function \" + argument;\n    }\n\n    if (argumentType == undefined) {\n      return null;\n    }\n\n    // If there is another argument type code throw exception\n    throw \"There is no implementation for argument type \" + argumentType;\n  },\n  /*\r\n     *   Evals if an xpath is editable\r\n     */\n  isEditable: function isEditable(xpath) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    return render.properties.editable;\n  },\n\n  isVisible: function isVisible(xpath) {\n    var self = this;\n\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    if (render.properties.visible) {\n      return self.isParentVisible(render.parent);\n    } else {\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n      if (/^hidden$/i.test(renderType)) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  isParentVisible: function isParentVisible(render) {\n    var self = this;\n    if (render.parent) {\n      if (render.properties.visible) {\n        return self.isParentVisible(render.parent);\n      } else {\n        return false;\n      }\n    } else {\n      return render.properties.visible;\n    }\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalGridXpath: function evalGridXpath(params, xpath, argumentType) {\n    var self = this;\n\n    if (params === undefined) {\n      return this.evalXpath(xpath, argumentType);\n    }\n\n    var grid = params.grid;\n\n    if (grid === undefined || grid === null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Grid renders\n    var gridXpath = self.processGridXpath(xpath);\n\n    // Return the value\n    var gridColumn = grid.getColumn(gridXpath.remainingXpath);\n\n    if (!gridColumn) {\n      return false;\n      //throw \"There is no a valid render for xpath \" + xpath;\n    }\n\n    var cellValue = grid.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n    if (gridColumn.properties.type == \"columnRadio\") {\n      if (cellValue && !bizagi.util.isString(cellValue)) {\n        if (cellValue.length > 0 && cellValue[0].length > 0)\n        cellValue = cellValue[0][0];else\n\n        cellValue = cellValue.id;\n      } else\n      if (!bizagi.util.isString(cellValue))\n      cellValue = 0;\n    }\n\n    if (gridColumn.properties.type == \"columnCombo\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnSearch\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnDate\") {\n      if (cellValue) {\n        cellValue = !gridColumn.properties.showTime ?\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0, 0, 0, 0) :\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n      }\n    }\n    // Parse empty values\n    if (bizagi.util.isEmpty(cellValue)) {\n      // If the render is a boolean return false for actions\n      if (argumentType == \"boolean\") {\n        if (gridColumn.properties.display == \"check\") {\n          return false;\n        } else {\n          return null;\n        }\n      }\n    }\n\n    // Parse boolean and non-empty date types\n    if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n      return eval(self.buildArgument(cellValue, argumentType));\n    }\n\n    return cellValue;\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalXpath: function evalXpath(xpath, argumentType) {\n    var self = this,i,renderToEval;\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length === 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    i = 0;\n    while (i < rendersToEval.length) {\n      renderToEval = rendersToEval[i++];\n      var bIsGrid = renderToEval.properties.type == 'grid';\n      if (!bIsGrid) {\n        // Normal renders\n        var value = renderToEval.getValue();\n        var renderType = bizagi.util.normalizeType(renderToEval.properties.type || \"\");\n\n        if (argumentType === undefined || argumentType === \"undefined\") {\n          return value;\n        }\n\n        // If the render is a combo and the value is null return 0 for validations and actions\n        if ([\"combo\", \"list\", \"search\", \"radio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n          if (bizagi.util.isEmpty(value) || value.id == \"\") {\n            value = 0;\n          }\n        }\n\n        // If the render is a queryMultiSelect and the value is empty array of objects\n        // return mapValue for validations and actions\n        if (/^queryMultiSelect$/i.test(renderType)) {\n          return renderToEval && renderToEval.mapValue(value);\n        }\n\n        if (renderType === \"comboSelected\") {\n          return typeof value === \"string\" ? JSON.parse(value).value : value;\n        }\n\n        if (bizagi.util.isEmpty(value)) {\n          // If the render is a check and the value is null return false for validations and actions\n          if (renderType === \"boolean\" && renderToEval.properties.display === \"check\") {\n            return false;\n          }\n\n          return value;\n        }\n\n        if (argumentType === \"xpath\") {\n          return eval(self.buildArgument(xpath, argumentType));\n        } else {\n          return eval(self.buildArgument(value, argumentType));\n        }\n      } else {\n\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n\n        // Return the value\n        var gridColumn = renderToEval.getColumn(gridXpath.remainingXpath);\n\n        if (!gridColumn) {\n          continue;\n        }\n\n        var cellValue = renderToEval.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n        if (gridColumn.properties.type == \"columnRadio\") {\n          if (cellValue && !bizagi.util.isString(cellValue)) {\n            if (cellValue.length > 0 && cellValue[0].length > 0)\n            cellValue = cellValue[0][0];else\n\n            cellValue = cellValue.id;\n          } else\n          if (!bizagi.util.isString(cellValue))\n          cellValue = 0;\n        }\n\n        if (gridColumn.properties.type == \"columnCombo\" || gridColumn.properties.type == \"columnSearch\" || gridColumn.properties.type == \"columnList\") {\n          if (cellValue && cellValue.id)\n          cellValue = cellValue.id;else\n          if (typeof cellValue != \"number\" && typeof cellValue != \"string\")\n          cellValue = 0;\n        }\n\n        // Parse empty values\n        if (bizagi.util.isEmpty(cellValue)) {\n          // If the render is a boolean return false for actions\n          if (argumentType == \"boolean\") {\n            if (gridColumn.properties.display == \"check\") {\n              return false;\n            } else {\n              return null;\n            }\n          }\n        }\n\n        // Parse boolean and non-empty date types\n        if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n          return eval(self.buildArgument(cellValue, argumentType));\n        }\n\n        if (typeof gridColumn != \"undefined\" && typeof gridColumn.properties != \"undefined\" && typeof gridColumn.properties.type != \"undefined\" && gridColumn.properties.type == \"columnDate\") {\n          //cellValue = (cellValue && !gridColumn.properties.showTime)?bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0,0,0,0):bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n          cellValue = self.getColumnDateCorrectFunction(cellValue, gridColumn.properties.showTime)(cellValue);\n        }\n\n        return cellValue;\n      }\n      throw \"There is no a valid render for xpath \" + xpath;\n    }\n  },\n  /*\r\n     *   Check if the upload render has any files uploaded\r\n     */\n  isFileUploaded: function isFileUploaded(xpath) {\n    var self = this;\n\n    var value = self.evalXpath(xpath);\n\n    if (value && value.length) {\n      if (value.length > 0)\n      return true;\n    }\n\n    return false;\n  },\n  /*\r\n     *   Check if a render has a valid email value\r\n     */\n  isValidEmail: function isValidEmail(value) {\n    var regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/gi;\n    if (value && value.match(new RegExp(regex))) {\n      return true;\n    }\n    return false;\n  },\n  /**\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isButtonPressed: function isButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var render = this.getRenderById(control);\n    if (typeof render === \"undefined\" || render === null || !/^button$/i.test(bizagi.util.normalizeType(render.properties.type))) {\n      return false;\n    }\n\n    return pressed;\n  },\n  /*\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isGridButtonPressed: function isGridButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var arrGridXpath = this.processGridXpath(control);\n    var gridXpath = arrGridXpath.gridXpath;\n    var render = this.getRender(gridXpath);\n    var column = arrGridXpath.remainingXpath || \"\";\n\n\n    if (pressed && render && render.columns) {\n      $.each(render.columns, function (key, value) {\n        if ((value.properties.xpath === column || value.properties.id === column) && value.properties.type === \"columnButton\") {\n          pressed = true;\n        }\n      });\n    }\n    return pressed;\n  },\n\n  /**\r\n     * Check if a control has been changed\r\n     */\n  isChanged: function isChanged(value, _isChanged) {\n    if (value === undefined || value === null) {\n      return false;\n    }\n\n    return _isChanged;\n  },\n\n  /**\r\n      * Check if a control has been changed\r\n      */\n  isControlChanged: function isControlChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var renderToEval = this.getRender(control);\n      var controlChanged = params.render;\n      if (renderToEval == null || controlChanged == null) return false;\n\n      return controlChanged.properties.id === renderToEval.properties.id &&\n      controlChanged.properties.xpath === renderToEval.properties.xpath;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Check if a column has been changed\r\n      */\n  isGridColumnChanged: function isGridColumnChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var arrGridXpath = this.processGridXpath(control);\n      var gridXpath = arrGridXpath.gridXpath;\n      var gridToEval = this.getRender(gridXpath);\n\n      if (gridToEval == null) return false;\n\n      var xpathColumn = arrGridXpath.remainingXpath || \"\";\n      var columnChanged = params.render.getColumn(params.column);\n      var columnToEval = gridToEval.getColumn(xpathColumn);\n\n      if (columnToEval && columnChanged) {\n        return columnToEval.properties.xpath === columnChanged.properties.xpath &&\n        columnToEval.properties.id === columnChanged.properties.id;\n      }\n\n      return false;\n    }\n  },\n\n  /**\r\n     * Check if a control has the item\r\n     */\n  includes: function includes(value, argument) {\n    if (typeof value == \"undefined\" || value === null) {\n      return false;\n    }\n    if (typeof argument == \"undefined\" || argument === null) {\n      return false;\n    }\n    var inArray = $.grep(value, function (e) {\n      return e.id == argument;\n    });\n    if (inArray.length > 0) {\n      return true;\n    }\n    return false;\n  },\n\n  /**\r\n     *  Check if the grid has been deleted a row\r\n     */\n  onDeletedGridRow: function onDeletedGridRow(xpath, rowDeleted) {\n    var self = this;\n    var grid = self.getRender(xpath) || {};\n\n    if (grid && rowDeleted) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *   Wrapper for get renders, return null if no renders have been found\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this,\n    form = self.form,\n    regex = /id=([\\w-]+)/gi;\n    var renders = null;\n\n    // Check if the xpath is an id\n    var idMatches = regex.exec(xpath);\n    if (idMatches && idMatches.length > 1) {\n      var render = self.getRenderById(idMatches[1]);\n      if (render) {\n        if (render.length == 0)\n        return null;else\n        {\n          renders = [];\n          renders.push(render);\n          return renders;\n        }\n      } else {\n        return null;\n      }\n\n    }\n\n    renders = form.getRenders(xpath);\n    if (renders.length == 0)\n    return null;\n    return renders;\n  },\n  /*\r\n     *   Wrapper for get only one editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this,\n    form = self.form;\n\n    return form.getRender(xpath);\n  },\n  /*\r\n     *   Wrapper to get a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this,\n    form = self.form;\n\n    return form.getRenderById(id);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showRenderNotFoundError: function showRenderNotFoundError(xpath) {\n    bizagi.debug(\"Cannot find render in DOM: \" + xpath);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showContainerNotFoundError: function showContainerNotFoundError(containerId) {\n    bizagi.debug(\"Cannot find container in DOM: \" + containerId);\n  },\n  /*\r\n     *   Returns the current date\r\n     */\n  getCurrentDate: function getCurrentDate(includeTime) {\n    var currentDate = new Date();\n    var invariantDate = bizagi.util.dateFormatter.getDateFromInvariant(bizagi.util.dateFormatter.formatInvariant(currentDate));\n    if (!includeTime && invariantDate && !isNaN(Date.parse(invariantDate)) && !$.isNumeric(invariantDate)) {\n      invariantDate.setHours(0, 0, 0, 0);\n    }\n    return invariantDate.getTime();\n\n  },\n  /*\r\n     *   Return the grid xpath parts\r\n     */\n  processGridXpath: function processGridXpath(xpath) {\n    // Eval using regular expressions\n    var regex = new RegExp(/([\\w\\.-]*)\\[(\\d*)\\]\\.([\\w\\.|\\w-\\.]*)/g);\n    var matches = regex.exec(xpath);\n    var index, remainingXpath, gridXpath;\n    if (matches) {\n      gridXpath = matches[1];\n      index = matches[2];\n      remainingXpath = matches[3];\n    } else {\n      index = \"\";\n      remainingXpath = \"\";\n    }\n\n    return { xpath: xpath, index: index, remainingXpath: remainingXpath, gridXpath: gridXpath };\n  },\n  /*\r\n     *   Check if an action/validation contains reference to a grid\r\n     */\n  searchForGridReference: function searchForGridReference(conditions, commands) {\n    var self = this;\n    var i;\n    // Check in conditions\n    if (conditions) {\n      return self.searchGridReferenceInCondition(conditions);\n    }\n\n    // Check in commands\n    if (commands) {\n      for (i in commands) {\n        var command = commands[i];\n        return self.searchForGridReferenceInCommand(command);\n      }\n    }\n\n    return null;\n  },\n  /*\r\n      *   Check if an action/validation contains reference to a grid\r\n      */\n  searchForGridReferenceInCommand: function searchForGridReferenceInCommand(command) {\n    if (command.xpath && command.xpath.indexOf(\"[]\") > 0) {\n      return command.xpath.substring(0, command.xpath.indexOf(\"[]\"));\n    }\n\n    // Check in argument if argumentType is xpath\n    if (command.argumentType == 'xpath') {\n      if (command.argument.indexOf(\"[]\") > 0) {\n        return command.argument.substring(0, command.argument.indexOf(\"[]\"));\n      }\n    }\n  },\n\n  /*\r\n     *   Check if a condition contains reference to a grid\r\n     */\n  searchGridReferenceInCondition: function searchGridReferenceInCondition(condition) {\n    var self = this;\n    var bGridReferenceFound;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      for (i in condition.expressions) {\n        if (condition.expressions.hasOwnProperty(i)) {\n          bGridReferenceFound = self.searchGridReferenceInCondition(condition.expressions[i]);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n        }\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridReferenceInCondition(condition.simple);\n\n    } else if (condition.complex) {\n      return self.searchGridReferenceInCondition(condition.complex);\n    } else {\n      // Looking for grid reference within xpath\n      if (condition.xpath || condition.renderId) {\n        // Check in condition.xpath\n        bGridReferenceFound = self.searchGridReferenceInXpath(condition.xpath) || self.searchGridReferenceInXpath(condition.renderId);\n        if (bGridReferenceFound)\n        return bGridReferenceFound;\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType == 'xpath') {\n          bGridReferenceFound = self.searchGridReferenceInXpath(condition.argument);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n\n        }\n\n      }\n    }\n\n    return null;\n  },\n  /*\r\n     *   Check if a xpath contains a grid reference\r\n     */\n  searchGridReferenceInXpath: function searchGridReferenceInXpath(xpath) {\n    // Check in condition.xpath\n    if (xpath && xpath.indexOf(\"[]\") > 0) {\n      return xpath.substring(0, xpath.indexOf(\"[]\"));\n    }\n    return null;\n  },\n  getGridControl: function getGridControl(xpath, surrogateKey) {\n    var self = this;\n    var remainingXpath = self.processGridXpath(xpath).remainingXpath;\n    var grid = self.getRender(xpath);\n    var column = grid.getControlCell(surrogateKey, remainingXpath);\n\n    return column;\n\n  },\n\n  //#region No side effects functions\n  getColumnDateCorrectFunction: function getColumnDateCorrectFunction(value, showTime) {\n    var self = this;\n    if (!value) return self.getColumnDateValueForNoValue;\n    if (value && showTime) return self.getColumnDateValueDateAndTime;\n    if (value && !showTime) return self.getColumnDateValueOnlyDate;\n    return value;\n  },\n\n  getColumnDateValueForNoValue: function getColumnDateValueForNoValue(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value);\n  },\n\n  getColumnDateValueOnlyDate: function getColumnDateValueOnlyDate(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value).setHours(0, 0, 0, 0);\n  },\n\n  getColumnDateValueDateAndTime: function getColumnDateValueDateAndTime(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value, true).getTime();\n  }\n\n  //#endregion side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Rendering Validation controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will parse and execute all the validations defined for the form\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.action\", {}, {\n  /* \r\n                                                                                        *   Constructor\r\n                                                                                        */\n  init: function init(form, actions) {\n    var self = this;\n\n    // Call base\n    this._super(form);\n\n    // Set a new hash containing all the dependencies subscribing the events\n    self.globalDependencies = {};\n    self.initialCallFunctions = {};\n    self.initialCallFunctionsDeferred = new $.Deferred();\n\n    // Build actions\n    if (actions)\n    self.buildActions(actions);\n\n    // Keep references\n    self.actions = actions;\n    self.internalSubmitActions = {};\n\n    // Set initial timer to trigger initial functions using a setTimeout, and distributing them in differente timespans\n    self.initialCallTimeout = 25;\n    self.initialCallIncrements = 25;\n    self.actionsHistory = {};\n    self.period = 50;\n  },\n  /*\r\n     *   Adds an internal submit action to be executed with all the given rules\r\n     */\n  processInternalSubmitAction: function processInternalSubmitAction(xpath, action) {\n    var self = this;\n\n    // if the action is registered, don't add it again\n    // only one internal submit action is allowed per control\n    if (self.internalSubmitActions[xpath])\n    return;\n\n    // Add to hash and build it\n    self.internalSubmitActions[xpath] = action;\n    self.buildAction(action, true);\n  },\n\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var self = this;\n    var result = false;\n\n    if (self.form.properties.typeForm === \"SummaryForm\" || self.form.properties.typeForm === \"GlobalForm\") result = true;\n    return result;\n  },\n\n  evalClientAction: function evalClientAction(action) {\n    var self = this,i = 0,serverCommand = false,command;\n    var commands = [].concat(action.commands, action.elseCommands);\n    var length = commands.length;\n\n    for (; i < length; i++) {\n      command = commands[i];\n      if (!self.isClientAction(command)) {\n        serverCommand = true;\n        break;\n      }\n    }\n\n    if (serverCommand) {\n      action.enabled = false;\n    }\n  },\n\n  /* Process all given  actions*/\n  buildActions: function buildActions(actions, dontExecute) {\n    var self = this,i,len;\n    var hashes = {};\n\n    // Added in BA56628, it is removed because it affects the actions in global, summary, and record view forms\n    // if (self.form.properties.displayAsReadOnly && self.isSummaryOrGlobalForm())\n    //    actions = [];\n\n    var executeOnlyClientActions = self.isSummaryOrGlobalForm();\n\n    for (i = 0, len = actions.length; i < len; i++) {\n      // If action is not \"valid\" we can omit that instruction\n      try {\n        var action = actions[i];\n        var hash = bizagi.util.md5(JSON.stringify(action.conditions));\n        var hashC = bizagi.util.md5(JSON.stringify(action.commands));\n        if (hashes[hash]) {\n          if (hashes[hash].indexOf(hashC) === -1) {\n            // si la condicion es igual y los comandos diferentes\n            executeOnlyClientActions && self.evalClientAction(action);\n            self.buildAction(action, dontExecute);\n            hashes[hash].push(hashC);\n          }\n        } else {\n          executeOnlyClientActions && self.evalClientAction(action);\n          self.buildAction(action, dontExecute);\n          hashes[hash] = [hashC];\n        }\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, actions[i]);\n        }\n      }\n    }\n  },\n  /*\r\n     *   Remove all current handlers\r\n     */\n  unbindActions: function unbindActions() {\n    var self = this;\n\n    // Remove all previous handlers\n    $.each(self.globalDependencies, function (i, render) {\n      render.unbind(\"renderchange.action\");\n    });\n\n    self.globalDependencies = {};\n\n    // Reset timers and collections\n    $.each(self.initialCallFunctions, function (i, handle) {\n      clearTimeout(handle);\n    });\n    self.initialCallFunctions = {};\n  },\n  /* \r\n     *   Re-execute actions, cleaning the handlers first\r\n     */\n  refreshActions: function refreshActions(newActions) {\n    var self = this;\n\n    self.initialCallTimeout = 25;\n    self.initialCallFunctions = {};\n\n    newActions = newActions || [];\n\n    // Build the actions again\n    self.actions = self.actions.concat(newActions);\n    self.buildActions(self.actions, true);\n\n    // Build internal actions again\n    $.each(self.internalSubmitActions, function (_, action) {\n      try {\n        self.buildAction(action, false);\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, action);\n        }\n      }\n    });\n  },\n  /* Process a single action*/\n  buildAction: function buildAction(action, dontExecute) {\n    var self = this;\n    var form = self.form;\n    var dependencies = [];\n    var dependenciesId = [];\n    var innerDependencies = [];\n\n    var isEnabled = action.enabled != undefined ? action.enabled : true;\n\n    if (!isEnabled) return;\n\n    // If the condition operator is true, we gotta dig in the actions to check if it modifies a grid\n    // To include an auto-dependency, so each time the grid is changed that condition will be executed\n    if (action.conditions && action.conditions.operator == \"true\") {\n      $.each(action.commands, function (_, command) {\n        var gridReference = self.searchGridReferenceInXpath(command.xpath);\n        if (gridReference) {\n          if (!innerDependencies.includes(gridReference))\n          innerDependencies.push(gridReference);\n        }\n      });\n    }\n\n    function isValidDependency(type) {\n      var notValid = [\"groupedgrid\", \"collectionnavigator\"];\n\n      return notValid.indexOf(type) === -1;\n    }\n\n    function addDependency(render) {\n      if (isValidDependency(render.properties.type)) {\n        dependenciesId.push(render.properties.id);\n        dependencies.push(render);\n      }\n    }\n\n\n    // Build anonymous function\n    var fn = self.buildFunction(action.conditions, action.commands, action.elseCommands, innerDependencies);\n\n    // Find dependencies to attach triggers\n    if (innerDependencies) {\n      for (var i = 0; i < innerDependencies.length; i++) {\n        if (typeof innerDependencies[i] != \"undefined\") {\n          var renders = form.getRenders(innerDependencies[i]);\n          if (renders.length === 0) {\n            var renderById = form.getRenderById(innerDependencies[i]);\n            renders = renderById ? [renderById] : null;\n          }\n\n          if (renders) {\n            $.each(renders, function (_, render) {\n              if ($.inArray(render.properties.id, dependenciesId) < 0 && render.properties.editable) {\n                addDependency(render);\n              }\n            });\n            if (dependencies.length === 0) {\n              addDependency(renders[0]);\n            }\n          }\n        }\n      }\n    }\n\n    // Attach handlers\n    $.each(dependencies, function (_, render) {\n      render.bind(\"renderchange.action\", function (ev, args) {\n        args = args || {};\n\n        // Default changed argument to true\n        args.changed = args.changed !== undefined ? args.changed : true;\n\n        // If a grid action has been performed, try to filter it by column, to avoid execute all grid actions each time                \n        if (args.column) {\n          for (var j = 0; j < action.gridColumns.length; j++) {\n            if (args.column == action.gridColumns[j]) {\n              // Call function\n              fn(self, args);\n              return;\n            }\n          }\n        } else {\n          // Call function\n          fn(self, args);\n        }\n      });\n\n      // Add to global dependencies hash\n      self.globalDependencies[render.properties.id] = render;\n\n      // If render is a grid ... trigger function at this point\n      if (render.properties.type === 'grid') {\n        dontExecute = true;\n\n        // Search column dependencies\n        action.gridColumns = [];\n        self.searchGridColumns(action.conditions, action.gridColumns);\n      }\n    });\n\n    // Check if it has to execute\n    if (dontExecute)\n    return;\n\n    // Execute the action because it must execute when the page loads with pre-defined value\n    // Create an async function to trigger it later\n    var asyncFn = function asyncFn(self) {\n\n      var guid = Math.guid();\n      // Create the timeout\n      var handle = setTimeout(function () {\n        try {\n          // TODO: Define render to set parameter to \"fn\" function\n          fn(self);\n          delete self.initialCallFunctions[guid];\n        } catch (e) {\n        } finally\n        {\n          clearTimeout(handle);\n        }\n      }, self.initialCallTimeout);\n\n      // Save a reference\n      self.initialCallFunctions[guid] = handle;\n      self.initialCallTimeout += self.initialCallIncrements;\n    };\n\n    // Run it\n    asyncFn(self);\n  },\n  /*\r\n     * Creates the function to execute based on the action metadata\r\n     */\n  buildFunction: function buildFunction(conditions, commands, elseCommands, innerDependencies) {\n    var self = this;\n\n    var gridReference = self.searchForGridReference(conditions, commands);\n    var bGridDetected = gridReference != null ? gridReference : false;\n    var sJsCondition = \"\";\n    var sJsAction = \"\";\n    var sStatement;\n    var sJsElseAction = \"\";\n    var bAutomaticRestore = elseCommands ? false : true;\n    var bCondition = conditions ? true : false;\n    var i;\n\n    // Build Condition\n    if (bCondition) {\n      sJsCondition += self.buildConditions(conditions, bGridDetected, false, innerDependencies);\n    }\n\n    // Build and execute actions\n    for (i = 0; i < commands.length; i++) {\n      // Parse command\n      var queueAction = self.isServerCommand(commands[i]) ? \"addParallel\" : \"add\";\n      var command = self.buildCommand(commands[i], bGridDetected);\n\n      // Check if command ending with semicolon and remove it\n      command = command.indexOf(\";\") >= 1 ? command.replace(\";\", \"\") : command;\n      sJsAction += \"actionQueue.\" + queueAction + \"(function(){return \" + command + \" ;}); \\r\\n\";\n\n      if (bAutomaticRestore) {\n        sJsElseAction += self.buildRestoreCommand(commands[i], bGridDetected);\n      }\n    }\n\n    // Build non-automatic else commands\n    if (!bAutomaticRestore) {\n      sJsElseAction += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n      sJsElseAction += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n      for (i = 0; i < elseCommands.length; i++) {\n        var queueAction = self.isServerCommand(elseCommands[i]) ? \"addParallel\" : \"add\";\n        var elseCommand = self.buildCommand(elseCommands[i], bGridDetected);\n        // Check if command ending with semicolon and remove it\n        elseCommand = elseCommand.indexOf(\";\") >= 1 ? elseCommand.replace(\";\", \"\") : elseCommand;\n        sJsElseAction += \"actionQueue.\" + queueAction + \"(function(){return \" + elseCommand + \" ;}); \\r\\n\";\n      }\n      sJsElseAction += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n      sJsElseAction += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n      sJsElseAction += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n    }\n\n    // Build final function\n    //sStatement = \"var baTmpFn = function(self, i, column){ \\r\\n\";\n    sStatement = \"var baTmpFn = function(self, params){ \\r\\n\";\n    sStatement += \"params = params || {};\\r\\n\";\n    if (bGridDetected) {\n      sStatement += \"var i = params.key;\\r\\n\";\n      sStatement += \"var column = params.column;\\r\\n\";\n    }\n    if (bCondition) {\n      sStatement += \"if (\" + sJsCondition + \"){ \\r\\n\";\n    }\n\n    // Creates defferreds\n    sStatement += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n    sStatement += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n    sStatement += sJsAction;\n    sStatement += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n    sStatement += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n    sStatement += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n\n    if (bCondition) {\n      sStatement += \"\\r\\n } \";\n      if (sJsElseAction.length > 0) {\n        sStatement += \"else { \\r\\n\" + sJsElseAction + \" }\\r\\n\";\n      }\n    }\n\n    sStatement += \"};\\r\\n\";\n\n\n    if (!bGridDetected) {\n      sStatement += \"baTmpFn\";\n    } else {\n      var sGridStatement = \"var baGridTmpFn = function(self, args){ \\r\\n\";\n      sGridStatement += \"args = args || {};\\r\\n\";\n      sGridStatement += \"\\t var grid = args.render || self.form.getRender('\" + gridReference + \"') || []; \\r\\n\";\n      sGridStatement += \"\\t grid = grid.grid ? grid : (self.form.getRender('\" + gridReference + \"') || []); \\r\\n\";\n      sGridStatement += \"\\t args.grid = grid; \\r\\n\";\n      sGridStatement += \"if(args.surrogateKey === undefined){\\r\\n\";\n      sGridStatement += \"\\t var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"\\t $.each(data, function(i, index) {\\r\\n\";\n      sGridStatement += \"\\t\\t args.key = index; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args);\\r\\n\";\n      sGridStatement += \"\\t });\\r\\n\";\n      sGridStatement += \"} else {\\r\\n\";\n      sGridStatement += \"\\t args.key = args.surrogateKey; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args ); \\r\\n\";\n      sGridStatement += \"}\\r\\n\";\n      sGridStatement += \"};\\r\\n\";\n      sStatement += sGridStatement;\n      sStatement += \"baGridTmpFn\";\n    }\n\n    // Return interpreted function\n    return eval(sStatement);\n  },\n\n  /*\r\n     *   This method checks if a command must be performed by the client, or by the server\r\n     */\n  isServerCommand: function isServerCommand(command) {\n    var commandType = command.command;\n\n    return [\"refresh\", \"submit-data\", \"execute-rule\", \"execute-interface\", \"execute-sap\", \"execute-connector\", \"execute-excel-bot\", \"execute-pipeline\"].includes(commandType);\n  },\n\n  isClientAction: function isClientAction(command) {\n    var commandType = command.command;\n\n    return [\"background-color\", \"forecolor\", \"visible\", \"required\", \"collapse\", \"set-active\"].includes(commandType);\n  },\n\n  isRecentAction: function isRecentAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    if (self.actionsHistory[tag] != null) {\n      return true;\n    }\n    $.when(self.runAction(prefix, command)).done(function () {\n      delete self.actionsHistory[tag];\n      bizagi.log(\"resolve \" + tag);\n    });\n    return false;\n  },\n\n  runAction: function runAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    self.actionsHistory[tag] = new $.Deferred();\n    var timeOutActionsHistory = setTimeout(self.actionsHistory[tag].resolve, self.period);\n    self.actionsHistory[tag].done(clearTimeout.bind(null, timeOutActionsHistory));\n    return self.actionsHistory[tag].promise();\n  },\n  /*\r\n     *   Builds the action JS\r\n     */\n  buildCommand: function buildCommand(command, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    var gridReference = bGridDetected;\n\n    // Parse argument\n    var commandType = command.command;\n    var detectedArgumentType = self.detectCommandArgumentType(command.argumentType, commandType);\n    var argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected, command.xpathContext);\n    var xpath = command.xpath;\n\n    var commandGridDetected = self.searchForGridReferenceInCommand(command);\n    if (commandGridDetected && command.containerId) {\n      var gridXpathInfo = self.processGridXpath(xpath);\n      xpath = gridXpathInfo.gridXpath + \".\" + command.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + command.renderId;\n    } else\n    if (xpath && command.renderId) {\n      xpath = xpath + \".\" + command.renderId;\n    }\n    // If a render id is given, we use it with priority over only xpath\n    else if (command.renderId) {\n        xpath = \"id=\" + command.renderId + \"\";\n      }\n\n    // Process grid xpaths\n    if (bGridDetected && xpath) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (command.xpath && command.xpath.length > 0 || command.renderId && command.renderId.length > 0) {\n      // Build render command\n      switch (commandType) {\n        case 'background-color':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonBackground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderBackground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'forecolor':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonForeground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderForeground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'visible':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonVisibility('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderVisibility('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'readonly':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonEditability('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderEditability('\" + xpath + \"', '\" + argument + \"');\";\n          }\n          break;\n        case 'required':\n          return \"self.changeRenderRequired('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-value':\n          // Check specific argument type\n          if (bGridDetected && command.argumentType === \"xpath\" && !!command.xpathContext) {\n            // When we are going to evaluate a xpath is necessary add a xpathcontext if it exist\n            if (typeof command.xpathContext !== \"undefined\") {\n              command.argument = command.xpathContext + \".\" + command.argument;\n            }\n            argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected);\n          }\n\n          return \"self.changeRenderValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-min':\n          return \"self.changeRenderMinValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-max':\n          return \"self.changeRenderMaxValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'calculate':\n          return \"self.executeCalculatedField('\" + xpath + \"');\";\n          break;\n        case 'submit-value':\n          return \"self.submitRender('\" + xpath + \"', '\" + argument + \"');\";\n          break;\n        case 'clean-data':\n          return \"self.cleanRenderData('\" + xpath + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          commandGridDetected = self.searchForGridReferenceInCommand(command);\n\n          if (commandGridDetected) {\n            return \"self.refreshGridCell('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          } else {\n            return \"self.refreshControl('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"','\" + commandType + \"');\";\n          }\n          break;\n        case 'trigger-click':\n          return \"self.triggerClick('\" + xpath + \"');\";\n          break;}\n\n\n    } else {\n      // Build container command\n      switch (commandType) {\n        case 'background-color':\n          return \"self.changeContainerBackground('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'visible':\n          return \"self.changeContainerVisibility('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'collapse':\n          return \"self.toogleContainer('\" + command.container + \"', \" + !bizagi.util.parseBoolean(argument) + \");\";\n          break;\n        case 'set-active':\n          return \"self.changeActiveItem('\" + command.container + \"');\";\n          break;\n        case 'readonly':\n          return \"self.changeContainerEditability('\" + command.container + \"', '\" + argument + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          // Set prepare parameter to multiaction purposes \n          return \"self.refreshContainer('\" + command.container + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          break;}\n\n    }\n\n    // Global  actions without specific target\n    if (commandType === 'submit-data') {\n      return \"self.submitFormData();\";\n    }\n\n    if (commandType === 'execute-rule') {\n      var ruleObj = command.argument || {};\n      var guidRule = \"\";\n      try {\n        guidRule = JSON.parse(ruleObj).guid;\n      } catch (e) {\n      }\n\n      var xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        var xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeRule('\" + guidRule + \"', printf('\" + xpathContextRow + \"',i) ,'\" + commandType + \"');\";\n      } else {\n        return \"self.executeRule('\" + guidRule + \"','\" + xpathContext + \"','\" + commandType + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-interface') {\n      var interfaceObj = command.argument || {};\n      var guidInterface = \"\";\n\n      try {\n        guidInterface = JSON.parse(interfaceObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeInterface('\" + guidInterface + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeInterface('\" + guidInterface + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-sap') {\n      var connectorObj = command.argument || {};\n      var guidsap = \"\";\n\n      try {\n        guidsap = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeSAPConnector('\" + guidsap + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeSAPConnector('\" + guidsap + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-connector' || commandType === 'execute-excel-bot') {\n      var connectorObj = command.argument || {};\n      var guidConnector = \"\";\n\n      try {\n        guidConnector = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeConnector('\" + guidConnector + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeConnector('\" + guidConnector + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    // Command to execute Pipeline\n    if (commandType === 'execute-pipeline') {\n      var pipelineObj = command.argument || {};\n      var guidPipeline = \"\";\n\n      try {\n        guidPipeline = JSON.parse(pipelineObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executePipeline('\" + guidPipeline + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executePipeline('\" + guidPipeline + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return \"\";\n  },\n  /* \r\n     *   Builds the JS command to restore automatically a command when condition is not met\r\n     */\n  buildRestoreCommand: function buildRestoreCommand(command, bGridDetected) {\n    var xpath = command.xpath;\n    var commandType = command.command;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // If a render id is given, we use it with priority over only xpath\n    if (command.renderId) {\n      xpath = \"id=\" + command.renderId + \"\";\n    }\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    // Build restore action\n    if (xpath && xpath.length > 0) {\n      return \"self.restoreRender('\" + xpath + \"', '\" + commandType + \"');\";\n    } else {\n      return \"self.restoreContainer('\" + command.container + \"', '\" + commandType + \"');\";\n    }\n  },\n  /* \r\n     *   Detect the command argument type based on the command type\r\n     */\n  detectCommandArgumentType: function detectCommandArgumentType(argumentType, commandType) {\n    if (argumentType === undefined) {\n      return argumentType;\n\n    } else if (argumentType == \"const\") {\n\n      if (commandType == 'background-color')\n      return 'color';\n      if (commandType == 'forecolor')\n      return 'color';\n      if (commandType == 'visible')\n      return 'boolean';\n      if (commandType == 'readonly')\n      return 'boolean';\n      if (commandType == 'required')\n      return 'boolean';\n      if (commandType == 'set-value')\n      return 'text';\n      if (commandType == 'collapse')\n      return 'boolean';\n      if (commandType == 'set-active')\n      return 'number';\n      if (commandType == 'set-min')\n      return 'text';\n      if (commandType == 'set-max')\n      return 'text';\n      if (commandType == 'calculate')\n      return undefined;\n      if (commandType == 'refresh')\n      return undefined;\n      if (commandType == 'submit-value')\n      return 'json';\n\n    } else if (argumentType === \"xpath\" || argumentType === \"entity\" || argumentType === \"function\") {\n      return argumentType;\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return null;\n  },\n  /* \r\n     *   Builds the JS command to restore a render when condition is not met\r\n     */\n  restoreRender: function restoreRender(xpath, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var properties = render.originalProperties;\n      var textFormat = properties.textFormat || {};\n      if (commandType == 'background-color')\n      self.changeRenderBackground(xpath, textFormat.background || '');\n      if (commandType == 'forecolor')\n      self.changeRenderForeground(xpath, textFormat.color || 'none');\n      if (commandType == 'visible')\n      self.changeRenderVisibility(xpath, properties.visible != undefined ? properties.visible : true);\n      if (commandType == 'readonly')\n      self.changeRenderEditability(xpath, properties.editable != undefined ? properties.editable : true);\n      if (commandType == 'required')\n      self.changeRenderRequired(xpath, properties.required != undefined ? properties.required : false);\n      // NOte: Command 6 does not have restoration\n    });\n  },\n  /* \r\n     *   Builds the JS command to restore a container when condition is not met\r\n     */\n  restoreContainer: function restoreContainer(containerId, commandType) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(xpath);\n      }\n      return;\n    }\n\n    var properties = container.originalProperties;\n    if (commandType == 'background-color')\n    self.changeContainerBackground(containerId, properties.backgroundColor || 'none');\n    if (commandType == 'visible')\n    self.changeContainerVisibility(containerId, properties.visible != undefined ? properties.visible : true);\n    if (commandType == 'collapse')\n    self.toogleContainer(containerId, true);\n    // NOte: Command 8 does not have restoration\n    if (commandType == 'readonly')\n    self.changeContainerEditability(containerId, properties.editable != undefined ? properties.editable : true);\n  },\n  /* \r\n     *   Sets a new color for the background of the render\r\n     *   Applies also to grid cells!\r\n     */\n  changeRenderBackground: function changeRenderBackground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"backgroundColor\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeBackgroundColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellBackgroundColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellBackgroundColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n\n    });\n  },\n  /*\r\n      *   Sets a new color for the background of the button\r\n      *   Applies also to grid cells!\r\n      */\n  changeButtonBackground: function changeButtonBackground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n\n    element.css(\"background-image\", \"none\");\n    element.addClass(\"ui-fast-transition\");\n\n    if (typeof element[0] !== \"undefined\") {\n      element[0].style.setProperty(\"background-color\", argument, \"important\");\n    }\n  },\n\n  /* \r\n     *   Sets a new color for the foreground of the render\r\n     */\n  changeRenderForeground: function changeRenderForeground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"color\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Sets a new color for the foreground of the render\r\n      */\n  changeButtonForeground: function changeButtonForeground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.css(\"color\", argument, \"!important\");\n  },\n  /* \r\n     *   Changes the visibility of the render\r\n     */\n  changeRenderVisibility: function changeRenderVisibility(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"visibility\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeVisibility(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellVisibility(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnVisibility(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellVisibility(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the visibility of the button\r\n      */\n  changeButtonVisibility: function changeButtonVisibility(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var visible = bizagi.util.parseBoolean(argument) == true;\n\n    if (bizagi.util.isMobileDevice()) {\n      self.changeFormButtonVisibility(guid, visible);\n    } else {\n      var element = self.form.getButton(guid);\n      if (visible) {\n        element.show();\n        element.css(\"display\", \"\");\n      } else {\n        element.hide();\n      }\n    }\n  },\n\n\n  /* \r\n     *   Changes the editability of the render\r\n     */\n  changeRenderEditability: function changeRenderEditability(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"editability\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeEditability(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellEditability(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnEditability(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellEditability(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the editability of the button\r\n      */\n  changeButtonEditability: function changeButtonEditability(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    if (bizagi.util.parseBoolean(argument) == true) {\n      element.removeAttr(\"disabled\");\n    } else {\n      element.attr(\"disabled\", \"disabled\");\n    }\n  },\n  /*\r\n      *  trigger Click button\r\n      */\n  triggerClick: function triggerClick(xpath) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.trigger(\"click\");\n  },\n\n  /* \r\n     *   Changes the required value of the render\r\n     */\n  changeRenderRequired: function changeRenderRequired(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var rendersToEval = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      if (bizagi.util.parseBoolean(render.properties.editable)) {\n        rendersToEval.push(render);\n      }\n    });\n\n    if (rendersToEval.length === 0) {\n      rendersToEval = renders;\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"required\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeRequired(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellRequired(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnRequired(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellRequired(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /* \r\n     *   Changes the render internal value\r\n     */\n  changeRenderValue: function changeRenderValue(xpath, argument) {\n    var self = this;\n\n    if (argument != null && _typeof(argument) === \"object\") {\n      argument = $.extend(argument, { fromAction: true });\n    }\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          if (render.asyncRenderDeferred) {\n            $.when(render.asyncRenderDeferred).done(function () {\n              render.setDisplayValue(argument);\n            });\n          } else {\n            render.setDisplayValue(argument);\n          }\n        });\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellValue(gridXpath.index, gridXpath.remainingXpath, argument);\n\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellValue(indexes[j], gridXpath.remainingXpath, argument);\n            }\n          }\n        });\n      }\n    });\n  },\n  /**\r\n      * Changes the render minimum value\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeRenderMinValue: function changeRenderMinValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"minValue\", argument);\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          var renderType = bizagi.util.normalizeQueryType(render.properties.type);\n          if ([\"number\", \"date\", \"money\"].includes(renderType)) {\n            render.changeMinValue(argument);\n            self.logVisualChange(newVisualChange);\n          }\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        newVisualChange.xpath = gridXpath.remainingXpath;\n\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMinValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMinValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  changeRenderMaxValue: function changeRenderMaxValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"maxValue\", argument);\n\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          render.changeMaxValue(argument);\n          self.logVisualChange(newVisualChange);\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMaxValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMaxValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  executeCalculatedField: function executeCalculatedField(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      $.when(render.ready()).done(function () {\n        render.runFormula();\n      });\n    });\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshControl: function refreshControl(xpath, xpathContext, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n    var queue = new bizagiQueue();\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process matching renders\n    $.each(renders, function (i, render) {\n      queue.add(render.ready().pipe(function () {\n        return render.refreshControl({ xpath: xpath, xpathContext: xpathContext });\n      }));\n    });\n\n    // Return queue deferred\n    return queue.execute();\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshContainer: function refreshContainer(containerId, xpathContext) {\n    var self = this;\n    var container = self.form.getContainer(containerId);\n\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(containerId);\n      }\n      return;\n    }\n\n    return $.when(container.ready()).\n    pipe(function () {\n      return container.refreshContainer({ xpathContext: xpathContext });\n    });\n  },\n  /**\r\n      * Refresh a cell of grid\r\n      */\n  refreshGridCell: function refreshGridCell(xpath, xpathContext) {\n    var self = this;\n    var queue = new bizagiQueue();\n    var def = new $.Deferred();\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n        return false;\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n        return false;\n      });\n    }\n\n    if (rendersToEval.length === 0) {\n      return;\n    }\n\n    // Check xpathContext of the form (addForm or editForm)\n    if (self.form && self.form.properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? self.form.properties.xpathContext + \".\" + xpathContext : self.form.properties.xpathContext;\n    }\n\n    queue.add(def.promise());\n\n    $.when.apply($, $.map(rendersToEval, function (grid) {\n      grid.ready();\n    })).\n    done(function () {\n      var len = rendersToEval.length;\n      var internalQueue = new bizagiQueue();\n      for (var i = 0; i < len; i++) {\n        var grid = rendersToEval[i];\n\n        var gridXpath = self.processGridXpath(xpath);\n        if (!bizagi.util.isEmpty(gridXpath.index)) {\n          // Process a specific row\n          internalQueue.add(grid.refreshCell({\n            key: gridXpath.index,\n            column: gridXpath.remainingXpath,\n            xpathContext: xpathContext }));\n\n        } else {\n          // Process all rows\n          var indexes = grid.getIndexes();\n          var lenIndex = indexes.length;\n          for (var j = 0; j < lenIndex; j++) {\n            internalQueue.addParallel(grid.refreshCell({\n              key: indexes[j],\n              column: gridXpath.remainingXpath,\n              xpathContext: xpathContext }));\n\n          }\n        }\n      }\n\n      $.when(internalQueue.execute()).\n      done(function () {\n        def.resolve();\n      });\n    });\n\n\n    return queue.execute();\n  },\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitFormData: function submitFormData(params) {\n    var self = this;\n\n    // For the submit action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.submitData(params);\n    });\n  },\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(rule, xpathContext, commandType) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n    var prefix = rule + \".\" + xpathContext;\n    if (self.isRecentAction(prefix, commandType)) {\n      return;\n    } else {\n      // Process the action\n      return $.when(form.ready()).\n      pipe(function () {\n        return form.executeRule({ rule: rule, xpathContext: xpathContext });\n      });\n    }\n  },\n  executeInterface: function executeInterface(interfaceObject, xpathContext) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executeInterface({ \"interface\": interfaceObject, xpathContext: xpathContext });\n    });\n  },\n\n\n  executeSAPConnector: function executeSAPConnector(guidsap, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeSAPConnector({ guidsap: guidsap, xpathContext: xpathContext });\n    });\n  },\n\n  executeConnector: function executeConnector(guidConnector, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeConnector({ guidConnector: guidConnector, xpathContext: xpathContext });\n    });\n  },\n\n  executePipeline: function executePipeline(pipeline, xpathContext) {\n    var self = this;\n    // For the execute pipeline  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executePipeline({ pipeline: pipeline, xpathContext: xpathContext });\n    });\n  },\n  /*\r\n     *   Submit the given render and refresh dependencies after that\r\n     */\n  submitRender: function submitRender(xpath, argument) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process the action in the render\n    return $.when(render.ready()).pipe(function () {\n      return render.submitOnChange();\n    });\n  },\n  /*\r\n     * Cleans current value\r\n     */\n  cleanRenderData: function cleanRenderData(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var promises = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        promises.push($.when(render.ready()).then(function () {\n          return $.when(render.renderingDeferred).then(function () {\n            return $.when(render.cleanData()).then(function () {\n              return self.changeRenderRequired(xpath, render.properties.required != undefined ? render.properties.required : false);\n            });\n          });\n        }));\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        promises.push($.when(render.ready()).then(function () {\n          var gridPromises = [];\n\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            gridPromises.push($.when(render.cleanCellData(gridXpath.index, gridXpath.remainingXpath)));\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              gridPromises.push($.when(render.cleanCellData(indexes[j], gridXpath.remainingXpath)));\n            }\n          }\n\n          return $.when.apply($, gridPromises);\n        }));\n      }\n    });\n\n    return $.when.apply($, promises);\n  },\n  /* \r\n     *   Changes container background color\r\n     */\n  changeContainerBackground: function changeContainerBackground(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeBackgroundColor(argument);\n      container.visualChanges[\"backgroundColor\"] = argument;\n    });\n  },\n  /* \r\n     *   Shows or hides a container\r\n     */\n  changeContainerVisibility: function changeContainerVisibility(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready(true)).done(function () {\n      $.when(container.renderingDeferred).done(function () {\n        container.changeVisibility(argument);\n        container.visualChanges[\"visibility\"] = argument;\n      });\n    });\n  },\n  /* \r\n     *   Expand or collapse a group container\r\n     */\n  toogleContainer: function toogleContainer(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (/group/i.test(container.properties.type)) {\n      $.when(container.ready()).done(function () {\n        container.toogleContainer(argument);\n      });\n    }\n  },\n  /* \r\n     *   Select a determinate sub-container in a tab or an accordion\r\n     */\n  changeActiveItem: function changeActiveItem(containerId) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (container.properties.type === \"tabItem\" && container.loadingDeferred) {\n      container.loadingDeferred.resolve();\n    }\n    $.when(container.ready()).done(function () {\n      container.setAsActiveContainer();\n    });\n  },\n  /* \r\n     *   Changes container editability\r\n     */\n  changeContainerEditability: function changeContainerEditability(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeEditability(argument);\n      container.visualChanges[\"editability\"] = argument;\n    });\n  },\n  /*\r\n     *   Search for grid columns\r\n     */\n  searchGridColumns: function searchGridColumns(condition, gridColumns) {\n    var self = this;\n    var column;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      var j, lenIndex;\n      for (j = 0, lenIndex = condition.expressions.length; j < lenIndex; j++) {\n        self.searchGridColumns(condition.expressions[j], gridColumns);\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridColumns(condition.simple, gridColumns);\n\n    } else if (condition.complex) {\n      return self.searchGridColumns(condition.complex, gridColumns);\n    } else {\n      var xpath = condition.xpath || condition.renderId;\n      if (xpath) {\n        // Check in condition.xpath\n        if (xpath && xpath.indexOf(\"[]\") > 0) {\n          column = xpath.substring(xpath.indexOf(\"[]\") + 3);\n          gridColumns.push(column);\n        }\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType === 'xpath') {\n          if (condition.argument.indexOf(\"[]\") > 0) {\n            column = condition.argument.substring(condition.argument.indexOf(\"[]\") + 3);\n            gridColumns.push(column);\n          }\n        }\n      }\n    }\n\n    return null;\n  },\n  /**/\n\n  isGridComponent: function isGridComponent(render, xpath) {\n    var renderType = bizagi.util.normalizeType(render.properties.type);\n    return /grid$/i.test(renderType) && xpath.indexOf('[') >= 0;\n  },\n  /**/\n\n  isValidRender: function isValidRender(render) {\n    var notValid = [\"collectionnavigator\"];\n\n    return notValid.indexOf(render.properties.type) === -1;\n  },\n\n  /**\r\n      * Helper to override the visibility and editability in mobile devices. \r\n      * @param {} guid\r\n      * @param {} visible\r\n      * @returns {}\r\n      */\n  changeFormButtonVisibility: function changeFormButtonVisibility(guid, visible) {\n    var self = this;\n    var form = self.form;\n    var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\n    var index = buttons.findIndex(function (item) {return item.id === guid;});\n    var navigation = form.getNavigation();\n\n    if (index !== -1)\n    buttons[index].visible = visible;\n\n    form.buttons = buttons || [];\n    navigation.setNavigationButtons(form);\n  },\n\n  /**\r\n      * Create new object of visual changes\r\n      * @param element\r\n      * @param command\r\n      * @param argument\r\n      * @returns {Object}\r\n      */\n  getVisualChange: function getVisualChange(element, command, argument) {\n    return new Object({\n      element: element,\n      command: command,\n      argument: argument,\n      indexes: [],\n      xpath: \"\" });\n\n  },\n\n  /**\r\n      * Add changes to log\r\n      * @param changes\r\n      */\n  logVisualChange: function logVisualChange(changes) {\n    if (changes.indexes.length > 0) {\n      for (var i = 0; i < changes.indexes.length; i++) {\n        var cell = changes.element.getControlCell(changes.indexes[i], changes.xpath);\n        if (cell) cell.visualChanges[changes.command] = changes.argument;\n      }\n    } else {\n      changes.element.visualChanges[changes.command] = changes.argument;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a base render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.render\", {\n  postRenderTimeout: 0,\n  maxRendersPerScreen: 50,\n  rendersExecuted: 0,\n  renderOptimization: false,\n  TYPE_QUERY_FORM: \"queryForm\",\n  startOptimization: function startOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 500;\n    bizagi.rendering.render.rendersExecuted = 0;\n    // Cancelled optimization temporally, because its on experimental stage\n    bizagi.rendering.render.renderOptimization = false;\n  },\n  stopOptimization: function stopOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 0;\n    bizagi.rendering.render.rendersExecuted = 0;\n    bizagi.rendering.render.renderOptimization = false;\n  } },\n{\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.included = typeof properties.included != \"undefined\" ? bizagi.util.parseBoolean(properties.included) : false;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.displayName = properties.displayName || \"\";\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.includedInResult = typeof properties.includedInResult != \"undefined\" ? bizagi.util.parseBoolean(properties.includedInResult) : false;\n\n    var renderType = bizagi.util.normalizeType(properties.type);\n    if (/^hidden$/i.test(renderType)) {\n      properties.visible = false;\n    }\n\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.maxLength = properties.maxLength || 0;\n    properties.helpText = bizagi.util.trim(properties.helpText) || \"\";\n    properties.textFormat = properties.textFormat || {};\n    properties.valueFormat = properties.valueFormat || {};\n    properties.isHidden = typeof properties.isHidden != \"undefined\" ? bizagi.util.parseBoolean(properties.isHidden) : false;\n    properties.visible = properties.isHidden ? false : properties.visible;\n    //BUG 26867 -    Verify if the control was editable in sometime. Apply only in the column grid (canBeSent). \n    //Change the value property on changeEditability, changeEditabilityCellControl\n    properties.editabilityEnabled = false;\n\n    // Old color and background color\n    if (properties.color) {\n      properties.textFormat.color = properties.color;\n    }\n\n    if (properties.backgroundColor) {\n      properties.textFormat.backgroundColor = properties.backgroundColor;\n    }\n\n    // Non-editable fields cannot be required\n    properties.required = properties.editable ? properties.required : false;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Check contexttype\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n\n    // Save original properties\n    self.originalProperties = {\n      textFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      valueFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      visible: properties.visible,\n      editable: properties.editable,\n      required: properties.required,\n      labelAlign: properties.labelAlign,\n      valueAlign: properties.valueAlign };\n\n\n    // Create value property\n    self.value = typeof properties.value !== \"undefined\" ? properties.value : null;\n\n    // Register original value property\n    self.properties.originalValue = self.value;\n    self.properties.previousValue = self.value;\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n  /*\r\n     *   Calculate aligns, display types, rtl and widths\r\n     */\n  calculateInitialLayoutProperties: function calculateInitialLayoutProperties() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set visual defaults\n    properties.displayType = properties.displayType || \"normal\";\n    properties.labelAlign = properties.labelAlign || self.getDefaultLabelAlign(properties.displayType);\n    properties.valueAlign = properties.valueAlign || self.getDefaultValueAlign(properties.displayType);\n\n    // Check rtl orientation\n    if (properties.orientation === \"rtl\") {\n      properties.labelAlign = self.getRTLAlign(properties.labelAlign);\n      properties.valueAlign = self.getRTLAlign(properties.valueAlign);\n    }\n\n    // Calculate render with\n    var renderWidth = self.calculateRenderWidth(properties.labelWidth, properties.valueWidth, properties.displayType);\n    properties.labelWidth = renderWidth.label;\n    properties.valueWidth = renderWidth.control;\n\n    if (properties.layoutType === \"percentage\") {\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.labelWidth == 0) {\n      properties.displayType = \"value\";\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.valueWidth == 0) {\n      properties.displayType = \"label\";\n    }\n\n    if (properties.type === \"userfield\") {\n      if ([\"both\", \"normal\", \"reversed\"].includes(properties.displayType)) {\n        properties.valueWidth = properties.valueWidth || 50;\n        properties.labelWidth = properties.labelWidth || 50;\n      } else if (properties.displayType === \"vertical\") {\n        properties.valueWidth = 100;\n        properties.labelWidth = 100;\n      } else if (properties.displayType === \"label\") {\n        properties.valueWidth = 0;\n        properties.labelWidth = 100;\n      } else {\n        properties.valueWidth = 100;\n        properties.labelWidth = 0;\n      }\n    }\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_RENDER;\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  render: function render(renderTemplateName) {\n    return this.renderElement(renderTemplateName);\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  renderElement: function renderElement(renderTemplateName) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    renderTemplateName = renderTemplateName || \"render\";\n    var renderTemplate = self.renderFactory.getTemplate(renderTemplateName);\n\n    // Resolve render label\n    var label = properties.displayName;\n    if (typeof label == \"string\") {\n      // Replace line breaks for html line breaks\n      label = bizagi.util.encodeString(label);\n    }\n\n    var isFullRender = bizagi.util.detectDevice() !== \"desktop\" && (properties.type === \"association\" || properties.type === \"uploadecm\" || (properties.type === \"actionLauncher\" || properties.type === \"polymorphicLauncher\") && bizagi.util.isTabletDevice() || properties.type === \"grid\" && !bizagi.util.isTabletDevice());\n    var labelWidth = parseFloat(properties.labelWidth);\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      helpText: properties.helpText,\n      editable: properties.editable,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      xpath: properties.xpath,\n      tag: properties.tag,\n      displayType: properties.displayType,\n      displayOptionClass: self.getDisplayOptionClass(properties.displayType),\n      labelAlignClass: self.getAlignClass(properties.labelAlign),\n      valueAlignClass: self.getAlignClass(properties.valueAlign),\n      flexAlignClass: bizagi.util.mapAlignClassName(properties.columnAlign),\n      labelWidth: labelWidth,\n      stringLabelWidth: labelWidth + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      valueWidth: parseFloat(properties.valueWidth),\n      stringValueWidth: parseFloat(properties.valueWidth) + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      layoutType: properties.layoutType,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      includedInResult: properties.includedInResult,\n      included: properties.included,\n      type: properties.type,\n      showFullRender: isFullRender,\n      required: properties.required });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n  /*\r\n     *   Returns the resolved result from a promise when the promise has been executed already\r\n     */\n  resolveResult: function resolveResult(promise) {\n    return bizagi.resolveResult(promise);\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred) {\n      return false;\n    }\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Renders the control html\r\n     */\n  internalRenderControl: function internalRenderControl() {\n    var self = this;\n    var properties = self.properties;\n    self.control = null;\n\n    if (self.renderFactory.printVersion) {\n      properties.editable = false;\n      return self.renderControl();\n    } else if (properties.editable) {\n      return self.renderControl();\n    }\n\n    return self.renderReadOnly();\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRenderElement: function postRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set element variable\n    self.element = element;\n\n    if (properties.submitOnChange)\n    self.configureSubmitOnChange();\n\n    // Process internal layout\n    isLabelFormat = true;\n\n    var executePostRender = function executePostRender(_element) {\n      if (bizagi.rendering.render.renderOptimization &&\n      bizagi.rendering.render.rendersExecuted > bizagi.rendering.render.maxRendersPerScreen) {\n\n        // Execute post-render control\n        var timeOutRender = setTimeout(function () {\n          self.internalPostRender(_element);\n          bizagi.rendering.render.postRenderTimeout += 50;\n          clearTimeout(timeOutRender);\n        }, bizagi.rendering.render.postRenderTimeout);\n\n      } else {\n        self.internalPostRender(_element);\n      }\n      bizagi.rendering.render.rendersExecuted++;\n    };\n\n    if (self.asyncRenderDeferred) {\n      // Wait for async result\n      $.when(self.asyncRenderDeferred).\n      done(function (html) {\n        var control = self.getControl();\n        if (typeof self.emptyControlByAsyncRenderDeferred == \"function\") {\n          self.emptyControlByAsyncRenderDeferred();\n        }\n        control.append(html);\n\n        // Execute post-render control\n        executePostRender(element);\n        self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n      });\n    } else {\n      // Execute post-render control\n      executePostRender(element);\n    }\n  },\n  /*\r\n     *   Executes the post render handlers\r\n     */\n  internalPostRender: function internalPostRender(element) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    self.control = self.getControl();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred) {\n      self.renderingDeferred.resolve();\n    }\n\n    // Execute post-renders\n    if (properties.editable) {\n      // Post-render editable version\n      if (self.renderFactory.printVersion && self.postRenderPrintVersion) {\n        self.postRenderPrintVersion();\n      } else {\n        self.postRender();\n      }\n\n    } else {\n      // Post-render readonly version\n      self.postRenderReadOnly(element);\n    }\n\n    // Perform execution mode methods\n    if (mode == \"execution\") {\n      self.performExecutionModeMethods();\n    } else {\n      self.performDesignModeMethods();\n    }\n\n    self.processLayout(isLabelFormat, self.properties.textFormat || {});\n    self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n  },\n  /*\r\n     *   Execute runtime only methods\r\n     */\n  performExecutionModeMethods: function performExecutionModeMethods() {\n    var self = this;\n    var properties = self.properties;\n    if (self.getFormType() == self.Class.TYPE_QUERY_FORM) {\n      self.configureHandlersQueryForm();\n    }\n\n    // Apply handlers\n    if (properties.editable) {\n      self.configureHandlers();\n    } else {\n      self.configureHandlersReadOnly();\n    }\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /**\r\n      * Execute design only methods\r\n      */\n  performDesignModeMethods: function performDesignModeMethods() {\n    var self = this;\n\n    // Execute custom code for each render\n    self.configureDesignView();\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /*\r\n     *   Replaces a {{control}} string in the specified element\r\n     */\n  replaceControlHtml: function replaceControlHtml(html, replace) {\n    html = html || \"\";\n    replace = replace || \"\";\n    return html.replaceFirstWithoutPatterns(\"{{control}}\", replace);\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.element)) {\n      bizagi.log(\" render hasn't been rendered!\", this, \"error\");\n    }\n\n    return this.element;\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    var properties = self.properties;\n    self.internalSetInitialValueFlag = true;\n\n    // Set the initial value\n    if (properties.editable) {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    } else {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    }\n    self.internalSetInitialValueFlag = false;\n  },\n  /*\r\n     * Public method to determine if a value is valid or not\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var inlineAdd = self.grid && self.grid.properties && self.grid.properties.inlineAdd;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false && !inlineAdd) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (bizagi.util.parseBoolean(properties.required)) {\n      var form = self.getFormContainer();\n      var hasValue = false;\n      var renders = self.grid ? [self] : form.getRenders(properties.xpath);\n      var isQueryForm = /^query/i.test(properties.type);\n\n      renders.filter(function (render) {\n        return render.properties.id == properties.id;\n      }).forEach(function (render) {\n        if (render.hasValue() && (render.properties.editable || inlineAdd)) {\n          hasValue = true;\n          return false;\n        }\n      });\n\n      if (!hasValue && !self.properties.isClone) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        var messageData = { xpath: properties.xpath, message: message };\n\n        if (isQueryForm) {\n          messageData = $.extend({}, messageData, {\n            id: properties.id,\n            isQuery: isQueryForm });\n\n        }\n\n        invalidElements.push(messageData);\n        return false;\n      }\n    }\n\n    // Check retypes\n    if (properties.retype == \"duplicate\") {\n      // Don't process cloned renders, just originals\n      if (self.cloneRender) {\n        if (self.cloneRender.getValue() != self.getValue()) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    } else if (properties.retype == \"double\") {\n      var control = $(\"input\", self.element);\n\n      //Waits until the control has the second value written\n      if (control && control.data(\"oldValue\")) {\n        if (control.val() === \"\") {\n\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({\n            xpath: properties.xpath,\n            message: message });\n\n\n          return false;\n        } else if (control.val() != control.data(\"oldValue\")) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n\n          return false;\n        }\n      }\n    }\n\n    // Check maxlength\n    var columnEditable = self.grid && self.grid.getColumn ? self.grid.getColumn(self.properties.xpath).properties.editable : true;\n    if (properties.type !== \"userPassword\" && properties.maxLength !== undefined && properties.maxLength > 0 && bizagi.util.isNumeric(properties.maxLength)) {\n      if (columnEditable || !columnEditable && self.controlValueIsChanged()) {\n        var maxLength = new Number(properties.maxLength);\n        var value = self.getValue();\n\n        if (value && value.toString().length > maxLength) {\n          message = self.getResource(\"render-text-maxLength-error\").replaceAll(\"#maxLength#\", maxLength);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    // Next line decides if only spaces are accepted as valid texts or not. Anyway the spaces are still saved as self.value has not changed\n    var value = self.getValue();\n\n    if (value && self.properties.type === \"text\") {\n      value = typeof value === \"string\" ? value.trim() : value;\n    }\n\n    return !bizagi.util.isEmpty(value);\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n     */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Method to process the render the layout\r\n     */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.getControl() == null) return;\n\n    // Set customizations\n    format = format || {};\n\n    if (format.color) {\n      self.changeColor(format.color, isLabelFormat);\n    }\n    if (format.background) {\n      self.changeBackgroundColor(format.background);\n    }\n    //if bold is true in modeler, we receive nothing in execution (!formal.bold)\n    if (format.bold || !format.bold || !isLabelFormat) {\n      self.changeFontBold(format.bold, isLabelFormat);\n    }\n    if (format.italic) {\n      self.changeFontItalic(format.italic, isLabelFormat);\n    }\n    if (format.underline) {\n      self.changeFontUnderline(format.underline, isLabelFormat);\n    }\n    if (format.strikethru) {\n      self.changeFontStrikethru(format.strikethru, isLabelFormat);\n    }\n    if (format.size) {\n      self.changeFontSize(format.size, isLabelFormat);\n    }\n\n    // Set required and visiblity\n    properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\n    var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\n    if (properties.required) {\n      self.changeRequired(properties.required);\n    }\n    if (!visible) {\n      if (self.grid) {\n        self.changeCellVisibility(visible);\n      } else {\n        self.changeVisibility(visible);\n      }\n    }\n  },\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (!bizagi.util.identicalObjects(value, self.value)) {\n      // set previous value\n      self.properties.previousValue = self.properties.originalValue = self.value;\n\n      // Change internal value\n      self.value = self.properties.value = value;\n      if (self.properties.required && self.getMode() == \"execution\") {\n\n        if (self.checkRequired([])) {\n          self.changeRequiredLabel(false);\n        } else {\n          self.changeRequiredLabel(true);\n        }\n      }\n\n      // Trigger events\n      if (triggerEvents && !self.internalSetInitialValueFlag) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (!self.hasValue()) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        return false;\n      }\n    }\n    return true;\n  },\n\n  validateInputRetype: function validateInputRetype() {\n    var self = this;\n    if (self.properties.retype && self.cloneRender) {\n      return self.getValue() == self.cloneRender.getValue();\n    }\n    return true;\n  },\n\n  /*\r\n     *   Triggers the render change event\r\n     */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    params.changed = params.changed !== undefined ? params.changed : true;\n    self.triggerHandler(\"renderchange\", { render: self, changed: params.changed });\n  },\n  /*\r\n     *   Triggers the render validate event\r\n     */\n  triggerRenderValidate: function triggerRenderValidate() {\n    var self = this;\n    self.triggerHandler(\"rendervalidate\", { render: self });\n  },\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    // Set internal value\n    self.setValue(value, false);\n\n    if (!self.properties.editable && (self.properties.display !== \"check\" || self.properties.display === \"check\" && bizagi.override.enableCheck === true)) {\n      // Render as simple value\n      var displayValue = self.getDisplayValue(value);\n      if (typeof displayValue == \"string\" || typeof displayValue == \"number\") {\n        displayValue = bizagi.util.sanitizeHTML(displayValue);\n        $(control).html(\"<label class='readonly-control'>\" + displayValue + \"</label>\");\n      }\n    }\n  },\n  /*\r\n     *   Returns the internal value\r\n     */\n  getValue: function getValue() {\n    return this.value;\n  },\n  /*\r\n     *   Returns the value to display, ex. non-editable renders\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    return this.getValue();\n  },\n  /*\r\n     *   Template method to get the label element\r\n     */\n  getLabel: function getLabel() {\n    bizagi.util.mustImplement(\"getLabel\");\n  },\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    bizagi.util.mustImplement(\"getControl\");\n  },\n  /*\r\n     *   Template method to get the control filler element\r\n     */\n  getControlFiller: function getControlFiller() {\n    bizagi.util.mustImplement(\"getControlFiller\");\n  },\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n  },\n  /*\r\n     *   Adds a validation message to the render\r\n     */\n  setValidationMessage: function setValidationMessage(message) {\n    this.validationMessage = message;\n  },\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var result = this.getValue();\n    var readOnlyValue = \"\";\n\n    if (bizagi.util.isObject(result) && typeof result.value !== \"undefined\") {\n      readOnlyValue = bizagi.util.sanitizeHTML(result.value);\n    } else if (!bizagi.util.isEmpty(result)) {\n      if (bizagi.util.isString(result)) {\n        readOnlyValue = bizagi.util.encodeHtmlText(result);\n      } else {\n        readOnlyValue = result;\n      }\n    }\n\n    return readOnlyValue;\n  },\n\n  /*\r\n     *  Method to render print version\r\n     */\n  postRenderPrintVersion: function postRenderPrintVersion() {\n  },\n\n  /*\r\n     *   Customizes render display type with custom css classes\r\n     */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    this.properties.displayType = displayType;\n  },\n\n  /*\r\n     *   Return the right display option class\r\n     */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label align\r\n     */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    this.properties.labelAlign = alignType;\n  },\n\n  /*\r\n     *   Customizes render value align\r\n     */\n  changeValueAlign: function changeValueAlign(alignType) {\n    this.properties.valueAlign = alignType;\n  },\n\n  /*\r\n     *   Return the right align class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label and value width\r\n     */\n  customizeRenderWidth: function customizeRenderWidth() {\n  },\n\n  /* Customizes render color*/\n  changeColor: function changeColor(color, isLabelFormat) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    if (control && label) {\n      if (color != 'none') {\n        // Hide - show the render\n        if (self.properties.displayType === \"value\" || !isLabelFormat) {\n          self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"color\", color, \"!important\");\n          });\n        } else {\n          self.element.each(function () {\n            this.style.setProperty('color', color, 'important');\n          });\n\n          if (self.properties.type == \"grid\") {\n            self.getControl().find(\".bz-mobile-grid__header-title\").each(function () {\n              this.style.setProperty('color', color, 'important');\n            });\n          }\n\n          self.getLabel().find(\"label\").css(\"color\", color, \"!important\");\n          if (self.properties.editable === false) {\n            self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n            self.getElementsToStylize($(\"label\", self.getControl()).css(\"color\", color, \"!important\"));\n          }\n        }\n      } else {\n        self.element.css(\"color\", \"\");\n        self.getLabel().find(\"label\").css(\"color\", \"\");\n        self.getControl().css(\"color\", \"\");\n\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          self.getElementsToStylize(element).css(\"color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Customizes render background color*/\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n\n    if (control && label) {\n      if (color != 'none') {\n        self.element.each(function () {\n          this.style.setProperty('background-color', color, 'important');\n        });\n\n        if (typeof label.find('label').style !== \"undefined\") {\n          self.getLabel().find(\"label\").style(\"background-color\", color, \"important\");\n        } else {\n          self.getLabel().find(\"label\").css(\"background-color\", color, \"!important\");\n        }\n\n        var currentStyle = self.getLabel().attr(\"style\");\n        currentStyle += \"; background-color:\" + color + \"!important\";\n        self.getLabel().attr(\"style\", currentStyle);\n      } else {\n        self.element.css(\"background-color\", \"\");\n        self.getLabel().find(\"label\").css(\"background-color\", \"\");\n        self.getControl().css(\"background-color\", \"\");\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          $(element).css(\"background-color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Returns the formatting label to be used for bold, italic, underline, strikethrough and size*/\n  getFormattingLabel: function getFormattingLabel() {\n    var self = this;\n    return self.getLabel().find(\"label\");\n  },\n\n  /* Customizes the font weight */\n  changeFontBold: function changeFontBold(bold, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(bold) != false && isLabelFormat) {\n      self.getFormattingLabel().css(\"font-weight\", \"bold\", \"!important\");\n      self.getControl().each(function (i, element) {\n        $(element).css(\"font-weight\", \"bold\", \"!important\");\n      });\n\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"font-weight\", \"normal\", \"!important\");\n    }\n    if (!isLabelFormat) {\n      if (bizagi.util.parseBoolean(bold) == true) {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"bold\", \"!important\");\n        });\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"normal\", \"!important\");\n        });\n        self.getControl().css(\"font-weight\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n    var result = true;\n    var renderType = bizagi.util.normalizeType(properties.type);\n    var form = self.getFormContainer();\n\n    //To force to send value when control's retype is duplicate, fixed to start forms.\n    if (properties.retype === \"duplicate\" && self.cloneRender && form.isStartForm()) return true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (renderType === \"grid\" && self.ready().state() === \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n      if (value && value.length !== undefined) {\n        value = value[0];\n      }\n      if (compareValue && compareValue.length !== undefined) {\n        compareValue = compareValue[0];\n      }\n      if (baseValue && baseValue.length !== undefined) {\n        baseValue = baseValue[0];\n      }\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      baseValue = baseValue && baseValue.id ? baseValue.id : baseValue;\n      if (typeof baseValue != \"undefined\" && baseValue != null) {\n        result = compareValue == value && compareValue != baseValue ? false : true;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"boolean\" || renderType === \"queryBoolean\" || renderType === \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (renderType === \"searchNumber\") {\n      result = !!value;\n    } else if (renderType === \"number\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"text\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"date\") {\n      if (!compareValue && !value) {\n        result = false;\n      } else {\n        if (!properties.showTime) {\n          value = bizagi.util.getNormalizedDate(value, properties.fullFormat);\n          compareValue = bizagi.util.getNormalizedDate(compareValue, properties.fullFormat);\n        }\n\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"actionLauncher\") {\n      //Object must be an array\n      result = false;\n      var compareValueObj = [];\n      try {\n        if (typeof compareValue === \"string\") {\n          compareValueObj = JSON.parse(compareValue);\n        } else {\n          compareValueObj = compareValue;\n        }\n      } catch (e) {\n      }\n\n      var _findAction = function _findAction(guid, targetObj) {\n        guid = guid || \"\";\n        targetObj = targetObj || [];\n        var result = false;\n        for (var i = 0, l = targetObj.length; i < l; i++) {\n          if (targetObj[i].guidAction == guid) {\n            result = true;\n            break;\n          }\n        }\n        return result;\n      };\n\n      if (compareValueObj.length == value.length) {\n        for (var i = 0, l = compareValueObj.length; i < l; i++) {\n          if (!_findAction(compareValueObj[i].guidAction, value)) {\n            result = true;\n          }\n        }\n\n      } else {\n        result = true;\n      }\n    } else if (renderType === \"polymorphicLauncher\" || renderType === \"entityTemplate\") {\n      //Object must be an array\n      if (compareValue.length != value.length) {\n        result = true;\n      } else {\n        result = JSON.encode(value) == JSON.encode(compareValue) ? false : true;\n      }\n    } else if (renderType === \"searchList\") {\n      var objectValue = {};\n      try {\n        objectValue = JSON.parse(value);\n      } catch (e) {\n        console.log(\"Error when detect change value on searchList control\");\n      }\n      result = JSON.encode(compareValue) == JSON.encode(objectValue.value) ? false : true;\n    } else if ([\"signature\", \"image\"].includes(renderType)) {\n      // When a image/signature is uploaded or removed from a Form,\n      // the change is saved automatically to the activity's scope\n      result = false;\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  },\n\n  /* Customizes the font italic style */\n  changeFontItalic: function changeFontItalic(italic, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"italic\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"italic\", \"!important\");\n        }\n      } else {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"normal\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"normal\", \"!important\");\n        }\n      }\n    } else {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n      } else {\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  /* Customizes the font underline */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var strikethru = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(underline) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", strikethru + \"underline\", \"!important\");\n      self.getControl().each(function (i, element) {\n        self.getElementsToStylize(element).css(\"text-decoration\", strikethru + \"underline\");\n      });\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", strikethru, \"!important\");\n    }\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(underline) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n        }\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n        });\n      }\n    }\n  },\n\n  /* Customizes the font Strikethrough property */\n  changeFontStrikethru: function changeFontStrikethru(strikethru, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var underline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueunderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(strikethru) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", underline + \"line-through\", \"!important\");\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", underline, \"!important\");\n    }\n\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(strikethru) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n        }\n      } else {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline, \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline, \"!important\");\n        }\n      }\n    }\n  },\n\n  /* Customizes the font size property */\n  changeFontSize: function changeFontSize(size, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (size != \"0\") {\n      var label = self.getFormattingLabel();\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      if (isLabelFormat) {\n        label.css(\"font-size\", newFontSize, \"!important\");\n      }\n      if (self.properties.displayType == \"value\" || !isLabelFormat) {\n        var control = self.getControl();\n        if (_typeof(control.children()) == \"object\" && control.children().length > 0) {\n          self.getElementsToStylize(control.children()).css(\"font-size\", newFontSize, \"!important\");\n        } else {\n          self.getElementsToStylize(control).css(\"font-size\", newFontSize, \"!important\");\n          // Next line applies to Cascading combo and combo in order to increase the control space with large value fonts\n          if (self.properties.type.indexOf(\"ombo\") != -1 && size > 4) (\".ui-selectmenu\", control).children(0).height(2 * size + 20);\n        }\n\n        self.getElementsToStylize(control.find(\".ui-bizagi-render-date\")).css(\"line-height\", \"normal\");\n      }\n    }\n  },\n\n  /**\r\n      * in mobiles, don't apply styles to icon's elements\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(context);\n  },\n\n  /* Changes the render visibility*/\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(argument) == true) {\n      if (properties.type !== \"hidden\") {\n        self.element.show();\n        self.element.css(\"display\", \"\");\n\n        if (properties.required) {\n          if (!self.hasValue()) {\n            self.changeRequiredLabel(true);\n          }\n        }\n      }\n    } else if (self.element) {\n      self.element.hide();\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n  /* Changes the render editability*/\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Renders again\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n      $.when(self.internalRenderControl()).done(function (html) {\n        if (typeof self.emptyControlByChangeEditability == \"function\")\n        self.emptyControlByChangeEditability();\n        if (!self.asyncRenderDeferred)\n        control.append(html);\n        self.postRenderElement(self.element);\n      });\n    }\n  },\n\n  /**\r\n      * Change cell editability and attach bindings\r\n      * @param argument\r\n      * @param key\r\n      * @param xpath\r\n      */\n  changeEditabilityCellControl: function changeEditabilityCellControl(argument, key, xpath) {\n    var self = this;\n    var properties = self.properties;\n    var renderColumn = self.grid.getColumn(xpath);\n    var decorated = renderColumn.getDecorated(key);\n\n    // Renders again\n    properties.editable = argument === \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Render cell control\n    self.internalRenderCellControl(properties.editable, key, renderColumn, decorated);\n  },\n\n  /**\r\n      * Render cell control by command action\r\n      * @param editable\r\n      * @param key\r\n      * @param renderColumn\r\n      * @param decorated\r\n      */\n  internalRenderCellControl: function internalRenderCellControl(editable, key, renderColumn, decorated) {\n    var self = this;\n    var control = self.getControl();\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n\n      $.when(self.internalRenderControl()).done(function (html) {\n\n        if (!self.asyncRenderDeferred) {\n          control.append(html);\n        }\n\n        self.postRenderElement(self.element);\n\n        if (editable) {\n\n          renderColumn.bind(\"rendered\", function () {\n            renderColumn.readyDeferred.resolve();\n          });\n\n          decorated.unbind(\"renderchange\");\n\n          // If the render changes set the flag on\n          decorated.bind(\"renderchange\", function (render, args) {\n            renderColumn.changed = true;\n            self.grid.onCellChange(renderColumn, null, key, args);\n          });\n\n        }\n      });\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (self.getMode() == \"execution\" && self.checkRequired([])) {\n      self.changeRequiredLabel(false);\n    } else if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * Does't change internal value of control, if you need it\r\n      * please use changeRequired method\r\n      *\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /*\r\n     *   Refresh the control with a new data\r\n     */\n  refreshControl: function refreshControl(args) {\n    var self = this;\n    var properties = self.properties;\n    var originalValue = self.value;\n    var form = self.getFormContainer();\n    var idForm = form.properties.id || \"\";\n\n    args = args || {};\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the ajax service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      idForm: idForm })).\n    pipe(function (data) {\n      if (self.grid && bizagi.override.restoreAppearanceAfterRefresh) {\n        self.saveGridChildrenVisualChanges();\n      }\n      // Clear variables\n      self.control = self.controlFiller = self.label = null;\n\n      // Update properties data\n      var currentElement = self.element;\n      self.initializeData(data.render);\n\n      // Render the control again\n      return $.when(self.render()).pipe(function (html) {\n        var result = $(html);\n        //Dont remove unused rendered var\n        var rendered = self.postRenderElement(result);\n        self.properties.originalValue = self.value;\n        return result;\n      }).pipe(function (result) {\n\n        // When the content has been post-renderized, replace it\n        currentElement.replaceWith(result);\n\n        // Prevent multiple refresh on grid\n        if (!self.grid) {\n          self.triggerRenderChange({ changed: false });\n        }\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          if (self.grid) {\n            self.restoreGridChildrenVisualChanges();\n            self.restoreGridAppearance();\n          } else {\n            self.restoreAppearance();\n          }\n        }\n\n        // Execute personalized stuff before to refresh it\n        self.afterToRefresh();\n      });\n\n    }).fail(function (message) {\n      var message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the control with a new data\r\n      */\n  refreshDesignControl: function refreshDesignControl(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Clear variables\n    self.control = self.controlFiller = self.label = null;\n\n    $.extend(data.render.properties, {\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"form\",\n      idPageCache: properties.idPageCache });\n\n\n    // Update properties data\n    var currentElement = self.element;\n    self.initializeData(data.render);\n\n    // Render the control again\n    return $.when(self.render()).pipe(function (html) {\n      var result = $(html);\n      //Dont remove unused rendered var\n      var rendered = self.postRenderElement(result);\n      self.properties.originalValue = self.value;\n      return result;\n    }).pipe(function (result) {\n      // When the content has been post-renderized, replace it\n      currentElement.replaceWith(result);\n      self.triggerRenderChange();\n\n      // Execute personalized stuff before to refresh it\n      self.beforeToRefresh();\n    });\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.setValue(\"\");\n    self.clearDisplayValue();\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"input\");\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else if (self.properties.editable === false) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  /*\r\n     *   Updates original value for some comparisons\r\n     */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value;\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          renderValues[properties.xpath] = value;\n        } else if (value === \"\" || value === null) {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n\n    //Validate if the input has a retype configured and check that both values matches, otherwise delete the original value\n    if (!self.validateInputRetype()) {\n      renderValues[properties.xpath] = \"\";\n    }\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      result.push(true);\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *  Configure additional Handlers for queryForm type\r\n     */\n  configureHandlersQueryForm: function configureHandlersQueryForm() {\n    var self = this;\n    var checkIncluded = self.element.find(\".ui-bizagi-render-control-included\");\n    checkIncluded.change(function () {\n      self.properties.included = $(this).is(\":checked\");\n    });\n  },\n  getRenderId: function getRenderId() {\n    var self = this;\n\n    return bizagi.util.tryCatch(\n    function () {return self.properties.id;},\n    null);\n\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var queryValue = null;\n    if (!bizagi.util.isEmpty(xpath)) {\n      if (value !== null && typeof value !== \"undefined\") {\n        var isObject = typeof value.id !== \"undefined\";\n        if (isObject) {\n          queryValue = !bizagi.util.isEmpty(value.id) ? [value] : null;\n        } else {\n          queryValue = value !== \"\" ? value : null;\n        }\n      }\n      if (queryValue !== null || properties.included) {\n        var searchType = (self.properties.typeSearch || self.properties.rangeQuery || \"NONE\").toUpperCase();\n        var newParameter = {\n          \"value\": queryValue,\n          \"included\": self.properties.included,\n          \"xpath\": properties.xpath,\n          \"searchType\": searchType,\n          \"orderType\": \"NONE\",\n          \"renderId\": self.getRenderId() };\n\n\n        if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n          newParameter.displayXpath = properties.displayXpath;\n        }\n\n        renderValues.push(newParameter);\n      }\n    }\n  },\n\n  /*\r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this,force;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n    var editable = bizagi.util.parseBoolean(properties.editable) || bizagi.util.parseBoolean(properties.editabilityEnabled);\n\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n\n    // The render can be sent if it is editable and is not \"display only\"\n    if (!displayOnly && editable) {\n      return true;\n    }\n\n    if (properties.xpath) {\n      var form = self.getFormContainer();\n      if (form.getRenders(properties.xpath).length == 1) {\n        force = $.forceCollectData ? $.forceCollectData.toString() : false;\n        $.forceCollectData = force ? undefined : $.forceCollectData;\n        if (self.controlValueIsChanged()) {\n          $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n          return true;\n        }\n        $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n      }\n    }\n\n    return false;\n  },\n  /*\r\n     *  Method to determine if the render value can be sent to search\r\n     */\n  canBeSentQueryForm: function canBeSentQueryForm() {\n    var self = this,force;\n    var properties = self.properties;\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n    return true;\n  },\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus(time) {\n    var self = this;\n\n    // Focus is only allowed when the render is visible\n    if (!self.properties.visible) return;\n\n    // Call base\n    this._super();\n    var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n\n    // Configures effect\n    var effect = function effect() {\n      var control = self.getControl();\n      var defaultControl = self.properties.type != \"grid\" ? $(\"input, select, option, textarea\", control) : $(\"input, select, option, textarea\", control).first();\n      if (defaultControl.length > 0) {\n\n        // Focus control\n        $.each(defaultControl, function (i) {\n          var innerControl = defaultControl[i];\n          if ($(innerControl).attr(\"type\") != \"hidden\" && $(innerControl).css(\"display\") != \"none\" && $(innerControl).css(\"visibility\") != \"hidden\") {\n\n            try {\n              if (!bizagi.util.isIE()) {\n                bizagi.util.autoScrollBottom(layout);\n              }\n              innerControl.focus();\n            } catch (e) {\n            }\n          }\n        });\n      }\n    };\n\n    // Wait until the render is ready to apply the focus effect\n    $.when(self.ready()).\n    done(function () {\n      // Run effect\n      if (time > 0) {\n        var timeOutEffect = setTimeout(function () {\n          effect();\n          clearTimeout(timeOutEffect);\n        }, time);\n      } else {\n        effect();\n      }\n    });\n  },\n\n  /*\r\n     *   Resolves default align for each display type\r\n     */\n  getDefaultLabelAlign: function getDefaultLabelAlign(displayType) {\n    return \"default\";\n  },\n\n  /*\r\n     *   Resolves default value align for each display type\r\n     */\n  getDefaultValueAlign: function getDefaultValueAlign(displayType) {\n    return \"default\";\n  },\n  /*\r\n     *   Transform the align type when using RTL orientation\r\n     */\n  getRTLAlign: function getRTLAlign(align) {\n    /* if (align === \"default\"){ \r\n                                                return \"right\";\r\n                                            } */\n    return align;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n    var properties = self.properties;\n    var xpath = \"\";\n\n    if (!properties.editable) return;\n\n    // Build action\n    properties.dependencies = properties.dependencies || 'all';\n\n    if (properties.xpath) {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.xpath;\n      } else {\n        xpath = properties.xpath;\n      }\n    } else {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.id;\n      } else {\n        xpath = properties.id;\n      }\n    }\n\n    var action = {\n      \"conditions\": {\n        \"expressions\": [\n        {\n          \"simple\": {\n            \"xpath\": xpath,\n            \"renderId\": properties.id,\n            \"operator\": \"changes\",\n            \"argumentType\": \"const\" } }] },\n\n\n\n\n      \"commands\": [\n      {\n        \"xpath\": xpath,\n        \"command\": 'submit-value',\n        \"argument\": properties.dependencies }],\n\n\n      \"dependencies\": [xpath],\n      \"elseCommands\": [] };\n\n\n    if (properties.submitOnChangexpathContext && self.grid) {\n      action.conditions.expressions[0].simple.containerId = self.grid.properties.id;\n    }\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n\n  /*\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  submitOnChange: function submitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var defer = $.Deferred();\n\n    // Add context parameter\n    if (self.properties.contexttype != \"\" && data) {\n      data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = self.properties.contexttype;\n    }\n\n    $.when(self.isReadyToSave()).done(function () {\n      self.internalSubmitOnChange(data, bRefreshForm, notCollect).done(function () {\n        defer.resolve();\n      }).fail(function () {\n        defer.reject();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  getCacheIdCase: function getCacheIdCase() {\n    var self = this;\n    var idCase = self.getParams().idCase;\n\n    if (bizagi.cache === undefined) {\n      bizagi.cache = {};\n      bizagi.cache.idCaseObject = {\n        idCase: idCase !== undefined ? idCase : bizagi.cache.idCase !== undefined ? bizagi.cache.idCase : undefined };\n\n    } else {\n      if (idCase !== undefined && bizagi.cache.idCaseObject !== undefined) {\n        bizagi.cache.idCaseObject.idCase = idCase;\n      } else {\n        if (idCase !== undefined && bizagi.cache.idCaseObject === undefined) {\n          bizagi.cache.idCaseObject = {};\n          bizagi.cache.idCaseObject.idCase = idCase;\n        }\n      }\n    }\n\n    if (idCase === undefined) {\n      if (bizagi.cache.idCaseObject === undefined) {\n        idCase = undefined;\n      } else {\n        idCase = bizagi.cache.idCaseObject.idCase;\n      }\n    } else {\n      idCase = idCase;\n    }\n\n    return idCase;\n  },\n  /*\r\n     *   Internal method\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var parameters = {\n      data: data,\n      bRefreshForm: bRefreshForm,\n      notCollect: notCollect,\n      properties: {\n        idCase: self.getCacheIdCase(),\n        id: properties.id,\n        xpath: properties.xpath,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype } };\n\n\n\n    return form.internalSubmitOnChange(parameters);\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n    return null;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n    return null;\n  },\n  /*\r\n     *   Calculates render label and value width\r\n     */\n  calculateRenderWidth: function calculateRenderWidth(labelWidth, valueWidth, displayType) {\n    var self = this;\n    // Read values\n    // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\n    if (valueWidth == \"100\" && typeof labelWidth === \"undefined\") {\n      labelWidth = \"0\";\n    } else {\n      labelWidth = labelWidth ? labelWidth != \"0\" ? labelWidth : \"50\" : \"50%\";\n    }\n    valueWidth = valueWidth ? valueWidth != \"0\" ? valueWidth : \"50\" : \"50%\";\n\n    if (displayType == \"normal\" || displayType == \"both\" || displayType == \"reversed\") {\n\n      // Special case with lower values, so they want both fields in \"auto\" width\n      if (labelWidth && bizagi.util.percent2Number(labelWidth) < 5 &&\n      valueWidth && bizagi.util.percent2Number(valueWidth) < 5) {\n        return { label: 0, control: 100 };\n      }\n      // Normalize percentages\n      if (labelWidth && !valueWidth) {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = 100 - labelWidth;\n\n      } else if (!labelWidth && valueWidth) {\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n        labelWidth = 100 - valueWidth;\n      } else {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n\n        // Check 100% percentage\n        if (labelWidth + valueWidth != 100 && typeof self.properties != \"undefined\" && self.properties.layoutType != \"pixels\") {\n          valueWidth = 100 - labelWidth;\n        }\n      }\n    } else {\n      labelWidth = 100;\n      valueWidth = 100;\n    }\n\n    return { label: labelWidth, control: valueWidth };\n  },\n  /*\r\n     *   Get param value idCase\r\n     */\n  getIdCase: function getIdCase() {\n    var self = this;\n    return self.getFormContainer().params.idCase || bizagi.context.idCase;\n  },\n  /*\r\n     *   Get param value idWorkitem\r\n     */\n  getIdWorkitem: function getIdWorkitem() {\n    var self = this;\n    return self.getFormContainer().params.idWorkitem || bizagi.context.idWorkitem;\n  },\n  /*\r\n     *   Get param value idTask\r\n     */\n  getidTask: function getidTask() {\n    var self = this;\n    return self.getFormContainer().params.idTask || bizagi.context.idTask;\n  },\n  /*\r\n     *   Get param value sessionId\r\n     */\n  getSessionId: function getSessionId() {\n    var self = this;\n    return self.getFormContainer().properties.sessionId;\n  },\n\n  /*\r\n     *   CELL STUFF\r\n     *   TODO: Move to other place\r\n     */\n\n  /* Customizes cell color*/\n  changeCellColor: function changeCellColor(color) {\n    var self = this;\n    var control = self.getControl();\n    if (control) {\n      if (color != 'none') {\n        control.css(\"color\", color);\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", color);\n        });\n      } else {\n        control.css(\"color\", \"\");\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", \"\");\n        });\n      }\n    }\n  },\n\n  /**\r\n      * Customizes cell background color\r\n      * @param color\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var backgroundColor = \"\";\n    var backgroundImage = \"\";\n\n    if (control) {\n      if (color != 'none') {\n        backgroundColor = color;\n        backgroundImage = \"none\";\n      }\n\n      if (self.properties.editable) {\n        var needBGPaint = false;\n\n        control.find(\"input, textarea, .ui-selectmenu\").each(function (i, element) {\n\n          if ((element.type == \"text\" || element.type == \"textarea\") && !$(element).hasClass('ui-select-data'))\n          needBGPaint = true;\n\n          $(element).css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n\n        if (!needBGPaint) {\n          control.closest(\"td\").each(function (i, element) {\n            $(element).css({\n              \"background-color\": backgroundColor,\n              \"background-image\": backgroundImage });\n\n          });\n        }\n\n      } else {\n        control.each(function (i, element) {\n          //TODO: Validar si se aplican los estilos en tablet aun sin esta linea, cuidado con desktop\n          var item = $(element).hasClass(\"ui-bizagi-cell-readonly\") ? control.closest(\"td\") : $(element);\n          item.css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n      }\n    }\n\n\n  },\n\n  /**\r\n      * Changes the cell visibility\r\n      * @param argument\r\n      */\n  changeCellVisibility: function changeCellVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Hide - show the render\n      if (bizagi.util.parseBoolean(argument) == true) {\n        //control.show();\n        control.css(\"visibility\", \"visible\");\n        control.css(\"display\", \"\");\n\n        self.element && self.element.show();\n      } else {\n        //control.hide();\n        control.css(\"visibility\", \"hidden\");\n      }\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n\n  /**\r\n      * Changes the cell required\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Check if argument is true and control donot have any value\n      if (bizagi.util.parseBoolean(argument) == true && bizagi.util.isEmpty(self.value)) {\n        control.addClass('control-required');\n        control.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      } else {\n        control.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", control).remove();\n      }\n      // Update properties\n      properties.required = argument;\n    }\n  },\n\n  /**\r\n      * Method to create deferred at the moment to start multiaction\r\n      */\n  startActionExecution: function startActionExecution() {\n    var self = this;\n    self.startLoading();\n    self.actionExecutionDeferred = new $.Deferred();\n  },\n\n  /**\r\n      * method to resolve the deferred when multiaction finish\r\n      */\n  endActionExecution: function endActionExecution() {\n    var self = this;\n    self.endLoading();\n    if (self.actionExecutionDeferred) self.actionExecutionDeferred.resolve();\n    delete self.actionExecutionDeferred;\n  },\n\n  /**\r\n      * Method to return the promise to anyone that needs to know if multiaction ended\r\n      * @returns {*}\r\n      */\n  readyActionExecution: function readyActionExecution() {\n    var self = this;\n    if (!self.actionExecutionDeferred) return $.when(true);\n    return self.actionExecutionDeferred.promise();\n  },\n\n  /**\r\n      * Verifies is the elements was inside a new row in a grid\r\n      * @returns {boolean}\r\n      */\n  isFromCreatedRow: function isFromCreatedRow() {\n    var self = this;\n\n    if (self.grid) {\n      var i = self.grid.columns.length;\n\n      while (i-- > 0) {\n        if (self.grid.columns[i].properties.xpath == self.properties.xpath) {\n          if (self.grid.columns[i].isNewRow == true) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Submits a invalidate page cache request\r\n      * @param params\r\n      */\n  submitInvalidatePageCacheRequest: function submitInvalidatePageCacheRequest(params) {\n    var self = this,\n    properties = self.properties;\n    var pageCacheToInvalidate = params ? params.idPageCache : properties.idPageCache;\n\n\n    self.dataService.invalidatePageCache({ idPageCache: pageCacheToInvalidate });\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isDesignMode: function isDesignMode() {\n    return this.getMode() === \"design\";\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isExecutionMode: function isExecutionMode() {\n    return this.getMode() === \"execution\";\n  },\n\n  /***/\n  preventDefaultForAnchorTag: function preventDefaultForAnchorTag() {\n    if (bizagi.util.isSharepointContext() || bizagi.util.isWebpartContext()) {\n      $(\"a[href='#']\", this.getControl()).click(function (ev) {\n        ev.preventDefault();\n      });\n    }\n  },\n\n  getMainForm: function getMainForm(currentForm) {\n    var fromRender = currentForm.params.fromRender;\n    if (typeof fromRender != \"undefined\")\n    this.getMainForm(fromRender.getFormContainer());else\n\n    return currentForm;\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the intersection\r\n      * of a target element with an ancestor element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setInterceptionObserver: function setInterceptionObserver($context, callbackFn) {\n    var self = this;\n\n    var intersectionObserver = new IntersectionObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        intersectionObserver.disconnect();\n      }\n    });\n\n    intersectionObserver.POLL_INTERVAL = 100; // Time in milliseconds.\n    intersectionObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the resize\r\n      * of a target element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setResizeObserver: function setResizeObserver($context, callbackFn) {\n    var self = this;\n\n    var resizeObserver = new ResizeObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        resizeObserver.disconnect();\n      }\n    });\n    resizeObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Restore appearance of grid\r\n      */\n  restoreGridAppearance: function restoreGridAppearance() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.restoreAppearance();\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        for (var i = 0; i < indexes.length; i++) {\n          column.decorateRenders[indexes[i]].restoreCellAppearance();\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Save visual changes of children in grid\r\n      */\n  saveGridChildrenVisualChanges: function saveGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.gridChildrenVisualChanges = [];\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] = cell.visualChanges;\n          }\n\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Restore visual changes of children in grid\r\n      */\n  restoreGridChildrenVisualChanges: function restoreGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            cell.visualChanges = self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] || {};\n          }\n\n        }\n      });\n    }\n\n    delete self.gridChildrenVisualChanges;\n  },\n\n  /**\r\n      * Restore appearance of cell\r\n      */\n  restoreCellAppearance: function restoreCellAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n      switch (command) {\n        case \"color\":\n          self.changeCellColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeCellBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeCellRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditabilityCellControl(self.visualChanges[command], self.surrogateKey, self.properties.xpath);\n          break;\n        case \"visibility\":\n          self.changeCellVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  },\n\n  /**\r\n      * Method to perform the format to value\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  formatValue: function formatValue(value) {\n    return value;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Form Container Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a form container class that defines basic stuff regarding the device\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.form\", {}, {\n  /*\r\n                                              *   Constructor\r\n                                              */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n    var device = bizagi.util.detectDevice();\n\n    // Creates a hashtable to maintain references by id\n    self.rendersById = {};\n    self.rendersByXpath = {};\n    self.rendersByXpathId = {};\n    self.rendersByType = {};\n\n    // Set page cache id\n    self.idPageCache = data.pageCacheId;\n\n    // Set default mode\n    self.mode = params.mode || \"execution\";\n    self.focus = params.focus;\n\n    // Set rendering params\n    self.params = params;\n\n    // Call base\n    this._super(params);\n\n    // Define confirmation message \n    var message = \"\";\n\n    if (device !== \"desktop\") {\n      message = this.getResource(\"render-form-user-confirmation-message\").replace(/<br(\\/| \\/)>/g, \"\\n\");\n    } else {\n      message = this.getResource(\"render-form-user-confirmation-message\");\n    }\n\n    // Default properties\n    var properties = self.properties;\n    properties.sessionId = data.sessionId;\n    properties.displayAsReadOnly = bizagi.util.parseBoolean(data.displayAsReadOnly) || false;\n    properties.userConfirmationMessage = properties.userConfirmationMessage || message;\n    properties.orientation = properties.orientation || \"ltr\";\n    properties.hasRule = bizagi.util.parseBoolean(properties.hasRule) || false;\n    properties.contexttype = params.contexttype || \"\";\n    properties.paramsRender = params.paramsRender || {};\n    properties.processPath = params.data.processPath ? params.data.processPath.replaceAll(\"|/|\", \"  &rsaquo;  \") : \"\";\n    properties.breadCrumb = params.data.processPath ? params.data.processPath.split(\"|/|\") : [];\n    properties.type = properties.type || \"form\";\n\n    // Set validations & actions\n    this.validations = data.validations;\n    this.actions = data.actions;\n\n    // Enable the \"Validate and Save\" action for Form Buttons\n    self.allowValidateAndSaveAction = bizagi.override && bizagi.override.enableActionValidateAndSave === true;\n\n    // Enable execution of Quick actions\n    var enableExecuteQuickActions = bizagi.util.isFeatureEnabled(\"enableExecuteQuickActions\");\n    var allowExecuteQuickActions = enableExecuteQuickActions !== null ? enableExecuteQuickActions : true;\n    self.useQuickActions = allowExecuteQuickActions && self.hasQuickActions(data, allowExecuteQuickActions);\n\n    // Initialize buttons\n    self.initializeButtons(data);\n\n    // Define transitions to Complex Gateway\n    if (data.transitions) {\n      self.transitions = data.transitions;\n    }\n\n    this.originalProcessButton = this.processButton;\n\n    //Custom behaviour for application parent activated.\n    self.isRoutingDisabled = false;\n    if (params.applicationParent) {\n      switch (params.applicationParent) {\n        case 'NEWWORKPORTAL':\n          self.isRoutingDisabled = true;\n          break;}\n\n    }\n\n    self.isOfflineFormsV2Supported = bizagi.util.isMobileDevice() && bizagi.util.isOfflineFormsV2Supported();\n    self.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    self.rendersById[properties.id] = self;\n  },\n\n  /*\r\n     *   Initializes button metadata\r\n     */\n  initializeButtons: function initializeButtons(data) {\n    var self = this;\n\n    self.buttons = [];\n\n    // Process buttons\n    if (data.buttons) {\n      $.each(data.buttons, function (i, item) {\n        var button = item.button.properties;\n\n        // Process caption\n        button.caption = !bizagi.util.isEmpty(button.caption) && self.getResource(button.caption) !== button.caption ? self.getResource(button.caption) : button.caption;\n\n        // Process actions\n        if (button.actions) {\n          $.each(button.actions, function (i, action) {\n            button[action] = true;\n          });\n        }\n\n        // Add other properties\n        button.ordinal = i;\n        button.action = button.next ? \"next\" :\n        button.nextWithoutValidations ? \"nextWithoutValidations\" :\n        button.submitData ? \"save\" :\n        button.cancel ? \"cancel\" :\n        button.back ? \"back\" :\n        button.createnewcase ? \"createnewcase\" :\n        button.validate ? \"validate\" : \"\";\n\n        // Explicit add save operation\n        button.save = button.action === \"save\";\n\n        // Allow Quick action\n        button.quickAction = button.type === \"quickactions\";\n\n        // Add inherent behaviours\n        if (button.next || button.back || button.nextWithoutValidations) {\n          button.routing = true;\n        }\n\n        if (button.hasRule) {\n          button.executeRule = true;\n        }\n\n        if (self.allowValidateAndSaveAction && button.validate) {\n          button.submitData = true;\n          button.refresh = true;\n          button.save = true;\n          if (button.action === \"next\" || button.action === \"createnewcase\") {\n            button.refresh = false;\n          }\n        }\n\n        // Prepare button style\n        button.style = self.buildButtonStyle(button);\n\n        // Add to button array\n        self.buttons.push(button);\n      });\n    }\n  },\n\n  /*\r\n     *   Get the original params used to fetch the form\r\n     */\n  getParams: function getParams() {\n    return this.params;\n  },\n\n  setParam: function setParam(property, value) {\n    if (this.params) {\n      this.params[property] = value;\n    }\n  },\n\n  /*\r\n     *   Get current rendering mode\r\n     */\n  getMode: function getMode() {\n    return this.mode;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    if (self.params) {\n      return self.params.customHandlers;\n    }\n  },\n  /*\r\n     * Method to index renders\r\n     */\n  registerRender: function registerRender(render) {\n    var self = this;\n    var xpath = render.properties.xpath;\n    var id = render.properties.id;\n    var type = render.properties.type;\n    var xpathId = xpath ? xpath + \".\" + id : undefined;\n\n    self.rendersById[id] = render;\n    if (xpath) {\n      if (!self.rendersByXpath[xpath]) {\n        self.rendersByXpath[xpath] = [];\n      }\n      self.rendersByXpath[xpath].push(render);\n    }\n\n    if (xpathId) {\n      if (!self.rendersByXpathId[xpathId]) {\n        self.rendersByXpathId[xpathId] = [];\n      }\n      self.rendersByXpathId[xpathId].push(render);\n    }\n\n    if (!self.rendersByType[type]) {\n      self.rendersByType[type] = [];\n    }\n    self.rendersByType[type].push(render);\n  },\n  /*\r\n     * Method to unregister render\r\n     */\n  unregisterRender: function unregisterRender(render) {\n    var self = this;\n\n    if (self.rendersById[render.properties.id]) {\n      delete self.rendersById[render.properties.id];\n    }\n\n    if (render.properties.xpath) {\n      if ($.isArray(self.rendersByXpath[render.properties.xpath]) &&\n      self.rendersByXpath[render.properties.xpath].length > 1) {\n        for (var i = 0, l = self.rendersByXpath[render.properties.xpath].length; i < l; i++) {\n          var element = self.rendersByXpath[render.properties.xpath][i];\n          if (bizagi.util.md5(JSON.stringify(element.properties)) === bizagi.util.md5(JSON.stringify(render.properties))) {\n            self.rendersByXpath[render.properties.xpath].splice(i, 1);\n            self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id].splice(i, 1);\n            break;\n          }\n        }\n      } else {\n        delete self.rendersByXpath[render.properties.xpath];\n        delete self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id];\n      }\n    }\n\n    // Unregister from renders by type\n    if (render.properties.type) {\n      var listRendesByType = self.getRenderByType(render.properties.type);\n      var listRendesByTypeLength = listRendesByType.length;\n      var renderKey = render.properties.id || render.properties.xpath;\n\n      for (var i = 0; i < listRendesByTypeLength; i++) {\n        var listRender = listRendesByType[i];\n        if (typeof listRender.properties.id != \"undefined\" && listRender.properties.id == renderKey ||\n        typeof listRender.properties.xpath != \"undefined\" && listRender.properties.xpath == renderKey) {\n          // Unregister element\n          self.rendersByType[render.properties.type].splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n  /*\r\n     * Method to access a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this;\n\n    return self.rendersById[id];\n  },\n\n  getGridByColumn: function getGridByColumn(id) {\n    var self = this;\n    var grids = self.getRenderByType('grid');\n    var i = 0,columnIndex;\n\n    for (; i < grids.length; i++) {\n      columnIndex = grids[i].columnsIds.indexOf(id);\n      if (columnIndex != -1) {\n        return grids[i];\n      }\n    }\n\n    return null;\n  },\n\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this;\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath && xpath.indexOf)\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    return self.rendersByXpathId[xpath] ?\n    self.rendersByXpathId[xpath] : self.rendersByXpath[xpath] ?\n    self.rendersByXpath[xpath] : [];\n  },\n  /**\r\n      * Get all render with the same type\r\n      */\n  getRenderByType: function getRenderByType(type) {\n    var self = this;\n\n    // Check that type is defined\n    if (typeof type == \"string\" && type.length > 0) {\n      // Search controls by type\n      return self.rendersByType[type] ? self.rendersByType[type] : [];\n    }\n    return [];\n  },\n\n  /*\r\n     *   Build the container html\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    // TODO: Unify markup of forms. Currently the template has validations to apply a different markup if it is \n    //a query form. In the future, all forms should have the same markup to minimize complexity. See form.tmpl.html.\n    var html = $.fasttmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() === \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation,\n      isEmpty: bizagi.util.isEmpty(self.children) && bizagi.util.isEmpty(self.transitions), // Sections and Gateway\n      allowQuickActions: self.useQuickActions // Quick actions\n    });\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(form) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Add a mode class\n    form.addClass(\"ui-bizagi-rendering-mode-\" + mode);\n\n    // Call base\n    this._super(form);\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    if (form.length > 1) {\n      $(form).each(function () {\n        if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\n          complexGatewayContainer = this;\n        }\n      });\n    } else {\n      complexGatewayContainer = $(\".ui-bizagi-container-complexgateway\", form);\n    }\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Process buttons\n    self.processButtons(form);\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function (e, mainForm) {\n      var $canvas = self.getValidationsContainer(mainForm);\n\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations, $canvas);\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n\n    // Set events for complex gateway interface\n    $(complexGatewayContainer).find(\".ui-checkbox\").bind(\"click\", function () {\n      var checkboxLabel = $(\"label\", this);\n\n      var transitionId = checkboxLabel.data(\"value\") || \"\";\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      if (bizagi.util.parseBoolean(checkboxLabel.data(\"checked\"))) {\n        // Uncheck element\n        checkboxLabel.removeClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", false);\n        self.activeTransitions[transitionId] = false;\n      } else {\n        // Check element\n        checkboxLabel.addClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", true);\n        self.activeTransitions[transitionId] = true;\n      }\n    });\n\n\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n  },\n  /*\r\n     *   Format form buttons to allow further customization\r\n     */\n  buildButtonStyle: function buildButtonStyle(button) {\n\n    var style = {};\n    if (button.format) {\n      if (button.format.size) {\n        if (button.format.size != \"0\") {\n          var newFontSize = 100 + Number(button.format.size) * 10 + \"%\";\n          style[\"font-size\"] = newFontSize + \" !important\";\n        }\n      }\n      if (button.format.bold) {\n        style[\"font-weight\"] = \"bold !important\";\n        if (bizagi.util.isIE()) {\n          style[\"font-family\"] = \"'Open Sans', 'Helvetica Neue', Arial, Helvetica, sans-serif !important\";\n        }\n      }\n      if (button.format.italic) {\n        style[\"font-style\"] = \"italic !important\";\n      }\n      if (button.format.underline || button.format.strikethru) {\n        var strikethru = bizagi.util.parseBoolean(button.format.strikethru) ? \"line-through \" : \"\";\n        var underline = bizagi.util.parseBoolean(button.format.underline) ? \"underline \" : \"\";\n        style[\"text-decoration\"] = strikethru + underline + \" !important\";\n      }\n      if (button.format.background) {\n        style[\"background-color\"] = button.format.background + \" !important\";\n        style[\"background-image\"] = \"none !important\";\n      }\n      if (button.format.color) {\n        style[\"color\"] = button.format.color + \" !important\";\n      }\n    }\n\n    var strStyle = \"\";\n    for (key in style) {\n      strStyle += key + \":\" + style[key] + \";\";\n    }\n    return strStyle;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   Returns a promise\r\n     */\n  render: function render() {\n    var self = this;\n\n    // Creates a deferred, so we can check when form has been included in dom\n    if (!self.readyDeferred)\n    self.readyDeferred = new $.Deferred();\n\n    // Call base\n    var result = this._super();\n\n    return result;\n  },\n  /*\r\n     *   Sets a promise that the form will be included in the DOM\r\n     *   so we can apply some tedious plugins that require that\r\n     */\n  ready: function ready() {\n    var self = this;\n\n    return self.readyDeferred.promise();\n  },\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n  /*\r\n     *  Return context type, when the parent form is entity\r\n     */\n  getContextType: function getContextType() {\n    return this.properties.contexttype || \"\";\n  },\n\n  /*\r\n     * Return the endpoint action, when the form will be refresh\r\n     */\n  getEndPointAction: function getEndPointAction() {\n    var self = this,\n    properties = self.properties;\n\n    if (properties.formtype == \"startform\")\n    return \"LOADSTARTFORM\";\n\n    return undefined;\n\n  },\n\n  /*\r\n     *   Returns the page cache id for the element\r\n     */\n  getPageCache: function getPageCache() {\n    return this.idPageCache;\n  },\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    return this;\n  },\n  /*\r\n     *   Method to process button actions in the form\r\n     */\n  processButtons: function processButtons() {\n    var self = this;\n    var buttons = self.getButtons();\n\n    // Don't process buttons if they are undefined in the template\n    if (!buttons || buttons.length === 0) return;\n\n    // Attach a handler for each button\n    buttons.on(\"click\", function (e) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n\n      self.startLoading();\n\n      var button = $(this);\n      var ordinal = button.attr(\"ordinal\");\n      var buttonProperties = self.buttons.find(function (btn) {\n        return btn.ordinal == ordinal;\n      });\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Disable button to prevent multiple click actions\n      button.prop(\"disabled\", true);\n\n      if (button.hasOwnProperty('disabled')) {\n        button.button(\"disable\"); // Setting styles\n      }\n\n      // External Events\n      self.propagateExternalEvents(e);\n\n      // Execute button\n      // QAF-1418 - add setTimeout\n      var timeOutButton = setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n          if ($.contains(document.documentElement, button.get(0))) {//check if button is still in DOM\n            button.prop(\"disabled\", false); //enable button\n\n            if (button.hasOwnProperty('enable')) {\n              button.button(\"enable\"); //Setting styles\n            }\n          }\n        });\n        clearTimeout(timeOutButton);\n      }, 100);\n    });\n  },\n  /*\r\n     * Execute codes just before sending information to server\r\n     */\n  preProcessButton: function preProcessButton(buttonProperties) {\n    return true;\n  },\n  /*\r\n     * Execute codes just after sending information to server\r\n     */\n  postProcessButton: function postProcessButton(responses, buttonProperties) {\n    return true; // true means continue\n  },\n\n  setLoaderDeferred: function setLoaderDeferred() {\n    var self = this;\n\n    self.loaderDeferred = $.Deferred().resolve();\n  },\n\n  deleteLoaderDeferred: function deleteLoaderDeferred() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        delete self.loaderDeferred;\n      }).fail(function () {\n        delete self.loaderDeferred;\n      });\n    }\n  },\n\n  useOrSetLoaderDeferred: function useOrSetLoaderDeferred() {\n    var self = this;\n\n    if (!self.isLoaderDeferredSet()) {\n      self.setLoaderDeferred();\n    }\n  },\n\n  getLoaderPromise: function getLoaderPromise() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      return self.loaderDeferred.promise();\n    } else {\n      return;\n    }\n  },\n\n  isLoaderDeferredSet: function isLoaderDeferredSet() {\n    var self = this;\n\n    if (self.loaderDeferred) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  appendWaitForLoader: function appendWaitForLoader(params) {\n    var self = this;\n    var promise = params.promise;\n    var create = params.create || false;\n\n    if (!self.isLoaderDeferredSet()) {\n      if (create) {\n        self.setLoaderDeferred();\n      } else {\n        return;\n      }\n    }\n\n    self.loaderDeferred = self.loaderDeferred.then(function () {\n      return function () {\n        return promise;\n      }();\n    });\n  },\n\n  getResolveOrReject: function getResolveOrReject() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        deferred.resolve();\n      }).fail(function () {\n        deferred.resolve();\n      });\n    } else {\n      deferred.resolve();\n    }\n\n    return deferred.promise();\n  },\n\n  /*\r\n     *   Executes a single button action\r\n     */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var properties = self.properties;\n    if (!buttonProperties.routing) {\n      bizagi.chrono.initAndStart(\"submitForm\");\n    }\n    bizagi.chrono.init(\"waiting\");\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Resolve asynchronous tabItems\n    var form = self.getFormContainer();\n    var getAllTabs = form.getRenderByType(\"tabItem\");\n    var getAllTabsLength = getAllTabs.length;\n\n    form.innerTabsLoading = true;\n\n    self.useOrSetLoaderDeferred();\n\n    // Check\n    for (var i = 0; i < getAllTabsLength; i++) {\n      var render = getAllTabs[i];\n      // Resolve internal deferred\n      if (render.loadingDeferred && render.parent.container) {\n        render.loadingDeferred.resolve();\n      }\n    }\n\n    delete form.innerTabsLoading;\n\n    $.when(self.ready(), self.getResolveOrReject()).done(function () {\n      self.deleteLoaderDeferred();\n      // Validate the form\n      var valid = bizagi.util.parseBoolean(buttonProperties.validate) ? self.validationController.performValidations() : true;\n      if (valid) {\n\n        if ([\"save\", \"next\", \"back\", \"createnewcase\", \"nextWithoutValidations\"].includes(buttonProperties.action) && !self.isOfflineForm) {\n          $(document).data('auto-save', '');\n        }\n\n        // Check for user confirmation if configured and the button is configured to enroute\n        var confirmationStatus = self.getConfirmationStatus(properties, buttonProperties);\n\n        if (confirmationStatus.hasConfirmation) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(confirmationStatus.message, null, false)).done(function () {\n            // Submits the form\n            if (self.preProcessButton(buttonProperties)) {\n              //Trigger the event after ProcessButton\n              self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n              $.when(self.submitForm(buttonProperties)).done(function () {\n                defer.resolve();\n              }).fail(function () {\n                defer.reject(arguments);\n              });\n            }\n          }).fail(function () {\n            defer.reject();\n          });\n\n        } else {\n          if (self.preProcessButton(buttonProperties)) {\n            //Trigger the event after ProcessButton\n            self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n            $.when(self.submitForm(buttonProperties)).done(function () {\n              $(document).trigger(\"FORMACTION\", buttonProperties);\n              defer.resolve();\n            }).fail(function () {\n              defer.reject(arguments);\n            });\n          }\n        }\n\n      } else {\n\n        self.endLoading();\n        if (buttonProperties.submitData) {\n          $.when(self.submitData()).done(function () {\n            defer.reject();\n          });\n        } else {\n          defer.reject();\n        }\n\n        self.validationController.expandNotificationBox();\n      }\n\n      var customHandler = self.getCustomHandler(\"afterFormButtonClick\");\n      if (customHandler) {\n        customHandler(buttonProperties);\n      }\n    });\n\n    return defer.promise();\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  validateForm: function validateForm() {\n    var self = this;\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Validate the form\n    return self.validationController.performValidations();\n  },\n  /*\r\n     *   Submits all the form to the server and returns a deferred to check when the process finishes\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions()) {\n      return $.when(function () {\n        return null;\n      });\n    }\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Wait for deferreds\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n\n      var saveParams = {\n        action: \"SAVE\",\n        data: data,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        isOfflineForm: self.isOfflineForm || false };\n\n\n      if (self.isOfflineForm) {\n        saveParams.offlineType = self.params.offlineType;\n      }\n\n      // Submit the form\n      return $.when(self.dataService.submitData(saveParams)).\n      always(function () {\n        self.endLoading();\n      });\n    });\n  },\n  removeCaseSyncError: function removeCaseSyncError() {\n    var editPromise = undefined;\n    if (!this.removeSyncErrorOnSubmit) return;\n    this.removeSyncErrorOnSubmit = false;\n    var offlineType = this.params.offlineType == \"task\" ? \"task\" : \"start\";\n    var editPromise = offlineType == \"start\" ? this.dataService.removeStartCaseSyncError(this.params) :\n    this.dataService.removeTaskCaseSyncError(this.params);\n    return editPromise;\n  },\n  /*\r\n     *   Creates a json array with key values to send to the server\r\n     */\n  submitForm: function submitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.isReadyToSave()).\n    then(function () {\n      if (self.isOfflineForm) {\n        $.when(self.removeCaseSyncError()).\n        then(\n        //Even if the removeSyncError promise fails the internalSubmit should be executed without break the promise chain\n        function () {return self.internalSubmitFormOffline(buttonProperties);},\n        function () {return self.internalSubmitFormOffline(buttonProperties);}).\n\n        then(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      } else\n      {\n        $.when(self.internalSubmitForm(buttonProperties)).\n        done(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      }\n    }).\n    fail(function () {\n      self.endLoading();\n      bizagi.log(\"The form is not saved, no changes were found\");\n      defer.reject();\n    });\n    return defer.promise();\n  },\n  checkWidgetsData: function checkWidgetsData() {\n    //\n  },\n  isComplexGatewayPainted: function isComplexGatewayPainted() {\n    return false;\n  },\n\n  /**\r\n      * Get last action button\r\n      * @returns {*}\r\n      */\n  getLastActionButton: function getLastActionButton() {\n    return this.lastActionButton;\n  },\n\n  /**\r\n      * Internal - Creates a json array with key values to send to the database\r\n      * @param {} buttonProperties\r\n      * @returns {}\r\n      */\n  internalSubmitFormOffline: function internalSubmitFormOffline(buttonProperties) {\n    var self = this;\n    var message = \"\";\n    var data;\n    var defer = $.Deferred();\n\n    if (self.isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.save) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    } else {\n      // When the action is validate            \n      return;\n    }\n\n    var executeButtonAction = null;\n\n    // Start asynchronous operation\n    bizagi.loading.start();\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      // in offline this don't happend => Reset data because when an execute rule operation has been performed, it saved already all the data\n      if (data == undefined) {\n        data = {};\n      }\n\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule_\" + buttonProperties.id;\n    }\n\n    if (self.transitions) {\n      var transitions = [];\n      $.each(this.activeTransitions, function (key, value) {\n        value ? transitions.push(key) : \"\";\n      });\n\n      if (bizagi.util.countProps(transitions) == 0) {\n        bizagi.showMessageBox(\n        bizagi.localization.getResource(\"render-widget-complexgateway-path\"),\n        bizagi.localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n\n        self.endLoading();\n        return \"\";\n      }\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(executeButtonAction);\n    }\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.submitData({\n        action: buttonProperties.action,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        transitions: transitions || \"\",\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: actions })).\n      then(function (responses) {\n\n        if (!self.postProcessButton(responses, buttonProperties)) {\n          return;\n        }\n\n        //Offline action stored\n        var isSaveForDraft = self.params.offlineType !== \"task\" && buttonProperties.action === \"save\";\n        if (self.online && self.isOfflineFormsV2Supported && !isSaveForDraft) {\n          var syncDeferred = new $.Deferred();\n          var syncParams = $.extend({ deferred: syncDeferred }, self.params);\n          $(document).trigger(\"tryPushCase.offline\", syncParams);\n        }\n\n        //Backward comp\n        if (!self.isOfflineFormsV2Supported) {\n          $(document).trigger(\"tryPushData.offline\");\n        }\n\n        $.when(syncDeferred).\n        then(function (result) {\n          bizagi.loading.stop();\n          if (buttonProperties.routing) {\n            if (!self.online && self.isOfflineFormsV2Supported) {\n              self.triggerHandler(\"routing\", {\n                offlineAction: buttonProperties.action,\n                idCase: self.params.idCase,\n                idWorkitem: self.params.idWorkitem,\n                buttonPropertiesAction: buttonProperties.action,\n                radNumber: self.params.radNumber });\n\n            } else {\n              //Show toast synchronized\n              if (self.showToastOnSuccessSync) {\n                self.showToastOnSuccessSync = false;\n                bizagi.util.showMobileToast({\n                  type: \"success\",\n                  message: bizagi.localization.getResource(\"workportal-offline-sync-success\") });\n\n              }\n              self.triggerHandler(\"routing\", {\n                idCase: result.IdCase,\n                caseNumber: result.CaseNumber,\n                buttonPropertiesAction: buttonProperties.action });\n\n            }\n          } else {\n\n            //The case was not sync\n            if (!self.online && result == undefined) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n            // After successfully response refresh the form\n            if (buttonProperties.refresh || result && result.shouldRefresh) {\n              self.refreshForm();\n            }\n            if (self.showToastOnSuccessSync && self.online) {\n              self.showToastOnSuccessSync = false;\n              bizagi.util.showMobileToast({\n                type: \"success\",\n                message: bizagi.localization.getResource(\"workportal-offline-save-and-sync-success\") });\n\n            } else {\n              var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-successful\", \"Saved\");\n              bizagi.util.showNotification({ text: message, stop: false, type: \"success\" });\n            }\n          }\n          defer.resolve();\n        }).\n        fail(function (error) {\n          bizagi.loading.stop();\n          bizagi.util.recreateNativeButtons(self);\n          var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n          bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n          if ($.isArray(error)) {\n            var responses = error;\n            var bHasValidations;\n            var alertMessage = \"\";\n            $.each(responses, function (i, response) {\n              var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n              bHasValidations = propertiesToDisplayMessages.bHasValidations;\n              alertMessage = propertiesToDisplayMessages.alertMessage;\n            });\n            if (bHasValidations && alertMessage !== \"\") {\n              bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n            }\n          }\n          self.failHandler(error);\n          defer.reject(error);\n        });\n      }).fail(function (error) {\n        var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n        bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n        defer.reject(error);\n      });\n    });\n\n  },\n\n  /**\r\n      * To save handSignature or any filetype render after editting in offline mode\r\n      * @param {Array} data - RederValues from collecData() \r\n      */\n  partialSubmitFormOffline: function partialSubmitFormOffline(data) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.dataService.submitData({\n      action: \"save\",\n      data: data,\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      idForm: self.properties.id,\n      prepare: true,\n      transitions: \"\",\n      idCase: self.params.idCase,\n      idWorkitem: self.params.idWorkitem,\n      isOfflineForm: self.isOfflineForm || false,\n      offlineType: self.params.offlineType || \"\",\n      actions: [] })).\n\n    fail(function (error) {\n      var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-fail\", \"Not saved\");\n      bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n      defer.reject(error);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Internal - Creates a json array with key values to send to the server\r\n     */\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var data = {};\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase || buttonProperties.back) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    var submitDataAction = null;\n    var executeButtonAction = null;\n    var performAction = null;\n    var checkpointAction = null;\n    var commitAction = null;\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      if (data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase || buttonProperties.nextWithoutValidations) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi.\n          localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      if (data && data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n\n      performAction = self.dataService.submitData({\n        action: self.getButtonAction(buttonProperties.action),\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n      performAction.tag = \"performAction\";\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n      actions.push(checkpointAction);\n      actions.push(executeButtonAction);\n      actions.push(commitAction);\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    // Execute the batch\n    bizagi.chrono.initAndStart(\"submitForm-ajax\");\n\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply(this, data.deferreds).\n      done(function (response) {\n        flowControlDeferred.resolve(response);\n      }).\n      fail(function () {\n        flowControlDeferred.reject();\n        console.log(\"Error: It was not possible resolve async actions on form \");\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    waitingDeferreds.push(flowControlDeferred);\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.multiaction().execute({ actions: actions })).done(function (responses) {\n        bizagi.chrono.stop(\"submitForm-ajax\");\n        // End asynchronous operation\n        self.endLoading();\n        // Find validations\n        var bHasValidations;\n        var alertMessage = \"\";\n        $.each(responses, function (i, response) {\n\n          var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n          bHasValidations = propertiesToDisplayMessages.bHasValidations;\n          alertMessage = propertiesToDisplayMessages.alertMessage;\n\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase,\n              routingDisabled: buttonProperties.routingDisabled });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else {\n          if (alertMessage !== \"\") {/*If there is an alertMessage show in a modal error*/\n            bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n          }\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        defer.resolve();\n      }).fail(function (res, res2, response) {\n        if (buttonProperties.executeRule) {\n          self.sendRollbackAction(buttonProperties.id);\n        }\n\n        if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\n        response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\n            return $.when(self.internalSubmitForm($.extend({}, buttonProperties, { forcePlanCompletion: true })));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          self.failHandler(response);\n          defer.reject(response);\n        }\n      });\n    });\n    return defer.promise();\n  },\n  validationToDisplayMessages: function validationToDisplayMessages(bHasValidations, messageType, message, alertMessage) {\n    var self = this;\n\n    if (messageType == \"validationMessages\") {\n      // Something went wrong, we gotta display messages in notifications grid\n      self.addValidationMessage(message);\n      bHasValidations = true;\n    }\n    if (messageType == \"alertMessages\") {\n      // Something went wrong, we gotta display alert message\n      if (alertMessage === \"\") {\n        alertMessage = message;\n      } else {\n        alertMessage = alertMessage + \"\\n\\n\" + message;\n      }\n\n      bHasValidations = true;\n    }\n\n    return { \"bHasValidations\": bHasValidations, \"alertMessage\": alertMessage };\n  },\n\n  /*\r\n     *   Add a validation message to the form\r\n     */\n  addValidationMessage: function addValidationMessage(validationMessage, focus, icon, itemAdditionalClass, autofocus, type) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    if (!self.validationController) {\n      var $canvas = self.getValidationsContainer();\n      self.validationController = new bizagi.command.controllers.validation(self, undefined, $canvas);\n    }\n\n    if (typeof validationMessage == \"string\") {\n      self.validationController.showValidationMessage(validationMessage, focus, icon, itemAdditionalClass, type);\n    } else {\n      $.each(validationMessage, function (i, message) {\n        self.validationController.showValidationMessage(message, focus, icon, itemAdditionalClass, type);\n      });\n    }\n    self.validationController.expandNotificationBox(autofocus);\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var self = this;\n\n    // First hide and clear validation box\n    if (self.validationController) {\n      self.validationController.clearValidationMessages(params);\n    }\n\n  },\n  /*\r\n     *   Add an error message to the form\r\n     */\n  addErrorMessage: function addErrorMessage(errorMessage) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    self.validationController.showErrorMessage(errorMessage);\n    self.validationController.expandNotificationBox();\n  },\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm(focus) {\n    var self = this;\n    var properties = self.properties;\n    var deferred = $.Deferred();\n\n    focus = focus || self.getFocus();\n\n    // Normalize new focus structure if not present\n    if (focus && !focus.id) {\n      focus = {\n        id: focus };\n\n    }\n\n    var options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      selectedSection: self.getSelectedSection(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      isRefresh: true,\n      contextType: self.getContextType() || \"\",\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\" };\n\n\n    if (self.isOfflineRefreshWithEdition) {\n      options.isEdited = true;\n      self.isOfflineRefreshWithEdition = false;\n    }\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    self.startLoading();\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n      deferred.resolve();\n    }).fail(function () {\n      deferred.reject();\n    }).always(function () {\n      self.endLoading();\n    });\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Get opened tabs configuration\r\n     */\n  getSelectedTabs: function getSelectedTabs() {\n    var self = this;\n    var tabContainers = self.getElementsByType(\"tab\");\n    var tabs = $.map(tabContainers, function (tabContainer) {\n      return { tab: tabContainer.properties.id, selected: tabContainer.activeTab };\n    });\n    var selectedTabs = {};\n    for (var i = 0, length = tabs.length; i < length; i++) {\n      selectedTabs[tabs[i].tab] = tabs[i].selected;\n    }\n    return selectedTabs;\n  },\n\n  /**\r\n      * Get the actual section selected\r\n      */\n  getSelectedSection: function getSelectedSection() {\n    var params = this.getParams() || {};\n    return params.selectedSection;\n  },\n  /*\r\n     *   Template method to get the buttons objects\r\n     */\n  getButtons: function getButtons() {\n  },\n  /*\r\n     *   Adds an action on the fly to process the submit on change\r\n     */\n  addSubmitAction: function addSubmitAction(xpath, action) {\n    var self = this;\n    self.actionController.processInternalSubmitAction(xpath, action);\n  },\n  /**\r\n      *   Adds an overlay to the form, and sets a waiting message\r\n      *\r\n      *   @argument {bool} delay Apply delay\r\n      */\n  startLoading: function startLoading() {\n    var self = this;\n    var waitingTemplate = self.renderFactory.getTemplate(\"form-waiting\");\n\n    if (self.waitingOverlay && self.waitingMessage)\n    return;\n\n    // This hack is only for desktop\n    if (!bizagi.util.isTabletDevice()) {\n      // Detect canvas parent with scroll\n      var isSharePoint = self.params.context === \"sharepoint\";\n      var canvas = self.params.canvas;\n      if (isSharePoint) {\n        canvas = bizagi.util.scrollTop(canvas);\n\n        if (!!!canvas.context) {\n          canvas = $(\"body\", $(document));\n        }\n      } else {\n        canvas = $(\"body\", $(document));\n      }\n\n      // Configures overlay\n      var size = this.getSize();\n      var position = this.getOffset();\n      if (size.height == $(window).height()) {\n        position.top = 0;\n      }\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(canvas);\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(canvas);\n      self.waitingOverlay.css({\n        \"height\": \"100%\",\n        \"width\": \"100%\",\n        \"min-height\": size.height,\n        \"min-width\": size.width });\n\n      self.waitingMessage.css({\n        \"top\": position.top + Math.ceil((size.height - self.waitingMessage.outerHeight()) / 2) + \"px\",\n        \"left\": Math.ceil((size.width - self.waitingMessage.outerWidth()) / 2) + \"px\" });\n\n      canvas.css(\"position\", \"relative\");\n\n    } else {\n      // Configures overlay\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(\"body\", $(document));\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(\"body\", $(document));\n    }\n  },\n  /*\r\n     *   Removes the overlay and restores the form edition\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n    if (self.waitingOverlay && self.waitingMessage) {\n      self.waitingOverlay.remove();\n      self.waitingMessage.remove();\n      self.waitingOverlay = null;\n      self.waitingMessage = null;\n\n      var canvas = self.params.canvas;\n\n      if (canvas != undefined)\n      canvas.css(\"position\", \"\");\n    }\n  },\n  /*\r\n     *   Get the focused render in the current request\r\n     */\n  getFocusedElement: function getFocusedElement() {\n    var self = this;\n    return self.focus;\n  },\n  /*\r\n     *   Set the focused render in the current request\r\n     */\n  setFocusedElement: function setFocusedElement(focus) {\n    var self = this;\n    self.focus = focus;\n  },\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    return this.triggerHandler(\"globalHandler\", { eventType: eventType, data: data });\n  },\n  /*\r\n     *   Generic handler to attach fail workflow for some operations\r\n     */\n  failHandler: function failHandler(error) {\n    var self = this;\n\n    // Check if the error is in multiaction format\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n    }\n\n    //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n    if (error && error.length && error.length > 1) error = error[0];\n    if (error.error) error = error.error;\n    if (error.error) error = error.error;\n\n    // Handle normal messages\n    if (_typeof(error) == \"object\" && error.message) {\n      if (error.errorType === \"WaitForCompletionPlanException\" || error.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n        error = bizagi.localization.getResource(error.message);\n      } else {\n        error = error.message;\n      }\n\n    } else if (typeof error == \"string\") {\n      // Parse to json\n      try {\n        var errorJson = JSON.parse(error);\n        if (errorJson.errorType === \"WaitForCompletionPlanException\" || errorJson.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n          errorJson.message = bizagi.localization.getResource(errorJson.message);\n        }\n        error = errorJson.message;\n      } catch (e) {\n      }\n    }\n\n    // Workflow engine error, we gotta show it with error\n    self.addErrorMessage(error);\n    self.endLoading();\n  },\n  /* \r\n     *   Resizes the element\r\n     */\n  resize: function resize(size) {\n    // Just save the size, for reference\n    this.setSize(size);\n  },\n  /*\r\n     *   Sets the internal size for the form\r\n     */\n  setSize: function setSize(size) {\n    this.size = size;\n  },\n  /*\r\n     *   Gets the internal size for the form\r\n     */\n  getSize: function getSize() {\n    if (this.size) {\n      return this.size;\n    }\n    var canvas = this.params.canvas ? this.params.canvas : this.getFormContainer().container;\n\n    var canvasWidth = canvas.width();\n    var canvasHeight = canvas.height();\n\n    return {\n      width: canvasWidth,\n      height: canvasHeight };\n\n  },\n  getOffset: function getOffset() {\n    var canvas = this.getFormContainer().container;\n\n    return canvas.offset();\n  },\n\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitData: function submitData(args) {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    return;\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    if (isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    // Don't do anything if there is no data\n    if ($.isEmptyObject(data)) {\n      self.isOfflineRefreshWithEdition = false;\n      return;\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n    var executeSubmitData = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Call the service\n    if (isOfflineForm) {\n      executeSubmitData = self.dataService.submitData({\n        action: self.isRefreshingAfterSync ? \"submitdata\" : \"save\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\",\n        isOfflineForm: isOfflineForm,\n        offlineType: self.params.offlineType,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem });\n\n    } else {\n      executeSubmitData = self.dataService.multiaction().submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        idPageCache: self.properties.idPageCache,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\" });\n\n    }\n\n    return $.when.apply($, waitingDeferreds).then(function () {\n      return $.when(executeSubmitData).fail(function (message) {\n        message = self.processFailMessage(message);\n      });\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n    var deferred = $.Deferred();\n\n    // Concat inheritance context\n    if (properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    $.when(self.dataService.multiaction().executeRule({\n      idPageCache: properties.idPageCache,\n      rule: args.rule,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      var type = message && message.type ? message.type : \"\";\n      var form = self.getFormContainer();\n\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages({ clearOnlyServer: true });\n\n      if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        if (type === \"alertMessages\") {\n          bizagi.modalError && bizagi.modalError.show(message.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n        } else {\n          form.addValidationMessage.apply(self, [message.messages, undefined, undefined, undefined, false, \"serverMessage\"]);\n        }\n\n        deferred.reject(message);\n      } else {\n        deferred.resolve(message);\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n      deferred.reject(message);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * This function send a request to the server to execute an interface\r\n      */\n  executeInterface: function executeInterface(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeInterface({\n      idPageCache: properties.idPageCache,\n      \"interface\": args[\"interface\"],\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute an SAP connector\r\n      */\n  executeSAPConnector: function executeSAPConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeSAPConnector({\n      idPageCache: properties.idPageCache,\n      guidsap: args.guidsap,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an Connector\r\n      */\n  executeConnector: function executeConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.\n      xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeConnector({\n      idPageCache: properties.idPageCache,\n      guidConnector: args.guidConnector,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an pipeline\r\n      */\n  executePipeline: function executePipeline(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executePipeline({\n      idPageCache: properties.idPageCache,\n      pipeline: args.pipeline,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  refreshActions: function refreshActions(actions) {\n    var self = this;\n    self.actionController.refreshActions(actions);\n  },\n  /***/\n  tryToExecuteFunction: function tryToExecuteFunction(xpath) {\n    if (this.getMode() == \"execution\") {\n      this.actionController && this.actionController.tryToExecuteFunction(xpath);\n    }\n  },\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  removeActions: function removeActions() {\n    var self = this;\n    self.actionController.unbindActions();\n  },\n  /*\r\n     *   Iterate through all renders and collect the data to send, then update original values for each render\r\n     */\n  collectRenderValuesForSubmit: function collectRenderValuesForSubmit(data) {\n    var self = this;\n    data = data || {};\n\n    // Collect data\n    self.collectRenderValues(data);\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    return data;\n  },\n\n  /**\r\n      *\r\n      * @param params {data, bRefreshForm,properties}\r\n      * @returns {*}\r\n      */\n  internalSubmitOnChange: function internalSubmitOnChange(params) {\n    params = params || {};\n    var self = this;\n    var properties = params.properties;\n    var defer = new $.Deferred();\n    var data = params.data || {};\n    var bRefreshForm = typeof params.bRefreshForm != \"undefined\" ? params.bRefreshForm : true;\n    var notCollect = params.notCollect ? params.notCollect : undefined;\n\n    // Collect data\n    if (!(notCollect && !$.isEmptyObject(data))) {\n      self.collectRenderValuesForSubmit(data);\n    }\n\n    self.startLoading();\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      // Submit the form\n      self.dataService.multiaction().submitData({\n        action: \"SUBMITONCHANGE\",\n        data: data,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype }).\n      done(function (response) {\n        // Cancel previous multiactions and process property value\n        self.cancelPreviousRequest();\n        // After successfully response refresh the form\n        self.endLoading();\n        // If response message has error in validation, do not refresh the form\n        // and show validation message\n        if (response && response.type == \"validationMessages\") {\n          if (typeof self.clearValidationMessages == \"function\") {\n            self.clearValidationMessages();\n          }\n\n          self.addValidationMessage(response.messages);\n          defer.resolve();\n        } else if (bRefreshForm) {\n          var focusIdentifier = {\n            id: properties.id,\n            xpath: properties.xpath };\n\n          if (properties.idCase !== undefined) {\n            $.extend(focusIdentifier, {\n              idCaseObject: bizagi.cache.idCaseObject });\n\n          }\n          if (response.IdScope) {\n            self.properties.idStartScope = response.IdScope;\n          }\n          $.when(self.refreshForm(focusIdentifier)).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.resolve();\n          });\n        } else {\n          defer.resolve();\n        }\n      }).fail(function (message) {\n        self.endLoading();\n        var objMessage = _typeof(message) == 'object' ? message.responseText ? JSON.parse(message.responseText) : message : {};\n        var strMessage = objMessage.message || message;\n        var type = objMessage.type || \"error\";\n\n        // Omit processing when the ajax didn't process\n        if (![\"not-processed\", \"not-shown\"].includes(type)) {\n          // Clear previous validations\n          self.validationController.clearValidationMessages();\n\n          if (objMessage.type === \"alert\") {\n            self.validationController.showAlertMessage(strMessage);\n          } else {\n            self.validationController.showErrorMessage(strMessage);\n          }\n        }\n\n        defer.resolve();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  cancelPreviousRequest: function cancelPreviousRequest() {\n    if (bizagi.multiactionConnection && bizagi.multiactionConnection.length) {\n      var length = bizagi.multiactionConnection.length;\n      var i = 0,connection;\n      for (; i < length; i++) {\n        connection = bizagi.multiactionConnection.pop();\n        if (connection && connection.abort) {\n          bizagi.showErrorAlertDialog = false;\n          connection.abort();\n        }\n      }\n    }\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(buttonId) {\n    var self = this;\n\n    var checkpointAction = self.dataService.sendCheckpoint({\n      url: self.properties.checkpointUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    checkpointAction.tag = \"checkpoint\";\n\n    return checkpointAction;\n  },\n\n  prepareCommitAction: function prepareCommitAction(buttonId) {\n    var self = this;\n\n    var commitAction = self.dataService.commitLinkForm({\n      url: self.properties.commitUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    commitAction.tag = \"commit\";\n\n    return commitAction;\n  },\n\n  sendRollbackAction: function sendRollbackAction(buttonId) {\n    var self = this;\n\n    self.dataService.rollbackLinkForm({\n      url: self.properties.rollbackUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache });\n\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    self.endLoading();\n\n    var timeOutController = setTimeout(function () {\n      if (self.params) {\n        delete self.params.canvas;\n      }\n      delete self.params;\n      delete self.control;\n      if (self.validationController) {\n        self.unbind(\"rendervalidate\");\n        delete self.validationController;\n      }\n\n      if (self.actionController) {\n        self.actionController.unbindActions();\n        delete self.actionController;\n      }\n      clearTimeout(timeOutController);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n  getButton: function getButton(guid) {\n    return $(\".ui-bizagi-button[data-id='\" + guid + \"']\", this.container);\n  },\n\n  getFloatingButton: function getFloatingButton(guid) {\n    return $(\"li[data-id='\" + guid + \"']\", this.container);\n  },\n\n  propagateExternalEvents: function propagateExternalEvents(evt) {\n    // Menu-Overflow\n    var $menuOverflow = $(\".bz-overflow-menu\");\n    if ($menuOverflow)\n    $(document).trigger('click.overflow');\n\n    // ECM with preview image\n    var zoomIsOpen = $(\".jquery-image-zoom\") && $(\".jquery-image-zoom\").css(\"display\") == \"block\";\n\n    if (zoomIsOpen)\n    $(\"div.jquery-image-zoom a\").click();\n  },\n\n  getButtonAction: function getButtonAction(action) {\n    return this.allowValidateAndSaveAction && action === \"validate\" ? \"save\" : action;\n  },\n\n  /***/\n  isConnected: function isConnected() {\n    return true;\n  },\n\n  /**\r\n      * Add handlers to network management\r\n      */\n  configureNetworkHandlers: function configureNetworkHandlers() {\n    var self = this;\n    self.online = bizagi.util.isConnected();\n    if (self.isOfflineForm && bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      self.online = self.getParams().online;\n      console.log(\"CONNECTED: \", self.online);\n    }\n\n    // Update the online status based on connectivity\n    if (bizagi.util.isNativeMobileDevice() || bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      $(document).off(\"online.form\");\n      $(document).on(\"online.form\", this.handleConnectionChange.bind(self));\n\n      $(document).off(\"offline.form\");\n      $(document).on(\"offline.form\", this.handleConnectionChange.bind(self));\n\n      //Connection gained with form opened\n      $(document).off(\"offline-notify-form-sync-event\");\n      $(document).on(\"offline-notify-form-sync-event\", this.handleOfflineSyncEvent.bind(self));\n    }\n  },\n\n  /**\r\n      * Event handler\r\n      * @param event\r\n      */\n  handleConnectionChange: function handleConnectionChange(event) {\n    var form = this.getFormContainer();\n    if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      this.online = event.type === \"online\";\n    } else {\n      this.online = bizagi.util.isConnected();\n    }\n\n    // You lost connection.\n    if (event.type === \"offline\") {\n      form.triggerHandler(\"offlineForm\");\n    }\n\n    // You are now back online.\n    if (event.type === \"online\") {\n      form.triggerHandler(\"onlineForm\");\n    }\n  },\n\n  /**\r\n      * Push successful hanlder, refresh form and copy current work\r\n      */\n  handleOfflineSyncEvent: function handleOfflineSyncEvent(event, params) {\n    var self = this;\n    var formParams = self.params || {};\n    if (formParams.hasSyncError) {\n      return;\n    }\n    var offlineFormId = formParams.idCase + \"-\" + formParams.idWorkitem;\n    switch (params.type) {\n      case \"download-form-success\":\n        /**\r\n                                     * 1. Store current data in offline submit\r\n                                     * 2. Refresh form\r\n                                     * 3. Merge data using offline isEdited method\r\n                                     */\n        var paramsId = params.idCase + \"-\" + params.idWorkitem;\n        if (offlineFormId === paramsId) {\n          console.log(\"Form downloaded successfully. It will be refreshed\", params);\n\n          $.when(self.dataService.database.validateLocalDataForTaskExists(paramsId).then(function (dataResult) {\n            if (dataResult === true) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n\n            $.when(self.refreshForm(null, false)).then(function () {\n              applySyncLoader(false);\n            });\n          }));\n        }\n        break;\n      case \"push-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"push-tasks-error\":\n        applySyncLoader(false);\n        if (self.validationController != undefined) {\n          self.validationController.clearValidationMessages();\n          self.validationController.showErrorMessage(params.message);\n        }\n        break;\n      case \"fetch-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"download-finished\":{\n          applySyncLoader(false);\n          break;\n        }\n      case \"download-error\":\n        applySyncLoader(false);\n        break;\n      default:\n        console.warn(\"Event hast not implementation in bizagi.rendering.form - handleOfflineSyncEvent\", params.type, params);\n        break;}\n\n\n    function applySyncLoader(isStart) {\n      var loaders = 3;\n      var proceed = false;\n      if (isStart) {\n        proceed = !(self.isSyncLoaderRunning === true);\n      } else\n      {\n        proceed = self.isSyncLoaderRunning === true;\n      }\n      if (proceed) {\n        self.isSyncLoaderRunning = isStart;\n        for (var loaderIndex = 0; loaderIndex < loaders; loaderIndex++) {\n          if (isStart) {\n            bizagi.loading.start();\n          } else\n          {\n            bizagi.loading.stop();\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Check if allow to call the button actions\r\n      * @returns {boolean|*}\r\n      */\n  allowOnlineActions: function allowOnlineActions() {\n    if (typeof this.online === \"undefined\") return true;\n    return this.online || !this.online && this.isOfflineForm;\n  },\n\n  /**\r\n      * Method to process button actions in the form\r\n      * @param ordinal\r\n      */\n  processQuickButton: function processQuickButton(ordinal) {\n    var self = this;\n    var buttonProperties = self.buttons.find(function (btn) {\n      return btn.ordinal == ordinal;\n    });\n\n    if (buttonProperties) {\n\n      self.startLoading();\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Execute button - QAF-1418 - add setTimeout\n      setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n        });\n      }, 100);\n\n    }\n\n  },\n\n  /**\r\n      * Check if quick actions are configured\r\n      * @param data\r\n      * @param isEnable\r\n      * @returns {boolean}\r\n      */\n  hasQuickActions: function hasQuickActions(data, isEnable) {\n\n    if (!isEnable) return false;\n\n    return (data.buttons || []).some(function (item) {\n      var button = item.button.properties;\n      return button && button.type === \"quickactions\";\n    });\n\n  },\n\n  /**\r\n      * Perform validation container\r\n      * @param form\r\n      * @param mainForm\r\n      * @returns {*}\r\n      */\n  getValidationsContainer: function getValidationsContainer(mainForm) {\n    var form = this;\n    var formContainer = typeof mainForm !== \"undefined\" ? mainForm : form;\n\n    return formContainer.container;\n\n  },\n\n  /**\r\n      * Return if exist confirmation user and the message\r\n      * @param {*} formProperties \r\n      * @param {*} buttonProperties \r\n      */\n  getConfirmationStatus: function getConfirmationStatus(formProperties, buttonProperties) {\n    var hasButtonsConfirmation = bizagi.util.parseBoolean(buttonProperties.needsUserConfirmation) || false;\n    var buttonConfirmationMsg = buttonProperties.userConfirmationMessage || \"\";\n\n    var hasFormConfirmation = bizagi.util.parseBoolean(formProperties.needsUserConfirmation) && bizagi.util.parseBoolean(buttonProperties.routing);\n    var formConfirmationMsg = formProperties.userConfirmationMessage || \"\";\n\n    var messageConfirmation = hasButtonsConfirmation ? buttonConfirmationMsg : formConfirmationMsg;\n\n    return {\n      hasConfirmation: hasButtonsConfirmation || hasFormConfirmation,\n      message: messageConfirmation };\n\n  },\n\n  saveWorkInProgress: function saveWorkInProgress() {\n    var self = this;\n    var data = self.collectRenderValuesForSubmit();\n    if (!bizagi.util.isEmpty(data)) {\n      return self.dataService.submitData({\n        action: 'submitdata',\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: [] });\n\n    } else {\n      return $.Deferred().resolve(undefined).promise();\n    }\n  },\n\n  /**\r\n      * Check if it is a start form\r\n      * @returns {*|boolean}\r\n      */\n  isStartForm: function isStartForm() {\n    var form = this.getFormContainer();\n    var formType = form && form.properties && form.properties.formtype || \"\";\n\n    return /startform/i.test(formType);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Combo Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for combo renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.combo\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.hasLocalData = properties.data || false;\n    // TODO: Review additional value in radio control\n    properties.value = properties.value && properties.value.length > 0 ? properties.value[0] : properties.defaultValue && properties.defaultValue.length > 0 ? properties.defaultValue[0] : null;\n\n    if (typeof properties.enableTyping === \"undefined\") properties.enableTyping = true;\n    if (properties.value && properties.value.id === undefined) properties.value = null;\n    this.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData) {\n      properties.data = this.complementData(properties.data);\n    }\n\n    // This line is to set a flag to fetch the data when rendering, or on demand, by default is false, overriding it on desktop implementation\n    properties.loadOnDemand = false;\n  },\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var params = {};\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n\n    if (self.isDependant && self.properties && /^cascadingcombo$/i.test(renderType) && self.getParentCombo) {\n      var valueControl = self.getParentCombo().getValue();\n      if (valueControl && valueControl.id) {\n        params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = valueControl.id;\n      }\n    }\n\n    return self.renderCombo(params);\n  },\n\n  /*\r\n     *   Renders the combo\r\n     */\n  renderCombo: function renderCombo(params) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.loadOnDemand) {\n      // Render the combo without data\n      var html = self.renderComboTemplate();\n      return html;\n    } else {\n\n      // Set data promise \n      var defer = new $.Deferred();\n      var dataPromise = self.getData(params);\n\n      // Attach callback \n      $.when(dataPromise).done(function (data) {\n        // Render combo\n        var html = self.renderComboTemplate(data);\n        self.properties.data = data;\n        defer.resolve(html);\n\n      }).fail(function (data) {\n        var html = self.renderComboTemplate({});\n        defer.resolve(html);\n      });\n\n      // Returns a promise so we can hold post-render method until this is done\n      return defer.promise();\n    }\n  },\n\n  renderComboTemplate: function renderComboTemplate(data) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var emptyValue = bizagi.override.emptyLabelForCombo || self.getResource(\"render-combo-empty-selection\");\n    var value = properties.value ? \"\" : emptyValue;\n    data = data || self.properties.data || {};\n\n    if (self.properties.type === \"columnCombo\" && value === \"\" && _typeof(properties.value) === \"object\" && properties.value.id === \"\" && (properties.value.value === \"\" || properties.value.value === self.getResource(\"render-combo-empty-value\"))) {\n      value = self.getResource(\"render-combo-empty-selection\");\n    }\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: data,\n      align: properties.valueAlign,\n      value: value,\n      editable: properties.editable }));\n\n\n\n    return html;\n  },\n\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self._super();\n    var item = self.getValue();\n    var control = self.getControl();\n\n    if (self.control && self.control.parent()) {\n      self.control.parent().addClass(\"ui-bizagi-noneditable-\" + self.properties.displayType);\n    }\n    if (item) {\n\n      if (item.value != null && typeof item.value === \"boolean\") {\n        if (bizagi.util.parseBoolean(item.value) === true) {\n          item.value = this.getResource(\"render-boolean-yes\");\n\n        } else if (bizagi.util.parseBoolean(item.value) == false) {\n          item.value = this.getResource(\"render-boolean-no\");\n        }\n      }\n\n      // Returns the cached value from the properties to avoid server side fetching\n      if (self.getResource(\"render-combo-empty-value\") === item.value || self.getResource(\"render-combo-empty-selection\") === item.value) {\n        control.text(\"\");\n      } else {\n        control.html(\"<label class='readonly-control'>\" + self.formatItem(item.value) + \"</label>\");\n      }\n    } else {\n      // Render empty \n      control.text(\"\");\n    }\n  },\n\n  /*\r\n     *   Gets the template used by the combo render\r\n     *   can be overriden in subclasses to reuse logic and just change the template\r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  },\n\n  /*\r\n     *   Determines if we need to show the empty node or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showEmpty: function showEmpty() {\n    return true;\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    return true;\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var mode = self.getMode();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode !== \"execution\") return self.getDummyData();\n\n    if (properties.hasLocalData || isOfflineForm) {\n\n      // Resolve with local data    \n      defer.resolve(properties.data);\n\n    } else {\n      var renderType = bizagi.util.normalizeType(properties.type);\n\n      // Check if the data has been cached\n      if (properties.remoteDataLoaded && !/^cascadingcombo$/i.test(renderType)) {\n        defer.resolve(properties.data);\n      } else {\n        // Go to server\n        self.dataService.multiaction().getData({\n          url: properties.dataUrl,\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache,\n          extra: params,\n          contexttype: self.properties.contexttype || null }).\n        done(function (data) {\n\n          // Resolve the data\n          if (!properties.recalculate) {\n            properties.remoteDataLoaded = true;\n          }\n          properties.data = self.complementData(data);\n          defer.resolve(properties.data);\n\n        }).fail(function (data) {\n\n          var allowActions = true;\n          var form = self.getFormContainer();\n\n          if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\")\n          allowActions = form.allowOnlineActions();\n\n          if (data.type === \"not-processed\" && allowActions)\n          return;\n\n          // Show error from server\n          var msgObj = self.properties.displayName + \": \";\n\n          if (typeof data === \"string\") {\n            var auxMsg = JSON && JSON.parse(data) || $.parseJSON(data);\n          } else {\n            var auxMsg = data;\n          }\n\n          msgObj += auxMsg.message;\n\n          form.addValidationMessage(msgObj);\n\n          defer.reject(data);\n        });\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n     */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      properties.data = [];\n      properties.data = self.complementData(properties.data);\n\n      // Add another data\n      properties.data.push({ id: \"\", value: \"Item 1\" });\n      properties.data.push({ id: \"\", value: \"Item 2\" });\n\n      return properties.data;\n    }\n  },\n\n  /*\r\n     *   Resets the data in order to fetch it again when needed\r\n     */\n  resetData: function resetData() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.hasLocalData = false;\n    properties.data = null;\n    properties.remoteDataLoaded = false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n\n    if (self.combo && self.combo.length > 0) {\n      // When there is a combo painted, we fetch the selected value from it\n      return self.getSelectedValue();\n    } else {\n      var displayValue = \"\";\n      var item = self.getValue();\n\n      if (item) {\n        // Check on cached propert from server first if the key exists\n        displayValue = self.formatItem(item.value);\n      }\n\n      return displayValue;\n    }\n  },\n\n\n  /*\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n  },\n\n  /*\r\n     *   Adds custom parameters to process the template\r\n     */\n  getTemplateParams: function getTemplateParams() {\n    return {};\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n\n    if (value !== undefined && value !== null) {\n      if ($.isArray(value)) {\n\n        for (var i = 0, length = value.length; i < length; i++) {\n          if (value[i] != null && typeof value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value[i]) === true) {\n              value[i] = this.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value[i]) === false) {\n              value[i] = this.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n        return value.join(\" - \");\n      } else {\n        return value;\n      }\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos        \n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) === \"object\" && (value.id === undefined || value.id === \"\")) {\n          renderValues[properties.xpath] = \"\";\n        } else {\n          // Add the value to the server\n          renderValues[properties.xpath] = typeof value.id !== \"undefined\" ? value.id : \"\";\n        }\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var currentValue = self.getValue();\n    var originalValue = properties.originalValue;\n    var defaultValue = properties.defaultValue;\n\n    var result = true;\n\n    if ($.forceCollectData) {\n      return result;\n    }\n\n    currentValue = currentValue && currentValue.length !== undefined ? currentValue[0] : currentValue;\n    originalValue = originalValue && originalValue.length !== undefined ? originalValue[0] : originalValue;\n    defaultValue = defaultValue && defaultValue.length !== undefined ? defaultValue[0] : defaultValue;\n\n    currentValue = currentValue && currentValue.id !== undefined ? currentValue.id : currentValue;\n    originalValue = originalValue && originalValue.id !== undefined ? originalValue.id : originalValue;\n    defaultValue = defaultValue && defaultValue.id !== undefined ? defaultValue.id : defaultValue;\n\n    if (defaultValue !== undefined) {\n      if (defaultValue != originalValue || defaultValue != currentValue) {\n        result = true;\n      } else {\n        result = false;\n      }\n    } else {\n      result = currentValue != originalValue ? true : false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     * Parses additional values info in order to format them correctly\r\n     */\n  parseAdditionalValues: function parseAdditionalValues(data) {\n    var self = this;\n\n    return $.map(data, function (item) {\n      var value = item.value ? self.formatItem(item.value) : item;\n      var newItem = { id: item.id, value: value };\n\n      if (item.hidden) newItem.hidden = true;\n      return item;\n    });\n  },\n\n  /*\r\n     *   Complement data from server before control implementation\r\n     */\n  complementData: function complementData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var bCurrentDataFound = false;\n    $.each(data, function (i, item) {\n\n      if (item.value !== undefined && item.value !== null) {\n        item.value = self.formatItem(item.value);\n        if (properties.value) {\n          if (item.id == properties.value.id) {\n            bCurrentDataFound = true;\n          }\n        }\n      } else {\n        item.value = \"\";\n      }\n    });\n\n    // Add empty node if configured\n    if (self.showEmpty()) {\n      var emptyFound = false;\n      for (var i = 0, length = data.length; i < length; i++) {\n        if (data[i].id === \"\") {\n          emptyFound = true;\n          break;\n        }\n      }\n\n      if (!emptyFound) {\n        var dataValue = bizagi.override.emptyLabelForCombo || bizagi.localization.getResource(\"render-combo-empty-value\");\n        data.unshift({ id: \"\", value: dataValue });\n      }\n    }\n\n    if (properties.value) {\n      if (!bCurrentDataFound && self.showCurrentData()) {\n        data.unshift({ id: properties.value.id, value: properties.value.value, hidden: true });\n      }\n    }\n\n    // Add additional value\n    return self.parseAdditionalValues(data);\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    var currentValue = self.getValue();\n\n    if (bizagi.util.isEmpty(currentValue)) return false;\n    if (Object.prototype.toString.apply(currentValue) === \"[object Object]\" && (bizagi.util.isEmpty(currentValue.id) || currentValue.id == 0)) return false;\n\n    // Else\n    return true;\n  },\n\n  /*\r\n     * Cleans current data\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    this.column && !this.column.comboData && this.getData();\n  },\n\n  isExtraItem: function isExtraItem() {\n    var self = this;\n    var data = self.value || {};\n    var value = data.value || \"\";\n\n    return value === \"\" || value === self.getResource(\"render-combo-empty-selection\") || value === self.getResource(\"render-combo-empty-value\");\n  },\n\n  escapeValue: function escapeValue(value) {\n    if (bizagi.util.isString(value)) {\n      var valueToReturn = value.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n      return valueToReturn;\n    } else {\n      return value;\n    }\n  },\n\n  /**\r\n      *  Maps the value, when this one comes from actions\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  validateValue: function validateValue(value) {\n    if (value.id != undefined && (typeof value.id === \"number\" && value.id !== null || typeof value.id === \"string\" && value.id.length > 0)) {\n      if (value.value !== null && typeof value.value === \"boolean\") {\n        translated = true;\n        if (bizagi.util.parseBoolean(value.value) === true) {\n          value.value = bizagi.localization.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(value.value) === false) {\n          value.value = bizagi.localization.getResource(\"render-boolean-no\");\n        }\n      } else if (value.value != null && _typeof(value.value) === \"object\") {\n        for (var i = 0, length = value.value.length; i < length; i++) {\n          if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value.value[i]) === true) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Finds an element in the combo data values by id\r\n      * @param {int} id\r\n      * @returns {Object}\r\n      */\n  findDataValueById: function findDataValueById(id) {\n    return (this.properties.data || []).find(function (e) {\n      return e.id == id;\n    });\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Render Date Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for date renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.date\", {}, {\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n    var ud = bizagi.util.dateFormatter;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/gi) === -1) {\n        properties.fullFormat = properties.fullFormat + \" \" + properties.timeFormat;\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = ud.getDateFromInvariant(properties.value, properties.showTime);\n      // Format date to current format\n      if (date != 0) {\n        // Value must always hold the value with invariant format\n        self.value = properties.value;\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else {\n        self.value = null;\n      }\n    }\n\n    // Fix dateFormat for datepicker\n    dateFormat = self.getDateFormat(properties.fullFormat);\n\n    var indexDateTimeSeparation = properties.fullFormat.substring(0, properties.fullFormat.indexOf(\":\")).lastIndexOf(\" \");\n    if (!properties.showTime)\n    properties.fullFormat =\n    indexDateTimeSeparation > 0 ? properties.fullFormat.substring(0, indexDateTimeSeparation) : properties.fullFormat;\n\n    properties.datePickerFormat = dateFormat.datePickerFormat;\n    properties.timePickerFormat = dateFormat.timePickerFormat;\n\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"date\");\n    var fullFormat = properties.fullFormat;\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      showTime: properties.showTime,\n      value: properties.value,\n      editable: properties.editable,\n      dateFormat: bizagi.override && bizagi.override.uppercaseDatePlaceholder === true ? fullFormat.toUpperCase() : fullFormat,\n      rtl: properties.orientation == \"rtl\" });\n\n    return html;\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers(intHandler, isNow) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set control references\n    var dateControl = self.getDateControl();\n    var timeControl = self.getTimeControl();\n\n    // Attach change event\n    dateControl.bind(\"change\", function () {\n      self.onChangeHandler();\n    });\n\n    if (properties.showTime) {\n      timeControl.bind(\"change\", function (e, isNow) {\n        if (self.updatingTime) {\n          delete self.updatingTime;\n          return;\n        }\n        self.onChangeHandler(isNow);\n      });\n    }\n  },\n\n  /*\r\n      *   Formats the date time value to the hidden control\r\n      */\n  onChangeHandler: function onChangeHandler() {\n  },\n\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var displayValue;\n\n    if (!properties.displayValue && value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n    } else {\n      displayValue = \"\";\n    }\n\n    // We can return the display value isntance\n    return properties.displayValue || displayValue || \"\";\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          // Formats the value in full invariant (with time) in order to send to the server\n          var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n          if (typeof date != \"undefined\")\n          if (date !== 0) {\n            if (!properties.showTime) {\n              date.setHours(0, 0, 0, 0);\n            }\n            renderValues[properties.xpath] = bizagi.util.dateFormatter.formatInvariant(date, true);\n          }\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n  },\n\n  /*\r\n      *   Gets the time control\r\n      */\n  getTimeControl: function getTimeControl() {\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable) === true) {\n        value = self.getNormalizeDate(bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime));\n        var message;\n\n        // Check that we have a valid data\n        if (value != 0) {\n          // Check min value\n          if (properties.minValue && (typeof properties.minValue === \"string\" || typeof properties.minValue == \"number\")) {\n            var minValue = self.getNormalizeDate(\n            typeof properties.minValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.minValue, properties.showTime) :\n            new Date(properties.minValue));\n\n\n            if (value < minValue) {\n              message = this.getResource(\"render-date-minimum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#minValue#\", bizagi.util.dateFormatter.formatDate(minValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n\n          // Check max value\n          if (properties.maxValue && (typeof properties.maxValue == \"string\" || typeof properties.maxValue == \"number\")) {\n            var maxValue = self.getNormalizeDate(\n            typeof properties.maxValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.maxValue, properties.showTime) :\n            new Date(properties.maxValue));\n\n\n            if (value > maxValue) {\n              message = this.getResource(\"render-date-maximum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#maxValue#\", bizagi.util.dateFormatter.formatDate(maxValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n        }\n      }\n    }\n    return bValid;\n  },\n\n  /**\r\n      * Translate standar date format to jquery date picker\r\n      * @property {string} format Control's date format\r\n      * @returns {JSON object} A JSON Object whith the date and time format\r\n      */\n  getDateFormat: function getDateFormat(format) {\n    var datePickerFormat = format;\n    var timePickerFormat = undefined;\n    var init;\n\n    if (format.search(\"h\") != -1 || format.search(\"H\") != -1) {\n      if (format.search(\"h\") != -1) {\n        init = format.search(\"h\");\n      } else {\n        init = format.search(\"H\");\n      }\n\n      datePickerFormat = format.substring(0, init - 1);\n      timePickerFormat = format.substr(init);\n    }\n\n    // Fix month\n    if (datePickerFormat.indexOf(\"MMMM\") >= 0) {\n      datePickerFormat = datePickerFormat.replaceAll(\"MMMM\", \"MM\");\n    } else if (datePickerFormat.indexOf(\"MMM\") >= 0) {\n      // Month name short\n      datePickerFormat = datePickerFormat.replaceAll(\"MMM\", \"M\");\n    } else if (datePickerFormat.indexOf(\"MM\") >= 0) {\n      // Month two digits\n      datePickerFormat = datePickerFormat.replaceAll(\"MM\", \"mm\");\n    } else if (datePickerFormat.indexOf(\"M\") >= 0) {\n      // Month one digits\n      datePickerFormat = datePickerFormat.replaceAll(\"M\", \"m\");\n    }\n\n    // Fix years\n    if (datePickerFormat.search(\"yyyy\") != -1) {\n      datePickerFormat = datePickerFormat.replaceAll(\"yyyy\", \"yy\");\n    } else {\n      if (datePickerFormat.search(\"yy\") != -1) {\n        datePickerFormat = datePickerFormat.replaceAll(\"yy\", \"y\");\n      }\n    }\n\n    datePickerFormat = datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n\n    return {\n      datePickerFormat: datePickerFormat,\n      timePickerFormat: timePickerFormat };\n\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    this._super();\n    if (typeof properties.maxValue == \"undefined\")\n    properties.maxValue = \"12/31/\" + parseInt(new Date().getFullYear() + 200).toString() + \" 00:00:00\"; //Current year + 200 IE or 9999\n    if (typeof properties.minValue == \"undefined\")\n    properties.minValue = \"01/01/\" + parseInt(new Date().getFullYear() - 200).toString() + \" 00:00:00\"; //Current year - 200 IE or 1753 for SQL Server compat\n  },\n\n  /**\r\n      * Sets milliseconds to 0 in date\r\n      * @param {Date} date date to be treated\r\n      * @returns {Date} date converted with milliseconds 0\r\n      */\n  getNormalizeDate: function getNormalizeDate(date) {\n    var self = this;\n    if (date != 0 && date != null) {\n      if (!self.properties.showTime) {\n        date.setHours(0, 0, 0, 0);\n      } else date.setMilliseconds(0);\n    }\n    return date;\n  },\n\n  /**\r\n      * Configure the timeformat\r\n      */\n  getTimeFormat: function getTimeFormat(format) {\n    return format.replaceAll(\"m\", \"i\").replaceAll(\"tt\", \"A\");\n  },\n\n  /**\r\n      * Sets value to the control\r\n      * @param {Date} date date to asign\r\n      * @returns {}\r\n      */\n  setValueFromCalendarButtons: function setValueFromCalendarButtons(date) {\n    var self = this;\n    if (date) date = self.getNormalizeDate(date);else\n    {\n      value = null;\n      self.setValue(\"\");\n      self.setDisplayValue(\"\");\n    }\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.minValue = value;\n    }\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.maxValue = value;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Text Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for text renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.extendedText\", {}, {\n\n  /**\r\n                                                       * Update or init the element data\r\n                                                       * @param {} data\r\n                                                       */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    this.hasMaxLines = this.properties.maxLines ? true : false;\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // Fill default properties\n    properties.maxLines = this.properties.maxLines || 6;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || self.getResource(\"render-text-regular-expression-default-message\");\n\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"extendedText\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n\n    var control = self.getControl();\n    self.textarea = control.find(\"textarea\");\n\n    // If is textarea, then enable resize element.\n    if (self.textarea) {\n      self.textarea.css({ resize: \"both\" });\n    } else {\n      self.textarea.css({ resize: \"none\" });\n    }\n\n    // Attach event for retype double\n    if (self.properties.retype === \"double\")\n    self.attachRetypeDouble();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set the default maxlength for the input if is 0 or undefined set to infinity\n    // this resolve issue with scope strings that don't have maxlength\n    if (properties.maxLength)\n    self.textarea.prop('maxlength', properties.maxLength);\n\n    if (properties.maxLines) {\n      self.textarea.prop('rows', properties.maxLines);\n    } else {\n      self.textarea.prop('rows', 6);\n    }\n\n    // Attach change event\n    self.textarea.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.textarea.val());\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.textarea.val(), true);\n        } else {\n          // Set error message\n          var message = validationMessages[0].message;\n          bizagi.showMessageBox(message, \"Bizagi\", \"error\");\n        }\n      }\n    });\n\n    // Attach blur event\n    self.textarea.bind(\"blur\", function () {\n      // Updates internal value\n      self.setValue(self.textarea.val());\n    });\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var regEx = new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\");\n\n    // Offline capability\n    if (this.isOfflineForm && bizagi.util.isMobileDevice()) {\n      value = value && _typeof(value) === \"object\" && value.value ? value.value : value;\n    }\n\n    // Check regular expression\n    if (properties.regularExpression) {\n      if (properties.editable) {\n        if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)) && self.properties && self.properties.xpath === \"userName\")) {\n          message = properties.regularExpression.message;\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        } else {\n          if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)))) {\n            message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    } else {\n      if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n        if (properties.editable) {\n          message = this.getResource(\"render-text-regular-expression-default-message\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (self.properties.editable == false) {\n      // Render as simple value\n      if (typeof value == \"string\") {\n\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(valueToDisplay);\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectData: function collectData(renderValues) {\n    // Call base\n    this._super(renderValues);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * More information SUITE-9407\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value) {\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    this._super(decodedValue);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Int} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Grid Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for grids\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.grid\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n    self.originalProperties = bizagi.clone(data.properties);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    self.initProperties();\n\n    // Set columns\n    var areThereEditableColumns;\n    var areThereTotalizedColumns;\n    self.columns = [];\n    self.columnsIds = [];\n    self.enabledChecks = {};\n    self.exclusiveChanges = {};\n    self.originalEnabledChecks = [];\n    $.each(data.elements, function (i, column) {\n      var columnProperties = column.render.properties;\n\n      // the groupby property is taken of column\n      if (columnProperties.groupBy) {\n        properties.groupBy = columnProperties.xpath || \"\";\n        properties.allowGrouping = !bizagi.util.isEmpty(properties.groupBy) ? true : false;\n      }\n\n      if (/columnBoolean/i.test(columnProperties.type) && columnProperties.isExclusive) {\n        properties.hasExclusiveCheck = true;\n        column.render.properties.required = false;\n        self.enabledChecks[columnProperties.xpath] = [];\n      }\n\n      // If inlineEdit is false then all columns must be read only\n      if (!self.properties.inlineEdit) {\n        column.render.properties.editable = false;\n      }\n\n      // Create renderColumns\n      var columnRender = self.renderFactory.getColumn({\n        type: columnProperties.type,\n        data: column.render,\n        parent: self,\n        singleInstance: properties.singleInstance });\n\n\n      self.columns.push(columnRender);\n      self.columnsIds.push(column.render.properties.id);\n\n      if (columnProperties.editable) {\n        areThereEditableColumns = true;\n      }\n\n      if (columnProperties.totalize && columnProperties.totalize.operation) {\n        areThereTotalizedColumns = true;\n\n        // Default summary format\n        columnProperties.totalize.format = columnProperties.totalize.format || {};\n        columnProperties.totalize.format.bold = columnProperties.totalize.format.bold !== undefined ? columnProperties.totalize.format.bold : true;\n      }\n    });\n\n    // Reverse columns when using right to left orientation\n    if (properties.orientation === \"rtl\")\n    self.columns = self.columns.reverse();\n\n    // Turn off inline edit if there are any editable columns        \n    if (properties.inlineEdit && !areThereEditableColumns) {\n      properties.inlineEdit = false;\n      properties.allowEdit = false;\n    }\n\n    // Check if the grid has totalizers\n    if (areThereTotalizedColumns) {\n      properties.showSummary = true;\n      properties.rowsPerPage = 0;\n    }\n  },\n\n  initProperties: function initProperties() {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    /** Edit properties\r\n                                       * @default editable true\r\n                                       * @default  allowAdd true\r\n                                       */\n    $.extend(properties, self.initEditabilityProperties(\n    properties.editable,\n    properties.allowEdit,\n    properties.inlineEdit,\n    properties.withEditForm),\n    self.initAddAndDeleteProperties(\n    properties.editable,\n    properties.allowAdd,\n    properties.inlineAdd,\n    properties.allowDelete));\n\n\n    /* Define details properties*/\n    properties.allowDetail = bizagi.util.parseBoolean(properties.allowDetail) != null ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.isSortable = bizagi.util.parseBoolean(properties.isSortable) != null ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    /* Define general properties */\n    properties.keyColumn = \"\";\n    properties.data = properties.data || null;\n    properties.displayType = \"value\";\n    properties.skipInitialLoad = properties.skipInitialLoad || false;\n    properties.allowMore = bizagi.util.parseBoolean(properties.allowMore) || false;\n    properties.allowFilter = bizagi.util.parseBoolean(properties.allowFilter) || false;\n    properties.allowGrouping = false;\n    properties.groupBy = \"\";\n    properties.groupSummary = properties.groupSummary || null;\n    properties.groupText = this.getResource(\"render-grid-group-text\");\n    properties.groupCollapsed = bizagi.util.parseBoolean(properties.groupCollapsed) || false;\n    properties.groupOrder = properties.groupOrder || \"asc\";\n    properties.formShowMode = bizagi.util.parseBoolean(properties.formShowMode) || \"popup\";\n    properties.floatingHeader = bizagi.util.parseBoolean(properties.floatingHeader) || false;\n\n    properties.sortBy = properties.sortBy ? properties.sortBy : properties.data && properties.data.sort ? properties.data.sort : properties.keyColumn;\n    properties.sortOrder = properties.sortOrder !== undefined && properties.sortOrder !== null ? properties.sortOrder === \"True\" ? \"asc\" : \"desc\" : properties.data && properties.data.order ? properties.data.order : \"asc\";\n    properties.sort = properties.sortBy + \" \" + properties.sortOrder;\n\n    properties.rowsPerPage = properties.allowGrouping ? 1000 : properties.rowsPerPage || 20;\n    properties.page = 1;\n    properties.records = 0;\n    properties.totalPages = 0;\n\n    properties.addLabel = properties.addLabel || $.trim(this.getResource(\"render-grid-add-label\")) + \" \" + properties.displayName;\n    properties.editLabel = properties.editLabel || $.trim(this.getResource(\"render-grid-edit-label\")) + \" \" + properties.displayName;\n    properties.deleteLabel = properties.deleteLabel || this.getResource(\"render-ecm-confirm-bt-delete\") + \" \" + properties.displayName;\n    properties.exportOptionsLabel = properties.exportOptionsLabel || this.getResource(\"render-grid-export-options-label\") + properties.displayName;\n    properties.detailLabel = properties.detailLabel || this.getResource(\"render-collection-navigator-details-form\");\n\n    // Apply style to entire table\n    properties.tableCssClass = properties.cssClass || \"\";\n\n    properties.alreadySaved = false;\n\n    // When grid open in modal window and the parent is entity\n    if (properties.contexttype != \"entity\") {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Define if it is editable or not        \n    /* This part change all cells in the table to no editable,\r\n     * you must use it when the parent container has noeditable property,\r\n     * so this table is noeditable too.\r\n     */\n    try {\n      if (self.parent && typeof self.parent.properties.editable == \"boolean\" && !self.parent.properties.editable || !properties.editable) {\n        properties.editable = false;\n        properties.allowEdit = false;\n        properties.inlineEdit = false;\n        properties.allowAdd = false;\n        properties.inlineAdd = false;\n        properties.allowDelete = false;\n      }\n    } catch (e) {\n    }\n\n    // If grid has not allowEdit property in true, all fields within the grid\n    // must be no editables, so these lines changes this behavior\n    if (!properties.allowEdit || !properties.inlineEdit && !properties.withEditForm) {\n      properties.editable = false;\n    }\n\n    // Calculate render width\n    properties.labelWidth = 0;\n    properties.valueWidth = \"100%\";\n\n    // This property will be used to make custom grids with another data source\n    properties.overrideGetRemoteData = properties.overrideGetRemoteData || undefined;\n    //this property use to create a single decorated or a array of decorated\n    properties.singleInstance = bizagi.util.isEmpty(properties.singleInstance) ? true : properties.singleInstance;\n\n    // Check if the grid its opened whitin dialog form and has contextType\n    properties.contextType = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : null;\n\n    // Create a collection to collect changes\n    self.changes = {};\n\n    // Create a collection to override properties per cell\n    self.cellOverrides = {};\n\n    // Check orientation and change order of data if its necesary (rtl)\n    if (self.isRTL() && properties.data != null) {\n      properties.data.rows = self.changeOrderData(properties.data.rows);\n    }\n  },\n\n  initEditabilityProperties: function initEditabilityProperties(editable, allowEdit, inlineEdit, withEditForm) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowEdit = bizagi.util.parseBoolean(allowEdit) !== null ? bizagi.util.parseBoolean(allowEdit) : true;\n    inlineEdit = bizagi.util.parseBoolean(inlineEdit) !== null ? bizagi.util.parseBoolean(inlineEdit) : true;\n    withEditForm = bizagi.util.parseBoolean(withEditForm) !== null ? bizagi.util.parseBoolean(withEditForm) : false;\n\n    if (!editable) {\n      allowEdit = inlineEdit = withEditForm = false;\n    }\n\n    return {\n      editable: editable,\n      allowEdit: allowEdit,\n      inlineEdit: inlineEdit,\n      withEditForm: withEditForm };\n\n  },\n\n  initAddAndDeleteProperties: function initAddAndDeleteProperties(editable, allowAdd, inlineAdd, allowDelete) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowAdd = bizagi.util.parseBoolean(allowAdd) != null ? bizagi.util.parseBoolean(allowAdd) : true;\n    inlineAdd = bizagi.util.parseBoolean(inlineAdd) != null ? bizagi.util.parseBoolean(inlineAdd) : true;\n    // Define Delete \n    allowDelete = bizagi.util.parseBoolean(allowDelete) != null ? bizagi.util.parseBoolean(allowDelete) : true;\n\n    if (!allowAdd) {\n      inlineAdd = false;\n    }\n\n    if (!editable) {\n      allowAdd = inlineAdd = allowDelete = false;\n    }\n\n    return {\n      allowAdd: allowAdd,\n      inlineAdd: inlineAdd,\n      allowDelete: allowDelete };\n\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    return this.properties.data && this.properties.data.rows.length > 0;\n  },\n\n  isRTL: function isRTL() {\n    var properties = this.properties;\n    if (!properties) return true;\n    return typeof properties.orientation == \"string\" && properties.orientation.toUpperCase() == \"RTL\" ? true : false;\n  },\n\n  changeOrderData: function changeOrderData(data) {\n    var reverseDataRows = [];\n    var rows = data || [];\n    var rowKey;\n\n    $.each(rows, function (key, value) {\n      // Extract row key\n      rowKey = value.shift();\n      reverseDataRows = value.reverse();\n      // add element in the start\n      reverseDataRows.unshift(rowKey);\n\n      rows[key] = reverseDataRows;\n    });\n\n    return rows;\n  },\n\n  /**\r\n      * Specific fix RTL with localizated\r\n      * @param data\r\n      * @returns {*|Array}\r\n      */\n  removeRemainingColumns: function removeRemainingColumns(data, numColumns) {\n    var rows = data || [];\n    var remainingColumns = 0;\n    if (rows.length > 0) {\n      // \"- 1\" because the first column represent id row\n      remainingColumns = rows[0].length - numColumns - 1;\n    }\n    if (remainingColumns > 0) {\n      $.each(rows, function (key, value) {\n        // Remove remaining columns\n        for (var i = 0; i < remainingColumns; i++) {\n          value.pop();\n        }\n      });\n    }\n    return rows;\n  },\n\n  /* \r\n      *   Gets a column definition by xpath\r\n      */\n  getColumn: function getColumn(xpath) {\n    var self = this;\n    var result = null;\n    $.each(self.columns, function (i, column) {\n      if (\n      column.properties.xpath == xpath ||\n      column.properties.id == xpath ||\n      column.properties.xpath + \".\" + column.properties.id == xpath)\n      {\n        result = column;\n      }\n    });\n\n    return result;\n  },\n\n  getColumnType: function getColumnType(id) {\n    var self = this;\n    var columnIndex = self.columnsIds.indexOf(id);\n\n    if (columnIndex != -1) {\n      return self.columns[columnIndex].properties.type;\n    }\n\n    return null;\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var defer = new $.Deferred();\n\n    // Set dummy data when not in execution mode\n    var mode = self.getMode();\n    if (mode !== \"execution\") {\n      properties.data = self.getDummyData();\n    }\n\n    var template = self.getGridTemplate();\n\n    // Render template\n    var html = self.applyTemplate(template);\n\n    // Initialize columns\n    var columnInitializers = [];\n    $.each(self.columns, function (i, column) {\n\n      // Add to column initializer array so we can synch out the promises\n      var result = column.initialize();\n      if (result)\n      columnInitializers.push(result);\n    });\n\n    // Resolve when all columns has been loaded\n    $.when.apply($, columnInitializers).done(function () {\n      defer.resolve(html);\n    });\n\n    return defer.promise();\n  },\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    this._super();\n\n    // Make control to behave as a block container\n    // TODO: Move to instances. This does not apply to mobiles\n    control.addClass(\"ui-bizagi-render-grid-container\").\n    addClass(\"ui-bizagi-render-display-block\");\n  },\n\n  /*\r\n      *   Returns the grid template to be used\r\n      */\n  getGridTemplate: function getGridTemplate() {\n    return this.renderFactory.getTemplate(\"grid\");\n  },\n\n  /*\r\n      *   Applies the template to the render and returns the resolved element\r\n      */\n  applyTemplate: function applyTemplate(template) {\n    var self = this,\n    properties = self.properties;\n    orientation = self.properties.orientation;\n\n    return $.fasttmpl(template, {\n      id: bizagi.util.encodeXpath(properties.xpath),\n      displayName: bizagi.util.encodeXpath(properties.displayName),\n      allowAdd: properties.allowAdd,\n      addLabel: properties.addLabel });\n\n  },\n  /*\r\n      *   Method to render non editable values\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    // Override read-only presets\n    //  properties.allowAdd = false;\n    // Render the same, just change some presets\n    return self.renderControl();\n  },\n  /*\r\n      *   Fetch the data into a deferred\r\n      */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      sort: properties.sortBy,\n      order: properties.sortType,\n      page: properties.page,\n      rows: properties.rowsPerPage,\n      searchFilter: properties.searchFilter,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      return properties.overrideGetRemoteData(params);\n    } else {\n      // Resolve with remote data\n      return self.dataService.multiaction().getGridData(params).then(function (data) {\n        self.originalProperties = self.originalProperties || {};\n        self.originalProperties.data = bizagi.clone(data);\n\n        // Resolve with fetched data\n        properties.page = data.page;\n        properties.records = data.records;\n        properties.totalPages = data.totalPages;\n\n        return data;\n      }).fail(function (error) {\n        console.error(error.message || \"Error\");\n      });\n    }\n  },\n  /*\r\n      insert a blank item in the selected column in the data matrix\r\n      */\n  spliceRowData: function spliceRowData(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.rows) {\n      $.each(data.rows, function (key, value) {\n        var spliceIndex = index || data.rows[key].length;\n        data.rows[key].splice(spliceIndex, 0, \"\");\n      });\n    }\n  },\n\n  spliceRowDataVisible: function spliceRowDataVisible(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.visible) {\n      $.each(data.visible, function (key, value) {\n        var spliceIndex = index || data.visible[key].length;\n        data.visible[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  spliceRowDataEditable: function spliceRowDataEditable(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.editable) {\n      $.each(data.editable, function (key, value) {\n        var spliceIndex = index || data.editable[key].length;\n        data.editable[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  /*\r\n      *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n      */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      var rowTemplate = [\"1\"];\n\n      // Add a value for each column\n      for (var i = 0; i < self.columns.length; i++) {\n        rowTemplate.push(\"\");\n      }\n\n      var data = {\n        \"page\": 1,\n        \"total\": 1,\n        \"records\": 1,\n        \"rows\": [rowTemplate] };\n\n\n      return data;\n    }\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType });\n\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this,\n    properties = self.properties;\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + self.buildCellXpathFilter(id) : properties.xpath + self.buildCellXpathFilter(id);\n\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n      return self.dataService.saveGridRecord({\n        url: properties.saveUrl,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        submitData: data,\n        contexttype: properties.contextType,\n        disableServerGridValidations: data.disableServerGridValidations || false }).\n      pipe(function (dataResp) {\n        self.endLoading();\n        return dataResp;\n      }).fail(function (dataFail) {\n        var form = self.getFormContainer();\n        var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n        //Convert String to object\n        if (typeof message == \"string\") {\n          try {\n            message = JSON.parse(message).message;\n          } catch (e) {\n            message = message.match(/\"message\":(.*)\",/)[0];\n            message = message.substr(11, message.length - 13);\n          }\n\n        } else if (!message.message) {\n          message = dataFail;\n        }\n        form.validateForm();\n        form.clearValidationMessages();\n        form.addValidationMessage(message);\n      });\n    });\n  },\n  /*\r\n      *   Submits a grid delete record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n  /*\r\n      *   Submits a grid add record request\r\n      *   Returns a deferred when done, the server returns an id for the new record\r\n      */\n  submitAddRequest: function submitAddRequest() {\n    var self = this,\n    properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n  /*\r\n      *   Submits a grid rollback request\r\n      *   Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this,\n    properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: params ? params.idPageCache : properties.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /**\r\n      * Collect a single cell change made in the grid to send the data when the user saves the form\r\n      * @param params\r\n      */\n  collectGridChange: function collectGridChange(params) {\n    var self = this;\n    params = params || {};\n    var id = params.id;\n    var dataType = params.dataType;\n    var xpath = params.xpath;\n    var value = params.value;\n    var trigger = typeof params.trigger !== \"undefined\" ? params.trigger : true;\n    var isPressed = params.pressed || false;\n    var renderType = dataType && bizagi.util.normalizeType(dataType);\n\n    self.changes[id] = self.changes[id] || {};\n\n    if (/^columnsearch$/i.test(renderType) && value && typeof value.id !== \"undefined\") {\n      self.changes[id][xpath] = value.id;\n    } else {\n      self.changes[id][xpath] = value;\n    }\n\n    if (trigger) {\n      self.triggerRenderChange({ key: id, column: xpath, pressed: isPressed });\n    }\n  },\n  /*\r\n      *   Configures a column to perform a submit on change when the user changes a cell\r\n      */\n  configureColumnSubmitOnChange: function configureColumnSubmitOnChange(xpath) {\n    var self = this;\n    var properties = self.properties;\n\n    // Build action\n    var action = {\n      commands: [{\n        xpath: properties.xpath,\n        command: 'submit-value',\n        argument: 'all' }],\n\n      conditions: {\n        operator: 'and',\n        expressions: [\n        {\n          simple: {\n            operator: 'cell-change',\n            xpath: properties.xpath + '[].' + xpath,\n            argumentType: 'text',\n            argument: xpath } }] },\n\n\n\n\n      dependencies: [properties.xpath] };\n\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).\n    done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var keysToDelete = [];\n\n    if (self.exclusiveChanges) {\n      //Add filter to parse all checks in tru to false. DON'T CHANGE CODE ORDER\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          // If there are any change, its needed to include as a change the filter to set all rows in false\n          var xpathExclusiveFilter = properties.xpath + \"[\" + xpath + \"=true].\" + xpath;\n          renderValues[xpathExclusiveFilter] = false;\n        }\n      }\n    }\n\n    for (var id in self.changes) {\n      // Dont collect data from totalizers \n      if (id != \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\n            var value = self.changes[id][columnXpath];\n\n            renderValues[xpath] = value;\n          }\n        }\n      }\n\n      // Clean changes \n      keysToDelete.push(id);\n\n    }\n    //If any exclusive check is true, set the new value in renderValues. DON'T CHANGE CODE ORDER\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          var checkedObject = self.exclusiveChanges[xpath];\n          if (checkedObject && checkedObject.value) {\n            var columnSimpleXpathEnabled = properties.xpath + self.buildCellXpathFilter(checkedObject.key) + \".\" + xpath;\n            renderValues[columnSimpleXpathEnabled] = checkedObject.value;\n          }\n        }\n      }\n    }\n\n    // Clean changes array in order to prevent duplicate data\n    // when execute SUBMITDATA in multiaction, that make and error\n    // in circular dependencies, specially when we add inline record\n    $.each(keysToDelete, function (key, v) {\n      delete self.changes[v];\n    });\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (!$.isEmptyObject(self.changes)) {\n      result.push(true);\n      return true;\n    } else {\n      if (!$.isEmptyObject(self.exclusiveChanges)) {\n        result.push(true);\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  /*\r\n      *   Check if a column data can be sent to the server\r\n      */\n  canColumnBeSent: function canColumnBeSent(id, columnXpath) {\n    var self = this,i,j,xpath;\n    for (i in self.columns) {\n      if (self.columns.hasOwnProperty(i)) {\n        var column = self.columns[i];\n        if (column.properties.type !== \"columnUserfield\") {\n          if (column.properties.xpath == columnXpath) {\n            var cellOverride = self.getCellOverride(id, column.columnIndex - 1);\n            return column.canBeSent(id, cellOverride);\n          }\n        } else {\n          for (j in column.properties) {\n            if (column.properties.hasOwnProperty(j)) {\n              if (Object.prototype.toString.apply(column.properties[j]) === \"[object String]\") {\n                xpath = column.properties[j].substr(column.properties[j].lastIndexOf(\".\") + 1);\n                if (xpath === columnXpath) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n\n      }\n    }\n\n    return false;\n  },\n  /* \r\n      *  Method to determine if the render value can be sent to the server or not\r\n      */\n  canBeSent: function canBeSent() {\n    var self = this;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n\n    // The render can be sent if it is \"display only\" and inline Edit is available\n    if (!displayOnly && (properties.inlineEdit || properties.inlineAdd || !$.isEmptyObject(self.changes))) {\n      return true;\n    }\n    return false;\n  },\n  /*\r\n      *   Return the value for a requested cell\r\n      */\n  getCellValue: function getCellValue(key, xpath) {\n    var self = this;\n    var data = self.properties.data.rows;\n    for (var i = 0; i < data.length; i++) {\n      if (data[i][0] == key) {\n        for (var j = 0; j < self.columns.length; j++) {\n          if (self.columns[j].properties.xpath == xpath) {\n            var result = data[i][j + 1];\n            return result;\n          }\n        }\n      }\n    }\n    return null;\n  },\n  /*\r\n      *\r\n      */\n  getCellCurrentValue: function getCellCurrentValue(key, xpath) {\n    var self = this;\n\n    var control = self.getControlCell(key, xpath);\n    if (control && typeof control.getValue === \"function\") {\n      return control.getValue();\n    }\n    return null;\n  },\n  /*\r\n      *   Gets control\r\n      */\n  getControlCell: function getControlCell(key, xpath) {\n    var self = this;\n    var control = null;\n    if (typeof self.columns != \"undefined\")\n    for (var j = 0; j < self.columns.length; j++) {\n      if (\n      self.columns[j].properties.xpath == xpath ||\n      self.columns[j].properties.id == xpath ||\n      self.columns[j].properties.xpath + \".\" + self.columns[j].properties.id == xpath)\n      {\n        control = self.columns[j].getDecorated(key);\n        break;\n      }\n    }\n\n\n    return control;\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /*\r\n      *   Fetch the data again and updates the content\r\n      */\n  refresh: function refresh() {\n  },\n  /*\r\n      *   Sets an error on the cell\r\n      */\n  setError: function setError(key, columnXpath) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a cell\r\n      */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n  },\n  /*\r\n      *  Changes the required for cell\r\n      */\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the editability for a cell\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n  },\n  /*\r\n      *  Refresh behaviors of cell\r\n      */\n  changeCellProperties: function changeCellProperties(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the max value for a cell\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the min value for a cell\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n\n  },\n\n  /*\r\n     *   Changes the editability for a column\r\n     */\n  changeColumnEditability: function changeColumnEditability(xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a column\r\n      */\n  changeColumnVisibility: function changeColumnVisibility(xpath, argument) {\n  },\n  /*\r\n      *   Changes the required for a column\r\n      */\n  changeColumnRequired: function changeColumnRequired(xpath, argument) {\n  },\n\n  /*\r\n      *  Clean data of cell\r\n      */\n  cleanCellData: function cleanCellData(key, xpath) {\n  },\n\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var control = self.getControl();\n\n    self.saveGrid().done(function () {\n      var tmpEditable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n      // Clears control\n      control.empty();\n\n      var originalProperties = self.originalProperties;\n\n      $.extend(self.properties, self.initEditabilityProperties(\n      tmpEditable,\n      originalProperties.allowEdit,\n      originalProperties.inlineEdit,\n      originalProperties.withEditForm),\n      self.initAddAndDeleteProperties(\n      tmpEditable,\n      originalProperties.allowAdd,\n      originalProperties.inlineAdd,\n      originalProperties.allowDelete));\n\n\n      self.properties.editabilityEnabled = self.properties.editabilityEnabled || self.properties.editable;\n\n      // argument because it is necessary to propagate the default value to the column controls\n      if (!tmpEditable) {\n        self.changeColumnsEditability(false);\n      } else if (self.properties.allowEdit && self.properties.inlineEdit) {\n        self.changeColumnsEditability(argument);\n      }\n\n      if (typeof self.internalRenderControl == \"function\") {\n        $.when(self.internalRenderControl()).done(function (html) {\n          control.append(html);\n          self.postRenderElement(self.element);\n        });\n      }\n    });\n\n  },\n\n  saveGrid: function saveGrid() {\n    var self = this;\n    var defer = $.Deferred();\n\n    var rows = $(\"[data-bizagi-component=rows]\", self.element).find(\"[data-new-row=true]\");\n\n    if (rows.length > 0) {\n      var newRows = $.map(rows, function (row, i) {\n        return $(row).data(\"business-key\");\n      });\n\n      self.saveInlineAddedRows(newRows).done(function () {\n        $.when(self.saveRows()).done(function () {\n          self.refresh();\n          defer.resolve();\n        });\n      });\n    } else {\n      defer.resolve();\n    }\n\n    return defer.promise();\n  },\n\n  changeColumnsEditability: function changeColumnsEditability(value) {\n    var self = this;\n    var columns = self.columns || [];\n\n    $.each(columns, function (i, column) {\n      column.properties.editable = value == \"Default\" ? column.originalProperties.editable : bizagi.util.parseBoolean(value);\n    });\n  },\n\n  /**\r\n      *   Refresh behaviors of cell\r\n      */\n  refreshCell: function refreshCell(params) {\n    var self = this;\n    var properties = self.properties;\n    var key = params.key;\n    var column = params.column;\n    var xpathContext = params.xpathContext !== \"\" ? params.xpathContext + \".\" + self.properties.xpath + self.buildCellXpathFilter(key) : self.properties.xpath + self.buildCellXpathFilter(key);\n    var cell = self.getControlCell(key, params.column);\n    var form = self.getFormContainer();\n    var idForm = form.properties.id;\n\n    if (!cell) {\n      return;\n    }\n\n    // Execute personalized stuff before to refresh it\n    cell.beforeToRefresh();\n\n    // Call service\n    return $.when(self.dataService.multiaction().refreshGridCell({\n      idRender: properties.id,\n      column: cell.properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: xpathContext,\n      idForm: idForm,\n      typeRender: bizagi.util.normalizeType(cell.properties.type) })).\n    done(function (data) {\n      // Extract values\n      var getDepthData = function getDepthData(target) {\n        if (target && _typeof(target) == \"object\" && target.length >= 1) {\n          return target[0].length >= 1 ? target[0][0] : target[0];\n        }\n        return \"\";\n      };\n      var newValue = getDepthData(data.rows);\n      var editable = getDepthData(data.editable);\n      if (!bizagi.util.isBoolean(editable)) {\n        editable = editable || true;\n      }\n      var visible = getDepthData(data.visible);\n      if (!bizagi.util.isBoolean(visible)) {\n        visible = visible || true;\n      }\n\n      // Change Visibility & Editability\n      self.changeCellVisibility(key, column, visible);\n      self.changeCellEditability(key, column, editable);\n\n      // Change control value\n      var cellValue = cell.formatValue(newValue);\n\n      cell.setValue(cellValue);\n      cell.setDisplayValue(cellValue);\n\n      // Trigger grid change\n      self.triggerRenderChange({ key: key, column: column, changed: false });\n\n      if (bizagi.override.restoreAppearanceAfterRefresh) {\n        cell.restoreCellAppearance();\n      }\n\n      // Update the affected cell manually after a refresh\n      //TODO:temporary solution\n      //review the DRAGON-5982 \n      if (cell.column != undefined && bizagi.util.detectDevice() == \"desktop\") {\n        self.updateAffectedCellManually(key, cellValue, cell.column.columnIndex);\n      }\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh({ action: \"refreshCell\" });\n    });\n  },\n\n  /*\r\n      *   Triggers the render change event\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    // Property to verify exporting updated grids\n    if (!bizagi.util.isEmpty(params) && params.changed != false)\n    self.properties.canBeExported = false;\n    self.triggerHandler(\"renderchange\", {\n      render: self,\n      surrogateKey: params.key,\n      column: params.column,\n      changed: params.changed,\n      rowDeleted: params.rowDeleted,\n      pressed: params.pressed });\n\n  },\n\n  /*\r\n      *   Validate the grid\r\n      */\n  validate: function validate() {\n    this.isValid([]);\n  },\n  /* \r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var bValid = true;\n\n    // Clear error message\n    self.hasErrors = false;\n    self.setValidationMessage(\"\");\n\n    // Check for required columns and null values\n    if (self.properties.data && self.properties.data.rows) {\n      var newRows = self.getDataNewRows();\n      // Preserve elements in data.rows\n      // Check required\n      if (newRows.length == 0 && bizagi.util.parseBoolean(self.properties.required)) {\n        if (!self.hasValue()) {\n          message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({\n            xpath: self.properties.xpath,\n            message: message });\n\n          bValid = false;\n        }\n      }\n\n      var data = $.merge($.merge([], self.properties.data.rows), newRows);\n\n      for (var i = 0; i < self.columns.length; i++) {\n        var messages = [];\n        var uniqueMessages = {};\n\n        for (var j = 0; j < data.length; j++) {\n          var value = data[j][i + 1];\n          var key = data[j][0];\n          var xpath = self.columns[i].properties.xpath;\n          if (self.changes[key] !== undefined && self.changes[key][self.columns[i].properties.xpath] !== undefined) {\n            value = self.changes[key][self.columns[i].properties.xpath];\n          }\n\n          // Check if the column is valid\n          var valueValid = self.columns[i].isValueValid(key, value, messages, self.getCellOverride(key, i));\n          if (!valueValid) {\n            bValid = false;\n\n            self.hasErrors = true;\n            self.setError(key, self.columns[i].properties.xpath);\n          }\n        }\n        for (var k = 0, messagesLength = messages.length; k < messagesLength; k++) {\n          if (uniqueMessages[messages[k]] == null) {\n            uniqueMessages[messages[k]] = messages[k];\n          }\n        }\n\n        if (messages.length > 0) {\n          var gridValidationMessage = self.getResource(\"render-grid-validation\").replaceAll(\"#grid#\", self.properties.displayName);\n          for (key in uniqueMessages) {\n            invalidElements.push({\n              xpath: self.properties.xpath,\n              message: gridValidationMessage + \" \" + key });\n\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n  /*\r\n      *   Enables submit on change feature for the current render\r\n      */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    // Don't do anything we will trigger submit on change manually only when the grid add or edit form has been edited   \n  },\n  /*\r\n      *   Get cell override\r\n      */\n  getCellOverride: function getCellOverride(key, column) {\n    var self = this;\n\n    // Convert to numbers\n    column = Number(column);\n\n    // Find overrides\n    var columnProperties = self.columns[column].properties;\n    if (!self.cellOverrides[key])\n    self.cellOverrides[key] = {};\n    if (!self.cellOverrides[key][column]) {\n      self.cellOverrides[key][column] = {\n        visible: columnProperties.columnVisible && columnProperties.visible,\n        editable: columnProperties.editable,\n        required: columnProperties.required };\n\n    }\n\n    return self.cellOverrides[key][column];\n  },\n\n  /*\r\n      * Set cell overrides based on the data\r\n      */\n  setCellOverrides: function setCellOverrides(data, columns) {\n    var self = this;\n    var key;\n\n    // Init visibility overrides\n    if (data.visible) {\n      for (var i = 0, len = data.visible.length; i < len; i++) {\n        key = data.visible[i][0];\n        for (var j = 0, len_v = data.visible[i].length; j < len_v; j++) {\n\n          // Skip key columns\n          if (j > 0) {\n            var columnVisible = self.getCellOverride(key, j - 1).visible;\n            self.cellOverrides[key][j - 1].visible = columnVisible ? bizagi.util.parseBoolean(data.visible[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init editability overrides\n    if (data.editable) {\n      for (var i = 0, len = data.editable.length; i < len; i++) {\n        key = data.editable[i][0];\n        for (var j = 0, len_v = data.editable[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0) {\n            var columnEditable = columns ? bizagi.util.parseBoolean(columns[j - 1].properties.editable) : true;\n            self.getCellOverride(key, j - 1).editable = columnEditable ? bizagi.util.parseBoolean(data.editable[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init required overrides\n    if (data.required) {\n      for (var i = 0, len = data.required.length; i < len; i++) {\n        key = data.required[i][0];\n        for (var j = 0, len_v = data.required[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0)\n          self.getCellOverride(key, j - 1).required = bizagi.util.parseBoolean(data.required[i][j]);\n        }\n      }\n    }\n  },\n  /*\r\n      *   Returns the row indexes for the data\r\n      */\n  getIndexes: function getIndexes() {\n    var self = this;\n    var data = $.merge(self.properties.data.rows, self.getDataNewRows());\n    return $.map(data, function (item, i) {\n      return item[0];\n    });\n  },\n  /**\r\n      *  Return object with value of all new records unsaved within the grid\r\n      *  @return {object} all new records\r\n      */\n  getDataNewRows: function getDataNewRows() {\n    var self = this;\n    var newRows = [];\n\n    if (_typeof(self.newRecords) == \"object\" && !$.isEmptyObject(self.newRecords)) {\n      $.each(self.newRecords, function (rowKey) {\n        var cellValue = [];\n        cellValue.push(rowKey);\n        for (var i = 0, length = self.columns.length; i < length; i++) {\n          cellValue.push(self.getCellCurrentValue(rowKey, self.columns[i].properties.xpath));\n        }\n        // Add cell value row to new rows\n        newRows.push(cellValue);\n      });\n    }\n    return newRows;\n  },\n\n  /**\r\n      * Return the object with the required url to access the exported grid to the desired format\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getGridExportFile: function getGridExportFile(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getGridExportFile({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"\",\n      idPageCache: properties.idPageCache,\n      disposition: params.disposition,\n      exportType: params.exportType,\n      sort: properties.sort,\n      idForm: self.getFormContainer().properties.id }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  submitForGridChange: function submitForGridChange() {\n    var self = this;\n    return self.submitOnChange(null, false);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutColumn = setTimeout(function () {\n      if (self.columns) {\n        $.each(self.columns, function (i, column) {\n          column.dispose();\n        });\n      }\n      clearTimeout(timeOutColumn);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  getEnabledChecks: function getEnabledChecks(params) {\n    var self = this;\n    var properties = self.properties;\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      rows: properties.rowsPerPage,\n      xpathfilter: params.xpath });\n\n    // Default ajax call\n    var defer = new $.Deferred();\n    // Resolve with remote data\n    self.dataService.multiaction().getGridDataExclusivesSelected(params).done(function (data) {\n      // Resolve with fetched data\n      properties.page = data.page;\n      properties.records = data.records;\n      properties.totalPages = data.totalPages;\n\n      // Check RTL\n      if (self.isRTL()) {\n        data.rows = self.changeOrderData(data.rows);\n      }\n      defer.resolve(data);\n    });\n    return defer.promise();\n  },\n\n  buildCellXpathFilter: function buildCellXpathFilter(key) {\n    if (bizagi.util.isNumeric(key)) return \"[id=\" + key + \"]\";\n    return \"[id='\" + key + \"']\";\n  },\n\n  cleanNewRecords: function cleanNewRecords() {\n    // Mark it as saved\n    this.newRecords = {};\n  },\n\n  /**\r\n      * Set inline added new row as saved, removing data new-row attribute\r\n      * @param key\r\n      */\n  setRowAsSaved: function setRowAsSaved(key) {\n    var $control = this.getControl();\n    var $row = $(\"[data-bizagi-component=rows]\", $control).\n    find(\"tr[data-business-key=\" + key + \"]\");\n\n    $row.attr(\"data-new-row\", 'false');\n  },\n\n  /**\r\n      *\r\n      * Customizes render background color\r\n      *\r\n      * This method is called when the backgroud color is setted by Form Designer\r\n      *\r\n      * @param color\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    this._super(color);\n\n    var control = this.getControl();\n\n    control.find(\".bz-rn-grid-header-title, .bz-rn-grid-header-title-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    control.find(\".bz-rn-grid-container-foother, .bz-rn-grid-container-foother-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    return this;\n  },\n\n  /**\r\n      * Check has header format\r\n      * @returns {boolean}\r\n      */\n  hasColorHeader: function hasColorHeader() {\n    var headerFormat = this.properties.headerFormat || {};\n\n    return headerFormat ? !bizagi.util.isEmpty(headerFormat.color) : false;\n  },\n\n  /**\r\n      * Check if the orientation is RTL\r\n      * @param parent\r\n      * @param orientation\r\n      * @returns {*|boolean|boolean}\r\n      */\n  isRTLOrientation: function isRTLOrientation(parent, orientation) {\n    if ((!orientation || orientation === \"auto\") && parent) {\n      return this.isRTLOrientation(parent.parent, parent.properties.orientation);\n    }\n\n    return /^rtl$/i.test(orientation);\n  },\n\n  /**\r\n      * Check If has changes for send to server\r\n      * @returns {boolean}\r\n      */\n  canBeExport: function canBeExport() {\n    var self = this;\n\n    // Check If normal column-control has changes\n    for (var id in self.changes) {\n      // Don't collect data from totalizers\n      if (id !== \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) return false;\n        }\n      }\n    }\n\n    // Check If exclusive-check control has changes\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {\n        // Brings the xpath columns with changes\n        if (self.exclusiveChanges[xpath] && self.enabledChecks[xpath]) return false;\n      }\n    }\n\n    // Don't have changes\n    return true;\n  },\n\n  /**\r\n      * Get exclusive-check change by Row\r\n      * @param idRow\r\n      * @returns {{}}\r\n      */\n  getExclusiveChangeByRow: function getExclusiveChangeByRow(idRow) {\n    var value = {};\n\n    for (var xpath in this.enabledChecks) {\n      if (this.enabledChecks.hasOwnProperty(xpath)) {\n        var obj = (this.enabledChecks[xpath] || []).\n        find(function (el) {\n          return el.id == idRow && el.changed;\n        });\n\n        if (obj) {\n          value[xpath] = obj.value;\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Check If xpath or id of column is valid\r\n      * @param columnXpath\r\n      * @param columnId\r\n      * @param xpath\r\n      * @returns {boolean}\r\n      */\n  isCurrentGridCell: function isCurrentGridCell(columnXpath, columnId, xpath) {\n    return columnXpath === xpath || columnId === xpath || columnXpath + \".\" + columnId === xpath;\n  },\n\n  /**\r\n      * Get index for current cell\r\n      * @param xpath\r\n      * @returns {number|number}\r\n      */\n  getIndexForCurrentCell: function getIndexForCurrentCell(xpath) {\n    var self = this;\n\n    return (self.columns || []).findIndex(function (cell) {\n      return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n    }) || 0;\n  },\n\n  /**\r\n      * Check if it is a Summary o Global Form\r\n      * @returns {*|boolean}\r\n      */\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var form = this.getFormContainer();\n    var properties = form && form.properties || {};\n\n    return form && [\"SummaryForm\", \"GlobalForm\"].includes(properties.typeForm);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Label Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for labels\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.label\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // A label itself is never \"required\" as other controls\n    var properties = self.properties;\n    properties.required = false;\n\n    // Set properties\n    self.properties.displayType = \"label\";\n    //self.properties.labelAlign = self.originalProperties.labelAlign || \"left\";\n    self.properties.displayName = data.properties.displayName || \"\";\n\n    if (bizagi.util.parseBoolean(self.properties.allowDinamiclabel)) {\n      this.properties.displayName = data.properties.displayName || bizagi.localization.getResource(\"render-label-default-display-name\");\n    }\n\n    self.bindingValue();\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    //this.changeLabelAlign(this.properties.labelAlign || \"left\");\n\n    if (typeof this.configureHelpText == \"function\")\n    this.configureHelpText();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    this.changeLabelAlign(this.properties.labelAlign || \"left\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required label\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  bindingValue: function bindingValue() {\n    var self = this;\n\n    if (self.properties.allowDinamiclabel && self.properties.value) {\n      if (_typeof(self.properties.value) === \"object\" && self.properties.value[0]) {\n        self.properties.displayName = self.properties.value[0].value;\n      } else if (typeof self.properties.value === \"string\" && self.properties.value !== \"\") {\n        self.properties.displayName = self.performLabelLineBreak(self.properties.value);\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    //Labels never change\n    return false;\n  },\n\n  /**\r\n      * Process the break line character\r\n      * @param value\r\n      * @returns {string}\r\n      */\n  performLabelLineBreak: function performLabelLineBreak(value) {\n    var label = value || \"\";\n\n    return label.replace(/\\\\n/gm, \"\\n\");\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Search Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for search renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.search\", {}, {\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    var submitOnChange = data.properties.submitOnChange;\n    if (self.getMode() === \"execution\") {\n      // Normalize submitOnChange property\n      // QAF-3297 - Compatibility for old versions of advanced search where the \"submitOnChange\" property default is true\n      // New \"submitVersion\" property default is 2\n      if (data.properties.advancedSearch) {\n        submitOnChange = typeof submitOnChange !== \"undefined\" ? submitOnChange : (data.properties.submitVersion || 1) > 1 ? false : true;\n      }\n    }\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.submitOnChange = bizagi.util.parseBoolean(submitOnChange) || false;\n\n    properties.searchForms = properties.searchForms || [];\n\n    // Default maxRecords is 20\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.advancedSearch = bizagi.util.parseBoolean(properties.advancedSearch) === null ? false : bizagi.util.parseBoolean(properties.advancedSearch);\n    properties.allowSuggest = bizagi.util.parseBoolean(properties.allowSuggest) !== null ? bizagi.util.parseBoolean(properties.allowSuggest) : false;\n    properties.allowFullSearch = properties.allowFullSearch || false;\n    properties.allowAdd = bizagi.util.parseBoolean(properties.allowAdd) || false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowTyping) !== null ? bizagi.util.parseBoolean(properties.allowTyping) : false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowSuggest) ? true : properties.allowTyping;\n    properties.allowClear = bizagi.util.parseBoolean(properties.allowClear) !== null ? bizagi.util.parseBoolean(properties.allowClear) : false;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // This length defines the behavior of the suggest, 2 characters are used by default meaning after 2 characters are written the search will take place\n    properties.searchLength = properties.searchLength || 2;\n\n    // Expire local storage cache\n    properties.enableLocalStorage = false;\n    properties.expireCache = 1000 * 60 * 15; // 15 minutes\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"search\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      allowTyping: properties.allowTyping,\n      advancedSearch: properties.advancedSearch,\n      allowSuggest: properties.allowSuggest,\n      editable: properties.editable,\n      allowClear: properties.allowClear,\n      hasValue: self.hasValue() });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || form.params.contexttype || false;\n\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n\n    params.h_contexttype = self.properties.enableQuerySuggestBehavior ? \"metadata\" : params.h_contexttype;\n\n    // QA-471 When the contexttype is metadata it does not send xpathcontext\n    if (params && params.h_contexttype && params.h_contexttype === 'metadata') {\n      properties.xpathContext = '';\n    }\n\n    // BA35025 - JFA\n    if (properties.term.indexOf(\"\\'\") > -1) {\n      var regexC = new RegExp(\"\\'\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\\'\\\\'\");\n    }\n\n    // QAF-6448 - JFA\n    if (properties.term.indexOf(\"\\\"\") > -1) {\n      var regexC = new RegExp(\"\\\"\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\"\");\n    }\n\n    // Resolve with remote data\n    self.dataService.multiaction().getSearchData({\n      url: properties.dataUrl,\n      contexttype: params.h_contexttype,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.allowFullSearch ? \"%\" + properties.term : properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise(defer);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value\r\n      * @param {} triggerEvents\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    self._super(value, triggerEvents);\n\n    if (value != undefined) {\n      this.value = value;\n      this.selectedValue = value.label;\n    } else {\n      this.value = null;\n      this.selectedValue = null;\n    }\n  },\n\n  /* Maps the value, when this one comes from actions*/\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var xpath = self.properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos\n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) == \"object\" && value.id === undefined)\n        return;\n        // Add the value to the server\n        renderValues[xpath] = value;\n      }\n    }\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {}\r\n      */\n  submitData: function submitData() {\n    var self = this;\n    var data = {};\n\n    // Add current data\n    if (!self.grid) {\n      data[self.properties.xpath] = self.getValue();\n    }\n\n    // Executes submit on change\n    self.submitOnChange(data, undefined, false);\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    return this._super(invalidElements);\n  },\n\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (typeof value == \"undefined\" || value == null) return false;\n\n    if (_typeof(value) === \"object\" && value.id !== \"\" && typeof value.id !== \"undefined\") return true;\n    return !bizagi.util.isEmpty(value);\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Render Layout Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Andrs Fernando Muoz\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define a base layout render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n$.Class.extend(\"bizagi.rendering.layoutRender\", {}, {\n  /*\r\n                                                       *   Returns the html templated element\r\n                                                       */\n  renderElement: function renderElement(template) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    template = template || \"render-layout\";\n    var renderTemplate = self.renderFactory.getTemplate(template);\n\n    // Resolve render label\n    var label = properties.displayName;\n\n    if (typeof label == \"string\") {\n      label = bizagi.util.encodeString(label);\n    }\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      hide: properties.hide });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = self.element;\n    }\n    if (!self.control || self.control.length == 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  /*\r\n     * Customizes the font italic style *\r\n     */\n  changeFontItalic: function changeFontItalic(italic) {\n    if (bizagi.util.parseBoolean(italic)) {\n      this.getControl().css(\"font-style\", \"italic\", \"!important\");\n    } else {\n      this.getControl().css(\"font-style\", \"normal\", \"!important\");\n    }\n    return this;\n  },\n\n  /*\r\n     * Customizes the font underline\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline) {\n    var valueFormat = this.properties.valueFormat || {},\n    valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n\n    if (bizagi.util.parseBoolean(underline)) {\n      this.getControl().css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n    } else {\n      this.getControl().find(\"*\").each(function (i, element) {\n        $(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n      });\n    }\n\n    return this;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Column Decorator Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi UI Forms\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for Columns\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.columns.column\", {}, {\n  /*\r\n                                                                         *   Constructor\r\n                                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(this.properties));\n\n    this.decoratedClass = params.decorated;\n    this.data = params.data;\n    if (params.singleInstance) {\n      this.decorated = new this.decoratedClass({\n        data: this.data,\n        parent: this.parent,\n        renderFactory: this.renderFactory,\n        dataService: this.dataService });\n\n      this.decorated.getControl = this.getControl;\n      params.decorated = this.decorated;\n      this.decorated.properties.isColumn = true;\n    } else {\n      this.decorateRenders = [];\n    }\n    this.grid = params.parent;\n\n    // Set base column styles\n    var properties = this.properties;\n\n    properties.columnVisible = bizagi.util.parseBoolean(properties.columnVisible) != null ? bizagi.util.parseBoolean(properties.columnVisible) : true;\n    properties.align = properties.align || 'center';\n    properties.textFormat = properties.textFormat || {};\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.singleInstance = params.singleInstance;\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.showColumn = typeof properties.showColumn != \"undefined\" ? bizagi.util.parseBoolean(properties.showColumn) : true;\n    properties.isSortable = typeof properties.isSortable != \"undefined\" ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    // Define if it is editable or not        \n    try {\n      if (params.parent && typeof params.parent.properties.editable == \"boolean\" && !params.parent.properties.editable) {\n        properties.editable = false;\n      }\n    } catch (e) {\n    }\n\n    // Define if the column is readonly\n    this.readonly = properties.readonly !== undefined ? properties.readonly : false;\n    if (this.readonly) properties.editable = required = false;\n  },\n\n  /*\r\n     *   Return true if the column is read-only, so we can make a quick render\r\n     */\n  isReadonly: function isReadonly() {\n    return false;\n  },\n\n  /*\r\n     *   Method to retrieve the decorated control\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    return $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n  },\n  /*\r\n     *   Returns the decorated cell instance to use\r\n     */\n  getDecorated: function getDecorated(surrogateKey) {\n    var self = this;\n    var properties = self.properties;\n    if (properties.singleInstance) {\n      return self.decorated;\n    } else {\n      var decorated = self.decorateRenders[surrogateKey];\n      if (decorated == undefined) {\n        if (_typeof(self.decorateRenders) != \"object\") {\n          self.decorateRenders = [];\n        }\n        var instanceDecoratedClass = new this.decoratedClass({\n          data: bizagi.clone(this.data),\n          parent: this.parent,\n          renderFactory: this.renderFactory,\n          dataService: this.dataService });\n\n        decorated = instanceDecoratedClass;\n        self.decorateRenders[surrogateKey] = instanceDecoratedClass;\n\n        // Set surrogate key to all controls\n        decorated.surrogateKey = surrogateKey;\n\n        // Execute decorated overrides\n        self.applyOverrides(decorated);\n\n        var dataType = bizagi.util.normalizeType(decorated.properties.type);\n        // Also override setDisplayValue on summary row for non numeric columns\n        if (surrogateKey === \"summary\" && !/columnMoney/i.test(dataType) && !/columnNumber/i.test(dataType)) {\n\n          decorated.setDisplayValue = function (value) {\n            var control = this.getControl();\n\n            // Replace line breaks for html line breaks\n            control.html(value);\n          };\n        }\n      }\n      return decorated;\n    }\n  },\n  /*\r\n     *   Set a ready function to execute when the render has been inserted in the dom\r\n     */\n  ready: function ready() {\n    return this.readyDeferred.promise();\n  },\n  /*\r\n     *   Load stuff needed for the column\r\n     *   It could return a promise if the column need to load async stuff\r\n     */\n  initialize: function initialize() {\n    // Override to do any stuff needed here\n  },\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent(surrogateKey, cellOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    if (cellOverrides) {\n      decorated.properties.visible = cellOverrides.visible;\n      decorated.properties.editable = cellOverrides.editable;\n    }\n    return decorated.canBeSent() || !self.properties.editable && self.hasChanged() || !decorated.properties.editable && self.hasChanged();\n  },\n  /*\r\n     *   Method to check if a value is valid or not in this render\r\n     */\n  isValueValid: function isValueValid(surrogateKey, value, messages, propertyOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var invalidElements = [];\n\n    if (propertyOverrides.visible) {\n      self.setValue(surrogateKey, value);\n\n      // Override properties\n      decorated.properties = $.extend(decorated.properties, propertyOverrides);\n\n      if (self.grid && typeof decorated.grid === \"undefined\") {\n        decorated.grid = self.grid;\n      }\n\n      // Validate field\n      decorated.isValid(invalidElements);\n    }\n\n    if (invalidElements.length > 0) {\n      $.each(invalidElements, function (i, invalidElement) {\n        messages.push(invalidElement.message);\n      });\n      return false;\n    }\n\n    return true;\n  },\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n  },\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value) {\n    var self = this;\n    var properties = self.properties;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Set flag to check when a render has changed\n    self.changed = false;\n\n    // If the render is not editable return the readonly version of the column\n    //Fix: Uncaught RangeError: Maximum call stack size exceeded\n    if (!properties.editable && arguments[3] !== \"CALLER_RENDER_READ_ONLY_COLUMNSLINK\")\n    return self.renderReadOnly.apply(self, arguments);\n\n    // Returns the decorated render inside a custom layout for columns\n    self.readyDeferred = new $.Deferred();\n    var cell = decorated.render(\"cell\");\n\n    // If the render changes set the flag on\n    decorated.bind(\"renderchange\", function () {\n      self.changed = true;\n    });\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.postRenderElement(cell);\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Changes editable to false to render read-only\n    decorated.properties.editable = false;\n\n    // Perform the internal render\n    self.readyDeferred = new $.Deferred();\n    var result = decorated.render(\"cell.readonly\");\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    // Returns the decorated render inside a custom layout for columns\n    return result;\n  },\n\n  /*\r\n     *  Returns the html template to draw the summary cell\r\n     */\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    var result = self.renderFactory.getTemplate(\"cell.summary\");\n    return $.tmpl(result).html();\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var editable = self.properties.editable;\n    decorated.properties.editable = false;\n    if (self.properties.singleInstance) {\n      decorated.element = cell;\n    }\n    decorated.postRenderElement(cell);\n    decorated.properties.editable = editable;\n  },\n\n  /*\r\n     * Return false to all columns that doesn't need special treatment (like number or currency)\r\n     */\n  postRenderSummary: function postRenderSummary() {\n    return false;\n  },\n\n  /*\r\n     *   Returns the cell html to be inserted in the table\r\n     */\n  getCell: function getCell() {\n    return this.decorated.getDisplayValue();\n  },\n  /*\r\n     *   Sets the surrogate key for this row\r\n     */\n  setSurrogateKey: function setSurrogateKey(key) {\n    this.surrogateKey = key;\n  },\n  /*\r\n     *   Sets the internal value, only must be called internally\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated != \"undefined\" && decorated != null) {\n\n      decorated.properties.originalValue = value;\n      decorated.properties.previousValue = value;\n\n      if ((value === null || value === undefined) && (self.properties.defaultvalue !== undefined || self.properties.defaultValue !== undefined) && decorated.grid != undefined) {\n        value = self.setDefaultValue(surrogateKey, decorated);\n      }\n\n      decorated.properties.value = value;\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = undefined;\n\n    if (self.properties.defaultvalue !== null && self.properties.defaultvalue !== undefined) {\n      value = self.properties.defaultvalue;\n    } else {\n      if (self.properties.defaultValue !== null && self.properties.defaultValue !== undefined) {\n        value = self.properties.defaultValue;\n      }\n    }\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  },\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    return decorated.getValue();\n  },\n  /*\r\n     *   Gets the composite value (applies for non-standard render values)\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    return this.getValue(surrogateKey);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_COLUMN;\n  },\n  /*\r\n     *   Determines if a render has changed its value\r\n     */\n  hasChanged: function hasChanged() {\n    return this.changed;\n  },\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.decorated)\n    this.decorated.trigger(eventType, data);\n  },\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.decorated)\n    this.decorated.triggerHandler(eventType, data);\n  },\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.bind(eventType, fn);\n  },\n  /*\r\n     *   Unbinds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.unbind(eventType, fn);\n  },\n  /*\r\n     *   Override decorated properties\r\n     */\n  overrideDecoratedRenderProperties: function overrideDecoratedRenderProperties(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    // Override decorated control properties\n    decorated.properties.editable = this.properties.editable;\n    decorated.properties.visible = this.properties.visible;\n    decorated.properties.required = this.properties.required;\n  },\n\n  overrideProperties: function overrideProperties(properties) {\n    var self = this;\n\n    self.properties.editable = properties.editable || self.properties.editable;\n    self.properties.visible = properties.visible || self.properties.visible;\n    self.properties.required = properties.required || self.properties.required;\n  },\n\n  /*\r\n     *   Returns the xpath used to sort the grid\r\n     */\n  getSortName: function getSortName() {\n    var self = this;\n\n    // Check if there is an override for the default behaviour \n    var decorated = self.getAnyDecoratedInstance();\n    if (decorated && decorated.getSortColumn) {\n      return decorated.getSortColumn();\n    }\n\n    // Default behaviour\n    return self.properties.xpath;\n  },\n\n  /*\r\n     *   Returns any of the decorated instances, if there are none, return null\r\n     */\n  getAnyDecoratedInstance: function getAnyDecoratedInstance() {\n    var self = this;\n    var first;\n\n    // Get the first key for the hash\n    for (first in this.decorateRenders) {break;}\n\n    // Return the first decorated render\n    if (first) return this.decorateRenders[first];\n\n    return null;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutDecorated = setTimeout(function () {\n      if (self.decorated) {\n        self.decorated.unbind(\"renderchange\");\n        self.decorated.dispose();\n      }\n\n      if (self.decorateRenders) {\n        bizagi.util.arrayEach(self.decorateRenders, function (key, render) {\n          if (render) {\n            render.unbind(\"renderchange\");\n            render.dispose();\n          }\n        });\n      }\n      clearTimeout(timeOutDecorated);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Smartphone Search Slide Implementation\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will shows a  search form\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.smartphone.helpers.searchForm\", {}, {\n  /*\r\n                                                                        *   Constructor\r\n                                                                        */\n  init: function init(dataService, renderFactory, searchForms, searchParams, searchFormParams) {\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.searchForms = searchForms;\n    this.searchParams = searchParams;\n    this.searchFormParams = searchFormParams;\n    this.searchFormDeferred = new $.Deferred();\n  },\n\n  /**\r\n      * Render the edition form,... if is an addform, then show the currentAddForm view\r\n      * */\n  renderEdition: function renderEdition(params) {\n    var self = this;\n    self.properties = params;\n\n    //Render the search form\n    self.renderSearchForm(params);\n\n    // Return promise\n    return self.searchFormDeferred.promise();\n  },\n\n  /**\r\n      * get the searchform and render it!\r\n      * */\n  renderSearchForm: function renderSearchForm(params) {\n    var self = this;\n\n    // Creates a container, be careful you must destroy it later\n    var container = self.searchFormParams.navigation.createRenderContainer({ title: params.displayName });\n    $.when(self.getSearchContainerData(params)).\n    then(function (data) {\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      if (data.form.properties) {\n        data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\n      }\n\n      var form = self.renderFactory.getContainer($.extend({}, self.searchFormParams, {\n        type: \"form\",\n        data: data.form,\n        navigation: self.searchFormParams.navigation,\n        view_container: container }));\n\n\n      self.form = form;\n\n      var keys = Object.keys(form.children);\n      keys.map(function (key) {\n        form.children[key].params = $.extend({}, form.children[key].params, self.searchFormParams);\n      });\n\n      return form.render();\n\n    }, function (message) {\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      $.kendoTmpls(errorTemplate, { message: message }).appendTo(slideForm.find(\".scroll-content\"));\n    }).done(function (element) {\n      var tabContainer = self.form.firstChild().properties.type === \"tab\" ? self.form.firstChild() : null;\n      if (tabContainer) {\n        // Bind select tab event\n        tabContainer.bind(\"selected\", function (e, ui) {\n          var searchForm = self.searchForms[ui.index];\n          $.when(self.loadSearchTab(params, ui.tab, searchForm)).\n          done(function () {\n            // Set currents search form\n            self.currentSearchForm = ui.tab.firstChild();\n            self.currentSearchForm.triggerHandler(\"ondomincluded\");\n          });\n        });\n\n        tabContainer.container.tabs(\"select\", 0);\n        self.currentSearchForm = tabContainer.firstChild().firstChild();\n\n        if (!self.currentSearchForm.readyDeferred)\n        self.currentSearchForm.readyDeferred = new $.Deferred();\n\n        self.currentSearchForm.triggerHandler(\"ondomincluded\");\n      } else {\n        // Set currents search form\n        self.currentSearchForm = self.form.firstChild();\n\n        if (!self.currentSearchForm.readyDeferred)\n        self.currentSearchForm.readyDeferred = new $.Deferred();\n\n        self.currentSearchForm.triggerHandler(\"ondomincluded\");\n      }\n\n      container.element.html(element);\n      self.searchFormParams.navigation.navigate(container.id);\n\n      self.containerGridResults = self.currentSearchForm.container.find(\".ui-bizagi-container-search-results\");\n      self.containerSearchCriteria =\n      self.currentSearchForm.container.find(\".ui-bizagi-container-search-criteria\");\n      self.applyButtons(container);\n    });\n  },\n\n  /**\r\n      * Get the addform and show it\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  renderAddForm: function renderAddForm(params) {\n    var self = this;\n    params = params || {};\n    var properties = self.properties;\n\n    if (typeof self.addContainer === \"undefined\") {\n      var message = bizagi.localization.getResource(\"render-dialog-entity\");\n      self.addContainer = self.searchFormParams.navigation.createRenderContainer({ title: message });\n\n      // Binds the view close event, and send the RollBack\n      self.addContainer.element.bind(\"close\", function () {\n        delete self.addContainer;\n      });\n    }\n\n    var isRefresh = params.isRefresh || false;\n\n    var getFormParams = {\n      idPageCache: params.idPageCache,\n      guidEntity: properties.entity,\n      contextType: \"entity\" };\n\n\n    if (isRefresh) {\n      getFormParams.isRefresh = true;\n      getFormParams.idStartScope = params.idStartScope;\n    } else\n    {\n      getFormParams.idRender = properties.idRender;\n      getFormParams.requestedForm = \"addForm\";\n    }\n\n    // Get the addform\n    $.when(self.dataService.getFormData(getFormParams)).then(function (data) {\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      if (typeof data.form.properties !== \"undefined\") {\n        data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\n      }\n\n      data.form.contextType = \"entity\";\n\n      var form = self.renderFactory.getContainer($.extend({}, self.addFormParams, {\n        type: \"form\",\n        data: data.form,\n        focus: params.focus || false,\n        selectedTabs: params.selectedTabs,\n        isRefresh: isRefresh,\n        requestedForm: params.requestedForm,\n        navigation: self.searchFormParams.navigation,\n        view_container: self.addContainer }));\n\n\n      form.buttons = [\n      $.extend(\n      form.buttons[0] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          // When the data is saved then\n          return self.saveDataAddForm(form).done(function () {\n            self.addContainer.destroy();\n            delete self.addContainer;\n\n            // Force a search after a new item is created!\n            self.searchParams.maxRows = 1;\n            self.currentSearchForm.performSearch(self.searchParams);\n          });\n        } }),\n\n      $.extend(\n      form.buttons[1] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 1,\n        \"action\": \"back\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        // This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          self.addContainer.destroy();\n          delete self.addContainer;\n        } })];\n\n\n\n      $.extend(form, {\n        processButtons: function processButtons() {\n          // Not send information set in memory and save\n          $.each(form.buttons, function (index, element) {\n            switch (element[\"ordinal\"]) {\n              case 1: //next button will behave as a cancel button\n                $(form.getButtons()[index]).click(function () {\n                  self.addContainer.destroy();\n                  delete self.addContainer;\n                });\n\n                form.getButtons()[index].innerHTML = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                form.buttons[index].caption = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                form.buttons[index].action = \"back\";\n                break;\n\n              default:\n                $(form.getButtons()[index]).click(function () {\n                  self.saveDataAddForm(form);\n                  self.addContainer.destroy();\n                  delete self.addContainer;\n                });\n                break;}\n\n          });\n        } });\n\n\n      for (var indicator in form.children) {\n        form.children[indicator].params = $.extend({}, form.children[indicator].params, self.addFormParams);\n      }\n\n      return $.when(form.render()).done(function (element) {\n        // Set currents search form\n        self.currentAddForm = form.firstChild();\n        self.addContainer.element.html(element);\n\n        if (!isRefresh) {\n          self.searchFormParams.navigation.navigate(self.addContainer.id);\n        }\n\n        self.addContainer.setNavigationButtons(form);\n\n        form.triggerHandler(\"ondomincluded\");\n\n        // if is any modal view displayed, hide it to allow this search form been displayed\n        self.handleSearchFormZindex(\"show\");\n\n        form.bind(\"refresh\", function (_, refreshParams) {\n          refreshParams.scrollTop = self.form.container.parent().scrollTop();\n          refreshParams = $.extend({\n            focus: focus,\n            selectedTabs: self.form.getSelectedTabs(),\n            isRefresh: true,\n            contextType: self.properties.contextType || \"\",\n            navigation: self.searchFormParams.navigation,\n            view_container: self.addContainer },\n          refreshParams);\n\n          return self.renderAddForm(refreshParams);\n        });\n      });\n    }).fail(function () {\n      self.addContainer.destroy();\n      delete self.addContainer;\n      console.log(\"there was an error :(\");\n    });\n  },\n\n  /**\r\n      * Save data to add form\r\n      * @param {} form\r\n      * @returns {}\r\n      */\n  saveDataAddForm: function saveDataAddForm(form) {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n\n    if (form.validateForm()) {\n      var data = {};\n      $.forceCollectData = true;\n\n      form.collectRenderValues(data);\n      data.idPageCache = form.idPageCache;\n\n      var params = {\n        action: \"SAVE\",\n        data: data,\n        idPageCache: data.idPageCache,\n        guidEntity: form.properties.entity,\n        contexttype: \"entity\" };\n\n\n      // Check if the add form has data\n      var formData = {};\n\n      form.collectRenderValuesForSubmit(formData);\n\n      // Turn off flag\n      $.forceCollectData = false;\n\n      if (!bizagi.util.isMapEmpty(formData)) {\n        $.when(self.dataService.submitData(params)).\n        done(function (response) {\n          function dataHasXpath(xpath) {\n            var render = self.currentSearchForm.getRender(xpath);\n\n            if (_typeof(render) === \"object\" && render !== null)\n            return { \"found\": true, \"obj\": render };\n            return { \"found\": false, \"obj\": {} };\n          }\n\n          for (var i in formData) {\n            var mapping = dataHasXpath(i);\n            if (mapping.found) {\n              mapping.obj.setValue(formData[i]);\n              self.setDisplayValueToControl(mapping.obj, form, i, formData);\n            }\n          }\n\n          defer.resolve();\n        }).\n        fail(function (jqXHR, type, message) {\n          form.addValidationMessage(message.message);\n          defer.reject();\n        });\n      } else {\n        // Form has not data\n        bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-advanced-no-filters\"));\n        defer.reject();\n      }\n    } else\n    {\n      defer.reject();\n    }\n    return defer;\n  },\n\n  /***\r\n      * Set display value by control type, when add new record\r\n      * @param renderControlSearchForm\r\n      * @param addForm\r\n      * @param xpath\r\n      * @param formData\r\n      */\n  setDisplayValueToControl: function setDisplayValueToControl(renderControlSearchForm, addForm, xpath, formData) {\n    if (renderControlSearchForm.properties.type === \"searchSuggest\") {\n      renderControlSearchForm.setDisplayValue(addForm.getRender(xpath).getDisplayValue());\n    } else {\n      renderControlSearchForm.setDisplayValue(formData[xpath]);\n    }\n  },\n\n  /**\r\n      * configure searchform buttons\r\n      * */\n  applyButtons: function applyButtons(container) {\n    var self = this;\n\n    self.displayBottomButtons(container);\n\n    container.element.bind(\"close\", function () {\n      self.searchFormDeferred.reject();\n    });\n  },\n\n  loadSearchTab: function loadSearchTab(params, tab, searchForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // If the tab has children it is loaded already\n    if (tab.children.length > 0)\n    return null;\n\n    // Load search form data\n    $.when(self.getSearchFormData(params, searchForm)).\n    pipe(function (data) {\n      // Render data inside selected tab\n      var searchFormContainer = self.renderFactory.getContainer({\n        type: \"searchForm\",\n        data: data.form });\n\n\n      tab.children.push(searchFormContainer);\n      return searchFormContainer.render();\n    }).\n    done(function (element) {\n      // Remove button container\n      $(\".ui-bizagi-button-container\", element).detach();\n      tab.container.append(element);\n      defer.resolve();\n    });\n    return defer.promise();\n  },\n\n  /**\r\n      * Creates the search dialog sub-containers\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getSearchContainerData: function getSearchContainerData(params) {\n    var self = this;\n    var deferred = new $.Deferred();\n    var data = {\n      form: {\n        properties: {},\n        elements: [] } };\n\n\n\n    var container = data.form;\n    var searchFormToLoad = self.searchForms[0];\n\n    // When there are more than one search form, render a tab container\n    if (self.searchForms.length > 1) {\n      var tabContainer = {};\n      tabContainer.properties = {\n        type: \"tab\" };\n\n\n      tabContainer.elements = [];\n      var otherElements = [];\n\n      $.each(self.searchForms, function (i, searchForm) {\n        var isDefault = searchForm[\"default\"] || false;\n        // Create tab item\n        var tab = {};\n        tab.properties = {\n          id: i,\n          type: \"tabItem\",\n          displayName: searchForm.caption };\n\n        tab.elements = [];\n        // Append children\n        if (isDefault) {\n          tabContainer.elements.push({\n            container: tab });\n\n          // Set properties to load default container\n          container = tab;\n          searchFormToLoad = self.searchForms[0];\n        } else {\n          otherElements.push({\n            container: tab });\n\n        }\n      });\n\n      // Append no defaults elements\n      $.each(otherElements, function (i, element) {\n        tabContainer.elements.push(element);\n      });\n      data.form.elements.push({\n        container: tabContainer });\n\n    }\n\n    // Loads default form\n    $.when(self.getSearchFormData(params, searchFormToLoad)).\n    done(function (searchFormData) {\n      container.elements.push(searchFormData);\n      container.properties.id = Math.guid();\n\n      // Resolve deferred\n      deferred.resolve(data);\n    });\n    return deferred.promise();\n  },\n\n  /**\r\n      * Loads a search form\r\n      * @param {} params\r\n      * @param {} searchForm\r\n      * @returns {}\r\n      */\n  getSearchFormData: function getSearchFormData(params, searchForm) {\n    var self = this;\n    return self.dataService.getSearchFormData($.extend(params, {\n      idSearchForm: searchForm.id,\n      url: searchForm.url })).\n    pipe(function (data) {\n      // Append search render properties\n      data.form.properties.idRender = params.idRender;\n      return data;\n    });\n  },\n\n  displayBottomButtons: function displayBottomButtons(container) {\n    var self = this;\n    var containerButtons = self.currentSearchForm.container.find(\".ui-bizagi-container-button-edit\").empty().show();\n    var templateBtn = \"<button class='ui-bizagi-form-button #= data.name #'> #= data.text # </button>\";\n    var btnSearch = $.kendoTmpls(templateBtn, { name: \"bz-btn-search\", text: bizagi.localization.getResource(\"render-form-dialog-box-search\") }).appendTo(containerButtons);\n    var btnSelect = $.kendoTmpls(templateBtn, { name: \"bz-btn-select\", text: bizagi.localization.getResource(\"render-search-advanced-results-button\") }).appendTo(containerButtons);\n    var btnAdd = $.kendoTmpls(templateBtn, { name: \"bz-btn-add\", text: bizagi.localization.getResource(\"render-form-dialog-box-add\") }).appendTo(containerButtons);\n    var btnCancel = $.kendoTmpls(templateBtn, { name: \"bz-btn-cancel\", text: bizagi.localization.getResource(\"render-form-dialog-box-cancel\") }).appendTo(containerButtons);\n\n    container.element.bind(\"close\", function (e) {\n      //If the view results is in front, shouldn't go back, but change the showed panel\n      if (self.containerSearchCriteria.css(\"display\") === \"none\") {\n        e.preventDefault();\n        setSearchState();\n      }\n    });\n\n    var setSearchState = function setSearchButtons() {\n      // List posible buttons for search\n      var buttons = [\n      {\n        \"ordinal\": 1,\n        \"action\": \"search\",\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-search\"),\n        \"callback\": function callback() {\n          // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)\n          self.searchParams.maxRows = 1;\n          return self.currentSearchForm.performSearch(self.searchParams);\n        } },\n\n      {\n        \"ordinal\": 2,\n        \"action\": \"cancel\",\n        \"caption\": \"cancel\",\n        \"callback\": function callback() {\n          self.searchFormDeferred.reject();\n          container.destroy();\n        } },\n\n      {\n        \"ordinal\": 3,\n        \"action\": \"add\",\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n        \"callback\": function callback() {\n          var params = {\n            \"idCase\": self.searchFormParams.idCase,\n            \"idRender\": self.properties.idRender,\n            \"displayName\": self.properties.displayName,\n            \"idPageCache\": self.properties.idPageCache };\n\n\n          self.renderAddForm(params);\n        } }];\n\n\n\n      self.containerSearchCriteria.show();\n      self.containerGridResults.hide();\n\n      // Add only seen when allowed\n      $(btnAdd).toggle(self.searchParams.allowNew);\n      btnSearch.show();\n      btnSelect.hide();\n\n      if (!self.searchParams.allowNew) {\n        buttons.pop();\n      }\n\n      self.form.buttons = buttons;\n      delete self.form.properties.virtual;\n      container.setNavigationButtons(self.form);\n    };\n\n    var setResultState = function setSearchButtons() {\n\n      // List posible buttons for result\n      var buttons = [\n      {\n        \"ordinal\": 4,\n        \"action\": \"select\",\n        \"caption\": bizagi.localization.getResource(\"render-search-advanced-results-button\"),\n        \"callback\": function callback() {\n          self.searchFormDeferred.resolve(container.element.find(\".ui-bizagi-container-search-results [data-key]\").data(\"business-key\"));\n          container.destroy();\n        } },\n\n      {\n        \"ordinal\": 5,\n        \"action\": \"cancel\",\n        \"caption\": \"cancel\",\n        \"callback\": function callback() {\n          setSearchState();\n        } },\n\n      {\n        \"ordinal\": 3,\n        \"action\": \"add\",\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n        \"callback\": function callback() {\n          var params = {\n            \"idCase\": self.searchFormParams.idCase,\n            \"idRender\": self.properties.idRender,\n            \"displayName\": self.properties.displayName,\n            \"idPageCache\": self.properties.idPageCache };\n\n\n          self.renderAddForm(params);\n        } }];\n\n\n\n      self.containerSearchCriteria.hide();\n      self.containerGridResults.show();\n\n      // Add only seen when allowed\n      $(btnAdd).toggle(self.searchParams.allowNew);\n      btnSearch.hide();\n      btnSelect.show();\n\n      if (!self.searchParams.allowNew) {\n        buttons.pop();\n      }\n\n      self.form.buttons = buttons;\n      self.form.properties.virtual = true;\n      container.setNavigationButtons(self.form);\n    };\n\n    btnSearch.bind(\"click\", function () {\n      // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)\n      self.searchParams.maxRows = 1;\n      self.currentSearchForm.performSearch(self.searchParams);\n    });\n\n    btnAdd.bind(\"click\", function () {\n      var params = {\n        \"idCase\": self.searchFormParams.idCase,\n        \"idRender\": self.properties.idRender,\n        \"displayName\": self.properties.displayName,\n        \"idPageCache\": self.properties.idPageCache };\n\n\n      self.renderAddForm(params);\n    });\n\n    btnCancel.bind(\"click\", function () {\n      self.searchFormDeferred.reject();\n      container.destroy();\n    });\n\n    btnSelect.bind(\"click\", function () {\n      self.searchFormDeferred.resolve(container.element.find(\".ui-bizagi-container-search-results [data-key]\").data(\"business-key\"));\n      container.destroy();\n    });\n\n    self.currentSearchForm.bind(\"instancerefreshdone\", function () {\n      // Show search results container\n      if (self.currentSearchForm.resultsGrid.properties.data !== null &&\n      !jQuery.isEmptyObject(self.currentSearchForm.resultsGrid.properties.data.rows) &&\n      self.currentSearchForm.resultsGrid.properties.data.rows.length > 0)\n      {\n        setResultState();\n      } else\n      {\n        setSearchState();\n      }\n    });\n\n    setSearchState();\n  },\n\n  renderEditionAddForm: function renderEditionAddForm(params) {\n    var self = this;\n    var properties = self.properties;\n    var container = $(params.id + \" .inputEditionContent\");\n    var canvas = $(params.id + \" .inputEditionContent\");\n    var kendoView = $(params.id, \"body\");\n\n    self.viewContainer = params.viewContainer;\n\n    self.addFormParams = {\n      container: container,\n      canvas: canvas,\n      kendoView: kendoView,\n      allowFullSearch: properties.allowFullSearch,\n      maxRecords: properties.maxRecords,\n      allowNew: false };\n\n\n    self.renderEdition({\n      \"idRender\": properties.idRender,\n      \"requestedForm\": \"addForm\",\n      \"xpathContext\": properties.xpathContext,\n      \"idPageCache\": properties.idPageCache,\n      \"isAddForm\": true,\n      \"contextType\": \"entity\" }).\n    done(function () {\n      if (self.form.validateForm()) {\n        var data = {};\n        $.forceCollectData = true;\n\n        self.form.collectRenderValues(data);\n        data.idPageCache = self.form.idPageCache;\n        var defer = $.Deferred();\n\n        var params = {\n          action: \"SAVE\",\n          data: data,\n          idPageCache: data.idPageCache,\n          guidEntity: self.form.properties.entity,\n          contexttype: \"entity\" };\n\n\n        // Check if the add form has data\n        var formData = {};\n\n        self.form.collectRenderValuesForSubmit(formData);\n\n        // Turn off flag\n        $.forceCollectData = false;\n\n        if (!bizagi.util.isMapEmpty(formData)) {\n          self.pane.navigate(\"#:back\");\n          $.when(self.dataService.submitData(params)).done(function (response) {\n            function dataHasXpath(xpath) {\n              var render = self.currentSearchForm.getRender(xpath);\n\n              if (_typeof(render) == \"object\" && render !== null) {\n                return { \"found\": true, \"obj\": render };\n              }\n\n              return { \"found\": false, \"obj\": {} };\n            }\n\n            for (var i in formData) {\n              var mapping = dataHasXpath(i);\n              if (mapping.found) {\n                var value = data[i];\n                mapping.obj.setValue(value);\n                mapping.obj.setDisplayValue(value);\n\n                if (self.currentSearchForm.resultsGrid.properties.data !== null &&\n                !jQuery.isEmptyObject(self.currentSearchForm.resultsGrid.properties.data.rows) &&\n                self.currentSearchForm.resultsGrid.properties.data.rows.length > 0) {\n                  self.containerSearchCriteria.show();\n                  self.currentSearchForm.container.find(\".bz-btn-search\").show();\n                  self.currentSearchForm.container.find(\".bz-btn-select\").hide();\n                  self.containerGridResults.hide();\n                }\n              }\n            }\n          }).fail(function (jqXHR, type, message) {\n            if (type === \"parsererror\") {\n              defer.resolve({ type: \"error\", message: message.message });\n            } else {\n              defer.reject(arguments);\n            }\n          });\n        } else {\n          // Form has not data\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-advanced-no-filters\"));\n        }\n      }\n    }).fail(function () {\n      self.pane.navigate(\"#:back\");\n    });\n\n    self.pane.navigate(params.id);\n  },\n\n  handleSearchFormZindex: function handleSearchFormZindex(option) {\n    var self = this;\n\n    //if there is an open modal, change z-index to make searchForm visible\n    var modalViewDisplayed = jQuery.grep($(\".km-modalview-root\"), function (n, i) {\n      return $(n).css(\"display\") == \"block\";\n    });\n\n    if (modalViewDisplayed.length > 0) {\n      if (option == \"show\") {\n        $(modalViewDisplayed).css(\"z-index\", 0);\n      } else {\n        $(modalViewDisplayed).css(\"z-index\", 10001);\n      }\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Render Text Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will redefine the text render class to adjust to smartphone devices\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\nbizagi.rendering.text.extend(\"bizagi.rendering.text\", {}, {\n  /**\r\n                                                             *\r\n                                                             */\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    self.input = control.find(\"input\").length != 0 ? control.find(\"input\") : control.find(\".bz-rn-non-editable\");\n\n    // Define max length of element\n    if (properties.maxLength > 0) {\n      self.input.attr(\"maxlength\", properties.maxLength);\n    }\n\n    if (!properties.editable) {\n      container.addClass(\"bz-rn-non-editable\");\n      self.input.attr(\"readonly\", \"readonly\");\n    } else {\n      container.addClass(\"bz-command-edit-inline\");\n      self.input.removeAttr(\"readonly\");\n      self.configureHandlers();\n    }\n  },\n\n  /**\r\n      * Creates the markup for the readonly text field\r\n      * Comment: includes the default value in the markup\r\n      * @returns {html}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * Readonly\r\n      * @returns {} \r\n      */\n  postRenderSingle: function postRenderSingle() {\n    //Attach event for retype double\n    var self = this;\n    var properties = self.properties;\n\n    self._super();\n\n    if (properties.retype == \"double\") {\n      self.attachRetypeDouble();\n    }\n\n    // Implement maxlength behaviour (in android lets you write more chars than allowed)\n\n    var element = self.element;\n    var input = $(\"input\", element);\n\n    if (!input || input.length === 0) return;\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    self.setValue(value, false);\n\n    // This is temporal\n    if (_typeof(value) == \"object\") return;\n    value = typeof value == \"boolean\" ? value.toString() : value;\n\n    if (typeof value === \"string\") {\n      value = value.replaceAll(\"\\\\n\", \" \").replaceAll(\"\\n\", \" \");\n      value = value.replaceAll(\"&amp;\", \"&\");\n\n      if (self.properties.editable) {\n        self.input.first().html(value);\n        self.input.first().val(value);\n      } else {\n        self.input.text(value);\n      }\n    }\n  },\n\n  setDisplayValueEdit: function setDisplayValueEdit(value) {\n    var self = this;\n    self.inputEdition.val(value);\n  },\n\n  actionSave: function actionSave() {\n    var self = this;\n    var value = self.inputEdition.val();\n\n    self.setValue(value, false);\n    self.input.html(value);\n    self.input.val(value);\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"text\";\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      if ($(control).attr(\"type\") !== \"hidden\" &&\n      $(control).css(\"display\") !== \"none\" &&\n      $(control).css(\"visibility\") !== \"hidden\") {\n\n        if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n          // Check that there is something in the value\n          // Check if a value has already been set\n          if (control.val() === \"\" || control.val() === control.attr(\"newValue\"))\n          return;\n\n          control.data(\"oldValue\", control.val());\n          control.val(\"\");\n\n          try {\n            // Create new tooltip\n            control.tooltip(\"destroy\");\n          } catch (e) {\n          }\n\n          control.attr(\"title\", self.getResource(\"render-number-retype\")); //\"Re-escriba el valor\"\n          control.tooltip();\n          control.tooltip(\"open\");\n\n          // Focus after 100ms to avoid bubbling\n          setTimeout(function () {\n            control.focus();\n            input.focus();\n          }, 100);\n        } else {\n          if (control.val() !== control.data(\"oldValue\")) {\n            self.setValue(\"\");\n            control.val(\"\");\n            control.data(\"oldValue\", \"\");\n            control.tooltip(\"destroy\");\n            control.attr(\"title\", self.getResource(\"render-text-retype-error\"));\n            control.tooltip();\n            control.tooltip(\"open\");\n\n            setTimeout(function () {\n              control.focus();\n            }, 100);\n          } else {\n            control.data(\"newValue\", control.val());\n            control.data(\"oldValue\", \"\");\n\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          }\n        }\n      }\n    });\n  } });","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /**\r\n                                                                                                                                                                                                            *   Name: Bizagi smartphone Render Date Extension\r\n                                                                                                                                                                                                            *   Author: Cristian Olaya\r\n                                                                                                                                                                                                            *   Date: 2015-sep-23\r\n                                                                                                                                                                                                            */\nbizagi.rendering.date.extend(\"bizagi.rendering.date\", {\n  DEFAULT_PROPERTIES: { \"maxYearsToDisplay\": 100 } }, _defineProperty({\n\n  /**\r\n                                                                         *  Rendering the control\r\n                                                                         * */\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    if (!properties.editable) {\n      // If isn't a editable control, then show a non editable span\n      container.addClass(\"bz-rn-non-editable\");\n      // Getting the input\n      self.input = control.find(\"span\").addClass(\"bz-rn-date-control\");\n    } else {\n      // Getting the input\n      self.input = self.getDateControl();\n    }\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * To configure the mobiscroll plugin\r\n      * */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n\n    //Call Base\n    self._super();\n\n    var inputControl = self.getDateControl();\n    var controlElements = self.properties.showTime ? [\"calendar\", \"time\"] : [\"calendar\"];\n    var defaultDateControl = self.getFormattedDate(self.properties.value, self.properties.showTime, true);\n    var minDateControl = self.getFormattedDate(self.properties.minValue, self.properties.showTime, false);\n    var maxDateControl = self.getFormattedDate(self.properties.maxValue, self.properties.showTime, false);\n    var timeFormat = self.properties.showTime ? self.getTimeFormat() : \"\";\n\n    //Adds a gap of years to show if the user doest not include min years\n    if (isNaN(Date.parse(minDateControl))) {\n      minDateControl = new Date();\n      minDateControl.setFullYear(minDateControl.getFullYear() - self.Class.DEFAULT_PROPERTIES.maxYearsToDisplay);\n      minDateControl.setHours(0, 0, 0, 0);\n    }\n\n    //Adds a gap of years to show if the user doest not include min years\n    if (isNaN(Date.parse(maxDateControl))) {\n      maxDateControl = new Date();\n      maxDateControl.setFullYear(maxDateControl.getFullYear() + self.Class.DEFAULT_PROPERTIES.maxYearsToDisplay);\n      maxDateControl.setHours(23, 59, 59);\n    }\n\n    $(\".bz-calendar-input\", self.control).click(function () {\n      inputControl.click();\n    });\n\n    if (!self.isValidMinMaxValue()) {\n      self.setValue(\"\");\n      self.input.prop('value', \"\");\n      self.properties.displayValue = \"\";\n    }\n\n    inputControl.mobiscroll().calendar({\n      mode: \"mixed\", // Specify scroller mode like: mode: 'mixed' or omit setting to use default\n      display: \"bottom\", // Specify display mode like: display: 'bottom' or omit setting to use default\n      controls: controlElements,\n      min: minDateControl,\n      max: maxDateControl,\n      defaultValue: defaultDateControl,\n      timeFormat: timeFormat,\n      showScrollArrows: true,\n      lang: bizagi.util.languages[BIZAGI_LANGUAGE] || \"en\",\n      buttons: [\n      \"set\",\n      {\n        text: this.getResource(\"render-plugin-search-users-clear-button-name\"),\n        handler: function handler(e, inst) {\n          self.date = undefined;\n          self.time = undefined;\n          self.timeS = undefined;\n          self.onChangeHandler(true);\n          inst.clear();\n        } },\n\n      \"cancel\"],\n\n      onSet: function onSet(valueText, inst) {\n        var data = inst.getVal();\n        self.date = { \"day\": data.getDate(), \"month\": data.getMonth(), \"year\": data.getFullYear() };\n\n        //Checks if its has time, and included it\n        if (self.properties.showTime) {\n          self.time = { \"hours\": data.getHours(), \"minutes\": data.getMinutes() };\n          if (!self.is24h) {\n            self.timeS = data.getHours() < 12 ? \"am\" : \"pm\";\n          }\n        }\n\n        self.onChangeHandler();\n      },\n      onBeforeShow: function onBeforeShow(event, inst) {\n        // Your custom event handler goes here\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n\n        self.changeMinValue(self.properties.minValue);\n        self.changeMaxValue(self.properties.maxValue);\n\n        //TODO temporal fix in ios smartphone when a notification container is already displayed (QAF-6385 / MOB-171), review mobiscroll.min versions\n        if (bizagi.util.isiOSDevice()) {\n          $(\".ui-bizagi-notifications-container\").css(\"display\", \"none\");\n        }\n      },\n      onClose: function onClose(event, inst) {\n        // Your custom event handler goes here\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"auto\");\n      },\n      onShow: function onShow(event, inst) {\n        $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"hidden\");\n      } });\n\n\n    // Bind event for change value\n    inputControl.on(\"focus\", function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (bizagi.util.isCordovaSupported() && bizagi.util.isAndroidDevice()) {\n        cordova.plugins.Keyboard.disableScroll(true);\n        cordova.plugins.Keyboard.close();\n      }\n    });\n\n    //Set input displayValue if it has default value\n    if (self.properties.displayValue === \"\" && self.properties.value) {\n      var date = self.getFormattedDate(self.properties.value, self.properties.showTime, true, false);\n      var displayValue = bizagi.util.dateFormatter.formatDate(date, self.properties.fullFormat);\n      self.input.prop(\"value\", displayValue);\n    }\n\n    inputControl.attr(\"keyboard\", \"disable\");\n  },\n\n  /**\r\n      * Configure the timeformat\r\n      * */\n  getTimeFormat: function getTimeFormat() {\n    var self = this;\n\n    if (self.properties.timeFormat.indexOf(\"H\") !== -1 || self.properties.timeFormat.indexOf(\"HH\") !== -1) {\n      self.is24h = true;\n      return \"HH:ii\";\n    } else {\n      self.is24h = false;\n      return \"hh:ii A\";\n    }\n  },\n\n  /**\r\n      * Get Date whit the Invariant and ISO Format applied.\r\n      * */\n  getFormattedDate: function getFormattedDate(date, showTime, initializer) {\n    var self = this;\n\n    if (!date || bizagi.util.isObjectEmpty(date)) return;\n\n    //There are some dates that haven't time,... actions and validations for example or when we have to put a initial value (default value without time),\n    //in that cases we should identify the case and if the date haven't the time value, we have to add (00:00:00) it to can apply the format (getDateFromInvariant).\n    var time = showTime && (self.getTime() === \"0:0\" || initializer) ? \" \" +\n    date.substr(date.length - 8, date.length) : \"\";\n    date = bizagi.util.dateFormatter.getDateFromInvariant(initializer && showTime && time.split(\"/\").length > 1 || date.split(\":\").length === 1 ?\n    date += \" 00:00:00\" : date, showTime);\n\n    var fullDateFormated = self.setHour(self.getFullFormatedDate(date, showTime ? time !== \"\" ? time : \" \" + self.getTime() : \" 00:00\"));\n    fullDateFormated = bizagi.util.dateFormatter.getDateFromISO(fullDateFormated, true);\n\n    return fullDateFormated;\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n\n    // Set value in control\n    if (value && self.properties.editable) {\n      if (typeof value === \"number\") {\n        value = new Date(value);\n        dateControl.mobiscroll('option', { min: value });\n        value = bizagi.util.dateFormatter.formatInvariant(value, properties.showTime); // Set as invariant\n      } else {\n        dateControl.mobiscroll('option', { min: bizagi.util.dateFormatter.getDateFromInvariant(value, true) });\n      }\n\n      properties.minValue = value;\n    }\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n\n    // Set value in control\n    if (value && self.properties.editable) {\n      if (typeof value === \"number\") {\n        value = new Date(value);\n        dateControl.mobiscroll('option', { max: value });\n        value = bizagi.util.dateFormatter.formatInvariant(value, properties.showTime); // Set as invariant\n      } else {\n        dateControl.mobiscroll('option', { max: bizagi.util.dateFormatter.getDateFromInvariant(value, true) });\n      }\n\n      properties.maxValue = value;\n    }\n  },\n\n  /**\r\n      * Set the display value on input\r\n      * */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var date = self.getFormattedDate(value, properties.showTime, false);\n    var displayValue = self.preprocessDateValue(date);\n\n    if (properties.editable) {\n      self.input.html(displayValue);\n      self.input.prop(\"value\", displayValue);\n    } else {\n      self.input.text(displayValue);\n    }\n  },\n\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n\n    self.date = undefined;\n    self.time = undefined;\n    self.timeS = undefined;\n    self.onChangeHandler(true);\n    self.setDisplayValue('');\n  },\n\n  /**\r\n      * Get the DOM Control\r\n      * */\n  getDateControl: function getDateControl() {\n    var self = this;\n\n    return $(\"input.bz-rn-date-control\", self.getControl());\n  },\n\n  /**\r\n      * Get Time from mobiscroll\r\n      */\n  getTime: function getTime() {\n    var self = this;\n\n    //Converting the time in 24h format.\n    if (self.properties.showTime && self.time && self.time[\"minutes\"] !== \"\") {\n      var time = self.time[\"hours\"] + \":\" + self.time[\"minutes\"];\n      time += self.timeS;\n\n      if (time.indexOf(\"am\") != -1 && self.time[\"hours\"] == 12) {\n        time = time.replace(\"12\", \"0\");\n      }\n\n      if (time.indexOf(\"pm\") != -1 && self.time[\"hours\"] < 12) {\n        time = time.replace(self.time[\"hours\"], parseInt(self.time[\"hours\"]) + 12);\n      }\n\n      return time.replace(/(am|pm)/, '');\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Get Date from mobiscroll\r\n      * */\n  getDate: function getDate() {\n    var self = this;\n    return self.date && self.date[\"month\"] !== \"\" ? self.date[\"year\"] + \"-\" + (parseInt(self.date[\"month\"]) + 1) + \"-\" + self.date[\"day\"] : \"\";\n  },\n\n  /**\r\n      * Set the control value when the control change\r\n      */\n  onChangeHandler: function onChangeHandler(isClearButton) {\n    var self = this;\n    var properties = self.properties;\n    var currentDate = self.getDate();\n    var currentTime = properties.showTime ? \" \" + self.getTime() : \" 0:00\";\n\n    // If curren date is empty reset actual value\n    if (currentDate === \"\" && !properties.showTime || currentDate === \"\" && currentTime === \"\" || isClearButton) {\n      self.setValue(\"\");\n      self.input.prop('value', \"\");\n      properties.displayValue = \"\";\n    } else {\n      var displayValue;\n      var formattedDate = self.setHour(self.getFullFormatedDate(currentDate, currentTime));\n      var fullFormattedDate = bizagi.util.dateFormatter.getDateFromISO(formattedDate, true);\n\n      if (!fullFormattedDate || fullFormattedDate === 0) return;\n\n      // Set date value\n      self.setNewDateValue(fullFormattedDate, properties.showTime);\n\n      displayValue = self.preprocessDateValue(fullFormattedDate);\n      properties.displayValue = displayValue;\n      self.input.prop('value', self.properties.displayValue);\n    }\n  },\n\n  /**\r\n      * Apply the final format that will be showed on the input\r\n      * */\n  getFullFormatedDate: function getFullFormatedDate(currentDate, currentTime) {\n    var fullDate = \"\";\n\n    if (currentDate.length > 0) {\n      fullDate = currentDate;\n    } else if (currentDate !== undefined) {\n      fullDate = bizagi.util.dateFormatter.formatISO(currentDate, false);\n    } else {\n      fullDate = bizagi.util.dateFormatter.formatISO(new Date(), false);\n    }\n\n    fullDate += currentTime;\n    var dateFromFormat = bizagi.util.dateFormatter.getDateFromFormat(fullDate, \"yyyy-MM-dd H:m\");\n\n    return bizagi.util.dateFormatter.formatDate(dateFromFormat !== 0 ? dateFromFormat : currentDate, \"yyyy-MM-dd H:mm:ss\");\n  },\n\n  /**\r\n      * Set the control value\r\n      * */\n  setNewDateValue: function setNewDateValue(formatedFullDate, showTime) {\n    var self = this;\n    var value = formatedFullDate != \"\" ? bizagi.util.dateFormatter.formatInvariant(formatedFullDate, showTime) : \"\";\n    self.setValue(value);\n  },\n\n  /**\r\n      * Removing the time when be necesary\r\n      * */\n  applyDateFormat: function applyDateFormat(date, showTime) {\n    if (!showTime) {\n      var initIndexTime = null;\n      if (date.indexOf(\"00:00\") != -1) {\n        initIndexTime = date.indexOf(\"00:00\");\n      } else if (date.indexOf(\"0:00\") != -1) {\n        initIndexTime = date.indexOf(\"0:00\");\n      } else if (date.indexOf(\"12:00\") != -1) {\n        initIndexTime = date.indexOf(\"12:00\");\n      } else {\n        initIndexTime = \"-1\";\n      }\n\n      var endIndexTime = initIndexTime + 8;\n      date = initIndexTime === -1 ? date : date.replace(date.substring(initIndexTime, endIndexTime), \"\").replace(\" am\", \"\").replace(\" pm\", \"\");\n    }\n\n    return date;\n  },\n\n  /*\r\n      *  Checks if the date could be localized using site language\r\n      * */\n  preprocessDateValue: function preprocessDateValue(date) {\n    var self = this;\n    var properties = self.properties;\n    var displayValue;\n\n    displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat);\n\n    return displayValue;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var bValid = true;\n    var value = self.getValue();\n\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable)) {\n        value = bizagi.util.dateFormatter.getDateFromInvariant(value);\n\n        if (value != 0) {\n          // Clear time for validations\n          value.setHours(0, 0, 0, 0);\n\n          // Check min value and max value\n          if (properties.minValue && typeof properties.minValue === 'string') {\n            bValid = self.validateMinAndMaxValue(value, true, properties, invalidElements) ? false : bValid;\n          }\n\n          if (properties.maxValue && typeof properties.maxValue === 'string') {\n            bValid = self.validateMinAndMaxValue(value, false, properties, invalidElements) ? false : bValid;\n          }\n        }\n      }\n    }\n\n    if (bizagi.util.parseBoolean(properties.editable)) {\n      // Check required\n      if (properties.required && self.hasValue()) {\n        var control = self.getDateControl();\n\n        if (control.length > 0 && control.val().length <= 0) {\n          bValid = self.showMandatoryMessage(properties, invalidElements);\n        }\n      } else if (properties.required && !self.hasValue()) {\n        self.showMandatoryMessage(properties, invalidElements);\n      }\n    }\n\n    if (bValid) {\n      // Clear error message\n      self.setValidationMessage(\"\");\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * To validate the min and max values\r\n      */\n  validateMinAndMaxValue: function validateMinAndMaxValue(value, isMinValue, properties, invalidElements) {\n    var vValue = bizagi.util.dateFormatter.getDateFromInvariant(isMinValue ? properties.minValue : properties.maxValue);\n    vValue.setHours(0, 0, 0, 0);\n\n    if (isMinValue && value < vValue || !isMinValue && value > vValue) {\n      var message = isMinValue ?\n      this.getResource(\"render-date-minimum-validation\").replaceAll(\"#label#\", properties.displayName).replaceAll(\"#minValue#\", bizagi.util.dateFormatter.formatDate(vValue, properties.fullFormat)) :\n      this.getResource(\"render-date-maximum-validation\").replaceAll(\"#label#\", properties.displayName).replaceAll(\"#maxValue#\", bizagi.util.dateFormatter.formatDate(vValue, properties.fullFormat));\n\n      invalidElements.push({\n        xpath: properties.xpath,\n        message: message });\n\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * To show the mandatory values message\r\n      * */\n  showMandatoryMessage: function showMandatoryMessage(properties, invalidElements) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n\n    invalidElements.push({ xpath: properties.xpath, message: message });\n\n    return false;\n  },\n\n  setHour: function setHour(date) {\n    return date.replace(\" 0:\", \" 00:\").replace(\" 1:\", \" 01:\").replace(\" 2:\", \" 02:\").replace(\" 3:\", \" 03:\").replace(\" 4:\", \" 04:\").replace(\" 5:\", \" 05:\").replace(\" 6:\", \" 06:\").replace(\" 7:\", \" 07:\").replace(\" 8:\", \" 08:\").replace(\" 9:\", \" 09:\");\n  },\n\n  isValidMinMaxValue: function isValidMinMaxValue() {\n    var self = this;\n    var isValid = true;\n    var value = self.getValue();\n\n    if (value) {\n      value = bizagi.util.dateFormatter.getDateFromInvariant(value);\n\n      if (value !== 0) {\n        // Clear time for validations\n        value.setHours(0, 0, 0, 0);\n\n        // Check min value and max value\n        if (self.properties.minValue && typeof self.properties.minValue === 'string')\n        isValid = self.validateMinAndMaxValue(value, true);\n\n        if (self.properties.maxValue && typeof self.properties.maxValue === 'string')\n        isValid = self.validateMinAndMaxValue(value, false);\n      }\n    }\n\n    return isValid;\n  } }, \"validateMinAndMaxValue\",\n\nfunction validateMinAndMaxValue(currentDate, isMinValue) {\n  var self = this;\n  var date = isMinValue ? self.properties.minValue : self.properties.maxValue;\n  var formattedDate = bizagi.util.dateFormatter.getDateFromInvariant(date);\n\n  formattedDate.setHours(0, 0, 0, 0);\n\n  return !(isMinValue && currentDate < formattedDate || !isMinValue && currentDate > formattedDate);\n\n}));","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi smartphone Render option select\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: CristianO\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Date: 29/10/2015\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   Render a single input with a modal view, this modal view contain a\r\n                                                                                                                                                                                                                                                                                                                                                                                *       selectable list.\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\nbizagi.rendering.combo.extend(\"bizagi.rendering.combo\", {},\n{\n\n  /*\r\n  *\r\n  * */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var result = self._super();\n    var template = self.renderFactory.getTemplate(\"readonlyCombo\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * Initilizing the combo control\r\n      * */\n  renderSingle: function renderSingle() {\n    var self = this;\n\n    self._super();\n\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n    var params = {};\n\n    // Flag to set or not the display value on cascading combos.\n    self.showDisplayValue = false;\n\n    // Getting the input\n    self.input = $(\".bz-rn-combo-control\", control);\n    if (properties.parentComboValue && properties.parentComboValue != null) {\n      params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = properties.parentComboValue;\n\n      //If is a cascading combo, and has a parent and has its own value, then set the display value.\n      self.showDisplayValue = self.parentCombo && self.parentCombo.value && self.parentCombo.value.value !== \"\" && self.properties.value && self.properties.value.value;\n    }\n\n    if (!properties.editable) {\n      self.inputSpan = $('.bz-rn-text', control);\n      container.addClass(\"bz-rn-non-editable bz-command-edit-inline\");\n\n      if (self.value != null) {\n        self.inputSpan.text(self.value.value || self.value.id);\n      }\n    } else {\n      if (typeof self.initialValueSet !== \"undefined\" && !self.initialValueSet) {\n        $.when(self.renderCombo(params)).done(function (html) {\n          self.getControl().html(html);\n          self.input = self.combo = self.getControl();\n          self.configureCombo();\n          self.processLayout(false, self.properties.valueFormat || {});\n        });\n      } else {\n        self.configureCombo();\n      }\n    }\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n\n    if (properties.editable) {\n      container.addClass(\"bz-command-edit-inline\");\n    }\n\n    self._super();\n  },\n\n  renderEdition: function renderEdition() {},\n\n  /**\r\n                                               * Setting the combo's handlers\r\n                                               * */\n  configureCombo: function configureCombo() {\n    var self = this;\n\n    self.inputSpan = self.input.find(\".bz-rn-cm-text-label\");\n    self.inputSpan.html($(\"option:selected\", self.input).text());\n    self.inputSpan.val($(\"option:selected\", self.input).text());\n\n    $(\".bz-rn-container-combo\", self.getControl()).unbind().bind(\"click\", function () {\n      //After click on input combo, remove focus of it.\n      self.input.find(\".bz-rn-combo-control\").blur();\n      $(self.input).blur();\n\n      self.input.attr(\"keyboard\", \"disable\");\n\n      //Creating modal view\n      self.processComboData(self.properties.data);\n      var template = self.renderFactory.getTemplate('comboModalView');\n      var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n      var data = {\n        'items': self.properties.data,\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView(\"open\");\n    });\n  },\n\n  processComboData: function processComboData(data) {\n    var self = this;\n\n    data.forEach(function (value) {\n      self.validateValue(value);\n    });\n  },\n\n  validateValue: function validateValue(value) {\n    var self = this;\n\n    if (value.id != undefined && (typeof value.id === \"number\" && value.id !== null || typeof value.id === \"string\" && value.id.length > 0)) {\n      var translated = false; //When the parametric entity have a boolean attribute\n      if (value.value !== null && typeof value.value === \"boolean\") {\n        translated = true;\n        if (bizagi.util.parseBoolean(value.value) === true) {\n          value.value = bizagi.localization.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(value.value) === false) {\n          value.value = bizagi.localization.getResource(\"render-boolean-no\");\n        }\n      } else if (value.value != null && _typeof(value.value) === \"object\") {\n        for (var i = 0, length = value.value.length; i < length; i++) {\n          if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value.value[i]) === true) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //getting combo list elements\n    var container = inputContainer.find(\".bz-wp-modalview-results-list li\");\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Filtering list\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('change keypress  keyup change', function () {\n      self.filterList(this.value, container, inputContainer);\n    });\n\n    //Cleaning list\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind(\"click\", function () {\n      self.filterList(\"\", container, inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //Configuring list as a selectable element\n    self.list = $(\".bz-wp-modalview-results-list\", inputContainer);\n    self.setModalViewDisplayValue(self.properties.value || false);\n\n    self.inputSpan = inputContainer.find(\".bz-rn-cm-text-label\");\n    self.inputSpan.html($(\"li.ui-selected\", self.list).text());\n    self.inputSpan.val($(\"li.ui-selected\", self.list).text());\n\n    self.list.find(\"li\").bind(\"click\", function () {\n      self.list.find(\"li\").filter(function () {\n        if ($(this).hasClass(\"ui-selected\")) {\n          return $(this);\n        }\n      }).removeClass(\"ui-selected\");\n\n      $(this).addClass(\"ui-selected\");\n      self.input.blur();\n      $(\".bz-wp-modalview-header-input-search\", inputContainer).blur();\n    });\n\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      var selected = $(\"li.ui-selected\", self.list);\n      var value = $(selected).data(\"value\");\n      var label = $(selected).text();\n\n      //Update internal value\n      var newValue = { id: value, value: label };\n      self.selectedValue = newValue.value;\n      self.setDisplayValue(newValue);\n\n    }).fail(function () {\n      //console.warn(\"combo error\");\n    });\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * */\n  filterList: function filterList(search, $li, inputContainer) {\n    if (search !== \"\") {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n    } else {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n    }\n\n    $li.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = search.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n  },\n\n  /**\r\n      * Setting the selected element.\r\n      * */\n  setModalViewDisplayValue: function setModalViewDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable && value && typeof value !== \"undefined\" && value !== null && value.id !== \"\") {\n      self.list.find(\"#ui-bizagi-list-\" + value.id).addClass(\"ui-selected\");\n    }\n  },\n\n  /**\r\n      * Setting the display value, always you call a setDisplayValue yor are performinng a setValue under the hood.\r\n      * */\n  setDisplayValue: function setDisplayValue(value) {\n    if (value && _typeof(value) === \"object\" && typeof value.label !== \"undefined\") {\n      var comboValue = value.label != \"\" && !bizagi.util.isNumeric(value.label) ? value.label : this.findDataValueById(value.value).value || \"\";\n\n      if ($.isArray(comboValue)) {\n        comboValue = comboValue.join(\" - \");\n      }\n\n      value = { id: value.value, value: comboValue };\n    }\n\n    var control = this.getControl();\n    $(\"input\", control).val(this.formatItem(value.value));\n\n    //Set Value\n    this.setValue(value);\n  },\n\n  resetData: function resetData() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.hasLocalData = false;\n    properties.data = [];\n    properties.remoteDataLoaded = false;\n\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    var value = { id: \"\", value: \"\" };\n    this.setDisplayValue(value);\n  },\n\n  /**\r\n      * Getting the templates\r\n      * */\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi smartphone Render ECM Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will redefine the ecm render class to adjust to smartphones devices\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n\n// Extends itself\nbizagi.rendering.ecm.extend(\"bizagi.rendering.ecm\", {\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  QUALITY_PICTURE: 50,\n  LIMIT: 1, //limit: The maximum number of audio clips,videoclips, etc in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\"] },\n{\n  renderControl: function renderControl(listControl, fileProperties) {\n    var self = this;\n\n    return $.when(self._super(listControl, fileProperties)).done(function (html) {\n      return html;\n    }).fail(function () {\n      return \"Error\";\n    }).always(function (html) {\n      self.stopLoading();\n      return html;\n    });\n  },\n\n  /**\r\n      * Override because of the required element\r\n      * @override\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    //Remove the required div from the dom in order to have only one any time\n    var control = self.getControl();\n    control.find(\".bz-rn-ecm-required\").remove();\n    var properties = self.properties;\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument)) {\n      if (!self.hasValue()) {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\"></div>\");\n      } else {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\" style=\\\"display: none\\\"></div>\");\n      }\n\n      self.setPlaceHolder();\n    }\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n\n  /**\r\n      * Override because of the required element\r\n      * @override\r\n      */\n  changeRequiredLabel: function changeRequiredLabel() {\n    var self = this;\n    var control = self.getControl();\n    control.find(\".bz-rn-ecm-required\").remove();\n\n    var properties = self.properties;\n\n    if (properties.required) {\n\n      if (!self.checkRequired([])) {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\"></div>\");\n\n      } else {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\" style=\\\"display: none\\\"></div>\");\n      }\n    }\n  },\n\n  replaceControlHtml: function replaceControlHtml(html, replace) {\n    html = html || \"\";\n    replace = replace || \"\";\n\n    var respString = $(html.replace(\"{{control}}\", replace));\n\n    if (replace === \"\") {\n      this.startLoading(respString);\n    }\n\n    return respString.get(0).outerHTML;\n  },\n\n  startLoading: function startLoading(holder) {\n    holder = holder || this.getRenderedElement();\n    $(\".ui-bizagi-render-control\", holder).prepend(\"<div class=\\\"innerLoader\\\"></div>\").addClass(\"bz-rn-ecm-control\");\n  },\n\n  stopLoading: function stopLoading() {\n    $(\".innerLoader\", this.getControl()).remove();\n  },\n\n  startWaiting: function startWaiting($button) {\n    var $control = $button.closest(\".bz-rn-ecm-metadata\");\n    $button.addClass(\"loading\");\n    $control.find(\"input, a\").css(\"opacity\", 0.6);\n    $control.find(\".ui-bizagi-render-button, button, input\").prop(\"disabled\", \"disabled\");\n    $control.find(\"input\").prop(\"readonly\", \"readonly\");\n  },\n\n  stopWaiting: function stopWaiting($button) {\n    var $control = $button.closest(\".bz-rn-ecm-metadata\");\n    $control.find(\"input, a\").css(\"opacity\", 1);\n    $control.find(\".ui-bizagi-render-button, button, input\").prop(\"disabled\", false);\n    $control.find(\"input\").prop(\"readonly\", false);\n    $control.find(\".loading\").removeClass(\"loading\");\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getControl();\n    var containerRender = self.getContainerRender();\n    var control = self.getControl();\n\n    self.itemAddfile = $(\".bz-rn-ecm-upload\", container);\n    self.$inputFile = $(\".bz-rn-upload-files-web\", control);\n\n\n    container.addClass(\"bz-command-edit-inline\");\n\n    setTimeout(function () {\n      control.parent().find(\".ui-bizagi-label\").hide();\n    }, 100);\n\n    if (control.find(\".bz-rn-ecm-url a\").length > 0) {\n      var adjustUrl = control.find(\".bz-rn-ecm-url a\").attr(\"onclick\").replace(\"../../\", \"\");\n      control.find(\".bz-rn-ecm-url a\").attr(\"onclick\", adjustUrl);\n    }\n\n    // ios native behaviour, should open files through a webview\n    if (bizagi.util.isNativePluginSupported()) {\n      var filesLinkElements = control.find(\".bz-rn-ecm-url a\");\n\n      filesLinkElements.removeAttr(\"onclick\");\n\n      filesLinkElements.on(\"click\", function () {\n        bizagi.loading.start();\n        $.when(bizagi.util.media.downloadFile($(this).attr(\"data-url\"), this.title)).fail(function (error) {\n          if (error.responseText) {\n            self.getFormContainer().failHandler(error.responseText);\n          }\n        }).always(function () {\n          bizagi.loading.start();\n        });\n      });\n    }\n\n    self.configureHelpText();\n    self.closeAccordionSection();\n\n    if (!properties.editable) {\n      containerRender.addClass(\"bz-rn-non-editable\");\n    } else {\n      containerRender.addClass(\"bz-command-edit-inline\");\n    }\n\n    $(\".bz-rn-ecm-activate-menu\", control).bind(\"click\", function () {\n      var elementBase = $(this);\n      var parents = elementBase.parents(\".bz-rn-ecm-metadata\");\n      var menu = $(\".bz-rn-ecm-menu-container\", parents);\n\n      if (!$(this).is(\".active\") && !$(\".bz-rn-ecm-metadata-container\", parents).is(\".active\")) {\n        self.closeAccordionSection();\n        $(this).addClass(\"active\");\n        menu.addClass(\"showMenu\");\n      } else if (!$(\".bz-rn-ecm-metadata-container\", parents).is(\".active\")) {\n        $(this).removeClass(\"active\");\n        self.closeAccordionSection();\n      }\n\n      var tmpidElement = elementBase.parent().data(\"idfileupload\") || \"\";\n      self.elementsEvent = {\n        \"menu\": menu,\n        \"lock\": $(\".bz-ecm-lock\", menu),\n        \"unlock\": $(\".bz-ecm-unlock\", menu),\n        \"del\": $(\".bz-ecm-delete\", menu),\n        \"edit\": $(\".bz-ecm-edit\", menu),\n        \"element\": { \"id\": tmpidElement, \"filename\": elementBase.parent().attr(\"title\") || \"\", elementReference: this },\n        \"params\": { idFileUpload: tmpidElement, xPath: self.properties.xpath, idAttrib: self.properties.idAttrib, idPageCache: self.properties.idPageCache, xpathContext: self.getXpathContext() },\n        \"panelMetadata\": $(\".bz-rn-ecm-metadata-container\", parents),\n        \"btnCancel\": $(\".ecm-btn-cancel\", parents),\n        \"btnSave\": $(\".ecm-btn-save\", parents) };\n\n\n      if (menu.is(\":visible\")) {\n        self.addEventsEcm();\n      } else {\n        self.removeEventsEcm();\n      }\n    });\n\n    if (!properties.editable) {\n      self.itemAddfile.hide();\n      return;\n    }\n\n    if (bizagi.util.isCordovaSupported()) {\n      // Upload items\n      var itemsUpload = self.checkExtensions();\n\n      // Upload image\n      $(self.itemAddfile).actionSheet({\n        actions: itemsUpload,\n        actionClicked: function actionClicked(action) {\n          self.handlerUploadImage(action.guid);\n        } });\n\n\n      self.checkMaxFiles();\n    } else\n    {\n      if (bizagi.util.media.fileAPISupported()) {\n        $(self.itemAddfile).off(\"click\").click(function () {\n          self.$inputFile.click();\n        });\n      } else {\n        // Bloquea la accin de carga de archivos\n        self.itemAddfile.hide();\n      }\n\n      // Just in case\n      self.$inputFile.off(\"click\").on(\"click\", function (e) {e.stopPropagation();});\n\n      // Image change (Web only)\n      self.$inputFile.off(\"click\").on(\"change\", function () {\n        var dataFile = self.$inputFile[0].files[0];\n        dataFile.fullPath = self.$inputFile[0].value;\n        var extensions = [].concat(self.Class.EXTENSIONSIMG, self.Class.EXTENSIONSVIDEO, self.Class.EXTENSIONSAUDIO);\n\n        self.startLoading();\n        if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n        bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n          $.when(self.uploadFile(dataFile)).done(function (result) {\n            if (_typeof(result) !== \"object\") {\n              // onUploadFileCompleted 2nd param needs to be a response object\n              result = {\n                response: result };\n\n            }\n            self.onUploadFileCompleted(self, result);\n          }).fail(function (error) {\n            self.stopLoading();\n\n            if (error.statusText !== \"Unauthorized\") {\n              bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-language-error\"));\n            }\n\n            if (error.code === 3) {\n              bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n            } else {\n              bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n            }\n            bizagi.log(\"An error has occurred: Code = \" + error.code);\n          });\n\n        } else {\n          self.stopLoading();\n        }\n      });\n    }\n  },\n\n  closeAccordionSection: function closeAccordionSection() {\n    var self = this;\n    var control = self.getControl();\n    var menuItem = $(\".bz-rn-ecm-activate-menu\", control);\n    var menu = $(\".bz-rn-ecm-menu-container\", control);\n    var metadata = $(\".bz-rn-ecm-metadata-container\", control);\n\n    menuItem.removeClass(\"active\");\n    menu.removeClass(\"showMenu\");\n\n    metadata.removeClass(\"active\");\n    metadata.slideUp(300).removeClass(\"open\");\n  },\n\n  addEventsEcm: function addEventsEcm() {\n    var self = this;\n    self.removeEventsEcm();\n\n    self.getControl().find(\".bz-rn-ecm-header .bz-mo-icon.bz-plus[data-action=\\\"add\\\"]\").click(function (event) {\n      event.preventDefault();\n    });\n\n    self.elementsEvent.lock.click(function () {\n      $.when(self.dataService.checkOutFile(self.elementsEvent.params)).done(function () {\n        self.elementsEvent.lock.removeClass(\"bz-ecm-item-menu-enable\");\n        self.elementsEvent.unlock.addClass(\"bz-ecm-item-menu-enable\");\n\n      });\n    });\n    self.elementsEvent.unlock.click(function () {\n      $.when(self.dataService.cancelCheckOut(self.elementsEvent.params)).done(function () {\n        self.elementsEvent.unlock.removeClass(\"bz-ecm-item-menu-enable\");\n        self.elementsEvent.lock.addClass(\"bz-ecm-item-menu-enable\");\n      });\n    });\n\n    var nTimeoutAccordionSection = null;\n\n    self.elementsEvent.del.bind(\"click\", function () {\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      self.closeAccordionSection();\n      self.startLoading();\n\n      $(self.elementsEvent.element.elementReference).closest(\".bz-rn-ecm-metadata\").css(\"opacity\", 0.5);\n\n      $.when(self.dataService.deleteECMFile(self.elementsEvent.params)).done(function () {\n        self.removeEventsEcm();\n        $(self.elementsEvent.element.elementReference).parents(\".bz-rn-ecm-metadata\").remove();\n\n        //Set files in a temporal array\n        var files = [].concat(self.files);\n\n        //Remove element form files array\n        for (var i = 0; i < files.length; i++) {\n          if (files[i][0] === self.elementsEvent.params.idFileUpload) {\n            files.splice(i, 1);\n          }\n        }\n\n        //Set Value\n        self.setValue(files);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n      }).always(function () {\n        $(self.elementsEvent.element.elementReference).closest(\".bz-rn-ecm-metadata\").css(\"opacity\", 1);\n        self.stopLoading();\n      });\n    });\n\n    self.setMobiscroll();\n\n    self.elementsEvent.edit.click(function () {\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      self.closeAccordionSection();\n\n      if (!self.elementsEvent.panelMetadata.is(\".active\")) {\n        self.elementsEvent.panelMetadata.addClass(\"active\");\n        nTimeoutAccordionSection = setTimeout(function () {\n          self.elementsEvent.panelMetadata.stop().slideDown(300).addClass(\"open\");\n        }, 200);\n      }\n    });\n\n    self.elementsEvent.btnSave.click(function () {\n      var properties = self.properties;\n      var elementsToCheck = $(\".bz-rn-ecm-metadata-value\", self.elementsEvent.panelMetadata);\n      var metadata = [];\n      var isInvalid = false;\n      var $button = $(this);\n\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      //self.closeAccordionSection();\n      //self.startLoading( );\n      self.startWaiting($button);\n\n      for (var metadataelement = 0; metadataelement < elementsToCheck.length; metadataelement++) {\n        var tmpElement = elementsToCheck[metadataelement];\n        var oldValue = $(tmpElement).data(\"value\");\n        var type = $(tmpElement).data(\"metadatatype\");\n        var required = $(tmpElement).data(\"required\");\n        var readonly = $(tmpElement).data(\"readonly\");\n        var description = $(tmpElement).data(\"description\");\n        var idmetadata = $(tmpElement).data(\"idmetadata\");\n        var actualValue = null;\n\n        if (readonly) {\n          self.stopLoading();\n          self.stopWaiting($button);\n          return true;\n        }\n\n        if (type === \"STRING\" || type === \"DECIMAL\") {\n          actualValue = $(\"input\", tmpElement).val();\n        } else if (type === \"BOOL\") {\n          actualValue = $(\"input[name=ecm-radio]:checked\", tmpElement).val();\n        } else if (type === \"DATETIME\") {\n          var format = self.properties.fullFormat ? self.properties.fullFormat : self.getResource(\"fullFormat\") != \"fullFormat\" ? self.getResource(\"fullFormat\") : \"yyyy-MM-dd HH:mm:ss\";\n          actualValue = bizagi.util.dateFormatter.formatDate(bizagi.util.dateFormatter.getDateFromISO($(\"input\", tmpElement).attr(\"value\"), false), format);\n        }\n\n        if (required && (actualValue === \"\" || actualValue === null)) {\n          bizagi.showMessageBox(description + \": \" + self.getResource(\"render-ecm-tooltip-mandatory\"), \"Error\");\n          isInvalid = true;\n        }\n\n        if (!isInvalid && actualValue != oldValue) {\n          metadata.push({\n            idMetadata: idmetadata,\n            value: actualValue });\n\n        }\n      }\n\n      if (!isInvalid) {\n        var params = self.buildAddParams();\n        params.fileName = self.elementsEvent.element.filename;\n        params.idFileUpload = self.elementsEvent.element.id;\n        params.idPageCache = properties.idPageCache;\n        params.metaValues = JSON.encode({\n          metadataValues: metadata });\n\n\n        $.when(self.dataService.updateECMMetadata(params)).done(function () {\n          self.stopLoading();\n          self.stopWaiting($button);\n        });\n      } else\n      {\n        self.stopLoading();\n        self.stopWaiting($button);\n      }\n    });\n\n    self.elementsEvent.btnCancel.click(function () {\n      self.closeAccordionSection();\n      self.removeEventsEcm();\n    });\n  },\n\n  /**\r\n      * Creates the date picker for the DOM.bz-ecm-metadata-date elements\r\n      */\n  setMobiscroll: function setMobiscroll() {\n    var self = this;\n    var metadataElements = self.elementsEvent.panelMetadata.find(\".bz-ecm-metadata-date\");\n    metadataElements.each(function (index, input) {\n      var $input = $(input);\n      var value = $input.attr(\"value\");\n      var now = new Date();\n      var valueDate = value ? new Date(value) : now;\n      var minDate = now.getTime() < valueDate.getTime() ? now : valueDate;\n\n      minDate.setFullYear(minDate.getFullYear() - 2);\n\n      $input.mobiscroll().calendar({\n        mode: \"mixed\", // Specify scroller mode like: mode: \"mixed\" or omit setting to use default\n        display: \"bottom\", // Specify display mode like: display: \"bottom\" or omit setting to use default\n        controls: [\"calendar\"],\n        min: minDate,\n        defaultValue: valueDate,\n        lang: bizagi.util.languages[BIZAGI_LANGUAGE] || \"en\",\n        onSet: function onSet(valueText) {\n          // It seems like the plugin doesn't sets the value\n          $input.attr(\"value\", valueText);\n          $input.closest(\".bz-rn-ecm-metadata-item\").find(\".bz-rn-ecm-meta-required\").removeClass(\"bz-rn-ecm-meta-required\");\n        } });\n\n    });\n  },\n\n  removeEventsEcm: function removeEventsEcm() {\n    var self = this;\n\n    self.elementsEvent.lock.unbind(\"click\");\n    self.elementsEvent.unlock.unbind(\"click\");\n    self.elementsEvent.del.unbind(\"click\");\n    self.elementsEvent.edit.unbind(\"click\");\n    self.elementsEvent.btnSave.unbind(\"click\");\n    self.elementsEvent.btnCancel.unbind(\"click\");\n  },\n\n  handlerUploadImage: function handlerUploadImage(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    bizagi.loading.start();\n\n    if (actionSelected === 2) {\n      // Select picture\n      navigator.camera.getPicture(function (dataImage) {\n        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).done(function () {\n          $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n            self.fileProperties = fileData;\n            self.saveImage(self, dataImage);\n          });\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }, self.onFail, {\n        quality: self.Class.QUALITY_PICTURE,\n        sourceType: Camera.PictureSourceType.PHOTOLIBRARY });\n\n    } else if (actionSelected === 1) {\n      // Take picture\n      navigator.camera.getPicture(function (dataImage) {\n        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).done(function () {\n          $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n            self.fileProperties = fileData;\n            self.saveImage(self, dataImage);\n          });\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      },\n      self.onFail,\n      {\n        quality: self.Class.QUALITY_PICTURE,\n        sourceType: navigator.camera.PictureSourceType.CAMERA,\n        mediaType: navigator.camera.MediaType.PICTURE,\n        destinationType: Camera.DestinationType.FILE_URI,\n        correctOrientation: true });\n\n\n    } else if (actionSelected === 3) {\n      // Capture video\n      navigator.device.capture.captureVideo(function (dataImage) {\n        $.when(bizagi.util.media.checkMaxSizeVideo(dataImage, self.properties)).done(function () {\n          self.saveVideo(self, dataImage);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }, self.onFail, { limit: self.Class.LIMIT });\n    } else if (actionSelected === 4) {\n      // Capture audio\n      navigator.device.capture.captureAudio(function (mediaFiles) {\n        var audioUrl = mediaFiles[0].localURL;\n        $.when(bizagi.util.media.checkMaxSize(audioUrl, self.properties)).done(function () {\n          self.saveAudio(self, mediaFiles);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }, self.onFail, { limit: self.Class.LIMIT });\n    }\n  },\n\n  renderUploadItem: function renderUploadItem(file) {\n    return this._super(file);\n  },\n\n  /**\r\n      * Send file using HTTP\r\n      * @param dataFile\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  uploadFile: function uploadFile(dataFile) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n    bizagi.util.media.checkFileTypes(dataFile, self.properties, [].concat(self.Class.EXTENSIONSIMG, self.Class.EXTENSIONSVIDEO, self.Class.EXTENSIONSAUDIO))) {\n\n      // Get form data for POSTing\n      var formData = new FormData();\n      var form = self.getFormContainer();\n      var data = self.buildAddParams();\n\n      var keys = Object.keys(data);\n      keys.map(function (key) {\n        formData.append(key, data[key]);\n      });\n\n      formData.append(\"Filedata\", dataFile);\n      // It seems like some OS uses \\ instead of / so ...\n      formData.append(\"Filename\", dataFile.name.substr(dataFile.name.replace(/([\\\\\\/]+)/g, \"/\").lastIndexOf(\"/\") + 1));\n\n      if (self.properties.contexttype) {\n        formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", self.properties.contexttype);\n      }\n\n      try {\n        if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n          formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n        } else {\n          formData.append(\"JSESSIONID\", form.properties.sessionId);\n        }\n      } catch (e) {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n\n      self.dataService.processUploadFile({\n        url: self.properties.addUrl,\n        formData: formData }).\n      done(function (response) {\n        defer.resolve(response);\n      }).fail(function (error) {\n        defer.reject(error);\n      });\n\n    } else {\n      bizagi.loading.stop();\n    }\n\n    return defer.promise();\n  },\n\n  saveImage: function saveImage(context, dataImage) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n    var fileName = self.fileProperties.name;\n\n    if (self.editedImageURL) {\n      params.dataFile = self.editedImageURL;\n    } else if (self.fileProperties) {\n      params.dataFile = self.fileProperties.url;\n    }\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.mimeType = \"image/jpeg\";\n    params.options.uploadKey = { key: addParams[\"xPath\"] };\n    params.options.addUrl = self.properties.addUrl;\n\n    //Cleans variables related previous uploads\n    self.editedImageURL = null;\n    self.fileProperties = null;\n\n    // Fix android 4.4 getting images from recent folder\n    params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  saveAudio: function saveAudio(context, dataAudio) {\n    var self = context;\n    var params = {};\n    var fileName = dataAudio[0].name;\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.uploadKey = { key: addParams[\"xPath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataAudio[0].fullPath;\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  saveVideo: function saveVideo(context, dataVideo) {\n    var self = context;\n    var params = {};\n    var fileName = dataVideo[0].name;\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.uploadKey = { key: addParams[\"xPath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataVideo[0].fullPath;\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  onFail: function onFail(error) {\n    bizagi.log(\"Error code: \" + error.code);\n  },\n\n  onUploadFileCompleted: function onUploadFileCompleted(context, response) {\n    var self = this;\n\n    try {\n      response = JSON.parse(decodeURI(response.response));\n\n      if (response.idFileUpload != \"undefined\" && response.idFileUpload !== null) {\n\n        //self.submitOnChange();\n        var control = self.getControl();\n\n        //Increment counter\n        self.filesCount = self.filesCount + 1;\n        var files = [].concat(self.files);\n        files.push([response.idFileUpload, response.fileName]);\n\n        //Set Value\n        self.setValue(files, false);\n\n        $.when(self.renderControl(null, null)).done(function (result) {\n          control.html(result);\n          self.postRenderSingle();\n        });\n      } else {\n        throw \"not present idFileUpload\";\n      }\n\n    } catch (e) {\n      bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      bizagi.log(\"Error ECM:\");\n      bizagi.log(e);\n    }\n  },\n\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var maxFiles = properties.maxfiles;\n    var actualFiles = properties.value.length;\n\n    if (maxFiles !== 0 && actualFiles >= maxFiles) {\n      self.itemAddfile.hide();\n    }\n  },\n\n  checkExtensions: function checkExtensions() {\n    var self = this;\n    var properties = self.properties;\n    var validExtensions = properties.validExtensions;\n\n    var enableVideo = false;\n    var enableAudio = false;\n    var enableImage = false;\n\n    var itemsUpload = [];\n\n    if (typeof validExtensions === \"undefined\" || validExtensions === \"\") {\n      enableVideo = enableAudio = enableImage = true;\n    } else {\n      validExtensions = validExtensions.split(\";\");\n\n      if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\n        enableVideo = enableAudio = enableImage = true;\n      } else {\n        for (var i = 0, length = validExtensions.length; i < length; i++) {\n          validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\n\n          if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]) >= 0) {\n            enableImage = true;\n          }\n\n          if (self.Class.EXTENSIONSAUDIO.toString().indexOf(validExtensions[i]) >= 0) {\n            enableAudio = true;\n          }\n\n          if (self.Class.EXTENSIONSVIDEO.toString().indexOf(validExtensions[i]) >= 0) {\n            enableVideo = true;\n          }\n        }\n      }\n    }\n\n    if (!enableAudio && !enableImage && !enableVideo) {\n      self.itemAddfile.hide();\n    }\n\n    // Add image options\n    if (enableImage) {\n      itemsUpload.push({ \"guid\": 1, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\") });\n      itemsUpload.push({ \"guid\": 2, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\") });\n    }\n\n    // Audio & Video options will be disabled for a while\n    /*\r\n    // Add video options\r\n    if (enableVideo) {\r\n        itemsUpload.push({ \"guid\": 3, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-video\") });\r\n    }\r\n          // Add audio options\r\n    if (enableAudio) {\r\n        itemsUpload.push({ \"guid\": 4, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-record-audio\") });\r\n    }\r\n    */\n\n\n    return itemsUpload;\n  },\n\n  validateFileExtensions: function validateFileExtensions(nameArchivo) {\n    var validExtensions = /(.jpg|.gif|.png|.bmp|.jpeg|.mov|.avi|.mpg|.mpeg|.3gp|.asf|.wmv|.flv|.mp4)$/i;\n\n    return validExtensions.test(nameArchivo);\n  },\n\n  renderFileLayout: function renderFileLayout(data, fileProperties) {\n    var self = this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\n    var deferred = $.Deferred();\n\n    $.when(self.dataService.getECMMetadata(data),\n    fileProperties ? [fileProperties] : self.dataService.getFileProperties(data)).\n    done(function (metaData, fileProperties) {\n\n      fileProperties[0].data = data;\n\n      // Make xpath context\n      fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\n      fileProperties[0].xpath = self.properties.xpath;\n\n      metaData[0].filename = data.fileName;\n      metaData[0].url = self.buildItemUrl(fileProperties[0]);\n\n      // Define File Properties\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].ecm_isVisible = fileProperties[0].isVisible;\n      metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\n      metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\n      metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\n      metaData[0].ecm_allowView = fileProperties[0].allowView;\n      metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\n      metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\n      metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].idFileUploads = fileProperties[0].idFileUpload;\n      metaData[0].xpath = fileProperties[0].xpath;\n      metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\n      metaData[0].deviceType = bizagi.detectDevice();\n\n      if (metaData[0].metadata && metaData[0].metadata.length) {\n        metaData[0].metadata.map(function shapeMetadataValues(meta) {\n          if (meta.metadataType === \"DATETIME\") {\n            // Format the actual date to ISO, so mobiscroll can useit\n            // Before save the value it has to go back to the original format (cause service will accept any format)\n            meta.dateFormat = self.getResource(\"fullFormat\") !== \"fullFormat\" ? self.getResource(\"fullFormat\") : self.properties.fullFormat ? self.properties.fullFormat : \"yyyy-MM-dd HH:mm:ss\";\n            meta.value = meta.value ? bizagi.util.dateFormatter.formatDate(bizagi.util.dateFormatter.getDateFromFormat(meta.value, meta.dateFormat), \"yyyy-MM-dd\") : \"\";\n          }\n        });\n      }\n\n      var html = $.kendoTmpl(metadataTemplate, metaData[0]);\n      deferred.resolve(html);\n    });\n\n    return deferred.promise();\n  },\n  /*Check if all meta data fields that's right */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    control = self.getControl(),\n    message = [],\n    error = false,\n    properties = self.properties;\n\n\n    var bValid = true;\n\n    if (properties.required) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n      // Call base\n      bValid = newRow ? true : this._super(invalidElements);\n\n      if (self.filesCount === 0 && bValid) {\n\n        invalidElements.push({\n          xPath: properties.xpath,\n          message: self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName) });\n\n        bValid = false;\n      }\n    }\n\n    if (properties.editable) {\n      var $arrayEcmControls = $(\".bz-rn-ecm-container:visible\", control).find(\".bz-rn-ecm-metadata-value[data-required='true']\");\n      $.each($arrayEcmControls, function (key, value) {\n        if ($(\"input\", value).val() === \"\") {\n          message.push($(value).data(\"description\"));\n          error = true;\n        }\n      });\n    }\n\n    if (error) {\n      var errorMessage = self.getResource(\"render-required-text\").replaceAll(\"#label#\", message.join(\", \"));\n      invalidElements.push({\n        xPath: properties.xpath,\n        message: errorMessage });\n\n\n      // If it has error, enable editable view.\n      // open popup\n\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.setValue(null);\n    self.clearDisplayValue();\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n\n    var arrayItems = control.find(\".bz-rn-ecm-file-container\");\n    var length = arrayItems.length - 1;\n\n    $.each(arrayItems, function (index, value) {\n      var item = $(value);\n      var file = item.data();\n\n      if (file) {\n        $.when(self.deleteUploadItem(item, file.idfileupload)).done(function () {\n          // Detach item\n          item.remove();\n        });\n      }\n    });\n\n    // Check maxFiles\n    self.filesCount = 0;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Smartphone Render Yes-No Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the Yes-No render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.searchList.extend(\"bizagi.rendering.searchList\", {\n  SEARCH_MIN_LENGTH: 2,\n  temporalElements: {} },\n{\n  /**\r\n   * RenderSingle Method\r\n   * */\n  renderSingle: function renderSingle() {\n    var self = this;\n\n    self._super();\n\n    var control = self.getControl();\n\n    //Show the combo icon\n    self.getArrow().remove();\n\n    //Getting all aux templates\n    self.modalViewTemplates = kendo.template(self.renderFactory.getTemplate('searchListModalViewAuxTemplates'), { useWithBlock: false });\n    self.inputTemplates = kendo.template(self.renderFactory.getTemplate('searchListInputAuxTemplates'), { useWithBlock: false });\n\n    //Getting the input\n    self.input = $(\".bz-rn-container-searchlist\", control);\n\n    self.configureListHandlers();\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n\n    // Call base\n    this._super();\n\n    if (!self.properties.editable) {\n      //Add styles class\n      self.configureReadOnly();\n    }\n\n    //trigger click event on remove tag\n    self.input.on(\"click\", '.bz-rn-remove-tag-on-search-list', function () {\n      self.removeItem($(this));\n    });\n  },\n\n  /**\r\n      * Setting the control events\r\n      * */\n  configureListHandlers: function configureListHandlers() {\n    var self = this;\n\n    if (self.properties.editable) {\n      if (self.properties.value.length > 0) {\n        self.configureModalView(\".bz-rn-last-child\");\n      } else {\n        self.configureModalView(\"ul\");\n        self.configureModalView(\".bz-rn-last-child\");\n      }\n    }\n  },\n\n  /**\r\n      * Configure the modal view to select values\r\n      * */\n  configureModalView: function configureModalView(selector) {\n    var self = this;\n    var inputContainer = selector === \"\" ? self.input : $(selector, self.input);\n\n    inputContainer.unbind().bind(\"click\", function () {\n      //Getting the values to show\n      var elements = $(\"ul li.bz-rn-regular-element\", self.input);\n      var values = [];\n\n      //Reset the temporal array\n      self.Class.temporalElements = {};\n\n      for (var i = 0, length = elements.length; i < length; i++) {\n        var id = $(elements[i]).data(\"id\");\n        var value = $(\"label\", $(elements[i])).text();\n        var newElement = { 'id': id, 'value': value };\n\n        values.push(newElement);\n\n        //Add element to temporal context array\n        self.addTemporalElement(id, value, false);\n      }\n\n      //Creating modal view\n      var template = self.renderFactory.getTemplate('searchListModalView');\n      var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n      var data = {\n        'items': values,\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView('open');\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    //Showing found results\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('keypress keyup', function () {\n      if (this.value !== \"\") {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n      } else {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n      }\n\n      //Show splash loader\n      bizagi.loading.start({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n\n      //Getting and showing the data\n      $.when(self.showResults(this.value, inputContainer)).always(function () {\n        bizagi.loading.stop({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n      });\n    }).focus(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").addClass(\"searching\");\n    }).blur(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").removeClass(\"searching\");\n    });\n\n    //Cleaning search\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind('click', function () {\n      self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //when click on apply button\n    inputContainer.delegate(\".ui-bizagi-apply-button-searchlist\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Trigger delete event for tags\n    inputContainer.find(\".filter-searchlist-modal-view-tags\").on(\"click\", '.bz-rn-remove-tag-on-search-list', function () {\n      self.removeItem($(this), true);\n\n      var term = inputContainer.find(\".bz-wp-modalview-header-input-search\").val();\n\n      //Show splash loader\n      bizagi.loading.start({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n\n      //Getting and showing the data\n      $.when(self.showResults(term, inputContainer)).always(function () {\n        bizagi.loading.start({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n      });\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      self.addNewValuesToInput();\n      self.Class.temporalElements = {};\n    }).fail(function () {\n      self.Class.temporalElements = {};\n    });\n  },\n\n  /**\r\n      * Show finded results\r\n      * */\n  showResults: function showResults(value, inputContainer) {\n    var self = this;\n\n    return $.when(self.processRequest({ 'term': value })).done(function (suggestions) {\n      if (suggestions.length === 0) {\n        self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n      } else {\n        //Hide current results\n        $(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul li\", inputContainer).remove();\n\n        //Add new results to list\n        var newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"sugestions\", 'items': suggestions }))));\n        newElement.appendTo($(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul\", inputContainer));\n\n        //Get list of elements\n        self.modalViewList = $(\".ui-bizagi-render-list-elements\", inputContainer);\n\n        //Setting the initial selected display value\n        self.modalViewList.find(\"li\").unbind().bind(\"click\", function () {\n          //add new element to data control\n          self.appendFoundItem(this, $(\".filter-searchlist-modal-view-tags\", inputContainer));\n\n          if ($(this).siblings().length === 0) {\n            self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n          }\n\n          $(this).remove();\n        });\n      }\n    }).fail(function (response) {\n      self.showNoResultsMessage(response, inputContainer);\n    });\n  },\n\n  /**\r\n      * Adding new values to input\r\n      * */\n  addNewValuesToInput: function addNewValuesToInput() {\n    var self = this;\n\n    //Create a temporal array\n    var tempArray = [];\n\n    $.each(self.Class.temporalElements, function (i, ele) {\n      tempArray.push(ele.obj);\n    });\n\n    self.setValue(tempArray);\n\n    //Clear the input\n    $(\"ul li\", self.input).remove();\n\n    //Get the input content\n    var inputContainer = $(\"li\", $(bizagi.util.trim(self.inputTemplates({ 'template': \"inputContainer\", 'value': tempArray }))));\n\n    //Add the input container\n    inputContainer.appendTo($(\"ul\", self.input));\n\n    //unbind current events\n    $(\"ul\", self.input).unbind();\n    $(\".bz-rn-last-child\", self.input).unbind();\n\n    //Trigger click event\n    if (tempArray.length > 0) {\n      self.configureModalView(\".bz-rn-last-child\");\n    } else {\n      self.configureModalView(\"ul\");\n      self.configureModalView(\".bz-rn-last-child\");\n    }\n  },\n\n  /*\r\n      *   check if the control has value\r\n      */\n  hasValue: function hasValue() {\n    var self = this;\n    return JSON.parse(self.getValue()).value.length > 0;\n  },\n\n  /*\r\n      *   Sets the internal value\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    // Change internal value\n    self.value = JSON.encode({ \"value\": value });\n\n    self.changeRequiredLabel();\n    // Trigger events\n    if (triggerEvents && !self.internalSetInitialValueFlag) {\n      self.triggerRenderChange();\n    }\n  },\n\n  /**\r\n      * Show the correct message if there are elements to show\r\n      * */\n  showNoResultsMessage: function showNoResultsMessage(message, inputContainer) {\n    var self = this;\n    $(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul li\", inputContainer).remove();\n    var newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"modalViewDefaultMessage\", 'message': message }))));\n    newElement.appendTo($(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul\", inputContainer));\n  },\n\n  /**\r\n      * Append founded item\r\n      * */\n  appendFoundItem: function appendFoundItem(item, container) {\n    var self = this;\n\n    // Map the ids of the elements to an array\n    var uniqueIds = $.map($('li', container), function (val) {\n      return $(val).data('id');\n    });\n\n    // Avoid appending duplicated items\n    if (uniqueIds.indexOf($(item).data(\"id\")) == -1) {\n      var id = $(item).data(\"id\");\n      var value = $(\"label\", item).text();\n      var $newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"fullElement\", 'id': id, 'value': value }))));\n\n      // Get the latest item on list to append new li with match word\n      var lastElement = $('li:last', container);\n      if (lastElement.hasClass(\"bz-rn-any-element\")) {\n        lastElement.remove();\n        $('ul', container).prepend($newElement);\n      } else {\n        $('ul', container).prepend($newElement);\n      }\n\n      self.addTemporalElement($(item).data(\"id\"), $(\"label\", item).text(), false);\n    }\n  },\n\n  /**\r\n      * Removen a item from the list\r\n      * */\n  removeItem: function removeItem(element, isModalViewContainer) {\n    var self = this;\n    var li = element.parent();\n    var container = element.closest(\".bz-rn-container-searchlist\");\n\n    if (container.length === 0) {\n      container = element.closest(\".filter-searchlist-modal-view-tags\");\n    }\n\n    if (!isModalViewContainer) {\n      // Remove from main memory and set the new value\n      self.removeElement({ id: li.data(\"id\") });\n    } else {\n      delete self.Class.temporalElements[li.data(\"id\")];\n    }\n\n    // Remove list element\n    li.remove();\n\n    if (container.find(\"li\").length <= 1 && !isModalViewContainer) {\n      $(\".bz-rn-click-to-add-span\", container).removeClass(\"hidden\");\n      self.configureModalView(\"ul\");\n      self.configureModalView(\".bz-rn-last-child\");\n    } else if (container.find(\"li\").length === 0 && isModalViewContainer) {\n      var defaultElement = $(bizagi.util.trim(self.modalViewTemplates({ \"template\": \"modalViewDefaultValue\" })));\n      $(\"li\", defaultElement).appendTo($(\"ul\", container));\n    }\n  },\n\n  /**\r\n      *   Process the request data for the autocomplete control\r\n      */\n  processRequest: function processRequest(req) {\n    var self = this;\n    var properties = self.properties;\n\n    // Create array for response objects\n    var suggestions = [];\n    var defer = new $.Deferred();\n\n    if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\n\n      // Update term property to reflect the search\n      properties.term = req.term;\n      this.getData().\n      done(function (data) {\n\n        // Process response to highlight matches\n        $.each(data, function (i, val) {\n          var parseValue;\n          switch (_typeof(val.value)) {\n            case \"number\":\n              parseValue = val.value;\n              break;\n            case \"object\":\n              parseValue = val.value.toString();\n              break;\n            case \"string\":\n              parseValue = val.value.replace(new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + req.term + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\"), \"<strong>$1</strong>\");\n              break;\n            default:\n              parseValue = val.value;\n              break;}\n\n\n          if (typeof self.Class.temporalElements[val.id] === \"undefined\") {\n            suggestions.push({\n              id: val.id,\n              label: parseValue,\n              value: val.value });\n\n          }\n        });\n\n        defer.resolve(suggestions);\n      });\n    } else {\n      defer.reject(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"));\n    }\n\n    return defer;\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    // Set internal value\n    self.setValue(finalValue);\n\n    if (value !== undefined) {\n      if (properties.editable) {\n        self.input.val(value.label);\n      }\n    }\n  },\n\n  /**\r\n      * When the render isn't editable\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.kendoTmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      value: properties.value,\n      editable: false });\n\n  },\n\n  configureReadOnly: function configureReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    // Remove click event\n    $(\".bz-rn-last-child\", control).unbind(\"click\");\n    $(\".bz-rn-searchlist-search-icon\", control).unbind(\"click\");\n\n    //hide all elements\n    $(\".bz-rn-click-to-add-span\", control).remove();\n\n    // Remove \"x\" icon from each element on the list\n    $(\".bz-rn-remove-tag-on-search-list\", control).remove();\n\n    self.input.addClass(\"searchListNonEditable\");\n  },\n\n  /**\r\n      * Add new element to the temporal array\r\n      * */\n  addTemporalElement: function addTemporalElement(id, value, elementToRemove) {\n    var self = this;\n\n    if (self.Class.temporalElements[id]) {\n      delete self.Class.temporalElements[id];\n    }\n\n    self.Class.temporalElements[id] = { \"obj\": { \"id\": id, \"value\": value }, \"remove\": elementToRemove };\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Smartphone Render Join Aearch Dialog Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the Join Search Dialog render class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\nbizagi.rendering.search.extend(\"bizagi.rendering.search\", {\n  ADVANCED_SEARCH_ID: -1,\n  ADVANCED_ADDITION_ID: -2,\n  SEARCH_MIN_LENGTH: 3,\n  SEARCH_DELAY: 750 },\n{\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"readonlySearch\");\n    var value = self.properties.value && self.hasValue() ? self.properties.value.label : \"\";\n\n    return $.kendoTmpl(template, { value: value });\n  },\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    //Getting the control content\n    self.input = $(\".bz-rn-container-search\", control);\n    self.inputText = self.input.find(\".bz-rn-input-search-text\");\n\n    if (!properties.editable) {\n      container.addClass(\"bz-rn-non-editable\");\n      self.inputText = $('.bz-rn-text', control);\n    }\n\n    if (properties.allowSuggest) {\n      container.addClass(\"bz-command-edit-inline\");\n      if (properties.editable) {\n        self._simplySearch();\n      }\n    }\n\n    self.configureHandlers();\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n\n    if (self.properties.advancedSearch && properties.editable) {\n      container.addClass(\"bz-command-edit-inline\");\n      self.input.bind(\"click\", function () {\n        self.renderSearchForm();\n      });\n    }\n\n    if (properties.editable) {\n      self.input.on(\"click\", \".bz-rn-search-control-icons-clear\", function (e) {\n        e.stopPropagation();\n        self.setValue({ id: \"\" });\n        self.inputText.prop(\"value\", \"\");\n        $(this).addClass(\"hidden\");\n        self.inputText.removeClass(\"hasValue\");\n      });\n    }\n  },\n\n  hasValue: function hasValue() {\n    var self = this;\n    return self.getValue() != null && self.getValue().id !== \"\" && typeof self.getValue().id !== \"undefined\";\n  },\n\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"search\");\n\n    var params = {\n      allowSuggest: properties.allowSuggest,\n      editable: properties.editable,\n      allowClear: properties.allowClear,\n      id: properties.id,\n      xpath: properties.xpath,\n      hasValue: self.hasValue(),\n      allowTyping: properties.allowTyping,\n      advancedSearch: properties.advancedSearch,\n      hasMozillaHelpText: $.browser && $.browser.mozilla && properties.helpText !== null && properties.helpText != \"\" ? true : false };\n\n\n    return $.kendoTmpl(template, params);\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n\n    // Filter by valid xpaths and valid values\n    // Remove empty validation for value for combos\n    if (!compareValue || compareValue.id !== value.id || $.forceCollectData) {//if original value is equal to value\n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) == \"object\" && value.id === undefined)\n        return;\n        // Add the value to the server\n        renderValues[properties.xpath] = value;\n      }\n    }\n  },\n\n  /**\r\n      * Sets the value to show and calls the method to sets the control value\r\n      * @param {object} value\r\n      * @param {int} value.id\r\n      * @param {string} value.label\r\n      * @param {string=} value.additionallabel\r\n      * @example\r\n      *   value = {\r\n      *     id: 123,\r\n      *     label: \"xx\",\r\n      *     additionallabel: \"yyyy\"\r\n      *   }\r\n     */\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var label = \"\";\n    value = self.mapValue(value);\n\n    if (value !== null && typeof value !== \"undefined\" && typeof value.id !== \"undefined\") {\n      if (value.additionallabel && value.label) {\n        label = value.label + \", \" + value.additionallabel;\n      } else if (value.label) {\n        label = value.label;\n      } else {\n        label = \"\";\n      }\n\n      if (self.properties.editable) {\n        self.setValue(value, true);\n        self.inputText.val(label);\n        self.inputText.attr(\"id\", value.id);\n        self.inputText.html(label);\n\n        if (typeof value !== \"undefined\") {\n          self.inputText.addClass(\"hasValue\");\n        } else {\n          self.inputText.removeClass(\"hasValue\");\n        }\n      } else {\n        self.inputText.text(label);\n      }\n    }\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", value: \"\" };\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n\n  _simplySearch: function _simplySearch() {\n    var self = this;\n    var control = self.getControl();\n\n    self.inputText.on(\"click keyup\", function () {\n      self.autoCompleteSearchResults();\n    });\n\n    control.on(\"click mousedown\", \"li\", function () {\n      var elemObject = $.data(this).itemautocomplete;\n      var label = Array.isArray(elemObject.value) ? elemObject.value.join(\",\") : elemObject.value;\n      self.setDisplayValue({ id: elemObject.id, label: label });\n      $(this).parent().hide();\n      self.input.find(\".bz-rn-search-control-icons-clear\").removeClass(\"hidden\");\n      self.inputText.addClass(\"hasValue\");\n    });\n\n    control.on(\"focusout\", \"input\", function () {\n      control.find(\"ul\").hide();\n      self.inputText.parent().find(\".bz-rn-autocomplete-wrapper\").addClass(\"hidden\");\n    });\n  },\n\n  /* Apply autocomplete capabilities to a single input*/\n  autoCompleteSearchResults: function autoCompleteSearchResults() {\n    var self = this;\n    var currentValue = self.inputText.val();\n    if (currentValue === \"\") {\n      self.input.find(\".bz-rn-search-control-icons-clear\").addClass(\"hidden\");\n    }\n\n    $.when(\n    self.processRequest({ term: currentValue }, function () {})).\n    done(function (resp) {\n      var wrapper = self.inputText.parent().find(\".bz-rn-autocomplete-wrapper\");\n      if (resp.length > 0) {\n        wrapper.removeClass(\"hidden\");\n      } else {\n        if (!wrapper.hasClass(\"hidden\")) {\n          wrapper.addClass(\"hidden\");\n        }\n      }\n\n      var elementUl = self.inputText.parent().find(\"ul\");\n      elementUl.find(\"li\").remove();\n\n      elementUl.css({\n        display: \"inline-block\",\n        left: self.inputText.position().left,\n        top: self.inputText.position().top + 15,\n        width: self.inputText.css(\"width\") });\n\n\n      for (var i = 0, length = resp.length; i < length; i++) {\n        var searchItem = self.renderSearchItem(resp[i]);\n        $(searchItem).addClass(\"bz-rn-autocomplete-item\");\n        searchItem.appendTo(elementUl);\n      }\n    });\n  },\n\n  renderSearchForm: function renderSearchForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var formSearchParams = $.extend({}, self.getParams(), {\n      navigation: self.getFormContainer().getNavigation() });\n\n\n    var searchForm = new bizagi.rendering.smartphone.helpers.searchForm(self.dataService, self.renderFactory, properties.searchForms, {\n      allowFullSearch: properties.allowFullSearch,\n      maxRecords: properties.maxRecords,\n      allowNew: properties.allowNew || false,\n      orientation: properties.orientation || \"ltr\" },\n\n    formSearchParams);\n\n\n    searchForm.renderEdition({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      displayName: properties.displayName,\n      idPageCache: properties.idPageCache }).\n    done(function (itemId) {\n      self.setValue({ id: itemId });\n\n      //send the item selected\n      properties.submitOnChange = true;\n\n      self.submitData();\n    });\n  },\n\n  renderSearchItem: function renderSearchItem(item) {\n    var self = this;\n    var searchItem = $.kendoTmpls(self.renderFactory.getTemplate(\"edition.search.item\"), {\n      id: item.id,\n      label: item.label,\n      value: item.value });\n\n\n    searchItem.data(\"itemautocomplete\", item);\n\n    return searchItem;\n  },\n\n  processRequest: function processRequest(req, add) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Create array for response objects   \n    var suggestions = [];\n\n    // Add to suggestions function                \n    function addToSuggestions(alSuggestions) {\n\n      // Add the clear option             \n      /*\r\n       // TODO: To implement allowClear\r\n       if (properties.allowClear && (self.value !== undefined)) {\r\n       alSuggestions.push({ id: self.Class.CLEAR_SEARCH_ID, label: \"\", value: \"\" });\r\n       }*/\n      // Add additional option if advanced search is on\n      if (properties.advancedSearch) {\n        alSuggestions.push({ id: self.Class.ADVANCED_SEARCH_ID, label: \"\", value: \"\" });\n      }\n      // Add additional option if allow addition is on\n      if (properties.allowAdd) {\n        alSuggestions.push({ id: self.Class.ADVANCED_ADDITION_ID, label: \"\", value: \"\" });\n      }\n\n      // Pass array to callback   \n      defer.resolve(alSuggestions);\n\n    }\n\n    if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\n      // Update term property to reflect the search\n      properties.term = req.term;\n      this.getData().\n      done(function (data) {\n        // Process response to highlight matches\n\n        var i = -1;\n        var a;\n        while (a = data[++i] && properties.maxRecords > i && i < 10) {\n          suggestions.push({\n            id: data[i].id,\n            label: data[i].value.toString().replace(new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + $.ui.autocomplete.escapeRegex(req.term) + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\"), \"<strong>$1</strong>\"),\n            value: data[i].value });\n\n        }\n\n        addToSuggestions(suggestions);\n\n      }).fail(function () {\n        //fail\n        defer.reject();\n      });\n\n    } else {\n      addToSuggestions(suggestions);\n    }\n\n    /* \r\n       *   Method to add the special items to the suggestions\r\n       */\n    return defer.promise();\n  },\n\n  setDisplayValueEdit: function setDisplayValueEdit(value) {\n    var self = this;\n\n    self.inputEdition.find(\".ui-bizagi-render-search\").val(self.selectedValue);\n  },\n\n  //on the desktop only sends the id to submit \n  //in the smartphone it send the id and the value\n  submitData: function submitData() {\n    var self = this;\n    var properties = self.properties;\n\n    // Add current data\n    var data = {};\n\n    data[properties.xpath] = self.getValue();\n\n    // Executes submit on change\n    if (properties.submitOnChange && data[properties.xpath].id != undefined)\n    self.submitOnChange(data, true);\n  },\n\n  actionSave: function actionSave() {\n    var self = this;\n\n    self.inputText.html(self.value.value || self.value.label);\n    self.inputText.val(self.value.value || self.value.label);\n    self.inputText.attr(\"id\", self.value.id);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will process a rendering page by calling an ajax service to retrieve the model,\r\n                                                                                                                                                                                                                                                                                                                                                                                *       and then process it to create base layout, and then call the device render factory\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Define BizAgi Rendering namespace\nbizagi.rendering = bizagi.rendering || {};\n\n/*\r\n                                            *   This class will define a method to process the page\r\n                                            *   1. Fetch the data\r\n                                            *   2. Call the device factory to appropriately render the content\r\n                                            */\n$.Class.extend(\"bizagi.rendering.facade\", {\n  form: undefined,\n  executionDeferred: new $.Deferred() },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    params = params || {};\n\n    // Set observable element\n    this.observableElement = $({});\n\n    // Injection of Device, only for print version purpose\n    var device = params.device || \"\";\n\n    // Defines a device factory for all rendering\n    this.deviceFactory = new bizagi.rendering.device.factory();\n\n    // Creates a data service instance\n    this.dataService = new bizagi.render.services.service(params);\n\n    // Retrieves the render factory\n    this.renderFactory = this.deviceFactory.getRenderFactory(this.dataService, device);\n  },\n  getFactory: function getFactory() {\n    var self = this;\n    return {\n      deviceFactory: self.deviceFactory,\n      dataService: self.dataService,\n      renderFactory: self.renderFactory };\n\n  },\n  /*\r\n     *   Subscribe method\r\n     */\n  subscribe: function subscribe() {\n    this.observableElement.bind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Unsubscribe method\r\n     */\n  unsubscribe: function unsubscribe() {\n    this.observableElement.unbind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Publish method\r\n     */\n  publish: function publish() {\n    return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   This method will re-execute the process\r\n     */\n  update: function update(params) {\n    var self = this;\n\n    // Update rendering mode\n    if (params.mode)\n    self.mode = params.mode;\n\n    // Enable form buttons on desktop view\n    return self.execute($.extend({\n      canvas: self.canvas,\n      mode: self.mode },\n    params));\n  },\n  /*\r\n     *   Start point method to use in the main javascript pages\r\n     *   This method will process everything and attach the html directly to the dom\r\n     */\n  execute: function execute(params) {\n    var self = this;\n    var doc = this.ownerDocument;\n    var body = $(\"body\", doc);\n    params = params || {};\n\n    // Creates ready deferred\n    if (self.executionDeferred && self.executionDeferred.state) {\n      if (self.executionDeferred.state() == \"resolved\") {\n        self.executionDeferred = $.Deferred();\n      }\n    } else {\n      self.executionDeferred = $.Deferred();\n    }\n\n    // Performance measurement stuff\n    bizagi.chrono.initAndStart(\"rendering+data\", true);\n    bizagi.rendering.render.startOptimization();\n\n    // Override mode\n    if (typeof params.mode === \"undefined\") {\n      if (!bizagi.util.isEmpty(window.location.search)) {\n        var queryString = bizagi.util.getQueryString();\n        params.mode = queryString[\"mode\"];\n      }\n    }\n\n    // If the canvas is not given, we need to create one\n    var canvas = self.canvas = params.canvas = params.canvas || $(\"<div />\").appendTo(body);\n    self.mode = params.mode;\n\n    self.sendExecutingPostMessageWebparts();\n\n    self.process(params).done(function (form) {\n\n      // Clear canvas    \n      if (!params.refreshing) {\n        canvas.empty();\n      }\n\n      // Append content\n      canvas.append(form.container);\n\n      // Include process path\n      $(form.pathProcess).insertBefore(form.container);\n\n      // Keep reference in class\n      self.form = form;\n      self.form.setSize({ width: self.lastWidth, height: self.lastHeight });\n\n      // Save window size variables\n      var timeoutResize = setTimeout(function () {\n        self.lastWidth = $(window).width();\n        self.lastHeight = $(window).height();\n        if (window.self !== window.top)\n        self.resizeInPopUpHTML();\n        clearTimeout(timeoutResize);\n      }, 2000);\n\n      // Publish an event to check if the form has been set in the DOM\n      form.triggerHandler(\"ondomincluded\");\n\n      // Notify to module users that the form has been rendered\n      self.publish(\"rendering-formRendered\", { form: form });\n      //Configure triggers\n      self.configureOpenForm(form);\n\n      // Configure handlers\n      self.configureRefresh(form, canvas);\n      self.configureRouting(form, canvas);\n      self.configureRenderError(form, canvas);\n      self.configureResize(form);\n      self.configureGlobalHandlers(form);\n\n      // Check if it is a summary form\n      if (params.summaryForm) {\n        form.container.addClass(\"ui-bizagi-summary-form\");\n      }\n\n      // Ends main timer and log everything\n      bizagi.chrono.stopAndLog(\"rendering\");\n      bizagi.chrono.stopAndLog(\"rendering+data\");\n      bizagi.chrono.stopAndLog(\"submitForm\");\n      bizagi.chrono.stopAndLog(\"submitForm-ajax\");\n      bizagi.chrono.stopAndLog(\"waiting\");\n\n      // Resolves deferred\n      bizagi.rendering.render.stopOptimization();\n\n      // Expose public reference of form\n      if (bizagi.override.enableE2EInterface) {\n        self.Class.form = self.form;\n        self.Class.executionDeferred.resolve(self.form);\n      }\n\n      self.executionDeferred.resolve(self.form);\n\n    }).fail(function (message, errorType) {\n\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n\n        if (typeof message === \"undefined\" || message === \"\") {\n          message = bizagi.localization.getResource(\"render-error-unknown\");\n        }\n\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        self.publish(\"rendering-formRenderedError\", message);\n        self.canvas.triggerHandler(\"errorform\", message);\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering\");\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n\n        self.executionDeferred.reject();\n      });\n    });\n\n    return self.executionDeferred.promise();\n  },\n  /*\r\n     *   Returns the execution deferred to determine if the component is ready or not\r\n     */\n  ready: function ready() {\n    return this.executionDeferred.promise();\n  },\n  /*\r\n     *   Loads data and render factory in order to process the form\r\n     *   Returns a deferred to set callbacks when the process is done\r\n     */\n  process: function process(params) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Call get form data service\n    var dataPromise = self.dataService.getFormData(params);\n\n    var canvas = self.canvas || params.canvas;\n\n    bizagi.showErrorAlertDialog = false;\n    // Set callback when requests have been done\n    $.when(dataPromise, self.renderFactory).\n    done(function (data, renderFactory) {\n      bizagi.showErrorAlertDialog = true;\n\n      // When there is no data trigger an event\n      if (bizagi.util.isEmpty(data)) {\n        self.publish(\"no-data-found\");\n        defer.fail();\n        return;\n      }\n\n      if (data && data.type == \"reload\") {\n        var form = self.form;\n        if (form) {\n          form.endLoading();\n          form.dispose();\n        }\n        // Trigger handler on canvas\n        canvas.triggerHandler(\"routing\", data);\n\n      } else if (data && data.type == \"suspended\") {\n        var errorTemplate = renderFactory.getTemplate(\"info-message\");\n        var message = bizagi.localization.getResource(\"render-case-suspended\");\n        var errorHtml = $.tmpl(errorTemplate, {\n          message: message });\n\n        // Remove loading icon from summary container\n        errorHtml.appendTo(canvas);\n\n        defer.fail();\n\n      } else if (data && data.type != \"error\") {\n        if (params.hasOwnProperty('printversion')) {\n          data = self.transformGridControl(data);\n          data.form.properties.editable = \"False\";\n        }\n\n        bizagi.chrono.initAndStart(\"rendering\");\n        params.type = data.form && data.form.properties.type || params.type;\n        var form = self.processForm(data.form, renderFactory, params);\n\n        // Resolve deferred\n        defer.resolve(form);\n\n      } else {\n        self.getFailDeferred(data, defer);\n      }\n    }).fail(function (errorMessage) {\n      self.getFailDeferred(errorMessage, defer);\n    });\n\n    return defer.promise();\n  },\n  /**\r\n      * In the print version widget when grid control was rendered, the main render has broken\r\n      * Is necesary change id of grid control to fixed these  problems\r\n      */\n  transformGridControl: function transformGridControl(data) {\n    var self = this;\n    if (data == null) {\n      return data;\n    }\n\n    if (data.hasOwnProperty('type') && data.type == 'grid') {\n      data.id = data.id + \"-print\";\n      data.allowAdd = \"False\";\n      data.allowDelete = \"False\";\n      data.allowEdit = \"False\";\n      data.allowGrouping = \"False\";\n      data.allowMore = \"False\";\n      data.allowSearch = \"False\";\n    } else {\n      $.each(data, function (key, value) {\n        if (_typeof(value) == 'object') {\n          data[key] = self.transformGridControl(data[key]);\n        }\n      });\n    }\n    return data;\n  },\n  /**\r\n      * Resolve deferred\r\n      */\n  getFailDeferred: function getFailDeferred(errorMessage, defer) {\n    var self = this;\n    var message = \"\";\n    var jsonErrorMessage = {};\n    try {\n      jsonErrorMessage = JSON.parse(errorMessage.responseText);\n    } catch (e) {\n      jsonErrorMessage = { message: errorMessage.responseText, errorType: \"ERRORUNKNOWN\" };\n    }\n\n\n    if (jsonErrorMessage.message) {\n      message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n      message += \"<br>Error Message: \" + jsonErrorMessage.message;\n    } else {\n      if (jsonErrorMessage.errorType == \"JSharpNotSupportedException\") {\n        message += \"<br>Error Message: \" + bizagi.localization.getResource(\"jsharp-required\");\n      }\n    }\n\n    // Error in metadata InvalidFormMetadata\n    if (jsonErrorMessage.errorType == 'ERRORUNKNOWN') {\n      defer.reject(message, jsonErrorMessage.errorType);\n    } else {\n\n      defer.reject(message);\n    }\n  },\n  /*\r\n     *   Process the form\r\n     */\n  processForm: function processForm(data, renderFactory, params) {\n    var form = renderFactory.getContainer($.extend(params, {\n      type: params.type || \"form\",\n      data: data }));\n\n\n    // Render the full form\n    form.render();\n\n    return form;\n  },\n  /*\r\n     *   Performs a resize\r\n     */\n  resize: function resize(args) {\n    var self = this;\n    if (self.form) {\n      self.form.trigger(\"renderresize\", args);\n    }\n  },\n  /*\r\n     *   Binds a refresh handler to detect when the whole form needs to fetch all data from server\r\n     */\n  configureRefresh: function configureRefresh(form, canvas) {\n    var self = this;\n\n    // Attach a refresh handler to recreate all the form\n    form.bind(\"refresh\", function (_, refreshParams) {\n\n      // Find the scroll top\n      var parent = form.container.parent();\n      parent = bizagi.util.scrollTop(parent);\n      var scrollTop = parent.scrollTop();\n\n      $(self.form).trigger(\"onRefreshStarted\");\n\n      //Dispose current form\n      form.dispose(refreshParams);\n      canvas.fastEmpty();\n      var canvasParent = canvas.parent();\n      if (canvasParent.find(\".ui-bizagi-button-container\").length > 0) {\n        canvasParent.find(\".ui-bizagi-button-container\").remove();\n      }\n\n      if (self.executionDeferred && self.executionDeferred.state) {\n        if (self.executionDeferred.state() == \"resolved\") {\n          self.executionDeferred = $.Deferred();\n        }\n      }\n\n      var formParams = self.form.getParams();\n      if (bizagi.util.isMobileDevice() && formParams.isOfflineForm === true) {\n        $.extend(refreshParams, {\n          isOfflineForm: true,\n          offlineType: formParams.offlineType,\n          isOpen: formParams.isOpen });\n\n        refreshParams.online = (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\" ?\n        form.online : bizagi.util.isConnected();\n      }\n\n      // Re-execute process\n      $.when(self.execute($.extend(refreshParams, {\n        canvas: canvas,\n        refreshing: true,\n        idCase: formParams.idCase,\n        displayName: formParams.displayName }))).\n      done(function () {\n\n        // Restore scroll at same position\n        var timeoutTrigger = setTimeout(function () {\n          parent.scrollTop(scrollTop);\n          $(self.form).trigger(\"onRefreshFinished\");\n          clearTimeout(timeoutTrigger);\n        }, 100);\n      });\n\n      return self.executionDeferred.promise();\n    });\n  },\n  /*\r\n     *   Binds a resize hanlder to configure the resize behaviour\r\n     */\n  configureResize: function configureResize(form) {\n    var self = this;\n\n    // Attach resize handler\n    form.bind(\"renderresize\", function (_, args) {\n      args = args || {};\n      // Just allow one resize at a time\n      if (self.resizeTimeout)\n      return;\n      var resizeFn = function resizeFn() {\n        // Call resize event in form\n        var width = $(window).width();\n        var height = $(window).height();\n        if (args.forceResize || width != self.lastWidth) {\n\n          // Logging stuff\n          bizagi.chrono.initAndStart(\"resize\");\n\n          // Perform resize\n          form.resize({\n            width: width,\n            height: height });\n\n          self.lastWidth = width;\n          self.lastHeight = height;\n\n          // Logging stuff\n          bizagi.chrono.stopAndLog(\"resize\");\n          bizagi.chrono.log(\"resize\");\n        }\n\n        self.resizeTimeout = null;\n        clearTimeout(self.resizeTimeout);\n      };\n      self.resizeTimeout = setTimeout(resizeFn, 0);\n\n    });\n    self.resize();\n  },\n  /*\r\n     *   Binds a routing handler to detect when the workportal need to enroute the case\r\n     */\n  configureRouting: function configureRouting(form, canvas) {\n    // Attach a routing handler to notify to the caller\n    form.bind(\"routing\", function (context, triggerParams) {\n      //Dispose current form\n      form.dispose();\n\n      // Trigger handler on canvas\n      canvas.triggerHandler(\"routing\", triggerParams);\n    });\n  },\n  /*\r\n     *   Binds a generic handler that will be replicated to facade instantiators\r\n     */\n  configureGlobalHandlers: function configureGlobalHandlers(form) {\n    var self = this;\n\n    // Attach a routing handler to notify to the caller\n    form.bind(\"globalHandler\", function (_, args) {\n      // Trigger handler on canvas\n      return self.publish(args.eventType, args.data);\n    });\n  },\n  /*\r\n     *   Bind trigger for form opening\r\n     */\n  configureOpenForm: function configureOpenForm(form) {\n    $(document).trigger(\"openForm\", { form: form });\n  },\n\n  /*\r\n     * Binds error form handler to detect when the render element nop posible get information or error in server\r\n     */\n  configureRenderError: function configureRenderError(form, canvas) {\n    var self = this;\n\n    form.bind(\"formRenderingError\", function (event, errorMessage) {\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n        var message = \"<br>Error: \";\n\n        errorMessage = errorMessage.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n\n        var jsonErrorMessage = JSON.parse(errorMessage);\n        if (jsonErrorMessage.message) {\n          message += jsonErrorMessage.message;\n          message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n        }\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        //send the type error to differentiate between a form and an item for render\n        self.canvas.triggerHandler(\"errorform\", \"renderItemError\");\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n        bizagi.chrono.stopAndLog(\"rendering\");\n      });\n    });\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    if (self.form) {\n      self.form.dispose();\n    }\n    bizagi.util.dispose(self);\n  },\n\n  resizeInPopUpHTML: function resizeInPopUpHTML() {\n    if ($(\".activitiFormContainer\").length > 0 && bizagi.util.getQueryString().type != \"cases\") {\n      var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\n      var renderForm = $(\".activitiFormContainer #ui-bizagi-webpart-render-container\");\n      var buttonContainer = $(\".ui-bizagi-button-container\", \".activitiFormContainer\");\n      var heightButtonContainer = buttonContainer.outerHeight() || 0;\n      var renderBehavior = bizagi.util.getQueryString().renderBehavior || \"\";\n      renderBehavior = renderBehavior.replace(\"#\", \"\");\n\n      if (renderBehavior == \"PopUp\") {\n        if (typeof self.postMessageSocket == \"undefined\") {\n          var heightCanvas = $(\".activitiFormContainer\").height() - 50 || 396;\n          $(\"#render-canvas\").height(heightCanvas);\n          $(\"#render-canvas\").css(\"overflowY\", \"scroll\");\n        } else $(\".activitiFormContainer\").height($(\".activitiFormContainer\").height() + $(\".ui-bizagi-button-container\").height() + 30);\n        $(\".ui-bizagi-button-container\").css(\"position\", \"absolute\");\n        $(\".ui-bizagi-button-container\").appendTo(\".activitiFormContainer\");\n        if ($(\".ui-bizagi-button-container\").length > 1) {\n          $(\".ui-bizagi-button-container:first\").hide();\n          renderForm.css(\"marginTop\", \"-17px\");\n        }\n      }\n      if (buttonContainer.length > 0) {\n        //display buttons\n        renderForm.height(heightActivitiFormContainer - 97 - heightButtonContainer);\n      }\n      if ($(\".ui-bizagi-button-container\").children().length == 0)\n      $(\"#render-canvas\").height($(\"#render-canvas\").height() + heightButtonContainer);else\n      {\n        buttonContainer.width(\"100%\");\n        buttonContainer.css(\"marginLeft\", 0);\n        buttonContainer.css(\"bottom\", 0);\n      }\n    } else if (bizagi.util.getQueryString().type == \"render\") {\n      $(\"html\").css(\"overflowX\", \"hidden\");\n      $(\"#render\").height() <= window.innerHeight + 5 ? $(\"html\").css(\"overflowY\", \"hidden\") :\n      $(\"html\").css(\"overflowY\", \"scroll\");\n      $(\".ui-widget-overlay\").height(650);\n    }\n  },\n\n  sendExecutingPostMessageWebparts: function sendExecutingPostMessageWebparts() {\n    if (bizagi && bizagi.iframeCommunicator) {\n      bizagi.iframeCommunicator.trigger(\"executing-rendering\", {});\n    }\n  } });","/*\r\n* jQuery UI Mask @VERSION\r\n*\r\n* Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)\r\n* Dual licensed under the MIT (MIT-LICENSE.txt)\r\n* and GPL (GPL-LICENSE.txt) licenses.\r\n*\r\n* Based on the jquery.maskedinput.js plugin by Josh Bush (digitalbush.com)\r\n*\r\n* http://docs.jquery.com/UI/Mask\r\n*\r\n* Depends:\r\n*   ui.core.js\r\n*/\n(function ($) {\n\n  var pasteEventName = (bizagi.util.isEventSupported('paste') ? 'paste' : 'input') + \".mask\";\n\n  $.widget(\"ui.mask\", {\n\n    _init: function _init() {\n\n      var options = this.options,self = this;\n\n      $.extend(this, { caret: function caret(begin, end) {return $.ui.mask.caret(self.element, begin, end);} });\n\n      if (!options.mask || !options.mask.length) {return;} //no mask pattern defined. no point in continuing.\n      if (!options.placeholder || !options.placeholder.length) {\n        options.placeholder = '_'; //in case the user decided to nix a placeholder. \n      }\n\n      this._prepareBuffer();\n      this._bindEvents();\n      this._checkVal(this.element.val().length && options.allowPartials); //Perform initial check for existing values\n    },\n\n    destroy: function destroy() {\n      this.element.\n      unbind('.mask').\n      removeData('mask');\n    },\n\n    value: function value() {\n      var input = this.element,\n      self = this,\n      res = $.map(self.buffer, function (c, i) {return self.tests[i] ? c : null;}).join(''),\n      r = new RegExp('\\\\' + this.options.placeholder, 'gi');\n      return res.replace(r, '');\n    },\n\n    formatted: function formatted() {\n      var r = new RegExp('\\\\' + this.options.placeholder, 'gi'),\n      res = this.element.val();\n      return res.replace(r, '');\n    },\n\n    apply: function apply() {\n      this.element.trigger('apply.mask');\n    },\n\n    _setData: function _setData(key, value) {\n\n      $.widget.prototype._setData.apply(this, arguments);\n      var options = this.options;\n\n      switch (key) {\n        case 'mask':\n          //no mask pattern defined. no point in continuing.\n          if (!options.mask || !options.mask.length) {\n            this.element.unbind('.mask');\n            break;\n          }\n        case 'placeholder':\n          if (!options.placeholder || !options.placeholder.length) {\n            options.placeholder = '_'; //in case the user decided to nix a placeholder.\n          }\n          this.element.val('');\n          this._prepareBuffer();\n          !this.eventsBound && this._bindEvents();\n          break;}\n\n\n    },\n\n    _prepareBuffer: function _prepareBuffer() {\n\n      this._escapeMask();\n\n      var self = this,\n      input = this.element,\n      options = this.options,\n      mask = options.mask,\n      defs = $.ui.mask.definitions,\n      tests = [],\n      partialPosition = mask.length,\n      firstNonMaskPos = null,\n      len = mask.length;\n\n      //if we're applying the mask to an element which is not an input, it won't have a val() method. fake one for our purposes.\n      if (!input.is(':input')) input.val = input.html;\n\n      $.each(mask.split(\"\"), function (i, c) {\n        if (c == '?') {\n          len--;\n          partialPosition = i;\n        } else\n        if (defs[c]) {\n          tests.push(new RegExp(defs[c]));\n          if (firstNonMaskPos == null)\n          firstNonMaskPos = tests.length - 1;\n        } else\n        {\n          tests.push(null);\n        }\n      });\n\n      $.extend(this, {\n        buffer: $.map(mask.split(\"\"), function (c, i) {\n          if (c != '?') {\n            return defs[c] ? options.placeholder : c;\n          }\n        }),\n        tests: tests,\n        firstNonMaskPos: firstNonMaskPos,\n        partialPosition: partialPosition });\n\n\n      this.buffer = $.map(this.buffer, function (c, i) {\n        if (c == \"\\t\") {\n          return self.maskEscaped[i];\n        }\n        return c;\n      });\n\n      this.options.mask = mask = this.maskEscaped;\n    },\n\n    _bindEvents: function _bindEvents() {\n\n      var self = this,\n      input = this.element,\n      ignore = false, //Variable for ignoring control keys\n      focusText = input.val();\n\n      function keydownEvent(e) {\n        e = e || window.event;\n        var pos = self.caret(),\n        k = e.keyCode,\n        keyCode = $.ui.keyCode;\n\n        ignore = k < keyCode.SHIFT || k > keyCode.SHIFT && k < keyCode.SPACE || k > keyCode.SPACE && k < 41;\n\n        //delete selection before proceeding\n        if (pos.begin - pos.end != 0 && (!ignore || k == keyCode.BACKSPACE || k == keyCode.DELETE))\n        self._clearBuffer(pos.begin, pos.end);\n\n        //backspace, delete, and escape get special treatment\n        if (k == keyCode.BACKSPACE || k == keyCode.DELETE) {//backspace/delete\n          self._shiftL(pos.begin + (k == keyCode.DELETE || k == keyCode.BACKSPACE && pos.begin != pos.end ? 0 : -1), Math.abs(pos.begin - pos.end));\n          return false;\n        } else\n        if (k == keyCode.ESCAPE) {//escape\n          input.val(focusText);\n          self.caret(0, self._checkVal());\n          return false;\n        }\n      };\n\n      function keypressEvent(e) {\n\n        e = e || window.event;\n\n        var k = e.charCode || e.keyCode || e.which,\n        keyCode = $.ui.keyCode,\n        len = self.options.mask.length;\n\n        if (ignore) {\n          ignore = false;\n          //Fixes Mac FF bug on backspace\n          return e.keyCode == keyCode.BACKSPACE ? false : null;\n        }\n\n        var pos = self.caret();\n\n        if (e.ctrlKey || e.altKey || e.metaKey) {//Ignore\n          return true;\n        } else\n        if (k >= keyCode.SPACE && k <= 125 || k > 186) {//typeable characters\n          var p = self._seekNext(pos.begin - 1);\n          if (p < len) {\n            var c = String.fromCharCode(k);\n            if (self.tests[p] && self.tests[p].test(c)) {\n              self._shiftR(p);\n              self.buffer[p] = c;\n              self._writeBuffer();\n              var next = self._seekNext(p);\n              self.caret(next);\n              self.options.completed && next == len && self.options.completed.call(input);\n            }\n          }\n        }\n        return false;\n      };\n\n      if (!input.attr(\"readonly\")) {\n        input.\n        bind(\"focus.mask\", function () {\n          focusText = input.val();\n          var pos = self._checkVal();\n          self._writeBuffer();\n          setTimeout(function () {\n            if (pos == self.options.mask.length)\n            self.caret(0, pos);else\n\n            self.caret(pos);\n          }, 0);\n        }).\n        bind(\"blur.mask\", function () {\n          self._checkVal();\n          if (input.val() != focusText)\n          input.change();\n        }).\n        bind(\"apply.mask\", function () {//changing the value of an input without keyboard input requires re-applying the mask.\n          focusText = input.val();\n          var pos = self._checkVal();\n          self._writeBuffer();\n        }).\n        bind(\"keydown.mask\", keydownEvent).\n        bind(\"keypress.mask\", keypressEvent).\n        bind(pasteEventName, function () {\n          setTimeout(function () {self.caret(self._checkVal(true));}, 0);\n        });\n        this.eventsBound = true;\n      }\n    },\n\n    _writeBuffer: function _writeBuffer() {\n      return this.element.val(this.buffer.join('')).val();\n    },\n\n    _clearBuffer: function _clearBuffer(start, end) {\n      var len = this.options.mask.length;\n      for (var i = start; i < end && i < len; i++) {\n        if (this.tests[i])\n        this.buffer[i] = this.options.placeholder;\n      }\n    },\n\n    _seekNext: function _seekNext(pos) {\n      var len = this.options.mask.length;\n      while (++pos <= len && !this.tests[pos]) {;}\n      return pos;\n    },\n\n    _shiftR: function _shiftR(pos) {\n      var len = this.options.mask.length;\n      for (var i = pos, c = this.options.placeholder; i < len; i++) {\n        if (this.tests[i]) {\n          var j = this._seekNext(i);\n          var t = this.buffer[i];\n          this.buffer[i] = c;\n          if (j < len && this.tests[j].test(t)) {\n            c = t;\n          } else\n          {\n            break;\n          }\n        }\n      }\n    },\n\n    _shiftL: function _shiftL(pos, length) {\n\n      while (!this.tests[pos] && --pos >= 0) {;}\n\n      var originalPos = pos,\n      len = this.options.mask.length,\n      placeholder = this.options.placeholder;\n\n      for (var i = pos; i < len && (i >= 0 || length > 1); i++) {\n        if (this.tests[i]) {\n          this.buffer[i] = placeholder;\n          var j = this._seekNext(i);\n          if (j < len && this.tests[i].test(this.buffer[j])) {\n            this.buffer[pos] = this.buffer[j];\n            this.buffer[j] = placeholder;\n            pos++;\n            while (!this.tests[pos]) {pos++;}\n          }\n        }\n      }\n      this._writeBuffer();\n      this.caret(Math.max(this.firstNonMaskPos, originalPos));\n    },\n\n    _checkVal: function _checkVal(allow) {\n      //try to place characters where they belong\n      var input = this.element,\n      test = input.val(),\n      len = this.options.mask.length,\n      lastMatch = -1;\n\n      for (var i = 0, pos = 0; i < len; i++) {\n        if (this.tests[i]) {\n          this.buffer[i] = this.options.placeholder;\n          while (pos++ < test.length) {\n            var c = test.charAt(pos - 1);\n            if (this.tests[i].test(c)) {\n              this.buffer[i] = c;\n              lastMatch = i;\n              break;\n            }\n          }\n          if (pos > test.length)\n          break;\n        } else\n        if (this.buffer[i] == test[pos] && i != this.partialPosition) {\n          pos++;\n          lastMatch = i;\n        }\n      }\n      if (!allow && lastMatch + 1 < this.partialPosition) {\n        if (!this.options.allowPartials || !this.value().length) {\n          input.val(\"\");\n          this._clearBuffer(0, len);\n        } else\n          //if we're allowing partial input/inital values, and the element we're masking isnt an input, then we need to allow the mask to apply.\n          if (!input.is(':input')) this._writeBuffer();\n\n      } else\n      if (allow || lastMatch + 1 >= this.partialPosition) {\n        this._writeBuffer();\n        if (!allow) input.val(input.val().substring(0, lastMatch + 1));\n      }\n      return this.partialPosition ? i : this.firstNonMaskPos;\n    },\n\n    _escapeMask: function _escapeMask() {\n      var mask = this.options.mask,\n      literals = [],\n      replacements = [];\n\n      for (var i = 0; i < mask.length; i++) {\n        var c,temp = mask[i] || mask.charAt(i);\n        if (temp != \"\\\\\" || mask[i - 1] == \"\\\\\") {\n          if (mask[i - 1] == \"\\\\\") {\n            c = \"\\t\";\n            replacements[literals.length] = temp;\n          } else\n          {\n            c = temp;\n          }\n          literals[literals.length] = c;\n        }\n      }\n\n      this.options.mask = literals.join('');\n\n      for (var i = 0; i < literals.length; i++) {\n        if (replacements[i] !== undefined) {\n          literals[i] = replacements[i];\n        }\n      }\n\n      this.maskEscaped = literals.join('');\n    } });\n\n\n\n  $.extend($.ui.mask, {\n    version: \"@VERSION\",\n    getter: \"value formatted\",\n    defaults: {\n      mask: '',\n      placeholder: '_',\n      completed: null,\n      allowPartials: false },\n\n    definitions: { //Predefined character definitions\n      '#': \"[\\\\d]\",\n      'a': \"[A-Za-z]\",\n      '*': \"[A-Za-z0-9]\" },\n\n    caret: function caret(element, begin, end) {//Helper Function for Caret positioning\n      var input = element[0];\n      if (typeof begin == 'number') {\n        end = typeof end == 'number' ? end : begin;\n        if (input.setSelectionRange) {\n          input.focus();\n          input.setSelectionRange(begin, end);\n        } else if (input.createTextRange) {\n          var range = input.createTextRange();\n          range.collapse(true);\n          range.moveEnd('character', end);\n          range.moveStart('character', begin);\n          range.select();\n        }\n        return element;\n      } else {\n        if (input.setSelectionRange) {\n          begin = input.selectionStart;\n          end = input.selectionEnd;\n        } else\n        if (document.selection && document.selection.createRange) {\n          var range = document.selection.createRange();\n          begin = 0 - range.duplicate().moveStart('character', -100000);\n          end = begin + range.text.length;\n        }\n        return { begin: begin, end: end };\n      }\n    } });\n\n\n})(jQuery);","/*\r\n*\r\n* Copyright (c) 2006/2007 Sam Collett (http://www.texotela.co.uk)\r\n* Licensed under the MIT License:\r\n* http://www.opensource.org/licenses/mit-license.php\r\n* \r\n* Version 1.0\r\n* Demo: http://www.texotela.co.uk/code/jquery/numeric/\r\n*\r\n* $LastChangedDate: 2007-05-29 11:31:36 +0100 (Tue, 29 May 2007) $\r\n* $Rev: 2005 $\r\n*/\n\n/*\r\n   * Allows only valid characters to be entered into input boxes.\r\n   * Note: does not validate that the final text is a valid number\r\n   * (that could be done by another script, or server-side)\r\n   *\r\n   * @name     numeric\r\n   * @param    decimal      Decimal separator (e.g. '.' or ',' - default is '.')\r\n   * @param    callback     A function that runs if the number is not valid (fires onblur)\r\n   * @author   Sam Collett (http://www.texotela.co.uk)\r\n   * @example  $(\".numeric\").numeric();\r\n   * @example  $(\".numeric\").numeric(\",\");\r\n   * @example  $(\".numeric\").numeric(null, callback);\r\n   *\r\n   */\njQuery.fn.numeric = function (decimal, callback) {\n  decimal = decimal || \".\";\n  callback = typeof callback == \"function\" ? callback : function () {};\n  this.keypress(\n  function (e) {\n    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\n    // allow enter/return key (only when in an input box)\n    if (key == 13 && this.nodeName.toLowerCase() == \"input\") {\n      return true;\n    } else\n    if (key == 13) {\n      return false;\n    }\n    var allow = false;\n    // allow Ctrl+A\n    if (e.ctrlKey && key == 97 /* firefox */ || e.ctrlKey && key == 65 /* opera */) return true;\n    // allow Ctrl+X (cut)\n    if (e.ctrlKey && key == 120 /* firefox */ || e.ctrlKey && key == 88 /* opera */) return true;\n    // allow Ctrl+C (copy)\n    if (e.ctrlKey && key == 99 /* firefox */ || e.ctrlKey && key == 67 /* opera */) return true;\n    // allow Ctrl+Z (undo)\n    if (e.ctrlKey && key == 122 /* firefox */ || e.ctrlKey && key == 90 /* opera */) return true;\n    // allow or deny Ctrl+V (paste), Shift+Ins\n    if (e.ctrlKey && key == 118 /* firefox */ || e.ctrlKey && key == 86 /* opera */ ||\n    e.shiftKey && key == 45) return true;\n    // if a number was not pressed\n    if (key < 48 || key > 57) {\n      /* '-' only allowed at start */\n      if (key == 45 && this.value.length == 0) return true;\n      /* only one decimal separator allowed */\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1) {\n        allow = false;\n      }\n      // check for other keys that have special purposes\n      if (\n      key != 8 /* backspace */ &&\n      key != 9 /* tab */ &&\n      key != 13 /* enter */ &&\n      key != 35 /* end */ &&\n      key != 36 /* home */ &&\n      key != 37 /* left */ &&\n      key != 39 /* right */ &&\n      key != 46 /* del */)\n        {\n          allow = false;\n        } else\n      {\n        // for detecting special keys (listed above)\n        // IE does not support 'charCode' and ignores them in keypress anyway\n        if (typeof e.charCode != \"undefined\") {\n          // special keys have 'keyCode' and 'which' the same (e.g. backspace)\n          if (e.keyCode == e.which && e.which != 0) {\n            allow = true;\n          }\n          // or keyCode != 0 and 'charCode'/'which' = 0\n          else if (e.keyCode != 0 && e.charCode == 0 && e.which == 0) {\n              allow = true;\n            }\n        }\n      }\n      // if key pressed is the decimal and it is not already in the field\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) == -1) {\n        allow = true;\n      }\n    } else\n    {\n      allow = true;\n    }\n    return allow;\n  }).\n\n  blur(\n  function () {\n    var val = jQuery(this).val();\n    if (val != \"\") {\n      var re = new RegExp(\"^\\\\d+$|\\\\d*\" + decimal + \"\\\\d+\");\n      if (!re.exec(val)) {\n        callback.apply(this);\n      }\n    }\n  });\n\n  return this;\n};\n\njQuery.fn.numericSN = function (decimal, exp) {\n  decimal = decimal || \".\";\n  exp = exp || \"e\";\n  var plus = '+';\n  var minus = '-';\n  callback = typeof callback == \"function\" ? callback : function () {};\n  this.keypress(\n  function (e) {\n    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\n    // allow enter/return key (only when in an input box)\n    if (key == 13 && this.nodeName.toLowerCase() == \"input\") {\n      return true;\n    } else\n    if (key == 13) {\n      return false;\n    }\n    var allow = false;\n    // allow Ctrl+A\n    if (e.ctrlKey && key == 97 /* firefox */ || e.ctrlKey && key == 65 /* opera */) return true;\n    // allow Ctrl+X (cut)\n    if (e.ctrlKey && key == 120 /* firefox */ || e.ctrlKey && key == 88 /* opera */) return true;\n    // allow Ctrl+C (copy)\n    if (e.ctrlKey && key == 99 /* firefox */ || e.ctrlKey && key == 67 /* opera */) return true;\n    // allow Ctrl+Z (undo)\n    if (e.ctrlKey && key == 122 /* firefox */ || e.ctrlKey && key == 90 /* opera */) return true;\n    // allow or deny Ctrl+V (paste), Shift+Ins\n    if (e.ctrlKey && key == 118 /* firefox */ || e.ctrlKey && key == 86 /* opera */ ||\n    e.shiftKey && key == 45) return true;\n    // if a number was not pressed\n    if (key < 48 || key > 57) {\n\n      /* only one decimal separator allowed */\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1) {\n        allow = false;\n      }\n      /* only one e character allowed */\n      if (key == exp.charCodeAt(0) && this.value.indexOf(exp) != -1) {\n        allow = false;\n      }\n\n\n      // check for other keys that have special purposes\n      if (\n      key != 8 /* backspace */ &&\n      key != 9 /* tab */ &&\n      key != 13 /* enter */ &&\n      key != 35 /* end */ &&\n      key != 36 /* home */ &&\n      key != 37 /* left */ &&\n      key != 39 /* right */)\n        {\n          allow = false;\n        } else\n      {\n        // for detecting special keys (listed above)\n        // IE does not support 'charCode' and ignores them in keypress anyway\n        if (typeof e.charCode != \"undefined\") {\n          // special keys have 'keyCode' and 'which' the same (e.g. backspace)\n          if (e.keyCode == e.which && e.which != 0) {\n            allow = true;\n          }\n          // or keyCode != 0 and 'charCode'/'which' = 0\n          else if (e.keyCode != 0 && e.charCode == 0 && e.which == 0) {\n              allow = true;\n            }\n        }\n      }\n      // if key pressed is the exp and it is not already in the field\n      if (key == exp.charCodeAt(0) && this.value.indexOf(exp) == -1) {\n        allow = true;\n      }\n      // if key pressed is the decimal and it is not already in the field\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) == -1) {\n        allow = true;\n      }\n\n      /* allow plus and minus keys*/\n      if (key == minus.charCodeAt(0) || key == plus.charCodeAt(0)) {\n        allow = true;\n      }\n    } else\n    {\n      allow = true;\n    }\n    return allow;\n  }).\n\n  blur(\n  function () {\n    var val = jQuery(this).val();\n    if (val != \"\") {\n      var re = new RegExp(\"^\\\\d+$|\\\\d*\" + decimal + \"\\\\d+\");\n      if (!re.exec(val)) {\n        callback.apply(this);\n      }\n    }\n  });\n\n  return this;\n};","/* \r\n * Simple Pagination Control for Bizagi Mobile\r\n * @author: Richar Urbano <Richar.Urbano@Bizagi.com>\r\n */\n\n(function ($) {\n  $.fn.mobilePagination = function (options) {\n    // define options\n    options = options || {};\n\n    var defaultOptions = {\n      firstPage: 1,\n      totalPages: 1,\n      actualPage: 1,\n      pages: [],\n\n      // Controllers elements\n      listElement: $(\"ul\"),\n      first: '<spaz class=\"bz-mo-icon bz-grid-backwards-fast\"></span>',\n      firstClass: \"first\",\n      previous: '<spaz class=\"bz-mo-icon bz-grid-backwards\"></span>',\n      previousClass: 'previous',\n      next: '<spaz class=\"bz-mo-icon bz-grid-forward\"></span>',\n      nextClass: \"next\",\n      last: '<spaz class=\"bz-mo-icon bz-grid-forward-fast\"></span>',\n      lastClass: \"last\",\n      liClass: \"bz-page\",\n      arrowClass: \"bz-page-arrow\",\n\n      // Call back methods\n      clickCallBack: function clickCallBack() {} };\n\n\n\n    if (options.actualPage > options.totalPages) {\n      options.actualPage = options.totalPages;\n    }\n\n    // Extend options\n    $.extend(defaultOptions, defaultOptions, options);\n\n    var pagination = {\n      previousPage: defaultOptions.actualPage > 1 ? defaultOptions.actualPage - 1 : 1,\n      nextPage: defaultOptions.actualPage < defaultOptions.totalPages ? defaultOptions.actualPage + 1 : defaultOptions.totalPages };\n\n\n    // Modalview template\n    var modalTemplate = \"<div data-role='modalview' class='bz-rn-modal-pagination' style='width: 50%; height: 65%;'>\" +\n    \"\t<div data-role='header' class='bz-rn-modal-pagination-header'>\" +\n    \"\t\t<div class='bz-rn-modal-pagination-header-navigation' data-role='navbar'>\" +\n    \"\t\t\t<div class='bz-rn-modal-pagination-header-title'>\" +\n    \"\t\t\t\t<span class='bz-rn-modal-pagination-header-title-text'>#=data.title#</span>\" +\n    \"\t\t\t\t<span class='bz-rn-modal-pagination-header-title-cancel bz-mo-icon bz-cancel'></span>\" +\n    \"\t\t\t</div>\" +\n    \"\t\t\t<div class='bz-rn-modal-pagination-header-search'>\" +\n    \"\t\t\t\t<input class='bz-rn-modal-pagination-header-filter' type='text' placeholder='Type page...' />\" +\n    \"\t\t\t\t<span class='bz-rn-modal-pagination-header-filter-search bz-mo-icon bz-search'></span>\" +\n    \"\t\t\t\t<span class='bz-rn-modal-pagination-header-filter-cancel bz-mo-icon bz-circle-cross-full'></span>\" +\n    \"\t\t\t</div>\" +\n    \"\t\t</div>\" +\n    \"\t</div>\" +\n    \"\t<div class='bz-rn-modal-pagination-content'>\" +\n    \"\t\t<ul class='bz-rn-modal-pagination-content-list'>\" +\n    \"\t\t\t# $.each (data.list, function (i, item) { #\" +\n    \"\t\t\t<li class='bz-rn-modal-pagination-content-list-item' data-page='#= item.id #'>#= item.value #</li>\" +\n    \"\t\t\t# }) #\" +\n    \"\t\t</ul>\" +\n    \"\t</div>\" +\n    \"\t<div data-role='footer' class='bz-rn-modal-pagination-footer'>\" +\n    \"\t\t<div class='bz-rn-modal-pagination-footer-navigation' data-role='navbar'>\" +\n    \"\t\t\t<a class='bz-rn-modal-pagination-footer-action' data-align='right' data-role='button'>#=data.action#</a>\" +\n    \"\t\t</div>\" +\n    \"\t</div>\" +\n    \"</div>\";\n\n    /**\r\n               * init\r\n               * @returns {} \r\n               */\n    function init() {\n      // Add control elements\n      if (defaultOptions.totalPages && defaultOptions.totalPages > 1) {\n\n        defaultOptions.pages = [];\n        for (var i = 1; i <= defaultOptions.totalPages; i++) {\n          defaultOptions.pages.push({\n            id: i,\n            value: i,\n            active: i === defaultOptions.actualPage });\n\n        }\n\n        renderControlsArrows();\n\n        // Add events\n        attachEvents();\n      }\n    }\n\n    /**\r\n       * Append control arrow to list\r\n       * @returns {} \r\n       */\n    function renderControlsArrows() {\n      // add prev arrow\n      defaultOptions.listElement.prepend(\"<li/>\").find(\"li:first\").\n      addClass(defaultOptions.arrowClass + \" \" + defaultOptions.previousClass).\n      data(\"page\", pagination.previousPage).\n      html(defaultOptions.previous);\n\n      // add first arrow\n      defaultOptions.listElement.prepend(\"<li/>\").find(\"li:first\").\n      addClass(defaultOptions.arrowClass + \" \" + defaultOptions.firstClass).\n      data(\"page\", defaultOptions.firstPage).\n      html(defaultOptions.first);\n\n      // add next arrow\n      defaultOptions.listElement.append(\"<li/>\").find(\"li:last\").\n      addClass(defaultOptions.arrowClass + \" \" + defaultOptions.nextClass).\n      data(\"page\", pagination.nextPage).\n      html(defaultOptions.next);\n\n      // add last arrow\n      defaultOptions.listElement.append(\"<li/>\").find(\"li:last\").\n      addClass(defaultOptions.arrowClass + \" \" + defaultOptions.lastClass).\n      data(\"page\", defaultOptions.totalPages).\n      html(defaultOptions.last);\n    }\n\n    /**\r\n       * Add events\r\n       * @returns {} \r\n       */\n    function attachEvents() {\n      // Click event for list element            \n      $(\"li.\" + defaultOptions.arrowClass, defaultOptions.listElement).click(function () {\n        var page = $(this).hasClass(defaultOptions.lastClass) ? defaultOptions.totalPages : Number($(this).data(\"page\"));\n\n        defaultOptions.clickCallBack({ page: page });\n      });\n\n      // Show popup pager\n      $(\"li.active .bz-page-index\", defaultOptions.listElement).click(function () {\n        showModalPage();\n      });\n    }\n\n    /**\r\n       * show modalview with pages\r\n       * @returns {} \r\n       */\n    function showModalPage() {\n      //var title = bizagi.localization.getResource(\"text-cancel\");\n      var title = \"Go to page\";\n      var placeholder = \"Type page...\";\n      var action = \"GO\";\n\n      var modalPagerTemplate = kendo.template(modalTemplate, { useWithBlock: false });\n      var modalPager = $(modalPagerTemplate({ list: defaultOptions.pages, title: title, placeholder: placeholder, action: action }).trim());\n\n      modalPager.kendoMobileModalView({\n        close: function close() {\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      attachModalHandlers(modalPager);\n\n      // Add arrow on modal\n      modalPager.closest(\".km-modalview-wrapper\").\n      addClass(\"bz-rn-modal-pagination-position\").\n      addClass(\"bz-rn-modal-pagination-container\");\n\n      modalPager.kendoMobileModalView(\"open\");\n    }\n\n    /**\r\n       * Attach events to modalview\r\n       * @param {} modalContainer \r\n       * @returns {} \r\n       */\n    function attachModalHandlers(modalContainer) {\n\n      var listItems = modalContainer.find(\".bz-rn-modal-pagination-content-list li\");\n      var modalListContainer = modalContainer.find(\".bz-rn-modal-pagination-content-list\");\n\n      // Close modalview\n      modalContainer.on(\"click\", \".bz-rn-modal-pagination-header-title-cancel\", function () {\n        modalContainer.kendoMobileModalView(\"close\");\n      });\n\n      // Change to page selected\n      modalContainer.on(\"click\", \".bz-rn-modal-pagination-footer-action\", function () {\n        var itemSelected = modalListContainer.find(\".bz-rn-modal-pagination-content-list-item-selected\");\n\n        if (itemSelected && itemSelected.length > 0) {\n          var page = Number(itemSelected.data(\"page\"));\n\n          modalContainer.kendoMobileModalView(\"close\");\n          defaultOptions.clickCallBack({ page: page });\n        }\n      });\n\n      // Filtering list\n      modalContainer.find(\".bz-rn-modal-pagination-header-filter\").keyup(function (event) {\n        var that = this;\n\n        if (event.which === 13) {\n          search({ container: modalContainer, list: listItems, query: that.value, force: true });\n        } else {\n          if (that.timeout)\n          clearTimeout(that.timeout);\n\n          that.timeout = setTimeout(function () {\n            search({ container: modalContainer, list: listItems, query: that.value });\n          }, 300);\n        }\n      });\n\n      // Cleaning list\n      modalContainer.find(\".bz-rn-modal-pagination-header-filter-cancel\").on(\"click\", function () {\n        search({ container: modalContainer, list: listItems, query: \"\", force: true });\n        modalContainer.find(\".bz-rn-modal-pagination-header-filter\").val(\"\");\n      });\n\n      // List Selectable\n      modalListContainer.on(\"click\", \"li\", function () {\n        var that = this;\n\n        modalListContainer.\n        find(\".bz-rn-modal-pagination-content-list-item-selected\").\n        removeClass(\"bz-rn-modal-pagination-content-list-item-selected\");\n\n        $(that).addClass(\"bz-rn-modal-pagination-content-list-item-selected\");\n      });\n    }\n\n    /**\r\n       * filter pages\r\n       * @param {} params \r\n       * @returns {} \r\n       */\n    function search(params) {\n      var self = this;\n      var container = params.container;\n      var list = params.list;\n\n      if (params.query === self.lastProcessedValue && !params.force) {\n        return;\n      }\n\n      self.lastProcessedValue = params.query;\n\n      if (params.query !== \"\") {\n        if (container.find(\".bz-rn-modal-pagination-header-filter-cancel\").css(\"display\") === \"none\")\n        container.find(\".bz-rn-modal-pagination-header-filter-cancel\").show(500);\n      } else {\n        container.find(\".bz-rn-modal-pagination-header-filter-cancel\").hide(500);\n      }\n\n      // List filter\n      var filter = new RegExp(params.query, \"i\");\n      list.filter(function () {\n        var that = this;\n        if (filter.test($(that).text())) {\n          return $(that);\n        } else {\n          $(that).hide();\n        }\n      }).show();\n    }\n\n    // Init plugin\n    init();\n  };\n})(jQuery);","/**\r\n* Timeago is a jQuery plugin that makes it easy to support automatically\r\n* updating fuzzy timestamps (e.g. \"4 minutes ago\" or \"about 1 day ago\").\r\n*\r\n* @name timeago\r\n* @version 1.3.1\r\n* @requires jQuery v1.2.3+\r\n* @author Ryan McGeary\r\n* @license MIT License - http://www.opensource.org/licenses/mit-license.php\r\n*\r\n* For usage and examples, visit:\r\n* http://timeago.yarp.com/\r\n*\r\n* Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)\r\n*/\n\n(function ($) {\n  $.timeago = function (timestamp) {\n    $t.settings = {\n      refreshMillis: 60000,\n      allowFuture: false,\n      localeTitle: false,\n      cutoff: 0,\n      strings: {\n        prefixAgo: null,\n        prefixFromNow: null,\n        suffixAgo: bizagi.localization.getResource(\"bizagi-editor-form-timeago-ago\"),\n        suffixFromNow: bizagi.localization.getResource(\"bizagi-editor-form-timeago-from-now\"),\n        seconds: bizagi.localization.getResource(\"bizagi-editor-form-timeago-seconds\"),\n        minute: bizagi.localization.getResource(\"bizagi-editor-form-timeago-minute\"),\n        minutes: bizagi.localization.getResource(\"bizagi-editor-form-timeago-minutes\"),\n        hour: bizagi.localization.getResource(\"bizagi-editor-form-timeago-hour\"),\n        hours: bizagi.localization.getResource(\"bizagi-editor-form-timeago-hours\"),\n        day: bizagi.localization.getResource(\"bizagi-editor-form-timeago-day\"),\n        days: bizagi.localization.getResource(\"bizagi-editor-form-timeago-days\"),\n        month: bizagi.localization.getResource(\"bizagi-editor-form-timeago-month\"),\n        months: bizagi.localization.getResource(\"bizagi-editor-form-timeago-months\"),\n        year: bizagi.localization.getResource(\"bizagi-editor-form-timeago-year\"),\n        years: bizagi.localization.getResource(\"bizagi-editor-form-timeago-years\"),\n        wordSeparator: \" \",\n        numbers: [] } };\n\n\n\n    if (timestamp instanceof Date) {\n      return inWords(timestamp);\n    } else if (typeof timestamp === \"string\") {\n      timestamp = timestamp.replace(\".\", \"-\");\n      return inWords($.timeago.parse(timestamp));\n    } else if (typeof timestamp === \"number\") {\n      return inWords(new Date(timestamp));\n    } else {\n      return inWords($.timeago.datetime(timestamp));\n    }\n  };\n  var $t = $.timeago;\n\n  $.extend($.timeago, {\n\n    /*\r\n                        *\r\n                        */\n    inWords: function inWords(distanceMillis) {\n      var $l = this.settings.strings;\n      var prefix = $l.prefixAgo;\n      var suffix = $l.suffixAgo;\n      if (this.settings.allowFuture) {\n        if (distanceMillis < 0) {\n          prefix = $l.prefixFromNow;\n          suffix = $l.suffixFromNow;\n        }\n      }\n\n      var seconds = Math.abs(distanceMillis) / 1000;\n      var minutes = seconds / 60;\n      var hours = minutes / 60;\n      var days = hours / 24;\n      var years = days / 365;\n\n      function substitute(stringOrFunction, number) {\n        var string = $.isFunction(stringOrFunction) ? stringOrFunction(number, distanceMillis) : stringOrFunction;\n        var value = $l.numbers && $l.numbers[number] || number;\n        return string.replace(/%d/i, value);\n      }\n\n      var words = seconds < 45 && substitute($l.seconds, Math.round(seconds)) ||\n      seconds < 90 && substitute($l.minute, 1) ||\n      minutes < 45 && substitute($l.minutes, Math.round(minutes)) ||\n      minutes < 90 && substitute($l.hour, 1) ||\n      hours < 24 && substitute($l.hours, Math.round(hours)) ||\n      hours < 42 && substitute($l.day, 1) ||\n      days < 30 && substitute($l.days, Math.round(days)) ||\n      days < 45 && substitute($l.month, 1) ||\n      days < 365 && substitute($l.months, Math.round(days / 30)) ||\n      years < 1.5 && substitute($l.year, 1) ||\n      substitute($l.years, Math.round(years));\n\n      var separator = $l.wordSeparator || \"\";\n      if ($l.wordSeparator === undefined) {separator = \" \";}\n      return $.trim([prefix, words, suffix].join(separator));\n    },\n    /*\r\n       *\r\n       */\n    parse: function parse(iso8601) {\n      var s = $.trim(iso8601);\n      s = s.replace(/\\.\\d+/, \"\"); // remove milliseconds\n      s = s.replace(/-/, \"/\").replace(/-/, \"/\");\n      s = s.replace(/T/, \" \").replace(/Z/, \" UTC\");\n      s = s.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\n      s = s.replace(/([\\+\\-]\\d\\d)$/, \" $100\"); // +09 -> +0900\n      return new Date(s);\n    },\n    /*\r\n       *\r\n       */\n    datetime: function datetime(elem) {\n      var iso8601 = $t.isTime(elem) ? $(elem).attr(\"datetime\") : $(elem).attr(\"title\");\n      return $t.parse(iso8601);\n    },\n    /*\r\n       *\r\n       */\n    isTime: function isTime(elem) {\n      // jQuery's `is()` doesn't play well with HTML5 in IE\n      return $(elem).get(0).tagName.toLowerCase() === \"time\"; // $(elem).is(\"time\");\n    } });\n\n\n  function inWords(date) {\n    return $t.inWords(distance(date));\n  }\n\n  function distance(date) {\n    return new Date().getTime() - date.getTime();\n  }\n\n})(jQuery);","/**\r\n * Name:\r\n *   Author: Bizagi Mobile team\r\n *   Comments:\r\n * Structure to applicate plugin\r\n *  <div class=\"bz-bizagi-container-tap-popup\"> //container\r\n    <div class=\"cell bz-container-items-tabs\"> // represent item of tab\r\n    <span >${displayName}</span>// the first span always is the title                                    \r\n    <span> ........</span> // after the span can place the items you want\r\n    <div> .........</div> // etc\r\n    </div> <!-- end cell-->\r\n    </div><!-- end bz-bizagi-container-tap-popup-->\r\n**/\n(function ($) {\n  $.fn.bztabs = function (params) {\n\n    var self = $(this);\n\n    params = params || {};\n    params.activeTab = params.activeTab || 0;\n    params.tabNumber = params.tabNumber || 1;\n\n\n    var activate = params.activate && typeof params.activate === \"function\" ? params.activate : function () {};\n    var beforeActivate = params.beforeActivate && typeof params.beforeActivate === \"function\" ? params.beforeActivate : function () {};\n\n    // PopUp control\n    var popUp = self.find(\">div.bz-bizagi-container-tap-popup\").hide();\n    // Depending on tabNumber a percentage will be in the width of each tab\n    var tabCountPopup = popUp.children().length;\n    // Base to build the header of tabs\n    var tabHeader = $(\"<div class='bz-header_select'></div>\");\n\n    var tabCountReal = params.tabNumber > tabCountPopup ? tabCountPopup : params.tabNumber;\n\n    // round down\n    var widthRow = Math.floor(100 / Number(tabCountReal));\n\n    // Duplicate the tabs to create the header\n    popUp.children().each(function (i, item) {\n      tabHeader.append(\n      \"<div class='bz-wp-tabs-ui bz-wp-tabs-item' data-index='\" + i + \"' data-reference-tab='\" +\n      item.getAttribute(\"data-reference-tab\") + \"'><span>\" +\n      item.textContent + \"</span></div>\");\n    });\n\n    tabHeader.find(\"> .bz-wp-tabs-ui\").css(\"width\", widthRow + \"%\");\n    tabHeader.append(\"<div class='bz-wp-tabs-arrow-container'><div class='bz-cm-icon bz-mo-icon bz-plus'></div></div>\");\n\n    self.prepend(tabHeader);\n\n    var tabCurrent = self.find(\"> .bz-bizagi-container-tap-popup > .bz-container-items-tabs\").eq(params.activeTab);\n    var itemCurrent = $($(tabCurrent).data(\"reference-tab\"), self);\n\n    itemCurrent.addClass(\"childrenActive\");\n    tabCurrent.addClass(\"tabSelected\");\n\n    // Mark the selected tab in the header\n    var activeTab = $(\".bz-wp-tabs-ui:nth-child(\" + (params.activeTab + 1) + \")\", tabHeader).addClass(\"tabSelected\");\n\n    // The new width will be added to the tabSelected in order to complete the 100% on tabs\n    var widthTabSelected = widthRow + (100 - widthRow * tabCountReal);\n    activeTab.css(\"width\", widthTabSelected + \"%\");\n\n    function updateTabSize() {\n      if (params.tabNumber < tabCountPopup) {\n        // Select the current tab\n        $(\".bz-wp-tabs-arrow-container\", self).first().addClass(\"show-pluss\");\n        tabHeader.addClass(\"show-pluss\");\n        activeTab.trigger(\"click\", { origin: \"popUp\" });\n      } else {\n        $(\".bz-wp-tabs-arrow-container\", self).removeClass(\"show-pluss\");\n        tabHeader.removeClass(\"show-pluss\");\n        tabHeader.find(\"> .bz-wp-tabs-ui:last\").addClass(\"bz-wp-no-border\");\n      }\n    }\n\n    // Reorder tabs\n    function reorderTabs(dataRef) {\n\n      var tempTabs = tabHeader.find(\".bz-wp-tabs-ui\");\n      var moveAtTheEnd = true;\n\n      tempTabs.each(function (i, item) {\n        if (dataRef !== item.getAttribute(\"data-reference-tab\") && moveAtTheEnd) {\n          tabHeader.remove(\"[data-reference-tab='\" + dataRef + \"']\");\n          tabHeader.append(item);\n        } else {\n          moveAtTheEnd = false;\n        }\n      });\n    }\n\n    // Change tabs\n    function changeTab(e, params) {\n\n      params = params || {};\n      params.origin = params.origin || \"header\";\n\n      e.stopPropagation();\n      e.preventDefault();\n\n      if ($(this).hasClass(\"tabSelected\") && params.origin !== \"popUp\") {\n        return;\n      }\n\n      var dataRef = e.currentTarget.getAttribute(\"data-reference-tab\");\n      var tabChildren = $(dataRef, self);\n\n      activeTab = $(e.currentTarget);\n      // Changes the visibility of the contents of the tabs\n      self.find(\">div.childrenActive\").removeClass(\"childrenActive\");\n      tabChildren.addClass(\"childrenActive\");\n\n      // Add the normal width\n      tabHeader.find(\">div.tabSelected\").removeClass(\"tabSelected\").css(\"width\", widthRow + \"%\");\n\n      if (popUp.css(\"display\") === \"block\") {\n        popUp.toggle();\n      }\n\n      if (params.origin && params.origin === \"popUp\") {\n        activeTab = $(\"[data-reference-tab='\" + dataRef + \"']\", tabHeader);\n        reorderTabs(dataRef);\n      }\n\n      // Add the new width for tabSelected to complete the 100%\n      activeTab.addClass(\"tabSelected\").css(\"width\", widthTabSelected + \"%\");\n      activate(e, params);\n    }\n\n    if (typeof params.domIncluded !== \"undefined\") {\n      // Until the control is added to the DOM can be known widths to add the icon popup         \n      $.when(params.domIncluded).done(function () {\n        updateTabSize();\n      });\n    } else {\n      updateTabSize();\n    }\n\n    // Attach events\n    self.find(\".bz-wp-tabs-arrow-container\").first().bind(\"click\", function (event) {\n\n      // Determine if an item is visible or not\n      var headerWidth = tabHeader.innerWidth() - 29;\n      var totalWidth = 0;\n\n      // Remove the visible elements\n      $(\".bz-container-items-tabs\", popUp).removeClass(\"show\");\n\n      tabHeader.find(\".bz-wp-tabs-ui\").each(function (i, item) {\n\n        totalWidth += $(\":first-child\", item).outerWidth();\n\n        // If \"true\" then it is a tab to display the popup\n        if (totalWidth > headerWidth) {\n\n          popUp.children().each(function (j, pop) {\n            if (pop.textContent === item.textContent) {\n              $(pop).addClass(\"show\");\n              $(\".cell.bz-container-items-tabs\").css(\"border-bottom\", \"\");\n              $(\".cell.bz-container-items-tabs.show\").last().css(\"border-bottom\", \"none\");\n\n              return;\n            }\n          });\n        }\n      });\n\n      event.stopPropagation();\n      event.preventDefault();\n      popUp.toggle();\n    });\n\n    $(\">div.cell\", popUp).bind(\"click\", function (e) {\n      changeTab(e, { origin: \"popUp\" });\n    });\n\n    $(\".bz-wp-tabs-ui\", tabHeader).bind(\"click\", changeTab);\n\n    tabHeader.bind(\"resizeHeader\", function () {\n      updateTabSize();\n    });\n  };\n})(jQuery);","/**\r\n *\r\n * Created by RicardoPD on 8/11/2016.\r\n */\n\n(function ($) {\n  $.fn.helpText = function (options) {\n    options = options || {};\n    options.helpText = options.helpText || \"\";\n    options.dir = typeof options.dir !== \"undefined\" && options.dir !== \"\" ? options.dir : \"inherit\";\n\n    var tmpl =\n    '<div class=\"bz-container-rn-helptext-overlay\">' +\n    '   <div class=\"bz-rn-helptext\" dir=\"#: data.dir #\">' +\n    '       <div class=\"bz-cancel-container\">' +\n    '           <a href=\"\\\\#\" style=\"opacity: 0; width: 0; height: 0\"></a>' +\n    '           <span class=\"bz-mo-icon bz-cancel\"></span>' +\n    '       </div>' +\n    '       <span class=\"bz-rn-helptext-text\">#= data.helpText #</span>' +\n    '   </div>' +\n    '</div>';\n\n    var template = kendo.template(tmpl, { useWithBlock: false });\n    var $html = $(template(options));\n\n    $(this).bind(\"click\", function () {\n      $(\"body\").append($html);\n      $(\"body\").css(\"position\", \"fixed\");\n      $(\"a\", $html).get(0).focus();\n      $(\".bz-cancel\", $html).bind(\"click\", function () {\n        $html.remove();\n        $(\"body\").css(\"position\", \"\");\n      });\n      $(\"a\", $html).bind(\"blur\", function () {\n        $(\".bz-cancel\", $html).click();\n      });\n      $html.addClass(\"active\");\n    });\n  };\n})(jQuery);","/*\r\n*   Name: BizAgi Services Rendering End Points\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script defines all the end-points used to retrieve ajax stuff\r\n*   -   All urls must be relative to the base application\r\n*/\n\n// Create or define namespace\nbizagi.render = typeof bizagi.render !== \"undefined\" ? bizagi.render : {};\nbizagi.render.services = typeof bizagi.render.services !== \"undefined\" ? bizagi.render.services : {};\nbizagi.render.services.endPoints = [];\n\n// Creates a endpoint hash factory to resolve custom requirements\nbizagi.render.services.getEndPoints = function (params) {\n\n  var renderHandlerPathRest = \"Rest/Handlers/Render\";\n  var renderUploadHandlerPathRest = \"Rest/Handlers/Render/Upload\";\n  var renderFileHandlerPathRest = \"Rest/Handlers/RenderFile\";\n  var letterHandlerPathRest = \"Rest/Handlers/Letter\";\n  var multiActionHandlerPathRest = \"Rest/Handlers/MultiAction\";\n  var metadataHandlerPathRest = \"Rest/Handlers/Metadata\";\n  var metadataMultiactionHandlerPathRest = \"Rest/Handlers/MetadataMultiAction\";\n  // Default workportal end-points\n  if (params.context == \"workflow\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.proxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.proxyPrefix + metadataHandlerPathRest,\n      \"render-multiaction-metadata\": params.proxyPrefix + metadataMultiactionHandlerPathRest,\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.proxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.proxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.proxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\",\n      \"render-entity-layout-upload-files\": params.proxyPrefix + \"Api/Entities/{entity}/Files/{surrogateKey}/Array?xpath={xpath}\",\n      \"render-query-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsersForQueryFormsById/{queryFormId}/\",\n      \"case-handler-getCaseSummary\": params.proxyPrefix + \"Rest/Cases/{idCase}/SummaryGuid\",\n      \"case-handler-getCaseSummaryByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getCaseAssignees\": params.proxyPrefix + \"Rest/Cases/{idCase}/AssigneesGuid\",\n      \"case-handler-getWorkItems\": params.proxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\",\n      \"admin-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsers\",\n      \"admin-getUsersList-FromPreferences\": params.proxyPrefix + \"Rest/Users/SearchUsersFromPreferences\",\n      \"admin-getUsersList-ForStakeholders\": params.proxyPrefix + \"Rest/Users/SearchUsersForStakeholders\",\n      \"admin-getUsersList-ForXpathIdBossUser\": params.proxyPrefix + \"Rest/Users/SearchUsersForBosses\",\n      \"admin-getUsersList-ForXpathIdDelegate\": params.proxyPrefix + \"Rest/Users/SearchUsersForDelegates\",\n      \"admin-getUsersForAssignation\": params.proxyPrefix + \"Rest/Users/UsersForAssignation\",\n      \"admin-users-config\": params.proxyPrefix + \"Api/Authentication/BizagiConfig\",\n      //users administration\n      \"admin-usersform\": params.proxyPrefix + \"Rest/Handlers/Render\",\n      \"admin-GenerateDataToSendByEmail\": params.proxyPrefix + \"Rest/Users/GenerateDataToSendByEmail\",\n      \"admin-sendUserEmail\": params.proxyPrefix + \"Rest/Users/SendUserEmail\" };\n\n  }\n  // Sharepoint end-points (must be customized for each project)\n  if (params.context == \"sharepoint\" || params.context == \"portal\") {\n    if (typeof params.sharepointProxyPrefix === \"undefined\") alert(\"sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'\");\n    return {\n      \"form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.sharepointProxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.sharepointProxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.sharepointProxyPrefix + metadataHandlerPathRest,\n      \"render-grid-edit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": \"jquery/css/bizagi/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.sharepointProxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": \"jquery/css/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.sharepointProxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\",\n      \"case-handler-getCaseSummary\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/Summary\",\n      \"case-handler-getCaseSummaryByGuid\": params.sharepointProxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getWorkItems\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\" };\n\n  }\n\n  if (params.context == \"entitymanagement\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=entity\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  if (params.context == \"search\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=metadata\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  return {};\n};","/*\r\n*   Name: BizAgi Rendering Service Context Factory\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the endpoints to be used based on the given context\r\n*/\n\n$.Class.extend(\"bizagi.render.services.context\", {}, {\n  /* \r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    this.context = params.context;\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n  },\n\n  /*\r\n     *   Returns the given url for a specified service\r\n     */\n  getUrl: function getUrl(service) {\n    if (this.endPoints[service] == null) {\n      alert(\"No endpoint defined for: \" + service);\n    }\n    return this.endPoints[service];\n  },\n\n  setProxyPrefix: function setProxyPrefix(params) {\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n  } });","/*\r\n *   Name: BizAgi Rendering Services\r\n *   Author: Einer Perez\r\n *   Comments:\r\n *   -   This class will provide a facade to access to multiaction rendering REST services\r\n */\nbizagi.render.services.multiactionservice.extend(\"bizagi.render.services.metadatamultiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"h_pageCacheId\" },\n{\n\n  /*\r\n  *   Sends a multiaction to the server\r\n  */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      if (action[self.Class.BA_PAGE_CACHE]) {\n        data[self.Class.BA_PAGE_CACHE] = action[self.Class.BA_PAGE_CACHE];\n      }\n      delete action[self.Class.BA_PAGE_CACHE];\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action metadata\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction-metadata\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(this, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse;\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  } });","/**\r\n *   Name: Bizagi Rendering Validation controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.validation\", {}, {\n\n  /* \r\n                                                                                            *   Constructor\r\n                                                                                            */\n  init: function init(form, validations, canvas) {\n    // Enable evalValidation function with console log trace\n    this.enableDebug = false;\n\n    // Call base\n    this._super(form);\n\n    // Perform notifications\n    this.initializeValidations(canvas, validations);\n  },\n\n  /**\r\n      * Perform validations component\r\n      * @param canvas\r\n      * @param validations\r\n      */\n  initializeValidations: function initializeValidations(canvas, validations) {\n    var self = this;\n    var validationBox = $('<div />').appendTo(canvas);\n\n    //Notifies that a modal view appear/disappear\n    $.widget(\"ui.bizagi_notifications\", $.ui.bizagi_notifications, {\n      expand: function expand() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      collapse: function collapse() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      },\n      hide: function hide() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n\n    // Apply plugin\n    validationBox.bizagi_notifications({\n      itemIcon: \"ui-icon-circle-close\",\n      minimized: false,\n      clearEnabled: false,\n      title: bizagi.localization.getResource(\"render-form-validations-header-text\"),\n      device: bizagi.util.detectDevice(),\n      orientation: self.form.properties.orientation });\n\n\n    // Bind click\n    validationBox.bind(\"itemClick\", function (e, ui) {\n      self.onNotificationClick(ui.data);\n    });\n\n    // Build validations\n    if (validations) {\n      self.buildValidations(validations);\n    }\n\n    // Keep references\n    self.validationBox = validationBox;\n    self.validations = validations || [];\n  },\n\n  /* \r\n     *   Method to incorporate automatic validation rules \r\n     */\n  buildValidations: function buildValidations(validations) {\n    var self = this;\n    var fnValidations = self.buildAllValidations(validations);\n\n    self.form.bind(\"rendervalidate\", function () {\n      return fnValidations(self);\n    });\n  },\n\n  /* \r\n     *   Method to add a simple error message in the validation box\r\n     */\n  showErrorMessage: function showErrorMessage(message) {\n    bizagi.showErrorAlertDialog = false;\n    this.showValidationMessage(message, null, \"ui-icon-circle-close\", \"ui-state-error\");\n  },\n\n  /* \r\n     *   Method to add a simple alert message in the validation box\r\n     */\n  showAlertMessage: function showAlertMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-alert\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple info message in the validation box\r\n     */\n  showInfoMessage: function showInfoMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-info\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple validation message in the validation box\r\n     */\n  showValidationMessage: function showValidationMessage(message, focus, icon, itemAdditionalClass, type, renderId) {\n    var self = this;\n    var form = self.form;\n    var render = null;\n\n    if (renderId) {\n      render = form.getRenderById(renderId) || null;\n    } else {\n      render = focus ? form.getRender(focus) : null;\n    }\n\n    bizagi.showErrorAlertDialog = false;\n\n    // Method to perform validations after the render has been changed, or the notifications has been clicked\n    var performValidationFn = function performValidationFn() {\n      // First hide and clear validation box\n      self.clearValidationMessages();\n\n      var lastActionButton = form ? form.getLastActionButton() : {};\n      var skipValidation = lastActionButton && lastActionButton.action === \"nextWithoutValidations\";\n\n      if (!skipValidation) {\n        // Run validations\n        self.validating = true;\n        self.performValidations();\n        self.validating = false;\n      }\n\n      // Attempt to hide if there are no validations\n      if (self.countValidationMessages() == 0) {\n        self.hideValidationMessages();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } else {\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      }\n\n      //form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n    };\n    self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n    // Add message\n    self.validationBox.bizagi_notifications(\"addNotification\", message, focus, icon, itemAdditionalClass, performValidationFn, type, renderId);\n\n    if (render) {\n      // Add error message to render\n      render.setValidationMessage(message);\n\n      if (!bizagi.util.isIE8()) {\n\n        // Bind event when render change\n        if (!self.validating) render.bind(\"rendervalidate\", function () {\n          performValidationFn();\n          if (render.properties.retype != \"double\") {\n            render.unbind(\"rendervalidate\");\n          }\n        });\n      }\n    }\n  },\n\n  /*\r\n     *   Count the number of validation messages\r\n     */\n  countValidationMessages: function countValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"count\");\n  },\n\n  /*\r\n     *   Remove all the validations\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var validationsBoxes = $(\".ui-bizagi-notifications-container\", \"body\").not(\".ui-bizagi-log-container\");\n\n    return validationsBoxes.bizagi_notifications(\"clearAll\", undefined, params);\n  },\n\n  /*\r\n     *   Hide the validation notifications box\r\n     */\n  hideValidationMessages: function hideValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"hide\");\n  },\n\n  /*\r\n     *   Show the validation notifications box\r\n     */\n  showValidationMessages: function showValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"show\");\n  },\n\n  /*\r\n     *   Expand the notification box\r\n     */\n  expandNotificationBox: function expandNotificationBox(autofocus) {\n    // Select first error and expand notifications\n    if (autofocus !== false) this.validationBox.bizagi_notifications(\"autoFocusFirstError\");\n    return this.validationBox.bizagi_notifications(\"expand\");\n  },\n\n  isExpandedNotificationBox: function isExpandedNotificationBox() {\n    return this.validationBox.bizagi_notifications(\"isExpanded\") && this.validationBox.bizagi_notifications(\"isContentVisible\");\n  },\n\n  /*\r\n     *   Run all validation rules in the form container\r\n     */\n  performValidations: function performValidations(invalidElements) {\n    var self = this;\n\n    // First hide and clear validation box\n    self.clearValidationMessages();\n    self.validationBox.bizagi_notifications(\"initBatch\");\n\n    // Run render validations\n    var bRendersValid = self.validateRenders(invalidElements);\n\n    // Run form validations\n    var bFormValid = self.validations.length > 0 ? self.form.triggerHandler(\"rendervalidate\") : true;\n    self.validationBox.bizagi_notifications(\"endBatch\");\n\n    // Show validations if invalid\n    if (!bFormValid || !bRendersValid) {\n      self.validationBox.bizagi_notifications(\"show\");\n      return false;\n    }\n\n    return true;\n  },\n\n  /* PRIVATE METHODS */\n\n  /*  \r\n                        *   Construct validations javascript rules\r\n                        */\n  buildAllValidations: function buildAllValidations(validations) {\n    var self = this;\n    var sJSCode = \"\";\n\n    for (var i = 0; i < validations.length; i++) {\n\n      var isEnabled = validations[i].enabled != undefined ? validations[i].enabled : true;\n      if (isEnabled) {\n        // If validation is not \"valid\" we can omit that instruction\n        try {\n          sJSCode += self.buildValidation(validations[i].conditions, validations[i].validationCommand);\n        } catch (e) {\n          if (e.message != \"RenderNotFoundException\") {\n            bizagi.logError(\"Validation cannot be parsed: \" + e.message, validations[i]);\n          }\n        }\n      }\n    }\n\n    // Build final function\n    var sStatement = \"var baTmpFn = function(self, params){\\r\\n var bValid = true;\\r\\n \" + sJSCode + \"\\r\\n return bValid;}; baTmpFn\";\n\n    // Return interpreted function\n    return self.evalValidation(sStatement);\n  },\n\n  /*\r\n     *   Build a single javascript validation rule\r\n     */\n  buildValidation: function buildValidation(conditions, validationCommand) {\n    var self = this;\n    var sJsCondition = \"\";\n    var sJsValidation = \"\";\n\n    // Detect grid references\n    var gridReference = self.searchForGridReference(conditions);\n    var bGridDetected = gridReference != null;\n    var validateEditability = typeof bizagi.override.validateEditabilityOnValidations != \"undefined\" ? bizagi.override.validateEditabilityOnValidations : true;\n\n    // Build Conditions\n    sJsCondition += \"( \" + self.buildConditions(conditions, bGridDetected, validateEditability) + \" )\";\n\n    // Fix message for quotes and break lines\n    validationCommand.message = validationCommand.message.replace(/'/g, \"\\\\'\");\n    validationCommand.message = validationCommand.message.replace(/\\n/g, \" \");\n\n    // Build Message\n    var focus = validationCommand.focus || \"\";\n    if (bGridDetected) focus = gridReference;\n    if (validationCommand.tokens)\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"', JSON.parse('\" + JSON.encode(validationCommand.tokens) + \"')); bValid = false;\\r\\n\";else\n\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"'); bValid = false;\\r\\n\";\n\n    // Build final statement\n    if (!bGridDetected) {\n\n\n      return \"if (\" + sJsCondition + \"){\\r\\n \" + sJsValidation + \" \\r\\n}\";\n    } else {\n      var sGridStatement = \"var grid = self.form.getRender('\" + gridReference + \"');\\r\\n\";\n      sGridStatement += \"if(grid === null) return true;\\r\\n\";\n      sGridStatement += \"var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"var bGridValid = true;\\r\\n\";\n      sGridStatement += \"$.each(data, function(_, i) {\\r\\n\";\n      sGridStatement += \"if (\" + sJsCondition + \"){\\r\\n bGridValid = false; \\r\\n}\";\n      sGridStatement += \"});\\r\\n\";\n      sGridStatement += \"if (bGridValid == false){\\r\\n \" + sJsValidation + \"\\r\\n}\";\n      return sGridStatement;\n    }\n  },\n\n  /* \r\n     *   Method triggered when the validation item has been clicked\r\n     */\n  onNotificationClick: function onNotificationClick(data) {\n    var self = this;\n    var form = self.form;\n    var xpath = data.focus;\n    var renderId = data.id;\n\n    if (xpath) {\n      var render = renderId ? form.getRenderById(renderId) : form.getRender(xpath);\n\n      if (render) {\n        render.focus();\n      }\n    }\n  },\n\n  /* \r\n     *   Method to loop\r\n     */\n  validateRenders: function validateRenders(invalidElements) {\n    var self = this;\n    invalidElements = invalidElements || [];\n\n    // Do a check\n    var bValid = self.form.isValid(invalidElements);\n    if (!bValid) {\n      invalidElements.forEach(function (element) {\n        if (element.id) {\n          // Parameters: message, xpath, icon, itemAdditionalClass, type, renderId\n          self.showValidationMessageById(element.message, element.xpath, element.id);\n        } else if (element.message || element.xpath) {\n          self.showValidationMessage(element.message, element.xpath);\n        }\n      });\n    }\n\n    return bValid;\n  },\n\n  /*\r\n     *\tEval validation string, for debug purposes\r\n     */\n  evalValidation: function evalValidation(command) {\n    var self = this;\n\n    if (self.enableDebug && console != undefined) {\n      console.log(command);\n    }\n\n    return eval(command);\n  },\n\n  /**\r\n      * Method to add a simple validation message in the validation box\r\n      * @param message\r\n      * @param xpath\r\n      * @param renderId\r\n      */\n  showValidationMessageById: function showValidationMessageById(message, xpath, renderId) {\n    this.showValidationMessage(message, xpath, undefined, false, undefined, renderId);\n  } });","/*\r\n *   Name: Bizagi Rendering Validation controller \r\n *   Author: Richar Urbano <Richar.Urbano@Bizagi.com\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\n\n// Override to support the change of the visibility and editability over forms buttons\nbizagi.command.controllers.action.extend(\"bizagi.command.controllers.action\", {}, {\n\n  /**\r\n                                                                                     * Sets a new color for the background of the button\r\n                                                                                     * Applies also to grid cells!\r\n                                                                                     * @param {} xpath \r\n                                                                                     * @param {} color \r\n                                                                                     * @returns {} \r\n                                                                                     */\n  changeButtonBackground: function changeButtonBackground(xpath, color) {\n    if (this.form && !this.form.isFloatingButtonsEnabled())\n    this._super(xpath, color);\n  },\n\n  /**\r\n      * Sets a new color for the foreground of the render\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonForeground: function changeButtonForeground(xpath, color) {\n    if (this.form && !this.form.isFloatingButtonsEnabled())\n    this._super(xpath, color);\n  },\n\n  /**\r\n      * Changes the visibility of the button\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonVisibility: function changeButtonVisibility(xpath, status) {\n    var self = this;\n\n    if (self.form && !self.form.isFloatingButtonsEnabled()) {\n      self._super(xpath, status);\n    } else {\n      self.changeFloatingButtonVisibility(xpath, status);\n    }\n  },\n\n  /**     \r\n      * Changes the editability of the button\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonEditability: function changeButtonEditability(xpath, status) {\n    var self = this;\n\n    if (self.form && !self.form.isFloatingButtonsEnabled()) {\n      self._super(xpath, status);\n    } else {\n      self.changeFloatingButtonVisibility(xpath, status);\n    }\n  },\n\n  /**\r\n      * Helper to override the visibility and editability\r\n      * @param {} xpath \r\n      * @param {} status \r\n      * @returns {} \r\n      */\n  changeFloatingButtonVisibility: function changeFloatingButtonVisibility(xpath, visible) {\n    var self = this;\n    var form = self.form;\n    var guid = xpath.substring(3);\n    var navigation = form.getNavigation();\n    var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\n    var isVisible = bizagi.util.parseBoolean(visible) !== false;\n    var index = buttons.findIndex(function (item) {return item.id === guid;});\n\n    if (index !== -1)\n    buttons[index].visible = isVisible;\n\n    form.buttons = buttons || [];\n    navigation.setNavigationButtons(form);\n  } });","/*\r\n*   Name: BizAgi Element Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class with common stuff related to all renders and containers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.element\", {\n  ELEMENT_TYPE_CONTAINER: 1,\n  ELEMENT_TYPE_RENDER: 2,\n  ELEMENT_TYPE_COLUMN: 3 },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    // Set render factory\n    this.renderFactory = params.renderFactory;\n\n    // Set data service\n    this.dataService = params.dataService;\n\n    // Set reference to parent\n    this.parent = params.parent;\n\n    // Set l10n service\n    this.resources = bizagi.localization;\n\n    // Set the observable element\n    this.observableElement = $(\"<div />\");\n\n    // Set the dispose flag\n    this.disposed = false;\n\n    // Update data\n    this.initializeData(params.data);\n\n    // Define an object to hold the subscribe collection\n    this.subscribers = [];\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Set the internal data\n    this.properties = {};\n    if (data && data.properties) this.properties = data.properties;\n\n    // Set xpath context\n    this.properties.xpathContext = this.getXpathContext();\n\n    // Set page cache\n    this.properties.idPageCache = this.getPageCache();\n\n    //History of visual changes from actions\n    self.visualChanges = self.visualChanges || {};\n  },\n\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    // By default return parent's xpath context\n    // This method is overriden in form container which contains the real xpath context\n\n    return this.parent != undefined && typeof this.parent.getXpathContext == \"function\" ? this.parent.getXpathContext() : \"\";\n  },\n\n  /*\r\n     *   Returns the xpath of the element\r\n     */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n  /*\r\n     *   Returns the page cache for the current element\r\n     */\n  getPageCache: function getPageCache() {\n    // By default return parent's page cache\n    // This method is overriden in form container which contains the real page cache\n\n    return this.parent != undefined && typeof this.parent.getPageCache == \"function\" ? this.parent.getPageCache() : \"\";\n  },\n\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    // By default return parent's form container\n    // This method is overriden in form container which returns itself\n    if (typeof this.parent != \"undefined\")\n    return this.parent.getFormContainer();\n  },\n\n\n  /*\r\n     *   Returns the mapped resource\r\n     */\n  getResource: function getResource(key) {\n    return this.resources.getResource(key);\n  },\n\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {},\n\n  /*\r\n                                                *   Resizes the element\r\n                                                */\n  resize: function resize(size) {\n\n  },\n\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus() {\n\n    if (this.properties.required) {\n      var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n      // Check if element is visible into scroll\n      if (!bizagi.util.isScrolledIntoView(this.element, layout)) {\n        $(this.element).attr('tabindex', -1).focus();\n      }\n      if (this.element) {\n        this.element.effect('highlight', 2000);\n      }\n    }\n\n    //Check if the element has parent\n    if (this.parent && typeof this.parent.focus == 'function') {\n      this.parent.focus();\n    }\n  },\n\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.parent) return this.parent.triggerGlobalHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.trigger(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.triggerHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.bind(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Un-binds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.unbind(eventType, fn);\n    return null;\n  },\n\n  /*\r\n     *   Binds a one time event\r\n     */\n  one: function one(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.one(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {},\n\n  /*\r\n                                                        *   Get current rendering mode\r\n                                                        */\n  getMode: function getMode() {\n    if (this.parent) return this.parent.getMode();\n  },\n\n  /*\r\n     *   Get current rendering params\r\n     */\n  getParams: function getParams() {\n    if (this.parent) return this.parent.getParams();\n  },\n\n  /*\r\n     * Get current form type (ex. queryform, form)\r\n     */\n  getFormType: function getFormType() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    return form.properties.type || \"form\";\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {},\n\n  /*\r\n                              *   Returns a promise that will resolve when the element is ready to save\r\n                              */\n  isReadyToSave: function isReadyToSave() {},\n\n  /*\r\n                                              *   Get the custom handlers set for this execution\r\n                                              */\n  getCustomHandlers: function getCustomHandlers() {\n    return null;\n  },\n\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n    self.disposed = true;\n\n    var timeOutDispose = setTimeout(function () {\n      if (self.subscribers != null) {\n        // Remove all subcriptions\n        $.each(self.subscribers, function (i, item) {\n          self.unbind(item.event);\n        });\n      }\n      delete self.subscribers;\n\n      if (self.observableElement) self.observableElement.off();\n      bizagi.util.dispose(self);\n      clearTimeout(timeOutDispose);\n    }, bizagi.override.disposeTime || 50);\n  },\n\n  /*\r\n     *   Check if the current object is disposed\r\n     */\n  isDisposed: function isDisposed() {\n    return this.disposed;\n  },\n\n  /*\r\n     *   This method process the error or alert messages coming from the server, and adds them to the validation controller\r\n     */\n  processFailMessage: function processFailMessage(message) {\n    var self = this;\n    var form = self.getFormContainer();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    if (message.errorType === \"CustomMessageException\") {\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      var error = bizagi.localization.getResource(message.message);\n      form.validationController.showErrorMessage(error);\n    } else if (message.errorType === \"InvalidCaseStateException\") {\n      var params = form.getParams();\n\n      form.validationController.clearValidationMessages();\n\n      // Redirection Here\n      form.container.trigger(\"routing\", { idCase: params.idCase || bizagi.context.idCase });\n    } else {\n      var message = message || {};\n      message = typeof message == \"string\" ? JSON.parse(message) : message;\n      var type = message.type || \"error\";\n      var code = message.code || \"code\";\n      message = message.responseText || message.message || message;\n\n      // Omit processing when the ajax didn't process\n      if (type === \"not-processed\") return;\n      if (type === \"not-shown\") return;\n      if (isOfflineForm && code === \"AUTH_ERROR\") return;\n\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      if (type == \"alert\") {\n        form.validationController.showAlertMessage(message);\n      } else {\n        form.validationController.showErrorMessage(message);\n      }\n    }\n\n    return message;\n  },\n\n  /*\r\n     *   Sets a waiting overlay above the current element\r\n     */\n  startLoading: function startLoading() {/* Override in implementations */},\n\n  /*\r\n                                                                             *   Removes the waiting overlay\r\n                                                                             */\n  endLoading: function endLoading() {/* Override in implementations */},\n\n  /**\r\n                                                                          *   Prepare control to remove it from the render, that allows to\r\n                                                                          *   clean all elements of the control or to do any stuff before to remove\r\n                                                                          */\n  beforeToRefresh: function beforeToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      *   Run before that the control has been refreshed\r\n      */\n  afterToRefresh: function afterToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      * This method returns the localized version of the resource\r\n      * @param resource\r\n      * @param fallback\r\n      * @returns {string}\r\n      */\n  getResourceByKey: function getResourceByKey(resource, fallback) {\n    fallback = fallback || resource;\n\n    return bizagi.localization.getResource(resource, fallback);\n  },\n  /**\r\n      * Restore appearance using type of command\r\n      */\n  restoreAppearance: function restoreAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n\n      switch (command) {\n        case \"color\":\n          self.changeColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditability(self.visualChanges[command]);\n          break;\n        case \"visibility\":\n          self.changeVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  },\n\n  getOrientation: function getOrientation() {\n    var control = this;\n    while (control) {\n      properties = control.properties || {};\n      if (properties.orientation !== \"auto\") return properties.orientation;\n      control = control.parent;\n    }\n    return \"auto\";\n  } });","/*\r\n *   Name: BizAgi Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base container class with common stuff related to all containers\r\n */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.container\", {\n  TYPE_QUERY_FORM: \"queryForm\" },\n{\n\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Set defaults\n    var properties = self.properties;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(properties));\n\n    // Create children\n    this.children = [];\n    this.childrenHash = {};\n\n    if (data.elements) {\n      $.each(data.elements, function (i, element) {\n        if (element.render) {\n          self.createRenderElement(element);\n        } else if (element.container) {\n          self.createContainerElement(element);\n        } else if (element.form) {\n          self.createFormElement(element);\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Creates a render element\r\n     */\n  createRenderElement: function createRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n    var originalElement;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.render.properties.editable = properties.editable;\n      /*if (element.render.properties.type == \"grid\")\r\n                                                                    element.render.properties.inlineEdit = false;*/\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.render.properties.required = properties.required;\n    }\n\n    //clone originalElement to apply duplicate render properties correctly\n    if (element.render.properties.retype == \"duplicate\") {\n      originalElement = bizagi.clone(element);\n    }\n\n    var render = self.renderFactory.getRender({\n      type: element.render.properties.type,\n      data: element.render,\n      dataService: self.dataService,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Add to children\n    self.children.push(render);\n\n    // Check for duplicate\n    if (element.render.properties.retype == \"duplicate\") {\n      self.processDuplicateRender(render, originalElement);\n    }\n\n    //TODO: at this point not posible add the retype double at this point not exist input\n\n    // Register in form container\n    self.getFormContainer().registerRender(render);\n  },\n  /*\r\n     *   Creates a container element\r\n     */\n  createContainerElement: function createContainerElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.container.properties.required = properties.required;\n    }\n\n    var container = self.renderFactory.getContainer({\n      type: element.container.properties.type,\n      data: element.container,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode(),\n      isDesign: self.getMode() === \"design\" });\n\n\n    self.children.push(container);\n\n    // Register in form container\n    self.getFormContainer().registerRender(container);\n  },\n  /*\r\n     *   Creates a form element\r\n     */\n  createFormElement: function createFormElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    var form = self.renderFactory.getContainer({\n      type: element.form.properties.type || \"form\",\n      data: element.form,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode() });\n\n    self.children.push(form);\n  },\n  /*\r\n     *   Gets the current container\r\n     */\n  getElement: function getElement() {\n    var self = this;\n    return self.container;\n  },\n  /*\r\n     *   Gets a collection for all elements matching a type\r\n     */\n  getElementsByType: function getElementsByType(type, elements) {\n    elements = elements || [];\n    var self = this;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.properties.type == type) {\n        elements.push(child);\n      }\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.getElementsByType(type, elements);\n      }\n    });\n\n    return elements;\n  },\n  /*\r\n     *   Process renders with duplicate property\r\n     */\n  processDuplicateRender: function processDuplicateRender(render, element) {\n    var self = this;\n    var clonedElement = JSON.parse(JSON.encode(element.render));\n\n    // Changes properties\n    clonedElement.properties.displayName = clonedElement.properties.displayName + \" \" + self.getResource(\"render-text-duplicate-label-sufix\");\n    clonedElement.properties.xpath = clonedElement.properties.xpath + \".clone\";\n    clonedElement.properties.isClone = true;\n\n    // Creates clone\n    var clone = self.renderFactory.getRender({\n      type: clonedElement.properties.type,\n      data: clonedElement,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Associates with main render\n    render.cloneRender = clone;\n\n    // Add to collection\n    self.children.push(clone);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_CONTAINER;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  render: function render() {\n    var self = this,\n    mode = self.getMode(),\n    result;\n\n    // Render container\n    result = self.internalRender();\n\n    // Apply container defaults\n    self.applyContainerDefaults();\n\n    // Add container id\n    result.attr(\"data-container-id\", self.properties.id);\n\n    //Add container tag property\n    if (self.properties.tag) {\n      result.attr(\"data-tag\", self.properties.tag);\n    }\n\n    //Add class to the requested form, to specify if is add form, edit form, or detail form\n    if (self.params)\n    if (self.params.requestedForm)\n    result.addClass(self.params.requestedForm);\n\n    return result;\n  },\n  /*\r\n     *   Internal  rendering\r\n     */\n  internalRender: function internalRender() {\n    var self = this;\n\n    // Render the container\n    var html = self.renderContainerHtml();\n\n    // Convert html string to jquery object\n    var container = self.container = $(html);\n\n    // Post-render\n    self.postRenderContainer(container);\n\n    return self.container;\n  },\n  /*\r\n     *   Renders container html\r\n     */\n  renderContainerHtml: function renderContainerHtml() {\n    var self = this;\n    // Start rendering deferred\n    self.renderingDeferred = self.renderingDeferred || new $.Deferred();\n\n    return this.renderContainer();\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred)\n    return false;\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.container))\n    alert(\"container hasn't been rendered!\");\n\n    return this.container;\n  },\n  /*\r\n     *   Set container defaults\r\n     */\n  applyContainerDefaults: function applyContainerDefaults() {\n    var self = this,\n    properties = self.properties;\n\n    // Set customizations\n    if (properties.backgroundColor)\n    self.changeBackgroundColor(properties.backgroundColor);\n\n    // Set editability and visiblity\n    if (!properties.visible)\n    self.changeVisibility(properties.visible);\n  },\n  /*\r\n     *  Changes background color\r\n     */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var properties = self.properties;\n\n    properties.backgroundColor = color;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.changeBackgroundColor(color);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeBackgroundColor(color);\n      }\n    });\n  },\n  /*\r\n     *   Hides / Show container\r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    // Hide - show the render\n    if (properties.visible) {\n      self.container.show();\n\n    } else {\n      self.container.hide();\n    }\n  },\n  /* Changes editability */\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        $.when(child.ready()).done(function () {\n          child.changeEditability(argument);\n        });\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeEditability(argument);\n      }\n    });\n  },\n  /*\r\n     *   Replaces a <x/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceTag: function replaceTag(container, tag, replace) {\n    bizagi.util.replaceSelector(container, tag, replace);\n  },\n  /*\r\n     *   Replaces a <children/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceChildrenTag: function replaceChildrenTag(container, replace) {\n    this.replaceTag(container, \".children\", replace);\n  },\n  /*\r\n     *   Replaces a {{children}} string in the specified element\r\n     */\n  replaceChildrenHtml: function replaceChildrenHtml(html, replace) {\n    return html.replaceFirstWithoutPatterns(\"{{children}}\", replace);\n  },\n  /*\r\n     *   Template method to render the container layout, returns a string with all the builded html,\r\n     *   must be overriden in all children\r\n     */\n  renderContainer: function renderContainer() {\n  },\n  /*\r\n     *   Template method to process each jquery object\r\n     *   must be overriden in each container\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n      self.applyPlaceHolderPolyfill();\n\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  },\n\n  applyPlaceHolderPolyfill: function applyPlaceHolderPolyfill() {\n    var self = this;\n    var config = window.placeHolderConfig || {};\n    if (('placeholder' in $('<input>')[0] || 'placeHolder' in $('<input>')[0]) && !config.forceApply) {\n      // don't run the polyfill when the browser has native support\n      return;\n    }\n    Placeholders.enable();\n  },\n  /*\r\n     *   Process container children\r\n     */\n  executeChildrenPostRender: function executeChildrenPostRender(container) {\n    var self = this;\n    var childrenElements = container.children();\n\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n          child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n          child.postRenderContainer(childElement);\n        }\n      } else {\n        self.executeChildrenPostRender(childElement);\n      }\n    });\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n\n  },\n  /**\r\n      *   Renders all children html\r\n      */\n  renderChildrenHtml: function renderChildrenHtml() {\n    var self = this;\n    var temp = \"\";\n\n    $.each(self.children, function (i, child) {\n      var type = child.getElementType();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n      temp += child.renderElement();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n      temp += child.renderContainerHtml();\n      self.childrenHash[child.properties.uniqueId] = child;\n    });\n\n    return temp;\n  },\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     */\n  collectRenderValues: function collectRenderValues(renderValues) {\n    var self = this;\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.collectRenderValues(renderValues);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n          // Check if the render can be sent to the server\n          if (child.canBeSent()) {\n            child.collectData(renderValues);\n          }\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Iterate through all the renders and check if has changed\r\n     */\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    result = result || [];\n\n    if (!result.length) {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          if (result.length || child.hasChanged(result)) {\n            return false;\n          }\n        });\n      }\n    } else {\n      return result;\n    }\n  },\n\n  /*\r\n     *    Creates a json array parameters to search result\r\n     */\n  collectRenderValuesQueryForm: function collectRenderValuesQueryForm(renderValues) {\n    var self = this;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.collectRenderValuesQueryForm(renderValues);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        // Check if the render can be sent to the server\n        if (child.canBeSentQueryForm()) {\n          child.collectDataQueryForm(renderValues);\n        }\n      }\n    });\n  },\n  /*\r\n     *   Gets the first child\r\n     */\n  firstChild: function firstChild() {\n    return this.children[0];\n  },\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath, renders) {\n    var self = this;\n\n    renders = renders || [];\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.getRenders(xpath, renders);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        if (xpath == child.properties.xpath) {\n          renders.push(child);\n        }\n      }\n    });\n\n    return renders;\n  },\n  /*\r\n     *   Gets the first editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var result = null;\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        if (result == null)\n        result = render;\n      }\n    });\n\n    // if no render has been found, skip editable condition\n    if (result == null) {\n      $.each(renders, function (i, render) {\n        result = render;\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n      *   Gets all renders by xpath\r\n      */\n  getRendersByXpath: function getRendersByXpath(xpath) {\n    var self = this;\n    return self.getRenders(xpath);\n  },\n\n  /*\r\n     *   Gets a container by the id\r\n     */\n  getContainer: function getContainer(id) {\n    var self = this;\n\n    if (self.properties.id == id)\n    return this;\n\n    var result;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        var o = child.getContainer(id);\n        if (o != null) {\n          result = o;\n          return false;\n        }\n      }\n    });\n\n    return result;\n  },\n  /*\r\n     *   Validate all renders in the container\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            child.isValid(invalidElements);\n          }\n        }\n      });\n    }\n\n    return invalidElements.length == 0;\n  },\n\n  /*\r\n     *   Validate all grids in the container\r\n     */\n  hasValidGrids: function hasValidGrids(invalidElements) {\n    var self = this;\n\n    $.each(self.children, function (i, child) {\n      if (child.properties.visible) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.hasValidGrids(invalidElements);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER && typeof child.grid != \"undefined\") {\n          // Go to the render\n          child.isValid(invalidElements);\n        }\n      }\n    });\n\n    return invalidElements.length == 0;\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready to save\r\n     */\n  isReadyToSave: function isReadyToSave() {\n    var self = this;\n    var childrenPromises = $.map(self.children, function (child) {\n      return child.isReadyToSave();\n    });\n    return $.when.apply($, childrenPromises);\n  },\n  /*\r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        var result = child.getFocus();\n        if (!bizagi.util.isEmpty(result)) {\n          focus = result;\n        }\n      }\n    });\n\n    return focus;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n  },\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n\n    // Iterate through elements\n    var timeOutChildrenDispose = setTimeout(function () {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          child.dispose();\n        });\n      }\n      clearTimeout(timeOutChildrenDispose);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  /*\r\n     *   Refresh the current container\r\n     */\n  refreshContainer: function refreshContainer(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      contexttype: self.properties.contexttype || \"\",\n      idForm: form && form.properties && form.properties.id ? form.properties.id : \"\" //To fix BA56877.\n    })).done(function (data) {\n\n      if (!self.isDisposed()) {\n        self.saveChildrenVisualChanges(self);\n\n        // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n        self.unregisterChildren();\n        delete self.children;\n        delete self.childrenHash;\n\n        self.getFormContainer().removeActions();\n\n        // update editable\n        if (self.properties.editable === false) {\n          data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n        }\n\n        // Update the data\n        self.initializeData(data.container);\n\n        // Render the container again\n        var currentContainer = self.container;\n        var result = self.render();\n\n        if (self.properties.type == \"tabItem\") {\n          $(result).addClass(\"childrenActive\");\n        }\n\n        currentContainer.replaceWith(result);\n\n        // Rebind the actions\n        var actions = data.container && data.container.actions ? data.container.actions : [];\n        self.getFormContainer().refreshActions(actions);\n\n        self.triggerChildrenActions();\n        self.restoreChildrenVisualChanges(self);\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          self.restoreContainerAppearance(data.container);\n        }\n\n        // Execute personalized stuff after to refresh it\n        self.afterToRefresh();\n\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the current container\r\n      */\n  refreshDesignContainer: function refreshDesignContainer(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh(data);\n    //self.setActiveTab(data.elements);\n\n    $.extend(data.properties, {\n      editable: properties.editable,\n      contexttype: properties.contexttype || \"\",\n      idPageCache: properties.idPageCache,\n      idRender: properties.id,\n      messageValidation: properties.messageValidation,\n      uniqueId: properties.uniqueId,\n      visible: properties.visible,\n      xpath: properties.xpath,\n      mode: \"design\",\n      xpathContext: properties.xpathContext || \"\" });\n\n\n\n    if (!self.isDisposed()) {\n      // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n      self.unregisterChildren();\n      delete self.children;\n      delete self.childrenHash;\n\n      // update editable\n      if (self.properties.editable === false) {\n        data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n      }\n\n      // Update the data\n      self.initializeData(data.container);\n\n      // Render the container again\n      var currentContainer = self.container;\n      var result = self.render();\n\n      if (self.properties.type == \"tabItem\") {\n        $(result).addClass(\"childrenActive\");\n      }\n\n      currentContainer && currentContainer.replaceWith(result);\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh();\n    }\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].beforeToRefresh();\n    }\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].afterToRefresh();\n    }\n  },\n\n  /*\r\n     *   Re-execute children actions\r\n     */\n  triggerChildrenActions: function triggerChildrenActions() {\n    var self = this;\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.triggerChildrenActions();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.triggerRenderChange({ changed: false });\n      }\n    }\n  },\n\n\n  /*\r\n     * register actions container\r\n     */\n  registerActions: function registerActions(actions) {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (actions) {\n      form.actionController.buildActions(actions);\n    }\n  },\n\n  /*\r\n     * unregister children container\r\n     */\n  unregisterChildren: function unregisterChildren() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.unregisterChildren();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        form.unregisterRender(child);\n      }\n    }\n  },\n  /*\r\n     * Replace child\r\n     */\n  replaceChild: function replaceChild(element) {\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.uniqueId == element.properties.uniqueId) {\n        children.splice(i, 1);\n        children.splice(i, 0, element);\n        break;\n      }\n    }\n  },\n  /*\r\n     * Gets child\r\n     */\n  getChildById: function getChildById(id) {\n\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.id == id) {\n        return child;\n      }\n    }\n\n    return null;\n  },\n\n  /**\r\n      * Restore appearance of container\r\n      * @param data\r\n      */\n  restoreContainerAppearance: function restoreContainerAppearance(data) {\n    var self = this;\n\n    self.restoreAppearance();\n\n    (data.elements || []).forEach(function (element) {\n      if (element.container) {\n        self.restoreContainerAppearance(element.container);\n      } else if (element.render) {\n        self.restoreElementAppearance(element.render);\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore appearance of control\r\n      * @param data\r\n      */\n  restoreElementAppearance: function restoreElementAppearance(data) {\n    var self = this;\n    var element = self.getChildById(data.properties.id);\n\n    if (!!element) element.restoreAppearance();\n  },\n\n  /**\r\n      * Save visual changes of children\r\n      * @param data\r\n      */\n  saveChildrenVisualChanges: function saveChildrenVisualChanges(data) {\n    var self = this;\n    self.childrenVisualChanges = self.childrenVisualChanges || {};\n\n    (data.children || []).forEach(function (element) {\n      var type = element.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n        self.saveChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore visual changes of children\r\n      * @param data\r\n      */\n  restoreChildrenVisualChanges: function restoreChildrenVisualChanges(data) {\n    var self = this;\n\n    (data.children || []).forEach(function (element) {\n\n      var type = element.getElementType();\n      var visualChanges = self.childrenVisualChanges && self.childrenVisualChanges[element.properties.id] || {};\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        element.visualChanges = visualChanges;\n        self.restoreChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        element.visualChanges = visualChanges;\n      }\n\n    });\n\n    delete self.childrenVisualChanges;\n  } });","/*\r\n*   Name: BizAgi Smartphone Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to smartphone devices\r\n*/\n\n// Extends itself\nbizagi.rendering.container.extend(\"bizagi.rendering.container\", {}, {\n  getMenu: function getMenu() {\n    var params = this.getFormContainer().getParams();\n    return params.menu;\n  },\n\n  /*\r\n      *   Starts waiting signal for async stuff\r\n      */\n  startLoading: function startLoading() {\n    var self = this;\n    var element = self.container;\n    if (element) {\n      element.startLoading({ delay: 250, overlay: true });\n    }\n  },\n\n  /*\r\n      *   Ends waiting for async stuff\r\n      */\n  endLoading: function endLoading() {\n    var self = this;\n\n    var element = self.container;\n    if (element) {\n      element.endLoading();\n    }\n  } });","/*\r\n *   Name: Bizagi Render Base Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a base render class with common stuff related to all renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.render.base\", {}, {\n\n  /**\r\n                                                      * Method to process the render the layout\r\n                                                      * @param {boolean} isLabelFormat\r\n                                                      * @param {string} format\r\n                                                      */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var properties = this.properties;\n\n    if (typeof isLabelFormat !== \"boolean\") {\n      console.warm(\"error calling processLayout, 'isLabelFormat' is not boolean\");\n      return;\n    }\n\n    if (isLabelFormat) {\n      this.processLabelLayout(format);\n    } else {\n      this.processControlLayout(format);\n\n      // Set required and visiblity\n      properties.required = typeof properties.required !== \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n      var visible = typeof properties.visible !== \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n      if (properties.required) {\n        this.changeRequired(properties.required);\n      }\n\n      if (!visible) {\n        this.changeVisibility(visible);\n      }\n    }\n  },\n\n  /**\r\n      * Method to process the label in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processLabelLayout: function processLabelLayout(format) {\n    var $label = this.getLabel();\n    if ($label == null) return;\n\n    // Set customizations\n    format = format || {};\n    if (typeof format.bold === \"undefined\") {\n      format.bold = true; // Default value\n    }\n\n    this.changeBackgroundColor(format.background).\n    changeFontColor($label, format.color).\n    changeFontBold($label, format.bold).\n    changeFontSize($label, format.size).\n    changeFontItalic($label, format.italic).\n    changeTextDecoration($label, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Method to process the control in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processControlLayout: function processControlLayout(format) {\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    // Set customizations\n    format = format || {};\n\n    this.changeFontColor($elements, format.color).\n    changeFontBold($elements, format.bold).\n    changeFontItalic($elements, format.italic).\n    changeFontSize($elements, format.size).\n    changeTextDecoration($elements, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $label = this.getLabel();\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    return this.\n    changeFontColor($label, color).\n    changeFontColor($elements, color);\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} $element\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeFontColor: function changeFontColor($element, color) {\n    if ($element === undefined) return this;\n    if (color === undefined) return this;\n\n    var style = color !== \"none\" ? color : \"\";\n    $element.css(\"color\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font size property\r\n      * @param {} $element\r\n      * @param {} size\r\n      * @returns {}\r\n      */\n  changeFontSize: function changeFontSize($element, size) {\n    if (size === undefined) return this;\n    if ($element === undefined) return this;\n\n    if (size !== \"0\") {\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      $element.css(\"font-size\", newFontSize);\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font italic style\r\n      * @param {} $element\r\n      * @param {} italic\r\n      * @returns {}\r\n      */\n  changeFontItalic: function changeFontItalic($element, italic) {\n    var style = bizagi.util.parseBoolean(italic) ? \"italic\" : \"normal\";\n\n    $element.css(\"font-style\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font weight\r\n      * @param {} $label\r\n      * @param {} bold\r\n      * @returns {}\r\n      */\n  changeFontBold: function changeFontBold($label, bold) {\n    var style = bizagi.util.parseBoolean(bold) ? \"bold\" : \"normal\";\n\n    $label.css(\"font-weight\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.css(\"background-color\", color);\n    } else {\n      this.element.css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render cell background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    return this.getCellBackgroundFunction(this.properties.editable.toString(), this.properties.type)(color);\n  },\n\n  getCellBackgroundFunction: function getCellBackgroundFunction(editable, type) {\n    var options = {\n      'true': { //editable\n        'columnDate': this.changeInputBackgroundColor.bind(this) },\n\n      'false': { //no editable\n        'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n      },\n      'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n    };\n\n    return options[editable][type] || options['default'];\n  },\n\n  changeInputBackgroundColor: function changeInputBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", color);\n    } else {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel() {\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * \r\n      */\n  getRTLAlign: function getRTLAlign(align) {\n    if (typeof align == \"undefined\" || align == \"\") {\n      return \"default\";\n    }\n    return align;\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultLabelAlign: function getDefaultLabelAlign() {\n    return \"default\";\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultValueAlign: function getDefaultValueAlign() {\n    return \"default\";\n  } });","/**\r\n *   Name: BizAgi Smartphone Render Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the render class to adjust to smartphone devices\r\n */\n\nbizagi.rendering.render.extend(\"bizagi.rendering.render\", {}, {\n  getMenu: function getMenu() {\n    var params = this.getFormContainer().getParams();\n    return params.menu;\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    bizagi.log(\" post render smartphone  edit\", this, \"error\");\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    self.configureHelpText();\n\n    self.checkListGroup = $(\".ui-bizagi-render-checkList .ui-bizagi-render-checkList-item\", control);\n\n    if (typeof properties.textFormat !== \"undefined\" && typeof properties.textFormat.background !== \"undefined\") {\n      self.changeBackgroundColor(properties.textFormat.background);\n    }\n\n    if (typeof properties.textFormat !== \"undefined\" && typeof properties.textFormat.color !== \"undefined\") {\n      self.getControl().parent().css(\"color\", properties.textFormat.color);\n      self.element.find(\"input\").css(\"color\", properties.textFormat.color);\n\n      // Not apply for radio control\n      if (properties.type !== \"radio\") {\n        self.element.find(\".ui-bizagi-render-control > span\").css(\"color\", properties.textFormat.color);\n      }\n    }\n\n    if (typeof properties.valueFormat !== \"undefined\" && typeof properties.valueFormat.color !== \"undefined\") {\n      self.element.find(\".ui-bizagi-render-control > span\").css(\"color\", properties.valueFormat.color);\n\n      // Not apply for radio control | properties.valueFormat.color\n      if (properties.type !== \"radio\") {\n        self.element.find(\"input\").css(\"color\", properties.valueFormat.color);\n      }\n    }\n\n    // Not apply renderEdition\n    if ($(self.element).hasClass(\"bz-command-edit-inline\") || $(self.element).hasClass(\"bz-command-not-edit\") || $(self.element).hasClass(\"bz-rn-non-editable\")) {\n      return true;\n    }\n\n    var contextEdition = self.element;\n\n    if (self.properties.type === \"image\" || self.properties.type === \"columnImage\") {\n      /**\r\n                                                                                      * If this is an image, we should show a preview of it\r\n                                                                                      * but only when click right into the img tag\r\n                                                                                      */\n      contextEdition = $(self.element).find(\"img\");\n      if (contextEdition.length === 0) {\n        /**\r\n                                         * There is no image so, there is nothing to show/do\r\n                                         */\n        return;\n      }\n    }\n\n    $(contextEdition).bind(\"click\", function () {\n      $.when(self.renderEdition()).\n      then(function () {\n\n        self.endLoading();\n        self.postRenderEdit();\n\n        if (!bizagi.util.isEmpty(self.value)) {\n          if (self.value !== false) {\n            // Encode html to avoid html tags\n            self.setDisplayValueEdit(self.value);\n          } else {\n            // Special case when the value is false for boolean renders\n            self.setDisplayValueEdit(self.value);\n          }\n        }\n      });\n    });\n  },\n\n  postRenderEdit: function postRenderEdit() {\n\n    var self = this;\n    var context = self.getFormContainer().container;\n    var properties = self.properties;\n    var actualscroll = $(\"body\").scrollTop();\n\n    if (self.getParams() && self.getParams().postRenderEdit) {\n      return self.getParams().postRenderEdit(self);\n    }\n\n    $(\"#container-items-edit\", context).find(\".ui-bizagi-container-inputs\").remove();\n    var fordwardActionCommon = function fordwardActionCommon() {\n      $(\".ui-bizagi-container-children-form\", context).hide();\n      $(\"#container-items-edit\", context).empty();\n      $(\"#container-items-edit\", context).show();\n      $(\".ui-bizagi-button-container\", context).hide();\n    };\n\n    fordwardActionCommon();\n    $(\"#container-items-edit\", context).append($.kendoTmpls(self.renderFactory.getTemplate(\"editRender\"), {\n      \"label\": properties.displayName }));\n\n\n    $(\"#container-items-edit\", context).find(\".ui-bizagi-container-inputs\").html(self.inputEdition);\n\n    var contexttmp = self.contextEdit = $(context).find(\"#container-items-edit\");\n    var backActionCommon = function backActionCommon() {\n      $(\".ui-bizagi-container-children-form\", context).show();\n      $(\"#container-items-edit\", context).hide();\n      $(\".ui-bizagi-button-container\", context).show();\n\n      setTimeout(function () {\n        window.scrollTo(0, actualscroll);\n      }, 10);\n    };\n\n    $(\".ui-bizagi-container-button-edit .ui-bizagi-save-btn\", contexttmp).bind(\"click\", function () {\n      backActionCommon();\n      $.when(self.actionSave()).\n      done(function () {\n        if (self.properties.submitOnChange) {\n          self.submitOnChange();\n        }\n      });\n    });\n\n    $(\".ui-bizagi-container-button-edit .ui-bizagi-cancel-btn\", contexttmp).bind(\"click\", function () {\n      backActionCommon();\n    });\n  },\n\n  /*\r\n      *   Template method to get the label element\r\n      */\n  getLabel: function getLabel() {\n    var self = this;\n    if (!self.label) {\n      var label = $(\".ui-bizagi-label\", self.element || self.observableElement);\n      if (label.length > 0) {\n        self.label = label;\n      }\n      return label;\n    }\n    return self.label;\n  },\n\n  getContainerRender: function getContainerRender() {\n    var self = this;\n    return $(self.element);\n  },\n\n  getArrowContainer: function getArrowContainer() {\n    var self = this;\n\n    if (!self.arrow) {\n      self.arrow = $(\".bz-container-render-cell1 >.ui-bizagi-render-edition-arrow \", self.element || self.observableElement);\n    }\n\n    return self.arrow;\n  },\n\n  /*\r\n      *   Return the right align class\r\n      */\n  getAlignClass: function getAlignClass(alignType) {\n    return alignType;\n  },\n\n  getArrow: function getArrow() {\n    var self = this;\n\n    self.arrow = $(\".bz-container-render-cell1 >.ui-bizagi-render-edition-arrow > .bz-cm-icon  \", self.element || self.observableElement);\n    return self.arrow;\n\n  },\n  /*\r\n      *   Template method to get the control element\r\n      */\n  getControl: function getControl() {\n    var self = this;\n\n    if (!self.control || self.control.length === 0) {\n      self.control = $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n\n    return self.control;\n  },\n\n\n  /*\r\n      *   Template method to get the control element\r\n      */\n  getContainerHelpText: function getContainerHelpText() {\n    var self = this;\n\n    if (!self.containerHelpText) {\n      self.containerHelpText = $(\".bz-container-rn-helptext\", self.element || self.observableElement);\n    }\n\n    if (!self.containerHelpText || self.containerHelpText.length === 0) {\n      return null;\n    }\n\n    return self.containerHelpText;\n  },\n\n  /*\r\n      *   Template method to get the control filler element\r\n      */\n  getControlFiller: function getControlFiller() {\n    var self = this;\n    if (!self.controlFiller) {\n      self.controlFiller = $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n\n    return self.controlFiller;\n  },\n\n  getContainerMessage: function getContainerMessage() {\n    var self = this;\n    if (!self.containerMessage) {\n      self.containerMessage = $(\".bz-rn-messages\", self.element || self.observableElement);\n    }\n\n    return self.containerMessage;\n  },\n\n  getContextEdit: function getContextEdit() {\n    return this.contextEdit;\n  },\n\n  /*\r\n      * Customizes render display type with custom css classes\r\n      *   - Type: normal, value, invert\r\n      */\n  changeDisplayOption: function changeDisplayOption(dspType) {\n    var self = this;\n    var properties = self.properties;\n    var displayType = dspType || properties.displayType || \"normal\";\n    var orientation = properties.orientation || \"\";\n    var control = self.getControl();\n\n    var excludeControls = [\"image\", \"columnImage\", \"activityCheckList\", \"userfield\", \"date\", \"columnDate\", \"searchDate\", \"list\", \"columnList\", \"link\", \"columnLink\", \"fileprint\", \"searchList\", \"geolocation\", \"money\", \"multiSelect\"];\n\n    // Enable new mobile grid\n    if (bizagi.util.isMobileGridEnabled()) {\n      excludeControls.push(\"columnUpload\", \"columnImage\");\n    }\n\n    if (!$(self.element).hasClass(\"bz-command-edit-inline\") && excludeControls.indexOf(properties.type) !== -1) {\n      $(self.element).addClass(\"bz-command-edit-inline\");\n    }\n\n    if (displayType == \"value\") {\n      if (control) {\n        control.addClass(\"bz-rn-display-value\");\n      }\n\n      self.getLabel().hide();\n    }\n\n    // o rtl //ltr\n    if (displayType === \"reversed\" || orientation === \"rtl\") {\n\n      control.addClass(\"bz-control-reversed\");\n      control.find(\"input\").addClass(\"bz-render-reversed\");\n\n      if (!control.children().hasClass(\"bz-render-reversed\")) {\n        control.children().addClass(\"bz-render-reversed\");\n      }\n\n      self.getLabel().addClass(\"bz-label-reversed\");\n    }\n\n    if (displayType == \"label\" && properties.type !== \"layoutLabel\") {\n      control.hide();\n      self.getLabel().show();\n    }\n  },\n\n  /*\r\n      *   Customizes render label align\r\n      */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n  },\n\n  /*\r\n      *   Customizes render value align\r\n      */\n  changeValueAlign: function changeValueAlign(alignType) {\n  },\n\n  /*\r\n      *   Customizes render label and value width\r\n      */\n  customizeRenderWidth: function customizeRenderWidth() {\n\n  },\n\n  /*\r\n      *   Sends all the info to the server then refreshes the form\r\n      *   Returns a deferred\r\n      */\n  submitOnChange: function submitOnChange(data, bRefreshForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    bizagi.util.smartphone.startLoading();\n\n    $.when(self.isReadyToSave()).\n    done(function () {\n      $.when(self.internalSubmitOnChange(data, bRefreshForm)).\n      done(function () {\n        defer.resolve();\n      }).fail(function () {\n        defer.reject();\n      }).always(function () {\n        bizagi.util.smartphone.stopLoading();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n      *   Adds a validation message to the render\r\n      */\n  setValidationMessage: function setValidationMessage(message) {\n    var self = this;\n    self._super(message);\n\n    if (message && message.length > 0) {\n      message = message.replace(/<\\w+>([^<]*)<\\/\\w+>/g, \"$1\");\n      var element;\n      self.getContainerMessage().html(element = $(\"<span class=\\\"bz-rn-err\\\"></span>\"));\n      element.attr(\"data-error\", message);\n    } else {\n      self.getContainerMessage().html(\"\");\n    }\n  },\n\n  /*\r\n      *   Defines virtual method to extend in each render\r\n      */\n  renderSingle: function renderSingle() {\n  },\n\n  /*\r\n      *   Defines virtual method to extend in each render\r\n      */\n  renderEdition: function renderEdition() {\n  },\n\n  /*\r\n      *   Override internal rendering in order to apply new smartphone layout\r\n      */\n  internalPostRender: function internalPostRender() {\n    var self = this;\n    // Treat result as a promise, so if the render control returns a promise we can wait until it is done\n    // If not, it will be resolved automatically\n    $.when(self.renderSingle()).\n    then(function () {\n\n      // Remove loading status\n      self.endLoading();\n      self.changeDisplayOption();\n\n      // Post-render method\n      self.postRenderSingle();\n\n      // Resolve rendering deferred\n      if (self.renderingDeferred) {\n        self.renderingDeferred.resolve();\n      }\n\n      // Set the initial value\n      if (!bizagi.util.isEmpty(self.value)) {\n        if (self.value !== false) {\n          // Encode html to avoid html tags\n          self.setDisplayValue(self.value);\n        } else {\n          // Special case when the value is false for boolean renders\n          self.setDisplayValue(self.value);\n        }\n      }\n\n      self.processLayout(isLabelFormat, self.properties.textFormat || {});\n      self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n    });\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    // Set internal value\n    self.setValue(value, false);\n\n    // Render as simple value\n    var displayValue = self.getDisplayValue(value);\n\n    if (typeof displayValue == \"string\") {\n      control.html(displayValue);\n    }\n  },\n\n  setPlaceHolder: function setPlaceHolder() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (properties.editable) {\n      control.find(\".bz-rn-text\").attr(\"placeholder\", properties.required ? \"Required\" : \"Optional\");\n    }\n  },\n\n  /* Changes the render editability*/\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var editable = bizagi.util.parseBoolean(argument);\n    var renderedElement;\n\n    self._super(argument);\n\n    renderedElement = self.getRenderedElement();\n    if (renderedElement) {\n      renderedElement.toggleClass(\"bz-rn-non-editable\", !editable).toggleClass(\"bz-rn-read-only\", !editable);\n    }\n  },\n\n  /*\r\n      *   Sets the value in the rendered controlEdit\r\n      */\n  setDisplayValueEdit: function setDisplayValueEdit(value) {\n  },\n\n  actionSave: function actionSave() {\n    var self = this;\n    self.setValue(self.inputEdition.val(), false);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel() {\n    var self = this;\n    if (self.properties.displayType == \"value\") {\n      self.changeRequiredLabelByVal();\n      return;\n    }\n\n    var properties = self.properties;\n\n    if (properties.required) {\n      if (!self.checkRequired([])) {\n        $(\"div.bz-rn-required\", self.getLabel()).show();\n\n      } else {\n        $(\"div.bz-rn-required\", self.getLabel()).hide();\n      }\n    }\n  },\n\n\n  /**\r\n      * Shows or hides the required icon if the control is configured to show only the value.\r\n      */\n  changeRequiredLabelByVal: function changeRequiredLabelByVal() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.required) {\n\n      if (!self.checkRequired([])) {\n        $(\"div.bz-rn-required\", self.getControl()).show();\n\n      } else {\n        $(\"div.bz-rn-required\", self.getControl()).hide();\n      }\n    }\n  },\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    if (self.properties.displayType == \"value\") {\n      self.changeRequiredControl(argument);\n      return;\n    }\n    var labelElement = $(\"label\", self.getLabel());\n    //Remove the required div from the dom in order to have only one any time\n    self.getLabel().find(\".bz-rn-required\").remove();\n    var properties = self.properties;\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument)) {\n      labelElement.text((properties.displayName || \"\") + \" \");\n\n      if (!self.hasValue()) {\n        labelElement.before(\"<div class='bz-rn-required'></div>\");\n      } else {\n        labelElement.before(\"<div class='bz-rn-required' style='display: none'></div>\");\n      }\n\n      self.setPlaceHolder();\n    } else {\n      labelElement.text(properties.displayName || \"\"); //+ ' :'\n    }\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n\n  changeRequiredControl: function changeRequiredControl(argument) {\n    var self = this;\n    //Remove the required div from the dom in order to have only one any time\n    var control = self.getControl();\n    control.find(\".bz-rn-required\").remove();\n    var properties = self.properties;\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument)) {\n      if (!self.hasValue()) {\n        control.prepend(\"<div class='bz-rn-required'></div>\");\n      } else {\n        control.prepend(\"<div class='bz-rn-required' style='display: none'></div>\");\n      }\n\n      self.setPlaceHolder();\n    }\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n\n  configureLabel: function configureLabel() {\n    return this.properties.displayName;\n  },\n\n  configureHelpText: function configureHelpText() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties && properties.helpText && properties.helpText !== \"\") {\n      var containerHelp = self.getContainerHelpText();\n\n      if (containerHelp) {\n        $(containerHelp).helpText({ helpText: properties.helpText, dir: properties.orientation });\n      }\n    }\n  },\n\n  /*\r\n      *   Starts waiting signal for async stuff\r\n      */\n  startLoading: function startLoading() {\n  },\n\n  /**\r\n      * in mobiles, don't apply styles to icon's elements\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    context = $(\"*:not(.bz-mo-icon):not(.bz-rn-container-control-icon):not(.bz-rn-upload-show-menu):not(.bz-rn-yesno)\", $(context));\n    return context;\n  },\n\n  /**\r\n      *   Ends waiting for async stuff\r\n      */\n  endLoading: function endLoading() {\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    if (color && color !== \"none\") {\n      self.getControl().closest(\".ui-bizagi-render\").css(\"background-color\", color);\n    }\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"input\").filter(function (index, ele) {\n      return ele.type !== \"file\" && ele.type !== \"radio\" && ele.type !== \"checkbox\";\n    });\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else {\n      self.setDisplayValue(\"\");\n    }\n  } });","/**\r\n * Render a new type of form called template\r\n *\r\n * @author Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.formTemplate\", {\n\n  /**\r\n                                                   *   Constructor\r\n                                                   */\n  init: function init(params) {\n    this._super(params);\n    if (params.paramsRender && params.paramsRender.contextEvent) {\n      self.contextEvent = params.paramsRender.contextEvent;\n    }\n  },\n\n  /**\r\n      * Process controls on template\r\n      * @param template\r\n      * @param controls\r\n      * @return {*}\r\n      */\n  processTemplate: function processTemplate(template, controls) {\n    var regexControl = /\\{\\{([\\w:]*)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\})\\}\\}/g;\n    var regexRepeater = /\\{\\{(((repeater)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\}))|([\\/repeater]+:item)|(\\/repeater)|(repeater)|(separator))\\}\\}/g;\n\n    // Remove all repeaters key words\n    var processedTemplate = template.replace(regexRepeater, \"\");\n\n    // replace controls\n    processedTemplate = processedTemplate.replace(regexControl, function (match, g1, g2, offset, string) {\n      var parameters = JSON.parse(g2);\n\n      return controls[parameters.id] || '';\n    });\n\n    processedTemplate = processedTemplate.replace(/{{([\\w:]*)\\s*}}/g, function () {\n      return '';\n    });\n\n\n    return processedTemplate;\n  },\n\n  /**\r\n      * Render layout container\r\n      * @return {*}\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var layoutCollection = self.getRenderByType(\"layout\");\n    var layout = layoutCollection.length > 0 ? layoutCollection[0] : {};\n    var template = typeof layout.getTemplate == \"function\" ? layout.getTemplate() : \"\";\n    var css = typeof layout.getCss == \"function\" ? layout.getCss() : \"\";\n    var mode = self.getMode();\n    var layoutGuid = self.properties.layoutguid || Math.guid();\n\n    var controls = {};\n\n    /**\r\n                        * Render all elements within first layout container\r\n                        */\n    if (layout.children) {\n      $.each(layout.children, function (i, child) {\n        // ignore layoutPlaceholder control in execution\n        if (!(mode == 'execution' && child.properties.type == 'layoutPlaceholder')) {\n\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            controls[child.properties.id] = child.renderElement();\n          }\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            controls[child.properties.id] = child.renderContainerHtml();\n          }\n          self.childrenHash[child.properties.uniqueId] = child;\n        }\n      });\n    }\n\n    // Load css\n    bizagi.util.loadStyle(css, layoutGuid);\n\n    return self.processTemplate(template, controls);\n  },\n\n  /**\r\n      * Get the context in which loads the formTemplate\r\n      *\r\n      */\n  getContextEvent: function getContextEvent() {\n    return self.contextEvent;\n  } });","$.Class.extend(\"bizagi.rendering.layout\", {}, {\n\n  /**\r\n                                                 * Get html template\r\n                                                 * @return {*}\r\n                                                 */\n  getTemplate: function getTemplate() {\n    var self = this;\n    var mode = self.getMode();\n    var html = self.properties.html || \"\";\n\n    // Add a container, this is important in design to calculate the scroll \n    if (mode == 'design' && html) {\n      html = \"<div class='bz-design-template'>\" + html + \"</div>\";\n    }\n\n    return bizagi.util.stripslashes(html);\n  },\n\n  /**\r\n      * Get string css of layout container\r\n      * @return {*}\r\n      */\n  getCss: function getCss() {\n    var self = this;\n    var css = self.properties.css || \"\";\n\n    var mode = self.getMode();\n    if (mode == \"design\") {\n      css = css && css.desktop;\n    }\n\n    return bizagi.util.stripslashes(css);\n  },\n\n\n  /*\r\n      *   Template method to process each jquery object\r\n      *   must be overriden in each container\r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  } });","/*\r\n*   Name: BizAgi Accordion Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordion\", {}, {\n\n  /*\r\n                                                   *   Constructor\r\n                                                   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Enumerate the children appending a property\n    $.each(self.children, function (i, child) {\n      child.properties.ordinal = i;\n    });\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"accordion\");\n\n    // Render the accordion\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: BizAgi Accordion Item Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion item class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordionItem\", {}, {\n\n  /*\r\n                                                       *   Render the container layout\r\n                                                       */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"accordionItem\");\n\n    // Render the accordionItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      ordinal: properties.ordinal,\n      displayName: properties.displayName,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Fires when the accordionItem is selected \r\n     */\n  activate: function activate() {\n    var self = this;\n    self.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  } });","/*\r\n*   Name: Bizagi Render CollectionNavigator\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for collection navigator renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.collectionnavigator\", {}, {\n\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    self._super(params);\n\n    var properties = self.properties;\n    properties.allowAdd = typeof properties.allowAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.allowAdd) : true;\n    properties.withAddForm = properties.withAddForm && properties.allowAdd;\n    properties.allowEdit = typeof properties.allowEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.allowEdit) : true;\n    properties.withEditForm = properties.withEditForm && properties.allowEdit;\n    properties.allowDetail = typeof properties.allowDetail != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.inlineAdd = typeof properties.inlineAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineAdd) : true;\n    properties.inlineAdd = properties.inlineAdd && properties.allowAdd;\n    properties.inlineEdit = typeof properties.inlineEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineEdit) : true;\n    properties.inlineEdit = properties.inlineEdit && properties.allowEdit;\n    properties.allowDelete = typeof properties.allowDelete != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n\n    self.orientation = self.properties.orientation || \"ltr\",\n    self.data = self.properties.data;\n    self.keys = self.data ? self.getKeys(self.data.rows) : [];\n    self.pointer = 0;\n    self.totalRows = 0;\n    self.inlineAddRecords = [];\n\n    if (self.data) {\n      self.totalRows = self.data.rows.length;\n    }\n  },\n  /*\r\n     * Normalize keys\r\n     */\n  getKeys: function getKeys(rows) {\n    rows = rows || [];\n    var keys = [];\n\n    for (var i = 0, l = rows.length; i < l; i++) {\n      var row = rows[i];\n      keys.push(row[0]);\n    }\n    return keys;\n  },\n\n  /*\r\n     *   Render the control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var templateItem = \"collectionnavigator\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var mode = self.getMode();\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId,\n      displayName: properties.displayName ? properties.displayName : \"\",\n      id: properties.id,\n      guid: properties.guid,\n      showPreview: self.showPreview(),\n      mode: mode,\n      orientation: self.getFormContainer().properties.orientation });\n\n\n    html = self.drawControls(html);\n\n    return html;\n  },\n\n  /*\r\n     * Render version readonly of control\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /*\r\n     * Draw navigation controls\r\n     */\n  drawControls: function drawControls(html) {\n\n  },\n\n  /*\r\n     *  render several actions in the navigation palete\r\n     *  ex. save, cancel \r\n     */\n  drawActions: function drawActions(controls) {\n\n  },\n\n  /*\r\n     * Render navigation controls (next, previous, last, first. etc )\r\n     */\n  drawControl: function drawControl(controls) {\n\n  },\n\n  /*\r\n     * Draw forms options (add form, edit form, navigation form)\r\n     */\n  drawForms: function drawForms(controls) {\n\n  },\n\n  /*\r\n     * Draw a preview views, it will be show when the collection hasn't records\r\n     */\n  drawPreview: function drawPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var templateItem = mode === \"execution\" ? \"collectionnavigator-execution\" : \"collectionnavigator-preview\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var html = $.tmpl(template);\n\n    self.canvas.append(html);\n\n  },\n\n  /*\r\n     * Returns true if the collection has data\r\n     */\n  hasData: function hasData() {\n    return this.getTotalRows() > 0;\n  },\n\n  /*\r\n     * Returns the key of current row\r\n     */\n  getRow: function getRow() {\n    return this.keys[this.pointer];\n  },\n\n  /*\r\n     * Returns the key of next row\r\n     */\n  getNextRow: function getNextRow() {\n    var self = this;\n\n    if (self.getTotalRows() > self.pointer + 1)\n    self.pointer += 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of previous row\r\n     */\n  getPreviousRow: function getPreviousRow() {\n    var self = this;\n\n    if (self.pointer > 0)\n    self.pointer -= 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of first row\r\n     */\n  getFirstRow: function getFirstRow() {\n    var self = this;\n\n    self.pointer = 0;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of last row\r\n     */\n  getLastRow: function getLastRow() {\n    var self = this;\n\n    self.pointer = self.keys.length - 1;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the total numbers of rows in collection\r\n     */\n  getTotalRows: function getTotalRows() {\n    return this.keys.length;\n  },\n\n  getIndexes: function getIndexes() {\n    return this.properties.data.rows;\n  },\n\n  /*\r\n     * Sets the pointer to a specific position\r\n     */\n  setPointer: function setPointer(index) {\n    this.pointer = index - 1;\n  },\n\n  /*\r\n     * Returns true is there is a inline row pending to save\r\n     */\n  isTherePendingInlineRow: function isTherePendingInlineRow() {\n    return this.inlineAddRecords.length > 0;\n  },\n\n  /*\r\n     * Adds new row to collection\r\n     */\n  addKey: function addKey(newId) {\n    this.keys.push(newId);\n  },\n\n  /*\r\n     * Removes row in collection\r\n     */\n  removeKey: function removeKey() {\n    var self = this;\n    var index = self.pointer;\n\n    if (index >= 0) {\n      self.keys.splice(index, 1);\n\n      var totalRows = self.getTotalRows();\n      if (totalRows > 0 && index >= totalRows) {\n        self.setPointer(totalRows);\n      }\n    }\n  },\n\n  /*\r\n     * Returns true if the control should show the preview view\r\n     * ex. if the collection is empty \r\n     */\n  showPreview: function showPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    if (mode == \"execution\") {\n      return !self.hasData();\n    } else {\n      return !bizagi.util.parseBoolean(properties.navigationform);\n    }\n  },\n\n  /*\r\n     * Returns the parameters needed for the request\r\n     */\n  getParameters: function getParameters(params) {\n    var self = this;\n\n    var parameters = {};\n    var properties = self.properties;\n    var recordXpath = properties.xpath + \"[id=\" + params.id + \"]\";\n\n    parameters.idRender = properties.id;\n    parameters.recordXPath = recordXpath;\n    parameters.xpathContext = properties.xpathContext;\n    parameters.idPageCache = properties.idPageCache;\n    parameters.requestedForm = params.requestedForm;\n    parameters.contextType = properties.contextType || properties.contexttype;\n    parameters.url = params.url;\n    parameters.editable = params.editable;\n    orientation: properties.orientation || \"ltr\";\n\n\n    return parameters;\n  },\n\n  /*\r\n     *   Submits a collection navigator add record request\r\n     *   Returns a deferred when done, the server returns an id for the new record\r\n     */\n  submitAddRequest: function submitAddRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n\n  /*\r\n     *   Submits a edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype || '',\n      orientation: properties.orientation || \"ltr\" });\n\n  },\n\n  /*\r\n     *   Submits a collection delete record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n\n  /*\r\n     *   Submits a collection navigator edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + \"[id=\" + id + \"]\" : properties.xpath + \"[id=\" + id + \"]\";\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      if (!bizagi.util.isEmpty(data)) {\n        data.idPageCache = data.idPageCache || self.form.getPageCache();\n        self.dataService.saveGridRecord({\n          url: properties.saveUrl,\n          idRender: properties.id,\n          xpath: properties.xpath,\n          xpathContext: xpathContext,\n          contexttype: properties.contextType || properties.contexttype || \"\",\n          submitData: data }).\n        done(function (response) {\n          defer.resolve(response);\n        }).fail(function (dataFail) {\n          var form = self.getFormContainer();\n          var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n          //Convert String to object\n          if (typeof message == \"string\") {\n            try {\n              message = JSON.parse(message).message;\n            } catch (e) {\n              message = message.match(/\"message\":(.*)\",/)[0];\n              message = message.substr(11, message.length - 13);\n            }\n\n          } else if (!message.message) {\n            message = dataFail;\n          }\n          form.validateForm();\n          form.clearValidationMessages();\n          form.addValidationMessage(message);\n        });\n      } else {\n        defer.resolve();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Submits a collection navigator rollback request\r\n     *   Returns a deferred when done\r\n     */\n  submitRollbackRequest: function submitRollbackRequest(error) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: error.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache });\n\n\n\n    return self.dataService.getData(params);\n  },\n\n  isValid: function isValid(invalidElements) {\n    var form = this.form;\n\n    if (typeof form !== \"undefined\") {\n      (form.children || []).forEach(function (child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            if (!child.isValid(invalidElements)) {\n              var content = invalidElements[invalidElements.length - 1];\n              invalidElements[invalidElements.length - 1] = $.extend(content, {\n                id: child.properties.id });\n\n            }\n          }\n        }\n      });\n    }\n\n    return invalidElements.length === 0;\n  },\n\n  validateControls: function validateControls(invalidElements) {\n    if (!this.form) return false;\n    return this.form.validationController.performValidations(invalidElements);\n  } });","/*\r\n*   Name: Bizagi Group Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a group container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.group\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property \n    properties.cssclass = properties.cssclass || \"cssClassContainer\";\n\n    properties.collapse = typeof properties.collapse != \"undefined\" && bizagi.util.parseBoolean(properties.collapse) ? true : false;\n  },\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"group\");\n\n    // Define icons\n    self.expandedIcon = self.getExpandedIcon();\n    self.collapsedIcon = self.getCollapsedIcon();\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      expandedClassIcon: self.expandedIcon,\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      collapse: properties.collapse,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      cssclass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Returns the expanded icon\r\n     */\n  getExpandedIcon: function getExpandedIcon() {},\n\n  /*\r\n                                                  *   Returns the collapsed icon\r\n                                                  */\n  getCollapsedIcon: function getCollapsedIcon() {},\n\n  /* \r\n                                                    *   Expands or collapse the container \r\n                                                    */\n  toogleContainer: function toogleContainer(argument, bImmediate) {} });","/*\r\n*   Name: BizAgi Horizontal Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a tab item class for all devices\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.horizontal\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"horizontal\");\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.panel\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n\n    if (properties.type == \"nestedForm\") {\n      var formContainer = self.getFormContainer();\n      formContainer.rendersById[properties.idForm] = self;\n    }\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"panel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      loading: properties.loading,\n      message: properties.message,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssClass: properties.cssclass });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set height\n    if (properties.height) {\n      panel.height(properties.height);\n    }\n\n    // Call base\n    self._super(panel);\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.contentPanel\", {}, {\n\n  /*\r\n                                                      *   Constructor\r\n                                                      */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"contentPanel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      mode: self.getMode(),\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      cssClass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    // Call base\n    this._super(panel);\n  } });","/**\r\n *   Name: Bizagi Panel Container Class\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will define a panel container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.searchForm\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"searchForm\");\n\n    if (properties.contexttype !== \"entity\" && self.parent) {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n\n    // Render result\n    html = html.replaceFirstWithoutPatterns(\"{{result}}\", self.renderResult());\n\n    return html;\n  },\n\n  /*\r\n     *   Perform a search and render the results\r\n     */\n  performSearch: function performSearch(searchParams) {\n    var properties = this.properties;\n\n    // Set parameter to search\n    properties.searchParams = searchParams;\n\n    // Submit the search to the server\n    this.submitSearch();\n  },\n\n  /*\r\n     *   Submits the query to the server\r\n     */\n  submitSearch: function submitSearch() {\n    // Makes the results to update its contents\n    this.refreshResults();\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    return this.parent.ready();\n  },\n\n  /*\r\n     *   Method to fill the result data\r\n     *   (THIS IS CALLED WITHIN GRID RENDER SCOPE)\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Collect data\n    var data = self.collectSearchValues();\n\n    if (bizagi.util.isMapEmpty(data)) {\n      bizagi.showMessageBox(this.getResource(\"render-search-advanced-no-filters\"), this.getResource(\"render-form-dialog-box-search\"), \"error\");\n      return null;\n    }\n\n    params.rows = properties.searchParams && properties.searchParams.maxRecords && properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : params.rows;\n\n    // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)         \n    if (properties.searchParams && typeof properties.searchParams.maxRows !== \"undefined\") {\n      params.rows = properties.searchParams.maxRows || params.rows;\n    }\n\n    // Resolve with remote data\n    self.dataService.submitSearch($.extend(params, {\n      url: properties.dataUrl,\n      idRender: properties.idRender,\n      idPageCache: properties.idPageCache,\n      idSearchForm: properties.id,\n      allowFullSearch: properties.searchParams.allowFullSearch ? properties.searchParams.allowFullSearch : null,\n      maxRecords: properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : null,\n      criteria: data })).\n\n    done(function (response) {\n\n      // Resolve with fetched data    \n      properties.page = response.page;\n      properties.records = response.records;\n      properties.totalPages = response.totalPages || 0;\n\n      //In tablets are allowed about 10000 records as maximum\n      if (response.records > 10000) {\n        properties.deviceMaxRecordsExceeded = true;\n        response.deviceMaxRecordsExceeded = true;\n      } else {\n        delete properties.deviceMaxRecordsExceeded;\n      }\n\n      defer.resolve(response);\n\n      // Call virtual method\n      self.onSearchFinished();\n    }).fail(function (errorObject) {\n      bizagi.showErrorAlertDialog = false;\n      if (errorObject.responseText) {\n        try {\n          var message = JSON.parse(errorObject.responseText).message;\n          bizagi.showMessageBox(message, \"\", \"error\");\n        } catch (e) {\n        }\n      }\n      defer.reject();\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     *   - Overriden because server needs this in array\r\n     */\n  collectSearchValues: function collectSearchValues() {\n    var self = this;\n\n    // Collect data\n    var data = {};\n    this.collectRenderValues(data);\n\n    // Changes to array\n    var submitArray = [];\n    for (key in data) {\n      var xpath = key;\n      var value = data[key];\n      var operation = self.getCriteriaOperation(self.getRender(xpath));\n      var criteriaData = {};\n      if (!bizagi.util.isEmpty(value)) {\n        criteriaData[\"xpath\"] = xpath;\n        criteriaData[\"value\"] = value;\n        criteriaData[\"operation\"] = operation;\n        submitArray.push(criteriaData);\n      }\n    }\n\n    return submitArray;\n  },\n\n  /*\r\n     *   This method find out the criterial operation to be executed according to\r\n     *   data type. Text renders use LIKE operation, but other data types such like\r\n     *   numerics use exact match operatiors\r\n     */\n  getCriteriaOperation: function getCriteriaOperation(render) {\n    var self = this;\n    var properties = self.properties;\n\n    var operation = \"EQUALS\";\n    if (render.properties.dataType == \"15\") {\n      if (typeof render.properties.typeSearch === \"undefined\" || render.properties.typeSearch === \"approx\") {\n        if (properties.allowFullSearch) {\n          operation = \"FULLLIKE\";\n        } else {\n          operation = \"LIKE\";\n        }\n      }\n    }\n    return operation;\n  },\n\n  /*\r\n     *   Render the result controls for the query\r\n     *   Resolved in each device\r\n     */\n  renderResult: function renderResult() {\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n  },\n\n  /*\r\n     *   Function to parse the dataType\r\n     */\n  parseAdditionalProperties: function parseAdditionalProperties(dataType) {\n\n    // Number\n    if (dataType == 1 || dataType == 2 || dataType == 3 ||\n    dataType == 4 || dataType == 6 || dataType == 7 ||\n    dataType == 10 || dataType == 11) {\n      return { type: \"columnNumber\" };\n    }\n\n    // Oracle Number\n    if (dataType == 29) {\n      return { type: \"columnNumberScientificNotation\" };\n    }\n\n    // Money\n    if (dataType == 8) {\n      return { type: \"columnMoney\" };\n    }\n\n    // Date\n    if (dataType == 12 || dataType == 13) {\n      return { type: \"columnDate\" };\n    }\n\n    // Boolean\n    if (dataType == 5) {\n      return { type: \"columnBoolean\" };\n    }\n\n    // Text\n    return { type: \"columnText\" };\n  },\n\n  /*\r\n     *\r\n     */\n  onSearchFinished: function onSearchFinished() {\n    // Empty function, overrided for Tablet version for now\n  } });","/*\r\n *   Name: BizAgi Tab Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a tab container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tab\", {}, {\n\n  /*\r\n                                              *   Constructor\r\n                                              */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Default properties\n    var properties = self.properties;\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property\n    properties.cssclass = properties.cssclass || \"\";\n  },\n\n  /*\r\n      *   Render the container layout\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var tabItems = $.map(self.children, function (child, key) {\n      child.properties.counter = key;\n      child.properties.tooltip = child.properties.tooltip || child.properties.displayName || \"\";\n      return child.properties;\n    });\n    var template = self.renderFactory.getTemplate(\"tab\");\n    var mode = self.getMode();\n\n    // Render the tab\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      tabs: tabItems,\n      mode: mode,\n      isDesign: self.getMode() !== \"execution\",\n      editable: properties.editable,\n      tabOrientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssclass: properties.cssclass });\n\n\n    // Get active container based on focus\n    var activeTab = self.activeTab = self.getActiveTab();\n\n    // Render children\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      self.children[i].properties.loadOnDemand = i != activeTab;\n    }\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n      *   Return the active tab containing the focus, or the first tab\r\n      */\n  getActiveTab: function getActiveTab() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = this.getFormContainer().getParams();\n    var mode = self.getMode();\n\n    if (mode === \"execution\") {\n      if (!formParams.isRefresh && properties.activeTab) {\n        self.getFormContainer().setFocusedElement(properties.activeTab);\n      }\n    }\n\n    var selectedTabs = formParams && formParams.selectedTabs ? formParams.selectedTabs : {};\n\n    // Fetch from selected tabs collection\n    if (selectedTabs[self.properties.id] >= 0) {\n      return selectedTabs[self.properties.id];\n    }\n\n    // Check for focused elements\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      if (self.children[i].containsFocusedElement()) return i;\n    }\n    return 0;\n  },\n\n  /**\r\n      * Update position of tab\r\n      * @param index\r\n      */\n  setActiveTab: function setActiveTab(index) {\n    var self = this;\n\n    self.triggerHandler(\"selected\", { index: index, tab: self.children[index] });\n\n    if (self.children[index]) {\n      var form = self.getFormContainer();\n\n      self.children[index].activate();\n      self.activeTab = index;\n\n      var selectedTab = {};\n      selectedTab[self.children[index].parent.properties.id] = index;\n      form.setParam(\"selectedTabs\", selectedTab);\n    }\n  } });","/**\r\n *   Name: Bizagi Tab Item Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a tab item class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tabItem\", {}, {\n\n  /*\r\n                                                 *   Render the container layout\r\n                                                 */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"tabItem\");\n\n    // Render the tabItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      uniqueId: properties.uniqueId,\n      counter: properties.counter,\n      tabOrientation: properties.orientation,\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    // Render content\n    html = self.renderTabContent(html);\n\n    return html;\n  },\n\n  /*\r\n     * Renders the tab content\r\n     */\n  renderTabContent: function renderTabContent(html) {\n    // Render children\n    return this.replaceChildrenHtml(html, this.renderChildrenHtml());\n  },\n\n  /*\r\n     *   Fires when the tab is selected \r\n     */\n  activate: function activate() {\n    this.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  },\n\n  /*\r\n     *   Return true if this tab contains the active focused element\r\n     */\n  containsFocusedElement: function containsFocusedElement() {\n    var self = this;\n    var focus = self.getFormContainer().getFocusedElement();\n\n    if (focus) {\n\n      // Locate element\n      if (focus.xpath) {\n        // Search by xpath and id\n        var elements = self.getFormContainer().getRenders(focus.xpath);\n        var element;\n\n        $.each(elements, function (i, item) {\n          // Just select editable control\n          if (item.properties.id == focus.id && item.properties.editable) {\n            element = item;\n          }\n        });\n      } else {\n        // Search just using id\n        var element = self.getFormContainer().getContainer(focus) || self.getFormContainer().getRenderById(focus);\n      }\n\n      // Search element parent\n      if (element) {\n        while (element.parent) {\n          if (element.properties.id == self.properties.id || element.parent.properties.id == self.properties.id) return true;\n          element = element.parent;\n        }\n      }\n    }\n\n    return false;\n  } });","/*\r\n*   Name: BizAgi Nested Form Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a nested form container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.nestedForm\", {}, {});","/**\r\n * Base definition of Action Launcher and Entity template controls\r\n *\r\n * @author: Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.actionLauncher\", {}, {\n\n  /*\r\n                                                         * Initialize the control with data provided\r\n                                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    if (mode == \"execution\") {\n      self.engine = new bizagi.templateEngine({\n        renderFactory: self.renderFactory,\n        cache: true,\n        autoGenerateData: false,\n        templateGuid: properties.selecttemplate });\n\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"ptags\": self.properties.tagslist || [],\n      \"pmaxitems\": self.properties.maxItems,\n      \"pactionXpath\": self.properties.xpathActions };\n\n\n    self.processPropertyValueDataTmplArgs = {\n      \"pactionXpath\": self.properties.xpathActions,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"ptemplateGuid\": properties.selecttemplate,\n      \"property\": \"dataTemplate\",\n      \"xpathActions\": self.properties.xpathActions };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    var defaultAllowActions = data.properties.type === \"entityTemplate\" ? false : true;\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ?\n    defaultAllowActions : data.properties.allowactions;\n    self.properties.isHorizontal = typeof data.properties.isHorizontal == \"undefined\" ?\n    true : data.properties.isHorizontal;\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ?\n    false : data.properties.allowSearch;\n    self.properties.selecttemplate = typeof data.properties.selecttemplate == \"undefined\" ?\n    \"\" : data.properties.selecttemplate;\n    self.properties.templatetype = typeof properties.templatetype != \"undefined\" ?\n    properties.templatetype : 'none';\n\n    self.properties.sessionId = form.params.data.sessionId;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteAction = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeAction\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidAction\": action.guidAction,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteAction).done(function (data) {\n      self.notifyExecution(data, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      * @param actionName\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher-design\");\n      var params = {\n        type: properties.type,\n        isHorizontal: properties.isHorizontal,\n        allowSearch: properties.allowSearch,\n        templateDefined: properties.templatetype != 'none',\n        allowactions: properties.allowactions };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    var value = self.getValue();\n    var bValid = false;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) {\n      return true;\n    }\n\n    // Check required\n    if (properties.required) {\n      if (self.value) {\n        if (self.value.length > 0)\n        return true;\n        message = self.getResource(\"render-required-register-action\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidProcess || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayName,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        // If it has additional xpath this action is a form of collection\n        if (action.xpathContext) {\n          $.when(self.processActionFormCollection(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        } else {\n\n          if (action.actionType === \"Form\") {\n            action.xpathContext = undefined;\n            action.contextType = \"entitytemplate\";\n            action.guidEntity = action.guidEntity || self.properties.guidEntity;\n          }\n\n          $.when(self.processActionForm(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        }\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity };\n\n        break;\n      case \"Rule\":\n        action.params = {\n          xpathActions: action.xpathActions || \"\",\n          recordXpath: recordXpath };\n\n        break;}\n\n\n    var newValueActionsList = bizagi.clone(actionsList);\n    newValueActionsList.push(action);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var newValueActionsList = bizagi.clone(self.getValue());\n    newValueActionsList.splice(index, 1);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidAction;\n\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n     * Normalize action launcher control properties\r\n     * @param actionsLaucher\r\n     * @returns {*}\r\n     */\n  getPropertiesActionLaucher: function getPropertiesActionLaucher(actionsLaucher) {\n    var self = this;\n    var form = self.getFormContainer();\n    /**\r\n                                         * The properties of actionLaucher have to 7 properties mandatory\r\n                                         * 0: guidProcess\r\n                                         * 1: displayName\r\n                                         * 2: title\r\n                                         * 3: actionType\r\n                                         * 4: guidaction\r\n                                         * 5: xpathContext\r\n                                         * 6: readOnlyForm: default: false\r\n                                         */\n    for (var i = 0, length = actionsLaucher.length, j = length; i < j; i += 1) {\n      //some ocassions server return 6 or 7 items\n      //return 6 properties when launch form action from action launcher control.\n      //in this case dont return xpathContext.\n      // So, add item position 5, simulate xpathContext empty.\n      if (actionsLaucher[i].length === 6) {\n        actionsLaucher[i].splice(5, 0, \"\");\n\n        if (actionsLaucher[i][3] == \"Process\" && form.properties.xpathContext) {\n          actionsLaucher[i][5] = form.properties.xpathContext;\n        }\n      }\n    }\n\n    return actionsLaucher;\n  } });","/**\r\n * Base definition of entity template\r\n *\r\n * @author: Andres Fernando Muoz\r\n * based on action launcher control\r\n */\n$.Class.extend(\"bizagi.rendering.entityTemplate\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ? true : data.properties.allowactions;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate-design\");\n      html = $.fasttmpl(template, {});\n    } else\n    if (self.properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  } });","/**\r\n * Base definition of Polymorphic launcher\r\n *\r\n * @author: Edward J Morales\r\n */\n\n$.Class.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\n  /*\r\n                                                              * Constructor\r\n                                                              */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ? false : data.properties.allowSearch;\n    self.properties.additionalXpath = self.properties.additionalXpath || [];\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"ptags\": self.getTagList(self.properties.tagslist),\n      \"additionalXpaths\": self.properties.additionalXpath };\n\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteConstructor = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeConstructor\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidConstructor\": action.guidConstructor,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteConstructor).done(function (data) {\n      self.notifyExecution(data.response, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-design\");\n      var params = {\n        type: properties.type,\n        allowSearch: properties.allowSearch };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher\");\n      html = $.fasttmpl(template);\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidObject || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                         /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayNamee,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        $.when(self.processActionForm(action)).done(function (idStartScope) {\n          action.idStartScope = idStartScope;\n          def.resolve(action);\n        });\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        if (typeof action.idStartScope !== \"undefined\") {\n          action.params.idStartScope = action.idStartScope;\n        }\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity,\n          guidEntity: action.guidEntity };\n\n        break;\n      case \"Rule\":\n        //TODO\n        break;}\n\n\n    actionsList.push(action);\n    self.setValue(actionsList);\n    self.setDisplayValue(actionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var value = self.getValue();\n    value.splice(index, 1);\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidObject || value.guidAction;\n        action.displayName = value.displayName;\n        action.guidConstructor = value.guidConstructor;\n        action.actionType = value.actionType;\n        action.xpathContext = value.xpathContext;\n        action.guidEntity = value.guidEntity;\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n      * Get list of tags\r\n      * @param taglist\r\n      * @return {Array}\r\n      */\n  getTagList: function getTagList(taglist) {\n    taglist = taglist || [];\n    var result = [];\n\n    for (var i = taglist.length; i > 0; i--) {\n      result.push(taglist[i - 1].value);\n    }\n    return result.length > 0 ? result : \"\";\n  } });","/**\r\n *   Name: Bizagi Render Check Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for check renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.check\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n\n    properties.showLetters = bizagi.override && bizagi.override.enableCheck === true && !properties.editable;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"check\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmpty(value)) return false;\n\n    var booleanValue = bizagi.util.parseBoolean(value);\n\n    return !(booleanValue === false && this.properties.required);\n  } });","/*\r\n*   Name: Bizagi Render Number Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.number\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.setGroupDigits();\n    properties.colorize = properties.colorizeOnNegative || false;\n    properties.dataTypeMinValue = this.calculateMinValue(properties.dataType);\n    properties.dataTypeMaxValue = this.calculateMaxValue(properties.dataType);\n\n    if (typeof properties.value != \"undefined\" && /[e][-+]/gi.test(properties.value) && Math.abs(parseFloat(properties.value)) < 1) {\n      properties.value = self.value = parseFloat(properties.value).toFixed(properties.numDecimals);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"number\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      editable: self.properties.editable,\n      value: bizagi.isMobile() ? self.getDisplayValue() : \"\", // Only apply to mobile because in the template value is required (Bug: 11624)\n      type: bizagi.util.isAndroidDevice() ? \"tel\" : \"text\", // Change type control for android device\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self._super();\n\n    var control = self.getControl();\n    var properties = self.properties;\n\n    self.numericInput = control.find(\"input\");\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numeric(self.properties.decimalSymbol);\n\n    // Attach event for retype double\n    if (properties.retype === \"double\") {\n      self.attachRetypeDouble();\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Attach Format Currency Plugin to format the input\n    this.attachFormatCurrency();\n  },\n\n  /**\r\n      * Removes Validation Messages\r\n      */\n  removeValidations: function removeValidations() {\n    var form = this.getFormContainer().parent || this.getFormContainer();\n\n    form.clearValidationMessages();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,smartphone...).\r\n      * @returns {}\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n  formatNumericInput: function formatNumericInput($input) {\n    var self = this;\n    var properties = self.properties;\n    var message = bizagi.localization.getResource(\"render-number-retype-fail\");\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController == \"undefined\") {\n      var $canvas = form.getValidationsContainer();\n      form.validationController = new bizagi.command.controllers.validation(form, self.validations, $canvas);\n    }\n\n    var validationController = form.validationController || form.parent.validationController;\n    var decimalSeparator = \".\";\n    var digitGroupSeparator = \",\";\n\n    if (typeof BIZAGI_DEFAULT_CURRENCY_INFO == \"undefined\") {\n      decimalSeparator = self.getResource(\"numericFormat\").decimalSymbol || \".\";\n      digitGroupSeparator = self.getResource(\"numericFormat\").digitGroupSymbol || \",\";\n    } else\n    {\n      decimalSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator;\n      digitGroupSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator;\n    }\n\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (properties.percentage) self.numericInput.val(self.numericInput.val().replace(\"%\", \"\"));\n    var inputValue = self.numericInput.val();\n    inputValue = decimalSeparator == \",\" ? inputValue.replace(/\\,0+$/, '') : inputValue.replace(/\\.0+$/, '');\n    inputValue = inputValue.replace(properties.symbol, \"\");\n    //Replace all the ocurrences of the digitGroupSeparator\n    inputValue = bizagi.util.replaceAll(inputValue, digitGroupSeparator, \"\");\n    if (inputValue.toString().indexOf(decimalSeparator) != -1) {\n      if (decimalSeparator == \",\") inputValue = inputValue.replace(/([0-9]+(\\,[0-9]+[1-9])?)(\\,?0+$)/, '$1');\n      if (decimalSeparator == \".\") inputValue = inputValue.replace(/([0-9]+(\\.[0-9]+[1-9])?)(\\.?0+$)/, '$1');\n    }\n\n    if (inputValue != undefined && inputValue.length > 0) self.numericInput.val(inputValue);\n\n    if (/(.+)-$/.test(inputValue)) {\n      inputValue = inputValue.replace(/(.+)-$/, '-$1');\n      self.numericInput.val(inputValue);\n    }\n\n    var inputLength = inputValue.replace(/[^0-9]+/g, \"\").length;\n    var xPath = self.properties.xpath;\n    var oldVal = self.numericInput.val();\n\n\n    if (self.isInvalidFormat != null && self.isInvalidFormat == true ||\n    inputValue != \"\" && [\"$\", \"\", \"\", \"\", properties.symbol].indexOf(inputValue) != -1) {\n      self.setValue(\"\");\n      self.getControl().find(\"input\").val(\"\");\n      self.numericInput.val(\"\");\n      return;\n    }\n\n    if (bizagi.util.trim(inputValue) == \"\") {\n      self.setValue(\"\");\n      return;\n    }\n\n    //The \",\" is changed to \".\" For the correct operation of \"parseFloat ()\"\n    var tempValue = parseFloat(inputValue.replace(\",\", \".\"));\n    if (isNaN(tempValue)) {\n      tempValue = self.numericInput.asNumber();\n    }\n\n    if (minValue !== undefined && minValue != null && tempValue < minValue) {\n      message = bizagi.localization.getResource(\"render-numeric-minimum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#minValue#\", minValue.toString());\n    } else\n    if (maxValue !== undefined && maxValue !== null && tempValue > maxValue) {\n      message = bizagi.localization.getResource(\"render-numeric-maximum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#maxValue#\", maxValue.toString());\n    } else\n    message = message + \" \" + oldVal + \"\";\n\n\n    // Do datatype validations\n    if (\n    minValue !== undefined && minValue !== null && tempValue < minValue ||\n    maxValue !== undefined && maxValue !== null && tempValue > maxValue ||\n    self.properties.dataType == 10 && inputLength > 15 ||\n    self.properties.dataType == 1 && inputLength > 19 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    oldVal.match(/[^$,-.()\\d]/))\n    {\n      if (typeof validationController != \"undefined\" && validationController != null) {\n        self.removeValidations();\n\n        var messageToShow = message;\n        if (messageToShow.indexOf(oldVal) === -1) {\n          messageToShow = message + \" \" + oldVal + \"\";\n        }\n\n        validationController.showValidationMessage(messageToShow, xPath);\n        self.isValidRender = false;\n        self.isValidRenderMessage = messageToShow;\n      }\n      message = message.replace(oldVal, \"\");\n      return;\n    } else\n    {\n      self.isValidRender = true;\n      self.isValidRenderMessage = \"\";\n    }\n\n    // Fix decimals specially when it starts with 0 (0000234 -> 234, 00000 -> 0)\n    if ($input.value.toString().length > 0 && !properties.allowDecimals && !properties.groupDigits) {\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if (properties.symbol.length > 0) $input.value = $input.value.toString().replace(properties.symbol + \"0\", properties.symbol);\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if ($input.value.replaceAll('0', '').length == 0)\n      $input.value = properties.symbol + \"0\";else\n      if ($input.value.toString() == parseInt($input.value)) $input.value = properties.symbol + $input.value;\n    } else {\n      //Fix type money when number start with 0 (0000234 -> 234, 00000 -> 0)\n      if (self.properties.type === \"money\" || self.properties.type === \"number\" || self.properties.type === \"columnMoney\" || self.properties.type === \"columnNumber\") {\n        $input.value = $input.value.toString().replace(/^0+/, '');\n        if ($input.value === \"\") {\n          $input.value = 0;\n        }\n      }\n    }\n    self.executeFormatCurrencyPlugin();\n\n    // Updates internal value\n    self.setValue(self.numericInput.asNumber({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits }));\n\n\n    if (properties.percentage) {\n      if (self.numericInput && self.numericInput.val().indexOf(\"%\") == -1)\n      self.numericInput.val(self.numericInput.val() + '%');\n    }\n    message = message.replace(oldVal, \"\");\n\n  },\n  /**\r\n      * Adds the format currency plugin\r\n      * @returns {}\r\n      */\n  attachFormatCurrency: function attachFormatCurrency() {\n    var self = this;\n    var properties = self.properties;\n    self.isValidRender = self.isValidRender || true;\n\n    // Extend formatCurrency language\n    if ($.formatCurrency.regions[bizagi.language] == null)\n    $.formatCurrency.regions[bizagi.language] = this.getResource(\"numericFormat\");\n\n    // Attach events\n    self.numericInput.blur(function () {\n      self.formatNumericInput(this);\n    })\n\n    // Avoiding pasting invalid characters\n    .bind('paste', function (e) {\n      try {\n        var tmpData = bizagi.util.isIE() || bizagi.util.isIE11() ? window.clipboardData.getData(\"text\") : e.originalEvent.clipboardData.getData(\"Text\");\n\n\n\n        // Next lines checks if there is something different to numbers symbol, decimalSymbol and digitGroupSybol\n        var totalVal = \"/[^0-9\";\n        if (properties.decimalSymbol.length > 0) {\n          totalVal += properties.decimalSymbol;\n        }\n        // Next lines only for currency type\n        if (properties.dataType == 8) {\n          if (properties.symbol.length > 0) {\n            totalVal += properties.symbol;\n          }\n          if (properties.digitGroupSymbol.length > 0) {\n            totalVal += properties.digitGroupSymbol;\n          }\n        }\n        totalVal += \"\\\\-\\\\s]/gi\";\n        try {\n          if (tmpData.replace(eval(totalVal), '').length != tmpData.length)\n          e.preventDefault();\n        }\n        catch (e) {\n        }\n      }\n      catch (e) {\n        bizagi.log(\"Error to pasting content\");\n        self.isInvalidFormat = true;\n      }\n    })\n    // Now we implement keydown instead of keyup in order to include preventDefault\n    .keydown(function (e) {\n      self.previousValue = this.value;\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      // Validation for currency info\n      if (typeof BIZAGI_DEFAULT_CURRENCY_INFO != \"undefined\")\n      if (BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits == 0) properties.allowDecimals = false;\n      if (properties.dataType < 5 || properties.dataType == 8 && properties.allowDecimals == false)\n      if (keyUnicode == 188 || keyUnicode == 190 || keyUnicode == 110)\n      e.preventDefault();\n      if (this.value)\n      if (e !== undefined && this.value.length > 0 && (properties.dataType == 8 || properties.dataType == 10)) {\n        // Just numbers\n        if (keyUnicode > 47 && keyUnicode < 58) {\n          if (self.formatTimeout) {\n            clearTimeout(self.formatTimeout);\n          }\n\n          var floatPart = this.value + \"\";\n          //var  floatPart = stringPart.replaceAll(properties.digitGroupSymbol, \"\").replaceAll(properties.symbol,\"\").trim().replaceAll(properties.decimalSymbol,\".\");\n          if (properties.digitGroupSymbol && properties.digitGroupSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.digitGroupSymbol, \"\");\n          }\n          if (properties.symbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.symbol, \"\");\n          }\n\n          floatPart = $.trim(floatPart);\n          if (properties.decimalSymbol && properties.decimalSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.decimalSymbol, \".\");\n          }\n          // If increasing one digit (x10) will overtake the maxValue\n          if (floatPart * 10 > properties.dataTypeMaxValue) {\n            e.preventDefault();\n          }\n        } else\n        if (keyUnicode == 109 || keyUnicode == 189) {\n          if (this.selectionStart != 0 || this.selectionEnd != this.value.length) {\n            var currentPosition = this.selectionEnd;\n            this.value = properties.symbol + \"-\" + this.value.replace(properties.symbol, \"\");\n            this.selectionStart = this.selectionEnd = currentPosition + 1;\n          } else if (this.selectionStart == 0 && this.selectionEnd == this.value.length) {\n            this.value = \"-\";\n            this.selectionStart = this.selectionEnd = this.value.length;\n          }\n        }\n      }\n    }).\n\n    keyup(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (e !== undefined) {\n        switch (keyUnicode) {\n          case 16:\n            break; // Shift\n          case 17:\n            break; // Ctrl\n          case 13:\n            break; // Intro\n          case 18:\n            break; // Alt\n          case 27:\n            this.value = '';\n            break; // Esc: clear entry\n          case 35:\n            break; // End\n          case 36:\n            break; // Home\n          case 37:\n            break; // cursor left\n          case 38:\n            break; // cursor up\n          case 39:\n            break; // cursor right\n          case 40:\n            break; // cursor down\n          case 78:\n            break; // N (Opera 9.63+ maps the \".\" from the number key section to the \"N\" key too!) (See: http://unixpapa.com/js/key.html search for \". Del\")\n          case 110:\n            break; // . number block (Opera 9.63+ maps the \".\" from the number block to the \"N\" key (78) !!!)\n          case 188:\n            break; // , comma\n          case 190:\n            break; // .\n          default:\n            {\n\n            }}\n\n      }\n    }).keypress(function (e) {\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (typeof e !== \"undefined\") {\n        if (keyUnicode == 35 || keyUnicode == 37 || keyUnicode == 39) {\n          e.preventDefault();\n        } else if (properties.dataType != 8 && keyUnicode == 36) {\n          e.preventDefault();\n        }\n\n        // When no decimals are permited\n        var character = String.fromCharCode(keyUnicode);\n        if (properties.allowDecimals === false && properties.numDecimals === 0 && character === properties.decimalSymbol)\n        e.preventDefault();\n      }\n    });\n\n  },\n\n  executeFormatCurrencyPlugin: function executeFormatCurrencyPlugin() {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.numericInput) {\n      self.numericInput.formatCurrency({\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n\n    if (properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      var value = self.numericInput.val();\n      var positive = true;\n\n      if (value.indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var regExp = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(regExp, \"$1\");\n\n      regExp = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(regExp, \"\");\n      self.numericInput.val(value);\n\n      if (!positive) self.numericInput.val(\"(\" + value + \")\");\n    }\n\n    if (properties.percentage)\n    self.numericInput.val(self.numericInput.val() + '%');\n  },\n\n  /**\r\n      * Returns the display value of the render\r\n      * @returns {*}\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var value = self.getValue() !== undefined ? self.getValue() : $(\"input\", control).val() || \"\";\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n\n    label.formatCurrency({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize });\n\n\n    if (properties.percentage)\n    label = $('<label/>').html(label.text() + '%');\n\n    // Removing unrequired zeros as requested by BA26331\n    if (!properties.editable && properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      value = label.text();\n      var positive = true;\n\n      if (value.toString().indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var re = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(re, \"$1\");\n\n      re = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(re, \"\");\n\n      if (!positive) value = \"(\" + value + \")\";\n      return value;\n    }\n\n    return label.text();\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var message;\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (typeof value == \"string\" && value != \"\") {\n      value = Number(value);\n    }\n\n    // Check min value\n    if (self.hasValue()) {\n      if (!bizagi.util.isEmpty(minValue)) {\n        if (value < minValue) {\n          message = this.getResource(\"render-numeric-minimum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#minValue#\", minValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n      // Check max value\n      if (!bizagi.util.isEmpty(maxValue)) {\n        if (value > maxValue) {\n          message = this.getResource(\"render-numeric-maximum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#maxValue#\", maxValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n\n    }\n\n    if (self.isValidRender === false && !(bValid && bizagi.util.isMobileDevice())) {\n      bValid = false;\n      var validMessage = self.isValidRenderMessage ? self.isValidRenderMessage : \"error\";\n      invalidElements.push({ xpath: properties.xpath, message: validMessage });\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Get minimum value\r\n      * @returns {*}\r\n      */\n  getMinValue: function getMinValue() {\n    var minValue = this.properties.minValue;\n\n    if (minValue !== undefined && minValue !== null)\n    return minValue;\n\n    return this.properties.dataTypeMinValue;\n  },\n\n  /**\r\n      * Get maximum value\r\n      * @returns {*}\r\n      */\n  getMaxValue: function getMaxValue() {\n    var maxValue = this.properties.maxValue;\n\n    if (maxValue !== undefined && maxValue !== null)\n    return maxValue;\n\n    return this.properties.dataTypeMaxValue;\n  },\n\n  /**\r\n      * Return the allow decimals default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n      // Decimal and money data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Return the group digits default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n\n      // Decimal data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\r\n      * Return the group digits default property based on digitGroupSymbol\r\n      * @returns {*}\r\n      */\n  setGroupDigits: function setGroupDigits() {\n    var self = this;\n    if (typeof self.properties.thousands !== \"undefined\") {\n      if (self.properties.digitGroupSymbol) {//some cultures\n        return bizagi.util.parseBoolean(self.properties.thousands);\n      } else {\n        return false;\n      }\n    } else if (self.properties.digitGroupSymbol) {//some cultures\n      return this.getDefaultGroupDigits(self.properties.dataType);\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Calculate Minimum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMinValue: function calculateMinValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return -922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 0; // tinyint\n    }\n    if (dataType === 3) {\n      return -32768; // smallint\n    }\n    if (dataType === 2) {\n      return -2147483648; // int\n    }\n    if (dataType === 1) {\n      return -999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate Maximum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMaxValue: function calculateMaxValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return 922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 255; // tinyint\n    }\n    if (dataType === 3) {\n      return 32767; // smallint\n    }\n    if (dataType === 2) {\n      return 2147483647; // int\n    }\n    if (dataType === 1) {\n      return 999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMinValue: function performMinValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMinValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMaxValue: function performMaxValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMaxValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Changes the render minimum value\r\n      * @param value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var newValue = this.performMinValue(value);\n\n    this.properties.minValue = this.properties.dataTypeMinValue = newValue;\n  },\n  /**\r\n      * Changes the render maximum value\r\n      * @param value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var newValue = this.performMaxValue(value);\n\n    this.properties.maxValue = this.properties.dataTypeMaxValue = newValue;\n  },\n\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    try {\n      // Destroy tooltips\n      control.tooltip(\"destroy\");\n    } catch (e) {\n    }\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  } });","\n/*\r\n*   Name: Bizagi Render Number Scientific notation Class\r\n*   Author: Laura Ariza\r\n*   Comments:\r\n*   -   This script will define basic stuff for scientific notation numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.numberScientificNotation\", {\n  /*\r\n                                                               *   Update or init the element data\r\n                                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n  },\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"numberScientificNotation\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  /*\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    self.numericInput = control.find(\"input\");\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getValue().replace('.', self.properties.decimalSymbol);\n  },\n\n  setValue: function setValue(value) {\n    var self = this;\n    value = (value || '').toString().replace(self.properties.decimalSymbol, '.');\n    self._super(value);\n  },\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue() || \"\";\n    var compareValue = properties.originalValue || \"\";\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n    result = compareValue.toLowerCase() == value.toLowerCase() ? false : true;\n    return result;\n  } });","/**\r\n *   Name: Bizagi Render Hidden Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hiddens\r\n */\n\n$.Class.extend(\"bizagi.rendering.hidden\", {}, {\n\n  /**\r\n                                                 * Returns the in-memory processed element\r\n                                                 */\n  renderControl: function renderControl() {\n    if (this.getMode() === \"design\") {\n      return \"<div>\" + bizagi.localization.getResource(\"render-hidden-displayName\") + \"</div>\";\n    } else {\n      return \"<div />\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var properties = this.properties;\n\n    // Call base\n    this._super();\n\n    // Set the initial value\n    if (properties.value !== undefined) {\n      this.setDisplayValue(properties.value);\n    }\n  } });","/**\r\n *   Name: Bizagi Render Text Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for text renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.text\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param data\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || this.getResource(\"render-text-regular-expression-default-message\");\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"text\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      value: this.properties.value,\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      helpText: this.properties.helpText,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"text-read-only\");\n    var value = this.getValue();\n\n    if (bizagi.util.isString(value)) {\n      value = value.replaceAll(\"`\", \"&#96;\");\n    }\n\n    // Render template\n    return $.fasttmpl(template, { value: value, editable: this.properties.editable });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    this.input = this.getControl().find(\"input\");\n\n    //Attach event for retype double\n    if (this.properties.retype === \"double\")\n    this.attachRetypeDouble();\n  },\n\n  /**\r\n      * function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check mask property\n    if (properties.mask)\n    self.input.mask({ mask: properties.mask });\n\n    // Attach change event\n    self.input.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.input.val(), false);\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.input.val(), true);\n        }\n      }\n\n    }).keypress(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n\n      if (e !== undefined) {\n        if (keyUnicode == 13) {\n          $(this).trigger(\"change\");\n        }\n      }\n    });\n    //QA33146 - maxlength does not support in Android Devices. \n    if (bizagi.util.isAndroidDevice() && properties.maxLength > 0) {\n      self.input.bind(\"keyup\", function (e) {\n        var inputLength = $(this).val() && $(this).val().length;\n        if (inputLength >= properties.maxLength) {\n          e.preventDefault();\n          e.target.value = e.target.value.substring(0, properties.maxLength);\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n\n    // When the form have big data, block browser executing RegExp. QAF-1418.\n    // Check regular expression\n    if (typeof value == \"string\") {\n      if (properties.regularExpression) {\n        if (properties.editable) {\n          var regex = new RegExp(\"\");\n          try {\n            regex = new RegExp(properties.regularExpression.expression);\n          }\n          catch (e) {\n            if (bizagi.override.showDesignValidations) {\n              bizagi.log(e);\n              invalidElements.push({ xpath: properties.xpath, message: e.message });\n              bValid = false;\n            }\n          }\n\n          if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex) && self.properties && self.properties.xpath === \"userName\")) {\n            var message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          } else {\n            if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex))) {\n              var message = properties.regularExpression.message;\n              invalidElements.push({ xpath: properties.xpath, message: message });\n              bValid = false;\n            }\n          }\n        }\n      } else {\n        // Strange behavior on IE. When matchs are united on IE have is very slow\n        // solution, divide matchs\n        //.*? means for more information search: \"Lazy matching regexp\"\n        if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n          if (properties.editable) {\n            var message = this.getResource(\"render-text-regular-expression-default-message\");\n\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (!bizagi.util.parseBoolean(self.properties.editable)) {\n      // Render as simple value\n      if (typeof value === \"string\") {\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(\"<label class='readonly-control'>\" + valueToDisplay + \"</label>\");\n      } else {\n        if (bizagi.util.isNull(value)) {\n          control.html(\"\");\n        }\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * @param value\r\n      */\n  setValue: function setValue(value) {\n    this._super(value);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Integer} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (typeof value !== \"string\" || maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","/**\r\n *   Name: Bizagi Render Readonly Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.readonly\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"readonly-value\");\n    var value = this.getMode() == 'execution' ?\n    this.getFormattedValue(this.properties.value, this.properties.dataType) :\n    this.getDesignModeValue(this.properties.renderType);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: this.properties.id,\n      value: value });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      *  Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Get data value with format\r\n      * @param value\r\n      * @param dataType\r\n      */\n  getFormattedValue: function getFormattedValue(value, dataType) {\n    if (bizagi.util.isEmpty(value)) return \"\";\n\n    // If dataType is integer\n    if ([1, 2, 3, 4, 7].includes(dataType)) return value;\n\n    // If dataType is boolean\n    if ([5, 17].includes(dataType)) return bizagi.util.formatBoolean(value);\n\n    // If dataType is monetary\n    if ([8].includes(dataType)) return bizagi.util.formatMonetaryValue(value);\n\n    // If dataType is real or float\n    if ([6, 10, 11].includes(dataType)) return bizagi.util.formatDecimalValue(value);\n\n    // If dataType is date\n    if ([12, 13].includes(dataType)) return bizagi.util.formatDateValue(value);\n\n    // Otherwise, If dataType is string\n    return bizagi.util.sanitizeHTML(value) || \"\";\n  },\n\n  /***/\n  getDesignModeValue: function getDesignModeValue(renderType) {\n\n    // If dataType is integer\n    if (renderType == 'number') return '123';\n    if (renderType == 'string') return 'abc';\n    if (renderType == 'date') return '1/1/1900';\n    if (renderType == 'boolean') return 'false';\n    if (renderType == 'currency') return '$123';\n\n    return \"\";\n  },\n\n  /** \r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.style(\"background\", color, \"important\");\n    } else {\n      this.element.css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Gets jQuery Object to stylize\r\n      * @param {jQuery Object} $context jQuery Object\r\n      */\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\".bz-input--readonly\", $context);\n  } });","/**\r\n *   Name: Bizagi Render Button Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for button renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.button\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.caption = properties.caption || \"\";\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // A button cannot be required\n    properties.required = false;\n\n    // This flag enable/disable default behaviors of buttons\n    // auto save and execute rule\n    properties.preventDefault = properties.preventDefault || false;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"button\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      caption: self.properties.caption,\n      cssClass: self.properties.cssclass || \"\",\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render behaviour after to be processed\r\n      */\n  postRender: function postRender() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Saves the form\r\n      * @returns {}\r\n      */\n  saveForm: function saveForm() {\n    var form = this.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n      * Executes the button action\r\n      * @returns {}\r\n      */\n  executeButton: function executeButton() {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = properties.xpathContext || \"\";\n\n    if (properties.submitOnChangexpathContextRow) {\n      xpathContext = xpathContext ? xpathContext + \".\" + properties.submitOnChangexpathContextRow : properties.submitOnChangexpathContextRow;\n    }\n\n    // Set the loading feedback\n    self.getFormContainer().startLoading();\n\n    return self.dataService.multiaction().executeButton({\n      idRender: properties.id,\n      xpath: properties.xpath || \"\",\n      xpathContext: xpathContext || \"\",\n      idPageCache: properties.idPageCache }).\n    always(function () {\n      self.getFormContainer().endLoading();\n      return arguments ? arguments[0] : undefined;\n    });\n  },\n\n  /**\r\n      * Refresh the current form\r\n      * @returns {}\r\n      */\n  refreshForm: function refreshForm() {\n    var form = this.getFormContainer();\n    form.refreshForm(this.properties.id);\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      * @returns {}\r\n      */\n  processButton: function processButton() {\n    var self = this;\n\n    if (self.properties.editable) {\n      // Save the form prior opening the dialog\n      self.runButtonAction();\n    }\n  },\n\n  /**\r\n      * Triggers the render change event\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n\n    var pressed = params.pressed || false;\n\n    self.triggerHandler(\"renderchange\", { render: self, pressed: pressed });\n  },\n\n  /**\r\n      * Run button actions\r\n      * @returns {}\r\n      */\n  runButtonAction: function runButtonAction() {\n    var self = this;\n\n    // Save the form prior opening the dialog\n    self.getFormContainer().clearValidationMessages();\n\n    self.saveForm().pipe(function () {\n      return self.executeButton();\n    }).done(function (result) {\n\n      var type = result && result.type ? result.type : \"\";\n\n      if (result == null || result == true || result.result === \"success\" || result.type === \"success\") {\n        return self.refreshForm();\n      } else if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        try {\n          if (type === \"alertMessages\") {\n            bizagi.modalError && bizagi.modalError.show(result.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n          } else {\n            // Add validation messages\n            self.getFormContainer().addValidationMessage(result.messages);\n          }\n        } catch (e) {\n        }\n      }\n    }).fail(function (error) {\n\n      try {\n        // Add error messages\n        var error_obj = bizagi.util.getErrorFormatted(error);\n        var message = typeof error_obj === \"undefined\" ? {\n          \"message\": bizagi.localization.getResource(\"workportal-general-error\") } :\n        error_obj;\n\n        self.getFormContainer().failHandler(message);\n      } catch (e) {\n      }\n\n    });\n\n  },\n\n  processLayout: function processLayout(isLabelFormat, format) {\n    if (isLabelFormat) {\n      this.changeBackgroundColor(format.background);\n      this._super(!isLabelFormat, format);\n    }\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.getElementsToStylize(this.getControl()).style(\"background\", color, \"important\");\n    } else {\n      this.getElementsToStylize(this.getControl()).css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"input\", $context);\n  },\n\n  /**\r\n      *  Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  } });","/**\r\n *   Name: Bizagi Render Fileprint Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for fileprint renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.fileprint\", {}, {\n\n  /**\r\n                                                    * Update or init the element data\r\n                                                    * @param data\r\n                                                    */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var caption = $.trim(properties.caption);\n\n    properties.caption = !bizagi.util.isEmpty(caption) ? caption : \"render-fileprint-property-caption\";\n    properties.filesCount = properties.filesCount ? properties.filesCount : 0;\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n    // A button cannot be required\n    properties.required = false;\n  },\n\n  /**\r\n      * Method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"fileprint\");\n\n    return $.fasttmpl(template, {\n      caption: this.properties.caption });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Downloads the file and try to open it\r\n      */\n  downloadFile: function downloadFile() {\n    return this.dataService.getFilePrint({\n      idRender: this.properties.id,\n      xpathContext: this.properties.xpathContext || \"\",\n      idPageCache: this.properties.idPageCache,\n      contexttype: this.properties.contexttype,\n      disposition: \"download\" }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  } });","/**\r\n *   Name: Bizagi Render Simple Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.link\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data\r\n                                               * @returns {}\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n    properties.required = false;\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"link\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      displayName: self.properties.displayName,\n      align: self.properties.valueAlign,\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Do nothing\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  } });","/*\r\n *   Name: BizAgi Render Radio Class\r\n *   Author: Ivan Ricardo Taimal Narvaez\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.checkList\", {}, {\n\n  /*\r\n                                                    *   Update or init the element data\r\n                                                    */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n    self.setValue(properties.items);\n    self.updateOriginalValue();\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n    self.checkListGroup = $(\".ui-bizagi-render-checkList .ui-bizagi-render-checkList-item\", control);\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var items = self.properties.items || [];\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: items }));\n\n    return html;\n  },\n\n  /*\r\n      *   Gets the template used by the combo render\r\n      *   can be overriden in subclasses to reuse logic and just change the template\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"checkList\";\n  },\n\n  /*\r\n      *   Determines if we need to show the empty node or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /*\r\n      *   Determines if we need to show the current data regardless if it belongs to data or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /*\r\n      *   Adds custom parameters to process the template\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal };\n\n  },\n  /*\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n\n  },\n\n  setValue: function setValue(value) {;\n    this.value = bizagi.clone(value);\n  },\n\n  getValue: function getValue(data) {;\n    return this.value || [];\n  } });","/*\r\n*   Name: BizAgi render layout Image Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for non editable image control inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutImage\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    mode = self.getMode(),\n    useDefaultImage = false,\n    valueObj = self.properties.value || {},\n    uri = \"\";\n\n    //\n    var templateUri = self.renderFactory.getTemplate(\"layout-image\");\n\n    //Solucion temporal mientras se ajusta la respuesta del servicio cambiar despues de demo de 21/07/2015\n    /*if (value.value && value.value !== \"\" && value.value.length > 100){\r\n        var template64 = self.renderFactory.getTemplate(\"layout-image64\");\r\n        return $.fasttmpl(template64, { url: value.value, useDefaultImage: useDefaultImage });\r\n    }*/\n\n    /* if (mode === 'execution' && valueObj.value && valueObj.value.length > 0) {\r\n            uri = self.getImageUri();\r\n        }\r\n        else{\r\n            useDefaultImage = true;\r\n        } */\n\n    return $.fasttmpl(templateUri, { useDefaultImage: true });\n  },\n\n  /**\r\n      * Gets the base 64 image, specify in each device in order to change the size\r\n      */\n  getImage64: function getImage64() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      width: 96,\n      height: 96 };\n\n\n    return self.dataService.getEntityImage64(params);\n  },\n\n  /**\r\n      * Gets the url to get the array image, specify in each device in order to change the size\r\n      */\n  getImageUri: function getImageUri() {\n    var self = this;\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Andrs Fernando Muoz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLink\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-link\");\n    // Render template\n    var html = $.fasttmpl(template, { displayName: self.properties.displayName });\n    return html;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLabel\", {}, {\n\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    this.properties.required = false;\n\n    // Set properties\n    this.properties.displayType = \"label\";\n    this.properties.labelAlign = this.originalProperties.labelAlign || \"left\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-label\");\n    var value = self.properties.displayName || self.properties.value || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Mauricio Sanchez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutText\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    //properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-text\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value, editable: self.properties.editable });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  } });","/**\r\n *   Name: Bizagi Render Layout Simple Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable upload renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutUpload\", {}, {\n\n  /**\r\n                                                       *   Update or init the element data\r\n                                                       */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.editable = true;\n    properties.allowDelete = true;\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n  },\n\n  /**\r\n      * Get value files by data\r\n      */\n  getValueFilesByData: function getValueFilesByData(properties) {\n    var self = this;\n    var defer = $.Deferred();\n    var dataFiles;\n\n    if (properties.value.value) {//Normal entityTemplate in form QAF-2319\n      dataFiles = properties.value.value;\n    } else {//QAF-2210\n      dataFiles = properties.value;\n    }\n\n    var valueAuxFiles;\n    try {\n      if (self.isContextContainerWidgetRender()) {\n        valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + dataFiles + \"}\");\n        defer.resolve(properties, valueAuxFiles);\n      } else {//context: my stuff\n        $.when(self.getDataFilesWithoutScope()).done(function (valueResult) {\n          valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + valueResult + \"}\");\n          defer.resolve(properties, valueAuxFiles);\n        });\n      }\n    } catch (err) {\n      valueAuxFiles = JSON.parse(\"{ \\\"files\\\": []}\");\n      defer.resolve(properties, valueAuxFiles);\n      console.warn(\"Exception converting data files. Error: \", err);\n    }\n\n    return defer.promise();\n  },\n\n  isContextContainerWidgetRender: function isContextContainerWidgetRender() {\n    var self = this;\n    var formContainer = self.getFormContainer();\n\n    return formContainer.params.paramsRender && formContainer.params.paramsRender.idRender;\n  },\n\n  /**\r\n      * Get data files when access from My stuff\r\n      */\n  getDataFilesWithoutScope: function getDataFilesWithoutScope() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey };\n\n\n    return self.dataService.getFilesDataForLayoutUploadControl(params);\n  },\n\n  /**\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      *   Returns the xpath to be used\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Render Layout Boolean Class\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for boolean renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutBoolean\", {}, {\n  /*\r\n                                                        * Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-boolean\");\n    // Render template\n    var html = $.fasttmpl(template, { value: this.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  setValue: function setValue(value, triggerEvents) {\n    if (value === null || value === \"\") {\n      this.properties.value = \"\";\n    } else\n    if (value.toString().toLowerCase() === \"true\" || value.toString().toLowerCase() === \"false\") {\n      this.properties.value = bizagi.util.parseBoolean(value) ? this.getResource(\"render-boolean-yes\") : this.getResource(\"render-boolean-no\");\n    }\n    this._super(this.properties.value, triggerEvents);\n  } });","/**\r\n * Name: BizAgi Render Layout DateTime Class\r\n * Author: Andres Fernando Muoz\r\n * Comments:\r\n * - This script will define basic stuff for text renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutDateTime\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/ig) === -1) {\n        properties.fullFormat = properties.fullFormat + ' ' + properties.timeFormat;\n      }\n    } else\n    {\n      var indexHour = properties.fullFormat.search(/[h|H]+/ig);\n      if (indexHour !== -1) {\n        properties.fullFormat = properties.fullFormat.substring(0, indexHour - 1);\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(properties.value, properties.showTime);\n\n      // Format date to current format\n      if (date != 0) {\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        self.value = properties.value; // Value must always hold the value with invariant format\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else\n      {\n        self.value = null;\n      }\n    } else\n    {\n      self.value = null;\n      properties.value = \"\";\n      properties.displayValue = \"\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-date-time\");\n    var value = self.properties.value === null || self.properties.value === \"\" ? \"\" : self.properties.value;\n\n    // Render template\n    return $.fasttmpl(template, { value: value });\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this,dateObj;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n    var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n\n    if (value.length == INVARIANT_FORMAT.length || value.length == INVARIANT_FORMAT.length + 1) {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\n    } else\n    {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\n      if (dateObj && !isNaN(Date.parse(dateObj)) && !$.isNumeric(dateObj)) {\n        dateObj.setHours(0, 0, 0, 0);\n      }\n\n    }\n    // Set value in input\n    if (value && !isNaN(Date.parse(value))) {\n      var formattedDateTime = bizagi.util.dateFormatter.formatDate(dateObj, properties.fullFormat, self.i18n);\n      dateControl.text(formattedDateTime);\n    }\n  },\n\n  /**\r\n      * Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n    var self = this;\n    self.dateControl = $(\".ui-bizagi-render-date-time\", self.getControl());\n    return self.dateControl;\n  } });","/*\r\n*   Name: BizAgi Render Layout number Class\r\n*   Author: Andres Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutNumber\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.getDefaultGroupDigits(properties.dataType);\n    properties.colorize = properties.colorizeOnNegative || false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-number\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  /*\r\n      *   Returns the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n    var regExp2 = /[\\u20AC \\u0024\\u00A3]/;\n    if (!value.toString().match(regExp2)) {\n      label.formatCurrency(\n      {\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n    return label.text();\n  },\n\n  /*\r\n      *   Return the allow decimals default property based on the datatype\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /*\r\n      *   Return the group digits default property based on the datatype\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  } });","/*\r\n*   Name: BizAgi Render Layout Money Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for money renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutMoney\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol :\n      typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n    } else\n    {\n      properties.symbol = \"\";\n    }\n    properties.groupDigits = true;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutPlaceholder\", {}, {\n\n  /*\r\n                                                            * Constructor\r\n                                                            */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-placeholder\");\n    var value = self.properties.value || self.properties.displayName || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/**\r\n *   Name: Bizagi Render Geolocation control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for geolocation renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.geolocation\", {}, {\n\n  /**\r\n                                                      * Constructor\r\n                                                      * @param {} data\r\n                                                      */\n  init: function init(data) {\n    // Call base\n    this._super(data);\n    this.geolocation = window.navigator.geolocation;\n\n    var properties = this.properties;\n    properties.allowUpdate = bizagi.util.parseBoolean(properties.allowUpdate) === true;\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"geolocation\");\n\n    // Render template\n    var html = $.fasttmpl(template, self.properties);\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Call base\n    return this._super(invalidElements);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} succes_callback\r\n      * @param {} fail_callback\r\n      */\n  getCurrentPosition: function getCurrentPosition(succes_callback, fail_callback) {\n    var self = this;\n\n    if (typeof self.geolocation === \"undefined\") {\n      if (fail_callback)\n      fail_callback(bizagi.localization.getResource(\"render-control-unsuported-by-browser\").replace(\"{0}\", self.properties.type));\n      return;\n    }\n\n    var onSuccess = function onSuccess(position) {\n      if (succes_callback)\n      succes_callback(position);\n    };\n\n    var onError = function onError(error) {\n      var strMessage = self.getErrorMessage(error);\n\n      if (fail_callback)\n      fail_callback(strMessage);\n    };\n\n    return self.geolocation.getCurrentPosition(onSuccess, onError);\n  },\n\n  /**\r\n      * Get message of error\r\n      * @param error\r\n      * @returns {*|string}\r\n      */\n  getErrorMessage: function getErrorMessage(error) {\n    var strMessage = \"\";\n\n    // Check for known errors\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n      case 1:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;\n      case error.POSITION_UNAVAILABLE:\n      case 2:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-position-unavailable\");\n        break;\n      case error.TIMEOUT:\n      case 3:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-timeout\");\n        break;\n      default:\n        strMessage = \"WD: \" + bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;}\n\n\n    return strMessage;\n  },\n\n  /**\r\n      * Change precision number of coordinates\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  performPrecision: function performPrecision(data) {\n    var geolocation = data.split(\" \") || \"\";\n\n    if (!geolocation) return data;\n\n    try {\n      var latitude = parseFloat(geolocation[0].trim());\n      var longitude = parseFloat(geolocation[1].trim());\n\n      return latitude.toPrecision(10) + \" \" + longitude.toPrecision(10);\n    } catch (e) {\n      return data;\n    }\n  } });","/*\r\n*   Name: BizAgi Render Association Class\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define basic stuff for association renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.association\", {}, {\n\n  /*\r\n                                                     *   Update or init the element data\r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var properties = self.properties;\n\n    // Fill default properties\n    properties.property = \"flipped\";\n    properties.idRender = self.properties.id;\n    properties.allowFlip = typeof properties.allowFlip != \"undefined\" ? bizagi.util.parseBoolean(properties.allowFlip) : true;\n    properties.flipped = typeof properties.flipped != \"undefined\" ? bizagi.util.parseBoolean(properties.flipped) : false;\n    properties.flipstate = properties.flipped;\n\n\n    // data of entities (left and right)\n    properties.leftData = properties.leftData || [];\n    properties.rightData = properties.rightData || [];\n\n    if (properties.value) {\n      self.processPropertyValue();\n    }\n  },\n\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).\n    done(function (flip) {\n\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var html = $.fasttmpl(template, self.properties, {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n\n  /*\r\n     * Returns the flip state\r\n     */\n  getFlipAssociation: function getFlipAssociation() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode == \"execution\")\n    return self.dataService.getFlipAssociation(self.properties);\n\n    return false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var value = self.getValue();\n\n    return value;\n  },\n\n  /*\r\n     *   Get the template \r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"association\";\n  },\n\n\n  /**\r\n     * Get Left Data, verify if flipper flags sets true\r\n     * \r\n     * @param column {'0'||'1'}\r\n     */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.data;\n    var data = [];\n    var associationData = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(associationData, function (key, item) {\n      data.push({ id: item.id, value: item.value });\n    });\n\n    return data;\n  },\n\n  /**\r\n     * Association of right elements\r\n     */\n  getRightAssociation: function getRightAssociation(leftId) {\n    var self = this;\n    var properties = self.data;\n    var association = [];\n\n\n    var isChecked = function isChecked(leftId, idRight) {\n      var checked = false;\n      $.each(properties.formatJson.value, function (key, value) {\n        if (!checked && value.id == leftId && value.value.indexOf(idRight) >= 0) {\n          checked = true;\n        }\n      });\n\n      return checked;\n    };\n\n    // create association and check element\n    if (properties.flipped) {\n      // left element\n      $.each(properties.leftData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(data.id, leftId) });\n\n\n      });\n    } else {\n      $.each(properties.rightData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(leftId, data.id) });\n\n      });\n    }\n\n    return association;\n  },\n\n\n  removeElement: function removeElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Remove right element from left panel\n          $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n            if (leftId == removeValue) {\n              // Splice from array\n              self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n            }\n          });\n        }\n      } else if (data.id == leftId) {\n        // Remove right element from left panel\n        $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n          if (rightId == removeValue) {\n            // Splice from array\n            self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n          }\n        });\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n\n  addElement: function addElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Add right element to left panel\n          self.properties.formatJson.value[key][\"value\"].push(leftId);\n        }\n      } else if (data.id == leftId) {\n        // Add right element to left panel\n        self.properties.formatJson.value[key][\"value\"].push(rightId);\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n  makeJsonBase: function makeJsonBase() {\n    var self = this;\n    self.properties.formatJson = self.properties.formatJson || {\n      leftXpath: self.properties.leftXpath,\n      rightXpath: self.properties.rightXpath,\n      leftFactName: self.properties.leftFactName,\n      rightFactName: self.properties.rightFactName,\n      value: self.properties.value };\n\n  },\n\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n\n    if (self.properties.formatJson) {\n      var values = self.properties.formatJson.value;\n    } else {\n      values = self.properties.value;\n    }\n\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var data = values[i];\n      if (data && data.value.length > 0) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /*\r\n     * This method process the value.\r\n     * changes the format to send request\r\n     */\n  processPropertyValue: function processPropertyValue() {\n    var self = this;\n    var properties = self.properties;\n    var values = properties.value;\n    var result = [];\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var value = values[i];\n      result.push({ id: value[0], value: value[1] });\n    }\n\n    properties.value = result;\n  } });","/**\r\n *   Name: Bizagi Render Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for uploads\r\n */\n\n$.Class.extend(\"bizagi.rendering.upload\", {}, {\n  /***\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    var maxFileSizeOfProperty = Number(properties.maxSize) || 0;\n    var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 4091904;\n\n    properties.maxSize = maxFileSizeOfProperty || maxFileSizeOfUser;\n    properties.maxfiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n      var defExtensions = [];\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length > 0) {\n          defExtensions.push(\"*.\" + singleExtensions[i]);\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = defExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddUrl();\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) || false;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null && properties.editable ? bizagi.util.parseBoolean(properties.allowDelete) : false;\n\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"upload\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable,\n      haveFiles: self.filesCount !== 0,\n      noFiles: self.filesCount === 0,\n      allowSendInMail: properties.allowSendInMail });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {jQuery|*}\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var itemTemplate = self.getTemplateItemName();\n    var template = self.renderFactory.getTemplate(itemTemplate);\n    var form = self.getFormContainer();\n    var printVersion = form.params && form.params.printversion;\n\n    // Don't render urls when not running in execution mode\n    var url = !self.isExecutionMode() ? \"\" : self.buildItemUrl(file); // TODO: Review if need it: javascript:void(0);\n\n    var html = $.fasttmpl(template, {\n      id: file.id,\n      mode: mode,\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: bizagi.util.decodeURI(file.fileName),\n      editable: self.properties.editable,\n      printVersion: printVersion || false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getUploadXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: form.properties.sessionId,\n      contexttype: properties.contexttype });\n\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Removes a file from the upload control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = self.getUploadXpath() + (bizagi.util.isNumeric(fileId) ? \"[id=\" + fileId + \"]\" : \"[id='\" + fileId + \"']\");\n\n    return self.dataService.deleteUploadFile({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype }).\n    pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n\n    // Set files property\n    self.files = value || []; // Dont remove this line\n    self.filesCount = self.files.length;\n\n    // Call base\n    self._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*}\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var bValid = true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && properties.editable) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (self.filesCount <= 0 && !newRow) {\n        var inlineEdit = self.grid ? self.grid.properties.inlineEdit : true;\n\n        if (inlineEdit) {\n          message = self.getResource(\"render-required-upload\").replaceAll(\"#label#\", properties.displayName);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    data[prefix + \"xpath\"] = self.getUploadXpath();\n    data[prefix + \"idRender\"] = properties.id;\n    data[prefix + \"xpathContext\"] = properties.xpathContext;\n    data[prefix + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[prefix + \"contexttype\"] = properties.contexttype;\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the xpathContext to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpathContext: function getUploadXpathContext() {\n    return this.getXpathContext() || this.properties.xpathContext;\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (self.grid && self.grid.properties.inlineAdd === true) {\n        if (!self.hasValue() && !self.getControl().parents(\"tr\").data(\"new-row\")) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      } else {\n        if (!self.hasValue()) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  setRenderRequired: function setRenderRequired(invalidElements, properties) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n    invalidElements.push({ xpath: properties.xpath, message: message });\n  },\n\n  /**\r\n      * Templates\r\n      */\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  },\n\n  /**\r\n      * Method to perform the format to value\r\n      * @param value\r\n      * @returns {((*)[]|*)[]}\r\n      */\n  formatValue: function formatValue(value) {\n    var validateObjectStructure = function validateObjectStructure(item) {\n      return !!(item.uploadId && item.fileName);\n    };\n    var validateArrayStructure = function validateArrayStructure(item) {\n      return !!(item[0] && item[1]);\n    };\n\n    return (value || []).reduce(function (result, item) {\n      var isFormatValid = false;\n      var validator = bizagi.util.bzValidator(item).\n      add(validateObjectStructure).\n      validate(function (response) {\n        isFormatValid = response.errors && !response.errors.length;\n        if (isFormatValid) {\n          result.push([item.uploadId, item.fileName]);\n        }\n      });\n\n      if (!isFormatValid) {\n        validator.add(validateArrayStructure, \"The value is not in a valid format\").\n        validate(function (response) {\n          if (response.errors && response.errors.length > 0) {\n            console.warn(response.errors);\n          } else {\n            result.push([item]);\n          }\n        });\n      }\n\n      return result;\n    }, []);\n  } });","/**\r\n *   Name: Bizagi Render ECM upload control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for ECM Control\r\n */\n\n$.Class.extend(\"bizagi.rendering.ecm\", {}, {\n\n  /**\r\n                                              * Update or init the element data\r\n                                              * @param data\r\n                                              */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var self = this;\n    var properties = self.properties;\n\n    properties.maxSize = Number(properties.maxSize) || (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : properties.maxSize = Number(properties.maxSize) || 4091904);\n    properties.maxFiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.split(\";\");\n      for (var i = 0; i < singleExtensions.length; i++) {\n        singleExtensions[i] = \"*.\" + singleExtensions[i];\n      }\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=uploadECMFile\";\n    properties.editUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=updateECMFileContent\";\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n    properties.q_xpath = bizagi.util.encodeXpath(properties.xpath);\n    properties.showMetadata = properties.showMetadata === undefined || properties.showMetadata === null ? true : bizagi.util.parseBoolean(properties.showMetadata);\n\n    var dateFormat = this.getResource(\"dateFormat\");\n    var timeFormat = this.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n\n    properties.xpathContext = this.parent.properties.xpathContext || properties.xpathContext || \"\";\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param listControl\r\n      * @param fileProperties\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl(listControl, fileProperties) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"ecm\");\n    var mode = self.getMode();\n    var defer = new $.Deferred();\n\n    properties.value = fileProperties ? [[fileProperties.idFileUpload, fileProperties.fileName]] : self.value;\n    var html = $.fasttmpl(template, properties, {\n      getFileExtension: self.getFileExtension,\n      isImage: self.isImage });\n\n\n    if (self.properties.value != undefined) {\n\n      var lengthValues = self.properties.value.length;\n\n      if (lengthValues === 0) {\n        defer.resolve(html);\n      }\n\n      $.each(self.properties.value, function (key, value) {\n        var data = {};\n\n        data.idFileUpload = value[0];\n        data.fileName = value[1];\n        data.idPageCache = self.properties.idPageCache;\n        data.xpathContext = self.getXpathContext();\n        data.xPath = self.properties.xpath;\n        data.editable = self.properties.editable;\n        data.idAttrib = self.properties.idAttrib;\n\n        var form = self.getFormContainer();\n        if (form && form.properties && form.properties.sessionId) {\n          data.sessionId = form.properties.sessionId;\n        }\n\n        if (mode === \"execution\") {\n          $.when(self.renderFileLayout(data, fileProperties)).done(function (item) {\n            lengthValues--;\n\n            if (bizagi.loader.productBuildToAbout && bizagi.loader.productBuildToAbout.indexOf(\"10.4\") === 0) {\n              item = item.replaceAll(\"Handlers/MetadataFile\", \"Handlers/Metadata\");\n            }\n\n            html = self.replaceItemHtml(html, self.properties.id + \"-\" + data.idFileUpload, item);\n            if (lengthValues === 0) {\n              defer.resolve(html);\n            }\n          });\n\n        }\n      });\n    } else {\n      defer.resolve(html);\n    }\n    return defer.promise();\n  },\n\n  replaceItemHtml: function replaceItemHtml(html, id, replace) {\n    return html.replace(\"{{\" + id + \"}}\", replace);\n  },\n\n  renderFileLayout: function renderFileLayout(data, fileProperties) {\n    var self = this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\n\n    var deferred = $.Deferred();\n\n    $.when(self.dataService.getECMMetadata(data),\n    fileProperties ? [fileProperties] : self.dataService.getFileProperties(data)).\n    done(function (metaData, fileProperties) {\n\n      fileProperties[0].data = data;\n\n      // Make xpath context\n      fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\n      fileProperties[0].xpath = self.properties.xpath;\n\n      metaData[0].filename = data.fileName;\n      metaData[0].url = self.buildItemUrl(fileProperties[0]);\n\n      // Define File Properties\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].ecm_isVisible = fileProperties[0].isVisible;\n      metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\n      metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\n      metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\n      metaData[0].ecm_allowView = fileProperties[0].allowView;\n      metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\n      metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\n      metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].idFileUploads = fileProperties[0].idFileUpload;\n      metaData[0].xpath = fileProperties[0].xpath;\n      metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\n      metaData[0].deviceType = bizagi.detectDevice();\n\n      var html = $.fasttmpl(metadataTemplate, metaData[0]);\n      deferred.resolve(html);\n    });\n\n    return deferred.promise();\n  },\n\n  isImage: function isImage(file) {\n    var extension = this.getFileExtension(file);\n    var image = [\"JPG\", \"JPEG\", \"GIF\", \"PNG\", \"BMP\"];\n\n    return image.indexOf(extension.toUpperCase()) > -1 ? true : false;\n  },\n\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n\n    if (!file.data) {\n      file.data = { fileName: file.fileName, idAttrib: file.idAttrib };\n    }\n\n    return self.dataService.getECMFileUrl({\n      idFileUpload: file.idFileUpload,\n      xPath: file.xpath || file.xPath,\n      xpathContext: file.xpathContext,\n      idAttrib: file.data.idAttrib,\n      idPageCache: self.properties.idPageCache,\n      fileName: file.data.fileName.replace(/ /g, \"_\"),\n      p_sessionId: p_sessionId,\n      sessionId: file.data.sessionId || \"\" });\n\n  },\n\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var data = {};\n\n    // data.fileExt = properties.validExtensions;\n    // data.fileDesc = properties.validExtensions ? self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions : \"\";\n    data.xPath = properties.xpath;\n    data.idAttrib = properties.idAttrib;\n    data.xpathContext = properties.xpathContext;\n    data.metaValues = [];\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n\n    return data;\n  },\n\n  /**\r\n      * Get name of file extension\r\n      * @param fileName\r\n      * @returns {*}\r\n      */\n  getFileExtension: function getFileExtension(fileName) {\n    fileName = fileName || \"\";\n    return fileName.split(\".\").pop();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super(value, triggerEvents);\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length ? self.files.length : properties.value;\n  },\n\n  /**\r\n      * Gets xpath context\r\n      * @returns {*|string}\r\n      */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Removes a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.deleteECMFile(params).pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Lock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  lockUploadItem: function lockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.checkOutFile(params);\n  },\n\n  /**\r\n      * Unlock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  unlockUploadItem: function unlockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.cancelCheckOut(params);\n  } });","/**\r\n *   Name: Bizagi Render Yes-no Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for yes-no renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.yesno\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"yesno\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {boolean}\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmptyValue(value)) return false;\n    return bizagi.util.parseBoolean(value) !== null;\n  } });","/**\r\n *   Name: Bizagi Render Letter Class\r\n*   Author: Diego Parra\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for letter renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.letter\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Create a variable to check if the letter has been opened when editable\n    this.letterOpened = false;\n  },\n\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"letter\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"letter.readonly\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getLetterContent: function getLetterContent() {\n    // Set flag to true\n    this.letterOpened = true;\n\n    return this.dataService.getLetterContent({\n      url: this.properties.getUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Sends the content to the server in order to save\r\n      * @param {} content\r\n      */\n  saveLetterContent: function saveLetterContent(content) {\n    return this.dataService.saveLetterContent({\n      url: this.properties.saveUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache,\n      content: content });\n\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter() {\n    return this.dataService.getCanGenerateLetter({\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Saves the form\r\n      */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) return true;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) return true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required) {\n      if (self.letterOpened == false) {\n        message = self.getResource(\"render-letter-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Returns the current xpath\r\n      */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the current context xpath\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  } });","/**\r\n *   Name: Bizagi Render Form Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for form link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.formLink\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n\n    properties.displayType = \"value\";\n    properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"formLink\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      id: properties.id,\n      align: properties.valueAlign,\n      displayName: properties.displayName,\n      value: properties.value,\n      editable: properties.editable,\n      likeButton: bizagi.util.parseBoolean(properties.likeButton) || false });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n\n  },\n\n  /**\r\n      * Method to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Submits a edit request for a link display form\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    return self.dataService.editLinkForm({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: self.getFormLinkXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache });\n\n  },\n\n  /**\r\n      * Submits a link save request for the displayed form\r\n      * @param data\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: xpathContext,\n      submitData: data }).\n    done(function (response) {\n      var executeSubmitOnChange = true;\n\n      if (response && response.type === \"validationMessages\")\n      executeSubmitOnChange = false;\n\n      if (executeSubmitOnChange)\n      self.submitOnChange({});\n    });\n  },\n\n  /**\r\n      * Sends all the data to the server then refreshes the form\r\n      * @param data\r\n      * @returns {*} Returns a promise\r\n      */\n  saveFormLinkData: function saveFormLinkData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    var submitData = $.extend({}, data);\n    delete submitData.idPageCache;\n\n    return $.when(!bizagi.util.isEmpty(submitData) ? self.dataService.multiaction().submitData({\n      action: \"SAVE\",\n      data: submitData,\n      idPageCache: data.idPageCache,\n      xpathContext: xpathContext }) :\n    undefined);\n  },\n\n  /**\r\n      * Submits a rollback request\r\n      * @param params\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.rollbackLinkForm({\n          url: properties.rollbackUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: params ? params.idPageCache : properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a commit request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCommitRequest: function submitCommitRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.commitLinkForm({\n          url: properties.commitUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a checkpoint request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCheckpointRequest: function submitCheckpointRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.sendCheckpoint({\n          url: properties.checkpointUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a submitData request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitDataRequest: function submitDataRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.submitData({\n          url: properties.checkpointUrl,\n          action: \"SUBMITDATA\",\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Get Form Link xpath to use\r\n      * @returns {*}\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Don't do anything\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    // Don't do anything\n  } });","/*\r\n*   Name: Bizagi Render Cascading Combo Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for cascading combo renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.cascadingCombo\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Create dependency collection\n    self.dependants = [];\n    self.isDependant = false;\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.hasLocalData = bizagi.util.isEmpty(properties.parentCombo) ? properties.hasLocalData : false;\n\n    if (properties.value && properties.value.id === undefined)\n    properties.value = null;\n\n    self.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData)\n    properties.data = self.complementData(properties.data);\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n\n    // Check if this is a dependant combo\n    var parentCombo = self.parentCombo = self.getParentCombo();\n    if (parentCombo != null) {\n      var renderType = bizagi.util.normalizeType(parentCombo.properties.type);\n\n      if (/^cascadingcombo$/i.test(renderType)) {\n        self.isDependant = true;\n      }\n    }\n\n    // Apply element plugin, set a flag to avoid dependant combo ajax requests\n    self.initializingCascadingCombo = true;\n\n    // Call base\n    var result = this._super();\n\n    if (mode !== \"execution\") {\n      self.initializingCascadingCombo = false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n  /*\r\n     *   Refresh the combo, after it has been painted\r\n     */\n  refresh: function refresh(params, isInitialValue) {\n    var self = this;\n\n    // Wait until current element is rendered\n    $.when(self.isRendered()).done(function () {\n\n      // Unbind previous handler\n      // self.parentCombo.unbindDependantCombo(self);\n\n      // Clear current control\n      var control = self.getControl();\n      var mode = self.getMode();\n      control.empty();\n\n      // Render combo again\n      $.when(self.renderCombo(params)).then(function (html) {\n        // Append new element\n        control.html(html);\n\n        // Post-render method\n        self.postRender();\n\n        if (mode == \"execution\") {\n          self.configureHandlers();\n        }\n\n        // Set current value\n        if (self.getValue() !== undefined) {\n          self.setDisplayValue(self.getValue());\n        }\n\n        if (self.deferredVisible) {\n          self.deferredVisible.resolve();\n        }\n\n        self.trigger(\"select\", [self.value, isInitialValue]);\n\n      });\n    });\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode != \"execution\") return self.getDummyData();\n\n    // Do not load dependant combos when there are no parent id\n    if (self.isDependant) {\n      if (self.parentCombo && params) {\n        self.properties.remoteDataLoaded = false;\n      }\n\n      // Return an empty array when there are no parent defined when the combo is dependant\n\n      var parentValue = self.parentCombo.selectedValue ? self.parentCombo.selectedValue.id : '';\n\n      if (parentValue != '') {\n        params = params || {};\n        if (!params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"]) {\n          params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n        }\n        return this._super(params);\n      } else {\n        return [];\n      }\n    }\n\n    return this._super(params);\n  },\n\n\n  /* \r\n     *   Bind the combos to create the cascading feature\r\n     */\n  bindDependantCombo: function bindDependantCombo(dependantCombo) {\n    var self = this;\n    var renderType = bizagi.util.normalizeType(dependantCombo.properties.type);\n\n    // Check it is a cascading combo\n    if (/^cascadingcombo$/i.test(renderType)) {\n\n      // Append to dependant combos\n      self.dependants.push(dependantCombo);\n\n      // When this combo is selected we need to make the other combo to auto fill with an extra filter\n      dependantCombo.onChangeFunction = function (event, item, isInitialValue) {\n        // Fill items for next combo\n        self.refreshDependantCombo(dependantCombo, item.id, self.focusDependant, isInitialValue);\n\n        //if initial value is true, it prevents deleting the next combo\n        if (!isInitialValue) {\n          // Clean next inputs\n          dependantCombo.cleanInput();\n        }\n      };\n\n      if (!self.isEventBinded(\"select\")) {\n        self.bind(\"select\", dependantCombo.onChangeFunction);\n      }\n\n      // After the event binding has been made, we need to fill the new dependant render if this instance (the parent) has a value\n      if (!bizagi.util.isEmpty(self.getValue())) {\n\n        // Auto fill dependant items with current value\n        if (self.properties.hasLocalData) {\n          self.refreshDependantCombo(dependantCombo, self.getValue().id);\n        }\n\n      }\n    }\n  },\n  isEventBinded: function isEventBinded(event) {\n    if (typeof $._data(this.observableElement.get(0), \"events\") === \"undefined\") {\n      return false;\n    } else {\n      if (typeof $._data(this.observableElement.get(0), \"events\")[event] === \"undefined\") {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n\n\n  /* \r\n     *   Unbind the combos that are being redrawn\r\n     */\n  unbindDependantCombo: function unbindDependantCombo(dependantCombo) {\n    // When this combo is selected we need to make the other combo to auto fill with an extra filter\n    this.unbind(\"select\", dependantCombo.onChangeFunction);\n  },\n\n  /*\r\n     *   Fills the next dependant combo based on the given value\r\n     */\n  refreshDependantCombo: function refreshDependantCombo(dependant, parentValue, focus, isInitialValue) {\n    var self = this;\n    var params = {};\n    params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n\n    dependant.deferredVisible = $.Deferred();\n\n    if (!isInitialValue) {\n      // Clear dependant value\n      dependant.setValue(\"\", false);\n    }\n\n    dependant.refresh(params, isInitialValue);\n\n    if (focus) {\n      $.when(dependant.deferredVisible.promise()).done(function () {\n        dependant.inputCombo.trigger(\"click\");\n      });\n    }\n  },\n\n  /*\r\n     *   Empty html when render from action\r\n      */\n\n  emptyControlByChangeEditability: function emptyControlByChangeEditability() {\n    var control = this.getControl();\n    control.empty();\n  },\n\n  /* \r\n     *   Cleans the combo value\r\n     */\n  cleanInput: function cleanInput() {\n    this.triggerHandler(\"select\", { id: 0 });\n  },\n\n  /*\r\n     *   Search for the other cascading combo refering this one, by idRender\r\n     */\n  getParentCombo: function getParentCombo() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check if parentCombo is defined\n    if (properties.parentCombo === undefined)\n    return null;\n\n    // Get form reference\n    var form = self.getFormContainer();\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n    var controls = /^cascadingcombo$/i.test(renderType) ? form.getRenderByType(properties.type) : [];\n\n    var i = 0;\n    var j = 0;\n    var parents = [];\n\n    var control = null;\n\n    for (; i < controls.length; i++) {\n      if (properties.parentCombo === controls[i].properties.id) {\n        parents.push({ control: controls[i], index: i });\n      }\n    }\n\n    if (parents.length > 1) {\n      var parentLength, parent, xpathParent, parentArray;\n\n      for (; j < parents.length; j++) {\n        parent = parents[j].control;\n        xpathParent = parent.properties.xpath;\n        parentArray = xpathParent.split(\".\");\n        parentLength = parentArray.length;\n        xpathParent = parentArray.slice(0, parentLength - 1).join(\".\");\n\n        if (xpathParent === properties.xpath) {\n          control = controls[parents[j].index];\n          break;\n        }\n      }\n    } else {\n      control = form.getRenderById(properties.parentCombo);\n    }\n\n    // Return parent combo\n    return control;\n  },\n\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this;\n\n    // If the render has dependants we can't send to the server\n    return self._super() && bizagi.util.isMapEmpty(self.dependants);\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    var mode = this.getMode();\n\n    if (mode != \"execution\") return true;\n    return false;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n\n    if (!self.configured) {\n      // Call super\n      self._super();\n      self.configured = true;\n    }\n  },\n\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (self.isDependant && self.canBeSent() && self.itemSelected !== undefined)\n    return self._super(data, bRefreshForm);\n    return defer.resolve();\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    // Call original method\n    self._super();\n\n    if (self.value && self.isDependant == false) {\n      self.internalSetInitialValueFlag = true;\n      self.trigger(\"select\", [self.value, true]);\n    }\n\n    self.internalSetInitialValueFlag = false;\n  } });","/*\r\n*   Name: Bizagi Render List Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for list renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.list\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data \r\n                                               * @returns {} \r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.listSize = properties.listSize || 0;\n  },\n\n  /**\r\n      * Gets the template used by the combo render can be overriden in subclasses\r\n      * to reuse logic and just change the template\r\n      * @returns {} \r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"list\";\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs\r\n      * to data or not Can be overriden to change behaviour    \r\n      * @returns {} \r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  } });","/**\r\n *   Name: Bizagi Render MultiSelect Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for multiselect renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.multiSelect\", {}, {\n\n  /**\r\n                                                      * Update or init the element data\r\n                                                      * @param data\r\n                                                      */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    if (Array.isArray(this.value)) {\n      this.value = this.properties.value = JSON.encode({ \"value\": this.value });\n      this.properties.originalValue = this.properties.previousValue = this.value;\n    }\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.enableTyping = bizagi.util.parseBoolean(properties.enableTyping) !== null ? bizagi.util.parseBoolean(properties.enableTyping) : true;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @returns {*[]}\r\n      */\n  getData: function getData() {\n    var self = this;\n    var defer = new $.Deferred();\n    var properties = this.properties;\n\n    // Go to server\n    self.dataService.multiaction().getData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contexttype || null,\n      idPageCache: properties.idPageCache }).\n    done(function (data) {\n      properties.data = self.normalizeData(data);\n\n      defer.resolve(properties.data);\n\n    }).fail(function (data) {\n      var allowActions = true;\n      var form = self.getFormContainer();\n\n      if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\") {\n        allowActions = form.allowOnlineActions();\n      }\n\n      if (data.type === \"not-processed\" && allowActions) return;\n\n      defer.reject(data);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (Array.isArray(value)) {\n      value = JSON.encode({ \"value\": value });\n    }\n\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.value || [];\n  },\n\n  /**\r\n      * Get list of data\r\n      * @returns {*|Array}\r\n      */\n  getDataValue: function getDataValue() {\n    var list;\n\n    try {\n      list = JSON.parse(this.value);\n\n      return list.value || [];\n    } catch (e) {\n      return [];\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {*|Array|boolean}\r\n      */\n  hasValue: function hasValue() {\n    var values = this.getDataValue();\n\n    return values && values.length > 0;\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".bz-multiselect .bz-multiselect__tag:not(.bz-multiselect__plus)\", context);\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value\r\n      */\n  addElement: function addElement(value) {\n    var newValue = this.getDataValue();\n\n    newValue.push(value);\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value\r\n      */\n  removeElement: function removeElement(value) {\n    var idToRemove = value.id;\n    var newValue = this.getDataValue().\n    filter(function (item) {\n      return item.id !== idToRemove;\n    });\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Submit the selected data to the server in order to be saved\r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Mark a item how checked\r\n      * @param id\r\n      * @returns {*}\r\n      */\n  markAsChecked: function markAsChecked(id) {\n    var self = this;\n\n    return self.selected.some(function (item, index) {\n      var found = item.id === id;\n\n      if (found) self.selected.splice(index, 1);\n      return found;\n    });\n  },\n\n  isChecked: function isChecked(values, id) {\n    return values.some(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Method to verify if can add more items\r\n      * @param $tagsContainer\r\n      * @returns {boolean}\r\n      */\n  canAddMoreItems: function canAddMoreItems($tagsContainer) {\n    var self = this;\n    var containerWidth = parseInt($tagsContainer.css(\"width\"));\n    var $children = $tagsContainer.children();\n\n    var childrenWidth = $children.\n    toArray().\n    reduce(function (acc, child) {\n      acc += self.getElementWidth(child);\n      return acc;\n    }, 0);\n\n    return containerWidth > childrenWidth + self.Class.MORE_OPTION_WIDTH;\n\n  },\n\n  /**\r\n      * getElementWidth\r\n      * @param element\r\n      * @returns {*}\r\n      */\n  getElementWidth: function getElementWidth(element) {\n    var styles = window.getComputedStyle(element);\n    var outerWidth = $(element).outerWidth();\n    return outerWidth + [\n    \"padding-left\",\n    \"padding-right\",\n    \"margin-left\",\n    \"margin-right\"].\n    reduce(function (acc, property) {\n      acc += parseInt(styles[property]);\n      return acc;\n    }, 0);\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * @param query\r\n      * @param $container\r\n      */\n  filterList: function filterList(query, $container) {\n\n    $container.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = query.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n  },\n\n  /**\r\n      * Find item by id\r\n      * @param id\r\n      * @returns {[]}\r\n      */\n  findItemById: function findItemById(id) {\n    return (this.properties.data || []).find(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  },\n\n  /**\r\n      * Complement data from server before control implementation\r\n      * @param data\r\n      */\n  normalizeData: function normalizeData(data) {\n    (data || []).forEach(function (item) {\n      item.value = typeof item.value !== \"undefined\" && item.value !== null ? item.value : \"\";\n    });\n\n    return data;\n  } });","/*\r\n*   Name: Bizagi Render Search List Control\r\n*   Author: UI Forms Team\r\n*/\n\n$.Class.extend(\"bizagi.rendering.searchList\", {}, {\n\n  /**\r\n                                                     * Update or init the element data\r\n                                                     * @param {} data \r\n                                                     * @returns {} \r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // Set value\n    self.setValue(properties.value);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {} \r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      value: properties.value,\n      allowTyping: properties.allowTyping,\n      items: properties.value,\n      hasSearchForm: properties.searchForms ? true : false,\n      editable: properties.editable },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {} \r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setValue: function setValue(value) {\n    this.value = JSON.encode({ \"value\": value });\n    this.triggerRenderChange();\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value = { id:integer,value:[string || array] }\r\n      * @returns {} \r\n      */\n  addElement: function addElement(value) {\n    var list = JSON.parse(this.value);\n\n    list.value.push(value);\n\n    this.setValue(list.value);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value = { id:integer }\r\n      * @returns {} \r\n      */\n  removeElement: function removeElement(value) {\n    var list = JSON.parse(this.value);\n    var result = [];\n\n    $.each(list.value, function (key, val) {\n      if (val.id != value.id) {\n        result.push({ id: val.id, value: val.value });\n      }\n    });\n\n    this.setValue(result);\n  },\n\n  /**\r\n      * Remove last element to global value\r\n      * @returns {} \r\n      */\n  removeLastElement: function removeLastElement() {\n    var list = JSON.parse(this.value);\n\n    if (list.value.length > 0) {\n      list.value.pop();\n      this.setValue(list.value);\n    }\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    self.dataService.getSearchData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {} \r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {} \r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Check if the control has value\r\n      * @returns {} \r\n      */\n  hasValue: function hasValue() {\n    var list = this.getListItems();\n\n    return list.length > 0;\n  },\n\n  getListItems: function getListItems() {\n    var value = this.getValue();\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    return finalValue || [];\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","/**\r\n *   Name: Bizagi Render Money Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for money numbers\r\n */\n\n$.Class.extend(\"bizagi.rendering.money\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      var symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol : symbol;\n    } else {\n      properties.symbol = \"\";\n    }\n\n    properties.groupDigits = true;\n  } });","/**\r\n *   Name: Bizagi Render Radio Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.radio\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param data\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n\n    // Set a random identifier to fix a problem when using radio buttons inside grids and the plugin mismatch the elements because all of them have the same name\n    properties.unique = bizagi.util.randomNumber(1000, 1000000);\n  },\n\n  /**\r\n      * Gets the template used by the combo render\r\n      * Can be overridden in subclasses to reuse logic and just change the template\r\n      * @returns {string}\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"radio\";\n  },\n\n  /**\r\n      * Determines if we need to show the empty node or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs to data or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /**\r\n      * Adds custom parameters to process the template\r\n      * @returns {{vertical: boolean}}\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal,\n      horizontal: properties.horizontal };\n\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n    var selectedItem = self.element.find(\".ui-radio-state-checked\");\n\n    selectedItem.removeClass(\"ui-radio-state-checked\");\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n    self.clearDisplayValue();\n  },\n\n  /**\r\n      * Check value of control is changed\r\n      * @returns {boolean}\r\n      */\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n\n    var result = true;\n\n    if (value && value.length !== undefined) {\n      value = value[0];\n    }\n    if (compareValue && compareValue.length !== undefined) {\n      compareValue = compareValue[0];\n    }\n    if (baseValue && baseValue.length !== undefined) {\n      baseValue = baseValue[0];\n    }\n\n    value = value && value.id !== undefined ? value.id : value;\n    compareValue = compareValue && compareValue.id !== undefined ? compareValue.id : compareValue;\n    baseValue = baseValue && baseValue.id !== undefined ? baseValue.id : baseValue;\n\n    if (baseValue !== undefined) {\n      if (baseValue == value && value == compareValue) {\n        result = false;\n      } else {\n        if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n          result = false;\n        } else {\n          result = compareValue == value ? false : true;\n        }\n      }\n    } else {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    }\n\n    return result;\n  },\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var control = this.getControl();\n    control.empty();\n  } });","/**\r\n *   Name: Bizagi Render Image Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for image control\r\n */\n\n$.Class.extend(\"bizagi.rendering.image\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\n{\n\n  BASE_IMAGE: \"data:image/png;base64,\",\n\n  /**\r\n                                         * Update or init the element data\r\n                                         * @param data\r\n                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var maxSize = 4091904;\n\n    if (properties.maxSize) {\n      maxSize = Number(properties.maxSize);\n    } else if (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\") {\n      maxSize = Number(BIZAGI_SETTINGS.UploadMaxFileSize);\n    }\n\n    properties.maxSize = maxSize;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) === true;\n    properties.validExtensions = properties.validExtensions || \"\";\n    properties.isChanged = false;\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length != 0) {\n          singleExtensions[i] = \"*.\" + singleExtensions[i].replaceAll(\" \", \"\");\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddFileUrl(properties.isUserPreference);\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null;\n    self.initializeWidthAndHeight();\n\n  },\n\n  /**\r\n      * Update or init the element data\r\n      * @param data\r\n      */\n  initializeWidthAndHeight: function initializeWidthAndHeight() {\n    var properties = this.properties;\n\n    properties.isAutoWidth = false;\n    properties.isAutoHeight = false;\n\n    if (properties.width === -1) {\n      properties.width = \"100%\";\n      properties.isAutoWidth = true;\n    } else {\n      properties.width = properties.width + \"px\";\n    }\n\n    if (properties.height === -1) {\n      properties.height = \"auto\";\n      properties.isAutoHeight = true;\n    } else {\n      properties.height = properties.height + \"px\";\n    }\n  },\n\n  setData: function setData(value) {\n    var self = this;\n    var previousValue = self.getData();\n    if (bizagi.util.isEmpty(value)) {\n      this.properties.binaryValue = null;\n    } else {\n      this.properties.binaryValue = value instanceof Blob ? value : bizagi.util.b64toBlob(value, \"image/png\");\n    }\n\n    if (previousValue != this.properties.binaryValue) {\n\n      if (self.properties.required && self.isExecutionMode()) {\n        var isValidField = !self.checkRequired([]);\n        self.changeRequiredLabel(isValidField);\n      }\n\n      if (this.properties.isChanged) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  getData: function getData() {\n    return this.properties.binaryValue || [];\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"image\");\n    var form = self.getFormContainer();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      if (!self.isDisposed()) {\n        self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\n\n        if (!bizagi.util.isEmpty(self.properties.url)) {\n          if (form.properties.compatibilityVersion < 2)\n          self.properties.value = [[0, \"uploaded\"]];\n        } else {\n          self.properties.value = [];\n        }\n\n        self.setValue(self.properties.value);\n\n        var html = $.fasttmpl(template, { url: self.properties.url });\n        return html;\n      }\n    });\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"image-readonly\");\n    var html = $.fasttmpl(template);\n\n    return html;\n  },\n\n  /**\r\n      * This method return the name of template of items, please make a override in each device\r\n      * @returns {*}\r\n      */\n  getTemplateItem: function getTemplateItem() {\n    return this.renderFactory.getTemplate(\"image-item\");\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  renderUploadItem: function renderUploadItem() {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.getTemplateItem();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      var url = dataUrl || \"\";\n\n      var html = $.fasttmpl(template, {\n        url: url,\n        allowDelete: self.properties.allowDelete,\n        editable: self.properties.editable,\n        mode: mode });\n\n\n      self.properties.url = url;\n\n      return html;\n    });\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(params) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var url = \"\";\n\n    if (!this.isExecutionMode()) return $.Deferred().resolve(\"\").promise();\n\n    var parameters = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype,\n      property: params && params.property ? params.property : \"fileContent\",\n      dataType: \"text\" };\n\n\n    if (properties.isUserPreference) {\n      self.currentUser = bizagi.currentUser.idUser;\n      parameters.xpathContext = \"@Context.Users[id == \" + self.currentUser + \"]\";\n      parameters.contexttype = \"entity\";\n      parameters.surrogatekey = self.currentUser;\n    }\n\n    if (isVersion2OrSuperior) {\n      if (bizagi.util.isEmpty(self.properties.value) && !self.hasValue()) return $.Deferred().resolve(\"\").promise();\n\n      // forceBase64 - Allow to get the thumbnail image on desktop devices\n      if (!self.properties.forceBase64) {\n        parameters.sessionId = form.properties.sessionId;\n        parameters.property = \"fileBinaryContent\";\n        return self.dataService.downloadFile(parameters).\n        then(function (blob) {\n          self.setData(blob);\n          if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n          return bizagi.util.blobTob64(blob, false);\n        }).\n        then(function (base64) {\n          return bizagi.util.getDataUrl(base64, properties.url);\n        });\n      }\n    }\n\n    return self.dataService.multiaction().getPropertyData(parameters, \"text\").\n    then(function (data) {\n      if (data.charAt(0) === \"\\\"\") data = data.slice(1, -1);\n      if (data !== \"\") url = self.BASE_IMAGE + data;\n      self.setData(bizagi.util.b64toBlob(data));\n      return url;\n    });\n  },\n\n  buildItemUrlOffline: function buildItemUrlOffline() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getFormParams();\n    var loadImageFromForm = !properties.isChanged;\n    var id = self.buildOfflineImageId();\n\n    var parameters = {\n      idCase: formParams.idCase,\n      idWorkitem: formParams.idWorkitem,\n      id: id,\n      offlineType: formParams.offlineType,\n      loadImageFromForm: loadImageFromForm };\n\n\n    return $.when(self.dataService.getOfflineImage(parameters, bizagi.util.db.AttachmentType.Blob)).\n    then(function (blob) {\n      self.setData(blob);\n      if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n      return bizagi.util.blobTob64(blob, false);\n    }).\n    then(function (base64) {\n      return bizagi.util.getDataUrl(base64, properties.url);\n    });\n  },\n\n  /**\r\n      * Create an image offline\r\n      * @param path File in Browser or Path in Mobile Devices\r\n      * @param promise Promise to be resolved when save is completed\r\n      */\n  saveImageOffline: function saveImageOffline(path) {\n    var self = this;\n    var id = self.buildOfflineImageId();\n    var fileName = self.fileProperties !== undefined ? self.fileProperties.name : path.name;\n\n    return self.dataService.getFileService().resolveBlobFromPath(path, fileName).\n    then(function (blobImage) {\n      // Save the image as attachment\n      var formParams = self.getFormParams();\n      var parameters = {\n        idCase: formParams.idCase,\n        idWorkitem: formParams.idWorkitem,\n        id: id,\n        operationType: \"edition\",\n        offlineType: formParams.offlineType };\n\n\n      return self.dataService.saveOfflineImage(parameters, blobImage);\n    });\n  },\n\n  /**\r\n      * Builds the upload item url in real size\r\n      * @returns {*}\r\n      */\n  buildFullItemUrl: function buildFullItemUrl() {\n    return this.buildItemUrl({ \"property\": \"fileFullContent\" });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return this.properties.isChanged;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.properties.value || [];\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.visible) === false) {\n      return true;\n    }\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (self.properties.required) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (!newRow) {\n        var value = self.getValue();\n\n        if (value.length === 0) {\n          var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({ xpath: self.properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = self.getUploadXpath();\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = properties.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = properties.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = 'savefile';\n\n    if (properties.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contexttype;\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var $control = this.getControl();\n    $control.empty();\n  },\n\n  buildOfflineImageId: function buildOfflineImageId() {\n    var self = this;\n    var form = self.getFormContainer();\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n\n    return self.dataService.fileService.buildOfflineImageId(self.properties.value, self.properties.xpathContext, self.properties.xpath, isVersion2OrSuperior);\n  } });","/*\r\n*   Name: BizAgi User field render\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the basic behavior for userfields\r\n*/\n$.Class.extend(\"bizagi.rendering.userfieldDefinition\", {}, {\n\n  /*************************************************************/\n  /* Private section of the userfield                          */\n  /*************************************************************/\n\n  /*\r\n                                                                  *   Method to be overriden by userfields in order to ensure that custom files are loaded before the execution\r\n                                                                  */\n  getFileDependencies: function getFileDependencies() {\n    return null;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    var defer = $.Deferred();\n    var fileDependencies = self.getFileDependencies();\n    if (fileDependencies && fileDependencies.length > 0) {\n      bizagi.loader.loadFile(fileDependencies).\n      then(function () {\n        // After all dependencies has been resolved\n        self.internalRenderControl();\n        defer.resolve();\n      });\n\n    } else {\n      $.when(self.renderUserfieldControl()).done(function () {\n        defer.resolve();\n      });\n    }\n\n    return defer.promise();\n  },\n\n  renderUserfieldControl: function renderUserfieldControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n\n    var loadUserfield = function loadUserfield() {\n      var userEditableControl = self.getEditableControl();\n      if (userEditableControl) {\n        self.input = control.html(userEditableControl);\n      }\n      self.renderComplex();\n      def.resolve();\n    };\n\n\n    loadUserfield();\n\n\n    return def.promise();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n    var loadUserfieldReadOnly = function loadUserfieldReadOnly() {\n      try {\n        var userReadOnlyControl = self.getReadonlyControl();\n        if (userReadOnlyControl) {\n          self.input = control.html(userReadOnlyControl);\n        }\n        self.renderComplex();\n\n      } catch (error) {\n        var displayName = self.properties.displayName || \"Widget\";\n        control.html(\"<h6>\" + displayName + \"</h6>\");\n      }\n\n    };\n\n    if (self.ready) {\n      self.ready().done(function () {\n        loadUserfieldReadOnly();\n      });\n    } else {\n      loadUserfieldReadOnly();\n    }\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getReadonlyValue();\n  },\n\n  /*\r\n     *   Sets the value in the rendered control \r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call base\n    self.setValue(value);\n\n    // Set editable value in control\n    self.setEditableValue(value);\n  },\n\n  getValue: function getValue() {\n    var self = this;\n    return self.getEditableValue();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type == \"error\") {\n        // Workflow engine error, we gotta show it with error\n        self.getFormContainer().addErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Saves the form\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderElements: function getRenderElements(xpath) {\n    var self = this;\n    var result = $();\n    var controls = self.getFormContainer().getRenders(xpath);\n    $.each(controls, function (i, item) {\n      result = result.add($(item.element));\n    });\n\n    return result;\n  },\n\n  getServerResourceURL: function getServerResourceURL(resource) {\n    var self = this;\n    var url = \"Rest/Userfields/{0}/resource/{1}/{2}\";\n    url = url.replace(\"{0}\", self.properties.userfieldGuid);\n    resource = resource.replace(\"\\\\\", \"__\").replace(\"/\", \"__\");\n    var device = bizagi.util.detectDevice();\n    url = url.replace(\"{1}\", device);\n    url = url.replace(\"{2}\", resource);\n    //Rest/Userfields/{0}/resource/desktop/{1}\n    return url;\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderValue: function getRenderValue(xpath) {\n    var self = this;\n    var controls = self.getFormContainer().getRenders(xpath);\n    var control;\n    $.each(controls, function (index, item) {\n      if (!control || item.properties.editable) {\n        control = item;\n      }\n    });\n    if (control) {\n      return control.getValue();\n    } else {\n      return null;\n    }\n  },\n\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var form = self.getFormContainer();\n    form.refreshForm(properties.id);\n  },\n\n  /*\r\n     * Shows a jquery dialog\r\n     */\n  showDialog: function showDialog(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showDialog method\");\n  },\n\n  /*\r\n     *   Shows a browser popup\r\n     */\n  showPopup: function showPopup(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showPopup method\");\n  },\n\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value = self.properties.value;\n  } });\n\n\n\n\n\n$.Class.extend(\"bizagi.rendering.basicUserField\", {}, {\n\n  /*************************************************************/\n  /* methods to be overriden by the implementations            */\n  /*************************************************************/\n  getEditableControl: function getEditableControl() {\n  },\n\n  renderComplex: function renderComplex() {\n  },\n\n  // Returns the value of the control\n  getEditableValue: function getEditableValue() {\n    return bizagi.rendering.render.prototype.getValue.apply(this, arguments);\n  },\n\n  // \n  setEditableValue: function setEditableValue(value) {\n    return bizagi.rendering.render.prototype.setValue.apply(this, arguments);\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n  },\n\n  getReadonlyValue: function getReadonlyValue() {\n    // if the method is not overriden then call the parent method \n    return bizagi.rendering.render.prototype.getDisplayValue.apply(this, arguments);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    // Call base\n    self._super();\n  } });\n\n\n\n/*\r\n        *   This control will wrap any userfield in order to load the code remotely, \r\n        *   when executing renderControl, which is an async method\r\n        */\n$.Class.extend(\"bizagi.rendering.userfieldWrapper\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n    // Save userfield guid and name\n    self.initialParams = params;\n    self.userfieldGuid = this.properties.userfieldGuid;\n    self.userfieldName = this.properties.control;\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startUserfieldLoading: function startUserfieldLoading() {\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endUserfieldLoading: function endUserfieldLoading() {\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  internalPostRender: function internalPostRender() {\n    var self = this;\n    self.startUserfieldLoading();\n    $.when(self.getUserfieldControl()).\n    done(function (control) {\n      control.element = self.element;\n\n      // Add grid and surrogatekey properties if the userfield is a column userfield\n      if (self.column) {\n        control.isColumn = true;\n        control.grid = self.grid;\n        control.surrogateKey = self.surrogateKey;\n        control.properties.xpathContext = self.getControlXpathContext(control);\n        control.getControl = self.column.getControl;\n      }\n\n      return control.internalPostRender();\n    }).\n    always(function () {\n      self.endUserfieldLoading();\n    });\n  },\n\n  /*\r\n     *   Helper for userfields to fetch the xpathContext\r\n     */\n  getControlXpathContext: function getControlXpathContext(control) {\n    var self = this;\n    var properties = control.properties;\n\n    if (control.isColumn) {\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\" : control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\";\n    }\n\n    return properties.xpathContext;\n  },\n\n\n  getUserFieldInstance: function getUserFieldInstance(params) {\n    console.log(\"not implemented\");\n  },\n\n  /*\r\n     *   Replicate all userfield methods to this instance in order to create a proxy\r\n     */\n  replicateUserfieldMethods: function replicateUserfieldMethods(control) {\n    var self = this;\n    for (var key in control.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"subscribe\" || key == \"unsubscribe\" ||\n      key == \"publish\" || key == \"render\" || key == \"triggerHandler\" || key == \"dispose\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ if (this.userfieldInstance) return this.userfieldInstance.' + key + '.apply(this.userfieldInstance, arguments); return null;};tmp');\n    }\n\n    // Replicate properties and value\n    control.properties = self.properties;\n    control.value = self.value;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutUserField = setTimeout(function () {\n      if (self.userfieldInstance) {\n        self.userfieldInstance.unbind(\"renderchange\");\n        self.userfieldInstance.dispose();\n      }\n      clearTimeout(timeOutUserField);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","/**\r\n *   Name: Bizagi Render Column ReadOnly Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly-columns\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.columns.readonly\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    // Define the column as readonly\n    properties.editable = required = false;\n  },\n\n  /**\r\n      * Return true if the column is read-only, so we can make a quick render\r\n      */\n  isReadonly: function isReadonly() {\n    return true;\n  },\n\n  /**\r\n      * Method to check if a value is valid or not in this render\r\n      */\n  isValueValid: function isValueValid() {\n    // It is always valid because the column is readonly\n    return true;\n  } });","/*\r\n*   Name: BizAgi Render Combo Column Decorator Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for Combo Columns\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.combo\", {}, {\n\n  /*\r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n    properties.recalculate = bizagi.util.parseBoolean(properties.recalculate) || false;\n\n    if (bizagi.util.isOfflineForm({ context: this })) {\n      properties.recalculate = false;\n    }\n  },\n\n\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n    var properties = this.properties;\n\n    this._super(decorated);\n\n    if (!properties.recalculate) {\n      decorated.originalGetData = decorated.getData;\n      decorated.getData = this.getDataForAllCells;\n      decorated.findDataById = this.findDataById;\n    }\n  },\n\n  findDataById: function findDataById(id) {\n    var self = this;\n    var result = {};\n    if (this.column && this.column.comboData) {\n      $.each(this.column.comboData, function (key, value) {\n        if (value.id == id) {\n          result = value;\n        }\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Single data fetch for all the cells\r\n     */\n  getDataForAllCells: function getDataForAllCells(params) {\n    var column = this.column;\n    if (column.comboData) return column.comboData;\n    if (column.fetchingData) return column.dataPromise;\n\n    // Start fetching\n    column.fetchingData = true;\n    column.dataPromise = $.when(this.originalGetData(params)).\n    pipe(function (result) {\n      column.comboData = result;\n      column.fetchingData = false;\n      return result;\n    });\n\n    return column.dataPromise;\n  },\n\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    if (value && bizagi.util.isString(value)) {\n      self._super(surrogateKey, value);\n    } else if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {return i != 0;}) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (self.properties.type == \"columnRadio\") {\n      self._super(surrogateKey, null);\n      decorated.selectedValue = value;\n    } else if (value && typeof value == \"number\") {\n      self._super(surrogateKey, value);\n    } else {\n      // Set null values when the entry array is null\n      self._super(surrogateKey, null);\n      decorated.selectedValue = \"\";\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultValue[0];\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value.id;\n\n    return value;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    var label = decorated.getSelectedValue();\n\n    // Build value for grid data\n    var valueForGrid = [];\n    if (value && (value.id > 0 || bizagi.util.isString(value.id))) {\n      valueForGrid.push([]);\n      valueForGrid[0].push(value.id);\n      valueForGrid[0].push(label);\n    } else {\n      valueForGrid.push([]);\n    }\n\n    return valueForGrid;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    if (value) return value.id;\n    return value;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  renderReadOnly: function renderReadOnly(key, value) {\n    var self = this;\n    var decorated = self.getDecorated(key);\n    var properties = self.properties;\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + key + \"]\" : self.grid.properties.xpath + \"[id=\" + key + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(key, value);\n\n    return result;\n  } });","/**\r\n*   Name: Bizagi Render Date Column Decorator Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for Date Columns\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.columns.date\", {}, {\n\n  /*\r\n                                                      *   Sets the internal value\r\n                                                      */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) return;\n\n    self._super(surrogateKey, value);\n    if ((value === null || value === undefined) && self.properties.defaultvalue !== undefined) {\n      value = self.setDefaultValue(surrogateKey, decorated);\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey === \"summary\") return self._super(surrogateKey, value);\n\n    if (value == null) {\n      decorated.setValue(value, false);\n      decorated.properties.displayValue = \"\";\n    }\n\n    var date = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime);\n\n    if (date === 0) {\n      // force another attempt in order to check invariant format for the value with time or without time (reverse option)\n      date = bizagi.util.dateFormatter.getDateFromInvariant(value, !decorated.properties.showTime);\n    }\n    // Format date to current format\n    if (date !== 0) {\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      var formattedDate = bizagi.util.dateFormatter.formatDate(date, decorated.properties.fullFormat, datePickerRegional);\n\n      // Set formatted value in display value property\n      decorated.properties.displayValue = formattedDate;\n\n      // Send original value to decorated control, because it must be with invariant format\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultvalue;\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n\n    value = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime || false);\n\n    value = bizagi.util.dateFormatter.formatInvariant(value, true);\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  } });","/**\r\n *   Name: BizAgi Render Combo Column Decorator Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define basic stuff for Combo Columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.search\", {}, {\n  /*\r\n                                                        *   Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    if (properties.advancedSearch && this.getMode() === \"execution\") {\n      properties.submitOnChange = bizagi.util.parseBoolean(properties.submitOnChange) || false;\n      properties.submitOnChange = (properties.submitVersion || 1) > 1 ? properties.submitOnChange : true;\n    }\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param decorated\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    // Change the xpath context\n    var xpathContext;\n\n    if (this.properties.xpathContext.length > 0) {\n      xpathContext = this.properties.xpathContext + \".\" + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    } else {\n      xpathContext = this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    }\n\n    decorated.properties.xpathContext = xpathContext;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    return value;\n  },\n\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    var compositeValue = self.getCompositeValue(surrogateKey);\n    if (!!compositeValue && typeof compositeValue.id !== \"undefined\" && compositeValue.id == value) {\n      value = compositeValue;\n    }\n\n    if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\n          return i != 0;\n        }) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (value && value.id && value.label) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.label;\n    } else {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = \"\";\n    }\n  } });","/**\r\n *   Name: Bizgi Render Hidden Column Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hidden-columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.hidden\", {}, {\n\n  /**\r\n                                                         * Method to determine if the render value can be sent to the server or not\r\n                                                         * @returns {}\r\n                                                         */\n  canBeSent: function canBeSent() {\n    return true;\n  } });","/**\r\n *   Name: Bizagi Render Document Generator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for document generator render\r\n */\n\n$.Class.extend(\"bizagi.rendering.document\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    var properties = this.properties;\n\n    properties.validate = bizagi.util.parseBoolean(properties.validate) != null ? bizagi.util.parseBoolean(properties.validate) : false;\n    properties.downloadalldocuments = properties.downloadalldocuments ? properties.downloadalldocuments : false;\n    properties.allowGenerate = properties.allowGenerate !== undefined ? properties.allowGenerate : true;\n    properties.append = properties.append ? properties.append : false;\n\n    if (properties.caption) {\n      properties.caption = $.trim(properties.caption);\n\n      if (properties.caption.length === 0) {\n        properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n      }\n    } else {\n      properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n\n    self.preRenderControl();\n\n    var properties = self.properties;\n    var mode = self.getMode();\n    var downloadAllDocuments = properties.downloadalldocuments;\n    var allowGenerate = properties.allowGenerate;\n    var template = self.renderFactory.getTemplate(self.getTemplate());\n    var documents = properties.value || [];\n    var noFiles = documents ? documents.length === 0 : true;\n\n    // Render template\n    var html = self.getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles);\n\n    // Render current children\n    var items = this.renderDocumentsHtml(documents);\n    items += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param template\r\n      * @param mode\r\n      * @param downloadAllDocuments\r\n      * @param allowGenerate\r\n      * @param properties\r\n      * @param noFiles\r\n      * @returns {*|jQuery}\r\n      */\n  getControlHtml: function getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n\n    return $.fasttmpl(template, {\n      noActivateButton: false,\n      editable: mode !== \"execution\",\n      mode: mode,\n      downloadalldocuments: downloadAllDocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append,\n      caption: properties.caption,\n      noFiles: noFiles,\n      allowSendInMail: properties.allowSendInMail });\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getXpath: function getXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  preRenderControl: function preRenderControl() {\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {boolean}\r\n      */\n  activateButton: function activateButton() {\n    return true;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  },\n\n  /**\r\n      * Renders a single document item\r\n      * @param file\r\n      * @returns {*|jQuery}\r\n      */\n  renderDocumentItem: function renderDocumentItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildItemUrl(file);\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: file.fileName,\n      id: file.id,\n      mode: mode,\n      editable: self.properties.editable,\n      joined: false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: self.getSessionId() });\n\n  },\n\n  /**\r\n      * Builds the download all items item url\r\n      * @returns {*}\r\n      */\n  buildAllDocumentsUrl: function buildAllDocumentsUrl() {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getAllDocumentsDownloadUrl({\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      idCase: properties.caseId,\n      idWorkItem: properties.workitemId,\n      sessionId: self.getSessionId() });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @returns {string}\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    return \"<div></div>\";\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode !== \"design\") {\n      var control = self.getControl();\n      var htmlControl = self.renderControl();\n\n      control.append(htmlControl);\n\n      self.updateControlForPrintMode(control);\n\n      // Execute the same as post-render\n      self.postRender();\n    }\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  validateContainer: function validateContainer() {\n    // Check if the form is valid, then generate\n    var form = this.getFormContainer();\n    return form.validateForm();\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  save: function save() {\n    var form = this.getFormContainer();\n\n    return form.saveForm();\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Replaces a {{actions}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceActionsHtml: function replaceActionsHtml(html, replace) {\n    return html.replace(\"{{actions}}\", replace);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) return true;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false) return true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && !properties.buttonExecuted) {\n      if (self.value) {\n        if (self.value.length > 0) return true;\n        message = self.getResource(\"render-document-required-text\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Attach handler\n    var $generateLink = $(\".ui-bizagi-button-documentgenerator\", self.getControl());\n\n    if (self.isExecutionMode()) {\n      $generateLink.click(function (e) {\n        if (e.isPropagationStopped()) return;\n        e.stopPropagation();\n\n        self.properties.buttonExecuted = true;\n\n        if (self.properties.validate) {\n          // Check if the form is valid, then generate\n          var isValid = self.validateContainer();\n          if (isValid) {\n            self.documentTemplateGenerate();\n          }\n        } else {\n          // Just generate the form\n          self.documentTemplateGenerate();\n        }\n\n        self.properties.buttonExecuted = false;\n      });\n\n      // Configure basic handlers\n      self.attachEvents();\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    if (this.isExecutionMode()) {\n      this.attachEvents();\n    }\n  },\n\n  /**\r\n      *  Configure event handlers\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var $control = self.getControl();\n\n    // Configure download handler for document item\n    $(\".ui-bizagi-document-upload-item a > span\", $control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      var $item = $(this).closest(\".ui-bizagi-document-upload-item\");\n      var file = $item.data();\n\n      if (!file.joined) {\n        self.downloadFile(file);\n      } else {\n        self.downloadAllFiles({ filename: \"TemplatesConcatFilesToPDF.pdf\" });\n      }\n    });\n\n    // Configure preview handler\n    $(\".ui-bizagi-container-documents-item-delete\", $control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      self.deleteDocumentTemplate($(this).data(\"filename\"));\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      * @param filename\r\n      */\n  deleteDocumentTemplate: function deleteDocumentTemplate(filename) {\n    var self = this;\n    var params = {\n      xpath: self.properties.xpath + \"[fileName='\" + filename + \"']\",\n      idRender: self.properties.id,\n      xpathContext: self.getContextXpath(),\n      idPageCache: self.properties.idPageCache };\n\n\n    self.startLoading();\n\n    $.when(self.dataService.deleteUploadFile(params)).\n    done(function () {\n      $.when(self.dataService.multiaction().getPropertyData({\n        xpath: self.properties.xpath,\n        idRender: self.properties.id,\n        xpathContext: self.getContextXpath(),\n        idPageCache: self.properties.idPageCache,\n        property: \"value\" })).\n      done(function (documents) {\n        self.resolveDeleteDocumentTemplate(documents, false, self.properties.downloadalldocuments);\n\n        // Finish loading\n        self.endLoading();\n      });\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n\n    self.startLoading();\n\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    self.save().done(function () {\n\n      bizagi.showErrorAlertDialog = false;\n\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function () {\n\n        // Fetch again the value property\n        $.when(self.dataService.multiaction().getPropertyData({\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: self.getContextXpath(),\n          idPageCache: properties.idPageCache,\n          property: \"value\" })).\n        done(function (documents) {\n          self.resolveDocumentTemplateGenerate(documents, false, properties.downloadalldocuments);\n\n          // Finish loading\n          self.endLoading();\n        });\n\n      }).fail(function (error) {\n        self.endLoading();\n\n        // Add error messages\n        self.showErrorMessage(error);\n      });\n    }).fail(function (message) {\n      self.endLoading();\n\n      // Add error messages\n      self.showErrorMessage(message);\n    });\n  },\n\n  /**\r\n      * Show the error message when something went wrong with the service.\r\n      * @param error\r\n      */\n  showErrorMessage: function showErrorMessage(error) {\n    var self = this;\n    var form = self.getFormContainer();\n    var messageText = self.resources.getResource('render-upload-alert-maxsize').replace(\"{0}\", BIZAGI_SETTINGS.UploadMaxFileSize);\n\n    try {\n      messageText = error && typeof error.responseText !== \"undefined\" ? JSON.parse(error.responseText).message : error;\n    } catch (e) {\n    }\n\n    form.addErrorMessage(messageText);\n    form.endLoading();\n  },\n\n  /**\r\n      * Shows the document if the flag is set. (virtual Function)\r\n      */\n  autoOpenDocuments: function autoOpenDocuments() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @param url\r\n      * @param filename\r\n      */\n  showDocumentPreview: function showDocumentPreview(url, filename) {\n  },\n\n  /**\r\n      * Identifies the extension of the file in a simpler way that ECM does\r\n      * @param file\r\n      * @returns {string}\r\n      */\n  returnCssTypeFile: function returnCssTypeFile(file) {\n\n    if (file == undefined || file.lenght === 0) {\n      return \"ui-bizagi-document-upload-item-generic-file\";\n    }\n\n    var extension = file.substr(file.lastIndexOf('.') + 1);\n\n    switch (extension) {\n      case 'docx':\n        return \"ui-bizagi-document-upload-item-doc\";\n      case 'pdf':\n        return \"ui-bizagi-document-upload-item-pdf\";\n      case 'xlsx':\n        return \"ui-bizagi-document-upload-item-xls\";\n      default:\n        return \"ui-bizagi-document-upload-item-generic-file\";}\n\n  },\n\n  /**\r\n      * Redraw documents when needed\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadAllDocuments) {\n    var self = this;\n    var control = self.getControl();\n    var html = \"\";\n    var documentContainer = $(\"[data-component='files']\", control);\n\n    // Clear current links\n    documentContainer.empty();\n\n    // Draw links again\n    html += this.renderDocumentsHtml(documents);\n\n    // Check if there are documents and the flag to download all are available to show the link.\n    html += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    documentContainer.append(html);\n\n    //Set value\n    self.setValue(documents);\n  },\n\n  /**\r\n      * This method must be implemented by the specific class of each device. (Virtual method)\r\n      * @param file\r\n      * @returns {*|*|*}\r\n      */\n  renderAllDocumentDownload: function renderAllDocumentDownload(file) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildAllDocumentsUrl();\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: properties.allowDelete,\n      filename: file.fileName,\n      mode: mode,\n      joined: true });\n\n\n    return self.removeDeleteButton(html);\n  },\n\n  /**\r\n      * removeDeleteButton\r\n      * @param html\r\n      * @returns {*}\r\n      */\n  removeDeleteButton: function removeDeleteButton(html) {\n    var startIndex = html.indexOf(\"<span class=\\\"ui-bizagi-container-documents-item-delete\");\n\n    if (startIndex > 0) {\n      var restOfWord = html.substring(startIndex);\n      var finishIndex = restOfWord.indexOf(\"</span>\") + 7;\n\n      return html.substring(0, startIndex) + restOfWord.substring(finishIndex);\n    } else {\n      return html;\n    }\n  },\n\n  /**\r\n      * Process request of DeleteDocumentTemplate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDocumentTemplateGenerate: function resolveDocumentTemplateGenerate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.autoOpenDocuments();\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Process request of DocumentTemplateGenerate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDeleteDocumentTemplate: function resolveDeleteDocumentTemplate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Method to renders the documents\r\n      * @param documents\r\n      * @returns {string}\r\n      */\n  renderDocumentsHtml: function renderDocumentsHtml(documents) {\n    var items = \"\";\n\n    for (var i = 0; i < documents.length; i++) {\n      var document = { id: documents[i][0], fileName: documents[i][1] };\n      var item = this.renderDocumentItem(document);\n\n      items += item;\n    }\n\n    return items;\n  },\n\n  /**\r\n      * Methos to renders action of document\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      * @returns {string}\r\n      */\n  renderActionsHtml: function renderActionsHtml(documents, noFiles, downloadAllDocuments) {\n    var actions = \"\";\n\n    if (downloadAllDocuments && !noFiles && documents.length > 0) {\n      var downloadAllDocumentsLink = { fileName: this.getResource(\"render-document-downloadalldocuments\") };\n      var action = this.renderAllDocumentDownload(downloadAllDocumentsLink);\n\n      actions += action;\n    }\n\n    return actions;\n  },\n\n  getTemplate: function getTemplate() {\n    return \"document\";\n  },\n\n  getTemplateItem: function getTemplateItem() {\n    return \"document-item\";\n  },\n\n  getErrorTemplate: function getErrorTemplate() {\n    return \"form-error\";\n  },\n\n  getTemplateDownload: function getTemplateDownload() {\n    return \"document-download\";\n  },\n\n  getTemplateReadonly: function getTemplateReadonly() {\n    return \"document-readonly\";\n  },\n\n  /**\r\n      * Get blob file\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  getDocumentFile: function getDocumentFile(file) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getFile({\n      idRender: properties.id,\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      contexttype: properties.contexttype }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  /**\r\n      * Get the download all items item\r\n      * @returns {*}\r\n      */\n  getAllDocumentFiles: function getAllDocumentFiles() {\n    return this.dataService.getAllDocuments({\n      xpath: this.getDocumentXpath(this.properties.xpath),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache,\n      idCase: this.properties.caseId,\n      idWorkItem: this.properties.workitemId }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  /**\r\n      * Download file\r\n      * @param file\r\n      */\n  downloadFile: function downloadFile(file) {\n    var self = this;\n\n    this.getDocumentFile(file).then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (error) {\n      var form = self.getFormContainer();\n      form && form.failHandler(error);\n    });\n  },\n\n  /**\r\n      * Download file\r\n      * @param file\r\n      */\n  downloadAllFiles: function downloadAllFiles(file) {\n    var self = this;\n\n    this.getAllDocumentFiles().then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (error) {\n      var form = self.getFormContainer();\n      form && form.failHandler(error);\n    });\n  } });","/**\r\n * Base definition of a range control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.range\", {}, {\n  /*\r\n                                                * Constructor\r\n                                                */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n  },\n\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    properties = self.properties;\n    var template;\n    var html = \"\";\n    // Render template\n    template = self.renderFactory.getTemplate(\"render-range\");\n    html = $.fasttmpl(template, {});\n    return html;\n  },\n  /**\r\n      * Sets the range controls in DOM\r\n      * @param minControl: min range control\r\n      * @param maxControl: max range control\r\n      */\n  setRanageControls: function setRanageControls(minControl, maxControl) {\n    var self = this;\n    self.minControl = minControl || null;\n    self.maxControl = maxControl || null;\n    var control = self.getControl();\n\n    var $maxCanvas = $(\".bz-range-maximum\", control);\n    var $minCanvas = $(\".bz-range-minimum\", control);\n\n    //var $maxCanvas = $('<div>hola</div>');\n    //var $minCanvas = $('<div>hola</div>');\n\n    self.renderRangeControl($minCanvas, minControl);\n    self.renderRangeControl($maxCanvas, maxControl);\n  },\n\n  /*\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    var self = this;\n    var minValue = self.minControl.getValue();\n    var maxValue = self.maxControl.getValue();\n\n    var value = {\n      min: minValue,\n      max: maxValue };\n\n    return value;\n  },\n\n  renderRangeControl: function renderRangeControl($canvas, control) {\n    $.when(control.render(\"render\")).done(function (html) {\n      $canvas.empty().append(html);\n      control.postRenderElement($canvas);\n    });\n  } });","/**\r\n * Base definition of a range date control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeDate\", {}, {\n\n  /**\r\n                                                    * Defines de min date an de max date to the range control\r\n                                                    */\n  defineRangeControl: function defineRangeControl(params) {\n    var self = this;\n\n    var dateMin = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var dateMax = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n\n    var minControl = new dateMin(self.getRenderProperties(\"min\"));\n    var maxControl = new dateMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range money control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeMoney\", {}, {\n\n  /**\r\n                                                     * Defines de min money an de max money to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var moneyMin = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var moneyMax = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new moneyMin(self.getRenderProperties(\"min\"));\n    var maxControl = new moneyMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range number control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeNumber\", {}, {\n\n  /**\r\n                                                     * Defines de min number an de max number to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var numberMin = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var numberMax = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new numberMin(self.getRenderProperties(\"min\"));\n    var maxControl = new numberMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    return renderProperties;\n  } });","/*\r\n*   Name: Bizagi Smartphone Form Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to smartphone devices\r\n*/\n\n// Auto extend\nbizagi.rendering.form.extend(\"bizagi.rendering.form\", {\n\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each container after processed   \r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n\n    self._super(container);\n\n    //Set button length\n    var buttons = self.getButtons();\n    var lengthButtons = buttons ? buttons.length : 0;\n\n    if (lengthButtons) {\n\n      $(document).data(\"auto-save\", \"auto-save\");\n\n      //bind event auto-save\n      $(document).unbind(\"save-form\").bind(\"save-form\", function (e, deferredSave) {\n        self.autoSaveEvents(deferredSave);\n      });\n\n      //bind event beforeunload\n      $(window).unbind(\"beforeunload\").bind(\"beforeunload\", function (e) {\n\n        var newData = {};\n        self.collectRenderValues(newData);\n\n        //if there are changes in the form show a message\n        if (!$.isEmptyObject(newData) && $(document).data(\"auto-save\")) {\n          return bizagi.localization.getResource(\"confirmation-savebox-message2\");\n        }\n\n        return;\n\n      });\n    }\n  },\n  /*\r\n      *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    $(form.children()).each(function () {\n      if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\n        complexGatewayContainer = this;\n      }\n    });\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Process buttons\n    self.processButtons(form);\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations);\n\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n\n    //Event to notify the native code the form will be showing a modal view \n    self.bind(\"modalViewDidAppear\", function () {\n      self.params.navigation.modalViewDidAppear();\n    });\n\n    //Event to notify the native code the form will be hiding a modal view \n    self.bind(\"modalViewDidDisappear\", function () {\n      self.params.navigation.modalViewDidDisappear();\n    });\n\n    // Set events for complex gateway interface\n    $(\".bz-rn-cg-checkbox\", complexGatewayContainer).bind(\"click\", function () {\n      var selectedElement = $(this).find(\"label\");\n      var transitionId = selectedElement.data(\"value\") || \"\";\n\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      if (bizagi.util.parseBoolean(selectedElement.data(\"checked\"))) {\n        // Uncheck element\n        selectedElement.removeClass(\"ui-checkbox-state-checked\");\n        selectedElement.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        selectedElement.data(\"checked\", false);\n        self.activeTransitions[transitionId] = false;\n      } else {\n        // Check element\n        selectedElement.addClass(\"ui-checkbox-state-checked\");\n        selectedElement.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\n        selectedElement.data(\"checked\", true);\n        self.activeTransitions[transitionId] = true;\n      }\n    });\n  },\n\n  /*\r\n     * Auto Save Events\r\n     */\n  autoSaveEvents: function autoSaveEvents(deferredSave, saveBox) {\n    var self = this;\n    var data = {};\n\n    self.collectRenderValues(data);\n\n    if (!$.isEmptyObject(data)) {\n      var isStartForm = self.properties.formtype === \"startform\";\n      var message = isStartForm ? bizagi.localization.getResource(\"confirmation-savebox-message4\") : bizagi.localization.getResource(\"confirmation-savebox-message1\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"warning\")).done(function () {\n        if (!isStartForm)\n        self.saveForm();\n\n        deferredSave.resolve();\n      }).fail(function () {\n        if (isStartForm) {\n          deferredSave.reject();\n        } else {\n          deferredSave.resolve();\n        }\n      });\n    } else {\n      deferredSave.resolve();\n    }\n  },\n\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    // Assemble the actions\n    var actions = [];\n    var defer = $.Deferred();\n    var submitDataAction = null;\n    var executeButtonAction = null;\n    var performAction = null;\n    var checkpointAction = null;\n    var commitAction = null;\n    var data;\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {\n      // When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          var messageComplexGateway = bizagi.localization.getResource(\"render-widget-complexgateway-path\");\n          var errorComplexGateway = bizagi.localization.getResource(\"render-widget-complexgateway-error\");\n\n          bizagi.showMessageBox(messageComplexGateway, errorComplexGateway, \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      performAction = self.dataService.submitData({\n        action: buttonProperties.action,\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n\n      performAction.tag = \"performAction\";\n    }\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n\n      //Validates if the method CHECKPOINT is supported\n      if (checkpointAction) {\n        actions.push(checkpointAction);\n      }\n\n      actions.push(executeButtonAction);\n\n      //Validates if the method COMMIT is supported\n      if (commitAction) {\n        actions.push(commitAction);\n      }\n\n      actions.push(executeButtonAction);\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply(this, data.deferreds).done(function (response) {\n        flowControlDeferred.resolve(response);\n      }).fail(function () {\n        console.log(\"Error: It was not possible resolve async actions on form \");\n        flowControlDeferred.reject();\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    $.when(flowControlDeferred).done(function () {\n      bizagi.util.smartphone.startLoading();\n\n      $.when(self.dataService.multiaction().execute({ actions: actions })).\n      done(function (responses) {\n        // End asynchronous operation\n        self.endLoading();\n        // Find validations\n        var bHasValidations;\n        $.each(responses, function (i, response) {\n          if (response.result.type == \"validationMessages\") {\n            // Something went wrong, we gotta display messages in notifications grid\n            self.addValidationMessage(response.result.messages);\n            bHasValidations = true;\n          }\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else {\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        //Removes the nonSupportedMethods to prevent further iterations\n        delete self.nonSupportedMethods;\n\n        defer.resolve();\n      }).fail(function (res1, res2, response) {\n        var messageError = \"\";\n        var errorTypeList = [\n        \"WaitForCompletionPlanException\", \"InvalidPlanStateException\", \"CustomMessageException\"];\n\n\n        if (buttonProperties.executeRule)\n        self.sendRollbackAction(buttonProperties.id);\n\n        if (response && response.error && errorTypeList.indexOf(response.error.errorType) !== -1) {\n          messageError = bizagi.localization.getResource(response.error.message);\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(messageError, null, false)).then(function () {\n            var _params = $.extend({}, buttonProperties, { forcePlanCompletion: true });\n\n            return $.when(self.internalSubmitForm(_params));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          messageError = typeof response === \"undefined\" ? bizagi.localization.getResource(\"workportal-general-error\") : response;\n          self.failHandler({ \"error\": messageError });\n          defer.reject(response);\n        }\n      }).always(function () {\n        bizagi.util.smartphone.stopLoading();\n      });\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n    return defer.promise();\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(id) {\n    return bizagi.util.validateFeatureSupport(\"commitRollbackActions\") ? this._super(id) : null;\n  },\n\n  prepareCommitAction: function prepareCommitAction(id) {\n    return bizagi.util.validateFeatureSupport(\"commitRollbackActions\") ? this._super(id) : null;\n  },\n\n  /**\r\n     *  TEMPLATE METHOD TO GET THE BUTTONS OBJECTS      \r\n     */\n  getButtons: function getButtons() {\n    var self = this;\n\n    if (self.getParams() && (handler = self.getParams().getButtons))\n    handler(self);\n\n    return $(\".ui-bizagi-button-container .action-button\", self.container);\n  },\n\n  processButtons: function processButtons() {\n    var self = this;\n    var params = self.getParams();\n\n    if (params && params.processButtons) {\n      var handler = params.processButtons;\n      handler(self);\n    }\n\n    var properties = self.properties;\n    properties.buttons = self.buttons;\n\n    // To cache a submit Data Buttom if exist\n    self.saveButton = null;\n    self.nextButton = null;\n\n    // Set saveButton and nextButton if exist\n    for (var i = 0, length = properties.buttons.length; i < length; i++) {\n      if (properties.buttons[i].action === \"save\") {\n        self.saveButton = properties.buttons[i];\n      } else if (properties.buttons[i].action === \"next\") {\n        self.nextButton = properties.buttons[i];\n      }\n    }\n\n    var navigation = self.getNavigation();\n\n    if (typeof navigation !== \"undefined\") {\n      //si tiene un viewContainer sera porque es una forma dentro de container de edicion\n      var view_container = self.getViewContainer();\n\n      if (typeof view_container !== \"undefined\") {\n        view_container.setNavigationButtons(self);\n      } else {\n        navigation.setNavigationButtons(self);\n      }\n    }\n\n    // bind de touch events\n    self.bindTouchEvents(self.getButtons());\n  },\n\n  bindTouchEvents: function bindTouchEvents(buttons) {\n    var self = this;\n    var touchMoveStart = 0;\n\n    // Don't process buttons if they are undefined in the template\n    if (!buttons || buttons.length === 0) return;\n\n    buttons.bind(\"touchstart\", function (event) {\n      event.preventDefault();\n\n      var pointer = event.originalEvent.targetTouches ? event.originalEvent.targetTouches[0] : event;\n      touchMoveStart = pointer.pageY;\n    });\n\n    buttons.bind(\"touchend , click\", function (event) {\n      event.preventDefault();\n\n      // Trigger the blur of the focused element in order to catch the render Change in the last changed control\n      $(\":focus\", self.container).blur();\n      var pointer = event.originalEvent && event.originalEvent.changedTouches ? event.originalEvent.changedTouches[0] : event;\n      var currentPositionY = pointer.pageY;\n\n      self.startLoading();\n\n      // If the finger is too far from the button when you stop touching the screen, then do nothing\n      if (event.type !== \"click\" && currentPositionY > touchMoveStart + 40 || currentPositionY < touchMoveStart - 40) {\n        self.endLoading();\n      } else {\n        var button = $(this);\n        var ordinal = button.attr(\"ordinal\");\n        var buttonProperties = self.buttons[ordinal];\n\n        // Execute button\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.endLoading();\n        });\n      }\n    });\n\n    return;\n  },\n\n  refreshForm: function refreshForm(focus, showLoading) {\n    var self = this;\n    var params = self.getParams();\n    var defer = new $.Deferred();\n\n    focus = focus || self.getFocus();\n    showLoading = showLoading != false ? true : showLoading;\n\n    var options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      isRefresh: true,\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\",\n      navigation: params.navigation,\n      view_container: params.view_container };\n\n\n    if (params.postRenderEdit || params.processButtons) {\n      options.postRenderEdit = params.postRenderEdit;\n      options.processButtons = params.processButtons;\n      options.originalParams = params.originalParams || {};\n      options.getButtons = params.getButtons;\n    }\n\n    $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"inherit\");\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    if (showLoading) {\n      self.startLoading();\n    }\n\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n      defer.resolve();\n      setTimeout(function () {\n        $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"touch\");\n      }, 1000);\n    }).fail(function () {\n      defer.reject();\n    }).always(function () {\n      if (showLoading) {\n        self.endLoading();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  getSelectedTabs: function getSelectedTabs() {\n    var self = this,\n    tabContainers = self.getElementsByType(\"tab\");\n\n    var tabs = $.map(tabContainers, function (tabContainer) {\n      return { tab: tabContainer.properties.id, selected: tabContainer.activeTab };\n    });\n\n    var selectedTabs = {};\n    var i = tabs.length;\n\n    while (i-- > 0) {\n      selectedTabs[tabs[i].tab] = tabs[i].selected;\n    }\n\n    return selectedTabs;\n  },\n\n  getNavigation: function getNavigation() {\n    var params = this.getFormContainer().getParams();\n    return params.navigation;\n  },\n\n  getViewContainer: function getViewContainer() {\n    var params = this.getFormContainer().getParams();\n    return params.view_container;\n  },\n\n  isFloatingButtonsEnabled: function isFloatingButtonsEnabled() {\n    var navigation = this.getNavigation();\n    return navigation && navigation.isFloatingButtonsEnabled();\n  },\n\n  isFormButtonsEnabled: function isFormButtonsEnabled() {\n    var navigation = this.getNavigation();\n    return navigation && navigation.isFormButtonsEnabled();\n  },\n\n  /*\r\n     * Add a validation message to the form\r\n     */\n  addValidationMessage: function addValidationMessage(validationMessage) {\n    var self = this;\n\n    if (typeof validationMessage == \"string\") {\n      self.validationController.showValidationMessage(validationMessage);\n    } else {\n      $.each(validationMessage, function (i, message) {\n        self.validationController.showValidationMessage(message);\n      });\n    }\n\n    self.validationController.expandNotificationBox();\n\n    // TODO: Review function\n    var navigation = self.getNavigation();\n    if (navigation && navigation.hasOwnProperty(\"undoRemoveLastSuscriber\")) {\n      self.getNavigation().undoRemoveLastSuscriber();\n    }\n  },\n\n  startLoading: function startLoading(delay) {\n    bizagi.util.smartphone.startLoading();\n  },\n\n  endLoading: function endLoading() {\n    bizagi.util.smartphone.stopLoading();\n  },\n\n  dispose: function dispose(params) {\n    var self = this;\n\n    // Active refresh on smartphone\n    if (typeof params === \"undefined\" || typeof params.isRefresh === \"undefined\" || params.isRefresh == false) {\n      self._super();\n    }\n  },\n\n  /*\r\n      *   Publish a global event that the facade will replicate, also will be triggered in the form\r\n      */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    this._super(eventType, data);\n    if (!this.parent) {\n      if (this.observableElement) {\n        return this.observableElement.trigger(eventType, data);\n      } else {\n        return null;\n      }\n    } else {\n      return this.parent.triggerGlobalHandler(eventType, data);\n    }\n  },\n\n  failHandler: function failHandler(error) {\n    var self = this;\n    self._super(error);\n\n    var error_obj = {};\n    try {\n      error_obj = JSON.parse(error) || {};\n    } catch (e) {\n      error_obj = error.length && error.length > 1 ? error[0] : error;\n    } finally {\n\n      //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n      if (error_obj.error) error_obj = error_obj.error;\n      if (error_obj.error) error_obj = error_obj.error;\n\n      //trigger the routing event in order to refresh the case\n      if (typeof error_obj.code !== \"undefined\" && error_obj.code == \"AUTH_ERROR\") {\n\n        $.notifier.add({\n          class_name: \"error\",\n          title: \"Error\",\n          text: bizagi.localization.getResource(\"render-idle-expired-error\", \"Idle timer expired. For safety reasons this view will be refreshed automatically in 5 seconds. Note that any unsaved data is lost.\").replace(\"%s\", \"5\"),\n          sticky: false,\n          time: 5000 });\n\n\n        setTimeout(function () {\n          self.triggerHandler(\"routing\", {\n            idCase: self.params.idCase,\n            idWorkitem: self.params.idWorkitem });\n\n        }, 5000);\n      }\n    }\n  },\n\n  /*\r\n     *   Build the container html\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    var html = $.kendoTmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() == \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation });\n\n\n    // Render children\n    return self.replaceChildrenHtml(html, self.renderChildrenHtml());\n  } });","/*\r\n*   Name: BizAgi Smartphone Panel Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to smartphone devices\r\n*/\n\n// Auto extend\nbizagi.rendering.panel.extend(\"bizagi.rendering.panel\", {}, {});","/*\r\n*   Name: BizAgi Desktop Panel Extension\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to desktop devices\r\n*/\n\n// Auto extend\nbizagi.rendering.contentPanel.extend(\"bizagi.rendering.contentPanel\", {}, {});","/*\r\n*   Name: BizAgi Smartphone Tab Container Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to Smartphone devices\r\n*/\n\n// Auto extend\nbizagi.rendering.tab.extend(\"bizagi.rendering.tab\", {\n  VISIBLE_TABS: 2 },\n{\n\n  /* POST RENDER CONTAINER ACTIONS\r\n  =================================================*/\n  postRenderContainer: function postRenderContainer(tab) {\n    var self = this;\n    self._super(tab);\n\n    // Apply any plugin or custom code to implement smartphone tabs\n    self.suscribeMethods();\n  },\n\n  suscribeMethods: function suscribeMethods() {\n    var self = this;\n    var tab = self.container;\n\n    //tabs\n    $(tab).bztabs({\n      activeTab: self.activeTab !== undefined && self.activeTab !== null ? self.activeTab : 0,\n      tabNumber: self.Class.VISIBLE_TABS,\n      domIncluded: self.ready(),\n      activate: function activate(event, ui) {\n        self.activeTab = $(event.currentTarget) ? $(event.currentTarget).data(\"index\") : 0;\n\n        var index = self.activeTab;\n        var form = self.getFormContainer();\n        var selectedTab = {};\n        selectedTab[self.children[index].parent.properties.id] = index;\n        form.setParam(\"selectedTabs\", selectedTab);\n      } });\n\n  },\n\n  /**\r\n      * Checks the visibility of the plus icon after partial refresh of itemTabs\r\n      */\n  checkPlusVisibility: function checkPlusVisibility() {\n    var self = this;\n    var visible_tabs = $(\".bz-header_select > .bz-wp-tabs-ui:not(:hidden)\", self.container);\n    if (visible_tabs.length <= self.Class.VISIBLE_TABS) {\n      $(\".bz-header_select\", self.container).removeClass(\"show-pluss\");\n    } else\n    {\n      $(\".bz-header_select\", self.container).addClass(\"show-pluss\");\n    }\n  } });","/*\r\n*   Name: BizAgi Smartphone Panel Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to Smartphone devices\r\n*/\n\n// Auto extend\nbizagi.rendering.tabItem.extend(\"bizagi.rendering.tabItem\", {}, {\n  /*\r\n                                                                   *   Constructor\r\n                                                                   */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Set tab ready deferred\n    self.tabReadyDeferred = new $.Deferred();\n    self.loadingDeferred = new $.Deferred();\n    self.tabActiveDeferred = new $.Deferred();\n  },\n  /**\r\n      * Change selected item\r\n      *\r\n      * @param {} argument\r\n      * @returns {}\r\n      */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n    var self = this;\n\n    $.when(self.ready()).done(function () {\n      // Changes item\n      var tabContainer = self.parent;\n      if (tabContainer && tabContainer.container.tabs.hasOwnProperty(\"option\")) {\n        tabContainer.container.tabs(\"option\", \"active\", self.container.data(\"tab-counter\"));\n      }\n    });\n  },\n\n  /**\r\n      * Focus on container\r\n      *\r\n      * @returns {}\r\n      */\n  focus: function focus() {\n    var self = this;\n\n    // Set this tab as an active container\n    self.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n     *  Hides / Show container\r\n     *\r\n     * @param {} argument\r\n     * @returns {}\r\n     */\n  changeVisibility: function changeVisibility(argument) {\n\n    var self = this;\n    var properties = self.properties;\n    var tabContainer = self.parent.container;\n    var activeTab = self.parent.getActiveTab();\n\n    var id = \"ui-bizagi-tab-\" + properties.id;\n    var header = $(\".bz-wp-tabs-item[data-reference-tab='#\" + id + \"']\", tabContainer);\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    $.when(self.ready()).\n    done(function () {\n      // Hide - show the render\n      if (properties.visible) {\n        self.container.css(\"display\", \"\");\n\n        self.setAsActiveContainer();\n\n        if (header && header.css(\"display\", \"none\")) {\n          var headerShow = $(\"div[data-reference-tab='#\" + id + \"']\", tabContainer);\n          headerShow && headerShow.css(\"display\", \"\");\n        }\n      } else {\n        self.container.hide();\n        if (header && header.css(\"display\", \"block\")) {\n          var headerHide = $(\"div[data-reference-tab='#\" + id + \"']\", tabContainer);\n          headerHide && headerHide.hide();\n        }\n      }\n\n    }).always(function () {\n      if (tabContainer && tabContainer.tabs.hasOwnProperty(\"option\")) {\n        tabContainer.tabs(\"option\", \"active\", activeTab);\n      }\n      self.parent.checkPlusVisibility();\n    });\n  } });","/*\r\n*   Name: BizAgi Smartphone Horizontal Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the horizontal container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.horizontal.extend(\"bizagi.rendering.horizontal\", {}, {});","/*\r\n *   Name: BizAgi Smartphones Group Extension\r\n *   Author: oscar osorio\r\n *   Comments:\r\n *   -   This script will redefine the group class to adjust to smartphones devices\r\n */\n\n// Auto extend\nbizagi.rendering.group.extend(\"bizagi.rendering.group\", {}, {\n  /* \r\n                                                              *   Template method to implement in each device to customize each container after processed\r\n                                                              */\n  postRenderContainer: function postRenderContainer(group) {\n    var self = this;\n\n    // Call base\n    self._super(group);\n    self.subscribeOnTouch();\n  },\n\n  /* \r\n     *   Expands group container \r\n     */\n  expand: function expand() {\n    var self = this;\n    var group = self.container;\n  },\n\n  /* \r\n     *   Collapses group container \r\n     */\n  collapse: function collapse() {\n    var self = this;\n    var group = self.container;\n  },\n\n  /* \r\n     *   Expands or collapse the container \r\n     */\n  toogleContainer: function toogleContainer(argument) {\n    var self = this;\n\n    if (argument) {\n      self.expand();\n    } else {\n      self.collapse();\n    }\n  },\n\n  subscribeOnTouch: function subscribeOnTouch() {\n    var self = this;\n    var group = self.container;\n\n    $(group).find(\">div.headertitle\").bind(\"click\", function () {\n      $(group).toggleClass(\"collapsed\");\n    });\n  } });","/*\r\n *   Name: BizAgi Smartphone Search Form Extension\r\n *   Author: Oscar O\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\n\n// Auto extend\nbizagi.rendering.searchForm.extend(\"bizagi.rendering.searchForm\", {}, {\n  /*\r\n                                                                        *   Render the results of the query\r\n                                                                        *   Resolved in each device\r\n                                                                        */\n  renderResult: function renderResult() {\n    var self = this;\n    var properties = self.properties;\n\n    // Creates grid definition\n    var data = {};\n    data.properties = {\n      displayName: self.getResource(\"render-search-advanced-results-label\"),\n      type: \"grid\",\n      xpath: \"searchForm\" + properties.id,\n      id: properties.id,\n      skipInitialLoad: true,\n      rowsPerPage: 10,\n      sortBy: properties.sortBy,\n      sortOrder: properties.sortOrder,\n      overrideGetRemoteData: function overrideGetRemoteData(params) {\n        return self.getRemoteData(params);\n      } };\n\n\n    data.elements = [];\n\n    // Creates columns\n    var columns = properties.columns;\n    $.each(columns, function (i) {\n      var column = {\n        render: {} };\n\n      column.render.properties = {\n        displayName: columns[i].caption,\n        xpath: columns[i].xpath,\n        editable: false };\n\n\n      $.extend(column.render.properties, self.parseAdditionalProperties(columns[i].dataType));\n\n      // Next conditional added to print only columns and not labels\n      // if type = label then column is not rendered on the results table\n      if (columns[i].dataType == 0)\n      column.render.properties.columnVisible = false;\n\n      // if column is number or monetary push allowDecimals property\n      if (columns[i].dataType == 7 || columns[i].dataType == 8)\n      column.render.properties.allowDecimals = columns[i].allowDecimals;\n\n      // if column is real or float set allowDecimals property to true\n      if (columns[i].dataType == 10 || columns[i].dataType == 11)\n      column.render.properties.allowDecimals = true;\n\n      // if column is date push showtime property\n      if (columns[i].dataType == 12)\n      column.render.properties.showTime = columns[i].showTime;\n\n      data.elements.push(column);\n    });\n\n    var grid = self.renderFactory.getRender({\n      type: \"grid\",\n      data: data,\n      parent: self,\n      mode: self.getMode() });\n\n\n    grid.properties.allowAdd = false;\n    grid.properties.allowEdit = false;\n    grid.properties.allowDelete = false;\n\n    // Saves reference\n    self.resultsGrid = grid;\n\n    return grid.render();\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each container after processed\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    self._super(container);\n\n    var results = container.find(\".ui-bizagi-container-search-results\");\n    var mode = self.getMode();\n\n    // Process children elements\n    self.container = container;\n\n    // Process result\n    var grid = $(results.children()[0]);\n    self.resultsGrid.postRenderElement(grid);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  },\n\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Saves reference\n    self.criteriaContainer = $(\".ui-bizagi-container-search-criteria\", self.container);\n    self.resultsContainer = $(\".ui-bizagi-container-search-results\", self.container);\n\n    // Bind to grid row select event\n    self.resultsGrid.bind(\"rowSelected\", function (e, ui) {\n      if (self.properties.searchParams.hasOwnProperty(\"multiSelect\")) {\n        self.trigger(\"multiSelect\", ui);\n      } else {\n        // Trigger event to bubble up to main container\n        self.trigger(\"instanceSelected\", ui);\n      }\n    });\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n    var self = this;\n    self.trigger(\"instancerefresh\");\n\n    return $.when(self.resultsGrid.refresh()).done(function () {\n      self.trigger(\"instancerefreshdone\");\n      if (self.resultsGrid.properties.data && self.resultsGrid.properties.data.records == 0 &&\n      self.resultsGrid.properties.data.rows.length == 0) {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-general-no-records-found\"),\n        bizagi.localization.getResource(\"render-dialog-sendemail-message\"));\n      }\n    });\n  },\n\n  /*\r\n      *   Publish a global event that the facade will replicate, also will be triggered by the principal form\r\n      */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    var self = this;\n\n    self._super(eventType, data);\n\n    if (!self.parent) {\n      if (self.observableElement) {\n        return self.observableElement.trigger(eventType, data);\n      } else {\n        return null;\n      }\n    } else {\n      return self.parent.triggerGlobalHandler(eventType, data);\n    }\n  } });","/*\r\n *   Name: BizAgi Tablet slide form implementation\r\n *   Author: Andres Valencia\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.smartphone.startForm\", {}, {\n\n  /* CONSTRUCTOR\r\n                                                               =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n\n    // Create container    \t\n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * Handlers de la vista de kendo\r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n  },\n\n  /**\r\n      * go back and destroy\r\n      */\n  goBack: function goBack() {\n    var self = this;\n    self.slideContainer.destroy();\n  },\n\n  /*\r\n      *   Render the form\r\n      *   The params are the same that will be send to the ajax service\r\n      *   Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n    // Fill content\n    self.renderSlideForm(params);\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Load template and data\n    $.when(self.dataService.getStartForm(params)).then(function (data) {\n      /*** SUCCESS FILTER **/\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Render dialog template\n      var formClass = bizagi.rendering.form.extend({\n        submitForm: function submitForm() {\n          if (self.form) {\n            this.endLoading();\n            // Perform validations\n            if (self.form.validateForm()) {\n              // Collect data\n              var data = {};\n              self.form.collectRenderValues(data);\n              // Add page cache for this form\n              data.idPageCache = self.form.getPageCache();\n              // Call user callback\n              if (self.slideFormParams.onSave) {\n                $.when(self.slideFormParams.onSave(data)).\n                done(function (result) {\n                  if (result === null || result === true || result.type === \"success\") {\n                    defer.resolve();\n                    self.goBack();\n                  } else if (result.type === \"validationMessages\") {\n                    // Add validation messages\n                    self.form.addValidationMessage(result.messages);\n                    // Update original value to use as reference to other futures changes in the dialogBox\n                    $.each(data, function (key) {\n                      var renders = self.form.getRenders(key);\n                      $.each(renders, function (i, render) {\n                        render.updateOriginalValue();\n                      });\n                    });\n                  } else if (result.type === \"error\") {\n                    // Add error messages\n                    self.form.addErrorMessage(result.message);\n                  }\n                });\n\n              } else {\n                defer.resolve();\n                self.goBack();\n              }\n            }\n          }\n        } });\n\n\n      var containerParams = $.extend({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.slideContainer },\n\n      {\n        renderFactory: self.renderFactory,\n        dataService: self.renderFactory.dataService });\n\n      self.form = new formClass(containerParams);\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        refreshParams = $.extend({\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true },\n        params, refreshParams, { idStartScope: self.form.properties.idStartScope });\n\n        self.renderSlideForm(refreshParams);\n      });\n      // Return rendering promise\n\n      self.form.buttons = [\n      $.extend(\n      self.form.buttons[0] || {},\n      {\n        \"caption\": self.slideFormParams.saveButtonLabel,\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          // When the data is saved then\n          self.form.submitForm();\n        } }),\n\n      $.extend(\n      self.form.buttons[1] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 1,\n        \"action\": \"back\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          if (self.slideFormParams.onCancel) {\n            self.slideFormParams.onCancel();\n          }\n          self.goBack();\n        } })];\n\n\n\n      return self.form.render();\n    }).done(function (element) {\n      var saveButtonLabel = self.slideFormParams.saveButtonLabel ? self.slideFormParams.saveButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-save\");\n      var cancelButtonLabel = bizagi.localization.getResource(\"render-form-dialog-box-cancel\");\n      // Append form  in the view\n      self.slideContainer.element.html(element);\n\n      if (!params.isRefresh) {\n        self.slideFormParams.navigation.navigate(self.slideContainer.id);\n      }\n\n      $(\".ui-bizagi-button-container div\", self.form.container).remove();\n\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append(\"<div ordinal='0' id='formButton0' class='action-button ui-bizagi-form-button'>\" +\n      saveButtonLabel + \"</div>\").delegate(\"div[ordinal='0']\", \"click\", function () {\n        self.form.submitForm();\n      });\n\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append(\"<div ordinal='1' id='formButton1' class='action-button ui-bizagi-form-button'>\" +\n      cancelButtonLabel + \"</div>\").delegate(\"div[ordinal='1']\", \"click\", function () {\n        self.slideFormParams.onCancel && self.slideFormParams.onCancel();\n        self.goBack();\n      });\n\n      //self.view.scroller.reset();\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n    }).fail(function (xhr, errorType, message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.kendoTmpls(errorTemplate, { message: error_message }).appendTo(self.slideContainer.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    });\n\n    return defer.promise();\n  } });","/*\r\n *   Name: BizAgi Tablet slide form implementation\r\n *   Author: Andres Valencia\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n$.Class.extend(\"bizagi.rendering.smartphone.slide.form\", {}, {\n  init: function init(dataService, renderFactory, slideFormParams) {\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n\n    // Create container\n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * go back and destroy\r\n      */\n  goBack: function goBack() {\n    this.slideContainer.destroy();\n  },\n\n  /**\r\n      * Handlers de la vista de kendo\r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n  },\n\n  /*\r\n      *   Render the form\r\n      *   The params are the same that will be send to the ajax service\r\n      *   Returns a deferred\r\n      */\n  render: function render(params) {\n    this.renderSlideForm(params);\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Load template and data\n    $.when(self.dataService.getFormData(params)).\n    pipe(function (data) {\n      /*** SUCCESS FILTER **/\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Render dialog template\n      var formClass = bizagi.rendering.form.extend({\n        submitForm: function submitForm(parameters) {\n          if (self.form) {\n            this.endLoading();\n            // Perform validations\n            if (self.form.validateForm()) {\n              // Collect data\n              var data = {};\n              self.form.collectRenderValues(data);\n              // Add page cache for this form\n              data.idPageCache = self.form.getPageCache();\n              // Call user callback\n              if (self.slideFormParams.onSave) {\n                $.when(self.slideFormParams.onSave(data)).\n                done(function (result) {\n                  if (result === null || result === true || result.type === \"success\") {\n                    defer.resolve();\n                    self.goBack();\n                  } else if (result.type === \"validationMessages\") {\n                    // Add validation messages\n                    self.form.addValidationMessage(result.messages);\n                    // Update original value to use as reference to other futures changes in the dialogBox\n                    $.each(data, function (key, value) {\n                      var renders = self.form.getRenders(key);\n                      $.each(renders, function (i, render) {\n                        render.updateOriginalValue();\n                      });\n                    });\n                  } else if (result.type === \"error\") {\n                    // Add error messages\n                    self.form.addErrorMessage(result.message);\n                  }\n                });\n\n              } else {\n                defer.resolve();\n                self.goBack();\n              }\n            }\n          }\n        } });\n\n      var containerParams = $.extend({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.slideContainer },\n      {\n        renderFactory: self.renderFactory,\n        dataService: self.renderFactory.dataService });\n\n      self.form = new formClass(containerParams);\n\n      self.form.buttons = [\n      $.extend(\n      self.form.buttons[0] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          // When the data is saved then\n          self.form.submitForm();\n        } }),\n\n      $.extend(\n      self.form.buttons[1] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 1,\n        \"action\": \"back\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          if (self.slideFormParams.onCancel) {\n            self.slideFormParams.onCancel();\n          }\n          self.goBack();\n        } })];\n\n\n\n      // Return rendering promise\n      return self.form.render();\n    }).done(function (element) {\n      var saveButtonLabel = self.slideFormParams.saveButtonLabel ? self.slideFormParams.saveButtonLabel :\n      bizagi.localization.getResource(\"render-form-dialog-box-save\");\n      var cancelButtonLabel = bizagi.localization.getResource(\"render-form-dialog-box-cancel\");\n\n      // Append form  in the view\n      self.slideContainer.element.html(element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n\n      $(\".ui-bizagi-button-container div\", self.form.container).remove();\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append(\"<div ordinal=\\\"0\\\" id=\\\"formButton0\\\" class=\\\"action-button ui-bizagi-form-button\\\">\" +\n      saveButtonLabel + \"</div>\").delegate(\"div[ordinal=\\\"0\\\"]\", \"click\", function () {\n        self.form.submitForm();\n      });\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append(\"<div ordinal=\\\"1\\\" id=\\\"formButton1\\\" class=\\\"action-button ui-bizagi-form-button\\\">\" +\n      cancelButtonLabel + \"</div>\").delegate(\"div[ordinal=\\\"1\\\"]\", \"click\", function () {\n        self.slideFormParams.onCancel && self.slideFormParams.onCancel();\n        self.goBack();\n      });\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function () {\n        self.renderSlideForm(params);\n      });\n    }).fail(function (message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.kendoTmpls(errorTemplate, { message: error_message }).appendTo(self.slideContainer.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    });\n\n    return defer.promise();\n  } });","/**\r\n * Tablet definition of Action Launcher\r\n *\r\n * @author: Ricardo Prez\r\n */\n\nbizagi.rendering.actionLauncher.extend(\"bizagi.rendering.actionLauncher\", {}, {\n  /**\r\n                                                                                 * Render a specific implementation for Desktop device\r\n                                                                                 */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var template;\n    var def = new $.Deferred();\n\n    self.actions = [];\n    self.configureQueueVisibility();\n    self.startLoading();\n\n    // Define params to get list of actions        \n    $.when(self.dataService.multiaction().getActions(self.processPropertyValueArgs)).\n    then(function (response) {\n      response = self.getPropertiesActionLaucher(response);\n      self.actions = response;\n      self.deferredActions.resolve(response);\n\n      if (properties.isHorizontal) {\n        if (properties.templatetype != \"none\") {\n          return self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs).\n          then(function (templateData) {\n            return self.engine.render($.extend(templateData, {\n              isDefaultTemplate: properties.templatetype === \"default\",\n              sessionId: self.properties.sessionId }),\n            $.extend({}, self.processPropertyValueDataTmplArgs, { formParams: self.getFormParams(self.getFormContainer()) }));\n          }).then(function (tmpl) {\n            template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n            var html = $($.kendoTmpl(template, {\n              actions: self.actions,\n              template: true }));\n\n\n            $(\".template-container\", html.wrap(\"<div>\").parent()).append(tmpl);\n            return html;\n          });\n        } else {\n          template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n          return $.kendoTmpl(template, {\n            actions: self.actions });\n\n        }\n      } else {\n        template = self.renderFactory.getTemplate(\"render-actionLauncher-vertical\");\n        return $.kendoTmpl(template, {\n          actions: self.actions,\n          allowSearch: properties.allowSearch,\n          maxItems: properties.maxItems });\n\n      }\n\n    }).done(function (html) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n\n      self.endLoading();\n\n      actionsContainer.append(html);\n      self.configureHandlers();\n\n      self.configureTemplateHandlers();\n\n      def.resolve(actionsContainer);\n    }).fail(function (error) {\n      self.endLoading();\n      def.fail(error);\n    });\n\n    return def.promise();\n  },\n\n  /**\r\n      * \r\n     */\n  getFormParams: function getFormParams(form) {\n    if (form.parent) {\n      return this.getFormParams(form.parent.getFormContainer());\n    } else\n    {\n      return form.getParams();\n    }\n\n  },\n\n  /**\r\n      * Validates if the action launcher control contains a valid value\r\n      * @returns {boolean}\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n    return typeof value !== \"undefined\" && value !== null && value.length > 0;\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var actionLauncherControls = $(\".action-launcher-control\", control);\n\n    //Binding for click action on buttons\n    actionLauncherControls.on(\"click\", function () {\n      var item = self.actions[parseInt($(this).data(\"index\"))];\n      var action = {\n        guidProcess: item[0],\n        guidAction: item[4],\n        displayName: item[1],\n        actionType: item[3],\n        xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n        readOnlyForm: item[6] || false,\n        guidEntity: self.properties.guidEntity,\n        xpathActions: self.properties.xpathActions || \"\" };\n\n\n      self.processAction(action);\n    });\n\n    var actions = [];\n    for (var i = 0, length = self.actions.length; i < length; i++) {\n      actions.push({\n        guid: self.actions[i][0],\n        displayName: self.actions[i][1] });\n\n    }\n\n\n    //Binding for click action sheet\n    $(\".wp-action-more\", control).actionSheet({\n      actions: actions,\n      actionClicked: function actionClicked(action) {\n        var item = self.actions.find(function (element) {\n          return element[0] == action.guid;\n        });\n\n        self.processAction({\n          guidProcess: item[0],\n          guidAction: item[4],\n          displayName: item[1],\n          actionType: item[3],\n          xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n          readOnlyForm: item[6] || false,\n          xpathActions: self.properties.xpathActions || \"\" });\n\n      } });\n\n\n    //Catch the typed text in the search field and filter the action list\n    $.expr[\":\"].FilterAction = function (entity, i, array) {\n      var search = array[3];\n      if (!search) {\n        return false;\n      }\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n    $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n      var search = $(this).val();\n      $(\".action-launcher-control\", control).show();\n      if (search) {\n        $(\".action-launcher-control\", control).\n        not(\":FilterAction(\" + search + \")\").hide();\n      }\n    });\n  },\n  /**\r\n      *\r\n      */\n  configureTemplateHandlers: function configureTemplateHandlers() {\n    var self = this;\n\n    //Catch the event from the layout link\n    self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n      params.filters = [];\n      self.triggerGlobalHandler(\"dataNavigation\", params);\n    });\n  },\n  /**\r\n      *\r\n      * @param action\r\n      */\n  processAction: function processAction(action) {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var multipleSelection = typeof properties.multipleSelection == \"undefined\" ? true : properties.multipleSelection;\n\n    if (multipleSelection) {\n      // If this is a form and has been queued, so open it\n      if (action.actionType == \"Form\" && self.countSameActions(action) >= 1 && !action.xpathContext) {\n        //Open action\n        $(\".action-to-execute-control[data-guidaction='\" + action.guidAction + \"'] label\", control).click();\n      } else {\n        $.when(self.actionManager(action)).done(function (act) {\n          self.executeAction(act);\n        });\n      }\n    } else if (self.getValue().length > 0) {\n      self.showConfirmationDialog(action);\n    } else {\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    }\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(data, action) {\n    var self = this;\n\n    if (data.response == \"success\") {\n      $.notifier.add({\n        class_name: \"success\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-success-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n    } else {\n      $.notifier.add({\n        class_name: \"error\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-failed-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n    }\n  },\n  /**\r\n      *\r\n      * @param action\r\n      * @returns {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getParams();\n\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\n    var def = new $.Deferred();\n\n    // Show dialog with new form after that\n    var slideForm = new bizagi.rendering.smartphone.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: slideForm.form.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) === 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    var renderParams = {\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath };\n\n\n    if (action.actionType === \"Form\") {\n      renderParams.contextType = \"entitytemplate\";\n      renderParams.xpathContext = undefined;\n      renderParams.guidEntity = action.guidEntity;\n      renderParams.rewriteContextType = true;\n    }\n\n    slideForm.render(renderParams);\n\n    return def.promise();\n  },\n  /**\r\n      *\r\n      * @param action\r\n      * @returns {*}\r\n      */\n  processActionFormCollection: function processActionFormCollection(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\n    var xpathPattern = \"%s[id=%s]\";\n    var xpathPatternWithoutkey = \"%s[]\";\n    var xpathContextWithKey = xpathContext !== \"\" ? printf(xpathPattern, xpathContext, action.idEntity) : xpathContext;\n    var xpathContextWithoutKey = xpathContext !== \"\" ? printf(xpathPatternWithoutkey, xpathContext) : xpathContext;\n    var formParams = form.getParams();\n\n    var slideForm = new bizagi.rendering.smartphone.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        if (action.editMode) {\n          return self.dataService.multiaction().submitData({\n            action: \"SAVE\",\n            data: data,\n            xpathContext: xpathContextWithKey,\n            idPageCache: data.idPageCache,\n            isOfflineForm: false,\n            isActionStartForm: true }).\n          done(function (savedData) {\n            def.resolve(savedData.IdScope);\n          });\n        } else {\n          return self.dataService.addGridRecordData({\n            idRender: properties.id,\n            //xpath: properties.xpath,\n            xpathContext: xpathContext,\n            contexttype: \"start\",\n            idPageCache: data.idPageCache,\n            submitData: data }).\n          done(function (savedData) {\n            action.idStartScope = savedData.IdScope;\n            action.idEntity = savedData.IdEntity;\n            self.addActionToQueue(action);\n            def.resolve(savedData.IdScope);\n          });\n        }\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    slideForm.render({\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": formParams.idCase,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": action.editMode ? xpathContextWithKey : xpathContextWithoutKey,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath });\n\n\n    return def.promise();\n  },\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var def = new $.Deferred();\n    args = args || {};\n    var formParams = self.getFormContainer().getParams();\n\n    // Show dialog\n    var slideForm = new bizagi.rendering.smartphone.startForm(self.dataService, self.renderFactory, {\n      title: args.title || \"\",\n      navigation: formParams.navigation,\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\" ?\n      bizagi.localization.getResource(\"render-form-button-create\") :\n      bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n    // Render the search form\n    slideForm.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n  /**\r\n      *\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show the confirmation dialog\r\n      * bizagi.createOkCancelPopup\r\n      * @param action\r\n      * */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n\n    $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n    done(function () {\n      self.setValue([]);\n\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-actionLauncher-actions-to-execute\");\n\n    self.configureQueueVisibility();\n\n    $.when(self.deferredActions).done(function (listOfActions) {\n      var getMappingAction = function getMappingAction(guidAction) {\n        var mapping = [];\n        $.each(listOfActions, function (key, value) {\n          if (value[4] == guidAction) {\n            mapping = value;\n          }\n        });\n\n        return mapping;\n\n      };\n\n      $.each(data, function (key, value) {\n        var mapping = getMappingAction(value.guidAction);\n        data[key].displayName = mapping[1];\n        data[key].guidProcess = mapping[0];\n        data[key].actionType = mapping[3];\n        data[key].xpathContext = mapping[5];\n        data[key].readOnlyForm = mapping[6];\n\n        if (data[key].params && data[key].params.idStartScope) {\n          data[key].idStartScope = data[key].params.idStartScope;\n        }\n        if (data[key].params && data[key].params.idPageCache) {\n          data[key].idPageCache = data[key].params.idPageCache;\n        }\n        if (data[key].params && data[key].params.idEntity) {\n          data[key].idEntity = data[key].params.idEntity;\n        }\n      });\n\n      $.when($.kendoTmpl(template, { actions: data })).done(function (html) {\n        actionsToExecuteContainer.empty();\n        actionsToExecuteContainer.append(html);\n\n        var removeActionSelector = $(\".action-to-execute-control .delete-action\", actionsToExecuteContainer);\n        var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n\n        removeActionSelector.on(\"click\", function () {\n          var index = $(this).parent().data(\"index\");\n          self.removeActionToQueue(index);\n        });\n\n        openActionSelector.on(\"click\", function () {\n          var target = $(this).parent();\n          var type = target.data(\"actiontype\");\n          var guidprocess = target.data(\"guidprocess\");\n          var idStartScope = target.data(\"idstartscope\");\n          var title = target.data(\"title\");\n          // When undefined return string \"undefined\" instead of type \"undefined\"\n          var xpathContext = target.data(\"xpathcontext\");\n          var readOnlyForm = target.data(\"readonlyform\") || false;\n          var idEntity = target.data(\"identity\") || \"\";\n          var guidAction = target.data(\"guidaction\");\n          var recordXpath = xpathContext || self.properties.xpathContext;\n          switch (type) {\n            case \"Process\":\n              if (idStartScope) {\n                self.processStartForm({\n                  guidprocess: guidprocess,\n                  idStartScope: idStartScope,\n                  title: title,\n                  xpathContext: xpathContext,\n                  recordXpath: recordXpath });\n\n              }\n              break;\n            case \"Form\":\n              var action = {\n                guidProcess: guidprocess,\n                idStartScope: idStartScope,\n                editMode: true,\n                xpathContext: xpathContext,\n                readOnlyForm: readOnlyForm,\n                idEntity: idEntity,\n                recordXpath: recordXpath };\n\n\n              if (action.xpathContext) {\n                self.processActionFormCollection(action);\n              } else {\n                // Convert string \"undefined\" into type \"undefined\"\n                action.xpathContext = undefined;\n\n                // Add parameters if action form\n                var extraParams = {};\n                var dataAction = self.value.filter(function (item) {\n                  return item.guidAction == guidAction;\n                });\n\n                if (dataAction.length > 0) {\n                  extraParams = {\n                    actionType: \"Form\",\n                    contextType: \"entitytemplate\",\n                    guidEntity: self.properties.guidEntity || dataAction[0].guidEntity };\n\n                }\n\n                self.processActionForm($.extend(action, extraParams));\n              }\n              break;\n            case \"Rule\":\n              // Rules dont have forms or something like that\n              break;}\n\n        });\n      });\n    });\n  },\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".action-to-execute-label\", control);\n\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/**\r\n * Tablet definition of entity template\r\n *\r\n * @author: Ricardo Prez\r\n */\n\nbizagi.rendering.actionLauncher.extend(\"bizagi.rendering.entityTemplate\", {}, {\n\n  /**\r\n                                                                                 * Render a specific implementation for smartphone device\r\n                                                                                 */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    self.actions = [];\n\n    self.getArrowContainer().hide();\n    self.configureQueueVisibility();\n\n    self.startLoading();\n\n    // Define params to get template               \n    self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs).\n    then(function (templateData) {\n      return self.engine.render(templateData, self.processPropertyValueDataTmplArgs).\n      then(function (tmpl) {\n        var template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n        if (properties.allowactions) {\n          return self.dataService.multiaction().getActions(self.processPropertyValueArgs).\n          then(function (response) {\n            self.deferredActions.resolve(response);\n            self.actions = response;\n\n            var htmlTemplate = $($.kendoTmpl(template, {\n              actions: self.actions,\n              template: true }));\n\n\n            $(\".template-container\", htmlTemplate.wrap(\"<div>\").parent()).append(tmpl);\n\n            return htmlTemplate;\n          });\n        } else {\n          var htmlTemplate = $($.kendoTmpl(template, { template: true }));\n          $(\".template-container\", htmlTemplate.wrap(\"<div>\").parent()).append(tmpl);\n\n          return htmlTemplate;\n        }\n      });\n\n    }).done(function (html) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n\n      self.endLoading();\n\n      actionsContainer.append(html);\n      self.configureHandlers();\n      self.configureTemplateHandlers();\n\n      def.resolve(actionsContainer);\n    }).fail(function (error) {\n      self.endLoading();\n      def.fail(error);\n    });\n    return def.promise();\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var entityTemplateControls = $(\".action-launcher-control\", control);\n\n    /**\r\n                                                                          * Binding for click action on buttons\r\n                                                                          */\n    entityTemplateControls.on(\"click\", function () {\n      var item = self.actions[parseInt($(this).data(\"index\"))];\n      var action = {\n        guidProcess: item[0],\n        guidAction: item[4],\n        displayName: item[1],\n        actionType: item[3],\n        xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n        xpathActions: self.properties.xpathActions || \"\" };\n\n\n      if (action.actionType === \"Form\") {\n        action.xpathContext = undefined;\n        action.contextType = \"entitytemplate\";\n        action.guidEntity = self.properties.guidEntity;\n      }\n\n      self.processAction(action);\n    });\n\n    var actions = [];\n    for (var i = 0, len = self.actions.length; i < len; i++) {\n      actions.push({\n        guid: self.actions[i][0],\n        displayName: self.actions[i][1] });\n\n    }\n\n    /**\r\n       * Binding for click action sheet\r\n       */\n    $(\".wp-action-more\", control).actionSheet({\n      actions: actions,\n      actionClicked: function actionClicked(action) {\n        var item = self.actions.find(function (e) {\n          return e[0] == action.guid;\n        });\n        self.processAction({\n          guidProcess: item[0],\n          guidAction: item[4],\n          displayName: item[1],\n          actionType: item[3],\n          xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\" });\n\n      } });\n\n\n  },\n\n  configureTemplateHandlers: function configureTemplateHandlers() {\n    var self = this;\n    /**\r\n                      * Catch the event from the layout link\r\n                      */\n    self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n      params.filters = [];\n      params.calculateFilters = params.calculateFilters || true;\n\n      self.triggerGlobalHandler(\"dataNavigation\", params);\n    });\n  } });","/**\r\n * Device definition of Polymorphic launcher\r\n *\r\n * @author: Andres Felipe Arenas\r\n */\n\nbizagi.rendering.polymorphicLauncher.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\n  /**\r\n                                                                                           * Render a specific implementation for Smartphone device\r\n                                                                                           */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var html, template;\n\n    if (mode == \"design\" || !self.properties.surrogatedKey) {\n      return \"\";\n    }\n\n    self.configureQueueVisibility();\n\n    /**\r\n                                      * Define params to get list of actions\r\n                                      */\n    return $.when(self.dataService.multiaction().getPolymorphicActions(self.processPropertyValueArgs)).\n    done(function (response) {\n      // Convert default response to tree data structure\n      response = self.dataService.serializePolymorphicActions(response);\n      self.totalActions = bizagi.clone(response);\n      var actions = bizagi.clone(response);\n      self.lessActions = bizagi.clone(actions);\n\n      // NOTE: Code extracted\n      var templateArguments = {\n        actions: actions,\n        allowSearch: properties.allowSearch,\n        treeActionsList: self.getTreeItems(actions) };\n\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree\");\n\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-polymorphic-launcher-constructors-container\", control);\n      actionsContainer.append($.kendoTmpl(template, templateArguments));\n      self.bindHandlers();\n    });\n  },\n\n  /**\r\n      * Get rendered html of each node of constructors\r\n      * @param actions\r\n      * @param level\r\n      * @return {string}\r\n      */\n  getTreeItems: function getTreeItems(actions, level) {\n    var self = this;\n    var item = \"<ul>\";\n    var templateTreeItem = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree-item\");\n    actions = actions || {};\n    level = level || 1;\n\n    $.each(actions, function (key, value) {\n      item += $.kendoTmpl(templateTreeItem, value);\n\n      if (value.children) {\n        item += self.getTreeItems(value.children, level + 1);\n      }\n    });\n    item += \"</ul>\";\n    return item;\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  bindHandlers: function bindHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var actionLauncherControls = $(\".bz-polymorphic-launcher-constructors-container li span\", control);\n\n    //Binding for click action on buttons\n    actionLauncherControls.on(\"click\", function () {\n      var $targetData = $(this).parent();\n      var action = {\n        guidEntity: $targetData.data(\"guidentity\"),\n        guidObject: $targetData.data(\"guidobject\"),\n        guidConstructor: $targetData.data(\"guidconstructor\"),\n        displayName: $targetData.data(\"display-name\"),\n        actionType: $targetData.data(\"action-type\"),\n        xpathContext: $targetData.data(\"xpathcontext\") };\n\n      self.onActionClicked(action);\n    });\n    //Catch the typed text in the search field and filter the action list\n    $.expr[\":\"].FilterAction = function (entity, i, array) {\n      var search = array[3];\n      if (!search) {\n        return false;\n      }\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n    $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n      var search = $(this).val();\n      $(\".bz-polymorphic-launcher-constructors-container li\", control).show();\n      if (search) {\n        $(\".bz-polymorphic-launcher-constructors-container li\", control).not(\":FilterAction(\" + search + \")\").hide();\n      }\n    });\n\n  },\n  /**\r\n      * Execute an Action\r\n      * @param action\r\n      */\n  onActionClicked: function onActionClicked(action) {\n    var self = this;\n\n    $.when(self.actionManager(action)).done(function (act) {\n      self.executeAction(act);\n    });\n  },\n  /**\r\n      * Show a message when action has been executed\r\n      * @param status\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(status, action) {\n    var self = this;\n    if (status == \"success\") {\n      $.notifier.add({\n        class_name: \"success\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-success-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n\n    } else {\n      $.notifier.add({\n        class_name: \"error\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-failed-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n    }\n  },\n  /**\r\n      * Show a dialog with a form\r\n      * @param action\r\n      * @return {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext || \"\";\n    var formParams = form.getParams();\n\n    var recordXpath = self.properties.recordXpath;\n\n    // Show dialog with new form after that\n    var slideForm = new bizagi.rendering.smartphone.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        var pageCache = data.idPageCache;\n        data.idPageCache = null;\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: slideForm.form.properties.xpathContext, //self.properties.xpathContext,\n          idPageCache: pageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) == 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    slideForm.render({\n      \"idForm\": action.guidObject,\n      \"contextType\": \"entity\",\n      \"guidEntity\": action.guidEntity,\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      //\"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"recordXpath\": recordXpath });\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var def = new $.Deferred();\n    var formParams = form.getParams();\n    args = args || {};\n\n\n    var slideForm = new bizagi.rendering.smartphone.startForm(self.dataService, self.renderFactory, {\n      //showSaveButton: properties.editable,\n      maximized: properties.maximized,\n      title: args.title || \"\",\n      navigation: formParams.navigation,\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || this.typeForm == \"SummaryForm\" ?\n      bizagi.localization.getResource(\"render-form-button-create\") :\n      bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        form.startLoading();\n\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          form.endLoading();\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n\n    slideForm.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n  /**\r\n      * Execute and action if a form is global form or summary, or send to queue\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show confirmation dialog\r\n      * @param action\r\n      */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n\n    $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n    done(function () {\n      self.setValue([]);\n\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-actions-to-execute\");\n    self.configureQueueVisibility();\n\n    $.when($.kendoTmpl(template, { actions: data })).done(function (html) {\n      actionsToExecuteContainer.empty();\n      actionsToExecuteContainer.append(html);\n      var removeActionSelector = $(\".action-to-execute-control .delete-action\", actionsToExecuteContainer);\n      var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n      removeActionSelector.on(\"click\", function () {\n        var index = $(this).parent().data(\"index\");\n        self.removeActionToQueue(index);\n      });\n      openActionSelector.bind(\"click\", function () {\n        var $target = $(this).parent();\n        var type = $target.data(\"actiontype\");\n        var guidprocess = $target.data(\"guidprocess\");\n        var idStartScope = $target.data(\"idstartscope\");\n        var title = $target.data(\"title\");\n        var xpathContext = $target.data(\"xpathcontext\");\n        var idEntity = $target.data(\"identity\") || \"\";\n        var guidEntity = $target.data(\"guidentity\");\n        var recordXpath = xpathContext || self.properties.xpathContext;\n\n        switch (type) {\n          case \"Process\":\n            if (idStartScope) {\n              self.processStartForm({\n                guidprocess: guidprocess,\n                idStartScope: idStartScope,\n                title: title,\n                xpathContext: xpathContext,\n                recordXpath: recordXpath });\n\n            }\n            break;\n          case \"Form\":\n            var action = {\n              guidProcess: guidprocess,\n              idStartScope: idStartScope,\n              editMode: true,\n              xpathContext: xpathContext,\n              idEntity: idEntity,\n              guidEntity: guidEntity,\n              guidObject: guidprocess };\n\n\n            self.processActionForm(action);\n            break;\n          case \"Rule\":\n            // Rules dont have forms or something like that\n            break;}\n\n      });\n    });\n  },\n\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".actions-to-execute-title\", control);\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/**\r\n *   Name: BizAgi Tablet Render Text Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments: Extended text implementation\r\n */\nbizagi.rendering.extendedText.extend(\"bizagi.rendering.extendedText\", {\n  TEXTAREA_LINE_HEIGHT: 14 },\n{\n  /**\r\n   * Creates the markup for the readonly extendedText field\r\n   * Comment: includes the default value in the markup\r\n   * @returns {html}\r\n   */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonlyExtendedText\");\n    // Render template\n    return $.kendoTmpl(template);\n  },\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n\n    self.element = container;\n\n    if (!properties.editable) {\n      self.input = container.find(\".bz-rn-text-extended pre\");\n      container.addClass(\"bz-rn-non-editable\");\n    } else {\n      self.input = container.find(\".bz-rn-text-extended\");\n      container.addClass(\"bz-command-edit-inline\");\n\n      $(self.input).bind(\"keyup\", function () {\n        self.calculateHeight(this);\n        self.setValue(self.input.val(), false);\n      });\n    }\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    //Attach event for retype double\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    self.textarea = control.find(\"textarea\");\n\n    // Set the default maxlenght for the input if is 0 or undefined set to infinity\n    // this resolve issue with scope strings that don't have maxlength\n    if (properties.maxLength > 0)\n    self.textarea.prop(\"maxlength\", properties.maxLength);\n\n    if (properties.maxLines) {\n      self.hasMaxLines = true;\n      self.textarea.prop(\"rows\", properties.maxLines);\n    } else {\n      self.hasMaxLines = false;\n      self.textarea.prop(\"rows\", 6);\n    }\n\n    self._super();\n  },\n\n  /**\r\n      *  SET DISPLAY VALUE\r\n      *\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n\n    var self = this;\n    var properties = self.properties;\n    var decodedValue = bizagi.util.decodeURI(value);\n    value = typeof decodedValue == \"string\" ? decodedValue : \"\";\n\n    // Call base\n    this._super(value);\n\n    // Set value in input\n    if (value && properties.editable) {\n      var resolvedValue = $.br2nl(value);\n      self.textarea.val(resolvedValue);\n\n      if (!self.hasMaxLines) {\n        var rows = self.input.val().split(\"\\n\");\n        self.input.prop(\"rows\", rows.length + 1);\n      }\n    }\n  },\n\n  renderEdition: function renderEdition() {\n  },\n\n  setDisplayValueEdit: function setDisplayValueEdit(value) {\n  },\n\n  actionSave: function actionSave() {\n  },\n\n  calculateHeight: function calculateHeight(input) {\n    var self = this;\n    var textarea = input;\n    var newHeight = textarea.scrollHeight;\n    var currentHeight = textarea.clientHeight;\n\n    if (newHeight > currentHeight && !self.hasMaxLines) {\n      $(textarea).css(\"height\", newHeight + 2 * self.Class.TEXTAREA_LINE_HEIGHT + \"px\");\n    }\n  } });","/*\r\n*   Name: BizAgi Smartphone Render Label Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the label render class to adjust to smartphone devices\r\n*/\n\n// Extends itself\nbizagi.rendering.label.extend(\"bizagi.rendering.label\", {}, {\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n\n    properties.editable = false;\n    self.getArrowContainer().hide();\n\n    if (!self.properties.editable)\n    self.getContainerRender().addClass(\"bz-rn-non-editable\");\n\n    container.addClass(\"ui-bz-rn-label-only\");\n\n    this._super();\n  } });","/*\r\n*   Name: Bizagi smartphone Render Number Extension\r\n*   Author: Bizagi Mobile Team \r\n*   Comments:\r\n*   -   This script will redefine the number render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.number.extend(\"bizagi.rendering.number\", {}, {\n\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonlyNumber\");\n    return $.kendoTmpl(template, {});\n  },\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    if (!properties.editable) {\n      self.numericInput = self.input = control.find(\".ui-bizagi-render-numeric\");\n      container.addClass(\"bz-rn-non-editable\");\n      container.find(\"i\").addClass(\"bz-rn-icon-readonly\").addClass(\"bz-mo-icon\").addClass(\"bz-number-icon\");\n    } else {\n      self.numericInput = self.input = control.find(\"input\");\n      container.addClass(\"bz-command-edit-inline\");\n      self.input.removeAttr(\"readonly\");\n\n      //Adjust the input in order to accept the comma input as decimal for certain language standars\n      if (properties.decimalSymbol == ',') {\n        self.input.attr(\"lang\", \"en-150\");\n      }\n\n      self.configureHandlers();\n    }\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n\n    self._super();\n\n    //Attach event for retype double\n    if (self.properties.retype === \"double\") {\n      self.attachRetypeDouble();\n    }\n  },\n\n  executeFormatCurrencyPlugin: function executeFormatCurrencyPlugin() {\n    var self = this;\n    var properties = self.properties;\n\n    self._super();\n\n    if (!properties.editable && properties.percentage) {\n      self.numericInput.text(self.input.text() + \"%\");\n    }\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    self.setValue(value, false);\n\n    if (!self.properties.editable) {\n      self.input.text(self.getDisplayValue());\n    } else {\n      self.input.html(value);\n      self.input.val(value);\n\n      // Formats the input\n      self.executeFormatCurrencyPlugin();\n    }\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var input = self.input;\n    var properties = self.properties;\n\n    self.numericInput = input;\n    self.attachFormatCurrency();\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.input.numeric(self.properties.decimalSymbol);\n\n    self.input.blur(function () {\n      var inputValue = self.input.val();\n\n      if (inputValue === \"\" || !bizagi.util.isNumeric(inputValue) && self.properties.value === 0) {\n        self.setValue(\"\", false);\n\n        self.input.html(\"\");\n        self.input.val(\"\");\n      }\n    });\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n    var input = $(\"input\", element);\n\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      self.retypeDouble(control);\n    });\n  },\n\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n\n    if ($(control).attr(\"type\") !== \"hidden\" &&\n    $(control).css(\"display\") !== \"none\" &&\n    $(control).css(\"visibility\") !== \"hidden\") {\n\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n        // Check that there is something in the value or \n        // if a value has already been set\n        if (control.val() === \"\" || control.val() === control.attr(\"newValue\"))\n        return;\n\n        // Create new tooltip\n        control.data(\"oldValue\", control.val());\n        control.val(\"\");\n\n        try {\n          control.tooltip(\"destroy\");\n        } catch (e) {}\n\n        // Re-type value\n        control.attr(\"title\", self.getResource(\"render-number-retype\"));\n\n        // Setup tooltip\n        control.tooltip();\n        control.tooltip(\"open\");\n\n        // Focus after 100ms to avoid bubbling\n        setTimeout(function () {\n          control.focus();\n        }, 100);\n\n      } else {\n\n        // Check that there is something in the value\n        if (control.val() === \"\") {\n          return;\n        }\n\n        if (control.val() !== control.data(\"oldValue\")) {\n          self.setValue(\"\");\n\n          control.val(\"\");\n          control.data(\"oldValue\", \"\");\n\n          try {\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          } catch (e) {}\n\n          control.attr(\"title\", self.getResource(\"render-number-retype-fail\"));\n          control.tooltip();\n          control.tooltip(\"open\");\n\n          setTimeout(function () {\n            control.focus();\n          }, 100);\n\n        } else {\n          control.data(\"newValue\", control.val());\n          control.data(\"oldValue\", \"\");\n\n          try {\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          } catch (e) {}\n        }\n      }\n    }\n  } });","/*\r\n*   Name: Bizagi Rendering Smartphone numberScientificNotation\r\n*   Author: Luis Cabarique - LuisCE\r\n*   Comments:\r\n*   -   This script will define a base class to define the Scientific number notation\r\n*/\n\nbizagi.rendering.numberScientificNotation.extend(\"bizagi.rendering.numberScientificNotation\", {}, {\n\n  /*\r\n                                                                                                     * Template method to implement in each device to customize each render after processed\r\n                                                                                                     */\n  renderSingle: function renderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    self.inputDisplay = $(\"input\", control).first();\n    self.numericInput = self.input = control.find(\"input\").length > 1 ? $(\"input\", control).last() : control.append(\"<span class=\\\"bz-rn-non-editable bz-rn-align-class bz-rn-text\\\"></span>\").find(\"span\");\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n    // Attach Format Currency Plugin to format the input\n    self.attachFormatSientificNotation();\n\n    if (!properties.editable) {\n      container.addClass(\"bz-rn-non-editable\");\n      self.numericInput.addClass(\"bz-rn-icon-readonly\").addClass(\"bz-mo-icon\").addClass(\"bz-specialnumbers-input\");\n      self.numericInput.attr(\"readonly\", \"readonly\");\n      self.inputDisplay.attr(\"readonly\", \"readonly\");\n    } else {\n      container.addClass(\"bz-command-edit-inline\");\n      self.numericInput.removeAttr(\"readonly\");\n      self.inputDisplay.removeAttr(\"readonly\");\n    }\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var value = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 38);\n    var displayValue = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 15);\n\n    // Set value in input\n    self.numericInput.val(value);\n    self.inputDisplay.val(displayValue);\n    self.numericInput.html(displayValue);\n    self.value = self.properties.value = value;\n  },\n\n  attachFormatSientificNotation: function attachFormatSientificNotation() {\n    var self = this;\n\n    self.inputDisplay.focus(function () {\n      $(this).val(self.getDisplayValue());\n    });\n\n    // Attach events\n    self.inputDisplay.blur(function () {\n      if (typeof self.getFormContainer().validationController == \"undefined\") self.getFormContainer().validationController = new bizagi.command.controllers.validation(self.getFormContainer(), self.validations);\n\n      var scientificNotationNumber = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol, 38);\n      var scientificNotationNumberDisplay = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol, 15);\n\n      self.numericInput.val(scientificNotationNumber);\n      self.inputDisplay.val(scientificNotationNumberDisplay);\n\n      // Updates internal value\n      self.setValue(scientificNotationNumber);\n    });\n  } });","/*\r\n*   Name: BizAgi smartphone Render Money Extension\r\n*   Author: OscarO\r\n*   Comments:\r\n*   -   This script will redefine the money render class to adjust to smartphone devices\r\n*/\n\n// Extends itself\nbizagi.rendering.money.extend(\"bizagi.rendering.money\", {}, {\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var value = self._super();\n    var template = self.renderFactory.getTemplate(\"readonlyNumber\");\n    var tmpl = $($.kendoTmpl(template, { value: value }));\n    $(\".bz-rn-icon\", tmpl).removeClass(\"bz-rn-icon-number\").removeClass(\"bz-number-icon\").addClass(\"bz-coin-input\").addClass(\"bz-rn-icon-coin\");\n\n    return tmpl.get(0).outerHTML;\n  },\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    if (!properties.editable) {\n      self.numericInput = self.input = control.find(\".ui-bizagi-render-numeric\");\n      container.addClass(\"bz-rn-non-editable\");\n    } else {\n      self.numericIcon = $(\"span\", control);\n      self.numericIcon.removeClass(\"bz-number-icon\").addClass(\"bz-coin-input\");\n\n      self.numericInput = self.input = control.find(\"input\");\n      container.addClass(\"bz-command-edit-inline\");\n      self.input.removeAttr(\"readonly\");\n\n      //Adjust the input in order to accept the comma input as decimal for certain language standars\n      if (properties.decimalSymbol == ',') {\n        self.input.attr(\"lang\", \"en-150\");\n      }\n\n      self.configureHandlers();\n    }\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    self._super();\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    self.setValue(value, false);\n\n    if (!properties.editable) {\n      self.input.text(value);\n    } else {\n      self.input.html(value);\n      self.input.val(value);\n    }\n\n    self.executeFormatCurrencyPlugin();\n  },\n\n  // override\n  executeFormatCurrencyPlugin: function executeFormatCurrencyPlugin() {\n    var self = this;\n    var properties = self.properties;\n\n    self.input.formatCurrency({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize });\n\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var input = self.input;\n    var properties = self.properties;\n\n    self.numericInput = input;\n    self.attachFormatCurrency();\n    self.executeFormatCurrencyPlugin();\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.input.numeric(self.properties.decimalSymbol);\n\n    self.input.blur(function () {\n      var inputValue = self.input.val();\n      if (inputValue === \"\" || !bizagi.util.isNumeric(inputValue) && self.properties.value === 0) {\n        self.setValue(0, false);\n        self.input.html(0);\n        self.input.val(0);\n        self.executeFormatCurrencyPlugin();\n      }\n    });\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"text\";\n  } });","/**\r\n*   Name: BizAgi Smartphone Render Yes-No Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the Yes-No render class to adjust to smartphone devices\r\n*/\nbizagi.rendering.yesno.extend(\"bizagi.rendering.yesno\", {}, {\n  renderSingle: function renderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var container = self.getContainerRender();\n\n    if (properties.editable) {\n      if ((self.value == null || self.value === undefined) && self.properties.value != null) {\n        self.value = properties.value;\n      }\n\n      self.input = self.getControl().find(\"> div\");\n      container.addClass(\"bz-command-edit-inline\");\n\n      self.input.change(function () {\n        var selectedRadio = self.input.find(\"input:radio:checked\");\n        var nValue = selectedRadio.prop(\"value\");\n\n        if (self.value !== nValue) {\n          self.setValue(nValue);\n          self.setDisplayValue(nValue);\n\n          if (self.properties.submitOnChange) {\n            self.submitOnChange();\n          }\n        }\n      });\n\n    } else {\n      container.addClass(\"bz-rn-non-editable\");\n      self.input = control.append(\"<span class=\\\"bz-rn-non-editable bz-rn-align-class bz-rn-text\\\"></span>\").find(\"span\");\n    }\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return this.properties.editable ? $(\".bz-rn-yesno\", context) : $(context);\n  },\n\n  /**\r\n      * set the display value en the rendered control\r\n      * */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    self.setValue(value.toString().toLowerCase(), false);\n\n    if (properties.editable) {\n      var parsedValue = bizagi.util.parseBoolean(value);\n      self.input.find(\".bz-radio-true\").\n      prop(\"checked\", parsedValue === true).\n      toggleClass(\"bz-unchecked\", parsedValue !== true).\n      toggleClass(\"bz-check\", parsedValue === true);\n\n      self.input.find(\".bz-radio-false\").\n      prop(\"checked\", parsedValue === false).\n      toggleClass(\"bz-unchecked\", parsedValue !== false).\n      toggleClass(\"bz-check\", parsedValue === false);\n    } else {\n      this._super(value);\n    }\n  } });","/**\r\n*   Name: BizAgi Smartphone Render Check\r\n*   Author: Bizagi Mobile Team\r\n*   Comments: Check implementation for smartphone\r\n*/\n\n// Extends itself\nbizagi.rendering.check.extend(\"bizagi.rendering.check\", {}, {\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    self.configureHelpText();\n\n    //self.getArrowContainer().hide();\n    // Personalize display of render\n    self.element.find(\".bz-container-render-cell > .ui-bizagi-render-control\").addClass(\"bz-check-control\");\n    self.element.find(\".bz-container-render-cell > .ui-bizagi-label\").addClass(\"bz-check-label\");\n    self.element.find(\".bz-container-render-cell > .ui-bizagi-render-control\").insertBefore(self.element.find(\".bz-container-render-cell > .ui-bizagi-label\"));\n    self.input = self.getControl().find(\"input\");\n\n    if (properties.editable) {\n      container.addClass(\"bz-command-edit-inline\");\n\n      self.input.bind(\"click\", function () {\n        var isChecked = self.input.is(\":checked\");\n\n        self.setValue(isChecked, true);\n        isChecked ? self.input.removeClass(\"bz-unchecked\").addClass(\"bz-check\") : self.input.addClass(\"bz-unchecked\").removeClass(\"bz-check\");\n\n        if (self.properties.submitOnChange) {\n          self.submitOnChange();\n        }\n\n        if (self.properties.required && !isChecked) {\n          var requiredElement = self.element.find(\".ui-bizagi-label .bz-rn-required\");\n          requiredElement.length > 0 ? requiredElement.show() : self.element.find(\".ui-bizagi-label\").prepend('<div class=\"bz-rn-required\"></div>');\n        }\n      });\n    } else {\n      container.addClass(\"bz-rn-non-editable\");\n    }\n  },\n\n  /* SET DISPLAY VALUE\r\n     ======================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n\n    self.setValue(value, false);\n\n    var parsedValue = \"\";\n    if (properties.editable) {\n      parsedValue = bizagi.util.parseBoolean(value);\n    } else {\n      parsedValue = bizagi.util.parseBoolean(self.properties.value);\n    }\n\n    self.input.prop(\"checked\", parsedValue === true);\n    self.input.toggleClass(\"bz-check\", parsedValue === true).toggleClass(\"bz-unchecked\", parsedValue !== true);\n  } });","/**\r\n *   Name: BizAgi Tablet Render list Extension\r\n *   Author: Cristian O\r\n *   Date: 2015 - Oct - 10\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to tablet devices\r\n */\n\n// Extends from base list \nbizagi.rendering.list.extend(\"bizagi.rendering.list\", {}, {\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"readonly\");\n    var value = self.properties.value && self.hasValue() ? self.properties.value.value : \"- -\";\n\n    return $.kendoTmpl(template, { value: value });\n  },\n\n  renderSingle: function renderSingle() {\n    // Call combo postRender\n    var self = this;\n    var control = self.getControl();\n    var container = self.getContainerRender();\n\n    // Call base \n    this._super();\n\n    if (!self.properties.editable) {\n      // If isn't a editable control, then show a non editable span\n      container.addClass(\"bz-rn-non-editable\");\n\n      // Getting the input\n      self.list = control.find(\"span\");\n\n      self.list.attr(\"readonly\", \"readonly\");\n    } else {\n      // Apply plugin\n      self.list = $(\".ui-bizagi-render-list\", control);\n    }\n\n    self.configureListHandlers();\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    self._super();\n\n    // Show clear icon\n    $.when(self.ready()).done(function () {\n      if (!self.hasValue()) {\n        self.getControl().find(\".bz-rn-input-selected\").html(\"-------------\");\n        self.getControl().find(\".bz-wp-list-clear-icon-list\").hide(500);\n      } else {\n        self.getControl().find(\".bz-wp-list-clear-icon-list\").show(500);\n      }\n    });\n  },\n\n  /**\r\n      * Setting the control events\r\n      * */\n  configureListHandlers: function configureListHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    self.list.find(\".see-more-icon\").bind(\"click\", function () {\n      var template = self.renderFactory.getTemplate(\"listModalView\");\n      var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n      var data = {\n        \"items\": self.properties.data,\n        \"displayName\": self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView(\"open\");\n    });\n\n    // Setting the initial selected display value\n    self.list.on(\"click\", \".bz-rn-regular-element\", function () {\n      var val = $(this).data(\"value\");\n      var label = $(this).text();\n\n      var newValue = { \"id\": val, \"value\": label };\n      self.selectedValue = newValue.value;\n      self.setValue(newValue);\n      self.setDisplayValue(newValue);\n    });\n\n    // Set clear event\n    control.find(\".bz-rn-first-element-container\").on(\"click\", \".bz-wp-list-clear-icon-list\", function () {\n      var val = \"\";\n      var label = \"-------------\";\n\n      var newValue = { \"id\": val, \"value\": label };\n      self.setValue(newValue);\n      self.selectedValue = newValue.value;\n      self.setDisplayValue(newValue);\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //getting combo list elements\n    var container = inputContainer.find(\".ui-bizagi-render-list-elements li\");\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    //Closing modalview\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Filtering list\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind(\"change keypress keyup change\", function () {\n      self.filterList(this.value, container, inputContainer);\n    });\n\n    //Cleaning list\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind(\"click\", function () {\n      self.filterList(\"\", container, inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //Configuring list as a selectable element\n    self.modalViewList = $(\".ui-bizagi-render-list-elements\", inputContainer);\n    self.setModalViewDisplayValue();\n\n    //Setting the initial selected display value\n    self.modalViewList.on(\"click\", \"li\", function () {\n      self.modalViewList.find(\"li\").filter(function () {\n        if ($(this).hasClass(\"ui-selected\")) {\n          return $(this);\n        }\n      }).removeClass(\"ui-selected\");\n\n      $(this).addClass(\"ui-selected\");\n      $(\".bz-wp-modalview-header-input-search\", inputContainer).blur();\n    });\n\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      var selected = $(\"li.ui-selected\", self.modalViewList);\n      var _value = $(selected).data(\"value\");\n      var label = $(selected).text();\n\n      //Update internal value\n      if (typeof _value !== \"undefined\") {\n        var newValue = { \"id\": _value, \"value\": label };\n        self.setValue(newValue);\n        self.selectedValue = newValue.value;\n        self.setDisplayValue(newValue);\n      }\n    }).fail(function () {\n    });\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * */\n  filterList: function filterList(search, $li, inputContainer) {\n    if (search !== \"\") {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n    } else {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n    }\n\n    $li.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = search.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n      =====================================================*/\n  /**\r\n                                                               *   Sets the value in the rendered control\r\n                                                               */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.properties.editable) {\n      if (typeof value !== \"undefined\") {\n        control.find(\".bz-rn-input-selected\").html(value.value);\n\n        if (value.value === \"-------------\" || value.value === \"\") {\n          control.find(\".bz-wp-list-clear-icon-list\").hide(500);\n        } else {\n          control.find(\".bz-wp-list-clear-icon-list\").show(500);\n        }\n      }\n    } else {\n      self.list.text(value.value);\n    }\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", value: \"\" };\n    var control = self.getControl();\n\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n\n  /**\r\n      * Setting the selected element.\r\n      * */\n  setModalViewDisplayValue: function setModalViewDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.list && properties.editable &&\n    self.properties.value && typeof self.properties.value !== \"undefined\" &&\n    self.properties.value.id !== \"\") {\n      $(\"#ui-bizagi-list-\" + self.properties.value.id, self.modalViewList).addClass(\"ui-selected\");\n    }\n  },\n\n  /**\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n    // Nothing todo, all events apply in selectable plugin\n  },\n\n  /**\r\n      *   Returns the selected value in the template\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    var self = this;\n    return self.selectedValue;\n  } });","/*\r\n *   Name: Bizagi Smartphone Render MultiSelect Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the MultiSelect render class to adjust to smartphone devices\r\n */\n\n// Extends itself\nbizagi.rendering.multiSelect.extend(\"bizagi.rendering.multiSelect\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.multiSelect.extend(\"bizagi.rendering.multiSelect\", {\n  MORE_OPTION_WIDTH: 40,\n  SEARCH_MIN_LENGTH: 1,\n  temporalElements: {} },\n{\n\n  /**\r\n   * Template method to implement in each device to customize each render after processed\r\n   */\n  renderSingle: function renderSingle() {\n    // Call base\n    this._super();\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    if (this.properties.editable) {\n      this.configureHandlers();\n    } else {\n      this.configureHandlersReadOnly();\n    }\n  },\n\n  configureHandlers: function configureHandlers() {\n    var $control = this.getControl();\n    $(\".bz-multiselect__arrow\", $control).\n    on(\"click\", this.openModalView.bind(this));\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li div.bz-btn-icn\", this.onUnselectElement.bind(this)).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var $control = this.getControl();\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  onUnselectElement: function onUnselectElement(ev) {\n    var $element = $(ev.target);\n    var idToRemove = $element.data(\"id\");\n\n    // Remove element\n    this.removeElement({ id: idToRemove });\n    this.addSelectedElements();\n  },\n\n  onShowSelectedElements: function onShowSelectedElements(ev) {\n    var self = this;\n    var $element = $(ev.currentTarget);\n    var index = $element.data('index');\n    var values = self.getDataValue();\n    var valuesToShow = (values || []).slice(index);\n    var template = this.renderFactory.getTemplate(\"list-multiselect-tags\");\n    var $listView = this.showFloatListView(template, {\n      datasource: valuesToShow,\n      editable: self.properties.editable });\n\n\n    var $tagElements = $('ul.bz-multiselect__tags', $listView);\n\n    $tagElements.on(\"click, mousedown\", \"li div.bz-btn-icn\", function (ev) {\n      self.onUnselectElement(ev);\n      $listView.remove();\n    });\n\n    $listView.on(\"closeView\", function () {\n      $tagElements.off(\"click\", \"li div.bz-btn-icn\", self.onUnselectElement.bind(self));\n      $listView.remove();\n    });\n  },\n\n  openModalView: function openModalView() {\n    //Creating modal view\n    var self = this;\n    //Reset the temporal array\n    self.Class.temporalElements = {};\n    var template = self.renderFactory.getTemplate('multiselectModalView');\n    var values = self.getDataValue();\n    var options = {\n      selected: values,\n      isChecked: function isChecked(id) {\n        return self.markAsChecked.call(this, id);\n      } };\n\n\n    this.getData().done(function (result) {\n      var data = {\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation,\n        \"datasource\": result,\n        \"options\": options };\n\n      try {\n        var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n        for (var i = 0, length = values.length; i < length; i++) {\n          self.Class.temporalElements[values[i].id] = values[i];\n        }\n        var modalView = $($.trim(modalViewTemplate(data)));\n        self.modalListHandlers(modalView);\n\n        modalView.kendoMobileModalView({\n          close: function close() {\n            self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n            this.destroy();\n            this.element.remove();\n          },\n          useNativeScrolling: true,\n          modal: false });\n\n\n        self.configureModalViewHandlers(modalView);\n\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        modalView.kendoMobileModalView('open');\n      } catch (e) {\n        bizagi.log(e.message);\n      }\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n    var $listContainer = inputContainer.find(\".bz-multiselect__list li\");\n    var closeModalViewPromise = new $.Deferred();\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Showing found results\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('keypress keyup', function () {\n      if (this.value !== \"\") {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n      } else {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n        $(\"#ui-bizagi-wp-filter-results-multiselect-wrapper ul li\", inputContainer).show();\n      }\n\n      // Getting and showing the data\n      self.filterList(this.value, $listContainer);\n    }).focus(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").addClass(\"searching\");\n    }).blur(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").removeClass(\"searching\");\n    });\n\n    //Cleaning search\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind('click', function () {\n      $(\"#ui-bizagi-wp-filter-results-multiselect-wrapper ul li\", inputContainer).show();\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //when click on apply button\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Trigger delete event for tags\n    inputContainer.find(\".filter-searchlist-modal-view-tags\").on(\"click\", '.bz-rn-remove-tag-on-search-list', function () {\n      self.removeItem($(this), true);\n\n      var term = inputContainer.find(\".bz-wp-modalview-header-input-search\").val();\n\n      // Getting and showing the data\n      self.filterList(term, $listContainer);\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      self.addNewValuesToInput();\n      self.Class.temporalElements = {};\n    }).fail(function () {\n      self.Class.temporalElements = {};\n    });\n  },\n\n  /**\r\n      * Adding new values to input\r\n      * */\n  addNewValuesToInput: function addNewValuesToInput() {\n    var self = this;\n\n    //Create a temporal array\n    var tempArray = [];\n\n    $.each(self.Class.temporalElements, function (i, ele) {\n      tempArray.push(ele);\n    });\n\n    self.setValue(tempArray);\n    self.addSelectedElements();\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n    var self = this;\n    var $control = self.getControl();\n    var values = self.getDataValue();\n    var totalValues = values.length;\n    var $tagsContainer = $('ul.bz-multiselect__tags', $control);\n    var editable = this.properties.editable;\n    $tagsContainer.empty();\n\n    if (totalValues > 0) {\n\n      var template = this.renderFactory.getTemplate(\"list-multiselect-tag\");\n\n      for (var i = 0; i < totalValues; i++) {\n        var item = values[i];\n        var data = { id: item.id, value: item.value, editable: editable };\n        var elementTemplate = kendo.template(template, { useWithBlock: false });\n        var $ChildToAdd = $($.trim(elementTemplate(data)));\n\n        $tagsContainer.append($ChildToAdd);\n\n        // Process the control in the layout\n        this.processControlLayout(this.properties.valueFormat || {});\n\n        if (!this.canAddMoreItems($tagsContainer)) {\n          // Remove last item added\n          $tagsContainer.\n          children().\n          last().\n          remove();\n\n          // Add the view mode item\n          var data = {\n            'value': totalValues - i,\n            'index': i };\n\n\n          var viewMoreTemplate = kendo.template(this.renderFactory.getTemplate(\"list-multiselect-view-more\"), { useWithBlock: false });\n          var $viewMore = $($.trim(viewMoreTemplate(data)));\n          $tagsContainer.append($viewMore);\n          break;\n        }\n      }\n    }\n\n  },\n\n  modalListHandlers: function modalListHandlers($floatListContext) {\n    var self = this;\n    var $listContainer = $floatListContext.find(\".bz-multiselect__list li\");\n    var checkbox = $listContainer.find(\"input[type=checkbox]\");\n\n    $floatListContext.find(\".bz-multiselect__search_input\").bind(\"change keypress keyup mousedown\", function (evt) {\n      evt.stopPropagation();\n\n      self.filterList(this.value, $listContainer);\n    });\n\n    checkbox.change(function () {\n      var $context = $(this);\n      var isChecked = $context.is(\":checked\");\n      var newValue = { id: $context.data(\"id\"), value: $context.data(\"value\") };\n\n      if (isChecked) {\n        self.addTemporalElement(newValue, false);\n      } else {\n        self.addTemporalElement(newValue, true);\n      }\n    });\n\n    $floatListContext.on(\"closeView\", function () {\n      self.closeFloatView();\n\n      $(document).unbind(\"mousedown.multiselect\");\n    });\n  },\n\n  addTemporalElement: function addTemporalElement(element, elementToRemove) {\n    var self = this;\n    if (elementToRemove) {\n      delete self.Class.temporalElements[element.id];\n    } else {\n      self.Class.temporalElements[element.id] = element;\n    }\n  },\n\n  showFloatListView: function showFloatListView(template, data) {\n    var self = this;\n    var $control = self.getControl();\n    var multiSelect = $(\".bz-multiselect\", $control);\n\n    var $containerControl = $control.closest(\".ui-bizagi-render-control\");\n    var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n    var $floatList = $($.trim(modalViewTemplate(data))); //$.tmpl(template, data, options);\n    var widthControl = multiSelect.width();\n\n    $containerControl.append($floatList);\n\n    $floatList.width(widthControl);\n\n    $floatList.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: multiSelect,\n      collision: \"fit\" }).\n    hide();\n\n    // Display view\n    $floatList.show();\n\n    // Stop bubbling outside the dropdown\n    $floatList.on(\"mousedown\", function (ev) {\n      ev.preventDefault();\n      return false;\n    });\n\n    // Add global handler to close the float view\n    $(document).one(\"mousedown.multiselect\", function (evt) {\n      $floatList.trigger('closeView');\n    });\n\n    return $floatList;\n  } });","/*  \r\n *   Name: BizAgi Smartphone Render list Extension\r\n*   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to tablet devices\r\n */\n\n// Extends from base list\nbizagi.rendering.radio.extend(\"bizagi.rendering.radio\", {}, {\n\n  /* POSTRENDER\r\n                                                              ======================================================*/\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var deferred = $.Deferred();\n\n    self.getArrowContainer().hide();\n    $.when(self.renderControl()).done(function () {\n      self.input = self.combo = $(\".ui-bz-render-radio\", self.getControl());\n\n      if (self.value)\n      self.setValue(self.value, false);\n\n      if (properties.editable) {\n        container.addClass(\"bz-command-edit-inline\");\n\n        self.input.change(function () {\n          var selectedRadio = self.input.find(\"input:radio:checked\");\n          self.input.find(\".checked\").removeClass(\"checked\");\n          self.input.find(\".bz-check\").addClass(\"bz-unchecked\").removeClass(\"bz-check\");\n\n          selectedRadio.closest(\"div\").addClass(\"checked\");\n          selectedRadio.addClass(\"bz-check\");\n          selectedRadio.removeClass(\"bz-unchecked\");\n\n          var newValue = { id: selectedRadio.prop(\"value\"), value: selectedRadio.parent().text() };\n          self.setValue(newValue);\n\n          /*if (self.properties.submitOnChange) {\r\n                                       self.submitOnChange();\r\n                                   }*/\n        });\n      } else {\n        container.addClass(\"bz-rn-non-editable\");\n        self.input = self.combo = self.getControl().html(\"<span class=\\\"bz-rn-non-editable bz-rn-align-class bz-rn-text\\\"></span>\").find(\"span\");\n      }\n\n      deferred.resolve();\n\n    });\n\n    return deferred.promise();\n  },\n\n  /* SETS DISPLAY VALUE\r\n     ======================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    if (value !== undefined && value.id != null) {\n      if (properties.editable) {\n        // Find the control to check where value is\n        var radioItem = self.input.find(\"input[type='radio'][value='\" + value.id + \"']\");\n        radioItem.prop(\"checked\", \"checked\");\n        radioItem.closest(\"div\").addClass(\"checked\");\n        radioItem.addClass(\"bz-check\").removeClass(\"bz-unchecked\");\n      } else {\n        // Find the control to check where value is\n        self.input.html(value.value ? value.value.toString() : \"\");\n        self.input.attr(\"id\", value.id);\n      }\n    }\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n    var selectedItem = self.element.find(\".checked\").removeClass(\"checked\");\n\n    selectedItem.find(\".bz-rn-radio-item\").prop(\"checked\", false).removeClass(\"bz-check\").addClass(\"bz-unchecked\");\n    self.setValue(value, false);\n    self.setDisplayValue(value);\n  } });","/**\r\n *   Name: BizAgi Smartphone Render Cascading combo Extension\r\n *   Author: Oscar O\r\n *   Comments:\r\n *   -   This script will redefine the cascading combo render class to adjust to tablet devices\r\n */\n\n// Extends from base cascading combo, then apply tablet combo stuff\nbizagi.rendering.cascadingCombo.extend(\"bizagi.rendering.cascadingCombo\", {}, {\n\n  init: function init(params) {\n    var self = this;\n    self._super(params);\n    this.properties.data = this.properties.data || [];\n\n    self.bind(\"select\", function (ex, value) {\n      self.onComboChange(value);\n    });\n  },\n  /*\r\n     *\r\n     * */\n  renderReadOnly: function renderReadOnly() {\n    return bizagi.rendering.combo.prototype.renderReadOnly.apply(this, arguments);\n  },\n\n  /**\r\n      * Initilizing the combo control\r\n      * */\n  renderSingle: function renderSingle() {\n    var self = this;\n    self._super();\n\n    var parentCombo = self.getParentCombo();\n\n    if (parentCombo !== null && parentCombo.properties.type == \"cascadingCombo\") {\n      self.isDependant = true;\n      parentCombo.dependants.push(self);\n      if (self.getValue() != null) {\n        self.properties.parentComboValue = self.getValue().id;\n      } else {\n        self.initializingCascadingCombo = true;\n      }\n    }\n\n    self.initialValueSet = true;\n    $.when(bizagi.rendering.combo.prototype.renderSingle.apply(self, arguments)).\n    done(function () {\n      if (self.value && self.isDependant == false) {\n        self.triggerHandler(\"select\", self.value);\n      }\n      self.initialValueSet = false;\n    });\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRenderSingle: function postRenderSingle() {\n    bizagi.rendering.combo.prototype.postRenderSingle.apply(this, arguments);\n  },\n\n  renderEdition: function renderEdition() {\n    bizagi.rendering.combo.prototype.renderEdition.apply(this, arguments);\n  },\n\n  /**\r\n      * Setting the combo's handlers\r\n      * */\n  configureCombo: function configureCombo() {\n    bizagi.rendering.combo.prototype.configureCombo.apply(this, arguments);\n  },\n\n  configureModalViewHandlers: function configureModalViewHandlers() {\n    bizagi.rendering.combo.prototype.configureModalViewHandlers.apply(this, arguments);\n  },\n\n  filterList: function filterList() {\n    bizagi.rendering.combo.prototype.filterList.apply(this, arguments);\n  },\n\n  setModalViewDisplayValue: function setModalViewDisplayValue() {\n    bizagi.rendering.combo.prototype.setModalViewDisplayValue.apply(this, arguments);\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue() {\n    bizagi.rendering.combo.prototype.setDisplayValue.apply(this, arguments);\n  },\n\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (value === \"\") {\n      value = { id: \"\", value: \"\" };\n    }\n\n    if (!!value) {\n      if (self.value === null || self.value.id !== value.id) {\n        self.triggerHandler(\"select\", value);\n      }\n\n      this._super(value, triggerEvents);\n    }\n  },\n\n  /**\r\n      * Finds an element in the combo data values by id\r\n      * @param {int} id \r\n      * @returns {Object}\r\n      */\n  findDataValueById: function findDataValueById(id) {\n    return (this.properties.data || []).find(function (e) {\n      return e.id == id;\n    });\n  },\n\n  /**\r\n      * cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    bizagi.rendering.combo.prototype.cleanData.apply(this, arguments);\n  },\n\n  /**\r\n      * cleans the control's data\r\n      * */\n  resetData: function resetData() {\n    bizagi.rendering.combo.prototype.resetData.apply(this, arguments);\n  },\n\n  processComboData: function processComboData(data) {\n    bizagi.rendering.combo.prototype.processComboData.apply(this, arguments);\n  },\n\n  validateValue: function validateValue(value) {\n    bizagi.rendering.combo.prototype.validateValue.apply(this, arguments);\n  },\n\n  /*\r\n      *   Returns the selected value in the template\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return bizagi.rendering.combo.prototype.getSelectedValue.call(this, arguments);\n  },\n\n  /*\r\n      *   Handler for combo change\r\n      */\n  onComboChange: function onComboChange(newValue) {\n    var self = this;\n    self.selectedValue = newValue.value;\n    var params = {};\n    params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = newValue.id;\n\n    $.each(this.dependants, function (key, dependant) {\n      dependant.properties.params = params;\n      dependant.properties.parentComboValue = newValue.id;\n\n      if (newValue.id == \"\") {\n        dependant.resetData();\n        dependant.setDisplayValue({ id: \"\", value: \"\" });\n      } else {\n        $.when(dependant.getData(params)).done(function (data) {\n          dependant.properties.data = data;\n          if (dependant.value !== null) {\n            var selected = dependant.findDataValueById(dependant.value.id);\n            if (selected) {\n              if (selected.id == \"\" && self.value && self.value.value == \"\") {\n                dependant.resetData();\n                dependant.setDisplayValue({ id: \"\", value: \"\" });\n              } else {\n                dependant.triggerHandler(\"select\", selected);\n              }\n            } else\n            {\n              dependant.setDisplayValue({ id: \"\", value: \"\" });\n              dependant.triggerHandler(\"select\", { id: \"\", value: \"\" });\n            }\n          } else {\n            dependant.triggerHandler(\"select\", { id: \"\", value: \"\" });\n          }\n\n        });\n      }\n    });\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  } });","/*\r\n*   Name: BizAgi Smartphone Collection Navigator Extension\r\n*   Author: Bizagi Bizagi Team\r\n*   Comments:\r\n*   -   This script will redefine the collection Navigator class to adjust to smartphone devices\r\n*/\n\nbizagi.rendering.collectionnavigator.extend(\"bizagi.rendering.collectionnavigator\", {}, {\n\n  renderSingle: function renderSingle() {\n\n    var self = this;\n    var container = self.getContainerRender();\n\n    container.addClass(\"bz-command-not-edit\");\n  } });","/*\r\n*   Name: BizAgi smartphones Render Hidden Extension\r\n*   Author: RicharU based on Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the hidden render class to adjust to smartphone devices\r\n*/\n\n// Extends itself\nbizagi.rendering.hidden.extend(\"bizagi.rendering.hidden\", {}, {\n  /**\r\n                                                                 * Returns the html templated element\r\n                                                                 * @returns {} \r\n                                                                 */\n  render: function render() {\n    var self = this;\n\n    return self.renderSingle();\n  },\n\n  /**\r\n      * Returns the in-memory processed element\r\n      * @returns {} \r\n      */\n  renderSingle: function renderSingle() {\n    var self = this;\n    if (self.getMode() === \"design\") {\n      return \"<div>\" + bizagi.localization.getResource(\"render-hidden-displayName\") + \"</div>\";\n    } else {\n      return \"<div />\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      * @returns {} \r\n      */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super();\n\n    // Set the initial value\n    if (properties.value !== undefined) {\n      self.setDisplayValue(properties.value);\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    self.setValue(value, false);\n  } });","/**\r\n *   Name: Bizagi smartphone Render Upload Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the upload render class to adjust to smartphones devices\r\n */\n\n// Extends itself\nbizagi.rendering.upload.extend(\"bizagi.rendering.upload\", {\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  QUALITY_PICTURE: 50,\n  LIMIT: 1, // limit: The maximum number of multimedia files in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\n  EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"] },\n{\n\n  /**\r\n   * Template method to implement in each children to customize each control\r\n   * @returns {}\r\n   */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"upload\");\n    var allow_upload = true;\n\n    self.checkExtensions();\n\n    if (bizagi.util.isCordovaSupported()) {\n      allow_upload = self.validOptions && (self.validOptions.image || self.validOptions.video);\n    }\n\n    // Render template\n    var html = $.kendoTmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: self.properties.editable && allow_upload,\n      noFiles: self.filesCount === 0,\n      allow_upload: allow_upload,\n      nonSupportedExtension: self.nonSupportedExtension,\n      uploadOptions: self.upload_options,\n      allowSendInMail: self.properties.allowSendInMail });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0, filesCount = self.filesCount; i < filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param {} file\r\n      * @returns {}\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var image = self.checkImageFile(file.fileName);\n    var template = self.renderFactory.getTemplate(\"uploadItem\");\n\n    // Don't render urls when not running in execution mode\n    var url = mode !== \"execution\" ? \"javascript:void(0);\" : self.buildItemUrl(file);\n\n    var html = $.kendoTmpl(template, {\n      url: url,\n      image: image,\n      allowDelete: self.properties.allowDelete,\n      editable: self.properties.editable,\n      filename: file.fileName,\n      id: file.id,\n      mode: mode,\n      isCordovaSupported: bizagi.util.isCordovaSupported() });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      * @returns {}\r\n      */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var containerRender = self.getContainerRender();\n\n    self.configureHelpText();\n\n    self.itemAddfile = $(\".bz-rn-upload-show-menu\", self.getControl());\n\n    if (!self.properties.editable || self.itIsMaxNumberFilesReached() || !bizagi.util.isCordovaSupported() && !bizagi.util.media.fileAPISupported()) {\n      self.itemAddfile.hide();\n    }\n\n    if (!self.properties.editable || !bizagi.util.isCordovaSupported() && !bizagi.util.media.fileAPISupported()) {\n      containerRender.addClass(\"bz-rn-non-editable\");\n    } else {\n      containerRender.addClass(\"bz-command-edit-inline\");\n      self.buildUploadControl();\n    }\n\n    self.addInteractions();\n  },\n\n  buildUploadControl: function buildUploadControl() {\n    var self = this;\n    var container = self.getControl();\n    var fileInput = $(\".bz-rn-upload-web\", container);\n\n    if (bizagi.util.isCordovaSupported()) {\n      // Upload image\n      $(self.itemAddfile).actionSheet({\n        actions: self.upload_options,\n        actionClicked: function actionClicked(action) {\n          // Action for web file upload\n          if (action.guid === 5) {\n            fileInput.click();\n          } else {\n            self.handlerUploadImage(action.guid);\n          }\n        },\n        appear: function appear(action) {\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n        cancelClicked: function cancelClicked(action) {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        } });\n\n\n      // Resolution image\n      $(\".bz-rn-upload-resolution-container\", container).actionSheet({\n        actions: bizagi.util.media.getImageResolutionItems(),\n        actionClicked: function actionClicked(action) {\n          bizagi.loading.start();\n          $.when(self.handlerResolutionUpload(action.guid)).always(function () {\n            bizagi.loading.stop();\n          });\n        },\n        appear: function appear(action) {\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n        cancelClicked: function cancelClicked(action) {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        } });\n\n    } else {\n      $(self.itemAddfile).click(function () {\n        fileInput.click();\n      });\n    }\n\n    fileInput.on(\"click\", function (e) {\n      e.stopPropagation();\n    });\n\n    // Attach event to web upload-control\n    fileInput.on(\"change\", function () {\n      var that = this;\n      var dataFile = that.files[0];\n      var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSFILE, self.Class.EXTENSIONSAUDIO, self.Class.EXTENSIONSVIDEO);\n\n      dataFile.fullPath = that.value;\n\n      bizagi.loading.start();\n\n      if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n        $.when(self.processUploadFile(dataFile)).\n        then(function (result) {\n          self.onUploadFileCompleted(self, JSON.parse(decodeURIComponent(result)));\n        }).fail(function (error) {\n          if (error.statusText !== \"Unauthorized\" || error.statusText.toLowerCase() !== \"ok\") {\n            bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-language-error\"));\n          }\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      } else {\n        bizagi.loading.stop();\n      }\n\n      // Clearing input Values\n      $(that).val(\"\");\n    });\n\n    // Check files number\n    self.checkMaxFiles();\n\n    // Attach delete option\n    self.attachDeleteHandler();\n  },\n\n  /**\r\n      * Add the interactions to the upload control items\r\n      * @return {}\r\n      */\n  addInteractions: function addInteractions() {\n    var self = this;\n\n    // Handler to download the file\n    $(\"ul.files\", self.getControl()).on(\"click\", \".ui-bizagi-render-link.button\", function () {\n      bizagi.loading.start();\n      $.when(bizagi.util.media.downloadFile($(this).attr(\"data-url\"), this.title)).fail(function (error) {\n        self.executeFormFailHandler(error);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n      * Handler of delete action\r\n      * @returns {}\r\n      */\n  attachDeleteHandler: function attachDeleteHandler() {\n    var self = this;\n\n    $(\".bz-rn-upload-delete-icon\", self.getControl()).on(\"click\", function () {\n      var item = $(this).parent(\".ui-bizagi-render-upload-item\");\n      var file = item.data();\n      $.when(self.deleteUploadItem(item, file.id)).\n      done(function () {\n        // Remove item\n        item.hide();\n        item.remove();\n\n        // Update value\n        self.setValue(self.files, false);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n        // Trigger change\n        self.triggerRenderChange();\n      });\n    });\n  },\n\n  /**\r\n      * Handler of upload image\r\n      * @param {} ordinal\r\n      * @returns {}\r\n      */\n  handlerUploadImage: function handlerUploadImage(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    switch (actionSelected) {\n      case 2:\n        navigator.camera.getPicture(function (dataImage) {\n          self.dataImage = dataImage;\n          var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSVIDEO);\n          bizagi.loading.start();\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).\n          then(function () {\n            //Gets the real properties for the file\n            return $.when(bizagi.util.media.getFileDataInfo(self.dataImage)).\n            then(function (fileData) {\n              self.fileProperties = fileData;\n              if (bizagi.util.media.checkFileTypes(fileData, self.properties, extensions)) {\n                if (!bizagi.util.isAndroid()) {\n                  return $.when(bizagi.util.media.modalResolutionUpload()).then(function (buttonIndex) {\n                    if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\n                      return self.handlerResolutionUpload(buttonIndex);\n                    }\n                  });\n\n                } else {\n                  // force click to show actionsheet menu\n                  $(\".bz-rn-upload-resolution-container\", self.getContainerRender()).click();\n                }\n              }\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        }, self.onFail.bind(self), {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY });\n\n        break;\n      case 1:\n        navigator.camera.getPicture(function (dataImage) {\n          bizagi.loading.start();\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).\n          then(function () {\n            return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n              self.fileProperties = fileData;\n              return self.saveImage(self, dataImage);\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        },\n        self.onFail.bind(self),\n        {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: navigator.camera.PictureSourceType.CAMERA,\n          mediaType: navigator.camera.MediaType.PICTURE,\n          destinationType: Camera.DestinationType.FILE_URI,\n          correctOrientation: true,\n          targetWidth: 1280,\n          targetHeight: 960 });\n\n        break;\n      case 3:\n        navigator.device.capture.captureVideo(function (dataVideo) {\n          bizagi.loading.start();\n\n          $.when(bizagi.util.media.checkMaxSizeVideo(dataVideo, self.properties)).\n          then(function () {\n            return self.saveVideo(self, dataVideo);\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        }, self.onFail.bind(self), { limit: self.Class.LIMIT });\n        break;}\n\n  },\n\n  /**\r\n      * Handler of resolution upload\r\n      * @param {} ordinal\r\n      * @returns {}\r\n      */\n  handlerResolutionUpload: function handlerResolutionUpload(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    //if original, save image normally, if not, reduce quality and size\n    if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\n      return self.saveImage(self, self.dataImage);\n    } else {\n      var resolution = bizagi.util.media.getImageResolution(actionSelected);\n\n      return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).\n      then(function (result) {\n        self.editedImageURL = result.localUrl;\n        self.properties.url = result.base64Image;\n        return self.saveImage(self, self.dataImage);\n      });\n    }\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var self = this;\n    var errorResponse = error.responseText ? error.responseText : bizagi.localization.getResource(\"workportal-general-error\");self.getFormContainer().failHandler(errorResponse);\n  },\n\n  /**\r\n      * CheckImageFile\r\n      * @param {} fileName\r\n      * @returns {}\r\n      */\n  checkImageFile: function checkImageFile(fileName) {\n    var self = this;\n    var validExtensions = self.Class.EXTENSIONSIMG;\n\n    if (!fileName || bizagi.util.isObjectEmpty(fileName)) return false;\n\n    for (var i = 0, length = validExtensions.length; i < length; i++) {\n      var image = fileName.indexOf(\".\" + validExtensions[i]);\n\n      if (image >= 0) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Templates\r\n      * @returns {}\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"upload\";\n  },\n\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  },\n\n  /**\r\n      * Send image using HTTP\r\n      * @param {} context\r\n      * @param {} dataImage\r\n      * @returns {}\r\n      */\n  saveImage: function saveImage(context, dataImage) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n    var fileName = self.fileProperties.name;\n\n    if (self.editedImageURL) {\n      params.dataFile = self.editedImageURL;\n    } else if (self.fileProperties) {\n      params.dataFile = self.fileProperties.url;\n    }\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.mimeType = \"image/jpeg\";\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n\n    //Cleans variables related previous uploads\n    self.editedImageURL = null;\n    self.fileProperties = null;\n\n    // Fix android 4.4 getting images from recent folder\n    params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n    return $.when(bizagi.util.media.uploadFile(params)).then(function (r) {\n      var response = JSON.parse(decodeURIComponent(r.response));\n      if (response.type === \"error\") {\n        bizagi.showMessageBox(response.message, response.errorType);\n      } else {\n        self.onUploadFileCompleted(context, response);\n      }\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    });\n  },\n\n  /**\r\n      * saveVideo\r\n      * @param {} context\r\n      * @param {} dataVideo\r\n      * @returns {}\r\n      */\n  saveVideo: function saveVideo(context, dataVideo) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileName = dataVideo[0].name;\n    params.options.mimeType = \"video/quicktime\";\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataVideo[0].fullPath;\n\n    return $.when(bizagi.util.media.uploadFile(params)).then(function (r) {\n      var response = JSON.parse(decodeURIComponent(r.response));\n      if (response.type === \"error\") {\n        bizagi.showMessageBox(response.message, response.errorType);\n      } else {\n        self.onUploadFileCompleted(context, response);\n      }\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    });\n  },\n\n  /**\r\n      * Management fail messages\r\n      */\n  onFail: function onFail(error) {\n    var messageError = bizagi.util.processFailMessage(error);\n\n    bizagi.loading.stop();\n\n    if (typeof messageError == \"string\" && messageError.indexOf(\"No Activity found to handle Intent\") !== -1) {\n      var hasResource = bizagi.util.isValidResource(\"render-upload-error-media-app\");\n      var message = hasResource ? bizagi.localization.getResource(\"render-upload-error-media-app\") : \"Your device does not have an app to execute this action.\";\n\n      bizagi.showMessageBox(message);\n    }\n  },\n\n  /**\r\n      * onUploadFileCompleted\r\n      * @param {} context\r\n      * @param {} response\r\n      * @returns {}\r\n      */\n  onUploadFileCompleted: function onUploadFileCompleted(context, result) {\n    var self = context;\n    var control = self.getControl();\n    var uploadWrapper = $(\".ui-bizagi-render-upload-container .files\", control);\n\n    if (result.id && result.fileName) {\n      // Locate it before the upload wrapper\n      var newItem = self.renderUploadItem(result);\n      uploadWrapper.append(newItem);\n\n      // Increment counter\n      self.filesCount = self.filesCount + 1;\n\n      // Copy the files value but not its reference\n      var files = self.files.slice();\n\n      //Add the new item to this temporal array\n      files.push([result.id, result.fileName]);\n\n      // Update value\n      self.setValue(files, true);\n\n      // Check maxFiles\n      self.checkMaxFiles();\n\n      if (self.properties.allowDelete && self.properties.editable) {\n        self.attachDeleteHandler();\n      }\n\n      self.editedImageURL = null;\n    } else {\n      bizagi.showMessageBox(result.message, \"Error\");\n    }\n  },\n\n  /**\r\n     * Checks if the control data is valid\r\n     * @returns Boolean\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    //Call Base\n    var bValid = self._super(invalidElements);\n\n    if (bValid) {\n      // Clear error message\n      self.setValidationMessage(\"\");\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Check maximum number of files\r\n      * @returns {}\r\n      */\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var maxFiles = properties.maxfiles;\n\n    var actualFiles = properties.value ? properties.value.length : 0;\n\n    if (properties.editable) {\n      if (maxFiles !== 0 && self.filesCount >= maxFiles && actualFiles >= maxFiles) {\n        self.itemAddfile.hide();\n      } else {\n        self.itemAddfile.show();\n      }\n    } else {\n      //Checks if the files count is equals to 0, to show the no files dialog\n      if (self.filesCount == 0) {\n        $(\"#no-files\", control).show();\n      }\n    }\n  },\n\n  /**\r\n      * Check allow extensions and define possible choices\r\n      * @returns {}\r\n      */\n  checkExtensions: function checkExtensions() {\n    var self = this;\n    var validExtensions = self.properties.validExtensions || \"\";\n\n    self.validOptions = { audio: false, video: false, image: false, file: false };\n\n    // Preprocess the extensions string\n    validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\n\n    //Helps to get the non-supported extensions for mobile\n    var nonSupportedExtensionsArr = [];\n\n    // Initizalice the nonSupportedExtension element\n    self.nonSupportedExtension = \"\";\n\n    if (typeof validExtensions === \"undefined\" || validExtensions === \"\") {\n      self.validOptions = {\n        video: true,\n        image: true,\n        file: true };\n\n    } else {\n      validExtensions = validExtensions.split(\";\");\n\n      if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\n        self.validOptions.video = true;\n        self.validOptions.image = true;\n      } else {\n        for (var i = 0, length = validExtensions.length; i < length; i++) {\n          validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\n\n          if (self.Class.EXTENSIONSFILE.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.file = true;\n          } else if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.image = true;\n          } else if (self.Class.EXTENSIONSVIDEO.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.video = true;\n          } else {\n            //If the extension is not part or any category, it is stored in nonSupportedExtensions array\n            nonSupportedExtensionsArr.push(validExtensions[i]);\n          }\n        }\n      }\n    }\n\n    if (!self.validOptions.file && !self.validOptions.image && !self.validOptions.video) {\n      if (typeof self.itemAddfile !== \"undefined\") {\n        self.itemAddfile.hide();\n      }\n    }\n\n    // Get upload options\n    self.getUploadChoices();\n\n    // Adjust file extension, in order to make it multiline & Stores the non-supported extensions\n    self.nonSupportedExtension = nonSupportedExtensionsArr.join(\", \") || \"\";\n  },\n\n  /**\r\n      * Check if the maximun number of files than can be uploaded has been reached\r\n      * @returns {}\r\n      */\n  itIsMaxNumberFilesReached: function itIsMaxNumberFilesReached() {\n    var maxFiles = this.properties.maxfiles;\n    var actualFiles = this.properties.value ? this.properties.value.length : 0;\n\n    return maxFiles !== 0 && actualFiles >= maxFiles;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(prefix + \"xpath\", self.getUploadXpath());\n    formData.append(prefix + \"idRender\", self.properties.id);\n    formData.append(prefix + \"xpathContext\", self.properties.xpathContext || this.getXpathContext());\n    formData.append(prefix + self.Class.BA_PAGE_CACHE, self.properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(self.properties.xpath, dataFile);\n\n    if (self.properties.contexttype) {\n      formData.append(prefix + \"contexttype\", self.properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  },\n\n  /**\r\n      * Get the XpathContext in a grid\r\n      */\n  getXpathContext: function getXpathContext() {\n    var self = this;\n    if (self.grid) {\n      var surrogateKey = this.surrogateKey || \"\";\n      var self = this;\n      return self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} context\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(dataFile) {\n    var data = { url: this.properties.addUrl, formData: this.buildAddFileParams(dataFile) };\n    return this.dataService.processUploadFile(data);\n  },\n\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var items = $(\".ui-bizagi-render-upload-item\", self.getControl());\n\n    items.each(function (index, item) {\n      item = $(item);\n      var file = item.data();\n\n      $.when(self.deleteUploadItem(item, file.id)).done(function () {\n        // Remove item\n        item.hide();\n        item.remove();\n\n        // Update value\n        self.setValue(self.files, false);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n        // Trigger change\n        self.triggerRenderChange();\n      });\n    });\n  },\n\n  getUploadChoices: function getUploadChoices() {\n    var self = this;\n    var itemsUpload = [];\n\n    // Add upload options\n    if (self.validOptions.file && bizagi.util.media.fileAPISupported() && bizagi.util.isAndroidDevice() && !bizagi.util.isCordovaSupported()) {\n      // Upload any file\n      itemsUpload.push({ \"guid\": 5, \"displayName\": bizagi.localization.getResource(\"render-upload-link-label\") });\n    }\n\n    if (bizagi.util.isCordovaSupported()) {\n      if (self.validOptions.image) {\n        // Take photo, Choose photo\n        itemsUpload.push({\n          \"guid\": 1,\n          \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\") });\n\n        itemsUpload.push({\n          \"guid\": 2,\n          \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\") });\n\n      }\n\n      if (self.validOptions.video) {\n        // Take video\n        itemsUpload.push({\n          \"guid\": 3,\n          \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-video\") });\n\n      }\n    }\n\n    // Stores the upload options\n    self.upload_options = [].concat(itemsUpload);\n  } });","/*\r\n*   Name: Bizagi Smartphone Render Grid Extension\r\n*   Author: Richar Urbano <Richar.Urbano@Bizagi.com>\r\n*   Comments:\r\n*   -   This script will redefine the grid render class to adjust to smartphone devices\r\n*/\n\n// Extends itself\nbizagi.rendering.render.extend(\"bizagi.rendering.grid.beta\", {}, {\n  init: function init(params) {\n    var self = this;\n\n    self.params = params;\n\n    // Call base\n    self._super(params);\n  },\n\n  /**\r\n      * Returns the grid template to be used\r\n      * @returns {} \r\n      */\n  getGridTemplate: function getGridTemplate() {\n    return this.renderFactory.getTemplate(\"grid-control\");\n  },\n\n  /**\r\n      * Applies the template to the render and returns the resolved element\r\n      * @param {} template \r\n      * @returns {} \r\n      */\n  applyTemplate: function applyTemplate(template) {\n    var self = this;\n    var properties = self.properties;\n    var orientation = self.properties.orientation;\n\n    // TODO: helptext\n    return $.kendoTmpl(template, {\n      id: bizagi.util.encodeXpath(properties.xpath),\n      displayName: bizagi.util.encodeXpath(properties.displayName),\n      orientation: orientation });\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {} Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var defer = new $.Deferred();\n    var template = self.getGridTemplate();\n\n    // Render template\n    var html = self.applyTemplate(template);\n    defer.resolve(html);\n\n    return defer.promise();\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var container = self.getContainerRender();\n\n    container.addClass(\"bz-command-edit-inline\");\n    container.find(\".ui-bizagi-label\").hide();\n    self.getArrowContainer().hide();\n\n    // Call base \n    self._super();\n\n    // Render Edition       \n    $(self.element).on(\"click\", function (e) {\n      bizagi.loading.start();\n      setTimeout(function () {\n        $.when(self.renderEdition()).\n        then(function (gridView) {\n          gridView.postRenderSingle();\n        });\n      }, 1);\n\n    });\n  },\n\n  renderEdition: function renderEdition() {\n    var self = this;\n    var control = self.getControl();\n    var deferred = $.Deferred();\n\n    self.params.pane = control.closest('div[data-role=\"pane\"]');\n\n    // Render grid view        \n    var grid = new bizagi.rendering.smartphone.helpers.grid(self.params);\n    deferred.resolve(grid);\n\n    return deferred.promise();\n  } });","/*\r\n *   Name: Bizagi smartphone view form implementation\r\n *   Author: Richar Urbano <Richar.Urbano@Bizagi.com>\r\n *   Comments:\r\n *   -   Serves as a view form that can render a inner grid form\r\n */\nbizagi.rendering.grid.extend(\"bizagi.rendering.smartphone.helpers.grid\", {\n  GRID_PAGE_SIZE: 10 },\n{\n\n  /**\r\n   * init\r\n   * @param {} params\r\n   * @returns {}\r\n   */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n\n    if (typeof params.pane !== \"undefined\") {\n      self.pane = params.pane;\n      //self.pane = params.pane.data(\"kendoMobilePane\");\n    } else {\n      console.warn(\"Es necesario asignar un pane a la forma {pane: $pane} para evitar problemas de navegacin entre vistas de Kendo\");\n    }\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    self._super(params);\n\n    // Create a data-structure to keep track of each cell properties\n    self.cellMetadata = {};\n\n    // Fill default properties\n    var properties = self.properties;\n    //var form = self.getFormContainer();\n\n    // Just apply display-type: vertical, align it to the left\n    properties.displayType = \"vertical\";\n    properties.labelAlign = \"left\";\n\n    // Editable property\n    // Revisar base para mejorar comportamiento cuando esta en false los elementos\n    $.each(self.columns, function () {\n      if (self.properties && self.properties.editable) {\n        self.properties.editable = properties.allowEdit === true;\n      }\n    });\n\n    // Create container & Render template\n    var template = self.getViewTemplate();\n    self.gridView = $(self.applyTemplate(template));\n    self.pane.append(self.gridView);\n\n    // <stretch> If set to true, the view will stretch its child contents to occupy the entire view,\n    // while disabling kinetic scrolling. Useful if the view contains an image or a map.\n    // <useNativeScrolling> If set to true, the view will use the native scrolling available in the current platform\n    self.view = new kendo.mobile.ui.View(self.gridView, {\n      \"useNativeScrolling\": false,\n      stretch: true,\n      init: function init() {\n        self.attachHandlers();\n      } });\n\n\n\n    self.scrollContent = $(\"#\" + bizagi.util.encodeXpath(properties.xpath), self.view.contentElement());\n  },\n\n  /**\r\n      * Update or init the element data\r\n      * @param {} data\r\n      * @returns {}\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    self._super(data);\n  },\n\n  /**\r\n      * Returns the view template to be used\r\n      * @returns {}\r\n      */\n  getViewTemplate: function getViewTemplate() {\n    return this.renderFactory.getTemplate(\"grid-view\");\n  },\n\n  /**\r\n      * Applies the template to the render and returns the resolved element\r\n      * @param {} template\r\n      * @returns {}\r\n      */\n  applyTemplate: function applyTemplate(template) {\n    var self = this;\n    var properties = self.properties;\n\n    // id + other column\n    var allowFilter = self.columns.length > 2;\n\n    // Localstorage filter\n    bizagi.util.removeItemLocalStorage(\"grid.filter.\" + properties.id);\n    bizagi.util.setItemLocalStorage(\"grid.filter.\" + properties.id, null);\n\n    return $.kendoTmpl(template, {\n      id: bizagi.util.encodeXpath(properties.xpath),\n      title: properties.displayName,\n      allowAdd: properties.allowAdd,\n      allowFilter: allowFilter });\n\n  },\n\n  /**\r\n      * Method to attach any handler to the view\r\n      * @returns {}\r\n      */\n  attachHandlers: function attachHandlers() {\n    var self = this;\n\n    $(\".bz-rn-view-options\", self.gridView).on(\"click\", function (evt) {\n      evt.stopPropagation();\n\n      self.processAction($(this).attr(\"data-action\"));\n    });\n  },\n\n  /**\r\n      *  Process an action in order to do something with the view\r\n      * @param {} action\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  processAction: function processAction(action, params) {\n    var self = this;\n\n    if (action === \"close\") {\n      self.onClose();\n    }\n\n    if (action === \"add\") {\n      self.addRow();\n    }\n\n    if (action === \"filter\") {\n      self.onFilterRow();\n    }\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {}\r\n      */\n  onClose: function onClose() {\n    var self = this;\n    var properties = self.properties;\n\n    // Localstorage filter\n    bizagi.util.removeItemLocalStorage(\"grid.filter.\" + properties.id);\n\n    self.pane.data(\"kendoMobilePane\").navigate(\"#:back\");\n    self.view.destroy();\n    self.view.element.remove();\n  },\n\n  onFilterRow: function onFilterRow() {\n    var self = this;\n\n    var title = \"Column settings\";\n    var action = \"FILTER\";\n    var modalTemplate = self.renderFactory.getTemplate(\"grid-modal-filter\");\n    var columnFilter = self.buildColumnFilter();\n    var modalFilterTemplate = kendo.template(modalTemplate, { useWithBlock: false });\n    var modalFilter = $(modalFilterTemplate({ list: columnFilter, title: title, action: action }).trim());\n\n    modalFilter.kendoMobileModalView({\n      close: function close() {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        this.destroy();\n        this.element.remove();\n      },\n      useNativeScrolling: true,\n      modal: false });\n\n\n    self.attachModalFilterHandlers(modalFilter);\n    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n    modalFilter.kendoMobileModalView(\"open\");\n  },\n\n  /**\r\n      * Creates the column filter\r\n      * @returns {}\r\n      */\n  buildColumnFilter: function buildColumnFilter() {\n    var self = this;\n    var properties = self.properties;\n    var columnFilter = [];\n\n    // Localstorage filter\n    var localstorage = bizagi.util.getItemLocalStorage(\"grid.filter.\" + properties.id) ? JSON.parse(bizagi.util.getItemLocalStorage(\"grid.filter.\" + properties.id)) : null;\n    var columns = localstorage ? localstorage : self.buildColumns;\n\n    $.each(columns, function (index, column) {\n      if (!column.key && !column.hidden) {\n        column.active = typeof column.active !== \"undefined\" ? column.active : true;\n        columnFilter.push(column);\n      }\n    });\n\n    bizagi.util.setItemLocalStorage(\"grid.filter.\" + properties.id, JSON.stringify(columnFilter));\n\n    return columnFilter;\n  },\n\n  /**\r\n      * Attach events to modalview\r\n      * @param {} modalContainer\r\n      * @returns {}\r\n      */\n  attachModalFilterHandlers: function attachModalFilterHandlers(modalContainer) {\n    var self = this;\n    var properties = self.properties;\n\n    var modalListContainer = modalContainer.find(\".bz-rn-modal-filter-content-list\");\n\n    // Close modalview\n    modalContainer.on(\"click\", \".bz-rn-modal-filter-header-title-cancel\", function () {\n      modalContainer.kendoMobileModalView(\"close\");\n    });\n\n    modalContainer.on(\"click\", \".bz-rn-modal-filter-footer-action\", function () {\n      var localstorage = bizagi.util.getItemLocalStorage(\"grid.filter.\" + properties.id) ? JSON.parse(bizagi.util.getItemLocalStorage(\"grid.filter.\" + properties.id)) : null;\n      //bizagi.util.setItemLocalStorage(\"grid.filter.\" + properties.id, JSON.stringify(columnFilter));\n\n      //var items = modalListContainer.find(\"input:checkbox:checked\");\n      var showHeaders = modalListContainer.find(\"input\").map(function () {\n        var that = this;\n        return { index: $(that).data(\"index\"), active: that.checked };\n      });\n\n      $.each(showHeaders, function (index, item) {\n        var cssIndex = item.index + 1;\n\n        localstorage[index].active = item.active;\n\n        var tags = $(\".bz-rn-grid-table th:nth-child(\" + cssIndex + \"), .bz-rn-grid-table td:nth-child(\" + cssIndex + \")\");\n        if (item.active) {\n          tags.show();\n        } else {\n          tags.hide();\n        }\n      });\n\n      bizagi.util.setItemLocalStorage(\"grid.filter.\" + properties.id, JSON.stringify(localstorage));\n      modalContainer.kendoMobileModalView(\"close\");\n    });\n\n    modalListContainer.on(\"click\", \"input\", function () {\n      var that = this;\n\n      if (modalListContainer.find(\"input:checkbox:checked\").length > 0) {\n        var radioSelected = $(that).is(\":checked\");\n\n        radioSelected ?\n        $(that).removeClass(\"bz-full-ball\").addClass(\"bz-check\") :\n        $(that).addClass(\"bz-full-ball\").removeClass(\"bz-check\");\n      } else {\n        $(that).prop(\"checked\", true);\n      }\n    });\n  },\n\n  /* RENDERS GRID\r\n      =====================================================*/\n\n  /**\r\n                                                               * postRenderSingle\r\n                                                               * @returns {}\r\n                                                               */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    container.addClass(\"bz-command-edit-inline\");\n\n    if (self.properties.helpText !== \"\") {\n      control.addClass(\"bz-rn-grid-contains-help-text\");\n    }\n\n    // Hide the standar label\n    self.getContainerRender().find(\".ui-bizagi-label\").hide();\n    self.getArrowContainer().hide();\n\n    // Call base\n    self._super();\n\n    // Apply plugin\n    self.applyGridPlugin();\n\n    // Set initial data\n    properties.skipInitialLoad = properties.skipInitialLoad || false;\n\n    if (!properties.skipInitialLoad) {\n      if (properties.data) {\n        if (properties.data === \"\" || properties.data.rows.length === 0 && properties.data.page > 1) {\n          self.fetchData(undefined, self.sortBy, self.sortType);\n        } else {\n          self.updateData(properties.data);\n\n          // Trigger change in order to start up the actions when the controls is ready\n          $.when(self.ready()).\n          done(function () {\n            self.triggerRenderChange({ changed: false });\n            self.pane.data(\"kendoMobilePane\").navigate(self.view.id);\n\n            self.configureHeaderAndFooterFixed();\n            self.attachScrollHandler();\n            self.endLoading();\n          });\n        }\n      } else {\n        self.fetchData(properties.page, properties.sortBy, properties.sortOrder);\n      }\n    }\n  },\n\n  /**\r\n      * Method to attach any handler to the Scroller\r\n      * @returns {}\r\n      */\n  attachScrollHandler: function attachScrollHandler() {\n    var self = this;\n    var properties = self.properties;\n    var scrollLeft = 0;\n    var scrollTop = 0;\n\n\n    if (properties.data && properties.data.records === 0) {\n      return;\n    }\n\n    var scroller = self.view.content.find(\".bz-rn-grid-scroll-content\").data(\"kendoMobileScroller\");\n\n    if (scroller) {\n      scroller.reset();\n    }\n\n    var tableLeft = self.view.content.find(\".left-table\").get(0);\n    var scrollHeader = self.view.content.find(\".bz-rn-grid-scroll-header\").get(0);\n\n    scroller.bind(\"scroll\", function (event) {\n      var left = event.scrollLeft;\n      var top = event.scrollTop;\n\n      if (left !== scrollLeft) {\n        var transformLeft = \"translateX(\" + left * -1 + \"px)\";\n        scrollHeader.style.transform = transformLeft;\n        scrollHeader.style.webkitTransform = transformLeft;\n        scrollHeader.style.OTransform = transformLeft;\n\n        scrollLeft = left;\n      }\n\n      if (top !== scrollTop) {\n        var transformTop = \"translateY(\" + top * -1 + \"px)\";\n        tableLeft.style.transform = transformTop;\n        tableLeft.style.webkitTransform = transformTop;\n        tableLeft.style.OTransform = transformTop;\n\n        scrollTop = top;\n      }\n    });\n  },\n\n  /**\r\n      * configureFixedHeaders\r\n      * @returns {}\r\n      */\n  configureHeaderAndFooterFixed: function configureHeaderAndFooterFixed() {\n    var self = this;\n\n    var pivot;\n    var i = -1;\n    var properties = self.properties;\n\n    if (properties.data && properties.data.records === 0) return;\n\n    var tbody = self.scrollContent.find(\".bz-rn-grid-body\");\n    var cols = $(\"tr:first-child td\", tbody);\n    var colgroup = $(\"<colgroup></colgroup>\");\n\n    while (pivot = cols[++i]) {\n      var col = document.createElement(\"col\");\n      col.style.width = pivot.offsetWidth + \"px\";\n      colgroup.append(col);\n    }\n\n    var rows = $(\"tr\", tbody) ? $(\"tr\", tbody).length : 0;\n    var tbodyLeftTable = $(\"<table class='left-table'>\");\n\n    for (var j = 0; j < rows; j++) {\n      var row = $(\"<tr><td>\" + (j + 1) + \"</td></tr>\");\n      tbodyLeftTable.append(row);\n    }\n\n    // Clean content\n    self.view.content.find(\".bz-rn-grid-counter-column\").empty();\n    self.view.content.find(\".bz-rn-grid-scroll-header\").empty();\n\n    // Column counter\n    self.view.content.find(\".bz-rn-grid-counter-column\").append(tbodyLeftTable);\n\n    // Column group\n    self.view.content.find(\".bz-rn-grid-table\").prepend(colgroup.clone());\n\n    // Header\n    var header = self.scrollContent.find(\".bz-rn-grid-header\");\n    self.view.content.find(\".bz-rn-grid-scroll-header\").\n    append($(\"<table class='bz-rn-grid-table'></table>\").\n    append(colgroup).append(header));\n\n    // Footer\n    self.view.footer.empty();\n    var pager = self.scrollContent.find(\".bz-rn-grid-container-pager\");\n    self.view.footer.append(pager);\n  },\n\n  /**\r\n      * Render the grid\r\n      * @returns {}\r\n      */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this;\n    var properties = self.properties;\n    var scrollContainer = self.view.content.find(\".bz-rn-grid-scroll-content\").data(\"kendoMobileScroller\");\n\n    self.buildColumns = self.buildColumnModel();\n\n    self.currentGrid = $(scrollContainer.scrollElement).mobileGrid({\n      columns: self.buildColumns,\n      title: properties.displayName,\n      mode: self.getMode(),\n      sortBy: properties.sortBy || \"\",\n      sortOrder: properties.sortOrder || \"\",\n      sortType: bizagi.override.gridDefaultSortBy || \"asc\",\n      template: {\n        grid: self.renderFactory.getTemplate(\"grid\"),\n        table: self.renderFactory.getTemplate(\"grid-table\"),\n        emptyTable: self.renderFactory.getTemplate(\"grid-table-empty\"),\n        column: self.renderFactory.getTemplate(\"grid-table-column\"),\n        specialColumn: self.renderFactory.getTemplate(\"grid-table-column-special\"),\n        row: self.renderFactory.getTemplate(\"grid-table-row\"),\n        cell: self.renderFactory.getTemplate(\"grid-table-cell\"),\n        specialCell: self.renderFactory.getTemplate(\"grid-table-cell-special\"),\n        pager: self.renderFactory.getTemplate(\"grid-table-pager\"),\n        waiting: \"\" },\n\n      actions: {\n        add: properties.allowAdd,\n        edit: properties.allowEdit && properties.withEditForm,\n        remove: properties.allowDelete,\n        details: properties.allowDetail },\n\n      tooltips: {\n        addLabel: $.trim(bizagi.localization.getResource(\"render-grid-add-label\")), //properties.addLabel,\n        editLabel: $.trim(bizagi.localization.getResource(\"render-grid-edit-label\")), //properties.editLabel,\n        deleteLabel: $.trim(bizagi.localization.getResource(\"render-ecm-confirm-bt-delete\")), //properties.deleteLabel,\n        detailLabel: $.trim(bizagi.localization.getResource(\"render-collection-navigator-details-form\")) //properties.detailLabel\n      },\n      drawCell: function drawCell(params) {\n        return self.drawCell(params.column, params.key, params.value, params.isNewRow);\n      },\n      cellReady: function cellReady(params) {\n        return self.onCellReady(params.column, params.key, params.cell, params.isNewRow);\n      },\n      rowSelected: function rowSelected(params) {\n        self.rowSelected(params.key);\n      },\n      rowUnselected: function rowUnselected(params) {\n        self.rowUnselected(params.key);\n      },\n      editRow: function editRow(params) {\n        self.editRow(params.key);\n      },\n      deleteRow: function deleteRow(params) {\n        self.deleteRow(params.key);\n      },\n      showFormDetails: function showFormDetails(params) {\n        self.showFormDetails(params.key);\n      },\n      pageRequested: function pageRequested(params) {\n        self.pageRequested(params);\n      },\n      sortRequested: function sortRequested(params) {\n        self.fetchData(params.page, params.sortBy, params.sortType);\n      } });\n\n  },\n\n  /*\r\n      *   Triggers the grid plugin event\r\n      */\n  triggerGridPluginHandler: function triggerGridPluginHandler() {\n    var self = this;\n    var args = Array.prototype.slice.call(arguments, 0);\n    //return self.grid.apply(self.grid, args);\n  },\n\n  /**\r\n      * rowSelected\r\n      * @param {} key\r\n      * @returns {}\r\n      */\n  rowSelected: function rowSelected(key) {\n    var self = this;\n    var grid = self.currentGrid;\n    var element = grid.getContainer();\n\n    // Add selected style to row\n    var rowSeleted = element.find(\"[data-bizagi-component=rows] tr[data-key=\" + key + \"]\");\n    rowSeleted.addClass(\"bz-rn-grid-state-selected\");\n  },\n\n  /**\r\n      * rowUnselected\r\n      * @param {} key\r\n      * @returns {}\r\n      */\n  rowUnselected: function rowUnselected(key) {\n    var self = this;\n    var grid = self.currentGrid;\n    var element = grid.getContainer();\n\n    var tr = element.find(\"[data-bizagi-component=rows] tr[data-key=\" + key + \"]\");\n    tr.removeClass(\"bz-rn-grid-state-selected\");\n  },\n\n  /**\r\n      * Method overrrides from base or virtual\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {},\n\n  /**\r\n                                                        * setDisplayValueEdit\r\n                                                        * @param {} value\r\n                                                        * @returns {}\r\n                                                        */\n  setDisplayValueEdit: function setDisplayValueEdit(value) {},\n\n  /**\r\n                                                                * actionSave\r\n                                                                * @returns {}\r\n                                                                */\n  actionSave: function actionSave() {},\n\n  /**\r\n                                         * Updates manually the affected cell\r\n                                         * @returns {}\r\n                                         */\n  updateAffectedCellManually: function updateAffectedCellManually() {},\n\n  /**\r\n                                                                         * Get the row index using the key as a reference\r\n                                                                         * @returns {}\r\n                                                                         */\n  getRowIndexByKey: function getRowIndexByKey() {},\n\n  /**\r\n                                                     * Shows more info about a grid row in smartphones not implemented\r\n                                                     * @param {} id\r\n                                                     * @returns {}\r\n                                                     */\n  showMore: function showMore(id) {},\n\n  /**\r\n                                       * getHeaderStyles\r\n                                       * @returns {}\r\n                                       */\n  getHeaderStyles: function getHeaderStyles() {},\n\n  /**\r\n                                                   * Creates the column model required to initialize the grid plugin\r\n                                                   * @returns {}\r\n                                                   */\n  buildColumnModel: function buildColumnModel() {\n    var self = this;\n    var columns = self.columns;\n\n    // Create id column first\n    var keyColumn = {\n      name: \"id\",\n      index: 0,\n      label: \"id\",\n      hidden: true,\n      align: \"center\",\n      key: true };\n\n\n    // Add to column model\n    var columnModel = [];\n    columnModel.push(keyColumn);\n\n    $.each(columns, function (index, column) {\n      // Set grid column\n      column.columnIndex = index + 1;\n      var columnLabel = !bizagi.util.isEmpty(column.properties.displayName) ? column.properties.displayName : \" \";\n      var gridColumn = {\n        name: column.properties.xpath,\n        index: index + 1,\n        label: columnLabel,\n        key: false,\n        hidden: !column.properties.visible || column.properties.type == \"columnHidden\" || column.properties.columnVisible === false,\n        summarizeBy: column.properties.totalize && column.properties.totalize.operation ? column.properties.totalize.operation : undefined,\n        bizAgiProperties: column.properties };\n\n      columnModel.push(gridColumn);\n    });\n\n    return columnModel;\n  },\n\n  /**\r\n      * Makes the grid to refresh\r\n      * @returns {}\r\n      */\n  refresh: function refresh() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.fetchData()).done(function () {\n      deferred.resolve();\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Holds the execution until the grid data is ready after a load operation\r\n      * @returns {}\r\n      */\n  dataReady: function dataReady() {\n    var self = this;\n\n    return self.dataReadyDeferred != null ? self.dataReadyDeferred.promise() : null;\n  },\n\n  /**\r\n      * Method to set data and update the grid\r\n      * @param {} data\r\n      * @returns {}\r\n      */\n  updateData: function updateData(data) {\n    var self = this;\n    var grid = self.currentGrid;\n\n    if (!data.records || data.records && data.records === 0) {\n      self.view.content.find(\".bz-rn-grid-top-content, .bz-rn-grid-counter-column\").hide();\n      self.view.content.find(\".bz-rn-grid-scroll-content\").css(\"width\", \"100%\");\n    } else {\n      if (self.view.content.find(\".bz-rn-grid-top-content\").css(\"display\") === \"none\") {\n        self.view.content.find(\".bz-rn-grid-top-content, .bz-rn-grid-counter-column\").show();\n      }\n    }\n\n    // Set value in control\n    if (data && self.properties) {\n      self.properties.data = data;\n      self.setCellOverrides(data);\n      grid.setData(data);\n    }\n  },\n\n  /**\r\n      * Method to fetch data from the server and then update the data\r\n      * @param {} page\r\n      * @param {} sortBy\r\n      * @param {} sortType\r\n      * @returns {}\r\n      */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n    var properties = self.properties;\n\n    self.dataReadyDeferred = $.Deferred();\n    self.sortBy = sortBy;\n    self.sortType = sortType;\n\n    // Define defaults\n    page = page || 1;\n    sortBy = sortBy || properties.sortBy || \"id\";\n    sortType = sortType || properties.sortOrder || \"asc\";\n\n    // Update control properties\n    properties.page = page;\n    properties.sortBy = sortBy;\n    properties.sortType = sortType;\n    properties.sort = sortBy + \" \" + sortType;\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).\n    then(function (data) {\n      self.endLoading();\n\n      if (data) {\n        if (data.deviceMaxRecordsExceeded) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-maximum-records-allowed\"));\n          self.dataReadyDeferred.resolve();\n        } else {\n          $.when(self.updateData(data)).\n          done(function () {\n            // Attach handlers\n            self.configureHeaderAndFooterFixed();\n            self.attachScrollHandler();\n\n            self.triggerRenderChange({ changed: false });\n            self.dataReadyDeferred.resolve();\n          });\n        }\n      }\n    });\n\n    return self.dataReadyDeferred.promise();\n  },\n\n  /**\r\n      * Fetch Sum Data\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  fetchTotalData: function fetchTotalData(params) {\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectData: function collectData(renderValues) {},\n\n  /**\r\n                                                       * onPageRequested\r\n                                                       * @param {} ui\r\n                                                       * @returns {}\r\n                                                       */\n  pageRequested: function pageRequested(params) {\n    var self = this;\n    var properties = self.properties;\n    var data = {};\n\n    if (!jQuery.isEmptyObject(data)) {\n\n      self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache });\n\n\n    }\n\n    self.fetchData(params.page, params.sortBy, params.sortType);\n  },\n\n  /**\r\n      * onTotalData\r\n      * @param {} ui\r\n      * @returns {}\r\n      */\n  onTotalData: function onTotalData(ui) {},\n\n  /**\r\n                                             * showTotals\r\n                                             * @param {} params\r\n                                             * @returns {}\r\n                                             */\n  showTotals: function showTotals(params) {},\n\n  /**\r\n                                               *  Customizes the content drawing inside the cell\r\n                                               * @param {} column\r\n                                               * @param {} key\r\n                                               * @param {} value\r\n                                               * @param {} isNewRow\r\n                                               * @returns {}\r\n                                               */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n\n    if (column.key) return value;\n\n    self.newRecords = self.newRecords || {};\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) {\n      self.cellMetadata[key][columnIndex] = {};\n    }\n\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Not display\n    properties.editable = false;\n    renderColumn.properties.displayType = 'value';\n\n    renderColumn.setValue(key, value);\n    renderColumn.setSurrogateKey(key);\n\n    if (visible) {\n      var defer = new $.Deferred();\n      renderColumn.properties = properties;\n\n      $.when(renderColumn.renderReadOnly(key, value)).done(function (cell) {\n        // Register array with new records\n        for (var j = 0; j < self.columns.length; j++) {\n          self.cellOverrides[key] = self.cellOverrides[key] || {};\n          self.getCellOverride(key, j).visible = true;\n        }\n        defer.resolve(cell);\n      });\n\n      return defer.promise();\n\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Executes when the cell is ready and inserted into the DOM\r\n      * @param {} column\r\n      * @param {} key\r\n      * @param {} cell\r\n      * @param {} isNewRow\r\n      * @returns {}\r\n      */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    var self = this;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n    var properties = (self.cellMetadata[key][columnIndex] != undefined ? self.cellMetadata[key][columnIndex].properties : undefined) || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) {\n      editable = true;\n    } else {\n      editable = false;\n    }\n\n    if (visible) {\n      var control;\n      if (editable) {\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        // Set xpath context for submitonchange action\n        if (renderColumn.properties.submitOnChange) {\n          control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n          }\n        }\n\n        // Execute cell post render\n        renderColumn.postRender(key, cell);\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n      } else {\n        renderColumn.postRenderReadOnly(key, cell);\n      }\n    }\n  },\n\n  /**\r\n      * Returns a promise that will resolve when the element is ready\r\n      * @returns {}\r\n      */\n  ready: function ready() {\n    var self = this;\n    var parentPromise = self._super();\n\n    return $.when(parentPromise);\n  },\n\n  /**\r\n      * Adds a row to the grid\r\n      * @returns {}\r\n      */\n  addRow: function addRow() {\n    var self = this;\n    var properties = self.properties;\n\n    var container = self.getFormContainer().container;\n    var dataservice = self.dataService;\n    var renderFactory = self.renderFactory;\n\n    self.startLoading();\n\n    $.when(self.submitAddRequest()).\n    done(function (newId) {\n      var recordXpath = properties.xpath + \"[id=\" + newId + \"]\";\n\n      var propertiesGridForm = {\n        idRender: properties.id,\n        \"recordXPath\": recordXpath,\n        url: properties.addPage,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        xpath: recordXpath,\n        editable: true,\n        requestedForm: \"addForm\",\n        displayName: properties.addLabel,\n        idAsigned: newId,\n        enableEditSubmitRequest: false,\n        hideLabel: true,\n        withAddForm: true };\n\n\n      var argumentsGrid = {\n        \"renderFactory\": renderFactory,\n        \"dataService\": dataservice,\n        \"parent\": self,\n        \"data\": {\n          properties: propertiesGridForm } };\n\n\n\n      var formlink = new bizagi.rendering.formLink(argumentsGrid);\n\n      $.extend(formlink, {\n        contextEdit: $(container).find(\"#container-items-edit\"),\n        element: self.element,\n        actionSave: self.actionSaveNewRow,\n        actionCancel: self.actionCancelRow,\n        _sendRelation: function _sendRelation() {\n          return true;\n        },\n        _getData: self.dataService.getFormData,\n        _params: propertiesGridForm });\n\n\n      self._InternalRenderLinkForm(formlink);\n      self.endLoading();\n\n    }).fail(function (error) {\n      self.endLoading();\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-no-records\"), \"Error\");\n    });\n  },\n\n  /**\r\n      * Edit form in the grid\r\n      * @param {} id\r\n      * @returns {}\r\n      */\n  editRow: function editRow(id) {\n    var self = this;\n\n    //save form in case the user has made changes in the inline row\n    var containerForm = self.getFormContainer();\n    containerForm.saveForm();\n\n    var properties = self.properties;\n    var container = self.getFormContainer().container;\n    var dataservice = self.dataService;\n    var renderFactory = self.renderFactory;\n    var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    var propertiesGridForm = {\n      idRender: properties.id,\n      id: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      recordXPath: recordXpath,\n      xpath: recordXpath,\n      editable: true,\n      url: properties.editPage,\n      requestedForm: \"editForm\",\n      displayName: properties.editLabel,\n      idAsigned: id };\n\n\n    var argumentsGrid = {\n      \"renderFactory\": renderFactory,\n      \"dataService\": dataservice,\n      \"parent\": self,\n      \"data\": {\n        properties: propertiesGridForm } };\n\n\n\n    var formlink = new bizagi.rendering.formLink(argumentsGrid);\n\n    $.extend(formlink, {\n      contextEdit: $(container).find(\"#container-items-edit\"),\n      element: self.element,\n      actionSave: self.actionSaveNewRow,\n      actionCancel: self.actionCancelRow,\n      _sendRelation: formlink.submitEditRequest,\n      _getData: self.dataService.getFormData,\n      _params: propertiesGridForm });\n\n\n    self._InternalRenderLinkForm(formlink);\n  },\n\n  /**\r\n      * Deletes  a row to the grid\r\n      * @param {} id\r\n      * @returns {}\r\n      */\n  deleteRow: function deleteRow(id) {\n    var self = this;\n\n    if (id === 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      //Do a grid record deletion\n      $.when(self.submitDeleteRequest(id)).\n      done(function (data) {\n        // Reload grid\n        self.fetchData();\n\n        if (data.type === \"success\") {\n          // Trigger the event\n          //'key' must be included to trigger a single call to actions and validations\n          self.triggerRenderChange({ rowDeleted: true, changed: false, key: id });\n        }\n      });\n    });\n  },\n\n  /**\r\n      * Details form in the grid\r\n      * @param {} id\r\n      * @returns {}\r\n      */\n  showFormDetails: function showFormDetails(id) {\n    var self = this;\n\n    if (id === 0 || id == undefined) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    //save form in case the user has made changes in the inline row\n    //var containerForm = self.getFormContainer();\n    //containerForm.saveForm();\n\n    var properties = self.properties;\n    var container = self.getFormContainer().container;\n    var dataservice = self.dataService;\n    var renderFactory = self.renderFactory;\n    var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    var propertiesGridForm = {\n      idRender: properties.id,\n      id: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      recordXPath: recordXpath,\n      xpath: recordXpath,\n      editable: false,\n      url: properties.editPage,\n      requestedForm: \"detailForm\",\n      displayName: properties.detailLabel,\n      idAsigned: id,\n      hideSaveButton: true };\n\n\n    var argumentsGrid = {\n      \"renderFactory\": renderFactory,\n      \"dataService\": dataservice,\n      \"parent\": self,\n      \"data\": {\n        properties: propertiesGridForm } };\n\n\n\n    var formlink = new bizagi.rendering.formLink(argumentsGrid);\n\n    $.extend(formlink, {\n      contextEdit: $(container).find(\"#container-items-edit\"),\n      element: self.element,\n      //disable if you want only save at the end (submit the form)\n      //actionCancel: self.actionCancelRow,\n      _sendRelation: formlink.submitEditRequest,\n      _getData: self.dataService.getFormData,\n      _params: propertiesGridForm });\n\n\n    self._InternalRenderLinkForm(formlink);\n  },\n\n  /**\r\n      * actionCancelRow\r\n      * @returns {}\r\n      */\n  actionCancelRow: function actionCancelRow() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.submitRollbackRequest()).done(function () {\n      deferred.resolve();\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * actionSaveNewRow\r\n      * @returns {}\r\n      */\n  actionSaveNewRow: function actionSaveNewRow() {\n    var self = this;\n    var properties = self.properties;\n    var deferred = $.Deferred();\n    var data = {};\n\n    if (self.form.validateForm() === true) {\n      $.when(\n      self.form.collectRenderValues(data),\n      data.idPageCache = self.form.getPageCache()).\n      then(function () {\n        $.when(\n        self.parent.submitSaveRequest(properties.idAsigned, data)).done(function (resp) {\n          if (resp.type == \"validationMessages\") {\n            self.form.addValidationMessage(resp.messages);\n            properties.submitOnChange = false;\n            deferred.reject(resp.messages);\n          } else {\n            self.parent.fetchData();\n            if (!properties.submitOnChange) {\n              properties.submitOnChange = true;\n            }\n            self.submitOnChange({}, true);\n            deferred.resolve();\n          }\n        });\n\n      });\n    } else {\n      deferred.reject({ noAction: true });\n    }\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * _InternalRenderLinkForm\r\n      * @param {} formlink\r\n      * @returns {}\r\n      */\n  _InternalRenderLinkForm: function _InternalRenderLinkForm(formlink) {\n    var self = this;\n\n    $.when(formlink.renderEdition()).done(\n    function () {\n      formlink.endLoading();\n      formlink.postRenderEdit();\n\n      formlink.form.one(\"refresh\", function (_, refreshParams) {\n        if (formlink.kendoView) {var\n\n\n\n\n\n\n\n          refresh = function refresh() {\n            self = this;\n            bizagi.kendoMobileApplication.navigate(\"#:back\");\n            formlink.kendoView.data(\"kendoMobileView\").destroy();\n            self._InternalRenderLinkForm(formlink);\n          };var id = formlink.kendoView.data(\"kendoMobileView\").id;if (id.substring(1, id.length) === kendo.history.current) {refresh.apply(self);} else {formlink.kendoView.data(\"kendoMobileView\").bind(\"afterShow\", refresh.bind(self));}\n        }\n      });\n    });\n\n  },\n\n  /**\r\n      * applyActionUpdateGrid\r\n      * @param {} column\r\n      * @param {} context\r\n      * @returns {}\r\n      */\n  applyActionUpdateGrid: function applyActionUpdateGrid(column, context) {},\n\n  /**\r\n                                                                              * collectRenderValues\r\n                                                                              * @param {} renderValues\r\n                                                                              * @returns {}\r\n                                                                              */\n  collectRenderValues: function collectRenderValues(renderValues) {},\n\n\n  /*   Sets an error on the cell\r\n                                                                       */\n  setError: function setError(key, xpath) {},\n\n  /**\r\n                                               * Changes the required for cell\r\n                                               * @param {} key\r\n                                               * @param {} xpath\r\n                                               * @param {} argument\r\n                                               * @returns {}\r\n                                               */\n  changeCellValue: function changeCellValue(key, xpath, argument) {},\n\n  /**\r\n                                                                       * Changes the background for a cell\r\n                                                                       * @param {} key\r\n                                                                       * @param {} xpath\r\n                                                                       * @param {} argument\r\n                                                                       * @returns {}\r\n                                                                       */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {},\n\n  /**\r\n                                                                                           *  Changes the background for a cell\r\n                                                                                           * @param {} key\r\n                                                                                           * @param {} xpath\r\n                                                                                           * @param {} argument\r\n                                                                                           * @returns {}\r\n                                                                                           */\n  changeCellColor: function changeCellColor(key, xpath, argument) {},\n\n  /**\r\n                                                                       *  Changes the visibility for a cell\r\n                                                                       * @param {} key\r\n                                                                       * @param {} xpath\r\n                                                                       * @param {} argument\r\n                                                                       * @returns {}\r\n                                                                       */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {},\n\n  /**\r\n                                                                                 *  Changes the editability for a cell\r\n                                                                                 * @param {} key\r\n                                                                                 * @param {} xpath\r\n                                                                                 * @param {} argument\r\n                                                                                 * @returns {}\r\n                                                                                 */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {},\n\n  /**\r\n                                                                                   * cleanCellData\r\n                                                                                   * @param {} key\r\n                                                                                   * @param {} xpath\r\n                                                                                   * @returns {}\r\n                                                                                   */\n  cleanCellData: function cleanCellData(key, xpath) {},\n\n  /**\r\n                                                         * Method to start loading for ajax data and update the ui\r\n                                                         * @param {} bUseTimeout\r\n                                                         * @returns {}\r\n                                                         */\n  startLoading: function startLoading() {\n    bizagi.loading.start();\n  },\n\n  /**\r\n      * Method to remove the loading message\r\n      * @returns {}\r\n      */\n  endLoading: function endLoading() {\n    bizagi.loading.stop();\n  } });","/**\r\n *  Name: BizAgi Smartphone Render Grid Extension\r\n *  Author: Oscar o\r\n *  Comments:\r\n *  -   This script will redefine the grid render class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.grid.extend(\"bizagi.rendering.grid\", {}, {\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n\n    data.properties.singleInstance = false;\n    data.properties.rowsPerPage = 1;\n    data.properties.labelAlign = \"left\";\n    data.properties.displayType = \"vertical\";\n\n    // Call base\n    self._super(params);\n\n    // Create a data-structure to keep track of each cell properties\n    this.cellMetadata = {};\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // Just apply display-type: vertical, align it to the left\n    properties.displayType = \"vertical\";\n    properties.labelAlign = \"left\";\n    properties.rowsPerPage = 1;\n\n    //Totalizer validation\n    if (properties.data && properties.data.rows)\n    self.allRows = [].concat(properties.data.rows);\n\n    //revisar base para mejorar comportamiento cuando esta en false los elementos\n    $.each(self.columns, function (index, value) {\n      if (this.properties && this.properties.editable) {\n        this.properties.editable = properties.allowEdit === true ? true : false;\n      }\n    });\n\n    // Just for smartphones we need to take only one row if there is data in the json, because we use just one row per page\n    if (properties.data && properties.data.rows && properties.data.rows.length > 1) {\n      properties.data.rows = [].concat([properties.data.rows[0]]);\n    }\n  },\n\n  /* method overrrides\r\n      *  from base or virtual\r\n      */\n  setDisplayValue: function setDisplayValue(value) {},\n  setDisplayValueEdit: function setDisplayValueEdit(value) {},\n  actionSave: function actionSave() {},\n  /*\r\n                                         * Updates manually the affected cell\r\n                                         */\n  updateAffectedCellManually: function updateAffectedCellManually() {},\n\n  /*\r\n                                                                         * Get the row index using the key as a reference\r\n                                                                         */\n  getRowIndexByKey: function getRowIndexByKey() {},\n  /**\r\n                                                     *  Shows more info about a grid row\r\n                                                     * in smartphones not implemented\r\n                                                     */\n  showMore: function showMore(id) {},\n\n\n  /**\r\n                                       * Returns the indexes of all elements in the grid\r\n                                       * @returns {*}\r\n                                       */\n  getIndexes: function getIndexes() {\n    var self = this;\n    var data = $.merge(self.allRows, self.getDataNewRows());\n\n    return data.reduce(function (acum, current) {\n      if (typeof acum.find(function (el) {return el[0] == current[0];}) === 'undefined') {\n        acum.push(current);\n      }\n      return acum;\n    }, []).map(function (item) {\n      return item[0];\n    });\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    properties.rowsPerPage = 1;\n\n    container.addClass(\"bz-command-edit-inline\");\n    if (self.properties.helpText !== \"\") {\n      control.addClass(\"bz-rn-grid-contains-help-text\");\n    }\n\n    //hide the standar label\n    //TODO: en tablet se realizae como getLabel\n    self.getContainerRender().find(\".ui-bizagi-label\").hide();\n    self.getArrowContainer().hide();\n\n    // Call base\n    this._super();\n    var grid = self.inputEdition = self.input = self.grid = control.find(\"#\" + bizagi.util.encodeXpath(properties.xpath)).addClass(\"bz-cn-grid\");\n    var mode = self.getMode();\n    var columns = self.buildColumnModel();\n\n    var columnsTotalizers = jQuery.grep(columns, function (a) {\n      return a.summarizeBy;\n    });\n\n    //bizagi_grid_tablet\n    grid.bizagi_grid_smartphone({\n      columns: columns,\n      title: properties.displayName,\n      mode: self.getMode(),\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\n        pager: self.renderFactory.getTemplate(\"bizagi.grid.pager\"),\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons\"),\n        totalizer: self.renderFactory.getTemplate(\"bizagi.grid.totalizer\") },\n\n      actions: {\n        add: properties.allowAdd,\n        edit: properties.allowEdit && properties.withEditForm,\n        remove: properties.allowDelete,\n        details: properties.allowDetail,\n        inlineAdd: properties.inlineAdd,\n        allowMore: false,\n        totalizer: properties.showSummary,\n        hasTotalizer: columnsTotalizers.length > 0 && properties.data.rows.length > 0 ? true : false },\n\n      pageRequested: function pageRequested(ui) {\n        if (mode != \"execution\") return;\n        self.onPageRequested(ui);\n      },\n      totalData: function totalData(ui) {\n        if (mode != \"execution\") return;\n\n        self.onTotalData();\n      },\n      sortRequested: function sortRequested(ui) {\n        if (mode != \"execution\") return;\n        self.fetchData(ui.page, ui.sortBy, ui.sortType);\n      },\n      isValid: function isValid(invalidElements) {\n        return self.isValidGrid(invalidElements);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        //self.triggerHandler(\"rowSelected\", { id: ui.key });\n      },\n      gridControlReady: function gridControlReady() {\n        self.processLayout(isLabelFormat, self.properties.textFormat || {});\n        self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n      },\n      addRow: function addRow(ui) {\n        if (mode != \"execution\") return;\n        self.addRow();\n      },\n      editRow: function editRow(ui) {\n        if (mode != \"execution\") return;\n        self.editRow(ui.key);\n      },\n      deleteRow: function deleteRow(ui) {\n        if (mode != \"execution\") return;\n        self.deleteRow(ui.key);\n      },\n      showMore: function showMore(ui) {\n        self.showMore(ui.key);\n      },\n      showFormDetails: function showFormDetails(ui) {\n        if (mode != \"execution\") return;\n        self.showDetail(ui.key);\n      } });\n\n\n    // Just for smartphones we need to take only one row if there is data in the json, because we use just one row per page\n    if (properties.data && properties.data.rows && properties.data.rows.length > 1) {\n      properties.data.rows = [].concat([properties.data.rows[0]]);\n    }\n\n    properties.skipInitialLoad = properties.skipInitialLoad || false;\n    // Set initial data\n    if (!properties.skipInitialLoad) {\n      if (properties.data) {\n        self.updateData(properties.data);\n\n        // Trigger change in order to start up the actions when the controls is ready\n        $.when(self.ready()).\n        done(function () {\n          self.triggerRenderChange({ changed: false });\n        });\n      } else {\n        self.fetchData(properties.page, properties.sortBy, properties.sortOrder);\n      }\n    }\n  },\n\n  getHeaderStyles: function getHeaderStyles() {\n    var self = this;\n    var label = \"\";\n    var header = \"\";\n    var properties = self.properties;\n\n    if (properties.headerFormat) {\n      var format = properties.headerFormat;\n\n      if (format.color) {\n        label += \"color: \" + format.color + \";\";\n      }\n\n      if (format.background) {\n        header += \"background-color: \" + format.background + \";\";\n      }\n\n      if (format.bold) {\n        label += \"font-weight: bold; \";\n      }\n\n      if (format.italic) {\n        label += \"font-style: italic; \";\n      }\n\n      if (format.underline || format.strikethru) {\n        var strikethru = bizagi.util.parseBoolean(format.strikethru) ? \"line-through \" : \"\";\n        var underline = bizagi.util.parseBoolean(format.underline) ? \"underline \" : \"\";\n\n        label += \"text-decoration: \" + strikethru + underline + \";\";\n      }\n\n      if (format.size && format.size != \"0\") {\n        var newFontSize = 100 + Number(format.size) * 10 + \"%\";\n        label += \"font-size: \" + newFontSize + \";\";\n      }\n    }\n\n    return { label: label, header: header };\n  },\n\n  buildColumnModel: function buildColumnModel() {\n    var self = this;\n    var properties = self.properties;\n    var columns = self.columns;\n\n    // Create id column first\n    var keyColumn = {\n      name: \"id\",\n      index: 0,\n      label: \"id\",\n      hidden: true,\n      align: \"center\",\n      key: true };\n\n\n    // Add to column model\n    var columnModel = [];\n    columnModel.push(keyColumn);\n\n    $.each(columns, function (index, column) {\n      // Set grid column\n      column.columnIndex = index + 1;\n      var columnLabel = !bizagi.util.isEmpty(column.properties.displayName) ? column.properties.displayName : \" \";\n      var gridColumn = {\n        name: column.properties.xpath,\n        index: index + 1,\n        label: columnLabel,\n        key: false,\n        hidden: !column.properties.visible || column.properties.type === \"columnHidden\" || column.properties.columnVisible === false,\n        summarizeBy: column.properties.totalize && column.properties.totalize.operation ? column.properties.totalize.operation : undefined,\n        bizAgiProperties: column.properties };\n\n      columnModel.push(gridColumn);\n    });\n\n    return columnModel;\n  },\n\n  /**\r\n      * Makes the grid to refresh\r\n      */\n  refresh: function refresh() {\n    var self = this;\n\n    return $.when(self.fetchData());\n  },\n\n  /*\r\n      *   Holds the execution until the grid data is ready after a load operation\r\n      */\n  dataReady: function dataReady() {\n    var self = this;\n\n    return self.dataReadyDeferred != null ? self.dataReadyDeferred.promise() : null;\n  },\n\n  /*\r\n      *   Method to set data and update the grid\r\n      */\n  updateData: function updateData(data) {\n    var self = this;\n    var columns = self.columns;\n\n    // Set value in control\n    if (data && self.properties) {\n      self.properties.data = data;\n      self.setCellOverrides(data, columns);\n\n      self.triggerGridPluginHandler(\"setData\", data);\n    }\n  },\n\n  /*\r\n      *   Method to fetch data from the server and then update the data\r\n      */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n    var properties = self.properties;\n\n    // Define defaults\n    page = page || 1;\n    sortBy = sortBy || \"\";\n    sortType = sortType || \"asc\";\n\n    // Update control properties\n    properties.page = page;\n    properties.sort = sortBy + \" \" + sortType;\n\n    bizagi.util.smartphone.startLoading();\n\n    return $.when(self.getRemoteData()).\n    then(function (data) {\n\n      if (data) {\n        return $.when(\n        self.updateData(data)).\n        done(function () {\n          self.triggerRenderChange({ changed: false });\n        });\n      }\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n  },\n  /*\r\n      * Fetch Sum Data\r\n      */\n  fetchTotalData: function fetchTotalData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      sort: properties.sort,\n      page: 1,\n      rows: self.properties.data.records,\n      searchFilter: properties.searchFilter });\n\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      var result = properties.overrideGetRemoteData(params);\n      return result != null ? result.promise() : null;\n    }\n\n    // Default ajax call\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    self.dataService.multiaction().getGridData(params).done(function (data) {\n      // Check RTL\n      if (self.isRTL()) {\n        data.rows = self.changeOrderData(data.rows);\n      }\n\n      defer.resolve(data);\n    }).fail(function (fail) {\n\n      defer.reject(fail);\n    });\n\n    return defer.promise();\n  },\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var grid = self.grid;\n\n    // Remove changes for inline added rows\n    if (self.properties.inlineAdd) {\n      var omitKeys = grid.bizagi_grid_smartphone.hasOwnProperty(\"getNewRowKeys\") ? grid.bizagi_grid_smartphone(\"getNewRowKeys\") : [];\n      for (var i = 0, length = omitKeys.length; i < length; i++) {\n        if (self.changes[omitKeys[i]]) {\n          delete self.changes[omitKeys[i]];\n        }\n      }\n    }\n\n    self._super(renderValues);\n  },\n\n  onPageRequested: function onPageRequested(ui) {\n    var self = this;\n    var properties = self.properties;\n    var data = {};\n\n    if (!jQuery.isEmptyObject(data)) {\n\n      self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache });\n\n    }\n\n    self.fetchData(ui.page, ui.sortBy, ui.sortType);\n  },\n\n  onTotalData: function onTotalData(ui) {\n\n    var self = this;\n    var containerForm = self.getFormContainer();\n    containerForm.saveForm();\n\n    //defered que retorne la respuesta del servidor\n    bizagi.util.smartphone.startLoading();\n    $.when(self.fetchTotalData()).done(function (data) {\n      var rows = data.rows;\n      var rowsLength = rows.length;\n\n      //calcula los totalizadores y crea el html\n      var showTotal = [];\n\n      var columnsModel = self.buildColumnModel();\n      var result;\n\n      var operationState;\n\n      columnsModel.forEach(function callback(column, columnIndex) {\n        if (column.bizAgiProperties) {\n          operationState = column.bizAgiProperties.totalize.operation;\n\n          switch (operationState) {\n            case \"sum\":\n              result = rows.sum(function (row) {\n                var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n                return Number(return_value);\n              }, columnIndex);\n              break;\n\n            case \"count\":\n              result = rows.count(function (row) {\n                //Checks if there is a DefaultValue, so assign it to the returnedvalu in case it doesn't have value\n                var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n\n                if (!bizagi.util.isArray(return_value)) {\n                  return return_value;\n                }\n\n                if (bizagi.util.isArray(return_value) && return_value.length > 0) {\n                  return return_value; //If the returned value is not undefined, neither null, it will count +1\n                }\n              }, column, columnIndex);\n\n              break;\n\n            case \"max\":\n              result = rows.max(function (row) {\n                var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n                return Number(return_value);\n              }, columnIndex);\n\n              break;\n\n            case \"min\":\n              result = rows.min(function (row) {\n                var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n                return Number(return_value);\n              }, columnIndex);\n              break;\n\n            case \"avg\":\n              result = rows.avg(function (row) {\n                var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n                return Number(return_value);\n              }, columnIndex);\n\n              result = result.toFixed(2);\n              break;}\n\n\n          if (operationState) {\n            result = self.formatTotalizedResult(operationState, column.bizAgiProperties.type, result);\n            showTotal.push({ label: column.label, total: result });\n          }\n        }\n      });\n\n      self.showTotals(showTotal);\n    }).fail(function (error) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-no-records\"), \"Error\");\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n  },\n\n  formatTotalizedResult: function formatTotalizedResult(operation, controlType, value) {\n    switch (operation) {\n      case 'sum':\n      case 'avg':\n      case 'min':\n      case 'max':\n        if (controlType == \"columnMoney\" || controlType == \"money\") {\n          return bizagi.util.formatMonetaryCell(value);\n        }\n        break;}\n\n\n    return value || 0;\n  },\n\n  showTotals: function showTotals(params) {\n    var self = this;\n    var modalViewTemplate = kendo.template(self.renderFactory.getTemplate('bizagi.grid.totalizer'), { useWithBlock: false });\n    var data = $.extend(params, { \"orientation\": self.properties.orientation });\n    var modalView = $($.trim(modalViewTemplate(data)));\n\n    $(\".bz-rn-grid-totalize-container\").remove();\n\n    modalView.kendoMobileModalView({\n      close: function close() {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        this.destroy();\n        this.element.remove();\n      },\n      useNativeScrolling: true });\n\n\n    modalView.delegate(\".bz-rn-grid-totalize-close-btn\", \"click\", function () {\n      modalView.data(\"kendoMobileModalView\").close();\n    });\n\n    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n    modalView.kendoMobileModalView(\"open\");\n  },\n\n  /*\r\n      *   Customizes the content drawing inside the cell\r\n      */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    //revisar ya que en las demas implementacion en desktop y tablet utilizan una validacion para edicion en linea o no\n    var self = this;\n    self.newRecords = {};\n\n    if (column.key) {\n      return value;\n    }\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) {\n      self.cellMetadata[key][columnIndex] = {};\n    }\n\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    renderColumn.properties.displayType = 'normal';\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) editable = true;\n\n    var cellOverride = self.getCellOverride(key, column.index - 1);\n\n    if (cellOverride) {\n      visible = cellOverride.visible;\n      editable = properties.editable ? cellOverride.editable : false;\n    }\n\n    if (visible) {\n      if (editable) {\n        var defer = new $.Deferred();\n\n        $.when(renderColumn.render(key, value)).done(function (cell) {\n\n          if (cell && $(cell).css(\"display\") !== \"none\") {\n            var headerStyles = self.getHeaderStyles();\n\n            cell = cell.replace(\"headerStyles\", headerStyles.header);\n            cell = cell.replace(\"headerLabelStyles\", headerStyles.label);\n          }\n\n          // Register array with new records\n          if (isNewRow && !self.newRecords[key]) {\n            self.newRecords[key] = {};\n          }\n\n          for (var j = 0, length = self.columns.length; j < length; j++) {\n            self.cellOverrides[key] = self.cellOverrides[key] || {};\n            self.getCellOverride(key, j).visible = true;\n          }\n\n          self.bindRenderChange(renderColumn, key, true);\n\n          defer.resolve(cell);\n        });\n        return defer.promise();\n      } else {\n        /* return renderColumn.renderReadOnly(key, value); */\n        return $.when(renderColumn.renderReadOnly(key, value)).then(function (cell) {\n\n          if (cell && $(cell).css(\"display\") !== \"none\") {\n            var headerStyles = self.getHeaderStyles();\n            var item = $(cell);\n\n            $('.ui-bizagi-label', item).attr('style', headerStyles.header);\n            $('label', item).attr('style', headerStyles.label);\n\n            if (typeof self.properties.textFormat !== \"undefined\") {\n\n              if (typeof self.properties.textFormat.color !== \"undefined\") {\n                $('label', item).css('color', self.properties.textFormat.color);\n              }\n\n              if (typeof self.properties.textFormat.size !== \"undefined\" && self.properties.textFormat.size > 0) {\n                var newFontSize = 100 + Number(self.properties.textFormat.size) * 10 + \"%\";\n                $('label', item).css('font-size', newFontSize);\n              }\n            }\n\n            cell = item[0].outerHTML;\n          }\n\n          return cell;\n        });\n      }\n\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n      *   Executes when the cell is ready and inserted into the DOM\r\n      */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    var self = this;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n    var properties = (self.cellMetadata[key][columnIndex] != undefined ? self.cellMetadata[key][columnIndex].properties : undefined) || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    $(\".bz-rn-messages\", cell).toggleClass(\"bz-rn-messages\", \"bz-rn-messages-grid\");\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (key == \"summary\") {\n      editable = false;\n    }\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) {\n      editable = true;\n    }\n\n    if (visible) {\n      if (editable) {\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        // Set xpath context for submitonchange action\n        if (renderColumn.properties.submitOnChange) {\n          var control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n          }\n        }\n\n        // Execute cell post render\n        renderColumn.postRender(key, cell);\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n      } else {\n\n        if (renderColumn.properties.submitOnChange) {\n          var control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n          }\n        }\n\n        renderColumn.postRender(key, cell);\n      }\n    }\n  },\n\n  /**\r\n      *  Adds a row to the grid\r\n      */\n  bindRenderChange: function bindRenderChange(renderColumn, key, isBinding) {\n    if (isBinding) {\n      var self = this;\n      renderColumn.getDecorated(key).bind(\"renderchange\", function (render, args) {\n\n        var value = renderColumn.getValue(args.render.surrogateKey);\n        var compositeValue = renderColumn.getCompositeValue(args.render.surrogateKey);\n\n        if (renderColumn.properties.type == \"columnDate\") {\n          if (!bizagi.util.isEmpty(value)) {\n            var date = bizagi.util.dateFormatter.getDateFromInvariant(value, args.render.properties.showTime || false);\n            value = bizagi.util.dateFormatter.formatInvariant(date, true);\n          } else if (value === \"\") {\n            value = \"\";\n          }\n        }\n        self.collectGridChange($.extend(args, {\n          id: args.render.surrogateKey,\n          xpath: renderColumn.properties.xpath || renderColumn.properties.id,\n          value: value,\n          compositeValue: compositeValue,\n          columnIndex: renderColumn.columnIndex }));\n\n\n        // Update change in grid's component data\n        self.grid.bizagi_grid_smartphone(\"changeCellValue\", args.render.surrogateKey, renderColumn.columnIndex, value);\n\n        // If the column has totalizers then we need to refresh the summary\n        if (renderColumn.properties.totalize && renderColumn.properties.totalize.operation) {\n          self.grid.bizagi_grid_smartphone(\"refreshSummary\", renderColumn.columnIndex);\n        }\n      });\n    } else {\n      renderColumn.getDecorated(key).unbind(\"renderchange\");\n    }\n  },\n\n  /**\r\n      *  Adds a row to the grid\r\n      */\n  addRow: function addRow() {\n    var self = this;\n    var properties = self.properties;\n\n    var container = self.getFormContainer().container;\n    var dataservice = self.dataService;\n\n    bizagi.util.smartphone.startLoading();\n\n    $.when(self.submitAddRequest()).\n    done(function (newid) {\n      var recordXpath = properties.xpath + \"[id=\" + newid + \"]\";\n      var propertiesGridForm = {\n        idRender: properties.id,\n        \"recordXPath\": recordXpath,\n        url: properties.addPage,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        xpath: recordXpath,\n        editable: true,\n        requestedForm: \"addForm\",\n        displayName: properties.addLabel,\n        idAsigned: newid,\n        enableEditSubmitRequest: false,\n        hideLabel: true,\n        disableProcessButons: true };\n\n\n      var argumentsfl = {\n        \"renderFactory\": self.renderFactory,\n        \"dataService\": dataservice,\n        \"parent\": self,\n        \"data\": {\n          properties: propertiesGridForm } };\n\n\n\n      var formlink = new bizagi.rendering.formLink(argumentsfl);\n\n      jQuery.extend(formlink, {\n        contextEdit: $(container).find(\"#container-items-edit\"),\n        element: self.element,\n        actionSave: self.actionSaveNewRow,\n        actionCancel: self.actionCancelRow,\n        _sendRelation: function _sendRelation() {\n          return true;\n        },\n        _getData: self.dataService.getFormData,\n        _params: propertiesGridForm });\n\n\n      self._InternalRenderLinkForm(formlink);\n      bizagi.util.smartphone.stopLoading();\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n  },\n\n  /* edit form in the grid*/\n  editRow: function editRow(id) {\n    var self = this;\n\n    //save form in case the user has made changes in the inline row\n    var containerForm = self.getFormContainer();\n    containerForm.saveForm();\n\n    var properties = self.properties;\n    var container = self.getFormContainer().container;\n    var dataservice = self.dataService;\n\n    var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    bizagi.util.smartphone.startLoading();\n    $.when(containerForm.saveForm()).done(function () {\n      var propertiesGridForm = {\n        idRender: properties.id,\n        id: properties.id,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        recordXPath: recordXpath,\n        xpath: recordXpath,\n        editable: true,\n        url: properties.editPage,\n        requestedForm: \"editForm\",\n        displayName: properties.editLabel,\n        idAsigned: id,\n        disableProcessButons: true };\n\n\n      var argumentsfl = {\n        \"renderFactory\": self.renderFactory,\n        \"dataService\": dataservice,\n        \"parent\": self,\n        \"data\": {\n          properties: propertiesGridForm } };\n\n\n\n      var formlink = new bizagi.rendering.formLink(argumentsfl);\n\n      jQuery.extend(formlink, {\n        contextEdit: $(container).find(\"#container-items-edit\"),\n        element: self.element,\n        //disable if you want only save at the end (submit the form)\n        actionSave: self.actionSaveNewRow,\n        actionCancel: self.actionCancelRow,\n        _sendRelation: formlink.submitEditRequest,\n        _getData: self.dataService.getFormData,\n        _params: propertiesGridForm });\n\n\n      self._InternalRenderLinkForm(formlink);\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n  },\n\n  _InternalRenderLinkForm: function _InternalRenderLinkForm(formlink) {\n    $.when(formlink.renderEdition()).done(\n    function () {\n      formlink.endLoading();\n    });\n\n  },\n\n  /**\r\n      *  Deletes  a row to the grid\r\n      */\n  deleteRow: function deleteRow(id) {\n    var self = this;\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      // Do a grid record deletion\n      $.when(self.submitDeleteRequest(id)).\n      done(function (data) {\n        // Reload grid\n        self.fetchData();\n        if (data.type == \"success\") {\n          // Trigger the event\n          //'key' must be included to trigger a single call to actions and validations\n          //line 310 bizagi.command.controllers.action\n          self.triggerRenderChange({ rowDeleted: true, changed: false, key: id });\n        }\n      }).fail(function (error) {\n        self.executeFormFailHandler(error);\n      });\n    });\n  },\n\n  /**\r\n      *  Shows detail form\r\n      */\n  showDetail: function showDetail(id) {\n    var self = this;\n    self.executeSubmitShowDetailRequest(id);\n  },\n\n  /**\r\n      * Execute the request for details. \r\n      */\n  executeSubmitShowDetailRequest: function executeSubmitShowDetailRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n    var dataservice = self.dataService;\n    var renderFactory = self.renderFactory;\n    var formView = new bizagi.rendering.smartphone.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: self.getParams().navigation,\n      container: self.getFormContainer().container,\n      showSaveButton: false });\n\n\n    formView.render({\n      idRender: properties.id,\n      recordXPath: recordXpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      requestedForm: \"detailForm\",\n      editable: false });\n\n  },\n\n  actionCancelRow: function actionCancelRow() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.submitRollbackRequest()).done(function () {\n      deferred.resolve();\n    });\n\n    return deferred.promise();\n  },\n\n  /*\r\n      * Save data in the form link related\r\n      * parameter: data data collected in the related form link\r\n      */\n  actionSaveNewRow: function actionSaveNewRow(data) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    if (self.form.validateForm() === true) {\n      var properties = self.properties;\n\n      if (!data) {\n        self.form.collectRenderValues(data);\n      }\n\n      data.idPageCache = self.form.getPageCache();\n\n      $.when(\n      self.parent.submitSaveRequest(properties.idAsigned, data)).done(function (resp) {\n        if (resp.type == \"validationMessages\") {\n          self.form.addValidationMessage(resp.messages);\n          properties.submitOnChange = false;\n          deferred.reject(resp.messages);\n        } else {\n          self.parent.fetchData();\n          if (!properties.submitOnChange) {\n            properties.submitOnChange = true;\n          }\n          self.submitOnChange({}, true);\n          deferred.resolve();\n        }\n      });\n    } else {\n      deferred.reject();\n    }\n\n    return deferred.promise();\n  },\n\n  applyActionUpdateGrid: function applyActionUpdateGrid(column, context) {\n    var self = context;\n    var originalMethod = column.decorated.actionSave;\n\n    jQuery.extend(column.decorated, {\n      actionSave: function actionSave() {\n        var selfIntern = this;\n        $.when(originalMethod.apply(selfIntern, arguments)).done(function () {\n          var data = {};\n          self.collectRenderValues(data);\n\n          $.when(self.submitSaveRequest(selfIntern.surrogateKey, data)).done(function () {\n            self.fetchData();\n          });\n        });\n      } });\n\n  },\n\n\n  collectRenderValues: function collectRenderValues(renderValues) {\n    var self = this;\n\n    $.each(self.columns, function (i, child) {\n      child = child.decorated;\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.collectRenderValues(renderValues);\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        // Check if the render can be sent to the server\n        if (child.canBeSent()) {\n          child.collectData(renderValues);\n        }\n      }\n    });\n  },\n\n  /*\r\n      *   Returns a promise that will resolve when the element is ready\r\n      */\n  ready: function ready() {\n    var self = this;\n    var parentPromise = self._super();\n    var inlineAddPromise = self.inlineAddDeferred ? self.inlineAddDeferred.promise() : null;\n\n    return $.when(parentPromise, inlineAddPromise);\n  },\n\n  /*   Sets an error on the cell\r\n      */\n  setError: function setError(key, xpath) {\n    var self = this;\n  },\n\n  /*\r\n      *  Changes the required for cell\r\n      */\n  changeCellValue: function changeCellValue(key, xpath, argument) {\n    var self = this;\n\n    var control = self.getControlCell(key, xpath);\n    if (control) {\n      if (argument != null)\n      control.setDisplayValue(argument);\n\n      //ISUPP 3866\n      var _value = control.column.getValue(key);\n      var compositeValue = control.column.getCompositeValue(key);\n\n      if (argument != null)\n      control.setDisplayValue(argument);\n\n      var trigger = false;\n      self.collectGridChange({ id: key, xpath: xpath, value: _value, compositeValue: compositeValue, columnIndex: control.column, trigger: trigger });\n    }\n  },\n\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n    var self = this;\n\n    var control = self.getControlCell(key, xpath);\n    if (control) {\n      control.changeCellBackgroundColor(argument);\n\n      // Exclusive for complex elements such as checkboxes, and list\n      if (control.element) {\n        control.element.find(\".bz-container-render-cell1, .ui-bizagi-render-control\").css({\n          \"background-color\": argument,\n          \"background-image\": argument });\n\n      }\n    }\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.changeCellColor(argument);\n    }\n  },\n  /*\r\n      *   Changes the visibility for a cell\r\n      */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.changeCellVisibility(argument);\n      for (var j = 0, length = self.columns.length; j < length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          break;\n        }\n      }\n\n      self.cellOverrides[key] = self.cellOverrides[key] || {};\n      self.getCellOverride(key, j).visible = argument;\n\n      // Bind/Ubind the render change, so it can works with actions and validations as needed\n      if (control.properties.editable && argument) {\n        self.bindRenderChange(self.getColumn(xpath), key, true);\n      } else {\n        self.bindRenderChange(self.getColumn(xpath), key, false);\n      }\n    }\n  },\n\n  /*\r\n      *   Changes the editability for a cell\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.changeEditability(argument);\n      for (var j = 0, length = self.columns.length; j < length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          break;\n        }\n      }\n\n      self.cellOverrides[key] = self.cellOverrides[key] || {};\n      self.getCellOverride(key, j).editable = argument;\n\n      // Bind/Unbind the render change, so it can works with actions and validations as neededn\n      if (control.properties.visible && argument) {\n        self.bindRenderChange(self.getColumn(xpath), key, true);\n      } else {\n        self.bindRenderChange(self.getColumn(xpath), key, false);\n      }\n    }\n  },\n\n  /*\r\n      *   Changes the min value for a cell\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.changeMinValue(argument);\n      for (var j = 0, length = self.columns.length; j < length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          break;\n        }\n      }\n\n      self.cellOverrides[key] = self.cellOverrides[key] || {};\n      self.getCellOverride(key, j).minValue = argument;\n    }\n  },\n\n  /*\r\n      *   Changes the max value for a cell\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.changeMaxValue(argument);\n      for (var j = 0, length = self.columns.length; j < length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          break;\n        }\n      }\n\n      self.cellOverrides[key] = self.cellOverrides[key] || {};\n      self.getCellOverride(key, j).maxValue = argument;\n    }\n  },\n\n  cleanCellData: function cleanCellData(key, xpath) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.cleanData();\n      for (var j = 0; j < self.columns.length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          break;\n        }\n      }\n\n      var rows = self.properties.data.rows,i = 0,rowLength = rows.length;\n      for (; i < rowLength; i++) {\n        if (Number(key) === rows[i][0]) {\n          rows[i][j + 1] = [[\"\", \"\"]];\n          break;\n        }\n      }\n      self.cellOverrides[key] = self.cellOverrides[key] || {};\n      self.getCellOverride(key, j).value = null;\n    }\n  },\n\n  /**\r\n      * Triggers the grid plugin event\r\n      * @returns {}\r\n      */\n  triggerGridPluginHandler: function triggerGridPluginHandler() {\n    var self = this;\n    var args = Array.prototype.slice.call(arguments, 0);\n\n    return self.grid.bizagi_grid_smartphone.apply(self.grid, args);\n  },\n\n  isValidGrid: function isValidGrid(invalidElements) {\n    var self = this;\n    var errorsMessage = [];\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController !== \"undefined\")\n    form.validationController.clearValidationMessages();\n\n    self.isValid(errorsMessage);\n\n    if (errorsMessage.length > 0) {\n      if (typeof form.validationController !== \"undefined\") {\n        for (var i = 0, length = errorsMessage.length; i < length; i++) {\n          // Show validation message\n          form.validationController.showValidationMessage(errorsMessage[i].message, errorsMessage[i].xpath);\n        }\n      }\n\n      return false;\n    } else {\n      return true;\n    }\n  },\n\n  getLabel: function getLabel() {\n    var self = this;\n    return $(\".ui-bizagi-label\", self.element || self.observableElement);\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    self._super(color);\n\n    var control = self.getControl();\n    control.find(\".bz-rn-grid-cn-header\").css(\"background-color\", color, \"!important\");\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var self = this;\n    var errorResponse = error.responseText ? error.responseText : bizagi.localization.getResource(\"workportal-general-error\");\n    self.getFormContainer().failHandler(errorResponse);\n  },\n\n  startLoading: function startLoading() {\n    bizagi.loading.start();\n  },\n  endLoading: function endLoading() {\n    bizagi.loading.stop();\n  } });","/*\r\n*   Name: BizAgi smartphone Render Letter Extension\r\n*   Author: oscaro\r\n*   Comments:\r\n*   -   This script will redefine the letter render class to adjust to smartphones devices\r\n*/\n\n// Extends itself\nbizagi.rendering.letter.extend(\"bizagi.rendering.letter\", {}, {\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.editable = false;\n  } });","/**\r\n*   Name: Bizagi Smartphone Render Button Extension\r\n*   Author: Bizagi UI Forms\r\n*   Comments:\r\n*   -   This script will redefine the button render class to adjust to smartphone devices\r\n*/\n\nbizagi.rendering.button.extend(\"bizagi.rendering.button\", {}, {\n\n  /**\r\n                                                                *   Template method to implement in each device to customize each render after processed\r\n                                                                */\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    $.when(self.renderControl()).done(function () {\n      self.input = $(\":button\", control).click(function () {\n        self.processButton();\n      });\n    }).always(function () {\n      if (properties.editable)\n      container.addClass(\"bz-command-edit-inline\");else\n      {\n        container.addClass(\"bz-rn-non-editable\");\n        self.input.prop(\"disabled\", true);\n      }\n    });\n  },\n\n  /**\r\n     *   Process the button actions workflow\r\n     */\n  processButton: function processButton() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable) {\n      // Check if action need conformation\n      if (properties.needsUserConfirmation) {\n        $.when(bizagi.showConfirmationBox(properties.userConfirmationMessage, \"Bizagi\", \"warning\")).\n        done(function () {\n          // Trigger change\n          self.triggerRenderChange({ pressed: true });\n        });\n      } else {\n        if (!properties.preventDefault) {\n          self.runButtonAction();\n        }\n        // Trigger change\n        self.triggerRenderChange({ pressed: true });\n      }\n    }\n  },\n\n  runButtonAction: function runButtonAction() {\n    var self = this;\n\n    // Save the form prior opening the dialog\n    self.getFormContainer().clearValidationMessages();\n\n    self.saveForm().pipe(function () {\n      return self.executeButton();\n    }).done(function (result) {\n      if (result == null || result == true || result.result == \"success\" || result.type == \"success\") {\n        return self.refreshForm();\n      } else if (result.type == \"validationMessages\") {\n        try {\n          // Add validation messages \n          self.getFormContainer().addValidationMessage(result.messages);\n        } catch (e) {\n          bizagi.showMessageBox(result.messages, \"Error\");\n        }\n      }\n    }).fail(function (a, b, message) {\n      // Add error messages\n      try {\n        self.getFormContainer().addErrorMessage(message);\n      } catch (e) {\n        bizagi.showMessageBox(message, \"Error\");\n      }\n    });\n  },\n\n  // rewrite method to prevent the button on the tablet be affected when customizing on other platforms\n  processLayout: function processLayout() {\n    var self = this;\n    var properties = self.properties;\n    var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Set required and visiblity\n    properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\n\n    if (properties.required) {\n      self.changeRequired(properties.required);\n    }\n\n    if (!visible) {\n      self.changeVisibility(visible);\n    }\n  } });","/*\r\n *   Name: BizAgi Desktop Render fileprint Extension\r\n *   Author: Christian Collazos\r\n *   Comments:\r\n *   -   This script will redefine the fileprint render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.fileprint.extend(\"bizagi.rendering.fileprint\", {}, {\n  /*\r\n                                                                      *   Template method to implement in each device to customize each render after processed\r\n                                                                      */\n  renderSingle: function renderSingle() {\n    var self = this;\n    self.getControl().parent().hide();\n  } });","/*\r\n *   Name: Bizagi smartphone Render Link Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\nbizagi.rendering.link.extend(\"bizagi.rendering.link\", {}, {\n  renderSingle: function renderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var container = self.getContainerRender();\n    var link = $(\".ui-bizagi-render-link\", control);\n\n    self.input = control.find(\"a\");\n    self.getArrowContainer().hide();\n\n    if (self.properties.value) {\n      self.configureHandlers();\n    } else {\n      link.addClass(\"ui-state-disabled\");\n      container.addClass(\"bz-rn-non-editable\");\n    }\n  },\n\n  /**\r\n      * Checks if the value is a valid url (http/https valid urls)\r\n      *\r\n      * @param {String} value The control's value that is needed to be displayed\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    if (self.isValidValue(value)) {\n      //Get the decoded version of the URL\n      value = getFullyDecodedURI($.trim(value));\n      self.input.attr(\"href\", value);\n    }\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    self.input.on(\"click\", function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (self.isValidValue(properties.value)) {\n        var linkEncode = encodeURI(this.getAttribute(\"href\"));\n\n        if (properties.linktarget === \"newwindow\" || bizagi.util.isCordovaSupported()) {\n          window.open(linkEncode, \"_system\", \"location=yes\");\n        } else {\n          window.open(linkEncode, \"_system\");\n        }\n      }\n    });\n  },\n\n  /**\r\n      * Checks if the value is a valid url (http/https valid urls)\r\n      *\r\n      * @param {String} value Stored value in the control\r\n      */\n  isValidValue: function isValidValue(value) {\n    return value && $.trim(value + \"\").toLowerCase().match(/^(http|https):\\/\\//) !== null || false;\n  } });","/**\r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from base list\nbizagi.rendering.checkList.extend(\"bizagi.rendering.checkList\", {}, {\n\n  /**\r\n                                                                       *   Template method to implement in each device to customize each render after processed\r\n                                                                       */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n    // Call base \n    this._super();\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    self.properties.unique = Math.ceil(Math.random() * 1000);\n    // Apply plugin\n    //$(\".ui-bizagi-render-checkList-label\", self.checkListGroup).check();\n  },\n\n  /**\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    // Call base\n    self._super();\n    $(\"input[type=checkbox]\", self.checkListGroup).bind(\"change\", function (evt, ui) {\n      var itemId = $(this).data(\"item-guid\");\n      var checked = false;\n      if ($(this).hasClass(\"bz-check\")) {\n        $(this).removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        checked = false;\n      } else {\n        $(this).removeClass(\"bz-full-ball\").addClass(\"bz-check\");\n        checked = true;\n      }\n\n      self.onCheckListGroupChange(itemId, checked);\n    });\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.checked = checked;\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    $(\"input[type=checkbox]\", self.checkListGroup).removeAttr(\"checked\");\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n  } });","/*\r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from base list\nbizagi.rendering.checkList.extend(\"bizagi.rendering.activityCheckList\", {}, {\n\n  /*\r\n                                                                               *   Template method to implement in each device to customize each render after processed\r\n                                                                               */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n    // Call base\n    this._super();\n    self.header = $(\".ui-bizagi-render-checkList-activity-work\", self.element);\n    self.addButton = $(\".ui-bizagi-render-checkList-add-item\", self.control);\n    self.newItemName = $(\".ui-bizagi-render-checkList-input-name\", self.control);\n    self.separator = $(\".ui-bizagi-render-checkList-separator\", self.element);\n    self.goalActivity = $(\".ui-bizagi-render-checkList-goal-activity\", self.element);\n    self.addEditButton = $(\".add-edit-item-button-checklist\", self.control);\n    self.cancelEditButton = $(\".cancel-edit-item-button-checklist\", self.control);\n    self.additionalElements();\n    self.configureHandlers();\n    $(\".ui-bizagi-render-edition-arrow\", self.getControl().parent()).hide();\n\n    self.notifyLoadItems();\n  },\n\n  notifyLoadItems: function notifyLoadItems() {\n    var self = this;\n    setTimeout(function () {\n      var resolvedItems = self.properties.items.filter(function (i) {\n        return i.resolved;\n      }).length;\n      bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\n        'hasChanges': true,\n        'idActivity': self.properties.idActivity,\n        'itemsResolved': resolvedItems,\n        'items': self.properties.items,\n        'progress': self.properties.activityWork }));\n\n\n      bizagi.webpart.publish(\"onLoadDataItemsFromFormActivityPlan\", { \"items\": self.properties.items, \"activityWork\": self.properties.activityWork });\n    }, 100);\n  },\n\n  additionalElements: function additionalElements() {\n    var self = this;\n    var control = self.getControl();\n    var activityWorkTitle = this.getResource(\"render-activity-check-list-activitywork\") + \" (\" + self.properties.activityWork + \"%)\";\n    var activityFormTitle = this.getResource(\"render-activity-check-list-form\");\n    if (!(self.header && self.header.length > 0)) {\n      self.element.prepend($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-activity-work\").append($(\"<span/>\").text(bizagi.localization.getResource(\"workportal-project-plan-activity-work-title\"))));\n    }\n    if (!(self.goalActivity && self.goalActivity.length > 0)) {\n      if (self.properties.activityDescription && self.properties.activityDescription !== \"\") {\n        self.element.prepend($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-goal-activity\").append(\"<h4><span class='ui-bizagi-wp-bold'>\" +\n        bizagi.localization.getResource(\"workportal-project-plan-activity-goal\") +\n        \": </span><span>\" + self.properties.activityDescription + \"</span></h4>\"));\n      }\n    }\n    if (!(self.addButton && self.addButton.length > 0)) {\n      self.control.append($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-add-item\").append($(\"<button/>\").text(\"+\")));\n    }\n    if (!(self.separator && self.separator.length > 0)) {\n      self.element.append($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-separator\").append($(\"<span/>\").text(activityFormTitle)));\n    }\n    if (self.addEditButton && self.addEditButton.length > 0) {\n      self.addEditButton.hide();\n    }\n    if (self.cancelEditButton && self.cancelEditButton.length > 0) {\n      self.cancelEditButton.hide();\n    }\n    control.parent().addClass(\"render-activity-check\");\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    this._super();\n    $(\".ui-bizagi-render-checkList-add-item button\", control).unbind(\"click\").click(function () {\n      var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n      if (itemSelected.length <= 0) {\n        self.prepareNewItem();\n      } else {\n        $(\".ui-bizagi-render-checkList-input-name\", itemSelected).focus();\n      }\n    });\n\n    $(\".delete-item-from-activity\", self.control).bind(\"click\", function () {\n      var that = this;\n      var message = bizagi.localization.getResource(\"workportal-widget-reports-confirm\");\n      var contentHolder = $(this).closest(\".ui-bizagi-render-checkList-item\");\n\n      contentHolder.addClass(\"ui-bizagi-to-remove\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n\n        var itemId = $(that).closest(\".ui-bizagi-render-checkList-item\").data(\"item-guid\");\n\n        self.deleteItem(itemId);\n        self.addButton.show();\n\n      }).fail(function () {\n        contentHolder.removeClass(\"ui-bizagi-to-remove\");\n      });\n    });\n\n    $(\".activity-work-items\", self.control).bind(\"click\", function () {\n      var element = $(this).closest(\".ui-bizagi-render-checkList-item\");\n      var itemId = element.data(\"item-guid\");\n      var itemPosition = element.data(\"item-position\");\n\n      self.selectItem(itemId, itemPosition);\n    });\n  },\n\n  selectItem: function selectItem(itemId) {\n    var self = this;\n\n    for (var i = 0, length = self.properties.items.length; i < length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items[i].selected = true;\n      } else {\n        self.properties.items[i].selected = false;\n      }\n    }\n\n    self.repaintControl();\n\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\");\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var itemContent = itemSelectedName.val();\n\n    itemSelectedName.focus();\n    itemSelectedName[0].setSelectionRange(itemContent.length, itemContent.length);\n    self.addButton.hide();\n\n    self.addSelectedHandlers();\n  },\n\n  deleteItem: function deleteItem(itemId) {\n    var self = this;\n\n    for (var i = 0, length = self.properties.items.length; i < length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items.splice(i, 1);\n        break;\n      }\n    }\n\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.addSelectedHandlers();\n  },\n\n  prepareNewItem: function prepareNewItem() {\n    var self = this;\n    var newItem = {\n      guid: Math.guid(),\n      resolved: false,\n      name: \"\",\n      selected: true };\n\n\n    self.properties.items.push(newItem);\n    self.repaintControl();\n    self.addButton.hide();\n    self.newItemName.focus();\n\n    self.newItemName.blur(function () {\n      var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n      var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n      var valueInput = itemSelectedName.val();\n\n      if (valueInput === \"\" && self.properties.items && self.properties.items.length >= 1 &&\n      self.properties.items.slice(-1)[0].name === \"\") {\n        self.properties.items.pop();\n      }\n    });\n    self.addSelectedHandlers();\n    self.newItemName.keypress(function (event) {\n      if (event.which == 13) {\n        event.preventDefault();\n        self.addItem();\n        self.prepareNewItem();\n      }\n    });\n  },\n\n  addSelectedHandlers: function addSelectedHandlers() {\n    var self = this;\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    itemSelectedName.focus();\n    $(\".add-item-button-checklist\", itemSelected).bind(\"click\", function () {\n      var newItemName = itemSelectedName.val();\n      if (newItemName && newItemName !== \"\") {\n        self.addItem();\n      }\n    });\n    $(\".cancel-item-button-checklist\", itemSelected).bind(\"click\", function (e) {\n      var newItemName = itemSelectedName.val();\n      var element = $(this).closest(\".ui-bizagi-render-checkList-item\");\n      var itemPosition = element.data(\"item-position\");\n      var guidItem = element.data(\"item-guid\");\n\n      if (newItemName && newItemName !== \"\" && self.properties.items[itemPosition].name !== \"\") {\n        self.properties.items[itemPosition].selected = false;\n      }\n      if (newItemName === \"\" || self.properties.items[itemPosition].name === \"\") {\n        self.deleteItem(guidItem);\n      }\n      self.addButton.show();\n      self.repaintControl();\n    });\n  },\n\n  addItem: function addItem() {\n    var self = this;\n    var control = self.getControl();\n\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var newItemName = itemSelectedName.val();\n\n    $.each(self.properties.items, function (index, item) {\n      if (item.selected) {\n        item.name = newItemName;\n        item.selected = false;\n      }\n    });\n    self.updateOriginalValue();\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.addButton.show();\n  },\n\n  repaintControl: function repaintControl() {\n    var self = this;\n    var control = self.getControl();\n    var checkListHtml = self.renderControl();\n    $(\".ui-bizagi-render-checkList\", self.control).replaceWith(checkListHtml);\n    self.postRenderSingle();\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.resolved = checked;\n    self.setValue(self.properties.items);\n    self.refreshValue(self.properties.items);\n  },\n\n  refreshValue: function refreshValue(items) {\n    var self = this,\n    control = self.getControl(),\n    length = items.length,\n    completed = 0;\n\n    for (var i = 0; i < length; i++) {\n      if (items[i].resolved) {\n        completed += 1;\n      }\n    }\n\n    if (length > 0) {\n      self.properties.activityWork = Math.floor(100 * completed / length);\n    } else\n    {\n      self.properties.activityWork = 100;\n    }\n\n    self.notifyLoadItems();\n  },\n\n  getValue: function getValue(data) {\n    var self = this;\n\n    return self.value || [];\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var originalValue = JSON.stringify(self.properties.originalValue);\n    var newValue = JSON.stringify(self.value);\n    return originalValue !== newValue;\n  },\n\n  /*\r\n      *   Updates original value for some comparisons\r\n      */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = bizagi.clone(self.value);\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var idActivity = self.properties.idActivity;\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath) && !bizagi.util.isEmpty(idActivity)) {\n        if (Array.isArray(value)) {\n          renderValues[properties.xpath] = {\n            idActivity: idActivity,\n            items: value };\n\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    } else {\n      bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\n        'hasChanges': false }));\n\n    }\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties,\n    message;\n    var items = self.getValue();\n    message = self.getResource(\"render-activity-check-list-validation\");\n    for (var i = 0; i < items.length; i += 1) {\n      var item = items[i];\n      if (!item.resolved) {\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        break;\n      }\n    }\n  } });","/*\r\n *   Name: BizAgi Render Layout Image Class\r\n *   Author: Ricardo Prez\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable image control inside templates\r\n *   -   This control is based on the image no flash render control\r\n */\n\nbizagi.rendering.layoutImage.extend(\"bizagi.rendering.layoutImage\", {},\n\n{\n  renderControl: function renderControl() {\n    var self = this;\n    var templateUri = self.renderFactory.getTemplate(\"layout-image\");\n    self.control = self.getControl();\n    return $.kendoTmpl(templateUri, {});\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.value && typeof self.value.value !== \"undefined\" && self.value.value !== \"\" && self.value.value !== null) {\n      //Get image of customer in binary format\n      var url = self.getImageUri();\n      $.ajax({\n        url: url,\n        type: \"GET\",\n        dataType: \"binary\",\n        processData: false,\n        success: function success(blob) {\n\n          if (typeof blob == \"string\") {\n            var xhr = arguments[2];\n            var contentType = xhr.getResponseHeader('Content-type');\n            blob = bizagi.util.media.byteArrayToBlob(bizagi.util.media.stringToByteArray(blob), contentType);\n          }\n\n          var urlCreator = window.URL || window.webkitURL;\n          var imageUrl = urlCreator.createObjectURL(blob);\n\n          $(control).find('img').attr(\"src\", imageUrl);\n        } });\n\n    }\n  },\n\n  /**\r\n      * Gets the url to get the array image\r\n      */\n  getImageUri: function getImageUri() {\n    var self = this;\n    var templateControl = self.parent.parent;\n    var renderParams = templateControl.properties.paramsRender || {};\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value,\n      idcase: renderParams.idRender ? renderParams.formParams.idCase : \"_\",\n      idworkitem: renderParams.idRender ? renderParams.formParams.idWorkitem : \"_\",\n      contextxpath: renderParams.idRender ? renderParams.xpathActions : \"_\" };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  },\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return [self.value];\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Ricardo Prez\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n *   -   This control is based on the link render control\r\n */\n\nbizagi.rendering.layoutLink.extend(\"bizagi.rendering.layoutLink\", {}, {\n  /*\r\n                                                                         *   Template method to implement in each children to customize each control\r\n                                                                         */\n  renderSingle: function renderSingle() {\n    var self = this;\n    var container = self.getContainerRender();\n    container.addClass(\"bz-command-not-edit\");\n    self.value = undefined;\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var element = self.element;\n    if (element) {\n      element.on(\"click\", $.proxy(self.onClickElement, self));\n    }\n  },\n\n  onClickElement: function onClickElement() {\n    var self = this,\n    params = {\n      \"displayName\": self.properties.displayName,\n      \"navigateFromRender\": false,\n      \"reference\": self.properties.reference,\n      \"referenceType\": self.properties.referenceType,\n      \"xpath\": self.properties.xpath };\n\n    if (bizagi.kendoMobileApplication && bizagi.kendoMobileApplication.view().id == \"#renderSplitView\") {\n      params.navigateFromRender = true;\n    }\n    self.triggerGlobalHandler(\"DATA-NAVIGATION\", params);\n  } });","/*\r\n*   Name: BizAgi Render Layout Label Class\r\n*   Author: Ricardo Prez\r\n*   Comments:\r\n*   -   This script will define basic stuff for labels inside templates\r\n*/\n\nbizagi.rendering.layoutLabel.extend(\"bizagi.rendering.layoutLabel\", {}, {\n\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    self.properties.displayName = val;\n    this._super(val, triggerEvents);\n    var control = self.getControl();\n    if (control) {\n      $(\".ui-bizagi-render-label\", control).text(val);\n    }\n  } });","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Ricardo Prez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\nbizagi.rendering.layoutText.extend(\"bizagi.rendering.layoutText\", {}, {\n  setDisplayValue: function setDisplayValue(value) {\n  } });","/*\r\n*   Name: BizAgi Desktop Render Template dateTime Extension\r\n*   Author: Andres Fernando Muoz\r\n*   Comments:\r\n*   -   This script will redefine the date time render class inside templates to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.layoutDateTime.extend(\"bizagi.rendering.layoutDateTime\", {}, {});","/*\r\n *   Name: BizAgi Desktop Render Template number Extension\r\n *   Author: Mauricio Sanchez\r\n *   Comments:\r\n *   -   This script will redefine the number render class inside templates to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.layoutNumber.extend(\"bizagi.rendering.layoutNumber\", {}, {\n  /**\r\n                                                                             * Sets the value in the rendered control\r\n                                                                             */\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    var control = self.getControl();\n    val = typeof val === \"undefined\" || val === null ? \"\" : self.getDisplayValue(val);\n    self.properties.displayName = val;\n\n    this._super(val, triggerEvents);\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(val);\n    }\n  },\n\n  /**\r\n      * Returns the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var label = $('<label/>').html(value); // To get the display value by the format currency plugin, because it requires a control\n\n    label.formatCurrency({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize });\n\n\n    return [label.text()];\n  } });","/*\r\n *   Name: BizAgi Desktop Render Template Money Extension\r\n *   Author: Andres Fernando Muoz\r\n *   Comments:\r\n *   -   This script will redefine the money render class inside templates to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.layoutMoney.extend(\"bizagi.rendering.layoutMoney\", {}, {\n  /**\r\n                                                                           * Sets the value in the rendered control\r\n                                                                           */\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    var control = self.getControl();\n\n    val = typeof val === \"undefined\" || val === null ? \"\" : self.getDisplayValue(val);\n    self.properties.displayName = val;\n\n    this._super(val, triggerEvents);\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(val);\n    }\n  } });","/*\r\n *   Name: BizAgi Desktop Render Layout Upload\r\n *   Author: Bizagi\r\n *   Comments:\r\n *   -   This script will define the upload on entity template\r\n */\n\nbizagi.rendering.layoutUpload.extend(\"bizagi.rendering.layoutUpload\", {}, {\n  /**\r\n                                                                             *   Template method to implement in each children to customize each control\r\n                                                                             */\n  renderControl: function renderControl() {\n    var self = this,\n    properties = self.properties,\n    defer = $.Deferred();\n\n    $.when(self.getValueFilesByData(bizagi.clone(properties))).done(function (properties, valueResult) {\n      self.properties = properties;\n      self.files = valueResult.files;\n      defer.resolve(self.getHTMLFiles());\n    });\n\n    return defer.promise();\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var filesLinkElements = control.find(\".ui-bizagi-render-upload-item a\");\n\n    filesLinkElements.on(\"click\", function () {\n      bizagi.loading.start();\n      $.when(bizagi.util.media.downloadFile($(this).attr(\"data-url\"), this.title)).fail(function (error) {\n        if (error.responseText) {\n          self.getFormContainer().failHandler(error.responseText);\n        }\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  getHTMLFiles: function getHTMLFiles() {\n    var self = this;\n    var files = $.map(self.files, function (el) {\n      var file = { \"id\": el[0], \"filename\": el[1] };\n      file.url = self.buildItemUrl(file);\n      return file;\n    });\n\n    var template = self.renderFactory.getTemplate(\"layout-upload\");\n    return $.kendoTmpl(template, { \"files\": files });\n  },\n\n  /**\r\n      *   Builds the upload item url\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this,\n    properties = self.properties;\n\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileEntityUrl({\n      isContextContainerWidgetRender: self.isContextContainerWidgetRender(),\n      xpath: self.getUploadXpath(),\n      fileId: file.id,\n      idRender: form.properties.paramsRender.idRender || \"undefined\",\n      xpathContext: properties.xpathContext,\n      idPageCache: form.properties.paramsRender.idPageCache || \"undefined\",\n      xpathActions: form.properties.paramsRender.xpathActions || \"undefined\",\n      sessionId: form.properties.sessionId,\n      surrogatekey: self.properties.value.surrogateKey,\n      guidentity: self.properties.value.guid });\n\n  } });","/*\r\n *   Name: BizAgi Render Image Class\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the image render class to adjust to smathphone devices\r\n */\n\n// Extends itself\n//noinspection JSValidateTypes\nbizagi.rendering.image.extend(\"bizagi.rendering.image\", {\n  QUALITY_PICTURE: 50,\n  EXTENSIONSIMG: [\"jpeg\", \"jpg\", \"png\"] },\n{\n  /**\r\n   * Just listing the order of function calls (bizagi.rendering.render)\r\n   * 1. renderControl (found it on bizagi.rendering.image)\r\n   * 2. postRender / postRenderReadOnly / postRenderPrintVersion\r\n   * 3. configureHandlers / configureHandlersReadOnly\r\n   *\r\n   * Other functions are just local implementation\r\n   *\r\n   */\n\n  /**\r\n       * DOM elements to use as an ADD option button\r\n       * @var $actionImage jQuery DOM\r\n       */\n  $addImage: null,\n  /**\r\n                    * DOM elements to use as a REMOVE option button\r\n                    * @var $actionImage jQuery DOM\r\n                    */\n  $deleteImage: null,\n  /**\r\n                       * DOM input to handle HTML uploads\r\n                       * @var $inputFile jQuery DOM\r\n                       */\n  $inputFile: null,\n  /**\r\n                     * Whether or not is a native device 'Just a shortcut\r\n                     * @var isNative boolean\r\n                     */\n  isNative: false,\n  /**\r\n                    * Whether or not we are offline 'Just a shortcut\r\n                    * @var isOfflineForm boolean\r\n                    */\n  isOfflineForm: false,\n\n  /**\r\n                         * This method tries to get the HTML template an render the current object inside\r\n                         * @return {jQuery} $.Deferred()\r\n                         */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n\n    /**\r\n                                       * Check if this is an offline form\r\n                                       * It doesn't validate if the device goes offline so.. (but smartphone)\r\n                                       */\n    //this.isOfflineForm = bizagi.util.isOfflineForm({ context: this });\n    this.isOfflineForm = false;\n    this.isNative = bizagi.util.isCordovaSupported();\n\n    var template = self.renderFactory.getTemplate(\"image\");\n\n    var allowDelete = self.isOfflineForm ? false : properties.allowDelete && properties.editable;\n    return $.kendoTmpl(template, {\n      url: \"\",\n      allowDelete: allowDelete,\n      editable: properties.editable });\n\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $({});\n  },\n\n  /**\r\n      * There is no difference when rendering a readonly image, so ...\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * After rendering element\r\n      */\n  postRender: function postRender() {\n  },\n\n  /**\r\n      * After rendering a readonly element\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Just a little colors\n    this.element.addClass(\"bz-rn-read-only bz-rn-non-editable\");\n  },\n\n  /**\r\n      * Add action handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var version = bizagi.util.getAndroidVersion();\n    var resolutionUpload = [];\n\n    this.$addImage = $(\".bz-rn-image-actions-add\", this.getControl());\n    this.$deleteImage = $(\".bz-rn-image-actions-delete\", this.getControl());\n    this.$inputFile = $(\".bz-rn-upload-image-web\", this.getControl());\n\n    this._super();\n\n    if (this.isNative) {\n      // Upload Image Options\n      this.$addImage.off(\"click\").actionSheet({\n        actions: [\n        {\n          \"guid\": 1,\n          \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\") },\n\n        {\n          \"guid\": 2,\n          \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\") }],\n\n\n        actionClicked: function actionClicked(action) {\n          switch (action.guid) {\n            case 1:\n              self.imageAdd();\n              break;\n            case 2:\n              self.imageAdd(true);\n              break;\n            default:}\n\n        },\n        appear: function appear(action) {\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n        cancelClicked: function cancelClicked(action) {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        } });\n\n    } else {\n      if (bizagi.util.media.fileAPISupported()) {\n        this.$addImage.off(\"click\").click(function () {\n          self.$inputFile.click();\n        });\n      } else {\n        this.element.addClass(\"bz-rn-read-only bz-rn-non-editable\");\n        this.$addImage.removeClass(\"bz-plus\").addClass(\"bz-rn-read-only\");\n      }\n    }\n\n    // remove Image\n    this.$deleteImage.off(\"click\").click(function () {self.imageDelete();});\n    // Image change (Hybrid only)\n    this.$inputFile.off(\"change\").on(\"change\", function () {\n      self.imageAdd();\n      this.value = \"\";\n    });\n\n    // Just in case\n    this.$inputFile.off(\"click\").on(\"click\", function (e) {e.stopPropagation();});\n\n    // Resolution upload menu\n    // If android version is less than 4.4 avoid to show upload sizes due to compatibility with blob files\n    if (version && version <= 4.4) {\n      resolutionUpload = [\n      { \"guid\": 4, \"displayName\": bizagi.localization.getResource(\"workportal-size-original\") }];\n\n    } else {\n      resolutionUpload = bizagi.util.media.getImageResolutionItems();\n    }\n\n    $(\".bz-resolution-container\", self.getControl()).off(\"click\").actionSheet({\n      actions: resolutionUpload,\n      actionClicked: function actionClicked(action) {\n        bizagi.loading.start();\n        $.when(self.resolutionButtonHandler(action.guid)).\n        always(function () {\n          bizagi.loading.stop();\n        });\n      },\n      appear: function appear(action) {\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      cancelClicked: function cancelClicked(action) {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n  },\n\n  clearDisplayValue: function clearDisplayValue() {\n    this.$deleteImage.click();\n  },\n\n  /**\r\n      * Add an image\r\n      * @param useCamera boolean Whether or not to use device's camera\r\n      */\n  imageAdd: function imageAdd(useCamera) {\n\n    var self = this;\n\n    if (!this.isNative) {\n      var dataFile = this.$inputFile[0].files[0];\n      dataFile.fullPath = this.$inputFile[0].value;\n      var extensions = this.Class.EXTENSIONSIMG;\n\n      bizagi.loading.start();\n      if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.\n      checkFileTypes(dataFile, self.properties, extensions)) {\n\n        $.when(self.uploadFile(dataFile)).done(function (result) {\n          self.uploadFileCompleted(self);\n        }).fail(function (error) {\n          self.executeFormFailHandler(error);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n\n      } else {\n        bizagi.loading.stop();\n      }\n    } else {\n\n      var options = {\n        quality: self.Class.QUALITY_PICTURE,\n        targetWidth: 1280,\n        targetHeight: 960,\n        correctOrientation: true };\n\n\n      if (!useCamera) {\n        var coordinates = self.getControl()[0].getBoundingClientRect();\n        //noinspection JSUnresolvedVariable,JSUnresolvedFunction\n        options = {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n          popoverOptions: new CameraPopoverOptions(coordinates.left, coordinates.top - 20, 200, 100, 4),\n          destinationType: navigator.camera.DestinationType.FILE_URI,\n          correctOrientation: true };\n\n      }\n\n      //noinspection JSUnresolvedFunction,JSUnresolvedVariable\n      navigator.camera.getPicture(function (dataImage) {\n\n        bizagi.loading.start();\n\n        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\n          return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n            if (bizagi.util.media.checkFileTypes(fileData, self.properties, self.Class.EXTENSIONSIMG)) {\n              self.dataImage = dataImage;\n              self.fileProperties = fileData;\n              // \"new Blob\" constructor is not supported in android version 4.2.2\n              var version = bizagi.util.getAndroidVersion();\n              if (version && version <= 4.2 || self.isOfflineForm) {\n                return $.when(self.uploadFile(self.dataImage)).done(function (result) {\n                  self.uploadFileCompleted(self);\n                }).fail(function (error) {\n                  self.executeFormFailHandler(error);\n                }).always(function () {\n                  bizagi.loading.stop();\n                });\n\n              } else {\n\n                if (!bizagi.util.isAndroid()) {\n                  return $.when(bizagi.util.media.modalResolutionUpload()).then(\n                  function (buttonIndex) {\n                    if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\n                      return self.resolutionButtonHandler(buttonIndex);\n                    }\n                  });\n\n                } else {\n                  // force click to show actionsheet menu\n                  $(\".bz-resolution-container\", self.getControl()).click();\n                }\n\n              }\n            }\n          });\n\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }, self.onFail, options);\n    }\n  },\n\n\n  /**\r\n      * onFail\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  onFail: function onFail(error) {\n    bizagi.util.smartphone.stopLoading();\n  },\n\n  /**\r\n      * Remove the current image\r\n      */\n  imageDelete: function imageDelete() {\n    var self = this;\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      bizagi.loading.start();\n      $.when(self.dataService.deleteImage({\n        url: self.properties.deleteUrl,\n        idRender: self.properties.id,\n        xpath: self.properties.xpath,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        contexttype: self.properties.contexttype })).\n      done(function () {\n        self.uploadFileCompleted(self);\n      }).fail(function (msg) {\n        var message;\n        var responseText = msg.responseText;\n\n        try {\n          message = JSON.parse(responseText);\n          message = message.message || responseText;\n        } catch (e) {\n          message = responseText;\n        }\n        bizagi.showMessageBox(message, \"Error\");\n\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n      * Send file using HTTP\r\n      * @param dataFile\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  uploadFile: function uploadFile(dataFile) {\n\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (!this.isOfflineForm) {\n\n      // Fix android 4.4 getting images from recent folder\n      if (this.isNative) {\n\n        //noinspection JSUnresolvedFunction\n        var params = {};\n        var addParams = self.buildAddParams();\n        var fileName = self.fileProperties.name;;\n\n        if (self.editedImageURL) {\n          params.dataFile = self.editedImageURL;\n        } else if (self.fileProperties) {\n          params.dataFile = self.fileProperties.url;\n        }\n\n        addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n        params.data = addParams;\n        params.options = new FileUploadOptions();\n        params.options.fileKey = \"file\";\n        params.options.fileName = fileName;\n        params.options.mimeType = \"image/jpeg\";\n        params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n        params.options.addUrl = self.properties.addUrl;\n\n        //Cleans variables related previous uploads\n        self.editedImageURL = null;\n        self.fileProperties = null;\n\n        // Fix android 4.4 getting images from recent folder\n        params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n        $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n          var response = JSON.parse(decodeURIComponent(r.response));\n          if (response.type === \"error\") {\n            defer.reject(response);\n          } else {\n            defer.resolve(response);\n          }\n        }).fail(function (error) {\n          defer.reject(error);\n        });\n      } else {\n\n        if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n        bizagi.util.media.checkFileTypes(dataFile, self.properties, self.Class.EXTENSIONSIMG)) {\n\n          self.dataService.processUploadFile({\n            url: self.properties.addUrl,\n            formData: self.buildAddFileParams(dataFile) }).\n          done(function (response) {\n            defer.resolve(response);\n          }).fail(function (error) {\n            defer.reject(error);\n          });\n        } else {\n          defer.reject();\n        }\n      }\n    } else {\n      // Load image\n      self.saveImageOffline(self, dataFile, function (dataUrl) {\n        self.setValue(dataUrl);\n        defer.resolve();\n      });\n\n      // Enables canbesent on offline mode\n      self.canBeSent = function () {\n        return true;\n      };\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * File upload is done\r\n      * @param context\r\n      */\n  uploadFileCompleted: function uploadFileCompleted(context) {\n    var self = context;\n\n    try {\n      self.showAsyncImage();\n      self.editedImageURL = null;\n    } catch (error) {\n      self.getFormContainer().refreshForm();\n    }\n  },\n  /**\r\n      * Show async image\r\n      * */\n  showAsyncImage: function showAsyncImage() {\n    var self = this;\n    var control = self.getControl();\n\n    $.when(self.buildItemUrl()).done(function (dataUrl) {\n      if (!self.isDisposed()) {\n        self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\n        self.properties.value = self.properties.url.length > 0 ? [self.properties.url] : null;\n        self.setValue(self.properties.value);\n\n        if (self.isOfflineForm && dataUrl.indexOf(\"Invalid case id\") !== -1) {\n          self.properties.url = \"\";\n        }\n\n        control.find(\".bz-rn-image-container\").off(\"click\").toggleClass(\"bz-rn-image-actions-add\",\n        self.properties.editable && self.properties.url === \"\");\n\n        if (self.properties.url !== \"\") {\n          control.find(\".bz-rn-image-container img\").css(\"display\", \"inherit\").\n          attr(\"src\", self.properties.url);\n          control.find(\".bz-rn-image-container img\").off(\"click\").click(function () {self.renderEdition();});\n          control.find(\".bz-rn-image-actions-add\").toggle(self.properties.editable);\n          control.find(\".bz-rn-image-actions-delete\").\n          toggle(self.properties.allowDelete && self.properties.editable);\n        } else {\n          control.find(\".bz-rn-image-container img\").css(\"display\", \"none\");\n          control.find(\".bz-rn-image-actions-add.bz-upload\").hide();\n          control.find(\".bz-rn-image-actions-delete\").hide();\n        }\n        self.configureHandlers();\n      }\n    });\n  },\n\n  /**\r\n      * Create an image offline\r\n      * @param context\r\n      * @param url\r\n      * @param callback\r\n      */\n  saveImageOffline: function saveImageOffline(context, url, callback) {\n    var control = this.getControl();\n    var image = new Image();\n\n    image.onload = function () {\n      var canvas = document.createElement(\"canvas\");\n      canvas.width = this.width;\n      canvas.height = this.height;\n\n      canvas.getContext(\"2d\").drawImage(this, 0, 0);\n\n      // Get raw image data\n      var dataUrl = canvas.toDataURL(\"image/png\");\n      callback(dataUrl.replace(/^data:image\\/(png|jpg|jpeg);base64,/, \"\"));\n    };\n\n    image.src = url;\n    control.find(\"img\").replaceWith(image);\n    control.find(\".bz-cm-icon.image-file\").replaceWith(image);\n  },\n\n  /**\r\n      * resolutionButtonHandler\r\n      * @param buttonOrdinal\r\n      */\n  resolutionButtonHandler: function resolutionButtonHandler(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    // If original, save image normally, if not, reduce quality and size\n    if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\n\n      return $.when(self.uploadFile(self.dataImage)).done(function (result) {\n        self.uploadFileCompleted(self);\n      }).fail(function (error) {\n        self.executeFormFailHandler(error);\n      });\n\n    } else {\n\n      var resolution = bizagi.util.media.getImageResolution(actionSelected);\n\n      return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).\n      then(function (result) {\n\n        self.editedImageURL = result.localUrl;\n        self.properties.url = result.base64Image;\n\n        return $.when(self.uploadFile(self.dataImage)).\n        done(function (result) {\n          self.uploadFileCompleted(self);\n        }).fail(function (error) {\n          self.executeFormFailHandler(error);\n        });\n\n      });\n    }\n\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var self = this;\n    var errorResponse = error.responseText ? error.responseText :\n    bizagi.localization.getResource(\"workportal-general-error\");\n    self.getFormContainer().failHandler(errorResponse);\n  },\n\n  /**\r\n      * Smartphone compatibility mode\r\n      */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n\n    self._super();\n\n    self.configureHandlers();\n    self.configureHelpText();\n\n    // Some compat for the smartphone weird behavior\n    if (!self.properties.editable) {\n      self.postRenderReadOnly();\n    }\n\n    self.showAsyncImage();\n  },\n\n  /**\r\n      * Render edition view\r\n      * @returns {}\r\n      */\n  renderEdition: function renderEdition() {\n    var self = this;\n    var properties = self.properties;\n\n    // TODO Creates a container, be careful you must destroy it later\n    var baseParams = self.getParams();\n    var container = baseParams.navigation.createRenderContainer(\n    {\n      title: properties.displayName,\n      view: {\n        zoom: true,\n        useNativeScrolling: false } });\n\n\n\n\n    var img = $.kendoTmpls(self.renderFactory.getTemplate(\"image-preview\"),\n    { \"url\": self.value && self.value[0] !== \"\" ? self.value[0] : \"\" });\n    container.element.css(\"display\", \"none\");\n    self.inputEdition = container.element.html(img);\n    baseParams.navigation.navigate(container.id);\n\n    bizagi.loading.start();\n\n    //TODO review fail scenario, should it call the forms.failHandler method?\n    $.when(self.buildFullItemUrl()).done(function (dataUrl) {\n      container.element.css(\"display\", \"block\");\n\n      if (dataUrl.indexOf(\"error\") < 0) {\n        var $preview = $(\".bz-rn-image-render-preview:first\", container.element).attr(\"src\", dataUrl);\n        var originalImageWidth = $preview.css(\"width\");\n        originalImageWidth = Number(originalImageWidth.substring(0, originalImageWidth.length - 2));\n\n        if (self.properties.width !== -1 && self.properties.width < originalImageWidth) {\n          $preview.css(\"width\", \"100%\");\n        }\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n\n  },\n\n  /**\r\n     * Build add params to send to the server\r\n     * @param {} dataFile\r\n     * @returns {}\r\n     */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var properties = self.properties;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\", properties.xpath);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\", properties.id);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\", properties.xpathContext);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE, properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\", \"savefile\");\n    formData.append(self.properties.xpath, dataFile);\n\n    if (properties.contexttype) {\n      formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n\n  },\n\n  /**\r\n      * postRenderEdition\r\n      */\n  postRenderEdit: function postRenderEdit() {\n    //Override the super behavior and do nothing, it is ok to do this don't remove.\n  } });","/**\r\n *   Name: BizAgi Render Image Class\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the image render class to adjust to devices\r\n */\n\n// Extends itself\n//noinspection JSValidateTypes\nbizagi.rendering.image.extend(\"bizagi.rendering.image\", {\n  QUALITY_PICTURE: 50,\n  EXTENSIONSIMG: [\"jpeg\", \"jpg\", \"png\"] },\n{\n\n  /**\r\n   * Add an image\r\n   * @param useCamera boolean Whether or not to use device's camera\r\n   */\n  imageAdd: function imageAdd(useCamera) {\n    var self = this;\n    var imageEditorParams = bizagi.override && bizagi.override.mobileImageEditorParams ? bizagi.override.mobileImageEditorParams : {};\n    var source = useCamera ? \"camera\" : \"library\";\n\n    //1. if image editor is not supported, behaves as before\n    //2. if image editor is supported, but there are no client-side overrides, image editor will appear\n    //3. if image editor is supported, there are client-side overrides and the image editor is enabled, image editor will appear\n    //4. if image editor is supported, there are client-side overrides but the image editor is disabled, behaves as before\n\n    if (!bizagi.util.isNativeImageEditorSupported() || bizagi.util.isNativeImageEditorSupported() && typeof imageEditorParams.enableImageEditor != \"undefined\" && !imageEditorParams.enableImageEditor) {\n      self._super(useCamera);\n      return;\n    }\n\n    $.when(self.openImageEditor(source, imageEditorParams)).done(function (dataImage) {\n      $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).done(function () {\n        bizagi.util.media.getFileDataInfo(dataImage).then(function (fileData) {\n          if (bizagi.util.media.checkFileTypes(fileData, self.properties, self.Class.EXTENSIONSIMG)) {\n            self.dataImage = dataImage;\n            self.fileProperties = fileData;\n\n            $.when(self.uploadFile(self.dataImage)).done(function (result) {\n              self.uploadFileCompleted(self, result);\n            }).fail(function (error) {\n              self.executeFormFailHandler(error);\n            }).always(function () {\n              bizagi.loading.stop();\n            });\n          }\n        });\n      });\n    }).fail(function (error) {\n      bizagi.showMessageBox(error);\n    });\n  },\n\n  /**\r\n      * Open a native image editor to crop, resize and apply filters\r\n      * @param source string to identify if image is loaded from library or camera\r\n      */\n  openImageEditor: function openImageEditor(source, imageEditorParams) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    imageEditorParams.source = source;\n    imageEditorParams.imageMaxSize = self.properties.maxSize;\n\n    bizagiapp.openImageEditor(imageEditorParams,\n    function (response) {\n      defer.resolve(JSON.parse(response).imageURL);\n    },\n    function (error) {\n      defer.reject(\"Something went wrong loading the image.\");\n    });\n\n    return defer.promise();\n  } });","/*\r\n *   Name: BizAgi Tablet Render Form Link Extension\r\n *   Author: Oscar O\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.formLink.extend(\"bizagi.rendering.formLink\", {\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\n{\n  init: function init(params) {\n    // Call base\n    this._super(params);\n    params.context = params.context || \"workflow\";\n    var paramsRender = $.extend({}, this._params, { \"proxyPrefix\": this.dataService.serviceLocator.proxyPrefix, \"context\": this.dataService.serviceLocator.context });\n    this.serviceLocator = new bizagi.render.services.context(paramsRender);\n  },\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    self.getArrowContainer().hide();\n\n    if (properties.displayType === \"value\") {\n      self.changeDisplayOption(properties.displayType);\n    }\n    self.originalElement = self.element;\n    properties.orgiginalDisplayType = properties.displayType;\n    properties.displayType = \"normal\";\n    self.input = self.element = control.find(\"a\");\n\n    self._sendRelation = self.submitEditRequest;\n    self._getData = self.dataService.getFormData;\n    self._isRefreshForm = false;\n    self._params = {\n      idRender: properties.id,\n      xpathContext: self.getFormLinkXpathContext(),\n      idPageCache: properties.idPageCache,\n      recordXPath: self.getFormLinkXpath(),\n      requestedForm: \"linkform\",\n      editable: properties.editable,\n      url: properties.editPage };\n\n\n    if (!properties.editable) {\n      container.addClass(\"bz-rn-non-editable\");\n    } else {\n      container.addClass(\"bz-command-edit-inline\");\n    }\n  },\n\n  //para la grilla lo que se debe hacer es sobreescribir o crear los metodos params,sendrelation,getData\n  renderEdition: function renderEdition() {\n    var self = this;\n    var properties = self.properties;\n\n    self.container = self.getParams().navigation.createRenderContainer({ title: properties.displayName });\n    self.inputEdition = self.container.element;\n\n    if (self.properties.hasentryrule) {\n      var form = self.getFormContainer();\n      $.when(form.saveForm()).done(function () {\n        self.resolveCheckpointRequest().done(function () {\n          return self.openLinkRule(\"entryrule\");\n        }).fail(function (error) {\n          bizagi.log(\"Error: \" + err.code);\n        });\n      });\n    } else {\n      return self.openLink();\n    }\n  },\n\n  openLink: function openLink() {\n    var self = this;\n\n    //Renderiza de nuevo la forma, a travez de una promesa, asignandole el metodo Rollback en caso de cancelar la ultima transacin\n    return $.when(self._sendRelation.apply(self)).done(function () {\n      bizagi.util.smartphone.startLoading();\n      $.when(self.paintFormLink()).done(function () {\n        bizagi.util.smartphone.stopLoading();\n      }).fail(function () {//Executes Rollback action\n        bizagi.util.smartphone.startLoading();\n        self.rollbackForm();\n      }).always(function () {\n        bizagi.util.smartphone.stopLoading();\n      });\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n  },\n\n  openLinkRule: function openLinkRule(property) {\n    var self = this;\n    var def = new $.Deferred();\n\n    bizagi.util.smartphone.startLoading();\n\n    self.getPropertyValue(property, {}).\n    done(function (dataRuleResp) {\n      if (dataRuleResp.messages) {\n        var message = dataRuleResp.messages[0];\n        var form = self.getFormContainer();\n        form.validationController.showErrorMessage(message);\n        def.reject();\n      } else {\n        if (property === \"entryrule\") {\n          self.openLink();\n        }\n      }\n      def.resolve();\n    }).fail(function () {\n      def.reject();\n    }).\n    always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n    return def.promise();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type === \"error\") {\n        // Workflow engine error, we gotta show it with error\n        var form = self.getFormContainer();\n        form.validationController.showErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      // Add error messages\n      var form = self.getFormContainer();\n      form.validationController.showErrorMessage(jqXHR.message);\n\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * postRenderEdition\r\n      */\n  postRenderEdit: function postRenderEdit() {\n  },\n\n  /**\r\n      *\r\n      */\n  paintFormLink: function paintFormLink() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.extend(self._params, { \"proxyPrefix\": self.serviceLocator.proxyPrefix });\n\n    $.when(self._getData.call(self, self._params)).pipe(function (data) {\n      if (self._params.recordXPath) {\n        data.form.properties.recordXpath = self._params.recordXPath;\n      }\n\n      if (self._params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Grid\n      if (self._params.hasOwnProperty(\"withAddForm\") && self._params.withAddForm) {\n        if (!data.form.elements || data.form.elements && data.form.elements.length === 0) {\n          self._params.hideSaveButton = true;\n        }\n      }\n\n      /**\r\n         * This creation of form on every action like refresh or save\r\n         * is driving nuts the listeners in native apps\r\n         */\n      self.form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        navigation: self.getParams().navigation,\n        wiew_container: self.container });\n\n\n      self.form.params = self.getFormContainer().getParams();\n\n      self.form.buttons = [\n      $.extend(\n      self.form.buttons[0] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\",\n        // This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          // When the data is saved then\n          return self.saveRecord().then(function () {\n            self.container.destroy();\n          }).fail(function (error) {\n            if (error && error.error_code && error.error_code == 1) {\n              //if doesn't support commit, rollback, etc.\n              $.when(self.actionSave(error.data)).then(function () {\n                self.container.destroy();\n              });\n            } else if (error && error.type == \"validationMessages\") {\n              self.form.addValidationMessage(error.messages);\n            } else if (error && error.responseText) {\n              bizagi.showMessageBox(error.responseText || \"Error\", \"Error\");\n            }\n          });\n        } }),\n\n      $.extend(\n      self.form.buttons[1] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 1,\n        \"action\": \"back\",\n        \"save\": true,\n        \"style\": \"\",\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          self.container.destroy();\n          deferred.reject();\n        } })];\n\n\n\n      $.extend(self.form, {\n        processButtons: function processButtons() {\n          //not send information set in memory and save\n          $.each(self.form.buttons, function (index, element) {\n            switch (element[\"ordinal\"]) {\n              case 1: //next button will behave as a cancel button\n                $(self.form.getButtons()[index]).click(function () {\n                  self.container.destroy();\n                  deferred.reject();\n                });\n\n                self.form.getButtons()[index].innerHTML = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n\n                self.form.buttons[index].caption = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                self.form.buttons[index].action = \"back\";\n                break;\n\n              default:\n                $(self.form.getButtons()[index]).click(function () {\n                  if (self._params.hideSaveButton) {\n                    $(self.form.getButtons()[index]).hide();\n                  }\n\n                  return self.saveRecord().then(function () {\n                    self.container.destroy();\n                  }).fail(function (error) {\n                    if (error && error.error_code && error.error_code == 1) {\n                      //if doesn't support commit, rollback, etc.\n                      $.when(self.actionSave(error.data)).then(function () {\n                        self.container.destroy();\n                      });\n                    } else\n                    {\n                      bizagi.showMessageBox(error.responseText || \"Error\", \"Error\");\n                    }\n                  });\n                });\n                break;}\n\n          });\n        } });\n\n\n      return self.form.render();\n\n    }, function (message) {\n      // FAIL FILTER\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      $.kendoTmpls(errorTemplate, { message: message }).appendTo(self.inputEdition);\n\n      deferred.reject();\n    }).done(function (element) {\n      // Remove button container\n\n      self.inputEdition.html(element);\n      if (!self._isRefreshForm) {\n        self.getParams().navigation.navigate(self.container.id);\n      }\n\n      self.container.setNavigationButtons(self.form);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function () {\n        //TODO the parent who call this class implement redraw. see smartphone.grid _InternalRenderLinkForm\n        self.inputEdition.empty();\n        self._isRefreshForm = true;\n\n        //Adds the events to capture the\n        $.when(self.paintFormLink()).done(function () {}).\n        fail(function () {\n          self.submitRollbackRequest();\n        });\n      });\n\n      //Binds the view close event, and send the RollBack\n      self.container.element.bind(\"close\", function () {\n        self.rollbackForm();\n      });\n\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n\n    return deferred.promise();\n  },\n\n  hideHeadersButtonEdit: function hideHeadersButtonEdit() {\n    var self = this;\n    var context = self.getContextEdit();\n    var properties = self.properties;\n\n    if (properties.hideLabel) {\n      context.find(\".bz-cn-label\").hide();\n    }\n  },\n\n  setDisplayValueEdit: function setDisplayValueEdit() {},\n\n  /*\r\n                                                           *\r\n                                                           */\n  rollbackForm: function rollbackForm() {\n    var self = this;\n\n    $.when(self.submitRollbackRequest()).done(function () {\n      //Sends additional rollback request to delete checkpoint from entry rule\n      if (self.properties.hasentryrule) {\n        self.submitRollbackRequest();\n      }\n    });\n  },\n  /*\r\n      *\r\n      */\n  saveRecord: function saveRecord() {\n    var self = this;\n    var deferred = $.Deferred();\n    var properties = self.properties;\n\n    if (self.form.validateForm()) {\n      var data = {};\n      self.form.collectRenderValues(data);\n      // Add page cache for this form\n      data.idPageCache = self.form.getPageCache();\n\n      $.when(self.submitSaveRequest(data)).done(function (result) {\n        try {\n          var executeSubmitOnChange = true;\n          if (result && result.type == \"validationMessages\") {\n            executeSubmitOnChange = false;\n            deferred.reject(result);\n          }\n          if (properties.hasexitrule) {\n            self.closeExitRule().done(function () {\n              if (executeSubmitOnChange) {\n                self.resolveSubmitCommitRequest().then(function () {\n                  self.submitOnChange({}).then(function () {\n                    deferred.resolve(result);\n                    if (properties.hasentryrule) {\n                      self.resolveSubmitCommitRequest();\n                    }\n                  });\n                });\n              } else {\n                deferred.reject();\n              }\n            }).fail(function () {\n              deferred.reject();\n            });\n          } else if (executeSubmitOnChange) {\n            self.resolveSubmitCommitRequest().then(function () {\n              if (properties.hasentryrule) {\n                self.resolveSubmitCommitRequest().done(function () {\n                  self.submitOnChange({}).then(function () {\n                    deferred.resolve(result);\n                  });\n                });\n              } else {\n                self.submitOnChange({}).then(function () {\n                  deferred.resolve(result);\n                });\n              }\n            });\n          } else {\n            deferred.reject();\n          }\n        } catch (ex) {\n          deferred.reject();\n        }\n      }).fail(function (error) {\n        var err = JSON.parse(error.responseText || \"{message:'', code: ''}\");\n        if (err.code == \"UNKNOWN_ERROR\" && err.message.indexOf(\"Requested value\") !== -1 &&\n        err.message.indexOf(\"was not found\") !== -1) {\n          deferred.reject({ error_code: 1, data: data });\n        } else {\n          deferred.reject(error);\n        }\n      });\n    } else {\n      deferred.reject();\n    }\n\n    return deferred.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (properties.editable === false && !properties.value) {\n      return null;\n    }\n\n    var xpath = self.getFormLinkXpath();\n\n    //saveGridRecord\n    return self.dataService.saveGridRecord({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext === undefined || properties.xpathContext === \"\" ? xpath : xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext,\n      submitData: data });\n\n  },\n\n  /*\r\n     *\r\n     */\n  resolveSubmitCommitRequest: function resolveSubmitCommitRequest() {\n    var self = this;\n    var def = new $.Deferred();\n\n    self.submitCommitRequest().done(function () {\n      def.resolve();\n    }).fail(function (error) {\n      var err = JSON.parse(error.responseText || \"{message:'', code: ''}\");\n      if (err.code == \"UNKNOWN_ERROR\") {\n        def.resolve();\n      } else {\n        def.reject();\n      }\n    });\n\n    return def.promise();\n  },\n\n  /*\r\n     *\r\n     */\n  resolveCheckpointRequest: function resolveCheckpointRequest() {\n    var self = this;\n    var def = new $.Deferred();\n\n    self.submitCheckpointRequest().done(function () {\n      def.resolve();\n    }).fail(function (error) {\n      var err = JSON.parse(error.responseText || \"{message:'', code: ''}\");\n      if (err.code == \"UNKNOWN_ERROR\" && err.message.indexOf(\"Requested value\") !== -1 &&\n      err.message.indexOf(\"was not found\") !== -1) {\n        def.resolve();\n      } else {\n        def.reject();\n      }\n    });\n\n    return def.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  closeExitRule: function closeExitRule() {\n    var self = this;\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.hasexitrule) {\n      $.when(self.openLinkRule(\"exitrule\")).done(function (result) {\n        def.resolve(result);\n      }).fail(function () {\n        def.reject();\n      });\n    } else {\n      def.resolve();\n    }\n\n    return def.promise();\n  },\n\n  getFormLinkXpathContext: function getFormLinkXpathContext() {\n    var self = this;\n    var xpathContext = self.properties.xpathContext;\n    var parentXpathContext = self.getXpathContext();\n    if (parentXpathContext && xpathContext) {\n      if (xpathContext.indexOf(parentXpathContext) === 0) {\n        return xpathContext;\n      } else {\n        return parentXpathContext + \".\" + xpathContext;\n      }\n    } else {\n      return xpathContext;\n    }\n  } });","/**\r\n*   Name: Bizagi Render Geolocation control\r\n*   Author: Ricardo Perez\r\n*   Comments:\r\n*   -   This script will define basic stuff for form link renders\r\n*/\n\nbizagi.rendering.geolocation.extend(\"bizagi.rendering.geolocation\", {}, {\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var container = self.getContainerRender();\n\n    container.addClass(\"bz-rn-non-editable\");\n\n    self.cordinate = $(\".bz-rn-geolocation-coordinate\", control);\n  },\n\n  /**\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"geolocation\");\n    return $.kendoTmpl(template, self.properties);\n  },\n\n  /**\r\n     * Template method to implement in each device to customize each render after processed \r\n     */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n\n    // Call base \n    self._super();\n    self.configureHandlers();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers \r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    if (self.getMode() === \"execution\" && self.properties.editable) {\n\n      //If the control doesn't have a value set the position\n      if (self.value == null)\n      self.updateDisplayValue();\n\n      $(\".bz-rn-geolocation-selector\", self.getControl()).on(\"click\", function () {\n        self.cordinate.empty();\n\n        // This retun a promise if is usefull\n        self.updateDisplayValue();\n      });\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var def = new $.Deferred();\n\n    if (value != null && value !== \"\") {\n      if (!self.cordinate)\n      self.cordinate = self.getControl();\n\n      self.cordinate.html(value);\n\n      // Set internal value \n      self.setValue(value, false);\n      def.resolve();\n    } else {\n\n      var onSuccess = function onSuccess(position) {\n        var latitude = position.coords.latitude.toString();\n        var longitude = position.coords.longitude.toString();\n        var cordinate = latitude + \" \" + longitude;\n\n        self.cordinate.html(cordinate);\n\n        // Set internal value \n        self.setValue(cordinate, false);\n        def.resolve();\n      };\n\n      // onError Callback receives a PositionError object\n      var onError = function onError(message) {\n        var strMessage = message;\n\n        if (bizagi.util.isCordovaSupported() && bizagi.util.isiOSDevice()) {\n          strMessage = self.getErrorMessage(message);\n        }\n\n        def.reject(strMessage);\n      };\n\n      if (bizagi.util.isCordovaSupported() && bizagi.util.isiOSDevice()) {\n        navigator.geolocation.getCurrentPosition(onSuccess, onError);\n      } else {\n        self.getCurrentPosition(onSuccess, onError);\n      }\n\n    }\n\n    return def.promise();\n\n  },\n\n  updateDisplayValue: function updateDisplayValue() {\n    var self = this;\n\n    self.setDisplayValue().then(function () {}).fail(function (message) {\n      self.cordinate.val(\"\");\n      self.cordinate.html(\"<span style='color: red'>\" + message + \"</span>\");\n    });\n  } });","/*\r\n *   Name: BizAgi Smartphone Render Association\r\n *   Author: RicharU (based on Edward Morales)\r\n *   Comments: Defines the association control\r\n */\n\nbizagi.rendering.association.extend('bizagi.rendering.association', {}, {\n  /**\r\n                                                                           * Template method to implement in each children to customize each control\r\n                                                                           * \r\n                                                                           * @returns {} \r\n                                                                           */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).done(function (flip) {\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var columnData = self.getColumnData();\n\n      var html = $.kendoTmpl(template, $.extend(self.properties, { columnData: columnData }), {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n\n  /**\r\n      * Get Left Data, verify if flipper flags sets true\r\n      *\r\n      * @param column {'0'||'1'}\r\n      */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.properties;\n    var data = [];\n\n    self.data = properties;\n\n    var dataAssociation = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(dataAssociation, function (key, item) {\n      data.push({\n        id: item.id,\n        value: item.value,\n        association: self.getRightAssociation(item.id) });\n\n    });\n\n    return data;\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n\n    // Cache control\n    self.association = $(\".bz-rn-association-control\", control);\n    self.getArrowContainer().css(\"visibility\", \"hidden\");\n    self.getArrowContainer().hide();\n\n    // Add Events at Association Control\n    self.addEventControl();\n\n    if (!self.properties.editable) {\n      self.association.find(\"input:checkbox\").hide();\n      self.association.find(\".ui-bz-rn-check-item label\").addClass(\"bz-rn-association-non-editable\");\n    }\n\n    self.showDefaultContainer();\n  },\n\n  showDefaultContainer: function showDefaultContainer() {\n    var self = this;\n    var control = self.getControl();\n    var associations = $('.bz-rn-association-group-container .bz-rn-association-header', control);\n\n    if (associations.length > 0) {\n      var defaultHeader = $($('.bz-rn-association-group-container .bz-rn-association-header', control)[0]);\n      var defaultContainer = $($('.bz-rn-association-group-container .bz-rn-association-items', control)[0]);\n\n      self.closeAccordionSection(true);\n      defaultHeader.addClass('active');\n      defaultContainer.slideDown(300).addClass('open');\n    }\n  },\n\n  /**\r\n      * Add event to control\r\n      * @returns {} \r\n      */\n  addEventControl: function addEventControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var control = self.getControl();\n\n    // Bind check toggle\n    self.association.delegate(\"input:checkbox\", \"change\", function () {\n      var contextElement = $(this);\n\n      if (contextElement.prop(\"checked\")) {\n        // Associate item\n        contextElement.addClass(\"bz-check\");\n        self.associateElement(contextElement);\n      } else {\n        // Dissociate item\n        contextElement.removeClass(\"bz-check\");\n        self.dissociateElement(contextElement);\n      }\n    });\n\n    // Bind flip actions\n    self.association.delegate(\".bz-rn-association-flip-button\", \"click\", function () {\n      $(control).empty();\n\n      // Define flipped\n      self.properties.flipped = !self.properties.flipped;\n\n      // Send flip data to server\n      self.properties.flipstate = self.properties.flipped;\n\n      self.dataService.getFlipAssociation(self.properties);\n\n      var columnData = self.getColumnData();\n\n      // Render template\n      $.kendoTmpls(template, $.extend(self.properties, { columnData: columnData }), {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation }).\n      appendTo(control);\n\n      self.postRenderSingle();\n    });\n\n    self.association.delegate(\".bz-rn-association-container .bz-rn-association-header\", \"click\", function () {\n      if (!$(this).is('.active')) {\n        self.closeAccordionSection();\n        $(this).addClass('active');\n        $(this).siblings().slideDown(300).addClass('open');\n      }\n    });\n  },\n\n  closeAccordionSection: function closeAccordionSection(active) {\n    var self = this;\n    var control = self.getControl();\n    var headers = $('.bz-rn-association-group-container .bz-rn-association-header', control);\n    var contents = $('.bz-rn-association-group-container .bz-rn-association-items', control);\n\n    if (active) {\n      headers = headers.not(':first').removeClass('active');\n      contents = contents.not(':first').slideUp(300).removeClass('open');\n    }\n\n    headers.removeClass('active');\n    contents.slideUp(300).removeClass('open');\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    return self.renderControl();\n  },\n\n  /**\r\n      * Render for readonly\r\n      * @returns {} \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var template = self.renderFactory.getTemplate(\"association\");\n    var columnData = self.getColumnData();\n\n    // Render template  \n    $.kendoTmpls(template, $.extend(self.properties, { columnData: columnData }), {\n      getColumnData: self.getColumnData,\n      getRightAssociation: self.getRightAssociation }).\n    appendTo(control);\n\n    // Cache control\n    self.association = $(\".bz-rn-association-control\", control);\n    self.getArrowContainer().css(\"visibility\", \"hidden\");\n\n    // Bind event for flip botton\n    self.association.delegate(\".bz-rn-association-flip-button\", \"click\", function () {\n      $(control).empty();\n      // Define flipped\n      self.properties.flipped = !self.properties.flipped;\n\n      self.postRenderReadOnly();\n    });\n  },\n  /**\r\n      * Associate the left item with the active parent\r\n      * @param {} element \r\n      * @returns {} \r\n      */\n  associateElement: function associateElement(element) {\n    var self = this;\n    var context = self.getControl();\n\n    // Get the parent id\n    var parentId = $(element.parents(\"ul\"), context).data(\"parent-id\");\n    var itemAdd = element.data(\"id\");\n\n    // Update JSON object\n    self.addElement(parentId, itemAdd);\n  },\n\n  /**\r\n      * Dissociates an item from the active collection\r\n      * @param {} element \r\n      * @returns {} \r\n      */\n  dissociateElement: function dissociateElement(element) {\n    var self = this;\n    var context = self.getControl();\n\n    // Get the parent id\n    var parentId = $(element.parents(\"ul\"), context).data(\"parent-id\");\n    var itemRemove = element.data(\"id\");\n\n    // Update JSON object\n    self.removeElement(parentId, itemRemove);\n  },\n\n  /* SET-DISPLAY-VALUE\r\n      =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  } });","/*\r\n*   Name: BizAgi User Field render tablet Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will define the basic behaviour for userfields    \r\n*/\n\n// Auto-extension\nbizagi.rendering.basicUserField.extend(\"bizagi.rendering.basicUserField\", {}, {\n  renderSingle: function renderSingle() {\n    var self = this;\n\n    // Hide arrow\n    $(\".ui-bizagi-render-edition-arrow\", self.getControl().parent()).hide();\n\n    return self.postRender();\n\n  },\n\n  renderEdition: function renderEdition() {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.postRender()).done(function () {\n      $.when(self.renderUserfieldControl()).done(function () {\n        self.inputEdition = self.input;\n        defer.resolve();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  getEditableControl: function getEditableControl() {\n    if (!this.isSupported()) {\n      return bizagi.rendering.defaultUserField.prototype.getEditableControl.apply(this, arguments);\n    }\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n    if (!this.isSupported()) {\n      return bizagi.rendering.defaultUserField.prototype.getReadonlyControl.apply(this, arguments);\n    }\n  },\n\n  isSupported: function isSupported() {\n    return true;\n  } });\n\n\n/*\r\n        *   Default implementation for user fields\r\n        */\nbizagi.rendering.basicUserField.extend(\"bizagi.rendering.defaultUserField\", {}, {\n\n  /*\r\n                                                                                  *   Template method to implement in each device to customize each render after processed\r\n                                                                                  */\n  getEditableControl: function getEditableControl() {\n    var self = this;\n    var control = self.getControl();\n    var container = self.getContainerRender();\n    var properties = self.properties;\n    var controlName = properties.control.replace(/column/g, \"\");\n\n    self.input = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\n    self.input.addClass(\"ui-bizagi-render-userfield-notSupported\");\n    container.addClass(\"bz-rn-non-editable\");\n\n    return self.input;\n  },\n\n  /*\r\n     *  Dont send the data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var controlName = properties.control;\n\n    return \"Userfield: \" + controlName + \" not found\";\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control;\n    var mycontrol = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\n\n    return mycontrol;\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.column\", {}, {\n\n  /*\r\n                                                                                *   Apply custom overrides to each decorated instance\r\n                                                                                */\n  applyOverrides: function applyOverrides(decorated) {\n    // Hacks the getControl method in the decorated render to add features\n    if (decorated && decorated.getControl) {\n      this.originalGetControl = decorated.getControl;\n      decorated.getControl = this.getControl;\n      decorated.properties.displayType = \"normal\";\n    }\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This code runs under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var result = this._super();\n\n    if (!result || result.length === 0) {\n      var selector = bizagi.util.isMobileGridEnabled() ? \".bz-rn-grid-cell-readonly\" : \".ui-bizagi-cell-readonly\";\n      result = $(selector, self.element || self.observableElement);\n    }\n\n    return result;\n  },\n  /*\r\n     *   Apply column styles to a specified element\r\n     */\n  applyColumnStyles: function applyColumnStyles(element) {\n    var self = this;\n    var properties = self.properties;\n\n    element = $(element);\n\n    // Set cell alignment\n    element.css(\"-webkit-box-pack\", properties.align);\n\n    // Set cell back color\n    if (properties.textFormat.background) {\n      element.css(\"background-color\", properties.textFormat.background);\n      element.css(\"background-image\", \"none\");\n    }\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base        \n    this._super(surrogateKey, cell);\n\n    // Just draw render if the cell layout has been filled\n    if (cell && cell.length > 0) {\n      var cellIcon;\n\n      if (bizagi.util.isMobileGridEnabled()) {\n        cellIcon = $(\".bz-mo-icon\", cell);\n        if ($(self.element).hasClass(\"bz-command-edit-inline\")) {\n          $(self.element).toggleClass(\"bz-command-edit-inline\");\n        }\n\n        if (!properties.editable) {\n          cellIcon.removeClass(\"bz-mo-icon\");\n          cellIcon.removeClass(\"bz-coin-input bz-number-icon bz-calendar-input\");\n        }\n      } else {\n        cellIcon = $(\".ui-bizagi-cell-icon\", cell);\n        if (properties.align == \"left\") {\n          cellIcon.addClass(\"ui-bizagi-cell-icon-right\");\n        }\n\n        if (!properties.editable) {\n          cellIcon.detach();\n        }\n      }\n\n      // Apply styles to cell\n      self.applyColumnStyles(cell);\n    }\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.combo\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    // Hacks the getControl method in the decorated render to add features\n    var self = this;\n    self._super(decorated);\n    if (decorated && decorated.getControl) {\n      self.originalGetControl = decorated.getControl;\n      decorated.getControl = self.getControl;\n      decorated.properties.displayType = \"normal\";\n    }\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This code runs under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var result = self._super();\n\n    if (!result || result.length == 0) {\n      result = $(\".ui-bizagi-cell-readonly\", self.element || self.observableElement);\n    }\n\n    return result;\n  } });","/*\r\n*   Name: BizAgi Desktop Render Document Generator Extension\r\n*   Author: Mauricio Gonzalez\r\n*   Comments:\r\n*   -   This script will redefine the document generator render class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.document\", {}, {\n\n  /*\r\n                                                                                  *   Apply custom overrides to each decorated instance\r\n                                                                                  */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n    self._super(decorated);\n\n    decorated.getControlHtml = self.getControlHtml;\n\n    if (mode != \"design\") {\n      self.surrogateKey = decorated.surrogateKey;\n      decorated.getXpath = this.getXpath;\n      decorated.getDocumentXpath = this.getDocumentXpath;\n      decorated.getContextXpath = this.getContextXpath;\n      decorated.documentTemplateGenerate = this.documentTemplateGenerate;\n      decorated.properties.xpathContext = self.getContextXpath();\n    }\n  },\n\n  /*\r\n     *   Creates the event of generation of templates.\r\n     */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n    self.startLoading();\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    var grid = self.parent;\n\n    $.when(grid.submitOnChange(\"\", false)).\n    done(function () {\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function (response) {\n        $.when(grid.refresh()).\n        done(function () {\n          self.autoOpenDocuments();\n        });\n\n        self.endLoading();\n      }).fail(function () {\n        self.showErrorMessage();\n        self.endLoading();\n      });\n    }).fail(function (message) {\n      // Add error messages \n      self.getFormContainer().addErrorMessage(message);\n      self.endLoading();\n    });\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  getControlHtml: function getControlHtml(template, mode, downloadalldocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n    var isInlineRow = true;\n\n    for (var i = 0; i < self.parent.properties.data.rows.length; i++) {\n      if (self.parent.properties.data.rows[i][0] == self.surrogateKey) {\n        isInlineRow = false;\n        break;\n      }\n    }\n\n    var html = $.kendoTmpl(template, {\n      noActivateButton: isInlineRow,\n      editable: mode != \"execution\",\n      downloadalldocuments: downloadalldocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append ? properties.append : false,\n      caption: properties.caption,\n      noFiles: noFiles });\n\n\n    return html.replace(\"ui-bizagi-document-upload-item-design\", \"ui-bizagi-document-upload-item-design-column\");\n  },\n\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  getXpath: function getXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return xpathPath;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell, tableCell);\n  },\n\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getContextXpath: function getContextXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  } });","/*\r\n*   Name: Bizagi tablet Date Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the date column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.date\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n\n    self._super(decorated);\n\n    // Hacks the getControl method in the decorated render to add features\n    if (decorated) {\n      decorated.showTime = false;\n\n      if (mode === \"execution\") {\n        decorated.changeMinValue = function (value) {\n          // resolve array minvalue\n          var properties = this.properties;\n          var dateControl = this.getDateControl();\n          var calculateValue = self.resolveValue(this, value);\n\n          // Set value in control\n          if (value && properties.editable) {\n            if (typeof calculateValue === \"number\") {\n              calculateValue = new Date(calculateValue);\n              dateControl.mobiscroll('option', { min: calculateValue }); // DateTime Normal\n              calculateValue = bizagi.util.dateFormatter.formatInvariant(calculateValue, properties.showTime); // Set as invariant\n            } else {\n              dateControl.datepicker(\"option\", \"minDate\", bizagi.util.dateFormatter.getDateFromInvariant(calculateValue)); // DateTime Normal\n            }\n\n            properties.minValue = value; // Invarian date   \n            decorated.properties.minValue = calculateValue;\n          }\n        };\n\n        decorated.changeMaxValue = function (value) {\n          // resolve array minvalue\n          var properties = this.properties;\n          var dateControl = this.getDateControl();\n          var calculateValue = self.resolveValue(this, value);\n\n          // Set value in control\n          if (value && properties.editable) {\n\n            if (typeof calculateValue === \"number\") {\n              calculateValue = new Date(calculateValue);\n              dateControl.mobiscroll('option', { max: calculateValue }); // DateTime Normal\n              calculateValue = bizagi.util.dateFormatter.formatInvariant(calculateValue, properties.showTime); // Set as invariant\n            } else {\n              dateControl.datepicker(\"option\", \"maxDate\", bizagi.util.dateFormatter.getDateFromInvariant(calculateValue)); // DateTime Normal\n            }\n\n            properties.maxValue = value; // Invarian date       \n            decorated.properties.maxValue = calculateValue;\n          }\n        };\n      }\n    }\n  },\n\n  resolveValue: function resolveValue(context, value) {\n    var result = \"\";\n\n    if (bizagi.util.isString(value) || bizagi.util.isNumeric(value)) {\n      result = value;\n    }\n\n    if (bizagi.util.isArray(value)) {\n      var indexes = context.grid.getIndexes();\n      var surrogateKey = context.surrogateKey;\n      var index = indexes.indexOf(surrogateKey);\n      if (index !== -1) {\n        result = value[index];\n      }\n    }\n\n    return result;\n  } });","/*\r\n*   Name: BizAgi Tablet Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.text\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  } });","/*\r\n*   Name: BizAgi Tablet Number Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the number column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.number\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  } });","/*\r\n*   Name: BizAgi smartphone Column Decorator Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.image\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    var properties = this.properties;\n    this._super(decorated);\n\n    decorated.getXpathContext = this.getImageXpathContext;\n\n    decorated.setDisplayValue = function () {\n      return true;\n    };\n\n    // Change xpath context\n    // Taken from desktop version to fix non existence of \"xpathContext\" property\n    if (this.getMode() === \"execution\") {\n      decorated.properties.xpathContext = (properties.xpathContext ? properties.xpathContext + \".\" : \"\") + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    }\n  },\n\n  getImageXpathContext: function getImageXpathContext() {\n    return (this.column.properties.xpathContext ? this.column.properties.xpathContext + \".\" : \"\") + this.column.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  } });","/*\r\n*   Name: BizAgi smartphone Text Column Decorator Extension\r\n*   Author: OscarO\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to smartphones devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.upload\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n    var self = this,\n    mode = self.getMode();\n\n    if (mode != \"design\" && mode != \"layout\") {\n\n      decorated.getUploadXpath = this.getUploadXpath;\n\n      decorated.getXpathContext = function () {\n\n        var surrogateKey = this.surrogateKey || \"\",\n        properties = self.properties,\n        columnXpath = self.getUploadXpath(decorated),\n        columnXpathSplit = columnXpath.split(\".\"),\n        nameFile = columnXpathSplit[columnXpathSplit.length - 1],\n        xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n\n        return { xpathContext: xpathContext, nameFile: nameFile };\n      };\n\n\n\n      decorated.buildItemUrl = function (file) {\n        var selfIntern = this;\n        var properties = selfIntern.properties;\n\n        var form = selfIntern.getFormContainer();\n        var context = selfIntern.getXpathContext();\n\n        return selfIntern.dataService.getUploadFileUrl({\n          idRender: properties.id,\n          xpath: context.nameFile,\n          xpathContext: context.xpathContext,\n          idPageCache: properties.idPageCache,\n          fileId: file.id,\n          sessionId: form.properties.sessionId,\n          contexttype: properties.contexttype });\n\n      };\n\n    }\n  },\n\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getUploadXpath: function getUploadXpath(decorated) {\n    return (decorated || this).grid.properties.xpath + \"[id=\" + (decorated || this).surrogateKey + \"].\" + (decorated || this).properties.xpath;\n  } });","/*\r\n *   Name: BizAgi Tablet Link Column Decorator Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the link column decorator class to adjust to tablet devices\r\n */\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.link\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    var self = this,\n    mode = self.getMode();\n\n    if (mode != \"design\" && mode != \"layout\") {\n      self.surrogateKey = decorated.surrogateKey;\n      decorated.getXpath = this.getXpath;\n\n      decorated.properties.xpathContext = self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n\n      if (self.grid.properties.xpathContext && decorated.properties.xpathContext.indexOf(self.grid.properties.xpathContext) == -1)\n      decorated.properties.xpathContext = self.grid.properties.xpathContext + \".\" + decorated.properties.xpathContext;\n\n    }\n    if (decorated.properties.type == \"columnFormLink\") {\n      decorated.getFormLinkXpath = this.getFormLinkXpath;\n    }\n  },\n\n  /*\r\n      *   Apply custom overrides to each decorated instance\r\n      */\n  getXpath: function getXpath(xpath) {\n    var xpathPath = xpath,\n    index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /*\r\n      *   Get Form Link xpath to use\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    // Calculate layout properties to maximized property\n    this.properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n    this.calculateInitialLayoutProperties();\n\n    if (!this.properties.xpath) {\n      return;\n    }\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.search.extend(\"bizagi.rendering.columns.search\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  },\n\n  render: function render(surrogateKey, value) {\n    var self = this;\n    if (value.length > 0) {\n      value = [].concat(value[0]);\n      return self._super(surrogateKey, {\n        id: value[0],\n        label: value[1],\n        additionallabel: value[2] || undefined });\n\n    } else\n    {\n      return self._super(surrogateKey, value);\n    }\n  } });","/*\r\n*   Name: BizAgi Desktop ECM Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.uploadecm\", {}, {\n  /*\r\n                                                                                   *   Apply custom overrides to each decorated instance\r\n                                                                                   */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    decorated.getXpathContext = this.getECMXpathContext;\n\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    decorated.buildItemUrl = function (file) {\n      var self = this;\n      var properties = self.properties;\n\n      var form = self.getFormContainer();\n\n      var columnXpath = self.getUploadXpath(self.surrogateKey);\n      columnXpath = columnXpath.split(\".\");\n      var nameFile = columnXpath[columnXpath.length - 1];\n      var xpathContext = self.getXpathContext(self.surrogateKey);\n\n      return self.dataService.getUploadFileUrl({\n        idRender: properties.id,\n        xpath: nameFile,\n        xpathContext: xpathContext,\n        idPageCache: properties.idPageCache,\n        fileId: file.idFileUpload,\n        sessionId: form.properties.sessionId,\n        contexttype: properties.contexttype });\n\n    };\n\n    decorated.buildAddParams = function () {\n      var properties = this.properties,\n      form = this.getFormContainer();\n\n      return {\n        url: properties.addUrl,\n        h_xpath: properties.xpath,\n        idAttrib: properties.idAttrib,\n        xpathContext: this.getXpathContext(this.surrogateKey),\n        xPath: properties.xpath,\n        p_sessionId: form.properties.sessionId,\n        h_contexttype: \"entity\",\n        h_pageCacheId: properties.idPageCache };\n\n\n    };\n\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n\n  getUploadXpath: function getUploadXpath(surrogateKey) {\n    surrogateKey = this.surrogateKey || surrogateKey || \"\";\n    return this.grid.properties.xpath + \"[id=\" + surrogateKey + \"].\" + this.properties.xpath;\n  },\n\n\n  getECMXpathContext: function getECMXpathContext() {\n    return (this.column.properties.xpathContext ? this.column.properties.xpathContext + \".\" : \"\") + this.column.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  } });","/**\r\n* Grid control Column Button\r\n*\r\n* @author Ricardo Prez\r\n*/\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.button\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  } });","/*\r\n *   Name: Bizagi Column Rendering Smartphone numberScientificNotation\r\n *   Author: Luis Cabarique - LuisCE\r\n *   Comments:\r\n *   -   This script will define a base class to define the Column Scientific number notation\r\n */\n\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.numberScientificNotation\", {}, {\n  /*\r\n                                                                                                   *   Post process the element after it has been rendered\r\n                                                                                                   */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input\", cell);\n    this.applyColumnStyles(input);\n  },\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    return self.renderReadOnly(key, value);\n  },\n  postRenderSummary: function postRenderSummary(key, value) {\n    var self = this;\n    self.postRenderReadOnly(key, value);\n    return true;\n  } });","/*\r\n*   Name: BizAgi Smartphone Radio Column Decorator Extension\r\n*   Author: Richar Urbano\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to smartphone devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.radio\", {}, {});","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.list\", {}, {});","/*\r\n*   Name: BizAgi tablet Date Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the check column to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.exclusiveCheck\", {}, {\n\n  /*\r\n                                                                                        *   Returns the in-memory processed element\r\n                                                                                        *   so the caller could append it to any place\r\n                                                                                        */\n  render: function render(surrogateKey, value) {\n\n    var self = this;\n    // Set flag to check when a render has changed\n    self.changed = false;\n    var properties = self.properties;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n\n    var mode = self.getMode();\n\n    if (self.grid.exclusiveChanges[self.properties.xpath]) {\n      if (self.grid.exclusiveChanges[self.properties.xpath].key === surrogateKey) {\n        self.setValue(surrogateKey, self.grid.exclusiveChanges[self.properties.xpath].value);\n      } else\n      {\n        self.setValue(surrogateKey, false);\n      }\n    } else\n    {\n      var enabledChecks = self.grid.enabledChecks[self.properties.xpath];\n      self.setValue(surrogateKey, value);\n    }\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // If the render is not editable return the readonly version of the column\n    if (!properties.editable)\n    return self.renderReadOnly.apply(self, arguments);\n\n    // Returns the decorated render inside a custom layout for columns\n    self.readyDeferred = new $.Deferred();\n    var cell = decorated.render(\"cell\");\n\n    // If the render changes set the flag on\n    decorated.bind(\"renderchange\", function () {\n      self.changed = true;\n      var lastKey = self.grid.exclusiveChanges[self.properties.xpath] ? self.grid.exclusiveChanges[self.properties.xpath].key : -1;\n      if (lastKey !== surrogateKey) {\n        var simpleXpathArray = self.properties.xpath.split(\".\");\n        self.grid.exclusiveChanges[self.properties.xpath] = {\n          xpath: self.properties.xpath,\n          simpleXpath: simpleXpathArray[simpleXpathArray.length - 1],\n          value: self.getValue(surrogateKey),\n          key: surrogateKey };\n\n        self.clearOtherRows(surrogateKey, value);\n      }\n    });\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n\n    this._super(surrogateKey, cell);\n    /*\r\n                                             var self = this;\r\n                                             var mode = self.getMode();\r\n                                     \r\n                                             this.setSurrogateKey(surrogateKey);\r\n                                             if (mode == \"execution\") {\r\n                                     \r\n                                                 var decorated = this.getDecorated(surrogateKey);\r\n                                                 var control = decorated.getControl();\r\n                                     \r\n                                                 // Check if its new row\r\n                                                 if (control.parents(\"tr\").data(\"new-row\")) {\r\n                                                     // Show a disabled check box\r\n                                                     control.html('<input type=\"checkbox\" name=\"exclusiveCheck\" title=\"' + bizagi.localization.getResource('render-grid-column-button-mandatory-key') + '\" disabled=\"disabled\" style=\"width:16.5px;height:16.5px;\">');\r\n                                     \r\n                                                     //Set the column with this attribute, so when the control is evaluated in isValid(), validated\r\n                                                     //also if it is required, and belongs from a new row\r\n                                                     self.isNewRow = true;\r\n                                                 } else {\r\n                                                     self.isNewRow = false;\r\n                                                 }\r\n                                             }*/\n  },\n\n  clearOtherRows: function clearOtherRows(surrogateKey, value) {\n    var self = this;\n    for (var j = 0, rowsNumber = self.grid.properties.data.rows.length; j < rowsNumber; j++) {\n      var rowIndex = self.grid.properties.data.rows[j][0];\n      if (rowIndex !== surrogateKey) {\n        var decorated = self.getDecorated(rowIndex);\n        decorated.setDisplayValue(false);\n        self.setValue(rowIndex, false);\n      }\n    }\n  } });","/*\r\n *   Name: BizAgi Smartphone Render Document Generator Extension\r\n *   Author: Dario Estupian\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.document.extend(\"bizagi.rendering.document\", {}, {\n  /*\r\n                                                                    * Put formating to the documents that are generated by the control\r\n                                                                    */\n  applyDocumentTemplatesFormat: function applyDocumentTemplatesFormat() {\n    var self = this;\n    var control = self.getControl();\n    self.getArrowContainer().hide();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n\n    // Resolve the type of the document based on the extension and put the icon to acconding to it\n    var documentList = $(\".ui-bizagi-document-upload-item\", control);\n\n    $.each(documentList, function (index, value) {\n      $(\".ui-bizagi-document-type\", value).addClass(\"ui-bizagi-document-extension\");\n\n      // add the tooltip to the document preview icon        \n      var previewTooltip = $(\".ui-bizagi-document-preview\", value);\n      previewTooltip.attr(\"title\", self.resources.getResource('render-document-preview-tooltip'));\n      previewTooltip.tooltip();\n\n      // Add file extension\n      var returnType = self.returnCssTypeFile($(\"span > span\", value).html());\n      $(\".ui-bizagi-document-type\", value).addClass(returnType);\n\n      // Disable preview\n      $(\".ui-bizagi-button\", value).remove();\n      $(\".ui-bizagi-document-preview\", value).attr(\"display\", \"none\");\n    });\n  },\n\n  /**\r\n      * Identifies the extension of the file in a simpler way that ECM does\r\n      * @param {} file \r\n      * @returns {} \r\n      */\n  returnCssTypeFile: function returnCssTypeFile(file) {\n\n    if (file == undefined || file.lenght === 0) {\n      return \"ui-bizagi-document-upload-item-generic-file bz-file-text\";\n    }\n\n    var extension = file.substr(file.lastIndexOf(\".\") + 1);\n\n    switch (extension) {\n      case \"docx\":\n        return \"ui-bizagi-document-upload-item-doc bz-file-word\";\n      case \"pdf\":\n        return \"ui-bizagi-document-upload-item-pdf bz-file-pdf\";\n      case \"xlsx\":\n        return \"ui-bizagi-document-upload-item-xls bz-file-excel\";\n      default:\n        return \"ui-bizagi-document-upload-item-generic-file bz-file-text\";}\n\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    self.configureHelpText();\n    self.applyDocumentTemplatesFormat();\n    self.configureHandlers();\n\n    if (!properties.editable) {\n      container.addClass(\"bz-rn-non-editable\");\n    } else {\n      container.addClass(\"bz-command-edit-inline\");\n    }\n  },\n  /*\r\n     * Template method to implement in each device to customize the render's\r\n     * behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var mode = self.getMode();\n\n    // Attach handler\n    var generateLink = $(\".ui-bizagi-button-documentgenerator\", control);\n    if (mode == \"execution\") {\n      generateLink.click(function (e) {\n        if (e.isPropagationStopped())\n        return;\n        e.stopPropagation();\n\n        self.properties.buttonExecuted = true;\n\n        if (self.properties.validate) {\n          // Check if the form is valid, then generate\n          var isValid = self.validateContainer();\n          if (isValid) {\n            self.documentTemplateGenerate();\n          }\n        } else {\n          // Just generate the form\n          self.documentTemplateGenerate();\n        }\n\n        self.properties.buttonExecuted = false;\n      });\n    }\n\n    // Configure preview handler\n    $(\".ui-bizagi-document-upload-item > .ui-bizagi-document-upload-element\", control).click(function (e) {\n      self.showDocumentPreview($(this).data(\"url\"), $(this).attr(\"title\"));\n    });\n\n    // Configure delete handler\n    $(\".bz-rn-document-delete-icon\", control).click(function (e) {\n      if (e.isPropagationStopped())\n      return;\n      e.stopPropagation();\n\n      self.deleteDocumentTemplate($(this).parent().data(\"filename\"));\n    });\n  },\n\n  /*\r\n     * Redraw documents when needed\r\n     */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadalldocuments) {\n    var self = this;\n\n    self._super(documents, noFiles, downloadalldocuments);\n    // Add icons\n    self.applyDocumentTemplatesFormat();\n  },\n\n  /*\r\n     * Shows the document if the flag is set.\r\n     */\n  autoOpenDocuments: function autoOpenDocuments() {\n  },\n\n  updateControlForPrintMode: function updateControlForPrintMode() {\n  },\n\n  showDocumentPreview: function showDocumentPreview(url, title) {\n    bizagi.loading.start();\n    $.when(bizagi.util.media.downloadFile(url, title)).fail(function (error) {\n      if (error.responseText) {\n        self.getFormContainer().failHandler(error.responseText);\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  } });","/**\r\n * Smartphone definition of range date control\r\n *\r\n * @author: Ricardo Perez\r\n */\n\nbizagi.rendering.rangeDate.extend(\"bizagi.rendering.rangeDate\", {}, {\n\n  /**\r\n                                                                       * Render a specific implementation for Desktop device\r\n                                                                       */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    self.getArrow().hide();\n\n    self.defineRangeControl();\n  } });","/**\r\n * Desktop definition of range money control\r\n *\r\n * @author: Andrs Fernando Muoz\r\n */\n\nbizagi.rendering.rangeMoney.extend(\"bizagi.rendering.rangeMoney\", {}, {\n\n  /**\r\n                                                                         * Render a specific implementation for Desktop device\r\n                                                                         */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    self.getArrow().hide();\n    self.defineRangeControl();\n  } });","/**\r\n * Desktop definition of range number control\r\n *\r\n * @author: Andrs Fernando Muoz\r\n */\n\nbizagi.rendering.rangeNumber.extend(\"bizagi.rendering.rangeNumber\", {}, {\n\n  /**\r\n                                                                           * Render a specific implementation for Desktop device\r\n                                                                           */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    self.getArrow().hide();\n    self.defineRangeControl();\n  } });","/*\r\n *   Name: Bizagi Base Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define an abstract render factory in order to do common stuff for all device factories\r\n */\n\n$.Class.extend(\"bizagi.rendering.base.factory\", {}, {\n  /* \r\n                                                      *   Constructor\r\n                                                      */\n  init: function init(dataService) {\n    this.templates = {};\n    this.dataService = dataService;\n  },\n\n  /**\r\n     * Load client resources in order to override a default behavior\r\n     */\n  loadOverrides: function loadOverrides() {\n  },\n  /*\r\n     *   This function will load asynchronous stuff needed in the module\r\n     */\n  initAsyncStuff: function initAsyncStuff() {\n    return $.when.apply($, [this.loadOverrides(), this.loadTemplates()]);\n  },\n  /*\r\n     *   Load all the templates used for rendering\r\n     */\n  loadTemplates: function loadTemplates() {\n  },\n  /*\r\n     *   Load one template and save it internally\r\n     */\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return bizagi.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedTemplate) {\n      self.templates[template] = resolvedTemplate;\n    });\n  },\n  /*\r\n     * Returns a common  used template for the framework\r\n     */\n  getCommonTemplate: function getCommonTemplate(template) {\n    return this.templates[template];\n  },\n  /*\r\n     *   Returns the appropiate container based on the container type\r\n     */\n  getContainer: function getContainer(params) {\n    // TODO: REMOVE IMPLEMENTATION\n\n    var type = params.type;\n    var data = params.data;\n    var containerParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"form\") {\n      return new bizagi.rendering.form(containerParams);\n    }\n\n    if (type == \"mobileform\") {\n      return new bizagi.rendering.mobileform(containerParams);\n    }\n\n    if (type == \"template\") {\n      return new bizagi.rendering.formTemplate(containerParams);\n    }\n\n    if (type == \"queryForm\") {\n      return new bizagi.rendering.queryForm(containerParams);\n    }\n\n    if (type == \"layout\") {\n      return new bizagi.rendering.layout(containerParams);\n    }\n\n    if (type == \"usersForm\") {\n      return new bizagi.rendering.usersForm(containerParams);\n    }\n\n    if (type == \"panel\") {\n      return new bizagi.rendering.panel(containerParams);\n    }\n\n    if (type == \"section\") {\n      return new bizagi.rendering.section(containerParams);\n    }\n\n    if (type == \"contentPanel\" || type == \"contentpanel\") {\n      return new bizagi.rendering.contentPanel(containerParams);\n    }\n\n    if (type.toLowerCase() == \"nestedform\") {\n      return new bizagi.rendering.nestedForm(containerParams);\n    }\n\n    if (type == \"tab\") {\n      return new bizagi.rendering.tab(containerParams);\n    }\n\n    if (type == \"tabItem\" || type == \"tabitem\") {\n      return new bizagi.rendering.tabItem(containerParams);\n    }\n\n    if (type == \"horizontal\") {\n      return new bizagi.rendering.horizontal(containerParams);\n    }\n\n    if (type == \"accordion\") {\n      return new bizagi.rendering.accordion(containerParams);\n    }\n\n    if (type == \"accordionItem\") {\n      return new bizagi.rendering.accordionItem(containerParams);\n    }\n\n    if (type == \"group\") {\n      return new bizagi.rendering.group(containerParams);\n    }\n\n    if (type == \"mobilegroup\") {\n      return new bizagi.rendering.mobilegroup(containerParams);\n    }\n\n    if (type == \"searchForm\") {\n      containerParams.context = \"search\";\n      containerParams.contexttype = \"metadata\";\n      return new bizagi.rendering.searchForm(containerParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate render based on the render type\r\n     */\n  getRender: function getRender(params) {\n\n    // TODO: REMOVE IMPLEMENTATION\n    var type = params.type;\n    var data = params.data;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (!type)\n    type = \"label\";\n\n    if (type == \"text\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(renderParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(renderParams);\n    }\n    if (type == \"mobiletext\") {\n      return new bizagi.rendering.mobiletext(renderParams);\n    }\n\n    if (type == \"association\") {\n      return new bizagi.rendering.association(renderParams);\n    }\n\n    if (type == \"label\") {\n      return new bizagi.rendering.label(renderParams);\n    }\n\n    if (type == \"hidden\") {\n      return new bizagi.rendering.hidden(renderParams);\n    }\n\n    if (type == \"number\") {\n      return new bizagi.rendering.number(renderParams);\n    }\n\n    if (type == \"money\") {\n      return new bizagi.rendering.money(renderParams);\n    }\n\n    if (type == \"date\") {\n      return new bizagi.rendering.date(renderParams);\n    }\n\n    if (type == \"boolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(renderParams);\n    }\n\n    if (type == \"combo\") {\n      return new bizagi.rendering.combo(renderParams);\n    }\n\n    if (/^cascadingcombo$/i.test(type)) {\n      return new bizagi.rendering.cascadingCombo(renderParams);\n    }\n\n    if (type == \"list\") {\n      return new bizagi.rendering.list(renderParams);\n    }\n\n    if (type == \"multiSelect\") {\n      return new bizagi.rendering.multiSelect(renderParams);\n    }\n\n    if (type == \"radio\") {\n      return new bizagi.rendering.radio(renderParams);\n    }\n\n    if (type == \"image\") {\n      // Override for test purposes\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"uploadecm\") {\n      // Check if its ECM file            \n      return new bizagi.rendering.ecm(renderParams);\n    }\n\n    if (type == \"upload\") {\n      return new bizagi.rendering.upload(renderParams);\n    }\n    if (type == \"grid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"groupedgrid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"search\") {\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"suggest\") {\n      renderParams.data.properties.enableQuerySuggestBehavior = true;\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"searchList\") {\n      return new bizagi.rendering.searchList(renderParams);\n    }\n\n    if (type == \"letter\") {\n      return new bizagi.rendering.letter(renderParams);\n    }\n\n    if (type == \"button\") {\n      return new bizagi.rendering.button(renderParams);\n    }\n\n    if (type == \"formLink\") {\n      return new bizagi.rendering.formLink(renderParams);\n    }\n\n    if (type == \"link\") {\n      return new bizagi.rendering.link(renderParams);\n    }\n\n    if (type == \"layoutImage\") {\n      return new bizagi.rendering.layoutImage(renderParams);\n    }\n\n    if (type == \"layoutLink\") {\n      return new bizagi.rendering.layoutLink(renderParams);\n    }\n\n    if (type == \"layoutLabel\") {\n      return new bizagi.rendering.layoutLabel(renderParams);\n    }\n\n    if (type == \"layoutText\") {\n      return new bizagi.rendering.layoutText(renderParams);\n    }\n\n    if (type == \"layoutDateTime\") {\n      return new bizagi.rendering.layoutDateTime(renderParams);\n    }\n\n    if (type == \"layoutNumber\") {\n      return new bizagi.rendering.layoutNumber(renderParams);\n    }\n\n    if (type == \"layoutMoney\") {\n      return new bizagi.rendering.layoutMoney(renderParams);\n    }\n\n    if (type == \"layoutPlaceholder\") {\n      return new bizagi.rendering.layoutPlaceholder(renderParams);\n    }\n\n    if (type == \"actionLauncher\") {\n      return new bizagi.rendering.actionLauncher(renderParams);\n    }\n\n    if (type == \"layoutBoolean\") {\n      return new bizagi.rendering.layoutBoolean(renderParams);\n    }\n\n    if (type == \"layoutUpload\") {\n      return new bizagi.rendering.layoutUpload(renderParams);\n    }\n\n    if (type == \"entityTemplate\") {\n      return new bizagi.rendering.entityTemplate(renderParams);\n    }\n\n    if (type == \"polymorphicLauncher\") {\n      return new bizagi.rendering.polymorphicLauncher(renderParams);\n    }\n\n    if (type == \"userfield\") {\n      return new bizagi.rendering.userfieldWrapper(renderParams);\n    }\n\n    // Check search renders (starts with \"search\")\n    if (type.indexOf(\"search\") == 0) {\n      return this.getSearchRender(params);\n    }\n\n    if (type.indexOf(\"query\") == 0) {\n      return this.getQueryRender(params);\n    }\n\n    if (type == \"document\") {\n      return new bizagi.rendering.document(renderParams);\n    }\n\n    if (type == \"image\") {\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"fileprint\") {\n      return new bizagi.rendering.fileprint(renderParams);\n    }\n    if (type == \"geolocation\") {\n      return new bizagi.rendering.geolocation(renderParams);\n    }\n\n    if (type == \"collectionnavigator\") {\n      return new bizagi.rendering.collectionnavigator(renderParams);\n    }\n\n    if (type == \"getUser\") {\n      return new bizagi.rendering.getUser(renderParams);\n    }\n\n    if (type == \"rangeDate\") {\n      return new bizagi.rendering.rangeDate(renderParams);\n    }\n\n    if (type == \"rangeMoney\") {\n      return new bizagi.rendering.rangeMoney(renderParams);\n    }\n\n    if (type == \"rangeNumber\") {\n      return new bizagi.rendering.rangeNumber(renderParams);\n    }\n\n    if (type == \"activityCheckList\") {\n      return new bizagi.rendering.activityCheckList(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate column based on the render type\r\n     */\n  getColumn: function getColumn(params) {\n    var type = params.type;\n    var data = params.data;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type == \"columnText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        columnParams.decorated = bizagi.rendering.extendedText;\n      } else {\n        // Creates one normal text render\n        columnParams.decorated = bizagi.rendering.text;\n      }\n      return new bizagi.rendering.columns.text(columnParams);\n    }\n\n    if (type == \"columnSearchList\") {\n      columnParams.decorated = bizagi.rendering.searchList;\n      return new bizagi.rendering.columns.searchList(columnParams);\n    }\n\n    if (type == \"columnNumber\") {\n      columnParams.decorated = bizagi.rendering.number;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnMoney\") {\n      columnParams.decorated = bizagi.rendering.money;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnDate\") {\n      columnParams.decorated = bizagi.rendering.date;\n      return new bizagi.rendering.columns.date(columnParams);\n    }\n\n    if (type == \"columnBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        columnParams.decorated = bizagi.rendering.check;\n        if (params.data.properties.isExclusive) {\n          return new bizagi.rendering.columns.exclusiveCheck(columnParams);\n        }\n      } else {\n        // Creates one yes-no render\n        columnParams.decorated = bizagi.rendering.yesno;\n      }\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnCombo\") {\n      columnParams.decorated = bizagi.rendering.combo;\n      return new bizagi.rendering.columns.combo(columnParams);\n    }\n\n    if (type == \"columnRadio\") {\n      columnParams.decorated = bizagi.rendering.radio;\n      return new bizagi.rendering.columns.radio(columnParams);\n    }\n\n    if (type == \"columnList\") {\n      columnParams.decorated = bizagi.rendering.list;\n      return new bizagi.rendering.columns.list(columnParams);\n    }\n\n    if (type == \"columnHidden\") {\n      columnParams.decorated = bizagi.rendering.hidden;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnUpload\") {\n      columnParams.decorated = bizagi.rendering.upload;\n      return new bizagi.rendering.columns.upload(columnParams);\n    }\n\n    if (type == \"columnImage\") {\n      columnParams.decorated = bizagi.rendering.image;\n      return new bizagi.rendering.columns.image(columnParams);\n    }\n\n    if (type == \"columnUploadEcm\") {\n      columnParams.decorated = bizagi.rendering.ecm;\n      return new bizagi.rendering.columns.uploadecm(columnParams);\n    }\n    if (type == \"columnLink\") {\n      columnParams.decorated = bizagi.rendering.link;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnFormLink\") {\n      columnParams.decorated = bizagi.rendering.formLink;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnUserfield\") {\n      columnParams.decorated = bizagi.rendering.userfieldWrapper;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnSearch\") {\n      columnParams.decorated = bizagi.rendering.search;\n      return new bizagi.rendering.columns.search(columnParams);\n    }\n\n    if (type == \"columnLabel\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnReadonly\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.readonly(columnParams);\n    }\n\n    if (type == \"columnDocument\") {\n      columnParams.decorated = bizagi.rendering.document;\n      return new bizagi.rendering.columns.document(columnParams);\n    }\n\n    if (type == \"columnLetter\") {\n      columnParams.decorated = bizagi.rendering.letter;\n      return new bizagi.rendering.columns.letter(columnParams);\n    }\n\n    if (type == \"columnButton\") {\n      columnParams.decorated = bizagi.rendering.button;\n      return new bizagi.rendering.columns.button(columnParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getSearchRender: function getSearchRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"searchText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(searchParams);\n    }\n\n    if (type == \"searchBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(searchParams);\n    }\n\n    if (type == \"searchNumber\") {\n      if (data.properties.dataType == 29) {\n        //Creates a Scientific Notation render\n        return new bizagi.rendering.numberScientificNotation(searchParams);\n      }\n      return new bizagi.rendering.number(searchParams);\n    }\n\n    if (type == \"searchMoney\") {\n      return new bizagi.rendering.money(searchParams);\n    }\n\n    if (type == \"searchDate\") {\n      return new bizagi.rendering.date(searchParams);\n    }\n\n    if (type == \"searchCombo\") {\n      return new bizagi.rendering.combo(searchParams);\n    }\n\n    if (type == \"searchSuggest\") {\n      return new bizagi.rendering.search(searchParams);\n    }\n\n    if (type == \"searchLabel\") {\n      return new bizagi.rendering.label(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getQueryRender: function getQueryRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"queryText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.queryExtendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.queryText(searchParams);\n    }\n\n    if (type == \"queryBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.queryCheck(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.queryYesNo(searchParams);\n    }\n\n    if (type == \"queryNumber\") {\n\n      return new bizagi.rendering.queryNumber(searchParams);\n    }\n\n    if (type == \"queryMoney\") {\n      return new bizagi.rendering.queryMoney(searchParams);\n    }\n\n    if (type == \"queryDate\") {\n      return new bizagi.rendering.queryDate(searchParams);\n    }\n\n    if (type == \"queryCombo\") {\n      return new bizagi.rendering.queryCombo(searchParams);\n    }\n\n    if (type == \"queryCascadingCombo\") {\n      return new bizagi.rendering.queryCascadingCombo(searchParams);\n    }\n\n    if (type == \"querySuggest\") {\n      return new bizagi.rendering.querySuggest(searchParams);\n    }\n\n    if (type == \"queryLabel\") {\n      return new bizagi.rendering.queryLabel(searchParams);\n    }\n\n    if (type == \"queryList\") {\n      return new bizagi.rendering.queryList(searchParams);\n    }\n\n    if (type == \"queryMultiSelect\") {\n      return new bizagi.rendering.queryMultiSelect(searchParams);\n    }\n\n    if (type == \"querySearch\") {\n      return new bizagi.rendering.querySearch(searchParams);\n    }\n\n    if (type == \"queryRadio\") {\n      return new bizagi.rendering.queryRadio(searchParams);\n    }\n\n    if (type == \"queryState\") {\n      return new bizagi.rendering.queryState(searchParams);\n    }\n\n    if (type == \"queryCaseState\") {\n      return new bizagi.rendering.queryCaseState(searchParams);\n    }\n\n    if (type == \"queryProcess\") {\n      return new bizagi.rendering.queryProcess(searchParams);\n    }\n\n    if (type == \"querySearchUser\") {\n      return new bizagi.rendering.querySearchUser(searchParams);\n    }\n\n    if (type == \"queryHidden\") {\n      return new bizagi.rendering.hidden(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Method to fetch templates from a private dictionary\r\n     */\n  getTemplate: function getTemplate(template) {\n    var self = this;\n    return self.templates[template];\n  } });","/*\r\n*   Name: BizAgi Smartphone Render Factory\r\n*   Author: Oscar O\r\n*   Comments:\r\n*   -   This script will define a render factory to create smartphone versions of each render type\r\n*/\n\nbizagi.rendering.base.factory.extend(\"bizagi.rendering.smartphone.factory\", {}, {\n\n  init: function init(dataService) {\n    var self = this;\n\n    self._super(dataService);\n\n    if (bizagi.override.enableMSF) {\n      if (bizagi.hasOwnProperty(\"kendo\")) {\n        self.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n      } else {\n        self.templateService = new bizagi.templates.services.service(bizagi.localization);\n      }\n    } else {\n      self.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n    }\n  },\n\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return self.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedRemplate) {\n      self.templates[template] = resolvedRemplate;\n    });\n  },\n\n  /*\r\n     *   Load all the templates used for rendering\r\n     */\n  loadTemplates: function loadTemplates() {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(\n    // Icons\n    self.loadTemplate(\"icons\", bizagi.getTemplate(\"common.bizagi.rendering.icons\")),\n    // Containers\n    self.loadTemplate(\"form\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.form\") + \"#ui-bizagi-render-form\"),\n    self.loadTemplate(\"complexgateway\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.form\") + \"#ui-bizagi-render-complexGateway\"),\n    self.loadTemplate(\"panel\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.panel\")),\n    self.loadTemplate(\"tab\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.tab\")),\n    self.loadTemplate(\"tabItem\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.tabItem\")),\n    self.loadTemplate(\"horizontal\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.horizontal\")),\n    self.loadTemplate(\"group\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.group\")),\n    self.loadTemplate(\"editRender\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edit\")),\n    self.loadTemplate(\"searchForm\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.searchForm\")),\n    self.loadTemplate(\"accordion\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.accordion\")),\n    self.loadTemplate(\"accordionItem\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.accordionItem\")),\n    self.loadTemplate(\"contentPanel\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.contentPanel\")),\n\n    // Renders\n    self.loadTemplate(\"render\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.render\")),\n    self.loadTemplate(\"render-layout\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.render.layout\")),\n    self.loadTemplate(\"combo\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.combo\") + \"#ui-bz-mobile-combo-control\"),\n    self.loadTemplate(\"readonlyCombo\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.combo\") + \"#ui-bz-mobile-readonly-combo-control\"),\n    self.loadTemplate(\"comboModalView\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.combo\") + \"#ui-bz-wp-popup-combo-control\"),\n    self.loadTemplate(\"date\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.date\") + \"#bz-rn-date\"),\n    self.loadTemplate(\"text\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.text\")),\n    self.loadTemplate(\"number\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.number\") + \"#ui-bz-mobile-number-control\"),\n    self.loadTemplate(\"readonlyNumber\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.number\") + \"#ui-bz-mobile-readonly-number-control\"),\n    self.loadTemplate(\"numberScientificNotation\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.numberScientificNotation\")),\n    self.loadTemplate(\"extendedText\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.extendedText\") + \"#ui-bz-mobile-extended-text-control\"),\n    self.loadTemplate(\"readonlyExtendedText\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.extendedText\") + \"#ui-bz-mobile-readonly-extended-text-control\"),\n    self.loadTemplate(\"yesno\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.yesno\")),\n    self.loadTemplate(\"check\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.check\")),\n    self.loadTemplate(\"button\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.button\")),\n    self.loadTemplate(\"link\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.link\")),\n    self.loadTemplate(\"list\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.list\") + \"#ui-bz-mobile-list-control\"),\n    self.loadTemplate(\"listModalView\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.list\") + \"#ui-bz-wp-popup-list-control\"),\n    self.loadTemplate(\"geolocation\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.geolocation\")),\n    self.loadTemplate(\"radio\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.radio\")),\n    self.loadTemplate(\"search\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.search\") + \"#ui-bz-mobile-search-control\"),\n    self.loadTemplate(\"readonlySearch\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.search\") + \"#ui-bz-mobile-readonly-search-control\"),\n    self.loadTemplate(\"searchList\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.searchList\") + \"#ui-bz-mobile-searchlist-control\"),\n    self.loadTemplate(\"searchListModalView\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.searchList\") + \"#ui-bz-wp-popup-searchlist-control\"),\n    self.loadTemplate(\"searchListModalViewAuxTemplates\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.searchList\") + \"#ui-bz-wp-searchlist-control-modalview-auxiliary-templates\"),\n    self.loadTemplate(\"searchListInputAuxTemplates\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.searchList\") + \"#ui-bz-wp-searchlist-control-input-auxiliary-templates\"),\n    self.loadTemplate(\"upload\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.upload\") + \"#bz-rn-upload-container\"),\n    self.loadTemplate(\"uploadItem\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.upload\") + \"#bz-rn-upload-item\"),\n    self.loadTemplate(\"association\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.association\")),\n    self.loadTemplate(\"ecm\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.ecm\") + \"#bz-rn-ecm-view-default-item\"),\n    self.loadTemplate(\"ecm-metadata\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.ecm\") + \"#bz-rn-ecm-metadata\"),\n    self.loadTemplate(\"checkList\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.checkList\")),\n    self.loadTemplate(\"image\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.image\") + \"#ui-bizagi-render-image\"),\n    self.loadTemplate(\"image-item\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.image\") + \"#ui-bizagi-render-image-item\"),\n    self.loadTemplate(\"image-preview\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.image\") + \"#bz-rd-upload-render-edition\"),\n    self.loadTemplate(\"document\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.document\") + \"#bz-document-generator\"),\n    self.loadTemplate(\"document-item\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.document\") + \"#bz-document-generator-item\"),\n    self.loadTemplate(\"render-range\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.range\")),\n    self.loadTemplate(\"readonly\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.readonly\")),\n    self.loadTemplate(\"list-multiselect\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.multiSelect\") + \"#ui-bz-mobile-multiselect-control\"),\n    self.loadTemplate(\"list-multiselect-tag\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.multiSelect\") + \"#ui-bz-mobile-multiselect-tag\"),\n    self.loadTemplate(\"list-multiselect-tags\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.multiSelect\") + \"#bz-list-multiselect-tags\"),\n    self.loadTemplate(\"list-multiselect-view-more\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.multiSelect\") + \"#ui-bz-mobile-multiselect-view-more\"),\n    self.loadTemplate(\"multiselectModalView\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.multiSelect\") + \"#ui-bz-wp-popup-multiselect-control\"),\n\n    //action launcher helpers\n    self.loadTemplate(\"render-slide-view\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.slide.view\")),\n\n    //action launcher\n    self.loadTemplate(\"render-actionLauncher\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.actionLauncher\") + \"#bz-rendering-actionLauncher\"),\n    self.loadTemplate(\"render-actionLauncher-horizontal\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.actionLauncher\") + \"#bz-rendering-actionLauncher-horizontal\"),\n    self.loadTemplate(\"render-actionLauncher-vertical\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.actionLauncher\") + \"#bz-rendering-actionLauncher-vertical\"),\n    self.loadTemplate(\"render-actionLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.actionLauncher\") + \"#bz-rendering-actionLauncher-actions-to-execute\"),\n\n    //polymorphic launcher\n    self.loadTemplate(\"render-polymorphicLauncher\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree-item\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree-item\"),\n    self.loadTemplate(\"render-polymorphicLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-polymorphicLauncher-confirm\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-confirm\"),\n\n    //Renders Edition\n    self.loadTemplate(\"edition.number\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.number\")),\n    self.loadTemplate(\"edition.search.add\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.search\") + \"#bz-rn-search-add\"),\n    self.loadTemplate(\"edition.search.item\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.search\") + \"#bz-rn-search-item\"),\n    self.loadTemplate(\"edition.link\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.link\")),\n    self.loadTemplate(\"edition.letter\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.letter\")),\n\n    //Renders Layouts\n    self.loadTemplate(\"layout-image\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.image\") + \"#ui-bizagi-render-layout-image\"),\n    self.loadTemplate(\"layout-image64\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.image\") + \"#ui-bizagi-render-layout-image64\"),\n    self.loadTemplate(\"layout-label\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.label\")),\n    self.loadTemplate(\"layout-link\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.link\")),\n    self.loadTemplate(\"layout-text\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.text\")),\n    self.loadTemplate(\"layout-date-time\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.dateTime\")),\n    self.loadTemplate(\"layout-money\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.money\")),\n    self.loadTemplate(\"layout-number\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.number\")),\n    self.loadTemplate(\"layout-upload\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.upload\")),\n\n    //Renders commons\n    self.loadTemplate(\"form-error\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.form-error\")),\n    self.loadTemplate(\"form-waiting\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.form-waiting\")),\n\n    self.getGridTemplates()).\n    done(function () {\n      var tmplIcons = self.getTemplate(\"icons\");\n      var svgStoreCounter = $(\"head\").find('#genome-forms-icons').length;\n\n      if (svgStoreCounter === 0) {\n        $(\"head\").append(tmplIcons);\n      }\n      // Resolve when all templates are loaded\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Load javascripts after render has been rendered\r\n      */\n  loadOverrides: function loadOverrides() {\n    // Load custom javascript overrides\n    if (bizagi.enableCustomizations) {\n      return bizagi.util.loadFile({\n        src: bizagi.getJavaScript(\"bizagi.workportal.smartphone.overrides\"),\n        type: \"js\" });\n\n    }\n\n    return;\n  },\n\n  /**\r\n      * Returns the appropiate render based on the render type\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getRender: function getRender(params) {\n    var self = this;\n    var type = params.type;\n    var data = params.data;\n\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type === \"number\") {\n      var properties = data.properties;\n      if (properties && properties.dataType === 29) {\n        return new bizagi.rendering.numberScientificNotation(renderParams);\n      }\n    }\n\n    // Grid Beta\n    if (bizagi.util.isMobileGridEnabled() && type === \"grid\") {\n      return new bizagi.rendering.grid.beta(renderParams);\n    }\n\n    return self._super(params);\n  },\n\n  /**\r\n      * Returns the appropiate column based on the render type\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getColumn: function getColumn(params) {\n    var self = this;\n    var type = params.type;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type === \"columnNumber\") {\n      var data = params.data;\n      var properties = data.properties;\n      if (properties && properties.dataType === 29) {\n        columnParams.decorated = bizagi.rendering.numberScientificNotation;\n        return new bizagi.rendering.columns.numberScientificNotation(columnParams);\n      }\n    }\n\n    // Call base\n    return self._super(params);\n  },\n\n  /**\r\n      * Get template by type\r\n      * @returns {}\r\n      */\n  getGridTemplates: function getGridTemplates() {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    if (bizagi.util.isMobileGridEnabled()) {\n      $.when(\n      //Grid helper\n      self.loadTemplate(\"grid-view\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.helpers\")),\n\n      //Grid Smartphone\n      self.loadTemplate(\"grid\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid\"),\n      self.loadTemplate(\"cell\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-cell\"),\n      self.loadTemplate(\"cell.readonly\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-cell-readonly\"),\n\n      //Grid items\n      self.loadTemplate(\"grid-control\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-control\"),\n      self.loadTemplate(\"grid-table\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table\"),\n      self.loadTemplate(\"grid-table-empty\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-empty\"),\n      self.loadTemplate(\"grid-table-column\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-column\"),\n      self.loadTemplate(\"grid-table-column-special\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-column-special\"),\n      self.loadTemplate(\"grid-table-row\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-row\"),\n      self.loadTemplate(\"grid-table-cell\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-cell\"),\n      self.loadTemplate(\"grid-table-cell-special\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-cell-special\"),\n      self.loadTemplate(\"grid-table-pager\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-pager\"),\n      //Modal filter\n      self.loadTemplate(\"grid-modal-filter\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-filter\")).\n      done(function () {\n        deferred.resolve();\n      });\n    } else {\n      $.when(\n      //Grid Smartphone\n      self.loadTemplate(\"grid\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid\")),\n      self.loadTemplate(\"cell\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.cell\")),\n      self.loadTemplate(\"cell.readonly\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.cell.readonly\")),\n\n      // Grid items\n      self.loadTemplate(\"bizagi.grid.grid\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid\"),\n      self.loadTemplate(\"bizagi.grid.waiting\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-waiting\"),\n      self.loadTemplate(\"bizagi.grid.table\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-table\"),\n      self.loadTemplate(\"bizagi.grid.table.empty\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-table-empty\"),\n      self.loadTemplate(\"bizagi.grid.column\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-column\"),\n      self.loadTemplate(\"bizagi.grid.column.special\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-column-special\"),\n      self.loadTemplate(\"bizagi.grid.row\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-row\"),\n      self.loadTemplate(\"bizagi.grid.row.buttons\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-row-buttons\"),\n      self.loadTemplate(\"bizagi.grid.cell\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-cell\"),\n      self.loadTemplate(\"bizagi.grid.cell.special\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-cell-special\"),\n      self.loadTemplate(\"bizagi.grid.pager\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-pager\"),\n      self.loadTemplate(\"bizagi.grid.buttons\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-buttons\"),\n      self.loadTemplate(\"bizagi.grid.totalizer\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-totalizer\")).\n      done(function () {\n        deferred.resolve();\n      });\n    }\n\n    return deferred.promise();\n  } });","/*\r\n*   Name: Bizagi Device Render Factory\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will detect the current device and then will load the appropriate factory on demand\r\n*/\n\n$.Class.extend(\"bizagi.rendering.device.factory\", {}, {\n\n  /**\r\n                                                         * Constructor, detects the device\r\n                                                         * @param params\r\n                                                         */\n  init: function init(params) {\n    this.execution_device = bizagi.util.detectDevice();\n    this.cachedFactory = {};\n  },\n\n  /**\r\n      * Returns the appropriate render factory based on the device detection\r\n      * Because it loads the scripts on demand it must return a promise\r\n      * @param dataService\r\n      * @param device\r\n      * @returns {*}\r\n      */\n  getRenderFactory: function getRenderFactory(dataService, device) {\n    var self = this;\n    device = device || \"desktop\";\n    var defer = new $.Deferred();\n\n    if (typeof self.cachedFactory[device] !== \"undefined\") {\n      // Reset print version value\n      self.cachedFactory[device].printVersion = false;\n      // Resolve with cached factory                \n      defer.resolve(self.cachedFactory[device]);\n    } else {\n      // If factory is not cached then build it\n      if (device === \"print\") {\n\n        // Load print version references\n        self.cachedFactory[device] = new bizagi.rendering.print.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (device === \"desktop\") {\n\n        // Load desktop references\n        self.cachedFactory[device] = new bizagi.rendering.desktop.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (bizagi.util.isTabletDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.tablet.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else if (bizagi.util.isSmartphoneDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.smartphone.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else {\n        // if no device suuported\n        bizagi.showMessageBox(\"Not supported device: \" + device);\n        defer.reject(\"Not supported device: \" + device);\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns the current data service being used\r\n      * @returns {*}\r\n      */\n  getDataService: function getDataService() {\n    return this.dataService;\n  } });"]}