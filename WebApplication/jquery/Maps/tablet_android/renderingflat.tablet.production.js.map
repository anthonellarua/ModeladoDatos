{"version":3,"sources":["jquery/common/bizagi.grid/js/bizagi.grid.js","jquery/common/bizagi/js/bizagi.util.js","jquery/common/bizagi.grid/js/tablet/bizagi.grid.tablet.js","jquery/renderingflat/js/common/bizagi.rendering.util.js","jquery/common/jquery.formatCurrency/jquery.formatCurrency.js","jquery/rendering/js/services/bizagi.render.services.service.js","jquery/rendering/js/services/bizagi.render.services.multiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.controller.js","jquery/rendering/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/render/bizagi.rendering.render.js","jquery/rendering/js/base/container/bizagi.rendering.form.js","jquery/rendering/js/base/render/bizagi.rendering.combo.js","jquery/rendering/js/base/render/bizagi.rendering.date.js","jquery/rendering/js/base/render/bizagi.rendering.extendedText.js","jquery/rendering/js/base/render/bizagi.rendering.grid.js","jquery/rendering/js/base/render/bizagi.rendering.label.js","jquery/rendering/js/base/render/bizagi.rendering.search.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.render.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.column.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.view.search.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.extendedText.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.date.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.combo.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.grid.offline.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.search.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.ecm.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.searchList.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.combo.js","jquery/rendering/js/bizagi.rendering.facade.js","jquery/rendering/js/plugins/common/jquery.mask.js","jquery/rendering/js/plugins/common/jquery.numeric.js","jquery/common/base/js/lib/mobile/jquery.timeago.js","jquery/common/base/js/lib/mobile/jquery.tabs.js","jquery/common/base/js/lib/mobile/jquery.helptext.js","jquery/rendering/js/services/bizagi.render.services.endPoints.js","jquery/rendering/js/services/bizagi.render.services.context.js","jquery/rendering/js/services/bizagi.render.services.metadataMultiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.validation.js","jquery/renderingflat/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/bizagi.rendering.element.js","jquery/rendering/js/base/container/bizagi.rendering.container.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.container.js","jquery/rendering/js/base/render/bizagi.rendering.render.base.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.render.js","jquery/rendering/js/base/container/bizagi.rendering.formTemplate.js","jquery/rendering/js/base/container/bizagi.rendering.layout.js","jquery/rendering/js/base/container/bizagi.rendering.accordion.js","jquery/rendering/js/base/container/bizagi.rendering.accordionItem.js","jquery/rendering/js/base/render/bizagi.rendering.collectionnavigator.js","jquery/rendering/js/base/container/bizagi.rendering.group.js","jquery/rendering/js/base/container/bizagi.rendering.section.js","jquery/rendering/js/base/container/bizagi.rendering.horizontal.js","jquery/rendering/js/base/container/bizagi.rendering.panel.js","jquery/rendering/js/base/container/bizagi.rendering.contentPanel.js","jquery/rendering/js/base/container/bizagi.rendering.searchForm.js","jquery/rendering/js/base/container/bizagi.rendering.tab.js","jquery/rendering/js/base/container/bizagi.rendering.tabItem.js","jquery/rendering/js/base/container/bizagi.rendering.nestedForm.js","jquery/rendering/js/base/render/bizagi.rendering.actionLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.entityTemplate.js","jquery/rendering/js/base/render/bizagi.rendering.polymorphicLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.check.js","jquery/rendering/js/base/render/bizagi.rendering.number.js","jquery/rendering/js/base/render/bizagi.rendering.numberScientificNotation.js","jquery/rendering/js/base/render/bizagi.rendering.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.text.js","jquery/rendering/js/base/render/bizagi.rendering.readonly.js","jquery/rendering/js/base/render/bizagi.rendering.button.js","jquery/rendering/js/base/render/bizagi.rendering.fileprint.js","jquery/rendering/js/base/render/bizagi.rendering.link.js","jquery/rendering/js/base/render/bizagi.rendering.checkList.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.image.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.link.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.label.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.text.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.upload.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.boolean.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.dateTime.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.number.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.money.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.placeholder.js","jquery/rendering/js/base/render/bizagi.rendering.geolocation.js","jquery/rendering/js/base/render/bizagi.rendering.association.js","jquery/rendering/js/base/render/bizagi.rendering.upload.js","jquery/rendering/js/base/render/bizagi.rendering.ecm.js","jquery/rendering/js/base/render/bizagi.rendering.yesno.js","jquery/rendering/js/base/render/bizagi.rendering.letter.js","jquery/rendering/js/base/render/bizagi.rendering.formLink.js","jquery/rendering/js/base/render/bizagi.rendering.document.js","jquery/rendering/js/base/render/bizagi.rendering.cascadingCombo.js","jquery/rendering/js/base/render/bizagi.rendering.list.js","jquery/rendering/js/base/render/bizagi.rendering.multiSelect.js","jquery/rendering/js/base/render/bizagi.rendering.searchList.js","jquery/rendering/js/base/render/bizagi.rendering.money.js","jquery/rendering/js/base/render/bizagi.rendering.radio.js","jquery/rendering/js/base/render/bizagi.rendering.userfield.js","jquery/rendering/js/base/render/bizagi.rendering.image.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.readonly.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.combo.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.date.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.search.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.range.js","jquery/rendering/js/base/render/bizagi.rendering.rangeDate.js","jquery/rendering/js/base/render/bizagi.rendering.rangeMoney.js","jquery/rendering/js/base/render/bizagi.rendering.rangeNumber.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.form.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.view.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.view.grid.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.view.upload.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.startForm.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.form.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.panel.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.tab.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.tabItem.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.horizontal.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.accordion.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.accordionItem.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.group.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.searchForm.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.polymorphicLauncher.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.actionLauncher.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.entityTemplate.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.text.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.label.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.number.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.numberScientificNotation.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.yesno.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.check.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.upload.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.upload.offline.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.grid.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.letter.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.button.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.fileprint.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.link.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.checkList.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.activityCheckList.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.image.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.link.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.label.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.text.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.dateTime.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.number.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.money.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.upload.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.formLink.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.hidden.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.money.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.radio.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.cascadingCombo.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.list.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.multiSelect.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.association.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.userfield.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.image.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.document.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.rangeDate.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.rangeMoney.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.rangeNumber.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.geolocation.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.column.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.document.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.date.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.text.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.number.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.numberScientificNotation.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.image.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.upload.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.link.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.uploadecm.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.button.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.radio.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.list.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.search.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.exclusiveCheck.js","jquery/rendering/js/base/bizagi.rendering.base.factory.js","jquery/renderingflat/js/tablet/bizagi.rendering.tablet.factory.js","jquery/rendering/js/bizagi.rendering.device.factory.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","$","widget","options","id","columns","sortBy","sortType","showSummary","collapse","collapseState","data","indexedData","maxColumns","buttonsPst","title","tableCssClass","headerStyles","floatingHeader","hasExclusiveCheck","template","grid","waiting","table","emptyTable","column","specialColumn","row","rowButtons","cell","specialCell","pager","buttons","dynamicPager","summary","summaryCell","actions","add","edit","remove","details","allowMore","enableXlsExport","enablePdfExport","mode","_init","self","this","element","page","changes","totalRows","totalPages","selectedRow","components","asyncCells","scrollableArea","columnByIndex","columnByName","columnKeyIndex","each","i","key","label","name","tooltip","index","split","addClass","attr","calculateKeyIndex","startLoading","bUseTimeout","waitingFn","waitingTimeout","append","fasttmpl","setTimeout","endLoading","clearTimeout","empty","setData","refresh","getData","rows","j","getChanges","_cleanComponents","_cleanButtons","draw","refreshSummary","columnIndex","_getComponent","drawing","refreshSummaryCell","drawSummary","postRenderSummary","getCell","cells","is","children","find","html","drawSummaryCell","replaceWith","onCellReady","changeCellValue","value","deleteCellExclusiveValues","orientation","gridRtl","isDesign","drawTable","appendTo","postRender","attachPaginator","attachHandlers","$tableContainer","$table","offset","parseInt","css","replace","stickyTableHeaders","fixedOffset","zIndex","cacheHeaderHeight","bind","trigger","length","hide","_getButton","show","_replaceElement","drawHeader","drawBody","drawPager","drawButtons","drawGridExportOptions","drawRowButtons","drawDynamicPager","isExactMatch","exactMatch","drawColumn","_canShowButtons","drawSpecialColumn","columnProperties","bizAgiProperties","cssClass","cssclass","header","columntitlealign","columnAlign","isSortable","xpath","initialSortBy","sortActive","controlType","bizagi","util","getColumnType","type","isHorizontalRadio","horizontal","extend","isKey","sortOrder","columnCssClass","headerLabelStyles","flexAlign","mapAlignClassName","drawRow","rowData","isNewRow","newRow","rnd","Math","floor","random","businessKey","drawCell","_canShowRowButtons","drawSpecialCell","cellAlign","hidden","summarizeBy","result","onDrawCell","calculateSummary","undefined","done","state","resolveResult","messageValidation","promise","drawGroupHeader","drawFooter","pages","total","push","number","active","records","tooltips","parameters","buttonsRtl","exportOptions","rtl","postRenderRow","_triggerHandler","asyncResult","when","selectDynamicPager","onDynamicPager","changePage","currentPage","Number","newPage","onPageRequested","getCurrentPage","isValid","sortAttribute","indexOf","sortColumn","onSortRequested","selectRow","onRowUnselected","selectedBusinessKey","onRowSelected","unselectRow","operation","defaultvalue","columnValues","map","max","min","columnValue","Array","processAction","action","params","onEditRow","onDeleteRow","onShowMore","onShowDetails","onAddRow","onShowExportGridOptions","_buildRefreshParameters","onCollapseGrid","onDrawControl","onDrawGroupHeader","replaceFirstWithoutPatterns","sortColumnIndex","callback","call","component","foundComponent","button","jQuery","ui","bizagi_grid","_super","isOfflineForm","parseBoolean","pageNumber","totalizer","isiOSDevice","_resizeListener","on","evt","$context","target","parents","hasClass","onRemoveNewRow","closest","stopPropagation","_addColumnActions","totalData","apply","arguments","_showRowButtons","_hideRowButtons","pagination","renderPages","subType","window","document","tr","removeClass","floatingButtons","getNewRowKeys","onSaveAddedRows","onCancelEdition","isNewRecord","addInlineRow","createAddRowData","ceil","inlineAdd","savedRows","detach","keys","newRowKeys","hideHeaderButtons","items","localization","getResource","fn","e","overflowMenu","cancelNewRow","newRows","RegExp","randomNumber","prevWidth","tableComp","intersectionObserver","IntersectionObserver","args","forEach","entry","isIntersecting","_fixHorizontalScroll","off","width","POLL_INTERVAL","observe","get","webkitOverflowScrolling","overflow-x","context","smartphone","tablet","DEVICES","printf","msg","arg","slice","a","val","shift","charCodeAt","round","String","bizagiQueue","async","sync","queue","callbacks","addParallel","execute","starter","Deferred","queueLength","pipe","deferred","resolve","fail","reject","deviceEnum","callInside","fx","tagName","toLowerCase","contentWindow","browser","msie","execScript","toString","webkit","mozilla","eval","callInsidePopup","ready","CSSStyleDeclaration","getPropertyValue","getAttribute","setProperty","styleName","priority","setAttribute","rule","escape","cssText","removeProperty","removeAttribute","getPropertyPriority","test","text","style","nl2br","br2nl","controlValueIsChanged","control","properties","getValue","compareValue","originalValue","forceCollectData","includes","Date","getTime","getMaxZindex","elm","maxZindex","zindex","equalizeHeights","selector","heights","outerHeight","autoSave","deferredSave","detectDevice","_data","anonymizedUserInformation","username","email","domain","picture","isAnonymized","datepickerResource","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","dateFormat","firstDay","isRTL","showMonthAfterYear","yearSuffix","liveProcessesEvents","newLiveProcess","createEvent","initEvent","routeEvents","route","saveEvent","lastWidget","nextWidget","liveSave","widgetName","deferredLiveSave","indeX","location","href","workportal","widgets","BIZAGI_WORKPORTAL_WIDGET_PROFLY","saveLivePromise","dispatchEvent","md5","message","CryptoJS","s","p","m","l","lib","n","r","Base","b","h","mixIn","hasOwnProperty","init","$super","create","clone","q","WordArray","words","sigBytes","t","stringify","concat","clamp","g","v","enc","Hex","k","join","parse","substr","Latin1","fromCharCode","u","Utf8","decodeURIComponent","Error","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_nDataBytes","_append","_process","blockSize","_minBufferSize","_doProcessBlock","splice","Hasher","cfg","_doReset","update","finalize","_doFinalize","_createHelper","_createHmacHelper","HMAC","algo","abs","sin","MD5","_hash","w","x","y","z","A","B","C","D","c","d","f","HmacMD5","multiReplace","mapDataToReplace","reg","replaceAll","pcFrom","pcTo","replaceAllGlobalRegExp","temp","re","capitalize","charAt","toUpperCase","startsWith","str","getInitials","initials","sign","isNaN","JSON","encode","measureString","string","fontSize","trim","endsWith","suffix","isIE7","isIE","documentMode","isIE8","isIE9","isIE10","isIE11","navigator","userAgent","match","isIE11OrLower","isIE10OrLower","isEdge","appName","objectValues","array","Object","itm","values","getIEVersion","sAgent","indexMSIE","version","substring","isChrome","vendor","isFirefox","minVersion","ua","M","tem","exec","appVersion","getBrowser","bw","emptyNavigatorInfo","info","language","setIphoneXOverrides","isNativePluginSupported","bizagiapp","isIphoneX","isString","isObject","isArray","isNull","isBoolean","getInternetExplorerVersion","isNumeric","parseFloat","isFinite","isGUID","mustImplement","notImplementedMethod","console","log","exe","encodeXpath","isEmpty","isEmptyObject","isEmptyCombo","object","property","other","decodeURI","infinityControl","finishDecoded","decodedValue","hasNonVisibleChars","ch","percent2Number","isObjectEmpty","isMapEmpty","replaceSelector","container","elementToReplace","unwrap","hasScroll","el","direction","identicalObjects","obj1","obj2","countProps","count","isScrolledIntoView","elem","layout","scrollTop","elemTop","top","height","centerElementIntoScroll","actualScroll","elementTop","elementHeight","newTop","encodeHtml","decodeHtmlEntities","getHashParams","hash","loadFile","defer","url","src","loader","then","initWebpart","webpart","device","initialized","initializing","loadingDeferred","getQueryString","pairs","pos","argname","extendQueryString","additionalParams","plainUrl","existingParams","newParams","param","getStackTrace","callstack","isCallstackPopulated","dont","exist","stack","len","lines","opera","currentFunction","callee","caller","fname","highLightElement","autoScrollBottom","elScrollHeight","scrollHeight","autoScrollInterval","autoScroll","itemScroll","limitTop","limitBottom","idInterval","outSide","clearInterval","mousemove","event","pageY","autoScrollTopInterval","autoScrollBottomInterval","classCSS","setInterval","valueMaxScrollBottom","innerHeight","removeAutoScroll","unbind","getMaxZIndex","showPopup","callbackFn","left","newWindow","open","BAPopupWindow","BAPopupCallback","BACloseWindow","controls","submitForm","close","showQuirksModePopup","quirksModePage","BIZAGI_PATH_TO_BASE","BAQuirksPopupWindow","windowParams","popupWindow","quirksOnLoad","loadedBody","iframe","afterLoad","userParams","callbackParams","loadingFunction","body","createPopup","popupName","onClose","popupTitle","handleClose","overlay","popup","closeButton","popupContent","additionalClass","center","closeHandler","click","fullPopup","content","createOkCancelPopup","onOk","onCancel","buttonsContainer","buttonOk","buttonCancel","okHandler","cancelHandler","ok","cancel","dialog","modal","closeQuirksModePopup","quirksPopup","getStyle","pathName","getFontFace","getAllChildrens","matchStyles","stringCss","awesomeBrowser","file","styleSheets","rules","cssRules","BIZAGI_ENVIRONMENT","cssTextOriginal","selectorText","lastLevel","styleSheet","suckBrowser","cookie","expires","days","setDate","getDate","raw","toUTCString","path","secure","decode","setContext","reloadCSS","queryString","_name","_call","_params","_singleton","singleton","_timeOut","timeout","_maxIterations","iterations","_context","_killWhenExitContext","killWhenExitContext","timeOut","maxIterations","itsRunning","timeInit","executeTimeOut","now","actualIterations","ieFunction","pointer","timeOutRunning","isDate","dateField","timeField","resultDate","hasTime","resultTime","arrayDate","unicode2htmlencode","input","htmlHex","getHeadElement","hd","getElementsByTagName","docEl","documentElement","createElement","insertBefore","firstChild","loadStyle","styleText","layoutGuid","node","getElementById","createTextNode","childNodes","nodeValue","replaceChild","appendChild","loadIconStyle","icon","userfieldname","innerHTML","formatDecimalAndMoneyCell","tableData","externalMoneyFormat","moneyFormat","decimalFormat","externalDecimalFormat","decimalSymbol","decimalSeparator","digitGroupSymbol","groupSeparator","roundToDecimalPlace","decimalDigits","symbol","colorize","groupDigits","negativeFormat","positiveFormat","columnTitle","fields","formatMoney","numberValue","formatDecimal","override","removeTrailingZeros","positive","BIZAGI_DEFAULT_CURRENCY_INFO","formatBoolean","formatInvariantBoolean","htmlContent","not","$element","format","formatCurrency","formatMonetaryCells","tmpResult","intSection","decimalSection","decimalResult","isNegative","decimalDigitPosition","fixDecimalDigits","getOnlyNumbersByString","stringValue","toFixed","formatInvariantMoney","defaultFormat","allowDecimals","formatInvariantNumber","numberFormat","thousands","containsLetter","NaN","formatNumber","percentage","formatInvariantDate","dateTimeFormat","isValidDate","getFormatDate","formatDate","dateFormatter","formatDateFromInvariantStringDate","stringInvariantDate","dateValue","defaultFormatDate","H","getHours","getMinutes","getSeconds","ms","getMilliseconds","hideTimeWhenHourMinutesSecondsAreZero","formatValueByDataType","dataType","replaceLineBreak","formatMonetaryCell","formatDecimalCell","parseDate","valueOf","LZ","getDateFromFormat","getRelativeTime","date","onlyUnitsTime","timeZone","moment","tz","currentUser","timeZoneName","time","kendo","diff","timeDiff","getTimeDiffDescription","unit","timeDivisor","unitAmount","resourceAgo","compareDates","date1","dateformat1","date2","dateformat2","d1","d2","getDifferenceBetweenDates","i18n","token","i_format","getFullYear","getMonth","E","getDay","isValidResource","months","i_val","year","getYear","month","hh","mm","ss","ampm","_getInt","month_name","day_name","ff","_isInteger","_val","minlength","maxlength","_token","preferEuro","generalFormats","monthFirst","dateFirst","checkList","analyzeTimeFormat","timeFormat","returnObj","show24Hours","showSeconds","separator","lastToken","getDateFromInvariant","showTime","INVARIANT_FORMAT","setHours","formatInvariant","getDateFromISO","ISO_FORMAT","formatISO","formatISO8601","dateObject","restartTimeToMidnight","isFormatISO8601","stringDate","sleep","delay","start","getDateFormatByDatePickerJqueryUI","sleepUntil","def","internalSleepUntil","sleepFor","browserSupportLocalStorage","setItemLocalStorage","localStorage","setItem","getItemLocalStorage","getItem","removeItemLocalStorage","removeItem","clearLocalStorage","clear","bizagiConfig","showConsoleLog","stopLoading","elementToapply","isEventSupported","eventName","isSupported","needsFallback","circularDependencies","Function","list","lastNodeAdded","addNode","OBJ","foundObjChildNode","_search","_addNode","nodeObj","timeStamp","addChild","resolved","seen","_getFirstNodeWithChilds","_resolve","_resetList","childs","hasObject","error","dependencyFrom","dependencyFromObj","dependencyTo","dependencyToObj","standardError","status","responseText","makeErrorMessage","multiactionError","toSearch","collection","messageTmpl","cssExtended","instance","cssToAdd","cssExtendedApplyChanges","option","$this","attrToAdd","tmpStyle","arrProperties","resultProperties","cssProperty","canvas","parent","sortJSON","way","sort","shortNumber","newNumber","lenghtNumber","escapeHtml","div","formatMonetaryValue","formatDecimalValue","formatDateValue","showNotification","div_sync","fadeIn","stop","fadeOut","isModeOnline","dispose","arrayEach","getStandardNotation","tmp","decimalNumber","exponentialNumber","scientificNotationFormat","sdLimit","expMinLimit","expMaxLimit","sNregex","sNFormat","exp","prefix","originalPointIndex","tempParts","significantDigits","intPart","from","to","significantFlag","firstDigit","restDigits","stripslashes","isHTMLValidText","resetData","sessionStorage","isAuthenticate","changeData","isMobileDevice","isNativeMobileDevice","isTabletDevice","isAndroidTabletDevice","isiOSTabletDevice","isSmartphoneDevice","isAndroidSmartphoneDevice","isiOSSmartphoneDevice","formContainer","getFormContainer","formParams","getParams","detectAndroidVersion","indexAndroid","androidVersion","getPathUrl","solvedUrl","locationParts","pathname","basePath","protocol","host","pathToBaseBackwards","getAndroidVersion","mobileImagePath","image","dataImage","photoSplit","resource","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","byteNumbers","byteArray","Uint8Array","Blob","stringToByteArray","hasOfflineFormsEnabled","BIZAGI_ENABLE_OFFLINE_FORMS","isFlatDesignEnabled","BIZAGI_ENABLE_FLAT","isMobileGridEnabled","BIZAGI_ENABLE_MOBILE_GRID","isNativeHeaderEnabled","NATIVE_HEADER_ENABLE","isQuickSearchEnabled","BIZAGI_ENABLE_QUICK_SEARCH","isOAuth2Enabled","BIZAGI_AUTH_TYPE","getNativeComponent","BIZAGI_NATIVE_COMPONENT","isVersionSupported","supported","BIZAGI_SERVER_VERSION","isCordovaSupported","cordova","isTabletNativeSupported","isSmartphoneNativeSupported","plugins","Keyboard","hideKeyboardAccessoryBar","detectRealDevice","settedDevice","BIZAGI_DEFAULT_DEVICE","isAndroid","isAndroidDevice","getChannelType","BIZAGI_SERVER_CHANNEL","channel","isDataUrl","getDataUrl","currentUrl","tempUrl","processFailMessage","getErrorFormatted","code","statusText","errorCode","errorType","tmp_block_header","disableWorkPortalMenu","blockHeight","prependTo","position","background","opacity","z-index","enableWorkPortalMenu","enableMenuSection","idMenu","controllers","menu","setActiveSection","getURLWithASlashAtTheEnd","downloadFile","isCompleteUrl","showModalOnFail","_defer","_showModalOnFail","_urlDownload","applicationUrl","_iframeExists","_onCantDownload","that","defaultMessage","tryCatch","contentDocument","isMaintenanceWindow","jsonResponse","showModal","maintenanceWindows","modalError","_reject","onload","downloadFileByPOST","inputValues","formPOST","contents","showErrorAlertDialog","ajax","submit","executeActionRoutingFromWorkportal","idCase","idWorkItem","publish","BIZAGI_WORKPORTAL_ACTION_ROUTING","getMessageFromNetworkState","sanitizeHTML","sanified","DOMPurify","sanitize","arrayUnique","debounce","func","wait","immediate","later","callNow","debounce2","fire","isNativeImageEditorSupported","enableImageEditor","errorMessage","validateUrlWellFormed","urlWithProtocol","nodeWithUrl","cleanNodeWithUrl","IN_PLACE","urlWithoutSpaces","encodeHtmlText","valueToDisplay","decodedDisplayValue","encodeString","setCaretPosition","ctrl","setSelectionRange","focus","createTextRange","range","moveEnd","moveStart","select","getCaretPosition","oField","iCaretPos","selection","oSel","createRange","selectionStart","escapeRegex","getFeatureObject","arr","featureObjectCache","features","getConfigFeatures","pivot","getFeatureObjectIte","bizagiConfiguration","BIZAGI_MOBILE_FEATURES","resetConfigFeatures","isFailResponse","formatItem","performTermMatches","strValue","term","withoutFormat","highlightMatches","regEx","getDesktopResolution","resolution","devicePixelRatio","screenWidth","screen","screenHeight","deviceXDPI","logicalXDPI","getDeviceCode","BIZAGI_DEVICE_MARKET_NAME","normalizeType","normalizeQueryType","hideOrShowXToCloseDialog","isEnableFeature","feature","isHtml","possibleHtml","_try","_catch","listFunctions","_listFunctions","next","end","variable","reduce","newVar","prop","getComputedStyle","scroll","overflow","scrollerParent","HTMLElement","SVGElement","ps","parentNode","scrollingElement","startkendo","kendoMobileApplication","mobile","Application","skin","browserHistory","progress","started","bizagiNavigate","navigate","isMashupContext","BIZAGI_MASHUP_CONTEXT","isSharepointContext","BIZAGI_SHAREPOINT_CONTEXT","isWebpartContext","isWebpart","startTimeline","showTimeLine","startGraphicquery","showGraphicQuery","startSelectUser","showSelectUser","userId","userName","guid","isEmptyValue","initializeReferrerParams","referrerParams","getLPQueriesParameters","sidebarData","getLPQueriesSelectedItemFromTree","selectedTreeItem","setLPQueriesParameters","parametersSidebar","tree","cleanLPQueriesParameters","setLPQueriesReferrer","referrer","isConnected","connection","Connection","NONE","onLine","isRenderingUrlAllowed","request","endPoint","whiteList","pattern","applyEyeFunction","setShowIcon","after","addEvent","setHideIcon","direct","className","ev","accessibilityEnter","cb","extraEvent","preventDefault","which","recreateNativeButtons","navigation","setNavigationButtons","isOverrideFeatureEnabled","featureName","createDynamicClass","nameClass","renderParams","dynamicFunction","languages","es","es-ES","es-AR","es-BO","es-Cl","es-CO","es-CR","es-DO","es-EC","es-SV","es-GT","es-HN","es-MX","es-NI","es-PA","es-PY","es-PR","es-PE","es-US","es-UY","es-VE","en","en-AU","en-BZ","en-CA","en-029","en-IN","en-IE","en-JM","en-MY","en-NZ","en-PH","en-SG","en-ZA","en-TT","en-GB","en-US","en-ZW","de","de-AT","de-DE","de-LI","de-LU","de-CH","fr","fr-BE","fr-CA","fr-LU","fr-MC","fr-CH","fr-FR","it","it-IT","it-CH","ja","ja-JA","ja-JP","nl","nl-NL","nl-BE","pt","pt-BR","pt-PT","ru","ru-RU","cs","cs-CZ","ar","ar-DZ","ar-BH","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LB","ar-LY","ar-MA","ar-OM","ar-QA","ar-SA","ar-SY","ar-TN","ar-AE","ar-YE","zh","zh-HK","zh-MO","zh-CN","zh-Hans","zh-SG","zh-TW","zh-Hant","getNormalizedDate","fullFormat","dateTime","setMilliseconds","isFeatureEnabled","getLastProcessInboxKey","lastProcessInboxKey","getUserHash","lastProcessInboxInit","getLastProcessInboxCreate","processInfo","createLastProcessInboxProcess","sortInfo","createLastProcessInboxSort","filterInfo","createLastProcessInboxFilter","processColumnsInfo","createLastProcessInboxColumns","inputTrayInfo","createLastProcessInboxInputTray","processInfoName","idWorkflow","sortDirection","sortFieldName","filterValue","filterFieldName","filterType","processColumns","getLastProcessInbox","lastProcessInbox","setLastProcessInbox","smartInboxId","setLastProcessInboxProcessColumns","getLiveFiltersFromStorage","filters","modelStorage","serialize","setLiveFiltersToStorage","assign","setLastProcessInboxLiveFilter","liveFilters","setLastProcessInboxSort","setLastProcessInboxFilter","setLastProcessInboxInputTray","inputTray","getLastProcessInboxProcessInfo","allProcesses","getLastProcessInboxSmartInboxId","getLastProcessInboxSort","getLastProcessInboxFilter","getLastProcessInboxLiveFilter","getLastProcessInboxProcessColumns","getLastProcessInboxInputTray","removeLastProcessInbox","removeLastProcessInboxSort","removeLastProcessLiveFilters","getSyncTimeStampKey","syncTimeStampKey","storeSyncTimeStamp","currentDate","getSyncTimeStamp","syncTimeStamp","BIZAGI_USER","BIZAGI_PROXY_PREFIX","BIZAGI_DOMAIN","hashCode","defaultWidget","newValueStr","_preferService","services","preferences","_widgets","_mobile","set","newVal","_desktop","_newValueView","changePreference","INBOX_VIEW_TYPE","_actualValue","getPreference","BIZAGI_WORKPORTAL_WIDGET_INBOX","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","_device","isMobile","getMobileFeaturesKey","userKey","mobileFeaturesKey","getMobileFeatures","stringFeatures","storeMobileFeatures","mobileFeatures","storedFeatures","updatedFeatures","getCardviewMaxColumsAllowed","maxColumnsEnabled","enabled","blobTob64","blob","onlyData","reader","FileReader","readAsDataURL","onloadend","base64data","blobToText","readAsText","binaryData","newUrl","deepExtend","out","originalType","align","rigth","justify","default","isMobileErrorTracesEnabled","mobileErrorTracesEnabled","mobileErrorTraces","isMobileSmartInboxEnabled","mobileSmartInboxEnabled","mobileSmartInbox","isMobileLiveFiltersEnabled","mobileLiveFiltersEnabled","mobileLiveFilters","any","grep","first","groupBy","item","downloadBlobFile","blobFile","fileName","msSaveOrOpenBlob","URL","createObjectURL","link","download","revokeObjectURL","removeChild","handleJSONResponse","jsonFile","err","bzValidator","validators","errors","callbackValidator","warn","validate","callbackResponse","validator","getRegionOrCulture","region","regionInfo","regions","culture","generateRegex","settings","destination","defaults","global","eventOnDecimalsEntered","regex","num","multiCeroPattern","search","numParts","isPositive","hasDecimals","decimals","originalDecimals","money","$destination","toNumber","method","asNumber","parseType","validateParseType","scenarioInfo","getFileScenario","category","scenario","BIZAGI_SMARTPHONE_PATH","_defineProperty","defineProperty","enumerable","configurable","writable","b64EncodeUnicode","btoa","p1","pasteEventName","caret","begin","mask","placeholder","_prepareBuffer","_bindEvents","_checkVal","allowPartials","destroy","removeData","res","buffer","tests","formatted","_setData","eventsBound","_escapeMask","defs","definitions","partialPosition","firstNonMaskPos","maskEscaped","ignore","focusText","_writeBuffer","change","keyCode","SHIFT","SPACE","BACKSPACE","DELETE","_clearBuffer","_shiftL","ESCAPE","charCode","ctrlKey","altKey","metaKey","_seekNext","_shiftR","completed","originalPos","allow","lastMatch","literals","replacements","getter","#","*","selectionEnd","duplicate","numeric","decimal","keypress","nodeName","shiftKey","blur","numericSN","timeago","timestamp","$t","refreshMillis","allowFuture","localeTitle","cutoff","strings","prefixAgo","prefixFromNow","suffixAgo","suffixFromNow","seconds","minute","minutes","hour","hours","day","years","wordSeparator","numbers","inWords","datetime","distance","distanceMillis","$l","substitute","stringOrFunction","isFunction","iso8601","isTime","bztabs","activeTab","tabNumber","activate","popUp","beforeActivate","tabCountPopup","tabHeader","tabCountReal","widthRow","textContent","prepend","tabCurrent","eq","widthTabSelected","updateTabSize","origin","changeTab","dataRef","currentTarget","tabChildren","toggle","tempTabs","moveAtTheEnd","reorderTabs","domIncluded","headerWidth","innerWidth","totalWidth","outerWidth","pop","last","helpText","dir","useWithBlock","$html","render","endPoints","getEndPoints","renderHandlerPathRest","form-get-data","proxyPrefix","form-submit-data","form-submit-data-upload","render-property-refresh","render-multiaction","render-upload-cancel-image","render-upload-data-url","render-upload-add-url","render-upload-delete-url","render-ecm-upload-url","render-multiaction-metadata","render-grid-edit-url","render-grid-save-url","render-grid-add-url","render-grid-rollback-url","render-grid-commit-url","render-grid-checkpoint-url","render-save-entity","render-stakeholder-associated","render-search-default-image","render-search-form-get-data","render-search-advanced-url","render-letter-notEditable-url","render-letter-content-url","render-letter-save-url","render-letter-content-icons","render-userfield-definition","render-document-generate","render-document-generateAllDocuments","render-processes-startform","render-processes-getstartform","render-entity-layout-image64","render-entity-layout-imageByteArray","render-entity-layout-upload-files","render-query-getUsersList","case-handler-getCaseSummary","case-handler-getCaseSummaryByGuid","case-handler-getCaseAssignees","case-handler-getWorkItems","case-handler-getWorkItemsByGuid","admin-getUsersList","admin-getUsersList-FromPreferences","admin-getUsersList-ForStakeholders","admin-getUsersList-ForXpathIdBossUser","admin-getUsersList-ForXpathIdDelegate","admin-getUsersForAssignation","admin-users-config","admin-usersform","admin-GenerateDataToSendByEmail","admin-sendUserEmail","sharepointProxyPrefix","alert","Class","getUrl","service","setProxyPrefix","BA_ACTION_PARAMETER_PREFIX","BA_CONTEXT_PARAMETER_PREFIX","BA_PAGE_CACHE","BA_MULTIACTION_WITH_LIMIT_NUMBER","BA_MULTIACTION_WITH_LIMIT_QUEUE","serviceLocator","multiactionService","multiactionservice","multiactionServiceWithLimit","enableECMMetadataMultiaction","multiactionMetadataService","metadatamultiactionservice","userfieldRequests","deviceType","desktop","deviceCode","multiaction","multiactionWithLimit","metadataECMMultiaction","getFormData","idProcess","idForm","idEntity","surrogateKey","idRender","xpathContext","requestedForm","recordXPath","summaryForm","idWorkitem","idTask","idPageCache","contextType","guidEntity","isRefresh","isActionStartForm","additionalXpaths","idStartScope","readOnlyForm","printversion","recordXpath","downloadOfflineForm","editable","prepare","chrono","initAndStart","ajaxParams","serviceType","avoidLoader","response","stopAndLog","form","transformGridDataToReadOnly","allowAdd","allowDelete","allowEdit","allowGrouping","allowSearch","getSearchFormData","idSearchForm","processDataValues","o","submitData","resolveData","contexttype","transitions","surrogatekey","forcePlanCompletion","actionType","debug","beforeSend","xhr","renderingService","newName","getPropertyData","extra","sessionId","guidentity","pxpath","prows","ppage","pfilter","psort","porder","pcaseId","pguidEntity","psurrogatedKey","pactionXpath","ptemplateGuid","pparameters","multiactionConnection","getSearchData","getCollapseData","getGridData","order","searchFilter","getGridDataExclusivesSelected","xpathfilter","getUploadCancelImage","pathToBase","getUploadFileUrl","fileId","verifyPathToBase","getXSRFToken","fileUrl","processData","binary_file","readFileAsJSON","getResponseHeader","media","byteArrayToBlob","binary","getUploadFileEntityUrl","isContextContainerWidgetRender","xpathActions","getUploadAddUrl","getUploadAddFileUrl","isUserPreferences","deleteImage","deleteUploadFile","getECMMetadata","idFileUpload","xPath","idAttrib","interceptor","intercept","source","checkOutFile","cancelCheckOut","deleteECMFile","updateECMFileContent","metaValues","updateECMMetadata","getFileProperties","getFile","getAllDocuments","getUploadFileEntity","uploadECMFile","fileUpload","getECMFileUrl","p_sessionId","isFileOnECM","idUpload","read","editGridRecord","addGridRecord","addGridRecordData","saveGridRecord","disableServerGridValidations","deleteGridRecord","getFlipAssociation","flipstate","parseJSON","rollbackGridAction","getSearchDefaultImage","processDataCriteria","criteria","submitSearch","allowFullSearch","maxRecords","associateStakeholder","associatedUser","refreshAssociateStakeholder","getLetterNotEditableUrl","getLetterContent","getCanGenerateLetter","saveLetterContent","fullUrl","getLetterEditorIconsPath","executeButton","getFilePrint","disposition","editLinkForm","saveLinkForm","rollbackLinkForm","commitLinkForm","commitGridAction","sendCheckpoint","sendCheckpointAction","getUserfieldDefinition","userfield","guidUserfield","refreshControl","refreshGridCell","typeRender","executeRule","executeInterface","executeSAPConnector","guidsap","executeConnector","guidConnector","executePipeline","pipeline","generateDocumentTemplate","h_pageCacheId","contextXpath","xpathcontext","groupMappingId","groupMapping","xpathAttribute","controlId","getAllDocumentsDownloadUrl","getCaseNumber","getCaseAssignees","getWorkitems","onlyUserWorkItems","getGridExportFile","exportType","sendEmail","subject","selected","invalidatePageCache","getUsersList","getUsersListFromQueryForm","getUsersListFromPreferences","getUsersListForXpathIdBossUser","getUsersListForXpathIdDelegate","getUsersListForStakeholders","getUsersForAssignation","getUsersForm","generateDataToSendByEmail","sendUserEmail","eMailTo","getConfiguration","getTemplate","forcePersonalizedColumns","templateType","templateGuid","isDefaultTemplate","hasStartForm","guidWFClass","getStartForm","guidprocess","surrogatedKey","mappingstakeholders","cache","editActionForm","getActions","extendParams","ptags","pmaxitems","executeActions","pguidConstructor","pguidAction","getPolymorphicActions","serializePolymorphicActions","getParents","fillTree","getChildren","child","displayName","hasConstructor","guidObject","guidConstructor","getEntityImage64","entity","getFilesDataForLayoutUploadControl","processUploadFile","verifyMobilePathToBase","formData","limit","batch","batchTimer","maxNumberOfActions","deferredBatchExecuting","disabledRequests","replicateServiceMethods","getService","proxyMethod","originalPrepare","makeCircularDependenciesError","h_action","detectCircularDependencies","batchTimeout","tag","singleAction","resolveDependencies","rejectDeferreds","responses","finalResponse","disableRequests","validateIfBatchIsExecuting","THROW_ERROR","buildConditions","conditions","bGridDetected","bCheckEditability","innerDependencies","operator","expressions","buildConditionOperator","sJsCondition","expression","simple","bGDetected","searchGridReferenceInCondition","buildSimpleCondition","complex","conditionsOperator","condition","sXpath","sArgument","ensureValueJs","ensureEditable","renderId","containerId","gridXpathInfo","processGridXpath","gridXpath","remainingXpath","detectedArgumentType","detectConditionArgumentType","argumentType","buildXpath","boolean","argument","buildArgument","enableActionIsChangedSupport","getRender","getRenderById","getColumn","renderType","isRelatedEntityRender","searchGridReferenceInXpath","isEditable","showRenderNotFoundError","isVisible","visible","isParentVisible","evalGridXpath","evalXpath","gridColumn","cellValue","getCellCurrentValue","display","renderToEval","renders","getRenders","rendersToEval","bIsGrid","getColumnDateCorrectFunction","mapValue","isFileUploaded","isValidEmail","isButtonPressed","pressed","isGridButtonPressed","arrGridXpath","isChanged","_isChanged","isControlChanged","changed","controlChanged","isGridColumnChanged","gridToEval","xpathColumn","columnChanged","columnToEval","onDeletedGridRow","rowDeleted","idMatches","showContainerNotFoundError","getCurrentDate","includeTime","invariantDate","matches","searchForGridReference","commands","command","searchForGridReferenceInCommand","bGridReferenceFound","getGridControl","getControlCell","getColumnDateValueDateAndTime","getColumnDateValueOnlyDate","getColumnDateValueForNoValue","controller","validations","enableDebug","initializeValidations","validationBox","bizagi_notifications","expand","triggerGlobalHandler","itemIcon","minimized","clearEnabled","onNotificationClick","buildValidations","fnValidations","buildAllValidations","showErrorMessage","showValidationMessage","showAlertMessage","showInfoMessage","itemAdditionalClass","performValidationFn","clearValidationMessages","lastActionButton","getLastActionButton","validating","performValidations","countValidationMessages","hideValidationMessages","setValidationMessage","retype","showValidationMessages","expandNotificationBox","autofocus","isExpandedNotificationBox","invalidElements","bRendersValid","validateRenders","bFormValid","triggerHandler","sJSCode","buildValidation","validationCommand","logError","sStatement","evalValidation","sJsValidation","gridReference","validateEditability","validateEditabilityOnValidations","tokens","sGridStatement","bValid","showValidationMessageById","globalDependencies","initialCallFunctions","initialCallFunctionsDeferred","buildActions","internalSubmitActions","initialCallTimeout","initialCallIncrements","actionsHistory","period","processInternalSubmitAction","buildAction","isSummaryOrGlobalForm","typeForm","evalClientAction","serverCommand","elseCommands","isClientAction","dontExecute","hashes","executeOnlyClientActions","hashC","unbindActions","handle","refreshActions","newActions","_","dependencies","dependenciesId","buildFunction","renderById","inArray","addDependency","gridColumns","searchGridColumns","asyncFn","sJsAction","sJsElseAction","bAutomaticRestore","bCondition","queueAction","isServerCommand","buildCommand","buildRestoreCommand","elseCommand","commandType","isRecentAction","runAction","timeOutActionsHistory","detectCommandArgumentType","commandGridDetected","ruleObj","guidRule","xpathContextRow","interfaceObj","guidInterface","connectorObj","pipelineObj","guidPipeline","restoreRender","originalProperties","textFormat","changeRenderBackground","changeRenderForeground","color","changeRenderVisibility","changeRenderEditability","changeRenderRequired","required","restoreContainer","getContainer","changeContainerBackground","backgroundColor","changeContainerVisibility","toogleContainer","changeContainerEditability","isValidRender","newVisualChange","getVisualChange","isGridComponent","lenIndex","indexes","getIndexes","changeCellBackgroundColor","logVisualChange","changeBackgroundColor","changeButtonBackground","getButton","changeCellColor","changeColor","changeButtonForeground","changeColumnVisibility","changeCellVisibility","renderingDeferred","changeVisibility","changeButtonVisibility","changeFormButtonVisibility","changeColumnEditability","changeCellEditability","changeEditability","changeButtonEditability","removeAttr","triggerClick","changeColumnRequired","changeCellRequired","changeRequired","changeRenderValue","fromAction","asyncRenderDeferred","setDisplayValue","changeRenderMinValue","changeCellMinValue","changeMinValue","changeRenderMaxValue","changeCellMaxValue","changeMaxValue","executeCalculatedField","runFormula","refreshContainer","internalQueue","refreshCell","submitFormData","interfaceObject","interface","submitRender","submitOnChange","cleanRenderData","promises","gridPromises","cleanCellData","cleanData","visualChanges","changeActiveItem","setAsActiveContainer","findIndex","getNavigation","isFloatingButtonsEnabled","changeFloatingButtonVisibility","ELEMENT_TYPE_CONTAINER","ELEMENT_TYPE_RENDER","ELEMENT_TYPE_COLUMN","renderFactory","dataService","resources","observableElement","disposed","initializeData","subscribers","getXpathContext","getPageCache","getXpath","getElementType","resize","size","effect","eventType","one","getRenderedElement","getMode","getFormType","isReadyToSave","getCustomHandlers","timeOutDispose","disposeTime","isDisposed","validationController","beforeToRefresh","afterToRefresh","getResourceByKey","fallback","restoreAppearance","getOrientation","rendering","TYPE_QUERY_FORM","uniqueId","childrenHash","elements","createRenderElement","createContainerElement","createFormElement","originalElement","processDuplicateRender","registerRender","getElement","getElementsByType","clonedElement","isClone","cloneRender","internalRender","applyContainerDefaults","renderContainerHtml","postRenderContainer","renderContainer","isRendered","replaceTag","replaceChildrenTag","replaceChildrenHtml","executeChildrenPostRender","configureHandlers","applyPlaceHolderPolyfill","configureDesignView","configureLayoutView","config","placeHolderConfig","forceApply","Placeholders","enable","childrenElements","childElement","postRenderElement","renderChildrenHtml","renderElement","collectRenderValues","renderValues","canBeSent","collectData","hasChanged","collectRenderValuesQueryForm","canBeSentQueryForm","collectDataQueryForm","getRendersByXpath","hasValidGrids","childrenPromises","getFocus","getCustomHandler","customHandlers","timeOutChildrenDispose","saveChildrenVisualChanges","unregisterChildren","removeActions","currentContainer","triggerChildrenActions","restoreChildrenVisualChanges","restoreAppearanceAfterRefresh","restoreContainerAppearance","always","refreshDesignContainer","triggerRenderChange","registerActions","actionController","unregisterRender","getChildById","restoreElementAppearance","childrenVisualChanges","postRenderTimeout","maxRendersPerScreen","rendersExecuted","renderOptimization","startOptimization","stopOptimization","included","includedInResult","maxLength","valueFormat","isHidden","editabilityEnabled","labelAlign","valueAlign","previousValue","calculateInitialLayoutProperties","displayType","getDefaultLabelAlign","getDefaultValueAlign","getRTLAlign","renderWidth","calculateRenderWidth","labelWidth","valueWidth","layoutType","renderTemplateName","renderTemplate","isFullRender","isExtendedText","isExtended","displayOptionClass","getDisplayOptionClass","labelAlignClass","getAlignClass","valueAlignClass","flexAlignClass","stringLabelWidth","stringValueWidth","printVersion","showFullRender","internalRenderControl","replaceControlHtml","renderControl","renderReadOnly","configureSubmitOnChange","isLabelFormat","executePostRender","_element","timeOutRender","internalPostRender","getControl","emptyControlByAsyncRenderDeferred","processLayout","postRenderPrintVersion","postRenderReadOnly","performExecutionModeMethods","performDesignModeMethods","configureHandlersQueryForm","configureHandlersReadOnly","internalSetInitialValue","internalSetInitialValueFlag","hasValue","isQueryForm","filter","messageData","isQuery","columnEditable","bold","changeFontBold","italic","changeFontItalic","underline","changeFontUnderline","strikethru","changeFontStrikethru","changeFontSize","setValue","triggerEvents","checkRequired","changeRequiredLabel","triggerRenderValidate","validateInputRetype","enableCheck","displayValue","getDisplayValue","getLabel","getControlFiller","validationMessage","readOnlyValue","changeDisplayOption","changeLabelAlign","alignType","changeValueAlign","customizeRenderWidth","getElementsToStylize","originalColor","currentStyle","getFormattingLabel","baseValue","defaultValue","isStartForm","compareValueObj","_findAction","targetObj","guidAction","objectValue","valuestrikethru","valueunderline","newFontSize","emptyControlByChangeEditability","changeEditabilityCellControl","renderColumn","decorated","getDecorated","internalRenderCellControl","readyDeferred","onCellChange","labelElement","controlElement","saveGridChildrenVisualChanges","controlFiller","currentElement","restoreGridChildrenVisualChanges","restoreGridAppearance","refreshDesignControl","clearDisplayValue","updateOriginalValue","getRenderId","queryValue","searchType","typeSearch","rangeQuery","newParameter","orderType","displayXpath","force","displayOnly","defaultControl","innerControl","timeOutEffect","submitOnChangexpathContext","addSubmitAction","bRefreshForm","notCollect","internalSubmitOnChange","getCacheIdCase","idCaseObject","getIdCase","getIdWorkitem","getidTask","getSessionId","backgroundImage","needBGPaint","background-color","background-image","startActionExecution","actionExecutionDeferred","endActionExecution","readyActionExecution","isFromCreatedRow","submitInvalidatePageCacheRequest","pageCacheToInvalidate","isDesignMode","isExecutionMode","preventDefaultForAnchorTag","getMainForm","currentForm","fromRender","setInterceptionObserver","pluginInitialized","disconnect","setResizeObserver","resizeObserver","ResizeObserver","decorateRenders","restoreCellAppearance","gridChildrenVisualChanges","formatValue","processLabelLayout","processControlLayout","warm","$label","changeFontColor","changeTextDecoration","$control","$elements","textDecoration","getCellBackgroundFunction","true","columnDate","changeInputBackgroundColor","false","configureHelpText","containerHelp","getContainerHelpText","getRTLDisplayType","containerHelpText","bFirstElement","prev","renderedElement","toggleClass","getFormParams","ele","rendersById","rendersByXpath","rendersByXpathId","rendersByType","pageCacheId","displayAsReadOnly","userConfirmationMessage","hasRule","paramsRender","processPath","breadCrumb","allowValidateAndSaveAction","enableActionValidateAndSave","enableExecuteQuickActions","allowExecuteQuickActions","useQuickActions","hasQuickActions","initializeButtons","originalProcessButton","processButton","isRoutingDisabled","applicationParent","isOfflineFormsV2Supported","caption","ordinal","nextWithoutValidations","back","createnewcase","save","quickAction","routing","buildButtonStyle","setParam","xpathId","listRendesByType","getRenderByType","listRendesByTypeLength","renderKey","listRender","getGridByColumn","grids","columnsIds","helptext","queryForm","globalForm","allowQuickActions","complexGatewayContainer","activeTransitions","processButtons","mainForm","$canvas","getValidationsContainer","validation","checkboxLabel","transitionId","strStyle","getContextType","getEndPointAction","formtype","getButtons","stopImmediatePropagation","buttonProperties","btn","routingDisabled","propagateExternalEvents","timeOutButton","processDefer","contains","preProcessButton","postProcessButton","setLoaderDeferred","loaderDeferred","deleteLoaderDeferred","isLoaderDeferredSet","useOrSetLoaderDeferred","getLoaderPromise","appendWaitForLoader","getResolveOrReject","getAllTabs","getAllTabsLength","innerTabsLoading","confirmationStatus","getConfirmationStatus","hasConfirmation","showConfirmationBox","customHandler","validateForm","saveForm","allowOnlineActions","collectRenderValuesForSubmit","deferredsToWait","deferreds","saveParams","offlineType","removeCaseSyncError","removeSyncErrorOnSubmit","removeStartCaseSyncError","removeTaskCaseSyncError","internalSubmitFormOffline","internalSubmitForm","checkWidgetsData","isComplexGatewayPainted","executeButtonAction","loading","showMessageBox","waitingDeferreds","isSaveForDraft","online","syncDeferred","syncParams","offlineAction","buttonPropertiesAction","radNumber","showToastOnSuccessSync","showMobileToast","IdCase","caseNumber","CaseNumber","isOfflineRefreshWithEdition","shouldRefresh","refreshForm","bHasValidations","alertMessage","propertiesToDisplayMessages","validationToDisplayMessages","messages","failHandler","partialSubmitFormOffline","animate","submitDataAction","performAction","checkpointAction","commitAction","prepareCheckpointAction","prepareCommitAction","getButtonAction","flowControlDeferred","sendRollbackAction","jqxhrList","abortAll","res2","messageType","addValidationMessage","addErrorMessage","selectedTabs","getSelectedTabs","selectedSection","getSelectedSection","isEdited","tabContainers","tabs","tabContainer","tab","waitingTemplate","waitingOverlay","waitingMessage","tmpl","isSharePoint","getSize","getOffset","min-height","min-width","getFocusedElement","setFocusedElement","errorJson","setSize","executeSubmitData","isRefreshingAfterSync","clearOnlyServer","tryToExecuteFunction","cancelPreviousRequest","focusIdentifier","IdScope","objMessage","strMessage","abort","buttonId","checkpointUrl","commitUrl","rollbackUrl","timeOutController","getFloatingButton","configureNetworkHandlers","handleConnectionChange","handleOfflineSyncEvent","hasSyncError","offlineFormId","paramsId","database","validateLocalDataForTaskExists","dataResult","applySyncLoader","tasks","isStart","isSyncLoaderRunning","loaderIndex","processQuickButton","isEnable","some","formProperties","hasButtonsConfirmation","needsUserConfirmation","buttonConfirmationMsg","hasFormConfirmation","formConfirmationMsg","saveWorkInProgress","formType","contextEvent","processTemplate","processedTemplate","g1","g2","layoutCollection","getCss","layoutguid","getContextEvent","withAddForm","withEditForm","allowDetail","inlineEdit","getKeys","inlineAddRecords","showPreview","drawControls","drawActions","drawControl","drawForms","drawPreview","templateItem","hasData","getTotalRows","getRow","getNextRow","getPreviousRow","getFirstRow","getLastRow","setPointer","isTherePendingInlineRow","addKey","newId","removeKey","navigationform","getParameters","submitAddRequest","addUrl","submitEditRequest","editUrl","submitDeleteRequest","deleteUrl","submitSaveRequest","saveUrl","dataFail","submitRollbackRequest","getRemoteData","dataUrl","validateControls","expandedIcon","getExpandedIcon","collapsedIcon","getCollapsedIcon","expandedClassIcon","bImmediate","displayAs","sectionContent","renderSectionContent","getBreadcrumb","unshift","getParentDisplayName","getSectionParent","originalParams","getSectionOrientationRTL","panel","renderResult","performSearch","searchParams","refreshResults","collectSearchValues","maxRows","deviceMaxRecordsExceeded","onSearchFinished","errorObject","submitArray","getCriteriaOperation","criteriaData","parseAdditionalProperties","tabItems","counter","tabOrientation","getActiveTab","loadOnDemand","containsFocusedElement","setActiveTab","selectedTab","renderTabContent","deferredActions","engine","templateEngine","autoGenerateData","selecttemplate","processPropertyValueArgs","tagslist","maxItems","processPropertyValueDataTmplArgs","defaultAllowActions","allowactions","isHorizontal","templatetype","executeActionImmediately","processPropertyValueExecuteAction","notifyExecution","actionName","readOnly","templateDefined","actionManager","guidProcess","processStartForm","processActionFormCollection","processActionForm","addActionToQueue","actionsList","additionalXpath","idParentWorkitem","entityXpath","newValueActionsList","removeActionToQueue","controlValue","countSameActions","getPropertiesActionLaucher","actionsLaucher","getTagList","processPropertyValueExecuteConstructor","displayNamee","taglist","hasLocalData","enableTyping","complementData","isDependant","getParentCombo","valueControl","renderCombo","renderComboTemplate","dataPromise","getTemplateName","emptyValue","emptyLabelForCombo","getTemplateParams","unique","showEmpty","showCurrentData","getDummyData","remoteDataLoaded","recalculate","allowActions","msgObj","auxMsg","combo","getSelectedValue","currentValue","parseAdditionalValues","newItem","bCurrentDataFound","emptyFound","dataValue","comboData","isExtraItem","escapeValue","validateValue","translated","findDataValueById","showLetters","randomId","getDefaultAllowDecimals","numDecimals","setGroupDigits","colorizeOnNegative","dataTypeMinValue","calculateMinValue","dataTypeMaxValue","calculateMaxValue","numericInput","attachRetypeDouble","attachFormatCurrency","removeValidations","formatNumericInput","$input","digitGroupSeparator","minValue","getMinValue","maxValue","getMaxValue","inputValue","inputLength","oldVal","isInvalidFormat","tempValue","messageToShow","isValidRenderMessage","executeFormatCurrencyPlugin","tmpData","clipboardData","originalEvent","totalVal","keydown","keyUnicode","formatTimeout","floatPart","currentPosition","keyup","character","regExp","validMessage","getDefaultGroupDigits","performMinValue","newValue","performMaxValue","createTooltip","currentTitle","toolTipZindex","timeOutFocus","ud","datePickerRegional","getDateFormat","indexDateTimeSeparation","lastIndexOf","datePickerFormat","timePickerFormat","uppercaseDatePlaceholder","intHandler","isNow","dateControl","getDateControl","timeControl","getTimeControl","onChangeHandler","updatingTime","getNormalizeDate","getTimeFormat","setValueFromCalendarButtons","hasMaxLines","maxLines","regularExpressionExpression","regularExpressionMessage","regularExpression","isEmptyField","textarea","validationMessages","areThereEditableColumns","areThereTotalizedColumns","initProperties","enabledChecks","exclusiveChanges","originalEnabledChecks","isExclusive","columnRender","singleInstance","totalize","reverse","rowsPerPage","initEditabilityProperties","initAddAndDeleteProperties","keyColumn","skipInitialLoad","allowFilter","groupSummary","groupText","groupCollapsed","groupOrder","formShowMode","addLabel","editLabel","deleteLabel","exportOptionsLabel","detailLabel","alreadySaved","overrideGetRemoteData","cellOverrides","changeOrderData","rowKey","reverseDataRows","removeRemainingColumns","numColumns","remainingColumns","getGridTemplate","applyTemplate","columnInitializers","initialize","spliceRowData","spliceIndex","spliceRowDataVisible","spliceRowDataEditable","rowTemplate","buildCellXpathFilter","dataResp","collectGridChange","isPressed","configureColumnSubmitOnChange","keysToDelete","columnExclusiveChanges","columnEnabledChecks","columnXpath","canColumnBeSent","checkedObject","cellOverride","getCellOverride","getCellValue","setError","changeCellProperties","saveGrid","tmpEditable","changeColumnsEditability","saveInlineAddedRows","saveRows","getDepthData","updateAffectedCellManually","canBeExported","hasErrors","getDataNewRows","merge","uniqueMessages","isValueValid","messagesLength","gridValidationMessage","columnVisible","setCellOverrides","len_v","newRecords","submitForGridChange","timeOutColumn","getEnabledChecks","cleanNewRecords","setRowAsSaved","hasColorHeader","headerFormat","isRTLOrientation","canBeExport","getExclusiveChangeByRow","idRow","isCurrentGridCell","columnId","getIndexForCurrentCell","allowDinamiclabel","bindingValue","performLabelLineBreak","advancedSearch","submitVersion","searchForms","allowSuggest","allowTyping","allowClear","searchLength","enableLocalStorage","expireCache","h_contexttype","enableQuerySuggestBehavior","regexC","hideStatus","selectedValue","showDesignValidations","getFormattedValue","getDesignModeValue","submitOnChangexpathContextRow","runButtonAction","error_obj","filesCount","checkListGroup","vertical","templateUri","useDefaultImage","getImage64","getImageUri","replaceMultiple","allowSendInMail","getValueFilesByData","dataFiles","valueAuxFiles","getDataFilesWithoutScope","valueResult","files","getUploadXpath","indexHour","dateObj","formattedDateTime","showsymbol","currencySymbol","geolocation","allowUpdate","getCurrentPosition","succes_callback","fail_callback","getErrorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","performPrecision","latitude","longitude","toPrecision","allowFlip","flipped","leftData","rightData","processPropertyValue","flip","makeJsonBase","getColumnData","getRightAssociation","formatJson","associationData","leftId","association","isChecked","idRight","checked","removeElement","rightId","removeValue","addElement","leftXpath","rightXpath","leftFactName","rightFactName","maxFileSizeOfProperty","maxSize","maxFileSizeOfUser","BIZAGI_SETTINGS","UploadMaxFileSize","maxfiles","validExtensions","singleExtensions","defExtensions","haveFiles","noFiles","renderUploadItem","replaceFilesHtml","itemTemplate","getTemplateItemName","buildItemUrl","filename","deleteUploadItem","fileItem","buildAddParams","BIZAGI_SESSION_NAME","getUploadXpathContext","setRenderRequired","validateObjectStructure","uploadId","validateArrayStructure","isFormatValid","maxFiles","q_xpath","showMetadata","listControl","fileProperties","getFileExtension","isImage","lengthValues","renderFileLayout","productBuildToAbout","replaceItemHtml","metadataTemplate","metaData","ecm_ecmStatus","ecmStatus","ecm_isVisible","ecm_allowUpdateMetadata","allowUpdateMetadata","ecm_allowDelete","ecm_allowUpdateContent","allowUpdateContent","ecm_allowView","allowView","ecm_allowCheckOut","allowCheckOut","ecm_allowCancelCheckOut","allowCancelCheckOut","ecm_allowEdit","idFileUploads","extension","lockUploadItem","unlockUploadItem","letterOpened","getContextXpath","maximized","likeButton","getFormLinkXpath","executeSubmitOnChange","saveFormLinkData","submitCommitRequest","submitCheckpointRequest","submitDataRequest","downloadalldocuments","allowGenerate","preRenderControl","downloadAllDocuments","documents","getControlHtml","renderDocumentsHtml","renderActionsHtml","noActivateButton","allowgenerate","activateButton","getDocumentXpath","renderDocumentItem","getTemplateItem","joined","buildAllDocumentsUrl","caseId","workitemId","htmlControl","updateControlForPrintMode","validateContainer","replaceActionsHtml","buttonExecuted","$generateLink","isPropagationStopped","documentTemplateGenerate","attachEvents","downloadAllFiles","deleteDocumentTemplate","resolveDeleteDocumentTemplate","resolveDocumentTemplateGenerate","messageText","autoOpenDocuments","showDocumentPreview","returnCssTypeFile","lenght","redrawDocuments","documentContainer","renderAllDocumentDownload","removeDeleteButton","startIndex","restOfWord","finishIndex","downloadAllDocumentsLink","getErrorTemplate","getTemplateDownload","getTemplateReadonly","getDocumentFile","getAllDocumentFiles","dependants","parentCombo","initializingCascadingCombo","bindDependantCombo","isInitialValue","deferredVisible","parentValue","dependantCombo","onChangeFunction","refreshDependantCombo","focusDependant","cleanInput","isEventBinded","unbindDependantCombo","dependant","inputCombo","parentLength","parentArray","configured","itemSelected","listSize","normalizeData","getDataValue","idToRemove","markAsChecked","found","canAddMoreItems","$tagsContainer","toArray","acc","getElementWidth","MORE_OPTION_WIDTH","styles","filterList","query","$container","stringContainer","stringToSearch","addSelectedElements","findItemById","hasSearchForm","removeLastElement","getListItems","getFileDependencies","fileDependencies","renderUserfieldControl","extendedData","userEditableControl","getEditableControl","renderComplex","loadUserfieldReadOnly","userReadOnlyControl","getReadonlyControl","getReadonlyValue","setEditableValue","getEditableValue","propertyName","jqXHR","textStatus","errorThrown","getRenderElements","getServerResourceURL","userfieldGuid","getRenderValue","showDialog","initialParams","userfieldName","startUserfieldLoading","endUserfieldLoading","getUserfieldControl","isColumn","getControlXpathContext","getUserFieldInstance","replicateUserfieldMethods","timeOutUserField","userfieldInstance","BASE_IMAGE","isUserPreference","initializeWidthAndHeight","isAutoWidth","isAutoHeight","binaryValue","isValidField","compatibilityVersion","isVersion2OrSuperior","idUser","forceBase64","base64","buildItemUrlOffline","loadImageFromForm","buildOfflineImageId","getOfflineImage","db","AttachmentType","saveImageOffline","getFileService","resolveBlobFromPath","blobImage","operationType","saveOfflineImage","buildFullItemUrl","fileService","decoratedClass","showColumn","readonly","isReadonly","instanceDecoratedClass","applyOverrides","propertyOverrides","invalidElement","overrideDecoratedRenderProperties","renderSummary","setSurrogateKey","setDefaultValue","getCompositeValue","overrideProperties","getSortName","getAnyDecoratedInstance","getSortColumn","timeOutDecorated","originalGetData","getDataForAllCells","findDataById","fetchingData","valueForGrid","tableCell","formattedDate","compositeValue","setRanageControls","minControl","maxControl","$maxCanvas","$minCanvas","renderRangeControl","defineRangeControl","dateMin","suscribe","observer","notify","dateMax","getRenderProperties","typeRangeControl","renderProperties","moneyMin","moneyMax","numberMin","numberMax","slideFormParams","slideContainer","createRenderContainer","configureViewHandlers","goBack","renderSlideForm","formClass","onSave","containerParams","view_container","delegate","errorTemplate","getCommonTemplate","error_message","kendoTmpls","slideFormDeferred","allowGetOriginalFormValues","formValues","showSaveButton","slideForm","buttonContainer","refreshParams","_renderButtons","transformData","allowEdition","transformActions","transformValidations","mapRenderType","additionallabel","gridActions","bDependencyFound","newAction","transformConditions","transformCommands","gridValidations","newValidation","refreshIndex","dfd","slideOptions","renderUploadFile","virtualForm","slideParams","slideDeferred","extraButtons","renderSearchDialog","getSearchContainerData","currentSearchForm","renderAddForm","allowNew","searchResultContainer","searchFormParams","slideBoxDeferred","handleSearchFormZindex","containerSearchCriteria","addContainer","addFormParams","indicator","saveDataAddForm","currentAddForm","dataHasXpath","mapping","setDisplayValueToControl","renderControlSearchForm","addForm","searchFormToLoad","otherElements","searchForm","isDefault","searchFormData","modalViewDisplayed","saveButtonLabel","warnings","configureMediaQueryHandlers","modalViewDidAppear","modalViewDidDisappear","mediaquery","matchMedia","handleOrientationChange","addListener","warningContainer","errorContainer","ekey","autoSaveEvents","newData","saveBox","hasChanges","showSaveBox","nonSupportedMethods","validateFeatureSupport","getPane","pane","handler","saveButton","nextButton","getViewContainer","postRenderEdit","formsRenderVersion","popupResponse","getResponseValues","getResponseValuesParams","dontClose","repaintComplexGateway","isComplex","workItems","taskType","currentPopup","BIZAGI_WORKPORTAL_WIDGET_COMPLEXGATEWAY","sourceElement","insertAfter","activeScroll","closed","addWarning","addError","notifier","class_name","sticky","kendoTmpl","VISIBLE_TABS","suscribeMethods","checkPlusVisibility","tabItem","tabReadyDeferred","tabActiveDeferred","headerShow","headerHide","accordion","accordionItem","group","expanded","subscribeOnTouch","isOpen","resultsGrid","searchCriteria","results","criteriaContainer","resultsContainer","polymorphicLauncher","configureQueueVisibility","totalActions","lessActions","templateArguments","treeActionsList","getTreeItems","bindHandlers","level","templateTreeItem","$targetData","onActionClicked","expr","FilterAction","act","executeAction","slide","cancelButtonLabel","pageCache","savedData","editMode","startForm","showConfirmationDialog","actionsToExecuteContainer","removeActionSelector","openActionSelector","$target","actionsToExecuteTitle","actionLauncher","templateData","wrap","actionsContainer","configureTemplateHandlers","multipleSelection","plusBtn","showActions","subscribe","calculateFilters","rewriteContextType","xpathContextWithKey","xpathContextWithoutKey","IdEntity","listOfActions","getMappingAction","extraParams","dataAction","htmlTemplate","extendedText","rowSize","stopAutoAdjustInterval","autoAdjustInterval","autoExtend","autoAdjustExtendedFrame","resolvedValue","hiddenDiv","retypeDouble","numberScientificNotation","inputDisplay","numericIcon","attachFormatSientificNotation","scientificNotationNumber","scientificNotationNumberDisplay","DEFAULT_PROPERTIES","maxYearsToDisplay","initializeDateControl","isValidMinMaxValue","inputControl","controlElements","defaultDateControl","getFormattedDate","minDateControl","maxDateControl","setFullYear","mobiscroll","calendar","lang","BIZAGI_LANGUAGE","inst","timeS","onSet","getVal","is24h","onBeforeShow","onShow","disableScroll","initializer","currentTime","fullDateFormated","setHour","getFullFormatedDate","preprocessDateValue","isClearButton","formatedFullDate","setNewDateValue","fullDate","dateFromFormat","applyDateFormat","initIndexTime","endIndexTime","validateMinAndMaxValue","showMandatoryMessage","isMinValue","vValue","resultValue","formatedDate","yesno","parsedValue","check","initializeCombo","showDisplayValue","parentComboValue","initialValueSet","configureCombo","inputSpan","processComboData","modalViewTemplate","modalView","kendoMobileModalView","useNativeScrolling","configureModalViewHandlers","inputContainer","closeModalViewPromise","setModalViewDisplayValue","selectedElements","_newSelectedElement","$li","actionSave","inputEdition","valueItem","valueObjet","changeCombo","comboValue","getTemplateEditionName","upload","QUALITY_PICTURE","LIMIT","EXTENSIONSIMG","EXTENSIONSFILE","EXTENSIONSVIDEO","EXTENSIONSAUDIO","allow_upload","checkExtensions","validOptions","video","nonSupportedExtension","fileAPISupported","activateUploadNative","activeUploadWebControl","addEventToOpenSlide","executeFormFailHandler","itemAddfile","checkMaxFiles","attachDeleteHandler","uploadTemplate","kendoTemplate","$modalView","ModalView","listOptions","applyPlugin","getBoundingClientRect","coordinates","resolutionUpload","getImageResolutionItems","actionSheet","actionClicked","resolutionButtonHandler","appear","cancelClicked","popover","CameraPopoverOptions","quality","sourceType","Camera","PictureSourceType","PHOTOLIBRARY","popoverOptions","camera","getPicture","extensions","closeModalView","checkMaxSize","getFileDataInfo","checkFileTypes","saveImage","modalResolutionUpload","buttonIndex","onFail","targetWidth","targetHeight","correctOrientation","capture","captureVideo","checkMaxSizeVideo","saveVideo","actionSelected","ResolutionType","ORIGINAL","getImageResolution","transformImageSize","editedImageURL","localUrl","base64Image","errorResponse","isNativeContext","getTemplateEditionMenu","addParams","dataFile","queueID","FileUploadOptions","fileKey","mimeType","uploadKey","getImagePath","uploadFile","onUploadFileCompleted","dataVideo","fullPath","messageError","uploadWrapper","actualFiles","nonSupportedExtensionsArr","uploadfile","itIsMaxNumberFilesReached","checkMaxSizeFile","buildAddFileParams","FormData","atachOpenFileEvent","dataIndex","fileData","fileMimeType","openOfflineFile","getDataUri","fileExtension","uniqueID","onUploadFileCompletedOffline","XMLHttpRequest","responseType","send","resolveLocalFileSystemURL","fileEntry","failReadFile","objectUpload","dataimage","dataUrltoSave","dataMimeType","fileToSave","DataType","objectUri","objectVideo","fileIndex","GRID_PAGE_SIZE","cellMetadata","getRowIndexByKey","initialLoadDone","isPaginatorActive","applyGridPlugin","updateData","pendingActions","buildColumnModel","columnsTotalizers","bizagi_grid_tablet","hasTotalizer","pageRequested","fetchData","sortRequested","cellReady","rowSelected","addRow","editRow","deleteRow","moreRows","showMore","onTotalData","columnModel","columnLabel","dataReady","dataReadyDeferred","loadChanges","idRowLength","columnNumber","alternativePaginator","pageSelected","pageLeftPosition","pagerContentWidth","lastLiElementPosition","pagerMarginAnimate","margin-left","newKeys","saveDeferred","originalEditable","newid","slideView","view","addPage","cleanActionChanges","executeSubmitEditRequest","editInline","editPage","originalrowsPerPage","dataToSend","moreRowsCommon","currentRow","sel","parentPromise","inlineAddPromise","inlineAddDeferred","rowLength","showTotal","columnsModel","operationState","sum","return_value","avg","formatTotalizedResult","showTotals","MAX_ROWS_SUPPORTED","originalRows","isTaskForm","createdOffline","isValidGrid","saveAddedRows","beforeInlineAdd","afterInlineAdd","cancelEdition","removeNewRecords","processChanges","rowsList","sortArray","processRow","collectOfflineTaskData","internalRedersValues","currentChanges","addRowData","isNew","processOldRows","collectChangesWithoutDeleting","collectOfflineStartData","tempRows","col","leng","drawEditableCell","drawReadonlyCell","originalFormat","_value","bRefresh","statusAction","delInfo","errorsMessage","ADVANCED_SEARCH_ID","ADVANCED_ADDITION_ID","SEARCH_MIN_LENGTH","SEARCH_DELAY","MAX_ITEMS","MAX_ITEMS_OFFLINE","searchInput","_simplySuggestOffline","_advanceSearch","_simplySearch","hasMozillaHelpText","applyAutocompletePlugin","showSlideSearch","autoCompleteSearchResults","elemObject","itemautocomplete","processRequest","resp","wrapper","elementUl","searchItem","renderSearchItem","req","suggestions","addToSuggestions","alSuggestions","dataOffline","itemsAttached","current","parseValue","autocomplete","showAddRecordDialog","letter","fileprint","isValidValue","encodeURI","getFullyDecodedURI","itemId","onCheckListGroupChange","addButton","newItemName","goalActivity","addEditButton","cancelEditButton","additionalElements","notifyLoadItems","resolvedItems","idActivity","itemsResolved","activityWork","activityFormTitle","activityDescription","prepareNewItem","contentHolder","deleteItem","itemPosition","selectItem","repaintControl","itemSelectedName","itemContent","addSelectedHandlers","addItem","guidItem","checkListHtml","refreshValue","layoutImage","success","urlCreator","webkitURL","imageUrl","idcase","idworkitem","contextxpath","layoutLink","getContainerRender","proxy","onClickElement","navigateFromRender","reference","referenceType","layoutLabel","layoutText","layoutDateTime","layoutNumber","layoutMoney","layoutUpload","getHTMLFiles","formLink","hasentryrule","openLinkRule","openLink","paintFormLink","rollbackForm","dataRuleResp","ex","noAction","hasexitrule","closeExitRule","getFormLinkXpathContext","parentXpathContext","outerHTML","radio","selectedRadio","siblings","comboItem","cascadingCombo","onComboChange","renderEdition","configureListHandlers","modalViewList","multiSelect","base","temporalElements","openModalView","onUnselectElement","onShowSelectedElements","valuesToShow","$listView","showFloatListView","datasource","$tagElements","modalListHandlers","$listContainer","addNewValuesToInput","tempArray","totalValues","elementTemplate","$ChildToAdd","viewMoreTemplate","$viewMore","$floatListContext","checkbox","addTemporalElement","closeFloatView","elementToRemove","$containerControl","$floatList","widthControl","my","at","of","collision","columnData","dataAssociation","addEventControl","showDefaultContainer","defaultHeader","defaultContainer","closeAccordionSection","slideDown","headers","slideUp","contextElement","associateElement","dissociateElement","getLeftName","parentId","itemAdd","itemRemove","ecm","respString","holder","startWaiting","$button","stopWaiting","$inputFile","elementBase","tmpidElement","elementsEvent","lock","unlock","del","elementReference","panelMetadata","btnCancel","btnSave","addEventsEcm","removeEventsEcm","uploadEcmLink","filesLinkElements","itemsUpload","cimage","caudio","cvideo","menuItem","metadata","applyListener","nTimeoutAccordionSection","setMobiscroll","elementsToCheck","isInvalid","metadataelement","tmpElement","oldValue","description","idmetadata","actualValue","idMetadata","metadataValues","valueDate","minDate","valueText","removeListener","captureAudio","mediaFiles","audioUrl","localURL","saveAudio","Filename","dataAudio","enableImage","meta","metadataType","$arrayEcmControls","arrayItems","idfileupload","searchList","initializeList","modalViewTemplates","inputTemplates","configureReadOnly","configureModalView","newElement","showResults","showNoResultsMessage","appendFoundItem","$newElement","lastElement","isModalViewContainer","li","defaultElement","finalValue","basicUserField","defaultUserField","controlName","$addImage","$deleteImage","isNative","showAsyncImage","createModal","imageAdd","adjustSize","imageDelete","baseParams","zoom","img","onPreviewActionBack","originalImage","originalImageWidth","dataUrlToSave","imageTemplate","maxHeight","windowHeightSize","windowWidthSize","listHeight","maxWidth","popupHeight","useCamera","destinationType","DestinationType","FILE_URI","uploadFileCompleted","applyDocumentTemplatesFormat","documentList","previewTooltip","returnType","rangeDate","rangeMoney","rangeNumber","cordinate","updateDisplayValue","onSuccess","coords","onError","originalGetControl","applyColumnStyles","isInlineRow","xpathPath","getImageXpathContext","applyUploadPlugin","nameFile","templates","loadOverrides","initAsyncStuff","loadTemplates","loadTemplate","templateDestination","templateService","resolvedTemplate","mobileform","formTemplate","usersForm","section","contentPanel","nestedForm","mobilegroup","mobiletext","layoutPlaceholder","layoutBoolean","entityTemplate","userfieldWrapper","getSearchRender","getQueryRender","collectionnavigator","getUser","activityCheckList","columnParams","exclusiveCheck","uploadecm","queryExtendedText","queryText","queryCheck","queryYesNo","queryNumber","queryMoney","queryDate","queryCombo","queryCascadingCombo","querySuggest","queryLabel","queryList","queryMultiSelect","querySearch","queryRadio","queryState","queryCaseState","queryProcess","querySearchUser","factory","enableMSF","resolvedRemplate","tmplIcons","enableCustomizations","getJavaScript","offline","execution_device","cachedFactory","getRenderFactory","print","getDataService","executionDeferred","deviceFactory","getFactory","unsubscribe","doc","ownerDocument","sendExecutingPostMessageWebparts","process","refreshing","pathProcess","lastWidth","lastHeight","timeoutResize","resizeInPopUpHTML","configureOpenForm","configureRefresh","configureRouting","configureRenderError","configureResize","configureGlobalHandlers","enableE2EInterface","transformGridControl","processForm","getFailDeferred","jsonErrorMessage","fastEmpty","canvasParent","timeoutTrigger","resizeTimeout","forceResize","triggerParams","heightActivitiFormContainer","renderForm","heightButtonContainer","renderBehavior","postMessageSocket","heightCanvas","iframeCommunicator"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: \r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This widget will implement a custom grid for bizagi rendering module\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Markup: <div></div>\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Styles:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   - Desktop: css/bizagi/desktop/controls/bizagi.grid.css\r\n                                                                                                                                                                                                                                                                                                                                                                                *   - Tablet: css/bizagi/tablet/controls/bizagi.grid.css\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// TODO: Create templates\n\n(function ($) {\n  $.widget(\"ui.bizagi_grid\", {\n    options: {\n      id: \"no-id\",\n      columns: [],\n      sortBy: \"\",\n      sortType: \"asc\",\n      showSummary: false,\n      collapse: false,\n      collapseState: false,\n      data: {},\n      indexedData: {},\n      maxColumns: 0,\n      buttonsPst: false,\n      title: '',\n      tableCssClass: '', // Style for entire table              \n      headerStyles: '',\n      floatingHeader: false,\n      hasExclusiveCheck: false,\n      template: {\n        grid: \"\",\n        waiting: \"\",\n        table: \"\",\n        emptyTable: \"\",\n        column: \"\",\n        specialColumn: \"\",\n        row: \"\",\n        rowButtons: \"\",\n        cell: \"\",\n        specialCell: \"\",\n        pager: \"\",\n        buttons: \"\",\n        dynamicPager: \"\",\n        summary: \"\",\n        summaryCell: \"\" },\n\n      actions: {\n        add: true,\n        edit: true,\n        remove: true,\n        details: true,\n        allowMore: false,\n        enableXlsExport: false,\n        enablePdfExport: false },\n\n      mode: \"execution\" },\n\n    /*\r\n                           *   Constructor\r\n                           */\n    _init: function _init() {\n      var self = this;\n      var options = self.options;\n      var element = self.element;\n\n      // Set object variables\n      self.page = 1;\n      self.changes = {};\n      self.totalRows = 0;\n      self.totalPages = 0;\n      self.data = options.data;\n      self.selectedRow = 0;\n      self.components = {};\n      self.buttons = {};\n      self.asyncCells = {};\n      self.scrollableArea = options.scrollableArea || self;\n\n      // Build column indexes\n      self.columnByIndex = {};\n      self.columnByName = {};\n      self.columnKeyIndex = 0;\n      $.each(options.columns, function (i, column) {\n        // Fix non-present properties\n        column.key = typeof column.key !== \"undefined\" ? column.key : false;\n        column.label = typeof column.label !== \"undefined\" ? column.label : column.name;\n        column.sortType = \"asc\";\n        column.tooltip = typeof column.tooltip !== \"undefined\" ? column.tooltip : \"\";\n\n        // Index the column\n        self.columnByIndex[column.index] = column;\n        self.columnByName[column.name] = column;\n        if (column.key) {\n          self.columnKeyIndex = column.index;\n        }\n      });\n\n      // Set sort options\n      options.sortBy = options.sortBy || self.columnByIndex[0].name;\n      if (self.columnByName[options.sortBy]) {\n        self.columnByName[options.sortBy].sortType = options.sortType;\n      } else {\n        if (self.columnByName[options.sortBy.split(\".\")[0]]) {\n          self.columnByName[options.sortBy.split(\".\")[0]].sortType = options.sortType;\n        }\n      }\n\n      // Add base classes\n      element.addClass(\"ui-bizagi-grid-wrapper\");\n      element.attr(\"data-bizagi-id\", options.id);\n\n      // Calculate\n      self.calculateKeyIndex();\n\n      //collapse state\n      self.collapseState = options.collapseState;\n\n      // Start waiting signal \n      self.startLoading(false);\n    },\n    /*\r\n       *   Method to start loading for ajax data and update the ui\r\n       */\n    startLoading: function startLoading(bUseTimeout) {\n      var self = this;\n      bUseTimeout = typeof bUseTimeout !== \"undefined\" ? bUseTimeout : true;\n\n      if (self.options.mode !== \"execution\" || typeof self.options.sortBy === \"undefined\") {\n        return;\n      }\n\n      // Draw the waiting template when the endLoading delays more than 250ms\n      var waitingFn = function waitingFn() {\n        var element = self.element;\n        var options = self.options;\n\n        // Set null to timeout\n        self.waitingTimeout = null;\n\n        element.append($.fasttmpl(options.template.waiting));\n      };\n\n      if (bUseTimeout) {\n        self.waitingTimeout = setTimeout(waitingFn, 250);\n      } else {\n        waitingFn();\n      }\n    },\n\n    /*\r\n       *   Method to remove the loading message\r\n       */\n    endLoading: function endLoading() {\n      var self = this;\n      var element = self.element;\n\n      // Remove waiting timeout\n      if (self.waitingTimeout) {\n        clearTimeout(self.waitingTimeout);\n        self.waitingTimeout = null;\n      }\n\n      // Remove everything\n      element.empty();\n    },\n\n    /*\r\n       *   This method updates the data and refreshes the grid\r\n       */\n    setData: function setData(data) {\n      var self = this;\n\n      // Set internal data\n      self.data = data;\n      self.calculateKeyIndex();\n\n      // Call refresh\n      self.refresh();\n    },\n    /*\r\n       *   This method retrieves the actual data from the grid\r\n       */\n    getData: function getData() {\n      var self = this;\n\n      // Return internal data\n      return self.data;\n    },\n\n    /*\r\n       *   Calculate key index\r\n       */\n    calculateKeyIndex: function calculateKeyIndex() {\n      var self = this;\n      var columns = self.options.columns;\n      var data = self.data;\n\n      indexedData = {};\n\n      if (data.rows) {\n        $.each(data.rows, function (i, row) {\n          var key;\n          var row;\n          $.each(columns, function (j, column) {\n            if (column.key) key = row[j];\n          });\n          indexedData[key] = row;\n        });\n      }\n      self.indexedData = indexedData;\n    },\n\n    /*\r\n       *   This method retrieves the changes made by the user\r\n       */\n    getChanges: function getChanges() {\n    },\n\n    /*\r\n       *   This method refreshes the grid\r\n       */\n    refresh: function refresh() {\n      var self = this;\n\n      // Cleans components\n      self._cleanComponents();\n      self._cleanButtons();\n\n      // Call the draw method\n      self.components = {};\n      self.draw();\n    },\n\n    /*\r\n       *   This method refreshes only the summary\r\n       */\n    refreshSummary: function refreshSummary(columnIndex) {\n      var self = this;\n      var options = self.options;\n      var summary = self._getComponent(\"summary\");\n\n      // Do nothing if the component is drawing or there is no summary\n      if (self.drawing) return;\n      if (!summary) return;\n\n      // Resolve summary\n      if (options.showSummary) {\n\n        if (columnIndex) {\n          // Refresh an specific summary\n          self.refreshSummaryCell(columnIndex);\n\n        } else {\n          // Clean and re-draw summary\n          summary.empty();\n          summary.append(self.drawSummary());\n\n          // Execute post-render\n          self.postRenderSummary(summary);\n        }\n      }\n    },\n\n    /*\r\n       *   Refresh a single summary cell\r\n       */\n    refreshSummaryCell: function refreshSummaryCell(columnIndex) {\n      var self = this;\n      var options = self.options;\n      var summary = self._getComponent(\"summary\");\n      var getCell = function getCell(summary, columnIndex) {\n        var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\n        return $(cells[columnIndex]);\n      };\n      var cell = getCell(summary, columnIndex);\n\n      // Omit index key\n      var column = self.columnByIndex[columnIndex];\n      if (column.key) return; // Omit key column\n\n      // Clean and Execute render\n      var html = self.drawSummaryCell(column);\n      cell.replaceWith(html);\n\n      // Recalculate cell\n      cell = getCell(summary, columnIndex);\n\n      // Execute post-render\n      self.onCellReady(column, \"summary\", cell, false);\n    },\n\n    /*\r\n       *   This method changes a cell value in the grid\r\n       */\n    changeCellValue: function changeCellValue(key, columnIndex, value) {\n      var self = this;\n      if (self.indexedData[key]) {\n        self.indexedData[key][columnIndex] = value;\n      }\n    },\n\n    deleteCellExclusiveValues: function deleteCellExclusiveValues(columnIndex) {\n      var self = this;\n      if (self.indexedData) {\n        $.each(self.indexedData, function (key) {\n          self.indexedData[key][columnIndex] = false;\n        });\n      }\n    },\n\n    /*\r\n       *   This method draws the full grid associated with the data\r\n       */\n    draw: function draw() {\n      var self = this;\n      var options = self.options;\n      var element = self.element;\n\n      // Start global drawing flag\n      self.drawing = true;\n\n      // Ends waiting signal\n      self.endLoading();\n\n      if (options.orientation === \"rtl\") {\n\n        // Resolve grid template\n        var html = $.fasttmpl(options.template.gridRtl, {\n          label: options.title,\n          buttonsPst: options.buttonsPst,\n          collapse: options.collapse,\n          collapseState: self.collapseState,\n          isDesign: options.mode === \"design\" });\n\n\n      } else {\n        // Resolve grid template\n        var html = $.fasttmpl(options.template.grid, {\n          label: options.title,\n          buttonsPst: options.buttonsPst,\n          collapse: options.collapse,\n          collapseState: self.collapseState,\n          isDesign: options.mode === \"design\" });\n\n      }\n\n      // Call sub-drawers\n      html = self.drawTable(html);\n      self.grid = $(html).appendTo(element);\n\n      // Post render the grid\n      self.postRender(self.grid);\n\n      if (options.mode !== \"design\") {\n        // Attach paginator desktop\n        self.attachPaginator();\n\n        // Attach handlers\n        self.attachHandlers();\n      }\n\n      if (options.mode === \"execution\" && options.floatingHeader) {\n        var $tableContainer = self._getComponent(\"table\");\n        var $table = $(\"table\", $tableContainer);\n        var offset = parseInt($(self.scrollableArea).css(\"padding-top\").replace(/[^\\d.]/g, '')) || 0;\n\n        $table.stickyTableHeaders({\n          fixedOffset: offset > 0 ? offset - 1 : offset,\n          scrollableArea: self.scrollableArea,\n          zIndex: 1000,\n          cacheHeaderHeight: true });\n\n        $tableContainer.bind(\"scroll\", function () {\n          $table.trigger(\"resize.stickyTableHeaders\");\n        });\n      }\n\n      // Toggle visibility depending from row count\n      if (self.data.rows.length === 0) {\n        self._getComponent(\"table\").hide();\n        self._getComponent(\"pager\").hide();\n        self._getButton(\"remove\").hide();\n        self._getButton(\"edit\").hide();\n        self._getComponent(\"dynamicPager\").hide();\n        self._getComponent(\"emptyTable\").show();\n\n      } else {\n        self._getComponent(\"table\").show();\n        self._getButton(\"remove\").show();\n        self._getButton(\"edit\").show();\n        self._getComponent(\"emptyTable\").hide();\n\n        if (options.actions.allowMore) {\n          self._getComponent(\"dynamicPager\").show();\n          self._getComponent(\"pager\").hide();\n        } else {\n          self._getComponent(\"pager\").show();\n          self._getComponent(\"dynamicPager\").hide();\n        }\n\n        if (options.actions.edit) {\n          self._getButton(\"edit\").show();\n        }\n\n        if (options.actions.enableXlsExport || options.actions.enablePdfExport) {\n          self._getButton('show-grid-export-options').show();\n        } else {\n          self._getButton('show-grid-export-options').css('display', 'none');\n        }\n\n      }\n\n      // End global drawing flag\n      self.drawing = false;\n    },\n\n    attachPaginator: function attachPaginator() {\n    },\n\n    /*\r\n       *   This method draws the table associated with the data\r\n       */\n    drawTable: function drawTable(html) {\n      var self = this;\n      var options = self.options;\n\n      // Resolve table template\n      var table = $.fasttmpl(options.template.table, {\n        showSummary: options.showSummary,\n        tableCssClass: options.tableCssClass,\n        orientation: options.orientation });\n\n      var emptyTable = $.fasttmpl(options.template.emptyTable);\n\n      // Resolve header\n      table = self._replaceElement(table, \"columns\", self.drawHeader());\n\n      // Resolve body\n      table = self._replaceElement(table, \"rows\", self.drawBody());\n\n      // Resolve summary\n      if (options.showSummary) {\n        table = self._replaceElement(table, \"summary\", self.drawSummary());\n      }\n\n      // Resolve pager\n      html = self._replaceElement(html, \"pager\", self.drawPager());\n\n      // Resolve buttons\n      html = self._replaceElement(html, \"buttons\", self.drawButtons());\n\n      //Resolve export options menu\n      html = self._replaceElement(html, \"gridExportOptions\", self.drawGridExportOptions());\n\n      // Resolve row buttons\n      html = self._replaceElement(html, \"rowButtons\", self.drawRowButtons());\n\n      // Resolve dynamic Pager\n      html = self._replaceElement(html, \"dynamicPager\", self.drawDynamicPager());\n\n      // Perform grid replaces\n      html = self._replaceElement(html, \"table\", table);\n      html = self._replaceElement(html, \"emptyTable\", emptyTable);\n      return html;\n    },\n    /*\r\n       * Find if a column has a exact match for sort it\r\n       */\n    isExactMatch: function isExactMatch() {\n      var self = this;\n      var columns = self.options.columns;\n      var sortBy = self.options.sortBy;\n      var i = 0,length = columns.length;\n      for (; i < length;) {\n        if (sortBy == columns[i++].name) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /*\r\n       *   This method draws the grid header\r\n       */\n    drawHeader: function drawHeader() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve columns\n      var columns = \"\";\n\n      self.exactMatch = self.isExactMatch();\n\n      $.each(options.columns, function (i, column) {\n        if (self.options.maxColumns > 0) {\n          if (i <= self.options.maxColumns) {\n            // Draw normal column\n            columns += self.drawColumn(column);\n          }\n        } else {\n          // Draw normal column\n          columns += self.drawColumn(column);\n        }\n      });\n\n      if (self.options.maxColumns > 0 && self._canShowButtons()) {\n        // Draw special column\n        columns += self.drawSpecialColumn();\n      }\n\n      return columns;\n    },\n\n    /*\r\n       *   This method draws a column header\r\n       */\n    drawColumn: function drawColumn(column) {\n      var self = this;\n      var options = self.options;\n\n      var columnProperties = column.bizAgiProperties || {};\n      var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\n      var headerStyles = options.headerStyles ? options.headerStyles.header : \"\";\n      headerStyles += (headerStyles !== \"\" ? \"; text-align:\" : \"text-align:\") + (columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\");\n      var columnAlign = columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\";\n      var isSortable = options.isSortable && columnProperties.isSortable && typeof columnProperties.xpath !== \"undefined\";\n      var initialSortBy = options.sortBy.split(\".\")[0];\n      var sortActive = false;\n      if (isSortable && (column.name === options.sortBy || column.name === initialSortBy && !self.exactMatch)) sortActive = true;\n      var controlType = bizagi.util.getColumnType(columnProperties.type);\n      var isHorizontalRadio = controlType === \"radio\" && columnProperties.horizontal;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.column, $.extend({}, column, {\n        isKey: column.key,\n        sortActive: sortActive,\n        sortType: options.sortOrder,\n        isSortable: isSortable,\n        tooltip: column.tooltip || \"\",\n        columnCssClass: cssClass,\n        headerLabelStyles: options.headerStyles ? options.headerStyles.label : \"\",\n        headerStyles: headerStyles,\n        controlType: controlType,\n        isHorizontalRadio: isHorizontalRadio,\n        columnAlign: columnAlign,\n        flexAlign: bizagi.util.mapAlignClassName(columnAlign) }));\n\n    },\n    /*\r\n       *   This method draws a special column header that will be drawn when the grid can't show more columns\r\n       */\n    drawSpecialColumn: function drawSpecialColumn() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.specialColumn);\n    },\n\n    drawDynamicPager: function drawDynamicPager() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.dynamicPager);\n    },\n\n    /*\r\n       *   This method draws the table body\r\n       */\n    drawBody: function drawBody() {\n      var self = this;\n\n      // Resolve rows\n      var rows = \"\";\n      $.each(self.data.rows, function (i, row) {\n        rows += self.drawRow(row);\n      });\n\n      return rows;\n    },\n\n    /*\r\n       *   This method draws a grid row\r\n       */\n    drawRow: function drawRow(rowData, isNewRow) {\n      var self = this;\n      var options = self.options;\n      var key = rowData[self.columnKeyIndex];\n      var newRow = isNewRow || false;\n      var rnd = Math.floor(Math.random() * 10000);\n      var row = $.fasttmpl(options.template.row, {\n        key: rnd,\n        isNewRow: isNewRow,\n        businessKey: key });\n\n\n      // Resolve cells\n      var cells = \"\";\n      $.each(rowData, function (i, cell) {\n        if (self.options.maxColumns > 0) {\n          if (i < self.options.maxColumns + 1) {\n            // Draw normal cell\n            cells += self.drawCell(i, key, cell, newRow);\n          }\n        } else {\n          // Draw normal cell\n          cells += self.drawCell(i, key, cell, newRow);\n        }\n      });\n\n      if (self.options.maxColumns > 0 && self._canShowRowButtons()) {\n        // Draw special column\n        cells += self.drawSpecialCell(self.options.maxColumns + 1);\n      }\n\n      // Resolve cells template\n      row = self._replaceElement(row, \"cells\", cells);\n      return row;\n    },\n\n    /*\r\n       *   This method draws the cells for summary\r\n       */\n    drawSummary: function drawSummary() {\n      var self = this;\n      var options = self.options;\n      var row = $.fasttmpl(options.template.summary);\n      var cells = \"\";\n\n      // Resolve summary cells\n      $.each(options.columns, function (i, column) {\n        if (self.options.maxColumns > 0) {\n          if (i <= self.options.maxColumns) {\n            // Draw summary column\n            cells += self.drawSummaryCell(column);\n          }\n        } else {\n          // Draw summary column\n          cells += self.drawSummaryCell(column);\n        }\n      });\n\n      // Resolve cells template\n      row = self._replaceElement(row, \"summary-cells\", cells);\n      return row;\n    },\n\n    /*\r\n       *   This method draws a single summary cell\r\n       */\n    drawSummaryCell: function drawSummaryCell(column) {\n      var self = this;\n      var options = self.options;\n\n      var columnProperties = column.bizAgiProperties || {};\n      var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.summaryCell, {\n        hidden: column.hidden || false,\n        summarizeBy: column.summarizeBy,\n        cellAlign: cellAlign });\n\n\n      var result = self.onDrawCell(column, \"summary\", self.calculateSummary(column), false);\n      result = result != undefined && typeof result != \"number\" ? result.replace(\"summaryValue\", self.calculateSummary(column)) : result;\n\n      if (!result) {\n        result = \"\";\n      }\n\n      var async = _typeof(result) === \"object\" && result.done;\n      if (async) {\n        if (result.state() === \"resolved\") {\n          // Fetch resolved result\n          cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\n        } else {\n          // Wait for result\n          cell = self._replaceElement(cell, \"cellContent\", \"\");\n          self.asyncCells[key + \"-\" + columnIndex] = result;\n        }\n\n      } else {\n        // Resolve cell content\n        cell = self._replaceElement(cell, \"cellContent\", result);\n      }\n\n      return cell;\n    },\n\n    /*\r\n       *   This method draws the grid cell\r\n       */\n    drawCell: function drawCell(columnIndex, key, value, isNewRow) {\n      var self = this;\n      var options = self.options;\n      isNewRow = isNewRow || false;\n      var messageValidation = \"\";\n\n      // Ensure that data is mapped into a column\n      if (!self.columnByIndex[columnIndex]) {\n        return \"\";\n      }\n\n      // Get message\n      if (columnIndex > 0) {\n        messageValidation = self.columnByIndex[columnIndex].bizAgiProperties && self.columnByIndex[columnIndex].bizAgiProperties.messageValidation;\n      }\n\n      var columnProperties = self.columnByIndex[columnIndex].bizAgiProperties || {};\n      var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\n      var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\n      var controlType = bizagi.util.getColumnType(columnProperties.type);\n      var isHorizontalRadio = controlType === \"radio\" && columnProperties.horizontal;\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.cell, {\n        isKey: self.columnByIndex[columnIndex].key,\n        hidden: options.columns[columnIndex].hidden || false,\n        isDesign: options.mode === \"design\",\n        messageValidation: messageValidation,\n        columnCssClass: cssClass,\n        id: options.columns[columnIndex].bizAgiProperties ? options.columns[columnIndex].bizAgiProperties.id : undefined,\n        cellAlign: cellAlign,\n        flexAlign: bizagi.util.mapAlignClassName(cellAlign),\n        controlType: controlType,\n        isHorizontalRadio: isHorizontalRadio });\n\n\n      var result = self.onDrawCell(self.columnByIndex[columnIndex], key, value, isNewRow);\n      if (!result) {\n        result = \"\";\n      }\n      var async = _typeof(result) === \"object\" && result.done;\n      if (async) {\n        if (result.state() === \"resolved\") {\n          // Fetch resolved result\n          cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\n        } else {\n          // Wait for result\n          cell = self._replaceElement(cell, \"cellContent\", \"\");\n          self.asyncCells[key + \"-\" + columnIndex] = result;\n        }\n\n      } else {\n        // Resolve cell content\n        cell = self._replaceElement(cell, \"cellContent\", result);\n      }\n\n      self.columnByIndex[columnIndex]['cell'] = $(cell);\n      return cell;\n    },\n    /*\r\n       *   Returns the resolved result from a promise when the promise has been executed already\r\n       */\n    resolveResult: function resolveResult(promise) {\n      var result;\n\n      promise.done(function (data) {\n        result = data;\n      });\n\n      return result;\n    },\n    /*\r\n       *   This method draws a special cell that will be drawn when the grid can't show more columns\r\n       */\n    drawSpecialCell: function drawSpecialCell(columnIndex) {\n      var self = this;\n      var options = self.options;\n\n      /* // Ensure that data is mapped into a column\r\n                                  if (!self.columnByIndex[columnIndex]) {\r\n                                      return \"\";\r\n                                  } */\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.specialCell);\n\n      return cell;\n    },\n    /*\r\n       *   This method draws a group header\r\n       */\n    drawGroupHeader: function drawGroupHeader() {\n      // TODO: Implement for PC version\n    },\n    /*\r\n       *   This method draws a footer\r\n       */\n    drawFooter: function drawFooter() {\n      // TODO: Implement for PC version\n    },\n    /*\r\n       *   This method draws a grid pager\r\n       */\n    drawPager: function drawPager() {\n      var self = this;\n      var options = self.options;\n\n      // Calculate pages\n      var pages = [];\n      for (var i = 1; i <= self.data.total; i++) {\n        pages.push({\n          number: i,\n          active: i == self.data.page });\n\n      }\n\n      // Resolve pager template\n      return $.fasttmpl(options.template.pager, {\n        page: self.data.page,\n        pages: pages,\n        records: self.data.records });\n\n    },\n    /*\r\n       *   This method draws a grid button actions\r\n       */\n    drawButtons: function drawButtons() {\n      var self = this;\n      var options = self.options;\n      var tooltips = options.tooltips || {};\n\n      var parameters = $.extend(options.actions, tooltips);\n\n      if (self._canShowButtons()) {\n        // Resolve buttons template\n        if (options.orientation === \"rtl\") {\n          return $.fasttmpl(options.template.buttonsRtl, parameters);\n        } else {\n          return $.fasttmpl(options.template.buttons, parameters);\n        }\n      } else {\n        return \"\";\n      }\n    },\n\n    /*\r\n       * This method draws the export options menu\r\n       */\n    drawGridExportOptions: function drawGridExportOptions() {\n      var self = this;\n      var options = self.options;\n      var actions = options.actions;\n      var tooltips = options.tooltips || {};\n\n      var parameters = $.extend({\n        orientation: options.orientation,\n        enableXlsExport: actions.enableXlsExport,\n        enablePdfExport: actions.enablePdfExport },\n      tooltips);\n\n      return $.fasttmpl(options.template.exportOptions, parameters);\n    },\n\n    /*\r\n       *   This method draws a row buttons,\r\n       *   those buttons will be invisible, and will be activated when the user selects a row\r\n       */\n    drawRowButtons: function drawRowButtons() {\n      var self = this;\n      var options = self.options;\n\n      if (self._canShowRowButtons()) {\n        // Resolve row buttons template\n        if (options.orientation === \"rtl\") {\n          return $.fasttmpl(options.template.rowButtons.rtl, options.actions);\n        } else {\n          return $.fasttmpl(options.template.rowButtons, options.actions);\n        }\n      } else {\n        return \"\";\n      }\n    },\n    /*\r\n       *   Execute post-renders in all the grid\r\n       */\n    postRender: function postRender() {\n      var self = this;\n      var options = self.options;\n\n      // Get grid rows\n      var rows = self._getComponent(\"cells\");\n      if (rows) {\n        $.each(rows, function (i, row) {\n          row = $(row);\n          self.postRenderRow(row);\n        });\n      }\n\n      // Get summary row\n      if (options.showSummary) {\n        var summary = self._getComponent(\"summary\");\n        self.postRenderSummary(summary);\n      }\n\n      self._triggerHandler(\"gridControlReady\");\n    },\n\n    /*\r\n       *   Execute post-renders in each cell after the element has been created\r\n       */\n    postRenderRow: function postRenderRow(row) {\n      var self = this;\n      var key = row.attr(\"data-business-key\");\n      var isNewRow = row.attr(\"data-new-row\");\n      var cells = row.is(\"[data-bizagi-component=cells]\") ? row.children() : row.find(\"[data-bizagi-component=cells]\").children();\n\n      $.each(cells, function (i, cell) {\n        var column = self.columnByIndex[i];\n        if (typeof column == \"undefined\" || column.key) return; // Omit key column\n\n        // Check if the cell has an async result\n        var asyncResult = self.asyncCells[key + \"-\" + column.index];\n        if (asyncResult) {\n          $.when(asyncResult).\n          done(function (html) {\n            // Append async result\n            cell = $(cell);\n            cell.append(html);\n            self.onCellReady(column, key, cell, isNewRow);\n          });\n        } else {\n          self.onCellReady(column, key, $(cell), isNewRow);\n        }\n      });\n    },\n\n    /*\r\n       *   Execute post-renders in each summary cell after the element has been created\r\n       */\n    postRenderSummary: function postRenderSummary(summary) {\n      var self = this;\n      var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\n\n      $.each(cells, function (i, cell) {\n        var column = self.columnByIndex[i];\n        if (column.key) return; // Omit key column\n\n        // Check if the cell has an async result\n        var asyncResult = self.asyncCells[key + \"-\" + column.index];\n        if (asyncResult) {\n          $.when(asyncResult).\n          done(function (html) {\n            // Append async result\n            cell = $(cell);\n            cell.append(html);\n            self.onCellReady(column, \"summary\", cell, false);\n          });\n        } else {\n          self.onCellReady(column, \"summary\", $(cell), false);\n        }\n      });\n    },\n\n    /*\r\n       *   Method to attach any handler to the grid\r\n       */\n    attachHandlers: function attachHandlers() {},\n\n    //TODO IMPLEMENTANDO\n    selectDynamicPager: function selectDynamicPager() {\n      this.onDynamicPager();\n    },\n\n    /*\r\n       *   Changes the current page in the grid\r\n       */\n    changePage: function changePage(page) {\n      var self = this;\n      var currentPage = Number(self.data.page);\n      var total = self.data.total;\n      var newPage = page;\n\n      // Process previous page\n      if (page === \"previous\") {\n        if (currentPage > 1) {\n          newPage = currentPage - 1;\n        } else {\n          return;\n        }\n      }\n\n      // Process next page\n      if (page === \"next\") {\n        if (currentPage < total) {\n          newPage = currentPage + 1;\n        } else {\n          return;\n        }\n      }\n\n      //refresh components cells and rows\n      self._cleanComponents();\n\n      // Update internal options\n      self.page = Number(newPage);\n\n      // Execute handler\n      self.onPageRequested();\n    },\n\n    /**\r\n        * Get current page of data\r\n        * @returns {*}\r\n        */\n    getCurrentPage: function getCurrentPage() {\n      var data = this.data || {};\n\n      return data.page || 1;\n    },\n\n    /*\r\n       *  Verify cells before sumitonchange\r\n       */\n    isValid: function isValid() {\n      // Trigger handler\n      return this._triggerHandler(\"isValid\");\n    },\n\n    /*\r\n       *   Sort the grid by a column\r\n       */\n    sortBy: function sortBy(columnIndex, sortType) {\n      var self = this;\n      var options = self.options;\n      var column = self.columnByIndex[columnIndex];\n\n      if (typeof options.sortBy === \"undefined\") {\n        return true;\n      }\n\n      // Set new sort type reversed to current, if the sort column has not changed\n      if (typeof column.name === \"undefined\") column.name = column.label;\n      if (column.name == options.sortBy) {\n        sortType = sortType || (options.sortOrder == \"asc\" ? \"desc\" : \"asc\");\n      } else {\n        if (column.name == options.sortBy.split(\".\")[0]) {\n          sortType = sortType || (options.sortType == \"asc\" ? \"desc\" : \"asc\");\n        } else {\n          sortType = sortType || options.sortType;\n        }\n      }\n\n      // Update internal options\n      if (options.sortBy.split(\".\").length > 1) {\n        if (options.sortBy.split(\".\")[0] != column.name) {\n          options.sortBy = column.name;\n        } else {\n          options.sortBy = column.name;\n        }\n      } else {\n        options.sortBy = column.name;\n      }\n\n      if (typeof column.bizAgiProperties.sortAttribute !== \"undefined\" && column.bizAgiProperties.type.indexOf(\"column\") !== -1) {\n        options.sortBy = column.name + \".\" + column.bizAgiProperties.sortAttribute;\n      }\n\n      options.sortColumn = column;\n      options.sortType = sortType;\n      options.sortOrder = sortType;\n\n      //refresh components cells and rows\n      self._cleanComponents();\n\n      // Execute handler\n      self.onSortRequested();\n    },\n\n    /*\r\n       *   Selects a row in the grid\r\n       */\n    selectRow: function selectRow(key, businessKey) {\n      var self = this;\n\n      if (self.selectedRow == key) {\n        // Invoke un-select handler\n        self.onRowUnselected();\n\n        // Update internal options\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      } else {\n        if (self.selectedRow != 0) {\n          // Invoke un-select handler\n          self.onRowUnselected();\n        }\n\n        // Update internal options\n        self.selectedRow = key;\n        self.selectedBusinessKey = businessKey;\n\n        // Invoke select handler\n        self.onRowSelected();\n      }\n    },\n\n    /*\r\n       *   Unselects a row in the grid\r\n       */\n    unselectRow: function unselectRow() {\n      var self = this;\n\n      if (self.selectedRow != 0) {\n        // Invoke un-select handler\n        self.onRowUnselected();\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      }\n    },\n\n    /*\r\n       *   Calculates the summary for a column given the data\r\n       */\n    calculateSummary: function calculateSummary(column) {\n      var self = this;\n      var operation = column.summarizeBy;\n\n      //Consider the default values in the operations\n      $.each(self.data.rows, function (i, value) {\n        if (typeof self.data.rows[i][column.index] !== \"undefined\" && self.data.rows[i][column.index] == null && column.bizAgiProperties.defaultvalue != null) {\n          self.data.rows[i][column.index] = column.bizAgiProperties.defaultvalue;\n        }\n      });\n      var columnValues = $.map(self.data.rows, function (row, i) {return row[column.index];});\n      var result;\n\n      // Don't calculate anything if there are no rows\n      if (columnValues.length == 0) return 0;\n\n      // Resolve operations\n      if (operation === \"sum\") {\n        result = 0;\n        $.each(columnValues, function (i, value) {if (value != null) result += Number(value);});\n\n      } else if (operation === \"min\") {\n        result = columnValues[0] || 0;\n        $.each(columnValues, function (i, value) {if (typeof value === \"number\" && value != null && value < result) result = Number(value);});\n        if (result === Math.max()) result = null;\n\n      } else if (operation === \"max\") {\n        result = columnValues[0] || 0;\n        $.each(columnValues, function (i, value) {if (typeof value === \"number\" && value != null && value > result) result = Number(value);});\n        if (result === Math.min()) result = null;\n\n      } else if (operation === \"avg\") {\n        result = 0;\n        $.each(columnValues, function (i, value) {if (value != null) result += Number(value);});\n        result = result / columnValues.length;\n\n      } else if (operation === \"count\") {\n        result = 0;\n        columnValues = self.data.rows;\n\n        for (i = 0; i < columnValues.length; i++) {\n          var columnValue = columnValues[i][column.index];\n\n          if (columnValue instanceof Array && columnValue.length > 0) {\n            result += 1;\n          } else\n          if (!(columnValue instanceof Array) && columnValue !== null && columnValue !== \"\") {\n            result += 1;\n          }\n        }\n      }\n      return result;\n    },\n\n    /*\r\n       *   Process an action in order to do something with the grid\r\n       */\n    processAction: function processAction(action, params) {\n      var self = this;\n\n      var key = params && params.key ? params.key : self.selectedBusinessKey;\n      if (action === \"edit\") {\n        self.onEditRow(key);\n      }\n      if (action === \"remove\") {\n        self.onDeleteRow(key);\n      }\n      if (action === \"more\") {\n        self.onShowMore(key);\n      }\n      if (action === \"details\") {\n        self.onShowDetails(key);\n      }\n      if (action === \"add\") {\n        self.onAddRow();\n      }\n\n      if (action === \"show-grid-export-options\") {\n        self.onShowExportGridOptions();\n      }\n    },\n    /*\r\n       *   Executes the page requested handler\r\n       */\n    onPageRequested: function onPageRequested() {\n      var self = this;\n\n      // Start loading signal \n      self.startLoading();\n\n      // Trigger handler\n      return self._triggerHandler(\"pageRequested\", self._buildRefreshParameters());\n    },\n    /*\r\n       *   Executes the sort requested handler\r\n       */\n    onSortRequested: function onSortRequested() {\n      var self = this;\n\n      // Start loading signal \n      self.startLoading();\n\n      // Trigger handler\n      return self._triggerHandler(\"sortRequested\", self._buildRefreshParameters());\n    },\n    /*\r\n       *   Executes the row selected handler\r\n       */\n    onRowSelected: function onRowSelected() {\n      var self = this;\n\n      return self._triggerHandler(\"rowSelected\", { key: self.selectedBusinessKey });\n    },\n    /*\r\n       *   Executes the row un-selected handler\r\n       */\n    onRowUnselected: function onRowUnselected() {\n      var self = this;\n      return self._triggerHandler(\"rowUnselected\", { key: self.selectedBusinessKey });\n    },\n\n    /*\r\n       * Executes collapse grid\r\n       */\n    onCollapseGrid: function onCollapseGrid() {\n      var self = this;\n      return self._triggerHandler(\"performCollapseGrid\");\n    },\n\n    //TODO:llamar\n    onDynamicPager: function onDynamicPager() {\n      var self = this;\n      return self._triggerHandler(\"moreRows\", { key: self.selectedBusinessKey });\n    },\n\n    /*\r\n       *   Executes the on draw cell handler\r\n       */\n    onDrawCell: function onDrawCell(column, key, value, isNewRow) {\n      var self = this;\n      return self._triggerHandler(\"drawCell\", {\n        column: column,\n        key: key,\n        value: value,\n        isNewRow: isNewRow });\n\n    },\n    /*\r\n       *   Executes on cell ready handler\r\n       */\n    onCellReady: function onCellReady(column, key, cell, isNewRow) {\n      var self = this;\n      return self._triggerHandler(\"cellReady\", {\n        column: column,\n        key: key,\n        cell: cell,\n        isNewRow: isNewRow });\n\n    },\n\n    /*\r\n       *   Executes the on draw control handler\r\n       */\n    onDrawControl: function onDrawControl() {\n      //TODO: Implement this\n    },\n    /*\r\n       *   Executes the on draw group header handler\r\n       */\n    onDrawGroupHeader: function onDrawGroupHeader() {\n      //TODO: Implement this\n    },\n    /*\r\n       *   Executes the on add row handler\r\n       */\n    onAddRow: function onAddRow() {\n      var self = this;\n      return self._triggerHandler(\"addRow\");\n    },\n    /*\r\n       *   Executes the on edit row handler\r\n       */\n    onEditRow: function onEditRow(key) {\n      var self = this;\n      return self._triggerHandler(\"editRow\", { key: key });\n    },\n    /*\r\n       *   Executes the on delete row handler\r\n       */\n    onDeleteRow: function onDeleteRow(key) {\n      var self = this;\n      return self._triggerHandler(\"deleteRow\", { key: key });\n    },\n    /*\r\n       *   Executes the on show more handler\r\n       */\n    onShowMore: function onShowMore(key) {\n      var self = this;\n      return self._triggerHandler(\"showMore\", { key: key });\n    },\n    /*\r\n       *   Executes the on show details handler\r\n       */\n    onShowDetails: function onShowDetails(key) {\n      var self = this;\n      return self._triggerHandler(\"showFormDetails\", { key: key });\n    },\n    /*\r\n       * Executes the on show export grid options \r\n       */\n    onShowExportGridOptions: function onShowExportGridOptions() {\n      var self = this;\n      return self._triggerHandler(\"showGridExportOptions\");\n    },\n\n    /*\r\n       *   Replaces a matched element in the container for the specified \"replace\" element\r\n       */\n    _replaceElement: function _replaceElement(html, element, replace) {\n      return html.replaceFirstWithoutPatterns(\"{{element \" + element + \"}}\", replace);\n    },\n\n    /*\r\n       *   Return the event handler parameters object\r\n       */\n    _buildRefreshParameters: function _buildRefreshParameters() {\n      var self = this;\n      var options = self.options;\n      var sortColumn = options.sortColumn != undefined ? options.sortColumn.index : 1;\n      return {\n        page: self.page,\n        sortBy: options.sortBy,\n        sortType: options.sortOrder,\n        sortColumnIndex: sortColumn };\n\n    },\n    /*\r\n       *   Calls directly to handler callback\r\n       */\n    _triggerHandler: function _triggerHandler(type, data) {\n      var callback = this.options[type];\n      if (!callback) {\n        return null;\n      }\n      return callback.call(this.element[0], data);\n    },\n    /*\r\n       *   Gets the component\r\n       */\n    _getComponent: function _getComponent(component) {\n      var self = this;\n      var element = self.element;\n      if (!self.components[component]) {\n        var foundComponent = $(\"[data-bizagi-component=\" + component + \"]\", element);\n        if (foundComponent != null && foundComponent.length > 0) {\n          self.components[component] = foundComponent;\n        }\n      }\n      return self.components[component];\n    },\n    /*\r\n       *   Gets the specific Button\r\n       */\n    _getButton: function _getButton(button) {\n      var self = this;\n      var element = self.element;\n      if (!self.buttons[button])\n      self.buttons[button] = $(\"[data-action=\" + button + \"]\", element);\n      return self.buttons[button];\n    },\n    /*\r\n       * Cleans the components \r\n       */\n    _cleanComponents: function _cleanComponents() {\n      var self = this;\n      self.components = {};\n    },\n    /*\r\n       * Cleans the buttons \r\n       */\n    _cleanButtons: function _cleanButtons() {\n      var self = this;\n      self.buttons = {};\n    },\n    /*\r\n       *  Template method to check if buttons component must be rendered\r\n       */\n    _canShowButtons: function _canShowButtons() {\n      return true;\n    },\n    /*\r\n       *  Template method to check if row buttons must be displayed when the row is selected\r\n       */\n    _canShowRowButtons: function _canShowRowButtons() {\n      return true;\n    } });\n\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Utils\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide misc helpers to all modules\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Create or Define BizAgi namespace\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.util = typeof bizagi.util !== \"undefined\" ? bizagi.util : {};\nbizagi.context = typeof bizagi.context !== \"undefined\" ? bizagi.context : {};\nbizagi.util.smartphone = typeof bizagi.util.smartphone !== \"undefined\" ? bizagi.util.smartphone : {};\nbizagi.util.tablet = typeof bizagi.util.tablet !== \"undefined\" ? bizagi.util.tablet : {};\n\nvar DEVICES = {};\n\n// Device Type\nDEVICES[DEVICES['desktop'] = 0] = 'desktop';\nDEVICES[DEVICES['smartphone'] = 1] = 'smartphone';\nDEVICES[DEVICES['tablet'] = 2] = 'tablet';\n\n// Add definition\nbizagi.deviceEnum = DEVICES;\n\n/*\r\n                              *   Define mini-plugin to acceess iframe's boundaries\r\n                              */\n(function ($) {\n  $.fn.callInside = function (fx, args) {\n    if ($(this)[0].tagName.toLowerCase() != \"iframe\")\n    return null;\n    // Don't execute the code when the content window is not ready yet    \n    if ($(this)[0].contentWindow == null)\n    return null;\n    // Check if the iframe is cross domain\n    try {\n      // Evals the content\n      $(this)[0].contentWindow.args = args;\n    } catch (e) {\n      // If an exception is thrown here this is a cross domain access\n      return null;\n    }\n\n    if ($.browser.msie) {\n      return $(this)[0].contentWindow.execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    } else if ($.browser.webkit || $.browser.mozilla) {\n      return $(this)[0].contentWindow.eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    }\n  };\n})(jQuery);\n(function ($) {\n  $.fn.callInsidePopup = function (fx, args) {\n    // This is window here\n    var self = this;\n    $(document).ready(function () {\n      // Check if the iframe is cross domain\n      try {\n        // Evals the content\n        $(self)[0].args = args;\n      } catch (e) {\n        // If an exception is thrown here this is a cross domain access\n        return null;\n      }\n\n      if ($.browser.msie) {\n        return $(self)[0].execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      } else if ($.browser.webkit || $.browser.mozilla) {\n        return $(self)[0].eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      }\n\n    });\n  };\n})(jQuery);\n(function ($) {\n\n  // add support for CSS functions for \"setProperty\" in ie8\n  var isStyleFuncSupported = !!CSSStyleDeclaration.prototype.getPropertyValue;\n  if (!isStyleFuncSupported) {\n    CSSStyleDeclaration.prototype.getPropertyValue = function (a) {\n      return this.getAttribute(a);\n    };\n    CSSStyleDeclaration.prototype.setProperty = function (styleName, value, priority) {\n      this.setAttribute(styleName, value);\n      var priority = typeof priority != 'undefined' ? priority : '';\n      if (priority != '') {\n        // Add priority manually\n        var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*' + RegExp.escape(value) + '(\\\\s*;)?', 'gmi');\n        this.cssText = this.cssText.replace(rule, styleName + ': ' + value + ' !' + priority + ';');\n      }\n    };\n\n    CSSStyleDeclaration.prototype.removeProperty = function (a) {\n      return this.removeAttribute(a);\n    };\n\n    CSSStyleDeclaration.prototype.getPropertyPriority = function (styleName) {\n      var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*[^\\\\s]*\\\\s*!important(\\\\s*;)?', 'gmi');\n      return rule.test(this.cssText) ? 'important' : '';\n    };\n  }\n\n  // Escape regex chars with \\\n  RegExp.escape = function (text) {\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n  };\n\n  // The style function\n  jQuery.fn.style = function (styleName, value, priority) {\n    // DOM node\n    var node = this.get(0);\n    // Ensure we have a DOM node \n    if (typeof node == 'undefined') {\n      return;\n    }\n    // CSSStyleDeclaration\n    var style = this.get(0).style;\n    // Getter/Setter\n    if (typeof styleName != 'undefined') {\n      if (typeof value != 'undefined') {\n        // Set style property\n        var priority = typeof priority != 'undefined' ? priority : '';\n        // Hack to IE8\n        if (style.setProperty) {\n          style.setProperty(styleName, value, priority);\n        } else {\n          style.setAttribute(styleName, value, priority);\n        }\n      } else {\n        // Get style property\n\n        return style.getPropertyValue(styleName);\n      }\n    } else {\n      // Get CSSStyleDeclaration\n      return style;\n    }\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.nl2br = function (value) {\n    return value.replace(/(\\r\\n|\\n\\r|\\r|\\n|\\\\r\\\\n|\\\\n\\\\r|\\\\r|\\\\n)/g, \"<br>\");\n  };\n})(jQuery);\n\n\n\n(function ($) {\n  jQuery.br2nl = function (value) {\n    return value.replace(/\\r\\n|\\r|\\n/g, \"\\r\");\n  };\n})(jQuery);\n\n/**\r\n             *   Can be compare control between their intance value and existing value\r\n             */\n//TODO: DEPL- Please move this out of here, this is rendering logic, it must exists as a function for the render, and every erender could override its implementation\n(function ($) {\n  jQuery.controlValueIsChanged = function (control) {\n    var self = control;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (control.properties.type == \"grid\" && control.ready().state() == \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\", \"queryState\"].includes(properties.type) || /^cascadingcombo$/i.test(properties.type)) {\n      if (value && value.length !== undefined)\n      value = value[0];\n      if (compareValue && compareValue.length !== undefined)\n      compareValue = compareValue[0];\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      result = compareValue == value ? false : true;\n    } else if (properties.type == \"boolean\" || properties.type == \"queryBoolean\" || properties.type == \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (properties.type == \"searchNumber\") {\n\n      result = value ? true : false;\n    } else if (properties.type === \"date\") {\n      result = new Date(compareValue).getTime() !== new Date(value).getTime();\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.getMaxZindex = function () {\n    var elm = $(\"*\");\n    var maxZindex = 1;\n\n    $.each(elm, function (key, value) {\n      var zindex = parseInt($(value).css(\"z-index\"));\n      if (zindex > maxZindex) {\n        maxZindex = zindex + 1;\n      }\n\n    });\n\n    return maxZindex;\n  };\n})(jQuery);\n\n/**\r\n             * Set the same max height to multiples divs\r\n             */\n(function ($) {\n  jQuery.equalizeHeights = function (selector) {\n    var heights = new Array();\n    // Loop to get all element heights\n    $(selector).each(function () {\n\n      // Need to let sizes be whatever they want so no overflow on resize\n      $(this).css('min-height', '0');\n      $(this).css('max-height', 'none');\n      $(this).css('height', 'auto');\n\n      // Then add size (no units) to array\n      heights.push($(this).outerHeight());\n    });\n\n    // Find max height of all elements\n    var max = Math.max.apply(Math, heights);\n\n    // Set all heights to max height\n    $(selector).each(function () {\n      $(this).css('height', max + 'px');\n    });\n  };\n})(jQuery);\n\n//TODO: DEPL - Move this to rendering\nbizagi.util.autoSave = function () {\n  var deferredSave = $.Deferred();\n  //if attr data-event exist trigger event auto-save or resolve the deferred\n  if (bizagi.util.detectDevice() !== \"desktop\") {\n    if ($(document).data('auto-save')) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  } else {\n    if ($._data($(document)[0], 'events')[\"save-form\"] && $._data($(document)[0], 'events')[\"save-form\"].length > 0) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  }\n  return deferredSave.promise();\n};\n//--  **Users Deleted** the name will fill on first reques in UsersPictures\nbizagi.util.anonymizedUserInformation = {\n  id: \"00000000-0000-0000-0000-000000000000\",\n  name: \"\",\n  username: \"\",\n  email: \"\",\n  domain: \"\",\n  picture: \"\",\n  isAnonymized: true };\n\n\n//-- **Resources for date picker**\nbizagi.util.datepickerResource = [];\n// taken  from https://github.com/jquery/jquery-ui/tree/master/ui/i18n\nbizagi.util.datepickerResource[\"en\"] = { closeText: \"Done\", prevText: \"Prev\", nextText: \"Next\", currentText: \"Today\", monthNames: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"], dayNames: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"], dayNamesShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"], dayNamesMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"], weekHeader: \"Wk\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"es\"] = { closeText: \"Cerrar\", prevText: \"&#x3C;Ant\", nextText: \"Sig&#x3E;\", currentText: \"Hoy\", monthNames: [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"], monthNamesShort: [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"sep\", \"oct\", \"nov\", \"dic\"], dayNames: [\"domingo\", \"lunes\", \"martes\", \"miércoles\", \"jueves\", \"viernes\", \"sábado\"], dayNamesShort: [\"dom\", \"lun\", \"mar\", \"mié\", \"jue\", \"vie\", \"sáb\"], dayNamesMin: [\"D\", \"L\", \"M\", \"X\", \"J\", \"V\", \"S\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ar\"] = { closeText: \"إغلاق\", prevText: \"&#x3C;السابق\", nextText: \"التالي&#x3E;\", currentText: \"اليوم\", monthNames: [\"يناير\", \"ٝبراير\", \"مارس\", \"أبريل\", \"مايو\", \"يونيو\", \"يوليو\", \"أغسطس\", \"سبتمبر\", \"أكتوبر\", \"نوٝمبر\", \"ديسمبر\"], monthNamesShort: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], dayNames: [\"الأحد\", \"الاثنين\", \"الثلاثاء\", \"الأربعاء\", \"الخميس\", \"الجمعة\", \"السبت\"], dayNamesShort: [\"أحد\", \"اثنين\", \"ثلاثاء\", \"أربعاء\", \"خميس\", \"جمعة\", \"سبت\"], dayNamesMin: [\"ح\", \"ن\", \"ث\", \"ر\", \"خ\", \"ج\", \"س\"], weekHeader: \"أسبوع\", dateFormat: \"dd/mm/yy\", firstDay: 0, isRTL: true, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"cs\"] = { closeText: \"Zavřít\", prevText: \"&#x3C;Dříve\", nextText: \"Později&#x3E;\", currentText: \"Nyní\", monthNames: [\"leden\", \"únor\", \"březen\", \"duben\", \"květen\", \"ĝerven\", \"ĝervenec\", \"srpen\", \"září\", \"říjen\", \"listopad\", \"prosinec\"], monthNamesShort: [\"led\", \"úno\", \"bře\", \"dub\", \"kvě\", \"ĝer\", \"ĝvc\", \"srp\", \"zář\", \"říj\", \"lis\", \"pro\"], dayNames: [\"neděle\", \"pondělí\", \"úterý\", \"středa\", \"ĝtvrtek\", \"pátek\", \"sobota\"], dayNamesShort: [\"ne\", \"po\", \"út\", \"st\", \"ĝt\", \"pá\", \"so\"], dayNamesMin: [\"ne\", \"po\", \"út\", \"st\", \"ĝt\", \"pá\", \"so\"], weekHeader: \"Týd\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"de\"] = { closeText: \"Schließen\", prevText: \"&#x3C;Zurück\", nextText: \"Vor&#x3E;\", currentText: \"Heute\", monthNames: [\"Januar\", \"Februar\", \"März\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mär\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"], dayNames: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"], dayNamesShort: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], dayNamesMin: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], weekHeader: \"KW\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"fr\"] = { closeText: \"Fermer\", prevText: \"Précédent\", nextText: \"Suivant\", currentText: \"Aujourd'hui\", monthNames: [\"janvier\", \"février\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"août\", \"septembre\", \"octobre\", \"novembre\", \"décembre\"], monthNamesShort: [\"janv.\", \"févr.\", \"mars\", \"avr.\", \"mai\", \"juin\", \"juil.\", \"août\", \"sept.\", \"oct.\", \"nov.\", \"déc.\"], dayNames: [\"dimanche\", \"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\"], dayNamesShort: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"], dayNamesMin: [\"D\", \"L\", \"M\", \"M\", \"J\", \"V\", \"S\"], weekHeader: \"Sem.\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"it\"] = { closeText: \"Chiudi\", prevText: \"&#x3C;Prec\", nextText: \"Succ&#x3E;\", currentText: \"Oggi\", monthNames: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"], monthNamesShort: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"], dayNames: [\"Domenica\", \"Lunedì\", \"Martedì\", \"Mercoledì\", \"Giovedì\", \"Venerdì\", \"Sabato\"], dayNamesShort: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"], dayNamesMin: [\"Do\", \"Lu\", \"Ma\", \"Me\", \"Gi\", \"Ve\", \"Sa\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ja\"] = { closeText: \"閉㝘る\", prevText: \"&#x3C;剝\", nextText: \"次&#x3E;\", currentText: \"今日\", monthNames: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"], monthNamesShort: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"], dayNames: [\"日曜日\", \"月曜日\", \"睫曜日\", \"水曜日\", \"木曜日\", \"金曜日\", \"土曜日\"], dayNamesShort: [\"日\", \"月\", \"睫\", \"水\", \"木\", \"金\", \"土\"], dayNamesMin: [\"日\", \"月\", \"睫\", \"水\", \"木\", \"金\", \"土\"], weekHeader: \"週\", dateFormat: \"yy/mm/dd\", firstDay: 0, isRTL: false, showMonthAfterYear: true, yearSuffix: \"年\" };\nbizagi.util.datepickerResource[\"nl\"] = { closeText: \"Sluiten\", prevText: \"←\", nextText: \"→\", currentText: \"Vandaag\", monthNames: [\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"], monthNamesShort: [\"jan\", \"feb\", \"mrt\", \"apr\", \"mei\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"], dayNames: [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"], dayNamesShort: [\"zon\", \"maa\", \"din\", \"woe\", \"don\", \"vri\", \"zat\"], dayNamesMin: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"], weekHeader: \"Wk\", dateFormat: \"dd-mm-yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"pt\"] = { closeText: \"Fechar\", prevText: \"Anterior\", nextText: \"Seguinte\", currentText: \"Hoje\", monthNames: [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"], monthNamesShort: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"], dayNames: [\"Domingo\", \"Segunda-feira\", \"Terça-feira\", \"Quarta-feira\", \"Quinta-feira\", \"Sexta-feira\", \"Sábado\"], dayNamesShort: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sáb\"], dayNamesMin: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sáb\"], weekHeader: \"Sem\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ru\"] = { closeText: \"Закрыть\", prevText: \"&#x3C;Пред\", nextText: \"След&#x3E;\", currentText: \"Сегоднѝ\", monthNames: [\"Январь\", \"Февраль\", \"Март\", \"Нпрель\", \"Май\", \"Июнь\", \"Июль\", \"Нвгуѝт\", \"Сентѝбрь\", \"Октѝбрь\", \"Ноѝбрь\", \"Декабрь\"], monthNamesShort: [\"Янв\", \"Фев\", \"Мар\", \"Нпр\", \"Май\", \"Июн\", \"Июл\", \"Нвг\", \"Сен\", \"Окт\", \"Ноѝ\", \"Дек\"], dayNames: [\"воѝкреѝенье\", \"понедельник\", \"вторник\", \"ѝреда\", \"четверг\", \"пѝтница\", \"ѝуббота\"], dayNamesShort: [\"вѝк\", \"пнд\", \"втр\", \"ѝрд\", \"чтв\", \"птн\", \"ѝбт\"], dayNamesMin: [\"Вѝ\", \"Пн\", \"Вт\", \"Ср\", \"Чт\", \"Пт\", \"Сб\"], weekHeader: \"Нед\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"zh\"] = { closeText: \"关闭\", prevText: \"&#x3C;上月\", nextText: \"下月&#x3E;\", currentText: \"今天\", monthNames: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"坝月\", \"坝一月\", \"坝二月\"], monthNamesShort: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"坝月\", \"坝一月\", \"坝二月\"], dayNames: [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"], dayNamesShort: [\"周日\", \"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\"], dayNamesMin: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"], weekHeader: \"周\", dateFormat: \"yy-mm-dd\", firstDay: 1, isRTL: false, showMonthAfterYear: true, yearSuffix: \"年\" };\n\n//--  **Communication between Workportal and LiveProcesses**\n\n// Create new Live Process\nbizagi.util.liveProcessesEvents = bizagi.util.liveProcessesEvents || {};\nbizagi.util.liveProcessesEvents.newLiveProcess = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.newLiveProcess.initEvent('new-live-process', true, true);\n\n// Event for changing route inside LiveProcesses\nbizagi.util.liveProcessesEvents.routeEvents = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.routeEvents.initEvent('parent-route-events', true, true);\nbizagi.util.liveProcessesEvents.routeEvents.route = '/';\n\n// Verify save condition\nbizagi.util.liveProcessesEvents.saveEvent = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.saveEvent.initEvent('save-live', true, true);\nbizagi.util.liveProcessesEvents.saveEvent.lastWidget = '';\nbizagi.util.liveProcessesEvents.saveEvent.nextWidget = '';\n\nbizagi.util.liveSave = function (widgetName) {\n  bizagi.util.liveProcessesEvents.saveEvent.nextWidget = widgetName;\n  var deferredLiveSave = $.Deferred();\n  var indeX = 0;\n  // next try/catch avoids crossdomain messages in the middle of \"Next button\" execution\n  try {\n    indeX = $(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess');\n  }\n  catch (e) {\n    indeX = -1;\n  }\n  if (\n  (widgetName !== bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY || widgetName === bizagi.util.liveProcessesEvents.saveEvent.lastWidget) &&\n  $(document).find('iframe').length > 0 && indeX > 0)\n  {\n    bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise = deferredLiveSave;\n    document.dispatchEvent(bizagi.util.liveProcessesEvents.saveEvent);\n  } else {\n    deferredLiveSave.resolve();\n  }\n  $.when(deferredLiveSave).done(function () {bizagi.util.liveProcessesEvents.saveEvent.lastWidget = widgetName;});\n  return deferredLiveSave.promise();\n};\n\n/**\r\n    * CryptoJS MD5\r\n    * @param {} message\r\n    * @returns {}\r\n    */\nbizagi.util.md5 = function (message) {\n  // Code here will be linted with JSHint.\n  /* jshint ignore:start */\n  var CryptoJS = CryptoJS || function (s, p) {var m = {},l = m.lib = {},n = function n() {},r = l.Base = { extend: function extend(b) {n.prototype = this;var h = new n();b && h.mixIn(b);h.hasOwnProperty(\"init\") || (h.init = function () {h.$super.init.apply(this, arguments);});h.init.prototype = h;h.$super = this;return h;}, create: function create() {var b = this.extend();b.init.apply(b, arguments);return b;}, init: function init() {}, mixIn: function mixIn(b) {for (var h in b) {b.hasOwnProperty(h) && (this[h] = b[h]);}b.hasOwnProperty(\"toString\") && (this.toString = b.toString);}, clone: function clone() {return this.init.prototype.extend(this);} },q = l.WordArray = r.extend({ init: function init(b, h) {b = this.words = b || [];this.sigBytes = h != p ? h : 4 * b.length;}, toString: function toString(b) {return (b || t).stringify(this);}, concat: function concat(b) {var h = this.words,a = b.words,j = this.sigBytes;b = b.sigBytes;this.clamp();if (j % 4) for (var g = 0; g < b; g++) {h[j + g >>> 2] |= (a[g >>> 2] >>> 24 - 8 * (g % 4) & 255) << 24 - 8 * ((j + g) % 4);} else if (65535 < a.length) for (g = 0; g < b; g += 4) {h[j + g >>> 2] = a[g >>> 2];} else h.push.apply(h, a);this.sigBytes += b;return this;}, clamp: function clamp() {var b = this.words,h = this.sigBytes;b[h >>> 2] &= 4294967295 << 32 - 8 * (h % 4);b.length = s.ceil(h / 4);}, clone: function clone() {var b = r.clone.call(this);b.words = this.words.slice(0);return b;}, random: function random(b) {for (var h = [], a = 0; a < b; a += 4) {h.push(4294967296 * s.random() | 0);}return new q.init(h, b);} }),v = m.enc = {},t = v.Hex = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {var k = a[j >>> 2] >>> 24 - 8 * (j % 4) & 255;g.push((k >>> 4).toString(16));g.push((k & 15).toString(16));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j += 2) {g[j >>> 3] |= parseInt(b.substr(j, 2), 16) << 24 - 4 * (j % 8);}return new q.init(g, a / 2);} },a = v.Latin1 = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {g.push(String.fromCharCode(a[j >>> 2] >>> 24 - 8 * (j % 4) & 255));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j++) {g[j >>> 2] |= (b.charCodeAt(j) & 255) << 24 - 8 * (j % 4);}return new q.init(g, a);} },u = v.Utf8 = { stringify: function stringify(b) {try {return decodeURIComponent(escape(a.stringify(b)));} catch (g) {throw Error(\"Malformed UTF-8 data\");}}, parse: function parse(b) {return a.parse(unescape(encodeURIComponent(b)));} },g = l.BufferedBlockAlgorithm = r.extend({ reset: function reset() {this._data = new q.init();this._nDataBytes = 0;}, _append: function _append(b) {\"string\" == typeof b && (b = u.parse(b));this._data.concat(b);this._nDataBytes += b.sigBytes;}, _process: function _process(b) {var a = this._data,g = a.words,j = a.sigBytes,k = this.blockSize,m = j / (4 * k),m = b ? s.ceil(m) : s.max((m | 0) - this._minBufferSize, 0);b = m * k;j = s.min(4 * b, j);if (b) {for (var l = 0; l < b; l += k) {this._doProcessBlock(g, l);}l = g.splice(0, b);a.sigBytes -= j;}return new q.init(l, j);}, clone: function clone() {var b = r.clone.call(this);b._data = this._data.clone();return b;}, _minBufferSize: 0 });l.Hasher = g.extend({ cfg: r.extend(), init: function init(b) {this.cfg = this.cfg.extend(b);this.reset();}, reset: function reset() {g.reset.call(this);this._doReset();}, update: function update(b) {this._append(b);this._process();return this;}, finalize: function finalize(b) {b && this._append(b);return this._doFinalize();}, blockSize: 16, _createHelper: function _createHelper(b) {return function (a, g) {return new b.init(g).finalize(a);};}, _createHmacHelper: function _createHmacHelper(b) {return function (a, g) {return new k.HMAC.init(b, g).finalize(a);};} });var k = m.algo = {};return m;}(Math);(function (s) {function p(a, k, b, h, l, j, m) {a = a + (k & b | ~k & h) + l + m;return (a << j | a >>> 32 - j) + k;}function m(a, k, b, h, l, j, m) {a = a + (k & h | b & ~h) + l + m;return (a << j | a >>> 32 - j) + k;}function l(a, k, b, h, l, j, m) {a = a + (k ^ b ^ h) + l + m;return (a << j | a >>> 32 - j) + k;}function n(a, k, b, h, l, j, m) {a = a + (b ^ (k | ~h)) + l + m;return (a << j | a >>> 32 - j) + k;}for (var r = CryptoJS, q = r.lib, v = q.WordArray, t = q.Hasher, q = r.algo, a = [], u = 0; 64 > u; u++) {a[u] = 4294967296 * s.abs(s.sin(u + 1)) | 0;}q = q.MD5 = t.extend({ _doReset: function _doReset() {this._hash = new v.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function _doProcessBlock(g, k) {for (var b = 0; 16 > b; b++) {var h = k + b,w = g[h];g[h] = (w << 8 | w >>> 24) & 16711935 | (w << 24 | w >>> 8) & 4278255360;}var b = this._hash.words,h = g[k + 0],w = g[k + 1],j = g[k + 2],q = g[k + 3],r = g[k + 4],s = g[k + 5],t = g[k + 6],u = g[k + 7],v = g[k + 8],x = g[k + 9],y = g[k + 10],z = g[k + 11],A = g[k + 12],B = g[k + 13],C = g[k + 14],D = g[k + 15],c = b[0],d = b[1],e = b[2],f = b[3],c = p(c, d, e, f, h, 7, a[0]),f = p(f, c, d, e, w, 12, a[1]),e = p(e, f, c, d, j, 17, a[2]),d = p(d, e, f, c, q, 22, a[3]),c = p(c, d, e, f, r, 7, a[4]),f = p(f, c, d, e, s, 12, a[5]),e = p(e, f, c, d, t, 17, a[6]),d = p(d, e, f, c, u, 22, a[7]),c = p(c, d, e, f, v, 7, a[8]),f = p(f, c, d, e, x, 12, a[9]),e = p(e, f, c, d, y, 17, a[10]),d = p(d, e, f, c, z, 22, a[11]),c = p(c, d, e, f, A, 7, a[12]),f = p(f, c, d, e, B, 12, a[13]),e = p(e, f, c, d, C, 17, a[14]),d = p(d, e, f, c, D, 22, a[15]),c = m(c, d, e, f, w, 5, a[16]),f = m(f, c, d, e, t, 9, a[17]),e = m(e, f, c, d, z, 14, a[18]),d = m(d, e, f, c, h, 20, a[19]),c = m(c, d, e, f, s, 5, a[20]),f = m(f, c, d, e, y, 9, a[21]),e = m(e, f, c, d, D, 14, a[22]),d = m(d, e, f, c, r, 20, a[23]),c = m(c, d, e, f, x, 5, a[24]),f = m(f, c, d, e, C, 9, a[25]),e = m(e, f, c, d, q, 14, a[26]),d = m(d, e, f, c, v, 20, a[27]),c = m(c, d, e, f, B, 5, a[28]),f = m(f, c, d, e, j, 9, a[29]),e = m(e, f, c, d, u, 14, a[30]),d = m(d, e, f, c, A, 20, a[31]),c = l(c, d, e, f, s, 4, a[32]),f = l(f, c, d, e, v, 11, a[33]),e = l(e, f, c, d, z, 16, a[34]),d = l(d, e, f, c, C, 23, a[35]),c = l(c, d, e, f, w, 4, a[36]),f = l(f, c, d, e, r, 11, a[37]),e = l(e, f, c, d, u, 16, a[38]),d = l(d, e, f, c, y, 23, a[39]),c = l(c, d, e, f, B, 4, a[40]),f = l(f, c, d, e, h, 11, a[41]),e = l(e, f, c, d, q, 16, a[42]),d = l(d, e, f, c, t, 23, a[43]),c = l(c, d, e, f, x, 4, a[44]),f = l(f, c, d, e, A, 11, a[45]),e = l(e, f, c, d, D, 16, a[46]),d = l(d, e, f, c, j, 23, a[47]),c = n(c, d, e, f, h, 6, a[48]),f = n(f, c, d, e, u, 10, a[49]),e = n(e, f, c, d, C, 15, a[50]),d = n(d, e, f, c, s, 21, a[51]),c = n(c, d, e, f, A, 6, a[52]),f = n(f, c, d, e, q, 10, a[53]),e = n(e, f, c, d, y, 15, a[54]),d = n(d, e, f, c, w, 21, a[55]),c = n(c, d, e, f, v, 6, a[56]),f = n(f, c, d, e, D, 10, a[57]),e = n(e, f, c, d, t, 15, a[58]),d = n(d, e, f, c, B, 21, a[59]),c = n(c, d, e, f, r, 6, a[60]),f = n(f, c, d, e, z, 10, a[61]),e = n(e, f, c, d, j, 15, a[62]),d = n(d, e, f, c, x, 21, a[63]);b[0] = b[0] + c | 0;b[1] = b[1] + d | 0;b[2] = b[2] + e | 0;b[3] = b[3] + f | 0;}, _doFinalize: function _doFinalize() {var a = this._data,k = a.words,b = 8 * this._nDataBytes,h = 8 * a.sigBytes;k[h >>> 5] |= 128 << 24 - h % 32;var l = s.floor(b / 4294967296);k[(h + 64 >>> 9 << 4) + 15] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;k[(h + 64 >>> 9 << 4) + 14] = (b << 8 | b >>> 24) & 16711935 | (b << 24 | b >>> 8) & 4278255360;a.sigBytes = 4 * (k.length + 1);this._process();a = this._hash;k = a.words;for (b = 0; 4 > b; b++) {h = k[b], k[b] = (h << 8 | h >>> 24) & 16711935 | (h << 24 | h >>> 8) & 4278255360;}return a;}, clone: function clone() {var a = t.clone.call(this);a._hash = this._hash.clone();return a;} });r.MD5 = t._createHelper(q);r.HmacMD5 = t._createHmacHelper(q);})(Math);\n  /* jshint ignore:end */\n  return CryptoJS.MD5(message).toString();\n};\n\n/**\r\n    * Replace all coincidences in a text, based on key value object\r\n    *  @argument mapDataToReplace = {\"keyTofind\":\"valueToReplace\",...}\r\n    */\nbizagi.util.multiReplace = function (text, mapDataToReplace) {\n  mapDataToReplace = mapDataToReplace || {};\n\n  for (var key in mapDataToReplace) {\n    var reg = new RegExp(key, \"g\");\n    text = text.replace(reg, mapDataToReplace[key]);\n  }\n  return text;\n};\n/*\r\n    *   Creates a replace all method that is left from the String Class\r\n    */\nbizagi.util.replaceAll = function (text, pcFrom, pcTo) {\n  // Call the method located in bizagi.loader\n  return bizagi.replaceAll(text, pcFrom, pcTo);\n};\n/*\r\n    *replaces global expressions regulars\r\n    */\nbizagi.util.replaceAllGlobalRegExp = function (text, pcFrom, pcTo) {\n  var temp = text;\n\n  var re = new RegExp(pcFrom, \"g\");\n  temp = temp.replace(re, pcTo);\n\n  return temp.toString();\n};\n// Also append it to the string class\nString.prototype.replaceAll = function (pcFrom, pcTo) {\n  return bizagi.util.replaceAll(this, pcFrom, pcTo);\n};\n// Capitalize a string\nString.prototype.capitalize = function () {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n};\n// Add this (Create an starts with function) to the string prototype\nString.prototype.startsWith = function (str) {\n  return this.slice(0, str.length) == str;\n};\n\n/**\r\n    * get Initials of a string/name and if the name is empty return the anonymized icon\r\n    */\nString.prototype.getInitials = function () {\n  var initials = \"\";\n  if (this.length === 0) {\n    initials = '<svg  class=\"bz-icon bz-icon-24 bz-icon-svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-user-deactivated\"></use></svg>';\n  } else {\n    try {\n      var removeRepeatSpaces = this.replace(/  +/g, ' ');\n      var words = removeRepeatSpaces.split(' ');\n      for (var i = 0; i < words.length; i += 1) {\n        initials += words[i][0] || '';\n        if (initials.length == 2) {\n          break;\n        }\n      }\n    } catch (e) {}\n\n    initials = initials.toUpperCase();\n  }\n  return initials;\n};\n\nMath.sign = Math.sign || function (x) {\n  x = +x; // convert to a number\n  if (x === 0 || isNaN(x)) {\n    return x;\n  }\n  return x > 0 ? 1 : -1;\n};\n\n// Add a clone to the object prototype\nbizagi.clone = function (obj) {\n  if (obj == undefined) return undefined;\n  if (obj == null) return null;\n  return JSON.parse(JSON.encode(obj));\n};\n// Measures the pixel size of a string\nbizagi.measureString = function (string, fontSize) {\n  var test = $(\"<span/>\").appendTo(\"body\");\n  test.text(string);\n  if (fontSize)\n  test.css(\"font-size\", fontSize);\n  var width = test.width();\n  test.detach();\n  return width;\n};\n/*\r\n    *   Creates a trim method\r\n    */\nbizagi.util.trim = function (text) {\n  if (typeof text === \"undefined\" || text == null)\n  return text;\n  // Call the method located in bizagi.loader\n  return text.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n};\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n/*\r\n    * Method to detect IE7 visitors\r\n    */\nbizagi.util.isIE7 = function () {\n  return bizagi.util.isIE() && document.documentMode == 7;\n};\n/*\r\n    * Method to detect IE8 visitors\r\n    */\nbizagi.util.isIE8 = function () {\n  return bizagi.util.isIE() && document.documentMode == 8;\n};\n/*\r\n    * Method to detect IE9 visitors\r\n    */\nbizagi.util.isIE9 = function () {\n  return bizagi.util.isIE() && document.documentMode == 9;\n};\n/*\r\n    * Method to detect IE10 visitors\r\n    */\nbizagi.util.isIE10 = function () {\n  return bizagi.util.isIE() && document.documentMode == 10;\n};\n/*\r\n    * Method to detect IE11 visitors\r\n    */\nbizagi.util.isIE11 = function () {\n  return !!navigator.userAgent.match(/Trident\\/7.0/) && !navigator.userAgent.match(/MSIE/i);\n};\n\n/*\r\n    * Method to detect IE11 or lower\r\n    */\nbizagi.util.isIE11OrLower = function () {\n  return bizagi.util.isIE11() || bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE10 or lower\r\n    */\nbizagi.util.isIE10OrLower = function () {\n  return bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE12 or Edge(Windows 10) visitors\r\n    */\nbizagi.util.isEdge = function () {\n  if (/Edge\\/*./i.test(navigator.userAgent)) {\n    return true;\n  }\n  return false;\n};\n/*\r\n    * Method to detect IE visitors\r\n    */\nbizagi.util.isIE = function () {\n  return navigator.appName.indexOf(\"Internet Explorer\") > 0 || !!navigator.userAgent.match(/Trident/);\n};\n/*\r\n    *   Object Values wrapper\r\n    */\nbizagi.util.objectValues = function (array) {\n  if (bizagi.util.isIE())\n  return Object.keys(array).map(function (itm) {return array[itm];});else\n\n  return Object.values(array);\n};\n/*\r\n    * Get the specific version of IE \r\n    */\nbizagi.util.getIEVersion = function () {\n  var sAgent = window.navigator.userAgent;\n  var indexMSIE = sAgent.indexOf(\"MSIE\");\n  var version = 0;\n  if (indexMSIE > 0) {\n    version = parseInt(sAgent.substring(indexMSIE + 5, sAgent.indexOf(\".\", indexMSIE)));\n  } else\n  if (!!navigator.userAgent.match(/Trident/) || window.navigator.userAgent.indexOf(\"Edge\") > -1) {// Condition Check IF IE 11 and or MS Edge\n    version = 11;\n  }\n  return version;\n};\n/*\r\n    * Method to detect is chrome browser\r\n    */\nbizagi.util.isChrome = function () {\n  return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n/*\r\n    * Method to detect is Firefox browser\r\n    */\nbizagi.util.isFirefox = function (minVersion) {\n  function getVersion() {\n    var ua = navigator.userAgent,tem,M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return { name: 'IE', version: tem[1] || '' };\n    }\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\bOPR|Edge\\/(\\d+)/);\n      if (tem != null) {return { name: 'Opera', version: tem[1] };}\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {M.splice(1, 1, tem[1]);}\n    return {\n      name: M[0],\n      version: M[1] };\n\n  }\n  return /Firefox/.test(navigator.userAgent) && (minVersion === undefined || minVersion <= getVersion().version);\n};\n/*\r\n    * return the browser name this function can be modified if needs more browsers\r\n    */\nbizagi.util.getBrowser = function () {\n  var bw = \"undetected\";\n  if (bizagi.util.isChrome()) {\n    bw = \"chrome\";\n  } else if (bizagi.util.isFirefox()) {\n    bw = \"firefox\";\n  } else if (bizagi.util.isEdge()) {\n    bw = \"edge\";\n  } else if (bizagi.util.isIE11()) {\n    bw = \"ie11\";\n\n  } else if (bizagi.util.isIE10()) {\n    bw = \"ie10\";\n  }\n  return bw;\n};\n\n/**\r\n    * Empty Navigator Info\r\n    */\nbizagi.util.emptyNavigatorInfo = function () {\n  if (bizagi.navigator && bizagi.navigator.info) {\n    bizagi.navigator.info = {};\n  }\n};\n\n/**\r\n    * Auto call setting the browser class for css specific selectors, etc..\r\n    */\n$(document).ready(function () {\n  $(\"html\").\n  addClass(\"browser-\" + bizagi.util.getBrowser()).\n  addClass(\"device-\" + bizagi.detectDevice());\n  if (bizagi.language) {\n    var language = bizagi.language.split(\"-\");\n    if (language && language.length > 0) {\n      $(\"html\").addClass(\"language-\" + language[0]);\n    }\n  }\n});\n\n\n\n\n/**\r\n     * Method to detect iOS version X and apply styles to that device \r\n     */\nbizagi.util.setIphoneXOverrides = function () {\n  if (bizagi.util.isNativePluginSupported() && typeof bizagiapp.isIphoneX !== 'undefined') {\n    bizagiapp.isIphoneX(function (value) {\n      var flagIphoneX = value;\n      var styleIphoneX = \".bz-menu-home .bz-menu-carousel .bz-menu-carousel-seat{padding:0 16px 16px}.bz-home-header .km-navbar{padding:35px 16px 5px}#menuHome .bz-home-header .km-navbar{padding:30px 3px 0}#menuHome .km-navbar .km-rightitem{font-size:19px;right:.4em;top:32px}#menuHome .km-navbar .km-leftitem{font-size:24px;left:0;top:25px}#taskFeed .km-navbar .km-rightitem{font-size:19px;top:25px;right:0}#taskFeed .km-navbar .km-leftitem{font-size:24px;top:20px;left:0}#homePortal #menuHome .km-view-title .km-buttongroup{margin-left:0;top:2px}.bz-render-header,.search-container{padding-top:25px}#activity-search,.search-container .bz-wp-mu-button-search{padding-top:40px}#content-newCase-drawer{padding-top:25px}#menuHome{background:#EBEDF1!important}.km-flat .km-content{background-color:#fff} .k-loading-mask{top:0!important}\";\n\n      if (flagIphoneX === 'true') {\n        $('head').append('<style type=\"text/css\" id=\"iphoneXStyle\"></style>');\n        $('#iphoneXStyle').text(styleIphoneX);\n\n      } else if (bizagi.util.isiOSDevice()) {\n        $('head').append('<style type=\"text/css\" id=\"iphoneStyle\"></style>');\n        var paddingStyle = \"#homePortal .bz-home-header > div{padding-top:.8em}\";\n        $('#iphoneStyle').text(paddingStyle);\n      }\n    });\n  }\n};\n\nbizagi.util.isString = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object String]\";\n};\n\nbizagi.util.isObject = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Object]\";\n};\n\nbizagi.util.isArray = function (value) {\n  return Array.isArray(value);\n};\nbizagi.util.isNull = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Null]\";\n};\nbizagi.util.isBoolean = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Boolean]\";\n};\n\n/*\r\n    *   Method to detect IE version\r\n    */\nbizagi.util.getInternetExplorerVersion = function () {\n  if (!bizagi.util.isIE())\n  return -1;\n  return Number(document.documentMode);\n};\n/*  \r\n    *   Detect a device based on the width\r\n    */\nbizagi.util.detectDevice = function () {\n  // Call the method located in bizagi.loader\n  return bizagi.detectDevice();\n};\n\n// Check if a string is number\nbizagi.util.isNumeric = function (n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\n// Check if a string is GUID\nbizagi.util.isGUID = function (n) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n);\n};\n// Throw not implemented exception\nbizagi.util.mustImplement = function (notImplementedMethod) {\n  try {\n    console.log(\"Not implemented exception: \" + notImplementedMethod);\n  } catch (exe) {\n  } //IE console variable not exist\n  //throw \"You must implement \" + notImplementedMethod;\n};\n// Encodes the xpath \nbizagi.util.encodeXpath = function (xpath) {\n  if (bizagi.util.isEmpty(xpath) || typeof xpath.replaceAll === \"undefined\")\n  return \"\";\n  return xpath.replaceAll(\".\", \"_\").replaceAll(\"=\", \"_\").replaceAll(\"[\", \"_\").replaceAll(\"]\", \"_\");\n};\n// Parses a value to return the correct boolean value\nbizagi.util.parseBoolean = function (value) {\n  if (value === undefined) {\n    return null;\n  }\n\n  if (value === null) {\n    return null;\n  }\n\n  if (value === '') {\n    return null;\n  }\n\n  // Parse true values\n  if (value === true || value === 1 || value.toString() === \"true\" || value === \"1\") {\n    return true;\n  }\n  if (value.toString().toLowerCase() === \"true\") {\n    return true;\n  }\n\n  // Parse false values\n  if (value !== null && value === false || value === 0 || value.toString() === \"false\" || value === \"0\") {\n    return false;\n  }\n  if (value.toString().toLowerCase() === \"false\") {\n    return false;\n  }\n\n  return null;\n};\n/*\r\n    *   Checks if a given string is empty\r\n    */\nbizagi.util.isEmpty = function (value) {\n  if (value === 0)\n  return false;\n\n  if (value === undefined || value === null || value === \"\") {\n    return true;\n  }\n\n  if (typeof value === \"Array\") {\n    return value.length == 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n    return value.length === 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    if ($.isEmptyObject(value)) {\n      return true;\n    } else {\n      return bizagi.util.isEmptyCombo(value);\n    }\n  }\n\n  // Side effect - I can't delete the last item in the multiselect and searchlist\n  /* if (value == \"{\\\"value\\\":[]}\"){\r\n       return true;\r\n   }  */\n\n  return false;\n};\n\nbizagi.util.isEmptyCombo = function (object) {\n  if (Object.prototype.toString.apply(object) === \"[object Object]\") {\n    var property,id = false,\n    value = false,\n    other = false;\n    for (property in object) {\n      if (object.hasOwnProperty(property)) {\n        if (property === \"id\") {\n          id = true;\n        } else {\n          if (property === \"value\") {\n            value = true;\n          } else {\n            other = true;\n          }\n        }\n        if (other) {\n          return false;\n        }\n      }\n    }\n    if (id) {\n      if (object[\"id\"] === \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n  return undefined;\n};\n\n/**\r\n    * Decode data from encodeURI charset\r\n    */\nbizagi.util.decodeURI = function (value) {\n  value = value || \"\";\n  var finishDecoded = false;\n  var decodedValue = value;\n  var infinityControl;\n\n  // Try to decode data value\n  while (!finishDecoded) {\n    try {\n      infinityControl = decodeURI(decodedValue);\n      if (bizagi.util.hasNonVisibleChars(infinityControl)) {\n        decodedValue = value;\n        break;\n      }\n      if (infinityControl == decodedValue) {\n        finishDecoded = true;\n      } else {\n        decodedValue = infinityControl;\n      }\n    } catch (e) {\n      finishDecoded = true;\n    }\n  }\n\n  return decodedValue;\n};\n\nbizagi.util.hasNonVisibleChars = function (value) {\n  value = value || \"\";\n  var length = value.length;\n  var i = 0,\n  result = false,\n  ch;\n  for (; i < length;) {\n    ch = value.charCodeAt(i++);\n    if (ch < 32 || ch > 126) {\n      result = true;\n      break;\n    }\n  }\n  return result;\n};\n\n/* \r\n    *   Converts a percent into a number\r\n    */\nbizagi.util.percent2Number = function (value) {\n  return Number(String(value).replace(\"%\", \"\"));\n};\n/*\r\n    *   Check if a object is empty\r\n    */\nbizagi.util.isObjectEmpty = function (obj) {\n  if (obj.length > 0)\n  return false;\n  return true;\n};\n/*\r\n    *   Check if a map object is empty\r\n    */\nbizagi.util.isMapEmpty = function (map) {\n  // First we validate a special case\n  if (map.length == 1 && map[0].length == 0)\n  return true;\n  // Then we do normal validation\n  for (var key in map) {\n    if (map.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n};\n/*\r\n    *   Replaces a matched selector in the container for the specified \"replace\" element\r\n    */\nbizagi.util.replaceSelector = function (container, selector, replace) {\n  // Replace children tag\n  var elementToReplace = $(selector, container);\n  if (elementToReplace.length > 0) {\n    elementToReplace.append(replace);\n    elementToReplace.children().unwrap();\n  }\n};\n/*\r\n    *   Determines if a control as a scrollbar \r\n    */\nbizagi.util.hasScroll = function (el, direction) {\n  if (el.length)\n  el = el[0];\n  direction = direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n  var result = !!el[direction];\n  if (!result) {\n    el[direction] = 1;\n    result = !!el[direction];\n    el[direction] = 0;\n  }\n  return result;\n};\n\n//TODO: DEPL - Rename this to areIdenticalObjects\nbizagi.util.identicalObjects = function (obj1, obj2) {\n  var self = this;\n\n  if (_typeof(obj1) !== _typeof(obj2)) {\n    return false;\n  }\n\n  if (typeof obj1 === \"function\") {\n    return obj1.toString() === obj2.toString();\n  }\n\n  if (obj1 instanceof Object && obj2 instanceof Object) {\n\n    // Count properties\n    if (bizagi.util.countProps(obj1) !== bizagi.util.countProps(obj2)) {\n      return false;\n    }\n\n    var r = true;\n    for (k in obj1) {\n      r = bizagi.util.identicalObjects(obj1[k], obj2[k]);\n      if (!r) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return obj1 === obj2;\n  }\n};\n\nbizagi.util.countProps = function (obj) {\n  var count = 0;\n  for (k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      count++;\n    }\n  }\n  return count;\n};\n/*\r\n    *   Determines if a element has visibility\r\n    */\nbizagi.util.isScrolledIntoView = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var scrollTop = layout.scrollTop();\n  var elemTop = $(elem).offset().top;\n  var elemBottom = elemTop + $(elem).height();\n  var docViewBottom = scrollTop + $(layout).height();\n  return elemBottom <= docViewBottom && elemTop >= scrollTop;\n};\nbizagi.util.centerElementIntoScroll = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var actualScroll = layout.scrollTop();\n  var elementTop = $(elem).offset().top;\n  var elementHeight = $(elem).height();\n  var offset = 0;\n  if (elementTop > 0) {\n    offset = elementTop + elementHeight;\n  } else {\n    offset = elementTop - elementHeight;\n  }\n  var newTop = actualScroll + offset;\n  layout.scrollTop(newTop);\n};\n/*\r\n    *   Encode a html string\r\n    */\nbizagi.util.encodeHtml = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  return text;\n};\n\n/*\r\n    *   Encode a string as HTML\r\n    */\nbizagi.util.decodeHtmlEntities = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&apos;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\\'');\n  }\n  return text;\n};\n/*\r\n    *   Read the location hash\r\n    */\nbizagi.util.getHashParams = function () {\n  var params = window.location.hash.substring(1).split(\"#\");\n  return params;\n};\n/*\r\n    *   Loads a file on-demand\r\n    */\nbizagi.util.loadFile = function (params) {\n  var defer = new $.Deferred();\n  var url = params && params.src ? params.src : params;\n  var type = params && params.type ? params.type : null;\n\n  bizagi.loader.loadFile({ src: url, type: type }).\n  then(function () {\n    defer.resolve();\n  });\n\n  return defer.promise();\n};\n\n/*\r\n    *   Initializes a webpart on-demand\r\n    */\nbizagi.util.initWebpart = function (webpart, device) {\n  var defer = new $.Deferred();\n\n  device = device || bizagi.detectDevice();\n\n  if (webpart.initialized) {\n    // If already initialized resolve the deferred\n    defer.resolve();\n  } else {\n\n    if (webpart.initializing) {\n      $.when(webpart.loadingDeferred.promise()).\n      done(function () {\n        defer.resolve();\n      });\n    } else {\n\n      webpart.loadingDeferred = new $.Deferred();\n      webpart.initializing = true;\n      bizagi.loader.initWebpart(webpart, device, function () {\n\n        // Resolve deferreds\n        webpart.loadingDeferred.resolve();\n        webpart.initializing = false;\n        defer.resolve();\n      });\n    }\n  }\n\n  return defer.promise();\n};\n/*\r\n    *   Read the query string parameteres\r\n    */\nbizagi.util.getQueryString = function (url) {\n  var params = {};\n  url = url || window.location.href;\n  var query = url.indexOf(\"?\") > 0 ? url.substring(url.indexOf(\"?\") + 1) : \"\";\n  var pairs = query.split(\"&\");\n  for (var i = pairs.length - 1; i >= 0; i--) {\n    var pos = pairs[i].indexOf('=');\n    if (pos == -1)\n    continue;\n    var argname = pairs[i].substring(0, pos);\n    var value = pairs[i].substring(pos + 1);\n    params[argname] = unescape(value);\n  }\n  return params;\n};\n/*\r\n    *   Extend querystring\r\n    */\nbizagi.util.extendQueryString = function (url, additionalParams) {\n  var plainUrl = url.indexOf(\"?\") > 0 ? url.substring(0, url.indexOf(\"?\")) : url;\n  var existingParams = bizagi.util.getQueryString(url);\n  var newParams = $.extend({}, existingParams, additionalParams);\n  return plainUrl + \"?\" + $.param(newParams);\n};\nbizagi.util.getStackTrace = function () {\n  var callstack = [];\n  var isCallstackPopulated = false;\n  try {\n    i.dont.exist += 0; //doesn't exist- that's the point\n  } catch (e) {\n    if (e.stack) {//Firefox\n      var lines = e.stack.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          callstack.push(lines[i]);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    } else if (window.opera && e.message) {//Opera\n      var lines = e.message.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          var entry = lines[i];\n          //Append next line also since it has the file info\n          if (lines[i + 1]) {\n            entry += ' at ' + lines[i + 1];\n            i++;\n          }\n          callstack.push(entry);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    }\n  }\n  if (!isCallstackPopulated) {//IE and Safari\n    var currentFunction = arguments.callee.caller;\n    while (currentFunction) {\n      var fn = currentFunction.toString();\n      var fname = fn.substring(fn.indexOf(\"function\") + 8, fn.indexOf('')) || 'anonymous';\n      callstack.push(fname);\n      currentFunction = currentFunction.caller;\n    }\n  }\n  return callstack;\n};\n/*\r\n    *\thighlight elements\r\n    */\nbizagi.util.highLightElement = function (el) {\n  el.addClass('ui-highlight-control');\n  $.when(\n  setTimeout(function () {\n    el.addClass('ui-highlight-off-control');\n  }, 450)).\n  done(\n  setTimeout(function () {\n    el.removeClass('ui-highlight-control ui-highlight-off-control');\n  }, 800));\n};\n/*\r\n    *\tscroll to bottom\r\n    */\nbizagi.util.autoScrollBottom = function (el) {\n  try {\n    var elScrollHeight;\n    elScrollHeight = el[0].scrollHeight;\n    el.scrollTop(elScrollHeight);\n  } catch (e) {}\n};\n\n/*create auto scroll with limit top and limit bottom */\nbizagi.util.autoScrollInterval = { init: false };\nbizagi.util.autoScroll = function (itemScroll, limitTop, limitBottom, idInterval) {\n  var outSide = false;\n  /* prevent a previous interval */\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval[idInterval] = 0;\n  bizagi.util.autoScrollInterval['init'] = true;\n  $('body').addClass('autoscroll');\n  $('body.autoscroll').mousemove(function (event) {\n    if (event.pageY < limitTop) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollTopInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else if (event.pageY > limitBottom) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollBottomInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else {\n      clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      outSide = false;\n    }\n  });\n};\n/*create auto scroll movement top */\nbizagi.util.autoScrollTopInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  if (itemScroll.scrollTop() == 0) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      if (itemScroll.scrollTop() > 0) {\n        itemScroll.scrollTop(itemScroll.scrollTop() - 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n\n/*create auto scroll movement bottom */\nbizagi.util.autoScrollBottomInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  var valueMaxScrollBottom = $(itemScroll)[0].scrollHeight - $(itemScroll).innerHeight();\n  if (itemScroll.scrollTop() >= valueMaxScrollBottom) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      bizagi.util.autoScrollBottom($('html'));\n      if (itemScroll.scrollTop() < valueMaxScrollBottom) {\n        itemScroll.scrollTop(itemScroll.scrollTop() + 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n/*remove auto scroll*/\nbizagi.util.removeAutoScroll = function (classCSS, idInterval) {\n  $('body.' + classCSS).unbind('mousemove').removeClass(classCSS);\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval.init = false;\n};\n\nbizagi.util.getMaxZIndex = function (selector) {\n  selector = selector || $(\"div,span\");\n  return Math.max.apply(null, $(selector).map(function () {\n    var zIndex;\n    return isNaN(zIndex = parseInt($(this).css(\"z-index\"), 10)) ? 0 : zIndex;\n  }));\n};\n\n/*\r\n    * Creates a native popup to open an url\r\n    */\nbizagi.showPopup = function (url, params, callbackFn) {\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(url, \"\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  // Define args to call the function\n  window.BAPopupWindow = newWindow;\n  window.BAPopupCallback = callbackFn;\n  // Define BACLoseWindow in this context, so the external content calls window.opener.BACloseWindow\n  window.BACloseWindow = function (controls, submitForm) {\n    // Close dialog\n    window.BAPopupWindow.close();\n    // Executes the callback to assign values and submit form (if requested)\n    window.BAPopupCallback(controls, submitForm);\n  };\n};\n/**\r\n    * Creates a native popup in quirks mode to open an url\r\n    * \r\n    * @param url string page to open into popup\r\n    * @param params json {width,height,title,afterLoad}\r\n    */\nbizagi.showQuirksModePopup = function (url, params) {\n  var quirksModePage = window.BIZAGI_PATH_TO_BASE + \"quirks.html\";\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(quirksModePage, \"bizagiPopup\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  window.BAQuirksPopupWindow = newWindow;\n  // Attempto to set a window title\n  setTimeout(function () {\n    try {\n      newWindow.document.title = params.title;\n    } catch (e) {}\n  }, 50);\n  // We use a hack to eval content inside the popup\n  $(newWindow).callInsidePopup(function (windowParams) {\n\n    var $ = windowParams.jQuery;\n    var popupWindow = windowParams.popupWindow;\n    popupWindow.quirksOnLoad = function () {\n      var loadedBody = $(\"body\", popupWindow.document);\n      var iframe = $(\"iframe\", loadedBody);\n      // Remove waiting\n      loadedBody.removeClass(\"ui-bizagi-loading-message\");\n      iframe.show();\n      // Hacks the iframe\n      // This event will fire each time the iframe change its location\n      var afterLoad = windowParams.userParams.afterLoad;\n      if (afterLoad && afterLoad != null) {\n        var callbackParams = $.extend(windowParams.userParams, {\n          popupWindow: popupWindow });\n\n        iframe.callInside(afterLoad, callbackParams);\n      }\n    };\n    var loadingFunction = function loadingFunction() {\n      var body = $(\"body\", popupWindow.document);\n      // Create the iframe inside the new window\n      if (body.length > 0) {\n        body.append(\"<iframe scrolling='yes' id='innerFrameContent' src='\" + windowParams.url + \"' style='width: 100%; height: 100%; display:none' frameborder='0' onload='quirksOnLoad();'></iframe>\");\n      } else {\n        // Try again\n        setTimeout(function () {\n          loadingFunction();\n        }, 50);\n      }\n    };\n    // Execute loading function\n    loadingFunction();\n  }, {\n    jQuery: $,\n    userParams: params,\n    popupWindow: newWindow,\n    url: url });\n\n};\n/*\r\n    *   Returns the resolved result from a promise when the promise has been executed already\r\n    */\nbizagi.resolveResult = function (promise) {\n  var result;\n  promise.done(function (data) {\n    result = data;\n  });\n  return result;\n};\n/*\r\n    *   Creates a popup using overlay style\r\n    */\nbizagi.createPopup = function (params) {\n  var popupName = params.name,\n  onClose = params.onClose,\n  popupHeader;\n  var popupTitle = params.title ? params.title : '';\n  var handleClose = typeof params.handleClose == 'boolean' ? params.handleClose : true;\n  var overlay = $('<div class=\"ui-widget-overlay ' + popupName + '-overlay\" />');\n  var popup = $('<div class=\"' + popupName + '-popup  ui-popup-modal\"/>').appendTo(overlay);\n  var closeButton = $('<div class=\"' + popupName + '-btn-close biz-btn-close\"><i class=\"biz-icon ui-close-btn bz-studio bz-black bz-false_16x16_black\"></i></div>').appendTo(popup);\n  if (params.title) {\n    popupHeader = $('<div class=\"' + popupName + '-popup-header ui-popup-header\" ><h3>' + popupTitle + '</h3></div>').appendTo(popup);\n  }\n\n  var popupContent = $('<div class=\"' + popupName + '-popup-content\" />').appendTo(popup);\n  // Add to body\n  popup.hide();\n  if (params.additionalClass)\n  popup.addClass(params.additionalClass);\n  var container = params.container || \"body\";\n  overlay.appendTo($(container, document));\n\n  if (params.center) {\n    // Resize popup to the center\n    popup.css(\"top\", (overlay.height() - popup.height()) / 2);\n    popup.css(\"left\", (overlay.width() - popup.width()) / 2);\n  }\n  popup.show();\n  // Close handler\n  var closeHandler = function closeHandler(params) {\n    overlay.detach();\n    if (onClose)\n    onClose(params);\n  };\n\n  if (handleClose) {\n    closeButton.click(closeHandler);\n  }\n  // Return a full independent object\n  return {\n    fullPopup: popup,\n    overlay: overlay,\n    content: popupContent,\n    close: function close(params) {\n      closeHandler(params);\n    } };\n\n};\n/*\r\n    * Create an Ok, Cancel popup using bizagi.createPopup()\r\n    */\n\nbizagi.createOkCancelPopup = function (params) {\n  params.name = \"popup-ok-cancel\";\n  var onOk = params.onOk,\n  onCancel = params.onCancel;\n  var popup = bizagi.createPopup(params);\n  var container = $(\"<div></div>\").addClass(\"container-okcancel-popup\");\n  var message = $(\"<div></div>\").addClass(\"message-okcancel-popup ui-light-bevel-border biz-gradient-v\");\n  var buttonsContainer = $(\"<div></div>\").addClass(\"buttonsContainer-okcancel-popup biz-actions-bar\");\n  message.text(params.message);\n  message.appendTo(container);\n  var buttonOk = $(\"<span></span>\").addClass(\"ok-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  var buttonCancel = $(\"<span></span>\").addClass(\"cancel-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  buttonOk.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-ok\"));\n  buttonCancel.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-cancel\"));\n  buttonOk.appendTo(buttonsContainer);\n  buttonCancel.appendTo(buttonsContainer);\n  buttonsContainer.appendTo(container);\n  container.appendTo(popup.content);\n  var okHandler = function okHandler() {\n    popup.close();\n    if (typeof onOk == \"function\") {\n      onOk();\n    }\n  };\n  buttonOk.click(okHandler);\n  var cancelHandler = function cancelHandler() {\n    popup.close();\n    if (typeof onCancel == \"function\") {\n      onCancel();\n    }\n  };\n  buttonCancel.click(cancelHandler);\n  return {\n    close: function close() {\n      popup.close();\n    },\n    ok: function ok() {\n      okHandler();\n    },\n    cancel: function cancel() {\n      cancelHandler();\n    } };\n\n};\n/*\r\n    * Create an generic dialog\r\n    */\nbizagi.dialog = function (params) {\n\n  var dialog = $(\"<div></div>\").addClass(\"biz-dialog\");\n  var msg = $(\"<p></p>\");\n  msg.text(params.message || \"\");\n  msg.appendTo(dialog);\n  dialog.appendTo($(\"body\", document));\n  dialog.dialog({\n    title: params.title,\n    modal: true,\n    buttons: params.buttons,\n    close: function close() {\n      dialog.dialog(\"destroy\");\n    } });\n\n};\n/*\r\n    *   Close the quirks mode popup window\r\n    */\nbizagi.closeQuirksModePopup = function () {\n  var quirksPopup = window.BAQuirksPopupWindow;\n  window.BAQuirksPopupWindow = null;\n  try {\n    if (quirksPopup)\n    quirksPopup.close();\n  } catch (e) {}\n};\n/**\r\n    * Get css class definition to string\r\n    */\nbizagi.getStyle = function (style) {\n  var pathName = location.href.replace(\"/default.aspx\", \"\");\n  var getFontFace = style.match(/@/) ? true : false;\n  var matchFontFace = \"@font-face\";\n  var getAllChildrens = style.match(/\\*/) ? true : false;\n  var matchStyles = new RegExp(style.replace(\"*\", \"\"), \"g\");\n  var stringCss = \"\";\n  var css;\n  if (style == \"\") {\n    return \"\";\n  }\n  var awesomeBrowser = function awesomeBrowser(style) {\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].rules || document.styleSheets[file].cssRules;\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (document.styleSheets[file].href != null && (document.styleSheets[file].href.match(/less.css/g) == null || BIZAGI_ENVIRONMENT == \"release\")) {\n\n            var cssTextOriginal = css[key].cssText ? css[key].cssText : '';\n            // Get all matches\n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n\n                if ($.browser.webkit) {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"\");\n                } else if ($.browser.msie && $.browser.version == \"8.0\") {\n                  stringCss += css[key].style.cssText;\n                } else {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"../../jquery/workportal/css/desktop\");\n                }\n              }\n            } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n              stringCss += css[key].cssText;\n            }\n\n            // Get @font-face\n            if (getFontFace) {\n              if (css[key] != undefined && cssTextOriginal != undefined) {\n                if (cssTextOriginal.indexOf(matchFontFace) != -1) {\n\n                  if ($.browser.webkit) {\n                    stringCss += cssTextOriginal.replace(/jquery\\/workportal\\/css\\/desktop\\//g, \"\").replace(/\\(path\\)/g, \"\");\n                  } else {\n                    stringCss += cssTextOriginal.replace(/\\(path\\)/g, \"../../\");\n                  }\n\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var suckBrowser = function suckBrowser(style) {\n    if ($.browser.version == \"8.0\") {\n      // That is crazy, but it has the same document.styleSheets structure to chrome and mozilla\n      return awesomeBrowser(style);\n    }\n    var lastLevel;\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].cssRules || document.styleSheets[file].rules;\n\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (BIZAGI_ENVIRONMENT == \"release\") {\n            // Get all matches \n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          } else if (css[key].href != null && css[key].href != undefined && css[key].href.match(/less.css/g) == null) {\n            // Get all matches \n            lastLevel = css[key].styleSheet.cssRules || [];\n            for (var n = 0; n < lastLevel.length; n++) {\n              if (getAllChildrens) {\n                if ((lastLevel[n].selectorText != undefined || lastLevel[n].selectorText != null) && lastLevel[n].selectorText.match(matchStyles) != null) {\n                  //stringCss += lastLevel[n].cssText;\n                  stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n                }\n              } else if (lastLevel[n].selectorText != undefined && lastLevel[n].selectorText == style) {\n                // stringCss += lastLevel[n].cssText;\n                stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var result = $.browser.msie ? suckBrowser(style) : awesomeBrowser(style);\n  return result;\n};\n/**\r\n    * Set and retrieve Cookie\r\n    */\nbizagi.cookie = function (key, value, options) {\n  // key and at least value given, set cookie...\n  if (arguments.length > 1 && String(value) !== \"[object Object]\") {\n    options = $.extend({}, options);\n    if (value === null || value === undefined) {\n      options.expires = -1;\n    }\n\n    if (typeof options.expires === 'number') {\n      var days = options.expires,\n      t = options.expires = new Date();\n      t.setDate(t.getDate() + days);\n    }\n\n    value = String(value);\n    return document.cookie = [\n    encodeURIComponent(key), '=',\n    options.raw ? value : encodeURIComponent(value),\n    options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n    options.path ? '; path=' + options.path : '',\n    options.domain ? '; domain=' + options.domain : '',\n    options.secure ? '; secure' : ''].\n    join('');\n  }\n\n  // key and possibly options given, get cookie...\n  options = value || {};\n  var result,decode = options.raw ? function (s) {\n    return s;\n  } : decodeURIComponent;\n  return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;\n};\n/**\r\n    * Returns a random integer between min and max\r\n    */\nbizagi.util.randomNumber = function (min, max) {\n  min = min || 1;\n  max = max || 10000000;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\r\n    * Set global context values\r\n    * @param params onject\r\n    * @param reset boolean\r\n    */\nbizagi.util.setContext = function (params, reset) {\n  params = params || {};\n  reset = reset || false;\n  if (reset) {\n    bizagi.context = {};\n  }\n  $.each(params, function (key, value) {\n    bizagi.context[key] = value;\n  });\n\n  // Fix camel case in idWorkItem Property\n  bizagi.context[\"idWorkItem\"] = bizagi.context[\"idWorkitem\"];\n};\n\nbizagi.util.reloadCSS = function () {\n  var queryString = '?reload=' + new Date().getTime();\n  $('link[rel=\"stylesheet\"]').each(function () {\n    this.href = this.href.replace(/\\?.*|$/, queryString);\n  });\n};\n\n/**\r\n    * Control recursive calls of setTimeout\r\n    * @param params json {name:name of call,call: function call}\r\n    * @return void\r\n    */\nbizagi.util.setInterval = function (params) {\n  var _name = params.name || 'default';\n  var _call = params.call || function () {};\n  var _params = params.params || {};\n  var _singleton = params.singleton || false;\n  var _timeOut = params.timeout || 5000;\n  var _maxIterations = params.iterations || 1000;\n  var _context = params.context || \"true;\";\n  // If callback its diferent to context, remove from hash\n  var _killWhenExitContext = params.hasOwnProperty('killWhenExitContext') ? params.killWhenExitContext : true;\n  bizagi.timeOut = bizagi.timeOut || {};\n  if (bizagi.timeOut[_name] == undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n  // Check if singleton (run once)\n  if (_singleton && bizagi.timeOut[_name] != undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n\n  bizagi.timeOut[_name].push({\n    name: _name,\n    params: _params,\n    call: _call,\n    singleton: _singleton,\n    timeOut: _timeOut,\n    iterations: 0,\n    maxIterations: _maxIterations,\n    context: _context,\n    killWhenExitContext: _killWhenExitContext,\n    itsRunning: false,\n    timeInit: Math.round(new Date().getTime()) });\n\n  var executeTimeOut = function executeTimeOut() {\n    $.each(bizagi.timeOut, function (k, v) {\n      $.each(v, function (key, value) {\n        var now = Math.round(new Date().getTime());\n        var actualIterations = Math.round((now - value.timeInit) / value.timeOut);\n        bizagi.timeOut[value.name][key]['iterations'] = actualIterations;\n        if (actualIterations < value.maxIterations) {\n          // Check context\t\t\t\t\t\n          if (eval(value.context)) {\n            if (!value.itsRunning) {\n              if (value.params)\n                // Create a virtual function to IE\n                if ($.browser.msie) {\n                  var ieFunction = function ieFunction() {\n                    return value.call(value.params);\n                  };\n                }\n\n              bizagi.timeOut[value.name][key]['pointer'] = $.browser.msie ? setInterval(ieFunction, value.timeOut, 'JavaScript') : setInterval(value.call, value.timeOut, value.params);\n              bizagi.timeOut[value.name][key]['itsRunning'] = true;\n            }\n          } else if (value.killWhenExitContext) {\n            bizagi.timeOut[value.name].splice(key, 1);\n            clearTimeout(value.pointer);\n          } else {\n            bizagi.timeOut[value.name][key]['itsRunning'] = false;\n            clearTimeout(value.pointer);\n          }\n        } else {\n          // Cancel timeout and remove call from hash\n          clearTimeout(value.pointer);\n          bizagi.timeOut[value.name].splice(key, 1);\n        }\n      });\n    });\n  };\n\n  if (!bizagi.timeOutRunning) {\n    bizagi.timeOutRunning = true;\n    setInterval(executeTimeOut, 1000);\n  }\n};\nbizagi.util.isDate = function (value) {\n  // type A) dd/mm/aaaa \n  // type B) aaaa/mm/dd\n  // type C) aa/mm/dd\n\n  var dateRegEx_typeA = /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/,\n  dateRegEx_typeB = /^\\d{4}\\/\\d{1,2}\\/\\d{1,2}$/,\n  dateRegEx_typeC = /^\\d{1,2}\\/\\d{1,2}\\/\\d{1,2}$/,\n  timeRegEx = /^\\d{1,2}:\\d{2}(:\\d{2})?(\\s[aApP][mM])?$/,\n  result = false,\n  resultDate = false,\n  hasTime = false,\n  resultTime = false;\n\n  value = value || '';\n\n  var arrayDate = value.toString().split(\" \"),\n  dateField,\n  timeField;\n\n  dateField = arrayDate[0];\n\n  if (dateRegEx_typeA.test(dateField) || dateRegEx_typeB.test(dateField) || dateRegEx_typeC.test(dateField)) {\n    resultDate = true;\n  }\n\n  if (arrayDate.length > 1) {\n\n    timeField = arrayDate[1];\n\n    hasTime = true;\n\n    //Checks if AM/PM included in the time element\n    if (arrayDate.length == 3)\n    timeField = timeField + ' ' + arrayDate[2];\n\n    if (timeRegEx.test(timeField))\n    resultTime = true;\n  }\n\n  if (hasTime)\n  result = resultDate && resultTime;else\n\n  result = resultDate;\n\n  return result;\n};\n/*\r\n    *   Encodes unicode characters into html\r\n    */\nbizagi.util.unicode2htmlencode = function (input) {\n  // Shorten\n  var natCCA = 'charCodeAt';\n  input = input.replace(/\\r\\n/g, '\\n');\n  var i,b1,hex,\n  len = input.length,\n  htmlHex = '';\n  for (i = 0; i < len; i++) {\n    b1 = input[natCCA](i);\n    hex = b1.toString(16);\n    htmlHex += '&#x' + hex + ';';\n  }\n  return htmlHex;\n};\n/*\r\n    *   Gets the head element from the DOM\r\n    */\nbizagi.util.getHeadElement = function () {\n  var hd = document.getElementsByTagName(\"head\")[0];\n  var docEl = document && document.documentElement;\n  if (!hd) {\n    hd = document.createElement(\"head\");\n    docEl.insertBefore(hd, docEl.firstChild);\n  }\n  // replace head so it runs fast next time.\n  bizagi.util.getHeadElement = function () {\n    return hd;\n  };\n  return hd;\n};\n/*\r\n    *   Loads a css text into the current document\r\n    */\nbizagi.util.loadStyle = function (styleText, layoutGuid) {\n\n  var element = document.getElementById(layoutGuid);\n\n  if (styleText && !element) {// less\n    var css = document.createElement(\"style\");\n    css.type = \"text/css\";\n    css.id = layoutGuid;\n    if (css.styleSheet) {// IE\n      css.styleSheet.cssText = styleText;\n    } else {\n      (function (node) {\n        if (css.childNodes.length) {\n          if (css.firstChild.nodeValue !== node.nodeValue) {\n            css.replaceChild(node, css.firstChild);\n          }\n        } else {\n          css.appendChild(node);\n        }\n      })(document.createTextNode(styleText));\n    }\n    bizagi.util.getHeadElement().appendChild(css);\n  }\n};\n\n/*\r\n    *   Loads a css text of the icon widget into the current document\r\n    */\nbizagi.util.loadIconStyle = function (icon, userfieldname) {\n  bizagi.log(\"bizagi.util.loadIconStyle\");\n  var css = document.createElement(\"style\");\n  css.type = \"text/css\";\n\n  var cssText = \".mtool-item-image-\" + userfieldname + \" { background:url(data:image/png;base64,\" + icon + \"); }\";\n  css.innerHTML = cssText;\n\n  bizagi.util.getHeadElement().appendChild(css);\n};\n\nbizagi.util.formatDecimalAndMoneyCell = function (tableData, externalMoneyFormat) {\n  var moneyFormat, decimalFormat, i, j;\n  var externalDecimalFormat = {\n    decimalSymbol: externalMoneyFormat.decimalSeparator,\n    digitGroupSymbol: externalMoneyFormat.groupSeparator,\n    roundToDecimalPlace: externalMoneyFormat.decimalDigits };\n\n  var defaultMoneyFormat = {\n    symbol: \"€\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n\n  moneyFormat = $.extend(defaultMoneyFormat, externalMoneyFormat);\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n\n  for (i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n    if (tableData.columnTitle[i].type.toUpperCase() == \"FLOAT\" || tableData.columnTitle[i].type.toUpperCase() == \"REAL\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        var numberValue = bizagi.util.formatDecimal(tableData.rows[j].fields[i], decimalFormat);\n        //Gets rids of unnecessary zeros\n        if (bizagi.override.removeTrailingZeros === true) {\n          var positive = true;\n          if (numberValue.toString().indexOf(\")\") != -1) {\n            positive = false;\n            numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n          }\n          var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"$1\");\n          re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"\");\n\n          if (!positive) numberValue = \"(\" + numberValue + \")\";\n        }\n        tableData.rows[j].fields[i] = numberValue;\n      }\n    }\n  }\n\n  return tableData;\n};\n\n\nbizagi.util.formatBoolean = function (value) {\n  if (bizagi.util.parseBoolean(value) == true) {\n    return bizagi.localization.getResource(\"render-boolean-yes\");\n  } else if (bizagi.util.parseBoolean(value) == false) {\n    return bizagi.localization.getResource(\"render-boolean-no\");\n  } else {\n    return \"\";\n  }\n};\n\nbizagi.util.formatInvariantBoolean = function (htmlContent) {\n  htmlContent = htmlContent || \"\";\n  $(\".formatBoolean\", htmlContent).not(\".formatted\").each(function (index, element) {\n    var $element = $(element);\n    var content = $element.html();\n    $element.addClass(\"formatted\");\n    try {\n      var formatBoolean = bizagi.util.formatBoolean(content);\n      $element.html(formatBoolean);\n    } catch (e) {\n      $element.html(content);\n    }\n  });\n};\n\nbizagi.util.formatDecimal = function (value, format) {\n  var i = $(\"<i/>\").text(value);\n  if (i.formatCurrency) {i.formatCurrency(format);}\n  return i.text();\n};\n\n/*\r\n    * Format monetary cells\r\n    */\nbizagi.util.formatMonetaryCells = function (tableData, moneyFormat) {\n\n  var defaultFormat = {\n    symbol: \"€\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n\n  moneyFormat = moneyFormat || defaultFormat;\n\n  for (var i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (var j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n  }\n\n  return tableData;\n\n};\n\n/*\r\n    * Format monetary values, the format must have the structure of the next example:\r\n    *\r\n    * var defaultFormat = {\r\n    *        symbol: \"€\",\r\n    *        decimalSeparator: \",\",\r\n    *        groupSeparator: \".\",\r\n    *        decimalDigits: \"2\"\r\n    *    };\r\n    */\nbizagi.util.formatMoney = function (value, format) {\n  var result = \"\",\n  tmpResult = \"\",\n  intSection = \"\",\n  decimalSection = \"\",\n  decimalResult = \"\",\n  isNegative = value < 0;\n\n  if (value == null) {\n    value = \"\";\n  }\n\n  value = value.toString();\n\n  if (value.length >= 1) {\n    var decimalDigitPosition = value.indexOf(\".\");\n\n    if (decimalDigitPosition > 0) {\n      value = bizagi.util.fixDecimalDigits(value, format.decimalDigits);\n      intSection = value.substring(0, decimalDigitPosition).replace(/\\D/g, '');\n    } else {\n      var zeroChar = \"0\";\n\n      for (var i = 0; i < format.decimalDigits; i++) {\n        decimalResult += zeroChar;\n      }\n      intSection = value.replace(/\\D/g, '');\n    }\n\n    //take only the number characters removing other characters\n    value = value.replace(/\\D/g, '');\n    //take the decimal section\n    if (format.decimalDigits > 0) {\n      decimalSection = decimalDigitPosition > 0 ? format.decimalSeparator + value.substring(value.length - format.decimalDigits, value.length) : format.decimalSeparator + decimalResult;\n    } else {\n      decimalSection = \"\";\n    }\n    //insert groupSeparators into int section\n    if (intSection.length > 3) {\n      var count = 0;\n\n      //insert separator from end to begin\n      for (var i = intSection.length - 1; i >= 0; i--) {\n        if (count == 3) {\n          tmpResult += \".\";\n          count = 0;\n        }\n        tmpResult += intSection[i];\n        count += 1;\n      }\n      //revert the string to get the result value\n      for (var i = tmpResult.length - 1; i >= 0; i--) {\n        result += tmpResult[i];\n      }\n    } else {\n      result = intSection;\n    }\n\n    //replace the correct group separator\n    result = result.replaceAll(\".\", format.groupSeparator);\n    //unify all sections and finish format\n    if (isNegative) {\n      var negativeFormat = bizagi.localization.getResource('numericFormat').negativeFormat;\n      result = negativeFormat.replace(\"%s\", format.symbol).replace(\"%n\", result + decimalSection);\n    } else {\n      result = format.symbol + result + decimalSection;\n    }\n\n    return result;\n  } else {\n    return value;\n  }\n\n\n};\n\n/**\r\n    * Remove all characters except numbers\r\n    */\nbizagi.util.getOnlyNumbersByString = function (stringValue) {\n  return stringValue.replace(/\\D/g, '');\n};\n\n/*\r\n       This method was created because the \"toFixed()\" JavaScript method in some cases round the numbers when it is not needed.\r\n       Can return string or number.\r\n   */\nbizagi.util.fixDecimalDigits = function (value, decimalDigits) {\n  var decimalDigitPosition,\n  intSection,\n  decimalSection;\n\n  decimalDigitPosition = value.indexOf('.');\n  intSection = value.substring(0, decimalDigitPosition);\n  decimalSection = value.substring(decimalDigitPosition + 1, value.length);\n\n  if (decimalDigits > decimalSection.length) {\n    for (var i = decimalSection.length; i < decimalDigits; i++) {\n      value += '0';\n    }\n  } else {\n    value = parseFloat(value).toFixed(decimalDigits);\n  }\n\n  return value;\n\n};\n\n/*\r\n    * Format html  money\r\n    */\nbizagi.util.formatInvariantMoney = function (htmlContent, moneyFormat) {\n  htmlContent = htmlContent || \"\";\n  var defaultFormat = {\n    symbol: moneyFormat.symbol,\n    decimalSeparator: moneyFormat.decimalSeparator || \",\",\n    groupSeparator: moneyFormat.groupSeparator || \".\",\n    decimalDigits: moneyFormat.decimalDigits || \"2\" };\n\n  if (moneyFormat.allowDecimals === false) {\n    defaultFormat.decimalDigits = \"0\";\n  }\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = parseFloat(content);\n      if (!isNaN(value)) {\n        var formatMoney = bizagi.util.formatMoney(value, defaultFormat);\n        $(elem).html(formatMoney);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html  number\r\n    */\nbizagi.util.formatInvariantNumber = function (htmlContent, numberFormat) {\n  htmlContent = htmlContent || \"\";\n  var decimalDigits = \"2\";\n  if (numberFormat.decimalDigits == \"0\")\n  decimalDigits = \"0\";else\n\n  decimalDigits = numberFormat.decimalDigits || \"2\";\n\n  var groupSeparator = bizagi.util.isString(numberFormat.groupSeparator) && numberFormat.groupSeparator ? numberFormat.groupSeparator : \".\";\n\n  var defaultFormat = {\n    symbol: \"\",\n    decimalSeparator: numberFormat.decimalSeparator || \",\",\n    groupSeparator: numberFormat.groupSeparator || numberFormat.thousands ? groupSeparator : \"\",\n    decimalDigits: decimalDigits };\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var containsLetter = content.match(/[a-zA-Z]/);\n      var value = containsLetter != null && containsLetter.length > 0 ? NaN : parseFloat(content);\n      if (!isNaN(value)) {\n        var formatNumber = bizagi.util.formatMoney(value, defaultFormat);\n        if (numberFormat.percentage) {\n          formatNumber = formatNumber.toString() + \"%\";\n        }\n        $(elem).html(formatNumber);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html with invariant date\r\n    */\nbizagi.util.formatInvariantDate = function (htmlContent, dateFormat) {\n  htmlContent = htmlContent || \"\";\n  dateFormat = dateFormat || \"MM/dd/yyyy hh:mm:ss\";\n  $(\".formatDate\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = new Date(content);\n      var dateTimeFormat = dateFormat;\n\n      if (bizagi.util.isValidDate(value))\n      dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n      var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat /*self.getResource(\"dateFormat\")*/);\n      $(elem).html(formatDate);\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/**\r\n    * Return format date with resources from string invariant date. It use the format specified\r\n    * @param stringInvariantDate\r\n    */\nbizagi.util.formatDateFromInvariantStringDate = function (stringInvariantDate) {\n  if (bizagi.util.isValidDate(stringInvariantDate)) {\n    var dateTimeFormat = bizagi.localization.getResource(\"dateFormat\") + ' ' + bizagi.localization.getResource(\"timeFormat\");\n    var value = new Date(stringInvariantDate);\n    dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n    var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat);\n    return formatDate;\n  }\n  return stringInvariantDate || \"\";\n};\n\nbizagi.util.getFormatDate = function (dateValue, defaultFormatDate) {\n  var dateTimeFormat = defaultFormatDate;\n\n  var H = dateValue.getHours();\n  var m = dateValue.getMinutes();\n  var s = dateValue.getSeconds();\n  var ms = dateValue.getMilliseconds();\n  var hide = bizagi.override.hideTimeWhenHourMinutesSecondsAreZero;\n\n  //Don't show time when hour, minutes, seconds and milliseconds are 0\n  if (H === 0 && m === 0 && s === 0 && ms === 0 && hide)\n  dateTimeFormat = bizagi.localization.getResource(\"dateFormat\");\n\n  return dateTimeFormat;\n};\n\n/**\r\n    * Format value by dataType\r\n    */\nbizagi.util.formatValueByDataType = function (value, dataType) {\n  /**\r\n                                                                 * Types Definedin Backend\r\n                                                                 * None = 0,BigInt = 1,Int = 2,SmallInt = 3,TinyInt = 4,Boolean = 5,Decimal = 6,Numeric = 7,Money = 8,Float = 10,Real = 11,DateTime = 12,SmallDateTime = 13,\r\n                                                                 Char = 14,VarChar = 15,Text = 16,Binary = 17,VarBinary = 18,Image = 19,Guid = 20,NChar = 21,NVarChar = 22,NText = 23,MxMBidirectionalRelationship = 24,\r\n                                                                 MxMUnidirectionalRelationship = 25,EntityDisabled = 26,UserAuth = 27,MxMUnidirectionalRelationshipWithoutFilter = 28,OracleNumber = 29,\r\n                                                                 Stakeholder = 30,ActivityItems = 31\r\n                                                                 *\r\n                                                                 * */\n  var result = value;\n  switch (dataType) {\n    case \"NText\":\n    case 23:\n    case \"Char\":\n    case 14:\n    case \"VarChar\":\n    case 15:\n    case \"Text\":\n    case 16:\n      if (value && value.length > 30) {\n        result = bizagi.util.replaceLineBreak(value);\n      }\n      break;\n    case \"Boolean\":\n    case 5:\n    case \"Binary\":\n    case 17:\n      result = bizagi.util.formatBoolean(value);\n      break;\n    case \"Int\":\n    case 2:\n    case \"BigInt\":\n    case 1:\n    case \"SmallInt\":\n    case 3:\n    case \"TinyInt\":\n    case 4:\n    case \"Numeric\":\n    case 7:\n      result = value === undefined || value === null ? \"\" : value;\n      break;\n    case \"Money\":\n    case 8:\n      result = bizagi.util.formatMonetaryCell(value);\n      break;\n    case \"Float\":\n    case 10:\n    case \"Real\":\n    case 11:\n    case \"Decimal\":\n    case 6:\n      result = bizagi.util.formatDecimalCell(value);\n      break;\n    case \"DateTime\":\n    case 12:\n    case \"SmallDateTime\":\n    case 13:\n      result = bizagi.util.formatDateFromInvariantStringDate(value);\n      break;}\n\n  if (result == null) {\n    result = \"\";\n  }\n  return result;\n};\n\n/**\r\n    * Check if it is a valid date\r\n    */\nbizagi.util.isValidDate = function (params) {\n  if (typeof params != \"undefined\" && params != null) {\n    var parseDate = new Date(params);\n    return !isNaN(parseDate.valueOf());\n  } else return false;\n};\n\n/*\r\n    *   Defines a date time formatter that will be available globally\r\n    */\nbizagi.util.monthNames = new Array('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');\nbizagi.util.dayNames = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat');\n\nbizagi.util.dateFormatter = new function () {\n  this.LZ = function (x) {\n    return (x < 0 || x > 9 ? \"\" : \"0\") + x;\n  };\n  /*\r\n      *   isDate ( date_string, format_string )\r\n      *   Returns true if date string matches format of format string and\r\n      *   is a valid date. Else returns false.\r\n      *   It is recommended that you trim whitespace around the value before\r\n      *   passing it to this function, as whitespace is NOT ignored!\r\n      */\n  this.isDate = function (val, format) {\n    var date = this.getDateFromFormat(val, format);\n    if (date == 0) {\n      return false;\n    }\n    return true;\n  };\n\n  this.getRelativeTime = function (date, dateFormat, onlyUnitsTime, timeZone) {\n\n    var self = this;\n    var now = timeZone ? new Date(moment().tz(bizagi.currentUser.timeZoneName).format()) : new Date();\n    var time = date instanceof Date ? date : kendo.parseDate(date, dateFormat);\n    var diff = now.getTime() - time.getTime();\n    var timeDiff = getTimeDiffDescription(diff, 'year', 31536000000, onlyUnitsTime);\n\n    if (!timeDiff) {\n      timeDiff = getTimeDiffDescription(diff, 'month', 2628000000, onlyUnitsTime);\n      if (!timeDiff) {\n        timeDiff = getTimeDiffDescription(diff, 'week', 604800000, onlyUnitsTime);\n        if (!timeDiff) {\n          timeDiff = getTimeDiffDescription(diff, 'day', 86400000, onlyUnitsTime);\n          if (!timeDiff) {\n            timeDiff = getTimeDiffDescription(diff, 'hour', 3600000, onlyUnitsTime);\n            if (!timeDiff) {\n              timeDiff = getTimeDiffDescription(diff, 'minute', 60000, onlyUnitsTime);\n              if (!timeDiff) {\n                if (onlyUnitsTime) {\n                  if (diff === 0) {\n                    timeDiff = getTimeDiffDescription(diff + 1, 'minute', 1, onlyUnitsTime);\n                  } else {\n                    timeDiff = getTimeDiffDescription(diff, 'minute', 1, onlyUnitsTime);\n                  }\n                } else {\n                  timeDiff = getTimeDiffDescription(diff, 'second', 2000, onlyUnitsTime);\n                  if (!timeDiff) {\n                    timeDiff = bizagi.localization.getResource(\"workportal-relativetime-momentago\");\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return timeDiff;\n\n    /*\r\n                      * Get Time Difference\r\n                      */\n    function getTimeDiffDescription(diff, unit, timeDivisor, onlyUnitsTime) {\n      var unitAmount = (diff / timeDivisor).toFixed(0);\n\n      if (unitAmount > 0) {\n        if (onlyUnitsTime) {\n          return unitAmount == 1 ? bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount) : bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount);\n        } else {\n          var resourceAgo = bizagi.localization.getResource(\"workportal-relativetime-ago\");\n          return unitAmount == 1 ? resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount)) : resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount));\n        }\n\n      } else {\n        return null;\n      }\n    }\n  };\n\n  /*\r\n      *   compareDates(date1,date1format,date2,date2format)\r\n      *   Compare two date strings to see which is greater.\r\n      *   Returns:\r\n      *   1 if date1 is greater than date2\r\n      *   0 if date2 is greater than date1 of if they are the same\r\n      *  -1 if either of the dates is in an invalid format\r\n      */\n  this.compareDates = function (date1, dateformat1, date2, dateformat2) {\n    var d1 = getDateFromFormat(date1, dateformat1);\n    var d2 = getDateFromFormat(date2, dateformat2);\n    if (d1 == 0 || d2 == 0) {\n      return -1;\n    } else if (d1 > d2) {\n      return 1;\n    }\n    return 0;\n  };\n  /*\r\n      *   getDifferenceBetweenDates(date1,date2, unit)\r\n      *   Compare two date objects to see difference between them. The number result by unit specified.\r\n      *\r\n      *   Returns:\r\n      *   Difference value between two dates.\r\n      *   Message string if either of the dates is in an invalid format\r\n      */\n  this.getDifferenceBetweenDates = function (date1, date2, unit) {\n    if (date1 instanceof Date && date1 instanceof Date) {\n      switch (unit) {\n        case \"seconds\":\n          return (date2.getTime() - date1.getTime()) / 1000;\n        case \"milliseconds\":\n          return date2.getTime() - date1.getTime();\n        default:\n          return \"unit is not Defined\";}\n\n    } else {\n      return \"one param not is Date\";\n    }\n\n  };\n  /*\r\n      *   formatDate (date_object, format)\r\n      *   Returns a date in the output format specified.\r\n      *   The format string uses the same abbreviations as in getDateFromFormat()\r\n      */\n  this.formatDate = function (date, format, i18n) {\n    // Check if date is valid\n    if (!bizagi.util.isValidDate(date) || date == 0) {\n      return \"\";\n    }\n\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    format = format + \"\";\n    var result = \"\";\n    var i_format = 0;\n    var c;\n    var token;\n    var y = date.getFullYear() + \"\";\n    var M = date.getMonth() + 1;\n    var d = date.getDate();\n    var E = date.getDay();\n    var H = date.getHours();\n    var m = date.getMinutes();\n    var s = date.getSeconds();\n    var f = date.getMilliseconds();\n    // Convert real date parts into formatted versions\n    var value = new Object();\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    if (y.length < 4 || y.charAt(0) === \"-\" && y.length < 5) {\n      y = \"\" + (y - 0 + 1900);\n    }\n    value[\"y\"] = \"\" + y;\n    value[\"yyyy\"] = y;\n    value[\"yy\"] = y.substring(2, 4);\n    value[\"M\"] = M;\n    value[\"MM\"] = this.LZ(M);\n    value[\"MMM\"] = monthNames[M + 11];\n    value[\"MMMM\"] = monthNames[M - 1];\n    value[\"NNN\"] = monthNames[M + 11];\n    value[\"d\"] = d;\n    value[\"dd\"] = this.LZ(d);\n    value[\"ddd\"] = dayNames[E + 7];\n    value[\"dddd\"] = dayNames[E];\n    value[\"E\"] = dayNames[E + 7];\n    value[\"EE\"] = dayNames[E];\n    value[\"H\"] = H;\n    value[\"HH\"] = this.LZ(H);\n    value[\"tt\"] = H < 12 ? \"am\" : \"pm\";\n    value[\"TT\"] = H < 12 ? \"AM\" : \"PM\";\n\n\n    if (H == 0) {\n      value[\"h\"] = 12;\n    } else if (H > 12) {\n      value[\"h\"] = H - 12;\n    } else {\n      value[\"h\"] = H;\n    }\n    value[\"hh\"] = this.LZ(value[\"h\"]);\n    if (H > 11) {\n      value[\"K\"] = H - 12;\n    } else {\n      value[\"K\"] = H;\n    }\n    value[\"k\"] = H + 1;\n    value[\"KK\"] = this.LZ(value[\"K\"]);\n    value[\"kk\"] = this.LZ(value[\"k\"]);\n    if (H > 11) {\n      value[\"a\"] = \"PM\";\n    } else {\n      value[\"a\"] = \"AM\";\n    }\n    value[\"m\"] = m;\n    value[\"mm\"] = this.LZ(m);\n    value[\"s\"] = s;\n    value[\"ss\"] = this.LZ(s);\n    value[\"FFF\"] = f;\n\n    while (i_format < format.length) {\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      if (value[token] != null) {\n        result = result + value[token];\n      } else {\n        result = result + token;\n      }\n    }\n    return result;\n  };\n  /*\r\n      *   getDateFromFormat( date_string , format_string )\r\n      *\r\n      *   This function takes a date string and a format string. It matches\r\n      *   If the date string matches the format string, it returns the \r\n      *   getTime() of the date. If it does not match, it returns 0.\r\n      */\n  this.getDateFromFormat = function (val, format, i18n) {\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    val = val + \"\";\n    format = format + \"\";\n    var i_val = 0;\n    var i_format = 0;\n    var c;\n    var token;\n    var x = 0,\n    y = 0;\n    var now = new Date();\n    var year = now.getYear();\n    var month = now.getMonth() + 1;\n    var date = 1;\n    var hh = now.getHours();\n    var mm = now.getMinutes();\n    var ss = now.getSeconds();\n    var FFF = now.getMilliseconds();\n    var ampm = \"\";\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    while (i_format < format.length) {\n      // Get next token from format string\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      // Extract contents of value based on format token\n      if (token == \"yyyy\" || token == \"yy\" || token == \"y\") {\n        if (token == \"yyyy\") {\n          x = 4;\n          y = 4;\n        }\n        if (token == \"yy\") {\n          x = 2;\n          y = 2;\n        }\n        if (token == \"y\") {\n          x = 2;\n          y = 4;\n        }\n        year = _getInt(val, i_val, x, y);\n        if (year == null) {\n          return 0;\n        }\n        i_val += year.length;\n        if (year.length == 2) {\n          if (year > 70) {\n            year = 1900 + (year - 0);\n          } else {\n            year = 2000 + (year - 0);\n          }\n        }\n      } else if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\") {\n        month = 0;\n        for (var i = 0; i < monthNames.length; i++) {\n          var month_name = monthNames[i];\n          if (val.substring(i_val, i_val + month_name.length).toLowerCase() == month_name.toLowerCase()) {\n            if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\" && i > 11) {\n              month = i + 1;\n              if (month > 12) {\n                month -= 12;\n              }\n              i_val += month_name.length;\n              break;\n            }\n          }\n        }\n\n        //This is because bizagi assumes MM and M like integers in some cases\n        if (month == 0) {\n          month = _getInt(val, i_val, 1, 2);\n          if (month == null || month < 1 || month > 12) {\n            return 0;\n          }\n          i_val += month.length;\n        }\n\n        if (month < 1 || month > 12) {\n          return 0;\n        }\n      } else if (token == \"dddd\" || token == \"EE\" || token == \"E\") {\n        for (var j = 0; j < dayNames.length; j++) {\n          var day_name = dayNames[j];\n          if (val.substring(i_val, i_val + day_name.length).toLowerCase() == day_name.toLowerCase()) {\n            i_val += day_name.length;\n            break;\n          }\n        }\n      } else if (token == \"MM\" || token == \"M\") {\n        month = _getInt(val, i_val, 1, 2);\n        if (month == null || month < 1 || month > 12) {\n          return 0;\n        }\n        i_val += month.length;\n      } else if (token == \"dd\" || token == \"d\") {\n        date = _getInt(val, i_val, 1, 2);\n        if (date == null || date < 1 || date > 31) {\n          return 0;\n        }\n        i_val += date.length;\n      } else if (token == \"hh\" || token == \"h\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 12) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"HH\" || token == \"H\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 23) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"KK\" || token == \"K\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 11) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"kk\" || token == \"k\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 24) {\n          return 0;\n        }\n        i_val += hh.length;\n        hh--;\n      } else if (token == \"mm\" || token == \"m\") {\n        mm = _getInt(val, i_val, token.length, 2);\n        if (mm == null || mm < 0 || mm > 59) {\n          return 0;\n        }\n        i_val += mm.length;\n      } else if (token == \"ss\" || token == \"s\") {\n        ss = _getInt(val, i_val, token.length, 2);\n        if (ss == null || ss < 0 || ss > 59) {\n          return 0;\n        }\n        i_val += ss.length;\n      } else if (token == \"FFF\") {\n        ff = _getInt(val, i_val, token.length, 3);\n        if (ff == null || ff < 0 || ff > 999) {\n          return 0;\n        }\n        i_val += ff.length;\n      } else if (token == \"a\" || token == \"tt\") {\n        if (val.substring(i_val, i_val + 2).toLowerCase() == \"am\") {\n          ampm = \"AM\";\n        } else if (val.substring(i_val, i_val + 2).toLowerCase() == \"pm\") {\n          ampm = \"PM\";\n        } else {\n          return 0;\n        }\n        i_val += 2;\n      } else {\n        if (val.substring(i_val, i_val + token.length) != token) {\n          return 0;\n        } else {\n          i_val += token.length;\n        }\n      }\n    }\n\n    // Is date valid for month?\n    if (month == 2) {\n      // Check for leap year\n      if (year % 4 == 0 && year % 100 != 0 || year % 400 == 0) {// leap year\n        if (date > 29) {\n          return 0;\n        }\n      } else {\n        if (date > 28) {\n          return 0;\n        }\n      }\n    }\n    if (month == 4 || month == 6 || month == 9 || month == 11) {\n      if (date > 30) {\n        return 0;\n      }\n    }\n    // Correct hours value\n    if (hh < 12 && ampm == \"PM\") {\n      hh = hh - 0 + 12;\n    } else if (hh > 11 && ampm == \"AM\") {\n      hh -= 12;\n    }\n    var newdate = new Date(year, month - 1, date, hh, mm, ss);\n    return newdate;\n\n    /*\r\n                     *   Utility method for parsing in getDateFromFormat()\r\n                     */\n    function _isInteger(_val) {\n      var digits = \"1234567890\";\n      for (var k = 0; k < _val.length; k++) {\n        if (digits.indexOf(_val.charAt(k)) == -1) {\n          return false;\n        }\n      }\n      return true;\n    };\n    /*\r\n        *   Utility method for parsing in getDateFromFormat()\r\n        */\n    function _getInt(str, l, minlength, maxlength) {\n      for (var m = maxlength; m >= minlength; m--) {\n        var _token = str.substring(l, l + m);\n        if (_token.length < minlength) {\n          return null;\n        }\n        if (_isInteger(_token)) {\n          return _token;\n        }\n      }\n      return null;\n    };\n  };\n  /*\r\n      * parseDate( date_string [, prefer_euro_format] )\r\n      *\r\n      * This function takes a date string and tries to match it to a\r\n      * number of possible date formats to get the value. It will try to\r\n      * match against the following international formats, in this order:\r\n      * y-M-d   MMM d, y   MMM d,y   y-MMM-d   d-MMM-y  MMM d\r\n      * M/d/y   M-d-y      M.d.y     MMM-d     M/d      M-d\r\n      * d/M/y   d-M-y      d.M.y     d-MMM     d/M      d-M\r\n      * A second argument may be passed to instruct the method to search\r\n      * for formats like d/M/y (european format) before M/d/y (American).\r\n      * Returns a Date object or null if no patterns match.\r\n      */\n  this.parseDate = function (val) {\n    var preferEuro = arguments.length == 2 ? arguments[1] : false;\n    var generalFormats = new Array('y-M-d', 'MMM d, y', 'MMM d,y', 'y-MMM-d', 'd-MMM-y', 'MMM d');\n    var monthFirst = new Array('M/d/y', 'M-d-y', 'M.d.y', 'MMM-d', 'M/d', 'M-d');\n    var dateFirst = new Array('d/M/y', 'd-M-y', 'd.M.y', 'd-MMM', 'd/M', 'd-M');\n    var checkList = new Array(generalFormats, preferEuro ? dateFirst : monthFirst, preferEuro ? monthFirst : dateFirst);\n    var d;\n    for (var i = 0; i < checkList.length; i++) {\n      var l = window[checkList[i]];\n      for (var j = 0; j < l.length; j++) {\n        d = getDateFromFormat(val, l[j]);\n        if (d != 0) {\n          return new Date(d);\n        }\n      }\n    }\n    return null;\n  };\n  /*\r\n      *   Method to analyze a time format and checks separator, and hour format, and seconds\r\n      */\n  this.analyzeTimeFormat = function (timeFormat) {\n    var i = 0;\n    var c;\n    // Define return object\n    var returnObj = {\n      show24Hours: false,\n      showSeconds: false,\n      separator: \":\" };\n\n    // Analize format\n    var token,lastToken = \"\";\n    while (i < timeFormat.length) {\n      // Get next token from format string\n      c = timeFormat.charAt(i);\n      token = \"\";\n      while (timeFormat.charAt(i) == c && i < timeFormat.length) {\n        token += timeFormat.charAt(i++);\n      }\n\n      // Extract contents of value based on format token\n      if (token == \"hh\" || token == \"h\") {\n        lastToken = token;\n        returnObj.show24Hours = false;\n      } else if (token == \"HH\" || token == \"H\") {\n        lastToken = token;\n        returnObj.show24Hours = true;\n      } else if (token == \"mm\" || token == \"m\") {\n        lastToken = token;\n      } else if (token == \"ss\" || token == \"s\") {\n        lastToken = token;\n        returnObj.showSeconds = true;\n      } else if (token == \"a\") {\n        lastToken = token;\n      } else {\n        if (lastToken.toUpperCase() == \"H\" || lastToken.toUpperCase() == \"HH\") {\n          returnObj.separator = token;\n        }\n      }\n    }\n\n    return returnObj;\n  };\n  this.getDateFromInvariant = function (value, showTime) {\n    value = value == null ? \"\" : value;\n    value = typeof value != \"string\" ? value.toString() : value;\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" H:mm:ss\" : \"\");\n    if (showTime) {\n      if (value && (value.toLowerCase().indexOf(\"am\") > 0 || value.toLowerCase().indexOf(\"pm\") > 0)) {\n        INVARIANT_FORMAT = \"MM/dd/yyyy h:mm:ss a\";\n      }\n    }\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    } else if (date == 0 && showTime && value != null && value != \"\") {\n      INVARIANT_FORMAT = \"MM/dd/yyyy\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n      date.setHours(0, 0, 0, 0);\n    }\n\n    return date;\n  };\n  this.formatInvariant = function (date, showTime) {\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" HH:mm:ss\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, INVARIANT_FORMAT);\n    return formattedDate;\n  };\n  this.getDateFromISO = function (value, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    // If the date could not be parsed, try it out with seconds\n    if (date == 0 && showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm:ss\" : \"\");\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    }\n\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd HH:mm\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      // If the date could not be parsed, try it out with seconds\n      if (date == 0) {\n        ISO_FORMAT = \"yyyy-MM-dd HH:mm:ss\";\n        date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      }\n    }\n\n    return date;\n  };\n  this.formatISO = function (date, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, ISO_FORMAT);\n    return formattedDate;\n  };\n\n  this.formatISO8601 = function (dateObject, restartTimeToMidnight) {\n    var restartTimeToMidnight = restartTimeToMidnight || false;\n    var ISO_FORMAT8601 = \"yyyy-MM-ddTHH:mm:ss\";\n    if (restartTimeToMidnight) {\n      dateObject.setHours(0, 0, 0, 0);\n    }\n    return bizagi.util.dateFormatter.formatDate(dateObject, ISO_FORMAT8601);\n  };\n\n  this.isFormatISO8601 = function (stringDate) {\n    var ISO_8601_WITH_TIME = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n    return ISO_8601_WITH_TIME.test(stringDate);\n  };\n\n  this.sleep = function (delay) {\n    // Delay in miliseconds\n    var start = new Date().getTime();\n    while (new Date().getTime() < start + delay) {\n      // wait\n    }\n  };\n  this.getDateFormatByDatePickerJqueryUI = function () {\n    return bizagi.localization.getResource(\"dateFormat\").replace(\"yyyy\", \"yy\");\n  };\n}();\n\nbizagi.util.sleepUntil = function (callback, delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepUntil() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      var continueWaiting = !callback();\n      if (!continueWaiting) {\n        def.resolve();\n        clearTimeout(timeout);\n        return;\n      } else\n      internalSleepUntil(name);\n    }, delay);\n  }\n  internalSleepUntil();\n  return def.promise();\n};\n\nbizagi.util.sleepFor = function (delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepFor() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      def.resolve();\n      clearTimeout(timeout);\n    }, delay);\n  }\n  internalSleepFor();\n  return def.promise();\n};\n\n\n/*\r\n    * Use localStorage in html5 verfiy supports and operations \r\n    * http://dev.w3.org/html5/webstorage/#dom-storage-setitem\r\n    */\n\nbizagi.util.browserSupportLocalStorage = function () {\n  try {\n    return 'localStorage' in window && window['localStorage'] !== null;\n  } catch (e) {\n    return false;\n  }\n};\n/*\r\n    *set the item  in the local storage\r\n    */\nbizagi.util.setItemLocalStorage = function (key, value) {\n  if (bizagi.util.browserSupportLocalStorage()) {\n    localStorage.setItem(key, value);\n    return true;\n  } else {\n    return false;\n  }\n};\n\nbizagi.util.getItemLocalStorage = function (key) {\n  return localStorage.getItem(key);\n};\n\nbizagi.util.removeItemLocalStorage = function (key) {\n  localStorage.removeItem(key);\n};\n\nbizagi.util.clearLocalStorage = function () {\n  if (bizagi.util.browserSupportLocalStorage())\n  localStorage.clear();\n};\n\nfunction printf(msg) {\n  var args = Array.prototype.slice.call(arguments, 1),arg;\n  return msg.replace(/(%[disv])/g, function (a, val) {\n    arg = args.shift();\n    if (arg !== undefined) {\n      switch (val.charCodeAt(1)) {\n        case 100:\n          return +arg; // d\n        case 105:\n          return Math.round(+arg); // i\n        case 115:\n          return String(arg); // s\n        case 118:\n          return arg; // v\n      }\n    }\n    return val;\n  });\n}\n\n\n// Fix problem with console.log when we forgot to remove it\n(function () {\n  var environment = typeof BIZAGI_ENVIRONMENT != \"undefined\" ? BIZAGI_ENVIRONMENT : \"release\";\n  if (environment == 'debug') {\n    if (_typeof(window.console) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    }\n  } else {\n    if ((typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    } else if (bizagiConfig && !bizagiConfig.showConsoleLog) {\n      console.log = function (a) {/*Nothing to do*/};\n    }\n  }\n})();\n\n\nbizagi.util.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"ui-widget-overlay ui-front\" style=\"z-index: 1001;\"><div class=\"ui-bizagi-loading-message-center\" style=\"position: absolute; top: 48%; left: 48%; display: ;\"><div class=\"ui-bizagi-loading-icon\"></div></div></div>');\n};\nbizagi.util.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".ui-widget-overlay:first\", elementToapply).remove();\n};\n\nbizagi.util.smartphone.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"bz-util-loading-container\"> <div class=\"ui-bizagi-loading-icon bz-util-loading\"></div>  </div>');\n};\nbizagi.util.smartphone.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".bz-util-loading-container\", elementToapply).remove();\n};\n\n\n\n/**\r\n    * determines whether the element in the browser supports the event we are looking for, eg 'paste', 'input', 'blur', etc. More info check modernizer.js.\r\n    * @param  {string|*}           eventName  is the name of an event to test for (e.g. \"resize\")\r\n    * @param  {(Object|string|*)=} element    is the element|document|window|tagName to test on\r\n    * @return {boolean}\r\n    */\nbizagi.util.isEventSupported = function (eventName, element) {\n  var needsFallback = !('onblur' in document.documentElement);\n  var isSupported;\n\n  if (!eventName) {\n    return false;\n  }\n  if (!element || typeof element === 'string') {\n    element = document.createElement(element || 'div');\n  }\n\n  // Testing via the `in` operator is sufficient for modern browsers and IE.\n  // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n  // \"resize\", whereas `in` \"catches\" those.\n  eventName = 'on' + eventName;\n  isSupported = eventName in element;\n\n  // Fallback technique for old Firefox - bit.ly/event-detection\n  if (!isSupported && needsFallback) {\n    if (!element.setAttribute) {\n      // Switch to generic element if it lacks `setAttribute`.\n      // It could be the `document`, `window`, or something else.\n      element = document.createElement('div');\n    }\n    if (element.setAttribute && element.removeAttribute) {\n      element.setAttribute(eventName, '');\n      isSupported = typeof element[eventName] === 'function';\n\n      if (element[eventName] !== undefined) {\n        // If property was created, \"remove it\" by setting value to `undefined`.\n        element[eventName] = undefined;\n      }\n      element.removeAttribute(eventName);\n    }\n  }\n  return isSupported;\n};\n\n\n/**\r\n    * Execute deferreds in order\r\n    * @example var a = new bizagiQueue(); a.add(function);\r\n    * \r\n    */\nfunction bizagiQueue() {\n  var self = this;\n  var queue = [];\n  var async;\n  var sync;\n\n  self.length = function () {\n    return queue.length;\n  };\n\n  self.add = function (callback) {\n    if (!sync) {\n      sync = true;\n      async = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.addParallel = function (callback) {\n    if (!async) {\n      async = true;\n      sync = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    // Put a parallel on last item\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.execute = function () {\n    var starter = new $.Deferred();\n    var promise = starter.promise();\n    var queueLength = queue.length;\n    for (var i = 0; i < queueLength; i++) {\n      promise = promise.pipe(function () {\n        var element = queue.shift();\n        return $.when.apply($, $.map(element.callbacks, function (callback) {\n          // Function support\n          if (typeof callback == \"function\") {\n            var deferred = $.Deferred();\n            $.when(callback()).done(function () {\n              deferred.resolve();\n            }).fail(function () {\n              deferred.reject();\n            });\n            return deferred.promise();\n          }\n          // Deferred support\n          return callback;\n        }));\n      });\n    }\n\n    starter.resolve();\n    promise = promise.done(function () {\n      // Reset queue\n      queue = [];\n    });\n\n    return promise;\n  };\n}\n\n\n/**\r\n   * Calculate circular dependencies \r\n   * \r\n   * @example var a = new bizagi.circularDependencies(); a.addNode('name',obj);\r\n   * a.resolve(node);\r\n   * \r\n   */\n//TODO: DEPL - Check this because we agreed to a much simpler solution\nbizagi.circularDependencies = function () {\n  var circularDependencies = new Function();\n  var self = circularDependencies.prototype;\n  self.list = []; //[{ name: \"root\", obj: {}, nodeObj: {}, childs: {} }];\n  self.lastNodeAdded; // Undefined reference\n\n  self.addNode = function (name, obj) {\n    var OBJ = JSON.encode(obj);\n    var foundObjChildNode = _search(name, OBJ);\n    if (foundObjChildNode) {\n      var lastNode = self.lastNodeAdded || self.list[self.list.length - 1];\n      lastNode.nodeObj.addChild(foundObjChildNode.nodeObj);\n      self.lastNodeAdded = foundObjChildNode;\n    } else {\n      var node = new _addNode(name, OBJ);\n      self.list.push({\n        name: name,\n        obj: OBJ,\n        nodeObj: node,\n        timeStamp: new Date().getTime() });\n\n      return node;\n    }\n  };\n\n  self.resolve = function (node, resolved, seen) {\n    // if dont setted node variable, take the first one -> root\n    node = node || _getFirstNodeWithChilds() || self.list[0].nodeObj;\n    var resolveDependencies = new _resolve(node, resolved, seen);\n    return resolveDependencies;\n  };\n\n  var _resetList = function _resetList() {\n    self.list = [];\n  };\n\n  var _getFirstNodeWithChilds = function _getFirstNodeWithChilds() {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].nodeObj.childs.length > 0) {\n        return self.list[i].nodeObj;\n      }\n    }\n    return self.list.length > 0 ? self.list[0].nodeObj : {};\n  };\n\n  var _search = function _search(name, obj) {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].name == name) {\n        // remove tag element\n        var now = new Date().getTime();\n        var timeToKeep = 1000; //milliseconds\n        if (self.list[i].timeStamp + timeToKeep < now) {\n          //remove element from the list\n          self.list.splice(i, 1);\n        } else if (self.list[i].obj == obj) {\n          return self.list[i];\n        }\n      }\n    }\n    return false;\n  };\n\n  var _addNode = function (name, obj) {\n    name = name || \"\";\n    obj = obj || {};\n    var node = function node(name, obj) {\n      this.name = name;\n      this.obj = obj;\n      this.childs = [];\n    };\n    var self = node.prototype;\n\n    self.addChild = function (node) {\n      this.childs.push(node);\n    };\n\n    return node;\n  }();\n\n  var _resolve = function (node, resolved, seen) {\n    var resolve = function resolve(node, resolved, seen) {\n      this.node = node || {};\n      this.node.childs = this.node.childs || [];\n      this.resolved = resolved || [];\n      this.seen = seen || [];\n\n      this.seen.push(this.node);\n\n      for (var i = 0; i < this.node.childs.length; i++) {\n        if (!self.hasObject(this.node.childs[i], this.resolved)) {\n          if (self.hasObject(this.node.childs[i], this.seen)) {\n            //throw new _error(\"error node:\" + node.name + \" -> \" + node.childs[i].name);\n            _resetList();\n            var error = {\n              dependencyFrom: this.node.name,\n              dependencyFromObj: this.node.obj,\n              dependencyTo: this.node.childs[i].name,\n              dependencyToObj: this.node.childs[i].obj,\n              path: this.seen };\n\n\n            return {\n              error: $.extend({\n                standardError: {\n                  status: \"error\",\n                  responseText: JSON.encode({ message: self.makeErrorMessage(error), type: \"alert\" }) },\n\n                multiactionError: {\n                  message: self.makeErrorMessage(error),\n                  type: \"alert\" } },\n\n              error) };\n\n          } else {\n            return resolve(this.node.childs[i], this.resolved, this.seen);\n          }\n        }\n      }\n      if (this.resolved) {\n        this.resolved.push(this.node);\n      }\n    };\n\n    var self = resolve.prototype;\n\n    self.hasObject = function (toSearch, collection) {\n\n      for (var i = 0; i < collection.length; i++) {\n        if (collection[i].name == toSearch.name) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    self.makeErrorMessage = function (error) {\n      var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n      return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n\n      /*  return {\r\n                                                                                  responseText: parsedMessage,\r\n                                                                                  message: parsedMessage,\r\n                                                                                  extraInfo: error\r\n                                                                              };*/\n    };\n\n    return resolve;\n  }();\n\n  return self;\n};\n\n/**\r\n    * Apply css string style (one or more). It works to add or override a specific style even if it has !important\r\n    * \r\n    * @example bizagi.util.cssExtended($('.myClass'), 'display:none!important;color:red');\r\n    * \r\n    */\nbizagi.util.cssExtended = function (instance, options) {\n  var cssToAdd = options.split(\";\");\n\n  for (i = 0; i < cssToAdd.length; i++) {\n    if (cssToAdd[i] != \"\") {\n      bizagi.util.cssExtendedApplyChanges(instance, cssToAdd[i]);\n    }\n  }\n\n};\n\n/**\r\n    * Apply the style change \r\n    * \r\n    */\nbizagi.util.cssExtendedApplyChanges = function (instance, option) {\n\n  for (var i = 0; i < instance.length; i++) {\n    var $this = $(instance[i]);\n    var attrToAdd = option.split(\":\")[0];\n\n    if ($this.attr('style')) {\n      var tmpStyle = $this.attr('style').split(\";\");\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      for (j = 0; j < tmpStyle.length; j++) {\n        var cssProperty = tmpStyle[j].split(\":\");\n\n        if ($.trim(cssProperty[0]) != attrToAdd && $.trim(cssProperty[0]) != \"\") {\n          arrProperties.push(cssProperty[0] + \":\" + cssProperty[1] + \";\");\n        }\n        resultProperties = JSON.stringify(arrProperties).replace(/\\\",\"/g, ' ').replace(/\\[\"/g, ' ').replace(/\\\"]/g, ' ');\n      }\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    } else if ($this.css(attrToAdd)) {\n      var tmpStyle = $this.css(attrToAdd);\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      arrProperties.push(option + \";\");\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    }\n  }\n};\n\n/*\r\n    * Find element to make scroll top\r\n    */\nbizagi.util.scrollTop = function (canvas) {\n  if (canvas && canvas[0]) {\n    while (canvas[0].tagName !== \"HTML\" && canvas.css(\"overflow-y\") != \"scroll\" && canvas.css(\"overflow-y\") != \"auto\" && canvas.parent().length > 0) {\n      canvas = canvas.parent();\n    }\n  }\n  return canvas;\n};\n\n/*\r\n    * Sort a JSON array by attribute and order type (ascendant or descendant)\r\n    * example: data = [ {attr1:val1, attr2:val2} , {attr1:val3, attr2:val4 },... ]  , key = \"attr2\" , way = \"asc\"\r\n    */\nbizagi.util.sortJSON = function (data, key, way) {\n  return data.sort(function (a, b) {\n    var x = a[key];\n    var y = b[key];\n    if (way === 'asc') {\n      return x < y ? -1 : x > y ? 1 : 0;\n    }\n    if (way === 'desc') {\n      return x > y ? -1 : x < y ? 1 : 0;\n    }\n  });\n};\n\n/*\r\n    * Reducir formato numérico a notación abrevidad (K:1000 - M:1000000 - B:1000000000)\r\n    */\nbizagi.util.shortNumber = function (number) {\n  var newNumber = number.toString();\n  var lenghtNumber = newNumber.length;\n\n  if (lenghtNumber >= 4 && lenghtNumber < 7) {\n    newNumber = '+' + newNumber.charAt(0) + 'K';\n  } else if (lenghtNumber >= 7 && lenghtNumber < 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'M';\n  } else if (lenghtNumber >= 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'B';\n  }\n\n  return '&nbsp;&nbsp;&nbsp;' + newNumber;\n};\n\n/*\r\n    * Aplicar formato salto de linea\r\n    */\nbizagi.util.replaceLineBreak = function (string) {\n  return typeof string === \"string\" ? string.replace(/\\r\\n|\\r|\\n|<br>|<br\\/>/g, \"<br/>\") : string;\n};\n\n// http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/\nbizagi.util.escapeHtml = function (str) {\n  var div = document.createElement('div');\n  div.appendChild(document.createTextNode(str));\n  return div.innerHTML;\n};\n\n/*\r\n    * Aplicar formato Tipo moneda\r\n    */\nbizagi.util.formatMonetaryCell = function (value) {\n  return bizagi.util.formatMonetaryValue(value);\n};\n\n/*\r\n    * Aplicar formato tipo decimal\r\n    */\nbizagi.util.formatDecimalCell = function (value) {\n  return bizagi.util.formatDecimalValue(value);\n};\n\n/**\r\n    * Add format to date value\r\n    */\nbizagi.util.formatDateValue = function (value) {\n  return bizagi.util.formatDateFromInvariantStringDate(value);\n};\n\n/**\r\n    * Add format to money value\r\n    * @param value\r\n    * @returns {*|string|string}\r\n    */\nbizagi.util.formatMonetaryValue = function (value) {\n  return bizagi.util.formatMoney(value, BIZAGI_DEFAULT_CURRENCY_INFO);\n};\n\n/**\r\n    * Add format for decimal value\r\n    * @param value\r\n    * @returns {*}\r\n    */\nbizagi.util.formatDecimalValue = function (value) {\n  var decimalFormat;\n  var externalDecimalFormat = {\n    decimalSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator,\n    digitGroupSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator,\n    roundToDecimalPlace: BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n  var numberValue = bizagi.util.formatDecimal(value, decimalFormat);\n  if (bizagi.override.removeTrailingZeros === true) {\n    var positive = true;\n    if (numberValue.toString().indexOf(\")\") != -1) {\n      positive = false;\n      numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n    }\n    var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"$1\");\n    re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"\");\n\n\n    if (!positive) numberValue = \"(\" + numberValue + \")\";\n  }\n  return numberValue;\n};\n\n/*\r\n    * Crea notificacion de corta duracion, principalmente uilizada en para los procesos offline\r\n    */\nbizagi.util.showNotification = function (params) {\n  var params = params || {};\n  var div_sync = $('<div id=\"sync-notification\" class=\"bz-cm-icon\"></div>').text(params.text || \"\");\n  div_sync.appendTo($('body'));\n  div_sync.fadeIn(1500, function () {\n    div_sync.stop();\n  });\n\n  div_sync.fadeOut(2000, function () {\n    div_sync.remove();\n  });\n};\n\n/*\r\n    * Verificar el estado de la conexión\r\n    */\nbizagi.util.isModeOnline = function () {\n  return typeof bizagi.context.isOfflineForm !== \"undefined\" && !bizagi.context.isOfflineForm;\n};\n\nbizagi.util.dispose = function (obj) {\n  for (key in obj) {\n    if (_typeof(obj[key]) == \"object\") delete obj[key];\n    if (typeof obj[key] == \"function\") {obj[key] = null;delete obj[key];}\n  }\n};\n\nbizagi.util.arrayEach = function (array, callback) {\n  if (!!array) {\n    if (Object.prototype.toString.apply(array) === \"[object Array]\" && Object.prototype.toString.apply(callback) === \"[object Function]\") {\n      var index, value;\n      for (index in array) {\n        if (array.hasOwnProperty(index)) {\n          value = callback.call(array[index], index, array[index]);\n          if (value === false) {\n            return;\n          }\n        }\n      }\n    } else {\n      $.each(array, callback);\n    }\n  }\n};\n\n//remove all the character except the +, - and decimal point\nbizagi.util.getStandardNotation = function (number, decimalSymbol) {\n  var plusCharacter = '+';\n  var minusCharacter = '-';\n  var decimalSymbol = decimalSymbol || '.';\n  var expSymbol = 'e';\n  var tmp = '';\n  //remove all the character except the +, -, decimal point and the numbers\n  var decimalNumber = false;\n  var exponentialNumber = false;\n  number = (number.length > 0 ? number.toString().toLowerCase() : '').replace(/ /g, '');\n  for (var i = 0; i < number.length; i++) {\n    if ((number[i] === plusCharacter || number[i] === minusCharacter) && (i === 0 || number[i - 1] == expSymbol)) {\n      tmp += number[i];\n    } else if (!isNaN(Number(number[i]))) {\n      tmp += number[i];\n    } else if (number[i] === decimalSymbol && !decimalNumber) {\n      tmp += number[i];\n      decimalNumber = true;\n    } else if (number[i] === expSymbol && !exponentialNumber) {\n      tmp += number[i];\n      exponentialNumber = true;\n    }\n  }\n  return tmp;\n};\n//Return it in normalized scientific notation\nbizagi.util.scientificNotationFormat = function (number, decimalSymbol, sdLimit, expMinLimit, expMaxLimit) {\n  decimalSymbol = decimalSymbol || '.';\n  number = bizagi.util.getStandardNotation(number, decimalSymbol);\n  sdLimit = sdLimit > 0 ? sdLimit : 38;\n  expMinLimit = expMinLimit > 0 ? expMinLimit : -125;\n  expMaxLimit = expMaxLimit > 0 ? expMaxLimit : 125;\n  var expSimbol = 'e';\n  var sNregex = new RegExp('[0-9]+(' + decimalSymbol + '[0-9]+)?(e[+-]?[0-9]+)?');\n  var sNFormat = number.match(sNregex);\n\n  //get que prefix\n  var exp = 0;\n\n  var prefix = number[0] === '-' ? number[0] : '';\n  var originalPointIndex = 0;\n\n  number = number.replace(prefix, '');\n\n  //if the number is not in scientific notation\n  if (sNFormat && sNFormat[0] && sNFormat[2]) {\n    var tempParts = sNFormat[0] ? sNFormat[0].replace(sNFormat[2], '').split(decimalSymbol) : '';\n\n    var significantDigits = '';\n    var intPart = '';\n\n    //calculate significant digits\n    //remove zeros at the left\n    tempParts[0] = tempParts[0].replace(/^0+/g, '');\n\n    if (tempParts[0].length > 1) {\n      significantDigits = tempParts[0].slice(1);\n      originalPointIndex = significantDigits.length;\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(sNFormat[1] || '');\n    } else if (tempParts[0].length === 1) {\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(tempParts[1] || '');\n    } else {\n      originalPointIndex = tempParts[1].length;\n      tempParts[1] = tempParts[1].replace(/^0+/g, '');\n      originalPointIndex = tempParts[1].length - 1 - originalPointIndex;\n      intPart = tempParts[1][0];\n      significantDigits = tempParts[1].slice(1);\n    }\n    //remove . and zeros from significant digits\n    significantDigits = significantDigits.replace(decimalSymbol, '').replace(/0+$/g, '');\n\n    if (significantDigits.length >= sdLimit) {\n      significantDigits = significantDigits.slice(0, sdLimit - 1);\n    }\n    exp = Number(sNFormat[2].replace(expSimbol, '')) + originalPointIndex;\n    exp = exp > expMaxLimit ? expMaxLimit : exp < expMinLimit ? expMinLimit : exp;\n    return prefix + intPart + (significantDigits ? decimalSymbol + significantDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n  } else if (number) {\n\n    originalPointIndex = number.indexOf(decimalSymbol);\n    var from = 0;\n    var to = number.length - 1;\n\n    //remove decimal point\n    number = number.replace(decimalSymbol, '');\n\n    //from\n    var i = from;\n    while (!significantFlag) {\n      if (number[i] !== '0' && number[i] !== decimalSymbol) {\n        significantFlag = true;\n        from = i;\n      } else {i++;}\n    }\n    //to\n    var significantFlag = false;\n    var j = to;\n    while (!significantFlag) {\n      if (number[j] !== '0' && number[j] !== decimalSymbol && '-') {\n        significantFlag = true;\n        to = j + 1;\n      } else {j--;}\n    }\n    to = to > sdLimit + from ? sdLimit + from : to;\n    if (originalPointIndex !== -1) {\n      //find significant digits\n      var significantFlag = false;\n      var significantDigits = number.slice(from, to);\n      var pointIndex = from + 1;\n      exp = originalPointIndex - pointIndex;\n      if (significantDigits.length > 0 && !isNaN(Number(significantDigits[0]))) {\n        return prefix + significantDigits[0] + (significantDigits.length > 1 ? decimalSymbol + significantDigits.slice(1) : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n\n    } else {\n      //Int numbers\n      var firstDigit = number.slice(from, from + 1);\n      var restDigits = number.slice(from + 1, number.length);\n      exp = restDigits.length;\n      restDigits = restDigits.replace(/0+$/g, '');\n      if (restDigits.length > sdLimit) {\n        restDigits = number.slice(from + 1, sdLimit + from);\n      }\n      if (Number(firstDigit)) {\n        return prefix + firstDigit + (restDigits.length > 0 ? decimalSymbol + restDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n    }\n  } else {return '';}\n};\n\n/**\r\n    * Remove all backslashes that represent scape of characters\r\n    */\nbizagi.util.stripslashes = function (str) {\n  return str.replace(/\\\\'/g, '\\'').replace(/\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\').replace(/\\\\0/g, '\\0');\n};\n\n/*\r\n    * Validates if the text is a valid opening and closing tags, including classes\r\n    */\nbizagi.util.isHTMLValidText = function (text) {\n  var ex = new RegExp(/<(.|\\n)*?>/g);\n  return ex.test(text);\n};\n\nbizagi.util.resetData = function () {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, { isAuthenticate: \"false\" });\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\nbizagi.util.changeData = function (params) {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, params);\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR MOBILE DEVICE\n// ------------------------------------------------------------------------\n\nbizagi.util.isMobileDevice = function (device) {\n  device = device || bizagi.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\",\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Check is native mobile device\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeMobileDevice = function (device) {\n  return bizagi.util.isMobileDevice(device) && bizagi.util.isNativePluginSupported();\n};\n\n/** \r\n    * Verify mobile device type\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Tablet android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Tablet iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && !(device.indexOf(\"android\") === -1);\n};\n\n\n/**\r\n    * Verify mobile device type\r\n    * @returns {}\r\n    */\nbizagi.util.isSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Smartphone android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Smartphone iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"ios\") !== -1;\n};\n\n/**\r\n    * Check is offline form\r\n    * @param {} container \r\n    * @returns {} \r\n    */\nbizagi.util.isOfflineForm = function (params) {\n  if (!bizagi.util.isMobileDevice() || typeof params === \"undefined\")\n  return false;\n\n  var context = params.context || null;\n  var container = params.container || null;\n\n  var formContainer = container !== null ?\n  container : context !== null ? context.getFormContainer() : null;\n\n  if (formContainer === null)\n  return false;\n\n  var formParams = formContainer.getParams() || {};\n  var isOfflineForm = typeof formParams.isOfflineForm !== \"undefined\" &&\n  bizagi.util.parseBoolean(formParams.isOfflineForm);\n\n  return isOfflineForm;\n};\n\nbizagi.util.detectAndroidVersion = function () {\n  var indexAndroid = navigator.userAgent.toLowerCase().indexOf(\"android\");\n  var androidVersion = navigator.userAgent.toLowerCase().substring(indexAndroid + 8, indexAndroid + 13);\n  androidVersion = androidVersion.replaceAll(\".\", \"\");\n  return Number(androidVersion);\n};\n\nbizagi.util.getPathUrl = function (url) {\n  var solvedUrl = \"\";\n  var locationParts = location.pathname.split(\"/\");\n  var basePath = location.protocol + \"//\" + location.host;\n\n  if (BIZAGI_PATH_TO_BASE[0] == \"/\") {\n    solvedUrl = basePath + BIZAGI_PATH_TO_BASE + url;\n  } else {\n    var pathToBaseBackwards = BIZAGI_PATH_TO_BASE.split(\"../\").length;\n    for (var i = 0, l = locationParts.length; i < l - pathToBaseBackwards; i++) {\n      basePath += locationParts[i] + \"/\";\n    }\n\n    basePath = basePath[basePath.length - 1] === \"/\" ? basePath : basePath + \"/\";\n    solvedUrl = basePath + url;\n  }\n  return solvedUrl;\n};\n\n/**\r\n    * Get Android version\r\n    * @returns {} \r\n    */\nbizagi.util.getAndroidVersion = function () {\n  var userAgent = navigator.userAgent.toLowerCase();\n  var match = userAgent.match(/android\\s([0-9\\.]*)/);\n\n  return match ? parseFloat(match[1]) : false;\n};\n\n/**\r\n    * Get image path to android device\r\n    * @param {} image \r\n    * @returns {} \r\n    */\nbizagi.util.mobileImagePath = function (image) {\n  var dataImage = image;\n  var version = bizagi.util.getAndroidVersion();\n\n  if (!version)\n  return dataImage;\n\n  if (dataImage.substring(0, 21) === \"content://com.android\" && version <= 4.4) {\n    var photoSplit = dataImage.split(\"%3A\");\n    if (photoSplit.length > 1) {\n      dataImage = \"content://media/external/images/media/\" + photoSplit[1];\n    } else {\n      photoSplit = dataImage.split(\"/\");\n      dataImage = \"content://media/external/images/media/\" + photoSplit[photoSplit.length - 1];\n    }\n  }\n\n  return dataImage;\n};\n\n/**\r\n    * Validate resource \r\n    * @param {} resource resource name\r\n    * @returns {} \r\n    */\nbizagi.util.isValidResource = function (resource) {\n  if (!bizagi.localization) return false;\n  return bizagi.localization.getResource(resource) !== resource;\n};\n\n/***\r\n    * Transform base64 image to blob\r\n    * @b64Data \r\n    * @contentType \r\n    * @sliceSize \r\n    */\nbizagi.util.b64toBlob = function (b64Data, contentType, sliceSize) {\n  contentType = contentType || '';\n  sliceSize = sliceSize || 512;\n\n  var byteCharacters = atob(b64Data);\n  var byteArrays = [];\n\n  for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    var byteNumbers = new Array(slice.length);\n    for (var i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    var byteArray = new Uint8Array(byteNumbers);\n\n    byteArrays.push(byteArray);\n  }\n\n  var blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\n/**\r\n    * Converts an string to a byte array, util in old browsers requests\r\n    * @param str\r\n    */\nbizagi.util.stringToByteArray = function (str) {\n  var byteArray = new Uint8Array(str.length);\n  for (var i = 0; i < str.length; i++) {\n    byteArray[i] = str.charCodeAt(i) & 0xff;\n  }\n  return byteArray;\n};\n\n// ------------------------------------------------------------------------\n// NATIVE-HYBRID ENVIRONMENT\n// ------------------------------------------------------------------------\n\n/** \r\n * Verify the offline forms is enabled\r\n * @returns {} \r\n */\nbizagi.util.hasOfflineFormsEnabled = function () {\n  return typeof BIZAGI_ENABLE_OFFLINE_FORMS !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_OFFLINE_FORMS) === true;\n};\n\n/**\r\n    * \r\n    * Verify the flat design is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isFlatDesignEnabled = function () {\n  return typeof BIZAGI_ENABLE_FLAT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_FLAT) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isMobileGridEnabled = function () {\n  return typeof BIZAGI_ENABLE_MOBILE_GRID !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_MOBILE_GRID) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeHeaderEnabled = function () {\n  return typeof NATIVE_HEADER_ENABLE !== \"undefined\" && bizagi.util.parseBoolean(NATIVE_HEADER_ENABLE) === true;\n};\n\n/**\r\n    * Validate the Quick search is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isQuickSearchEnabled = function () {\n  return typeof BIZAGI_ENABLE_QUICK_SEARCH !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_QUICK_SEARCH) === true;\n};\n\n/** \r\n    * Verify the OAuth2 is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isOAuth2Enabled = function () {\n  return typeof BIZAGI_AUTH_TYPE !== \"undefined\" && BIZAGI_AUTH_TYPE === \"OAuth\";\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.getNativeComponent = function () {\n  return typeof BIZAGI_NATIVE_COMPONENT !== \"undefined\" ? BIZAGI_NATIVE_COMPONENT : \"\";\n};\n\n/**\r\n    * Check server version\r\n    * @returns {}\r\n    */\nbizagi.util.isVersionSupported = function () {\n  var supported = true;\n\n  if (typeof BIZAGI_SERVER_VERSION !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_VERSION)) {\n    var version = BIZAGI_SERVER_VERSION.match(/\\d+\\.\\d+/);\n    supported = version ? parseFloat(version.shift()) >= 11.0 : true;\n  }\n\n  return supported;\n};\n\n/**\r\n    * Cordova componet is supported\r\n    * @returns {} \r\n    */\nbizagi.util.isCordovaSupported = function () {\n  return typeof cordova !== \"undefined\";\n};\n\n/**\r\n    * Native plugin of Cordova is supported \r\n    * @returns {} \r\n    */\nbizagi.util.isNativePluginSupported = function () {\n  return typeof bizagiapp !== \"undefined\";\n};\n\n/**\r\n    * Tablet native\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Smartphone native\r\n    * @returns {} \r\n    */\nbizagi.util.isSmartphoneNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isSmartphoneDevice();\n};\n\n/**\r\n    * Enables accesory bar\r\n    */\nif (bizagi.util.isNativePluginSupported() && window.cordova && window.cordova.plugins.Keyboard) {\n  cordova.plugins.Keyboard.hideKeyboardAccessoryBar(false);\n};\n\n/**\r\n    * Verify real device\r\n    * @returns {} \r\n    */\nbizagi.util.detectRealDevice = function () {\n  var settedDevice = typeof BIZAGI_DEFAULT_DEVICE !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEFAULT_DEVICE) ?\n  BIZAGI_DEFAULT_DEVICE : null;\n\n  BIZAGI_DEFAULT_DEVICE = \"\";\n  var device = bizagi.detectDevice();\n  BIZAGI_DEFAULT_DEVICE = settedDevice;\n\n  return device;\n};\n\n/**\r\n    * Method to detect Android visitors\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroid = function () {\n  return navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n};\n\nbizagi.util.isAndroidDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") > -1;\n};\n\nbizagi.util.isiOSDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") === -1;\n};\n\n\n/**\r\n    * Get server channel\r\n    * @returns {}\r\n    */\nbizagi.util.getChannelType = function () {\n  if (typeof BIZAGI_SERVER_CHANNEL !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_CHANNEL)) {\n    return BIZAGI_SERVER_CHANNEL;\n  }\n  return bizagi.loader.channel || \"\";\n};\n\n/**\r\n    * Check data url\r\n    * @param {} data \r\n    * @returns {} \r\n    */\nbizagi.util.isDataUrl = function (data) {\n  var regex = /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i;\n\n  try {\n    return !!data.toString().match(regex);\n  } catch (error) {}\n\n  return false;\n};\n\n/**\r\n    * Get valid data url\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\n/**\r\n    * Get response message of services\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.processFailMessage = function (data) {\n  var message = data || {};\n\n  try {\n    message = typeof message == \"string\" ? JSON.parse(message) : message;\n    message = message.responseText || message.message || message;\n  } catch (e) {\n    message = data;\n  }\n\n  return message;\n};\n\n/**\r\n    * Get object jSON\r\n    */\nbizagi.util.getErrorFormatted = function (str) {\n  var error = str;\n\n  if (!error) return str;\n\n  if (typeof error == \"string\") {\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n      error = {\n        type: \"error\",\n        code: \"code\",\n        message: str };\n\n    }\n  }\n\n  if (_typeof(error) == \"object\" && (error.message || error.statusText)) {\n    return {\n      type: error.type || \"error\",\n      code: error.code || error.errorCode || error.errorType || error.statusText || \"code\",\n      message: error.message };\n\n  } else {\n    if (error && error.length && error.length >= 1) error = error[0];\n    if (error.responseText) error = error.responseText;\n    if (error.error) error = error.error;\n  }\n\n  return bizagi.util.getErrorFormatted(error);\n};\n/**\r\n    * Disable and enable workportal menu from live process\r\n    */\nvar tmp_block_header = \"<div class='blockHeaderByLiveProcess'></div>\";\nbizagi.util.disableWorkPortalMenu = function () {\n  var blockHeight = $(\"body\").find(\"#ui-bizagi-wp-menu\").height();\n  $(tmp_block_header).prependTo(\"body\");\n  $(\"body\").find(\".blockHeaderByLiveProcess\").css({ \"position\": \"absolute\", \"width\": \"100%\", \"height\": blockHeight + \"px\", \"background\": \"gray\", \"opacity\": \"0.9\", \"z-index\": \"101\" });\n};\n\nbizagi.util.enableWorkPortalMenu = function () {\n  $(\"body\").find(\".blockHeaderByLiveProcess\").detach();\n};\n\n/**\r\n    * this method activates the section of the menu that is sent in the idMenu variable\r\n    */\nbizagi.util.enableMenuSection = function (idMenu) {\n  var menu = new bizagi.workportal.controllers.menu();\n  menu.setActiveSection.apply($(\"#main_menu li#\" + idMenu)[0]);\n};\n\nbizagi.util.getURLWithASlashAtTheEnd = function (url) {\n  var getLastChar = function getLastChar(stringValue) {\n    return stringValue.substr(stringValue.length - 1);\n  };\n  return getLastChar(url) === '/' ? url : url + '/';\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a file\r\n    * validate if the Maintenance Window has started and redirect the user\r\n    * validate if an error is returned\r\n    * rejects defer on download fails\r\n    * IMPORTANT: defer never resolves (technical restriction)\r\n    * @param {String} url \r\n    * @param {Boolean} isCompleteUrl \r\n    * @param {Boolean} showModalOnFail \r\n    */\nbizagi.util.downloadFile = function (url, isCompleteUrl, showModalOnFail) {\n  var _defer = new $.Deferred(),\n  _showModalOnFail = showModalOnFail === undefined ? true : showModalOnFail,\n  _firstURlPart = isCompleteUrl ? \"\" : bizagi.util.getURLWithASlashAtTheEnd(bizagiConfig.applicationUrl),\n  _urlDownload = _firstURlPart + url,\n  _iframeID = \"iframe-download\",\n  _iframeExists = $('#' + _iframeID).length !== 0,\n  _reject = function _reject(jsonResponse, showModal) {\n    if (showModal)\n    bizagi.modalError.show(jsonResponse.message, undefined, false);\n    _defer.reject(jsonResponse);\n  },\n  _onCantDownload = function _onCantDownload() {\n    var that = $(this)[0],\n    defaultMessage = bizagi.localization.getResource(\"workportal-general-error-message-contact-administrator\"),\n    text = bizagi.util.tryCatch(\n    function () {return $(that.contentDocument).text();},\n    defaultMessage),\n\n    isMaintenanceWindow = text.indexOf(\"HTTP Error 503\") !== -1,\n    jsonResponse = bizagi.util.tryCatch(\n    function () {return JSON.parse(text);},\n    {\n      code: \"error\",\n      status: \"error\",\n      message: text === \"\" ? defaultMessage : text }),\n\n\n    showModal = _showModalOnFail && !isMaintenanceWindow;\n    if (isMaintenanceWindow)\n    bizagiConfig.maintenanceWindows.start();\n    _reject(jsonResponse, showModal);\n  },\n  _createIframe = function _createIframe() {\n    var iframe = $(\"<iframe/>\");\n    iframe.attr({\n      style: \"visibility:hidden;display:none\",\n      id: _iframeID }).\n\n    appendTo('body');\n    iframe[0].onload = _onCantDownload;\n  };\n\n  if (!_iframeExists)\n  _createIframe();\n  $('#' + _iframeID).attr(\"src\", _urlDownload);\n  return _defer;\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a excel file\r\n    * @param {String} url \r\n    * @param {} params \r\n    */\nbizagi.util.downloadFileByPOST = function (url, params) {\n  if ($('#iframe-download').length !== 0) {//If the iframe already exists, remove it\n    $('#iframe-download').remove();\n  }\n\n  $(\"<iframe/>\").attr({\n    style: \"visibility:hidden;display:none\",\n    id: \"iframe-download\" }).\n  appendTo('body');\n\n  var inputValues = \"\";\n  for (var i = 0; i < params.length; i++) {\n    inputValues = inputValues + \"<input type='text' name='\" + params[i].name + \"' value='\" + params[i].value + \"'>\";\n  }\n\n  var formPOST = \"<form id='formPOST' action='\" + url + \"' method='POST'>\" +\n  inputValues +\n  \"</form>\";\n\n  $('#iframe-download').contents().find(\"body\").append(formPOST);\n  if (bizagi.util.isIE11()) {\n    bizagi.showErrorAlertDialog = false;\n    $.ajax({ type: \"POST\",\n      url: url,\n      data: params,\n      dataType: 'text' }).\n    then(function () {\n      $(\"#formPOST\", $('#iframe-download').contents()).submit();\n    });\n  } else {\n    $(\"#formPOST\", $('#iframe-download').contents()).submit();\n  }\n};\n\nbizagi.util.executeActionRoutingFromWorkportal = function (idCase, idWorkItem) {\n  bizagi.workportal.controllers.menu.prototype.publish(\"executeAction\", {\n    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n    idCase: idCase,\n    idWorkItem: idWorkItem });\n\n};\n\n/**\r\n   * Gets the final message when the user is offline or online (In Offline forms)\r\n   * @param {} state \r\n   * @returns {} The corresponding message depending on the case\r\n   */\n\nbizagi.util.getMessageFromNetworkState = function (state) {\n  if (state) {\n    return bizagi.localization.getResource(\"render-without-globalform-offline-userOnline\", \"The case has been created successfully, please wait until the server synchronizes\");\n  } else {\n    return bizagi.localization.getResource(\"render-without-globalform-offline\", \"Your offline case has been created successfully. It will synchronized as soon as you go online.\");\n  }\n};\n\n/**\r\n    * DOMPurify sanitizes HTML and prevents XSS attacks\r\n    * @param str\r\n    * @returns {null|*|string}\r\n    */\nbizagi.util.sanitizeHTML = function (str) {\n  var value = typeof str !== \"undefined\" && str !== null ? str.toString() : str;\n  var sanified = DOMPurify.sanitize(value);\n  var decode = document.createElement(\"div\");\n\n  decode.innerHTML = sanified;\n\n  return decode.childNodes.length === 0 ? \"\" : String(decode.childNodes[0].nodeValue);\n};\n\nbizagi.util.arrayUnique = function (array) {\n  var items = array.concat();\n\n  for (var i = 0, length = items.length; i < length; ++i) {\n    for (var j = i + 1; j < length; ++j) {\n      if (items[i] === items[j]) {\n        items.splice(j -= 1, 1);\n      }\n\n    }\n  }\n\n  return items;\n};\n\n\n/**\r\n    * Debounce\r\n    * Taken from https://davidwalsh.name/javascript-debounce-function\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce = function (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n};\n\n/**\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce2 = function (func, wait, immediate) {\n  var self = this;\n  var timeout;\n  var fn = function fn() {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n  return {\n    timeout: timeout,\n    cancel: function cancel() {\n      clearTimeout(timeout);\n    },\n    fire: function fire() {\n      fn.call(self, arguments);\n    } };\n\n};\n\n/**\r\n    * Validate if the mobile image editor is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeImageEditorSupported = function () {\n  return bizagi.util.isNativePluginSupported() && bizagi.util.isiOSDevice() && bizagi.override.enableImageEditor;\n};\n/**\r\n    * Error Message\r\n    */\nbizagi.util.errorMessage = function (message) {\n  return \"<div class=\\\"admin-stakeholder-message\\\"> \" +\n  \"<i class=\\\"bz-wp-empty__img\\\"></i> \" +\n  \"<p class=\\\"bz-wp-empty__info bz-wp-empty__info--first\\\"> \" +\n  message +\n  \"</p></div>\";\n};\n\n\n/**\r\n    * Validate URL \r\n    */\nbizagi.util.validateUrlWellFormed = function (url) {\n  var patternToValidateUrl = /^((http|https|ftp):\\/\\/)/,\n  urlWithProtocol = patternToValidateUrl.test(url) ? url : \"http://\" + url,\n  nodeWithUrl = document.createElement('a');\n  nodeWithUrl.setAttribute('href', urlWithProtocol);\n  var cleanNodeWithUrl = DOMPurify.sanitize(nodeWithUrl, { IN_PLACE: true }),\n  urlWithoutSpaces = url ? url.replace(/ /g, \"\") : \"\";\n  return bizagi.util.isEmpty(urlWithoutSpaces) ? null : cleanNodeWithUrl.href;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @param data\r\n    * @returns {string}\r\n    */\nbizagi.util.encodeHtmlText = function (data) {\n  var value = data || \"\";\n  var valueToDisplay = \"\";\n\n  if (typeof value === \"string\") {\n    var decodedDisplayValue = bizagi.util.decodeURI(value);\n\n    valueToDisplay = bizagi.util.encodeString(decodedDisplayValue);\n  }\n\n  return valueToDisplay;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @returns {string}\r\n    * @param str\r\n    */\nbizagi.util.encodeString = function (str) {\n  var result = str || \"\";\n\n  result = result.replaceAll(\"&\", \"&amp;\");\n  result = result.replaceAll(\"$\", \"&#36;\");\n  result = result.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n  result = result.replaceAll(\"\\\"\", \"&#34;\").replaceAll(\"'\", \"&#39;\").replaceAll(\"/\", \"&#47;\");\n  result = result.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, \"$1<br />$2\");\n\n  return result;\n};\n\n/**\r\n    * Set Caret position \r\n    * Set the caret in specific position of an element type input\r\n    * @param {} func, position, input element \r\n    * @returns {} The function not return any value.\r\n    */\nbizagi.util.setCaretPosition = function (pos, ctrl) {\n  var self = this;\n\n  // Modern browsers\n  if (ctrl.setSelectionRange) {\n    ctrl.focus();\n    ctrl.setSelectionRange(pos, pos);\n\n    // IE8 and below\n  } else if (ctrl.createTextRange) {\n    var range = ctrl.createTextRange();\n    range.collapse(true);\n    range.moveEnd('character', pos);\n    range.moveStart('character', pos);\n    range.select();\n  }\n};\n\n\n/**\r\n    * Get position of caret\r\n    * Get the position of caret in a specific element input\r\n    * @param {} func, input element \r\n    * @returns {} Return the position of caret in an element input\r\n    */\nbizagi.util.getCaretPosition = function (oField) {\n\n  // Initialize\n  var iCaretPos = 0;\n\n  // IE Support\n  if (document.selection) {\n\n    // Set focus on the element\n    oField.focus();\n\n    // To get cursor position, get empty selection range\n    var oSel = document.selection.createRange();\n\n    // Move selection start to 0 position\n    oSel.moveStart('character', -oField.value.length);\n\n    // The caret position is selection length\n    iCaretPos = oSel.text.length;\n  } else if (oField.selectionStart || oField.selectionStart == '0') // Firefox support\n    iCaretPos = oField.selectionStart;\n\n  // Return results\n  return iCaretPos;\n};\n\n/**\r\n    * To escape values\r\n    * @param {} value \r\n    * @returns {} \r\n    */\nbizagi.util.escapeRegex = function (value) {\n  value = value || \"\";\n\n  return value.replace(/([\\^\\$\\(\\)\\[\\]\\{\\}\\*\\.\\+\\?\\|\\\\])/gi, \"\\\\$1\");\n};\n\n/**\r\n    * Function to get a featureObject by path within the global bizagiConfig.features object. Example: \"userService.v1.enabled\"\r\n    */\nbizagi.util.getFeatureObject = function (path) {\n  var arr = path.split('.');\n  this.featureObjectCache = this.featureObjectCache || {};\n\n  function getFeatureObjectIte(arr) {\n    var features = bizagi.util.getConfigFeatures();\n\n    if (typeof path !== \"string\" || typeof features == \"undefined\") return;\n\n    var pivot = features;\n    for (var i = 0, len = arr.length; i < len; i++) {\n      pivot = pivot[arr[i]];\n      if (typeof pivot === \"undefined\") return;\n    }\n    return pivot;\n  };\n  if (path in this.featureObjectCache) {\n    return this.featureObjectCache[path];\n  } else {\n    return this.featureObjectCache[path] = getFeatureObjectIte(arr);\n  }\n};\n\n/**\r\n    * Load features from mobile\r\n    */\nbizagi.util.getConfigFeatures = function () {\n  var bizagiConfiguration = window.bizagiConfig || bizagiConfig || {};\n\n  if (bizagi.util.isMobileDevice() && typeof BIZAGI_MOBILE_FEATURES !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_MOBILE_FEATURES)) {\n    bizagiConfiguration.features = JSON.parse(BIZAGI_MOBILE_FEATURES || \"{}\");\n  }\n\n  return bizagiConfiguration.features;\n};\n\n/**\r\n    * Reset features flag\r\n    */\nbizagi.util.resetConfigFeatures = function () {\n  bizagi.util.featureObjectCache = undefined;\n};\n\n/**\r\n    * Check fail request\r\n    * @param result\r\n    * @returns {*|boolean}\r\n    */\nbizagi.util.isFailResponse = function (result) {\n  return result && (result.type && result.type === \"error\" || result.status && result.status === \"error\" || result.code && result.code === \"UNKNOWN_ERROR\");\n};\n\n/**\r\n    * Formats value of each item\r\n    * @param {string, boolean or array} value\r\n    * @example\r\n    * value = \"string\" => \"string\"\r\n    * value = true => \"yes\" or \"si\", the localized value\r\n    * value = false => \"no\", the localized value\r\n    * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n    * @returns {string}\r\n    */\nbizagi.util.formatItem = function (value) {\n  if (value !== undefined && value !== null) {\n    if ($.isArray(value)) {\n\n      for (var i = 0, length = value.length; i < length; i++) {\n        if (value[i] != null && typeof value[i] == \"boolean\") {\n          if (bizagi.util.parseBoolean(value[i]) === true) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n\n          } else if (bizagi.util.parseBoolean(value[i]) === false) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n          }\n        }\n        value[i] = bizagi.util.sanitizeHTML(value[i]);\n      }\n\n      return value.join(\" - \");\n    } else {\n      return bizagi.util.sanitizeHTML(value);\n    }\n  } else {\n    return \"\";\n  }\n};\n\n\n/**\r\n    * Process response matches\r\n    * @param {} strValue\r\n    * @param term\r\n    * @param withoutFormat\r\n    * @returns {}\r\n    */\nbizagi.util.performTermMatches = function (strValue, term, withoutFormat) {\n  var parseValue;\n\n  if (_typeof(strValue) === \"object\") {\n    parseValue = bizagi.util.formatItem(strValue);\n  } else if (typeof strValue === \"string\") {\n    if (withoutFormat) {\n      parseValue = bizagi.util.sanitizeHTML(strValue);\n    } else {\n      parseValue = bizagi.util.highlightMatches(strValue, term);\n    }\n  } else {\n    parseValue = strValue;\n  }\n\n  return parseValue;\n};\n\n/**\r\n    * Process response to highlight matches\r\n    * @param strValue\r\n    * @param term\r\n    * @returns {string}\r\n    */\nbizagi.util.highlightMatches = function (strValue, term) {\n  var data = bizagi.util.escapeRegex(term).replaceAll(\"%\", \"\");\n  var regEx = new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + data + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\");\n\n  return bizagi.util.sanitizeHTML(strValue).replace(regEx, \"<strong>$1</strong>\");\n};\n\n/**\r\n    * Calculate window resolution for Desktop\r\n    * @returns {string}\r\n    */\nbizagi.util.getDesktopResolution = function () {\n  var resolution = \"\";\n  var devicePixelRatio = 1;\n  var screenWidth = window.screen.width;\n  var screenHeight = window.screen.height;\n\n  if ('deviceXDPI' in screen) {\n    devicePixelRatio = screen.deviceXDPI / screen.logicalXDPI;\n  } else if ('devicePixelRatio' in window) {\n    devicePixelRatio = window.devicePixelRatio;\n  }\n\n  devicePixelRatio = Number(devicePixelRatio.toFixed(3));\n\n  if (screenWidth && screenWidth > 0 && screenHeight && screenHeight > 0) {\n    resolution = screenWidth * devicePixelRatio + \"x\" + screenHeight * devicePixelRatio;\n  }\n\n  return resolution;\n};\n\n/**\r\n    * Get the market name for device\r\n    * @returns {*|string}\r\n    */\nbizagi.util.getDeviceCode = function () {\n  var deviceCode = \"\";\n\n  if (bizagi.util.isMobileDevice()) {\n    deviceCode = typeof BIZAGI_DEVICE_MARKET_NAME !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEVICE_MARKET_NAME) ? BIZAGI_DEVICE_MARKET_NAME : \"\";\n  } else {\n    deviceCode = bizagi.util.getDesktopResolution();\n  }\n\n  return deviceCode;\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/smartphone/, '').\n  replace(/tablet/, '').\n  replace(/offline/, '');\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeQueryType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/query/, '').\n  toLowerCase();\n};\n\n/**\r\n    * Hide or show the X button in the show dialog method \r\n    * \r\n    */\nbizagi.util.hideOrShowXToCloseDialog = function (dialog, show) {\n  var selector = \".ui-dialog-titlebar-close\";\n  if (show) {\n    $(selector, dialog).show();\n  } else {\n    $(selector, dialog).hide();\n  }\n};\n\n/**\r\n    * review if a feature key is enabled\r\n    * @param {string} feature nombre de la llave del feature\r\n    */\nbizagi.util.isEnableFeature = function (feature) {\n  if (bizagi.features === undefined) bizagi.features = [];\n  return bizagi.features[feature] !== false;\n};\n\n\n/**\r\n    * review if the posibleHtml has html content\r\n    * @param {string} possibleHtml to review\r\n    */\nbizagi.util.isHtml = function (possibleHtml) {\n  return /<[a-z][\\s\\S]*>/i.test(possibleHtml);\n};\n\n/**\r\n    * if the _try function fails the _catch() or _catch value will be executed and returned\r\n    * @param {Function} _try \r\n    * @param {Function | any} _catch \r\n    */\nbizagi.util.tryCatch = function (_try, _catch) {\n  try {\n    return _try();\n  } catch (e) {\n    return typeof _catch === \"function\" ? _catch() : _catch;\n  }\n};\n\n/**\r\n    * keep functions with next and at the end execute all functions are reduced by with method like a pipe using the variable\r\n    */\nbizagi.util.pipe = function (f, listFunctions) {\n  var _listFunctions = listFunctions === undefined ? [] : listFunctions;\n  _listFunctions.push(f);\n\n  return {\n    next: function next(f) {\n      return bizagi.util.pipe(f, _listFunctions);\n    },\n    end: function end(variable) {\n      return _listFunctions.reduce(function (newVar, f) {\n        return f(newVar);\n      }, variable);\n    } };\n\n},\n\n/**\r\n    * A function to get the scrolling parent of an html element.\r\n    */\nfunction ($) {\n\n  var parents = function parents(node, ps) {\n    if (node.parentNode === null) return ps;\n\n    return parents(node.parentNode, ps.concat([node]));\n  };\n\n  var style = function style(node, prop) {\n    return getComputedStyle(node, null).getPropertyValue(prop);\n  };\n\n  var overflow = function overflow(node) {\n    return style(node, \"overflow\") + style(node, \"overflow-y\") + style(node, \"overflow-x\");\n  };\n\n  var scroll = function scroll(node) {\n    return /(auto|scroll)/.test(overflow(node));\n  };\n\n  // Get the closest ancestor element that is scrollable.\n  $.scrollerParent = function (node) {\n    if (!(node instanceof HTMLElement || node instanceof SVGElement)) return;\n\n    var ps = parents(node.parentNode, []);\n\n    for (var i = 0; i < ps.length; i += 1) {\n      if (scroll(ps[i])) return ps[i];\n    }\n\n    return document.scrollingElement || document.documentElement;\n  };\n}(jQuery);\n\nbizagi.util.startkendo = function (params) {\n  if (typeof bizagi.kendoMobileApplication === \"undefined\") {\n    bizagi.kendoMobileApplication = new kendo.mobile.Application($(\"body\"), {\n      skin: \"flat\",\n      browserHistory: false,\n      init: function init(e) {\n        kendo.ui.progress($(\".km-flat\"), true);\n        params.started && params.started();\n      } });\n\n\n    bizagi.kendoMobileApplication.bizagiNavigate = function (e, t) {\n      this.navigate(e, t);\n    };\n  } else {\n    params.started && params.started();\n  }\n};\n\n/**\r\n    * Checks if bizagi is running in mashup.\r\n    */\nbizagi.util.isMashupContext = function () {\n  return typeof BIZAGI_MASHUP_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_MASHUP_CONTEXT) === true;\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.isSharepointContext = function () {\n  return typeof BIZAGI_SHAREPOINT_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_SHAREPOINT_CONTEXT) === true;\n};\n\n/**\r\n    * Checks if bizagi is running in webpart.\r\n    */\nbizagi.util.isWebpartContext = function () {\n  return typeof isWebpart !== \"undefined\" && bizagi.util.parseBoolean(isWebpart) === true;\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number }\r\n    */\nbizagi.util.startTimeline = function (data) {\n  new bizagi.workportal.widgets.widget().showTimeLine(data);\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number, isAdhoc: Boolean, idProcess: Number }\r\n    */\nbizagi.util.startGraphicquery = function (data) {\n  new bizagi.workportal.widgets.widget().showGraphicQuery(data);\n};\n\n/**\r\n    * start select user functionality\r\n    */\nbizagi.util.startSelectUser = function () {\n  return function (resolve, reject) {\n    var defer = $.Deferred();\n    new bizagi.workportal.widgets.widget().showSelectUser(defer);\n    defer.done(function (userId, userName, guid) {\n      resolve({\n        userId: userId,\n        userName: userName,\n        guid: guid });\n\n    }).fail(function () {\n      resolve({});\n    });\n  };\n};\n\n/* Checks if a given value with format {id, value} is empty\r\n   * @param value\r\n   * @returns {boolean}\r\n   */\nbizagi.util.isEmptyValue = function (value) {\n  if (value === 0) return false;\n  if (value === undefined || value === null || value === \"\") return true;\n  if (typeof value === \"Array\") return value.length === 0;\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") return value.length === 0;\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    for (var key in value) {\n      if (value.hasOwnProperty(key) && !bizagi.util.isEmptyValue(value[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR LIVE PROCESSES\n// ------------------------------------------------------------------------\n\n/**\r\n * Init refferer Params as an empty object\r\n */\nbizagi.util.initializeReferrerParams = function () {\n  if (!bizagi.referrerParams) {\n    bizagi.referrerParams = {};\n  }\n};\n\n/**\r\n    * Get data to update sidebar\r\n    */\nbizagi.util.getLPQueriesParameters = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.sidebarData;\n};\n\n/**\r\n    * Get selected tree item (Selected process)\r\n    */\nbizagi.util.getLPQueriesSelectedItemFromTree = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.selectedTreeItem;\n};\n\n/**\r\n    * Set data and save \r\n    */\nbizagi.util.setLPQueriesParameters = function (parametersSidebar, tree) {\n  bizagi.util.initializeReferrerParams();\n  bizagi.referrerParams.sidebarData = parametersSidebar;\n  bizagi.referrerParams.selectedTreeItem = tree;\n};\n\n/**\r\n    * Clean data to reset LP Queries component\r\n    */\nbizagi.util.cleanLPQueriesParameters = function () {\n  if (bizagi.referrerParams) {\n    bizagi.referrerParams.sidebarData = null;\n    bizagi.referrerParams.selectedTreeItem = null;\n  }\n};\n\n/**\r\n    * Set referrerParams referrer \r\n    */\nbizagi.util.setLPQueriesReferrer = function () {\n  bizagi.referrerParams.referrer = \"LPQueries\";\n};\n\n/**\r\n    * Check if there is internet connection\r\n    */\nbizagi.util.isConnected = function () {\n  if (bizagi.util.isNativeMobileDevice()) {\n    if (navigator && typeof navigator.connection !== \"undefined\" && typeof Connection !== \"undefined\")\n    return !(navigator.connection.type == Connection.NONE || navigator.connection.type == \"unknown\");\n    return true;\n  } else if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n    return window.navigator ? window.navigator.onLine : true;\n  }\n\n  return true;\n};\n\n/**\r\n    * Check If rendering url is allowed\r\n    * @param request\r\n    * @returns {boolean}\r\n    */\nbizagi.util.isRenderingUrlAllowed = function (request) {\n  var endPoint;\n  //The url Rest/Processes/RecentProcesses and Rest/Processes/OfflineProcessTree should be excluded from the whitelist\n  var whiteList = [\n  \"Rest/(Handlers|Userfields|DocumentTemplates|(Processes(?!/(RecentProcesses|OfflineProcessTree)))|Cases|Authentication|Users)\",\n  \"Api/(Authentication|Entities|Users)\"];\n\n  var url = (request || \"\").\n  replaceAll(\"..\\/\", \"\").\n  replaceAll(\".\\/\", \"\");\n\n  while (endPoint = whiteList.shift()) {\n    var pattern = new RegExp(endPoint, \"i\");\n    if (url.match(pattern) !== null) return true;\n  }\n\n  return false;\n};\n\n/**\r\n    * Captura todos los elementos input de tipo contraseña y añade el icono de ver/ocultar el valor (el icono incluye\r\n    * funcionalidad propia).\r\n    *\r\n    * Para mas información ver la aplicación de esta función en los widget de login.\r\n    *\r\n    * - Esta función requiere jQuery (variable $) globalmente.\r\n    * - Se aplica generalmente en la función render de los widget.\r\n    * - Asegurarse que todos los input de contraseña han sido cargados antes de ejecutar esta función, de lo contrario los\r\n    *   nuevos inputs no tendran la funcionalidad de ver/ocultar valor.\r\n    *\r\n    * @param {jQuery | HTMLElement} content\r\n    */\nbizagi.util.applyEyeFunction = function (content) {\n  function setShowIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg  class='eye_show_icon'  xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M15 7.8C14.9 7.6 12.7 3 8 3S1.1 7.6 1 7.8v.4c.1.2 2.3 4.8 7 4.8s6.9-4.6 7-4.8v-.4zM8 12c-3.5 0-5.5-3.1-5.9-4 .4-.9 2.4-4 5.9-4 3.5 0 5.5 3.1 5.9 4-.4.9-2.4 4-5.9 4z\\\"/>\\n\" +\n    \"<path d=\\\"M8 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='text']\").attr(\"type\", \"password\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function setHideIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg class='eye_hide_icon' xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M3.6 10.5l.7-.7a12.1 12.1 0 0 1-2-1.6C3.1 7.3 5.4 5 8 5h1l.8-.8A6 6 0 0 0 8 4C4.3 4 1.4 7.8 1.2 7.9l-.2.3.3.3a12.3 12.3 0 0 0 2.3 2zm8.7-4.9l-.7.7a12.4 12.4 0 0 1 2.1 1.9C12.9 9 10.6 11 8 11H7l-.8.8L8 12c3.7 0 6.6-3.3 6.7-3.5l.3-.3-.2-.3a12.8 12.8 0 0 0-2.5-2.3zM1.5 15h-.4a.5.5 0 0 1 0-.7l13-13a.5.5 0 1 1 .7.7l-13 13h-.3z\\\"/><path d=\\\"M6.3 7.8a1.7 1.7 0 0 1 1.5-1.5l.9-.9H8A2.7 2.7 0 0 0 5.3 8a2.7 2.7 0 0 0 .1.7l.9-.9zm3.4.4a1.7 1.7 0 0 1-1.5 1.5l-.9.9H8A2.7 2.7 0 0 0 10.7 8a2.7 2.7 0 0 0-.1-.7l-.9.9z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='password']\").attr(\"type\", \"text\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function addEvent(direct) {\n    return function (element) {\n      if (direct) {\n        var className = $(this).attr('class') || '';\n        var input = $(this).parent().find(\"input\");\n        if (className === 'eye_show_icon') {\n          setHideIcon(input);\n        } else {\n          setShowIcon(input);\n        }\n      } else {\n        $($(element, content).parent().find('svg')[0]).click(function (ev) {\n          var className = $(this).attr('class') || '';\n          var input = $(this).parent().find(\"input\");\n          if (className === 'eye_show_icon') {\n            setHideIcon(input);\n          } else {\n            setShowIcon(input);\n          }\n        });\n      }\n    };\n  }\n\n  $(content).find(\"input[type='password']\").map(function (index, element) {\n    if (index > 0) {\n      setShowIcon(element);\n      addEvent(false)(element);\n    }\n  });\n};\n\n/**\r\n    * Añadir eventos de accessibility a un elemento, el evento consiste en las siguientes teclas:\r\n    * - Enter, Click, Space.\r\n    * Ayuda a que los elementos puedan ser accedidos (activar evento de click) de multiples maneras incluyendo teclado.\r\n    * @param {*} element jQuery element\r\n    * @param {Function} cb Callback\r\n    * @param {string[]} [extraEvent] Array of extra events\r\n    */\nbizagi.util.accessibilityEnter = function (element, cb, extraEvent) {\n  if (typeof cb !== \"function\") {\n    throw new Error('Error in \"accessibilityEnter\" function: You must provide a valid callback');\n  }\n  /**\r\n     * @type {*|jQuery|HTMLElement}\r\n     * @const\r\n     */\n  extraEvent = $.isArray(extraEvent) ? extraEvent : [];\n  extraEvent.indexOf('click') !== -1 ? extraEvent : extraEvent.push('click');\n\n  element.bind(\"keypress\", function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n\n    if (e.which === 13 || e.which === 32) {// Events: enter or space\n      cb(e);\n    }\n  });\n\n  element.bind(extraEvent.join(', '), function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n    cb(e);\n  });\n};\n\n/**\r\n    * Recreate native buttons for iOS\r\n    */\n\nbizagi.util.recreateNativeButtons = function (context) {\n  var params = context.getFormContainer().getParams();\n  if (bizagi.util.isNativePluginSupported() && bizagi.util.isiOSSmartphoneDevice()) {\n    var navigation = params.navigation;\n    if (typeof navigation !== \"undefined\") {\n      navigation.setNavigationButtons(context);\n    }\n  }\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isOverrideFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName] || null;\n\n  return bizagi.util.parseBoolean(feature) === true;\n};\n\n/**\r\n    * Create dynamic class using the name\r\n    */\nbizagi.util.createDynamicClass = function (nameClass, renderParams) {\n  if (nameClass) {\n    try {\n      // Create a dynamic function to avoid problem with eval calls when minifying the code\n      var dynamicFunction = \"var dynamicFn = function(renderParams){ \\r\\n\";\n      dynamicFunction += \"return new \" + nameClass + \"(renderParams);\\r\\n\";\n      dynamicFunction += \"}\\r\\n\";\n      dynamicFunction += \"dynamicFn\";\n      dynamicFunction = eval(dynamicFunction);\n\n      // Call the dynamic function\n      return dynamicFunction(renderParams);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  // No class supported\n  return null;\n};\n\n/**\r\n    * Mobiscroll languages\r\n    */\nbizagi.util.languages = {\n  \"es\": \"es\", \"es-ES\": \"es\", \"es-AR\": \"es\", \"es-BO\": \"es\", \"es-Cl\": \"es\", \"es-CO\": \"es\", \"es-CR\": \"es\", \"es-DO\": \"es\", \"es-EC\": \"es\", \"es-SV\": \"es\", \"es-GT\": \"es\", \"es-HN\": \"es\", \"es-MX\": \"es\", \"es-NI\": \"es\", \"es-PA\": \"es\", \"es-PY\": \"es\", \"es-PR\": \"es\", \"es-PE\": \"es\", \"es-US\": \"es\", \"es-UY\": \"es\", \"es-VE\": \"es\",\n  \"en\": \"en-US\", \"en-AU\": \"en-US\", \"en-BZ\": \"en-US\", \"en-CA\": \"en-US\", \"en-029\": \"en-US\", \"en-IN\": \"en-US\", \"en-IE\": \"en-US\", \"en-JM\": \"en-US\", \"en-MY\": \"en-US\", \"en-NZ\": \"en-US\", \"en-PH\": \"en-US\", \"en-SG\": \"en-US\", \"en-ZA\": \"en-US\", \"en-TT\": \"en-US\", \"en-GB\": \"en-US\", \"en-US\": \"en-US\", \"en-ZW\": \"en-US\",\n  \"de\": \"de\", \"de-AT\": \"de\", \"de-DE\": \"de\", \"de-LI\": \"de\", \"de-LU\": \"de\", \"de-CH\": \"de\",\n  \"fr\": \"fr\", \"fr-BE\": \"fr\", \"fr-CA\": \"fr\", \"fr-LU\": \"fr\", \"fr-MC\": \"fr\", \"fr-CH\": \"fr\", \"fr-FR\": \"fr\",\n  \"it\": \"it\", \"it-IT\": \"it\", \"it-CH\": \"it\",\n  \"ja\": \"ja\", \"ja-JA\": \"ja\", \"ja-JP\": \"ja\",\n  \"nl\": \"nl\", \"nl-NL\": \"nl\", \"nl-BE\": \"nl\",\n  \"pt\": \"pt-PT\", \"pt-BR\": \"pt-PT\", \"pt-PT\": \"pt-PT\",\n  \"ru\": \"ru\", \"ru-RU\": \"ru\",\n  \"cs\": \"cs\", \"cs-CZ\": \"cs\",\n  \"ar\": \"ar\", \"ar-DZ\": \"ar\", \"ar-BH\": \"ar\", \"ar-EG\": \"ar\", \"ar-IQ\": \"ar\", \"ar-JO\": \"ar\", \"ar-KW\": \"ar\", \"ar-LB\": \"ar\", \"ar-LY\": \"ar\", \"ar-MA\": \"ar\", \"ar-OM\": \"ar\", \"ar-QA\": \"ar\", \"ar-SA\": \"ar\", \"ar-SY\": \"ar\", \"ar-TN\": \"ar\", \"ar-AE\": \"ar\", \"ar-YE\": \"ar\",\n  \"zh\": \"zh\", \"zh-HK\": \"zh\", \"zh-MO\": \"zh\", \"zh-CN\": \"zh\", \"zh-Hans\": \"zh\", \"zh-SG\": \"zh\", \"zh-TW\": \"zh\", \"zh-Hant\": \"zh\" };\n\n\n/**\r\n                                                                                                                              * Sets time to 0 in the date\r\n                                                                                                                              * @param value\r\n                                                                                                                              * @param fullFormat\r\n                                                                                                                              * @param showTime\r\n                                                                                                                              * @returns {Date} date converted with milliseconds 0\r\n                                                                                                                              */\nbizagi.util.getNormalizedDate = function (value, fullFormat, showTime) {\n  var dateTime = value;\n\n  try {\n    if (!!value && typeof value === \"string\") {\n      dateTime = bizagi.util.dateFormatter.getDateFromInvariant(value, showTime);\n    }\n\n    if (dateTime && dateTime !== 0 && dateTime != null) {\n      if (!showTime) {\n        dateTime.setHours(0, 0, 0, 0);\n      } else {\n        dateTime.setMilliseconds(0);\n      }\n\n      dateTime = bizagi.util.dateFormatter.formatDate(dateTime, fullFormat);\n    }\n  } catch (e) {\n  }\n\n  return dateTime;\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName];\n\n  return bizagi.util.parseBoolean(feature);\n};\n\n/**\r\n    * LOCAL STORAGE\r\n    */\n\n/**\r\n        * Last process inbox\r\n        * @returns lastProcessInboxKey string\r\n        */\nbizagi.util.getLastProcessInboxKey = function () {\n  var lastProcessInboxKey = 'lastProcessInbox';\n  lastProcessInboxKey = lastProcessInboxKey.concat(\"_\", bizagi.util.getUserHash());\n  return lastProcessInboxKey;\n};\n\n/**\r\n    * Constructor();\r\n    */\n\n/**\r\n       * Set last process inbox in local storage\r\n       * @returns void()\r\n       */\nbizagi.util.lastProcessInboxInit = function () {\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(bizagi.util.getLastProcessInboxCreate()));\n};\n\n/**\r\n    * Create last process inbox\r\n    * @returns {} lastProcessInbox\r\n    */\nbizagi.util.getLastProcessInboxCreate = function () {\n  return {\n    \"processInfo\": bizagi.util.createLastProcessInboxProcess(),\n    \"sortInfo\": bizagi.util.createLastProcessInboxSort(),\n    \"filterInfo\": bizagi.util.createLastProcessInboxFilter(),\n    \"processColumnsInfo\": bizagi.util.createLastProcessInboxColumns(),\n    \"inputTrayInfo\": bizagi.util.createLastProcessInboxInputTray() };\n\n};\n\n/**\r\n    * Create last process inbox default\r\n    * @returns {} processInfo\r\n    */\nbizagi.util.createLastProcessInboxProcess = function () {\n  return {\n    \"processInfoName\": null,\n    \"idWorkflow\": -1 };\n\n};\n\n/**\r\n    * Create sort info\r\n    * @return {} sortInfo\r\n    */\nbizagi.util.createLastProcessInboxSort = function () {\n  return {\n    \"sortDirection\": \"asc\",\n    \"sortFieldName\": null,\n    \"sortOrder\": null };\n\n};\n\n/**\r\n    * Create filter info\r\n    * filterType (equal, like, startsWith, endsWith )\r\n    * @return {} filterInfo\r\n    */\nbizagi.util.createLastProcessInboxFilter = function () {\n  return {\n    \"filterValue\": null,\n    \"filterFieldName\": null,\n    \"filterType\": \"equal\" };\n\n};\n\n/**\r\n    * Create process columns info\r\n    * @return {} columnsInfo\r\n    */\nbizagi.util.createLastProcessInboxColumns = function () {\n  return {\n    \"processColumns\": [] };\n\n};\n\n/**\r\n    * Create input tray info\r\n    * @return string inputTrayInfo\r\n    */\nbizagi.util.createLastProcessInboxInputTray = function () {\n  return \"inbox\";\n};\n\n/**\r\n    * INIT\r\n    */\n\n/**\r\n        * Init last process inbox\r\n        * @returns lastProcessInbox {}\r\n        */\nbizagi.util.getLastProcessInbox = function () {\n  var lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n\n  if (!lastProcessInbox) {\n    // New object\n    bizagi.util.lastProcessInboxInit();\n    // Get object\n    lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n  }\n\n  return JSON.parse(lastProcessInbox);\n};\n\n/**\r\n    * SET\r\n    */\n\n/**\r\n        * Save current process info\r\n        * @param processName string\r\n        * @param idWorkflow integrer\r\n        * @return void()\r\n        */\nbizagi.util.setLastProcessInbox = function (processInfoName, idWorkflow, smartInboxId) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  if (lastProcessInbox.processInfo) {\n    if (lastProcessInbox.processInfo.idWorkflow != idWorkflow) {\n      lastProcessInbox.processColumnsInfo = null;\n    } else if (!bizagi.util.isEmpty(smartInboxId) && lastProcessInbox.processInfo.smartInboxId != smartInboxId) {\n      lastProcessInbox.processColumnsInfo = null;\n    }\n  }\n\n  // set data\n  lastProcessInbox.processInfo.processInfoName = processInfoName;\n  lastProcessInbox.processInfo.idWorkflow = parseInt(idWorkflow || -1);\n  lastProcessInbox.processInfo.smartInboxId = typeof smartInboxId != \"undefined\" ? smartInboxId : null;\n\n  // When last process inbox change is required to delete Filters\n  if (lastProcessInbox.filterInfo) {\n    lastProcessInbox.filterInfo = bizagi.util.createLastProcessInboxFilter();\n  }\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save process columns info\r\n    * @param processColumns []\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxProcessColumns = function (processColumns) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.processColumnsInfo = lastProcessInbox.processColumnsInfo || {};\n  lastProcessInbox.processColumnsInfo.processColumns = processColumns || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/*\r\n   * Get Live filter from storage\r\n   * @param id object\r\n   * @return object\r\n   */\nbizagi.util.getLiveFiltersFromStorage = function (id) {\n  var filters = [];\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\");\n  try {\n    var serialize = JSON.parse(modelStorage);\n    filters = typeof serialize[id] != \"undefined\" ? JSON.parse(serialize[id]) : filters;\n  } catch (e) {\n    filters = [];\n  }\n\n  return filters;\n};\n\n/*\r\n   * Save Live filter in storage\r\n   * @param id object\r\n   * @param value object\r\n   * @return void()\r\n   */\nbizagi.util.setLiveFiltersToStorage = function (id, value) {\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\") || \"[]\";\n  var serialize = JSON.parse(modelStorage);\n\n  serialize[id] = JSON.stringify(value);\n\n\n  bizagi.util.setItemLocalStorage(\"livefilters\", JSON.encode(Object.assign({}, serialize)));\n};\n\n/**\r\n    * Save sort info\r\n    * @param liveFilters array\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxLiveFilter = function (liveFilters) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.liveFilters = liveFilters || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n\n/**\r\n    * Save sort info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxSort = function (sortFieldName, direction, sortOrder) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.sortInfo.sortFieldName = sortFieldName || null;\n  lastProcessInbox.sortInfo.sortDirection = direction || 'asc';\n  lastProcessInbox.sortInfo.sortOrder = sortOrder || null;\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save filter info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxFilter = function (filterValue, filterFieldName, filterType) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.filterInfo.filterValue = filterValue || null;\n  lastProcessInbox.filterInfo.filterFieldName = filterFieldName || null;\n  lastProcessInbox.filterInfo.filterType = filterType || 'equal';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save input Tray inbox info\r\n    * @param inputTray string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxInputTray = function (inputTray) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.inputTrayInfo = inputTray || '';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * GET\r\n    */\n\n/**\r\n        * Get process info\r\n        * @return {} process info\r\n        */\nbizagi.util.getLastProcessInboxProcessInfo = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // localization / default\n  if (bizagi.localization && lastProcessInbox.processInfo.processInfoName == null) {\n    lastProcessInbox.processInfo.processInfoName = bizagi.localization.getResource(\"workportal-widget-inbox-all-processes\");\n  }\n  lastProcessInbox.processInfo.allProcesses = lastProcessInbox.processInfo.idWorkflow === -1;\n  // response\n  return lastProcessInbox.processInfo;\n};\n\n/**\r\n    * Get smartinbox id\r\n    * @return string smartinbox id\r\n    */\nbizagi.util.getLastProcessInboxSmartInboxId = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processInfo.smartInboxId;\n};\n\n/**\r\n    * Get sort info\r\n    * @return {} sort info\r\n    */\nbizagi.util.getLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.sortInfo;\n};\n\n/**\r\n    * Get filter info\r\n    * @return {} filter info\r\n    */\nbizagi.util.getLastProcessInboxFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.filterInfo;\n};\n\n/**\r\n    * Get live filter info\r\n    * @return {} live filter info\r\n    */\nbizagi.util.getLastProcessInboxLiveFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.liveFilters;\n};\n\n/**\r\n    * Get process columns info\r\n    * @return [] process columns info\r\n    */\nbizagi.util.getLastProcessInboxProcessColumns = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processColumnsInfo;\n};\n\n/**\r\n    * Get input tray info\r\n    * @return string inputTray info\r\n    */\nbizagi.util.getLastProcessInboxInputTray = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.inputTrayInfo;\n};\n\n/**\r\n    * DELETE\r\n    */\n\n/**\r\n        * Remove last process inbox\r\n        * @return void()\r\n        */\nbizagi.util.removeLastProcessInbox = function () {\n  bizagi.util.removeItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.sortInfo) {\n    // set data\n    lastProcessInbox.sortInfo = bizagi.util.createLastProcessInboxSort();\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessLiveFilters = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.liveFilters) {\n    // set data\n    lastProcessInbox.liveFilters = [];\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\nbizagi.util.getSyncTimeStampKey = function () {\n  var syncTimeStampKey = 'syncTimeStamp';\n  syncTimeStampKey = syncTimeStampKey.concat(\"_\", bizagi.util.getUserHash());\n  return syncTimeStampKey;\n};\n\nbizagi.util.storeSyncTimeStamp = function (currentDate) {\n  bizagi.util.setItemLocalStorage(bizagi.util.getSyncTimeStampKey(), currentDate.toString());\n};\n\nbizagi.util.getSyncTimeStamp = function () {\n  var syncTimeStamp = bizagi.util.getItemLocalStorage(bizagi.util.getSyncTimeStampKey());\n  return syncTimeStamp ? new Date(syncTimeStamp) : undefined;\n};\n\nbizagi.util.getUserHash = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  return userKey.hashCode();\n};\n\n/**\r\n    * set or get the value in the defaultWidget\r\n    * if is mobile use cookie\r\n    * if is desktop save the value DETAIL or TABLE\r\n    * if is desktop on get returns inbox or inboxGrid only\r\n    */\nbizagi.util.defaultWidget = function (newValueStr) {\n  var _preferService = bizagi.services.preferences(),\n  _widgets = bizagi.workportal.widgets.widget,\n  _val2Str = function _val2Str(val) {\n    return val === 'DETAIL' ? _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX : _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n  },\n  _str2Val = function _str2Val(str) {\n    return str === 'inbox' ? 'DETAIL' : 'TABLE';\n  },\n  _mobile = {\n    set: function set(newVal) {\n      bizagi.cookie(\"bizagiDefaultWidget\", newVal, { expires: 30 });\n    },\n    get: function get() {\n      return bizagi.cookie(\"bizagiDefaultWidget\");\n    } },\n\n  _desktop = {\n    set: function set(newVal) {\n      var _newValueView = _str2Val(newVal);\n      _preferService.changePreference(_preferService.name.INBOX_VIEW_TYPE, _newValueView);\n    },\n    get: function get() {\n      var _actualValue = _preferService.getPreference(_preferService.name.INBOX_VIEW_TYPE);\n      return _val2Str(_actualValue);\n    } },\n\n  _device = bizagi.util.isMobile ? _mobile : _desktop;\n\n  if (newValueStr !== undefined)\n  _device.set(newValueStr);\n  return _device.get();\n};\n\nbizagi.util.getMobileFeaturesKey = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  var mobileFeaturesKey = 'mobileFeatures';\n  mobileFeaturesKey = mobileFeaturesKey.concat(\"_\", userKey);\n  return mobileFeaturesKey;\n};\n\nbizagi.util.getMobileFeatures = function () {\n  var stringFeatures = bizagi.util.getItemLocalStorage(bizagi.util.getMobileFeaturesKey());\n  var updatedFeatures = $.extend(!bizagi.util.isEmpty(stringFeatures) ? JSON.parse(stringFeatures) : {}, bizagiConfig.features);\n  return updatedFeatures;\n};\n\nbizagi.util.storeMobileFeatures = function (mobileFeatures) {\n  var storedFeatures = bizagi.util.getMobileFeatures();\n  var updatedFeatures = $.extend(storedFeatures, mobileFeatures);\n  bizagi.util.setItemLocalStorage(bizagi.util.getMobileFeaturesKey(), JSON.stringify(updatedFeatures));\n};\n\nbizagi.util.getCardviewMaxColumsAllowed = function () {\n  var maxColumns = 100;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n  if (mobileFeatures && mobileFeatures.maxColumnsEnabled &&\n  mobileFeatures.maxColumnsEnabled.enabled === true) {\n    maxColumns = mobileFeatures.maxColumnsEnabled.value;\n  }\n  return maxColumns;\n};\n\nbizagi.util.blobTob64 = function (blob, onlyData) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n  reader.readAsDataURL(blob);\n  reader.onloadend = function () {\n    base64data = reader.result;\n    if (onlyData) {\n      base64data = base64data.split(',')[1];\n    }\n    def.resolve(base64data);\n  };\n  return def;\n};\n/**\r\n    * Convert blob to text\r\n    * @param {*} blob \r\n    */\nbizagi.util.blobToText = function (blob) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n\n  reader.readAsText(blob);\n  reader.onloadend = function () {\n    def.resolve(reader.result);\n  };\n\n  return def.promise();\n};\n\n/**\r\n    * Get valid data url\r\n    * @param {} properties\r\n    * @returns {}\r\n    */\n\n/**\r\n       * Get valid data url\r\n       * @param {} properties\r\n       * @returns {}\r\n       */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.getDataUrl = function (binaryData, url) {\n  var currentUrl;\n\n  try {\n    if (typeof binaryData !== \"undefined\" && !bizagi.util.isEmpty(binaryData)) {\n      var data = binaryData;\n      var newUrl = data.value || data;\n\n      if (Array.isArray(newUrl)) {\n        var tempUrl = newUrl.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = newUrl;\n      }\n    } else {\n      currentUrl = url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.console = {};\nbizagi.util.console.log = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.log(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.log.apply(this, arguments);\n};\n\nbizagi.util.console.error = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.error(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.error.apply(this, arguments);\n};\n\nbizagi.util.deepExtend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    var obj = arguments[i];\n\n    if (!obj)\n    continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (_typeof(obj[key]) === 'object') {\n          if (obj[key] instanceof Array == true)\n          out[key] = obj[key].slice(0);else\n\n          out[key] = deepExtend(out[key], obj[key]);\n        } else\n\n        out[key] = obj[key];\n      }\n    }\n  }\n\n  return out;\n};\n\nbizagi.util.extend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    if (!arguments[i])\n    continue;\n\n    for (var key in arguments[i]) {\n      if (arguments[i].hasOwnProperty(key))\n      out[key] = arguments[i][key];\n    }\n  }\n\n  return out;\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n/**\r\n    * Get the justify-content property to apply to a control according to the specified \"align\" property\r\n    * @param {string} align - left, right, center, default or justify\r\n    */\nbizagi.util.mapAlignClassName = function (align) {\n  var descs = {\n    'rigth': 'flex-end',\n    'left': 'flex-start',\n    'justify': 'flex-start',\n    'default': 'center',\n    'center': 'center' };\n\n  return descs[align] || \"center\";\n};\n\nbizagi.util.isMobileErrorTracesEnabled = function () {\n  var mobileErrorTracesEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileErrorTraces && mobileFeatures.mobileErrorTraces.enabled === true) {\n    mobileErrorTracesEnabled = true;\n  }\n\n  return mobileErrorTracesEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileSmartInboxEnabled = function () {\n  var mobileSmartInboxEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileSmartInbox && mobileFeatures.mobileSmartInbox.enabled === true) {\n    mobileSmartInboxEnabled = true;\n  }\n\n  return mobileSmartInboxEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileLiveFiltersEnabled = function () {\n  var mobileLiveFiltersEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileLiveFilters && mobileFeatures.mobileLiveFilters.enabled === true) {\n    mobileLiveFiltersEnabled = true;\n  }\n\n  return mobileLiveFiltersEnabled && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n$.any = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return false;\n  var result = $.grep(data, callback);\n  return result != null && result !== undefined && result.length > 0;\n};\n\n$.first = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return null;\n  var result = $.grep(data, callback);\n  return result == null || result === undefined || result.length == 0 ? null : result[0];\n};\n\n$.groupBy = function (data, property) {\n  if (data === undefined || data == null || data.length == 0) return {};\n  var result = {};\n  $.each(data, function (i, item) {\n    if (item === undefined) return;\n    if (result[item[property]] === undefined) result[item[property]] = [];\n    result[item[property]].push(item);\n  });\n  return result;\n};\n\n/**\r\n    * Downloads the file and try to open it\r\n    * @param blobFile\r\n    * @param fileName\r\n    */\nbizagi.util.downloadBlobFile = function (blobFile, fileName) {\n  if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n    window.navigator.msSaveOrOpenBlob(blobFile, fileName);\n  } else {\n    var url = window.URL.createObjectURL(blobFile);\n    var link = document.createElement(\"a\");\n\n    link.style = \"display: none\";\n    document.body.appendChild(link);\n\n    link.href = url;\n    link.download = fileName;\n\n    link.click();\n\n    window.URL.revokeObjectURL(url);\n    link.parentNode.removeChild(link);\n  }\n};\n\n/**\r\n    * Verify if blob type json is an error\r\n    * @param {*} jsonFile Blob tipo JSON\r\n    */\nbizagi.util.handleJSONResponse = function (jsonFile) {\n  var deferred = new $.Deferred();\n\n  if (jsonFile && /application\\/json/i.test(jsonFile.type)) {\n    bizagi.util.blobToText(jsonFile).then(function (result) {\n      var json = JSON.parse(result);\n\n      if (json.type === \"error\") {\n        deferred.reject(result);\n      } else {\n        deferred.resolve(jsonFile);\n      }\n    }).fail(function (err) {\n      deferred.reject(err);\n    });\n  } else {\n    deferred.resolve(jsonFile);\n  }\n\n  return deferred.promise();\n};\n\n/**\r\n    * Method to validate the valid format of values\r\n    * @param value\r\n    * @returns {{add: function(), validate: function()}}\r\n    */\nbizagi.util.bzValidator = function (value) {\n  var validators = [];\n  var errors = [];\n\n  return {\n    add: function add(callbackValidator, message) {\n      if (typeof callbackValidator == \"function\") {\n        validators.push({\n          callback: callbackValidator,\n          message: message });\n\n      } else {\n        console.warn(\"Callback is not a function\");\n      }\n\n      return this;\n    },\n    validate: function validate(callbackResponse) {\n      errors = [];\n\n      try {\n        if (validators && validators.length > 0) {\n          validators.forEach(function (validator) {\n            var result = validator.callback(value);\n            if (!bizagi.util.isBoolean(result)) {\n              errors.push(\"Callback evaluation is not a function: \" + validator.message);\n            } else if (!result) {\n              errors.push(validator.message || \"Validation error\");\n            }\n          });\n        } else {\n          errors.push(\"There are not validators added\");\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n\n      // Call response\n      callbackResponse({ errors: errors });\n\n      // Clean validators\n      validators = [];\n\n      return this;\n    },\n    isValid: function isValid() {\n      return errors && !errors.length;\n    } };\n\n};","/*\r\n*   Name: Bizagi Grid for tablet\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This widget will extend the bizagi grid widget to specialize into a tablet view\r\n*\r\n*   Markup: <div></div>\r\n*\r\n*   Styles:\r\n*   - css/bizagi/tablet/controls/bizagi.grid.css\r\n*/\n\n(function ($) {\n  $.widget(\"ui.bizagi_grid_tablet\", $.ui.bizagi_grid, {\n\n    /**\r\n                                                         * Constructor\r\n                                                         * @private\r\n                                                         */\n    _init: function _init() {\n      this._super();\n\n      this.isOfflineForm = typeof this.options.isOfflineForm !== \"undefined\" && bizagi.util.parseBoolean(this.options.isOfflineForm);\n    },\n\n    /**\r\n        * Method to attach any handler to the grid\r\n        * @returns {}\r\n        */\n    attachHandlers: function attachHandlers() {\n      var self = this;\n\n      // Add paging events\n      self._getComponent(\"pager\").find(\"ul li button\").bind(\"click\", function () {\n        var pageNumber = parseInt($(this).attr(\"data-page-number\"));\n\n        if (pageNumber) {\n          self.changePage(pageNumber);\n        }\n      });\n\n      //TODO falta implementar\n      self._getComponent(\"dynamicPager\").find(\"input\").bind(\"click\", function () {\n        self.selectDynamicPager();\n      });\n\n      // Add sort events\n      self._getComponent(\"columns\").find(\".bz-tablet-grid__label.bz-table__column-sort\").bind(\"click\", function () {\n        if (!self.isOfflineForm) {\n          var columnIndex = $(this).attr(\"data-column-index\");\n          self.sortBy(columnIndex);\n        }\n      });\n\n      // Bind button actions\n      self._getComponent(\"buttons\").find(\"[data-action]\").bind(\"click\", function () {\n        if ($(this).attr(\"data-action\") === \"totalizer\") {\n          self.totalizer();\n        } else {\n          self.processAction($(this).attr(\"data-action\"));\n          self.unselectRow();\n        }\n      });\n\n      self._getComponent(\"rowButtons\").find(\"[data-action]\").bind(\"click\", function () {\n        self.processAction($(this).attr(\"data-action\"));\n        self.unselectRow();\n      });\n\n      if (bizagi.util.isiOSDevice()) {\n        //Horizontal scroll issue\n        self._resizeListener();\n      }\n\n      if (this.isOfflineForm) {\n        self._getComponent(\"rows\").on(\"click\", \".bz-tablet-grid__cell-actions [data-action=more]\", function (evt) {\n          var $context = $(evt.target).parents(\"[data-bizagi-component=cells]\");\n\n          if ($context && $context.hasClass(\"bz-tablet-grid__row\")) {\n            var businessKey = $context.attr(\"data-business-key\");\n            var isNewRow = bizagi.util.parseBoolean($context.attr(\"data-new-row\")) || false;\n\n            if (isNewRow) {\n              self.onRemoveNewRow(businessKey);\n            } else {\n              self.processAction(\"remove\", { key: businessKey });\n            }\n          }\n        });\n      } else {\n\n        self._getComponent(\"rows\").find(\"tr\").bind(\"click\", function (evt) {\n          var $context = $(evt.target).closest(\".bz-tablet-grid__cell\");\n\n          evt.stopPropagation();\n\n          if ($context && $context.hasClass(\"bz-tablet-grid__cell\")) {\n            var key = $(this).attr(\"data-key\");\n            var businessKey = $(this).attr(\"data-business-key\");\n\n            self.selectRow(key, businessKey);\n          }\n        });\n\n        // Bind special cell button action\n        self._addColumnActions();\n      }\n    },\n\n    /**\r\n        * Popup Total\r\n        * @returns {}\r\n        */\n    totalizer: function totalizer() {\n      this.options.totalData();\n    },\n    /**\r\n        * Executes the row selected handler\r\n        * @returns {}\r\n        */\n    onRowSelected: function onRowSelected() {\n      // Call base\n      $.ui.bizagi_grid.prototype.onRowSelected.apply(this, arguments);\n\n      // Show row buttons             \n      this._showRowButtons();\n    },\n\n    /**\r\n        * Executes the row un-selected handler\r\n        * @returns {}\r\n        */\n    onRowUnselected: function onRowUnselected() {\n      // Call base\n      $.ui.bizagi_grid.prototype.onRowUnselected.apply(this, arguments);\n\n      // Hide row buttons           \n      this._hideRowButtons();\n    },\n\n    getCell: function getCell(key, xpath, index) {\n      var self = this;\n      var row = self._getComponent(\"rows\").find(\"[data-business-key=\" + key + \"]\");\n      var allVisibleTd,cell = \"\";\n\n      allVisibleTd = $(\"td\", $(row));\n      cell = allVisibleTd[index + 1];\n\n      return $(cell);\n    },\n\n    /**\r\n        * Template method to check if buttons component must be rendered\r\n        * @returns {}\r\n        */\n    _canShowButtons: function _canShowButtons() {\n      var actions = this.options.actions;\n\n      if (this.isOfflineForm) {\n        return actions[\"add\"] || actions[\"remove\"] || actions[\"edit\"] || actions[\"inlineAdd\"];\n      } else {\n        return actions[\"add\"] || actions[\"hasTotalizer\"];\n      }\n    },\n\n    /*\r\n       *   This method draws a grid row\r\n       */\n    drawRow: function drawRow(rowData, isNewRow) {\n      var self = this;\n      var options = self.options;\n      var key = rowData[self.columnKeyIndex];\n      var newRow = isNewRow || false;\n      var rnd = Math.floor(Math.random() * 10000);\n      var row = $.fasttmpl(options.template.row, {\n        key: rnd,\n        isNewRow: isNewRow,\n        businessKey: key });\n\n\n      // Resolve cells\n      var cells = \"\";\n      $.each(rowData, function (i, cell) {\n        // Draw normal cell\n        cells += self.drawCell(i, key, cell, newRow);\n      });\n\n      if (self._canShowRowButtons()) {\n        // Draw special column\n        cells += self.drawSpecialCell(self.options.columns.length + 1);\n      }\n\n      // Resolve cells template\n      row = self._replaceElement(row, \"cells\", cells);\n      return row;\n    },\n\n    /*\r\n       *   This method draws a grid pager\r\n       */\n    drawPager: function drawPager() {\n      var self = this;\n      var options = self.options;\n\n      // Calculate pages\n      var pages = [];\n      var renderPages = [];\n\n      for (var i = 1; i <= self.data.total; i++) {\n        pages.push({\n          number: i,\n          active: i == self.data.page });\n\n      }\n\n      if (self.data.page < 3 || self.data.page > self.data.total - 2) {\n        renderPages = [];\n      } else {\n        renderPages = [self.data.page - 1, self.data.page, self.data.page + 1];\n      }\n\n      var pagination = {\n        renderPages: renderPages,\n        pages: pages,\n        pagination: {\n          totalPages: self.data.total,\n          currentPage: self.data.page } };\n\n\n\n      // Resolve pager template\n      return $.fasttmpl(options.template.pager, pagination);\n    },\n\n    /**\r\n        * Template method to check if row buttons must be displayed when the row is selected\r\n        * @returns {}\r\n        */\n    _canShowRowButtons: function _canShowRowButtons() {\n      var actions = this.options.actions;\n\n      if (this.isOfflineForm) {\n        return actions[\"remove\"];\n      } else {\n        return actions[\"edit\"] || actions[\"details\"] || actions[\"remove\"] || this.options.subType == \"adhocGrid\";\n      }\n    },\n\n    /**\r\n        * Show the row buttons\r\n        * @returns {}\r\n        */\n    _showRowButtons: function _showRowButtons() {\n      var self = this;\n      var doc = window.document;\n      var element = self.element;\n\n      // Add selected style to row\n      var tr = element.find(\"[data-bizagi-component=rows] tr[data-key=\" + self.selectedRow + \"]\");\n      tr.addClass(\"ui-bizagi-state-selected\");\n    },\n\n    /**\r\n        * Hide the row buttons\r\n        * @returns {}\r\n        */\n    _hideRowButtons: function _hideRowButtons() {\n      var self = this;\n\n      // Call base\n      $.ui.bizagi_grid.prototype.onRowUnselected.apply(self, arguments);\n\n      var tr = self._getComponent(\"rows\").find(\"tr[data-key=\" + self.selectedRow + \"]\");\n      tr.removeClass(\"ui-bizagi-state-selected\");\n\n      // Hide floating buttons for the row\n      if (!self.isOfflineForm) {\n        var floatingButtons = self._getComponent(\"rowButtons\");\n        floatingButtons.hide();\n      }\n    },\n\n    /**\r\n        * Return the new created ids\r\n        * @param {} rows\r\n        * @returns {}\r\n        */\n    getNewRowKeys: function getNewRowKeys(rows) {\n      var self = this;\n\n      rows = rows || self._getComponent(\"rows\").find(\"[data-new-row=true]\");\n\n      return $.map(rows, function (row, i) {\n        return $(row).data(\"business-key\");\n      });\n    },\n\n    /**\r\n        * Process an action in order to do something with the grid\r\n        * @param {} action\r\n        * @returns {}\r\n        */\n    processAction: function processAction(action) {\n      var self = this;\n\n      // Call base\n      $.ui.bizagi_grid.prototype.processAction.apply(self, arguments);\n\n      if (action === \"save\") {\n        self.onSaveAddedRows();\n      }\n      if (action === \"cancel\") {\n        self.onCancelEdition();\n      }\n    },\n\n    /**\r\n        * Check if row its new\r\n        * @param {} businessKey\r\n        * @returns {}\r\n        */\n    isNewRecord: function isNewRecord(businessKey) {\n      var self = this;\n      var row = self._getComponent(\"rows\");\n\n      if (row) {\n        businessKey = row.find(\"[data-business-key='\" + businessKey + \"']\");\n        if ($(businessKey).data(\"new-row\")) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\r\n        * Add inline row\r\n        * @returns {}\r\n        */\n    addInlineRow: function addInlineRow() {\n      var self = this;\n\n      // Draw the new row\n      self._triggerHandler(\"beforeInlineAdd\");\n      var html = self.drawRow(self.createAddRowData(), true);\n      var newRow = $(html);\n\n      // Execute the postrender\n      self.postRenderRow(newRow);\n\n      // Append to rows component\n      self._getComponent(\"rows\").append(newRow);\n\n      var buttons = self._getComponent(\"buttons\");\n\n      if (self.isOfflineForm) {\n        buttons.find(\"[data-action=save]\").removeClass(\"bz-tablet-grid__buttons--hidden\");\n        buttons.find(\"[data-action=cancel]\").removeClass(\"bz-tablet-grid__buttons--hidden\");\n      } else {\n        buttons.find(\"[data-action=save]\").css(\"display\", \"inline-block\");\n        buttons.find(\"[data-action=cancel]\").css(\"display\", \"inline-block\");\n      }\n\n      // Show table component if there are no rows\n      if (self.data.rows.length === 0) {\n        self._getComponent(\"table\").show();\n        self._getComponent(\"emptyTable\").hide();\n      }\n\n      self._triggerHandler(\"afterInlineAdd\", newRow.data());\n    },\n\n    /**\r\n        * Creates a dummy data for the new row\r\n        * @returns {}\r\n        */\n    createAddRowData: function createAddRowData() {\n      var self = this;\n      var options = self.options;\n      var row = [];\n\n      $.each(options.columns, function (i) {\n\n        if (i === self.columnKeyIndex) {\n          // Add random key so we can identify them later\n          var key = Math.ceil(Math.random() * 100000);\n          row.push(key);\n        } else {\n          // Add null value\n          row.push(null);\n        }\n      });\n\n      return row;\n    },\n\n    /**\r\n        * Executes the on add row handler\r\n        * @returns {}\r\n        */\n    onAddRow: function onAddRow() {\n      var self = this;\n\n      // Allow add\n      if (self.options.actions.add) {\n        if (self.options.actions.inlineAdd) {\n          return self.addInlineRow();\n        } else {\n          // Open dialog with addform\n          return self._triggerHandler(\"addRow\");\n        }\n      }\n    },\n\n    /**\r\n        * Executes when the user presses the cancel button, after inline add edition\r\n        * @returns {}\r\n        */\n    onCancelEdition: function onCancelEdition() {\n      var self = this;\n\n      // Remove zero key rows\n      var rows = self._getComponent(\"rows\").find(\"[data-new-row=true]\");\n      var savedRows = self._getComponent(\"rows\").find(\"[data-new-row=false]\");\n      rows.detach();\n\n      // Hide buttons\n      var buttons = self._getComponent(\"buttons\");\n\n      if (self.isOfflineForm) {\n        buttons.find(\"[data-action=save]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n        buttons.find(\"[data-action=cancel]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n      } else {\n        buttons.find(\"[data-action=save]\").hide();\n        buttons.find(\"[data-action=cancel]\").hide();\n      }\n\n      // Show table component if there are no rows\n      if (savedRows.length === 0) {\n        self._getComponent(\"table\").hide();\n        self._getComponent(\"emptyTable\").show();\n      }\n\n      return self._triggerHandler(\"cancelEdition\", { keys: self.getNewRowKeys(rows) });\n    },\n\n    /**\r\n        * Executes when the user presses the save button, after inline add edition\r\n        * @returns {}\r\n        */\n    onSaveAddedRows: function onSaveAddedRows() {\n      var self = this;\n\n      // Retrieve key of added rows\n      var newRowKeys = self.getNewRowKeys();\n      var buttons = self._getComponent(\"buttons\");\n\n      // Hide buttons         \n      if (newRowKeys.length >= 1 && self.isValid()) {\n\n        var row = self._getComponent(\"rows\");\n\n        if (self.isOfflineForm) {\n          $.each(newRowKeys, function (key, value) {\n            var businessKey = row.find(\"[data-business-key='\" + value + \"']\");\n            $(businessKey).attr(\"data-new-row\", 'false');\n          });\n\n          buttons.find(\"[data-action=save]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n          buttons.find(\"[data-action=cancel]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n\n          self._triggerHandler(\"saveAddedRows\", { keys: newRowKeys });\n\n          return true;\n        } else {\n          buttons.find(\"[data-action=save]\").hide();\n          buttons.find(\"[data-action=cancel]\").hide();\n\n          self._triggerHandler(\"saveAddedRows\", { keys: newRowKeys });\n\n          return self._triggerHandler(\"removeNewRecords\", { keys: newRowKeys });\n        }\n\n      } else {\n        return true;\n      }\n    },\n\n    /**\r\n        * Hide buttons\r\n        */\n    hideHeaderButtons: function hideHeaderButtons() {\n      var self = this;\n      var buttons = self._getComponent(\"buttons\");\n\n      if (buttons && buttons.length) {\n        buttons.find(\"[data-action=save]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n        buttons.find(\"[data-action=cancel]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n      }\n    },\n\n    /**\r\n        * Add new column actions\r\n        * @private\r\n        */\n    _addColumnActions: function _addColumnActions() {\n      var self = this;\n      var items = [];\n\n      if (self.options.actions.details) {\n        items.push({\n          name: bizagi.localization.getResource(\"render-collection-navigator-details-form\"),\n          fn: function fn(e) {\n            var businessKey = $(e).parents(\"[data-bizagi-component=cells]\").attr(\"data-business-key\");\n\n            if (self.options.actions.details) {\n              self.processAction(\"details\", { key: businessKey });\n            } else {\n              self.processAction(\"more\", { key: businessKey });\n            }\n          } });\n\n      }\n\n      if (self.options.actions.edit) {\n        items.push({\n          name: bizagi.localization.getResource(\"render-grid-edit-label\"),\n          fn: function fn(e) {\n            var businessKey = $(e).parents(\"[data-bizagi-component=cells]\").attr(\"data-business-key\");\n\n            self.processAction(\"edit\", { key: businessKey });\n          } });\n\n      }\n\n      if (self.options.actions.remove) {\n        items.push({\n          name: bizagi.localization.getResource(\"render-ecm-confirm-bt-delete\"),\n          fn: function fn(e) {\n            var businessKey = $(e).parents(\"[data-bizagi-component=cells]\").attr(\"data-business-key\");\n\n            self.processAction(\"remove\", { key: businessKey });\n          } });\n\n      }\n\n      self._getComponent(\"rows\").find(\"[data-action=more]\").overflowMenu({ items: items });\n    },\n\n    /**\r\n        * Executes when the user presses the cancel button, after inline add edition\r\n        * @param key\r\n        * @param businessKey\r\n        */\n    onRemoveNewRow: function onRemoveNewRow(businessKey) {\n      var self = this;\n      var buttons = self._getComponent(\"buttons\");\n\n      // Remove zero key rows\n      var cancelNewRow = self._getComponent(\"rows\").find(\"tr[data-business-key=\" + businessKey + \"]\");\n      var savedRows = self._getComponent(\"rows\").find(\"[data-new-row=false]\");\n      var newRows = self._getComponent(\"rows\").find(\"[data-new-row=true]\");\n\n      cancelNewRow.detach();\n\n      // Hide buttons\n      if (newRows.length === 1) {\n        buttons.find(\"[data-action=save]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n        buttons.find(\"[data-action=cancel]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n      }\n\n      // Show table component if there are no rows\n      if (savedRows.length === 0 && newRows.length === 1) {\n        self._getComponent(\"table\").hide();\n        self._getComponent(\"emptyTable\").show();\n      }\n\n      return self._triggerHandler(\"cancelEdition\", { keys: self.getNewRowKeys(cancelNewRow) });\n    },\n\n    /**\r\n        * Replaces a matched element in the container for the specified \"replace\" element\r\n        * @param html\r\n        * @param element\r\n        * @param replace\r\n        * @returns {*}\r\n        * @private\r\n        */\n    _replaceElement: function _replaceElement(html, element, replace) {\n      return html.replace(new RegExp(\"{{element \" + element + \"}}\", 'g'), replace);\n    },\n\n    _resizeListener: function _resizeListener() {\n      var randomNumber = Math.ceil(Math.random() * 100000);\n      var prevWidth = 0;\n      var self = this;\n      var tableComp = self._getComponent(\"table\");\n      var intersectionObserver = new IntersectionObserver(function (args) {\n        args.forEach(function (entry) {\n          if (entry.isIntersecting) {\n            $(window).on(\"resize.\" + randomNumber, self._fixHorizontalScroll.bind(self));\n          } else {\n            $(window).off(\"resize.\" + randomNumber);\n          }\n        });\n        if (prevWidth != tableComp.width()) {\n          prevWidth = tableComp.width();\n          self._fixHorizontalScroll();\n        }\n      });\n      intersectionObserver.POLL_INTERVAL = 100; // Time in milliseconds.\n      intersectionObserver.observe(self._getComponent(\"table\").get(0));\n    },\n\n    _fixHorizontalScroll: function _fixHorizontalScroll() {\n      var self = this;\n      var tableComp = self._getComponent(\"table\");\n      tableComp.css({ webkitOverflowScrolling: 'auto', 'overflow-x': 'hidden' });\n      setTimeout(function () {\n        tableComp.css({ webkitOverflowScrolling: 'touch', 'overflow-x': 'auto' });\n      }, 10);\n    } });\n\n\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}bizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.util = typeof bizagi.util !== \"undefined\" ? bizagi.util : {};\nbizagi.context = typeof bizagi.context !== \"undefined\" ? bizagi.context : {};\n\n/**\r\n                                                                               * Method to detect iPad visitors\r\n                                                                               */\nbizagi.util.randomNumber = function (min, max) {\n  min = min || 1;\n  max = max || 10000000;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\r\n    *   Returns the resolved result from a promise when the promise has been executed already\r\n    */\nbizagi.resolveResult = function (promise) {\n  var result;\n  promise.done(function (data) {\n    result = data;\n  });\n  return result;\n};\n\n/**\r\n    *   Returns a boolean if there are two equal objects\r\n    */\nbizagi.util.identicalObjects = function (obj1, obj2) {\n  var self = this;\n\n  if (_typeof(obj1) !== _typeof(obj2)) {\n    return false;\n  }\n\n  if (typeof obj1 === \"function\") {\n    return obj1.toString() === obj2.toString();\n  }\n\n  if (obj1 instanceof Object && obj2 instanceof Object) {\n\n    // Count properties\n    if (bizagi.util.countProps(obj1) !== bizagi.util.countProps(obj2)) {\n      return false;\n    }\n\n    var r = true;\n    for (k in obj1) {\n      r = bizagi.util.identicalObjects(obj1[k], obj2[k]);\n      if (!r) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return obj1 === obj2;\n  }\n};\n\n\nbizagi.util.countProps = function (obj) {\n  var count = 0;\n  for (k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      count++;\n    }\n  }\n  return count;\n};\n\n/**\r\n    *   Encode a html string\r\n    */\nbizagi.util.encodeHtml = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  return text;\n};\n\n/**\r\n    *   Encodes the xpath\r\n    */\nbizagi.util.encodeXpath = function (xpath) {\n  if (bizagi.util.isEmpty(xpath))\n  return \"\";\n  return xpath.replaceAll(\".\", \"_\").replaceAll(\"=\", \"_\").replaceAll(\"[\", \"_\").replaceAll(\"]\", \"_\");\n};\n\n/**\r\n    *   Add a clone to the object prototype\r\n    */\nbizagi.clone = function (obj) {\n  return JSON.parse(JSON.encode(obj));\n};\n\n/**\r\n    *   Generates a random guid\r\n    */\nMath.guid = function () {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n};\n\n/**\r\n    * Execute deferreds in order\r\n    * @example var a = new bizagiQueue(); a.add(function);\r\n    *\r\n    */\nfunction bizagiQueue() {\n  var self = this;\n  var queue = [];\n\n  self.add = function (callback) {\n    queue.push({ callbacks: [callback] });\n  };\n\n  self.addParallel = function (callback) {\n    if (queue.length == 0)\n    return self.add(callback);\n\n    // Put a parallel on last item\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.execute = function () {\n    var starter = new $.Deferred();\n    var promise = starter.promise();\n    var queueLength = queue.length;\n    for (var i = 0; i < queueLength; i++) {\n      promise = promise.pipe(function () {\n        var element = queue.shift();\n        return $.when.apply($, $.map(element.callbacks, function (callback) {\n          // Function support\n          if (typeof callback == \"function\")\n          return callback();\n          // Deferred support\n          return callback;\n        }));\n      });\n    };\n\n    starter.resolve();\n    promise = promise.done(function () {\n      // Reset queue\n      queue = [];\n    });\n\n    return promise;\n  };\n};\n\n/**\r\n    *   Check if a map object is empty\r\n    */\nbizagi.util.isMapEmpty = function (map) {\n  // First we validate a special case\n  if (map.length == 1 && map[0].length == 0)\n  return true;\n  // Then we do normal validation\n  for (var key in map) {\n    if (map.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\r\n    * Find element to make scroll top\r\n    */\nbizagi.util.scrollTop = function (canvas) {\n  if (canvas && canvas[0]) {\n    while (canvas[0].tagName !== \"HTML\" && canvas.css(\"overflow-y\") != \"scroll\" && canvas.css(\"overflow-y\") != \"auto\" && canvas.parent().length > 0) {\n      canvas = canvas.parent();\n    }\n  }\n  return canvas;\n};\n\n/*\r\n   *   Read the query string parameteres\r\n   */\nbizagi.util.getQueryString = function (url) {\n  var params = {};\n  url = url || window.location.href;\n  var query = url.indexOf(\"?\") > 0 ? url.substring(url.indexOf(\"?\") + 1) : \"\";\n  var pairs = query.split(\"&\");\n  for (var i = 0; i < pairs.length; i++) {\n    var pos = pairs[i].indexOf('=');\n    if (pos == -1)\n    continue;\n    var argname = pairs[i].substring(0, pos);\n    var value = pairs[i].substring(pos + 1);\n    params[argname] = unescape(value);\n  }\n  return params;\n};\n\n\n/*\r\n   *   Info scenarios\r\n   */\nvar scenarioInfo = function scenarioInfo(params) {\n  var self = this;\n  var _state = {};\n\n  /**\r\n                   * Return url where is located specific scenario\r\n                   *\r\n                   * @param params\r\n                   * @returns {string}\r\n                   */\n  self.getFileScenario = function (params) {\n    params = params || {};\n    var url = \"\";\n    var scenario = params.scenario.split(\".\") || [];\n    var category = scenario[0];\n\n    url = BIZAGI_SMARTPHONE_PATH + \"scenarios/\" + category + \"/\" + params.scenario + \".js\";\n\n    return url;\n  };\n\n  return {\n    getFileScenario: self.getFileScenario };\n\n};\n\n/**\r\n    *   Determines if parameter 'n' is numeric\r\n    */\nbizagi.util.isNumeric = function (n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\n/**\r\n    *   Determines if a element has visibility\r\n    */\nbizagi.util.isScrolledIntoView = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var scrollTop = layout.scrollTop();\n  var elemTop = $(elem).offset().top;\n  var elemBottom = elemTop + $(elem).height();\n  var docViewBottom = scrollTop + $(layout).height();\n  return elemBottom <= docViewBottom && elemTop >= scrollTop;\n};\n\n/**\r\n    * determines whether the element in the browser supports the event we are looking for, eg 'paste', 'input', 'blur', etc. More info check modernizer.js.\r\n    * @param  {string|*}           eventName  is the name of an event to test for (e.g. \"resize\")\r\n    * @param  {(Object|string|*)=} element    is the element|document|window|tagName to test on\r\n    * @return {boolean}\r\n    */\nbizagi.util.isEventSupported = function (eventName, element) {\n  var needsFallback = !('onblur' in document.documentElement);\n  var isSupported;\n\n  if (!eventName) {\n    return false;\n  }\n  if (!element || typeof element === 'string') {\n    element = document.createElement(element || 'div');\n  }\n\n  // Testing via the `in` operator is sufficient for modern browsers and IE.\n  // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n  // \"resize\", whereas `in` \"catches\" those.\n  eventName = 'on' + eventName;\n  isSupported = eventName in element;\n\n  // Fallback technique for old Firefox - bit.ly/event-detection\n  if (!isSupported && needsFallback) {\n    if (!element.setAttribute) {\n      // Switch to generic element if it lacks `setAttribute`.\n      // It could be the `document`, `window`, or something else.\n      element = document.createElement('div');\n    }\n    if (element.setAttribute && element.removeAttribute) {\n      element.setAttribute(eventName, '');\n      isSupported = typeof element[eventName] === 'function';\n\n      if (element[eventName] !== undefined) {\n        // If property was created, \"remove it\" by setting value to `undefined`.\n        element[eventName] = undefined;\n      }\n      element.removeAttribute(eventName);\n    }\n  }\n  return isSupported;\n};\n/*\r\n    * Method to detect Android visitors\r\n    */\nbizagi.util.isAndroid = function () {\n  return navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n};\n\n/**\r\n    * Functions to loading\r\n    */\n(function ($) {\n  $.fn.startLoading = function (params) {\n    bizagi.util.smartphone.startLoading();\n  };\n\n  $.fn.endLoading = function () {\n    bizagi.util.smartphone.stopLoading();\n  };\n})(jQuery);\n\n/***\r\n             * Removes the objects and dispose\r\n             * @param obj\r\n             */\n\nbizagi.util.dispose = function (obj) {\n  for (key in obj) {\n    if (_typeof(obj[key]) == \"object\") delete obj[key];\n    if (typeof obj[key] == \"function\") {obj[key] = null;delete obj[key];}\n  }\n};\n\n/**\r\n   * Remove all backslashes that represent scape of characters\r\n   */\nbizagi.util.stripslashes = function (str) {\n  return str.replace(/\\\\'/g, '\\'').replace(/\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\').replace(/\\\\0/g, '\\0');\n};\n\n/**\r\n    * CryptoJS MD5 \r\n    * @param {} message \r\n    * @returns {} \r\n    */\nbizagi.util.md5 = function (message) {\n  // Code here will be linted with JSHint.\n  /* jshint ignore:start */\n  var CryptoJS = CryptoJS || function (s, p) {var m = {},l = m.lib = {},n = function n() {},r = l.Base = { extend: function extend(b) {n.prototype = this;var h = new n();b && h.mixIn(b);h.hasOwnProperty(\"init\") || (h.init = function () {h.$super.init.apply(this, arguments);});h.init.prototype = h;h.$super = this;return h;}, create: function create() {var b = this.extend();b.init.apply(b, arguments);return b;}, init: function init() {}, mixIn: function mixIn(b) {for (var h in b) {b.hasOwnProperty(h) && (this[h] = b[h]);}b.hasOwnProperty(\"toString\") && (this.toString = b.toString);}, clone: function clone() {return this.init.prototype.extend(this);} },q = l.WordArray = r.extend({ init: function init(b, h) {b = this.words = b || [];this.sigBytes = h != p ? h : 4 * b.length;}, toString: function toString(b) {return (b || t).stringify(this);}, concat: function concat(b) {var h = this.words,a = b.words,j = this.sigBytes;b = b.sigBytes;this.clamp();if (j % 4) for (var g = 0; g < b; g++) {h[j + g >>> 2] |= (a[g >>> 2] >>> 24 - 8 * (g % 4) & 255) << 24 - 8 * ((j + g) % 4);} else if (65535 < a.length) for (g = 0; g < b; g += 4) {h[j + g >>> 2] = a[g >>> 2];} else h.push.apply(h, a);this.sigBytes += b;return this;}, clamp: function clamp() {var b = this.words,h = this.sigBytes;b[h >>> 2] &= 4294967295 << 32 - 8 * (h % 4);b.length = s.ceil(h / 4);}, clone: function clone() {var b = r.clone.call(this);b.words = this.words.slice(0);return b;}, random: function random(b) {for (var h = [], a = 0; a < b; a += 4) {h.push(4294967296 * s.random() | 0);}return new q.init(h, b);} }),v = m.enc = {},t = v.Hex = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {var k = a[j >>> 2] >>> 24 - 8 * (j % 4) & 255;g.push((k >>> 4).toString(16));g.push((k & 15).toString(16));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j += 2) {g[j >>> 3] |= parseInt(b.substr(j, 2), 16) << 24 - 4 * (j % 8);}return new q.init(g, a / 2);} },a = v.Latin1 = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {g.push(String.fromCharCode(a[j >>> 2] >>> 24 - 8 * (j % 4) & 255));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j++) {g[j >>> 2] |= (b.charCodeAt(j) & 255) << 24 - 8 * (j % 4);}return new q.init(g, a);} },u = v.Utf8 = { stringify: function stringify(b) {try {return decodeURIComponent(escape(a.stringify(b)));} catch (g) {throw Error(\"Malformed UTF-8 data\");}}, parse: function parse(b) {return a.parse(unescape(encodeURIComponent(b)));} },g = l.BufferedBlockAlgorithm = r.extend({ reset: function reset() {this._data = new q.init();this._nDataBytes = 0;}, _append: function _append(b) {\"string\" == typeof b && (b = u.parse(b));this._data.concat(b);this._nDataBytes += b.sigBytes;}, _process: function _process(b) {var a = this._data,g = a.words,j = a.sigBytes,k = this.blockSize,m = j / (4 * k),m = b ? s.ceil(m) : s.max((m | 0) - this._minBufferSize, 0);b = m * k;j = s.min(4 * b, j);if (b) {for (var l = 0; l < b; l += k) {this._doProcessBlock(g, l);}l = g.splice(0, b);a.sigBytes -= j;}return new q.init(l, j);}, clone: function clone() {var b = r.clone.call(this);b._data = this._data.clone();return b;}, _minBufferSize: 0 });l.Hasher = g.extend({ cfg: r.extend(), init: function init(b) {this.cfg = this.cfg.extend(b);this.reset();}, reset: function reset() {g.reset.call(this);this._doReset();}, update: function update(b) {this._append(b);this._process();return this;}, finalize: function finalize(b) {b && this._append(b);return this._doFinalize();}, blockSize: 16, _createHelper: function _createHelper(b) {return function (a, g) {return new b.init(g).finalize(a);};}, _createHmacHelper: function _createHmacHelper(b) {return function (a, g) {return new k.HMAC.init(b, g).finalize(a);};} });var k = m.algo = {};return m;}(Math);(function (s) {function p(a, k, b, h, l, j, m) {a = a + (k & b | ~k & h) + l + m;return (a << j | a >>> 32 - j) + k;}function m(a, k, b, h, l, j, m) {a = a + (k & h | b & ~h) + l + m;return (a << j | a >>> 32 - j) + k;}function l(a, k, b, h, l, j, m) {a = a + (k ^ b ^ h) + l + m;return (a << j | a >>> 32 - j) + k;}function n(a, k, b, h, l, j, m) {a = a + (b ^ (k | ~h)) + l + m;return (a << j | a >>> 32 - j) + k;}for (var r = CryptoJS, q = r.lib, v = q.WordArray, t = q.Hasher, q = r.algo, a = [], u = 0; 64 > u; u++) {a[u] = 4294967296 * s.abs(s.sin(u + 1)) | 0;}q = q.MD5 = t.extend({ _doReset: function _doReset() {this._hash = new v.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function _doProcessBlock(g, k) {for (var b = 0; 16 > b; b++) {var h = k + b,w = g[h];g[h] = (w << 8 | w >>> 24) & 16711935 | (w << 24 | w >>> 8) & 4278255360;}var b = this._hash.words,h = g[k + 0],w = g[k + 1],j = g[k + 2],q = g[k + 3],r = g[k + 4],s = g[k + 5],t = g[k + 6],u = g[k + 7],v = g[k + 8],x = g[k + 9],y = g[k + 10],z = g[k + 11],A = g[k + 12],B = g[k + 13],C = g[k + 14],D = g[k + 15],c = b[0],d = b[1],e = b[2],f = b[3],c = p(c, d, e, f, h, 7, a[0]),f = p(f, c, d, e, w, 12, a[1]),e = p(e, f, c, d, j, 17, a[2]),d = p(d, e, f, c, q, 22, a[3]),c = p(c, d, e, f, r, 7, a[4]),f = p(f, c, d, e, s, 12, a[5]),e = p(e, f, c, d, t, 17, a[6]),d = p(d, e, f, c, u, 22, a[7]),c = p(c, d, e, f, v, 7, a[8]),f = p(f, c, d, e, x, 12, a[9]),e = p(e, f, c, d, y, 17, a[10]),d = p(d, e, f, c, z, 22, a[11]),c = p(c, d, e, f, A, 7, a[12]),f = p(f, c, d, e, B, 12, a[13]),e = p(e, f, c, d, C, 17, a[14]),d = p(d, e, f, c, D, 22, a[15]),c = m(c, d, e, f, w, 5, a[16]),f = m(f, c, d, e, t, 9, a[17]),e = m(e, f, c, d, z, 14, a[18]),d = m(d, e, f, c, h, 20, a[19]),c = m(c, d, e, f, s, 5, a[20]),f = m(f, c, d, e, y, 9, a[21]),e = m(e, f, c, d, D, 14, a[22]),d = m(d, e, f, c, r, 20, a[23]),c = m(c, d, e, f, x, 5, a[24]),f = m(f, c, d, e, C, 9, a[25]),e = m(e, f, c, d, q, 14, a[26]),d = m(d, e, f, c, v, 20, a[27]),c = m(c, d, e, f, B, 5, a[28]),f = m(f, c, d, e, j, 9, a[29]),e = m(e, f, c, d, u, 14, a[30]),d = m(d, e, f, c, A, 20, a[31]),c = l(c, d, e, f, s, 4, a[32]),f = l(f, c, d, e, v, 11, a[33]),e = l(e, f, c, d, z, 16, a[34]),d = l(d, e, f, c, C, 23, a[35]),c = l(c, d, e, f, w, 4, a[36]),f = l(f, c, d, e, r, 11, a[37]),e = l(e, f, c, d, u, 16, a[38]),d = l(d, e, f, c, y, 23, a[39]),c = l(c, d, e, f, B, 4, a[40]),f = l(f, c, d, e, h, 11, a[41]),e = l(e, f, c, d, q, 16, a[42]),d = l(d, e, f, c, t, 23, a[43]),c = l(c, d, e, f, x, 4, a[44]),f = l(f, c, d, e, A, 11, a[45]),e = l(e, f, c, d, D, 16, a[46]),d = l(d, e, f, c, j, 23, a[47]),c = n(c, d, e, f, h, 6, a[48]),f = n(f, c, d, e, u, 10, a[49]),e = n(e, f, c, d, C, 15, a[50]),d = n(d, e, f, c, s, 21, a[51]),c = n(c, d, e, f, A, 6, a[52]),f = n(f, c, d, e, q, 10, a[53]),e = n(e, f, c, d, y, 15, a[54]),d = n(d, e, f, c, w, 21, a[55]),c = n(c, d, e, f, v, 6, a[56]),f = n(f, c, d, e, D, 10, a[57]),e = n(e, f, c, d, t, 15, a[58]),d = n(d, e, f, c, B, 21, a[59]),c = n(c, d, e, f, r, 6, a[60]),f = n(f, c, d, e, z, 10, a[61]),e = n(e, f, c, d, j, 15, a[62]),d = n(d, e, f, c, x, 21, a[63]);b[0] = b[0] + c | 0;b[1] = b[1] + d | 0;b[2] = b[2] + e | 0;b[3] = b[3] + f | 0;}, _doFinalize: function _doFinalize() {var a = this._data,k = a.words,b = 8 * this._nDataBytes,h = 8 * a.sigBytes;k[h >>> 5] |= 128 << 24 - h % 32;var l = s.floor(b / 4294967296);k[(h + 64 >>> 9 << 4) + 15] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;k[(h + 64 >>> 9 << 4) + 14] = (b << 8 | b >>> 24) & 16711935 | (b << 24 | b >>> 8) & 4278255360;a.sigBytes = 4 * (k.length + 1);this._process();a = this._hash;k = a.words;for (b = 0; 4 > b; b++) {h = k[b], k[b] = (h << 8 | h >>> 24) & 16711935 | (h << 24 | h >>> 8) & 4278255360;}return a;}, clone: function clone() {var a = t.clone.call(this);a._hash = this._hash.clone();return a;} });r.MD5 = t._createHelper(q);r.HmacMD5 = t._createHmacHelper(q);})(Math);\n  /* jshint ignore:end */\n  return CryptoJS.MD5(message).toString();\n};\n\n\n/***\r\n   * Transform base64 image to blob\r\n   * @b64Data \r\n   * @contentType \r\n   * @sliceSize \r\n   */\nbizagi.util.b64toBlob = function (b64Data, contentType, sliceSize) {\n  contentType = contentType || '';\n  sliceSize = sliceSize || 512;\n\n  var byteCharacters = atob(b64Data);\n  var byteArrays = [];\n\n  for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    var byteNumbers = new Array(slice.length);\n    for (var i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    var byteArray = new Uint8Array(byteNumbers);\n\n    byteArrays.push(byteArray);\n  }\n\n  var blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\nbizagi.util.arrayEach = function (array, callback) {\n  if (!!array) {\n    if (Object.prototype.toString.apply(array) === \"[object Array]\" && Object.prototype.toString.apply(callback) === \"[object Function]\") {\n      var index, value;\n      for (index in array) {\n        if (array.hasOwnProperty(index)) {\n          value = callback.call(array[index], index, array[index]);\n          if (value === false) {\n            return;\n          }\n        }\n      }\n    } else {\n      $.each(array, callback);\n    }\n  }\n};\n\nfunction printf(msg) {\n  var args = Array.prototype.slice.call(arguments, 1),arg;\n  return msg.replace(/(%[disv])/g, function (a, val) {\n    arg = args.shift();\n    if (arg !== undefined) {\n      switch (val.charCodeAt(1)) {\n        case 100:\n          return +arg; // d\n        case 105:\n          return Math.round(+arg); // i\n        case 115:\n          return String(arg); // s\n        case 118:\n          return arg; // v\n      }\n    }\n    return val;\n  });\n}\n\n/*\r\n  * Validates if the text is a valid opening and closing tags, including classes\r\n  */\nbizagi.util.isHTMLValidText = function (text) {\n  var ex = new RegExp(/<(.|\\n)*?>/g);\n  return ex.test(text);\n};\n\n\n/*\r\n   *   Determines if a control as a scrollbar \r\n   */\nbizagi.util.hasScroll = function (el, direction) {\n  if (el.length)\n  el = el[0];\n  direction = direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n  var result = !!el[direction];\n  if (!result) {\n    el[direction] = 1;\n    result = !!el[direction];\n    el[direction] = 0;\n  }\n  return result;\n};\n\n/**\r\n    * Convert String to Base64 Unicode\r\n    * @param {} str \r\n    * @returns {} \r\n    */\nbizagi.util.b64EncodeUnicode = function (string) {\n  return btoa(encodeURIComponent(string).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode(\"0x\" + p1);\n  }));\n};\n\n//remove all the character except the +, - and decimal point\nbizagi.util.getStandardNotation = function (number, decimalSymbol) {\n  var plusCharacter = '+';\n  var minusCharacter = '-';\n  var decimalSymbol = decimalSymbol || '.';\n  var expSymbol = 'e';\n  var tmp = '';\n  //remove all the character except the +, -, decimal point and the numbers\n  var decimalNumber = false;\n  var exponentialNumber = false;\n  number = (number.length > 0 ? number.toString().toLowerCase() : '').replace(/ /g, '');\n  for (var i = 0; i < number.length; i++) {\n    if ((number[i] === plusCharacter || number[i] === minusCharacter) && (i === 0 || number[i - 1] == expSymbol)) {\n      tmp += number[i];\n    } else if (!isNaN(Number(number[i]))) {\n      tmp += number[i];\n    } else\n    if (number[i] === decimalSymbol && !decimalNumber) {\n      tmp += number[i];\n      decimalNumber = true;\n    } else\n    if (number[i] === expSymbol && !exponentialNumber) {\n      tmp += number[i];\n      exponentialNumber = true;\n    }\n  }\n  return tmp;\n};\n\n//Return it in normalized scientific notation\nbizagi.util.scientificNotationFormat = function (number, decimalSymbol, sdLimit, expMinLimit, expMaxLimit) {\n  decimalSymbol = decimalSymbol || '.';\n  number = bizagi.util.getStandardNotation(number, decimalSymbol);\n  sdLimit = sdLimit > 0 ? sdLimit : 38;\n  expMinLimit = expMinLimit > 0 ? expMinLimit : -125;\n  expMaxLimit = expMaxLimit > 0 ? expMaxLimit : 125;\n  var expSimbol = 'e';\n  var sNregex = new RegExp('[0-9]+(' + decimalSymbol + '[0-9]+)?(e[+-]?[0-9]+)?');\n  var sNFormat = number.match(sNregex);\n\n  //get que prefix\n  var exp = 0;\n\n  var prefix = number[0] === '-' ? number[0] : '';\n  var originalPointIndex = 0;\n\n  number = number.replace(prefix, '');\n\n  //if the number is not in scientific notation\n  if (sNFormat && sNFormat[0] && sNFormat[2]) {\n    var tempParts = sNFormat[0] ? sNFormat[0].replace(sNFormat[2], '').split(decimalSymbol) : '';\n\n    var significantDigits = '';\n    var intPart = '';\n\n    //calculate significant digits\n    //remove zeros at the left\n    tempParts[0] = tempParts[0].replace(/^0+/g, '');\n\n    if (tempParts[0].length > 1) {\n      significantDigits = tempParts[0].slice(1);\n      originalPointIndex = significantDigits.length;\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(sNFormat[1] || '');\n    } else\n    if (tempParts[0].length === 1) {\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(tempParts[1] || '');\n    } else\n    {\n      originalPointIndex = tempParts[1].length;\n      tempParts[1] = tempParts[1].replace(/^0+/g, '');\n      originalPointIndex = tempParts[1].length - 1 - originalPointIndex;\n      intPart = tempParts[1][0];\n      significantDigits = tempParts[1].slice(1);\n    }\n    //remove . and zeros from significant digits\n    significantDigits = significantDigits.replace(decimalSymbol, '').replace(/0+$/g, '');\n\n    if (significantDigits.length >= sdLimit) {\n      significantDigits = significantDigits.slice(0, sdLimit - 1);\n    }\n    exp = Number(sNFormat[2].replace(expSimbol, '')) + originalPointIndex;\n    exp = exp > expMaxLimit ? expMaxLimit : exp < expMinLimit ? expMinLimit : exp;\n    return prefix + intPart + (significantDigits ? decimalSymbol + significantDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n  } else\n  if (number) {\n\n    originalPointIndex = number.indexOf(decimalSymbol);\n    var from = 0;\n    var to = number.length - 1;\n\n    //remove decimal point\n    number = number.replace(decimalSymbol, '');\n\n    //from\n    var i = from;\n    while (!significantFlag) {\n      if (number[i] !== '0' && number[i] !== decimalSymbol) {significantFlag = true;from = i;} else\n      {i++;}\n    }\n    //to\n    var significantFlag = false;\n    var j = to;\n    while (!significantFlag) {\n      if (number[j] !== '0' && number[j] !== decimalSymbol && '-') {significantFlag = true;to = j + 1;} else\n      {j--;}\n    }\n    to = to > sdLimit + from ? sdLimit + from : to;\n    if (originalPointIndex !== -1) {\n      //find significant digits\n      var significantFlag = false;\n      var significantDigits = number.slice(from, to);\n      var pointIndex = from + 1;\n      exp = originalPointIndex - pointIndex;\n      if (significantDigits.length > 0 && !isNaN(Number(significantDigits[0]))) {\n        return prefix + significantDigits[0] + (significantDigits.length > 1 ? decimalSymbol + significantDigits.slice(1) : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else\n      {return '0';}\n\n    } else\n    {\n      //Int numbers\n      var firstDigit = number.slice(from, from + 1);\n      var restDigits = number.slice(from + 1, number.length);\n      exp = restDigits.length;\n      restDigits = restDigits.replace(/0+$/g, '');\n      if (restDigits.length > sdLimit) {\n        restDigits = number.slice(from + 1, sdLimit + from);\n      }\n      if (Number(firstDigit)) {\n        return prefix + firstDigit + (restDigits.length > 0 ? decimalSymbol + restDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n    }\n  } else\n  {return '';}\n};\n\nbizagi.util.isString = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object String]\";\n};\n\nbizagi.util.isArray = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Array]\";\n};","//  This file is part of the jQuery formatCurrency Plugin.\n//\n//    The jQuery formatCurrency Plugin is free software: you can redistribute it\n//    and/or modify it under the terms of the GNU General Public License as published \n//    by the Free Software Foundation, either version 3 of the License, or\n//    (at your option) any later version.\n\n//    The jQuery formatCurrency Plugin is distributed in the hope that it will\n//    be useful, but WITHOUT ANY WARRANTY; without even the implied warranty \n//    of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//    GNU General Public License for more details.\n//\n//    You should have received a copy of the GNU General Public License along with \n//    the jQuery formatCurrency Plugin.  If not, see <http://www.gnu.org/licenses/>.\n\n(function ($) {\n\n  $.formatCurrency = {};\n\n  $.formatCurrency.regions = [];\n\n  // default Region is en\n  $.formatCurrency.regions[''] = {\n    symbol: '$',\n    positiveFormat: '%s%n',\n    negativeFormat: '(%s%n)',\n    decimalSymbol: '.',\n    digitGroupSymbol: ',',\n    groupDigits: true };\n\n\n  $.fn.formatCurrency = function (destination, settings) {\n\n    if (arguments.length == 1 && typeof destination !== \"string\") {\n      settings = destination;\n      destination = false;\n    }\n\n    // initialize defaults\n    var defaults = {\n      name: \"formatCurrency\",\n      colorize: false,\n      region: '',\n      global: true,\n      roundToDecimalPlace: 2, // roundToDecimalPlace: -1; for no rounding; 0 to round to the dollar; 1 for one digit cents; 2 for two digit cents; 3 for three digit cents; ...\n      eventOnDecimalsEntered: false };\n\n    // initialize default region\n    defaults = $.extend(defaults, $.formatCurrency.regions['']);\n    // override defaults with settings passed in\n    settings = $.extend(defaults, settings);\n\n    // check for region setting\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n\n    return this.each(function () {\n      var $this = $(this);\n\n      // get number\n      var num = '0';\n      var multiCeroPattern = new RegExp(\"^(0+|-0+)\", \"g\");\n      num = $this[$this.is('input, select, textarea') ? 'val' : 'html']();\n\n      //identify '(123)' as a negative number\n      if (num.search('\\\\(') >= 0) {\n        num = '-' + num;\n      }\n\n      // Identify 0000 and -0000 pattern, and replace to 0\n      if (!num.match(/[1-9]/g)) num = num.replace(multiCeroPattern, 0);\n\n      if (num === '' || num === '-' && settings.roundToDecimalPlace === -1) {\n        return;\n      }\n\n      // if the number is valid use it, otherwise clean it\n      if (isNaN(num)) {\n        // clean number\n        num = num.replace(settings.regex, '');\n\n        if (num === '' || num === '-' && settings.roundToDecimalPlace === -1) {\n          return;\n        }\n\n        if (settings.decimalSymbol != '.') {\n          num = num.replace(settings.decimalSymbol, '.'); // reset to US decimal for arithmetic\n        }\n        if (isNaN(num)) {\n          num = '0';\n        }\n      }\n\n      // evalutate number input\n      var numParts = String(num).split('.');\n      var isPositive = num == Math.abs(num);\n      var hasDecimals = numParts.length > 1;\n      var decimals = hasDecimals ? numParts[1].toString() : '0';\n      var originalDecimals = decimals;\n\n      // format number\n      num = Math.abs(numParts[0]);\n      num = isNaN(num) ? 0 : num;\n      if (settings.roundToDecimalPlace >= 0) {\n        decimals = parseFloat('1.' + decimals); // prepend \"0.\"; (IE does NOT round 0.50.toFixed(0) up, but (1+0.50).toFixed(0)-1\n        decimals = decimals.toFixed(settings.roundToDecimalPlace); // round\n        if (decimals.substring(0, 1) == '2') {\n          num = Number(num) + 1;\n        }\n        decimals = decimals.substring(2); // remove \"0.\"\n      }\n      num = String(num);\n\n      if (settings.groupDigits) {\n        for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++) {\n          num = num.substring(0, num.length - (4 * i + 3)) + settings.digitGroupSymbol + num.substring(num.length - (4 * i + 3));\n        }\n      }\n\n      if (hasDecimals && settings.roundToDecimalPlace == -1 || settings.roundToDecimalPlace > 0) {\n        num += settings.decimalSymbol + decimals;\n      }\n\n      // format symbol/negative\n      var format = isPositive ? settings.positiveFormat : settings.negativeFormat;\n      var money = format.replace(/%s/g, settings.symbol);\n      money = money.replace(/%n/g, num);\n\n      // setup destination\n      var $destination = $([]);\n      if (!destination) {\n        $destination = $this;\n      } else {\n        $destination = $(destination);\n      }\n      // set destination\n      $destination[$destination.is('input, select, textarea') ? 'val' : 'html'](money);\n\n      if (\n      hasDecimals &&\n      settings.eventOnDecimalsEntered &&\n      originalDecimals.length > settings.roundToDecimalPlace)\n      {\n        $destination.trigger('decimalsEntered', originalDecimals);\n      }\n\n      // colorize\n      if (settings.colorize) {\n        $destination.css('color', isPositive ? 'black' : 'red');\n      }\n    });\n  };\n\n  // Remove all non numbers from text\n  $.fn.toNumber = function (settings) {\n    var defaults = $.extend({\n      name: \"toNumber\",\n      region: '',\n      global: true },\n    $.formatCurrency.regions['']);\n\n    settings = jQuery.extend(defaults, settings);\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n\n    return this.each(function () {\n      var method = $(this).is('input, select, textarea') ? 'val' : 'html';\n      $(this)[method]($(this)[method]().replace('(', '(-').replace(settings.regex, ''));\n    });\n  };\n\n  // returns the value from the first element as a number\n  $.fn.asNumber = function (settings) {\n    var defaults = $.extend({\n      name: \"asNumber\",\n      region: '',\n      parse: true,\n      parseType: 'Float',\n      global: true },\n    $.formatCurrency.regions['']);\n    settings = jQuery.extend(defaults, settings);\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n    settings.parseType = validateParseType(settings.parseType);\n\n    var method = $(this).is('input, select, textarea') ? 'val' : 'html';\n    var num = $(this)[method]();\n    num = num ? num : \"\";\n    num = num.replace('(', '(-');\n    num = num.replace(settings.regex, '');\n    if (!settings.parse) {\n      return num;\n    }\n\n    if (num.length == 0) {\n      num = '0';\n    }\n\n    if (settings.decimalSymbol != '.') {\n      num = num.replace(settings.decimalSymbol, '.'); // reset to US decimal for arthmetic\n    }\n\n    return window['parse' + settings.parseType](num);\n  };\n\n  function getRegionOrCulture(region) {\n    var regionInfo = $.formatCurrency.regions[region];\n    if (regionInfo) {\n      return regionInfo;\n    } else\n    {\n      if (/(\\w+)-(\\w+)/g.test(region)) {\n        var culture = region.replace(/(\\w+)-(\\w+)/g, \"$1\");\n        return $.formatCurrency.regions[culture];\n      }\n    }\n    // fallback to extend(null) (i.e. nothing)\n    return null;\n  }\n\n  function validateParseType(parseType) {\n    switch (parseType.toLowerCase()) {\n      case 'int':\n        return 'Int';\n      case 'float':\n        return 'Float';\n      default:\n        throw 'invalid parseType';}\n\n  }\n\n  function generateRegex(settings) {\n    if (settings.symbol === '') {\n      return new RegExp(\"[^\\\\d\" + settings.decimalSymbol + \"-]\", \"g\");\n    } else\n    {\n      var symbol = settings.symbol.replace('$', '\\\\$').replace('.', '\\\\.');\n      return new RegExp(symbol + \"|[^\\\\d\" + settings.decimalSymbol + \"-]\", \"g\");\n    }\n  }\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.render.services.service\",\n{\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\",\n  BA_MULTIACTION_WITH_LIMIT_NUMBER: 5,\n  BA_MULTIACTION_WITH_LIMIT_QUEUE: \"multiaction\" },\n\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(params) {\n    params = params || {};\n    params.context = params.context || \"workflow\";\n    params.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.serviceLocator = new bizagi.render.services.context(params);\n    this.multiactionService = new bizagi.render.services.multiactionservice(this);\n    this.multiactionServiceWithLimit = new bizagi.render.services.multiactionservice(this, this.Class.BA_MULTIACTION_WITH_LIMIT_NUMBER, this.Class.BA_MULTIACTION_WITH_LIMIT_QUEUE);\n    this.guid = Math.guid();\n\n    if (bizagi.override.enableECMMetadataMultiaction) {\n      this.multiactionMetadataService = new bizagi.render.services.metadatamultiactionservice(this);\n    }\n\n    // Userfield definitions mini-cache\n    this.userfieldRequests = {};\n\n    this.deviceType = params.deviceType || (bizagi.util.isSmartphoneDevice() ? bizagi.deviceEnum.smartphone : bizagi.util.isTabletDevice() ? bizagi.deviceEnum.tablet : bizagi.deviceEnum.desktop);\n    this.deviceCode = bizagi.util.getDeviceCode();\n  },\n\n  /*\r\n      *   Return the multiaction-service\r\n      */\n  multiaction: function multiaction() {\n    return this.multiactionService;\n  },\n\n  /*\r\n     *   Return the multiaction-service\r\n     */\n  multiactionWithLimit: function multiactionWithLimit() {\n    return this.multiactionServiceWithLimit;\n  },\n\n  metadataECMMultiaction: function metadataECMMultiaction() {\n    return bizagi.override.enableECMMetadataMultiaction ? this.multiactionMetadataService : this;\n  },\n  /*\r\n      *   SINGLE SERVICES METHODS\r\n      */\n\n  /*\r\n          *   Gets form data\r\n          *   Returns a promise of the data being retrieved\r\n          */\n  getFormData: function getFormData(params) {\n    var self = this;\n\n    // Check if the params contains mocked data\n    if (params && params.data) {\n      return params.data;\n    }\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action || \"LOADFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idProcess)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idProcess\"] = params.idProcess;\n    if (params.idForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    if (params.idEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idEntity\"] = params.idEntity;\n    if (params.surrogateKey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.requestedForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"requestedForm\"] = params.requestedForm;\n    if (params.recordXPath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordXPath\"] = params.recordXPath;\n    if (params.summaryForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"summaryForm\"] = params.summaryForm;\n    if (params.idCase)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    if (params.idWorkitem)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    if (params.idTask)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idTask\"] = params.idTask;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contextType)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contextType;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (!bizagi.util.isEmpty(params.isRefresh))\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isRefresh\"] = params.isRefresh;\n    if (params.isActionStartForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\n    if (params.additionalXpaths)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    if (params.idStartScope)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    if (typeof params.readOnlyForm !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"readonlyform\"] = params.readOnlyForm;\n    if (typeof params.printversion !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"printForm\"] = params.printversion;\n    if (typeof params.recordXpath !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    if (params.guid)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guid\"] = params.guid;\n    if (params.downloadOfflineForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"downloadofflineform\"] = 1;\n\n    if (params.editable === false) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"DisplayFormAsReadOnly\"] = true;\n    }\n\n    // Support parameter from ui\n    // Parameters that affects all the same attributes of render\n    if (params.printversion) {\n      //Print limit grid rows\n      var BA_ALL_PARAMETER_PREFIX = \"all_\";\n\n      if (params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"]) {\n        data[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"] = params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"];\n      }\n    }\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n\n    // Call ajax and returns promise\n    bizagi.chrono.initAndStart(\"data\");\n    var ajaxParams = {\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: params.action || \"LOAD\" };\n\n    if (params.downloadOfflineForm) {\n      ajaxParams.avoidLoader = true;\n    }\n    return $.ajax(ajaxParams).\n    pipe(function (response) {\n      bizagi.chrono.stopAndLog(\"data\");\n\n      // Transform data for read only version\n      if (params.printversion) {\n        try {\n          response.form.properties.editable = \"False\";\n\n          var transformGridDataToReadOnly = function transformGridDataToReadOnly(_data) {\n            if (_data == null) {\n              return _data;\n            }\n            if (_data.hasOwnProperty('type') && _data.type == 'grid') {\n              _data.id = data.id + \"-print\";\n              _data.allowAdd = \"False\";\n              _data.allowDelete = \"False\";\n              _data.allowEdit = \"False\";\n              _data.allowGrouping = \"False\";\n              _data.allowMore = \"False\";\n              _data.allowSearch = \"False\";\n            } else {\n              $.each(data, function (key, value) {\n                if (_typeof(value) == 'object') {\n                  _data[key] = transformGridDataToReadOnly(_data[key]);\n                }\n              });\n            }\n            return _data;\n          };\n          response = transformGridDataToReadOnly(response);\n        } catch (e) {\n        }\n      }\n\n      return response;\n    });\n  },\n  /*\r\n      *   Gets a search form data\r\n      *   Returns a promise of the data being retrieved\r\n      */\n  getSearchFormData: function getSearchFormData(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHFORM\";\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idSearchForm)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHFORM\" });\n\n  },\n\n  processDataValues: function processDataValues(data) {\n    var o;\n    data = $.extend(true, {}, data);\n    for (o in data) {\n      if (data.hasOwnProperty(o) && $.type(data[o]) == \"object\") {\n        // for search\n        if (data[o].hasOwnProperty(\"id\")) {\n          data[o] = data[o].id;\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Sends a form action to the server\r\n      */\n  submitData: function submitData(params) {\n    var self = this;\n\n    // Define data\n    data = self.resolveData(params.data || {}, params.xpathContext);\n    data = self.processDataValues(data);\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action;\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.transitions)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"transitions\"] = params.transitions;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.forcePlanCompletion)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"forcePlanCompletion\"] = params.forcePlanCompletion;\n\n    /* if (params.isActionStartForm)\r\n                                                                                                        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\r\n                                                                                                        */\n    var actionType = params.action.toString().toUpperCase();\n\n    // Log submit data\n    bizagi.debug(\"Data sent\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: actionType,\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n      } });\n\n  },\n  /*\r\n      * Get data processing xpathcontext\r\n      */\n  resolveData: function resolveData(data, xpathContext) {\n    var name, newName, value;\n    if (!$.isEmptyObject(data) && xpathContext) {\n      if (xpathContext.search(/\\[id=\\d+\\]/) !== -1) {\n        for (name in data) {\n          if (name.search(/\\[id=\\d+\\]/) !== -1 && xpathContext == name.substr(0, name.search(/\\]/) + 1)) {\n            newName = name.substr(name.search(/\\]/) + 2);\n            value = data[name];\n            data[newName] = value;\n            delete data[name];\n          }\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Fetch a property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   property\r\n      */\n  getPropertyData: function getPropertyData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n\n    if (params.sessionId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.guidentity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.pxpath)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpath\"] = params.pxpath;\n    if (params.prows)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.prows;\n    if (params.ppage)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.ppage;\n    if (params.pfilter != undefined && params.pfilter != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = params.pfilter;\n    /*else\r\n                                                                              data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = \"\";*/\n    if (params.psort != undefined && params.psort != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.psort;\n    if (params.porder)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.porder;\n    if (params.pcaseId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"caseId\"] = params.pcaseId;\n    if (params.pguidEntity)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidEntity\"] = params.pguidEntity;\n    if (params.psurrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.psurrogatedKey;\n    }\n    if (params.pactionXpath) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"actionXpath\"] = params.pactionXpath;\n    }\n    if (params.ptemplateGuid) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"templateGuid\"] = params.ptemplateGuid;\n    }\n    if (params.pparameters) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parameters\"] = params.pparameters;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      */\n  getData: function getData(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch search data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   term\r\n      */\n  getSearchData: function getSearchData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"term\"] = params.term;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  /*\r\n      * Refresh tha data property from the server\r\n      * Params:\r\n      *   -   collapsestate\r\n      */\n  getCollapseData: function getCollapseData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"collapseState\"] = params.collapseState;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"collapseState\" }));\n\n  },\n\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch grid data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   sort\r\n      *   -   page\r\n      *   -   rows\r\n      */\n  getGridData: function getGridData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.order;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  getGridDataExclusivesSelected: function getGridDataExclusivesSelected(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathfilter\"] = params.xpathfilter;\n    return this.getPropertyData($.extend(params, {\n      property: \"exclusivesSelected\" }));\n\n  },\n\n  /*\r\n      *   Returns the upload plugin cancel image\r\n      */\n  getUploadCancelImage: function getUploadCancelImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-upload-cancel-image\");\n  },\n  /*\r\n      *   Returns the upload file url for each file\r\n      */\n  getUploadFileUrl: function getUploadFileUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  downloadFile: function downloadFile(params) {\n    var self = this;\n    var fileUrl = self.getUploadFileUrl(params);\n\n    return $.ajax({\n      url: fileUrl,\n      type: \"GET\",\n      queue: params.queue,\n      dataType: \"binary\",\n      processData: false //Always false for binary dataType\n    }).\n    then(function (binary_file) {\n      if (binary_file.type == \"application/json\") {\n        return self.readFileAsJSON(binary_file);\n      }\n\n      if (typeof binary_file == \"string\") {\n        var xhr = arguments[2];\n        var contentType = xhr.getResponseHeader('Content-type');\n        binary_file = bizagi.util.media.byteArrayToBlob(self.stringToByteArray(binary_file), contentType);\n      }\n      return binary_file;\n    });\n  },\n\n  readFileAsJSON: function readFileAsJSON(binary_file) {\n    var def = new $.Deferred();\n    var reader = new FileReader();\n    reader.onloadend = function () {\n      def.reject({ responseText: reader.result });\n    };\n    reader.readAsText(binary_file);\n    return def.promise();\n  },\n\n  stringToByteArray: function stringToByteArray(binary) {\n    return bizagi.util.stringToByteArray(binary);\n  },\n\n\n  getUploadFileEntityUrl: function getUploadFileEntityUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    if (params.isContextContainerWidgetRender) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\n    } else {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    }\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddUrl: function getUploadAddUrl() {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-add-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDFILE\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddFileUrl: function getUploadAddFileUrl(isUserPreferences) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"form-submit-data-upload\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = isUserPreferences === true ? \"SAVEUSERIMAGE\" : \"savefile\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n\n  deleteImage: function deleteImage(params) {\n    var self = this;\n\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"DELETEUSERIMAGE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing image '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  deleteUploadFile: function deleteUploadFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing file in upload '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n\n  },\n  /*\r\n      * Return file meta data\r\n      */\n  getECMMetadata: function getECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    // Log submit data\n    bizagi.debug(\"Get file metadata '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  checkOutFile: function checkOutFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"checkOutFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * cancelCheckOut\r\n      **/\n  cancelCheckOut: function cancelCheckOut(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"cancelCheckOut\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  deleteECMFile: function deleteECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"delete\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"delete file'\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update ECM file content\r\n      **/\n  updateECMFileContent: function updateECMFileContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMFileContent\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file content '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update file content\r\n      **/\n  updateECMMetadata: function updateECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file meta data '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getFileProperties: function getFileProperties(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getFileProperties\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Get file properties '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n  },\n  /**\r\n      * Get file item\r\n      * @param params\r\n      * @returns {{}|*}\r\n      */\n  getFile: function getFile(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /**\r\n      * Document Templates generate rest service\r\n      * @param params\r\n      * @returns {string}\r\n      */\n  getAllDocuments: function getAllDocuments(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\n    var data = {};\n\n    data[\"contextXpath\"] = params.xpathContext;\n    data[\"xpathAttribute\"] = params.xpath;\n    data[\"idCase\"] = params.idCase;\n    data[\"idWorkItem\"] = params.idWorkItem;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  getUploadFileEntity: function getUploadFileEntity(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n\n    if (params.isContextContainerWidgetRender) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\n    } else {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    }\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  uploadECMFile: function uploadECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"uploadECMFile\";\n    data.fileUpload = params.fileUpload; // Content of file\n    data.xPath = params.xPath;\n\n    data.idAttrib = params.idAttrib;\n    data.fileName = params.fileName;\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Upload ECM file '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getECMFileUrl: function getECMFileUrl(params) {\n    var self = this;\n    var url = params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"File\";\n\n    // Define data\n    var data = params.extra || {};\n\n    data.action = \"viewECMFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.fileName = params.fileName;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    if (params.p_sessionId) {\n      data.p_sessionId = params.p_sessionId;\n    }\n\n\n    // Log submit data\n    bizagi.debug(\"View uploaded file '\" + params.xPath + \"'\", data);\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n  /*\r\n      *\r\n      */\n  isFileOnECM: function isFileOnECM(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    data[\"action\"] = \"isFileOnECM\";\n    data[\"idUpload\"] = params.idUpload;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl(\"render-ecm-upload-url\"), data);\n  },\n  /*\r\n      *   Start a grid record edition\r\n      */\n  editGridRecord: function editGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EDITRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending edit request for relation '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-edit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"EDITRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecord: function addGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row, and sending the data at the same time\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecordData: function addGridRecordData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATIONWITHDATA\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Build data to submit\n    var submitData = self.processDataValues(params.submitData || {});\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATIONWITHDATA\" });\n\n  },\n  /*\r\n      *   Submits the grid record data to the server\r\n      */\n  saveGridRecord: function saveGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disableServerGridValidations\"] = params.disableServerGridValidations || false;\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVERELATION\" });\n\n  },\n  /*\r\n      *   Deletes a grid record in the server\r\n      */\n  deleteGridRecord: function deleteGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending delete request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"REMOVERELATION\" });\n\n  },\n\n  /*\r\n      * Get association flipped status\r\n      */\n  getFlipAssociation: function getFlipAssociation(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"flipped\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"flipstate\"] = params.flipstate;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log request data\n    bizagi.debug(\"Sending request for flip association control '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"text\" }).\n    pipe(function (response) {\n      try {\n        // Try to attempt to parse JSON\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        // If JSON is not valid we need to return the original text response\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Cancels an add or edit request for a grid\r\n      */\n  rollbackGridAction: function rollbackGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ROLLBACK\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-rollback-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ROLLBACK\" });\n\n  },\n  /*\r\n      *   Returns the search render default image\r\n      */\n  getSearchDefaultImage: function getSearchDefaultImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-search-default-image\");\n  },\n\n  processDataCriteria: function processDataCriteria(criteria) {\n    var o;\n    criteria = $.extend(true, [], criteria);\n    for (o in criteria) {\n      if (criteria.hasOwnProperty(o) && criteria[o].hasOwnProperty(\"value\") && $.type(criteria[o].value) == \"object\") {\n        // for search\n        if (criteria[o].value.hasOwnProperty(\"id\") && criteria[o].value.hasOwnProperty(\"label\")) {\n          criteria[o].value = criteria[o].value.id;\n        }\n      }\n    }\n    return criteria;\n  },\n\n  /*\r\n      *   Perform entity search in the server\r\n      */\n  submitSearch: function submitSearch(params) {\n    var self = this,criteria;\n\n    // Define data\n    var data = params.extra || {};\n\n    var sort = params.sort && params.sort !== \"\" ? params.sort : \"\";\n\n    if (params.order && params.order !== \"\" && sort !== \"\")\n    sort += \" \" + params.order;\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHENTITYFORRENDER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"pageSize\"] = params.rows;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n\n    criteria = self.processDataCriteria(params.criteria);\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchCriteria\"] = JSON.encode(criteria);\n\n    // Optional search params\n    if (params.allowFullSearch)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"allowFullSearch\"] = params.allowFullSearch;\n    if (params.maxRecords)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxRowsAllowed\"] = params.maxRecords;\n\n    // Log submit data\n    bizagi.debug(\"Performing advanced search\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-advanced-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHENTITYFORRENDER\" });\n\n  },\n\n  /*\r\n      *   Submits the stakeholder associated\r\n      */\n  associateStakeholder: function associateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    data[\"associatedUser\"] = params.associatedUser;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\" });\n\n  },\n\n  /*\r\n      *   Refresh the stakeholder associated list\r\n      */\n  refreshAssociateStakeholder: function refreshAssociateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /*\r\n      *   Gets the link to the letter\r\n      */\n  getLetterNotEditableUrl: function getLetterNotEditableUrl(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Call ajax and returns promise\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-notEditable-url\");\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Gets the content for editable letters\r\n      */\n  getLetterContent: function getLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"html\" }).\n    pipe(function (response) {\n      try {\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Get the can generate letter flag\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CANGENERATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *   Saves the content for editable letters\r\n      */\n  saveLetterContent: function saveLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"UPDATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Define content\n    var content = params.content || \"\";\n\n    // Define url\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-save-url\");\n    var fullUrl = url + \"?\" + jQuery.param(data);\n\n    // Log submit data\n    bizagi.debug(\"Save request for letter sent to: \" + fullUrl, content);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: fullUrl,\n      data: content,\n      type: \"POST\",\n      dataType: \"html\" });\n\n  },\n  /*\r\n      *   Returns the icons path for the letter plugin\r\n      */\n  getLetterEditorIconsPath: function getLetterEditorIconsPath() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-letter-content-icons\");\n  },\n  /*\r\n      *   Executes a button action in the server\r\n      */\n  executeButton: function executeButton(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"buttonRule\" }));\n\n  },\n  /**\r\n      * Executes a fileprint action in the server\r\n      * @param params\r\n      * @returns {{}|*}\r\n      */\n  getFilePrint: function getFilePrint(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"data\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /*\r\n      *   Start a link form edition\r\n      */\n  editLinkForm: function editLinkForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n  /*\r\n      *   Saves the content of the link form\r\n      */\n  saveLinkForm: function saveLinkForm(params) {\n    // Actually it does the same than edit grid records\n    //return this.saveGridRecord(params);\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVEFORMLINKRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVEFORMLINKRELATION\" });\n\n  },\n  /*\r\n      *   Rollbacks the link form edition\r\n      */\n  rollbackLinkForm: function rollbackLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.rollbackGridAction(params);\n  },\n  /*   Commit the link form edition\r\n      */\n  commitLinkForm: function commitLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.commitGridAction(params);\n  },\n  /*   Sends schekpoint action\r\n      */\n  sendCheckpoint: function sendCheckpoint(params) {\n    // Actually it does the same than rollback grid records\n    return this.sendCheckpointAction(params);\n  },\n  /*\r\n      *   Loads the userfield definition\r\n      */\n  getUserfieldDefinition: function getUserfieldDefinition(params) {\n    var self = this;\n    params = params || {};\n\n    // Check in deferreds cache\n    if (self.userfieldRequests[params.userfield])\n    return self.userfieldRequests[params.userfield];\n\n    // Required params: idCase\n    self.userfieldRequests[params.userfield] = $.read(self.serviceLocator.getUrl(\"render-userfield-definition\"),\n    {\n      guidUserfield: params.userfield,\n      device: params.device || \"desktop\" });\n\n\n\n    // Return deferred\n    return self.userfieldRequests[params.userfield];\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshControl: function refreshControl(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESH\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"PARTIALREFRESH\" });\n\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshGridCell: function refreshGridCell(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESHGRIDCELL\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidcolumn\"] = params.column;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n    params.typeRender ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"typeRender\"] = params.typeRender : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Request to execute rule on server\r\n      * @param {object} params h_pageCacheId, guidrule\r\n      */\n  executeRule: function executeRule(params) {\n    var self = this;\n\n\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTERULE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidrule\"] = params.rule || \"\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute interface on server\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeInterface: function executeInterface(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEINTERFACE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidinterface\"] = params[\"interface\"] || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute SAP Connecor\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeSAPConnector: function executeSAPConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTESAP\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidsap\"] = params.guidsap || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute a Bizagi connector\r\n      * @param params\r\n      * @return {{}}\r\n      */\n  executeConnector: function executeConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTECONNECTOR\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidConnector\"] = params.guidConnector || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /**\r\n      * Request to execute pipeline on server\r\n      * @param {object} params h_pageCacheId, guidpipeline\r\n      */\n  executePipeline: function executePipeline(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEPIPELINE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidpipeline\"] = params.pipeline || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  generateDocumentTemplate: function generateDocumentTemplate(params) {\n    var self = this;\n    params = params || {};\n    params.append = params.append ? params.append : false;\n\n    return $.create(\n    self.serviceLocator.getUrl(\"render-document-generate\"),\n    {\n      h_pageCacheId: params.idPageCache,\n      contextXpath: params.xpathcontext,\n      groupMappingId: params.groupMapping,\n      xpathAttribute: params.xpath,\n      append: params.append,\n      controlId: params.id });\n\n\n  },\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  getAllDocumentsDownloadUrl: function getAllDocumentsDownloadUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\n    var data = {};\n    data[\"h_pageCacheId\"] = params.idPageCache;\n    data[\"contextXpath\"] = params.xpathContext;\n    data[\"xpathAttribute\"] = params.xpath;\n    data[\"idCase\"] = params.idCase;\n    data[\"idWorkItem\"] = params.idWorkItem;\n    data[\"p_sessionId\"] = params.sessionId;\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n\n  },\n\n\n  getCaseNumber: function getCaseNumber(params) {\n    var self = this;\n    //this function use sendEMail\n    //and not possible use dat ain ajax\n    //this is workaround (rhonyp)\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"case-handler-getCaseSummary\").replace(\"{idCase}\", params.idCase) + \"?eventAsTasks=false&onlyUserWorkItems=true&mobileDevice=\" + bizagi.isMobile(),\n      type: \"GET\",\n      dataType: \"json\" });\n\n  },\n\n  getCaseAssignees: function getCaseAssignees(params) {\n    var self = this;\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl(\"case-handler-getCaseAssignees\"), {\n      idCase: params.idCase }).\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  getWorkitems: function getWorkitems(params) {\n    var self = this;\n    params = params || {};\n\n    return $.read(self.serviceLocator.getUrl(\"case-handler-getWorkItems\"), {\n      idCase: params.idCase,\n      onlyUserWorkItems: params.onlyUserWorkItems || \"\" });\n\n  },\n\n  /**\r\n      * Executes a grid export action in the server\r\n      * @param params\r\n      * @returns {string}\r\n      */\n  getGridExportFile: function getGridExportFile(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.exportType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: $.param(data),\n      type: \"GET\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n\n  /*\r\n      * Executes a send email action in the server\r\n      */\n  sendEmail: function sendEmail(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"sendEmail\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n\n    // Email parameters\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"to\"] = params.to;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"subject\"] = params.subject;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"message\"] = params.message;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"selected\"] = JSON.encode(params.selected);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    var url = params.url || self.serviceLocator.getUrl(\"form-get-data\");\n\n    return $.create(url, data);\n  },\n\n  /*\r\n      * Request to invalidates page cache in server, since it is no needed anymore\r\n      */\n  invalidatePageCache: function invalidatePageCache(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"INVALIDATEPAGECACHE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"INVALIDATEPAGECACHE\" });\n\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersList: function getUsersList(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersList\"), params);\n  },\n  /*\r\n     * Search users usign parameters suchs as userName, fullName, domain and organization\r\n     * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n     * @return {deferred} ajax object with JSON content\r\n     */\n  getUsersListFromQueryForm: function getUsersListFromQueryForm(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"render-query-getUsersList\"), params);\n  },\n  /*\r\n      * Search users for preferences usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListFromPreferences: function getUsersListFromPreferences(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-FromPreferences\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the boss field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdBossUser: function getUsersListForXpathIdBossUser(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdBossUser\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the delegate field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdDelegate: function getUsersListForXpathIdDelegate(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdDelegate\"), params);\n  },\n\n  /*\r\n      * Search users for Stakeholders\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListForStakeholders: function getUsersListForStakeholders(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForStakeholders\"), params);\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersForAssignation: function getUsersForAssignation(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersForAssignation\"), params);\n  },\n\n  /**\r\n      * Get Users Creation/Edition Form\r\n      */\n  getUsersForm: function getUsersForm(params) {\n    var self = this;\n    return $.create(self.serviceLocator.getUrl(\"admin-usersform\"), params);\n  },\n  /**\r\n      *   Return generate Data To Send By Email\r\n      */\n  generateDataToSendByEmail: function generateDataToSendByEmail(params) {\n    var self = this;\n    params = params || {};\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-GenerateDataToSendByEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Return generate Send user password Mail\r\n      */\n  sendUserEmail: function sendUserEmail(params) {\n    var self = this;\n    params = params || {};\n    var data = {\n      action: \"SendUserEmail\",\n      emailTo: params.eMailTo,\n      subject: params.subject,\n      body: params.body };\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-sendUserEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /**\r\n      * Get bizagi configuration\r\n      * @param {Function}   type callback function when the file load is succed\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getConfiguration: function getConfiguration() {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"admin-users-config\");\n\n    return $.read(url);\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyPathToBase: function verifyPathToBase(pathToBase, url) {\n\n    if (url.indexOf(\"http\") != -1 && pathToBase != \"\") {\n      return url;\n    } else {\n      return pathToBase + url;\n    }\n\n  },\n\n  /**\r\n      * Get template of entity\r\n      * @param params { guid, prepare}\r\n      */\n  getTemplate: function getTemplate(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADTEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = \"entity\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guid;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isProcessData\"] = params.forcePersonalizedColumns;\n\n    if (params.templateType) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templatetype\"] = params.templateType;\n    }\n\n    if (params.templateGuid) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templateguid\"] = params.templateGuid;\n    }\n\n    if (params.isDefaultTemplate != undefined) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isDefaultTemplate\"] = params.isDefaultTemplate;\n    }\n\n    // Fix device type since on mobility there are tablet_ios, tablet_android, smartphone_ios, smartphone_ios\n    // and the service recives either tablet or smartphone\n    var deviceType = bizagi.util.detectDevice();\n    if (bizagi.util.isTabletDevice()) {\n      deviceType = \"tablet\";\n    } else if (bizagi.util.isSmartphoneDevice()) {\n      deviceType = \"mobile\";\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = deviceType;\n\n    // When prepare is true just return data, this feature is used by multiaction service\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-get-data\"), data);\n  },\n\n  /**\r\n      * Chek if an entity has startform\r\n      * @param params\r\n      * @return {*}\r\n      */\n  hasStartForm: function hasStartForm(params) {\n    var self = this;\n    var data = {};\n\n    if (params.guidWFClass) {\n      data.guidWFClass = params.guidWFClass;\n    }\n\n    return $.read(self.serviceLocator.getUrl(\"render-processes-startform\"), data);\n  },\n\n  /**\r\n      * Get the start form of the case\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getStartForm: function getStartForm(params) {\n    var self = this;\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADSTARTFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidprocess\"] = params.guidprocess;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idCase) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    }\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idWorkitem) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    }\n    if (params.additionalXpaths) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n    if (params.surrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.surrogatedKey;\n    }\n    if (params.recordXpath) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    }\n    if (params.mappingstakeholders) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"mappingstakeholders\"] = params.mappingstakeholders;\n    }\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      cache: true });\n\n  },\n  /*\r\n      *   Start a link form edition\r\n      */\n  editActionForm: function editActionForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getActions: function getActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.pmaxitems) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxitems\"] = params.pmaxitems;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n\n  /**\r\n      * Execute actions or constructors\r\n      * @param params\r\n      */\n  executeActions: function executeActions(params) {\n    var self = this;\n    var extendParams = $.extend({}, params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.pguidConstructor) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidConstructor\"] = params.pguidConstructor;\n    }\n\n    if (params.pguidAction) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidAction\"] = params.pguidAction;\n    }\n    if (params.prepare) {\n      return data;\n    }\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getPolymorphicActions: function getPolymorphicActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.additionalXpaths) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /**\r\n      * Make a JSON tree of polymorphic constructors categories\r\n      * @param values\r\n      * @return {Array}\r\n      */\n  serializePolymorphicActions: function serializePolymorphicActions(values) {\n    // json serializer\n    var actions = [];\n    var GUID_ENTITY = 0,DISPLAY_NAME = 1,XPATHCONTEXT = 2,TYPE = 3,GUID_OBJECT = 4,GUID_CONSTRUCTOR = 5,GUID_PARENT_ENTITY = 6;\n\n    /**\r\n                                                                                                                                 * Get children by guid of entity\r\n                                                                                                                                 * @param guid\r\n                                                                                                                                 * @return {Array}\r\n                                                                                                                                 */\n    var getChildren = function getChildren(guid) {\n      var children = [];\n      guid = guid || \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_PARENT_ENTITY] == guid) {\n          children.push(value);\n        }\n      });\n      return children;\n    };\n\n    /**\r\n        * Get parents by action object\r\n        * @param node\r\n        * @return {string}\r\n        */\n    var getParents = function getParents(node) {\n      node = node || {};\n      var parents = \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_ENTITY] == node[GUID_PARENT_ENTITY]) {\n          parents += getParents(value) + value[DISPLAY_NAME] + \" > \";\n        }\n      });\n      return parents;\n    };\n\n\n    /**\r\n        * Make a tree of actions\r\n        * @param list\r\n        * @param guid\r\n        * @return {*}\r\n        */\n    var fillTree = function fillTree(list, guid) {\n      var node;\n      var children = getChildren(guid);\n      $.each(children, function (key, value) {\n        var child = fillTree([], value[GUID_ENTITY]);\n        node = {\n          \"guidEntity\": value[GUID_ENTITY],\n          \"displayName\": value[DISPLAY_NAME],\n          \"hasConstructor\": value[GUID_CONSTRUCTOR] ? true : false,\n          \"type\": value[TYPE],\n          \"guidObject\": value[GUID_OBJECT],\n          \"guidConstructor\": value[GUID_CONSTRUCTOR],\n          \"xpathContext\": value[XPATHCONTEXT],\n          \"children\": child,\n          \"parents\": getParents(value) };\n\n        if (node.guidConstructor !== \"\" || node.children.length > 0) {\n          list.push(node);\n        }\n      });\n\n      return list;\n    };\n    fillTree(actions, \"\");\n    return actions;\n  },\n\n  /**\r\n      * Gets the image for an entity xpath\r\n      * @param params\r\n      */\n  getEntityImage64: function getEntityImage64(params) {\n    var self = this,\n    data = {\n      width: params.data,\n      height: params.height,\n      xpath: params.xpath },\n\n    url = self.serviceLocator.getUrl(\"render-entity-layout-image64\").replace(\"{entity}\", params.entity).replace(\"{surrogateKey}\", params.surrogateKey);\n\n    return $.ajax({\n      url: url,\n      data: data });\n\n  },\n\n  /**\r\n      * Get data files when user access from my stuff, because there is no scope\r\n      */\n  getFilesDataForLayoutUploadControl: function getFilesDataForLayoutUploadControl(params) {\n    var self = this;\n    return $.read(self.serviceLocator.getUrl(\"render-entity-layout-upload-files\"), params);\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(params) {\n    return $.ajax({\n      url: this.verifyMobilePathToBase(bizagi.services.ajax.pathToBase || \"\", params.url),\n      data: params.formData,\n      type: \"POST\",\n      contentType: false,\n      processData: false });\n\n  },\n\n  /**\r\n      * Commit an add or edit request for a grid\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  commitGridAction: function commitGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"COMMIT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-commit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"COMMIT\" });\n\n  },\n  /*\r\n      *   Commit an add or edit request for a grid\r\n      */\n  sendCheckpointAction: function sendCheckpointAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CHECKPOINT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending checkpoint request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-checkpoint-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"CHECKPOINT\" });\n\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyMobilePathToBase: function verifyMobilePathToBase(pathToBase, url) {\n    return bizagi.util.isMashupContext() ? (url || \"\").replaceAll(pathToBase, \"\") : url;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to multiaction rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.render.services.multiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\n{\n\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(service, limit, queue) {\n    this.service = service;\n    this.serviceLocator = service.serviceLocator;\n\n    // Multiaction - batch stuff\n    this.batch = {};\n    this.batchTimer = 50;\n    this.maxNumberOfActions = limit || 0;\n    this.queue = queue || null;\n    this.deferredBatchExecuting = $.Deferred();\n    this.deferredBatchExecuting.resolve();\n    this.disabledRequests = false;\n    this.circularDependencies = new bizagi.circularDependencies();\n\n    // Create proxyed version of methods\n    this.replicateServiceMethods();\n  },\n\n  /*\r\n     *   Returns the internal service\r\n     */\n  getService: function getService() {\n    return this.service;\n  },\n\n  /*\r\n     *   Create a proxied multiaction version for service calls\r\n     */\n  replicateServiceMethods: function replicateServiceMethods() {\n    var self = this;\n    for (var key in this.service.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"multiaction\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ return this.proxyMethod(this.getService().' + key + ', arguments);};tmp');\n    }\n  },\n\n  /*\r\n     *   Perform the proxy call for each service method\r\n     */\n  proxyMethod: function proxyMethod(method, parameters) {\n    var service = this.service;\n\n    // Check if has only one argument, else execute directly\n    if (!parameters || parameters.length != 1) {\n      return method.apply(service, parameters);\n    }\n\n    // Check if the argument is object, else execute directly\n    if (_typeof(parameters[0]) != \"object\") {\n      return method.apply(service, parameters);\n    }\n\n    var params = parameters[0];\n\n    // If the caller is requesting a prepare call, just execute the method with the current parameters\n    if (params.prepare == true) return method.apply(service, parameters);\n\n    // Prepare the ajax instead of sending it\n    var originalPrepare = params.prepare;\n    params.prepare = true;\n\n    var action = method.apply(service, parameters);\n    if (originalPrepare === undefined || originalPrepare == null) delete params.prepare;else\n    params.prepare = originalPrepare;\n    return this.add(action);\n  },\n\n  /**\r\n     * This method make a standard error message\r\n     */\n  makeCircularDependenciesError: function makeCircularDependenciesError(error) {\n    var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n    return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n  },\n\n\n  /*\r\n     *   Add an action to be performed in a multiaction, and be resolved later\r\n     *   returns a deferred\r\n     */\n  add: function add(action) {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    var name = action.h_action || \"unnamed\";\n\n    // Put here all actions to ignore in circular dependencies\n    var exceptionActions = [\"PROCESSPROPERTYVALUE\", \"LOADTEMPLATE\", \"ADDRELATIONWITHDATA\", \"GETFILE\"];\n\n    if (exceptionActions.indexOf(name) < 0 && bizagi.override.detectCircularDependencies) {\n      self.circularDependencies.addNode(name, action);\n    }\n\n    // First clear previous timeout\n    clearTimeout(self.batchTimeout);\n    var tag = action.tag = Math.guid();\n    var singleAction = { action: action, deferred: deferred };\n    self.batch[tag] = singleAction;\n\n    var fn = function fn() {\n      var resolveDependencies = self.circularDependencies.resolve();\n\n      if (resolveDependencies.error) {\n        // Reset Queue\n        for (var i in self.batch) {\n          var message = resolveDependencies.error.multiactionError;\n          self.batch[i].deferred.reject(message);\n        }\n        self.batch = {};\n      } else\n      if (!self.disabledRequests) {\n        self.deferredBatchExecuting = self.fire();\n      }\n    };\n\n    // Start a new timeout\n    self.batchTimeout = setTimeout(fn, self.batchTimer);\n\n    // If we have a limit, then fire it again\n    if (self.maxNumberOfActions != 0) {\n      if (Object.keys(self.batch).length >= self.maxNumberOfActions) {\n        clearTimeout(self.batchTimeout);\n        fn();\n      }\n    }\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Fires up the multiaction\r\n     */\n  fire: function fire() {\n    var self = this;\n    var batch = {};\n\n    // Prepare actions and clone batch manually\n    var actions = [];\n    $.each(self.batch, function (tag, item) {\n      actions.push(item.action);\n      batch[tag] = item;\n    });\n\n    // Reset batch\n    self.batch = {};\n\n    // Fire ajax \n    return $.when(self.execute({ actions: actions, rejectDeferreds: false })).\n    done(function (responses) {\n\n      // Process each response\n      $.each(responses, function (i, response) {\n        var tag = response.tag;\n        if (!response.error) {\n          batch[tag].deferred.resolve(response.result);\n        } else {\n          batch[tag].deferred.reject(response.error, response, response.error.message);\n        }\n\n        // Remove paired tag from collection\n        delete batch[tag];\n      });\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: \"Operation didn't executed\" }, '', \"Operation didn't executed\");\n      });\n    }).fail(function (xhr, type, error) {\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      var errorMessage = typeof error !== \"undefined\" ? error.message : error || \"Operation didn't executed\";\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: errorMessage }, '', \"Operation didn't executed\");\n      });\n    });\n  },\n  /*\r\n     *   Sends a multiaction to the server\r\n     */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction\"),\n      data: data,\n      queue: this.queue,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(response.error, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse = {};\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Disable the request, restart the form is mandatory who calls this method \r\n      * or unexpected behavior will happen on the form\r\n      */\n  disableRequests: function disableRequests() {\n    var self = this;\n    self.disabledRequests = true;\n  },\n\n  /**\r\n      * Identify if batch action is running, by default is resolved\r\n      * @returns Deferred object if batch action is running\r\n      */\n  validateIfBatchIsExecuting: function validateIfBatchIsExecuting() {\n    var self = this;\n    return self.deferredBatchExecuting;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Command controller \r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for action and validation controllers\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.command.controllers.controller\", {\n  /* \r\n                                                          *   Set to true in order to debug\r\n                                                          */\n  THROW_ERROR: true },\n\n{\n  /*  \r\n  *   Constructor\r\n  */\n  init: function init(form) {\n    this.form = form;\n    this.dateFormat = form.getResource(\"dateFormat\");\n  },\n  /*\r\n     *   Returns the condition in JS\r\n     */\n  buildConditions: function buildConditions(conditions, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var operator = conditions.expressions && conditions.expressions.length > 1 ? self.buildConditionOperator(conditions.operator) : conditions.operator;\n    innerDependencies = innerDependencies || [];\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    //  Validate trtue and false conditions\n    if (operator == \"true\")\n    return \"true\";\n    if (operator == \"false\")\n    return \"false\";\n\n    var sJsCondition = \"\";\n\n    for (var i = 0; i < conditions.expressions.length; i++) {\n      var expression = conditions.expressions[i];\n\n      if (expression.simple) {\n        var bGDetected = self.searchGridReferenceInCondition(expression.simple);\n        sJsCondition += self.buildSimpleCondition(expression.simple, bGDetected, bCheckEditability, innerDependencies);\n\n      } else if (expression.complex) {\n        sJsCondition += \"(\" + self.buildConditions(expression.complex, bGridDetected, bCheckEditability, innerDependencies) + \") \";\n      }\n\n      // Adds operator\n      sJsCondition += i < conditions.expressions.length - 1 ? operator : \"\";\n    }\n\n    return sJsCondition;\n  },\n  /*\r\n     *   Builds the condition operator\r\n     */\n  buildConditionOperator: function buildConditionOperator(conditionsOperator) {\n    if (conditionsOperator == \"and\")\n    return \" && \";\n    if (conditionsOperator == \"or\")\n    return \" || \";\n    return conditionsOperator;\n  },\n  /*\r\n     *   Builds a simple condition\r\n     */\n  buildSimpleCondition: function buildSimpleCondition(condition, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var sXpath;\n    var xpath;\n    var sArgument = \"\";\n    var operator = condition.operator;\n    var ensureValueJs = \"\";\n    var ensureEditable = \"\";\n    var ensureVisible = \"\";\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    // List of controls excluded to editability validation\n    // Just keep empty the value of element\n    var excludeEditabilityRule = { \"boolean\": \"\" };\n    var control = condition.xpath && condition.renderId ?\n    condition.xpath + '.' + condition.renderId :\n    condition.xpath || condition.renderId || condition.containerId;\n\n\n    if (bGridDetected && condition.containerId) {\n      var gridXpathInfo = self.processGridXpath(condition.xpath);\n      control = gridXpathInfo.gridXpath + \".\" + condition.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + condition.renderId;\n    }\n\n    if (!innerDependencies.includes(control)) {\n      innerDependencies.push(control);\n    }\n\n    var detectedArgumentType = self.detectConditionArgumentType(control, condition.argumentType);\n\n    // Build xpath\n    sXpath = self.buildXpath(control, detectedArgumentType, bGridDetected);\n    if (detectedArgumentType != \"boolean\") {\n      ensureValueJs += \"!bizagi.util.isEmpty(\" + sXpath + \") && \";\n    }\n\n    // Check if the render is editable, only when the parameter is provided\n    if (bCheckEditability && control && control.length > 0 && !excludeEditabilityRule.hasOwnProperty(detectedArgumentType)) {\n      ensureEditable = \"self.isVisible('\" + control + \"') && self.isEditable('\" + control + \"') && \";\n    }\n\n    // Build argument\n    if (!bizagi.util.isEmpty(condition.argument)) {\n      sArgument = self.buildArgument(condition.argument, detectedArgumentType, bGridDetected);\n\n      // If the argument is xpath it must be filled to for some operators\n      if (detectedArgumentType == \"xpath\") {\n        ensureValueJs += \"!bizagi.util.isEmpty(\" + sArgument + \") && \";\n      }\n\n    } else if (condition.argument === \"\") {\n      // Also check the case when the argument is empty\n      sArgument = \"\\\"\\\"\";\n    }\n\n    // Build condition\n\n    if (operator == \"includes\") {\n      return ensureEditable + ensureValueJs + \"self.includes(\" + sXpath + \",\" + sArgument + \") \";\n    }\n    //if (operator == \"changes\") return \"true\";\n    if (operator == \"changes\") {\n      // If key enableActionIsChangedSupport is true, allow to evaluate the valid control\n      // that execute the action \"is changed\" (see ticket TM12723)\n      if (bizagi.override && !bizagi.override.enableActionIsChangedSupport) {\n        return \"self.isChanged(\" + sXpath + \", params.changed)\";\n      } else {\n        if (bGridDetected) {\n          return \"self.isGridColumnChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        } else {\n          return \"self.isControlChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        }\n      }\n    }\n    if (operator == \"equals\")\n    return ensureEditable + ensureValueJs + sXpath + \" == \" + sArgument;\n    if (operator == \"not-equals\")\n    return ensureEditable + sXpath + \" != \" + sArgument;\n    if (operator == \"less-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" < \" + sArgument;\n    if (operator == \"less-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" <= \" + sArgument;\n    if (operator == \"greater-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" > \" + sArgument;\n    if (operator == \"greater-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" >= \" + sArgument;\n    if (operator == \"like\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"is-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" == 0 || bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-not-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"!bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" != 0 && !bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-true\")\n    return ensureEditable + \"( \" + sXpath + \" == true || \" + sXpath + \" == 'true' )\";\n    if (operator == \"is-false\")\n    return ensureEditable + \"( \" + sXpath + \" == false || \" + sXpath + \" == 'false' || \" + sXpath + \" == 'False' )\";\n    if (operator == \"does-not-contain\")\n    return ensureEditable + \"(bizagi.util.isEmpty(\" + sXpath + \") || \" + sXpath + \".toString().indexOf(\" + sArgument + \") < 0 )\";\n    if (operator == \"contains\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == true \";\n    if (operator == \"does-not-begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == false \";\n    if (operator == \"file-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"file-not-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"!self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"is-invalid-email\")\n    return ensureEditable + \"!self.isValidEmail(\" + sXpath + \") \";\n    if (operator == \"letter-edited\")\n    return \"false\"; //TODO\n    if (operator == \"letter-not-edited\")\n    return \"false\"; //TODO\n    if (operator == \"cell-change\")\n    return \"column == \" + sArgument;\n\n    if (operator == \"on-press\") {\n      if (bGridDetected) {\n        var id = self.buildXpath(control, \"id\", bGridDetected);\n        return \"self.isGridButtonPressed(\" + id + \", params.pressed)\";\n      } else {\n        return \"self.isButtonPressed('\" + control + \"', params.pressed)\";\n      }\n    }\n    if (operator == \"on-load\") {\n      return \"true\";\n    }\n\n    // ondelete behavior on grid control  \n    if (operator == 'on-deleted-row') {\n      xpath = control || \"\";\n      return \"self.onDeletedGridRow('\" + xpath + \"', params.rowDeleted)\";\n    }\n\n    // If there is another operator code throw exception\n    throw new \"There is no implementation for operator code \"() + operator;\n  },\n  /*\r\n     *   Detects the argument type based on the render\r\n     */\n  detectConditionArgumentType: function detectConditionArgumentType(control, argumentType) {\n    var self = this;\n\n    if (argumentType === undefined || argumentType == \"const\") {\n\n      // Search render\n      var form = self.form;\n      var render = form.getRender(control) || form.getRenderById(control);\n\n      // If the render doesn't exist, is because it has the visible property assigned to false\n      // and isn't present in the form's metadata, for this case returns the default value (text)\n      if (render == null) {\n        return 'text';\n      }\n\n      // Check if the render is a grid\n      if (render.properties.type == \"grid\") {\n        var gridXpath = self.processGridXpath(control);\n\n        if (gridXpath.remainingXpath === \"\") {\n          // The target is the grid\n          return \"xpath\";\n        } else {\n          render = render.getColumn(gridXpath.remainingXpath);\n          if (render == null) {\n            throw new Error(\"RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller\");\n          }\n        }\n      }\n\n      var dataType = render.properties.dataType;\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n\n      if (self.isRelatedEntityRender(renderType)) {\n        return 'entity';\n      }\n\n      // Number\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 6 || dataType == 7 || dataType == 10 || dataType == 11) {\n        return 'number';\n      }\n\n      // Money\n      if (dataType == 8) {\n        return 'money';\n      }\n\n      // Date\n      if (dataType == 12 || dataType == 13) {\n        if (render.properties.showTime == true) {\n          return 'datetime';\n        } else {\n          return 'date';\n        }\n      }\n\n      // Boolean\n      if (dataType == 5) {\n        return 'boolean';\n      }\n\n      // Button\n      if (renderType == \"button\") {\n        return \"button\";\n      }\n\n      // form\n      if (\"form\" === renderType || /queryForm/i.test(renderType)) {\n        return \"form\";\n      }\n\n      // Default\n      return 'text';\n\n    } else if (argumentType == \"xpath\" || argumentType == \"function\" || argumentType == \"entity\") {\n      return argumentType;\n    }\n\n    // Default return text\n    return 'text';\n  },\n  /*\r\n     *   Detects if a render type must be binded to a xpath with related entity\r\n     */\n  isRelatedEntityRender: function isRelatedEntityRender(renderType) {\n    return [\"combo\", \"list\", \"radio\", \"search\", \"searchCombo\", \"columnCombo\", \"columnSearch\", \"queryMultiSelect\"].includes(renderType) || /^cascadingcombo$/i.test(renderType);\n  },\n\n  buildXpath: function buildXpath(xpath, argumentType, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (argumentType == 'xpath' && !bGridDetected) {\n      return \"self.evalXpath('\" + xpath + \"', '\" + self.detectConditionArgumentType(xpath, \"const\") + \"')\";\n    } else if (argumentType == 'id') {\n      return \"'\" + xpath + \"'\";\n    } else if (argumentType == 'function') {\n      var xpathArgumentType = self.detectConditionArgumentType(xpath, \"const\");\n      return \"self.evalXpath('\" + xpath + \"', '\" + xpathArgumentType + \"')\";\n    } else if (bGridDetected) {\n      return \"self.evalGridXpath(params, '\" + xpath + \"', '\" + argumentType + \"')\";\n    }\n\n    return \"self.evalXpath('\" + xpath + \"', '\" + argumentType + \"')\";\n  },\n  buildArgument: function buildArgument(argument, argumentType, bGridDetected, xpathContext) {\n    var self = this;\n    var number;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    if (argumentType == 'text') {\n      // Text\n      argument = argument == null ? \"\" : argument;\n      argument = typeof argument != 'string' ? argument.toString() : argument;\n      if (argument.indexOf(\"'\") != -1)\n      argument = argument.replaceAll(\"'\", \"\\\\'\");\n\n      // Remove line breaks because they will fail with the eval command\n      if (argument.indexOf(\"\\n\") != -1)\n      argument = argument.replaceAll(\"\\n\", \"\");\n\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'boolean') {\n      // Boolean\n      if (typeof argument == \"string\") {\n        return argument == \"Default\" ? argument : eval(argument.toLowerCase()) == true ? \"true\" : \"false\";\n      } else {\n        return eval(argument) == true ? \"true\" : \"false\";\n      }\n    }\n    if (argumentType == 'number') {\n      // Number\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'money') {\n      // MONEY\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'date') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument);\n      if (!date || date == 0)\n      date = new Date(0);\n\n      // Remove time\n      date.setHours(0, 0, 0, 0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date) + \"').setHours(0,0,0,0)\";\n    }\n    if (argumentType == 'datetime') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument, true);\n      if (!date || date == 0) {\n        date = new Date(0);\n      }\n      //date.setSeconds(0);\n      date.setMilliseconds(0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date, true) + \"', true).getTime()\";\n    }\n    if (argumentType == 'color') {\n      // Color\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'entity') {\n\n      if (bizagi.util.isEmpty(argument)) {\n        return null;\n      }\n      try {\n        argument = _typeof(argument) != \"object\" ? JSON.parse(argument) : argument;\n      } catch (e) {\n        argument = argument || {};\n      }\n\n      if (argument && argument.id) {\n        // Entity value\n        result = argument.id;\n      } else if (argument && Array.isArray(argument.value)) {\n        // Entity multi values\n        var result = argument.value.map(function (value) {\n          return value.id;\n        });\n      } else {\n        // Entity value\n        result = argument.id || argument;\n      }\n\n      return JSON.stringify(result);\n    }\n    if (argumentType == 'xpath') {\n      // Xpath value\n      var xpath = argument.toString();\n\n      bGridDetected = self.searchGridReferenceInXpath(xpath);\n\n      // Process grid xpaths\n      if (bGridDetected) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n\n      if (xpathContext) {\n        xpath = xpathContext + \".\" + xpath;\n      }\n\n      return self.buildXpath(xpath, argumentType, bGridDetected);\n    }\n    if (argumentType == 'json') {\n      // Xpath value\n      return JSON.encode(argument);\n    }\n    if (argumentType == 'function') {\n      if (argument == \"BAToday\") {\n        return \"self.getCurrentDate()\";\n      }\n      if (argument == \"BANow\") {\n        return \"self.getCurrentDate(true)\";\n      }\n\n      // If there is another function type code throw exception\n      throw \"There is no implementation for function \" + argument;\n    }\n\n    if (argumentType == undefined) {\n      return null;\n    }\n\n    // If there is another argument type code throw exception\n    throw \"There is no implementation for argument type \" + argumentType;\n  },\n  /*\r\n     *   Evals if an xpath is editable\r\n     */\n  isEditable: function isEditable(xpath) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    return render.properties.editable;\n  },\n\n  isVisible: function isVisible(xpath) {\n    var self = this;\n\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    if (render.properties.visible) {\n      return self.isParentVisible(render.parent);\n    } else {\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n      if (/^hidden$/i.test(renderType)) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  isParentVisible: function isParentVisible(render) {\n    var self = this;\n    if (render.parent) {\n      if (render.properties.visible) {\n        return self.isParentVisible(render.parent);\n      } else {\n        return false;\n      }\n    } else {\n      return render.properties.visible;\n    }\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalGridXpath: function evalGridXpath(params, xpath, argumentType) {\n    var self = this;\n\n    if (params === undefined) {\n      return this.evalXpath(xpath, argumentType);\n    }\n\n    var grid = params.grid;\n\n    if (grid === undefined || grid === null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Grid renders\n    var gridXpath = self.processGridXpath(xpath);\n\n    // Return the value\n    var gridColumn = grid.getColumn(gridXpath.remainingXpath);\n\n    if (!gridColumn) {\n      return false;\n      //throw \"There is no a valid render for xpath \" + xpath;\n    }\n\n    var cellValue = grid.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n    if (gridColumn.properties.type == \"columnRadio\") {\n      if (cellValue && !bizagi.util.isString(cellValue)) {\n        if (cellValue.length > 0 && cellValue[0].length > 0)\n        cellValue = cellValue[0][0];else\n\n        cellValue = cellValue.id;\n      } else\n      if (!bizagi.util.isString(cellValue))\n      cellValue = 0;\n    }\n\n    if (gridColumn.properties.type == \"columnCombo\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnSearch\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnDate\") {\n      if (cellValue) {\n        cellValue = !gridColumn.properties.showTime ?\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0, 0, 0, 0) :\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n      }\n    }\n    // Parse empty values\n    if (bizagi.util.isEmpty(cellValue)) {\n      // If the render is a boolean return false for actions\n      if (argumentType == \"boolean\") {\n        if (gridColumn.properties.display == \"check\") {\n          return false;\n        } else {\n          return null;\n        }\n      }\n    }\n\n    // Parse boolean and non-empty date types\n    if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n      return eval(self.buildArgument(cellValue, argumentType));\n    }\n\n    return cellValue;\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalXpath: function evalXpath(xpath, argumentType) {\n    var self = this,i,renderToEval;\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length === 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    i = 0;\n    while (i < rendersToEval.length) {\n      renderToEval = rendersToEval[i++];\n      var bIsGrid = renderToEval.properties.type == 'grid';\n      if (!bIsGrid) {\n        // Normal renders\n        var value = renderToEval.getValue();\n        var renderType = bizagi.util.normalizeType(renderToEval.properties.type || \"\");\n\n        if (argumentType === undefined || argumentType === \"undefined\") {\n          return value;\n        }\n\n        // If the render is a combo and the value is null return 0 for validations and actions\n        if ([\"combo\", \"list\", \"search\", \"radio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n          if (bizagi.util.isEmpty(value) || value.id == \"\") {\n            value = 0;\n          }\n        }\n\n        // If the render is a queryMultiSelect and the value is empty array of objects\n        // return mapValue for validations and actions\n        if (/^queryMultiSelect$/i.test(renderType)) {\n          return renderToEval && renderToEval.mapValue(value);\n        }\n\n        if (renderType === \"comboSelected\") {\n          return typeof value === \"string\" ? JSON.parse(value).value : value;\n        }\n\n        if (bizagi.util.isEmpty(value)) {\n          // If the render is a check and the value is null return false for validations and actions\n          if (renderType === \"boolean\" && renderToEval.properties.display === \"check\") {\n            return false;\n          }\n\n          return value;\n        }\n\n        if (argumentType === \"xpath\") {\n          return eval(self.buildArgument(xpath, argumentType));\n        } else {\n          return eval(self.buildArgument(value, argumentType));\n        }\n      } else {\n\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n\n        // Return the value\n        var gridColumn = renderToEval.getColumn(gridXpath.remainingXpath);\n\n        if (!gridColumn) {\n          continue;\n        }\n\n        var cellValue = renderToEval.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n        if (gridColumn.properties.type == \"columnRadio\") {\n          if (cellValue && !bizagi.util.isString(cellValue)) {\n            if (cellValue.length > 0 && cellValue[0].length > 0)\n            cellValue = cellValue[0][0];else\n\n            cellValue = cellValue.id;\n          } else\n          if (!bizagi.util.isString(cellValue))\n          cellValue = 0;\n        }\n\n        if (gridColumn.properties.type == \"columnCombo\" || gridColumn.properties.type == \"columnSearch\" || gridColumn.properties.type == \"columnList\") {\n          if (cellValue && cellValue.id)\n          cellValue = cellValue.id;else\n          if (typeof cellValue != \"number\" && typeof cellValue != \"string\")\n          cellValue = 0;\n        }\n\n        // Parse empty values\n        if (bizagi.util.isEmpty(cellValue)) {\n          // If the render is a boolean return false for actions\n          if (argumentType == \"boolean\") {\n            if (gridColumn.properties.display == \"check\") {\n              return false;\n            } else {\n              return null;\n            }\n          }\n        }\n\n        // Parse boolean and non-empty date types\n        if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n          return eval(self.buildArgument(cellValue, argumentType));\n        }\n\n        if (typeof gridColumn != \"undefined\" && typeof gridColumn.properties != \"undefined\" && typeof gridColumn.properties.type != \"undefined\" && gridColumn.properties.type == \"columnDate\") {\n          //cellValue = (cellValue && !gridColumn.properties.showTime)?bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0,0,0,0):bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n          cellValue = self.getColumnDateCorrectFunction(cellValue, gridColumn.properties.showTime)(cellValue);\n        }\n\n        return cellValue;\n      }\n      throw \"There is no a valid render for xpath \" + xpath;\n    }\n  },\n  /*\r\n     *   Check if the upload render has any files uploaded\r\n     */\n  isFileUploaded: function isFileUploaded(xpath) {\n    var self = this;\n\n    var value = self.evalXpath(xpath);\n\n    if (value && value.length) {\n      if (value.length > 0)\n      return true;\n    }\n\n    return false;\n  },\n  /*\r\n     *   Check if a render has a valid email value\r\n     */\n  isValidEmail: function isValidEmail(value) {\n    var regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/gi;\n    if (value && value.match(new RegExp(regex))) {\n      return true;\n    }\n    return false;\n  },\n  /**\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isButtonPressed: function isButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var render = this.getRenderById(control);\n    if (typeof render === \"undefined\" || render === null || !/^button$/i.test(bizagi.util.normalizeType(render.properties.type))) {\n      return false;\n    }\n\n    return pressed;\n  },\n  /*\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isGridButtonPressed: function isGridButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var arrGridXpath = this.processGridXpath(control);\n    var gridXpath = arrGridXpath.gridXpath;\n    var render = this.getRender(gridXpath);\n    var column = arrGridXpath.remainingXpath || \"\";\n\n\n    if (pressed && render && render.columns) {\n      $.each(render.columns, function (key, value) {\n        if ((value.properties.xpath === column || value.properties.id === column) && value.properties.type === \"columnButton\") {\n          pressed = true;\n        }\n      });\n    }\n    return pressed;\n  },\n\n  /**\r\n     * Check if a control has been changed\r\n     */\n  isChanged: function isChanged(value, _isChanged) {\n    if (value === undefined || value === null) {\n      return false;\n    }\n\n    return _isChanged;\n  },\n\n  /**\r\n      * Check if a control has been changed\r\n      */\n  isControlChanged: function isControlChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var renderToEval = this.getRender(control);\n      var controlChanged = params.render;\n      if (renderToEval == null || controlChanged == null) return false;\n\n      return controlChanged.properties.id === renderToEval.properties.id &&\n      controlChanged.properties.xpath === renderToEval.properties.xpath;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Check if a column has been changed\r\n      */\n  isGridColumnChanged: function isGridColumnChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var arrGridXpath = this.processGridXpath(control);\n      var gridXpath = arrGridXpath.gridXpath;\n      var gridToEval = this.getRender(gridXpath);\n\n      if (gridToEval == null) return false;\n\n      var xpathColumn = arrGridXpath.remainingXpath || \"\";\n      var columnChanged = params.render.getColumn(params.column);\n      var columnToEval = gridToEval.getColumn(xpathColumn);\n\n      if (columnToEval && columnChanged) {\n        return columnToEval.properties.xpath === columnChanged.properties.xpath &&\n        columnToEval.properties.id === columnChanged.properties.id;\n      }\n\n      return false;\n    }\n  },\n\n  /**\r\n     * Check if a control has the item\r\n     */\n  includes: function includes(value, argument) {\n    if (typeof value == \"undefined\" || value === null) {\n      return false;\n    }\n    if (typeof argument == \"undefined\" || argument === null) {\n      return false;\n    }\n    var inArray = $.grep(value, function (e) {\n      return e.id == argument;\n    });\n    if (inArray.length > 0) {\n      return true;\n    }\n    return false;\n  },\n\n  /**\r\n     *  Check if the grid has been deleted a row\r\n     */\n  onDeletedGridRow: function onDeletedGridRow(xpath, rowDeleted) {\n    var self = this;\n    var grid = self.getRender(xpath) || {};\n\n    if (grid && rowDeleted) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *   Wrapper for get renders, return null if no renders have been found\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this,\n    form = self.form,\n    regex = /id=([\\w-]+)/gi;\n    var renders = null;\n\n    // Check if the xpath is an id\n    var idMatches = regex.exec(xpath);\n    if (idMatches && idMatches.length > 1) {\n      var render = self.getRenderById(idMatches[1]);\n      if (render) {\n        if (render.length == 0)\n        return null;else\n        {\n          renders = [];\n          renders.push(render);\n          return renders;\n        }\n      } else {\n        return null;\n      }\n\n    }\n\n    renders = form.getRenders(xpath);\n    if (renders.length == 0)\n    return null;\n    return renders;\n  },\n  /*\r\n     *   Wrapper for get only one editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this,\n    form = self.form;\n\n    return form.getRender(xpath);\n  },\n  /*\r\n     *   Wrapper to get a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this,\n    form = self.form;\n\n    return form.getRenderById(id);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showRenderNotFoundError: function showRenderNotFoundError(xpath) {\n    bizagi.debug(\"Cannot find render in DOM: \" + xpath);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showContainerNotFoundError: function showContainerNotFoundError(containerId) {\n    bizagi.debug(\"Cannot find container in DOM: \" + containerId);\n  },\n  /*\r\n     *   Returns the current date\r\n     */\n  getCurrentDate: function getCurrentDate(includeTime) {\n    var currentDate = new Date();\n    var invariantDate = bizagi.util.dateFormatter.getDateFromInvariant(bizagi.util.dateFormatter.formatInvariant(currentDate));\n    if (!includeTime && invariantDate && !isNaN(Date.parse(invariantDate)) && !$.isNumeric(invariantDate)) {\n      invariantDate.setHours(0, 0, 0, 0);\n    }\n    return invariantDate.getTime();\n\n  },\n  /*\r\n     *   Return the grid xpath parts\r\n     */\n  processGridXpath: function processGridXpath(xpath) {\n    // Eval using regular expressions\n    var regex = new RegExp(/([\\w\\.-]*)\\[(\\d*)\\]\\.([\\w\\.|\\w-\\.]*)/g);\n    var matches = regex.exec(xpath);\n    var index, remainingXpath, gridXpath;\n    if (matches) {\n      gridXpath = matches[1];\n      index = matches[2];\n      remainingXpath = matches[3];\n    } else {\n      index = \"\";\n      remainingXpath = \"\";\n    }\n\n    return { xpath: xpath, index: index, remainingXpath: remainingXpath, gridXpath: gridXpath };\n  },\n  /*\r\n     *   Check if an action/validation contains reference to a grid\r\n     */\n  searchForGridReference: function searchForGridReference(conditions, commands) {\n    var self = this;\n    var i;\n    // Check in conditions\n    if (conditions) {\n      return self.searchGridReferenceInCondition(conditions);\n    }\n\n    // Check in commands\n    if (commands) {\n      for (i in commands) {\n        var command = commands[i];\n        return self.searchForGridReferenceInCommand(command);\n      }\n    }\n\n    return null;\n  },\n  /*\r\n      *   Check if an action/validation contains reference to a grid\r\n      */\n  searchForGridReferenceInCommand: function searchForGridReferenceInCommand(command) {\n    if (command.xpath && command.xpath.indexOf(\"[]\") > 0) {\n      return command.xpath.substring(0, command.xpath.indexOf(\"[]\"));\n    }\n\n    // Check in argument if argumentType is xpath\n    if (command.argumentType == 'xpath') {\n      if (command.argument.indexOf(\"[]\") > 0) {\n        return command.argument.substring(0, command.argument.indexOf(\"[]\"));\n      }\n    }\n  },\n\n  /*\r\n     *   Check if a condition contains reference to a grid\r\n     */\n  searchGridReferenceInCondition: function searchGridReferenceInCondition(condition) {\n    var self = this;\n    var bGridReferenceFound;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      for (i in condition.expressions) {\n        if (condition.expressions.hasOwnProperty(i)) {\n          bGridReferenceFound = self.searchGridReferenceInCondition(condition.expressions[i]);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n        }\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridReferenceInCondition(condition.simple);\n\n    } else if (condition.complex) {\n      return self.searchGridReferenceInCondition(condition.complex);\n    } else {\n      // Looking for grid reference within xpath\n      if (condition.xpath || condition.renderId) {\n        // Check in condition.xpath\n        bGridReferenceFound = self.searchGridReferenceInXpath(condition.xpath) || self.searchGridReferenceInXpath(condition.renderId);\n        if (bGridReferenceFound)\n        return bGridReferenceFound;\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType == 'xpath') {\n          bGridReferenceFound = self.searchGridReferenceInXpath(condition.argument);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n\n        }\n\n      }\n    }\n\n    return null;\n  },\n  /*\r\n     *   Check if a xpath contains a grid reference\r\n     */\n  searchGridReferenceInXpath: function searchGridReferenceInXpath(xpath) {\n    // Check in condition.xpath\n    if (xpath && xpath.indexOf(\"[]\") > 0) {\n      return xpath.substring(0, xpath.indexOf(\"[]\"));\n    }\n    return null;\n  },\n  getGridControl: function getGridControl(xpath, surrogateKey) {\n    var self = this;\n    var remainingXpath = self.processGridXpath(xpath).remainingXpath;\n    var grid = self.getRender(xpath);\n    var column = grid.getControlCell(surrogateKey, remainingXpath);\n\n    return column;\n\n  },\n\n  //#region No side effects functions\n  getColumnDateCorrectFunction: function getColumnDateCorrectFunction(value, showTime) {\n    var self = this;\n    if (!value) return self.getColumnDateValueForNoValue;\n    if (value && showTime) return self.getColumnDateValueDateAndTime;\n    if (value && !showTime) return self.getColumnDateValueOnlyDate;\n    return value;\n  },\n\n  getColumnDateValueForNoValue: function getColumnDateValueForNoValue(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value);\n  },\n\n  getColumnDateValueOnlyDate: function getColumnDateValueOnlyDate(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value).setHours(0, 0, 0, 0);\n  },\n\n  getColumnDateValueDateAndTime: function getColumnDateValueDateAndTime(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value, true).getTime();\n  }\n\n  //#endregion side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Rendering Validation controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will parse and execute all the validations defined for the form\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.action\", {}, {\n  /* \r\n                                                                                        *   Constructor\r\n                                                                                        */\n  init: function init(form, actions) {\n    var self = this;\n\n    // Call base\n    this._super(form);\n\n    // Set a new hash containing all the dependencies subscribing the events\n    self.globalDependencies = {};\n    self.initialCallFunctions = {};\n    self.initialCallFunctionsDeferred = new $.Deferred();\n\n    // Build actions\n    if (actions)\n    self.buildActions(actions);\n\n    // Keep references\n    self.actions = actions;\n    self.internalSubmitActions = {};\n\n    // Set initial timer to trigger initial functions using a setTimeout, and distributing them in differente timespans\n    self.initialCallTimeout = 25;\n    self.initialCallIncrements = 25;\n    self.actionsHistory = {};\n    self.period = 50;\n  },\n  /*\r\n     *   Adds an internal submit action to be executed with all the given rules\r\n     */\n  processInternalSubmitAction: function processInternalSubmitAction(xpath, action) {\n    var self = this;\n\n    // if the action is registered, don't add it again\n    // only one internal submit action is allowed per control\n    if (self.internalSubmitActions[xpath])\n    return;\n\n    // Add to hash and build it\n    self.internalSubmitActions[xpath] = action;\n    self.buildAction(action, true);\n  },\n\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var self = this;\n    var result = false;\n\n    if (self.form.properties.typeForm === \"SummaryForm\" || self.form.properties.typeForm === \"GlobalForm\") result = true;\n    return result;\n  },\n\n  evalClientAction: function evalClientAction(action) {\n    var self = this,i = 0,serverCommand = false,command;\n    var commands = [].concat(action.commands, action.elseCommands);\n    var length = commands.length;\n\n    for (; i < length; i++) {\n      command = commands[i];\n      if (!self.isClientAction(command)) {\n        serverCommand = true;\n        break;\n      }\n    }\n\n    if (serverCommand) {\n      action.enabled = false;\n    }\n  },\n\n  /* Process all given  actions*/\n  buildActions: function buildActions(actions, dontExecute) {\n    var self = this,i,len;\n    var hashes = {};\n\n    // Added in BA56628, it is removed because it affects the actions in global, summary, and record view forms\n    // if (self.form.properties.displayAsReadOnly && self.isSummaryOrGlobalForm())\n    //    actions = [];\n\n    var executeOnlyClientActions = self.isSummaryOrGlobalForm();\n\n    for (i = 0, len = actions.length; i < len; i++) {\n      // If action is not \"valid\" we can omit that instruction\n      try {\n        var action = actions[i];\n        var hash = bizagi.util.md5(JSON.stringify(action.conditions));\n        var hashC = bizagi.util.md5(JSON.stringify(action.commands));\n        if (hashes[hash]) {\n          if (hashes[hash].indexOf(hashC) === -1) {\n            // si la condicion es igual y los comandos diferentes\n            executeOnlyClientActions && self.evalClientAction(action);\n            self.buildAction(action, dontExecute);\n            hashes[hash].push(hashC);\n          }\n        } else {\n          executeOnlyClientActions && self.evalClientAction(action);\n          self.buildAction(action, dontExecute);\n          hashes[hash] = [hashC];\n        }\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, actions[i]);\n        }\n      }\n    }\n  },\n  /*\r\n     *   Remove all current handlers\r\n     */\n  unbindActions: function unbindActions() {\n    var self = this;\n\n    // Remove all previous handlers\n    $.each(self.globalDependencies, function (i, render) {\n      render.unbind(\"renderchange.action\");\n    });\n\n    self.globalDependencies = {};\n\n    // Reset timers and collections\n    $.each(self.initialCallFunctions, function (i, handle) {\n      clearTimeout(handle);\n    });\n    self.initialCallFunctions = {};\n  },\n  /* \r\n     *   Re-execute actions, cleaning the handlers first\r\n     */\n  refreshActions: function refreshActions(newActions) {\n    var self = this;\n\n    self.initialCallTimeout = 25;\n    self.initialCallFunctions = {};\n\n    newActions = newActions || [];\n\n    // Build the actions again\n    self.actions = self.actions.concat(newActions);\n    self.buildActions(self.actions, true);\n\n    // Build internal actions again\n    $.each(self.internalSubmitActions, function (_, action) {\n      try {\n        self.buildAction(action, false);\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, action);\n        }\n      }\n    });\n  },\n  /* Process a single action*/\n  buildAction: function buildAction(action, dontExecute) {\n    var self = this;\n    var form = self.form;\n    var dependencies = [];\n    var dependenciesId = [];\n    var innerDependencies = [];\n\n    var isEnabled = action.enabled != undefined ? action.enabled : true;\n\n    if (!isEnabled) return;\n\n    // If the condition operator is true, we gotta dig in the actions to check if it modifies a grid\n    // To include an auto-dependency, so each time the grid is changed that condition will be executed\n    if (action.conditions && action.conditions.operator == \"true\") {\n      $.each(action.commands, function (_, command) {\n        var gridReference = self.searchGridReferenceInXpath(command.xpath);\n        if (gridReference) {\n          if (!innerDependencies.includes(gridReference))\n          innerDependencies.push(gridReference);\n        }\n      });\n    }\n\n    function isValidDependency(type) {\n      var notValid = [\"groupedgrid\", \"collectionnavigator\"];\n\n      return notValid.indexOf(type) === -1;\n    }\n\n    function addDependency(render) {\n      if (isValidDependency(render.properties.type)) {\n        dependenciesId.push(render.properties.id);\n        dependencies.push(render);\n      }\n    }\n\n\n    // Build anonymous function\n    var fn = self.buildFunction(action.conditions, action.commands, action.elseCommands, innerDependencies);\n\n    // Find dependencies to attach triggers\n    if (innerDependencies) {\n      for (var i = 0; i < innerDependencies.length; i++) {\n        if (typeof innerDependencies[i] != \"undefined\") {\n          var renders = form.getRenders(innerDependencies[i]);\n          if (renders.length === 0) {\n            var renderById = form.getRenderById(innerDependencies[i]);\n            renders = renderById ? [renderById] : null;\n          }\n\n          if (renders) {\n            $.each(renders, function (_, render) {\n              if ($.inArray(render.properties.id, dependenciesId) < 0 && render.properties.editable) {\n                addDependency(render);\n              }\n            });\n            if (dependencies.length === 0) {\n              addDependency(renders[0]);\n            }\n          }\n        }\n      }\n    }\n\n    // Attach handlers\n    $.each(dependencies, function (_, render) {\n      render.bind(\"renderchange.action\", function (ev, args) {\n        args = args || {};\n\n        // Default changed argument to true\n        args.changed = args.changed !== undefined ? args.changed : true;\n\n        // If a grid action has been performed, try to filter it by column, to avoid execute all grid actions each time                \n        if (args.column) {\n          for (var j = 0; j < action.gridColumns.length; j++) {\n            if (args.column == action.gridColumns[j]) {\n              // Call function\n              fn(self, args);\n              return;\n            }\n          }\n        } else {\n          // Call function\n          fn(self, args);\n        }\n      });\n\n      // Add to global dependencies hash\n      self.globalDependencies[render.properties.id] = render;\n\n      // If render is a grid ... trigger function at this point\n      if (render.properties.type === 'grid') {\n        dontExecute = true;\n\n        // Search column dependencies\n        action.gridColumns = [];\n        self.searchGridColumns(action.conditions, action.gridColumns);\n      }\n    });\n\n    // Check if it has to execute\n    if (dontExecute)\n    return;\n\n    // Execute the action because it must execute when the page loads with pre-defined value\n    // Create an async function to trigger it later\n    var asyncFn = function asyncFn(self) {\n\n      var guid = Math.guid();\n      // Create the timeout\n      var handle = setTimeout(function () {\n        try {\n          // TODO: Define render to set parameter to \"fn\" function\n          fn(self);\n          delete self.initialCallFunctions[guid];\n        } catch (e) {\n        } finally\n        {\n          clearTimeout(handle);\n        }\n      }, self.initialCallTimeout);\n\n      // Save a reference\n      self.initialCallFunctions[guid] = handle;\n      self.initialCallTimeout += self.initialCallIncrements;\n    };\n\n    // Run it\n    asyncFn(self);\n  },\n  /*\r\n     * Creates the function to execute based on the action metadata\r\n     */\n  buildFunction: function buildFunction(conditions, commands, elseCommands, innerDependencies) {\n    var self = this;\n\n    var gridReference = self.searchForGridReference(conditions, commands);\n    var bGridDetected = gridReference != null ? gridReference : false;\n    var sJsCondition = \"\";\n    var sJsAction = \"\";\n    var sStatement;\n    var sJsElseAction = \"\";\n    var bAutomaticRestore = elseCommands ? false : true;\n    var bCondition = conditions ? true : false;\n    var i;\n\n    // Build Condition\n    if (bCondition) {\n      sJsCondition += self.buildConditions(conditions, bGridDetected, false, innerDependencies);\n    }\n\n    // Build and execute actions\n    for (i = 0; i < commands.length; i++) {\n      // Parse command\n      var queueAction = self.isServerCommand(commands[i]) ? \"addParallel\" : \"add\";\n      var command = self.buildCommand(commands[i], bGridDetected);\n\n      // Check if command ending with semicolon and remove it\n      command = command.indexOf(\";\") >= 1 ? command.replace(\";\", \"\") : command;\n      sJsAction += \"actionQueue.\" + queueAction + \"(function(){return \" + command + \" ;}); \\r\\n\";\n\n      if (bAutomaticRestore) {\n        sJsElseAction += self.buildRestoreCommand(commands[i], bGridDetected);\n      }\n    }\n\n    // Build non-automatic else commands\n    if (!bAutomaticRestore) {\n      sJsElseAction += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n      sJsElseAction += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n      for (i = 0; i < elseCommands.length; i++) {\n        var queueAction = self.isServerCommand(elseCommands[i]) ? \"addParallel\" : \"add\";\n        var elseCommand = self.buildCommand(elseCommands[i], bGridDetected);\n        // Check if command ending with semicolon and remove it\n        elseCommand = elseCommand.indexOf(\";\") >= 1 ? elseCommand.replace(\";\", \"\") : elseCommand;\n        sJsElseAction += \"actionQueue.\" + queueAction + \"(function(){return \" + elseCommand + \" ;}); \\r\\n\";\n      }\n      sJsElseAction += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n      sJsElseAction += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n      sJsElseAction += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n    }\n\n    // Build final function\n    //sStatement = \"var baTmpFn = function(self, i, column){ \\r\\n\";\n    sStatement = \"var baTmpFn = function(self, params){ \\r\\n\";\n    sStatement += \"params = params || {};\\r\\n\";\n    if (bGridDetected) {\n      sStatement += \"var i = params.key;\\r\\n\";\n      sStatement += \"var column = params.column;\\r\\n\";\n    }\n    if (bCondition) {\n      sStatement += \"if (\" + sJsCondition + \"){ \\r\\n\";\n    }\n\n    // Creates defferreds\n    sStatement += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n    sStatement += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n    sStatement += sJsAction;\n    sStatement += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n    sStatement += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n    sStatement += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n\n    if (bCondition) {\n      sStatement += \"\\r\\n } \";\n      if (sJsElseAction.length > 0) {\n        sStatement += \"else { \\r\\n\" + sJsElseAction + \" }\\r\\n\";\n      }\n    }\n\n    sStatement += \"};\\r\\n\";\n\n\n    if (!bGridDetected) {\n      sStatement += \"baTmpFn\";\n    } else {\n      var sGridStatement = \"var baGridTmpFn = function(self, args){ \\r\\n\";\n      sGridStatement += \"args = args || {};\\r\\n\";\n      sGridStatement += \"\\t var grid = args.render || self.form.getRender('\" + gridReference + \"') || []; \\r\\n\";\n      sGridStatement += \"\\t grid = grid.grid ? grid : (self.form.getRender('\" + gridReference + \"') || []); \\r\\n\";\n      sGridStatement += \"\\t args.grid = grid; \\r\\n\";\n      sGridStatement += \"if(args.surrogateKey === undefined){\\r\\n\";\n      sGridStatement += \"\\t var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"\\t $.each(data, function(i, index) {\\r\\n\";\n      sGridStatement += \"\\t\\t args.key = index; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args);\\r\\n\";\n      sGridStatement += \"\\t });\\r\\n\";\n      sGridStatement += \"} else {\\r\\n\";\n      sGridStatement += \"\\t args.key = args.surrogateKey; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args ); \\r\\n\";\n      sGridStatement += \"}\\r\\n\";\n      sGridStatement += \"};\\r\\n\";\n      sStatement += sGridStatement;\n      sStatement += \"baGridTmpFn\";\n    }\n\n    // Return interpreted function\n    return eval(sStatement);\n  },\n\n  /*\r\n     *   This method checks if a command must be performed by the client, or by the server\r\n     */\n  isServerCommand: function isServerCommand(command) {\n    var commandType = command.command;\n\n    return [\"refresh\", \"submit-data\", \"execute-rule\", \"execute-interface\", \"execute-sap\", \"execute-connector\", \"execute-excel-bot\", \"execute-pipeline\"].includes(commandType);\n  },\n\n  isClientAction: function isClientAction(command) {\n    var commandType = command.command;\n\n    return [\"background-color\", \"forecolor\", \"visible\", \"required\", \"collapse\", \"set-active\"].includes(commandType);\n  },\n\n  isRecentAction: function isRecentAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    if (self.actionsHistory[tag] != null) {\n      return true;\n    }\n    $.when(self.runAction(prefix, command)).done(function () {\n      delete self.actionsHistory[tag];\n      bizagi.log(\"resolve \" + tag);\n    });\n    return false;\n  },\n\n  runAction: function runAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    self.actionsHistory[tag] = new $.Deferred();\n    var timeOutActionsHistory = setTimeout(self.actionsHistory[tag].resolve, self.period);\n    self.actionsHistory[tag].done(clearTimeout.bind(null, timeOutActionsHistory));\n    return self.actionsHistory[tag].promise();\n  },\n  /*\r\n     *   Builds the action JS\r\n     */\n  buildCommand: function buildCommand(command, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    var gridReference = bGridDetected;\n\n    // Parse argument\n    var commandType = command.command;\n    var detectedArgumentType = self.detectCommandArgumentType(command.argumentType, commandType);\n    var argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected, command.xpathContext);\n    var xpath = command.xpath;\n\n    var commandGridDetected = self.searchForGridReferenceInCommand(command);\n    if (commandGridDetected && command.containerId) {\n      var gridXpathInfo = self.processGridXpath(xpath);\n      xpath = gridXpathInfo.gridXpath + \".\" + command.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + command.renderId;\n    } else\n    if (xpath && command.renderId) {\n      xpath = xpath + \".\" + command.renderId;\n    }\n    // If a render id is given, we use it with priority over only xpath\n    else if (command.renderId) {\n        xpath = \"id=\" + command.renderId + \"\";\n      }\n\n    // Process grid xpaths\n    if (bGridDetected && xpath) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (command.xpath && command.xpath.length > 0 || command.renderId && command.renderId.length > 0) {\n      // Build render command\n      switch (commandType) {\n        case 'background-color':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonBackground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderBackground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'forecolor':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonForeground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderForeground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'visible':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonVisibility('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderVisibility('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'readonly':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonEditability('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderEditability('\" + xpath + \"', '\" + argument + \"');\";\n          }\n          break;\n        case 'required':\n          return \"self.changeRenderRequired('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-value':\n          // Check specific argument type\n          if (bGridDetected && command.argumentType === \"xpath\" && !!command.xpathContext) {\n            // When we are going to evaluate a xpath is necessary add a xpathcontext if it exist\n            if (typeof command.xpathContext !== \"undefined\") {\n              command.argument = command.xpathContext + \".\" + command.argument;\n            }\n            argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected);\n          }\n\n          return \"self.changeRenderValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-min':\n          return \"self.changeRenderMinValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-max':\n          return \"self.changeRenderMaxValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'calculate':\n          return \"self.executeCalculatedField('\" + xpath + \"');\";\n          break;\n        case 'submit-value':\n          return \"self.submitRender('\" + xpath + \"', '\" + argument + \"');\";\n          break;\n        case 'clean-data':\n          return \"self.cleanRenderData('\" + xpath + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          commandGridDetected = self.searchForGridReferenceInCommand(command);\n\n          if (commandGridDetected) {\n            return \"self.refreshGridCell('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          } else {\n            return \"self.refreshControl('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"','\" + commandType + \"');\";\n          }\n          break;\n        case 'trigger-click':\n          return \"self.triggerClick('\" + xpath + \"');\";\n          break;}\n\n\n    } else {\n      // Build container command\n      switch (commandType) {\n        case 'background-color':\n          return \"self.changeContainerBackground('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'visible':\n          return \"self.changeContainerVisibility('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'collapse':\n          return \"self.toogleContainer('\" + command.container + \"', \" + !bizagi.util.parseBoolean(argument) + \");\";\n          break;\n        case 'set-active':\n          return \"self.changeActiveItem('\" + command.container + \"');\";\n          break;\n        case 'readonly':\n          return \"self.changeContainerEditability('\" + command.container + \"', '\" + argument + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          // Set prepare parameter to multiaction purposes \n          return \"self.refreshContainer('\" + command.container + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          break;}\n\n    }\n\n    // Global  actions without specific target\n    if (commandType === 'submit-data') {\n      return \"self.submitFormData();\";\n    }\n\n    if (commandType === 'execute-rule') {\n      var ruleObj = command.argument || {};\n      var guidRule = \"\";\n      try {\n        guidRule = JSON.parse(ruleObj).guid;\n      } catch (e) {\n      }\n\n      var xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        var xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeRule('\" + guidRule + \"', printf('\" + xpathContextRow + \"',i) ,'\" + commandType + \"');\";\n      } else {\n        return \"self.executeRule('\" + guidRule + \"','\" + xpathContext + \"','\" + commandType + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-interface') {\n      var interfaceObj = command.argument || {};\n      var guidInterface = \"\";\n\n      try {\n        guidInterface = JSON.parse(interfaceObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeInterface('\" + guidInterface + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeInterface('\" + guidInterface + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-sap') {\n      var connectorObj = command.argument || {};\n      var guidsap = \"\";\n\n      try {\n        guidsap = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeSAPConnector('\" + guidsap + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeSAPConnector('\" + guidsap + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-connector' || commandType === 'execute-excel-bot') {\n      var connectorObj = command.argument || {};\n      var guidConnector = \"\";\n\n      try {\n        guidConnector = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeConnector('\" + guidConnector + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeConnector('\" + guidConnector + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    // Command to execute Pipeline\n    if (commandType === 'execute-pipeline') {\n      var pipelineObj = command.argument || {};\n      var guidPipeline = \"\";\n\n      try {\n        guidPipeline = JSON.parse(pipelineObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executePipeline('\" + guidPipeline + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executePipeline('\" + guidPipeline + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return \"\";\n  },\n  /* \r\n     *   Builds the JS command to restore automatically a command when condition is not met\r\n     */\n  buildRestoreCommand: function buildRestoreCommand(command, bGridDetected) {\n    var xpath = command.xpath;\n    var commandType = command.command;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // If a render id is given, we use it with priority over only xpath\n    if (command.renderId) {\n      xpath = \"id=\" + command.renderId + \"\";\n    }\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    // Build restore action\n    if (xpath && xpath.length > 0) {\n      return \"self.restoreRender('\" + xpath + \"', '\" + commandType + \"');\";\n    } else {\n      return \"self.restoreContainer('\" + command.container + \"', '\" + commandType + \"');\";\n    }\n  },\n  /* \r\n     *   Detect the command argument type based on the command type\r\n     */\n  detectCommandArgumentType: function detectCommandArgumentType(argumentType, commandType) {\n    if (argumentType === undefined) {\n      return argumentType;\n\n    } else if (argumentType == \"const\") {\n\n      if (commandType == 'background-color')\n      return 'color';\n      if (commandType == 'forecolor')\n      return 'color';\n      if (commandType == 'visible')\n      return 'boolean';\n      if (commandType == 'readonly')\n      return 'boolean';\n      if (commandType == 'required')\n      return 'boolean';\n      if (commandType == 'set-value')\n      return 'text';\n      if (commandType == 'collapse')\n      return 'boolean';\n      if (commandType == 'set-active')\n      return 'number';\n      if (commandType == 'set-min')\n      return 'text';\n      if (commandType == 'set-max')\n      return 'text';\n      if (commandType == 'calculate')\n      return undefined;\n      if (commandType == 'refresh')\n      return undefined;\n      if (commandType == 'submit-value')\n      return 'json';\n\n    } else if (argumentType === \"xpath\" || argumentType === \"entity\" || argumentType === \"function\") {\n      return argumentType;\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return null;\n  },\n  /* \r\n     *   Builds the JS command to restore a render when condition is not met\r\n     */\n  restoreRender: function restoreRender(xpath, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var properties = render.originalProperties;\n      var textFormat = properties.textFormat || {};\n      if (commandType == 'background-color')\n      self.changeRenderBackground(xpath, textFormat.background || '');\n      if (commandType == 'forecolor')\n      self.changeRenderForeground(xpath, textFormat.color || 'none');\n      if (commandType == 'visible')\n      self.changeRenderVisibility(xpath, properties.visible != undefined ? properties.visible : true);\n      if (commandType == 'readonly')\n      self.changeRenderEditability(xpath, properties.editable != undefined ? properties.editable : true);\n      if (commandType == 'required')\n      self.changeRenderRequired(xpath, properties.required != undefined ? properties.required : false);\n      // NOte: Command 6 does not have restoration\n    });\n  },\n  /* \r\n     *   Builds the JS command to restore a container when condition is not met\r\n     */\n  restoreContainer: function restoreContainer(containerId, commandType) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(xpath);\n      }\n      return;\n    }\n\n    var properties = container.originalProperties;\n    if (commandType == 'background-color')\n    self.changeContainerBackground(containerId, properties.backgroundColor || 'none');\n    if (commandType == 'visible')\n    self.changeContainerVisibility(containerId, properties.visible != undefined ? properties.visible : true);\n    if (commandType == 'collapse')\n    self.toogleContainer(containerId, true);\n    // NOte: Command 8 does not have restoration\n    if (commandType == 'readonly')\n    self.changeContainerEditability(containerId, properties.editable != undefined ? properties.editable : true);\n  },\n  /* \r\n     *   Sets a new color for the background of the render\r\n     *   Applies also to grid cells!\r\n     */\n  changeRenderBackground: function changeRenderBackground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"backgroundColor\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeBackgroundColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellBackgroundColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellBackgroundColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n\n    });\n  },\n  /*\r\n      *   Sets a new color for the background of the button\r\n      *   Applies also to grid cells!\r\n      */\n  changeButtonBackground: function changeButtonBackground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n\n    element.css(\"background-image\", \"none\");\n    element.addClass(\"ui-fast-transition\");\n\n    if (typeof element[0] !== \"undefined\") {\n      element[0].style.setProperty(\"background-color\", argument, \"important\");\n    }\n  },\n\n  /* \r\n     *   Sets a new color for the foreground of the render\r\n     */\n  changeRenderForeground: function changeRenderForeground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"color\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Sets a new color for the foreground of the render\r\n      */\n  changeButtonForeground: function changeButtonForeground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.css(\"color\", argument, \"!important\");\n  },\n  /* \r\n     *   Changes the visibility of the render\r\n     */\n  changeRenderVisibility: function changeRenderVisibility(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"visibility\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeVisibility(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellVisibility(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnVisibility(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellVisibility(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the visibility of the button\r\n      */\n  changeButtonVisibility: function changeButtonVisibility(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var visible = bizagi.util.parseBoolean(argument) == true;\n\n    if (bizagi.util.isMobileDevice()) {\n      self.changeFormButtonVisibility(guid, visible);\n    } else {\n      var element = self.form.getButton(guid);\n      if (visible) {\n        element.show();\n        element.css(\"display\", \"\");\n      } else {\n        element.hide();\n      }\n    }\n  },\n\n\n  /* \r\n     *   Changes the editability of the render\r\n     */\n  changeRenderEditability: function changeRenderEditability(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"editability\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeEditability(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellEditability(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnEditability(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellEditability(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the editability of the button\r\n      */\n  changeButtonEditability: function changeButtonEditability(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    if (bizagi.util.parseBoolean(argument) == true) {\n      element.removeAttr(\"disabled\");\n    } else {\n      element.attr(\"disabled\", \"disabled\");\n    }\n  },\n  /*\r\n      *  trigger Click button\r\n      */\n  triggerClick: function triggerClick(xpath) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.trigger(\"click\");\n  },\n\n  /* \r\n     *   Changes the required value of the render\r\n     */\n  changeRenderRequired: function changeRenderRequired(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var rendersToEval = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      if (bizagi.util.parseBoolean(render.properties.editable)) {\n        rendersToEval.push(render);\n      }\n    });\n\n    if (rendersToEval.length === 0) {\n      rendersToEval = renders;\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"required\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeRequired(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellRequired(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnRequired(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellRequired(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /* \r\n     *   Changes the render internal value\r\n     */\n  changeRenderValue: function changeRenderValue(xpath, argument) {\n    var self = this;\n\n    if (argument != null && _typeof(argument) === \"object\") {\n      argument = $.extend(argument, { fromAction: true });\n    }\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          if (render.asyncRenderDeferred) {\n            $.when(render.asyncRenderDeferred).done(function () {\n              render.setDisplayValue(argument);\n            });\n          } else {\n            render.setDisplayValue(argument);\n          }\n        });\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellValue(gridXpath.index, gridXpath.remainingXpath, argument);\n\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellValue(indexes[j], gridXpath.remainingXpath, argument);\n            }\n          }\n        });\n      }\n    });\n  },\n  /**\r\n      * Changes the render minimum value\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeRenderMinValue: function changeRenderMinValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"minValue\", argument);\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          var renderType = bizagi.util.normalizeQueryType(render.properties.type);\n          if ([\"number\", \"date\", \"money\"].includes(renderType)) {\n            render.changeMinValue(argument);\n            self.logVisualChange(newVisualChange);\n          }\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        newVisualChange.xpath = gridXpath.remainingXpath;\n\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMinValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMinValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  changeRenderMaxValue: function changeRenderMaxValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"maxValue\", argument);\n\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          render.changeMaxValue(argument);\n          self.logVisualChange(newVisualChange);\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMaxValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMaxValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  executeCalculatedField: function executeCalculatedField(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      $.when(render.ready()).done(function () {\n        render.runFormula();\n      });\n    });\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshControl: function refreshControl(xpath, xpathContext, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n    var queue = new bizagiQueue();\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process matching renders\n    $.each(renders, function (i, render) {\n      queue.add(render.ready().pipe(function () {\n        return render.refreshControl({ xpath: xpath, xpathContext: xpathContext });\n      }));\n    });\n\n    // Return queue deferred\n    return queue.execute();\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshContainer: function refreshContainer(containerId, xpathContext) {\n    var self = this;\n    var container = self.form.getContainer(containerId);\n\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(containerId);\n      }\n      return;\n    }\n\n    return $.when(container.ready()).\n    pipe(function () {\n      return container.refreshContainer({ xpathContext: xpathContext });\n    });\n  },\n  /**\r\n      * Refresh a cell of grid\r\n      */\n  refreshGridCell: function refreshGridCell(xpath, xpathContext) {\n    var self = this;\n    var queue = new bizagiQueue();\n    var def = new $.Deferred();\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n        return false;\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n        return false;\n      });\n    }\n\n    if (rendersToEval.length === 0) {\n      return;\n    }\n\n    // Check xpathContext of the form (addForm or editForm)\n    if (self.form && self.form.properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? self.form.properties.xpathContext + \".\" + xpathContext : self.form.properties.xpathContext;\n    }\n\n    queue.add(def.promise());\n\n    $.when.apply($, $.map(rendersToEval, function (grid) {\n      grid.ready();\n    })).\n    done(function () {\n      var len = rendersToEval.length;\n      var internalQueue = new bizagiQueue();\n      for (var i = 0; i < len; i++) {\n        var grid = rendersToEval[i];\n\n        var gridXpath = self.processGridXpath(xpath);\n        if (!bizagi.util.isEmpty(gridXpath.index)) {\n          // Process a specific row\n          internalQueue.add(grid.refreshCell({\n            key: gridXpath.index,\n            column: gridXpath.remainingXpath,\n            xpathContext: xpathContext }));\n\n        } else {\n          // Process all rows\n          var indexes = grid.getIndexes();\n          var lenIndex = indexes.length;\n          for (var j = 0; j < lenIndex; j++) {\n            internalQueue.addParallel(grid.refreshCell({\n              key: indexes[j],\n              column: gridXpath.remainingXpath,\n              xpathContext: xpathContext }));\n\n          }\n        }\n      }\n\n      $.when(internalQueue.execute()).\n      done(function () {\n        def.resolve();\n      });\n    });\n\n\n    return queue.execute();\n  },\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitFormData: function submitFormData(params) {\n    var self = this;\n\n    // For the submit action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.submitData(params);\n    });\n  },\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(rule, xpathContext, commandType) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n    var prefix = rule + \".\" + xpathContext;\n    if (self.isRecentAction(prefix, commandType)) {\n      return;\n    } else {\n      // Process the action\n      return $.when(form.ready()).\n      pipe(function () {\n        return form.executeRule({ rule: rule, xpathContext: xpathContext });\n      });\n    }\n  },\n  executeInterface: function executeInterface(interfaceObject, xpathContext) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executeInterface({ \"interface\": interfaceObject, xpathContext: xpathContext });\n    });\n  },\n\n\n  executeSAPConnector: function executeSAPConnector(guidsap, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeSAPConnector({ guidsap: guidsap, xpathContext: xpathContext });\n    });\n  },\n\n  executeConnector: function executeConnector(guidConnector, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeConnector({ guidConnector: guidConnector, xpathContext: xpathContext });\n    });\n  },\n\n  executePipeline: function executePipeline(pipeline, xpathContext) {\n    var self = this;\n    // For the execute pipeline  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executePipeline({ pipeline: pipeline, xpathContext: xpathContext });\n    });\n  },\n  /*\r\n     *   Submit the given render and refresh dependencies after that\r\n     */\n  submitRender: function submitRender(xpath, argument) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process the action in the render\n    return $.when(render.ready()).pipe(function () {\n      return render.submitOnChange();\n    });\n  },\n  /*\r\n     * Cleans current value\r\n     */\n  cleanRenderData: function cleanRenderData(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var promises = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        promises.push($.when(render.ready()).then(function () {\n          return $.when(render.renderingDeferred).then(function () {\n            return $.when(render.cleanData()).then(function () {\n              return self.changeRenderRequired(xpath, render.properties.required != undefined ? render.properties.required : false);\n            });\n          });\n        }));\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        promises.push($.when(render.ready()).then(function () {\n          var gridPromises = [];\n\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            gridPromises.push($.when(render.cleanCellData(gridXpath.index, gridXpath.remainingXpath)));\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              gridPromises.push($.when(render.cleanCellData(indexes[j], gridXpath.remainingXpath)));\n            }\n          }\n\n          return $.when.apply($, gridPromises);\n        }));\n      }\n    });\n\n    return $.when.apply($, promises);\n  },\n  /* \r\n     *   Changes container background color\r\n     */\n  changeContainerBackground: function changeContainerBackground(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeBackgroundColor(argument);\n      container.visualChanges[\"backgroundColor\"] = argument;\n    });\n  },\n  /* \r\n     *   Shows or hides a container\r\n     */\n  changeContainerVisibility: function changeContainerVisibility(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready(true)).done(function () {\n      $.when(container.renderingDeferred).done(function () {\n        container.changeVisibility(argument);\n        container.visualChanges[\"visibility\"] = argument;\n      });\n    });\n  },\n  /* \r\n     *   Expand or collapse a group container\r\n     */\n  toogleContainer: function toogleContainer(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (/group/i.test(container.properties.type)) {\n      $.when(container.ready()).done(function () {\n        container.toogleContainer(argument);\n      });\n    }\n  },\n  /* \r\n     *   Select a determinate sub-container in a tab or an accordion\r\n     */\n  changeActiveItem: function changeActiveItem(containerId) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (container.properties.type === \"tabItem\" && container.loadingDeferred) {\n      container.loadingDeferred.resolve();\n    }\n    $.when(container.ready()).done(function () {\n      container.setAsActiveContainer();\n    });\n  },\n  /* \r\n     *   Changes container editability\r\n     */\n  changeContainerEditability: function changeContainerEditability(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeEditability(argument);\n      container.visualChanges[\"editability\"] = argument;\n    });\n  },\n  /*\r\n     *   Search for grid columns\r\n     */\n  searchGridColumns: function searchGridColumns(condition, gridColumns) {\n    var self = this;\n    var column;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      var j, lenIndex;\n      for (j = 0, lenIndex = condition.expressions.length; j < lenIndex; j++) {\n        self.searchGridColumns(condition.expressions[j], gridColumns);\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridColumns(condition.simple, gridColumns);\n\n    } else if (condition.complex) {\n      return self.searchGridColumns(condition.complex, gridColumns);\n    } else {\n      var xpath = condition.xpath || condition.renderId;\n      if (xpath) {\n        // Check in condition.xpath\n        if (xpath && xpath.indexOf(\"[]\") > 0) {\n          column = xpath.substring(xpath.indexOf(\"[]\") + 3);\n          gridColumns.push(column);\n        }\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType === 'xpath') {\n          if (condition.argument.indexOf(\"[]\") > 0) {\n            column = condition.argument.substring(condition.argument.indexOf(\"[]\") + 3);\n            gridColumns.push(column);\n          }\n        }\n      }\n    }\n\n    return null;\n  },\n  /**/\n\n  isGridComponent: function isGridComponent(render, xpath) {\n    var renderType = bizagi.util.normalizeType(render.properties.type);\n    return /grid$/i.test(renderType) && xpath.indexOf('[') >= 0;\n  },\n  /**/\n\n  isValidRender: function isValidRender(render) {\n    var notValid = [\"collectionnavigator\"];\n\n    return notValid.indexOf(render.properties.type) === -1;\n  },\n\n  /**\r\n      * Helper to override the visibility and editability in mobile devices. \r\n      * @param {} guid\r\n      * @param {} visible\r\n      * @returns {}\r\n      */\n  changeFormButtonVisibility: function changeFormButtonVisibility(guid, visible) {\n    var self = this;\n    var form = self.form;\n    var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\n    var index = buttons.findIndex(function (item) {return item.id === guid;});\n    var navigation = form.getNavigation();\n\n    if (index !== -1)\n    buttons[index].visible = visible;\n\n    form.buttons = buttons || [];\n    navigation.setNavigationButtons(form);\n  },\n\n  /**\r\n      * Create new object of visual changes\r\n      * @param element\r\n      * @param command\r\n      * @param argument\r\n      * @returns {Object}\r\n      */\n  getVisualChange: function getVisualChange(element, command, argument) {\n    return new Object({\n      element: element,\n      command: command,\n      argument: argument,\n      indexes: [],\n      xpath: \"\" });\n\n  },\n\n  /**\r\n      * Add changes to log\r\n      * @param changes\r\n      */\n  logVisualChange: function logVisualChange(changes) {\n    if (changes.indexes.length > 0) {\n      for (var i = 0; i < changes.indexes.length; i++) {\n        var cell = changes.element.getControlCell(changes.indexes[i], changes.xpath);\n        if (cell) cell.visualChanges[changes.command] = changes.argument;\n      }\n    } else {\n      changes.element.visualChanges[changes.command] = changes.argument;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a base render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.render\", {\n  postRenderTimeout: 0,\n  maxRendersPerScreen: 50,\n  rendersExecuted: 0,\n  renderOptimization: false,\n  TYPE_QUERY_FORM: \"queryForm\",\n  startOptimization: function startOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 500;\n    bizagi.rendering.render.rendersExecuted = 0;\n    // Cancelled optimization temporally, because its on experimental stage\n    bizagi.rendering.render.renderOptimization = false;\n  },\n  stopOptimization: function stopOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 0;\n    bizagi.rendering.render.rendersExecuted = 0;\n    bizagi.rendering.render.renderOptimization = false;\n  } },\n{\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.included = typeof properties.included != \"undefined\" ? bizagi.util.parseBoolean(properties.included) : false;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.displayName = properties.displayName || \"\";\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.includedInResult = typeof properties.includedInResult != \"undefined\" ? bizagi.util.parseBoolean(properties.includedInResult) : false;\n\n    var renderType = bizagi.util.normalizeType(properties.type);\n    if (/^hidden$/i.test(renderType)) {\n      properties.visible = false;\n    }\n\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.maxLength = properties.maxLength || 0;\n    properties.helpText = bizagi.util.trim(properties.helpText) || \"\";\n    properties.textFormat = properties.textFormat || {};\n    properties.valueFormat = properties.valueFormat || {};\n    properties.isHidden = typeof properties.isHidden != \"undefined\" ? bizagi.util.parseBoolean(properties.isHidden) : false;\n    properties.visible = properties.isHidden ? false : properties.visible;\n    //BUG 26867 -    Verify if the control was editable in sometime. Apply only in the column grid (canBeSent). \n    //Change the value property on changeEditability, changeEditabilityCellControl\n    properties.editabilityEnabled = false;\n\n    // Old color and background color\n    if (properties.color) {\n      properties.textFormat.color = properties.color;\n    }\n\n    if (properties.backgroundColor) {\n      properties.textFormat.backgroundColor = properties.backgroundColor;\n    }\n\n    // Non-editable fields cannot be required\n    properties.required = properties.editable ? properties.required : false;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Check contexttype\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n\n    // Save original properties\n    self.originalProperties = {\n      textFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      valueFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      visible: properties.visible,\n      editable: properties.editable,\n      required: properties.required,\n      labelAlign: properties.labelAlign,\n      valueAlign: properties.valueAlign };\n\n\n    // Create value property\n    self.value = typeof properties.value !== \"undefined\" ? properties.value : null;\n\n    // Register original value property\n    self.properties.originalValue = self.value;\n    self.properties.previousValue = self.value;\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n  /*\r\n     *   Calculate aligns, display types, rtl and widths\r\n     */\n  calculateInitialLayoutProperties: function calculateInitialLayoutProperties() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set visual defaults\n    properties.displayType = properties.displayType || \"normal\";\n    properties.labelAlign = properties.labelAlign || self.getDefaultLabelAlign(properties.displayType);\n    properties.valueAlign = properties.valueAlign || self.getDefaultValueAlign(properties.displayType);\n\n    // Check rtl orientation\n    if (properties.orientation === \"rtl\") {\n      properties.labelAlign = self.getRTLAlign(properties.labelAlign);\n      properties.valueAlign = self.getRTLAlign(properties.valueAlign);\n    }\n\n    // Calculate render with\n    var renderWidth = self.calculateRenderWidth(properties.labelWidth, properties.valueWidth, properties.displayType);\n    properties.labelWidth = renderWidth.label;\n    properties.valueWidth = renderWidth.control;\n\n    if (properties.layoutType === \"percentage\") {\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.labelWidth == 0) {\n      properties.displayType = \"value\";\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.valueWidth == 0) {\n      properties.displayType = \"label\";\n    }\n\n    if (properties.type === \"userfield\") {\n      if ([\"both\", \"normal\", \"reversed\"].includes(properties.displayType)) {\n        properties.valueWidth = properties.valueWidth || 50;\n        properties.labelWidth = properties.labelWidth || 50;\n      } else if (properties.displayType === \"vertical\") {\n        properties.valueWidth = 100;\n        properties.labelWidth = 100;\n      } else if (properties.displayType === \"label\") {\n        properties.valueWidth = 0;\n        properties.labelWidth = 100;\n      } else {\n        properties.valueWidth = 100;\n        properties.labelWidth = 0;\n      }\n    }\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_RENDER;\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  render: function render(renderTemplateName) {\n    return this.renderElement(renderTemplateName);\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  renderElement: function renderElement(renderTemplateName) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    renderTemplateName = renderTemplateName || \"render\";\n    var renderTemplate = self.renderFactory.getTemplate(renderTemplateName);\n\n    // Resolve render label\n    var label = properties.displayName;\n    if (typeof label == \"string\") {\n      // Replace line breaks for html line breaks\n      label = bizagi.util.encodeString(label);\n    }\n\n    var isFullRender = bizagi.util.detectDevice() !== \"desktop\" && (properties.type === \"association\" || properties.type === \"uploadecm\" || (properties.type === \"actionLauncher\" || properties.type === \"polymorphicLauncher\") && bizagi.util.isTabletDevice() || properties.type === \"grid\" && !bizagi.util.isTabletDevice());\n    var labelWidth = parseFloat(properties.labelWidth);\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      helpText: properties.helpText,\n      editable: properties.editable,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      xpath: properties.xpath,\n      tag: properties.tag,\n      displayType: properties.displayType,\n      displayOptionClass: self.getDisplayOptionClass(properties.displayType),\n      labelAlignClass: self.getAlignClass(properties.labelAlign),\n      valueAlignClass: self.getAlignClass(properties.valueAlign),\n      flexAlignClass: bizagi.util.mapAlignClassName(properties.columnAlign),\n      labelWidth: labelWidth,\n      stringLabelWidth: labelWidth + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      valueWidth: parseFloat(properties.valueWidth),\n      stringValueWidth: parseFloat(properties.valueWidth) + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      layoutType: properties.layoutType,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      includedInResult: properties.includedInResult,\n      included: properties.included,\n      type: properties.type,\n      showFullRender: isFullRender,\n      required: properties.required });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n  /*\r\n     *   Returns the resolved result from a promise when the promise has been executed already\r\n     */\n  resolveResult: function resolveResult(promise) {\n    return bizagi.resolveResult(promise);\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred) {\n      return false;\n    }\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Renders the control html\r\n     */\n  internalRenderControl: function internalRenderControl() {\n    var self = this;\n    var properties = self.properties;\n    self.control = null;\n\n    if (self.renderFactory.printVersion) {\n      properties.editable = false;\n      return self.renderControl();\n    } else if (properties.editable) {\n      return self.renderControl();\n    }\n\n    return self.renderReadOnly();\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRenderElement: function postRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set element variable\n    self.element = element;\n\n    if (properties.submitOnChange)\n    self.configureSubmitOnChange();\n\n    // Process internal layout\n    isLabelFormat = true;\n\n    var executePostRender = function executePostRender(_element) {\n      if (bizagi.rendering.render.renderOptimization &&\n      bizagi.rendering.render.rendersExecuted > bizagi.rendering.render.maxRendersPerScreen) {\n\n        // Execute post-render control\n        var timeOutRender = setTimeout(function () {\n          self.internalPostRender(_element);\n          bizagi.rendering.render.postRenderTimeout += 50;\n          clearTimeout(timeOutRender);\n        }, bizagi.rendering.render.postRenderTimeout);\n\n      } else {\n        self.internalPostRender(_element);\n      }\n      bizagi.rendering.render.rendersExecuted++;\n    };\n\n    if (self.asyncRenderDeferred) {\n      // Wait for async result\n      $.when(self.asyncRenderDeferred).\n      done(function (html) {\n        var control = self.getControl();\n        if (typeof self.emptyControlByAsyncRenderDeferred == \"function\") {\n          self.emptyControlByAsyncRenderDeferred();\n        }\n        control.append(html);\n\n        // Execute post-render control\n        executePostRender(element);\n        self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n      });\n    } else {\n      // Execute post-render control\n      executePostRender(element);\n    }\n  },\n  /*\r\n     *   Executes the post render handlers\r\n     */\n  internalPostRender: function internalPostRender(element) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    self.control = self.getControl();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred) {\n      self.renderingDeferred.resolve();\n    }\n\n    // Execute post-renders\n    if (properties.editable) {\n      // Post-render editable version\n      if (self.renderFactory.printVersion && self.postRenderPrintVersion) {\n        self.postRenderPrintVersion();\n      } else {\n        self.postRender();\n      }\n\n    } else {\n      // Post-render readonly version\n      self.postRenderReadOnly(element);\n    }\n\n    // Perform execution mode methods\n    if (mode == \"execution\") {\n      self.performExecutionModeMethods();\n    } else {\n      self.performDesignModeMethods();\n    }\n\n    self.processLayout(isLabelFormat, self.properties.textFormat || {});\n    self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n  },\n  /*\r\n     *   Execute runtime only methods\r\n     */\n  performExecutionModeMethods: function performExecutionModeMethods() {\n    var self = this;\n    var properties = self.properties;\n    if (self.getFormType() == self.Class.TYPE_QUERY_FORM) {\n      self.configureHandlersQueryForm();\n    }\n\n    // Apply handlers\n    if (properties.editable) {\n      self.configureHandlers();\n    } else {\n      self.configureHandlersReadOnly();\n    }\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /**\r\n      * Execute design only methods\r\n      */\n  performDesignModeMethods: function performDesignModeMethods() {\n    var self = this;\n\n    // Execute custom code for each render\n    self.configureDesignView();\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /*\r\n     *   Replaces a {{control}} string in the specified element\r\n     */\n  replaceControlHtml: function replaceControlHtml(html, replace) {\n    html = html || \"\";\n    replace = replace || \"\";\n    return html.replaceFirstWithoutPatterns(\"{{control}}\", replace);\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.element)) {\n      bizagi.log(\" render hasn't been rendered!\", this, \"error\");\n    }\n\n    return this.element;\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    var properties = self.properties;\n    self.internalSetInitialValueFlag = true;\n\n    // Set the initial value\n    if (properties.editable) {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    } else {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    }\n    self.internalSetInitialValueFlag = false;\n  },\n  /*\r\n     * Public method to determine if a value is valid or not\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var inlineAdd = self.grid && self.grid.properties && self.grid.properties.inlineAdd;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false && !inlineAdd) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (bizagi.util.parseBoolean(properties.required)) {\n      var form = self.getFormContainer();\n      var hasValue = false;\n      var renders = self.grid ? [self] : form.getRenders(properties.xpath);\n      var isQueryForm = /^query/i.test(properties.type);\n\n      renders.filter(function (render) {\n        return render.properties.id == properties.id;\n      }).forEach(function (render) {\n        if (render.hasValue() && (render.properties.editable || inlineAdd)) {\n          hasValue = true;\n          return false;\n        }\n      });\n\n      if (!hasValue && !self.properties.isClone) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        var messageData = { xpath: properties.xpath, message: message };\n\n        if (isQueryForm) {\n          messageData = $.extend({}, messageData, {\n            id: properties.id,\n            isQuery: isQueryForm });\n\n        }\n\n        invalidElements.push(messageData);\n        return false;\n      }\n    }\n\n    // Check retypes\n    if (properties.retype == \"duplicate\") {\n      // Don't process cloned renders, just originals\n      if (self.cloneRender) {\n        if (self.cloneRender.getValue() != self.getValue()) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    } else if (properties.retype == \"double\") {\n      var control = $(\"input\", self.element);\n\n      //Waits until the control has the second value written\n      if (control && control.data(\"oldValue\")) {\n        if (control.val() === \"\") {\n\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({\n            xpath: properties.xpath,\n            message: message });\n\n\n          return false;\n        } else if (control.val() != control.data(\"oldValue\")) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n\n          return false;\n        }\n      }\n    }\n\n    // Check maxlength\n    var columnEditable = self.grid && self.grid.getColumn ? self.grid.getColumn(self.properties.xpath).properties.editable : true;\n    if (properties.type !== \"userPassword\" && properties.maxLength !== undefined && properties.maxLength > 0 && bizagi.util.isNumeric(properties.maxLength)) {\n      if (columnEditable || !columnEditable && self.controlValueIsChanged()) {\n        var maxLength = new Number(properties.maxLength);\n        var value = self.getValue();\n\n        if (value && value.toString().length > maxLength) {\n          message = self.getResource(\"render-text-maxLength-error\").replaceAll(\"#maxLength#\", maxLength);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    // Next line decides if only spaces are accepted as valid texts or not. Anyway the spaces are still saved as self.value has not changed\n    var value = self.getValue();\n\n    if (value && self.properties.type === \"text\") {\n      value = typeof value === \"string\" ? value.trim() : value;\n    }\n\n    return !bizagi.util.isEmpty(value);\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n     */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Method to process the render the layout\r\n     */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.getControl() == null) return;\n\n    // Set customizations\n    format = format || {};\n\n    if (format.color) {\n      self.changeColor(format.color, isLabelFormat);\n    }\n    if (format.background) {\n      self.changeBackgroundColor(format.background);\n    }\n    //if bold is true in modeler, we receive nothing in execution (!formal.bold)\n    if (format.bold || !format.bold || !isLabelFormat) {\n      self.changeFontBold(format.bold, isLabelFormat);\n    }\n    if (format.italic) {\n      self.changeFontItalic(format.italic, isLabelFormat);\n    }\n    if (format.underline) {\n      self.changeFontUnderline(format.underline, isLabelFormat);\n    }\n    if (format.strikethru) {\n      self.changeFontStrikethru(format.strikethru, isLabelFormat);\n    }\n    if (format.size) {\n      self.changeFontSize(format.size, isLabelFormat);\n    }\n\n    // Set required and visiblity\n    properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\n    var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\n    if (properties.required) {\n      self.changeRequired(properties.required);\n    }\n    if (!visible) {\n      if (self.grid) {\n        self.changeCellVisibility(visible);\n      } else {\n        self.changeVisibility(visible);\n      }\n    }\n  },\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (!bizagi.util.identicalObjects(value, self.value)) {\n      // set previous value\n      self.properties.previousValue = self.properties.originalValue = self.value;\n\n      // Change internal value\n      self.value = self.properties.value = value;\n      if (self.properties.required && self.getMode() == \"execution\") {\n\n        if (self.checkRequired([])) {\n          self.changeRequiredLabel(false);\n        } else {\n          self.changeRequiredLabel(true);\n        }\n      }\n\n      // Trigger events\n      if (triggerEvents && !self.internalSetInitialValueFlag) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (!self.hasValue()) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        return false;\n      }\n    }\n    return true;\n  },\n\n  validateInputRetype: function validateInputRetype() {\n    var self = this;\n    if (self.properties.retype && self.cloneRender) {\n      return self.getValue() == self.cloneRender.getValue();\n    }\n    return true;\n  },\n\n  /*\r\n     *   Triggers the render change event\r\n     */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    params.changed = params.changed !== undefined ? params.changed : true;\n    self.triggerHandler(\"renderchange\", { render: self, changed: params.changed });\n  },\n  /*\r\n     *   Triggers the render validate event\r\n     */\n  triggerRenderValidate: function triggerRenderValidate() {\n    var self = this;\n    self.triggerHandler(\"rendervalidate\", { render: self });\n  },\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    // Set internal value\n    self.setValue(value, false);\n\n    if (!self.properties.editable && (self.properties.display !== \"check\" || self.properties.display === \"check\" && bizagi.override.enableCheck === true)) {\n      // Render as simple value\n      var displayValue = self.getDisplayValue(value);\n      if (typeof displayValue == \"string\" || typeof displayValue == \"number\") {\n        displayValue = bizagi.util.sanitizeHTML(displayValue);\n        $(control).html(\"<label class='readonly-control'>\" + displayValue + \"</label>\");\n      }\n    }\n  },\n  /*\r\n     *   Returns the internal value\r\n     */\n  getValue: function getValue() {\n    return this.value;\n  },\n  /*\r\n     *   Returns the value to display, ex. non-editable renders\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    return this.getValue();\n  },\n  /*\r\n     *   Template method to get the label element\r\n     */\n  getLabel: function getLabel() {\n    bizagi.util.mustImplement(\"getLabel\");\n  },\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    bizagi.util.mustImplement(\"getControl\");\n  },\n  /*\r\n     *   Template method to get the control filler element\r\n     */\n  getControlFiller: function getControlFiller() {\n    bizagi.util.mustImplement(\"getControlFiller\");\n  },\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n  },\n  /*\r\n     *   Adds a validation message to the render\r\n     */\n  setValidationMessage: function setValidationMessage(message) {\n    this.validationMessage = message;\n  },\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var result = this.getValue();\n    var readOnlyValue = \"\";\n\n    if (bizagi.util.isObject(result) && typeof result.value !== \"undefined\") {\n      readOnlyValue = bizagi.util.sanitizeHTML(result.value);\n    } else if (!bizagi.util.isEmpty(result)) {\n      if (bizagi.util.isString(result)) {\n        readOnlyValue = bizagi.util.encodeHtmlText(result);\n      } else {\n        readOnlyValue = result;\n      }\n    }\n\n    return readOnlyValue;\n  },\n\n  /*\r\n     *  Method to render print version\r\n     */\n  postRenderPrintVersion: function postRenderPrintVersion() {\n  },\n\n  /*\r\n     *   Customizes render display type with custom css classes\r\n     */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    this.properties.displayType = displayType;\n  },\n\n  /*\r\n     *   Return the right display option class\r\n     */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label align\r\n     */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    this.properties.labelAlign = alignType;\n  },\n\n  /*\r\n     *   Customizes render value align\r\n     */\n  changeValueAlign: function changeValueAlign(alignType) {\n    this.properties.valueAlign = alignType;\n  },\n\n  /*\r\n     *   Return the right align class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label and value width\r\n     */\n  customizeRenderWidth: function customizeRenderWidth() {\n  },\n\n  /* Customizes render color*/\n  changeColor: function changeColor(color, isLabelFormat) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    if (control && label) {\n      if (color != 'none') {\n        // Hide - show the render\n        if (self.properties.displayType === \"value\" || !isLabelFormat) {\n          self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"color\", color, \"!important\");\n          });\n        } else {\n          self.element.each(function () {\n            this.style.setProperty('color', color, 'important');\n          });\n\n          if (self.properties.type == \"grid\") {\n            self.getControl().find(\".bz-mobile-grid__header-title\").each(function () {\n              this.style.setProperty('color', color, 'important');\n            });\n          }\n\n          self.getLabel().find(\"label\").css(\"color\", color, \"!important\");\n          if (self.properties.editable === false) {\n            self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n            self.getElementsToStylize($(\"label\", self.getControl()).css(\"color\", color, \"!important\"));\n          }\n        }\n      } else {\n        self.element.css(\"color\", \"\");\n        self.getLabel().find(\"label\").css(\"color\", \"\");\n        self.getControl().css(\"color\", \"\");\n\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          self.getElementsToStylize(element).css(\"color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Customizes render background color*/\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n\n    if (control && label) {\n      if (color != 'none') {\n        self.element.each(function () {\n          this.style.setProperty('background-color', color, 'important');\n        });\n\n        if (typeof label.find('label').style !== \"undefined\") {\n          self.getLabel().find(\"label\").style(\"background-color\", color, \"important\");\n        } else {\n          self.getLabel().find(\"label\").css(\"background-color\", color, \"!important\");\n        }\n\n        var currentStyle = self.getLabel().attr(\"style\");\n        currentStyle += \"; background-color:\" + color + \"!important\";\n        self.getLabel().attr(\"style\", currentStyle);\n      } else {\n        self.element.css(\"background-color\", \"\");\n        self.getLabel().find(\"label\").css(\"background-color\", \"\");\n        self.getControl().css(\"background-color\", \"\");\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          $(element).css(\"background-color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Returns the formatting label to be used for bold, italic, underline, strikethrough and size*/\n  getFormattingLabel: function getFormattingLabel() {\n    var self = this;\n    return self.getLabel().find(\"label\");\n  },\n\n  /* Customizes the font weight */\n  changeFontBold: function changeFontBold(bold, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(bold) != false && isLabelFormat) {\n      self.getFormattingLabel().css(\"font-weight\", \"bold\", \"!important\");\n      self.getControl().each(function (i, element) {\n        $(element).css(\"font-weight\", \"bold\", \"!important\");\n      });\n\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"font-weight\", \"normal\", \"!important\");\n    }\n    if (!isLabelFormat) {\n      if (bizagi.util.parseBoolean(bold) == true) {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"bold\", \"!important\");\n        });\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"normal\", \"!important\");\n        });\n        self.getControl().css(\"font-weight\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n    var result = true;\n    var renderType = bizagi.util.normalizeType(properties.type);\n    var form = self.getFormContainer();\n\n    //To force to send value when control's retype is duplicate, fixed to start forms.\n    if (properties.retype === \"duplicate\" && self.cloneRender && form.isStartForm()) return true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (renderType === \"grid\" && self.ready().state() === \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n      if (value && value.length !== undefined) {\n        value = value[0];\n      }\n      if (compareValue && compareValue.length !== undefined) {\n        compareValue = compareValue[0];\n      }\n      if (baseValue && baseValue.length !== undefined) {\n        baseValue = baseValue[0];\n      }\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      baseValue = baseValue && baseValue.id ? baseValue.id : baseValue;\n      if (typeof baseValue != \"undefined\" && baseValue != null) {\n        result = compareValue == value && compareValue != baseValue ? false : true;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"boolean\" || renderType === \"queryBoolean\" || renderType === \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (renderType === \"searchNumber\") {\n      result = !!value;\n    } else if (renderType === \"number\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"text\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"date\") {\n      if (!compareValue && !value) {\n        result = false;\n      } else {\n        if (!properties.showTime) {\n          value = bizagi.util.getNormalizedDate(value, properties.fullFormat);\n          compareValue = bizagi.util.getNormalizedDate(compareValue, properties.fullFormat);\n        }\n\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"actionLauncher\") {\n      //Object must be an array\n      result = false;\n      var compareValueObj = [];\n      try {\n        if (typeof compareValue === \"string\") {\n          compareValueObj = JSON.parse(compareValue);\n        } else {\n          compareValueObj = compareValue;\n        }\n      } catch (e) {\n      }\n\n      var _findAction = function _findAction(guid, targetObj) {\n        guid = guid || \"\";\n        targetObj = targetObj || [];\n        var result = false;\n        for (var i = 0, l = targetObj.length; i < l; i++) {\n          if (targetObj[i].guidAction == guid) {\n            result = true;\n            break;\n          }\n        }\n        return result;\n      };\n\n      if (compareValueObj.length == value.length) {\n        for (var i = 0, l = compareValueObj.length; i < l; i++) {\n          if (!_findAction(compareValueObj[i].guidAction, value)) {\n            result = true;\n          }\n        }\n\n      } else {\n        result = true;\n      }\n    } else if (renderType === \"polymorphicLauncher\" || renderType === \"entityTemplate\") {\n      //Object must be an array\n      if (compareValue.length != value.length) {\n        result = true;\n      } else {\n        result = JSON.encode(value) == JSON.encode(compareValue) ? false : true;\n      }\n    } else if (renderType === \"searchList\") {\n      var objectValue = {};\n      try {\n        objectValue = JSON.parse(value);\n      } catch (e) {\n        console.log(\"Error when detect change value on searchList control\");\n      }\n      result = JSON.encode(compareValue) == JSON.encode(objectValue.value) ? false : true;\n    } else if ([\"signature\", \"image\"].includes(renderType)) {\n      // When a image/signature is uploaded or removed from a Form,\n      // the change is saved automatically to the activity's scope\n      result = false;\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  },\n\n  /* Customizes the font italic style */\n  changeFontItalic: function changeFontItalic(italic, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"italic\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"italic\", \"!important\");\n        }\n      } else {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"normal\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"normal\", \"!important\");\n        }\n      }\n    } else {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n      } else {\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  /* Customizes the font underline */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var strikethru = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(underline) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", strikethru + \"underline\", \"!important\");\n      self.getControl().each(function (i, element) {\n        self.getElementsToStylize(element).css(\"text-decoration\", strikethru + \"underline\");\n      });\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", strikethru, \"!important\");\n    }\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(underline) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n        }\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n        });\n      }\n    }\n  },\n\n  /* Customizes the font Strikethrough property */\n  changeFontStrikethru: function changeFontStrikethru(strikethru, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var underline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueunderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(strikethru) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", underline + \"line-through\", \"!important\");\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", underline, \"!important\");\n    }\n\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(strikethru) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n        }\n      } else {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline, \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline, \"!important\");\n        }\n      }\n    }\n  },\n\n  /* Customizes the font size property */\n  changeFontSize: function changeFontSize(size, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (size != \"0\") {\n      var label = self.getFormattingLabel();\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      if (isLabelFormat) {\n        label.css(\"font-size\", newFontSize, \"!important\");\n      }\n      if (self.properties.displayType == \"value\" || !isLabelFormat) {\n        var control = self.getControl();\n        if (_typeof(control.children()) == \"object\" && control.children().length > 0) {\n          self.getElementsToStylize(control.children()).css(\"font-size\", newFontSize, \"!important\");\n        } else {\n          self.getElementsToStylize(control).css(\"font-size\", newFontSize, \"!important\");\n          // Next line applies to Cascading combo and combo in order to increase the control space with large value fonts\n          if (self.properties.type.indexOf(\"ombo\") != -1 && size > 4) (\".ui-selectmenu\", control).children(0).height(2 * size + 20);\n        }\n\n        self.getElementsToStylize(control.find(\".ui-bizagi-render-date\")).css(\"line-height\", \"normal\");\n      }\n    }\n  },\n\n  /**\r\n      * in mobiles, don't apply styles to icon's elements\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(context);\n  },\n\n  /* Changes the render visibility*/\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(argument) == true) {\n      if (properties.type !== \"hidden\") {\n        self.element.show();\n        self.element.css(\"display\", \"\");\n\n        if (properties.required) {\n          if (!self.hasValue()) {\n            self.changeRequiredLabel(true);\n          }\n        }\n      }\n    } else if (self.element) {\n      self.element.hide();\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n  /* Changes the render editability*/\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Renders again\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n      $.when(self.internalRenderControl()).done(function (html) {\n        if (typeof self.emptyControlByChangeEditability == \"function\")\n        self.emptyControlByChangeEditability();\n        if (!self.asyncRenderDeferred)\n        control.append(html);\n        self.postRenderElement(self.element);\n      });\n    }\n  },\n\n  /**\r\n      * Change cell editability and attach bindings\r\n      * @param argument\r\n      * @param key\r\n      * @param xpath\r\n      */\n  changeEditabilityCellControl: function changeEditabilityCellControl(argument, key, xpath) {\n    var self = this;\n    var properties = self.properties;\n    var renderColumn = self.grid.getColumn(xpath);\n    var decorated = renderColumn.getDecorated(key);\n\n    // Renders again\n    properties.editable = argument === \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Render cell control\n    self.internalRenderCellControl(properties.editable, key, renderColumn, decorated);\n  },\n\n  /**\r\n      * Render cell control by command action\r\n      * @param editable\r\n      * @param key\r\n      * @param renderColumn\r\n      * @param decorated\r\n      */\n  internalRenderCellControl: function internalRenderCellControl(editable, key, renderColumn, decorated) {\n    var self = this;\n    var control = self.getControl();\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n\n      $.when(self.internalRenderControl()).done(function (html) {\n\n        if (!self.asyncRenderDeferred) {\n          control.append(html);\n        }\n\n        self.postRenderElement(self.element);\n\n        if (editable) {\n\n          renderColumn.bind(\"rendered\", function () {\n            renderColumn.readyDeferred.resolve();\n          });\n\n          decorated.unbind(\"renderchange\");\n\n          // If the render changes set the flag on\n          decorated.bind(\"renderchange\", function (render, args) {\n            renderColumn.changed = true;\n            self.grid.onCellChange(renderColumn, null, key, args);\n          });\n\n        }\n      });\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (self.getMode() == \"execution\" && self.checkRequired([])) {\n      self.changeRequiredLabel(false);\n    } else if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * Does't change internal value of control, if you need it\r\n      * please use changeRequired method\r\n      *\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /*\r\n     *   Refresh the control with a new data\r\n     */\n  refreshControl: function refreshControl(args) {\n    var self = this;\n    var properties = self.properties;\n    var originalValue = self.value;\n    var form = self.getFormContainer();\n    var idForm = form.properties.id || \"\";\n\n    args = args || {};\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the ajax service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      idForm: idForm })).\n    pipe(function (data) {\n      if (self.grid && bizagi.override.restoreAppearanceAfterRefresh) {\n        self.saveGridChildrenVisualChanges();\n      }\n      // Clear variables\n      self.control = self.controlFiller = self.label = null;\n\n      // Update properties data\n      var currentElement = self.element;\n      self.initializeData(data.render);\n\n      // Render the control again\n      return $.when(self.render()).pipe(function (html) {\n        var result = $(html);\n        //Dont remove unused rendered var\n        var rendered = self.postRenderElement(result);\n        self.properties.originalValue = self.value;\n        return result;\n      }).pipe(function (result) {\n\n        // When the content has been post-renderized, replace it\n        currentElement.replaceWith(result);\n\n        // Prevent multiple refresh on grid\n        if (!self.grid) {\n          self.triggerRenderChange({ changed: false });\n        }\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          if (self.grid) {\n            self.restoreGridChildrenVisualChanges();\n            self.restoreGridAppearance();\n          } else {\n            self.restoreAppearance();\n          }\n        }\n\n        // Execute personalized stuff before to refresh it\n        self.afterToRefresh();\n      });\n\n    }).fail(function (message) {\n      var message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the control with a new data\r\n      */\n  refreshDesignControl: function refreshDesignControl(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Clear variables\n    self.control = self.controlFiller = self.label = null;\n\n    $.extend(data.render.properties, {\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"form\",\n      idPageCache: properties.idPageCache });\n\n\n    // Update properties data\n    var currentElement = self.element;\n    self.initializeData(data.render);\n\n    // Render the control again\n    return $.when(self.render()).pipe(function (html) {\n      var result = $(html);\n      //Dont remove unused rendered var\n      var rendered = self.postRenderElement(result);\n      self.properties.originalValue = self.value;\n      return result;\n    }).pipe(function (result) {\n      // When the content has been post-renderized, replace it\n      currentElement.replaceWith(result);\n      self.triggerRenderChange();\n\n      // Execute personalized stuff before to refresh it\n      self.beforeToRefresh();\n    });\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.setValue(\"\");\n    self.clearDisplayValue();\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"input\");\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else if (self.properties.editable === false) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  /*\r\n     *   Updates original value for some comparisons\r\n     */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value;\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          renderValues[properties.xpath] = value;\n        } else if (value === \"\" || value === null) {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n\n    //Validate if the input has a retype configured and check that both values matches, otherwise delete the original value\n    if (!self.validateInputRetype()) {\n      renderValues[properties.xpath] = \"\";\n    }\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      result.push(true);\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *  Configure additional Handlers for queryForm type\r\n     */\n  configureHandlersQueryForm: function configureHandlersQueryForm() {\n    var self = this;\n    var checkIncluded = self.element.find(\".ui-bizagi-render-control-included\");\n    checkIncluded.change(function () {\n      self.properties.included = $(this).is(\":checked\");\n    });\n  },\n  getRenderId: function getRenderId() {\n    var self = this;\n\n    return bizagi.util.tryCatch(\n    function () {return self.properties.id;},\n    null);\n\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var queryValue = null;\n    if (!bizagi.util.isEmpty(xpath)) {\n      if (value !== null && typeof value !== \"undefined\") {\n        var isObject = typeof value.id !== \"undefined\";\n        if (isObject) {\n          queryValue = !bizagi.util.isEmpty(value.id) ? [value] : null;\n        } else {\n          queryValue = value !== \"\" ? value : null;\n        }\n      }\n      if (queryValue !== null || properties.included) {\n        var searchType = (self.properties.typeSearch || self.properties.rangeQuery || \"NONE\").toUpperCase();\n        var newParameter = {\n          \"value\": queryValue,\n          \"included\": self.properties.included,\n          \"xpath\": properties.xpath,\n          \"searchType\": searchType,\n          \"orderType\": \"NONE\",\n          \"renderId\": self.getRenderId() };\n\n\n        if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n          newParameter.displayXpath = properties.displayXpath;\n        }\n\n        renderValues.push(newParameter);\n      }\n    }\n  },\n\n  /*\r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this,force;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n    var editable = bizagi.util.parseBoolean(properties.editable) || bizagi.util.parseBoolean(properties.editabilityEnabled);\n\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n\n    // The render can be sent if it is editable and is not \"display only\"\n    if (!displayOnly && editable) {\n      return true;\n    }\n\n    if (properties.xpath) {\n      var form = self.getFormContainer();\n      if (form.getRenders(properties.xpath).length == 1) {\n        force = $.forceCollectData ? $.forceCollectData.toString() : false;\n        $.forceCollectData = force ? undefined : $.forceCollectData;\n        if (self.controlValueIsChanged()) {\n          $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n          return true;\n        }\n        $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n      }\n    }\n\n    return false;\n  },\n  /*\r\n     *  Method to determine if the render value can be sent to search\r\n     */\n  canBeSentQueryForm: function canBeSentQueryForm() {\n    var self = this,force;\n    var properties = self.properties;\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n    return true;\n  },\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus(time) {\n    var self = this;\n\n    // Focus is only allowed when the render is visible\n    if (!self.properties.visible) return;\n\n    // Call base\n    this._super();\n    var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n\n    // Configures effect\n    var effect = function effect() {\n      var control = self.getControl();\n      var defaultControl = self.properties.type != \"grid\" ? $(\"input, select, option, textarea\", control) : $(\"input, select, option, textarea\", control).first();\n      if (defaultControl.length > 0) {\n\n        // Focus control\n        $.each(defaultControl, function (i) {\n          var innerControl = defaultControl[i];\n          if ($(innerControl).attr(\"type\") != \"hidden\" && $(innerControl).css(\"display\") != \"none\" && $(innerControl).css(\"visibility\") != \"hidden\") {\n\n            try {\n              if (!bizagi.util.isIE()) {\n                bizagi.util.autoScrollBottom(layout);\n              }\n              innerControl.focus();\n            } catch (e) {\n            }\n          }\n        });\n      }\n    };\n\n    // Wait until the render is ready to apply the focus effect\n    $.when(self.ready()).\n    done(function () {\n      // Run effect\n      if (time > 0) {\n        var timeOutEffect = setTimeout(function () {\n          effect();\n          clearTimeout(timeOutEffect);\n        }, time);\n      } else {\n        effect();\n      }\n    });\n  },\n\n  /*\r\n     *   Resolves default align for each display type\r\n     */\n  getDefaultLabelAlign: function getDefaultLabelAlign(displayType) {\n    return \"default\";\n  },\n\n  /*\r\n     *   Resolves default value align for each display type\r\n     */\n  getDefaultValueAlign: function getDefaultValueAlign(displayType) {\n    return \"default\";\n  },\n  /*\r\n     *   Transform the align type when using RTL orientation\r\n     */\n  getRTLAlign: function getRTLAlign(align) {\n    /* if (align === \"default\"){ \r\n                                                return \"right\";\r\n                                            } */\n    return align;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n    var properties = self.properties;\n    var xpath = \"\";\n\n    if (!properties.editable) return;\n\n    // Build action\n    properties.dependencies = properties.dependencies || 'all';\n\n    if (properties.xpath) {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.xpath;\n      } else {\n        xpath = properties.xpath;\n      }\n    } else {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.id;\n      } else {\n        xpath = properties.id;\n      }\n    }\n\n    var action = {\n      \"conditions\": {\n        \"expressions\": [\n        {\n          \"simple\": {\n            \"xpath\": xpath,\n            \"renderId\": properties.id,\n            \"operator\": \"changes\",\n            \"argumentType\": \"const\" } }] },\n\n\n\n\n      \"commands\": [\n      {\n        \"xpath\": xpath,\n        \"command\": 'submit-value',\n        \"argument\": properties.dependencies }],\n\n\n      \"dependencies\": [xpath],\n      \"elseCommands\": [] };\n\n\n    if (properties.submitOnChangexpathContext && self.grid) {\n      action.conditions.expressions[0].simple.containerId = self.grid.properties.id;\n    }\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n\n  /*\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  submitOnChange: function submitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var defer = $.Deferred();\n\n    // Add context parameter\n    if (self.properties.contexttype != \"\" && data) {\n      data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = self.properties.contexttype;\n    }\n\n    $.when(self.isReadyToSave()).done(function () {\n      self.internalSubmitOnChange(data, bRefreshForm, notCollect).done(function () {\n        defer.resolve();\n      }).fail(function () {\n        defer.reject();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  getCacheIdCase: function getCacheIdCase() {\n    var self = this;\n    var idCase = self.getParams().idCase;\n\n    if (bizagi.cache === undefined) {\n      bizagi.cache = {};\n      bizagi.cache.idCaseObject = {\n        idCase: idCase !== undefined ? idCase : bizagi.cache.idCase !== undefined ? bizagi.cache.idCase : undefined };\n\n    } else {\n      if (idCase !== undefined && bizagi.cache.idCaseObject !== undefined) {\n        bizagi.cache.idCaseObject.idCase = idCase;\n      } else {\n        if (idCase !== undefined && bizagi.cache.idCaseObject === undefined) {\n          bizagi.cache.idCaseObject = {};\n          bizagi.cache.idCaseObject.idCase = idCase;\n        }\n      }\n    }\n\n    if (idCase === undefined) {\n      if (bizagi.cache.idCaseObject === undefined) {\n        idCase = undefined;\n      } else {\n        idCase = bizagi.cache.idCaseObject.idCase;\n      }\n    } else {\n      idCase = idCase;\n    }\n\n    return idCase;\n  },\n  /*\r\n     *   Internal method\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var parameters = {\n      data: data,\n      bRefreshForm: bRefreshForm,\n      notCollect: notCollect,\n      properties: {\n        idCase: self.getCacheIdCase(),\n        id: properties.id,\n        xpath: properties.xpath,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype } };\n\n\n\n    return form.internalSubmitOnChange(parameters);\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n    return null;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n    return null;\n  },\n  /*\r\n     *   Calculates render label and value width\r\n     */\n  calculateRenderWidth: function calculateRenderWidth(labelWidth, valueWidth, displayType) {\n    var self = this;\n    // Read values\n    // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\n    if (valueWidth == \"100\" && typeof labelWidth === \"undefined\") {\n      labelWidth = \"0\";\n    } else {\n      labelWidth = labelWidth ? labelWidth != \"0\" ? labelWidth : \"50\" : \"50%\";\n    }\n    valueWidth = valueWidth ? valueWidth != \"0\" ? valueWidth : \"50\" : \"50%\";\n\n    if (displayType == \"normal\" || displayType == \"both\" || displayType == \"reversed\") {\n\n      // Special case with lower values, so they want both fields in \"auto\" width\n      if (labelWidth && bizagi.util.percent2Number(labelWidth) < 5 &&\n      valueWidth && bizagi.util.percent2Number(valueWidth) < 5) {\n        return { label: 0, control: 100 };\n      }\n      // Normalize percentages\n      if (labelWidth && !valueWidth) {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = 100 - labelWidth;\n\n      } else if (!labelWidth && valueWidth) {\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n        labelWidth = 100 - valueWidth;\n      } else {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n\n        // Check 100% percentage\n        if (labelWidth + valueWidth != 100 && typeof self.properties != \"undefined\" && self.properties.layoutType != \"pixels\") {\n          valueWidth = 100 - labelWidth;\n        }\n      }\n    } else {\n      labelWidth = 100;\n      valueWidth = 100;\n    }\n\n    return { label: labelWidth, control: valueWidth };\n  },\n  /*\r\n     *   Get param value idCase\r\n     */\n  getIdCase: function getIdCase() {\n    var self = this;\n    return self.getFormContainer().params.idCase || bizagi.context.idCase;\n  },\n  /*\r\n     *   Get param value idWorkitem\r\n     */\n  getIdWorkitem: function getIdWorkitem() {\n    var self = this;\n    return self.getFormContainer().params.idWorkitem || bizagi.context.idWorkitem;\n  },\n  /*\r\n     *   Get param value idTask\r\n     */\n  getidTask: function getidTask() {\n    var self = this;\n    return self.getFormContainer().params.idTask || bizagi.context.idTask;\n  },\n  /*\r\n     *   Get param value sessionId\r\n     */\n  getSessionId: function getSessionId() {\n    var self = this;\n    return self.getFormContainer().properties.sessionId;\n  },\n\n  /*\r\n     *   CELL STUFF\r\n     *   TODO: Move to other place\r\n     */\n\n  /* Customizes cell color*/\n  changeCellColor: function changeCellColor(color) {\n    var self = this;\n    var control = self.getControl();\n    if (control) {\n      if (color != 'none') {\n        control.css(\"color\", color);\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", color);\n        });\n      } else {\n        control.css(\"color\", \"\");\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", \"\");\n        });\n      }\n    }\n  },\n\n  /**\r\n      * Customizes cell background color\r\n      * @param color\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var backgroundColor = \"\";\n    var backgroundImage = \"\";\n\n    if (control) {\n      if (color != 'none') {\n        backgroundColor = color;\n        backgroundImage = \"none\";\n      }\n\n      if (self.properties.editable) {\n        var needBGPaint = false;\n\n        control.find(\"input, textarea, .ui-selectmenu\").each(function (i, element) {\n\n          if ((element.type == \"text\" || element.type == \"textarea\") && !$(element).hasClass('ui-select-data'))\n          needBGPaint = true;\n\n          $(element).css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n\n        if (!needBGPaint) {\n          control.closest(\"td\").each(function (i, element) {\n            $(element).css({\n              \"background-color\": backgroundColor,\n              \"background-image\": backgroundImage });\n\n          });\n        }\n\n      } else {\n        control.each(function (i, element) {\n          //TODO: Validar si se aplican los estilos en tablet aun sin esta linea, cuidado con desktop\n          var item = $(element).hasClass(\"ui-bizagi-cell-readonly\") ? control.closest(\"td\") : $(element);\n          item.css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n      }\n    }\n\n\n  },\n\n  /**\r\n      * Changes the cell visibility\r\n      * @param argument\r\n      */\n  changeCellVisibility: function changeCellVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Hide - show the render\n      if (bizagi.util.parseBoolean(argument) == true) {\n        //control.show();\n        control.css(\"visibility\", \"visible\");\n        control.css(\"display\", \"\");\n\n        self.element && self.element.show();\n      } else {\n        //control.hide();\n        control.css(\"visibility\", \"hidden\");\n      }\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n\n  /**\r\n      * Changes the cell required\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Check if argument is true and control donot have any value\n      if (bizagi.util.parseBoolean(argument) == true && bizagi.util.isEmpty(self.value)) {\n        control.addClass('control-required');\n        control.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      } else {\n        control.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", control).remove();\n      }\n      // Update properties\n      properties.required = argument;\n    }\n  },\n\n  /**\r\n      * Method to create deferred at the moment to start multiaction\r\n      */\n  startActionExecution: function startActionExecution() {\n    var self = this;\n    self.startLoading();\n    self.actionExecutionDeferred = new $.Deferred();\n  },\n\n  /**\r\n      * method to resolve the deferred when multiaction finish\r\n      */\n  endActionExecution: function endActionExecution() {\n    var self = this;\n    self.endLoading();\n    if (self.actionExecutionDeferred) self.actionExecutionDeferred.resolve();\n    delete self.actionExecutionDeferred;\n  },\n\n  /**\r\n      * Method to return the promise to anyone that needs to know if multiaction ended\r\n      * @returns {*}\r\n      */\n  readyActionExecution: function readyActionExecution() {\n    var self = this;\n    if (!self.actionExecutionDeferred) return $.when(true);\n    return self.actionExecutionDeferred.promise();\n  },\n\n  /**\r\n      * Verifies is the elements was inside a new row in a grid\r\n      * @returns {boolean}\r\n      */\n  isFromCreatedRow: function isFromCreatedRow() {\n    var self = this;\n\n    if (self.grid) {\n      var i = self.grid.columns.length;\n\n      while (i-- > 0) {\n        if (self.grid.columns[i].properties.xpath == self.properties.xpath) {\n          if (self.grid.columns[i].isNewRow == true) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Submits a invalidate page cache request\r\n      * @param params\r\n      */\n  submitInvalidatePageCacheRequest: function submitInvalidatePageCacheRequest(params) {\n    var self = this,\n    properties = self.properties;\n    var pageCacheToInvalidate = params ? params.idPageCache : properties.idPageCache;\n\n\n    self.dataService.invalidatePageCache({ idPageCache: pageCacheToInvalidate });\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isDesignMode: function isDesignMode() {\n    return this.getMode() === \"design\";\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isExecutionMode: function isExecutionMode() {\n    return this.getMode() === \"execution\";\n  },\n\n  /***/\n  preventDefaultForAnchorTag: function preventDefaultForAnchorTag() {\n    if (bizagi.util.isSharepointContext() || bizagi.util.isWebpartContext()) {\n      $(\"a[href='#']\", this.getControl()).click(function (ev) {\n        ev.preventDefault();\n      });\n    }\n  },\n\n  getMainForm: function getMainForm(currentForm) {\n    var fromRender = currentForm.params.fromRender;\n    if (typeof fromRender != \"undefined\")\n    this.getMainForm(fromRender.getFormContainer());else\n\n    return currentForm;\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the intersection\r\n      * of a target element with an ancestor element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setInterceptionObserver: function setInterceptionObserver($context, callbackFn) {\n    var self = this;\n\n    var intersectionObserver = new IntersectionObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        intersectionObserver.disconnect();\n      }\n    });\n\n    intersectionObserver.POLL_INTERVAL = 100; // Time in milliseconds.\n    intersectionObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the resize\r\n      * of a target element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setResizeObserver: function setResizeObserver($context, callbackFn) {\n    var self = this;\n\n    var resizeObserver = new ResizeObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        resizeObserver.disconnect();\n      }\n    });\n    resizeObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Restore appearance of grid\r\n      */\n  restoreGridAppearance: function restoreGridAppearance() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.restoreAppearance();\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        for (var i = 0; i < indexes.length; i++) {\n          column.decorateRenders[indexes[i]].restoreCellAppearance();\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Save visual changes of children in grid\r\n      */\n  saveGridChildrenVisualChanges: function saveGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.gridChildrenVisualChanges = [];\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] = cell.visualChanges;\n          }\n\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Restore visual changes of children in grid\r\n      */\n  restoreGridChildrenVisualChanges: function restoreGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            cell.visualChanges = self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] || {};\n          }\n\n        }\n      });\n    }\n\n    delete self.gridChildrenVisualChanges;\n  },\n\n  /**\r\n      * Restore appearance of cell\r\n      */\n  restoreCellAppearance: function restoreCellAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n      switch (command) {\n        case \"color\":\n          self.changeCellColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeCellBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeCellRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditabilityCellControl(self.visualChanges[command], self.surrogateKey, self.properties.xpath);\n          break;\n        case \"visibility\":\n          self.changeCellVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  },\n\n  /**\r\n      * Method to perform the format to value\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  formatValue: function formatValue(value) {\n    return value;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Form Container Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a form container class that defines basic stuff regarding the device\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.form\", {}, {\n  /*\r\n                                              *   Constructor\r\n                                              */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n    var device = bizagi.util.detectDevice();\n\n    // Creates a hashtable to maintain references by id\n    self.rendersById = {};\n    self.rendersByXpath = {};\n    self.rendersByXpathId = {};\n    self.rendersByType = {};\n\n    // Set page cache id\n    self.idPageCache = data.pageCacheId;\n\n    // Set default mode\n    self.mode = params.mode || \"execution\";\n    self.focus = params.focus;\n\n    // Set rendering params\n    self.params = params;\n\n    // Call base\n    this._super(params);\n\n    // Define confirmation message \n    var message = \"\";\n\n    if (device !== \"desktop\") {\n      message = this.getResource(\"render-form-user-confirmation-message\").replace(/<br(\\/| \\/)>/g, \"\\n\");\n    } else {\n      message = this.getResource(\"render-form-user-confirmation-message\");\n    }\n\n    // Default properties\n    var properties = self.properties;\n    properties.sessionId = data.sessionId;\n    properties.displayAsReadOnly = bizagi.util.parseBoolean(data.displayAsReadOnly) || false;\n    properties.userConfirmationMessage = properties.userConfirmationMessage || message;\n    properties.orientation = properties.orientation || \"ltr\";\n    properties.hasRule = bizagi.util.parseBoolean(properties.hasRule) || false;\n    properties.contexttype = params.contexttype || \"\";\n    properties.paramsRender = params.paramsRender || {};\n    properties.processPath = params.data.processPath ? params.data.processPath.replaceAll(\"|/|\", \"  &rsaquo;  \") : \"\";\n    properties.breadCrumb = params.data.processPath ? params.data.processPath.split(\"|/|\") : [];\n    properties.type = properties.type || \"form\";\n\n    // Set validations & actions\n    this.validations = data.validations;\n    this.actions = data.actions;\n\n    // Enable the \"Validate and Save\" action for Form Buttons\n    self.allowValidateAndSaveAction = bizagi.override && bizagi.override.enableActionValidateAndSave === true;\n\n    // Enable execution of Quick actions\n    var enableExecuteQuickActions = bizagi.util.isFeatureEnabled(\"enableExecuteQuickActions\");\n    var allowExecuteQuickActions = enableExecuteQuickActions !== null ? enableExecuteQuickActions : true;\n    self.useQuickActions = allowExecuteQuickActions && self.hasQuickActions(data, allowExecuteQuickActions);\n\n    // Initialize buttons\n    self.initializeButtons(data);\n\n    // Define transitions to Complex Gateway\n    if (data.transitions) {\n      self.transitions = data.transitions;\n    }\n\n    this.originalProcessButton = this.processButton;\n\n    //Custom behaviour for application parent activated.\n    self.isRoutingDisabled = false;\n    if (params.applicationParent) {\n      switch (params.applicationParent) {\n        case 'NEWWORKPORTAL':\n          self.isRoutingDisabled = true;\n          break;}\n\n    }\n\n    self.isOfflineFormsV2Supported = bizagi.util.isMobileDevice() && bizagi.util.isOfflineFormsV2Supported();\n    self.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    self.rendersById[properties.id] = self;\n  },\n\n  /*\r\n     *   Initializes button metadata\r\n     */\n  initializeButtons: function initializeButtons(data) {\n    var self = this;\n\n    self.buttons = [];\n\n    // Process buttons\n    if (data.buttons) {\n      $.each(data.buttons, function (i, item) {\n        var button = item.button.properties;\n\n        // Process caption\n        button.caption = !bizagi.util.isEmpty(button.caption) && self.getResource(button.caption) !== button.caption ? self.getResource(button.caption) : button.caption;\n\n        // Process actions\n        if (button.actions) {\n          $.each(button.actions, function (i, action) {\n            button[action] = true;\n          });\n        }\n\n        // Add other properties\n        button.ordinal = i;\n        button.action = button.next ? \"next\" :\n        button.nextWithoutValidations ? \"nextWithoutValidations\" :\n        button.submitData ? \"save\" :\n        button.cancel ? \"cancel\" :\n        button.back ? \"back\" :\n        button.createnewcase ? \"createnewcase\" :\n        button.validate ? \"validate\" : \"\";\n\n        // Explicit add save operation\n        button.save = button.action === \"save\";\n\n        // Allow Quick action\n        button.quickAction = button.type === \"quickactions\";\n\n        // Add inherent behaviours\n        if (button.next || button.back || button.nextWithoutValidations) {\n          button.routing = true;\n        }\n\n        if (button.hasRule) {\n          button.executeRule = true;\n        }\n\n        if (self.allowValidateAndSaveAction && button.validate) {\n          button.submitData = true;\n          button.refresh = true;\n          button.save = true;\n          if (button.action === \"next\" || button.action === \"createnewcase\") {\n            button.refresh = false;\n          }\n        }\n\n        // Prepare button style\n        button.style = self.buildButtonStyle(button);\n\n        // Add to button array\n        self.buttons.push(button);\n      });\n    }\n  },\n\n  /*\r\n     *   Get the original params used to fetch the form\r\n     */\n  getParams: function getParams() {\n    return this.params;\n  },\n\n  setParam: function setParam(property, value) {\n    if (this.params) {\n      this.params[property] = value;\n    }\n  },\n\n  /*\r\n     *   Get current rendering mode\r\n     */\n  getMode: function getMode() {\n    return this.mode;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    if (self.params) {\n      return self.params.customHandlers;\n    }\n  },\n  /*\r\n     * Method to index renders\r\n     */\n  registerRender: function registerRender(render) {\n    var self = this;\n    var xpath = render.properties.xpath;\n    var id = render.properties.id;\n    var type = render.properties.type;\n    var xpathId = xpath ? xpath + \".\" + id : undefined;\n\n    self.rendersById[id] = render;\n    if (xpath) {\n      if (!self.rendersByXpath[xpath]) {\n        self.rendersByXpath[xpath] = [];\n      }\n      self.rendersByXpath[xpath].push(render);\n    }\n\n    if (xpathId) {\n      if (!self.rendersByXpathId[xpathId]) {\n        self.rendersByXpathId[xpathId] = [];\n      }\n      self.rendersByXpathId[xpathId].push(render);\n    }\n\n    if (!self.rendersByType[type]) {\n      self.rendersByType[type] = [];\n    }\n    self.rendersByType[type].push(render);\n  },\n  /*\r\n     * Method to unregister render\r\n     */\n  unregisterRender: function unregisterRender(render) {\n    var self = this;\n\n    if (self.rendersById[render.properties.id]) {\n      delete self.rendersById[render.properties.id];\n    }\n\n    if (render.properties.xpath) {\n      if ($.isArray(self.rendersByXpath[render.properties.xpath]) &&\n      self.rendersByXpath[render.properties.xpath].length > 1) {\n        for (var i = 0, l = self.rendersByXpath[render.properties.xpath].length; i < l; i++) {\n          var element = self.rendersByXpath[render.properties.xpath][i];\n          if (bizagi.util.md5(JSON.stringify(element.properties)) === bizagi.util.md5(JSON.stringify(render.properties))) {\n            self.rendersByXpath[render.properties.xpath].splice(i, 1);\n            self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id].splice(i, 1);\n            break;\n          }\n        }\n      } else {\n        delete self.rendersByXpath[render.properties.xpath];\n        delete self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id];\n      }\n    }\n\n    // Unregister from renders by type\n    if (render.properties.type) {\n      var listRendesByType = self.getRenderByType(render.properties.type);\n      var listRendesByTypeLength = listRendesByType.length;\n      var renderKey = render.properties.id || render.properties.xpath;\n\n      for (var i = 0; i < listRendesByTypeLength; i++) {\n        var listRender = listRendesByType[i];\n        if (typeof listRender.properties.id != \"undefined\" && listRender.properties.id == renderKey ||\n        typeof listRender.properties.xpath != \"undefined\" && listRender.properties.xpath == renderKey) {\n          // Unregister element\n          self.rendersByType[render.properties.type].splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n  /*\r\n     * Method to access a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this;\n\n    return self.rendersById[id];\n  },\n\n  getGridByColumn: function getGridByColumn(id) {\n    var self = this;\n    var grids = self.getRenderByType('grid');\n    var i = 0,columnIndex;\n\n    for (; i < grids.length; i++) {\n      columnIndex = grids[i].columnsIds.indexOf(id);\n      if (columnIndex != -1) {\n        return grids[i];\n      }\n    }\n\n    return null;\n  },\n\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this;\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath && xpath.indexOf)\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    return self.rendersByXpathId[xpath] ?\n    self.rendersByXpathId[xpath] : self.rendersByXpath[xpath] ?\n    self.rendersByXpath[xpath] : [];\n  },\n  /**\r\n      * Get all render with the same type\r\n      */\n  getRenderByType: function getRenderByType(type) {\n    var self = this;\n\n    // Check that type is defined\n    if (typeof type == \"string\" && type.length > 0) {\n      // Search controls by type\n      return self.rendersByType[type] ? self.rendersByType[type] : [];\n    }\n    return [];\n  },\n\n  /*\r\n     *   Build the container html\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    // TODO: Unify markup of forms. Currently the template has validations to apply a different markup if it is \n    //a query form. In the future, all forms should have the same markup to minimize complexity. See form.tmpl.html.\n    var html = $.fasttmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() === \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation,\n      isEmpty: bizagi.util.isEmpty(self.children) && bizagi.util.isEmpty(self.transitions), // Sections and Gateway\n      allowQuickActions: self.useQuickActions // Quick actions\n    });\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(form) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Add a mode class\n    form.addClass(\"ui-bizagi-rendering-mode-\" + mode);\n\n    // Call base\n    this._super(form);\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    if (form.length > 1) {\n      $(form).each(function () {\n        if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\n          complexGatewayContainer = this;\n        }\n      });\n    } else {\n      complexGatewayContainer = $(\".ui-bizagi-container-complexgateway\", form);\n    }\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Process buttons\n    self.processButtons(form);\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function (e, mainForm) {\n      var $canvas = self.getValidationsContainer(mainForm);\n\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations, $canvas);\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n\n    // Set events for complex gateway interface\n    $(complexGatewayContainer).find(\".ui-checkbox\").bind(\"click\", function () {\n      var checkboxLabel = $(\"label\", this);\n\n      var transitionId = checkboxLabel.data(\"value\") || \"\";\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      if (bizagi.util.parseBoolean(checkboxLabel.data(\"checked\"))) {\n        // Uncheck element\n        checkboxLabel.removeClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", false);\n        self.activeTransitions[transitionId] = false;\n      } else {\n        // Check element\n        checkboxLabel.addClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", true);\n        self.activeTransitions[transitionId] = true;\n      }\n    });\n\n\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n  },\n  /*\r\n     *   Format form buttons to allow further customization\r\n     */\n  buildButtonStyle: function buildButtonStyle(button) {\n\n    var style = {};\n    if (button.format) {\n      if (button.format.size) {\n        if (button.format.size != \"0\") {\n          var newFontSize = 100 + Number(button.format.size) * 10 + \"%\";\n          style[\"font-size\"] = newFontSize + \" !important\";\n        }\n      }\n      if (button.format.bold) {\n        style[\"font-weight\"] = \"bold !important\";\n        if (bizagi.util.isIE()) {\n          style[\"font-family\"] = \"'Open Sans', 'Helvetica Neue', Arial, Helvetica, sans-serif !important\";\n        }\n      }\n      if (button.format.italic) {\n        style[\"font-style\"] = \"italic !important\";\n      }\n      if (button.format.underline || button.format.strikethru) {\n        var strikethru = bizagi.util.parseBoolean(button.format.strikethru) ? \"line-through \" : \"\";\n        var underline = bizagi.util.parseBoolean(button.format.underline) ? \"underline \" : \"\";\n        style[\"text-decoration\"] = strikethru + underline + \" !important\";\n      }\n      if (button.format.background) {\n        style[\"background-color\"] = button.format.background + \" !important\";\n        style[\"background-image\"] = \"none !important\";\n      }\n      if (button.format.color) {\n        style[\"color\"] = button.format.color + \" !important\";\n      }\n    }\n\n    var strStyle = \"\";\n    for (key in style) {\n      strStyle += key + \":\" + style[key] + \";\";\n    }\n    return strStyle;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   Returns a promise\r\n     */\n  render: function render() {\n    var self = this;\n\n    // Creates a deferred, so we can check when form has been included in dom\n    if (!self.readyDeferred)\n    self.readyDeferred = new $.Deferred();\n\n    // Call base\n    var result = this._super();\n\n    return result;\n  },\n  /*\r\n     *   Sets a promise that the form will be included in the DOM\r\n     *   so we can apply some tedious plugins that require that\r\n     */\n  ready: function ready() {\n    var self = this;\n\n    return self.readyDeferred.promise();\n  },\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n  /*\r\n     *  Return context type, when the parent form is entity\r\n     */\n  getContextType: function getContextType() {\n    return this.properties.contexttype || \"\";\n  },\n\n  /*\r\n     * Return the endpoint action, when the form will be refresh\r\n     */\n  getEndPointAction: function getEndPointAction() {\n    var self = this,\n    properties = self.properties;\n\n    if (properties.formtype == \"startform\")\n    return \"LOADSTARTFORM\";\n\n    return undefined;\n\n  },\n\n  /*\r\n     *   Returns the page cache id for the element\r\n     */\n  getPageCache: function getPageCache() {\n    return this.idPageCache;\n  },\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    return this;\n  },\n  /*\r\n     *   Method to process button actions in the form\r\n     */\n  processButtons: function processButtons() {\n    var self = this;\n    var buttons = self.getButtons();\n\n    // Don't process buttons if they are undefined in the template\n    if (!buttons || buttons.length === 0) return;\n\n    // Attach a handler for each button\n    buttons.on(\"click\", function (e) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n\n      self.startLoading();\n\n      var button = $(this);\n      var ordinal = button.attr(\"ordinal\");\n      var buttonProperties = self.buttons.find(function (btn) {\n        return btn.ordinal == ordinal;\n      });\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Disable button to prevent multiple click actions\n      button.prop(\"disabled\", true);\n\n      if (button.hasOwnProperty('disabled')) {\n        button.button(\"disable\"); // Setting styles\n      }\n\n      // External Events\n      self.propagateExternalEvents(e);\n\n      // Execute button\n      // QAF-1418 - add setTimeout\n      var timeOutButton = setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n          if ($.contains(document.documentElement, button.get(0))) {//check if button is still in DOM\n            button.prop(\"disabled\", false); //enable button\n\n            if (button.hasOwnProperty('enable')) {\n              button.button(\"enable\"); //Setting styles\n            }\n          }\n        });\n        clearTimeout(timeOutButton);\n      }, 100);\n    });\n  },\n  /*\r\n     * Execute codes just before sending information to server\r\n     */\n  preProcessButton: function preProcessButton(buttonProperties) {\n    return true;\n  },\n  /*\r\n     * Execute codes just after sending information to server\r\n     */\n  postProcessButton: function postProcessButton(responses, buttonProperties) {\n    return true; // true means continue\n  },\n\n  setLoaderDeferred: function setLoaderDeferred() {\n    var self = this;\n\n    self.loaderDeferred = $.Deferred().resolve();\n  },\n\n  deleteLoaderDeferred: function deleteLoaderDeferred() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        delete self.loaderDeferred;\n      }).fail(function () {\n        delete self.loaderDeferred;\n      });\n    }\n  },\n\n  useOrSetLoaderDeferred: function useOrSetLoaderDeferred() {\n    var self = this;\n\n    if (!self.isLoaderDeferredSet()) {\n      self.setLoaderDeferred();\n    }\n  },\n\n  getLoaderPromise: function getLoaderPromise() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      return self.loaderDeferred.promise();\n    } else {\n      return;\n    }\n  },\n\n  isLoaderDeferredSet: function isLoaderDeferredSet() {\n    var self = this;\n\n    if (self.loaderDeferred) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  appendWaitForLoader: function appendWaitForLoader(params) {\n    var self = this;\n    var promise = params.promise;\n    var create = params.create || false;\n\n    if (!self.isLoaderDeferredSet()) {\n      if (create) {\n        self.setLoaderDeferred();\n      } else {\n        return;\n      }\n    }\n\n    self.loaderDeferred = self.loaderDeferred.then(function () {\n      return function () {\n        return promise;\n      }();\n    });\n  },\n\n  getResolveOrReject: function getResolveOrReject() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        deferred.resolve();\n      }).fail(function () {\n        deferred.resolve();\n      });\n    } else {\n      deferred.resolve();\n    }\n\n    return deferred.promise();\n  },\n\n  /*\r\n     *   Executes a single button action\r\n     */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var properties = self.properties;\n    if (!buttonProperties.routing) {\n      bizagi.chrono.initAndStart(\"submitForm\");\n    }\n    bizagi.chrono.init(\"waiting\");\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Resolve asynchronous tabItems\n    var form = self.getFormContainer();\n    var getAllTabs = form.getRenderByType(\"tabItem\");\n    var getAllTabsLength = getAllTabs.length;\n\n    form.innerTabsLoading = true;\n\n    self.useOrSetLoaderDeferred();\n\n    // Check\n    for (var i = 0; i < getAllTabsLength; i++) {\n      var render = getAllTabs[i];\n      // Resolve internal deferred\n      if (render.loadingDeferred && render.parent.container) {\n        render.loadingDeferred.resolve();\n      }\n    }\n\n    delete form.innerTabsLoading;\n\n    $.when(self.ready(), self.getResolveOrReject()).done(function () {\n      self.deleteLoaderDeferred();\n      // Validate the form\n      var valid = bizagi.util.parseBoolean(buttonProperties.validate) ? self.validationController.performValidations() : true;\n      if (valid) {\n\n        if ([\"save\", \"next\", \"back\", \"createnewcase\", \"nextWithoutValidations\"].includes(buttonProperties.action) && !self.isOfflineForm) {\n          $(document).data('auto-save', '');\n        }\n\n        // Check for user confirmation if configured and the button is configured to enroute\n        var confirmationStatus = self.getConfirmationStatus(properties, buttonProperties);\n\n        if (confirmationStatus.hasConfirmation) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(confirmationStatus.message, null, false)).done(function () {\n            // Submits the form\n            if (self.preProcessButton(buttonProperties)) {\n              //Trigger the event after ProcessButton\n              self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n              $.when(self.submitForm(buttonProperties)).done(function () {\n                defer.resolve();\n              }).fail(function () {\n                defer.reject(arguments);\n              });\n            }\n          }).fail(function () {\n            defer.reject();\n          });\n\n        } else {\n          if (self.preProcessButton(buttonProperties)) {\n            //Trigger the event after ProcessButton\n            self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n            $.when(self.submitForm(buttonProperties)).done(function () {\n              $(document).trigger(\"FORMACTION\", buttonProperties);\n              defer.resolve();\n            }).fail(function () {\n              defer.reject(arguments);\n            });\n          }\n        }\n\n      } else {\n\n        self.endLoading();\n        if (buttonProperties.submitData) {\n          $.when(self.submitData()).done(function () {\n            defer.reject();\n          });\n        } else {\n          defer.reject();\n        }\n\n        self.validationController.expandNotificationBox();\n      }\n\n      var customHandler = self.getCustomHandler(\"afterFormButtonClick\");\n      if (customHandler) {\n        customHandler(buttonProperties);\n      }\n    });\n\n    return defer.promise();\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  validateForm: function validateForm() {\n    var self = this;\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Validate the form\n    return self.validationController.performValidations();\n  },\n  /*\r\n     *   Submits all the form to the server and returns a deferred to check when the process finishes\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions()) {\n      return $.when(function () {\n        return null;\n      });\n    }\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Wait for deferreds\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n\n      var saveParams = {\n        action: \"SAVE\",\n        data: data,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        isOfflineForm: self.isOfflineForm || false };\n\n\n      if (self.isOfflineForm) {\n        saveParams.offlineType = self.params.offlineType;\n      }\n\n      // Submit the form\n      return $.when(self.dataService.submitData(saveParams)).\n      always(function () {\n        self.endLoading();\n      });\n    });\n  },\n  removeCaseSyncError: function removeCaseSyncError() {\n    var editPromise = undefined;\n    if (!this.removeSyncErrorOnSubmit) return;\n    this.removeSyncErrorOnSubmit = false;\n    var offlineType = this.params.offlineType == \"task\" ? \"task\" : \"start\";\n    var editPromise = offlineType == \"start\" ? this.dataService.removeStartCaseSyncError(this.params) :\n    this.dataService.removeTaskCaseSyncError(this.params);\n    return editPromise;\n  },\n  /*\r\n     *   Creates a json array with key values to send to the server\r\n     */\n  submitForm: function submitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.isReadyToSave()).\n    then(function () {\n      if (self.isOfflineForm) {\n        $.when(self.removeCaseSyncError()).\n        then(\n        //Even if the removeSyncError promise fails the internalSubmit should be executed without break the promise chain\n        function () {return self.internalSubmitFormOffline(buttonProperties);},\n        function () {return self.internalSubmitFormOffline(buttonProperties);}).\n\n        then(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      } else\n      {\n        $.when(self.internalSubmitForm(buttonProperties)).\n        done(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      }\n    }).\n    fail(function () {\n      self.endLoading();\n      bizagi.log(\"The form is not saved, no changes were found\");\n      defer.reject();\n    });\n    return defer.promise();\n  },\n  checkWidgetsData: function checkWidgetsData() {\n    //\n  },\n  isComplexGatewayPainted: function isComplexGatewayPainted() {\n    return false;\n  },\n\n  /**\r\n      * Get last action button\r\n      * @returns {*}\r\n      */\n  getLastActionButton: function getLastActionButton() {\n    return this.lastActionButton;\n  },\n\n  /**\r\n      * Internal - Creates a json array with key values to send to the database\r\n      * @param {} buttonProperties\r\n      * @returns {}\r\n      */\n  internalSubmitFormOffline: function internalSubmitFormOffline(buttonProperties) {\n    var self = this;\n    var message = \"\";\n    var data;\n    var defer = $.Deferred();\n\n    if (self.isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.save) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    } else {\n      // When the action is validate            \n      return;\n    }\n\n    var executeButtonAction = null;\n\n    // Start asynchronous operation\n    bizagi.loading.start();\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      // in offline this don't happend => Reset data because when an execute rule operation has been performed, it saved already all the data\n      if (data == undefined) {\n        data = {};\n      }\n\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule_\" + buttonProperties.id;\n    }\n\n    if (self.transitions) {\n      var transitions = [];\n      $.each(this.activeTransitions, function (key, value) {\n        value ? transitions.push(key) : \"\";\n      });\n\n      if (bizagi.util.countProps(transitions) == 0) {\n        bizagi.showMessageBox(\n        bizagi.localization.getResource(\"render-widget-complexgateway-path\"),\n        bizagi.localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n\n        self.endLoading();\n        return \"\";\n      }\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(executeButtonAction);\n    }\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.submitData({\n        action: buttonProperties.action,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        transitions: transitions || \"\",\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: actions })).\n      then(function (responses) {\n\n        if (!self.postProcessButton(responses, buttonProperties)) {\n          return;\n        }\n\n        //Offline action stored\n        var isSaveForDraft = self.params.offlineType !== \"task\" && buttonProperties.action === \"save\";\n        if (self.online && self.isOfflineFormsV2Supported && !isSaveForDraft) {\n          var syncDeferred = new $.Deferred();\n          var syncParams = $.extend({ deferred: syncDeferred }, self.params);\n          $(document).trigger(\"tryPushCase.offline\", syncParams);\n        }\n\n        //Backward comp\n        if (!self.isOfflineFormsV2Supported) {\n          $(document).trigger(\"tryPushData.offline\");\n        }\n\n        $.when(syncDeferred).\n        then(function (result) {\n          bizagi.loading.stop();\n          if (buttonProperties.routing) {\n            if (!self.online && self.isOfflineFormsV2Supported) {\n              self.triggerHandler(\"routing\", {\n                offlineAction: buttonProperties.action,\n                idCase: self.params.idCase,\n                idWorkitem: self.params.idWorkitem,\n                buttonPropertiesAction: buttonProperties.action,\n                radNumber: self.params.radNumber });\n\n            } else {\n              //Show toast synchronized\n              if (self.showToastOnSuccessSync) {\n                self.showToastOnSuccessSync = false;\n                bizagi.util.showMobileToast({\n                  type: \"success\",\n                  message: bizagi.localization.getResource(\"workportal-offline-sync-success\") });\n\n              }\n              self.triggerHandler(\"routing\", {\n                idCase: result.IdCase,\n                caseNumber: result.CaseNumber,\n                buttonPropertiesAction: buttonProperties.action });\n\n            }\n          } else {\n\n            //The case was not sync\n            if (!self.online && result == undefined) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n            // After successfully response refresh the form\n            if (buttonProperties.refresh || result && result.shouldRefresh) {\n              self.refreshForm();\n            }\n            if (self.showToastOnSuccessSync && self.online) {\n              self.showToastOnSuccessSync = false;\n              bizagi.util.showMobileToast({\n                type: \"success\",\n                message: bizagi.localization.getResource(\"workportal-offline-save-and-sync-success\") });\n\n            } else {\n              var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-successful\", \"Saved\");\n              bizagi.util.showNotification({ text: message, stop: false, type: \"success\" });\n            }\n          }\n          defer.resolve();\n        }).\n        fail(function (error) {\n          bizagi.loading.stop();\n          bizagi.util.recreateNativeButtons(self);\n          var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n          bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n          if ($.isArray(error)) {\n            var responses = error;\n            var bHasValidations;\n            var alertMessage = \"\";\n            $.each(responses, function (i, response) {\n              var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n              bHasValidations = propertiesToDisplayMessages.bHasValidations;\n              alertMessage = propertiesToDisplayMessages.alertMessage;\n            });\n            if (bHasValidations && alertMessage !== \"\") {\n              bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n            }\n          }\n          self.failHandler(error);\n          defer.reject(error);\n        });\n      }).fail(function (error) {\n        var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n        bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n        defer.reject(error);\n      });\n    });\n\n  },\n\n  /**\r\n      * To save handSignature or any filetype render after editting in offline mode\r\n      * @param {Array} data - RederValues from collecData() \r\n      */\n  partialSubmitFormOffline: function partialSubmitFormOffline(data) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.dataService.submitData({\n      action: \"save\",\n      data: data,\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      idForm: self.properties.id,\n      prepare: true,\n      transitions: \"\",\n      idCase: self.params.idCase,\n      idWorkitem: self.params.idWorkitem,\n      isOfflineForm: self.isOfflineForm || false,\n      offlineType: self.params.offlineType || \"\",\n      actions: [] })).\n\n    fail(function (error) {\n      var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-fail\", \"Not saved\");\n      bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n      defer.reject(error);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Internal - Creates a json array with key values to send to the server\r\n     */\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var data = {};\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase || buttonProperties.back) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    var submitDataAction = null;\n    var executeButtonAction = null;\n    var performAction = null;\n    var checkpointAction = null;\n    var commitAction = null;\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      if (data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase || buttonProperties.nextWithoutValidations) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi.\n          localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      if (data && data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n\n      performAction = self.dataService.submitData({\n        action: self.getButtonAction(buttonProperties.action),\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n      performAction.tag = \"performAction\";\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n      actions.push(checkpointAction);\n      actions.push(executeButtonAction);\n      actions.push(commitAction);\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    // Execute the batch\n    bizagi.chrono.initAndStart(\"submitForm-ajax\");\n\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply(this, data.deferreds).\n      done(function (response) {\n        flowControlDeferred.resolve(response);\n      }).\n      fail(function () {\n        flowControlDeferred.reject();\n        console.log(\"Error: It was not possible resolve async actions on form \");\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    waitingDeferreds.push(flowControlDeferred);\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.multiaction().execute({ actions: actions })).done(function (responses) {\n        bizagi.chrono.stop(\"submitForm-ajax\");\n        // End asynchronous operation\n        self.endLoading();\n        // Find validations\n        var bHasValidations;\n        var alertMessage = \"\";\n        $.each(responses, function (i, response) {\n\n          var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n          bHasValidations = propertiesToDisplayMessages.bHasValidations;\n          alertMessage = propertiesToDisplayMessages.alertMessage;\n\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase,\n              routingDisabled: buttonProperties.routingDisabled });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else {\n          if (alertMessage !== \"\") {/*If there is an alertMessage show in a modal error*/\n            bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n          }\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        defer.resolve();\n      }).fail(function (res, res2, response) {\n        if (buttonProperties.executeRule) {\n          self.sendRollbackAction(buttonProperties.id);\n        }\n\n        if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\n        response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\n            return $.when(self.internalSubmitForm($.extend({}, buttonProperties, { forcePlanCompletion: true })));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          self.failHandler(response);\n          defer.reject(response);\n        }\n      });\n    });\n    return defer.promise();\n  },\n  validationToDisplayMessages: function validationToDisplayMessages(bHasValidations, messageType, message, alertMessage) {\n    var self = this;\n\n    if (messageType == \"validationMessages\") {\n      // Something went wrong, we gotta display messages in notifications grid\n      self.addValidationMessage(message);\n      bHasValidations = true;\n    }\n    if (messageType == \"alertMessages\") {\n      // Something went wrong, we gotta display alert message\n      if (alertMessage === \"\") {\n        alertMessage = message;\n      } else {\n        alertMessage = alertMessage + \"\\n\\n\" + message;\n      }\n\n      bHasValidations = true;\n    }\n\n    return { \"bHasValidations\": bHasValidations, \"alertMessage\": alertMessage };\n  },\n\n  /*\r\n     *   Add a validation message to the form\r\n     */\n  addValidationMessage: function addValidationMessage(validationMessage, focus, icon, itemAdditionalClass, autofocus, type) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    if (!self.validationController) {\n      var $canvas = self.getValidationsContainer();\n      self.validationController = new bizagi.command.controllers.validation(self, undefined, $canvas);\n    }\n\n    if (typeof validationMessage == \"string\") {\n      self.validationController.showValidationMessage(validationMessage, focus, icon, itemAdditionalClass, type);\n    } else {\n      $.each(validationMessage, function (i, message) {\n        self.validationController.showValidationMessage(message, focus, icon, itemAdditionalClass, type);\n      });\n    }\n    self.validationController.expandNotificationBox(autofocus);\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var self = this;\n\n    // First hide and clear validation box\n    if (self.validationController) {\n      self.validationController.clearValidationMessages(params);\n    }\n\n  },\n  /*\r\n     *   Add an error message to the form\r\n     */\n  addErrorMessage: function addErrorMessage(errorMessage) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    self.validationController.showErrorMessage(errorMessage);\n    self.validationController.expandNotificationBox();\n  },\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm(focus) {\n    var self = this;\n    var properties = self.properties;\n    var deferred = $.Deferred();\n\n    focus = focus || self.getFocus();\n\n    // Normalize new focus structure if not present\n    if (focus && !focus.id) {\n      focus = {\n        id: focus };\n\n    }\n\n    var options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      selectedSection: self.getSelectedSection(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      isRefresh: true,\n      contextType: self.getContextType() || \"\",\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\" };\n\n\n    if (self.isOfflineRefreshWithEdition) {\n      options.isEdited = true;\n      self.isOfflineRefreshWithEdition = false;\n    }\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    self.startLoading();\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n      deferred.resolve();\n    }).fail(function () {\n      deferred.reject();\n    }).always(function () {\n      self.endLoading();\n    });\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Get opened tabs configuration\r\n     */\n  getSelectedTabs: function getSelectedTabs() {\n    var self = this;\n    var tabContainers = self.getElementsByType(\"tab\");\n    var tabs = $.map(tabContainers, function (tabContainer) {\n      return { tab: tabContainer.properties.id, selected: tabContainer.activeTab };\n    });\n    var selectedTabs = {};\n    for (var i = 0, length = tabs.length; i < length; i++) {\n      selectedTabs[tabs[i].tab] = tabs[i].selected;\n    }\n    return selectedTabs;\n  },\n\n  /**\r\n      * Get the actual section selected\r\n      */\n  getSelectedSection: function getSelectedSection() {\n    var params = this.getParams() || {};\n    return params.selectedSection;\n  },\n  /*\r\n     *   Template method to get the buttons objects\r\n     */\n  getButtons: function getButtons() {\n  },\n  /*\r\n     *   Adds an action on the fly to process the submit on change\r\n     */\n  addSubmitAction: function addSubmitAction(xpath, action) {\n    var self = this;\n    self.actionController.processInternalSubmitAction(xpath, action);\n  },\n  /**\r\n      *   Adds an overlay to the form, and sets a waiting message\r\n      *\r\n      *   @argument {bool} delay Apply delay\r\n      */\n  startLoading: function startLoading() {\n    var self = this;\n    var waitingTemplate = self.renderFactory.getTemplate(\"form-waiting\");\n\n    if (self.waitingOverlay && self.waitingMessage)\n    return;\n\n    // This hack is only for desktop\n    if (!bizagi.util.isTabletDevice()) {\n      // Detect canvas parent with scroll\n      var isSharePoint = self.params.context === \"sharepoint\";\n      var canvas = self.params.canvas;\n      if (isSharePoint) {\n        canvas = bizagi.util.scrollTop(canvas);\n\n        if (!!!canvas.context) {\n          canvas = $(\"body\", $(document));\n        }\n      } else {\n        canvas = $(\"body\", $(document));\n      }\n\n      // Configures overlay\n      var size = this.getSize();\n      var position = this.getOffset();\n      if (size.height == $(window).height()) {\n        position.top = 0;\n      }\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(canvas);\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(canvas);\n      self.waitingOverlay.css({\n        \"height\": \"100%\",\n        \"width\": \"100%\",\n        \"min-height\": size.height,\n        \"min-width\": size.width });\n\n      self.waitingMessage.css({\n        \"top\": position.top + Math.ceil((size.height - self.waitingMessage.outerHeight()) / 2) + \"px\",\n        \"left\": Math.ceil((size.width - self.waitingMessage.outerWidth()) / 2) + \"px\" });\n\n      canvas.css(\"position\", \"relative\");\n\n    } else {\n      // Configures overlay\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(\"body\", $(document));\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(\"body\", $(document));\n    }\n  },\n  /*\r\n     *   Removes the overlay and restores the form edition\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n    if (self.waitingOverlay && self.waitingMessage) {\n      self.waitingOverlay.remove();\n      self.waitingMessage.remove();\n      self.waitingOverlay = null;\n      self.waitingMessage = null;\n\n      var canvas = self.params.canvas;\n\n      if (canvas != undefined)\n      canvas.css(\"position\", \"\");\n    }\n  },\n  /*\r\n     *   Get the focused render in the current request\r\n     */\n  getFocusedElement: function getFocusedElement() {\n    var self = this;\n    return self.focus;\n  },\n  /*\r\n     *   Set the focused render in the current request\r\n     */\n  setFocusedElement: function setFocusedElement(focus) {\n    var self = this;\n    self.focus = focus;\n  },\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    return this.triggerHandler(\"globalHandler\", { eventType: eventType, data: data });\n  },\n  /*\r\n     *   Generic handler to attach fail workflow for some operations\r\n     */\n  failHandler: function failHandler(error) {\n    var self = this;\n\n    // Check if the error is in multiaction format\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n    }\n\n    //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n    if (error && error.length && error.length > 1) error = error[0];\n    if (error.error) error = error.error;\n    if (error.error) error = error.error;\n\n    // Handle normal messages\n    if (_typeof(error) == \"object\" && error.message) {\n      if (error.errorType === \"WaitForCompletionPlanException\" || error.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n        error = bizagi.localization.getResource(error.message);\n      } else {\n        error = error.message;\n      }\n\n    } else if (typeof error == \"string\") {\n      // Parse to json\n      try {\n        var errorJson = JSON.parse(error);\n        if (errorJson.errorType === \"WaitForCompletionPlanException\" || errorJson.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n          errorJson.message = bizagi.localization.getResource(errorJson.message);\n        }\n        error = errorJson.message;\n      } catch (e) {\n      }\n    }\n\n    // Workflow engine error, we gotta show it with error\n    self.addErrorMessage(error);\n    self.endLoading();\n  },\n  /* \r\n     *   Resizes the element\r\n     */\n  resize: function resize(size) {\n    // Just save the size, for reference\n    this.setSize(size);\n  },\n  /*\r\n     *   Sets the internal size for the form\r\n     */\n  setSize: function setSize(size) {\n    this.size = size;\n  },\n  /*\r\n     *   Gets the internal size for the form\r\n     */\n  getSize: function getSize() {\n    if (this.size) {\n      return this.size;\n    }\n    var canvas = this.params.canvas ? this.params.canvas : this.getFormContainer().container;\n\n    var canvasWidth = canvas.width();\n    var canvasHeight = canvas.height();\n\n    return {\n      width: canvasWidth,\n      height: canvasHeight };\n\n  },\n  getOffset: function getOffset() {\n    var canvas = this.getFormContainer().container;\n\n    return canvas.offset();\n  },\n\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitData: function submitData(args) {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    return;\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    if (isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    // Don't do anything if there is no data\n    if ($.isEmptyObject(data)) {\n      self.isOfflineRefreshWithEdition = false;\n      return;\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n    var executeSubmitData = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Call the service\n    if (isOfflineForm) {\n      executeSubmitData = self.dataService.submitData({\n        action: self.isRefreshingAfterSync ? \"submitdata\" : \"save\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\",\n        isOfflineForm: isOfflineForm,\n        offlineType: self.params.offlineType,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem });\n\n    } else {\n      executeSubmitData = self.dataService.multiaction().submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        idPageCache: self.properties.idPageCache,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\" });\n\n    }\n\n    return $.when.apply($, waitingDeferreds).then(function () {\n      return $.when(executeSubmitData).fail(function (message) {\n        message = self.processFailMessage(message);\n      });\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n    var deferred = $.Deferred();\n\n    // Concat inheritance context\n    if (properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    $.when(self.dataService.multiaction().executeRule({\n      idPageCache: properties.idPageCache,\n      rule: args.rule,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      var type = message && message.type ? message.type : \"\";\n      var form = self.getFormContainer();\n\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages({ clearOnlyServer: true });\n\n      if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        if (type === \"alertMessages\") {\n          bizagi.modalError && bizagi.modalError.show(message.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n        } else {\n          form.addValidationMessage.apply(self, [message.messages, undefined, undefined, undefined, false, \"serverMessage\"]);\n        }\n\n        deferred.reject(message);\n      } else {\n        deferred.resolve(message);\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n      deferred.reject(message);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * This function send a request to the server to execute an interface\r\n      */\n  executeInterface: function executeInterface(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeInterface({\n      idPageCache: properties.idPageCache,\n      \"interface\": args[\"interface\"],\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute an SAP connector\r\n      */\n  executeSAPConnector: function executeSAPConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeSAPConnector({\n      idPageCache: properties.idPageCache,\n      guidsap: args.guidsap,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an Connector\r\n      */\n  executeConnector: function executeConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.\n      xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeConnector({\n      idPageCache: properties.idPageCache,\n      guidConnector: args.guidConnector,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an pipeline\r\n      */\n  executePipeline: function executePipeline(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executePipeline({\n      idPageCache: properties.idPageCache,\n      pipeline: args.pipeline,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  refreshActions: function refreshActions(actions) {\n    var self = this;\n    self.actionController.refreshActions(actions);\n  },\n  /***/\n  tryToExecuteFunction: function tryToExecuteFunction(xpath) {\n    if (this.getMode() == \"execution\") {\n      this.actionController && this.actionController.tryToExecuteFunction(xpath);\n    }\n  },\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  removeActions: function removeActions() {\n    var self = this;\n    self.actionController.unbindActions();\n  },\n  /*\r\n     *   Iterate through all renders and collect the data to send, then update original values for each render\r\n     */\n  collectRenderValuesForSubmit: function collectRenderValuesForSubmit(data) {\n    var self = this;\n    data = data || {};\n\n    // Collect data\n    self.collectRenderValues(data);\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    return data;\n  },\n\n  /**\r\n      *\r\n      * @param params {data, bRefreshForm,properties}\r\n      * @returns {*}\r\n      */\n  internalSubmitOnChange: function internalSubmitOnChange(params) {\n    params = params || {};\n    var self = this;\n    var properties = params.properties;\n    var defer = new $.Deferred();\n    var data = params.data || {};\n    var bRefreshForm = typeof params.bRefreshForm != \"undefined\" ? params.bRefreshForm : true;\n    var notCollect = params.notCollect ? params.notCollect : undefined;\n\n    // Collect data\n    if (!(notCollect && !$.isEmptyObject(data))) {\n      self.collectRenderValuesForSubmit(data);\n    }\n\n    self.startLoading();\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      // Submit the form\n      self.dataService.multiaction().submitData({\n        action: \"SUBMITONCHANGE\",\n        data: data,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype }).\n      done(function (response) {\n        // Cancel previous multiactions and process property value\n        self.cancelPreviousRequest();\n        // After successfully response refresh the form\n        self.endLoading();\n        // If response message has error in validation, do not refresh the form\n        // and show validation message\n        if (response && response.type == \"validationMessages\") {\n          if (typeof self.clearValidationMessages == \"function\") {\n            self.clearValidationMessages();\n          }\n\n          self.addValidationMessage(response.messages);\n          defer.resolve();\n        } else if (bRefreshForm) {\n          var focusIdentifier = {\n            id: properties.id,\n            xpath: properties.xpath };\n\n          if (properties.idCase !== undefined) {\n            $.extend(focusIdentifier, {\n              idCaseObject: bizagi.cache.idCaseObject });\n\n          }\n          if (response.IdScope) {\n            self.properties.idStartScope = response.IdScope;\n          }\n          $.when(self.refreshForm(focusIdentifier)).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.resolve();\n          });\n        } else {\n          defer.resolve();\n        }\n      }).fail(function (message) {\n        self.endLoading();\n        var objMessage = _typeof(message) == 'object' ? message.responseText ? JSON.parse(message.responseText) : message : {};\n        var strMessage = objMessage.message || message;\n        var type = objMessage.type || \"error\";\n\n        // Omit processing when the ajax didn't process\n        if (![\"not-processed\", \"not-shown\"].includes(type)) {\n          // Clear previous validations\n          self.validationController.clearValidationMessages();\n\n          if (objMessage.type === \"alert\") {\n            self.validationController.showAlertMessage(strMessage);\n          } else {\n            self.validationController.showErrorMessage(strMessage);\n          }\n        }\n\n        defer.resolve();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  cancelPreviousRequest: function cancelPreviousRequest() {\n    if (bizagi.multiactionConnection && bizagi.multiactionConnection.length) {\n      var length = bizagi.multiactionConnection.length;\n      var i = 0,connection;\n      for (; i < length; i++) {\n        connection = bizagi.multiactionConnection.pop();\n        if (connection && connection.abort) {\n          bizagi.showErrorAlertDialog = false;\n          connection.abort();\n        }\n      }\n    }\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(buttonId) {\n    var self = this;\n\n    var checkpointAction = self.dataService.sendCheckpoint({\n      url: self.properties.checkpointUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    checkpointAction.tag = \"checkpoint\";\n\n    return checkpointAction;\n  },\n\n  prepareCommitAction: function prepareCommitAction(buttonId) {\n    var self = this;\n\n    var commitAction = self.dataService.commitLinkForm({\n      url: self.properties.commitUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    commitAction.tag = \"commit\";\n\n    return commitAction;\n  },\n\n  sendRollbackAction: function sendRollbackAction(buttonId) {\n    var self = this;\n\n    self.dataService.rollbackLinkForm({\n      url: self.properties.rollbackUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache });\n\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    self.endLoading();\n\n    var timeOutController = setTimeout(function () {\n      if (self.params) {\n        delete self.params.canvas;\n      }\n      delete self.params;\n      delete self.control;\n      if (self.validationController) {\n        self.unbind(\"rendervalidate\");\n        delete self.validationController;\n      }\n\n      if (self.actionController) {\n        self.actionController.unbindActions();\n        delete self.actionController;\n      }\n      clearTimeout(timeOutController);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n  getButton: function getButton(guid) {\n    return $(\".ui-bizagi-button[data-id='\" + guid + \"']\", this.container);\n  },\n\n  getFloatingButton: function getFloatingButton(guid) {\n    return $(\"li[data-id='\" + guid + \"']\", this.container);\n  },\n\n  propagateExternalEvents: function propagateExternalEvents(evt) {\n    // Menu-Overflow\n    var $menuOverflow = $(\".bz-overflow-menu\");\n    if ($menuOverflow)\n    $(document).trigger('click.overflow');\n\n    // ECM with preview image\n    var zoomIsOpen = $(\".jquery-image-zoom\") && $(\".jquery-image-zoom\").css(\"display\") == \"block\";\n\n    if (zoomIsOpen)\n    $(\"div.jquery-image-zoom a\").click();\n  },\n\n  getButtonAction: function getButtonAction(action) {\n    return this.allowValidateAndSaveAction && action === \"validate\" ? \"save\" : action;\n  },\n\n  /***/\n  isConnected: function isConnected() {\n    return true;\n  },\n\n  /**\r\n      * Add handlers to network management\r\n      */\n  configureNetworkHandlers: function configureNetworkHandlers() {\n    var self = this;\n    self.online = bizagi.util.isConnected();\n    if (self.isOfflineForm && bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      self.online = self.getParams().online;\n      console.log(\"CONNECTED: \", self.online);\n    }\n\n    // Update the online status based on connectivity\n    if (bizagi.util.isNativeMobileDevice() || bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      $(document).off(\"online.form\");\n      $(document).on(\"online.form\", this.handleConnectionChange.bind(self));\n\n      $(document).off(\"offline.form\");\n      $(document).on(\"offline.form\", this.handleConnectionChange.bind(self));\n\n      //Connection gained with form opened\n      $(document).off(\"offline-notify-form-sync-event\");\n      $(document).on(\"offline-notify-form-sync-event\", this.handleOfflineSyncEvent.bind(self));\n    }\n  },\n\n  /**\r\n      * Event handler\r\n      * @param event\r\n      */\n  handleConnectionChange: function handleConnectionChange(event) {\n    var form = this.getFormContainer();\n    if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      this.online = event.type === \"online\";\n    } else {\n      this.online = bizagi.util.isConnected();\n    }\n\n    // You lost connection.\n    if (event.type === \"offline\") {\n      form.triggerHandler(\"offlineForm\");\n    }\n\n    // You are now back online.\n    if (event.type === \"online\") {\n      form.triggerHandler(\"onlineForm\");\n    }\n  },\n\n  /**\r\n      * Push successful hanlder, refresh form and copy current work\r\n      */\n  handleOfflineSyncEvent: function handleOfflineSyncEvent(event, params) {\n    var self = this;\n    var formParams = self.params || {};\n    if (formParams.hasSyncError) {\n      return;\n    }\n    var offlineFormId = formParams.idCase + \"-\" + formParams.idWorkitem;\n    switch (params.type) {\n      case \"download-form-success\":\n        /**\r\n                                     * 1. Store current data in offline submit\r\n                                     * 2. Refresh form\r\n                                     * 3. Merge data using offline isEdited method\r\n                                     */\n        var paramsId = params.idCase + \"-\" + params.idWorkitem;\n        if (offlineFormId === paramsId) {\n          console.log(\"Form downloaded successfully. It will be refreshed\", params);\n\n          $.when(self.dataService.database.validateLocalDataForTaskExists(paramsId).then(function (dataResult) {\n            if (dataResult === true) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n\n            $.when(self.refreshForm(null, false)).then(function () {\n              applySyncLoader(false);\n            });\n          }));\n        }\n        break;\n      case \"push-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"push-tasks-error\":\n        applySyncLoader(false);\n        if (self.validationController != undefined) {\n          self.validationController.clearValidationMessages();\n          self.validationController.showErrorMessage(params.message);\n        }\n        break;\n      case \"fetch-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"download-finished\":{\n          applySyncLoader(false);\n          break;\n        }\n      case \"download-error\":\n        applySyncLoader(false);\n        break;\n      default:\n        console.warn(\"Event hast not implementation in bizagi.rendering.form - handleOfflineSyncEvent\", params.type, params);\n        break;}\n\n\n    function applySyncLoader(isStart) {\n      var loaders = 3;\n      var proceed = false;\n      if (isStart) {\n        proceed = !(self.isSyncLoaderRunning === true);\n      } else\n      {\n        proceed = self.isSyncLoaderRunning === true;\n      }\n      if (proceed) {\n        self.isSyncLoaderRunning = isStart;\n        for (var loaderIndex = 0; loaderIndex < loaders; loaderIndex++) {\n          if (isStart) {\n            bizagi.loading.start();\n          } else\n          {\n            bizagi.loading.stop();\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Check if allow to call the button actions\r\n      * @returns {boolean|*}\r\n      */\n  allowOnlineActions: function allowOnlineActions() {\n    if (typeof this.online === \"undefined\") return true;\n    return this.online || !this.online && this.isOfflineForm;\n  },\n\n  /**\r\n      * Method to process button actions in the form\r\n      * @param ordinal\r\n      */\n  processQuickButton: function processQuickButton(ordinal) {\n    var self = this;\n    var buttonProperties = self.buttons.find(function (btn) {\n      return btn.ordinal == ordinal;\n    });\n\n    if (buttonProperties) {\n\n      self.startLoading();\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Execute button - QAF-1418 - add setTimeout\n      setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n        });\n      }, 100);\n\n    }\n\n  },\n\n  /**\r\n      * Check if quick actions are configured\r\n      * @param data\r\n      * @param isEnable\r\n      * @returns {boolean}\r\n      */\n  hasQuickActions: function hasQuickActions(data, isEnable) {\n\n    if (!isEnable) return false;\n\n    return (data.buttons || []).some(function (item) {\n      var button = item.button.properties;\n      return button && button.type === \"quickactions\";\n    });\n\n  },\n\n  /**\r\n      * Perform validation container\r\n      * @param form\r\n      * @param mainForm\r\n      * @returns {*}\r\n      */\n  getValidationsContainer: function getValidationsContainer(mainForm) {\n    var form = this;\n    var formContainer = typeof mainForm !== \"undefined\" ? mainForm : form;\n\n    return formContainer.container;\n\n  },\n\n  /**\r\n      * Return if exist confirmation user and the message\r\n      * @param {*} formProperties \r\n      * @param {*} buttonProperties \r\n      */\n  getConfirmationStatus: function getConfirmationStatus(formProperties, buttonProperties) {\n    var hasButtonsConfirmation = bizagi.util.parseBoolean(buttonProperties.needsUserConfirmation) || false;\n    var buttonConfirmationMsg = buttonProperties.userConfirmationMessage || \"\";\n\n    var hasFormConfirmation = bizagi.util.parseBoolean(formProperties.needsUserConfirmation) && bizagi.util.parseBoolean(buttonProperties.routing);\n    var formConfirmationMsg = formProperties.userConfirmationMessage || \"\";\n\n    var messageConfirmation = hasButtonsConfirmation ? buttonConfirmationMsg : formConfirmationMsg;\n\n    return {\n      hasConfirmation: hasButtonsConfirmation || hasFormConfirmation,\n      message: messageConfirmation };\n\n  },\n\n  saveWorkInProgress: function saveWorkInProgress() {\n    var self = this;\n    var data = self.collectRenderValuesForSubmit();\n    if (!bizagi.util.isEmpty(data)) {\n      return self.dataService.submitData({\n        action: 'submitdata',\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: [] });\n\n    } else {\n      return $.Deferred().resolve(undefined).promise();\n    }\n  },\n\n  /**\r\n      * Check if it is a start form\r\n      * @returns {*|boolean}\r\n      */\n  isStartForm: function isStartForm() {\n    var form = this.getFormContainer();\n    var formType = form && form.properties && form.properties.formtype || \"\";\n\n    return /startform/i.test(formType);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Combo Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for combo renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.combo\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.hasLocalData = properties.data || false;\n    // TODO: Review additional value in radio control\n    properties.value = properties.value && properties.value.length > 0 ? properties.value[0] : properties.defaultValue && properties.defaultValue.length > 0 ? properties.defaultValue[0] : null;\n\n    if (typeof properties.enableTyping === \"undefined\") properties.enableTyping = true;\n    if (properties.value && properties.value.id === undefined) properties.value = null;\n    this.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData) {\n      properties.data = this.complementData(properties.data);\n    }\n\n    // This line is to set a flag to fetch the data when rendering, or on demand, by default is false, overriding it on desktop implementation\n    properties.loadOnDemand = false;\n  },\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var params = {};\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n\n    if (self.isDependant && self.properties && /^cascadingcombo$/i.test(renderType) && self.getParentCombo) {\n      var valueControl = self.getParentCombo().getValue();\n      if (valueControl && valueControl.id) {\n        params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = valueControl.id;\n      }\n    }\n\n    return self.renderCombo(params);\n  },\n\n  /*\r\n     *   Renders the combo\r\n     */\n  renderCombo: function renderCombo(params) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.loadOnDemand) {\n      // Render the combo without data\n      var html = self.renderComboTemplate();\n      return html;\n    } else {\n\n      // Set data promise \n      var defer = new $.Deferred();\n      var dataPromise = self.getData(params);\n\n      // Attach callback \n      $.when(dataPromise).done(function (data) {\n        // Render combo\n        var html = self.renderComboTemplate(data);\n        self.properties.data = data;\n        defer.resolve(html);\n\n      }).fail(function (data) {\n        var html = self.renderComboTemplate({});\n        defer.resolve(html);\n      });\n\n      // Returns a promise so we can hold post-render method until this is done\n      return defer.promise();\n    }\n  },\n\n  renderComboTemplate: function renderComboTemplate(data) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var emptyValue = bizagi.override.emptyLabelForCombo || self.getResource(\"render-combo-empty-selection\");\n    var value = properties.value ? \"\" : emptyValue;\n    data = data || self.properties.data || {};\n\n    if (self.properties.type === \"columnCombo\" && value === \"\" && _typeof(properties.value) === \"object\" && properties.value.id === \"\" && (properties.value.value === \"\" || properties.value.value === self.getResource(\"render-combo-empty-value\"))) {\n      value = self.getResource(\"render-combo-empty-selection\");\n    }\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: data,\n      align: properties.valueAlign,\n      value: value,\n      editable: properties.editable }));\n\n\n\n    return html;\n  },\n\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self._super();\n    var item = self.getValue();\n    var control = self.getControl();\n\n    if (self.control && self.control.parent()) {\n      self.control.parent().addClass(\"ui-bizagi-noneditable-\" + self.properties.displayType);\n    }\n    if (item) {\n\n      if (item.value != null && typeof item.value === \"boolean\") {\n        if (bizagi.util.parseBoolean(item.value) === true) {\n          item.value = this.getResource(\"render-boolean-yes\");\n\n        } else if (bizagi.util.parseBoolean(item.value) == false) {\n          item.value = this.getResource(\"render-boolean-no\");\n        }\n      }\n\n      // Returns the cached value from the properties to avoid server side fetching\n      if (self.getResource(\"render-combo-empty-value\") === item.value || self.getResource(\"render-combo-empty-selection\") === item.value) {\n        control.text(\"\");\n      } else {\n        control.html(\"<label class='readonly-control'>\" + self.formatItem(item.value) + \"</label>\");\n      }\n    } else {\n      // Render empty \n      control.text(\"\");\n    }\n  },\n\n  /*\r\n     *   Gets the template used by the combo render\r\n     *   can be overriden in subclasses to reuse logic and just change the template\r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  },\n\n  /*\r\n     *   Determines if we need to show the empty node or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showEmpty: function showEmpty() {\n    return true;\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    return true;\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var mode = self.getMode();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode !== \"execution\") return self.getDummyData();\n\n    if (properties.hasLocalData || isOfflineForm) {\n\n      // Resolve with local data    \n      defer.resolve(properties.data);\n\n    } else {\n      var renderType = bizagi.util.normalizeType(properties.type);\n\n      // Check if the data has been cached\n      if (properties.remoteDataLoaded && !/^cascadingcombo$/i.test(renderType)) {\n        defer.resolve(properties.data);\n      } else {\n        // Go to server\n        self.dataService.multiaction().getData({\n          url: properties.dataUrl,\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache,\n          extra: params,\n          contexttype: self.properties.contexttype || null }).\n        done(function (data) {\n\n          // Resolve the data\n          if (!properties.recalculate) {\n            properties.remoteDataLoaded = true;\n          }\n          properties.data = self.complementData(data);\n          defer.resolve(properties.data);\n\n        }).fail(function (data) {\n\n          var allowActions = true;\n          var form = self.getFormContainer();\n\n          if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\")\n          allowActions = form.allowOnlineActions();\n\n          if (data.type === \"not-processed\" && allowActions)\n          return;\n\n          // Show error from server\n          var msgObj = self.properties.displayName + \": \";\n\n          if (typeof data === \"string\") {\n            var auxMsg = JSON && JSON.parse(data) || $.parseJSON(data);\n          } else {\n            var auxMsg = data;\n          }\n\n          msgObj += auxMsg.message;\n\n          form.addValidationMessage(msgObj);\n\n          defer.reject(data);\n        });\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n     */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      properties.data = [];\n      properties.data = self.complementData(properties.data);\n\n      // Add another data\n      properties.data.push({ id: \"\", value: \"Item 1\" });\n      properties.data.push({ id: \"\", value: \"Item 2\" });\n\n      return properties.data;\n    }\n  },\n\n  /*\r\n     *   Resets the data in order to fetch it again when needed\r\n     */\n  resetData: function resetData() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.hasLocalData = false;\n    properties.data = null;\n    properties.remoteDataLoaded = false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n\n    if (self.combo && self.combo.length > 0) {\n      // When there is a combo painted, we fetch the selected value from it\n      return self.getSelectedValue();\n    } else {\n      var displayValue = \"\";\n      var item = self.getValue();\n\n      if (item) {\n        // Check on cached propert from server first if the key exists\n        displayValue = self.formatItem(item.value);\n      }\n\n      return displayValue;\n    }\n  },\n\n\n  /*\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n  },\n\n  /*\r\n     *   Adds custom parameters to process the template\r\n     */\n  getTemplateParams: function getTemplateParams() {\n    return {};\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n\n    if (value !== undefined && value !== null) {\n      if ($.isArray(value)) {\n\n        for (var i = 0, length = value.length; i < length; i++) {\n          if (value[i] != null && typeof value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value[i]) === true) {\n              value[i] = this.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value[i]) === false) {\n              value[i] = this.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n        return value.join(\" - \");\n      } else {\n        return value;\n      }\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos        \n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) === \"object\" && (value.id === undefined || value.id === \"\")) {\n          renderValues[properties.xpath] = \"\";\n        } else {\n          // Add the value to the server\n          renderValues[properties.xpath] = typeof value.id !== \"undefined\" ? value.id : \"\";\n        }\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var currentValue = self.getValue();\n    var originalValue = properties.originalValue;\n    var defaultValue = properties.defaultValue;\n\n    var result = true;\n\n    if ($.forceCollectData) {\n      return result;\n    }\n\n    currentValue = currentValue && currentValue.length !== undefined ? currentValue[0] : currentValue;\n    originalValue = originalValue && originalValue.length !== undefined ? originalValue[0] : originalValue;\n    defaultValue = defaultValue && defaultValue.length !== undefined ? defaultValue[0] : defaultValue;\n\n    currentValue = currentValue && currentValue.id !== undefined ? currentValue.id : currentValue;\n    originalValue = originalValue && originalValue.id !== undefined ? originalValue.id : originalValue;\n    defaultValue = defaultValue && defaultValue.id !== undefined ? defaultValue.id : defaultValue;\n\n    if (defaultValue !== undefined) {\n      if (defaultValue != originalValue || defaultValue != currentValue) {\n        result = true;\n      } else {\n        result = false;\n      }\n    } else {\n      result = currentValue != originalValue ? true : false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     * Parses additional values info in order to format them correctly\r\n     */\n  parseAdditionalValues: function parseAdditionalValues(data) {\n    var self = this;\n\n    return $.map(data, function (item) {\n      var value = item.value ? self.formatItem(item.value) : item;\n      var newItem = { id: item.id, value: value };\n\n      if (item.hidden) newItem.hidden = true;\n      return item;\n    });\n  },\n\n  /*\r\n     *   Complement data from server before control implementation\r\n     */\n  complementData: function complementData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var bCurrentDataFound = false;\n    $.each(data, function (i, item) {\n\n      if (item.value !== undefined && item.value !== null) {\n        item.value = self.formatItem(item.value);\n        if (properties.value) {\n          if (item.id == properties.value.id) {\n            bCurrentDataFound = true;\n          }\n        }\n      } else {\n        item.value = \"\";\n      }\n    });\n\n    // Add empty node if configured\n    if (self.showEmpty()) {\n      var emptyFound = false;\n      for (var i = 0, length = data.length; i < length; i++) {\n        if (data[i].id === \"\") {\n          emptyFound = true;\n          break;\n        }\n      }\n\n      if (!emptyFound) {\n        var dataValue = bizagi.override.emptyLabelForCombo || bizagi.localization.getResource(\"render-combo-empty-value\");\n        data.unshift({ id: \"\", value: dataValue });\n      }\n    }\n\n    if (properties.value) {\n      if (!bCurrentDataFound && self.showCurrentData()) {\n        data.unshift({ id: properties.value.id, value: properties.value.value, hidden: true });\n      }\n    }\n\n    // Add additional value\n    return self.parseAdditionalValues(data);\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    var currentValue = self.getValue();\n\n    if (bizagi.util.isEmpty(currentValue)) return false;\n    if (Object.prototype.toString.apply(currentValue) === \"[object Object]\" && (bizagi.util.isEmpty(currentValue.id) || currentValue.id == 0)) return false;\n\n    // Else\n    return true;\n  },\n\n  /*\r\n     * Cleans current data\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    this.column && !this.column.comboData && this.getData();\n  },\n\n  isExtraItem: function isExtraItem() {\n    var self = this;\n    var data = self.value || {};\n    var value = data.value || \"\";\n\n    return value === \"\" || value === self.getResource(\"render-combo-empty-selection\") || value === self.getResource(\"render-combo-empty-value\");\n  },\n\n  escapeValue: function escapeValue(value) {\n    if (bizagi.util.isString(value)) {\n      var valueToReturn = value.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n      return valueToReturn;\n    } else {\n      return value;\n    }\n  },\n\n  /**\r\n      *  Maps the value, when this one comes from actions\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  validateValue: function validateValue(value) {\n    if (value.id != undefined && (typeof value.id === \"number\" && value.id !== null || typeof value.id === \"string\" && value.id.length > 0)) {\n      if (value.value !== null && typeof value.value === \"boolean\") {\n        translated = true;\n        if (bizagi.util.parseBoolean(value.value) === true) {\n          value.value = bizagi.localization.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(value.value) === false) {\n          value.value = bizagi.localization.getResource(\"render-boolean-no\");\n        }\n      } else if (value.value != null && _typeof(value.value) === \"object\") {\n        for (var i = 0, length = value.value.length; i < length; i++) {\n          if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value.value[i]) === true) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Finds an element in the combo data values by id\r\n      * @param {int} id\r\n      * @returns {Object}\r\n      */\n  findDataValueById: function findDataValueById(id) {\n    return (this.properties.data || []).find(function (e) {\n      return e.id == id;\n    });\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Render Date Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for date renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.date\", {}, {\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n    var ud = bizagi.util.dateFormatter;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/gi) === -1) {\n        properties.fullFormat = properties.fullFormat + \" \" + properties.timeFormat;\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = ud.getDateFromInvariant(properties.value, properties.showTime);\n      // Format date to current format\n      if (date != 0) {\n        // Value must always hold the value with invariant format\n        self.value = properties.value;\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else {\n        self.value = null;\n      }\n    }\n\n    // Fix dateFormat for datepicker\n    dateFormat = self.getDateFormat(properties.fullFormat);\n\n    var indexDateTimeSeparation = properties.fullFormat.substring(0, properties.fullFormat.indexOf(\":\")).lastIndexOf(\" \");\n    if (!properties.showTime)\n    properties.fullFormat =\n    indexDateTimeSeparation > 0 ? properties.fullFormat.substring(0, indexDateTimeSeparation) : properties.fullFormat;\n\n    properties.datePickerFormat = dateFormat.datePickerFormat;\n    properties.timePickerFormat = dateFormat.timePickerFormat;\n\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"date\");\n    var fullFormat = properties.fullFormat;\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      showTime: properties.showTime,\n      value: properties.value,\n      editable: properties.editable,\n      dateFormat: bizagi.override && bizagi.override.uppercaseDatePlaceholder === true ? fullFormat.toUpperCase() : fullFormat,\n      rtl: properties.orientation == \"rtl\" });\n\n    return html;\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers(intHandler, isNow) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set control references\n    var dateControl = self.getDateControl();\n    var timeControl = self.getTimeControl();\n\n    // Attach change event\n    dateControl.bind(\"change\", function () {\n      self.onChangeHandler();\n    });\n\n    if (properties.showTime) {\n      timeControl.bind(\"change\", function (e, isNow) {\n        if (self.updatingTime) {\n          delete self.updatingTime;\n          return;\n        }\n        self.onChangeHandler(isNow);\n      });\n    }\n  },\n\n  /*\r\n      *   Formats the date time value to the hidden control\r\n      */\n  onChangeHandler: function onChangeHandler() {\n  },\n\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var displayValue;\n\n    if (!properties.displayValue && value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n    } else {\n      displayValue = \"\";\n    }\n\n    // We can return the display value isntance\n    return properties.displayValue || displayValue || \"\";\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          // Formats the value in full invariant (with time) in order to send to the server\n          var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n          if (typeof date != \"undefined\")\n          if (date !== 0) {\n            if (!properties.showTime) {\n              date.setHours(0, 0, 0, 0);\n            }\n            renderValues[properties.xpath] = bizagi.util.dateFormatter.formatInvariant(date, true);\n          }\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n  },\n\n  /*\r\n      *   Gets the time control\r\n      */\n  getTimeControl: function getTimeControl() {\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable) === true) {\n        value = self.getNormalizeDate(bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime));\n        var message;\n\n        // Check that we have a valid data\n        if (value != 0) {\n          // Check min value\n          if (properties.minValue && (typeof properties.minValue === \"string\" || typeof properties.minValue == \"number\")) {\n            var minValue = self.getNormalizeDate(\n            typeof properties.minValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.minValue, properties.showTime) :\n            new Date(properties.minValue));\n\n\n            if (value < minValue) {\n              message = this.getResource(\"render-date-minimum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#minValue#\", bizagi.util.dateFormatter.formatDate(minValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n\n          // Check max value\n          if (properties.maxValue && (typeof properties.maxValue == \"string\" || typeof properties.maxValue == \"number\")) {\n            var maxValue = self.getNormalizeDate(\n            typeof properties.maxValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.maxValue, properties.showTime) :\n            new Date(properties.maxValue));\n\n\n            if (value > maxValue) {\n              message = this.getResource(\"render-date-maximum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#maxValue#\", bizagi.util.dateFormatter.formatDate(maxValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n        }\n      }\n    }\n    return bValid;\n  },\n\n  /**\r\n      * Translate standar date format to jquery date picker\r\n      * @property {string} format Control's date format\r\n      * @returns {JSON object} A JSON Object whith the date and time format\r\n      */\n  getDateFormat: function getDateFormat(format) {\n    var datePickerFormat = format;\n    var timePickerFormat = undefined;\n    var init;\n\n    if (format.search(\"h\") != -1 || format.search(\"H\") != -1) {\n      if (format.search(\"h\") != -1) {\n        init = format.search(\"h\");\n      } else {\n        init = format.search(\"H\");\n      }\n\n      datePickerFormat = format.substring(0, init - 1);\n      timePickerFormat = format.substr(init);\n    }\n\n    // Fix month\n    if (datePickerFormat.indexOf(\"MMMM\") >= 0) {\n      datePickerFormat = datePickerFormat.replaceAll(\"MMMM\", \"MM\");\n    } else if (datePickerFormat.indexOf(\"MMM\") >= 0) {\n      // Month name short\n      datePickerFormat = datePickerFormat.replaceAll(\"MMM\", \"M\");\n    } else if (datePickerFormat.indexOf(\"MM\") >= 0) {\n      // Month two digits\n      datePickerFormat = datePickerFormat.replaceAll(\"MM\", \"mm\");\n    } else if (datePickerFormat.indexOf(\"M\") >= 0) {\n      // Month one digits\n      datePickerFormat = datePickerFormat.replaceAll(\"M\", \"m\");\n    }\n\n    // Fix years\n    if (datePickerFormat.search(\"yyyy\") != -1) {\n      datePickerFormat = datePickerFormat.replaceAll(\"yyyy\", \"yy\");\n    } else {\n      if (datePickerFormat.search(\"yy\") != -1) {\n        datePickerFormat = datePickerFormat.replaceAll(\"yy\", \"y\");\n      }\n    }\n\n    datePickerFormat = datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n\n    return {\n      datePickerFormat: datePickerFormat,\n      timePickerFormat: timePickerFormat };\n\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    this._super();\n    if (typeof properties.maxValue == \"undefined\")\n    properties.maxValue = \"12/31/\" + parseInt(new Date().getFullYear() + 200).toString() + \" 00:00:00\"; //Current year + 200 IE or 9999\n    if (typeof properties.minValue == \"undefined\")\n    properties.minValue = \"01/01/\" + parseInt(new Date().getFullYear() - 200).toString() + \" 00:00:00\"; //Current year - 200 IE or 1753 for SQL Server compat\n  },\n\n  /**\r\n      * Sets milliseconds to 0 in date\r\n      * @param {Date} date date to be treated\r\n      * @returns {Date} date converted with milliseconds 0\r\n      */\n  getNormalizeDate: function getNormalizeDate(date) {\n    var self = this;\n    if (date != 0 && date != null) {\n      if (!self.properties.showTime) {\n        date.setHours(0, 0, 0, 0);\n      } else date.setMilliseconds(0);\n    }\n    return date;\n  },\n\n  /**\r\n      * Configure the timeformat\r\n      */\n  getTimeFormat: function getTimeFormat(format) {\n    return format.replaceAll(\"m\", \"i\").replaceAll(\"tt\", \"A\");\n  },\n\n  /**\r\n      * Sets value to the control\r\n      * @param {Date} date date to asign\r\n      * @returns {}\r\n      */\n  setValueFromCalendarButtons: function setValueFromCalendarButtons(date) {\n    var self = this;\n    if (date) date = self.getNormalizeDate(date);else\n    {\n      value = null;\n      self.setValue(\"\");\n      self.setDisplayValue(\"\");\n    }\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.minValue = value;\n    }\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.maxValue = value;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Text Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for text renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.extendedText\", {}, {\n\n  /**\r\n                                                       * Update or init the element data\r\n                                                       * @param {} data\r\n                                                       */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    this.hasMaxLines = this.properties.maxLines ? true : false;\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // Fill default properties\n    properties.maxLines = this.properties.maxLines || 6;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || self.getResource(\"render-text-regular-expression-default-message\");\n\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"extendedText\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n\n    var control = self.getControl();\n    self.textarea = control.find(\"textarea\");\n\n    // If is textarea, then enable resize element.\n    if (self.textarea) {\n      self.textarea.css({ resize: \"both\" });\n    } else {\n      self.textarea.css({ resize: \"none\" });\n    }\n\n    // Attach event for retype double\n    if (self.properties.retype === \"double\")\n    self.attachRetypeDouble();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set the default maxlength for the input if is 0 or undefined set to infinity\n    // this resolve issue with scope strings that don't have maxlength\n    if (properties.maxLength)\n    self.textarea.prop('maxlength', properties.maxLength);\n\n    if (properties.maxLines) {\n      self.textarea.prop('rows', properties.maxLines);\n    } else {\n      self.textarea.prop('rows', 6);\n    }\n\n    // Attach change event\n    self.textarea.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.textarea.val());\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.textarea.val(), true);\n        } else {\n          // Set error message\n          var message = validationMessages[0].message;\n          bizagi.showMessageBox(message, \"Bizagi\", \"error\");\n        }\n      }\n    });\n\n    // Attach blur event\n    self.textarea.bind(\"blur\", function () {\n      // Updates internal value\n      self.setValue(self.textarea.val());\n    });\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var regEx = new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\");\n\n    // Offline capability\n    if (this.isOfflineForm && bizagi.util.isMobileDevice()) {\n      value = value && _typeof(value) === \"object\" && value.value ? value.value : value;\n    }\n\n    // Check regular expression\n    if (properties.regularExpression) {\n      if (properties.editable) {\n        if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)) && self.properties && self.properties.xpath === \"userName\")) {\n          message = properties.regularExpression.message;\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        } else {\n          if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)))) {\n            message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    } else {\n      if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n        if (properties.editable) {\n          message = this.getResource(\"render-text-regular-expression-default-message\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (self.properties.editable == false) {\n      // Render as simple value\n      if (typeof value == \"string\") {\n\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(valueToDisplay);\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectData: function collectData(renderValues) {\n    // Call base\n    this._super(renderValues);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * More information SUITE-9407\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value) {\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    this._super(decodedValue);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Int} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Grid Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for grids\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.grid\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n    self.originalProperties = bizagi.clone(data.properties);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    self.initProperties();\n\n    // Set columns\n    var areThereEditableColumns;\n    var areThereTotalizedColumns;\n    self.columns = [];\n    self.columnsIds = [];\n    self.enabledChecks = {};\n    self.exclusiveChanges = {};\n    self.originalEnabledChecks = [];\n    $.each(data.elements, function (i, column) {\n      var columnProperties = column.render.properties;\n\n      // the groupby property is taken of column\n      if (columnProperties.groupBy) {\n        properties.groupBy = columnProperties.xpath || \"\";\n        properties.allowGrouping = !bizagi.util.isEmpty(properties.groupBy) ? true : false;\n      }\n\n      if (/columnBoolean/i.test(columnProperties.type) && columnProperties.isExclusive) {\n        properties.hasExclusiveCheck = true;\n        column.render.properties.required = false;\n        self.enabledChecks[columnProperties.xpath] = [];\n      }\n\n      // If inlineEdit is false then all columns must be read only\n      if (!self.properties.inlineEdit) {\n        column.render.properties.editable = false;\n      }\n\n      // Create renderColumns\n      var columnRender = self.renderFactory.getColumn({\n        type: columnProperties.type,\n        data: column.render,\n        parent: self,\n        singleInstance: properties.singleInstance });\n\n\n      self.columns.push(columnRender);\n      self.columnsIds.push(column.render.properties.id);\n\n      if (columnProperties.editable) {\n        areThereEditableColumns = true;\n      }\n\n      if (columnProperties.totalize && columnProperties.totalize.operation) {\n        areThereTotalizedColumns = true;\n\n        // Default summary format\n        columnProperties.totalize.format = columnProperties.totalize.format || {};\n        columnProperties.totalize.format.bold = columnProperties.totalize.format.bold !== undefined ? columnProperties.totalize.format.bold : true;\n      }\n    });\n\n    // Reverse columns when using right to left orientation\n    if (properties.orientation === \"rtl\")\n    self.columns = self.columns.reverse();\n\n    // Turn off inline edit if there are any editable columns        \n    if (properties.inlineEdit && !areThereEditableColumns) {\n      properties.inlineEdit = false;\n      properties.allowEdit = false;\n    }\n\n    // Check if the grid has totalizers\n    if (areThereTotalizedColumns) {\n      properties.showSummary = true;\n      properties.rowsPerPage = 0;\n    }\n  },\n\n  initProperties: function initProperties() {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    /** Edit properties\r\n                                       * @default editable true\r\n                                       * @default  allowAdd true\r\n                                       */\n    $.extend(properties, self.initEditabilityProperties(\n    properties.editable,\n    properties.allowEdit,\n    properties.inlineEdit,\n    properties.withEditForm),\n    self.initAddAndDeleteProperties(\n    properties.editable,\n    properties.allowAdd,\n    properties.inlineAdd,\n    properties.allowDelete));\n\n\n    /* Define details properties*/\n    properties.allowDetail = bizagi.util.parseBoolean(properties.allowDetail) != null ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.isSortable = bizagi.util.parseBoolean(properties.isSortable) != null ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    /* Define general properties */\n    properties.keyColumn = \"\";\n    properties.data = properties.data || null;\n    properties.displayType = \"value\";\n    properties.skipInitialLoad = properties.skipInitialLoad || false;\n    properties.allowMore = bizagi.util.parseBoolean(properties.allowMore) || false;\n    properties.allowFilter = bizagi.util.parseBoolean(properties.allowFilter) || false;\n    properties.allowGrouping = false;\n    properties.groupBy = \"\";\n    properties.groupSummary = properties.groupSummary || null;\n    properties.groupText = this.getResource(\"render-grid-group-text\");\n    properties.groupCollapsed = bizagi.util.parseBoolean(properties.groupCollapsed) || false;\n    properties.groupOrder = properties.groupOrder || \"asc\";\n    properties.formShowMode = bizagi.util.parseBoolean(properties.formShowMode) || \"popup\";\n    properties.floatingHeader = bizagi.util.parseBoolean(properties.floatingHeader) || false;\n\n    properties.sortBy = properties.sortBy ? properties.sortBy : properties.data && properties.data.sort ? properties.data.sort : properties.keyColumn;\n    properties.sortOrder = properties.sortOrder !== undefined && properties.sortOrder !== null ? properties.sortOrder === \"True\" ? \"asc\" : \"desc\" : properties.data && properties.data.order ? properties.data.order : \"asc\";\n    properties.sort = properties.sortBy + \" \" + properties.sortOrder;\n\n    properties.rowsPerPage = properties.allowGrouping ? 1000 : properties.rowsPerPage || 20;\n    properties.page = 1;\n    properties.records = 0;\n    properties.totalPages = 0;\n\n    properties.addLabel = properties.addLabel || $.trim(this.getResource(\"render-grid-add-label\")) + \" \" + properties.displayName;\n    properties.editLabel = properties.editLabel || $.trim(this.getResource(\"render-grid-edit-label\")) + \" \" + properties.displayName;\n    properties.deleteLabel = properties.deleteLabel || this.getResource(\"render-ecm-confirm-bt-delete\") + \" \" + properties.displayName;\n    properties.exportOptionsLabel = properties.exportOptionsLabel || this.getResource(\"render-grid-export-options-label\") + properties.displayName;\n    properties.detailLabel = properties.detailLabel || this.getResource(\"render-collection-navigator-details-form\");\n\n    // Apply style to entire table\n    properties.tableCssClass = properties.cssClass || \"\";\n\n    properties.alreadySaved = false;\n\n    // When grid open in modal window and the parent is entity\n    if (properties.contexttype != \"entity\") {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Define if it is editable or not        \n    /* This part change all cells in the table to no editable,\r\n     * you must use it when the parent container has noeditable property,\r\n     * so this table is noeditable too.\r\n     */\n    try {\n      if (self.parent && typeof self.parent.properties.editable == \"boolean\" && !self.parent.properties.editable || !properties.editable) {\n        properties.editable = false;\n        properties.allowEdit = false;\n        properties.inlineEdit = false;\n        properties.allowAdd = false;\n        properties.inlineAdd = false;\n        properties.allowDelete = false;\n      }\n    } catch (e) {\n    }\n\n    // If grid has not allowEdit property in true, all fields within the grid\n    // must be no editables, so these lines changes this behavior\n    if (!properties.allowEdit || !properties.inlineEdit && !properties.withEditForm) {\n      properties.editable = false;\n    }\n\n    // Calculate render width\n    properties.labelWidth = 0;\n    properties.valueWidth = \"100%\";\n\n    // This property will be used to make custom grids with another data source\n    properties.overrideGetRemoteData = properties.overrideGetRemoteData || undefined;\n    //this property use to create a single decorated or a array of decorated\n    properties.singleInstance = bizagi.util.isEmpty(properties.singleInstance) ? true : properties.singleInstance;\n\n    // Check if the grid its opened whitin dialog form and has contextType\n    properties.contextType = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : null;\n\n    // Create a collection to collect changes\n    self.changes = {};\n\n    // Create a collection to override properties per cell\n    self.cellOverrides = {};\n\n    // Check orientation and change order of data if its necesary (rtl)\n    if (self.isRTL() && properties.data != null) {\n      properties.data.rows = self.changeOrderData(properties.data.rows);\n    }\n  },\n\n  initEditabilityProperties: function initEditabilityProperties(editable, allowEdit, inlineEdit, withEditForm) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowEdit = bizagi.util.parseBoolean(allowEdit) !== null ? bizagi.util.parseBoolean(allowEdit) : true;\n    inlineEdit = bizagi.util.parseBoolean(inlineEdit) !== null ? bizagi.util.parseBoolean(inlineEdit) : true;\n    withEditForm = bizagi.util.parseBoolean(withEditForm) !== null ? bizagi.util.parseBoolean(withEditForm) : false;\n\n    if (!editable) {\n      allowEdit = inlineEdit = withEditForm = false;\n    }\n\n    return {\n      editable: editable,\n      allowEdit: allowEdit,\n      inlineEdit: inlineEdit,\n      withEditForm: withEditForm };\n\n  },\n\n  initAddAndDeleteProperties: function initAddAndDeleteProperties(editable, allowAdd, inlineAdd, allowDelete) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowAdd = bizagi.util.parseBoolean(allowAdd) != null ? bizagi.util.parseBoolean(allowAdd) : true;\n    inlineAdd = bizagi.util.parseBoolean(inlineAdd) != null ? bizagi.util.parseBoolean(inlineAdd) : true;\n    // Define Delete \n    allowDelete = bizagi.util.parseBoolean(allowDelete) != null ? bizagi.util.parseBoolean(allowDelete) : true;\n\n    if (!allowAdd) {\n      inlineAdd = false;\n    }\n\n    if (!editable) {\n      allowAdd = inlineAdd = allowDelete = false;\n    }\n\n    return {\n      allowAdd: allowAdd,\n      inlineAdd: inlineAdd,\n      allowDelete: allowDelete };\n\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    return this.properties.data && this.properties.data.rows.length > 0;\n  },\n\n  isRTL: function isRTL() {\n    var properties = this.properties;\n    if (!properties) return true;\n    return typeof properties.orientation == \"string\" && properties.orientation.toUpperCase() == \"RTL\" ? true : false;\n  },\n\n  changeOrderData: function changeOrderData(data) {\n    var reverseDataRows = [];\n    var rows = data || [];\n    var rowKey;\n\n    $.each(rows, function (key, value) {\n      // Extract row key\n      rowKey = value.shift();\n      reverseDataRows = value.reverse();\n      // add element in the start\n      reverseDataRows.unshift(rowKey);\n\n      rows[key] = reverseDataRows;\n    });\n\n    return rows;\n  },\n\n  /**\r\n      * Specific fix RTL with localizated\r\n      * @param data\r\n      * @returns {*|Array}\r\n      */\n  removeRemainingColumns: function removeRemainingColumns(data, numColumns) {\n    var rows = data || [];\n    var remainingColumns = 0;\n    if (rows.length > 0) {\n      // \"- 1\" because the first column represent id row\n      remainingColumns = rows[0].length - numColumns - 1;\n    }\n    if (remainingColumns > 0) {\n      $.each(rows, function (key, value) {\n        // Remove remaining columns\n        for (var i = 0; i < remainingColumns; i++) {\n          value.pop();\n        }\n      });\n    }\n    return rows;\n  },\n\n  /* \r\n      *   Gets a column definition by xpath\r\n      */\n  getColumn: function getColumn(xpath) {\n    var self = this;\n    var result = null;\n    $.each(self.columns, function (i, column) {\n      if (\n      column.properties.xpath == xpath ||\n      column.properties.id == xpath ||\n      column.properties.xpath + \".\" + column.properties.id == xpath)\n      {\n        result = column;\n      }\n    });\n\n    return result;\n  },\n\n  getColumnType: function getColumnType(id) {\n    var self = this;\n    var columnIndex = self.columnsIds.indexOf(id);\n\n    if (columnIndex != -1) {\n      return self.columns[columnIndex].properties.type;\n    }\n\n    return null;\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var defer = new $.Deferred();\n\n    // Set dummy data when not in execution mode\n    var mode = self.getMode();\n    if (mode !== \"execution\") {\n      properties.data = self.getDummyData();\n    }\n\n    var template = self.getGridTemplate();\n\n    // Render template\n    var html = self.applyTemplate(template);\n\n    // Initialize columns\n    var columnInitializers = [];\n    $.each(self.columns, function (i, column) {\n\n      // Add to column initializer array so we can synch out the promises\n      var result = column.initialize();\n      if (result)\n      columnInitializers.push(result);\n    });\n\n    // Resolve when all columns has been loaded\n    $.when.apply($, columnInitializers).done(function () {\n      defer.resolve(html);\n    });\n\n    return defer.promise();\n  },\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    this._super();\n\n    // Make control to behave as a block container\n    // TODO: Move to instances. This does not apply to mobiles\n    control.addClass(\"ui-bizagi-render-grid-container\").\n    addClass(\"ui-bizagi-render-display-block\");\n  },\n\n  /*\r\n      *   Returns the grid template to be used\r\n      */\n  getGridTemplate: function getGridTemplate() {\n    return this.renderFactory.getTemplate(\"grid\");\n  },\n\n  /*\r\n      *   Applies the template to the render and returns the resolved element\r\n      */\n  applyTemplate: function applyTemplate(template) {\n    var self = this,\n    properties = self.properties;\n    orientation = self.properties.orientation;\n\n    return $.fasttmpl(template, {\n      id: bizagi.util.encodeXpath(properties.xpath),\n      displayName: bizagi.util.encodeXpath(properties.displayName),\n      allowAdd: properties.allowAdd,\n      addLabel: properties.addLabel });\n\n  },\n  /*\r\n      *   Method to render non editable values\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    // Override read-only presets\n    //  properties.allowAdd = false;\n    // Render the same, just change some presets\n    return self.renderControl();\n  },\n  /*\r\n      *   Fetch the data into a deferred\r\n      */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      sort: properties.sortBy,\n      order: properties.sortType,\n      page: properties.page,\n      rows: properties.rowsPerPage,\n      searchFilter: properties.searchFilter,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      return properties.overrideGetRemoteData(params);\n    } else {\n      // Resolve with remote data\n      return self.dataService.multiaction().getGridData(params).then(function (data) {\n        self.originalProperties = self.originalProperties || {};\n        self.originalProperties.data = bizagi.clone(data);\n\n        // Resolve with fetched data\n        properties.page = data.page;\n        properties.records = data.records;\n        properties.totalPages = data.totalPages;\n\n        return data;\n      }).fail(function (error) {\n        console.error(error.message || \"Error\");\n      });\n    }\n  },\n  /*\r\n      insert a blank item in the selected column in the data matrix\r\n      */\n  spliceRowData: function spliceRowData(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.rows) {\n      $.each(data.rows, function (key, value) {\n        var spliceIndex = index || data.rows[key].length;\n        data.rows[key].splice(spliceIndex, 0, \"\");\n      });\n    }\n  },\n\n  spliceRowDataVisible: function spliceRowDataVisible(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.visible) {\n      $.each(data.visible, function (key, value) {\n        var spliceIndex = index || data.visible[key].length;\n        data.visible[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  spliceRowDataEditable: function spliceRowDataEditable(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.editable) {\n      $.each(data.editable, function (key, value) {\n        var spliceIndex = index || data.editable[key].length;\n        data.editable[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  /*\r\n      *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n      */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      var rowTemplate = [\"1\"];\n\n      // Add a value for each column\n      for (var i = 0; i < self.columns.length; i++) {\n        rowTemplate.push(\"\");\n      }\n\n      var data = {\n        \"page\": 1,\n        \"total\": 1,\n        \"records\": 1,\n        \"rows\": [rowTemplate] };\n\n\n      return data;\n    }\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType });\n\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this,\n    properties = self.properties;\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + self.buildCellXpathFilter(id) : properties.xpath + self.buildCellXpathFilter(id);\n\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n      return self.dataService.saveGridRecord({\n        url: properties.saveUrl,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        submitData: data,\n        contexttype: properties.contextType,\n        disableServerGridValidations: data.disableServerGridValidations || false }).\n      pipe(function (dataResp) {\n        self.endLoading();\n        return dataResp;\n      }).fail(function (dataFail) {\n        var form = self.getFormContainer();\n        var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n        //Convert String to object\n        if (typeof message == \"string\") {\n          try {\n            message = JSON.parse(message).message;\n          } catch (e) {\n            message = message.match(/\"message\":(.*)\",/)[0];\n            message = message.substr(11, message.length - 13);\n          }\n\n        } else if (!message.message) {\n          message = dataFail;\n        }\n        form.validateForm();\n        form.clearValidationMessages();\n        form.addValidationMessage(message);\n      });\n    });\n  },\n  /*\r\n      *   Submits a grid delete record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n  /*\r\n      *   Submits a grid add record request\r\n      *   Returns a deferred when done, the server returns an id for the new record\r\n      */\n  submitAddRequest: function submitAddRequest() {\n    var self = this,\n    properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n  /*\r\n      *   Submits a grid rollback request\r\n      *   Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this,\n    properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: params ? params.idPageCache : properties.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /**\r\n      * Collect a single cell change made in the grid to send the data when the user saves the form\r\n      * @param params\r\n      */\n  collectGridChange: function collectGridChange(params) {\n    var self = this;\n    params = params || {};\n    var id = params.id;\n    var dataType = params.dataType;\n    var xpath = params.xpath;\n    var value = params.value;\n    var trigger = typeof params.trigger !== \"undefined\" ? params.trigger : true;\n    var isPressed = params.pressed || false;\n    var renderType = dataType && bizagi.util.normalizeType(dataType);\n\n    self.changes[id] = self.changes[id] || {};\n\n    if (/^columnsearch$/i.test(renderType) && value && typeof value.id !== \"undefined\") {\n      self.changes[id][xpath] = value.id;\n    } else {\n      self.changes[id][xpath] = value;\n    }\n\n    if (trigger) {\n      self.triggerRenderChange({ key: id, column: xpath, pressed: isPressed });\n    }\n  },\n  /*\r\n      *   Configures a column to perform a submit on change when the user changes a cell\r\n      */\n  configureColumnSubmitOnChange: function configureColumnSubmitOnChange(xpath) {\n    var self = this;\n    var properties = self.properties;\n\n    // Build action\n    var action = {\n      commands: [{\n        xpath: properties.xpath,\n        command: 'submit-value',\n        argument: 'all' }],\n\n      conditions: {\n        operator: 'and',\n        expressions: [\n        {\n          simple: {\n            operator: 'cell-change',\n            xpath: properties.xpath + '[].' + xpath,\n            argumentType: 'text',\n            argument: xpath } }] },\n\n\n\n\n      dependencies: [properties.xpath] };\n\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).\n    done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var keysToDelete = [];\n\n    if (self.exclusiveChanges) {\n      //Add filter to parse all checks in tru to false. DON'T CHANGE CODE ORDER\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          // If there are any change, its needed to include as a change the filter to set all rows in false\n          var xpathExclusiveFilter = properties.xpath + \"[\" + xpath + \"=true].\" + xpath;\n          renderValues[xpathExclusiveFilter] = false;\n        }\n      }\n    }\n\n    for (var id in self.changes) {\n      // Dont collect data from totalizers \n      if (id != \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\n            var value = self.changes[id][columnXpath];\n\n            renderValues[xpath] = value;\n          }\n        }\n      }\n\n      // Clean changes \n      keysToDelete.push(id);\n\n    }\n    //If any exclusive check is true, set the new value in renderValues. DON'T CHANGE CODE ORDER\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          var checkedObject = self.exclusiveChanges[xpath];\n          if (checkedObject && checkedObject.value) {\n            var columnSimpleXpathEnabled = properties.xpath + self.buildCellXpathFilter(checkedObject.key) + \".\" + xpath;\n            renderValues[columnSimpleXpathEnabled] = checkedObject.value;\n          }\n        }\n      }\n    }\n\n    // Clean changes array in order to prevent duplicate data\n    // when execute SUBMITDATA in multiaction, that make and error\n    // in circular dependencies, specially when we add inline record\n    $.each(keysToDelete, function (key, v) {\n      delete self.changes[v];\n    });\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (!$.isEmptyObject(self.changes)) {\n      result.push(true);\n      return true;\n    } else {\n      if (!$.isEmptyObject(self.exclusiveChanges)) {\n        result.push(true);\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  /*\r\n      *   Check if a column data can be sent to the server\r\n      */\n  canColumnBeSent: function canColumnBeSent(id, columnXpath) {\n    var self = this,i,j,xpath;\n    for (i in self.columns) {\n      if (self.columns.hasOwnProperty(i)) {\n        var column = self.columns[i];\n        if (column.properties.type !== \"columnUserfield\") {\n          if (column.properties.xpath == columnXpath) {\n            var cellOverride = self.getCellOverride(id, column.columnIndex - 1);\n            return column.canBeSent(id, cellOverride);\n          }\n        } else {\n          for (j in column.properties) {\n            if (column.properties.hasOwnProperty(j)) {\n              if (Object.prototype.toString.apply(column.properties[j]) === \"[object String]\") {\n                xpath = column.properties[j].substr(column.properties[j].lastIndexOf(\".\") + 1);\n                if (xpath === columnXpath) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n\n      }\n    }\n\n    return false;\n  },\n  /* \r\n      *  Method to determine if the render value can be sent to the server or not\r\n      */\n  canBeSent: function canBeSent() {\n    var self = this;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n\n    // The render can be sent if it is \"display only\" and inline Edit is available\n    if (!displayOnly && (properties.inlineEdit || properties.inlineAdd || !$.isEmptyObject(self.changes))) {\n      return true;\n    }\n    return false;\n  },\n  /*\r\n      *   Return the value for a requested cell\r\n      */\n  getCellValue: function getCellValue(key, xpath) {\n    var self = this;\n    var data = self.properties.data.rows;\n    for (var i = 0; i < data.length; i++) {\n      if (data[i][0] == key) {\n        for (var j = 0; j < self.columns.length; j++) {\n          if (self.columns[j].properties.xpath == xpath) {\n            var result = data[i][j + 1];\n            return result;\n          }\n        }\n      }\n    }\n    return null;\n  },\n  /*\r\n      *\r\n      */\n  getCellCurrentValue: function getCellCurrentValue(key, xpath) {\n    var self = this;\n\n    var control = self.getControlCell(key, xpath);\n    if (control && typeof control.getValue === \"function\") {\n      return control.getValue();\n    }\n    return null;\n  },\n  /*\r\n      *   Gets control\r\n      */\n  getControlCell: function getControlCell(key, xpath) {\n    var self = this;\n    var control = null;\n    if (typeof self.columns != \"undefined\")\n    for (var j = 0; j < self.columns.length; j++) {\n      if (\n      self.columns[j].properties.xpath == xpath ||\n      self.columns[j].properties.id == xpath ||\n      self.columns[j].properties.xpath + \".\" + self.columns[j].properties.id == xpath)\n      {\n        control = self.columns[j].getDecorated(key);\n        break;\n      }\n    }\n\n\n    return control;\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /*\r\n      *   Fetch the data again and updates the content\r\n      */\n  refresh: function refresh() {\n  },\n  /*\r\n      *   Sets an error on the cell\r\n      */\n  setError: function setError(key, columnXpath) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a cell\r\n      */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n  },\n  /*\r\n      *  Changes the required for cell\r\n      */\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the editability for a cell\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n  },\n  /*\r\n      *  Refresh behaviors of cell\r\n      */\n  changeCellProperties: function changeCellProperties(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the max value for a cell\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the min value for a cell\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n\n  },\n\n  /*\r\n     *   Changes the editability for a column\r\n     */\n  changeColumnEditability: function changeColumnEditability(xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a column\r\n      */\n  changeColumnVisibility: function changeColumnVisibility(xpath, argument) {\n  },\n  /*\r\n      *   Changes the required for a column\r\n      */\n  changeColumnRequired: function changeColumnRequired(xpath, argument) {\n  },\n\n  /*\r\n      *  Clean data of cell\r\n      */\n  cleanCellData: function cleanCellData(key, xpath) {\n  },\n\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var control = self.getControl();\n\n    self.saveGrid().done(function () {\n      var tmpEditable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n      // Clears control\n      control.empty();\n\n      var originalProperties = self.originalProperties;\n\n      $.extend(self.properties, self.initEditabilityProperties(\n      tmpEditable,\n      originalProperties.allowEdit,\n      originalProperties.inlineEdit,\n      originalProperties.withEditForm),\n      self.initAddAndDeleteProperties(\n      tmpEditable,\n      originalProperties.allowAdd,\n      originalProperties.inlineAdd,\n      originalProperties.allowDelete));\n\n\n      self.properties.editabilityEnabled = self.properties.editabilityEnabled || self.properties.editable;\n\n      // argument because it is necessary to propagate the default value to the column controls\n      if (!tmpEditable) {\n        self.changeColumnsEditability(false);\n      } else if (self.properties.allowEdit && self.properties.inlineEdit) {\n        self.changeColumnsEditability(argument);\n      }\n\n      if (typeof self.internalRenderControl == \"function\") {\n        $.when(self.internalRenderControl()).done(function (html) {\n          control.append(html);\n          self.postRenderElement(self.element);\n        });\n      }\n    });\n\n  },\n\n  saveGrid: function saveGrid() {\n    var self = this;\n    var defer = $.Deferred();\n\n    var rows = $(\"[data-bizagi-component=rows]\", self.element).find(\"[data-new-row=true]\");\n\n    if (rows.length > 0) {\n      var newRows = $.map(rows, function (row, i) {\n        return $(row).data(\"business-key\");\n      });\n\n      self.saveInlineAddedRows(newRows).done(function () {\n        $.when(self.saveRows()).done(function () {\n          self.refresh();\n          defer.resolve();\n        });\n      });\n    } else {\n      defer.resolve();\n    }\n\n    return defer.promise();\n  },\n\n  changeColumnsEditability: function changeColumnsEditability(value) {\n    var self = this;\n    var columns = self.columns || [];\n\n    $.each(columns, function (i, column) {\n      column.properties.editable = value == \"Default\" ? column.originalProperties.editable : bizagi.util.parseBoolean(value);\n    });\n  },\n\n  /**\r\n      *   Refresh behaviors of cell\r\n      */\n  refreshCell: function refreshCell(params) {\n    var self = this;\n    var properties = self.properties;\n    var key = params.key;\n    var column = params.column;\n    var xpathContext = params.xpathContext !== \"\" ? params.xpathContext + \".\" + self.properties.xpath + self.buildCellXpathFilter(key) : self.properties.xpath + self.buildCellXpathFilter(key);\n    var cell = self.getControlCell(key, params.column);\n    var form = self.getFormContainer();\n    var idForm = form.properties.id;\n\n    if (!cell) {\n      return;\n    }\n\n    // Execute personalized stuff before to refresh it\n    cell.beforeToRefresh();\n\n    // Call service\n    return $.when(self.dataService.multiaction().refreshGridCell({\n      idRender: properties.id,\n      column: cell.properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: xpathContext,\n      idForm: idForm,\n      typeRender: bizagi.util.normalizeType(cell.properties.type) })).\n    done(function (data) {\n      // Extract values\n      var getDepthData = function getDepthData(target) {\n        if (target && _typeof(target) == \"object\" && target.length >= 1) {\n          return target[0].length >= 1 ? target[0][0] : target[0];\n        }\n        return \"\";\n      };\n      var newValue = getDepthData(data.rows);\n      var editable = getDepthData(data.editable);\n      if (!bizagi.util.isBoolean(editable)) {\n        editable = editable || true;\n      }\n      var visible = getDepthData(data.visible);\n      if (!bizagi.util.isBoolean(visible)) {\n        visible = visible || true;\n      }\n\n      // Change Visibility & Editability\n      self.changeCellVisibility(key, column, visible);\n      self.changeCellEditability(key, column, editable);\n\n      // Change control value\n      var cellValue = cell.formatValue(newValue);\n\n      cell.setValue(cellValue);\n      cell.setDisplayValue(cellValue);\n\n      // Trigger grid change\n      self.triggerRenderChange({ key: key, column: column, changed: false });\n\n      if (bizagi.override.restoreAppearanceAfterRefresh) {\n        cell.restoreCellAppearance();\n      }\n\n      // Update the affected cell manually after a refresh\n      //TODO:temporary solution\n      //review the DRAGON-5982 \n      if (cell.column != undefined && bizagi.util.detectDevice() == \"desktop\") {\n        self.updateAffectedCellManually(key, cellValue, cell.column.columnIndex);\n      }\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh({ action: \"refreshCell\" });\n    });\n  },\n\n  /*\r\n      *   Triggers the render change event\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    // Property to verify exporting updated grids\n    if (!bizagi.util.isEmpty(params) && params.changed != false)\n    self.properties.canBeExported = false;\n    self.triggerHandler(\"renderchange\", {\n      render: self,\n      surrogateKey: params.key,\n      column: params.column,\n      changed: params.changed,\n      rowDeleted: params.rowDeleted,\n      pressed: params.pressed });\n\n  },\n\n  /*\r\n      *   Validate the grid\r\n      */\n  validate: function validate() {\n    this.isValid([]);\n  },\n  /* \r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var bValid = true;\n\n    // Clear error message\n    self.hasErrors = false;\n    self.setValidationMessage(\"\");\n\n    // Check for required columns and null values\n    if (self.properties.data && self.properties.data.rows) {\n      var newRows = self.getDataNewRows();\n      // Preserve elements in data.rows\n      // Check required\n      if (newRows.length == 0 && bizagi.util.parseBoolean(self.properties.required)) {\n        if (!self.hasValue()) {\n          message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({\n            xpath: self.properties.xpath,\n            message: message });\n\n          bValid = false;\n        }\n      }\n\n      var data = $.merge($.merge([], self.properties.data.rows), newRows);\n\n      for (var i = 0; i < self.columns.length; i++) {\n        var messages = [];\n        var uniqueMessages = {};\n\n        for (var j = 0; j < data.length; j++) {\n          var value = data[j][i + 1];\n          var key = data[j][0];\n          var xpath = self.columns[i].properties.xpath;\n          if (self.changes[key] !== undefined && self.changes[key][self.columns[i].properties.xpath] !== undefined) {\n            value = self.changes[key][self.columns[i].properties.xpath];\n          }\n\n          // Check if the column is valid\n          var valueValid = self.columns[i].isValueValid(key, value, messages, self.getCellOverride(key, i));\n          if (!valueValid) {\n            bValid = false;\n\n            self.hasErrors = true;\n            self.setError(key, self.columns[i].properties.xpath);\n          }\n        }\n        for (var k = 0, messagesLength = messages.length; k < messagesLength; k++) {\n          if (uniqueMessages[messages[k]] == null) {\n            uniqueMessages[messages[k]] = messages[k];\n          }\n        }\n\n        if (messages.length > 0) {\n          var gridValidationMessage = self.getResource(\"render-grid-validation\").replaceAll(\"#grid#\", self.properties.displayName);\n          for (key in uniqueMessages) {\n            invalidElements.push({\n              xpath: self.properties.xpath,\n              message: gridValidationMessage + \" \" + key });\n\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n  /*\r\n      *   Enables submit on change feature for the current render\r\n      */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    // Don't do anything we will trigger submit on change manually only when the grid add or edit form has been edited   \n  },\n  /*\r\n      *   Get cell override\r\n      */\n  getCellOverride: function getCellOverride(key, column) {\n    var self = this;\n\n    // Convert to numbers\n    column = Number(column);\n\n    // Find overrides\n    var columnProperties = self.columns[column].properties;\n    if (!self.cellOverrides[key])\n    self.cellOverrides[key] = {};\n    if (!self.cellOverrides[key][column]) {\n      self.cellOverrides[key][column] = {\n        visible: columnProperties.columnVisible && columnProperties.visible,\n        editable: columnProperties.editable,\n        required: columnProperties.required };\n\n    }\n\n    return self.cellOverrides[key][column];\n  },\n\n  /*\r\n      * Set cell overrides based on the data\r\n      */\n  setCellOverrides: function setCellOverrides(data, columns) {\n    var self = this;\n    var key;\n\n    // Init visibility overrides\n    if (data.visible) {\n      for (var i = 0, len = data.visible.length; i < len; i++) {\n        key = data.visible[i][0];\n        for (var j = 0, len_v = data.visible[i].length; j < len_v; j++) {\n\n          // Skip key columns\n          if (j > 0) {\n            var columnVisible = self.getCellOverride(key, j - 1).visible;\n            self.cellOverrides[key][j - 1].visible = columnVisible ? bizagi.util.parseBoolean(data.visible[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init editability overrides\n    if (data.editable) {\n      for (var i = 0, len = data.editable.length; i < len; i++) {\n        key = data.editable[i][0];\n        for (var j = 0, len_v = data.editable[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0) {\n            var columnEditable = columns ? bizagi.util.parseBoolean(columns[j - 1].properties.editable) : true;\n            self.getCellOverride(key, j - 1).editable = columnEditable ? bizagi.util.parseBoolean(data.editable[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init required overrides\n    if (data.required) {\n      for (var i = 0, len = data.required.length; i < len; i++) {\n        key = data.required[i][0];\n        for (var j = 0, len_v = data.required[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0)\n          self.getCellOverride(key, j - 1).required = bizagi.util.parseBoolean(data.required[i][j]);\n        }\n      }\n    }\n  },\n  /*\r\n      *   Returns the row indexes for the data\r\n      */\n  getIndexes: function getIndexes() {\n    var self = this;\n    var data = $.merge(self.properties.data.rows, self.getDataNewRows());\n    return $.map(data, function (item, i) {\n      return item[0];\n    });\n  },\n  /**\r\n      *  Return object with value of all new records unsaved within the grid\r\n      *  @return {object} all new records\r\n      */\n  getDataNewRows: function getDataNewRows() {\n    var self = this;\n    var newRows = [];\n\n    if (_typeof(self.newRecords) == \"object\" && !$.isEmptyObject(self.newRecords)) {\n      $.each(self.newRecords, function (rowKey) {\n        var cellValue = [];\n        cellValue.push(rowKey);\n        for (var i = 0, length = self.columns.length; i < length; i++) {\n          cellValue.push(self.getCellCurrentValue(rowKey, self.columns[i].properties.xpath));\n        }\n        // Add cell value row to new rows\n        newRows.push(cellValue);\n      });\n    }\n    return newRows;\n  },\n\n  /**\r\n      * Return the object with the required url to access the exported grid to the desired format\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getGridExportFile: function getGridExportFile(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getGridExportFile({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"\",\n      idPageCache: properties.idPageCache,\n      disposition: params.disposition,\n      exportType: params.exportType,\n      sort: properties.sort,\n      idForm: self.getFormContainer().properties.id }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  submitForGridChange: function submitForGridChange() {\n    var self = this;\n    return self.submitOnChange(null, false);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutColumn = setTimeout(function () {\n      if (self.columns) {\n        $.each(self.columns, function (i, column) {\n          column.dispose();\n        });\n      }\n      clearTimeout(timeOutColumn);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  getEnabledChecks: function getEnabledChecks(params) {\n    var self = this;\n    var properties = self.properties;\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      rows: properties.rowsPerPage,\n      xpathfilter: params.xpath });\n\n    // Default ajax call\n    var defer = new $.Deferred();\n    // Resolve with remote data\n    self.dataService.multiaction().getGridDataExclusivesSelected(params).done(function (data) {\n      // Resolve with fetched data\n      properties.page = data.page;\n      properties.records = data.records;\n      properties.totalPages = data.totalPages;\n\n      // Check RTL\n      if (self.isRTL()) {\n        data.rows = self.changeOrderData(data.rows);\n      }\n      defer.resolve(data);\n    });\n    return defer.promise();\n  },\n\n  buildCellXpathFilter: function buildCellXpathFilter(key) {\n    if (bizagi.util.isNumeric(key)) return \"[id=\" + key + \"]\";\n    return \"[id='\" + key + \"']\";\n  },\n\n  cleanNewRecords: function cleanNewRecords() {\n    // Mark it as saved\n    this.newRecords = {};\n  },\n\n  /**\r\n      * Set inline added new row as saved, removing data new-row attribute\r\n      * @param key\r\n      */\n  setRowAsSaved: function setRowAsSaved(key) {\n    var $control = this.getControl();\n    var $row = $(\"[data-bizagi-component=rows]\", $control).\n    find(\"tr[data-business-key=\" + key + \"]\");\n\n    $row.attr(\"data-new-row\", 'false');\n  },\n\n  /**\r\n      *\r\n      * Customizes render background color\r\n      *\r\n      * This method is called when the backgroud color is setted by Form Designer\r\n      *\r\n      * @param color\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    this._super(color);\n\n    var control = this.getControl();\n\n    control.find(\".bz-rn-grid-header-title, .bz-rn-grid-header-title-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    control.find(\".bz-rn-grid-container-foother, .bz-rn-grid-container-foother-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    return this;\n  },\n\n  /**\r\n      * Check has header format\r\n      * @returns {boolean}\r\n      */\n  hasColorHeader: function hasColorHeader() {\n    var headerFormat = this.properties.headerFormat || {};\n\n    return headerFormat ? !bizagi.util.isEmpty(headerFormat.color) : false;\n  },\n\n  /**\r\n      * Check if the orientation is RTL\r\n      * @param parent\r\n      * @param orientation\r\n      * @returns {*|boolean|boolean}\r\n      */\n  isRTLOrientation: function isRTLOrientation(parent, orientation) {\n    if ((!orientation || orientation === \"auto\") && parent) {\n      return this.isRTLOrientation(parent.parent, parent.properties.orientation);\n    }\n\n    return /^rtl$/i.test(orientation);\n  },\n\n  /**\r\n      * Check If has changes for send to server\r\n      * @returns {boolean}\r\n      */\n  canBeExport: function canBeExport() {\n    var self = this;\n\n    // Check If normal column-control has changes\n    for (var id in self.changes) {\n      // Don't collect data from totalizers\n      if (id !== \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) return false;\n        }\n      }\n    }\n\n    // Check If exclusive-check control has changes\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {\n        // Brings the xpath columns with changes\n        if (self.exclusiveChanges[xpath] && self.enabledChecks[xpath]) return false;\n      }\n    }\n\n    // Don't have changes\n    return true;\n  },\n\n  /**\r\n      * Get exclusive-check change by Row\r\n      * @param idRow\r\n      * @returns {{}}\r\n      */\n  getExclusiveChangeByRow: function getExclusiveChangeByRow(idRow) {\n    var value = {};\n\n    for (var xpath in this.enabledChecks) {\n      if (this.enabledChecks.hasOwnProperty(xpath)) {\n        var obj = (this.enabledChecks[xpath] || []).\n        find(function (el) {\n          return el.id == idRow && el.changed;\n        });\n\n        if (obj) {\n          value[xpath] = obj.value;\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Check If xpath or id of column is valid\r\n      * @param columnXpath\r\n      * @param columnId\r\n      * @param xpath\r\n      * @returns {boolean}\r\n      */\n  isCurrentGridCell: function isCurrentGridCell(columnXpath, columnId, xpath) {\n    return columnXpath === xpath || columnId === xpath || columnXpath + \".\" + columnId === xpath;\n  },\n\n  /**\r\n      * Get index for current cell\r\n      * @param xpath\r\n      * @returns {number|number}\r\n      */\n  getIndexForCurrentCell: function getIndexForCurrentCell(xpath) {\n    var self = this;\n\n    return (self.columns || []).findIndex(function (cell) {\n      return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n    }) || 0;\n  },\n\n  /**\r\n      * Check if it is a Summary o Global Form\r\n      * @returns {*|boolean}\r\n      */\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var form = this.getFormContainer();\n    var properties = form && form.properties || {};\n\n    return form && [\"SummaryForm\", \"GlobalForm\"].includes(properties.typeForm);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Label Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for labels\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.label\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // A label itself is never \"required\" as other controls\n    var properties = self.properties;\n    properties.required = false;\n\n    // Set properties\n    self.properties.displayType = \"label\";\n    //self.properties.labelAlign = self.originalProperties.labelAlign || \"left\";\n    self.properties.displayName = data.properties.displayName || \"\";\n\n    if (bizagi.util.parseBoolean(self.properties.allowDinamiclabel)) {\n      this.properties.displayName = data.properties.displayName || bizagi.localization.getResource(\"render-label-default-display-name\");\n    }\n\n    self.bindingValue();\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    //this.changeLabelAlign(this.properties.labelAlign || \"left\");\n\n    if (typeof this.configureHelpText == \"function\")\n    this.configureHelpText();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    this.changeLabelAlign(this.properties.labelAlign || \"left\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required label\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  bindingValue: function bindingValue() {\n    var self = this;\n\n    if (self.properties.allowDinamiclabel && self.properties.value) {\n      if (_typeof(self.properties.value) === \"object\" && self.properties.value[0]) {\n        self.properties.displayName = self.properties.value[0].value;\n      } else if (typeof self.properties.value === \"string\" && self.properties.value !== \"\") {\n        self.properties.displayName = self.performLabelLineBreak(self.properties.value);\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    //Labels never change\n    return false;\n  },\n\n  /**\r\n      * Process the break line character\r\n      * @param value\r\n      * @returns {string}\r\n      */\n  performLabelLineBreak: function performLabelLineBreak(value) {\n    var label = value || \"\";\n\n    return label.replace(/\\\\n/gm, \"\\n\");\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Search Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for search renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.search\", {}, {\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    var submitOnChange = data.properties.submitOnChange;\n    if (self.getMode() === \"execution\") {\n      // Normalize submitOnChange property\n      // QAF-3297 - Compatibility for old versions of advanced search where the \"submitOnChange\" property default is true\n      // New \"submitVersion\" property default is 2\n      if (data.properties.advancedSearch) {\n        submitOnChange = typeof submitOnChange !== \"undefined\" ? submitOnChange : (data.properties.submitVersion || 1) > 1 ? false : true;\n      }\n    }\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.submitOnChange = bizagi.util.parseBoolean(submitOnChange) || false;\n\n    properties.searchForms = properties.searchForms || [];\n\n    // Default maxRecords is 20\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.advancedSearch = bizagi.util.parseBoolean(properties.advancedSearch) === null ? false : bizagi.util.parseBoolean(properties.advancedSearch);\n    properties.allowSuggest = bizagi.util.parseBoolean(properties.allowSuggest) !== null ? bizagi.util.parseBoolean(properties.allowSuggest) : false;\n    properties.allowFullSearch = properties.allowFullSearch || false;\n    properties.allowAdd = bizagi.util.parseBoolean(properties.allowAdd) || false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowTyping) !== null ? bizagi.util.parseBoolean(properties.allowTyping) : false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowSuggest) ? true : properties.allowTyping;\n    properties.allowClear = bizagi.util.parseBoolean(properties.allowClear) !== null ? bizagi.util.parseBoolean(properties.allowClear) : false;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // This length defines the behavior of the suggest, 2 characters are used by default meaning after 2 characters are written the search will take place\n    properties.searchLength = properties.searchLength || 2;\n\n    // Expire local storage cache\n    properties.enableLocalStorage = false;\n    properties.expireCache = 1000 * 60 * 15; // 15 minutes\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"search\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      allowTyping: properties.allowTyping,\n      advancedSearch: properties.advancedSearch,\n      allowSuggest: properties.allowSuggest,\n      editable: properties.editable,\n      allowClear: properties.allowClear,\n      hasValue: self.hasValue() });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || form.params.contexttype || false;\n\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n\n    params.h_contexttype = self.properties.enableQuerySuggestBehavior ? \"metadata\" : params.h_contexttype;\n\n    // QA-471 When the contexttype is metadata it does not send xpathcontext\n    if (params && params.h_contexttype && params.h_contexttype === 'metadata') {\n      properties.xpathContext = '';\n    }\n\n    // BA35025 - JFA\n    if (properties.term.indexOf(\"\\'\") > -1) {\n      var regexC = new RegExp(\"\\'\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\\'\\\\'\");\n    }\n\n    // QAF-6448 - JFA\n    if (properties.term.indexOf(\"\\\"\") > -1) {\n      var regexC = new RegExp(\"\\\"\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\"\");\n    }\n\n    // Resolve with remote data\n    self.dataService.multiaction().getSearchData({\n      url: properties.dataUrl,\n      contexttype: params.h_contexttype,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.allowFullSearch ? \"%\" + properties.term : properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise(defer);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value\r\n      * @param {} triggerEvents\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    self._super(value, triggerEvents);\n\n    if (value != undefined) {\n      this.value = value;\n      this.selectedValue = value.label;\n    } else {\n      this.value = null;\n      this.selectedValue = null;\n    }\n  },\n\n  /* Maps the value, when this one comes from actions*/\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var xpath = self.properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos\n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) == \"object\" && value.id === undefined)\n        return;\n        // Add the value to the server\n        renderValues[xpath] = value;\n      }\n    }\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {}\r\n      */\n  submitData: function submitData() {\n    var self = this;\n    var data = {};\n\n    // Add current data\n    if (!self.grid) {\n      data[self.properties.xpath] = self.getValue();\n    }\n\n    // Executes submit on change\n    self.submitOnChange(data, undefined, false);\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    return this._super(invalidElements);\n  },\n\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (typeof value == \"undefined\" || value == null) return false;\n\n    if (_typeof(value) === \"object\" && value.id !== \"\" && typeof value.id !== \"undefined\") return true;\n    return !bizagi.util.isEmpty(value);\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Render Layout Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Andrés Fernando Muñoz\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define a base layout render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n$.Class.extend(\"bizagi.rendering.layoutRender\", {}, {\n  /*\r\n                                                       *   Returns the html templated element\r\n                                                       */\n  renderElement: function renderElement(template) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    template = template || \"render-layout\";\n    var renderTemplate = self.renderFactory.getTemplate(template);\n\n    // Resolve render label\n    var label = properties.displayName;\n\n    if (typeof label == \"string\") {\n      label = bizagi.util.encodeString(label);\n    }\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      hide: properties.hide });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = self.element;\n    }\n    if (!self.control || self.control.length == 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  /*\r\n     * Customizes the font italic style *\r\n     */\n  changeFontItalic: function changeFontItalic(italic) {\n    if (bizagi.util.parseBoolean(italic)) {\n      this.getControl().css(\"font-style\", \"italic\", \"!important\");\n    } else {\n      this.getControl().css(\"font-style\", \"normal\", \"!important\");\n    }\n    return this;\n  },\n\n  /*\r\n     * Customizes the font underline\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline) {\n    var valueFormat = this.properties.valueFormat || {},\n    valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n\n    if (bizagi.util.parseBoolean(underline)) {\n      this.getControl().css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n    } else {\n      this.getControl().find(\"*\").each(function (i, element) {\n        $(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n      });\n    }\n\n    return this;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Column Decorator Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi UI Forms\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for Columns\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.columns.column\", {}, {\n  /*\r\n                                                                         *   Constructor\r\n                                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(this.properties));\n\n    this.decoratedClass = params.decorated;\n    this.data = params.data;\n    if (params.singleInstance) {\n      this.decorated = new this.decoratedClass({\n        data: this.data,\n        parent: this.parent,\n        renderFactory: this.renderFactory,\n        dataService: this.dataService });\n\n      this.decorated.getControl = this.getControl;\n      params.decorated = this.decorated;\n      this.decorated.properties.isColumn = true;\n    } else {\n      this.decorateRenders = [];\n    }\n    this.grid = params.parent;\n\n    // Set base column styles\n    var properties = this.properties;\n\n    properties.columnVisible = bizagi.util.parseBoolean(properties.columnVisible) != null ? bizagi.util.parseBoolean(properties.columnVisible) : true;\n    properties.align = properties.align || 'center';\n    properties.textFormat = properties.textFormat || {};\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.singleInstance = params.singleInstance;\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.showColumn = typeof properties.showColumn != \"undefined\" ? bizagi.util.parseBoolean(properties.showColumn) : true;\n    properties.isSortable = typeof properties.isSortable != \"undefined\" ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    // Define if it is editable or not        \n    try {\n      if (params.parent && typeof params.parent.properties.editable == \"boolean\" && !params.parent.properties.editable) {\n        properties.editable = false;\n      }\n    } catch (e) {\n    }\n\n    // Define if the column is readonly\n    this.readonly = properties.readonly !== undefined ? properties.readonly : false;\n    if (this.readonly) properties.editable = required = false;\n  },\n\n  /*\r\n     *   Return true if the column is read-only, so we can make a quick render\r\n     */\n  isReadonly: function isReadonly() {\n    return false;\n  },\n\n  /*\r\n     *   Method to retrieve the decorated control\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    return $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n  },\n  /*\r\n     *   Returns the decorated cell instance to use\r\n     */\n  getDecorated: function getDecorated(surrogateKey) {\n    var self = this;\n    var properties = self.properties;\n    if (properties.singleInstance) {\n      return self.decorated;\n    } else {\n      var decorated = self.decorateRenders[surrogateKey];\n      if (decorated == undefined) {\n        if (_typeof(self.decorateRenders) != \"object\") {\n          self.decorateRenders = [];\n        }\n        var instanceDecoratedClass = new this.decoratedClass({\n          data: bizagi.clone(this.data),\n          parent: this.parent,\n          renderFactory: this.renderFactory,\n          dataService: this.dataService });\n\n        decorated = instanceDecoratedClass;\n        self.decorateRenders[surrogateKey] = instanceDecoratedClass;\n\n        // Set surrogate key to all controls\n        decorated.surrogateKey = surrogateKey;\n\n        // Execute decorated overrides\n        self.applyOverrides(decorated);\n\n        var dataType = bizagi.util.normalizeType(decorated.properties.type);\n        // Also override setDisplayValue on summary row for non numeric columns\n        if (surrogateKey === \"summary\" && !/columnMoney/i.test(dataType) && !/columnNumber/i.test(dataType)) {\n\n          decorated.setDisplayValue = function (value) {\n            var control = this.getControl();\n\n            // Replace line breaks for html line breaks\n            control.html(value);\n          };\n        }\n      }\n      return decorated;\n    }\n  },\n  /*\r\n     *   Set a ready function to execute when the render has been inserted in the dom\r\n     */\n  ready: function ready() {\n    return this.readyDeferred.promise();\n  },\n  /*\r\n     *   Load stuff needed for the column\r\n     *   It could return a promise if the column need to load async stuff\r\n     */\n  initialize: function initialize() {\n    // Override to do any stuff needed here\n  },\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent(surrogateKey, cellOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    if (cellOverrides) {\n      decorated.properties.visible = cellOverrides.visible;\n      decorated.properties.editable = cellOverrides.editable;\n    }\n    return decorated.canBeSent() || !self.properties.editable && self.hasChanged() || !decorated.properties.editable && self.hasChanged();\n  },\n  /*\r\n     *   Method to check if a value is valid or not in this render\r\n     */\n  isValueValid: function isValueValid(surrogateKey, value, messages, propertyOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var invalidElements = [];\n\n    if (propertyOverrides.visible) {\n      self.setValue(surrogateKey, value);\n\n      // Override properties\n      decorated.properties = $.extend(decorated.properties, propertyOverrides);\n\n      if (self.grid && typeof decorated.grid === \"undefined\") {\n        decorated.grid = self.grid;\n      }\n\n      // Validate field\n      decorated.isValid(invalidElements);\n    }\n\n    if (invalidElements.length > 0) {\n      $.each(invalidElements, function (i, invalidElement) {\n        messages.push(invalidElement.message);\n      });\n      return false;\n    }\n\n    return true;\n  },\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n  },\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value) {\n    var self = this;\n    var properties = self.properties;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Set flag to check when a render has changed\n    self.changed = false;\n\n    // If the render is not editable return the readonly version of the column\n    //Fix: Uncaught RangeError: Maximum call stack size exceeded\n    if (!properties.editable && arguments[3] !== \"CALLER_RENDER_READ_ONLY_COLUMNSLINK\")\n    return self.renderReadOnly.apply(self, arguments);\n\n    // Returns the decorated render inside a custom layout for columns\n    self.readyDeferred = new $.Deferred();\n    var cell = decorated.render(\"cell\");\n\n    // If the render changes set the flag on\n    decorated.bind(\"renderchange\", function () {\n      self.changed = true;\n    });\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.postRenderElement(cell);\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Changes editable to false to render read-only\n    decorated.properties.editable = false;\n\n    // Perform the internal render\n    self.readyDeferred = new $.Deferred();\n    var result = decorated.render(\"cell.readonly\");\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    // Returns the decorated render inside a custom layout for columns\n    return result;\n  },\n\n  /*\r\n     *  Returns the html template to draw the summary cell\r\n     */\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    var result = self.renderFactory.getTemplate(\"cell.summary\");\n    return $.tmpl(result).html();\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var editable = self.properties.editable;\n    decorated.properties.editable = false;\n    if (self.properties.singleInstance) {\n      decorated.element = cell;\n    }\n    decorated.postRenderElement(cell);\n    decorated.properties.editable = editable;\n  },\n\n  /*\r\n     * Return false to all columns that doesn't need special treatment (like number or currency)\r\n     */\n  postRenderSummary: function postRenderSummary() {\n    return false;\n  },\n\n  /*\r\n     *   Returns the cell html to be inserted in the table\r\n     */\n  getCell: function getCell() {\n    return this.decorated.getDisplayValue();\n  },\n  /*\r\n     *   Sets the surrogate key for this row\r\n     */\n  setSurrogateKey: function setSurrogateKey(key) {\n    this.surrogateKey = key;\n  },\n  /*\r\n     *   Sets the internal value, only must be called internally\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated != \"undefined\" && decorated != null) {\n\n      decorated.properties.originalValue = value;\n      decorated.properties.previousValue = value;\n\n      if ((value === null || value === undefined) && (self.properties.defaultvalue !== undefined || self.properties.defaultValue !== undefined) && decorated.grid != undefined) {\n        value = self.setDefaultValue(surrogateKey, decorated);\n      }\n\n      decorated.properties.value = value;\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = undefined;\n\n    if (self.properties.defaultvalue !== null && self.properties.defaultvalue !== undefined) {\n      value = self.properties.defaultvalue;\n    } else {\n      if (self.properties.defaultValue !== null && self.properties.defaultValue !== undefined) {\n        value = self.properties.defaultValue;\n      }\n    }\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  },\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    return decorated.getValue();\n  },\n  /*\r\n     *   Gets the composite value (applies for non-standard render values)\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    return this.getValue(surrogateKey);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_COLUMN;\n  },\n  /*\r\n     *   Determines if a render has changed its value\r\n     */\n  hasChanged: function hasChanged() {\n    return this.changed;\n  },\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.decorated)\n    this.decorated.trigger(eventType, data);\n  },\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.decorated)\n    this.decorated.triggerHandler(eventType, data);\n  },\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.bind(eventType, fn);\n  },\n  /*\r\n     *   Unbinds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.unbind(eventType, fn);\n  },\n  /*\r\n     *   Override decorated properties\r\n     */\n  overrideDecoratedRenderProperties: function overrideDecoratedRenderProperties(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    // Override decorated control properties\n    decorated.properties.editable = this.properties.editable;\n    decorated.properties.visible = this.properties.visible;\n    decorated.properties.required = this.properties.required;\n  },\n\n  overrideProperties: function overrideProperties(properties) {\n    var self = this;\n\n    self.properties.editable = properties.editable || self.properties.editable;\n    self.properties.visible = properties.visible || self.properties.visible;\n    self.properties.required = properties.required || self.properties.required;\n  },\n\n  /*\r\n     *   Returns the xpath used to sort the grid\r\n     */\n  getSortName: function getSortName() {\n    var self = this;\n\n    // Check if there is an override for the default behaviour \n    var decorated = self.getAnyDecoratedInstance();\n    if (decorated && decorated.getSortColumn) {\n      return decorated.getSortColumn();\n    }\n\n    // Default behaviour\n    return self.properties.xpath;\n  },\n\n  /*\r\n     *   Returns any of the decorated instances, if there are none, return null\r\n     */\n  getAnyDecoratedInstance: function getAnyDecoratedInstance() {\n    var self = this;\n    var first;\n\n    // Get the first key for the hash\n    for (first in this.decorateRenders) {break;}\n\n    // Return the first decorated render\n    if (first) return this.decorateRenders[first];\n\n    return null;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutDecorated = setTimeout(function () {\n      if (self.decorated) {\n        self.decorated.unbind(\"renderchange\");\n        self.decorated.dispose();\n      }\n\n      if (self.decorateRenders) {\n        bizagi.util.arrayEach(self.decorateRenders, function (key, render) {\n          if (render) {\n            render.unbind(\"renderchange\");\n            render.dispose();\n          }\n        });\n      }\n      clearTimeout(timeOutDecorated);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Search Slide view Implementation\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Richar Urbano - RicharU\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will shows a sliding search form  order to edit\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.tablet.slide.view.search\", {}, {\n  /* \r\n                                                                  *   Constructor\r\n                                                                  */\n  init: function init(dataService, renderFactory, searchForms, searchParams, slideParams) {\n    var self = this;\n\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.searchForms = searchForms;\n    self.searchParams = searchParams;\n    self.slideParams = slideParams;\n    self.slideDeferred = new $.Deferred();\n    self.extraButtons = slideParams.hasOwnProperty(\"buttons\") ? slideParams.buttons : false;\n\n    // Create container\n    self.container = self.slideParams.navigation.createRenderContainer({ title: self.slideParams.title });\n\n    self.processButtons().\n    done(function (data) {\n      self.slideDeferred.resolve(data);\n    }).fail(function () {\n      self.slideDeferred.reject();\n    });\n\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * Render the form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params \r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    self.properties = params;\n\n    //Render the search form\n    self.renderSearchDialog(params);\n\n    // Return promise\n    return self.slideDeferred.promise();\n  },\n\n  /**\r\n      * Render the search form\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  renderSearchDialog: function renderSearchDialog(params) {\n    var self = this;\n\n    bizagi.util.tablet.startLoading();\n\n    // Creates a dialog\n    $.when(self.getSearchContainerData(params)).pipe(function (data) {\n      if (data.form.properties) {\n        data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\n      }\n\n      // Render dialog form\n      var form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideParams.navigation,\n        view_container: self.container });\n\n\n      form.buttons = [\n      {\n        ordinal: 1,\n        action: \"search\",\n        caption: bizagi.localization.getResource(\"render-form-dialog-box-search\"),\n        callback: function callback() {\n          self.currentSearchForm.performSearch(self.searchParams);\n        } },\n\n      {\n        ordinal: 2,\n        action: \"cancel\",\n        caption: \"cancel\",\n        callback: function callback() {\n          // Close slide\n          self.goBack();\n        } },\n\n      {\n        ordinal: 3,\n        action: \"add\",\n        caption: bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n        callback: function callback() {\n          var params = {\n            idCase: self.slideParams.idCase,\n            idRender: self.properties.idRender,\n            displayName: self.properties.displayName,\n            idPageCache: self.properties.idPageCache };\n\n\n          self.renderAddForm(params);\n        } }];\n\n\n\n      if (!self.slideParams.allowNew) {\n        form.buttons.pop();\n      }\n\n      // Save form reference\n      self.form = form;\n\n      // Return rendering promise\n      return form.render();\n    }).done(function (element) {\n      // Append form in the slide view\n      self.container.element.html(element);\n\n      self.slideParams.navigation.navigate(self.container.id);\n\n      // Add Button\n      $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\n\n      // Hide title of html content\n      self.searchResultContainer = $(\".ui-bizagi-container-search-results\", element);\n      self.searchResultContainer.hide();\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Set currents search form\n      self.currentSearchForm = self.form.firstChild();\n      self.currentSearchForm.triggerHandler(\"ondomincluded\");\n\n      self.currentSearchForm.bind(\"instancerefresh\", function () {\n        // Show search results container\n        self.searchResultContainer.show();\n      });\n\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        refreshParams.scrollTop = self.form.container.parent().scrollTop();\n        refreshParams = $.extend({\n          focus: focus,\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true,\n          contextType: self.properties.contextType || \"\",\n          navigation: self.searchFormParams.navigation,\n          view_container: self.container },\n        refreshParams);\n\n        return self.renderSearchDialog(refreshParams);\n      });\n\n      // Add row selected handlers to resolve the deferred\n      self.currentSearchForm.bind(\"instanceSelected\", function (ev, ui) {\n        // Close slide      \n        self.goBack();\n\n        self.slideBoxDeferred.resolve({\n          id: ui.id,\n          label: \"\" });\n\n      });\n      // if is any modal view displayed, hide it to allow this search form been displayed\n      self.handleSearchFormZindex(\"show\");\n\n      self.containerSearchCriteria = self.currentSearchForm.container.find(\".ui-bizagi-container-search-criteria\");\n    }).always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n  },\n\n  /**\r\n      * Get the addform and show it\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  renderAddForm: function renderAddForm(params) {\n    var self = this;\n    params = params || {};\n    var properties = self.properties;\n\n    if (typeof self.addContainer === \"undefined\") {\n      self.addContainer =\n      self.slideParams.navigation.createRenderContainer({\n        title: bizagi.localization.getResource(\"render-dialog-entity\") });\n\n    }\n\n    var isRefresh = params.isRefresh || false;\n\n    var getFormParams = {\n      idPageCache: params.idPageCache,\n      guidEntity: properties.entity,\n      contextType: \"entity\" };\n\n\n    if (isRefresh) {\n      getFormParams.isRefresh = true;\n      getFormParams.idStartScope = params.idStartScope;\n    } else {\n      getFormParams.idRender = properties.idRender;\n      getFormParams.requestedForm = \"addForm\";\n    }\n\n    bizagi.util.tablet.startLoading();\n\n    //Get the addform\n    $.when(self.dataService.getFormData(getFormParams)).pipe(function (data) {\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      if (data.form.properties) {\n        data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\n      }\n\n      data.form.contextType = \"entity\";\n\n      var form = self.renderFactory.getContainer($.extend({}, self.addFormParams, {\n        type: \"form\",\n        data: data.form,\n        focus: params.focus || false,\n        selectedTabs: params.selectedTabs,\n        isRefresh: isRefresh,\n        requestedForm: params.requestedForm,\n        navigation: self.slideParams.navigation,\n        view_container: self.addContainer }));\n\n\n\n      form.buttons = [\n      $.extend(\n      self.form.buttons[0] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          // When the data is saved then\n          self.saveDataAddForm(form).done(function () {\n            self.addContainer.destroy();\n            delete self.addContainer;\n\n            // Force a search after a new item is created!\n            self.currentSearchForm.performSearch(self.searchParams);\n          });\n        } }),\n\n      $.extend(\n      self.form.buttons[1] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 1,\n        \"action\": \"back\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          self.addContainer.destroy();\n          delete self.addContainer;\n        } })];\n\n\n\n      $.extend(form, {\n        processButtons: function processButtons() {\n          //not send information set in memory and save\n\n          $.each(form.buttons, function (index, element) {\n            switch (element[\"ordinal\"]) {\n              case 1: //next button will behave as a cancel button\n                $(form.getButtons()[index]).click(function () {\n                  self.addContainer.destroy();\n                  delete self.addContainer;\n                });\n                form.getButtons()[index].innerHTML = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                form.buttons[index].caption = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                form.buttons[index].action = \"back\";\n                break;\n\n              default:\n                $(form.getButtons()[index]).click(function () {\n                  self.saveDataAddForm(form);\n                  self.addContainer.destroy();\n                  delete self.addContainer;\n                });\n                break;}\n\n          });\n        } });\n\n\n      for (var indicator in form.children) {\n        form.children[indicator].params = $.extend({}, form.children[indicator].params, self.addFormParams);\n      }\n\n      return $.when(form.render()).done(function (element) {\n        // Set currents search form\n        self.currentAddForm = form.firstChild();\n\n        self.addContainer.element.html(element);\n        if (!isRefresh) {\n          self.slideParams.navigation.navigate(self.addContainer.id, \"overlay:up\");\n        }\n\n        self.addContainer.setNavigationButtons(form);\n\n        form.triggerHandler(\"ondomincluded\");\n\n        // if is any modal view displayed, hide it to allow this search form been displayed\n        self.handleSearchFormZindex(\"show\");\n\n        form.bind(\"refresh\", function (_, refreshParams) {\n          refreshParams.scrollTop = self.form.container.parent().scrollTop();\n          refreshParams = $.extend({\n            focus: focus,\n            selectedTabs: self.form.getSelectedTabs(),\n            isRefresh: true,\n            contextType: self.properties.contextType || \"\",\n            navigation: self.slideParams.navigation,\n            view_container: self.addContainer },\n          refreshParams);\n\n          return self.renderAddForm(refreshParams);\n        });\n      });\n    }).fail(function () {\n      self.addContainer.destroy();\n      delete self.addContainer;\n      console.log(\"there was an error :(\");\n    }).always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n  },\n\n  /**\r\n      * Save data to add form\r\n      * @param {} form \r\n      * @returns {} \r\n      */\n  saveDataAddForm: function saveDataAddForm(form) {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n    if (form.validateForm()) {\n      var data = {};\n      $.forceCollectData = true;\n\n      form.collectRenderValues(data);\n      data.idPageCache = form.idPageCache;\n\n      var params = {\n        action: \"SAVE\",\n        data: data,\n        idPageCache: data.idPageCache,\n        guidEntity: form.properties.entity,\n        contexttype: \"entity\" };\n\n\n      // Check if the add form has data\n      var formData = {};\n\n      form.collectRenderValuesForSubmit(formData);\n\n      // Turn off flag\n      $.forceCollectData = false;\n\n      if (!bizagi.util.isMapEmpty(formData)) {\n\n        bizagi.util.tablet.startLoading();\n\n        $.when(self.dataService.submitData(params)).done(function () {\n          function dataHasXpath(xpath) {\n            var render = self.currentSearchForm.getRender(xpath);\n            if (_typeof(render) === \"object\" && render !== null) {\n              return { \"found\": true, \"obj\": render };\n            }\n            return { \"found\": false, \"obj\": {} };\n          }\n          for (var i in formData) {\n            var mapping = dataHasXpath(i);\n            if (mapping.found) {\n              mapping.obj.setValue(formData[i]);\n              self.setDisplayValueToControl(mapping.obj, form, i, formData);\n            }\n          }\n\n          defer.resolve();\n        }).fail(function (jqXHR, type, message) {\n          form.addValidationMessage(message.message);\n          defer.reject();\n        }).always(function () {\n          bizagi.util.tablet.stopLoading();\n        });\n      } else {\n        // Form has not data\n        bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-advanced-no-filters\"));\n        defer.reject();\n      }\n    } else\n    {\n      defer.reject();\n    }\n    return defer;\n  },\n\n  /***\r\n      * Set display value by control type, when add new record\r\n      * @param renderControlSearchForm\r\n      * @param addForm\r\n      * @param xpath\r\n      * @param formData\r\n      */\n  setDisplayValueToControl: function setDisplayValueToControl(renderControlSearchForm, addForm, xpath, formData) {\n    if (renderControlSearchForm.properties.type === \"searchSuggest\") {\n      renderControlSearchForm.setDisplayValue(addForm.getRender(xpath).getDisplayValue());\n    } else\n    {\n      renderControlSearchForm.setDisplayValue(formData[xpath]);\n    }\n  },\n\n  /**\r\n      * Shows the dialog box in the browser\r\n      * @returns {} Returns a promise that the dialog will be closed\r\n      */\n  processButtons: function processButtons() {\n    var self = this;\n    self.slideBoxDeferred = new $.Deferred();\n\n    // Create buttons object\n    var slideOptions = { buttons: [] };\n\n    // Add search button by default\n    slideOptions.buttons.push({\n      text: bizagi.localization.getResource(\"render-form-dialog-box-search\"),\n      click: function click() {\n        self.currentSearchForm.performSearch(self.searchParams);\n      } });\n\n\n    if (self.slideParams.allowNew) {\n      slideOptions.buttons.push({\n        text: bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n        click: function click() {\n          var params = {\n            \"idCase\": self.slideParams.idCase,\n            \"idRender\": self.properties.idRender,\n            \"displayName\": self.properties.displayName,\n            \"idPageCache\": self.properties.idPageCache };\n\n\n          self.renderAddForm(params);\n        } });\n\n    }\n\n    slideOptions.buttons.push({\n      text: bizagi.localization.getResource(\"render-form-dialog-box-cancel\"),\n      click: function click() {\n        // Close slide      \n        self.goBack();\n      } });\n\n\n    // Apply slide plugin\n    slideOptions = $.extend(slideOptions, self.slideParams);\n    self._renderButtons(slideOptions);\n\n    // Return promise\n    return self.slideBoxDeferred.promise();\n  },\n\n  /**\r\n      * Creates the search dialog sub-containers\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  getSearchContainerData: function getSearchContainerData(params) {\n    var self = this;\n    var deferred = new $.Deferred();\n    var data = {\n      form: { properties: {}, elements: [] } };\n\n\n    var container = data.form;\n    var searchFormToLoad = self.searchForms[0];\n\n    // When there are more than one search form, render a tab container\n    if (self.searchForms.length > 1) {\n\n      var tabContainer = {};\n      tabContainer.properties = { type: \"tab\" };\n      tabContainer.elements = [];\n      var otherElements = [];\n\n      $.each(self.searchForms, function (i, searchForm) {\n        var isDefault = searchForm[\"default\"] || false;\n\n        // Create tab item\n        var tab = {};\n        tab.properties = {\n          id: i,\n          type: \"tabItem\",\n          displayName: searchForm.caption };\n\n\n        tab.elements = [];\n\n        // Append children \n        if (isDefault) {\n\n          tabContainer.elements.push({ container: tab });\n\n          // Set properties to load default container\n          container = tab;\n          searchFormToLoad = self.searchForms[0];\n\n        } else {\n          otherElements.push({ container: tab });\n        }\n      });\n\n      // Append no defaults elements\n      $.each(otherElements, function (i, element) {\n        tabContainer.elements.push(element);\n      });\n\n      data.form.elements.push({\n        container: tabContainer });\n\n    }\n\n    bizagi.util.tablet.startLoading();\n\n    // Loads default form\n    $.when(self.getSearchFormData(params, searchFormToLoad)).\n    done(function (searchFormData) {\n      container.elements.push(searchFormData);\n      container.properties.id = Math.guid();\n\n      // Resolve deferred\n      deferred.resolve(data);\n    }).always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Loads a search form\r\n      * @param {} params \r\n      * @param {} searchForm \r\n      * @returns {} \r\n      */\n  getSearchFormData: function getSearchFormData(params, searchForm) {\n    var self = this;\n    return self.dataService.getSearchFormData($.extend(params, {\n      idSearchForm: searchForm.id,\n      url: searchForm.url })).\n\n    pipe(function (data) {\n      // Append search render properties\n      data.form.properties.idRender = params.idRender;\n\n      return data;\n    });\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {} \r\n      */\n  goBack: function goBack() {\n    var self = this;\n\n    self.handleSearchFormZindex(\"hide\");\n    self.container.destroy();\n  },\n\n  /**\r\n      * Handlers kendo view\r\n      * @returns {} \r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n  },\n\n  /**\r\n       * Process render buttons\r\n       * @param {} options \r\n       * @returns {} \r\n       */\n  _renderButtons: function _renderButtons(options) {\n    var self = this;\n    var content = $(\"<div class='bz-slide-button-container'></div>\");\n\n    $.each(options.buttons, function (ui, value) {\n      $(\"<div class='action-button'>\" + value.text + \"</div>\").click(\n      value.click).\n      appendTo(content);\n    });\n\n    self.buttonContainer = content;\n  },\n\n  handleSearchFormZindex: function handleSearchFormZindex(option) {\n\n    //if there is an open modal, change z-index to make searchForm visible\n    var modalViewDisplayed = jQuery.grep($(\".km-modalview-root\"), function (n) {\n      return $(n).css(\"display\") == \"block\";\n    });\n\n    if (modalViewDisplayed.length > 0) {\n      if (option == \"show\") {\n        $(modalViewDisplayed).css(\"z-index\", 0);\n      } else {\n        $(modalViewDisplayed).css(\"z-index\", 10001);\n      }\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Render Text Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments: Extended text implementation\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\nbizagi.rendering.extendedText.extend(\"bizagi.rendering.extendedText\", {}, {\n\n  /* CONSTRUCTOR\r\n                                                                            =====================================================*/\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Fill default properties\n    var properties = self.properties;\n\n    // Set rowSize default\n    properties.rowSize = properties.maxLines || 6;\n  },\n\n  /**\r\n      * Creates the markup for the readonly extendedText field\r\n      * Comment: includes the default value in the markup\r\n      * @returns {html}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonlyExtendedText\");\n    return $.kendoTmpl(template);\n  },\n\n  /* POSTRENDER\r\n     =====================================================*/\n  postRender: function postRender() {\n\n    var self = this;\n    var properties = self.properties;\n    var counter = 0;\n\n    // Call base \n    this._super();\n\n    if (!properties.editable) {\n      self.textarea = $(\".ui-bizagi-render-text-extended pre\", self.getControl());\n    } else {\n      self.textarea = $(\".ui-bizagi-render-text-extended\", self.getControl());\n    }\n\n    if (self.textarea.length > 0) {\n      // Increase default textarea rows to improve readability\n      self.textarea.prop(\"rows\", properties.rowSize);\n\n      // Define max length of element\n      if (properties.maxLength > 0)\n      self.textarea.attr(\"maxlength\", properties.maxLength);\n\n      // extend textArea to allow to see all the content\n      var autoAdjustIntervalMethod = function autoAdjustIntervalMethod() {\n        if (counter > 2000 || typeof self.textarea !== \"undefined\" && self.textarea[0] && self.textarea[0].scrollHeight > 0) {\n          self.autoAdjustExtendedFrame(self.textarea[0]);\n          stopAutoAdjustInterval();\n        }\n        counter += 500;\n      };\n\n      var stopAutoAdjustInterval = function stopAutoAdjustInterval() {\n        clearInterval(autoAdjustInterval);\n      };\n\n      var autoAdjustInterval = properties.autoExtend ? setInterval(function () {autoAdjustIntervalMethod();}, 500) : null;\n    }\n  },\n\n  /*\r\n     *\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self.element.addClass(\"bz-rn-read-only bz-rn-non-editable\");\n    self.textarea = $(\".ui-bizagi-render-text-extended pre\", self.getControl());\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var decodedValue = bizagi.util.decodeURI(value);\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    value = typeof decodedValue == \"string\" ? decodedValue : \"\";\n\n    // Call base\n    this._super(value);\n\n    // Set value in input\n    if (value && properties.editable) {\n      if (isOfflineForm) {\n        value = _typeof(value) === \"object\" && value.value ? value.value : value;\n      }\n      var resolvedValue = $.br2nl(value);\n      self.textarea.val(resolvedValue);\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Define max length of element\n    if (self.properties.maxLength > 0) {\n      if (self.properties.autoExtend) {\n        $(self.textarea).bind(\"keydown keypress\", function (e) {\n          self.autoAdjustExtendedFrame(this);\n        });\n      }\n    }\n  },\n\n  autoAdjustExtendedFrame: function autoAdjustExtendedFrame(element) {\n    // If scrollHeight <= 0 a div must be created with the same content \n    // to get the height that should have the extendedText \n    if (element.scrollHeight <= 0) {\n      var hiddenDiv = $(document.createElement(\"div\"));\n      var content = null;\n\n      $(hiddenDiv).attr(\"display\", \"none\");\n      $(\"body\").append(hiddenDiv);\n\n      content = $(element).val();\n      content = content.replace(/\\n/g, \"<br>\");\n      hiddenDiv.html(content + \"<br>\");\n\n      $(element).css('height', hiddenDiv.height());\n\n      hiddenDiv.remove();\n    } else {\n\n      if ($(element).height() > 100) {\n        $(element).height($(element).height() - 20);\n      }\n      while ($(element).outerHeight() < element.scrollHeight) {\n        $(element).height($(element).height() + 1);\n      };\n    }\n  } });","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /**\r\n                                                                                                                                                                                                           *   Name: Bizagi Tablet Render Date Extension\r\n                                                                                                                                                                                                           *   Author: Cristian Olaya\r\n                                                                                                                                                                                                           *   Date: 2015-sep-29\r\n                                                                                                                                                                                                           *   Comments:\r\n                                                                                                                                                                                                           *   -   This script will redefine the Date render class to adjust to tablet devices\r\n                                                                                                                                                                                                           */\n\n// Extends itself\nbizagi.rendering.date.extend(\"bizagi.rendering.date\", {\n  DEFAULT_PROPERTIES: {\n    \"maxYearsToDisplay\": 100 } }, _defineProperty({\n\n\n  /**\r\n                                                     *  Rendering the control\r\n                                                     * */\n  initializeDateControl: function initializeDateControl() {\n    var self = this;\n    var control = self.getControl();\n\n    //Getting the input\n    self.input = $(\".bz-rn-date-control\", control);\n  },\n\n  configureHandlers: function configureHandlers() {\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"readonlyDate\");\n\n    return $.kendoTmpl(template, {});\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self._super();\n\n    var control = self.getControl();\n\n    $(\"i\", control).addClass(\"bz-calendar-input\");\n    self.input = $(\"span\", control);\n\n    if (!self.isValidMinMaxValue()) {\n      self.setValue(\"\");\n      self.input.prop('value', \"\");\n      self.properties.displayValue = \"\";\n    }\n  },\n  /**\r\n      * To configure the mobiscroll plugin\r\n      * */\n  postRender: function postRender() {\n    var self = this;\n\n    self._super();\n\n    //Initializing the control\n    self.initializeDateControl();\n\n    var inputControl = self.getDateControl();\n    var controlElements = self.properties.showTime ? [\"calendar\", \"time\"] : [\"calendar\"];\n    var defaultDateControl = self.getFormattedDate(self.properties.value, self.properties.showTime, true);\n    var minDateControl = self.getFormattedDate(self.properties.minValue, self.properties.showTime, false);\n    var maxDateControl = self.getFormattedDate(self.properties.maxValue, self.properties.showTime, false);\n    var timeFormat = self.properties.showTime ? self.getTimeFormat() : \"\";\n\n    //Adds a gap of years to show if the user doest not include min years\n    if (isNaN(Date.parse(minDateControl))) {\n      minDateControl = new Date();\n      minDateControl.setFullYear(minDateControl.getFullYear() - self.Class.DEFAULT_PROPERTIES.maxYearsToDisplay);\n      minDateControl.setHours(0, 0, 0, 0);\n    }\n\n    //Adds a gap of years to show if the user doest not include min years\n    if (isNaN(Date.parse(maxDateControl))) {\n      maxDateControl = new Date();\n      maxDateControl.setFullYear(maxDateControl.getFullYear() + self.Class.DEFAULT_PROPERTIES.maxYearsToDisplay);\n      maxDateControl.setHours(23, 59, 59);\n    }\n\n    $(\".bz-calendar-input\", self.control).click(function () {\n      inputControl.click();\n    });\n\n    if (!self.isValidMinMaxValue()) {\n      self.setValue(\"\");\n      self.input.prop('value', \"\");\n      self.properties.displayValue = \"\";\n    }\n\n    inputControl.mobiscroll().calendar({\n      //theme: theme,\n      mode: \"mixed\", // Specify scroller mode like: mode: \"mixed\" or omit setting to use default\n      display: \"bottom\", // Specify display mode like: display: \"bottom\" or omit setting to use default\n      controls: controlElements,\n      min: minDateControl,\n      max: maxDateControl,\n      defaultValue: defaultDateControl,\n      timeFormat: timeFormat,\n      lang: bizagi.util.languages[BIZAGI_LANGUAGE] || \"en\",\n      buttons: [\n      \"set\",\n      {\n        text: this.getResource(\"render-plugin-search-users-clear-button-name\"),\n        handler: function handler(e, inst) {\n          self.date = undefined;\n          self.time = undefined;\n          self.timeS = undefined;\n          self.onChangeHandler(true);\n          inst.clear();\n        } },\n\n      \"cancel\"],\n\n      onSet: function onSet(e, inst) {\n        var data = inst.getVal();\n        self.date = { \"day\": data.getDate(), \"month\": data.getMonth(), \"year\": data.getFullYear() };\n\n        //Checks if its has time, and included it\n        if (self.properties.showTime) {\n          self.time = { \"hours\": data.getHours(), \"minutes\": data.getMinutes() };\n          if (!self.is24h) {\n            self.timeS = data.getHours() < 12 ? \"am\" : \"pm\";\n          }\n        }\n\n        self.onChangeHandler();\n      },\n      onBeforeShow: function onBeforeShow(event, inst) {\n        // Your custom event handler goes here\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n\n        self.changeMinValue(self.properties.minValue);\n        self.changeMaxValue(self.properties.maxValue);\n      },\n      onClose: function onClose(event, inst) {\n        // Your custom event handler goes here\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"auto\");\n      },\n      onShow: function onShow(event, inst) {\n        $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"hidden\");\n      } });\n\n\n    // Bind event for change value\n    inputControl.on(\"focus\", function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (bizagi.util.isCordovaSupported() && bizagi.util.isAndroidDevice()) {\n        cordova.plugins.Keyboard.disableScroll(true);\n        cordova.plugins.Keyboard.close();\n      }\n    });\n\n    //Set input displayValue if it has default value\n    if (self.properties.displayValue === \"\" && self.properties.value) {\n      var date = self.getFormattedDate(self.properties.value, self.properties.showTime, true, false);\n      if (typeof date !== \"undefined\") {\n        var displayValue = bizagi.util.dateFormatter.formatDate(date, self.properties.fullFormat);\n        self.input.prop(\"value\", displayValue);\n      }\n    }\n\n    inputControl.attr(\"keyboard\", \"disable\");\n  },\n\n  /**\r\n      * Configure the timeformat\r\n      * */\n  getTimeFormat: function getTimeFormat() {\n    var self = this;\n\n    if (self.properties.timeFormat.indexOf(\"H\") !== -1 || self.properties.timeFormat.indexOf(\"HH\") !== -1) {\n      self.is24h = true;\n      return \"HH:ii\";\n    } else {\n      self.is24h = false;\n      return \"hh:ii A\";\n    }\n  },\n\n  /**\r\n      * Get Date whit the Invariant and ISO Format applied.\r\n      * */\n  getFormattedDate: function getFormattedDate(date, showTime, initializer) {\n    var self = this;\n\n    if (!date || bizagi.util.isObjectEmpty(date)) return;\n\n    //There are some dates that haven't time,... actions and validations for example or when we have to put a initial value (default value without time),\n    //in that cases we should identify the case and if the date haven't the time value, we have to add (00:00:00) it to can apply the format (getDateFromInvariant).\n    var time = showTime && (self.getTime() === \"0:0\" || initializer) ? \" \" + date.substr(date.length - 8, date.length) : \"\";\n\n    var currentDate = initializer && showTime && time.split(\"/\").length > 1 || date.split(\":\").length === 1 ? date += \" 00:00:00\" : date;\n    date = bizagi.util.dateFormatter.getDateFromInvariant(currentDate, showTime);\n\n    var currentTime = showTime ? time !== \"\" ? time : \" \" + self.getTime() : \" 00:00\";\n    var fullDateFormated = self.setHour(self.getFullFormatedDate(date, currentTime));\n\n    fullDateFormated = bizagi.util.dateFormatter.getDateFromISO(fullDateFormated, true);\n\n    return fullDateFormated;\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n\n    // Set value in control\n    if (value && self.properties.editable) {\n      if (typeof value === \"number\") {\n        value = new Date(value);\n        dateControl.mobiscroll('option', { min: value });\n        value = bizagi.util.dateFormatter.formatInvariant(value, properties.showTime); // Set as invariant\n      } else {\n        dateControl.mobiscroll('option', { min: bizagi.util.dateFormatter.getDateFromInvariant(value, true) });\n      }\n\n      properties.minValue = value;\n    }\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n\n    // Set value in control\n    if (value && self.properties.editable) {\n      if (typeof value === \"number\") {\n        value = new Date(value);\n        dateControl.mobiscroll('option', { max: value });\n        value = bizagi.util.dateFormatter.formatInvariant(value, properties.showTime); // Set as invariant\n      } else {\n        dateControl.mobiscroll('option', { max: bizagi.util.dateFormatter.getDateFromInvariant(value, true) });\n      }\n\n      properties.maxValue = value;\n    }\n  },\n\n  /**\r\n      * Set the display value on input     \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var date = self.getFormattedDate(value, properties.showTime, false);\n    var displayValue = self.preprocessDateValue(date);\n\n    if (properties.editable === false) {\n      // Render as simple value\n      if (typeof displayValue === \"string\" || typeof displayValue === \"number\") {\n        self.input.html(displayValue);\n      }\n    } else {\n      self.input.prop(\"value\", displayValue);\n    }\n  },\n\n  /**\r\n      * Get the DOM Control\r\n      * */\n  getDateControl: function getDateControl() {\n    var self = this;\n    return $(\"input.bz-rn-date-control\", self.getControl());\n  },\n\n  /**\r\n      * Get Time from mobiscroll\r\n      * */\n  getTime: function getTime() {\n    var self = this;\n\n    //Converting the time in 24h format.\n    if (self.properties.showTime && self.time && self.time[\"minutes\"] !== \"\") {\n      var time = self.time[\"hours\"] + \":\" + self.time[\"minutes\"];\n      time += self.timeS;\n\n      if (time.indexOf(\"am\") != -1 && self.time[\"hours\"] == 12) {\n        time = time.replace(\"12\", \"0\");\n      }\n\n      if (time.indexOf(\"pm\") != -1 && self.time[\"hours\"] < 12) {\n        time = time.replace(self.time[\"hours\"], parseInt(self.time[\"hours\"]) + 12);\n      }\n\n      return time.replace(/(am|pm)/, \"\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Get Date from mobiscroll\r\n      * */\n  getDate: function getDate() {\n    var self = this;\n    return self.date && self.date[\"month\"] !== \"\" ? self.date[\"year\"] + \"-\" + (parseInt(self.date[\"month\"]) + 1) + \"-\" + self.date[\"day\"] : \"\";\n  },\n\n  /**\r\n      * Set the control value when the control change\r\n      */\n  onChangeHandler: function onChangeHandler(isClearButton) {\n    var self = this;\n    var properties = self.properties;\n    var currentDate = self.getDate();\n    var currentTime = properties.showTime ? \" \" + self.getTime() : \" 0:00\";\n\n    // If curren date is empty reset actual value\n    if (currentDate === \"\" && !properties.showTime || currentDate === \"\" && currentTime === \"\" || isClearButton) {\n      self.setValue(\"\");\n      self.input.prop(\"value\", \"\");\n      properties.displayValue = \"\";\n    } else {\n      var formatedFullDate = self.setHour(self.getFullFormatedDate(currentDate, currentTime));\n\n      formatedFullDate = bizagi.util.dateFormatter.getDateFromISO(formatedFullDate, true);\n\n      if (!formatedFullDate || formatedFullDate == 0) return;\n\n      // Set date value\n      self.setNewDateValue(formatedFullDate, properties.showTime);\n\n      var displayValue = self.preprocessDateValue(formatedFullDate);\n      properties.displayValue = displayValue;\n\n      self.input.prop(\"value\", self.properties.displayValue);\n    }\n  },\n\n  /**\r\n      * Apply the final format that will be showed on the input\r\n      * */\n  getFullFormatedDate: function getFullFormatedDate(currentDate, currentTime) {\n    var fullDate = \"\";\n\n    if (currentDate.length > 0) {\n      fullDate = currentDate;\n    } else if (currentDate !== undefined) {\n      fullDate = bizagi.util.dateFormatter.formatISO(currentDate, false);\n    } else {\n      fullDate = bizagi.util.dateFormatter.formatISO(new Date(), false);\n    }\n\n    fullDate += currentTime;\n    var dateFromFormat = bizagi.util.dateFormatter.getDateFromFormat(fullDate, \"yyyy-MM-dd H:m\");\n\n    return bizagi.util.dateFormatter.formatDate(dateFromFormat !== 0 ? dateFromFormat : currentDate, \"yyyy-MM-dd H:mm:ss\");\n  },\n\n  /**\r\n      * Set the control value\r\n      * */\n  setNewDateValue: function setNewDateValue(formatedFullDate, showTime) {\n    var self = this;\n    var value = formatedFullDate != \"\" ? bizagi.util.dateFormatter.formatInvariant(formatedFullDate, showTime) : \"\";\n    self.setValue(value);\n  },\n\n  /**\r\n      * Removing the time when be necesary\r\n      * */\n  applyDateFormat: function applyDateFormat(date, showTime) {\n    if (!showTime) {\n      var initIndexTime = null;\n\n      if (date.indexOf(\"00:00\") != -1) {\n        initIndexTime = date.indexOf(\"00:00\");\n      } else if (date.indexOf(\"0:00\") != -1) {\n        initIndexTime = date.indexOf(\"0:00\");\n      } else if (date.indexOf(\"12:00\") != -1) {\n        initIndexTime = date.indexOf(\"12:00\");\n      } else {\n        initIndexTime = \"-1\";\n      }\n\n      var endIndexTime = initIndexTime + 8;\n      date = initIndexTime === -1 ? date : date.replace(date.substring(initIndexTime, endIndexTime), \"\").replace(\" am\", \"\").replace(\" pm\", \"\");\n    }\n\n    return date;\n  },\n\n  /*\r\n      *  Checks if the date could be localized using site language\r\n      * */\n  preprocessDateValue: function preprocessDateValue(date) {\n    var self = this;\n    var properties = self.properties;\n    var displayValue;\n\n    displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat);\n\n    return displayValue;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var bValid = true;\n    var value = self.getValue();\n\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable)) {\n        value = bizagi.util.dateFormatter.getDateFromInvariant(value);\n\n        if (value !== 0) {\n          // Clear time for validations\n          value.setHours(0, 0, 0, 0);\n\n          // Check min value and max value\n          if (properties.minValue && typeof properties.minValue == \"string\") {\n            bValid = self.validateMinAndMaxValue(value, true, properties, invalidElements) ? false : bValid;\n          }\n\n          if (properties.maxValue && typeof properties.maxValue == \"string\") {\n            bValid = self.validateMinAndMaxValue(value, false, properties, invalidElements) ? false : bValid;\n          }\n        }\n      }\n    }\n\n    if (bizagi.util.parseBoolean(properties.editable)) {\n      // Check required\n      if (properties.required && self.hasValue()) {\n        var control = self.getDateControl();\n\n        if (control.length > 0 && control.val().length <= 0) {\n          bValid = self.showMandatoryMessage(properties, invalidElements);\n        }\n      } else if (properties.required && !self.hasValue()) {\n        self.showMandatoryMessage(properties, invalidElements);\n      }\n    }\n\n    if (bValid) {\n      // Clear error message\n      self.setValidationMessage(\"\");\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * To validate the min and max values\r\n      * */\n  validateMinAndMaxValue: function validateMinAndMaxValue(value, isMinValue, properties, invalidElements) {\n    var vValue = bizagi.util.dateFormatter.getDateFromInvariant(isMinValue ? properties.minValue : properties.maxValue);\n\n    //In case the value from the minValue or maxValue are assigned from a Date control that does not have the option  \"showTime!\n    if (vValue == 0) {\n      var resultValue = \"\";\n      if (properties.timeFormat.indexOf(\":ss\") == -1) {\n        if (isMinValue) {\n          resultValue = properties.minValue + \":00\";\n        } else {\n          resultValue = properties.maxValue + \":00\";\n        }\n      }\n\n      vValue = bizagi.util.dateFormatter.getDateFromFormat(resultValue, properties.fullFormat + \":ss\");\n    }\n\n    vValue.setHours(0, 0, 0, 0);\n\n    if (isMinValue && value < vValue || !isMinValue && value > vValue) {\n      var formatedDate = bizagi.util.dateFormatter.formatDate(vValue, properties.fullFormat);\n      var message = isMinValue ?\n      this.getResource(\"render-date-minimum-validation\").replaceAll(\"#label#\", properties.displayName).replaceAll(\"#minValue#\", formatedDate) :\n      this.getResource(\"render-date-maximum-validation\").replaceAll(\"#label#\", properties.displayName).replaceAll(\"#maxValue#\", formatedDate);\n\n      invalidElements.push({ xpath: properties.xpath, message: message });\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * To show the mandatory values message\r\n      * */\n  showMandatoryMessage: function showMandatoryMessage(properties, invalidElements) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n\n    invalidElements.push({ xpath: properties.xpath, message: message });\n\n    return false;\n  },\n\n  setHour: function setHour(date) {\n    return date.replace(\" 0:\", \" 00:\").replace(\" 1:\", \" 01:\").replace(\" 2:\", \" 02:\").replace(\" 3:\", \" 03:\").replace(\" 4:\", \" 04:\").replace(\" 5:\", \" 05:\").replace(\" 6:\", \" 06:\").replace(\" 7:\", \" 07:\").replace(\" 8:\", \" 08:\").replace(\" 9:\", \" 09:\");\n  },\n\n  /**\r\n      * Cleans the control fields as it requires\r\n      * */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n\n    self.date = undefined;\n    self.time = undefined;\n    self.timeS = undefined;\n    self.onChangeHandler(true);\n    self.setDisplayValue('');\n  },\n\n  isValidMinMaxValue: function isValidMinMaxValue() {\n    var self = this;\n    var bValid = true;\n    var value = self.getValue();\n\n    if (value) {\n      value = bizagi.util.dateFormatter.getDateFromInvariant(value);\n\n      if (value !== 0) {\n        // Clear time for validations\n        value.setHours(0, 0, 0, 0);\n\n        // Check min value and max value\n        if (self.properties.minValue && typeof self.properties.minValue === 'string')\n        bValid = self.validateMinAndMaxValue(value, true);\n\n        if (self.properties.maxValue && typeof self.properties.maxValue === 'string')\n        bValid = self.validateMinAndMaxValue(value, false);\n      }\n    }\n\n    return bValid;\n  } }, \"validateMinAndMaxValue\",\n\nfunction validateMinAndMaxValue(currentDate, isMinValue) {\n  var self = this;\n  var date = isMinValue ? self.properties.minValue : self.properties.maxValue;\n  var formattedDate = bizagi.util.dateFormatter.getDateFromInvariant(date);\n\n  formattedDate.setHours(0, 0, 0, 0);\n\n  return !(isMinValue && currentDate < formattedDate || !isMinValue && currentDate > formattedDate);\n\n}));","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi smartphone Render option select\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: CristianO\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Date: 29/10/2015\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   Render a single input with a modal view, this modal view contain a\r\n                                                                                                                                                                                                                                                                                                                                                                                *       selectable list.\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\nbizagi.rendering.combo.extend(\"bizagi.rendering.combo\", {}, {\n\n  /**\r\n                                                              * Generates the read-only render control\r\n                                                              */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonlyCombo\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * Initilizing the combo control\r\n      * */\n  initializeCombo: function initializeCombo() {\n    var self = this;\n\n    self._super();\n\n    var properties = self.properties;\n    var container = self.getRenderedElement();\n    var control = self.getControl();\n    var params = {};\n\n    // Flag to set or not the display value on cascading combos.\n    self.showDisplayValue = false;\n\n    // Getting the input\n    self.input = $(\".bz-rn-combo-control\", control);\n    if (properties.parentComboValue && properties.parentComboValue != null) {\n      params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = properties.parentComboValue;\n\n      //If is a cascading combo, and has a parent and has its own value, then set the display value.\n      self.showDisplayValue = self.parentCombo && self.parentCombo.value && self.parentCombo.value.value !== \"\" && self.properties.value && self.properties.value.value;\n    }\n\n    if (!properties.editable) {\n      self.inputSpan = $('.bz-rn-text', control);\n      container.addClass(\"bz-rn-non-editable bz-command-edit-inline\");\n\n      if (self.value != null) {\n        self.inputSpan.text(self.value.value || self.value.id);\n      }\n    } else {\n      if (typeof self.initialValueSet !== \"undefined\" && !self.initialValueSet) {\n        $.when(self.renderCombo(params)).done(function (html) {\n          self.getControl().html(html);\n          self.input = self.combo = self.getControl();\n          self.configureCombo();\n          self.processLayout(false, self.properties.valueFormat || {});\n        });\n      } else {\n        self.configureCombo();\n      }\n    }\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRender: function postRender() {\n    var self = this;\n\n    //Initialicing the control\n    self.initializeCombo();\n\n    var properties = self.properties;\n    var container = self.getRenderedElement();\n\n    if (properties.editable) {\n      container.addClass(\"bz-command-edit-inline\");\n    }\n\n    self.configureHelpText();\n    self._super();\n    self.processLayout(false, self.properties.valueFormat || {});\n  },\n\n  /*\r\n     *\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var item = self.getValue();\n    var template;\n\n    //self._super();\n\n    control.closest(\".ui-bizagi-render\").addClass(\"bz-rn-read-only\");\n    self.inputSpan = $(\".bz-rn-text\", control);\n\n    if (item) {\n      if (item.value != null && typeof item.value == \"boolean\") {\n        if (bizagi.util.parseBoolean(item.value) == true) {\n          item.value = this.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(item.value) == false) {\n          item.value = this.getResource(\"render-boolean-no\");\n        }\n      }\n      // Returns the cached value from the properties to avoid server side fetching\n      self.getResource(\"render-combo-empty-value\") == item.value || self.getResource(\"render-combo-empty-selection\") == item.value ? self.inputSpan.text(\"\") : self.inputSpan.text(self.formatItem(item.value));\n    } else {\n      self.inputSpan.text(\"\");\n    }\n  },\n\n  /**\r\n      * Setting the combo's handlers\r\n      * */\n  configureCombo: function configureCombo() {\n    var self = this;\n\n    self.inputSpan = self.input.find(\".bz-rn-cm-text-label\");\n    self.inputSpan.html($(\"option:selected\", self.input).text());\n    self.inputSpan.val($(\"option:selected\", self.input).text());\n\n    $(\".bz-rn-container-combo\", self.control).unbind().bind(\"click\", function () {\n      //After click on input combo, remove focus of it.\n      self.input.find(\".bz-rn-combo-control\").blur();\n      $(self.input).blur();\n\n      self.input.attr(\"keyboard\", \"disable\");\n\n      // Creating modal view\n      self.processComboData(self.properties.data);\n      var template = self.renderFactory.getTemplate('comboModalView');\n      var modalViewTemplate = kendo.template(template, {\n        useWithBlock: false });\n\n      var data = {\n        'items': self.properties.data,\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView(\"open\");\n\n      modalView.closest(\".k-animation-container\").addClass(\"bz-rn-new-modalview-position\");\n    });\n\n    //Setting the Display Value\n    /**\r\n     * Case 1: Is a cascading combo and all combos have values (when form is rendering or the form is saved)\r\n     * Case 2: Is a cascading combo and in the parent combo was selected a new value\r\n     * Case 3: Is a normal combo.\r\n     * */\n    //        if (self.initializingCascadingCombo && self.properties.value) {\n    //            self.onComboChange(self.properties.value);\n    //            self.setDisplayValue(self.properties.value);\n    //        } else if (self.initializingCascadingCombo != undefined && !self.initializingCascadingCombo && self.parentCombo && self.parentCombo.properties.previousValue && self.parentCombo.properties.value && self.parentCombo.properties.value.value != (self.parentCombo.properties.previousValue.value || self.parentCombo.properties.previousValue[0].value)) {\n    //            self.setDisplayValue({ id: \"\", value: \"-------------\" });\n    //        } else if (self.initializingCascadingCombo != undefined && !self.initializingCascadingCombo && self.properties.value) {\n    //            self.setDisplayValue(self.properties.value);\n    //        } else if (self.properties.value) {\n    //            self.setDisplayValue(self.properties.value);\n    //       }\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //getting combo list elements\n    var container = inputContainer.find(\".bz-wp-modalview-results-list li\");\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Filtering list\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('change keypress  keyup change', function () {\n      self.filterList(this.value, container, inputContainer);\n    });\n\n    //Cleaning list\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind(\"click\", function () {\n      self.filterList(\"\", container, inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //Configuring list as a selectable element\n    self.list = $(\".bz-wp-modalview-results-list\", inputContainer);\n    self.setModalViewDisplayValue(self.properties.value || false);\n\n    self.inputSpan = inputContainer.find(\".bz-rn-cm-text-label\");\n    self.inputSpan.html($(\"li.ui-selected\", self.list).text());\n    self.inputSpan.val($(\"li.ui-selected\", self.list).text());\n\n    //Setting the initial selected display value\n    self.list.find(\"li\").bind(\"click\", function () {\n      var selectedElements = self.list.find(\".ui-state-active\");\n      self._newSelectedElement = this;\n\n      selectedElements.each(function (index, element) {\n        if (self._newSelectedElement.id !== element.id) {\n          $(element).removeClass(\"ui-state-focus ui-selected ui-state-active\");\n        }\n      });\n\n      $(this).addClass(\"ui-state-focus ui-selected ui-state-active\");\n\n      self.input.blur();\n      $(\".bz-wp-modalview-header-input-search\", inputContainer).blur();\n    });\n\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      var selected = $(\"li.ui-selected\", self.list);\n      var value = $(selected).data(\"value\");\n      var label = $(selected).text();\n\n      //Update internal value\n      var newValue = {\n        id: value,\n        value: label };\n\n\n      //self.setValue(newValue);\n      self.selectedValue = newValue.value;\n      self.setDisplayValue(newValue);\n      //self.changeCombo(newValue.value, newValue);\n    }).fail(function () {});\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * */\n  filterList: function filterList(search, $li, inputContainer) {\n    if (search !== \"\") {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n    } else {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n    }\n\n    $li.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = search.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n  },\n\n  actionSave: function actionSave() {\n    var self = this;\n    var selected = this.inputEdition.find(\".bz-rn-combo-selected\");\n    var valueItem = selected.find(\">div >span\").html();\n    var valueObjet = {\n      id: selected.attr(\"id\"),\n      value: valueItem };\n\n    self.changeCombo(valueItem, valueObjet);\n  },\n\n  /**\r\n      * Setting the selected element.\r\n      * */\n  setModalViewDisplayValue: function setModalViewDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.list && properties.editable && typeof value !== \"undefined\" && value !== null && value.id !== \"\") {\n      self.list.find(\"#ui-bizagi-list-\" + value.id).\n      addClass(\"ui-state-focus ui-selected ui-state-active\");\n    }\n  },\n\n  processComboData: function processComboData(data) {\n    var self = this;\n\n    data.forEach(function (value) {\n      self.validateValue(value);\n    });\n  },\n\n  validateValue: function validateValue(value) {\n    var self = this;\n\n    if (!bizagi.util.isEmpty(value) && typeof value.id !== \"undefined\" && (typeof value.id === \"number\" && value.id !== null || typeof value.id === \"string\" && value.id.length > 0)) {\n      var translated = false; //When the parametric entity have a boolean attribute\n      if (value.value !== null && typeof value.value === \"boolean\") {\n        translated = true;\n        if (bizagi.util.parseBoolean(value.value) === true) {\n          value.value = bizagi.localization.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(value.value) === false) {\n          value.value = bizagi.localization.getResource(\"render-boolean-no\");\n        }\n      } else if (value.value != null && _typeof(value.value) === \"object\") {\n        for (var i = 0, length = value.value.length; i < length; i++) {\n          if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value.value[i]) === true) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Setting the display value.\r\n      * */\n  setDisplayValue: function setDisplayValue(value) {\n    if (value && _typeof(value) === \"object\" && typeof value.label !== \"undefined\") {\n      var comboValue = value.label != \"\" && !bizagi.util.isNumeric(value.label) ? value.label : this.findDataValueById(value.value).value || \"\";\n\n      if ($.isArray(comboValue)) {\n        comboValue = comboValue.join(\" - \");\n      }\n\n      value = {\n        id: value.value,\n        value: comboValue };\n\n    }\n\n    var control = this.getControl();\n    $(\"input\", control).val(this.formatItem(value.value));\n\n    //Set Value\n    this.setValue(value);\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  resetData: function resetData() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.hasLocalData = false;\n    properties.data = [];\n    properties.remoteDataLoaded = false;\n\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    var value = {\n      id: \"\",\n      value: \"\" };\n\n    this.setDisplayValue(value);\n  },\n\n  /**\r\n      * Getting the templates\r\n      * */\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  },\n\n  /**\r\n      * Getting the templates\r\n      * */\n  getTemplateEditionName: function getTemplateEditionName() {\n    return \"edition.combo\";\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Render Grid Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Richar Urbano (based on Diego Parra version)\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will redefine the grid render class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\nbizagi.rendering.grid.extend(\"bizagi.rendering.grid.offline\", {\n  MAX_ROWS_SUPPORTED: 4 },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n\n    // Call base\n    this._super(params);\n\n    // Create a data-structure to keep track of each cell properties\n    this.cellMetadata = {};\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.data.originalRows = bizagi.clone(properties.data.rows);\n    var form = self.getFormContainer();\n\n    properties.isTaskForm = form.properties.isTaskForm;\n    //Preload new lines previously added offline\n    if (properties.isTaskForm && properties[\"new-records\"]) {\n      self.newRecords = {};\n      var newRowKeys = Object.keys(properties[\"new-records\"]);\n      for (var k = 0; k < newRowKeys.length; k++) {\n        self.newRecords[newRowKeys[k]] = {};\n        self.changes[newRowKeys[k]] = properties[\"new-records\"][newRowKeys[k]];\n        self.newRecords[newRowKeys[k]].createdOffline = true;\n      }\n    }\n    // Just apply display-type: vertical, align it to the left\n    properties.displayType = \"vertical\";\n    properties.labelAlign = \"left\";\n    self[\"deleted-records\"] = {};\n    if (properties.groupBy || properties.groupSummary) {\n      // Add warning\n      form.addWarning(self.getResource(\"render-tablet-warning-grid\"));\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    self.initialLoadDone = false;\n\n    // Make control to behave as a block container\n    control.addClass(\"ui-bizagi-render-grid-container\").\n    addClass(\"ui-bizagi-render-display-block\");\n\n    // Find component holder\n    self.grid = $(\">div\", control);\n\n    // Hide common label\n    self.getLabel().hide();\n\n    // Grid plugin\n    self.applyGridPlugin();\n    self.configureHelpText();\n\n    // Set initial data\n    if (properties.data) {\n\n      self.updateData(properties.data);\n\n      // Trigger change in order to start up the actions when the controls is ready\n      $.when(self.ready()).\n      done(function () {\n        self.triggerRenderChange({ changed: false });\n      });\n    }\n\n    // Execute pending actions\n    self.initialLoadDone = true;\n    for (var i in self.pendingActions) {\n      self.pendingActions[i].method.apply(self, self.pendingActions[i].arguments);\n    }\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Do the same as the post-render            \n    self.postRender();\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this;\n    var properties = self.properties;\n    var grid = self.grid;\n    var mode = self.getMode();\n\n    // Check is offline form\t    \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Build column metadata\n    var columns = self.buildColumnModel();\n\n    // Apply grid plugin\n    grid.bizagi_grid_tablet({\n      columns: columns,\n      maxColumns: self.Class.MAX_ROWS_SUPPORTED,\n      title: properties.displayName,\n      isOfflineForm: isOfflineForm || false,\n      mode: self.getMode(),\n\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons.offline\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\n        pager: self.renderFactory.getTemplate(\"bizagi.grid.pager\"),\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons.offline\"),\n        dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\") },\n\n\n      actions: {\n        add: properties.allowAdd,\n        edit: properties.allowEdit && properties.withEditForm && properties.data != null,\n        remove: properties.allowDelete,\n        details: false,\n        inlineAdd: true, //properties.inlineAdd,\n        allowMore: false,\n        enableXlsExport: false,\n        enablePdfExport: false },\n\n\n      isValid: function isValid() {\n        return self.isValidGrid();\n      },\n      pageRequested: function pageRequested(ui) {\n        if (mode != \"execution\") return;\n        self.fetchData(ui.page, ui.sortBy, ui.sortType);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        if (mode != \"execution\") return;\n        var data = ui;\n        self.triggerHandler(\"rowSelected\", { id: ui.key, data: ui });\n      },\n      addRow: function addRow(ui) {\n        if (mode != \"execution\") return;\n        self.addRow();\n      },\n      editRow: function editRow(ui) {\n        if (mode != \"execution\") return;\n        self.editRow(ui.key);\n      },\n      deleteRow: function deleteRow(ui) {\n        if (mode != \"execution\") return;\n        self.deleteRow(ui.key);\n      },\n      saveAddedRows: function saveAddedRows(ui) {\n        self.saveInlineAddedRows(ui.keys);\n      },\n      beforeInlineAdd: function beforeInlineAdd() {\n        self.inlineAddDeferred = new $.Deferred();\n      },\n      afterInlineAdd: function afterInlineAdd() {\n        if (self.inlineAddDeferred) {\n          self.inlineAddDeferred.resolve();\n        }\n      },\n      cancelEdition: function cancelEdition(ui) {\n        self.removeNewRecords(ui);\n      },\n      removeNewRecords: function removeNewRecords(ui) {\n        self.removeNewRecords(ui);\n      } });\n\n  },\n\n  /** \r\n     *   Creates the column model required to initialize the grid plugin\r\n     */\n\n  buildColumnModel: function buildColumnModel() {\n    return bizagi.rendering.grid.prototype.buildColumnModel.call(this);\n  },\n\n  /**\r\n     * Makes the grid to refresh\r\n     */\n  refresh: function refresh() {\n    var self = this;\n\n    self.fetchData();\n  },\n\n  /*\r\n     *   Holds the execution until the grid data is ready after a load operation\r\n     */\n  dataReady: function dataReady() {\n    var self = this;\n    return self.dataReadyDeferred != null ? self.dataReadyDeferred.promise() : null;\n  },\n\n  /*\r\n     *   Method to set data and update the grid\r\n     */\n  updateData: function updateData(data) {\n    return bizagi.rendering.grid.prototype.updateData.apply(this, arguments);\n  },\n\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n\n    self.dataReadyDeferred = new $.Deferred();\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).\n    then(function (data) {\n      self.endLoading();\n      if (data) {\n        self.updateData(data);\n        self.triggerRenderChange();\n        self.dataReadyDeferred.resolve();\n      }\n    });\n  },\n\n  processChanges: function processChanges() {\n    var self = this;\n    var rowsList = [];\n    var data = self.properties.data;\n    if (self.properties.isTaskForm) {\n      return [];\n    }\n\n    // Save pending inline add rows\n    for (var id in self.changes) {\n      var sortArray = [];\n      sortArray.push(id);\n\n      for (var columnXpath in self.changes[id]) {\n\n\n        // Check if the render can submit data\n        if (self.canColumnBeSent(id, columnXpath)) {\n          var value = self.changes[id][columnXpath];\n\n          if (typeof value === \"string\") {\n            if (value.match(/\\n/gm) !== null) {\n              value = value.replaceAll(\"\\n\", \"\\\\n\");\n            }\n          }\n\n          sortArray.push({\n            value: value,\n            xpath: columnXpath,\n            DataType: self.getColumn(columnXpath).properties.dataType });\n\n        }\n      }\n\n      if (typeof self.properties.data.rows !== \"undefined\" && self.properties.data.rows.length > 0) {\n        // Search row\n        var currentRow = [];\n        for (var i = 0; i < data.rows.length; i++) {\n          if (data.rows[i][0] == id) {\n            currentRow = data.rows[i];\n\n            // Delete current data\n            data.rows.splice(i, 1);\n            i--;\n\n            // Mixed data\n            currentRow = self.processRow(currentRow);\n            sortArray = $.extend(true, currentRow, sortArray);\n\n            break;\n          }\n        }\n      }\n\n      rowsList.push(sortArray);\n    }\n\n    return rowsList;\n  },\n\n  collectOfflineTaskData: function collectOfflineTaskData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var errorsMessage = [];\n    var internalRedersValues = [];\n    var data = self.properties.data;\n\n    // Save pending inline add rows\n    if (self.isValid(errorsMessage)) {\n      for (var id in self.changes) {\n        var sortArray = [];\n        var currentChanges = {};\n        for (var columnXpath in self.changes[id]) {\n\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var columnNumber = self.getColumn(columnXpath).columnIndex - 1;\n            var value = self.changes[id][columnXpath];\n\n            if (typeof value === \"string\") {\n              if (value.match(/\\n/gm) !== null) {\n                value = value.replaceAll(\"\\n\", \"\\\\n\");\n              }\n            }\n\n            sortArray[columnNumber] = value;\n            var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\n            var value = self.changes[id][columnXpath].value ? self.changes[id][columnXpath].value : self.changes[id][columnXpath];\n            renderValues[xpath] = value;\n            //Changes are store to delete them if the row is new, the rest of changes can be saved by xpath\n            currentChanges[xpath] = value;\n          }\n        }\n        //If new record store action data\n        if (self.newRecords[id]) {\n          //Use - to avoid issues with possible xpaths in renderValues used both in new and deleted records\n          renderValues[\"new-records\"] = renderValues[\"new-records\"] ? renderValues[\"new-records\"] : [];\n          var addRowData = {\n            url: properties.addUrl,\n            idRender: properties.id,\n            xpath: properties.xpath,\n            xpathContext: properties.xpathContext,\n            contexttype: properties.contexttype,\n            idPageCache: properties.idPageCache,\n            submitData: self.changes[id],\n            prepare: true,\n            idRow: parseInt(id + '') };\n\n          renderValues[\"new-records\"][id] = addRowData;\n          for (change in currentChanges) {\n            delete renderValues[change];\n          }\n          sortArray.idRow = parseInt(id + '');\n          sortArray.isNew = true;\n          sortArray.changes = self.changes[id];\n          if (!self.newRecords[id].createdOffline)\n          internalRedersValues[internalRedersValues.length] = sortArray;\n        }\n\n\n      }\n    }\n    // Get dataz\n    if (JSON.stringify(data.rows) !== JSON.stringify(data.originalRows) || internalRedersValues.length > 0) {\n      if (typeof data.rows !== \"undefined\" && internalRedersValues.length > 0) {\n        //Merge new and edited rows only saved for future edition\n        renderValues[properties.xpath] = $.merge($.merge([], self.processOldRows(data.rows)),\n        internalRedersValues);\n      } else if (typeof data.rows !== \"undefined\" && data.rows.length > 0) {\n        renderValues[properties.xpath] = self.processOldRows(data.rows);\n      } else {\n        renderValues[properties.xpath] = internalRedersValues;\n      }\n    }\n\n    self.collectChangesWithoutDeleting(renderValues);\n\n    renderValues[\"deleted-records\"] = self[\"deleted-records\"];\n  },\n\n  /*\r\n     * Old Method that collects data only for Offline start forms and prepares data for AsyncWorkItem\r\n     */\n  collectOfflineStartData: function collectOfflineStartData(renderValues) {\n    var self = this;\n    var errorsMessage = [];\n    var internalRedersValues = [];\n    var properties = self.properties;\n    var data = self.properties.data;\n    // Save pending inline add rows\n    if (self.isValid(errorsMessage)) {\n      for (var id in self.changes) {\n        var sortArray = [];\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var columnNumber = self.getColumn(columnXpath).columnIndex - 1;\n            var value = self.changes[id][columnXpath];\n            if (typeof value === \"string\") {\n              if (value.match(/\\n/gm) !== null) {\n                value = value.replaceAll(\"\\n\", \"\\\\n\");\n              }\n            }\n            sortArray[columnNumber] = {\n              value: value,\n              xpath: columnXpath,\n              DataType: self.getColumn(columnXpath).properties.dataType };\n\n          }\n        }\n        if (typeof self.properties.data.rows !== \"undefined\" && self.properties.data.rows.length > 0) {\n          // Search row\n          var currentRow = [];\n          for (var i = 0; i < data.rows.length; i++) {\n            if (data.rows[i][0] == id) {\n              currentRow = data.rows[i];\n              // Delete current data\n              data.rows.splice(i, 1);\n              i--;\n              // Mixed data\n              currentRow = self.processRow(currentRow);\n              sortArray = $.extend(true, currentRow, sortArray);\n              break;\n            }\n          }\n        }\n        internalRedersValues[internalRedersValues.length] = sortArray;\n      }\n    }\n\n\n    // Get data\n    if (JSON.stringify(data.rows) !== JSON.stringify(data.originalRows) || internalRedersValues.length > 0) {\n      if (typeof data.rows !== \"undefined\" && internalRedersValues.length > 0) {\n        renderValues[properties.xpath] = $.merge($.merge([], self.processOldRows(data.rows)),\n        internalRedersValues);\n      } else if (typeof data.rows !== \"undefined\" && data.rows.length > 0) {\n        renderValues[properties.xpath] = self.processOldRows(data.rows);\n      } else {\n        renderValues[properties.xpath] = internalRedersValues;\n      }\n    }\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n\n    var properties = self.properties;\n\n    if (properties.isTaskForm) {\n      self.collectOfflineTaskData(renderValues);\n    } else {\n      self.collectOfflineStartData(renderValues);\n    }\n\n  },\n  collectChangesWithoutDeleting: function collectChangesWithoutDeleting(renderValues) {\n    if (self.exclusiveChanges) {\n      for (var id in self.exclusiveChanges) {\n        var columnExclusiveChanges = self.exclusiveChanges[id];\n        var columnEnabledChecks = self.enabledChecks[id];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          for (var i = 0; i < columnEnabledChecks.length; i++) {\n            var columnSimpleXpathEnabled = properties.xpath + self.buildCellXpathFilter(columnEnabledChecks[i][0]) + \".\" + id;\n            renderValues[columnSimpleXpathEnabled] = false;\n          }\n          var columnSimpleXpath = properties.xpath + self.buildCellXpathFilter(columnExclusiveChanges.key) + \".\" + columnExclusiveChanges.xpath;\n          renderValues[columnSimpleXpath] = columnExclusiveChanges.value;\n\n        }\n      }\n    }\n  },\n  /*\r\n     *   Delete field id array objects\r\n     */\n  processOldRows: function processOldRows(rows) {\n    var newRows = [];\n    var tempRows = rows;\n    for (var col = 0, leng = tempRows.length; col < leng; col++) {\n      var temp = tempRows[col];\n      newRows[col] = $.grep(temp, function (n, i) {return i > 0;});\n      newRows[col].idRow = temp[0];\n    }\n\n    return newRows;\n  },\n  /*\r\n     *   Delete field id array\r\n     */\n  processRow: function processRow(row) {\n    return $.grep(row, function (n, i) {return i > 0;});\n  },\n  /*\r\n     *   Customizes the content drawing inside the cell\r\n     */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n\n    if (column.key) return value;\n\n    if (_typeof(value) === \"object\" && !isNewRow) {\n      value = value.hasOwnProperty(\"value\") ? value.value : value;\n    }\n\n    // Get render column                \n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n    var cellOverride = self.getCellOverride(key, column.index - 1);\n\n    self.newRecords = self.newRecords || {};\n\n    // Get cell properties\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) self.cellMetadata[key][columnIndex] = {};\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Apply overrides from cellOverrides\n    visible = cellOverride.visible;\n    editable = properties.editable ? cellOverride.editable : false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) editable = true;\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (key == \"summary\") editable = false;\n\n    renderColumn.properties.displayType = 'value';\n    renderColumn.setValue(key, value);\n    renderColumn.setSurrogateKey(key);\n\n    // Column search\n    if (renderColumn.properties.type == \"columnSearch\" && value != null) {\n      for (var i = 0, len = renderColumn.properties.data.length; i < len; i++) {\n        if (renderColumn.properties.data[i].id == value) {\n          value = { id: renderColumn.properties.data[i].id, label: renderColumn.properties.data[i].value };\n        }\n      }\n    }\n\n    if ((renderColumn.properties.type == \"columnCombo\" || renderColumn.properties.type == \"columnList\") && value !=\n    null) {//|| renderColumn.properties.type == \"columnRadio\"\n      for (var i = 0, len = renderColumn.properties.data.length; i < len; i++) {\n        if (renderColumn.properties.data[i].id == value) {\n          value = [[renderColumn.properties.data[i].id, renderColumn.properties.data[i].value]];\n        }\n      }\n    }\n\n    // Do the render\n    if (visible) {\n      if (editable) {\n        return self.drawEditableCell(renderColumn, properties, key, value, isNewRow);\n      } else {\n        return self.drawReadonlyCell(renderColumn, properties, key, value);\n      }\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n     *   Draws the editable version for the cell\r\n     */\n  drawEditableCell: function drawEditableCell(renderColumn, properties, key, value, isNewRow) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Set editable\n    var originalEditable = renderColumn.properties.editable;\n    renderColumn.properties.editable = true;\n\n    // Fix problem when required property lose\n    renderColumn.overrideProperties({ required: properties.required });\n\n    // Render cell\n    $.when(renderColumn.render(key, value)).done(function (cell) {\n      // Register array with new records, just when this is a newrecord\n      if (isNewRow && !self.newRecords[key]) {\n        self.newRecords[key] = {};\n      }\n\n      // convert all row visible\n      for (var j = 0; j < self.columns.length; j++) {\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, j).visible = self.getCellOverride(key, j).visible != undefined ? self.\n        getCellOverride(key, j).visible : true;\n      }\n\n      // Add change handler  \n      renderColumn.getDecorated(key).bind(\"renderchange\", function (render) {\n        self.onCellChange(renderColumn, cell, key);\n      });\n\n      // Resolve cell\n      defer.resolve(cell);\n    });\n\n    // Restore editable\n    renderColumn.properties.editable = originalEditable;\n\n    // Return promise\n    return defer.promise();\n  },\n\n  /*\r\n     *   Draws the readonly version for the cell\r\n     */\n  drawReadonlyCell: function drawReadonlyCell(renderColumn, properties, key, value) {\n    var self = this;\n    var result = \"\";\n\n    // Use totalizer format when printing summary row\n    if (key == \"summary\") {\n      var originalFormat = renderColumn.properties.textFormat;\n      if (renderColumn.properties.totalize) {\n        renderColumn.properties.textFormat = renderColumn.properties.totalize.format;\n      }\n\n      result = renderColumn.renderSummary(key, value);\n\n      // Restore column format\n      renderColumn.properties.textFormat = originalFormat;\n    } else {\n      result = renderColumn.renderReadOnly(key, value);\n    }\n    return result;\n  },\n\n  /*\r\n     *   Defines the handler when a cell changes its value\r\n     */\n  onCellChange: function onCellChange(renderColumn, cell, key) {\n\n    var self = this;\n    var _value = renderColumn.getValue(key);\n    var compositeValue = renderColumn.getCompositeValue(key);\n\n    if (renderColumn.properties.type == \"columnDate\" && renderColumn.data.properties.showTime == true) {\n\n      if (!bizagi.util.isEmpty(_value)) {\n        var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, true);\n        _value = bizagi.util.dateFormatter.formatInvariant(date, true);\n      } else if (_value === \"\") {\n        _value = \"\";\n      }\n    } else if (renderColumn.properties.type == \"columnDate\") {\n\n      if (!bizagi.util.isEmpty(_value)) {\n        var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, false);\n        date.setHours(0, 0, 0, 0);\n        _value = bizagi.util.dateFormatter.formatInvariant(date, true);\n      } else if (_value === \"\") {\n        _value = \"\";\n      }\n    }\n\n    if (self.properties.allowEdit || self.grid.bizagi_grid_tablet(\"isNewRecord\", key)) {\n      var trigger = self.grid.bizagi_grid_tablet(\"isNewRecord\", key) ? false : true;\n      self.collectGridChange({\n        id: key,\n        xpath: renderColumn.properties.xpath,\n        value: _value,\n        compositeValue: compositeValue,\n        columnIndex: renderColumn.columnIndex,\n        trigger: trigger });\n\n    }\n\n    // Update change in grid's component data\n    self.grid.bizagi_grid_tablet(\"changeCellValue\", key, renderColumn.columnIndex, _value);\n\n    // If the column has totalizers then we need to refresh the summary\n    if (renderColumn.properties.totalize && renderColumn.properties.totalize.operation) {\n      self.grid.bizagi_grid_tablet(\"refreshSummary\", renderColumn.columnIndex);\n    }\n  },\n  /*\r\n     *   Collect a single cell change made in the grid to send the data when the user saves the form\r\n     */\n  collectGridChange: function collectGridChange(params) {\n    var self = this;\n    params = params || {};\n    var id = params.id;\n    var xpath = params.xpath;\n    var value = params.value;\n    var trigger = typeof params.trigger !== \"undefined\" ? params.trigger : true;\n\n    self.changes[id] = self.changes[id] || {};\n    self.changes[id][xpath] = value;\n    if (trigger)\n    self.triggerRenderChange({ key: id, column: xpath });\n  },\n  /*\r\n     *   Executes when the cell is ready and inserted into the DOM\r\n     */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    // Avalaible editable\n    isNewRow = true;\n    bizagi.rendering.grid.prototype.onCellReady.apply(this, arguments);\n  },\n\n  /**\r\n     *  Adds a row to the grid\r\n     */\n  addRow: function addRow() {\n    bizagi.showMessageBox(bizagi.localization.getResource(\"render-tablet-error-userfield\"), bizagi.localization.\n    getResource(\"render-tablet-error-userfield\"));\n  },\n\n  /**\r\n     *  Edits a row in the grid\r\n     */\n  editRow: function editRow(id) {\n  },\n\n  /**\r\n     *  Deletes a row to the grid\r\n     */\n  deleteRow: function deleteRow(id) {\n    if (!id || id == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.\n      localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    var self = this;\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      // Do a grid record deletion\n      $.when(self.submitDeleteRequest(id)).\n      done(function () {\n        // Reload grid\n        self.fetchData();\n      });\n    });\n  },\n\n  /**\r\n     *  Edits the entire row (inline) in another slide\r\n     */\n  editInline: function editInline(id) {\n  },\n  /*\r\n     *   Retrieve the data for the new rows and push them into the server\r\n     */\n  saveInlineAddedRows: function saveInlineAddedRows(keys, bRefresh) {\n    var self = this;\n    var rows = self.processChanges();\n\n    if (!bizagi.util.isEmpty(rows)) {\n      self.properties.data.rows = $.merge(self.properties.data.rows, rows);;\n    }\n  },\n\n  /*\r\n     * Removes invalid records \r\n     */\n  removeNewRecords: function removeNewRecords(ui) {\n    var self = this;\n\n    if (ui && ui.keys) {\n      $.each(ui.keys, function (_, key) {\n        if (self.newRecords[key]) {\n          delete self.newRecords[key];\n        }\n      });\n    }\n  },\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n    bizagi.rendering.grid.prototype.changeCellBackgroundColor.apply(this, arguments);\n  },\n\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n    bizagi.rendering.grid.prototype.changeCellColor.apply(this, arguments);\n  },\n\n  /*\r\n     * Change the visibility for a cell\r\n     */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n    bizagi.rendering.grid.prototype.changeCellVisibility.apply(this, arguments);\n  },\n\n  /*\r\n     *   Changes the editability for a cell\r\n     */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n    bizagi.rendering.grid.prototype.changeCellEditability.apply(this, arguments);\n  },\n\n  /*\r\n     *  Clean data of cell\r\n     */\n  cleanCellData: function cleanCellData(key, xpath) {\n    bizagi.rendering.grid.prototype.cleanCellData.apply(this, arguments);\n  },\n\n  /*\r\n     *  Changes the required for cell\r\n     */\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n    bizagi.rendering.grid.prototype.changeCellRequired.apply(this, arguments);\n  },\n  /*\r\n     *   Sets an error on the cell\r\n     */\n  setError: function setError(key, xpath) {\n    bizagi.rendering.grid.prototype.setError.apply(this, arguments);\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    var parentPromise = self._super();\n    var inlineAddPromise = self.inlineAddDeferred ? self.inlineAddDeferred.promise() : null;\n    return $.when(parentPromise, inlineAddPromise);\n  },\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      var result = properties.overrideGetRemoteData(params);\n      return result != null ? result.promise() : null;\n    }\n\n    // Default ajax call\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    var data = properties.data;\n\n    // Resolve with fetched data    \n    properties.page = data.page;\n    properties.records = data.records;\n    properties.totalPages = data.totalPages;\n\n    // Check RTL\n    if (self.isRTL()) {\n      data.rows = self.changeOrderData(data.rows);\n\n    }\n\n    defer.resolve(data);\n\n    return defer.promise();\n  },\n  /*\r\n     *   Submits a grid delete record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this;\n    var data = self.properties.data,\n    properties = self.properties;\n    var statusAction = false;\n\n    // Found row by id\n    var currentRow = [];\n    for (var i = 0, length = data.rows.length; i < length; i++) {\n      if (data.rows[i][0] == id) {\n        currentRow = data.rows[i];\n\n        data.rows.splice(i, 1);\n        i--;\n\n        data.records--;\n        statusAction = true;\n        if (!self.newRecords[id])\n        {\n          var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n          var delInfo = {\n            url: properties.deleteUrl,\n            idRender: properties.id,\n            xpath: xpath,\n            xpathContext: properties.xpathContext,\n            idPageCache: properties.idPageCache,\n            contexttype: properties.contextType,\n            prepare: true };\n\n          self[\"deleted-records\"][id] = delInfo;\n        }\n        break;\n      }\n    }\n\n    // verified status action\n    if (!statusAction) {\n      bizagi.showMessageBox(this.getResource(\"workportal-general-no-records-found\"));\n    }\n\n    return data.rows;\n  },\n\n  isValidGrid: function isValidGrid() {\n    var self = this;\n    var errorsMessage = [];\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController !== \"undefined\")\n    form.validationController.clearValidationMessages();\n\n    self.isValid(errorsMessage);\n\n    if (errorsMessage.length > 0) {\n      if (typeof form.validationController !== \"undefined\") {\n        for (var index = 0; index < errorsMessage.length; index++) {\n          form.validationController.showValidationMessage(errorsMessage[index].message, errorsMessage[index].xpath);\n        }\n      }\n\n      return false;\n    } else {\n      return true;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Render Join Search Dialog Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will redefine the Join Search Dialog render class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\nbizagi.rendering.search.extend(\"bizagi.rendering.search\", {\n  ADVANCED_SEARCH_ID: -1,\n  ADVANCED_ADDITION_ID: -2,\n  SEARCH_MIN_LENGTH: 3,\n  SEARCH_DELAY: 750,\n  MAX_ITEMS: 10,\n  MAX_ITEMS_OFFLINE: 50 },\n\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n  },\n\n  /**\r\n      * When the render isn't editable\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"readonlySearch\");\n    var value = self.properties.value;\n    var label = value && self.hasValue() ? value.additionallabel ? value.label + \", \" + value.additionallabel : value.label : \"\";\n\n    // Render template\n    return $.kendoTmpl(template, { value: label });\n  },\n\n  /**\r\n      * When the render isn't editable\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    self.input = $(\".bz-rn-text\", control);\n    control.closest(\".ui-bizagi-render\").addClass(\"bz-rn-read-only\");\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Call base \n    self._super();\n\n    self.input = $(\".bz-rn-container-control-search\", control);\n    self.searchInput = $(\"input\", control);\n    self.isOfflineForm = isOfflineForm || false;\n\n    if (self.isOfflineForm) {\n      self.properties.submitOnChange = false;\n      self._simplySuggestOffline();\n    } else if (self.properties.advancedSearch) {\n      self._advanceSearch();\n    } else {\n      self._simplySearch();\n    }\n  },\n\n  /*\r\n     *\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (properties.editable) {\n      $(\".bz-rn-search-control-icons-clear\", control).bind(\"click\", function (e) {\n        e.stopPropagation();\n        self.setValue({ id: \"\" });\n        self.searchInput.prop(\"value\", \"\");\n        $(this).addClass(\"hidden\");\n        self.input.find(\".bz-rn-input-search-text\").removeClass(\"hasValue\");\n      });\n    }\n  },\n\n  /*\r\n     *\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"search\");\n\n    var params = {\n      allowSuggest: properties.allowSuggest,\n      editable: properties.editable,\n      allowClear: properties.allowClear,\n      id: properties.id,\n      xpath: properties.xpath,\n      hasValue: typeof properties.value !== \"undefined\" && properties.value !== null &&\n      typeof properties.value.label !== \"undefined\" && properties.value.label !== \"\",\n      allowTyping: properties.allowTyping,\n      advancedSearch: properties.advancedSearch,\n      hasMozillaHelpText: $.browser && $.browser.mozilla &&\n      properties.helpText !== null && properties.helpText !== \"\" ? true : false };\n\n\n    return $.kendoTmpl(template, params);\n  },\n\n  /*Simply suggest autocomplete offline*/\n  _simplySuggestOffline: function _simplySuggestOffline() {\n    var self = this;\n    var control = self.getControl();\n\n    $(\".bz-wp-search-control-search-icon\", control).addClass(\"disable-search\");\n    self.applyAutocompletePlugin();\n  },\n\n  /*Simply search autocomplete*/\n  _simplySearch: function _simplySearch() {\n    var self = this;\n    var control = self.getControl();\n\n    $(\".bz-wp-search-control-search-icon\", control).addClass(\"disable-search\");\n    self.applyAutocompletePlugin();\n  },\n\n  _advanceSearch: function _advanceSearch() {\n    var self = this;\n    // Set readonly property\n    self.searchInput.attr(\"readonly\", \"true\");\n\n    //Bind search click button\n    self.input.bind(\"click\", function () {\n      //Call showSlideSearch method\n      self.showSlideSearch();\n    });\n  },\n\n  /**\r\n      * Sets the value to show and calls the method to sets the control value\r\n      * @param {object} value\r\n      * @param {int} value.id\r\n      * @param {string} value.label\r\n      * @param {string=} value.additionallabel\r\n      * @example\r\n      *   value = {\r\n      *     id: 123,\r\n      *     label: \"xx\",\r\n      *     additionallabel: \"yyyy\"\r\n      *   }\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var label = \"\";\n    value = self.mapValue(value);\n\n    if (value !== null && typeof value !== \"undefined\" && typeof value.id !== \"undefined\") {\n      if (value.additionallabel && value.label) {\n        label = value.label + \",\" + value.additionallabel;\n      } else if (value.label) {\n        label = value.label;\n      } else {\n        label = \"\";\n      }\n\n      if (self.properties.editable) {\n        self.searchInput.val(label);\n\n        if (typeof value !== \"undefined\") {\n          self.input.find(\".bz-rn-input-search-text\").addClass(\"hasValue\");\n        } else {\n          self.input.find(\".bz-rn-input-search-text\").removeClass(\"hasValue\");\n        }\n      } else {\n        self.input.text(label);\n      }\n    }\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", value: \"\" };\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n\n  /*\r\n     *   Returns the value to display, ex. non-editable renders\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    return this.selectedValue;\n  },\n\n  /* \r\n     *   Opens the search slide\r\n     */\n  showSlideSearch: function showSlideSearch() {\n    var self = this;\n    var properties = self.properties;\n    var slideParams = $.extend({}, self.getParams(), {\n      container: self.getFormContainer().container,\n      title: properties.displayName || \"\",\n      allowNew: properties.allowNew });\n\n\n    // Show search dialog\n    // Create slide search object\n    var slideView = new bizagi.rendering.tablet.slide.view.search(self.dataService, self.renderFactory,\n    properties.searchForms, {\n      allowFullSearch: properties.allowFullSearch,\n      maxRecords: properties.maxRecords,\n      idRender: properties.id,\n      navigation: self.getParams().navigation,\n      idPageCache: properties.idPageCache,\n      orientation: properties.orientation || \"ltr\" },\n    slideParams);\n\n    // Render the search form\n    slideView.render({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache }).\n    done(function (item) {\n      // Set data\n      self.setValue(item);\n\n      // Submit info to server\n      self.submitData();\n    });\n  },\n\n  /* Apply autocomplete capabilities to a single input*/\n  applyAutocompletePlugin: function applyAutocompletePlugin() {\n    var self = this;\n    var control = self.getControl();\n    var searchInput = self.searchInput;\n    self.searchInput.parent().find(\".bz-rn-autocomplete-wrapper\").addClass(\"hidden\");\n\n    searchInput.addClass(\"ui-autocomplete-input\");\n    searchInput.on(\"click keyup\", function () {\n      self.autoCompleteSearchResults();\n    });\n\n    control.on(\"click mousedown\", \"li\", function () {\n      var elemObject = $.data(this).itemautocomplete;\n\n      self.setValue({ id: elemObject.id, label: elemObject.value }, true);\n      self.setDisplayValue({ id: elemObject.id, label: elemObject.value });\n\n      if (self.isOfflineForm) {\n        $(this).parent().hide();\n      } else {\n        if (typeof self.properties.submitOnChange !== \"undefined\" && self.properties.submitOnChange) {\n          self.submitOnChange();\n        }\n\n        $(this).parent().hide();\n      }\n\n      self.getControl().find(\".bz-rn-search-control-icons-clear\").removeClass(\"hidden\");\n      self.input.find(\".bz-rn-input-search-text\").addClass(\"hasValue\");\n    });\n\n    control.on(\"focusout\", \"input\", function () {\n      control.find(\"ul\").hide();\n      self.searchInput.parent().find(\".bz-rn-autocomplete-wrapper\").addClass(\"hidden\");\n    });\n  },\n\n  /* Search results on keyup or click the input field*/\n  autoCompleteSearchResults: function autoCompleteSearchResults() {\n    var self = this;\n    var searchInput = self.searchInput;\n    var currentValue = self.searchInput.val();\n\n    if (currentValue === \"\") {\n      self.input.find(\".bz-rn-search-control-icons-clear\").addClass(\"hidden\");\n    }\n\n    $.when(\n    self.processRequest({ term: searchInput.val() }, function () {})).\n    done(function (resp) {\n      var wrapper = self.searchInput.parent().find(\".bz-rn-autocomplete-wrapper\");\n      if (resp.length > 0) {\n        wrapper.removeClass(\"hidden\");\n      } else {\n        if (!wrapper.hasClass(\"hidden\")) {\n          wrapper.addClass(\"hidden\");\n        }\n      }\n\n      var elementUl = searchInput.parent().find(\"ul\");\n      elementUl.find(\"li\").remove();\n\n      elementUl.css({\n        display: \"inline-block\",\n        left: searchInput.position().left,\n        top: searchInput.position().top + 15 });\n\n\n      var length = resp.length;\n      if (length > 0) {\n        //display the wrapper\n        self.control.find(\".bz-rn-autocomplete-wrapper\").show();\n\n        for (var i = 0; i < length; i++) {\n          var searchItem = self.renderSearchItem(resp[i]);\n          $(searchItem).addClass(\"bz-rn-autocomplete-item\");\n          searchItem.appendTo(elementUl);\n        }\n      }\n    });\n  },\n\n  processRequest: function processRequest(req) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Create array for response objects   \n    var suggestions = [];\n\n    /* \r\n                          *   Method to add the special items to the suggestions \r\n                          */\n    function addToSuggestions(alSuggestions) {\n\n      // Add the clear option - TODO: To implement            \n      /* if (properties.allowClear && (self.value !== undefined)) { \r\n      alSuggestions.push({ id: self.Class.CLEAR_SEARCH_ID, label: \"\", value: \"\" });\r\n      }*/\n\n      // Add additional option if advanced search is on\n      if (properties.advancedSearch) {\n        alSuggestions.push({ id: self.Class.ADVANCED_SEARCH_ID, label: \"\", value: \"\" });\n      }\n      // Add additional option if allow addition is on\n      if (properties.allowAdd) {\n        alSuggestions.push({ id: self.Class.ADVANCED_ADDITION_ID, label: \"\", value: \"\" });\n      }\n      // Pass array to callback   \n      defer.resolve(alSuggestions);\n    }\n\n    if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\n      // Update term property to reflect the search\n      properties.term = req.term;\n      if (self.isOfflineForm) {\n\n        var dataOffline = self.properties.data;\n        var itemsAttached = 0;\n\n        $.each(dataOffline, function (index, current) {\n\n          if (itemsAttached >= self.Class.MAX_ITEMS_OFFLINE) {\n            return false;\n          }\n\n          var parseValue = \"\";\n          switch (_typeof(current.value)) {\n            case \"number\":\n              parseValue = current.value;\n              break;\n            case \"object\":\n              parseValue = current.value.toString();\n              break;\n            case \"string\":\n              parseValue = current.value;\n              break;\n            default:\n              parseValue = current.value;\n              break;}\n\n\n          var isSuggestMatch = parseValue !== undefined && (\n          parseValue.toLowerCase().indexOf(properties.term.toLowerCase()) !== -1 || properties.term === \"%%%\");\n\n          if (isSuggestMatch) {\n            suggestions.push({\n              id: current.id !== undefined ? current.id : \"\",\n              label: parseValue !== undefined ? parseValue.replace(new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" +\n              $.ui.autocomplete.escapeRegex(properties.term) + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\"),\n              \"<strong>$1</strong>\") : \"\",\n              value: parseValue !== undefined ? current.value : \"\" });\n\n          }\n\n          itemsAttached += 1;\n        });\n\n        addToSuggestions(suggestions);\n      } else {\n        this.getData().\n        done(function (data) {\n          // Process response to highlight matches\n          var i = -1;\n          var item;\n\n          while ((item = data[++i]) && properties.maxRecords > i && i < self.Class.MAX_ITEMS) {\n            suggestions.push({\n              id: item.id,\n              label: item.value.toString().\n              replace(new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" +\n              $.ui.autocomplete.escapeRegex(req.term) + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\"),\n              \"<strong>$1</strong>\"),\n              value: item.value });\n\n          }\n\n          addToSuggestions(suggestions);\n        }).fail(function () {\n          // fail\n          defer.reject();\n        });\n      }\n    } else {\n      addToSuggestions(suggestions);\n    }\n\n    return defer.promise();\n  },\n\n  renderSearchItem: function renderSearchItem(item) {\n    var self = this;\n    var searchItem = $.kendoTmpls(self.renderFactory.getTemplate(\"searchItem\"), {\n      id: item.id,\n      label: item.label,\n      value: item.value });\n\n\n    searchItem.data(\"itemautocomplete\", item);\n\n    return searchItem;\n  },\n\n  showAddRecordDialog: function showAddRecordDialog() {\n    var self = this;\n    var properties = self.properties;\n    var buttons = {\n      text: bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n      click: function click() {\n        // Show dialog with add form\n        var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n          showSaveButton: properties.editable,\n          title: bizagi.localization.getResource(\"render-dialog-entity\"),\n          onSave: function onSave(data) {\n            // Remove pagecache from data\n            var idPageCache = data.idPageCache;\n\n            var params = {\n              action: \"SAVE\",\n              data: data,\n              idPageCache: idPageCache,\n              guidEntity: properties.entity,\n              contexttype: \"entity\" };\n\n\n            $.when(\n            self.dataService.submitData(params)).\n            done(function () {\n              // SUCCESS\n            });\n          } });\n\n\n        dialog.render({\n          idRender: properties.id,\n          idPageCache: properties.idPageCache,\n          requestedForm: \"addForm\",\n          guidEntity: properties.entity,\n          contextType: \"entity\" }).\n        fail(function () {\n\n        });\n      } };\n\n\n    return {\n      buttons: buttons };\n\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Tablet Render ECM\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments: Defines the ECM control for iPad\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.ecm.extend(\"bizagi.rendering.ecm\", {\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  QUALITY_PICTURE: 50,\n  LIMIT: 1,\n  //limit: The maximum number of audio clips,video clips,etc in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\"] },\n{\n  renderControl: function renderControl(listControl, fileProperties) {\n    var self = this;\n\n    return $.when(self._super(listControl, fileProperties)).\n    done(function (html) {\n      return html;\n    }).fail(function () {\n      return \"Error\";\n    }).always(function (html) {\n      self.stopLoading();\n      return html;\n    });\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    // Call base\n    self._super();\n\n    self.activateUploadNative();\n  },\n\n  replaceControlHtml: function replaceControlHtml(html, replace) {\n    html = html || \"\";\n    replace = replace || \"\";\n\n    var respString = $(html.replace(\"{{control}}\", replace));\n\n    if (replace === \"\") {\n      this.startLoading(respString);\n    }\n\n    return respString.get(0).outerHTML;\n  },\n\n  /**\r\n      * Override because of the required element\r\n      * @override\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    var labelElement = $(\"label\", self.getLabel());\n    var control = self.getControl();\n\n    //Remove the required div from the dom in order to have only one any time\n    control.find(\".ui-bizagi-render-control-required, .bz-rn-ecm-required\").remove();\n    var properties = self.properties;\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument)) {\n      labelElement.text((properties.displayName || \"\") + \" \");\n      if (!self.hasValue()) {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\"></div>\");\n      } else {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\" style=\\\"display: none\\\"></div>\");\n      }\n    } else {\n      labelElement.text(properties.displayName || \"\"); //+ ' :'\n    }\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n\n  /**\r\n      * Override because of the required element\r\n      * @override\r\n      */\n  changeRequiredLabel: function changeRequiredLabel() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    control.find(\".ui-bizagi-render-control-required, .bz-rn-ecm-required\").remove();\n\n    if (properties.required) {\n\n      if (!self.checkRequired([])) {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\"></div>\");\n\n      } else {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\" style=\\\"display: none\\\"></div>\");\n      }\n    }\n  },\n\n  startLoading: function startLoading(holder) {\n    holder = holder || this.getRenderedElement();\n    $(\".ui-bizagi-render-control\", holder).prepend(\"<div class=\\\"innerLoader\\\"></div>\").addClass(\"bz-rn-ecm-control\");\n  },\n\n  stopLoading: function stopLoading() {\n    $(\".innerLoader\", this.getControl()).remove();\n  },\n\n  startWaiting: function startWaiting($button) {\n    var $control = $button.closest(\".bz-rn-ecm-metadata\");\n    $button.addClass(\"loading\");\n    $control.find(\"input, a\").css(\"opacity\", 0.6);\n    $control.find(\".ui-bizagi-render-button, button, input\").prop(\"disabled\", \"disabled\");\n    $control.find(\"input\").prop(\"readonly\", \"readonly\");\n  },\n\n  stopWaiting: function stopWaiting($button) {\n    var $control = $button.closest(\".bz-rn-ecm-metadata\");\n    $control.find(\"input, a\").css(\"opacity\", 1);\n    $control.find(\".ui-bizagi-render-button, button, input\").prop(\"disabled\", false);\n    $control.find(\"input\").prop(\"readonly\", false);\n    $control.find(\".loading\").removeClass(\"loading\");\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    if (!bizagi.util.isCordovaSupported()) {\n      self.addEventToOpenSlide();\n    }\n\n    if (!self.properties.editable) {\n      self.element.addClass(\"bz-rn-read-only\");\n    }\n\n    self.closeAccordionSection();\n  },\n\n  addEventToOpenSlide: function addEventToOpenSlide() {\n    var self = this;\n    var mode = self.getMode();\n    var container = self.getControl();\n\n    self.itemAddfile = $(\".bz-rn-upload-show-menu\", container);\n    self.itemAddfile.hide();\n\n    $(\"li\", container).click(function () {\n      if (mode === \"execution\") {\n        bizagi.loading.start();\n        var title = this.title || $(this).data(\"filename\");\n        $.when(bizagi.util.media.downloadFile($(this).data(\"url\"), title)).fail(function (error) {\n          if (error.responseText) {\n            self.getFormContainer().failHandler(error.responseText);\n          }\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }\n    });\n  },\n\n  activateUploadNative: function activateUploadNative() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getControl();\n    var control = self.getControl();\n\n    if (self.getLabel()) {\n      self.getLabel().hide();\n    }\n\n    self.itemAddfile = $(\".bz-rn-ecm-upload\", container);\n    self.$inputFile = $(\".bz-rn-upload-files-web\", control);\n\n    $(\".bz-rn-ecm-activate-menu\", control).bind(\"click\", function () {\n      var elementBase = $(this);\n      var parents = elementBase.parents(\".bz-rn-ecm-metadata\");\n      var menu = $(\".bz-rn-ecm-menu-container\", parents);\n\n      if (!$(this).is(\".active\") && !$(\".bz-rn-ecm-metadata-container\", parents).is(\".active\")) {\n        self.closeAccordionSection();\n        $(this).addClass(\"active\");\n        menu.addClass(\"showMenu\");\n      } else if (!$(\".bz-rn-ecm-metadata-container\", parents).is(\".active\")) {\n        $(this).removeClass(\"active\");\n        self.closeAccordionSection();\n      }\n\n      var tmpidElement = elementBase.parent().data(\"idfileupload\") || \"\";\n      self.elementsEvent = {\n        \"menu\": menu,\n        \"lock\": $(\".bz-ecm-lock\", menu),\n        \"unlock\": $(\".bz-ecm-unlock\", menu),\n        \"del\": $(\".bz-ecm-delete\", menu),\n        \"edit\": $(\".bz-ecm-edit\", menu),\n        \"element\": {\n          \"id\": tmpidElement,\n          \"filename\": elementBase.parent().attr(\"title\") || \"\",\n          elementReference: this },\n\n        \"params\": {\n          idFileUpload: tmpidElement,\n          xPath: self.properties.xpath,\n          idAttrib: self.properties.idAttrib,\n          idPageCache: self.properties.idPageCache,\n          xpathContext: self.getXpathContext() },\n\n        \"panelMetadata\": $(\".bz-rn-ecm-metadata-container\", parents),\n        \"btnCancel\": $(\".ecm-btn-cancel\", parents),\n        \"btnSave\": $(\".ecm-btn-save\", parents) };\n\n\n      if (menu.is(\":visible\")) {\n        self.addEventsEcm();\n      } else {\n        self.removeEventsEcm();\n      }\n\n    });\n\n    if (!properties.editable) {\n      self.itemAddfile.hide();\n      return;\n    }\n\n    if (bizagi.util.isCordovaSupported()) {\n      if (bizagi.util.isAndroidTabletDevice()) {\n        self.uploadEcmLink = $(\".bz-rn-ecm-url > span\", container);\n        self.uploadEcmLink.on(\"click\", function () {\n          window.open(encodeURI(this.getAttribute(\"href\")), \"_system\", \"location=yes\");\n        });\n      } else if (bizagi.util.isNativePluginSupported()) {\n        // iOS native behaviour, should open files through a webview\n        var filesLinkElements = container.find(\".bz-rn-ecm-url > a\");\n\n        filesLinkElements.removeAttr(\"href\");\n        filesLinkElements.on(\"click\", function () {\n          bizagi.loading.start();\n          $.when(bizagi.util.media.downloadFile($(this).data(\"url\"), this.title)).fail(function (error) {\n            if (error.responseText) {\n              self.getFormContainer().failHandler(error.responseText);\n            }\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        });\n      }\n\n      self.itemsUpload = {\n        \"file\": $(\".file\", container),\n        \"image\": $(\".image\", container),\n        \"cimage\": $(\".cimage\", container),\n        \"caudio\": $(\".caudio\", container),\n        \"cvideo\": $(\".cvideo\", container) };\n\n\n      self.itemAddfile.bind(\"click\", function () {\n        var template = self.renderFactory.getTemplate(\"ecmModalView\");\n        var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n        var data = {\n          \"editable\": self.properties.editable,\n          \"displayName\": self.properties.displayName || \"\" };\n\n        var modalView = $($.trim(modalViewTemplate(data))).clone();\n\n        modalView.kendoMobileModalView({\n          close: function close() {\n\n            self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n            this.destroy();\n            this.element.remove();\n          },\n          modal: false });\n\n\n        self.configureModalViewHandlers(modalView);\n\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        modalView.kendoMobileModalView(\"open\");\n      });\n\n      self.checkExtensions();\n      self.checkMaxFiles();\n    } else {\n      if (bizagi.util.media.fileAPISupported()) {\n        $(self.itemAddfile).click(function () {\n          self.$inputFile.click();\n        });\n      } else {\n        // Bloquea la acción de carga de archivos\n        self.itemAddfile.hide();\n      }\n\n      // Just in case\n      self.$inputFile.on(\"click\", function (e) {e.stopPropagation();});\n\n      // Image change (Web only)\n      self.$inputFile.on(\"change\", function () {\n        var dataFile = self.$inputFile[0].files[0];\n        dataFile.fullPath = self.$inputFile[0].value;\n        var extensions = [].concat(self.Class.EXTENSIONSIMG, self.Class.EXTENSIONSVIDEO, self.Class.EXTENSIONSAUDIO);\n\n        self.startLoading();\n        if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n        bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n          $.when(self.uploadFile(dataFile)).done(function (result) {\n            if (_typeof(result) !== \"object\") {\n              // onUploadFileCompleted 2nd param needs to be a response object\n              result = {\n                response: result };\n\n            }\n            self.onUploadFileCompleted(self, result);\n          }).fail(function (error) {\n            self.stopLoading();\n\n            if (error.statusText !== \"Unauthorized\") {\n              bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-language-error\"));\n            }\n\n            if (error.code === 3) {\n              bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n            } else {\n              bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n            }\n            bizagi.log(\"An error has occurred: Code = \" + error.code);\n          });\n\n        } else {\n          self.stopLoading();\n        }\n      });\n    }\n  },\n\n  closeAccordionSection: function closeAccordionSection() {\n    var self = this;\n    var control = self.getControl();\n    var menuItem = $(\".bz-rn-ecm-activate-menu\", control);\n    var menu = $(\".bz-rn-ecm-menu-container\", control);\n    var metadata = $(\".bz-rn-ecm-metadata-container\", control);\n\n    menuItem.removeClass(\"active\");\n    menu.removeClass(\"showMenu\");\n\n    metadata.removeClass(\"active\");\n    metadata.slideUp(300).removeClass(\"open\");\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * @param {} inputContainer\r\n      * @returns {}\r\n      */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    // Getting combo list elements\n    self.listOptions = inputContainer.find(\".bz-rn-upload-options li\");\n\n    // Setting the initial selected display value\n    self.listOptions.bind(\"click\", function () {\n      inputContainer.kendoMobileModalView(\"close\");\n      self.applyListener($(this).data(\"role\"));\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      inputContainer.kendoMobileModalView(\"close\");\n    });\n  },\n\n  addEventsEcm: function addEventsEcm() {\n    var self = this;\n    self.removeEventsEcm();\n\n    self.elementsEvent.lock.click(function () {\n      $.when(self.dataService.checkOutFile(self.elementsEvent.params)).done(function () {\n        self.elementsEvent.lock.removeClass(\"bz-ecm-item-menu-enable\");\n        self.elementsEvent.unlock.addClass(\"bz-ecm-item-menu-enable\");\n\n      });\n    });\n\n    self.elementsEvent.unlock.click(function () {\n      $.when(self.dataService.cancelCheckOut(self.elementsEvent.params)).done(function () {\n        self.elementsEvent.unlock.removeClass(\"bz-ecm-item-menu-enable\");\n        self.elementsEvent.lock.addClass(\"bz-ecm-item-menu-enable\");\n      });\n    });\n\n    var nTimeoutAccordionSection = null;\n\n    self.elementsEvent.del.bind(\"click\", function () {\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      self.closeAccordionSection();\n      self.startLoading();\n\n      $(self.elementsEvent.element.elementReference).closest(\".bz-rn-ecm-metadata\").css(\"opacity\", 0.5);\n\n      $.when(self.dataService.deleteECMFile(self.elementsEvent.params)).done(function () {\n        self.stopLoading();\n        self.removeEventsEcm();\n        $(self.elementsEvent.element.elementReference).parents(\".bz-rn-ecm-metadata\").remove();\n\n        //Set files in a temporal array\n        var files = [].concat(self.files);\n\n        //Remove element form files array\n        for (var i = 0; i < files.length; i++) {\n          if (files[i][0] === self.elementsEvent.params.idFileUpload) {\n            files.splice(i, 1);\n          }\n        }\n\n        //Set Value\n        self.setValue(files);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n\n      });\n    });\n\n    self.setMobiscroll();\n\n    self.elementsEvent.edit.click(function () {\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      self.closeAccordionSection();\n\n      if (!self.elementsEvent.panelMetadata.is(\".active\")) {\n        self.elementsEvent.panelMetadata.addClass(\"active\");\n        nTimeoutAccordionSection = setTimeout(function () {\n          self.elementsEvent.panelMetadata.stop().slideDown(300).addClass(\"open\");\n        }, 200);\n      }\n    });\n\n    self.elementsEvent.btnSave.click(function () {\n      var properties = self.properties;\n      var elementsToCheck = $(\".bz-rn-ecm-metadata-value\", self.elementsEvent.panelMetadata);\n      var metadata = [];\n      var isInvalid = false;\n      var $button = $(this);\n\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      //self.closeAccordionSection();\n      //self.startLoading();\n      self.startWaiting($button);\n\n      for (var metadataelement = 0; metadataelement < elementsToCheck.length; metadataelement++) {\n        var tmpElement = elementsToCheck[metadataelement];\n        var oldValue = $(tmpElement).data(\"value\");\n        var type = $(tmpElement).data(\"metadatatype\");\n        var required = $(tmpElement).data(\"required\");\n        var readonly = $(tmpElement).data(\"readonly\");\n        var description = $(tmpElement).data(\"description\");\n        var idmetadata = $(tmpElement).data(\"idmetadata\");\n        var actualValue = null;\n\n        if (readonly) {\n          self.stopLoading();\n          self.stopWaiting($button);\n          return true;\n        }\n\n        if (type == \"STRING\" || type == \"DECIMAL\") {\n          actualValue = $(\"input\", tmpElement).val();\n        } else if (type == \"BOOL\") {\n          actualValue = $(\"input[name=ecm-radio]:checked\", tmpElement).val();\n        } else if (type == \"DATETIME\") {\n          var format = self.properties.fullFormat ? self.properties.fullFormat : self.getResource(\"fullFormat\") != \"fullFormat\" ? self.getResource(\"fullFormat\") : \"yyyy-MM-dd HH:mm:ss\";\n          actualValue = bizagi.util.dateFormatter.formatDate(bizagi.util.dateFormatter.getDateFromISO($(\"input\", tmpElement).attr(\"value\"), false), format);\n        }\n\n        if (required && (actualValue === \"\" || actualValue === null)) {\n          bizagi.showMessageBox(description + \": \" + self.getResource(\"render-ecm-tooltip-mandatory\"), \"Error\");\n          isInvalid = true;\n        }\n\n        if (!isInvalid && actualValue != oldValue) {\n          metadata.push({\n            idMetadata: idmetadata,\n            value: actualValue });\n\n        }\n      }\n\n      if (!isInvalid) {\n        var params = self.buildAddParams();\n        params.fileName = self.elementsEvent.element.filename;\n        params.idFileUpload = self.elementsEvent.element.id;\n        params.idPageCache = properties.idPageCache;\n        params.metaValues = JSON.encode({\n          metadataValues: metadata });\n\n\n        $.when(self.dataService.updateECMMetadata(params)).done(function () {\n          self.stopLoading();\n          self.stopWaiting($button);\n        });\n      } else\n      {\n        self.stopLoading();\n        self.stopWaiting($button);\n      }\n    });\n\n    self.elementsEvent.btnCancel.click(function () {\n      self.closeAccordionSection();\n      self.removeEventsEcm();\n    });\n  },\n\n  /**\r\n      * Creates the date picker for the DOM.bz-ecm-metadata-date elements\r\n      */\n  setMobiscroll: function setMobiscroll() {\n    var self = this;\n    var metadataElements = self.elementsEvent.panelMetadata.find(\".bz-ecm-metadata-date\");\n    metadataElements.each(function (index, input) {\n      var $input = $(input);\n      var value = $input.attr(\"value\");\n      var now = new Date();\n      var valueDate = new Date(value) || now;\n      var minDate = now.getTime() < valueDate.getTime() ? now : valueDate;\n      minDate.setFullYear(minDate.getFullYear() - 2);\n      $input.mobiscroll().calendar({\n        mode: \"mixed\", // Specify scroller mode like: mode: \"mixed\" or omit setting to use default\n        display: \"bottom\", // Specify display mode like: display: \"bottom\" or omit setting to use default\n        controls: [\"calendar\"],\n        min: minDate,\n        defaultValue: valueDate,\n        lang: bizagi.util.languages[BIZAGI_LANGUAGE] || \"en\",\n        onSet: function onSet(e) {\n          // It seems like the plugin doesn't sets the value\n          $input.attr(\"value\", e.valueText);\n        } });\n\n    });\n  },\n\n  removeEventsEcm: function removeEventsEcm() {\n    var self = this;\n\n    self.elementsEvent.lock.unbind(\"click\");\n    self.elementsEvent.unlock.unbind(\"click\");\n    self.elementsEvent.del.unbind(\"click\");\n    self.elementsEvent.edit.unbind(\"click\");\n    self.elementsEvent.btnSave.unbind(\"click\");\n    self.elementsEvent.btnCancel.unbind(\"click\");\n  },\n\n  removeListener: function removeListener() {\n    var self = this;\n    self.itemsUpload.image.unbind(\"click\");\n    self.itemsUpload.file.unbind(\"click\");\n    self.itemsUpload.cimage.unbind(\"click\");\n    self.itemsUpload.caudio.unbind(\"click\");\n    self.itemsUpload.cvideo.unbind(\"click\");\n  },\n\n  applyListener: function applyListener(option) {\n    var self = this;\n\n    switch (option) {\n      case \"image\":\n        navigator.camera.getPicture(function (dataImage) {\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).done(function () {\n            $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n              self.fileProperties = fileData;\n              self.saveImage(self, dataImage);\n            });\n          });\n          self.itemAddfile.click();\n        }, self.onFail, {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY });\n\n        break;\n\n      case \"cimage\":\n        navigator.camera.getPicture(function (dataImage) {\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).done(function () {\n            $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n              self.fileProperties = fileData;\n              self.saveImage(self, dataImage);\n            });\n          });\n          self.itemAddfile.click();\n        },\n        self.onFail, {\n          quality: self.Class.QUALITY_PICTURE,\n          correctOrientation: true });\n\n        break;\n\n      case \"caudio\":\n        navigator.device.capture.captureAudio(function (mediaFiles) {\n          var audioUrl = mediaFiles[0].localURL;\n          $.when(bizagi.util.media.checkMaxSize(audioUrl, self.properties)).done(function () {\n            self.saveAudio(self, mediaFiles);\n          }).always(function () {\n            bizagi.loading.stop({});\n          });\n          self.itemAddfile.click();\n        }, self.onFail, { limit: self.Class.LIMIT });\n        break;\n\n      case \"cvideo\":\n        navigator.device.capture.captureVideo(function (dataImage) {\n          $.when(bizagi.util.media.checkMaxSizeVideo(dataImage, self.properties)).done(function () {\n            self.saveVideo(self, dataImage);\n          }).always(function () {\n            bizagi.loading.stop({});\n          });\n          self.itemAddfile.click();\n        }, self.onFail, { limit: self.Class.LIMIT });\n        break;\n\n      case \"file\":\n        bizagi.showMessageBox(\"In development\", \"Error\");\n        break;\n\n      default:\n        break;}\n\n  },\n\n  renderUploadItem: function renderUploadItem(file) {\n    return this._super(file);\n  },\n\n  /**\r\n      * Send file using HTTP\r\n      * @param dataFile\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  uploadFile: function uploadFile(dataFile) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n    bizagi.util.media.checkFileTypes(dataFile, self.properties, [].concat(self.Class.EXTENSIONSIMG, self.Class.EXTENSIONSVIDEO, self.Class.EXTENSIONSAUDIO))) {\n\n      // Get form data for POSTing\n      var formData = new FormData();\n      var form = self.getFormContainer();\n      var data = self.buildAddParams();\n\n      var keys = Object.keys(data);\n      keys.map(function (key) {\n        formData.append(key, data[key]);\n      });\n\n      formData.append(\"Filedata\", dataFile);\n      // It seems like some OS uses \\ instead of / so ...\n      formData.append(\"Filename\", dataFile.name.substr(dataFile.name.replace(/([\\\\\\/]+)/g, \"/\").lastIndexOf(\"/\") + 1));\n\n      if (self.properties.contexttype) {\n        formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", self.properties.contexttype);\n      }\n\n      try {\n        if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n          formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n        } else {\n          formData.append(\"JSESSIONID\", form.properties.sessionId);\n        }\n      } catch (e) {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n\n      self.dataService.processUploadFile({\n        url: self.properties.addUrl,\n        formData: formData }).\n      done(function (response) {\n        defer.resolve(response);\n      }).fail(function (error) {\n        defer.reject(error);\n      });\n\n    } else {\n      bizagi.loading.stop();\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Send image using HTTP\r\n      * @param {} context\r\n      * @param {} dataImage\r\n      * @returns {}\r\n      */\n  saveImage: function saveImage(context, dataImage) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n    var fileName = self.fileProperties.name;\n\n    if (self.editedImageURL) {\n      params.dataFile = self.editedImageURL;\n    } else if (self.fileProperties) {\n      params.dataFile = self.fileProperties.url;\n    }\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.mimeType = \"image/jpeg\";\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n\n    //Cleans variables related previous uploads\n    self.editedImageURL = null;\n    self.fileProperties = null;\n\n    // Fix android 4.4 getting images from recent folder\n    params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  saveAudio: function saveAudio(context, dataAudio) {\n    var self = context;\n    var params = {};\n    var fileName = dataAudio[0].name;\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileName = fileName;\n    params.options.uploadKey = { key: addParams[\"xPath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataAudio[0].fullPath;\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  saveVideo: function saveVideo(context, dataVideo) {\n    var self = context;\n    var params = {};\n    var fileName = dataVideo[0].name;\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.uploadKey = { key: addParams[\"xPath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataVideo[0].fullPath;\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  onFail: function onFail(error) {\n    bizagi.log(\"Error code: \" + error.code);\n  },\n\n  onUploadFileCompleted: function onUploadFileCompleted(context, response) {\n    var self = this;\n\n    try {\n      response = JSON.parse(decodeURI(response.response));\n      if (response.idFileUpload) {\n        self.submitOnChange();\n      } else {\n        throw \"not present idFileUpload\";\n      }\n    } catch (e) {\n      bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      bizagi.log(\"Error ECM:\");\n      bizagi.log(e);\n    }\n  },\n\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var maxFiles = properties.maxfiles;\n    var actualFiles = properties.value.length;\n\n    if (maxFiles !== 0 && actualFiles >= maxFiles) {\n      self.itemAddfile.hide();\n      self.removeListener();\n    }\n  },\n\n  checkExtensions: function checkExtensions() {\n    var self = this;\n    var properties = self.properties;\n    var validExtensions = properties.validExtensions;\n\n    if (!validExtensions) {\n      return;\n    }\n\n    validExtensions = validExtensions.split(\";\");\n\n    if (validExtensions.length == 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\n      return;\n    }\n\n    var enableVideo = false;\n    var enableAudio = false;\n    var enableImage = false;\n\n    for (var i = 0; i < validExtensions.length; i++) {\n      validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\n\n      var image = self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]);\n\n      if (image >= 0) {\n        enableImage = true;\n      }\n    }\n\n    if (!enableImage) {\n      self.itemsUpload.image.hide();\n      self.itemsUpload.cimage.hide();\n\n      self.itemsUpload.image.parent().addClass(\"bz-rn-upload-hidden-item\");\n      self.itemsUpload.cimage.parent().addClass(\"bz-rn-upload-hidden-item\");\n    }\n\n    if (!enableAudio) {\n      self.itemsUpload.caudio.hide();\n      self.itemsUpload.caudio.parent().addClass(\"bz-rn-upload-hidden-item\");\n    }\n\n    if (!enableVideo) {\n      self.itemsUpload.cvideo.hide();\n      self.itemsUpload.cvideo.parent().addClass(\"bz-rn-upload-hidden-item\");\n    }\n\n\n    if (!enableAudio && !enableImage && !enableVideo) {\n      self.itemAddfile.hide();\n      self.removeListener();\n    }\n  },\n\n  renderFileLayout: function renderFileLayout(data, fileProperties) {\n    var self = this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\n    var deferred = $.Deferred();\n\n    $.when(self.dataService.getECMMetadata(data),\n    fileProperties ? [fileProperties] : self.dataService.getFileProperties(data)).\n    done(function (metaData, fileProperties) {\n\n      fileProperties[0].data = data;\n\n      // Make xpath context\n      fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\n      fileProperties[0].xpath = self.properties.xpath;\n\n      metaData[0].filename = data.fileName;\n      metaData[0].url = self.buildItemUrl(fileProperties[0]);\n\n      // Define File Properties\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].ecm_isVisible = fileProperties[0].isVisible;\n      metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\n      metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\n      metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\n      metaData[0].ecm_allowView = fileProperties[0].allowView;\n      metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\n      metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\n      metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].idFileUploads = fileProperties[0].idFileUpload;\n      metaData[0].xpath = fileProperties[0].xpath;\n      metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\n      metaData[0].deviceType = bizagi.detectDevice();\n\n      if (metaData[0].metadata && metaData[0].metadata.length) {\n        metaData[0].metadata.map(function shapeMetadataValues(meta) {\n          if (meta.metadataType === \"DATETIME\") {\n            // Format the actual date to ISO, so mobiscroll can useit\n            // Before save the value it has to go back to the original format (cause service will accept any format)\n            meta.dateFormat = self.getResource(\"fullFormat\") !== \"fullFormat\" ? self.getResource(\"fullFormat\") : self.properties.fullFormat ? self.properties.fullFormat : \"yyyy-MM-dd HH:mm:ss\";\n            meta.value = bizagi.util.dateFormatter.formatDate(meta.value ? bizagi.util.dateFormatter.getDateFromFormat(meta.value, meta.dateFormat) : new Date(), \"yyyy-MM-dd\");\n          }\n        });\n      }\n\n      var html = $.kendoTmpl(metadataTemplate, metaData[0]);\n      deferred.resolve(html);\n    });\n\n    return deferred.promise();\n  },\n  /*Check if all meta data fields that's right */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    control = self.getControl(),\n    message = [],\n    error = false,\n    properties = self.properties;\n\n\n    var bValid = true;\n\n    if (properties.required) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n      // Call base\n      bValid = newRow ? true : this._super(invalidElements);\n\n      if (self.filesCount === 0 && bValid) {\n\n        invalidElements.push({\n          xPath: properties.xpath,\n          message: self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName) });\n\n        bValid = false;\n      }\n    }\n\n    if (properties.editable) {\n      var $arrayEcmControls = $(\".bz-rn-ecm-container:visible\", control).find(\".bz-rn-ecm-metadata-value[data-required='true']\");\n      $.each($arrayEcmControls, function (key, value) {\n        if ($(\"input\", value).val() === \"\") {\n          message.push($(value).data(\"description\"));\n          error = true;\n        }\n      });\n    }\n\n    if (error) {\n      var errorMessage = self.getResource(\"render-required-text\").replaceAll(\"#label#\", message.join(\", \"));\n      invalidElements.push({\n        xPath: properties.xpath,\n        message: errorMessage });\n\n\n      // If it has error, enable editable view.\n      // open popup\n\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.setValue(null);\n    self.clearDisplayValue();\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n\n    var arrayItems = control.find(\".bz-rn-ecm-file-container\");\n    var length = arrayItems.length - 1;\n\n    $.each(arrayItems, function (index, value) {\n      var item = $(value);\n      var file = item.data();\n\n      if (file) {\n        $.when(self.deleteUploadItem(item, file.idfileupload)).done(function () {\n          // Detach item\n          item.remove();\n        });\n      }\n    });\n\n    // Check maxFiles\n    self.filesCount = 0;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Tablet Render Yes-No Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the Yes-No render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.searchList.extend(\"bizagi.rendering.searchList\", {\n  SEARCH_MIN_LENGTH: 2,\n  temporalElements: {} },\n{\n  /**\r\n   * RenderSingle Method\r\n   * */\n  initializeList: function initializeList() {\n    var self = this;\n\n    self._super();\n    var control = self.getControl();\n\n    //Getting all aux templates\n    self.modalViewTemplates = kendo.template(self.renderFactory.getTemplate('searchListModalViewAuxTemplates'), { useWithBlock: false });\n    self.inputTemplates = kendo.template(self.renderFactory.getTemplate('searchListInputAuxTemplates'), { useWithBlock: false });\n\n    //Getting the input\n    self.input = $(\".bz-rn-container-searchlist\", control);\n\n    self.configureListHandlers();\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRender: function postRender() {\n    var self = this;\n\n    //Initialicing the list\n    self.initializeList();\n\n    // Call base\n    this._super();\n\n    //trigger click event on remove tag\n    self.input.on(\"click\", '.bz-rn-remove-tag-on-search-list', function () {\n      self.removeItem($(this));\n    });\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Initialicing the list\n    self.initializeList();\n\n    // Call base\n    this._super();\n\n    if (!self.properties.editable) {\n      //Add styles class\n      self.configureReadOnly();\n    }\n  },\n\n  /**\r\n      * Setting the control events\r\n      * */\n  configureListHandlers: function configureListHandlers() {\n    var self = this;\n\n    if (self.properties.editable) {\n      if (self.properties.value.length > 0) {\n        self.configureModalView(\".bz-rn-last-child\");\n      } else {\n        self.configureModalView(\"ul\");\n        self.configureModalView(\".bz-rn-last-child\");\n      }\n    }\n  },\n\n  /**\r\n      * Configure the modal view to select values\r\n      * */\n  configureModalView: function configureModalView(selector) {\n    var self = this;\n    var inputContainer = selector === \"\" ? self.input : $(selector, self.input);\n\n    inputContainer.unbind().bind(\"click\", function () {\n      //Getting the values to show\n      var elements = $(\"ul li.bz-rn-regular-element\", self.input);\n      var values = [];\n\n      //Reset the temporal array\n      self.Class.temporalElements = {};\n\n      for (var i = 0, length = elements.length; i < length; i++) {\n        var id = $(elements[i]).data(\"id\");\n        var value = $(\"label\", $(elements[i])).text();\n        var newElement = { 'id': id, 'value': value };\n\n        values.push(newElement);\n\n        //Add element to temporal context array\n        self.addTemporalElement(id, value, false);\n      }\n\n      //Creating modal view\n      var template = self.renderFactory.getTemplate('searchListModalView');\n      var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n      var data = {\n        'items': values,\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView('open');\n      modalView.closest(\".k-animation-container\").addClass(\"bz-rn-new-modalview-position\");\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    //Showing found results\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").on('keypress keyup', function () {\n      if (this.value !== \"\") {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n      } else {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n      }\n\n      //Show splash loader\n      bizagi.loading.start({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n\n      //Getting and showing the data\n      $.when(self.showResults(this.value, inputContainer)).always(function () {\n        bizagi.loading.stop({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n      });\n    });\n\n    //Cleaning search\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind('click', function () {\n      self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //when click on apply button\n    inputContainer.delegate(\".ui-bizagi-apply-button-searchlist\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Trigger delete event for tags\n    inputContainer.find(\".filter-searchlist-modal-view-tags\").on(\"click\", '.bz-rn-remove-tag-on-search-list',\n    function () {\n      self.removeItem($(this), true);\n\n      var term = inputContainer.find(\".bz-wp-modalview-header-input-search\").val();\n\n      //Show splash loader\n      bizagi.loading.start({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n\n      //Getting and showing the data\n      $.when(self.showResults(term, inputContainer)).always(function () {\n        bizagi.loading.stop({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n      });\n    });\n\n    $.when(closeModalViewPromise).\n    done(function () {\n      self.addNewValuesToInput();\n      self.Class.temporalElements = {};\n    }).fail(function () {\n      self.Class.temporalElements = {};\n    });\n  },\n\n  /**\r\n      * Show finded results\r\n      * */\n  showResults: function showResults(value, inputContainer) {\n    var self = this;\n\n    return $.when(self.processRequest({ 'term': value })).done(function (suggestions) {\n      if (suggestions.length === 0) {\n        self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n      } else {\n        //Hide current results\n        $(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul li\", inputContainer).remove();\n\n        //Add new results to list\n        var newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"sugestions\", 'items': suggestions }))));\n        newElement.appendTo($(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul\", inputContainer));\n\n        //Get list of elements\n        self.modalViewList = $(\".ui-bizagi-render-list-elements\", inputContainer);\n\n        //Setting the initial selected display value\n        self.modalViewList.find(\"li\").unbind().bind(\"click\", function () {\n          //add new element to data control\n          self.appendFoundItem(this, $(\".filter-searchlist-modal-view-tags\", inputContainer));\n\n          if ($(this).siblings().length === 0) {\n            self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n          }\n\n          $(this).remove();\n        });\n      }\n    }).fail(function (response) {\n      self.showNoResultsMessage(response, inputContainer);\n    });\n  },\n\n  /**\r\n      * Adding new values to input\r\n      * */\n  addNewValuesToInput: function addNewValuesToInput() {\n    var self = this;\n\n    //Create a temporal array\n    var tempArray = [];\n\n    $.each(self.Class.temporalElements, function (i, ele) {\n      tempArray.push(ele.obj);\n    });\n\n    self.setValue(tempArray);\n\n    //Clear the input\n    $(\"ul li\", self.input).remove();\n\n    //Get the input content\n    var inputContainer = $(\"li\", $(bizagi.util.trim(self.inputTemplates({ 'template': \"inputContainer\", 'value': tempArray }))));\n\n    //Add the input container\n    inputContainer.appendTo($(\"ul\", self.input));\n\n    //unbind current events\n    $(\"ul\", self.input).unbind();\n    $(\".bz-rn-last-child\", self.input).unbind();\n\n    //Trigger click event\n    if (tempArray.length > 0) {\n      self.configureModalView(\".bz-rn-last-child\");\n    } else {\n      self.configureModalView(\"ul\");\n      self.configureModalView(\".bz-rn-last-child\");\n    }\n  },\n\n  /*\r\n      *   check if the control has value\r\n      */\n  hasValue: function hasValue() {\n    var self = this;\n    return JSON.parse(self.getValue()).value.length > 0;\n  },\n\n  /*\r\n      *   Sets the internal value\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    // Change internal value\n    self.value = JSON.encode({\n      \"value\": value });\n\n\n    self.changeRequiredLabel(!self.hasValue());\n\n    // Trigger events\n    if (triggerEvents && !self.internalSetInitialValueFlag) {\n      self.triggerRenderChange();\n    }\n  },\n\n  /**\r\n      * Show the correct message if there are elements to show\r\n      * */\n  showNoResultsMessage: function showNoResultsMessage(message, inputContainer) {\n    var self = this;\n    $(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul li\", inputContainer).remove();\n    var newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"modalViewDefaultMessage\", 'message': message }))));\n    newElement.appendTo($(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul\", inputContainer));\n  },\n\n  /**\r\n      * Append founded item\r\n      * */\n  appendFoundItem: function appendFoundItem(item, container) {\n    var self = this;\n\n    // Map the ids of the elements to an array\n    var uniqueIds = $.map($('li', container), function (val) {\n      return $(val).data('id');\n    });\n\n    // Avoid appending duplicated items\n    if (uniqueIds.indexOf($(item).data(\"id\")) == -1) {\n      var id = $(item).data(\"id\");\n      var value = $(\"label\", item).text();\n      var $newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"fullElement\", 'id': id, 'value': value }))));\n\n      // Get the latest item on list to append new li with match word\n      var lastElement = $('li:last', container);\n      if (lastElement.hasClass(\"bz-rn-any-element\")) {\n        lastElement.remove();\n        $('ul', container).prepend($newElement);\n      } else {\n        $('ul', container).prepend($newElement);\n      }\n\n      self.addTemporalElement($(item).data(\"id\"), $(\"label\", item).text(), false);\n    }\n  },\n\n  /**\r\n      * Removen a item from the list\r\n      * */\n  removeItem: function removeItem(element, isModalViewContainer) {\n    var self = this;\n    var li = element.parent();\n    var container = element.closest(\".bz-rn-container-searchlist\");\n\n    if (container.length === 0) {\n      container = element.closest(\".filter-searchlist-modal-view-tags\");\n    }\n\n    if (!isModalViewContainer) {\n      // Remove from main memory and set the new value\n      self.removeElement({ id: li.data('id') });\n    } else {\n      delete self.Class.temporalElements[li.data('id')];\n    }\n\n    // Remove list element\n    li.remove();\n\n    if (container.find(\"li\").length <= 1 && !isModalViewContainer) {\n      $('.bz-rn-click-to-add-span', container).removeClass(\"hidden\");\n      self.configureModalView(\"ul\");\n      self.configureModalView(\".bz-rn-last-child\");\n    } else if (container.find(\"li\").length === 0 && isModalViewContainer) {\n      var defaultElement = $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"modalViewDefaultValue\" })));\n      $(\"li\", defaultElement).appendTo($(\"ul\", container));\n    }\n  },\n\n  /**\r\n      *   Process the request data for the autocomplete control\r\n      */\n  processRequest: function processRequest(req) {\n    var self = this;\n    var properties = self.properties;\n\n    // Create array for response objects\n    var suggestions = [];\n    var defer = new $.Deferred();\n\n    if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\n\n      // Update term property to reflect the search\n      properties.term = req.term;\n      this.getData().\n      done(function (data) {\n\n        // Process response to highlight matches\n        $.each(data, function (i, val) {\n          var parseValue;\n          switch (_typeof(val.value)) {\n            case \"number\":\n              parseValue = val.value;\n              break;\n            case \"object\":\n              parseValue = val.value.toString();\n              break;\n            case \"string\":\n              parseValue = val.value.replace(new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + req.term + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\"), \"<strong>$1</strong>\");\n              break;\n            default:\n              parseValue = val.value;\n              break;}\n\n\n          if (typeof self.Class.temporalElements[val.id] === 'undefined') {\n            suggestions.push({\n              id: val.id,\n              label: parseValue,\n              value: val.value });\n\n          }\n        });\n\n        defer.resolve(suggestions);\n      });\n    } else {\n      defer.reject(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"));\n    }\n\n    return defer;\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    // Set internal value\n    self.setValue(finalValue);\n\n    if (value !== undefined) {\n      if (properties.editable) {\n        self.input.val(value.label);\n      }\n    }\n  },\n\n  /**\r\n      *   Returns the value to display, ex. non-editable renders\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    return this.selectedValue;\n  },\n\n  /**\r\n      * When the render isn't editable\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.kendoTmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      value: properties.value,\n      editable: false });\n\n  },\n\n  configureReadOnly: function configureReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    // Remove click event\n    $('.bz-rn-last-child', control).unbind(\"click\");\n    $('.bz-rn-searchlist-search-icon', control).unbind(\"click\");\n\n    //hide all elements\n    $('.bz-rn-click-to-add-span', control).remove();\n\n    // Remove \"x\" icon from each element on the list\n    $('.bz-rn-remove-tag-on-search-list', control).remove();\n\n    self.input.addClass(\"searchListNonEditable\");\n  },\n\n  /**\r\n      * Add new element to the temporal array\r\n      * */\n  addTemporalElement: function addTemporalElement(id, value, elementToRemove) {\n    var self = this;\n\n    if (self.Class.temporalElements[id]) {\n      delete self.Class.temporalElements[id];\n    }\n\n    self.Class.temporalElements[id] = { 'obj': { 'id': id, 'value': value }, 'remove': elementToRemove };\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Column Decorator Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will redefine the column decorator class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.combo\", {}, {\n  /*\r\n                                                                              *   Sets the internal value\r\n                                                                              */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    // Check is offline form\t    \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    if (isOfflineForm && (typeof value == \"number\" || typeof value == \"string\")) {\n      var newValue = _typeof(self.properties.data) == \"object\" ? self.properties.data.find(function (item) {return item.id == value;}) : value;\n\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = value;\n    } else if (value && value.length > 0) {\n\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {return i != 0;}) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (self.properties.type == \"columnRadio\") {\n      self._super(surrogateKey, null);\n      decorated.selectedValue = value;\n    } else if (value && typeof value == \"number\") {\n      self._super(surrogateKey, value);\n    } else if (isOfflineForm && value !== null && _typeof(value) === \"object\" && value.value) {\n      self._super(surrogateKey, value.value);\n      decorated.selectedValue = value.value;\n    } else {\n      // Set null values when the entry array is null\n      self._super(surrogateKey, null);\n      decorated.selectedValue = \"\";\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will process a rendering page by calling an ajax service to retrieve the model,\r\n                                                                                                                                                                                                                                                                                                                                                                                *       and then process it to create base layout, and then call the device render factory\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Define BizAgi Rendering namespace\nbizagi.rendering = bizagi.rendering || {};\n\n/*\r\n                                            *   This class will define a method to process the page\r\n                                            *   1. Fetch the data\r\n                                            *   2. Call the device factory to appropriately render the content\r\n                                            */\n$.Class.extend(\"bizagi.rendering.facade\", {\n  form: undefined,\n  executionDeferred: new $.Deferred() },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    params = params || {};\n\n    // Set observable element\n    this.observableElement = $({});\n\n    // Injection of Device, only for print version purpose\n    var device = params.device || \"\";\n\n    // Defines a device factory for all rendering\n    this.deviceFactory = new bizagi.rendering.device.factory();\n\n    // Creates a data service instance\n    this.dataService = new bizagi.render.services.service(params);\n\n    // Retrieves the render factory\n    this.renderFactory = this.deviceFactory.getRenderFactory(this.dataService, device);\n  },\n  getFactory: function getFactory() {\n    var self = this;\n    return {\n      deviceFactory: self.deviceFactory,\n      dataService: self.dataService,\n      renderFactory: self.renderFactory };\n\n  },\n  /*\r\n     *   Subscribe method\r\n     */\n  subscribe: function subscribe() {\n    this.observableElement.bind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Unsubscribe method\r\n     */\n  unsubscribe: function unsubscribe() {\n    this.observableElement.unbind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Publish method\r\n     */\n  publish: function publish() {\n    return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   This method will re-execute the process\r\n     */\n  update: function update(params) {\n    var self = this;\n\n    // Update rendering mode\n    if (params.mode)\n    self.mode = params.mode;\n\n    // Enable form buttons on desktop view\n    return self.execute($.extend({\n      canvas: self.canvas,\n      mode: self.mode },\n    params));\n  },\n  /*\r\n     *   Start point method to use in the main javascript pages\r\n     *   This method will process everything and attach the html directly to the dom\r\n     */\n  execute: function execute(params) {\n    var self = this;\n    var doc = this.ownerDocument;\n    var body = $(\"body\", doc);\n    params = params || {};\n\n    // Creates ready deferred\n    if (self.executionDeferred && self.executionDeferred.state) {\n      if (self.executionDeferred.state() == \"resolved\") {\n        self.executionDeferred = $.Deferred();\n      }\n    } else {\n      self.executionDeferred = $.Deferred();\n    }\n\n    // Performance measurement stuff\n    bizagi.chrono.initAndStart(\"rendering+data\", true);\n    bizagi.rendering.render.startOptimization();\n\n    // Override mode\n    if (typeof params.mode === \"undefined\") {\n      if (!bizagi.util.isEmpty(window.location.search)) {\n        var queryString = bizagi.util.getQueryString();\n        params.mode = queryString[\"mode\"];\n      }\n    }\n\n    // If the canvas is not given, we need to create one\n    var canvas = self.canvas = params.canvas = params.canvas || $(\"<div />\").appendTo(body);\n    self.mode = params.mode;\n\n    self.sendExecutingPostMessageWebparts();\n\n    self.process(params).done(function (form) {\n\n      // Clear canvas    \n      if (!params.refreshing) {\n        canvas.empty();\n      }\n\n      // Append content\n      canvas.append(form.container);\n\n      // Include process path\n      $(form.pathProcess).insertBefore(form.container);\n\n      // Keep reference in class\n      self.form = form;\n      self.form.setSize({ width: self.lastWidth, height: self.lastHeight });\n\n      // Save window size variables\n      var timeoutResize = setTimeout(function () {\n        self.lastWidth = $(window).width();\n        self.lastHeight = $(window).height();\n        if (window.self !== window.top)\n        self.resizeInPopUpHTML();\n        clearTimeout(timeoutResize);\n      }, 2000);\n\n      // Publish an event to check if the form has been set in the DOM\n      form.triggerHandler(\"ondomincluded\");\n\n      // Notify to module users that the form has been rendered\n      self.publish(\"rendering-formRendered\", { form: form });\n      //Configure triggers\n      self.configureOpenForm(form);\n\n      // Configure handlers\n      self.configureRefresh(form, canvas);\n      self.configureRouting(form, canvas);\n      self.configureRenderError(form, canvas);\n      self.configureResize(form);\n      self.configureGlobalHandlers(form);\n\n      // Check if it is a summary form\n      if (params.summaryForm) {\n        form.container.addClass(\"ui-bizagi-summary-form\");\n      }\n\n      // Ends main timer and log everything\n      bizagi.chrono.stopAndLog(\"rendering\");\n      bizagi.chrono.stopAndLog(\"rendering+data\");\n      bizagi.chrono.stopAndLog(\"submitForm\");\n      bizagi.chrono.stopAndLog(\"submitForm-ajax\");\n      bizagi.chrono.stopAndLog(\"waiting\");\n\n      // Resolves deferred\n      bizagi.rendering.render.stopOptimization();\n\n      // Expose public reference of form\n      if (bizagi.override.enableE2EInterface) {\n        self.Class.form = self.form;\n        self.Class.executionDeferred.resolve(self.form);\n      }\n\n      self.executionDeferred.resolve(self.form);\n\n    }).fail(function (message, errorType) {\n\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n\n        if (typeof message === \"undefined\" || message === \"\") {\n          message = bizagi.localization.getResource(\"render-error-unknown\");\n        }\n\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        self.publish(\"rendering-formRenderedError\", message);\n        self.canvas.triggerHandler(\"errorform\", message);\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering\");\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n\n        self.executionDeferred.reject();\n      });\n    });\n\n    return self.executionDeferred.promise();\n  },\n  /*\r\n     *   Returns the execution deferred to determine if the component is ready or not\r\n     */\n  ready: function ready() {\n    return this.executionDeferred.promise();\n  },\n  /*\r\n     *   Loads data and render factory in order to process the form\r\n     *   Returns a deferred to set callbacks when the process is done\r\n     */\n  process: function process(params) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Call get form data service\n    var dataPromise = self.dataService.getFormData(params);\n\n    var canvas = self.canvas || params.canvas;\n\n    bizagi.showErrorAlertDialog = false;\n    // Set callback when requests have been done\n    $.when(dataPromise, self.renderFactory).\n    done(function (data, renderFactory) {\n      bizagi.showErrorAlertDialog = true;\n\n      // When there is no data trigger an event\n      if (bizagi.util.isEmpty(data)) {\n        self.publish(\"no-data-found\");\n        defer.fail();\n        return;\n      }\n\n      if (data && data.type == \"reload\") {\n        var form = self.form;\n        if (form) {\n          form.endLoading();\n          form.dispose();\n        }\n        // Trigger handler on canvas\n        canvas.triggerHandler(\"routing\", data);\n\n      } else if (data && data.type == \"suspended\") {\n        var errorTemplate = renderFactory.getTemplate(\"info-message\");\n        var message = bizagi.localization.getResource(\"render-case-suspended\");\n        var errorHtml = $.tmpl(errorTemplate, {\n          message: message });\n\n        // Remove loading icon from summary container\n        errorHtml.appendTo(canvas);\n\n        defer.fail();\n\n      } else if (data && data.type != \"error\") {\n        if (params.hasOwnProperty('printversion')) {\n          data = self.transformGridControl(data);\n          data.form.properties.editable = \"False\";\n        }\n\n        bizagi.chrono.initAndStart(\"rendering\");\n        params.type = data.form && data.form.properties.type || params.type;\n        var form = self.processForm(data.form, renderFactory, params);\n\n        // Resolve deferred\n        defer.resolve(form);\n\n      } else {\n        self.getFailDeferred(data, defer);\n      }\n    }).fail(function (errorMessage) {\n      self.getFailDeferred(errorMessage, defer);\n    });\n\n    return defer.promise();\n  },\n  /**\r\n      * In the print version widget when grid control was rendered, the main render has broken\r\n      * Is necesary change id of grid control to fixed these  problems\r\n      */\n  transformGridControl: function transformGridControl(data) {\n    var self = this;\n    if (data == null) {\n      return data;\n    }\n\n    if (data.hasOwnProperty('type') && data.type == 'grid') {\n      data.id = data.id + \"-print\";\n      data.allowAdd = \"False\";\n      data.allowDelete = \"False\";\n      data.allowEdit = \"False\";\n      data.allowGrouping = \"False\";\n      data.allowMore = \"False\";\n      data.allowSearch = \"False\";\n    } else {\n      $.each(data, function (key, value) {\n        if (_typeof(value) == 'object') {\n          data[key] = self.transformGridControl(data[key]);\n        }\n      });\n    }\n    return data;\n  },\n  /**\r\n      * Resolve deferred\r\n      */\n  getFailDeferred: function getFailDeferred(errorMessage, defer) {\n    var self = this;\n    var message = \"\";\n    var jsonErrorMessage = {};\n    try {\n      jsonErrorMessage = JSON.parse(errorMessage.responseText);\n    } catch (e) {\n      jsonErrorMessage = { message: errorMessage.responseText, errorType: \"ERRORUNKNOWN\" };\n    }\n\n\n    if (jsonErrorMessage.message) {\n      message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n      message += \"<br>Error Message: \" + jsonErrorMessage.message;\n    } else {\n      if (jsonErrorMessage.errorType == \"JSharpNotSupportedException\") {\n        message += \"<br>Error Message: \" + bizagi.localization.getResource(\"jsharp-required\");\n      }\n    }\n\n    // Error in metadata InvalidFormMetadata\n    if (jsonErrorMessage.errorType == 'ERRORUNKNOWN') {\n      defer.reject(message, jsonErrorMessage.errorType);\n    } else {\n\n      defer.reject(message);\n    }\n  },\n  /*\r\n     *   Process the form\r\n     */\n  processForm: function processForm(data, renderFactory, params) {\n    var form = renderFactory.getContainer($.extend(params, {\n      type: params.type || \"form\",\n      data: data }));\n\n\n    // Render the full form\n    form.render();\n\n    return form;\n  },\n  /*\r\n     *   Performs a resize\r\n     */\n  resize: function resize(args) {\n    var self = this;\n    if (self.form) {\n      self.form.trigger(\"renderresize\", args);\n    }\n  },\n  /*\r\n     *   Binds a refresh handler to detect when the whole form needs to fetch all data from server\r\n     */\n  configureRefresh: function configureRefresh(form, canvas) {\n    var self = this;\n\n    // Attach a refresh handler to recreate all the form\n    form.bind(\"refresh\", function (_, refreshParams) {\n\n      // Find the scroll top\n      var parent = form.container.parent();\n      parent = bizagi.util.scrollTop(parent);\n      var scrollTop = parent.scrollTop();\n\n      $(self.form).trigger(\"onRefreshStarted\");\n\n      //Dispose current form\n      form.dispose(refreshParams);\n      canvas.fastEmpty();\n      var canvasParent = canvas.parent();\n      if (canvasParent.find(\".ui-bizagi-button-container\").length > 0) {\n        canvasParent.find(\".ui-bizagi-button-container\").remove();\n      }\n\n      if (self.executionDeferred && self.executionDeferred.state) {\n        if (self.executionDeferred.state() == \"resolved\") {\n          self.executionDeferred = $.Deferred();\n        }\n      }\n\n      var formParams = self.form.getParams();\n      if (bizagi.util.isMobileDevice() && formParams.isOfflineForm === true) {\n        $.extend(refreshParams, {\n          isOfflineForm: true,\n          offlineType: formParams.offlineType,\n          isOpen: formParams.isOpen });\n\n        refreshParams.online = (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\" ?\n        form.online : bizagi.util.isConnected();\n      }\n\n      // Re-execute process\n      $.when(self.execute($.extend(refreshParams, {\n        canvas: canvas,\n        refreshing: true,\n        idCase: formParams.idCase,\n        displayName: formParams.displayName }))).\n      done(function () {\n\n        // Restore scroll at same position\n        var timeoutTrigger = setTimeout(function () {\n          parent.scrollTop(scrollTop);\n          $(self.form).trigger(\"onRefreshFinished\");\n          clearTimeout(timeoutTrigger);\n        }, 100);\n      });\n\n      return self.executionDeferred.promise();\n    });\n  },\n  /*\r\n     *   Binds a resize hanlder to configure the resize behaviour\r\n     */\n  configureResize: function configureResize(form) {\n    var self = this;\n\n    // Attach resize handler\n    form.bind(\"renderresize\", function (_, args) {\n      args = args || {};\n      // Just allow one resize at a time\n      if (self.resizeTimeout)\n      return;\n      var resizeFn = function resizeFn() {\n        // Call resize event in form\n        var width = $(window).width();\n        var height = $(window).height();\n        if (args.forceResize || width != self.lastWidth) {\n\n          // Logging stuff\n          bizagi.chrono.initAndStart(\"resize\");\n\n          // Perform resize\n          form.resize({\n            width: width,\n            height: height });\n\n          self.lastWidth = width;\n          self.lastHeight = height;\n\n          // Logging stuff\n          bizagi.chrono.stopAndLog(\"resize\");\n          bizagi.chrono.log(\"resize\");\n        }\n\n        self.resizeTimeout = null;\n        clearTimeout(self.resizeTimeout);\n      };\n      self.resizeTimeout = setTimeout(resizeFn, 0);\n\n    });\n    self.resize();\n  },\n  /*\r\n     *   Binds a routing handler to detect when the workportal need to enroute the case\r\n     */\n  configureRouting: function configureRouting(form, canvas) {\n    // Attach a routing handler to notify to the caller\n    form.bind(\"routing\", function (context, triggerParams) {\n      //Dispose current form\n      form.dispose();\n\n      // Trigger handler on canvas\n      canvas.triggerHandler(\"routing\", triggerParams);\n    });\n  },\n  /*\r\n     *   Binds a generic handler that will be replicated to facade instantiators\r\n     */\n  configureGlobalHandlers: function configureGlobalHandlers(form) {\n    var self = this;\n\n    // Attach a routing handler to notify to the caller\n    form.bind(\"globalHandler\", function (_, args) {\n      // Trigger handler on canvas\n      return self.publish(args.eventType, args.data);\n    });\n  },\n  /*\r\n     *   Bind trigger for form opening\r\n     */\n  configureOpenForm: function configureOpenForm(form) {\n    $(document).trigger(\"openForm\", { form: form });\n  },\n\n  /*\r\n     * Binds error form handler to detect when the render element nop posible get information or error in server\r\n     */\n  configureRenderError: function configureRenderError(form, canvas) {\n    var self = this;\n\n    form.bind(\"formRenderingError\", function (event, errorMessage) {\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n        var message = \"<br>Error: \";\n\n        errorMessage = errorMessage.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n\n        var jsonErrorMessage = JSON.parse(errorMessage);\n        if (jsonErrorMessage.message) {\n          message += jsonErrorMessage.message;\n          message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n        }\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        //send the type error to differentiate between a form and an item for render\n        self.canvas.triggerHandler(\"errorform\", \"renderItemError\");\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n        bizagi.chrono.stopAndLog(\"rendering\");\n      });\n    });\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    if (self.form) {\n      self.form.dispose();\n    }\n    bizagi.util.dispose(self);\n  },\n\n  resizeInPopUpHTML: function resizeInPopUpHTML() {\n    if ($(\".activitiFormContainer\").length > 0 && bizagi.util.getQueryString().type != \"cases\") {\n      var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\n      var renderForm = $(\".activitiFormContainer #ui-bizagi-webpart-render-container\");\n      var buttonContainer = $(\".ui-bizagi-button-container\", \".activitiFormContainer\");\n      var heightButtonContainer = buttonContainer.outerHeight() || 0;\n      var renderBehavior = bizagi.util.getQueryString().renderBehavior || \"\";\n      renderBehavior = renderBehavior.replace(\"#\", \"\");\n\n      if (renderBehavior == \"PopUp\") {\n        if (typeof self.postMessageSocket == \"undefined\") {\n          var heightCanvas = $(\".activitiFormContainer\").height() - 50 || 396;\n          $(\"#render-canvas\").height(heightCanvas);\n          $(\"#render-canvas\").css(\"overflowY\", \"scroll\");\n        } else $(\".activitiFormContainer\").height($(\".activitiFormContainer\").height() + $(\".ui-bizagi-button-container\").height() + 30);\n        $(\".ui-bizagi-button-container\").css(\"position\", \"absolute\");\n        $(\".ui-bizagi-button-container\").appendTo(\".activitiFormContainer\");\n        if ($(\".ui-bizagi-button-container\").length > 1) {\n          $(\".ui-bizagi-button-container:first\").hide();\n          renderForm.css(\"marginTop\", \"-17px\");\n        }\n      }\n      if (buttonContainer.length > 0) {\n        //display buttons\n        renderForm.height(heightActivitiFormContainer - 97 - heightButtonContainer);\n      }\n      if ($(\".ui-bizagi-button-container\").children().length == 0)\n      $(\"#render-canvas\").height($(\"#render-canvas\").height() + heightButtonContainer);else\n      {\n        buttonContainer.width(\"100%\");\n        buttonContainer.css(\"marginLeft\", 0);\n        buttonContainer.css(\"bottom\", 0);\n      }\n    } else if (bizagi.util.getQueryString().type == \"render\") {\n      $(\"html\").css(\"overflowX\", \"hidden\");\n      $(\"#render\").height() <= window.innerHeight + 5 ? $(\"html\").css(\"overflowY\", \"hidden\") :\n      $(\"html\").css(\"overflowY\", \"scroll\");\n      $(\".ui-widget-overlay\").height(650);\n    }\n  },\n\n  sendExecutingPostMessageWebparts: function sendExecutingPostMessageWebparts() {\n    if (bizagi && bizagi.iframeCommunicator) {\n      bizagi.iframeCommunicator.trigger(\"executing-rendering\", {});\n    }\n  } });","/*\r\n* jQuery UI Mask @VERSION\r\n*\r\n* Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)\r\n* Dual licensed under the MIT (MIT-LICENSE.txt)\r\n* and GPL (GPL-LICENSE.txt) licenses.\r\n*\r\n* Based on the jquery.maskedinput.js plugin by Josh Bush (digitalbush.com)\r\n*\r\n* http://docs.jquery.com/UI/Mask\r\n*\r\n* Depends:\r\n*   ui.core.js\r\n*/\n(function ($) {\n\n  var pasteEventName = (bizagi.util.isEventSupported('paste') ? 'paste' : 'input') + \".mask\";\n\n  $.widget(\"ui.mask\", {\n\n    _init: function _init() {\n\n      var options = this.options,self = this;\n\n      $.extend(this, { caret: function caret(begin, end) {return $.ui.mask.caret(self.element, begin, end);} });\n\n      if (!options.mask || !options.mask.length) {return;} //no mask pattern defined. no point in continuing.\n      if (!options.placeholder || !options.placeholder.length) {\n        options.placeholder = '_'; //in case the user decided to nix a placeholder. \n      }\n\n      this._prepareBuffer();\n      this._bindEvents();\n      this._checkVal(this.element.val().length && options.allowPartials); //Perform initial check for existing values\n    },\n\n    destroy: function destroy() {\n      this.element.\n      unbind('.mask').\n      removeData('mask');\n    },\n\n    value: function value() {\n      var input = this.element,\n      self = this,\n      res = $.map(self.buffer, function (c, i) {return self.tests[i] ? c : null;}).join(''),\n      r = new RegExp('\\\\' + this.options.placeholder, 'gi');\n      return res.replace(r, '');\n    },\n\n    formatted: function formatted() {\n      var r = new RegExp('\\\\' + this.options.placeholder, 'gi'),\n      res = this.element.val();\n      return res.replace(r, '');\n    },\n\n    apply: function apply() {\n      this.element.trigger('apply.mask');\n    },\n\n    _setData: function _setData(key, value) {\n\n      $.widget.prototype._setData.apply(this, arguments);\n      var options = this.options;\n\n      switch (key) {\n        case 'mask':\n          //no mask pattern defined. no point in continuing.\n          if (!options.mask || !options.mask.length) {\n            this.element.unbind('.mask');\n            break;\n          }\n        case 'placeholder':\n          if (!options.placeholder || !options.placeholder.length) {\n            options.placeholder = '_'; //in case the user decided to nix a placeholder.\n          }\n          this.element.val('');\n          this._prepareBuffer();\n          !this.eventsBound && this._bindEvents();\n          break;}\n\n\n    },\n\n    _prepareBuffer: function _prepareBuffer() {\n\n      this._escapeMask();\n\n      var self = this,\n      input = this.element,\n      options = this.options,\n      mask = options.mask,\n      defs = $.ui.mask.definitions,\n      tests = [],\n      partialPosition = mask.length,\n      firstNonMaskPos = null,\n      len = mask.length;\n\n      //if we're applying the mask to an element which is not an input, it won't have a val() method. fake one for our purposes.\n      if (!input.is(':input')) input.val = input.html;\n\n      $.each(mask.split(\"\"), function (i, c) {\n        if (c == '?') {\n          len--;\n          partialPosition = i;\n        } else\n        if (defs[c]) {\n          tests.push(new RegExp(defs[c]));\n          if (firstNonMaskPos == null)\n          firstNonMaskPos = tests.length - 1;\n        } else\n        {\n          tests.push(null);\n        }\n      });\n\n      $.extend(this, {\n        buffer: $.map(mask.split(\"\"), function (c, i) {\n          if (c != '?') {\n            return defs[c] ? options.placeholder : c;\n          }\n        }),\n        tests: tests,\n        firstNonMaskPos: firstNonMaskPos,\n        partialPosition: partialPosition });\n\n\n      this.buffer = $.map(this.buffer, function (c, i) {\n        if (c == \"\\t\") {\n          return self.maskEscaped[i];\n        }\n        return c;\n      });\n\n      this.options.mask = mask = this.maskEscaped;\n    },\n\n    _bindEvents: function _bindEvents() {\n\n      var self = this,\n      input = this.element,\n      ignore = false, //Variable for ignoring control keys\n      focusText = input.val();\n\n      function keydownEvent(e) {\n        e = e || window.event;\n        var pos = self.caret(),\n        k = e.keyCode,\n        keyCode = $.ui.keyCode;\n\n        ignore = k < keyCode.SHIFT || k > keyCode.SHIFT && k < keyCode.SPACE || k > keyCode.SPACE && k < 41;\n\n        //delete selection before proceeding\n        if (pos.begin - pos.end != 0 && (!ignore || k == keyCode.BACKSPACE || k == keyCode.DELETE))\n        self._clearBuffer(pos.begin, pos.end);\n\n        //backspace, delete, and escape get special treatment\n        if (k == keyCode.BACKSPACE || k == keyCode.DELETE) {//backspace/delete\n          self._shiftL(pos.begin + (k == keyCode.DELETE || k == keyCode.BACKSPACE && pos.begin != pos.end ? 0 : -1), Math.abs(pos.begin - pos.end));\n          return false;\n        } else\n        if (k == keyCode.ESCAPE) {//escape\n          input.val(focusText);\n          self.caret(0, self._checkVal());\n          return false;\n        }\n      };\n\n      function keypressEvent(e) {\n\n        e = e || window.event;\n\n        var k = e.charCode || e.keyCode || e.which,\n        keyCode = $.ui.keyCode,\n        len = self.options.mask.length;\n\n        if (ignore) {\n          ignore = false;\n          //Fixes Mac FF bug on backspace\n          return e.keyCode == keyCode.BACKSPACE ? false : null;\n        }\n\n        var pos = self.caret();\n\n        if (e.ctrlKey || e.altKey || e.metaKey) {//Ignore\n          return true;\n        } else\n        if (k >= keyCode.SPACE && k <= 125 || k > 186) {//typeable characters\n          var p = self._seekNext(pos.begin - 1);\n          if (p < len) {\n            var c = String.fromCharCode(k);\n            if (self.tests[p] && self.tests[p].test(c)) {\n              self._shiftR(p);\n              self.buffer[p] = c;\n              self._writeBuffer();\n              var next = self._seekNext(p);\n              self.caret(next);\n              self.options.completed && next == len && self.options.completed.call(input);\n            }\n          }\n        }\n        return false;\n      };\n\n      if (!input.attr(\"readonly\")) {\n        input.\n        bind(\"focus.mask\", function () {\n          focusText = input.val();\n          var pos = self._checkVal();\n          self._writeBuffer();\n          setTimeout(function () {\n            if (pos == self.options.mask.length)\n            self.caret(0, pos);else\n\n            self.caret(pos);\n          }, 0);\n        }).\n        bind(\"blur.mask\", function () {\n          self._checkVal();\n          if (input.val() != focusText)\n          input.change();\n        }).\n        bind(\"apply.mask\", function () {//changing the value of an input without keyboard input requires re-applying the mask.\n          focusText = input.val();\n          var pos = self._checkVal();\n          self._writeBuffer();\n        }).\n        bind(\"keydown.mask\", keydownEvent).\n        bind(\"keypress.mask\", keypressEvent).\n        bind(pasteEventName, function () {\n          setTimeout(function () {self.caret(self._checkVal(true));}, 0);\n        });\n        this.eventsBound = true;\n      }\n    },\n\n    _writeBuffer: function _writeBuffer() {\n      return this.element.val(this.buffer.join('')).val();\n    },\n\n    _clearBuffer: function _clearBuffer(start, end) {\n      var len = this.options.mask.length;\n      for (var i = start; i < end && i < len; i++) {\n        if (this.tests[i])\n        this.buffer[i] = this.options.placeholder;\n      }\n    },\n\n    _seekNext: function _seekNext(pos) {\n      var len = this.options.mask.length;\n      while (++pos <= len && !this.tests[pos]) {;}\n      return pos;\n    },\n\n    _shiftR: function _shiftR(pos) {\n      var len = this.options.mask.length;\n      for (var i = pos, c = this.options.placeholder; i < len; i++) {\n        if (this.tests[i]) {\n          var j = this._seekNext(i);\n          var t = this.buffer[i];\n          this.buffer[i] = c;\n          if (j < len && this.tests[j].test(t)) {\n            c = t;\n          } else\n          {\n            break;\n          }\n        }\n      }\n    },\n\n    _shiftL: function _shiftL(pos, length) {\n\n      while (!this.tests[pos] && --pos >= 0) {;}\n\n      var originalPos = pos,\n      len = this.options.mask.length,\n      placeholder = this.options.placeholder;\n\n      for (var i = pos; i < len && (i >= 0 || length > 1); i++) {\n        if (this.tests[i]) {\n          this.buffer[i] = placeholder;\n          var j = this._seekNext(i);\n          if (j < len && this.tests[i].test(this.buffer[j])) {\n            this.buffer[pos] = this.buffer[j];\n            this.buffer[j] = placeholder;\n            pos++;\n            while (!this.tests[pos]) {pos++;}\n          }\n        }\n      }\n      this._writeBuffer();\n      this.caret(Math.max(this.firstNonMaskPos, originalPos));\n    },\n\n    _checkVal: function _checkVal(allow) {\n      //try to place characters where they belong\n      var input = this.element,\n      test = input.val(),\n      len = this.options.mask.length,\n      lastMatch = -1;\n\n      for (var i = 0, pos = 0; i < len; i++) {\n        if (this.tests[i]) {\n          this.buffer[i] = this.options.placeholder;\n          while (pos++ < test.length) {\n            var c = test.charAt(pos - 1);\n            if (this.tests[i].test(c)) {\n              this.buffer[i] = c;\n              lastMatch = i;\n              break;\n            }\n          }\n          if (pos > test.length)\n          break;\n        } else\n        if (this.buffer[i] == test[pos] && i != this.partialPosition) {\n          pos++;\n          lastMatch = i;\n        }\n      }\n      if (!allow && lastMatch + 1 < this.partialPosition) {\n        if (!this.options.allowPartials || !this.value().length) {\n          input.val(\"\");\n          this._clearBuffer(0, len);\n        } else\n          //if we're allowing partial input/inital values, and the element we're masking isnt an input, then we need to allow the mask to apply.\n          if (!input.is(':input')) this._writeBuffer();\n\n      } else\n      if (allow || lastMatch + 1 >= this.partialPosition) {\n        this._writeBuffer();\n        if (!allow) input.val(input.val().substring(0, lastMatch + 1));\n      }\n      return this.partialPosition ? i : this.firstNonMaskPos;\n    },\n\n    _escapeMask: function _escapeMask() {\n      var mask = this.options.mask,\n      literals = [],\n      replacements = [];\n\n      for (var i = 0; i < mask.length; i++) {\n        var c,temp = mask[i] || mask.charAt(i);\n        if (temp != \"\\\\\" || mask[i - 1] == \"\\\\\") {\n          if (mask[i - 1] == \"\\\\\") {\n            c = \"\\t\";\n            replacements[literals.length] = temp;\n          } else\n          {\n            c = temp;\n          }\n          literals[literals.length] = c;\n        }\n      }\n\n      this.options.mask = literals.join('');\n\n      for (var i = 0; i < literals.length; i++) {\n        if (replacements[i] !== undefined) {\n          literals[i] = replacements[i];\n        }\n      }\n\n      this.maskEscaped = literals.join('');\n    } });\n\n\n\n  $.extend($.ui.mask, {\n    version: \"@VERSION\",\n    getter: \"value formatted\",\n    defaults: {\n      mask: '',\n      placeholder: '_',\n      completed: null,\n      allowPartials: false },\n\n    definitions: { //Predefined character definitions\n      '#': \"[\\\\d]\",\n      'a': \"[A-Za-z]\",\n      '*': \"[A-Za-z0-9]\" },\n\n    caret: function caret(element, begin, end) {//Helper Function for Caret positioning\n      var input = element[0];\n      if (typeof begin == 'number') {\n        end = typeof end == 'number' ? end : begin;\n        if (input.setSelectionRange) {\n          input.focus();\n          input.setSelectionRange(begin, end);\n        } else if (input.createTextRange) {\n          var range = input.createTextRange();\n          range.collapse(true);\n          range.moveEnd('character', end);\n          range.moveStart('character', begin);\n          range.select();\n        }\n        return element;\n      } else {\n        if (input.setSelectionRange) {\n          begin = input.selectionStart;\n          end = input.selectionEnd;\n        } else\n        if (document.selection && document.selection.createRange) {\n          var range = document.selection.createRange();\n          begin = 0 - range.duplicate().moveStart('character', -100000);\n          end = begin + range.text.length;\n        }\n        return { begin: begin, end: end };\n      }\n    } });\n\n\n})(jQuery);","/*\r\n*\r\n* Copyright (c) 2006/2007 Sam Collett (http://www.texotela.co.uk)\r\n* Licensed under the MIT License:\r\n* http://www.opensource.org/licenses/mit-license.php\r\n* \r\n* Version 1.0\r\n* Demo: http://www.texotela.co.uk/code/jquery/numeric/\r\n*\r\n* $LastChangedDate: 2007-05-29 11:31:36 +0100 (Tue, 29 May 2007) $\r\n* $Rev: 2005 $\r\n*/\n\n/*\r\n   * Allows only valid characters to be entered into input boxes.\r\n   * Note: does not validate that the final text is a valid number\r\n   * (that could be done by another script, or server-side)\r\n   *\r\n   * @name     numeric\r\n   * @param    decimal      Decimal separator (e.g. '.' or ',' - default is '.')\r\n   * @param    callback     A function that runs if the number is not valid (fires onblur)\r\n   * @author   Sam Collett (http://www.texotela.co.uk)\r\n   * @example  $(\".numeric\").numeric();\r\n   * @example  $(\".numeric\").numeric(\",\");\r\n   * @example  $(\".numeric\").numeric(null, callback);\r\n   *\r\n   */\njQuery.fn.numeric = function (decimal, callback) {\n  decimal = decimal || \".\";\n  callback = typeof callback == \"function\" ? callback : function () {};\n  this.keypress(\n  function (e) {\n    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\n    // allow enter/return key (only when in an input box)\n    if (key == 13 && this.nodeName.toLowerCase() == \"input\") {\n      return true;\n    } else\n    if (key == 13) {\n      return false;\n    }\n    var allow = false;\n    // allow Ctrl+A\n    if (e.ctrlKey && key == 97 /* firefox */ || e.ctrlKey && key == 65 /* opera */) return true;\n    // allow Ctrl+X (cut)\n    if (e.ctrlKey && key == 120 /* firefox */ || e.ctrlKey && key == 88 /* opera */) return true;\n    // allow Ctrl+C (copy)\n    if (e.ctrlKey && key == 99 /* firefox */ || e.ctrlKey && key == 67 /* opera */) return true;\n    // allow Ctrl+Z (undo)\n    if (e.ctrlKey && key == 122 /* firefox */ || e.ctrlKey && key == 90 /* opera */) return true;\n    // allow or deny Ctrl+V (paste), Shift+Ins\n    if (e.ctrlKey && key == 118 /* firefox */ || e.ctrlKey && key == 86 /* opera */ ||\n    e.shiftKey && key == 45) return true;\n    // if a number was not pressed\n    if (key < 48 || key > 57) {\n      /* '-' only allowed at start */\n      if (key == 45 && this.value.length == 0) return true;\n      /* only one decimal separator allowed */\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1) {\n        allow = false;\n      }\n      // check for other keys that have special purposes\n      if (\n      key != 8 /* backspace */ &&\n      key != 9 /* tab */ &&\n      key != 13 /* enter */ &&\n      key != 35 /* end */ &&\n      key != 36 /* home */ &&\n      key != 37 /* left */ &&\n      key != 39 /* right */ &&\n      key != 46 /* del */)\n        {\n          allow = false;\n        } else\n      {\n        // for detecting special keys (listed above)\n        // IE does not support 'charCode' and ignores them in keypress anyway\n        if (typeof e.charCode != \"undefined\") {\n          // special keys have 'keyCode' and 'which' the same (e.g. backspace)\n          if (e.keyCode == e.which && e.which != 0) {\n            allow = true;\n          }\n          // or keyCode != 0 and 'charCode'/'which' = 0\n          else if (e.keyCode != 0 && e.charCode == 0 && e.which == 0) {\n              allow = true;\n            }\n        }\n      }\n      // if key pressed is the decimal and it is not already in the field\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) == -1) {\n        allow = true;\n      }\n    } else\n    {\n      allow = true;\n    }\n    return allow;\n  }).\n\n  blur(\n  function () {\n    var val = jQuery(this).val();\n    if (val != \"\") {\n      var re = new RegExp(\"^\\\\d+$|\\\\d*\" + decimal + \"\\\\d+\");\n      if (!re.exec(val)) {\n        callback.apply(this);\n      }\n    }\n  });\n\n  return this;\n};\n\njQuery.fn.numericSN = function (decimal, exp) {\n  decimal = decimal || \".\";\n  exp = exp || \"e\";\n  var plus = '+';\n  var minus = '-';\n  callback = typeof callback == \"function\" ? callback : function () {};\n  this.keypress(\n  function (e) {\n    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\n    // allow enter/return key (only when in an input box)\n    if (key == 13 && this.nodeName.toLowerCase() == \"input\") {\n      return true;\n    } else\n    if (key == 13) {\n      return false;\n    }\n    var allow = false;\n    // allow Ctrl+A\n    if (e.ctrlKey && key == 97 /* firefox */ || e.ctrlKey && key == 65 /* opera */) return true;\n    // allow Ctrl+X (cut)\n    if (e.ctrlKey && key == 120 /* firefox */ || e.ctrlKey && key == 88 /* opera */) return true;\n    // allow Ctrl+C (copy)\n    if (e.ctrlKey && key == 99 /* firefox */ || e.ctrlKey && key == 67 /* opera */) return true;\n    // allow Ctrl+Z (undo)\n    if (e.ctrlKey && key == 122 /* firefox */ || e.ctrlKey && key == 90 /* opera */) return true;\n    // allow or deny Ctrl+V (paste), Shift+Ins\n    if (e.ctrlKey && key == 118 /* firefox */ || e.ctrlKey && key == 86 /* opera */ ||\n    e.shiftKey && key == 45) return true;\n    // if a number was not pressed\n    if (key < 48 || key > 57) {\n\n      /* only one decimal separator allowed */\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1) {\n        allow = false;\n      }\n      /* only one e character allowed */\n      if (key == exp.charCodeAt(0) && this.value.indexOf(exp) != -1) {\n        allow = false;\n      }\n\n\n      // check for other keys that have special purposes\n      if (\n      key != 8 /* backspace */ &&\n      key != 9 /* tab */ &&\n      key != 13 /* enter */ &&\n      key != 35 /* end */ &&\n      key != 36 /* home */ &&\n      key != 37 /* left */ &&\n      key != 39 /* right */)\n        {\n          allow = false;\n        } else\n      {\n        // for detecting special keys (listed above)\n        // IE does not support 'charCode' and ignores them in keypress anyway\n        if (typeof e.charCode != \"undefined\") {\n          // special keys have 'keyCode' and 'which' the same (e.g. backspace)\n          if (e.keyCode == e.which && e.which != 0) {\n            allow = true;\n          }\n          // or keyCode != 0 and 'charCode'/'which' = 0\n          else if (e.keyCode != 0 && e.charCode == 0 && e.which == 0) {\n              allow = true;\n            }\n        }\n      }\n      // if key pressed is the exp and it is not already in the field\n      if (key == exp.charCodeAt(0) && this.value.indexOf(exp) == -1) {\n        allow = true;\n      }\n      // if key pressed is the decimal and it is not already in the field\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) == -1) {\n        allow = true;\n      }\n\n      /* allow plus and minus keys*/\n      if (key == minus.charCodeAt(0) || key == plus.charCodeAt(0)) {\n        allow = true;\n      }\n    } else\n    {\n      allow = true;\n    }\n    return allow;\n  }).\n\n  blur(\n  function () {\n    var val = jQuery(this).val();\n    if (val != \"\") {\n      var re = new RegExp(\"^\\\\d+$|\\\\d*\" + decimal + \"\\\\d+\");\n      if (!re.exec(val)) {\n        callback.apply(this);\n      }\n    }\n  });\n\n  return this;\n};","/**\r\n* Timeago is a jQuery plugin that makes it easy to support automatically\r\n* updating fuzzy timestamps (e.g. \"4 minutes ago\" or \"about 1 day ago\").\r\n*\r\n* @name timeago\r\n* @version 1.3.1\r\n* @requires jQuery v1.2.3+\r\n* @author Ryan McGeary\r\n* @license MIT License - http://www.opensource.org/licenses/mit-license.php\r\n*\r\n* For usage and examples, visit:\r\n* http://timeago.yarp.com/\r\n*\r\n* Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)\r\n*/\n\n(function ($) {\n  $.timeago = function (timestamp) {\n    $t.settings = {\n      refreshMillis: 60000,\n      allowFuture: false,\n      localeTitle: false,\n      cutoff: 0,\n      strings: {\n        prefixAgo: null,\n        prefixFromNow: null,\n        suffixAgo: bizagi.localization.getResource(\"bizagi-editor-form-timeago-ago\"),\n        suffixFromNow: bizagi.localization.getResource(\"bizagi-editor-form-timeago-from-now\"),\n        seconds: bizagi.localization.getResource(\"bizagi-editor-form-timeago-seconds\"),\n        minute: bizagi.localization.getResource(\"bizagi-editor-form-timeago-minute\"),\n        minutes: bizagi.localization.getResource(\"bizagi-editor-form-timeago-minutes\"),\n        hour: bizagi.localization.getResource(\"bizagi-editor-form-timeago-hour\"),\n        hours: bizagi.localization.getResource(\"bizagi-editor-form-timeago-hours\"),\n        day: bizagi.localization.getResource(\"bizagi-editor-form-timeago-day\"),\n        days: bizagi.localization.getResource(\"bizagi-editor-form-timeago-days\"),\n        month: bizagi.localization.getResource(\"bizagi-editor-form-timeago-month\"),\n        months: bizagi.localization.getResource(\"bizagi-editor-form-timeago-months\"),\n        year: bizagi.localization.getResource(\"bizagi-editor-form-timeago-year\"),\n        years: bizagi.localization.getResource(\"bizagi-editor-form-timeago-years\"),\n        wordSeparator: \" \",\n        numbers: [] } };\n\n\n\n    if (timestamp instanceof Date) {\n      return inWords(timestamp);\n    } else if (typeof timestamp === \"string\") {\n      timestamp = timestamp.replace(\".\", \"-\");\n      return inWords($.timeago.parse(timestamp));\n    } else if (typeof timestamp === \"number\") {\n      return inWords(new Date(timestamp));\n    } else {\n      return inWords($.timeago.datetime(timestamp));\n    }\n  };\n  var $t = $.timeago;\n\n  $.extend($.timeago, {\n\n    /*\r\n                        *\r\n                        */\n    inWords: function inWords(distanceMillis) {\n      var $l = this.settings.strings;\n      var prefix = $l.prefixAgo;\n      var suffix = $l.suffixAgo;\n      if (this.settings.allowFuture) {\n        if (distanceMillis < 0) {\n          prefix = $l.prefixFromNow;\n          suffix = $l.suffixFromNow;\n        }\n      }\n\n      var seconds = Math.abs(distanceMillis) / 1000;\n      var minutes = seconds / 60;\n      var hours = minutes / 60;\n      var days = hours / 24;\n      var years = days / 365;\n\n      function substitute(stringOrFunction, number) {\n        var string = $.isFunction(stringOrFunction) ? stringOrFunction(number, distanceMillis) : stringOrFunction;\n        var value = $l.numbers && $l.numbers[number] || number;\n        return string.replace(/%d/i, value);\n      }\n\n      var words = seconds < 45 && substitute($l.seconds, Math.round(seconds)) ||\n      seconds < 90 && substitute($l.minute, 1) ||\n      minutes < 45 && substitute($l.minutes, Math.round(minutes)) ||\n      minutes < 90 && substitute($l.hour, 1) ||\n      hours < 24 && substitute($l.hours, Math.round(hours)) ||\n      hours < 42 && substitute($l.day, 1) ||\n      days < 30 && substitute($l.days, Math.round(days)) ||\n      days < 45 && substitute($l.month, 1) ||\n      days < 365 && substitute($l.months, Math.round(days / 30)) ||\n      years < 1.5 && substitute($l.year, 1) ||\n      substitute($l.years, Math.round(years));\n\n      var separator = $l.wordSeparator || \"\";\n      if ($l.wordSeparator === undefined) {separator = \" \";}\n      return $.trim([prefix, words, suffix].join(separator));\n    },\n    /*\r\n       *\r\n       */\n    parse: function parse(iso8601) {\n      var s = $.trim(iso8601);\n      s = s.replace(/\\.\\d+/, \"\"); // remove milliseconds\n      s = s.replace(/-/, \"/\").replace(/-/, \"/\");\n      s = s.replace(/T/, \" \").replace(/Z/, \" UTC\");\n      s = s.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\n      s = s.replace(/([\\+\\-]\\d\\d)$/, \" $100\"); // +09 -> +0900\n      return new Date(s);\n    },\n    /*\r\n       *\r\n       */\n    datetime: function datetime(elem) {\n      var iso8601 = $t.isTime(elem) ? $(elem).attr(\"datetime\") : $(elem).attr(\"title\");\n      return $t.parse(iso8601);\n    },\n    /*\r\n       *\r\n       */\n    isTime: function isTime(elem) {\n      // jQuery's `is()` doesn't play well with HTML5 in IE\n      return $(elem).get(0).tagName.toLowerCase() === \"time\"; // $(elem).is(\"time\");\n    } });\n\n\n  function inWords(date) {\n    return $t.inWords(distance(date));\n  }\n\n  function distance(date) {\n    return new Date().getTime() - date.getTime();\n  }\n\n})(jQuery);","/**\r\n * Name:\r\n *   Author: Bizagi Mobile team\r\n *   Comments:\r\n * Structure to applicate plugin\r\n *  <div class=\"bz-bizagi-container-tap-popup\"> //container\r\n    <div class=\"cell bz-container-items-tabs\"> // represent item of tab\r\n    <span >${displayName}</span>// the first span always is the title                                    \r\n    <span> ........</span> // after the span can place the items you want\r\n    <div> .........</div> // etc\r\n    </div> <!-- end cell-->\r\n    </div><!-- end bz-bizagi-container-tap-popup-->\r\n**/\n(function ($) {\n  $.fn.bztabs = function (params) {\n\n    var self = $(this);\n\n    params = params || {};\n    params.activeTab = params.activeTab || 0;\n    params.tabNumber = params.tabNumber || 1;\n\n\n    var activate = params.activate && typeof params.activate === \"function\" ? params.activate : function () {};\n    var beforeActivate = params.beforeActivate && typeof params.beforeActivate === \"function\" ? params.beforeActivate : function () {};\n\n    // PopUp control\n    var popUp = self.find(\">div.bz-bizagi-container-tap-popup\").hide();\n    // Depending on tabNumber a percentage will be in the width of each tab\n    var tabCountPopup = popUp.children().length;\n    // Base to build the header of tabs\n    var tabHeader = $(\"<div class='bz-header_select'></div>\");\n\n    var tabCountReal = params.tabNumber > tabCountPopup ? tabCountPopup : params.tabNumber;\n\n    // round down\n    var widthRow = Math.floor(100 / Number(tabCountReal));\n\n    // Duplicate the tabs to create the header\n    popUp.children().each(function (i, item) {\n      tabHeader.append(\n      \"<div class='bz-wp-tabs-ui bz-wp-tabs-item' data-index='\" + i + \"' data-reference-tab='\" +\n      item.getAttribute(\"data-reference-tab\") + \"'><span>\" +\n      item.textContent + \"</span></div>\");\n    });\n\n    tabHeader.find(\"> .bz-wp-tabs-ui\").css(\"width\", widthRow + \"%\");\n    tabHeader.append(\"<div class='bz-wp-tabs-arrow-container'><div class='bz-cm-icon bz-mo-icon bz-plus'></div></div>\");\n\n    self.prepend(tabHeader);\n\n    var tabCurrent = self.find(\"> .bz-bizagi-container-tap-popup > .bz-container-items-tabs\").eq(params.activeTab);\n    var itemCurrent = $($(tabCurrent).data(\"reference-tab\"), self);\n\n    itemCurrent.addClass(\"childrenActive\");\n    tabCurrent.addClass(\"tabSelected\");\n\n    // Mark the selected tab in the header\n    var activeTab = $(\".bz-wp-tabs-ui:nth-child(\" + (params.activeTab + 1) + \")\", tabHeader).addClass(\"tabSelected\");\n\n    // The new width will be added to the tabSelected in order to complete the 100% on tabs\n    var widthTabSelected = widthRow + (100 - widthRow * tabCountReal);\n    activeTab.css(\"width\", widthTabSelected + \"%\");\n\n    function updateTabSize() {\n      if (params.tabNumber < tabCountPopup) {\n        // Select the current tab\n        $(\".bz-wp-tabs-arrow-container\", self).first().addClass(\"show-pluss\");\n        tabHeader.addClass(\"show-pluss\");\n        activeTab.trigger(\"click\", { origin: \"popUp\" });\n      } else {\n        $(\".bz-wp-tabs-arrow-container\", self).removeClass(\"show-pluss\");\n        tabHeader.removeClass(\"show-pluss\");\n        tabHeader.find(\"> .bz-wp-tabs-ui:last\").addClass(\"bz-wp-no-border\");\n      }\n    }\n\n    // Reorder tabs\n    function reorderTabs(dataRef) {\n\n      var tempTabs = tabHeader.find(\".bz-wp-tabs-ui\");\n      var moveAtTheEnd = true;\n\n      tempTabs.each(function (i, item) {\n        if (dataRef !== item.getAttribute(\"data-reference-tab\") && moveAtTheEnd) {\n          tabHeader.remove(\"[data-reference-tab='\" + dataRef + \"']\");\n          tabHeader.append(item);\n        } else {\n          moveAtTheEnd = false;\n        }\n      });\n    }\n\n    // Change tabs\n    function changeTab(e, params) {\n\n      params = params || {};\n      params.origin = params.origin || \"header\";\n\n      e.stopPropagation();\n      e.preventDefault();\n\n      if ($(this).hasClass(\"tabSelected\") && params.origin !== \"popUp\") {\n        return;\n      }\n\n      var dataRef = e.currentTarget.getAttribute(\"data-reference-tab\");\n      var tabChildren = $(dataRef, self);\n\n      activeTab = $(e.currentTarget);\n      // Changes the visibility of the contents of the tabs\n      self.find(\">div.childrenActive\").removeClass(\"childrenActive\");\n      tabChildren.addClass(\"childrenActive\");\n\n      // Add the normal width\n      tabHeader.find(\">div.tabSelected\").removeClass(\"tabSelected\").css(\"width\", widthRow + \"%\");\n\n      if (popUp.css(\"display\") === \"block\") {\n        popUp.toggle();\n      }\n\n      if (params.origin && params.origin === \"popUp\") {\n        activeTab = $(\"[data-reference-tab='\" + dataRef + \"']\", tabHeader);\n        reorderTabs(dataRef);\n      }\n\n      // Add the new width for tabSelected to complete the 100%\n      activeTab.addClass(\"tabSelected\").css(\"width\", widthTabSelected + \"%\");\n      activate(e, params);\n    }\n\n    if (typeof params.domIncluded !== \"undefined\") {\n      // Until the control is added to the DOM can be known widths to add the icon popup         \n      $.when(params.domIncluded).done(function () {\n        updateTabSize();\n      });\n    } else {\n      updateTabSize();\n    }\n\n    // Attach events\n    self.find(\".bz-wp-tabs-arrow-container\").first().bind(\"click\", function (event) {\n\n      // Determine if an item is visible or not\n      var headerWidth = tabHeader.innerWidth() - 29;\n      var totalWidth = 0;\n\n      // Remove the visible elements\n      $(\".bz-container-items-tabs\", popUp).removeClass(\"show\");\n\n      tabHeader.find(\".bz-wp-tabs-ui\").each(function (i, item) {\n\n        totalWidth += $(\":first-child\", item).outerWidth();\n\n        // If \"true\" then it is a tab to display the popup\n        if (totalWidth > headerWidth) {\n\n          popUp.children().each(function (j, pop) {\n            if (pop.textContent === item.textContent) {\n              $(pop).addClass(\"show\");\n              $(\".cell.bz-container-items-tabs\").css(\"border-bottom\", \"\");\n              $(\".cell.bz-container-items-tabs.show\").last().css(\"border-bottom\", \"none\");\n\n              return;\n            }\n          });\n        }\n      });\n\n      event.stopPropagation();\n      event.preventDefault();\n      popUp.toggle();\n    });\n\n    $(\">div.cell\", popUp).bind(\"click\", function (e) {\n      changeTab(e, { origin: \"popUp\" });\n    });\n\n    $(\".bz-wp-tabs-ui\", tabHeader).bind(\"click\", changeTab);\n\n    tabHeader.bind(\"resizeHeader\", function () {\n      updateTabSize();\n    });\n  };\n})(jQuery);","/**\r\n *\r\n * Created by RicardoPD on 8/11/2016.\r\n */\n\n(function ($) {\n  $.fn.helpText = function (options) {\n    options = options || {};\n    options.helpText = options.helpText || \"\";\n    options.dir = typeof options.dir !== \"undefined\" && options.dir !== \"\" ? options.dir : \"inherit\";\n\n    var tmpl =\n    '<div class=\"bz-container-rn-helptext-overlay\">' +\n    '   <div class=\"bz-rn-helptext\" dir=\"#: data.dir #\">' +\n    '       <div class=\"bz-cancel-container\">' +\n    '           <a href=\"\\\\#\" style=\"opacity: 0; width: 0; height: 0\"></a>' +\n    '           <span class=\"bz-mo-icon bz-cancel\"></span>' +\n    '       </div>' +\n    '       <span class=\"bz-rn-helptext-text\">#= data.helpText #</span>' +\n    '   </div>' +\n    '</div>';\n\n    var template = kendo.template(tmpl, { useWithBlock: false });\n    var $html = $(template(options));\n\n    $(this).bind(\"click\", function () {\n      $(\"body\").append($html);\n      $(\"body\").css(\"position\", \"fixed\");\n      $(\"a\", $html).get(0).focus();\n      $(\".bz-cancel\", $html).bind(\"click\", function () {\n        $html.remove();\n        $(\"body\").css(\"position\", \"\");\n      });\n      $(\"a\", $html).bind(\"blur\", function () {\n        $(\".bz-cancel\", $html).click();\n      });\n      $html.addClass(\"active\");\n    });\n  };\n})(jQuery);","/*\r\n*   Name: BizAgi Services Rendering End Points\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script defines all the end-points used to retrieve ajax stuff\r\n*   -   All urls must be relative to the base application\r\n*/\n\n// Create or define namespace\nbizagi.render = typeof bizagi.render !== \"undefined\" ? bizagi.render : {};\nbizagi.render.services = typeof bizagi.render.services !== \"undefined\" ? bizagi.render.services : {};\nbizagi.render.services.endPoints = [];\n\n// Creates a endpoint hash factory to resolve custom requirements\nbizagi.render.services.getEndPoints = function (params) {\n\n  var renderHandlerPathRest = \"Rest/Handlers/Render\";\n  var renderUploadHandlerPathRest = \"Rest/Handlers/Render/Upload\";\n  var renderFileHandlerPathRest = \"Rest/Handlers/RenderFile\";\n  var letterHandlerPathRest = \"Rest/Handlers/Letter\";\n  var multiActionHandlerPathRest = \"Rest/Handlers/MultiAction\";\n  var metadataHandlerPathRest = \"Rest/Handlers/Metadata\";\n  var metadataMultiactionHandlerPathRest = \"Rest/Handlers/MetadataMultiAction\";\n  // Default workportal end-points\n  if (params.context == \"workflow\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.proxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.proxyPrefix + metadataHandlerPathRest,\n      \"render-multiaction-metadata\": params.proxyPrefix + metadataMultiactionHandlerPathRest,\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.proxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.proxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.proxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\",\n      \"render-entity-layout-upload-files\": params.proxyPrefix + \"Api/Entities/{entity}/Files/{surrogateKey}/Array?xpath={xpath}\",\n      \"render-query-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsersForQueryFormsById/{queryFormId}/\",\n      \"case-handler-getCaseSummary\": params.proxyPrefix + \"Rest/Cases/{idCase}/SummaryGuid\",\n      \"case-handler-getCaseSummaryByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getCaseAssignees\": params.proxyPrefix + \"Rest/Cases/{idCase}/AssigneesGuid\",\n      \"case-handler-getWorkItems\": params.proxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\",\n      \"admin-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsers\",\n      \"admin-getUsersList-FromPreferences\": params.proxyPrefix + \"Rest/Users/SearchUsersFromPreferences\",\n      \"admin-getUsersList-ForStakeholders\": params.proxyPrefix + \"Rest/Users/SearchUsersForStakeholders\",\n      \"admin-getUsersList-ForXpathIdBossUser\": params.proxyPrefix + \"Rest/Users/SearchUsersForBosses\",\n      \"admin-getUsersList-ForXpathIdDelegate\": params.proxyPrefix + \"Rest/Users/SearchUsersForDelegates\",\n      \"admin-getUsersForAssignation\": params.proxyPrefix + \"Rest/Users/UsersForAssignation\",\n      \"admin-users-config\": params.proxyPrefix + \"Api/Authentication/BizagiConfig\",\n      //users administration\n      \"admin-usersform\": params.proxyPrefix + \"Rest/Handlers/Render\",\n      \"admin-GenerateDataToSendByEmail\": params.proxyPrefix + \"Rest/Users/GenerateDataToSendByEmail\",\n      \"admin-sendUserEmail\": params.proxyPrefix + \"Rest/Users/SendUserEmail\" };\n\n  }\n  // Sharepoint end-points (must be customized for each project)\n  if (params.context == \"sharepoint\" || params.context == \"portal\") {\n    if (typeof params.sharepointProxyPrefix === \"undefined\") alert(\"sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'\");\n    return {\n      \"form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.sharepointProxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.sharepointProxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.sharepointProxyPrefix + metadataHandlerPathRest,\n      \"render-grid-edit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": \"jquery/css/bizagi/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.sharepointProxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": \"jquery/css/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.sharepointProxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\",\n      \"case-handler-getCaseSummary\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/Summary\",\n      \"case-handler-getCaseSummaryByGuid\": params.sharepointProxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getWorkItems\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\" };\n\n  }\n\n  if (params.context == \"entitymanagement\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=entity\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  if (params.context == \"search\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=metadata\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  return {};\n};","/*\r\n*   Name: BizAgi Rendering Service Context Factory\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the endpoints to be used based on the given context\r\n*/\n\n$.Class.extend(\"bizagi.render.services.context\", {}, {\n  /* \r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    this.context = params.context;\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n  },\n\n  /*\r\n     *   Returns the given url for a specified service\r\n     */\n  getUrl: function getUrl(service) {\n    if (this.endPoints[service] == null) {\n      alert(\"No endpoint defined for: \" + service);\n    }\n    return this.endPoints[service];\n  },\n\n  setProxyPrefix: function setProxyPrefix(params) {\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n  } });","/*\r\n *   Name: BizAgi Rendering Services\r\n *   Author: Einer Perez\r\n *   Comments:\r\n *   -   This class will provide a facade to access to multiaction rendering REST services\r\n */\nbizagi.render.services.multiactionservice.extend(\"bizagi.render.services.metadatamultiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"h_pageCacheId\" },\n{\n\n  /*\r\n  *   Sends a multiaction to the server\r\n  */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      if (action[self.Class.BA_PAGE_CACHE]) {\n        data[self.Class.BA_PAGE_CACHE] = action[self.Class.BA_PAGE_CACHE];\n      }\n      delete action[self.Class.BA_PAGE_CACHE];\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action metadata\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction-metadata\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(this, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse;\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  } });","/**\r\n *   Name: Bizagi Rendering Validation controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.validation\", {}, {\n\n  /* \r\n                                                                                            *   Constructor\r\n                                                                                            */\n  init: function init(form, validations, canvas) {\n    // Enable evalValidation function with console log trace\n    this.enableDebug = false;\n\n    // Call base\n    this._super(form);\n\n    // Perform notifications\n    this.initializeValidations(canvas, validations);\n  },\n\n  /**\r\n      * Perform validations component\r\n      * @param canvas\r\n      * @param validations\r\n      */\n  initializeValidations: function initializeValidations(canvas, validations) {\n    var self = this;\n    var validationBox = $('<div />').appendTo(canvas);\n\n    //Notifies that a modal view appear/disappear\n    $.widget(\"ui.bizagi_notifications\", $.ui.bizagi_notifications, {\n      expand: function expand() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      collapse: function collapse() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      },\n      hide: function hide() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n\n    // Apply plugin\n    validationBox.bizagi_notifications({\n      itemIcon: \"ui-icon-circle-close\",\n      minimized: false,\n      clearEnabled: false,\n      title: bizagi.localization.getResource(\"render-form-validations-header-text\"),\n      device: bizagi.util.detectDevice(),\n      orientation: self.form.properties.orientation });\n\n\n    // Bind click\n    validationBox.bind(\"itemClick\", function (e, ui) {\n      self.onNotificationClick(ui.data);\n    });\n\n    // Build validations\n    if (validations) {\n      self.buildValidations(validations);\n    }\n\n    // Keep references\n    self.validationBox = validationBox;\n    self.validations = validations || [];\n  },\n\n  /* \r\n     *   Method to incorporate automatic validation rules \r\n     */\n  buildValidations: function buildValidations(validations) {\n    var self = this;\n    var fnValidations = self.buildAllValidations(validations);\n\n    self.form.bind(\"rendervalidate\", function () {\n      return fnValidations(self);\n    });\n  },\n\n  /* \r\n     *   Method to add a simple error message in the validation box\r\n     */\n  showErrorMessage: function showErrorMessage(message) {\n    bizagi.showErrorAlertDialog = false;\n    this.showValidationMessage(message, null, \"ui-icon-circle-close\", \"ui-state-error\");\n  },\n\n  /* \r\n     *   Method to add a simple alert message in the validation box\r\n     */\n  showAlertMessage: function showAlertMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-alert\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple info message in the validation box\r\n     */\n  showInfoMessage: function showInfoMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-info\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple validation message in the validation box\r\n     */\n  showValidationMessage: function showValidationMessage(message, focus, icon, itemAdditionalClass, type, renderId) {\n    var self = this;\n    var form = self.form;\n    var render = null;\n\n    if (renderId) {\n      render = form.getRenderById(renderId) || null;\n    } else {\n      render = focus ? form.getRender(focus) : null;\n    }\n\n    bizagi.showErrorAlertDialog = false;\n\n    // Method to perform validations after the render has been changed, or the notifications has been clicked\n    var performValidationFn = function performValidationFn() {\n      // First hide and clear validation box\n      self.clearValidationMessages();\n\n      var lastActionButton = form ? form.getLastActionButton() : {};\n      var skipValidation = lastActionButton && lastActionButton.action === \"nextWithoutValidations\";\n\n      if (!skipValidation) {\n        // Run validations\n        self.validating = true;\n        self.performValidations();\n        self.validating = false;\n      }\n\n      // Attempt to hide if there are no validations\n      if (self.countValidationMessages() == 0) {\n        self.hideValidationMessages();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } else {\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      }\n\n      //form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n    };\n    self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n    // Add message\n    self.validationBox.bizagi_notifications(\"addNotification\", message, focus, icon, itemAdditionalClass, performValidationFn, type, renderId);\n\n    if (render) {\n      // Add error message to render\n      render.setValidationMessage(message);\n\n      if (!bizagi.util.isIE8()) {\n\n        // Bind event when render change\n        if (!self.validating) render.bind(\"rendervalidate\", function () {\n          performValidationFn();\n          if (render.properties.retype != \"double\") {\n            render.unbind(\"rendervalidate\");\n          }\n        });\n      }\n    }\n  },\n\n  /*\r\n     *   Count the number of validation messages\r\n     */\n  countValidationMessages: function countValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"count\");\n  },\n\n  /*\r\n     *   Remove all the validations\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var validationsBoxes = $(\".ui-bizagi-notifications-container\", \"body\").not(\".ui-bizagi-log-container\");\n\n    return validationsBoxes.bizagi_notifications(\"clearAll\", undefined, params);\n  },\n\n  /*\r\n     *   Hide the validation notifications box\r\n     */\n  hideValidationMessages: function hideValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"hide\");\n  },\n\n  /*\r\n     *   Show the validation notifications box\r\n     */\n  showValidationMessages: function showValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"show\");\n  },\n\n  /*\r\n     *   Expand the notification box\r\n     */\n  expandNotificationBox: function expandNotificationBox(autofocus) {\n    // Select first error and expand notifications\n    if (autofocus !== false) this.validationBox.bizagi_notifications(\"autoFocusFirstError\");\n    return this.validationBox.bizagi_notifications(\"expand\");\n  },\n\n  isExpandedNotificationBox: function isExpandedNotificationBox() {\n    return this.validationBox.bizagi_notifications(\"isExpanded\") && this.validationBox.bizagi_notifications(\"isContentVisible\");\n  },\n\n  /*\r\n     *   Run all validation rules in the form container\r\n     */\n  performValidations: function performValidations(invalidElements) {\n    var self = this;\n\n    // First hide and clear validation box\n    self.clearValidationMessages();\n    self.validationBox.bizagi_notifications(\"initBatch\");\n\n    // Run render validations\n    var bRendersValid = self.validateRenders(invalidElements);\n\n    // Run form validations\n    var bFormValid = self.validations.length > 0 ? self.form.triggerHandler(\"rendervalidate\") : true;\n    self.validationBox.bizagi_notifications(\"endBatch\");\n\n    // Show validations if invalid\n    if (!bFormValid || !bRendersValid) {\n      self.validationBox.bizagi_notifications(\"show\");\n      return false;\n    }\n\n    return true;\n  },\n\n  /* PRIVATE METHODS */\n\n  /*  \r\n                        *   Construct validations javascript rules\r\n                        */\n  buildAllValidations: function buildAllValidations(validations) {\n    var self = this;\n    var sJSCode = \"\";\n\n    for (var i = 0; i < validations.length; i++) {\n\n      var isEnabled = validations[i].enabled != undefined ? validations[i].enabled : true;\n      if (isEnabled) {\n        // If validation is not \"valid\" we can omit that instruction\n        try {\n          sJSCode += self.buildValidation(validations[i].conditions, validations[i].validationCommand);\n        } catch (e) {\n          if (e.message != \"RenderNotFoundException\") {\n            bizagi.logError(\"Validation cannot be parsed: \" + e.message, validations[i]);\n          }\n        }\n      }\n    }\n\n    // Build final function\n    var sStatement = \"var baTmpFn = function(self, params){\\r\\n var bValid = true;\\r\\n \" + sJSCode + \"\\r\\n return bValid;}; baTmpFn\";\n\n    // Return interpreted function\n    return self.evalValidation(sStatement);\n  },\n\n  /*\r\n     *   Build a single javascript validation rule\r\n     */\n  buildValidation: function buildValidation(conditions, validationCommand) {\n    var self = this;\n    var sJsCondition = \"\";\n    var sJsValidation = \"\";\n\n    // Detect grid references\n    var gridReference = self.searchForGridReference(conditions);\n    var bGridDetected = gridReference != null;\n    var validateEditability = typeof bizagi.override.validateEditabilityOnValidations != \"undefined\" ? bizagi.override.validateEditabilityOnValidations : true;\n\n    // Build Conditions\n    sJsCondition += \"( \" + self.buildConditions(conditions, bGridDetected, validateEditability) + \" )\";\n\n    // Fix message for quotes and break lines\n    validationCommand.message = validationCommand.message.replace(/'/g, \"\\\\'\");\n    validationCommand.message = validationCommand.message.replace(/\\n/g, \" \");\n\n    // Build Message\n    var focus = validationCommand.focus || \"\";\n    if (bGridDetected) focus = gridReference;\n    if (validationCommand.tokens)\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"', JSON.parse('\" + JSON.encode(validationCommand.tokens) + \"')); bValid = false;\\r\\n\";else\n\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"'); bValid = false;\\r\\n\";\n\n    // Build final statement\n    if (!bGridDetected) {\n\n\n      return \"if (\" + sJsCondition + \"){\\r\\n \" + sJsValidation + \" \\r\\n}\";\n    } else {\n      var sGridStatement = \"var grid = self.form.getRender('\" + gridReference + \"');\\r\\n\";\n      sGridStatement += \"if(grid === null) return true;\\r\\n\";\n      sGridStatement += \"var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"var bGridValid = true;\\r\\n\";\n      sGridStatement += \"$.each(data, function(_, i) {\\r\\n\";\n      sGridStatement += \"if (\" + sJsCondition + \"){\\r\\n bGridValid = false; \\r\\n}\";\n      sGridStatement += \"});\\r\\n\";\n      sGridStatement += \"if (bGridValid == false){\\r\\n \" + sJsValidation + \"\\r\\n}\";\n      return sGridStatement;\n    }\n  },\n\n  /* \r\n     *   Method triggered when the validation item has been clicked\r\n     */\n  onNotificationClick: function onNotificationClick(data) {\n    var self = this;\n    var form = self.form;\n    var xpath = data.focus;\n    var renderId = data.id;\n\n    if (xpath) {\n      var render = renderId ? form.getRenderById(renderId) : form.getRender(xpath);\n\n      if (render) {\n        render.focus();\n      }\n    }\n  },\n\n  /* \r\n     *   Method to loop\r\n     */\n  validateRenders: function validateRenders(invalidElements) {\n    var self = this;\n    invalidElements = invalidElements || [];\n\n    // Do a check\n    var bValid = self.form.isValid(invalidElements);\n    if (!bValid) {\n      invalidElements.forEach(function (element) {\n        if (element.id) {\n          // Parameters: message, xpath, icon, itemAdditionalClass, type, renderId\n          self.showValidationMessageById(element.message, element.xpath, element.id);\n        } else if (element.message || element.xpath) {\n          self.showValidationMessage(element.message, element.xpath);\n        }\n      });\n    }\n\n    return bValid;\n  },\n\n  /*\r\n     *\tEval validation string, for debug purposes\r\n     */\n  evalValidation: function evalValidation(command) {\n    var self = this;\n\n    if (self.enableDebug && console != undefined) {\n      console.log(command);\n    }\n\n    return eval(command);\n  },\n\n  /**\r\n      * Method to add a simple validation message in the validation box\r\n      * @param message\r\n      * @param xpath\r\n      * @param renderId\r\n      */\n  showValidationMessageById: function showValidationMessageById(message, xpath, renderId) {\n    this.showValidationMessage(message, xpath, undefined, false, undefined, renderId);\n  } });","/*\r\n *   Name: Bizagi Rendering Validation controller \r\n *   Author: Richar Urbano <Richar.Urbano@Bizagi.com\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\n\n// Override to support the change of the visibility and editability over forms buttons\nbizagi.command.controllers.action.extend(\"bizagi.command.controllers.action\", {}, {\n\n  /**\r\n                                                                                     * Sets a new color for the background of the button\r\n                                                                                     * Applies also to grid cells!\r\n                                                                                     * @param {} xpath \r\n                                                                                     * @param {} color \r\n                                                                                     * @returns {} \r\n                                                                                     */\n  changeButtonBackground: function changeButtonBackground(xpath, color) {\n    if (this.form && !this.form.isFloatingButtonsEnabled())\n    this._super(xpath, color);\n  },\n\n  /**\r\n      * Sets a new color for the foreground of the render\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonForeground: function changeButtonForeground(xpath, color) {\n    if (this.form && !this.form.isFloatingButtonsEnabled())\n    this._super(xpath, color);\n  },\n\n  /**\r\n      * Changes the visibility of the button\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonVisibility: function changeButtonVisibility(xpath, status) {\n    var self = this;\n\n    if (self.form && !self.form.isFloatingButtonsEnabled()) {\n      self._super(xpath, status);\n    } else {\n      self.changeFloatingButtonVisibility(xpath, status);\n    }\n  },\n\n  /**     \r\n      * Changes the editability of the button\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonEditability: function changeButtonEditability(xpath, status) {\n    var self = this;\n\n    if (self.form && !self.form.isFloatingButtonsEnabled()) {\n      self._super(xpath, status);\n    } else {\n      self.changeFloatingButtonVisibility(xpath, status);\n    }\n  },\n\n  /**\r\n      * Helper to override the visibility and editability\r\n      * @param {} xpath \r\n      * @param {} status \r\n      * @returns {} \r\n      */\n  changeFloatingButtonVisibility: function changeFloatingButtonVisibility(xpath, visible) {\n    var self = this;\n    var form = self.form;\n    var guid = xpath.substring(3);\n    var navigation = form.getNavigation();\n    var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\n    var isVisible = bizagi.util.parseBoolean(visible) !== false;\n    var index = buttons.findIndex(function (item) {return item.id === guid;});\n\n    if (index !== -1)\n    buttons[index].visible = isVisible;\n\n    form.buttons = buttons || [];\n    navigation.setNavigationButtons(form);\n  } });","/*\r\n*   Name: BizAgi Element Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class with common stuff related to all renders and containers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.element\", {\n  ELEMENT_TYPE_CONTAINER: 1,\n  ELEMENT_TYPE_RENDER: 2,\n  ELEMENT_TYPE_COLUMN: 3 },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    // Set render factory\n    this.renderFactory = params.renderFactory;\n\n    // Set data service\n    this.dataService = params.dataService;\n\n    // Set reference to parent\n    this.parent = params.parent;\n\n    // Set l10n service\n    this.resources = bizagi.localization;\n\n    // Set the observable element\n    this.observableElement = $(\"<div />\");\n\n    // Set the dispose flag\n    this.disposed = false;\n\n    // Update data\n    this.initializeData(params.data);\n\n    // Define an object to hold the subscribe collection\n    this.subscribers = [];\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Set the internal data\n    this.properties = {};\n    if (data && data.properties) this.properties = data.properties;\n\n    // Set xpath context\n    this.properties.xpathContext = this.getXpathContext();\n\n    // Set page cache\n    this.properties.idPageCache = this.getPageCache();\n\n    //History of visual changes from actions\n    self.visualChanges = self.visualChanges || {};\n  },\n\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    // By default return parent's xpath context\n    // This method is overriden in form container which contains the real xpath context\n\n    return this.parent != undefined && typeof this.parent.getXpathContext == \"function\" ? this.parent.getXpathContext() : \"\";\n  },\n\n  /*\r\n     *   Returns the xpath of the element\r\n     */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n  /*\r\n     *   Returns the page cache for the current element\r\n     */\n  getPageCache: function getPageCache() {\n    // By default return parent's page cache\n    // This method is overriden in form container which contains the real page cache\n\n    return this.parent != undefined && typeof this.parent.getPageCache == \"function\" ? this.parent.getPageCache() : \"\";\n  },\n\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    // By default return parent's form container\n    // This method is overriden in form container which returns itself\n    if (typeof this.parent != \"undefined\")\n    return this.parent.getFormContainer();\n  },\n\n\n  /*\r\n     *   Returns the mapped resource\r\n     */\n  getResource: function getResource(key) {\n    return this.resources.getResource(key);\n  },\n\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {},\n\n  /*\r\n                                                *   Resizes the element\r\n                                                */\n  resize: function resize(size) {\n\n  },\n\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus() {\n\n    if (this.properties.required) {\n      var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n      // Check if element is visible into scroll\n      if (!bizagi.util.isScrolledIntoView(this.element, layout)) {\n        $(this.element).attr('tabindex', -1).focus();\n      }\n      if (this.element) {\n        this.element.effect('highlight', 2000);\n      }\n    }\n\n    //Check if the element has parent\n    if (this.parent && typeof this.parent.focus == 'function') {\n      this.parent.focus();\n    }\n  },\n\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.parent) return this.parent.triggerGlobalHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.trigger(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.triggerHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.bind(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Un-binds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.unbind(eventType, fn);\n    return null;\n  },\n\n  /*\r\n     *   Binds a one time event\r\n     */\n  one: function one(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.one(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {},\n\n  /*\r\n                                                        *   Get current rendering mode\r\n                                                        */\n  getMode: function getMode() {\n    if (this.parent) return this.parent.getMode();\n  },\n\n  /*\r\n     *   Get current rendering params\r\n     */\n  getParams: function getParams() {\n    if (this.parent) return this.parent.getParams();\n  },\n\n  /*\r\n     * Get current form type (ex. queryform, form)\r\n     */\n  getFormType: function getFormType() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    return form.properties.type || \"form\";\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {},\n\n  /*\r\n                              *   Returns a promise that will resolve when the element is ready to save\r\n                              */\n  isReadyToSave: function isReadyToSave() {},\n\n  /*\r\n                                              *   Get the custom handlers set for this execution\r\n                                              */\n  getCustomHandlers: function getCustomHandlers() {\n    return null;\n  },\n\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n    self.disposed = true;\n\n    var timeOutDispose = setTimeout(function () {\n      if (self.subscribers != null) {\n        // Remove all subcriptions\n        $.each(self.subscribers, function (i, item) {\n          self.unbind(item.event);\n        });\n      }\n      delete self.subscribers;\n\n      if (self.observableElement) self.observableElement.off();\n      bizagi.util.dispose(self);\n      clearTimeout(timeOutDispose);\n    }, bizagi.override.disposeTime || 50);\n  },\n\n  /*\r\n     *   Check if the current object is disposed\r\n     */\n  isDisposed: function isDisposed() {\n    return this.disposed;\n  },\n\n  /*\r\n     *   This method process the error or alert messages coming from the server, and adds them to the validation controller\r\n     */\n  processFailMessage: function processFailMessage(message) {\n    var self = this;\n    var form = self.getFormContainer();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    if (message.errorType === \"CustomMessageException\") {\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      var error = bizagi.localization.getResource(message.message);\n      form.validationController.showErrorMessage(error);\n    } else if (message.errorType === \"InvalidCaseStateException\") {\n      var params = form.getParams();\n\n      form.validationController.clearValidationMessages();\n\n      // Redirection Here\n      form.container.trigger(\"routing\", { idCase: params.idCase || bizagi.context.idCase });\n    } else {\n      var message = message || {};\n      message = typeof message == \"string\" ? JSON.parse(message) : message;\n      var type = message.type || \"error\";\n      var code = message.code || \"code\";\n      message = message.responseText || message.message || message;\n\n      // Omit processing when the ajax didn't process\n      if (type === \"not-processed\") return;\n      if (type === \"not-shown\") return;\n      if (isOfflineForm && code === \"AUTH_ERROR\") return;\n\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      if (type == \"alert\") {\n        form.validationController.showAlertMessage(message);\n      } else {\n        form.validationController.showErrorMessage(message);\n      }\n    }\n\n    return message;\n  },\n\n  /*\r\n     *   Sets a waiting overlay above the current element\r\n     */\n  startLoading: function startLoading() {/* Override in implementations */},\n\n  /*\r\n                                                                             *   Removes the waiting overlay\r\n                                                                             */\n  endLoading: function endLoading() {/* Override in implementations */},\n\n  /**\r\n                                                                          *   Prepare control to remove it from the render, that allows to\r\n                                                                          *   clean all elements of the control or to do any stuff before to remove\r\n                                                                          */\n  beforeToRefresh: function beforeToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      *   Run before that the control has been refreshed\r\n      */\n  afterToRefresh: function afterToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      * This method returns the localized version of the resource\r\n      * @param resource\r\n      * @param fallback\r\n      * @returns {string}\r\n      */\n  getResourceByKey: function getResourceByKey(resource, fallback) {\n    fallback = fallback || resource;\n\n    return bizagi.localization.getResource(resource, fallback);\n  },\n  /**\r\n      * Restore appearance using type of command\r\n      */\n  restoreAppearance: function restoreAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n\n      switch (command) {\n        case \"color\":\n          self.changeColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditability(self.visualChanges[command]);\n          break;\n        case \"visibility\":\n          self.changeVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  },\n\n  getOrientation: function getOrientation() {\n    var control = this;\n    while (control) {\n      properties = control.properties || {};\n      if (properties.orientation !== \"auto\") return properties.orientation;\n      control = control.parent;\n    }\n    return \"auto\";\n  } });","/*\r\n *   Name: BizAgi Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base container class with common stuff related to all containers\r\n */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.container\", {\n  TYPE_QUERY_FORM: \"queryForm\" },\n{\n\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Set defaults\n    var properties = self.properties;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(properties));\n\n    // Create children\n    this.children = [];\n    this.childrenHash = {};\n\n    if (data.elements) {\n      $.each(data.elements, function (i, element) {\n        if (element.render) {\n          self.createRenderElement(element);\n        } else if (element.container) {\n          self.createContainerElement(element);\n        } else if (element.form) {\n          self.createFormElement(element);\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Creates a render element\r\n     */\n  createRenderElement: function createRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n    var originalElement;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.render.properties.editable = properties.editable;\n      /*if (element.render.properties.type == \"grid\")\r\n                                                                    element.render.properties.inlineEdit = false;*/\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.render.properties.required = properties.required;\n    }\n\n    //clone originalElement to apply duplicate render properties correctly\n    if (element.render.properties.retype == \"duplicate\") {\n      originalElement = bizagi.clone(element);\n    }\n\n    var render = self.renderFactory.getRender({\n      type: element.render.properties.type,\n      data: element.render,\n      dataService: self.dataService,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Add to children\n    self.children.push(render);\n\n    // Check for duplicate\n    if (element.render.properties.retype == \"duplicate\") {\n      self.processDuplicateRender(render, originalElement);\n    }\n\n    //TODO: at this point not posible add the retype double at this point not exist input\n\n    // Register in form container\n    self.getFormContainer().registerRender(render);\n  },\n  /*\r\n     *   Creates a container element\r\n     */\n  createContainerElement: function createContainerElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.container.properties.required = properties.required;\n    }\n\n    var container = self.renderFactory.getContainer({\n      type: element.container.properties.type,\n      data: element.container,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode(),\n      isDesign: self.getMode() === \"design\" });\n\n\n    self.children.push(container);\n\n    // Register in form container\n    self.getFormContainer().registerRender(container);\n  },\n  /*\r\n     *   Creates a form element\r\n     */\n  createFormElement: function createFormElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    var form = self.renderFactory.getContainer({\n      type: element.form.properties.type || \"form\",\n      data: element.form,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode() });\n\n    self.children.push(form);\n  },\n  /*\r\n     *   Gets the current container\r\n     */\n  getElement: function getElement() {\n    var self = this;\n    return self.container;\n  },\n  /*\r\n     *   Gets a collection for all elements matching a type\r\n     */\n  getElementsByType: function getElementsByType(type, elements) {\n    elements = elements || [];\n    var self = this;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.properties.type == type) {\n        elements.push(child);\n      }\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.getElementsByType(type, elements);\n      }\n    });\n\n    return elements;\n  },\n  /*\r\n     *   Process renders with duplicate property\r\n     */\n  processDuplicateRender: function processDuplicateRender(render, element) {\n    var self = this;\n    var clonedElement = JSON.parse(JSON.encode(element.render));\n\n    // Changes properties\n    clonedElement.properties.displayName = clonedElement.properties.displayName + \" \" + self.getResource(\"render-text-duplicate-label-sufix\");\n    clonedElement.properties.xpath = clonedElement.properties.xpath + \".clone\";\n    clonedElement.properties.isClone = true;\n\n    // Creates clone\n    var clone = self.renderFactory.getRender({\n      type: clonedElement.properties.type,\n      data: clonedElement,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Associates with main render\n    render.cloneRender = clone;\n\n    // Add to collection\n    self.children.push(clone);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_CONTAINER;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  render: function render() {\n    var self = this,\n    mode = self.getMode(),\n    result;\n\n    // Render container\n    result = self.internalRender();\n\n    // Apply container defaults\n    self.applyContainerDefaults();\n\n    // Add container id\n    result.attr(\"data-container-id\", self.properties.id);\n\n    //Add container tag property\n    if (self.properties.tag) {\n      result.attr(\"data-tag\", self.properties.tag);\n    }\n\n    //Add class to the requested form, to specify if is add form, edit form, or detail form\n    if (self.params)\n    if (self.params.requestedForm)\n    result.addClass(self.params.requestedForm);\n\n    return result;\n  },\n  /*\r\n     *   Internal  rendering\r\n     */\n  internalRender: function internalRender() {\n    var self = this;\n\n    // Render the container\n    var html = self.renderContainerHtml();\n\n    // Convert html string to jquery object\n    var container = self.container = $(html);\n\n    // Post-render\n    self.postRenderContainer(container);\n\n    return self.container;\n  },\n  /*\r\n     *   Renders container html\r\n     */\n  renderContainerHtml: function renderContainerHtml() {\n    var self = this;\n    // Start rendering deferred\n    self.renderingDeferred = self.renderingDeferred || new $.Deferred();\n\n    return this.renderContainer();\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred)\n    return false;\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.container))\n    alert(\"container hasn't been rendered!\");\n\n    return this.container;\n  },\n  /*\r\n     *   Set container defaults\r\n     */\n  applyContainerDefaults: function applyContainerDefaults() {\n    var self = this,\n    properties = self.properties;\n\n    // Set customizations\n    if (properties.backgroundColor)\n    self.changeBackgroundColor(properties.backgroundColor);\n\n    // Set editability and visiblity\n    if (!properties.visible)\n    self.changeVisibility(properties.visible);\n  },\n  /*\r\n     *  Changes background color\r\n     */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var properties = self.properties;\n\n    properties.backgroundColor = color;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.changeBackgroundColor(color);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeBackgroundColor(color);\n      }\n    });\n  },\n  /*\r\n     *   Hides / Show container\r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    // Hide - show the render\n    if (properties.visible) {\n      self.container.show();\n\n    } else {\n      self.container.hide();\n    }\n  },\n  /* Changes editability */\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        $.when(child.ready()).done(function () {\n          child.changeEditability(argument);\n        });\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeEditability(argument);\n      }\n    });\n  },\n  /*\r\n     *   Replaces a <x/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceTag: function replaceTag(container, tag, replace) {\n    bizagi.util.replaceSelector(container, tag, replace);\n  },\n  /*\r\n     *   Replaces a <children/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceChildrenTag: function replaceChildrenTag(container, replace) {\n    this.replaceTag(container, \".children\", replace);\n  },\n  /*\r\n     *   Replaces a {{children}} string in the specified element\r\n     */\n  replaceChildrenHtml: function replaceChildrenHtml(html, replace) {\n    return html.replaceFirstWithoutPatterns(\"{{children}}\", replace);\n  },\n  /*\r\n     *   Template method to render the container layout, returns a string with all the builded html,\r\n     *   must be overriden in all children\r\n     */\n  renderContainer: function renderContainer() {\n  },\n  /*\r\n     *   Template method to process each jquery object\r\n     *   must be overriden in each container\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n      self.applyPlaceHolderPolyfill();\n\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  },\n\n  applyPlaceHolderPolyfill: function applyPlaceHolderPolyfill() {\n    var self = this;\n    var config = window.placeHolderConfig || {};\n    if (('placeholder' in $('<input>')[0] || 'placeHolder' in $('<input>')[0]) && !config.forceApply) {\n      // don't run the polyfill when the browser has native support\n      return;\n    }\n    Placeholders.enable();\n  },\n  /*\r\n     *   Process container children\r\n     */\n  executeChildrenPostRender: function executeChildrenPostRender(container) {\n    var self = this;\n    var childrenElements = container.children();\n\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n          child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n          child.postRenderContainer(childElement);\n        }\n      } else {\n        self.executeChildrenPostRender(childElement);\n      }\n    });\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n\n  },\n  /**\r\n      *   Renders all children html\r\n      */\n  renderChildrenHtml: function renderChildrenHtml() {\n    var self = this;\n    var temp = \"\";\n\n    $.each(self.children, function (i, child) {\n      var type = child.getElementType();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n      temp += child.renderElement();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n      temp += child.renderContainerHtml();\n      self.childrenHash[child.properties.uniqueId] = child;\n    });\n\n    return temp;\n  },\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     */\n  collectRenderValues: function collectRenderValues(renderValues) {\n    var self = this;\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.collectRenderValues(renderValues);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n          // Check if the render can be sent to the server\n          if (child.canBeSent()) {\n            child.collectData(renderValues);\n          }\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Iterate through all the renders and check if has changed\r\n     */\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    result = result || [];\n\n    if (!result.length) {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          if (result.length || child.hasChanged(result)) {\n            return false;\n          }\n        });\n      }\n    } else {\n      return result;\n    }\n  },\n\n  /*\r\n     *    Creates a json array parameters to search result\r\n     */\n  collectRenderValuesQueryForm: function collectRenderValuesQueryForm(renderValues) {\n    var self = this;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.collectRenderValuesQueryForm(renderValues);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        // Check if the render can be sent to the server\n        if (child.canBeSentQueryForm()) {\n          child.collectDataQueryForm(renderValues);\n        }\n      }\n    });\n  },\n  /*\r\n     *   Gets the first child\r\n     */\n  firstChild: function firstChild() {\n    return this.children[0];\n  },\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath, renders) {\n    var self = this;\n\n    renders = renders || [];\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.getRenders(xpath, renders);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        if (xpath == child.properties.xpath) {\n          renders.push(child);\n        }\n      }\n    });\n\n    return renders;\n  },\n  /*\r\n     *   Gets the first editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var result = null;\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        if (result == null)\n        result = render;\n      }\n    });\n\n    // if no render has been found, skip editable condition\n    if (result == null) {\n      $.each(renders, function (i, render) {\n        result = render;\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n      *   Gets all renders by xpath\r\n      */\n  getRendersByXpath: function getRendersByXpath(xpath) {\n    var self = this;\n    return self.getRenders(xpath);\n  },\n\n  /*\r\n     *   Gets a container by the id\r\n     */\n  getContainer: function getContainer(id) {\n    var self = this;\n\n    if (self.properties.id == id)\n    return this;\n\n    var result;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        var o = child.getContainer(id);\n        if (o != null) {\n          result = o;\n          return false;\n        }\n      }\n    });\n\n    return result;\n  },\n  /*\r\n     *   Validate all renders in the container\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            child.isValid(invalidElements);\n          }\n        }\n      });\n    }\n\n    return invalidElements.length == 0;\n  },\n\n  /*\r\n     *   Validate all grids in the container\r\n     */\n  hasValidGrids: function hasValidGrids(invalidElements) {\n    var self = this;\n\n    $.each(self.children, function (i, child) {\n      if (child.properties.visible) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.hasValidGrids(invalidElements);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER && typeof child.grid != \"undefined\") {\n          // Go to the render\n          child.isValid(invalidElements);\n        }\n      }\n    });\n\n    return invalidElements.length == 0;\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready to save\r\n     */\n  isReadyToSave: function isReadyToSave() {\n    var self = this;\n    var childrenPromises = $.map(self.children, function (child) {\n      return child.isReadyToSave();\n    });\n    return $.when.apply($, childrenPromises);\n  },\n  /*\r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        var result = child.getFocus();\n        if (!bizagi.util.isEmpty(result)) {\n          focus = result;\n        }\n      }\n    });\n\n    return focus;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n  },\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n\n    // Iterate through elements\n    var timeOutChildrenDispose = setTimeout(function () {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          child.dispose();\n        });\n      }\n      clearTimeout(timeOutChildrenDispose);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  /*\r\n     *   Refresh the current container\r\n     */\n  refreshContainer: function refreshContainer(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      contexttype: self.properties.contexttype || \"\",\n      idForm: form && form.properties && form.properties.id ? form.properties.id : \"\" //To fix BA56877.\n    })).done(function (data) {\n\n      if (!self.isDisposed()) {\n        self.saveChildrenVisualChanges(self);\n\n        // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n        self.unregisterChildren();\n        delete self.children;\n        delete self.childrenHash;\n\n        self.getFormContainer().removeActions();\n\n        // update editable\n        if (self.properties.editable === false) {\n          data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n        }\n\n        // Update the data\n        self.initializeData(data.container);\n\n        // Render the container again\n        var currentContainer = self.container;\n        var result = self.render();\n\n        if (self.properties.type == \"tabItem\") {\n          $(result).addClass(\"childrenActive\");\n        }\n\n        currentContainer.replaceWith(result);\n\n        // Rebind the actions\n        var actions = data.container && data.container.actions ? data.container.actions : [];\n        self.getFormContainer().refreshActions(actions);\n\n        self.triggerChildrenActions();\n        self.restoreChildrenVisualChanges(self);\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          self.restoreContainerAppearance(data.container);\n        }\n\n        // Execute personalized stuff after to refresh it\n        self.afterToRefresh();\n\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the current container\r\n      */\n  refreshDesignContainer: function refreshDesignContainer(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh(data);\n    //self.setActiveTab(data.elements);\n\n    $.extend(data.properties, {\n      editable: properties.editable,\n      contexttype: properties.contexttype || \"\",\n      idPageCache: properties.idPageCache,\n      idRender: properties.id,\n      messageValidation: properties.messageValidation,\n      uniqueId: properties.uniqueId,\n      visible: properties.visible,\n      xpath: properties.xpath,\n      mode: \"design\",\n      xpathContext: properties.xpathContext || \"\" });\n\n\n\n    if (!self.isDisposed()) {\n      // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n      self.unregisterChildren();\n      delete self.children;\n      delete self.childrenHash;\n\n      // update editable\n      if (self.properties.editable === false) {\n        data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n      }\n\n      // Update the data\n      self.initializeData(data.container);\n\n      // Render the container again\n      var currentContainer = self.container;\n      var result = self.render();\n\n      if (self.properties.type == \"tabItem\") {\n        $(result).addClass(\"childrenActive\");\n      }\n\n      currentContainer && currentContainer.replaceWith(result);\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh();\n    }\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].beforeToRefresh();\n    }\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].afterToRefresh();\n    }\n  },\n\n  /*\r\n     *   Re-execute children actions\r\n     */\n  triggerChildrenActions: function triggerChildrenActions() {\n    var self = this;\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.triggerChildrenActions();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.triggerRenderChange({ changed: false });\n      }\n    }\n  },\n\n\n  /*\r\n     * register actions container\r\n     */\n  registerActions: function registerActions(actions) {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (actions) {\n      form.actionController.buildActions(actions);\n    }\n  },\n\n  /*\r\n     * unregister children container\r\n     */\n  unregisterChildren: function unregisterChildren() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.unregisterChildren();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        form.unregisterRender(child);\n      }\n    }\n  },\n  /*\r\n     * Replace child\r\n     */\n  replaceChild: function replaceChild(element) {\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.uniqueId == element.properties.uniqueId) {\n        children.splice(i, 1);\n        children.splice(i, 0, element);\n        break;\n      }\n    }\n  },\n  /*\r\n     * Gets child\r\n     */\n  getChildById: function getChildById(id) {\n\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.id == id) {\n        return child;\n      }\n    }\n\n    return null;\n  },\n\n  /**\r\n      * Restore appearance of container\r\n      * @param data\r\n      */\n  restoreContainerAppearance: function restoreContainerAppearance(data) {\n    var self = this;\n\n    self.restoreAppearance();\n\n    (data.elements || []).forEach(function (element) {\n      if (element.container) {\n        self.restoreContainerAppearance(element.container);\n      } else if (element.render) {\n        self.restoreElementAppearance(element.render);\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore appearance of control\r\n      * @param data\r\n      */\n  restoreElementAppearance: function restoreElementAppearance(data) {\n    var self = this;\n    var element = self.getChildById(data.properties.id);\n\n    if (!!element) element.restoreAppearance();\n  },\n\n  /**\r\n      * Save visual changes of children\r\n      * @param data\r\n      */\n  saveChildrenVisualChanges: function saveChildrenVisualChanges(data) {\n    var self = this;\n    self.childrenVisualChanges = self.childrenVisualChanges || {};\n\n    (data.children || []).forEach(function (element) {\n      var type = element.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n        self.saveChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore visual changes of children\r\n      * @param data\r\n      */\n  restoreChildrenVisualChanges: function restoreChildrenVisualChanges(data) {\n    var self = this;\n\n    (data.children || []).forEach(function (element) {\n\n      var type = element.getElementType();\n      var visualChanges = self.childrenVisualChanges && self.childrenVisualChanges[element.properties.id] || {};\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        element.visualChanges = visualChanges;\n        self.restoreChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        element.visualChanges = visualChanges;\n      }\n\n    });\n\n    delete self.childrenVisualChanges;\n  } });","/*\r\n*   Name: BizAgi Tablet Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.container.extend(\"bizagi.rendering.container\", {}, {});","/*\r\n *   Name: Bizagi Render Base Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a base render class with common stuff related to all renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.render.base\", {}, {\n\n  /**\r\n                                                      * Method to process the render the layout\r\n                                                      * @param {boolean} isLabelFormat\r\n                                                      * @param {string} format\r\n                                                      */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var properties = this.properties;\n\n    if (typeof isLabelFormat !== \"boolean\") {\n      console.warm(\"error calling processLayout, 'isLabelFormat' is not boolean\");\n      return;\n    }\n\n    if (isLabelFormat) {\n      this.processLabelLayout(format);\n    } else {\n      this.processControlLayout(format);\n\n      // Set required and visiblity\n      properties.required = typeof properties.required !== \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n      var visible = typeof properties.visible !== \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n      if (properties.required) {\n        this.changeRequired(properties.required);\n      }\n\n      if (!visible) {\n        this.changeVisibility(visible);\n      }\n    }\n  },\n\n  /**\r\n      * Method to process the label in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processLabelLayout: function processLabelLayout(format) {\n    var $label = this.getLabel();\n    if ($label == null) return;\n\n    // Set customizations\n    format = format || {};\n    if (typeof format.bold === \"undefined\") {\n      format.bold = true; // Default value\n    }\n\n    this.changeBackgroundColor(format.background).\n    changeFontColor($label, format.color).\n    changeFontBold($label, format.bold).\n    changeFontSize($label, format.size).\n    changeFontItalic($label, format.italic).\n    changeTextDecoration($label, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Method to process the control in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processControlLayout: function processControlLayout(format) {\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    // Set customizations\n    format = format || {};\n\n    this.changeFontColor($elements, format.color).\n    changeFontBold($elements, format.bold).\n    changeFontItalic($elements, format.italic).\n    changeFontSize($elements, format.size).\n    changeTextDecoration($elements, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $label = this.getLabel();\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    return this.\n    changeFontColor($label, color).\n    changeFontColor($elements, color);\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} $element\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeFontColor: function changeFontColor($element, color) {\n    if ($element === undefined) return this;\n    if (color === undefined) return this;\n\n    var style = color !== \"none\" ? color : \"\";\n    $element.css(\"color\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font size property\r\n      * @param {} $element\r\n      * @param {} size\r\n      * @returns {}\r\n      */\n  changeFontSize: function changeFontSize($element, size) {\n    if (size === undefined) return this;\n    if ($element === undefined) return this;\n\n    if (size !== \"0\") {\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      $element.css(\"font-size\", newFontSize);\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font italic style\r\n      * @param {} $element\r\n      * @param {} italic\r\n      * @returns {}\r\n      */\n  changeFontItalic: function changeFontItalic($element, italic) {\n    var style = bizagi.util.parseBoolean(italic) ? \"italic\" : \"normal\";\n\n    $element.css(\"font-style\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font weight\r\n      * @param {} $label\r\n      * @param {} bold\r\n      * @returns {}\r\n      */\n  changeFontBold: function changeFontBold($label, bold) {\n    var style = bizagi.util.parseBoolean(bold) ? \"bold\" : \"normal\";\n\n    $label.css(\"font-weight\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.css(\"background-color\", color);\n    } else {\n      this.element.css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render cell background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    return this.getCellBackgroundFunction(this.properties.editable.toString(), this.properties.type)(color);\n  },\n\n  getCellBackgroundFunction: function getCellBackgroundFunction(editable, type) {\n    var options = {\n      'true': { //editable\n        'columnDate': this.changeInputBackgroundColor.bind(this) },\n\n      'false': { //no editable\n        'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n      },\n      'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n    };\n\n    return options[editable][type] || options['default'];\n  },\n\n  changeInputBackgroundColor: function changeInputBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", color);\n    } else {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel() {\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * \r\n      */\n  getRTLAlign: function getRTLAlign(align) {\n    if (typeof align == \"undefined\" || align == \"\") {\n      return \"default\";\n    }\n    return align;\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultLabelAlign: function getDefaultLabelAlign() {\n    return \"default\";\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultValueAlign: function getDefaultValueAlign() {\n    return \"default\";\n  } });","/*\r\n*   Name: BizAgi Tablet Render Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the render class to adjust to tablet devices\r\n*/\n\nbizagi.rendering.render.extend(\"bizagi.rendering.render\", {}, {\n\n  /*\r\n                                                                *   Update or init the element data\r\n                                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var formContainer = self.getFormContainer();\n    self.formParams = formContainer.getParams();\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    // Call base\n    self.configureHelpText();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var container = self.getControl();\n\n    // Call base\n    self._super();\n    self.configureHelpText();\n\n    // Add styles readonly controls\n    container.addClass(\"bz-rn-read-only\");\n    container.parent().addClass(\"bz-rn-read-only\");\n  },\n\n  configureHelpText: function configureHelpText() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties && properties.helpText && properties.helpText !== \"\") {\n      var containerHelp = self.getContainerHelpText();\n\n      if (containerHelp) {\n        $(containerHelp).helpText({ helpText: properties.helpText, dir: properties.orientation });\n      }\n    }\n  },\n\n  /*\r\n     *   Template method to get the label element\r\n     */\n  getLabel: function getLabel() {\n    var self = this;\n    if (!self.label) {\n      var label = $(\".ui-bizagi-label\", self.element || self.observableElement);\n      if (label.length > 0) {\n        self.label = label;\n      }\n      return label;\n    }\n    return self.label;\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control.length === 0) {\n      self.control = $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n    return self.control;\n  },\n\n  /*\r\n     *   Template method to get the control filler element\r\n     */\n  getControlFiller: function getControlFiller() {\n    var self = this;\n    if (!self.controlFiller) {\n      self.controlFiller = $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n    return self.controlFiller;\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startLoading: function startLoading() {\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endLoading: function endLoading() {\n  },\n\n  /*\r\n     *   Return the right display option class\r\n     */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    // Set display type\n    if (displayType == \"normal\" ||\n    displayType == \"both\") {\n      return \"ui-bizagi-render-display-normal\";\n\n    } else if (displayType == \"vertical\") {\n      return \"ui-bizagi-render-display-vertical\";\n\n    } else if (displayType == \"reversed\") {\n      return \"ui-bizagi-render-display-reversed\";\n\n    } else if (displayType == \"verticalReversed\") {\n      return \"ui-bizagi-render-display-vertical-reversed\";\n\n    } else if (displayType == \"label\") {\n      return \"ui-bizagi-render-display-label\";\n\n    } else if (displayType == \"value\") {\n      return \"ui-bizagi-render-display-value\";\n    }\n  },\n\n  /*\r\n      *   Transform the display type when using RTL orientation\r\n      */\n  getRTLDisplayType: function getRTLDisplayType(displayType) {\n    return displayType;\n  },\n\n  /*\r\n     *   Customizes render display type with custom css classes\r\n     */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    var self = this,\n    el = self.element;\n\n    // Clean old display type\n    el.removeClass(\"ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed\").\n    removeClass(\"ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value\");\n\n    el.addClass(self.getDisplayOptionClass(displayType));\n  },\n\n  /*\r\n     *   Return the right align class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    // Set label align\n    if (alignType == \"left\") {\n      return \"ui-bizagi-render-align-left\";\n    } else if (alignType == \"center\") {\n      return \"ui-bizagi-render-align-center\";\n    } else if (alignType == \"right\") {\n      return \"ui-bizagi-render-align-right\";\n    }\n  },\n\n  /*\r\n     *   Customizes render label align\r\n     */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    var self = this;\n\n    // Get label\n    var label = self.getLabel();\n\n    // Remove old label align\n    label.removeClass(\"ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right\");\n\n    // Set label align\n    label.addClass(self.getAlignClass(alignType));\n  },\n\n  /*\r\n     *   Customizes render value align\r\n     */\n  changeValueAlign: function changeValueAlign(alignType) {\n    var self = this;\n\n    // Get control\n    var controlFiller = self.getControlFiller();\n\n    // Remove old value align\n    controlFiller.removeClass(\"ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right\");\n\n    // Set value align\n    controlFiller.addClass(self.getAlignClass(alignType));\n  },\n\n  /*\r\n     *   Customizes render label and value width\r\n     */\n  customizeRenderWidth: function customizeRenderWidth() {\n    var self = this;\n    var label = self.getLabel();\n    var properties = self.properties;\n    var controlFiller = self.getControlFiller();\n\n    // Read values\n    // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\n    var labelWidth = properties.labelWidth ? properties.labelWidth != \"0\" ? properties.labelWidth : \"50%\" : null;\n    var valueWidth = properties.valueWidth ? properties.valueWidth != \"0\" ? properties.valueWidth : \"50%\" : null;\n\n    // Normalize percentages\n    if (labelWidth && !valueWidth) {\n      labelWidth = bizagi.util.percent2Number(labelWidth);\n      valueWidth = 100 - labelWidth;\n\n    } else if (!labelWidth && valueWidth) {\n      valueWidth = bizagi.util.percent2Number(valueWidth);\n      labelWidth = 100 - valueWidth;\n\n    } else {\n      labelWidth = bizagi.util.percent2Number(labelWidth);\n      valueWidth = bizagi.util.percent2Number(valueWidth);\n\n      // Check 100% percentage\n      if (labelWidth + valueWidth != 100) {\n        valueWidth = 100 - labelWidth;\n      }\n    }\n\n    // Now apply width\n    label.width(labelWidth + \"%\");\n    controlFiller.width(valueWidth - 0.01 + \"%\");\n  },\n\n  /*\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  submitOnChange: function submitOnChange(data, bRefreshForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    bizagi.util.tablet.startLoading();\n\n    $.when(self.isReadyToSave()).done(function () {\n      $.when(self.internalSubmitOnChange(data, bRefreshForm)).\n      done(function () {\n        defer.resolve();\n      }).fail(function () {\n        defer.reject();\n      }).always(function () {\n        bizagi.util.tablet.stopLoading();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n      *   Template method to get the control element\r\n      */\n  getContainerHelpText: function getContainerHelpText() {\n    var self = this;\n\n    if (!self.containerHelpText)\n    self.containerHelpText = $(\".bz-container-rn-helptext\", self.element || self.observableElement);\n\n    if (!self.containerHelpText || self.containerHelpText.length === 0)\n    return null;\n\n    return self.containerHelpText;\n  },\n\n  /* \r\n     *   Adds a validation message to the render\r\n     */\n  setValidationMessage: function setValidationMessage(message) {\n    var self = this;\n\n    // Call base\n    self._super(message);\n\n    // Wait until element is ready\n    $.when(self.ready()).\n    done(function () {\n      var control = self.getControl();\n\n      if (message && message.length > 0) {\n\n        // Check if this is the first element\n        var bFirstElement = self.element.prev().length === 0 && self.parent === self.getFormContainer();\n\n        // Remove html tags\n        message = message.replace(/<\\w+>([^<]*)<\\/\\w+>/g, \"$1\");\n        control.attr(\"data-error\", message);\n        control.addClass(bFirstElement ? \"ui-bizagi-render-error-firstControl\" : \"ui-bizagi-render-error\");\n\n      } else {\n        if (control) {\n          control.attr(\"data-error\", \"\");\n          control.removeClass(\"ui-bizagi-render-error\");\n          control.removeClass(\"ui-bizagi-render-error-firstControl\");\n        }\n      }\n    });\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var result = this.getValue();\n    var readOnlyValue = \"\";\n\n    if (bizagi.util.isObject(result) && typeof result.value !== \"undefined\") {\n      readOnlyValue = result.value;\n    } else if (!bizagi.util.isEmpty(result)) {\n      readOnlyValue = result;\n    }\n\n    return readOnlyValue;\n  },\n\n  /*\r\n      *   Method to process the render the layout\r\n      */\n  processLayout: function processLayout(isLabelFormat, format) {\n    this._super(isLabelFormat, format);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel() {\n    var self = this;\n\n    if (self.properties.required) {\n\n      if (!self.checkRequired([])) {\n        $(\"div.ui-bizagi-render-control-required\", self.getControl()).show();\n      } else {\n        $(\"div.ui-bizagi-render-control-required\", self.getControl()).hide();\n      }\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n    //Remove the required div from the dom in order to have only one any time\n    controlElement.find(\".ui-bizagi-render-control-required\").remove();\n    var properties = self.properties;\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument)) {\n      labelElement.text((properties.displayName || \"\") + \" \");\n\n      if (!self.hasValue()) {\n        controlElement.prepend(\"<div class='ui-bizagi-render-control-required'></div>\");\n      } else {\n        controlElement.prepend(\"<div class='ui-bizagi-render-control-required' style='display: none'></div>\");\n      }\n    } else {\n      labelElement.text(properties.displayName || \"\"); //+ ' :'\n    }\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var editable = bizagi.util.parseBoolean(argument);\n\n    self._super(argument);\n\n    var renderedElement = self.getRenderedElement();\n\n    if (renderedElement)\n    renderedElement.toggleClass(\"bz-rn-non-editable\", !editable).toggleClass(\"bz-rn-read-only\", !editable);\n  },\n\n  /**\r\n     * in mobiles, don't apply styles to icon's elements\r\n     */\n  getElementsToStylize: function getElementsToStylize(context) {\n    context = $(\"*:not(.bz-mo-icon):not(.bz-rn-container-control-icon):not(.bz-rn-upload-show-menu):not(.ui-bizagi-render-yesno)\", $(context));\n    return context;\n  },\n\n  getFormParams: function getFormParams() {\n    return this.formParams || {};\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"input\").filter(function (index, ele) {\n      return ele.type !== \"file\" && ele.type !== \"radio\" && ele.type !== \"checkbox\";\n    });\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else {\n      self.setDisplayValue(\"\");\n    }\n  } });","/**\r\n * Render a new type of form called template\r\n *\r\n * @author Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.formTemplate\", {\n\n  /**\r\n                                                   *   Constructor\r\n                                                   */\n  init: function init(params) {\n    this._super(params);\n    if (params.paramsRender && params.paramsRender.contextEvent) {\n      self.contextEvent = params.paramsRender.contextEvent;\n    }\n  },\n\n  /**\r\n      * Process controls on template\r\n      * @param template\r\n      * @param controls\r\n      * @return {*}\r\n      */\n  processTemplate: function processTemplate(template, controls) {\n    var regexControl = /\\{\\{([\\w:]*)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\})\\}\\}/g;\n    var regexRepeater = /\\{\\{(((repeater)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\}))|([\\/repeater]+:item)|(\\/repeater)|(repeater)|(separator))\\}\\}/g;\n\n    // Remove all repeaters key words\n    var processedTemplate = template.replace(regexRepeater, \"\");\n\n    // replace controls\n    processedTemplate = processedTemplate.replace(regexControl, function (match, g1, g2, offset, string) {\n      var parameters = JSON.parse(g2);\n\n      return controls[parameters.id] || '';\n    });\n\n    processedTemplate = processedTemplate.replace(/{{([\\w:]*)\\s*}}/g, function () {\n      return '';\n    });\n\n\n    return processedTemplate;\n  },\n\n  /**\r\n      * Render layout container\r\n      * @return {*}\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var layoutCollection = self.getRenderByType(\"layout\");\n    var layout = layoutCollection.length > 0 ? layoutCollection[0] : {};\n    var template = typeof layout.getTemplate == \"function\" ? layout.getTemplate() : \"\";\n    var css = typeof layout.getCss == \"function\" ? layout.getCss() : \"\";\n    var mode = self.getMode();\n    var layoutGuid = self.properties.layoutguid || Math.guid();\n\n    var controls = {};\n\n    /**\r\n                        * Render all elements within first layout container\r\n                        */\n    if (layout.children) {\n      $.each(layout.children, function (i, child) {\n        // ignore layoutPlaceholder control in execution\n        if (!(mode == 'execution' && child.properties.type == 'layoutPlaceholder')) {\n\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            controls[child.properties.id] = child.renderElement();\n          }\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            controls[child.properties.id] = child.renderContainerHtml();\n          }\n          self.childrenHash[child.properties.uniqueId] = child;\n        }\n      });\n    }\n\n    // Load css\n    bizagi.util.loadStyle(css, layoutGuid);\n\n    return self.processTemplate(template, controls);\n  },\n\n  /**\r\n      * Get the context in which loads the formTemplate\r\n      *\r\n      */\n  getContextEvent: function getContextEvent() {\n    return self.contextEvent;\n  } });","$.Class.extend(\"bizagi.rendering.layout\", {}, {\n\n  /**\r\n                                                 * Get html template\r\n                                                 * @return {*}\r\n                                                 */\n  getTemplate: function getTemplate() {\n    var self = this;\n    var mode = self.getMode();\n    var html = self.properties.html || \"\";\n\n    // Add a container, this is important in design to calculate the scroll \n    if (mode == 'design' && html) {\n      html = \"<div class='bz-design-template'>\" + html + \"</div>\";\n    }\n\n    return bizagi.util.stripslashes(html);\n  },\n\n  /**\r\n      * Get string css of layout container\r\n      * @return {*}\r\n      */\n  getCss: function getCss() {\n    var self = this;\n    var css = self.properties.css || \"\";\n\n    var mode = self.getMode();\n    if (mode == \"design\") {\n      css = css && css.desktop;\n    }\n\n    return bizagi.util.stripslashes(css);\n  },\n\n\n  /*\r\n      *   Template method to process each jquery object\r\n      *   must be overriden in each container\r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  } });","/*\r\n*   Name: BizAgi Accordion Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordion\", {}, {\n\n  /*\r\n                                                   *   Constructor\r\n                                                   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Enumerate the children appending a property\n    $.each(self.children, function (i, child) {\n      child.properties.ordinal = i;\n    });\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"accordion\");\n\n    // Render the accordion\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: BizAgi Accordion Item Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion item class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordionItem\", {}, {\n\n  /*\r\n                                                       *   Render the container layout\r\n                                                       */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"accordionItem\");\n\n    // Render the accordionItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      ordinal: properties.ordinal,\n      displayName: properties.displayName,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Fires when the accordionItem is selected \r\n     */\n  activate: function activate() {\n    var self = this;\n    self.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  } });","/*\r\n*   Name: Bizagi Render CollectionNavigator\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for collection navigator renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.collectionnavigator\", {}, {\n\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    self._super(params);\n\n    var properties = self.properties;\n    properties.allowAdd = typeof properties.allowAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.allowAdd) : true;\n    properties.withAddForm = properties.withAddForm && properties.allowAdd;\n    properties.allowEdit = typeof properties.allowEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.allowEdit) : true;\n    properties.withEditForm = properties.withEditForm && properties.allowEdit;\n    properties.allowDetail = typeof properties.allowDetail != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.inlineAdd = typeof properties.inlineAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineAdd) : true;\n    properties.inlineAdd = properties.inlineAdd && properties.allowAdd;\n    properties.inlineEdit = typeof properties.inlineEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineEdit) : true;\n    properties.inlineEdit = properties.inlineEdit && properties.allowEdit;\n    properties.allowDelete = typeof properties.allowDelete != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n\n    self.orientation = self.properties.orientation || \"ltr\",\n    self.data = self.properties.data;\n    self.keys = self.data ? self.getKeys(self.data.rows) : [];\n    self.pointer = 0;\n    self.totalRows = 0;\n    self.inlineAddRecords = [];\n\n    if (self.data) {\n      self.totalRows = self.data.rows.length;\n    }\n  },\n  /*\r\n     * Normalize keys\r\n     */\n  getKeys: function getKeys(rows) {\n    rows = rows || [];\n    var keys = [];\n\n    for (var i = 0, l = rows.length; i < l; i++) {\n      var row = rows[i];\n      keys.push(row[0]);\n    }\n    return keys;\n  },\n\n  /*\r\n     *   Render the control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var templateItem = \"collectionnavigator\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var mode = self.getMode();\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId,\n      displayName: properties.displayName ? properties.displayName : \"\",\n      id: properties.id,\n      guid: properties.guid,\n      showPreview: self.showPreview(),\n      mode: mode,\n      orientation: self.getFormContainer().properties.orientation });\n\n\n    html = self.drawControls(html);\n\n    return html;\n  },\n\n  /*\r\n     * Render version readonly of control\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /*\r\n     * Draw navigation controls\r\n     */\n  drawControls: function drawControls(html) {\n\n  },\n\n  /*\r\n     *  render several actions in the navigation palete\r\n     *  ex. save, cancel \r\n     */\n  drawActions: function drawActions(controls) {\n\n  },\n\n  /*\r\n     * Render navigation controls (next, previous, last, first. etc )\r\n     */\n  drawControl: function drawControl(controls) {\n\n  },\n\n  /*\r\n     * Draw forms options (add form, edit form, navigation form)\r\n     */\n  drawForms: function drawForms(controls) {\n\n  },\n\n  /*\r\n     * Draw a preview views, it will be show when the collection hasn't records\r\n     */\n  drawPreview: function drawPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var templateItem = mode === \"execution\" ? \"collectionnavigator-execution\" : \"collectionnavigator-preview\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var html = $.tmpl(template);\n\n    self.canvas.append(html);\n\n  },\n\n  /*\r\n     * Returns true if the collection has data\r\n     */\n  hasData: function hasData() {\n    return this.getTotalRows() > 0;\n  },\n\n  /*\r\n     * Returns the key of current row\r\n     */\n  getRow: function getRow() {\n    return this.keys[this.pointer];\n  },\n\n  /*\r\n     * Returns the key of next row\r\n     */\n  getNextRow: function getNextRow() {\n    var self = this;\n\n    if (self.getTotalRows() > self.pointer + 1)\n    self.pointer += 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of previous row\r\n     */\n  getPreviousRow: function getPreviousRow() {\n    var self = this;\n\n    if (self.pointer > 0)\n    self.pointer -= 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of first row\r\n     */\n  getFirstRow: function getFirstRow() {\n    var self = this;\n\n    self.pointer = 0;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of last row\r\n     */\n  getLastRow: function getLastRow() {\n    var self = this;\n\n    self.pointer = self.keys.length - 1;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the total numbers of rows in collection\r\n     */\n  getTotalRows: function getTotalRows() {\n    return this.keys.length;\n  },\n\n  getIndexes: function getIndexes() {\n    return this.properties.data.rows;\n  },\n\n  /*\r\n     * Sets the pointer to a specific position\r\n     */\n  setPointer: function setPointer(index) {\n    this.pointer = index - 1;\n  },\n\n  /*\r\n     * Returns true is there is a inline row pending to save\r\n     */\n  isTherePendingInlineRow: function isTherePendingInlineRow() {\n    return this.inlineAddRecords.length > 0;\n  },\n\n  /*\r\n     * Adds new row to collection\r\n     */\n  addKey: function addKey(newId) {\n    this.keys.push(newId);\n  },\n\n  /*\r\n     * Removes row in collection\r\n     */\n  removeKey: function removeKey() {\n    var self = this;\n    var index = self.pointer;\n\n    if (index >= 0) {\n      self.keys.splice(index, 1);\n\n      var totalRows = self.getTotalRows();\n      if (totalRows > 0 && index >= totalRows) {\n        self.setPointer(totalRows);\n      }\n    }\n  },\n\n  /*\r\n     * Returns true if the control should show the preview view\r\n     * ex. if the collection is empty \r\n     */\n  showPreview: function showPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    if (mode == \"execution\") {\n      return !self.hasData();\n    } else {\n      return !bizagi.util.parseBoolean(properties.navigationform);\n    }\n  },\n\n  /*\r\n     * Returns the parameters needed for the request\r\n     */\n  getParameters: function getParameters(params) {\n    var self = this;\n\n    var parameters = {};\n    var properties = self.properties;\n    var recordXpath = properties.xpath + \"[id=\" + params.id + \"]\";\n\n    parameters.idRender = properties.id;\n    parameters.recordXPath = recordXpath;\n    parameters.xpathContext = properties.xpathContext;\n    parameters.idPageCache = properties.idPageCache;\n    parameters.requestedForm = params.requestedForm;\n    parameters.contextType = properties.contextType || properties.contexttype;\n    parameters.url = params.url;\n    parameters.editable = params.editable;\n    orientation: properties.orientation || \"ltr\";\n\n\n    return parameters;\n  },\n\n  /*\r\n     *   Submits a collection navigator add record request\r\n     *   Returns a deferred when done, the server returns an id for the new record\r\n     */\n  submitAddRequest: function submitAddRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n\n  /*\r\n     *   Submits a edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype || '',\n      orientation: properties.orientation || \"ltr\" });\n\n  },\n\n  /*\r\n     *   Submits a collection delete record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n\n  /*\r\n     *   Submits a collection navigator edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + \"[id=\" + id + \"]\" : properties.xpath + \"[id=\" + id + \"]\";\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      if (!bizagi.util.isEmpty(data)) {\n        data.idPageCache = data.idPageCache || self.form.getPageCache();\n        self.dataService.saveGridRecord({\n          url: properties.saveUrl,\n          idRender: properties.id,\n          xpath: properties.xpath,\n          xpathContext: xpathContext,\n          contexttype: properties.contextType || properties.contexttype || \"\",\n          submitData: data }).\n        done(function (response) {\n          defer.resolve(response);\n        }).fail(function (dataFail) {\n          var form = self.getFormContainer();\n          var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n          //Convert String to object\n          if (typeof message == \"string\") {\n            try {\n              message = JSON.parse(message).message;\n            } catch (e) {\n              message = message.match(/\"message\":(.*)\",/)[0];\n              message = message.substr(11, message.length - 13);\n            }\n\n          } else if (!message.message) {\n            message = dataFail;\n          }\n          form.validateForm();\n          form.clearValidationMessages();\n          form.addValidationMessage(message);\n        });\n      } else {\n        defer.resolve();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Submits a collection navigator rollback request\r\n     *   Returns a deferred when done\r\n     */\n  submitRollbackRequest: function submitRollbackRequest(error) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: error.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache });\n\n\n\n    return self.dataService.getData(params);\n  },\n\n  isValid: function isValid(invalidElements) {\n    var form = this.form;\n\n    if (typeof form !== \"undefined\") {\n      (form.children || []).forEach(function (child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            if (!child.isValid(invalidElements)) {\n              var content = invalidElements[invalidElements.length - 1];\n              invalidElements[invalidElements.length - 1] = $.extend(content, {\n                id: child.properties.id });\n\n            }\n          }\n        }\n      });\n    }\n\n    return invalidElements.length === 0;\n  },\n\n  validateControls: function validateControls(invalidElements) {\n    if (!this.form) return false;\n    return this.form.validationController.performValidations(invalidElements);\n  } });","/*\r\n*   Name: Bizagi Group Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a group container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.group\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property \n    properties.cssclass = properties.cssclass || \"cssClassContainer\";\n\n    properties.collapse = typeof properties.collapse != \"undefined\" && bizagi.util.parseBoolean(properties.collapse) ? true : false;\n  },\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"group\");\n\n    // Define icons\n    self.expandedIcon = self.getExpandedIcon();\n    self.collapsedIcon = self.getCollapsedIcon();\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      expandedClassIcon: self.expandedIcon,\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      collapse: properties.collapse,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      cssclass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Returns the expanded icon\r\n     */\n  getExpandedIcon: function getExpandedIcon() {},\n\n  /*\r\n                                                  *   Returns the collapsed icon\r\n                                                  */\n  getCollapsedIcon: function getCollapsedIcon() {},\n\n  /* \r\n                                                    *   Expands or collapse the container \r\n                                                    */\n  toogleContainer: function toogleContainer(argument, bImmediate) {} });","/*\r\n *   Name: Bizagi Section Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a section container class for all devices\r\n */\n\n$.Class.extend(\n\"bizagi.rendering.section\",\n{},\n{\n  /**\r\n   * Constructor\r\n   * @param {object} params - section information\r\n   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n    properties.displayAs = properties.displayAs || \"section\";\n  },\n\n  /**\r\n      * Render the trigger of the section.\r\n      * @returns string with html code.\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = this.renderFactory.getTemplate(\"section-header\");\n\n    // Render the section trigger\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      guid: properties.guid });\n\n    this.sectionContent = $(this.renderSectionContent())[0];\n    return html;\n  },\n\n  /**\r\n      * Render the content of the section.\r\n      * Overwritable on devices.\r\n      */\n  renderSectionContent: function renderSectionContent() {},\n\n  /**\r\n                                                             * Return the breadcrumb of the section.\r\n                                                             * @returns An array with breadcrumb. For example: [\"activity\", \"parent section\", \"child section\"]\r\n                                                             */\n  getBreadcrumb: function getBreadcrumb() {\n    var container = this;\n    var breadCrumb = [];\n\n    while (container) {\n      var properties = container.properties || {};\n      var params = container.params || {};\n\n      if (properties.type === \"section\") {\n        var displayName = properties.displayName ? properties.displayName : \"\";\n        breadCrumb.unshift(displayName);\n      } else if (params.type === \"form\") {\n        breadCrumb.unshift(this.getResourceByKey(\"render-section-breadcrumb-main-form\", \"Main form\"));\n      }\n      container = container.parent;\n    }\n    return breadCrumb;\n  },\n\n  /**\r\n      * Gets the display name of the previous section or form.\r\n      * @returns String with the display name\r\n      */\n  getParentDisplayName: function getParentDisplayName() {\n    var self = this;\n    var parent = self.getSectionParent(self.parent);\n    var displayName = \"\";\n\n    //TODO Improve this code implementation \n    if (parent.properties.type == \"form\") {\n      if (parent.properties.formtype && parent.properties.formtype == \"startform\") {\n        displayName = parent.params && parent.params.originalParams && parent.params.originalParams.displayName ? parent.params.originalParams.displayName : \"\";\n      } else\n      {\n        displayName = parent.properties.displayName || parent.params.displayName || parent.params.radNumber || parent.params.idCase;\n      }\n    } else {\n      displayName = parent.properties.displayName || \"\";\n    }\n\n    return displayName;\n  },\n\n  /**\r\n      * Gets the section's parent.\r\n      * @returns Object parent\r\n      */\n  getSectionParent: function getSectionParent(parent) {\n    if (parent.properties.type === \"section\" || !parent.parent) {\n      return parent;\n    } else {\n      return this.getSectionParent(parent.parent);\n    }\n  },\n\n  /**\r\n      * Gets if the section's  orientation is RTL.\r\n      * @returns Object\r\n      */\n  getSectionOrientationRTL: function getSectionOrientationRTL(obj) {\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"ltr\") return false;\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"rtl\") return true;\n    if (obj.parent) return this.getSectionOrientationRTL(obj.parent);\n    return false;\n  } });","/*\r\n*   Name: BizAgi Horizontal Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a tab item class for all devices\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.horizontal\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"horizontal\");\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.panel\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n\n    if (properties.type == \"nestedForm\") {\n      var formContainer = self.getFormContainer();\n      formContainer.rendersById[properties.idForm] = self;\n    }\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"panel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      loading: properties.loading,\n      message: properties.message,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssClass: properties.cssclass });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set height\n    if (properties.height) {\n      panel.height(properties.height);\n    }\n\n    // Call base\n    self._super(panel);\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.contentPanel\", {}, {\n\n  /*\r\n                                                      *   Constructor\r\n                                                      */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"contentPanel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      mode: self.getMode(),\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      cssClass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    // Call base\n    this._super(panel);\n  } });","/**\r\n *   Name: Bizagi Panel Container Class\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will define a panel container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.searchForm\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"searchForm\");\n\n    if (properties.contexttype !== \"entity\" && self.parent) {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n\n    // Render result\n    html = html.replaceFirstWithoutPatterns(\"{{result}}\", self.renderResult());\n\n    return html;\n  },\n\n  /*\r\n     *   Perform a search and render the results\r\n     */\n  performSearch: function performSearch(searchParams) {\n    var properties = this.properties;\n\n    // Set parameter to search\n    properties.searchParams = searchParams;\n\n    // Submit the search to the server\n    this.submitSearch();\n  },\n\n  /*\r\n     *   Submits the query to the server\r\n     */\n  submitSearch: function submitSearch() {\n    // Makes the results to update its contents\n    this.refreshResults();\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    return this.parent.ready();\n  },\n\n  /*\r\n     *   Method to fill the result data\r\n     *   (THIS IS CALLED WITHIN GRID RENDER SCOPE)\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Collect data\n    var data = self.collectSearchValues();\n\n    if (bizagi.util.isMapEmpty(data)) {\n      bizagi.showMessageBox(this.getResource(\"render-search-advanced-no-filters\"), this.getResource(\"render-form-dialog-box-search\"), \"error\");\n      return null;\n    }\n\n    params.rows = properties.searchParams && properties.searchParams.maxRecords && properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : params.rows;\n\n    // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)         \n    if (properties.searchParams && typeof properties.searchParams.maxRows !== \"undefined\") {\n      params.rows = properties.searchParams.maxRows || params.rows;\n    }\n\n    // Resolve with remote data\n    self.dataService.submitSearch($.extend(params, {\n      url: properties.dataUrl,\n      idRender: properties.idRender,\n      idPageCache: properties.idPageCache,\n      idSearchForm: properties.id,\n      allowFullSearch: properties.searchParams.allowFullSearch ? properties.searchParams.allowFullSearch : null,\n      maxRecords: properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : null,\n      criteria: data })).\n\n    done(function (response) {\n\n      // Resolve with fetched data    \n      properties.page = response.page;\n      properties.records = response.records;\n      properties.totalPages = response.totalPages || 0;\n\n      //In tablets are allowed about 10000 records as maximum\n      if (response.records > 10000) {\n        properties.deviceMaxRecordsExceeded = true;\n        response.deviceMaxRecordsExceeded = true;\n      } else {\n        delete properties.deviceMaxRecordsExceeded;\n      }\n\n      defer.resolve(response);\n\n      // Call virtual method\n      self.onSearchFinished();\n    }).fail(function (errorObject) {\n      bizagi.showErrorAlertDialog = false;\n      if (errorObject.responseText) {\n        try {\n          var message = JSON.parse(errorObject.responseText).message;\n          bizagi.showMessageBox(message, \"\", \"error\");\n        } catch (e) {\n        }\n      }\n      defer.reject();\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     *   - Overriden because server needs this in array\r\n     */\n  collectSearchValues: function collectSearchValues() {\n    var self = this;\n\n    // Collect data\n    var data = {};\n    this.collectRenderValues(data);\n\n    // Changes to array\n    var submitArray = [];\n    for (key in data) {\n      var xpath = key;\n      var value = data[key];\n      var operation = self.getCriteriaOperation(self.getRender(xpath));\n      var criteriaData = {};\n      if (!bizagi.util.isEmpty(value)) {\n        criteriaData[\"xpath\"] = xpath;\n        criteriaData[\"value\"] = value;\n        criteriaData[\"operation\"] = operation;\n        submitArray.push(criteriaData);\n      }\n    }\n\n    return submitArray;\n  },\n\n  /*\r\n     *   This method find out the criterial operation to be executed according to\r\n     *   data type. Text renders use LIKE operation, but other data types such like\r\n     *   numerics use exact match operatiors\r\n     */\n  getCriteriaOperation: function getCriteriaOperation(render) {\n    var self = this;\n    var properties = self.properties;\n\n    var operation = \"EQUALS\";\n    if (render.properties.dataType == \"15\") {\n      if (typeof render.properties.typeSearch === \"undefined\" || render.properties.typeSearch === \"approx\") {\n        if (properties.allowFullSearch) {\n          operation = \"FULLLIKE\";\n        } else {\n          operation = \"LIKE\";\n        }\n      }\n    }\n    return operation;\n  },\n\n  /*\r\n     *   Render the result controls for the query\r\n     *   Resolved in each device\r\n     */\n  renderResult: function renderResult() {\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n  },\n\n  /*\r\n     *   Function to parse the dataType\r\n     */\n  parseAdditionalProperties: function parseAdditionalProperties(dataType) {\n\n    // Number\n    if (dataType == 1 || dataType == 2 || dataType == 3 ||\n    dataType == 4 || dataType == 6 || dataType == 7 ||\n    dataType == 10 || dataType == 11) {\n      return { type: \"columnNumber\" };\n    }\n\n    // Oracle Number\n    if (dataType == 29) {\n      return { type: \"columnNumberScientificNotation\" };\n    }\n\n    // Money\n    if (dataType == 8) {\n      return { type: \"columnMoney\" };\n    }\n\n    // Date\n    if (dataType == 12 || dataType == 13) {\n      return { type: \"columnDate\" };\n    }\n\n    // Boolean\n    if (dataType == 5) {\n      return { type: \"columnBoolean\" };\n    }\n\n    // Text\n    return { type: \"columnText\" };\n  },\n\n  /*\r\n     *\r\n     */\n  onSearchFinished: function onSearchFinished() {\n    // Empty function, overrided for Tablet version for now\n  } });","/*\r\n *   Name: BizAgi Tab Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a tab container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tab\", {}, {\n\n  /*\r\n                                              *   Constructor\r\n                                              */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Default properties\n    var properties = self.properties;\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property\n    properties.cssclass = properties.cssclass || \"\";\n  },\n\n  /*\r\n      *   Render the container layout\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var tabItems = $.map(self.children, function (child, key) {\n      child.properties.counter = key;\n      child.properties.tooltip = child.properties.tooltip || child.properties.displayName || \"\";\n      return child.properties;\n    });\n    var template = self.renderFactory.getTemplate(\"tab\");\n    var mode = self.getMode();\n\n    // Render the tab\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      tabs: tabItems,\n      mode: mode,\n      isDesign: self.getMode() !== \"execution\",\n      editable: properties.editable,\n      tabOrientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssclass: properties.cssclass });\n\n\n    // Get active container based on focus\n    var activeTab = self.activeTab = self.getActiveTab();\n\n    // Render children\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      self.children[i].properties.loadOnDemand = i != activeTab;\n    }\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n      *   Return the active tab containing the focus, or the first tab\r\n      */\n  getActiveTab: function getActiveTab() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = this.getFormContainer().getParams();\n    var mode = self.getMode();\n\n    if (mode === \"execution\") {\n      if (!formParams.isRefresh && properties.activeTab) {\n        self.getFormContainer().setFocusedElement(properties.activeTab);\n      }\n    }\n\n    var selectedTabs = formParams && formParams.selectedTabs ? formParams.selectedTabs : {};\n\n    // Fetch from selected tabs collection\n    if (selectedTabs[self.properties.id] >= 0) {\n      return selectedTabs[self.properties.id];\n    }\n\n    // Check for focused elements\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      if (self.children[i].containsFocusedElement()) return i;\n    }\n    return 0;\n  },\n\n  /**\r\n      * Update position of tab\r\n      * @param index\r\n      */\n  setActiveTab: function setActiveTab(index) {\n    var self = this;\n\n    self.triggerHandler(\"selected\", { index: index, tab: self.children[index] });\n\n    if (self.children[index]) {\n      var form = self.getFormContainer();\n\n      self.children[index].activate();\n      self.activeTab = index;\n\n      var selectedTab = {};\n      selectedTab[self.children[index].parent.properties.id] = index;\n      form.setParam(\"selectedTabs\", selectedTab);\n    }\n  } });","/**\r\n *   Name: Bizagi Tab Item Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a tab item class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tabItem\", {}, {\n\n  /*\r\n                                                 *   Render the container layout\r\n                                                 */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"tabItem\");\n\n    // Render the tabItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      uniqueId: properties.uniqueId,\n      counter: properties.counter,\n      tabOrientation: properties.orientation,\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    // Render content\n    html = self.renderTabContent(html);\n\n    return html;\n  },\n\n  /*\r\n     * Renders the tab content\r\n     */\n  renderTabContent: function renderTabContent(html) {\n    // Render children\n    return this.replaceChildrenHtml(html, this.renderChildrenHtml());\n  },\n\n  /*\r\n     *   Fires when the tab is selected \r\n     */\n  activate: function activate() {\n    this.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  },\n\n  /*\r\n     *   Return true if this tab contains the active focused element\r\n     */\n  containsFocusedElement: function containsFocusedElement() {\n    var self = this;\n    var focus = self.getFormContainer().getFocusedElement();\n\n    if (focus) {\n\n      // Locate element\n      if (focus.xpath) {\n        // Search by xpath and id\n        var elements = self.getFormContainer().getRenders(focus.xpath);\n        var element;\n\n        $.each(elements, function (i, item) {\n          // Just select editable control\n          if (item.properties.id == focus.id && item.properties.editable) {\n            element = item;\n          }\n        });\n      } else {\n        // Search just using id\n        var element = self.getFormContainer().getContainer(focus) || self.getFormContainer().getRenderById(focus);\n      }\n\n      // Search element parent\n      if (element) {\n        while (element.parent) {\n          if (element.properties.id == self.properties.id || element.parent.properties.id == self.properties.id) return true;\n          element = element.parent;\n        }\n      }\n    }\n\n    return false;\n  } });","/*\r\n*   Name: BizAgi Nested Form Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a nested form container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.nestedForm\", {}, {});","/**\r\n * Base definition of Action Launcher and Entity template controls\r\n *\r\n * @author: Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.actionLauncher\", {}, {\n\n  /*\r\n                                                         * Initialize the control with data provided\r\n                                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    if (mode == \"execution\") {\n      self.engine = new bizagi.templateEngine({\n        renderFactory: self.renderFactory,\n        cache: true,\n        autoGenerateData: false,\n        templateGuid: properties.selecttemplate });\n\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"ptags\": self.properties.tagslist || [],\n      \"pmaxitems\": self.properties.maxItems,\n      \"pactionXpath\": self.properties.xpathActions };\n\n\n    self.processPropertyValueDataTmplArgs = {\n      \"pactionXpath\": self.properties.xpathActions,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"ptemplateGuid\": properties.selecttemplate,\n      \"property\": \"dataTemplate\",\n      \"xpathActions\": self.properties.xpathActions };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    var defaultAllowActions = data.properties.type === \"entityTemplate\" ? false : true;\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ?\n    defaultAllowActions : data.properties.allowactions;\n    self.properties.isHorizontal = typeof data.properties.isHorizontal == \"undefined\" ?\n    true : data.properties.isHorizontal;\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ?\n    false : data.properties.allowSearch;\n    self.properties.selecttemplate = typeof data.properties.selecttemplate == \"undefined\" ?\n    \"\" : data.properties.selecttemplate;\n    self.properties.templatetype = typeof properties.templatetype != \"undefined\" ?\n    properties.templatetype : 'none';\n\n    self.properties.sessionId = form.params.data.sessionId;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteAction = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeAction\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidAction\": action.guidAction,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteAction).done(function (data) {\n      self.notifyExecution(data, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      * @param actionName\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher-design\");\n      var params = {\n        type: properties.type,\n        isHorizontal: properties.isHorizontal,\n        allowSearch: properties.allowSearch,\n        templateDefined: properties.templatetype != 'none',\n        allowactions: properties.allowactions };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    var value = self.getValue();\n    var bValid = false;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) {\n      return true;\n    }\n\n    // Check required\n    if (properties.required) {\n      if (self.value) {\n        if (self.value.length > 0)\n        return true;\n        message = self.getResource(\"render-required-register-action\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidProcess || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayName,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        // If it has additional xpath this action is a form of collection\n        if (action.xpathContext) {\n          $.when(self.processActionFormCollection(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        } else {\n\n          if (action.actionType === \"Form\") {\n            action.xpathContext = undefined;\n            action.contextType = \"entitytemplate\";\n            action.guidEntity = action.guidEntity || self.properties.guidEntity;\n          }\n\n          $.when(self.processActionForm(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        }\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity };\n\n        break;\n      case \"Rule\":\n        action.params = {\n          xpathActions: action.xpathActions || \"\",\n          recordXpath: recordXpath };\n\n        break;}\n\n\n    var newValueActionsList = bizagi.clone(actionsList);\n    newValueActionsList.push(action);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var newValueActionsList = bizagi.clone(self.getValue());\n    newValueActionsList.splice(index, 1);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidAction;\n\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n     * Normalize action launcher control properties\r\n     * @param actionsLaucher\r\n     * @returns {*}\r\n     */\n  getPropertiesActionLaucher: function getPropertiesActionLaucher(actionsLaucher) {\n    var self = this;\n    var form = self.getFormContainer();\n    /**\r\n                                         * The properties of actionLaucher have to 7 properties mandatory\r\n                                         * 0: guidProcess\r\n                                         * 1: displayName\r\n                                         * 2: title\r\n                                         * 3: actionType\r\n                                         * 4: guidaction\r\n                                         * 5: xpathContext\r\n                                         * 6: readOnlyForm: default: false\r\n                                         */\n    for (var i = 0, length = actionsLaucher.length, j = length; i < j; i += 1) {\n      //some ocassions server return 6 or 7 items\n      //return 6 properties when launch form action from action launcher control.\n      //in this case dont return xpathContext.\n      // So, add item position 5, simulate xpathContext empty.\n      if (actionsLaucher[i].length === 6) {\n        actionsLaucher[i].splice(5, 0, \"\");\n\n        if (actionsLaucher[i][3] == \"Process\" && form.properties.xpathContext) {\n          actionsLaucher[i][5] = form.properties.xpathContext;\n        }\n      }\n    }\n\n    return actionsLaucher;\n  } });","/**\r\n * Base definition of entity template\r\n *\r\n * @author: Andres Fernando Muñoz\r\n * based on action launcher control\r\n */\n$.Class.extend(\"bizagi.rendering.entityTemplate\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ? true : data.properties.allowactions;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate-design\");\n      html = $.fasttmpl(template, {});\n    } else\n    if (self.properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  } });","/**\r\n * Base definition of Polymorphic launcher\r\n *\r\n * @author: Edward J Morales\r\n */\n\n$.Class.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\n  /*\r\n                                                              * Constructor\r\n                                                              */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ? false : data.properties.allowSearch;\n    self.properties.additionalXpath = self.properties.additionalXpath || [];\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"ptags\": self.getTagList(self.properties.tagslist),\n      \"additionalXpaths\": self.properties.additionalXpath };\n\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteConstructor = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeConstructor\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidConstructor\": action.guidConstructor,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteConstructor).done(function (data) {\n      self.notifyExecution(data.response, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-design\");\n      var params = {\n        type: properties.type,\n        allowSearch: properties.allowSearch };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher\");\n      html = $.fasttmpl(template);\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidObject || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                         /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayNamee,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        $.when(self.processActionForm(action)).done(function (idStartScope) {\n          action.idStartScope = idStartScope;\n          def.resolve(action);\n        });\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        if (typeof action.idStartScope !== \"undefined\") {\n          action.params.idStartScope = action.idStartScope;\n        }\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity,\n          guidEntity: action.guidEntity };\n\n        break;\n      case \"Rule\":\n        //TODO\n        break;}\n\n\n    actionsList.push(action);\n    self.setValue(actionsList);\n    self.setDisplayValue(actionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var value = self.getValue();\n    value.splice(index, 1);\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidObject || value.guidAction;\n        action.displayName = value.displayName;\n        action.guidConstructor = value.guidConstructor;\n        action.actionType = value.actionType;\n        action.xpathContext = value.xpathContext;\n        action.guidEntity = value.guidEntity;\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n      * Get list of tags\r\n      * @param taglist\r\n      * @return {Array}\r\n      */\n  getTagList: function getTagList(taglist) {\n    taglist = taglist || [];\n    var result = [];\n\n    for (var i = taglist.length; i > 0; i--) {\n      result.push(taglist[i - 1].value);\n    }\n    return result.length > 0 ? result : \"\";\n  } });","/**\r\n *   Name: Bizagi Render Check Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for check renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.check\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n\n    properties.showLetters = bizagi.override && bizagi.override.enableCheck === true && !properties.editable;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"check\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmpty(value)) return false;\n\n    var booleanValue = bizagi.util.parseBoolean(value);\n\n    return !(booleanValue === false && this.properties.required);\n  } });","/*\r\n*   Name: Bizagi Render Number Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.number\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.setGroupDigits();\n    properties.colorize = properties.colorizeOnNegative || false;\n    properties.dataTypeMinValue = this.calculateMinValue(properties.dataType);\n    properties.dataTypeMaxValue = this.calculateMaxValue(properties.dataType);\n\n    if (typeof properties.value != \"undefined\" && /[e][-+]/gi.test(properties.value) && Math.abs(parseFloat(properties.value)) < 1) {\n      properties.value = self.value = parseFloat(properties.value).toFixed(properties.numDecimals);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"number\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      editable: self.properties.editable,\n      value: bizagi.isMobile() ? self.getDisplayValue() : \"\", // Only apply to mobile because in the template value is required (Bug: 11624)\n      type: bizagi.util.isAndroidDevice() ? \"tel\" : \"text\", // Change type control for android device\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self._super();\n\n    var control = self.getControl();\n    var properties = self.properties;\n\n    self.numericInput = control.find(\"input\");\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numeric(self.properties.decimalSymbol);\n\n    // Attach event for retype double\n    if (properties.retype === \"double\") {\n      self.attachRetypeDouble();\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Attach Format Currency Plugin to format the input\n    this.attachFormatCurrency();\n  },\n\n  /**\r\n      * Removes Validation Messages\r\n      */\n  removeValidations: function removeValidations() {\n    var form = this.getFormContainer().parent || this.getFormContainer();\n\n    form.clearValidationMessages();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,smartphone...).\r\n      * @returns {}\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n  formatNumericInput: function formatNumericInput($input) {\n    var self = this;\n    var properties = self.properties;\n    var message = bizagi.localization.getResource(\"render-number-retype-fail\");\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController == \"undefined\") {\n      var $canvas = form.getValidationsContainer();\n      form.validationController = new bizagi.command.controllers.validation(form, self.validations, $canvas);\n    }\n\n    var validationController = form.validationController || form.parent.validationController;\n    var decimalSeparator = \".\";\n    var digitGroupSeparator = \",\";\n\n    if (typeof BIZAGI_DEFAULT_CURRENCY_INFO == \"undefined\") {\n      decimalSeparator = self.getResource(\"numericFormat\").decimalSymbol || \".\";\n      digitGroupSeparator = self.getResource(\"numericFormat\").digitGroupSymbol || \",\";\n    } else\n    {\n      decimalSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator;\n      digitGroupSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator;\n    }\n\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (properties.percentage) self.numericInput.val(self.numericInput.val().replace(\"%\", \"\"));\n    var inputValue = self.numericInput.val();\n    inputValue = decimalSeparator == \",\" ? inputValue.replace(/\\,0+$/, '') : inputValue.replace(/\\.0+$/, '');\n    inputValue = inputValue.replace(properties.symbol, \"\");\n    //Replace all the ocurrences of the digitGroupSeparator\n    inputValue = bizagi.util.replaceAll(inputValue, digitGroupSeparator, \"\");\n    if (inputValue.toString().indexOf(decimalSeparator) != -1) {\n      if (decimalSeparator == \",\") inputValue = inputValue.replace(/([0-9]+(\\,[0-9]+[1-9])?)(\\,?0+$)/, '$1');\n      if (decimalSeparator == \".\") inputValue = inputValue.replace(/([0-9]+(\\.[0-9]+[1-9])?)(\\.?0+$)/, '$1');\n    }\n\n    if (inputValue != undefined && inputValue.length > 0) self.numericInput.val(inputValue);\n\n    if (/(.+)-$/.test(inputValue)) {\n      inputValue = inputValue.replace(/(.+)-$/, '-$1');\n      self.numericInput.val(inputValue);\n    }\n\n    var inputLength = inputValue.replace(/[^0-9]+/g, \"\").length;\n    var xPath = self.properties.xpath;\n    var oldVal = self.numericInput.val();\n\n\n    if (self.isInvalidFormat != null && self.isInvalidFormat == true ||\n    inputValue != \"\" && [\"$\", \"£\", \"€\", \"¥\", properties.symbol].indexOf(inputValue) != -1) {\n      self.setValue(\"\");\n      self.getControl().find(\"input\").val(\"\");\n      self.numericInput.val(\"\");\n      return;\n    }\n\n    if (bizagi.util.trim(inputValue) == \"\") {\n      self.setValue(\"\");\n      return;\n    }\n\n    //The \",\" is changed to \".\" For the correct operation of \"parseFloat ()\"\n    var tempValue = parseFloat(inputValue.replace(\",\", \".\"));\n    if (isNaN(tempValue)) {\n      tempValue = self.numericInput.asNumber();\n    }\n\n    if (minValue !== undefined && minValue != null && tempValue < minValue) {\n      message = bizagi.localization.getResource(\"render-numeric-minimum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#minValue#\", minValue.toString());\n    } else\n    if (maxValue !== undefined && maxValue !== null && tempValue > maxValue) {\n      message = bizagi.localization.getResource(\"render-numeric-maximum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#maxValue#\", maxValue.toString());\n    } else\n    message = message + \" \" + oldVal + \"\";\n\n\n    // Do datatype validations\n    if (\n    minValue !== undefined && minValue !== null && tempValue < minValue ||\n    maxValue !== undefined && maxValue !== null && tempValue > maxValue ||\n    self.properties.dataType == 10 && inputLength > 15 ||\n    self.properties.dataType == 1 && inputLength > 19 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    oldVal.match(/[^$£€¥,-.()\\d]/))\n    {\n      if (typeof validationController != \"undefined\" && validationController != null) {\n        self.removeValidations();\n\n        var messageToShow = message;\n        if (messageToShow.indexOf(oldVal) === -1) {\n          messageToShow = message + \" \" + oldVal + \"\";\n        }\n\n        validationController.showValidationMessage(messageToShow, xPath);\n        self.isValidRender = false;\n        self.isValidRenderMessage = messageToShow;\n      }\n      message = message.replace(oldVal, \"\");\n      return;\n    } else\n    {\n      self.isValidRender = true;\n      self.isValidRenderMessage = \"\";\n    }\n\n    // Fix decimals specially when it starts with 0 (0000234 -> 234, 00000 -> 0)\n    if ($input.value.toString().length > 0 && !properties.allowDecimals && !properties.groupDigits) {\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if (properties.symbol.length > 0) $input.value = $input.value.toString().replace(properties.symbol + \"0\", properties.symbol);\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if ($input.value.replaceAll('0', '').length == 0)\n      $input.value = properties.symbol + \"0\";else\n      if ($input.value.toString() == parseInt($input.value)) $input.value = properties.symbol + $input.value;\n    } else {\n      //Fix type money when number start with 0 (0000234 -> 234, 00000 -> 0)\n      if (self.properties.type === \"money\" || self.properties.type === \"number\" || self.properties.type === \"columnMoney\" || self.properties.type === \"columnNumber\") {\n        $input.value = $input.value.toString().replace(/^0+/, '');\n        if ($input.value === \"\") {\n          $input.value = 0;\n        }\n      }\n    }\n    self.executeFormatCurrencyPlugin();\n\n    // Updates internal value\n    self.setValue(self.numericInput.asNumber({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits }));\n\n\n    if (properties.percentage) {\n      if (self.numericInput && self.numericInput.val().indexOf(\"%\") == -1)\n      self.numericInput.val(self.numericInput.val() + '%');\n    }\n    message = message.replace(oldVal, \"\");\n\n  },\n  /**\r\n      * Adds the format currency plugin\r\n      * @returns {}\r\n      */\n  attachFormatCurrency: function attachFormatCurrency() {\n    var self = this;\n    var properties = self.properties;\n    self.isValidRender = self.isValidRender || true;\n\n    // Extend formatCurrency language\n    if ($.formatCurrency.regions[bizagi.language] == null)\n    $.formatCurrency.regions[bizagi.language] = this.getResource(\"numericFormat\");\n\n    // Attach events\n    self.numericInput.blur(function () {\n      self.formatNumericInput(this);\n    })\n\n    // Avoiding pasting invalid characters\n    .bind('paste', function (e) {\n      try {\n        var tmpData = bizagi.util.isIE() || bizagi.util.isIE11() ? window.clipboardData.getData(\"text\") : e.originalEvent.clipboardData.getData(\"Text\");\n\n\n\n        // Next lines checks if there is something different to numbers symbol, decimalSymbol and digitGroupSybol\n        var totalVal = \"/[^0-9\";\n        if (properties.decimalSymbol.length > 0) {\n          totalVal += properties.decimalSymbol;\n        }\n        // Next lines only for currency type\n        if (properties.dataType == 8) {\n          if (properties.symbol.length > 0) {\n            totalVal += properties.symbol;\n          }\n          if (properties.digitGroupSymbol.length > 0) {\n            totalVal += properties.digitGroupSymbol;\n          }\n        }\n        totalVal += \"\\\\-\\\\s]/gi\";\n        try {\n          if (tmpData.replace(eval(totalVal), '').length != tmpData.length)\n          e.preventDefault();\n        }\n        catch (e) {\n        }\n      }\n      catch (e) {\n        bizagi.log(\"Error to pasting content\");\n        self.isInvalidFormat = true;\n      }\n    })\n    // Now we implement keydown instead of keyup in order to include preventDefault\n    .keydown(function (e) {\n      self.previousValue = this.value;\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      // Validation for currency info\n      if (typeof BIZAGI_DEFAULT_CURRENCY_INFO != \"undefined\")\n      if (BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits == 0) properties.allowDecimals = false;\n      if (properties.dataType < 5 || properties.dataType == 8 && properties.allowDecimals == false)\n      if (keyUnicode == 188 || keyUnicode == 190 || keyUnicode == 110)\n      e.preventDefault();\n      if (this.value)\n      if (e !== undefined && this.value.length > 0 && (properties.dataType == 8 || properties.dataType == 10)) {\n        // Just numbers\n        if (keyUnicode > 47 && keyUnicode < 58) {\n          if (self.formatTimeout) {\n            clearTimeout(self.formatTimeout);\n          }\n\n          var floatPart = this.value + \"\";\n          //var  floatPart = stringPart.replaceAll(properties.digitGroupSymbol, \"\").replaceAll(properties.symbol,\"\").trim().replaceAll(properties.decimalSymbol,\".\");\n          if (properties.digitGroupSymbol && properties.digitGroupSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.digitGroupSymbol, \"\");\n          }\n          if (properties.symbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.symbol, \"\");\n          }\n\n          floatPart = $.trim(floatPart);\n          if (properties.decimalSymbol && properties.decimalSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.decimalSymbol, \".\");\n          }\n          // If increasing one digit (x10) will overtake the maxValue\n          if (floatPart * 10 > properties.dataTypeMaxValue) {\n            e.preventDefault();\n          }\n        } else\n        if (keyUnicode == 109 || keyUnicode == 189) {\n          if (this.selectionStart != 0 || this.selectionEnd != this.value.length) {\n            var currentPosition = this.selectionEnd;\n            this.value = properties.symbol + \"-\" + this.value.replace(properties.symbol, \"\");\n            this.selectionStart = this.selectionEnd = currentPosition + 1;\n          } else if (this.selectionStart == 0 && this.selectionEnd == this.value.length) {\n            this.value = \"-\";\n            this.selectionStart = this.selectionEnd = this.value.length;\n          }\n        }\n      }\n    }).\n\n    keyup(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (e !== undefined) {\n        switch (keyUnicode) {\n          case 16:\n            break; // Shift\n          case 17:\n            break; // Ctrl\n          case 13:\n            break; // Intro\n          case 18:\n            break; // Alt\n          case 27:\n            this.value = '';\n            break; // Esc: clear entry\n          case 35:\n            break; // End\n          case 36:\n            break; // Home\n          case 37:\n            break; // cursor left\n          case 38:\n            break; // cursor up\n          case 39:\n            break; // cursor right\n          case 40:\n            break; // cursor down\n          case 78:\n            break; // N (Opera 9.63+ maps the \".\" from the number key section to the \"N\" key too!) (See: http://unixpapa.com/js/key.html search for \". Del\")\n          case 110:\n            break; // . number block (Opera 9.63+ maps the \".\" from the number block to the \"N\" key (78) !!!)\n          case 188:\n            break; // , comma\n          case 190:\n            break; // .\n          default:\n            {\n\n            }}\n\n      }\n    }).keypress(function (e) {\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (typeof e !== \"undefined\") {\n        if (keyUnicode == 35 || keyUnicode == 37 || keyUnicode == 39) {\n          e.preventDefault();\n        } else if (properties.dataType != 8 && keyUnicode == 36) {\n          e.preventDefault();\n        }\n\n        // When no decimals are permited\n        var character = String.fromCharCode(keyUnicode);\n        if (properties.allowDecimals === false && properties.numDecimals === 0 && character === properties.decimalSymbol)\n        e.preventDefault();\n      }\n    });\n\n  },\n\n  executeFormatCurrencyPlugin: function executeFormatCurrencyPlugin() {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.numericInput) {\n      self.numericInput.formatCurrency({\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n\n    if (properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      var value = self.numericInput.val();\n      var positive = true;\n\n      if (value.indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var regExp = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(regExp, \"$1\");\n\n      regExp = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(regExp, \"\");\n      self.numericInput.val(value);\n\n      if (!positive) self.numericInput.val(\"(\" + value + \")\");\n    }\n\n    if (properties.percentage)\n    self.numericInput.val(self.numericInput.val() + '%');\n  },\n\n  /**\r\n      * Returns the display value of the render\r\n      * @returns {*}\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var value = self.getValue() !== undefined ? self.getValue() : $(\"input\", control).val() || \"\";\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n\n    label.formatCurrency({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize });\n\n\n    if (properties.percentage)\n    label = $('<label/>').html(label.text() + '%');\n\n    // Removing unrequired zeros as requested by BA26331\n    if (!properties.editable && properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      value = label.text();\n      var positive = true;\n\n      if (value.toString().indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var re = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(re, \"$1\");\n\n      re = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(re, \"\");\n\n      if (!positive) value = \"(\" + value + \")\";\n      return value;\n    }\n\n    return label.text();\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var message;\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (typeof value == \"string\" && value != \"\") {\n      value = Number(value);\n    }\n\n    // Check min value\n    if (self.hasValue()) {\n      if (!bizagi.util.isEmpty(minValue)) {\n        if (value < minValue) {\n          message = this.getResource(\"render-numeric-minimum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#minValue#\", minValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n      // Check max value\n      if (!bizagi.util.isEmpty(maxValue)) {\n        if (value > maxValue) {\n          message = this.getResource(\"render-numeric-maximum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#maxValue#\", maxValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n\n    }\n\n    if (self.isValidRender === false && !(bValid && bizagi.util.isMobileDevice())) {\n      bValid = false;\n      var validMessage = self.isValidRenderMessage ? self.isValidRenderMessage : \"error\";\n      invalidElements.push({ xpath: properties.xpath, message: validMessage });\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Get minimum value\r\n      * @returns {*}\r\n      */\n  getMinValue: function getMinValue() {\n    var minValue = this.properties.minValue;\n\n    if (minValue !== undefined && minValue !== null)\n    return minValue;\n\n    return this.properties.dataTypeMinValue;\n  },\n\n  /**\r\n      * Get maximum value\r\n      * @returns {*}\r\n      */\n  getMaxValue: function getMaxValue() {\n    var maxValue = this.properties.maxValue;\n\n    if (maxValue !== undefined && maxValue !== null)\n    return maxValue;\n\n    return this.properties.dataTypeMaxValue;\n  },\n\n  /**\r\n      * Return the allow decimals default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n      // Decimal and money data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Return the group digits default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n\n      // Decimal data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\r\n      * Return the group digits default property based on digitGroupSymbol\r\n      * @returns {*}\r\n      */\n  setGroupDigits: function setGroupDigits() {\n    var self = this;\n    if (typeof self.properties.thousands !== \"undefined\") {\n      if (self.properties.digitGroupSymbol) {//some cultures\n        return bizagi.util.parseBoolean(self.properties.thousands);\n      } else {\n        return false;\n      }\n    } else if (self.properties.digitGroupSymbol) {//some cultures\n      return this.getDefaultGroupDigits(self.properties.dataType);\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Calculate Minimum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMinValue: function calculateMinValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return -922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 0; // tinyint\n    }\n    if (dataType === 3) {\n      return -32768; // smallint\n    }\n    if (dataType === 2) {\n      return -2147483648; // int\n    }\n    if (dataType === 1) {\n      return -999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate Maximum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMaxValue: function calculateMaxValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return 922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 255; // tinyint\n    }\n    if (dataType === 3) {\n      return 32767; // smallint\n    }\n    if (dataType === 2) {\n      return 2147483647; // int\n    }\n    if (dataType === 1) {\n      return 999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMinValue: function performMinValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMinValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMaxValue: function performMaxValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMaxValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Changes the render minimum value\r\n      * @param value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var newValue = this.performMinValue(value);\n\n    this.properties.minValue = this.properties.dataTypeMinValue = newValue;\n  },\n  /**\r\n      * Changes the render maximum value\r\n      * @param value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var newValue = this.performMaxValue(value);\n\n    this.properties.maxValue = this.properties.dataTypeMaxValue = newValue;\n  },\n\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    try {\n      // Destroy tooltips\n      control.tooltip(\"destroy\");\n    } catch (e) {\n    }\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  } });","\n/*\r\n*   Name: Bizagi Render Number Scientific notation Class\r\n*   Author: Laura Ariza\r\n*   Comments:\r\n*   -   This script will define basic stuff for scientific notation numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.numberScientificNotation\", {\n  /*\r\n                                                               *   Update or init the element data\r\n                                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n  },\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"numberScientificNotation\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  /*\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    self.numericInput = control.find(\"input\");\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getValue().replace('.', self.properties.decimalSymbol);\n  },\n\n  setValue: function setValue(value) {\n    var self = this;\n    value = (value || '').toString().replace(self.properties.decimalSymbol, '.');\n    self._super(value);\n  },\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue() || \"\";\n    var compareValue = properties.originalValue || \"\";\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n    result = compareValue.toLowerCase() == value.toLowerCase() ? false : true;\n    return result;\n  } });","/**\r\n *   Name: Bizagi Render Hidden Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hiddens\r\n */\n\n$.Class.extend(\"bizagi.rendering.hidden\", {}, {\n\n  /**\r\n                                                 * Returns the in-memory processed element\r\n                                                 */\n  renderControl: function renderControl() {\n    if (this.getMode() === \"design\") {\n      return \"<div>\" + bizagi.localization.getResource(\"render-hidden-displayName\") + \"</div>\";\n    } else {\n      return \"<div />\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var properties = this.properties;\n\n    // Call base\n    this._super();\n\n    // Set the initial value\n    if (properties.value !== undefined) {\n      this.setDisplayValue(properties.value);\n    }\n  } });","/**\r\n *   Name: Bizagi Render Text Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for text renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.text\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param data\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || this.getResource(\"render-text-regular-expression-default-message\");\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"text\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      value: this.properties.value,\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      helpText: this.properties.helpText,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"text-read-only\");\n    var value = this.getValue();\n\n    if (bizagi.util.isString(value)) {\n      value = value.replaceAll(\"`\", \"&#96;\");\n    }\n\n    // Render template\n    return $.fasttmpl(template, { value: value, editable: this.properties.editable });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    this.input = this.getControl().find(\"input\");\n\n    //Attach event for retype double\n    if (this.properties.retype === \"double\")\n    this.attachRetypeDouble();\n  },\n\n  /**\r\n      * function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check mask property\n    if (properties.mask)\n    self.input.mask({ mask: properties.mask });\n\n    // Attach change event\n    self.input.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.input.val(), false);\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.input.val(), true);\n        }\n      }\n\n    }).keypress(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n\n      if (e !== undefined) {\n        if (keyUnicode == 13) {\n          $(this).trigger(\"change\");\n        }\n      }\n    });\n    //QA33146 - maxlength does not support in Android Devices. \n    if (bizagi.util.isAndroidDevice() && properties.maxLength > 0) {\n      self.input.bind(\"keyup\", function (e) {\n        var inputLength = $(this).val() && $(this).val().length;\n        if (inputLength >= properties.maxLength) {\n          e.preventDefault();\n          e.target.value = e.target.value.substring(0, properties.maxLength);\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n\n    // When the form have big data, block browser executing RegExp. QAF-1418.\n    // Check regular expression\n    if (typeof value == \"string\") {\n      if (properties.regularExpression) {\n        if (properties.editable) {\n          var regex = new RegExp(\"\");\n          try {\n            regex = new RegExp(properties.regularExpression.expression);\n          }\n          catch (e) {\n            if (bizagi.override.showDesignValidations) {\n              bizagi.log(e);\n              invalidElements.push({ xpath: properties.xpath, message: e.message });\n              bValid = false;\n            }\n          }\n\n          if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex) && self.properties && self.properties.xpath === \"userName\")) {\n            var message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          } else {\n            if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex))) {\n              var message = properties.regularExpression.message;\n              invalidElements.push({ xpath: properties.xpath, message: message });\n              bValid = false;\n            }\n          }\n        }\n      } else {\n        // Strange behavior on IE. When matchs are united on IE have is very slow\n        // solution, divide matchs\n        //.*? means for more information search: \"Lazy matching regexp\"\n        if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n          if (properties.editable) {\n            var message = this.getResource(\"render-text-regular-expression-default-message\");\n\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (!bizagi.util.parseBoolean(self.properties.editable)) {\n      // Render as simple value\n      if (typeof value === \"string\") {\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(\"<label class='readonly-control'>\" + valueToDisplay + \"</label>\");\n      } else {\n        if (bizagi.util.isNull(value)) {\n          control.html(\"\");\n        }\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * @param value\r\n      */\n  setValue: function setValue(value) {\n    this._super(value);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Integer} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (typeof value !== \"string\" || maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","/**\r\n *   Name: Bizagi Render Readonly Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.readonly\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"readonly-value\");\n    var value = this.getMode() == 'execution' ?\n    this.getFormattedValue(this.properties.value, this.properties.dataType) :\n    this.getDesignModeValue(this.properties.renderType);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: this.properties.id,\n      value: value });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      *  Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Get data value with format\r\n      * @param value\r\n      * @param dataType\r\n      */\n  getFormattedValue: function getFormattedValue(value, dataType) {\n    if (bizagi.util.isEmpty(value)) return \"\";\n\n    // If dataType is integer\n    if ([1, 2, 3, 4, 7].includes(dataType)) return value;\n\n    // If dataType is boolean\n    if ([5, 17].includes(dataType)) return bizagi.util.formatBoolean(value);\n\n    // If dataType is monetary\n    if ([8].includes(dataType)) return bizagi.util.formatMonetaryValue(value);\n\n    // If dataType is real or float\n    if ([6, 10, 11].includes(dataType)) return bizagi.util.formatDecimalValue(value);\n\n    // If dataType is date\n    if ([12, 13].includes(dataType)) return bizagi.util.formatDateValue(value);\n\n    // Otherwise, If dataType is string\n    return bizagi.util.sanitizeHTML(value) || \"\";\n  },\n\n  /***/\n  getDesignModeValue: function getDesignModeValue(renderType) {\n\n    // If dataType is integer\n    if (renderType == 'number') return '123';\n    if (renderType == 'string') return 'abc';\n    if (renderType == 'date') return '1/1/1900';\n    if (renderType == 'boolean') return 'false';\n    if (renderType == 'currency') return '$123';\n\n    return \"\";\n  },\n\n  /** \r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.style(\"background\", color, \"important\");\n    } else {\n      this.element.css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Gets jQuery Object to stylize\r\n      * @param {jQuery Object} $context jQuery Object\r\n      */\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\".bz-input--readonly\", $context);\n  } });","/**\r\n *   Name: Bizagi Render Button Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for button renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.button\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.caption = properties.caption || \"\";\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // A button cannot be required\n    properties.required = false;\n\n    // This flag enable/disable default behaviors of buttons\n    // auto save and execute rule\n    properties.preventDefault = properties.preventDefault || false;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"button\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      caption: self.properties.caption,\n      cssClass: self.properties.cssclass || \"\",\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render behaviour after to be processed\r\n      */\n  postRender: function postRender() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Saves the form\r\n      * @returns {}\r\n      */\n  saveForm: function saveForm() {\n    var form = this.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n      * Executes the button action\r\n      * @returns {}\r\n      */\n  executeButton: function executeButton() {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = properties.xpathContext || \"\";\n\n    if (properties.submitOnChangexpathContextRow) {\n      xpathContext = xpathContext ? xpathContext + \".\" + properties.submitOnChangexpathContextRow : properties.submitOnChangexpathContextRow;\n    }\n\n    // Set the loading feedback\n    self.getFormContainer().startLoading();\n\n    return self.dataService.multiaction().executeButton({\n      idRender: properties.id,\n      xpath: properties.xpath || \"\",\n      xpathContext: xpathContext || \"\",\n      idPageCache: properties.idPageCache }).\n    always(function () {\n      self.getFormContainer().endLoading();\n      return arguments ? arguments[0] : undefined;\n    });\n  },\n\n  /**\r\n      * Refresh the current form\r\n      * @returns {}\r\n      */\n  refreshForm: function refreshForm() {\n    var form = this.getFormContainer();\n    form.refreshForm(this.properties.id);\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      * @returns {}\r\n      */\n  processButton: function processButton() {\n    var self = this;\n\n    if (self.properties.editable) {\n      // Save the form prior opening the dialog\n      self.runButtonAction();\n    }\n  },\n\n  /**\r\n      * Triggers the render change event\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n\n    var pressed = params.pressed || false;\n\n    self.triggerHandler(\"renderchange\", { render: self, pressed: pressed });\n  },\n\n  /**\r\n      * Run button actions\r\n      * @returns {}\r\n      */\n  runButtonAction: function runButtonAction() {\n    var self = this;\n\n    // Save the form prior opening the dialog\n    self.getFormContainer().clearValidationMessages();\n\n    self.saveForm().pipe(function () {\n      return self.executeButton();\n    }).done(function (result) {\n\n      var type = result && result.type ? result.type : \"\";\n\n      if (result == null || result == true || result.result === \"success\" || result.type === \"success\") {\n        return self.refreshForm();\n      } else if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        try {\n          if (type === \"alertMessages\") {\n            bizagi.modalError && bizagi.modalError.show(result.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n          } else {\n            // Add validation messages\n            self.getFormContainer().addValidationMessage(result.messages);\n          }\n        } catch (e) {\n        }\n      }\n    }).fail(function (error) {\n\n      try {\n        // Add error messages\n        var error_obj = bizagi.util.getErrorFormatted(error);\n        var message = typeof error_obj === \"undefined\" ? {\n          \"message\": bizagi.localization.getResource(\"workportal-general-error\") } :\n        error_obj;\n\n        self.getFormContainer().failHandler(message);\n      } catch (e) {\n      }\n\n    });\n\n  },\n\n  processLayout: function processLayout(isLabelFormat, format) {\n    if (isLabelFormat) {\n      this.changeBackgroundColor(format.background);\n      this._super(!isLabelFormat, format);\n    }\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.getElementsToStylize(this.getControl()).style(\"background\", color, \"important\");\n    } else {\n      this.getElementsToStylize(this.getControl()).css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"input\", $context);\n  },\n\n  /**\r\n      *  Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  } });","/**\r\n *   Name: Bizagi Render Fileprint Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for fileprint renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.fileprint\", {}, {\n\n  /**\r\n                                                    * Update or init the element data\r\n                                                    * @param data\r\n                                                    */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var caption = $.trim(properties.caption);\n\n    properties.caption = !bizagi.util.isEmpty(caption) ? caption : \"render-fileprint-property-caption\";\n    properties.filesCount = properties.filesCount ? properties.filesCount : 0;\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n    // A button cannot be required\n    properties.required = false;\n  },\n\n  /**\r\n      * Method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"fileprint\");\n\n    return $.fasttmpl(template, {\n      caption: this.properties.caption });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Downloads the file and try to open it\r\n      */\n  downloadFile: function downloadFile() {\n    return this.dataService.getFilePrint({\n      idRender: this.properties.id,\n      xpathContext: this.properties.xpathContext || \"\",\n      idPageCache: this.properties.idPageCache,\n      contexttype: this.properties.contexttype,\n      disposition: \"download\" }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  } });","/**\r\n *   Name: Bizagi Render Simple Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.link\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data\r\n                                               * @returns {}\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n    properties.required = false;\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"link\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      displayName: self.properties.displayName,\n      align: self.properties.valueAlign,\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Do nothing\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  } });","/*\r\n *   Name: BizAgi Render Radio Class\r\n *   Author: Ivan Ricardo Taimal Narvaez\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.checkList\", {}, {\n\n  /*\r\n                                                    *   Update or init the element data\r\n                                                    */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n    self.setValue(properties.items);\n    self.updateOriginalValue();\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n    self.checkListGroup = $(\".ui-bizagi-render-checkList .ui-bizagi-render-checkList-item\", control);\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var items = self.properties.items || [];\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: items }));\n\n    return html;\n  },\n\n  /*\r\n      *   Gets the template used by the combo render\r\n      *   can be overriden in subclasses to reuse logic and just change the template\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"checkList\";\n  },\n\n  /*\r\n      *   Determines if we need to show the empty node or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /*\r\n      *   Determines if we need to show the current data regardless if it belongs to data or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /*\r\n      *   Adds custom parameters to process the template\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal };\n\n  },\n  /*\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n\n  },\n\n  setValue: function setValue(value) {;\n    this.value = bizagi.clone(value);\n  },\n\n  getValue: function getValue(data) {;\n    return this.value || [];\n  } });","/*\r\n*   Name: BizAgi render layout Image Class\r\n*   Author: Andrés Fernando Muñoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for non editable image control inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutImage\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    mode = self.getMode(),\n    useDefaultImage = false,\n    valueObj = self.properties.value || {},\n    uri = \"\";\n\n    //\n    var templateUri = self.renderFactory.getTemplate(\"layout-image\");\n\n    //Solucion temporal mientras se ajusta la respuesta del servicio cambiar despues de demo de 21/07/2015\n    /*if (value.value && value.value !== \"\" && value.value.length > 100){\r\n        var template64 = self.renderFactory.getTemplate(\"layout-image64\");\r\n        return $.fasttmpl(template64, { url: value.value, useDefaultImage: useDefaultImage });\r\n    }*/\n\n    /* if (mode === 'execution' && valueObj.value && valueObj.value.length > 0) {\r\n            uri = self.getImageUri();\r\n        }\r\n        else{\r\n            useDefaultImage = true;\r\n        } */\n\n    return $.fasttmpl(templateUri, { useDefaultImage: true });\n  },\n\n  /**\r\n      * Gets the base 64 image, specify in each device in order to change the size\r\n      */\n  getImage64: function getImage64() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      width: 96,\n      height: 96 };\n\n\n    return self.dataService.getEntityImage64(params);\n  },\n\n  /**\r\n      * Gets the url to get the array image, specify in each device in order to change the size\r\n      */\n  getImageUri: function getImageUri() {\n    var self = this;\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Andrés Fernando Muñoz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLink\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-link\");\n    // Render template\n    var html = $.fasttmpl(template, { displayName: self.properties.displayName });\n    return html;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Sánchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLabel\", {}, {\n\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    this.properties.required = false;\n\n    // Set properties\n    this.properties.displayType = \"label\";\n    this.properties.labelAlign = this.originalProperties.labelAlign || \"left\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-label\");\n    var value = self.properties.displayName || self.properties.value || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Mauricio Sanchez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutText\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    //properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-text\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value, editable: self.properties.editable });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  } });","/**\r\n *   Name: Bizagi Render Layout Simple Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable upload renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutUpload\", {}, {\n\n  /**\r\n                                                       *   Update or init the element data\r\n                                                       */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.editable = true;\n    properties.allowDelete = true;\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n  },\n\n  /**\r\n      * Get value files by data\r\n      */\n  getValueFilesByData: function getValueFilesByData(properties) {\n    var self = this;\n    var defer = $.Deferred();\n    var dataFiles;\n\n    if (properties.value.value) {//Normal entityTemplate in form QAF-2319\n      dataFiles = properties.value.value;\n    } else {//QAF-2210\n      dataFiles = properties.value;\n    }\n\n    var valueAuxFiles;\n    try {\n      if (self.isContextContainerWidgetRender()) {\n        valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + dataFiles + \"}\");\n        defer.resolve(properties, valueAuxFiles);\n      } else {//context: my stuff\n        $.when(self.getDataFilesWithoutScope()).done(function (valueResult) {\n          valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + valueResult + \"}\");\n          defer.resolve(properties, valueAuxFiles);\n        });\n      }\n    } catch (err) {\n      valueAuxFiles = JSON.parse(\"{ \\\"files\\\": []}\");\n      defer.resolve(properties, valueAuxFiles);\n      console.warn(\"Exception converting data files. Error: \", err);\n    }\n\n    return defer.promise();\n  },\n\n  isContextContainerWidgetRender: function isContextContainerWidgetRender() {\n    var self = this;\n    var formContainer = self.getFormContainer();\n\n    return formContainer.params.paramsRender && formContainer.params.paramsRender.idRender;\n  },\n\n  /**\r\n      * Get data files when access from My stuff\r\n      */\n  getDataFilesWithoutScope: function getDataFilesWithoutScope() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey };\n\n\n    return self.dataService.getFilesDataForLayoutUploadControl(params);\n  },\n\n  /**\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      *   Returns the xpath to be used\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Render Layout Boolean Class\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for boolean renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutBoolean\", {}, {\n  /*\r\n                                                        * Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-boolean\");\n    // Render template\n    var html = $.fasttmpl(template, { value: this.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  setValue: function setValue(value, triggerEvents) {\n    if (value === null || value === \"\") {\n      this.properties.value = \"\";\n    } else\n    if (value.toString().toLowerCase() === \"true\" || value.toString().toLowerCase() === \"false\") {\n      this.properties.value = bizagi.util.parseBoolean(value) ? this.getResource(\"render-boolean-yes\") : this.getResource(\"render-boolean-no\");\n    }\n    this._super(this.properties.value, triggerEvents);\n  } });","/**\r\n * Name: BizAgi Render Layout DateTime Class\r\n * Author: Andres Fernando Muñoz\r\n * Comments:\r\n * - This script will define basic stuff for text renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutDateTime\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/ig) === -1) {\n        properties.fullFormat = properties.fullFormat + ' ' + properties.timeFormat;\n      }\n    } else\n    {\n      var indexHour = properties.fullFormat.search(/[h|H]+/ig);\n      if (indexHour !== -1) {\n        properties.fullFormat = properties.fullFormat.substring(0, indexHour - 1);\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(properties.value, properties.showTime);\n\n      // Format date to current format\n      if (date != 0) {\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        self.value = properties.value; // Value must always hold the value with invariant format\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else\n      {\n        self.value = null;\n      }\n    } else\n    {\n      self.value = null;\n      properties.value = \"\";\n      properties.displayValue = \"\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-date-time\");\n    var value = self.properties.value === null || self.properties.value === \"\" ? \"\" : self.properties.value;\n\n    // Render template\n    return $.fasttmpl(template, { value: value });\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this,dateObj;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n    var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n\n    if (value.length == INVARIANT_FORMAT.length || value.length == INVARIANT_FORMAT.length + 1) {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\n    } else\n    {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\n      if (dateObj && !isNaN(Date.parse(dateObj)) && !$.isNumeric(dateObj)) {\n        dateObj.setHours(0, 0, 0, 0);\n      }\n\n    }\n    // Set value in input\n    if (value && !isNaN(Date.parse(value))) {\n      var formattedDateTime = bizagi.util.dateFormatter.formatDate(dateObj, properties.fullFormat, self.i18n);\n      dateControl.text(formattedDateTime);\n    }\n  },\n\n  /**\r\n      * Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n    var self = this;\n    self.dateControl = $(\".ui-bizagi-render-date-time\", self.getControl());\n    return self.dateControl;\n  } });","/*\r\n*   Name: BizAgi Render Layout number Class\r\n*   Author: Andres Fernando Muñoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutNumber\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.getDefaultGroupDigits(properties.dataType);\n    properties.colorize = properties.colorizeOnNegative || false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-number\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  /*\r\n      *   Returns the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n    var regExp2 = /[\\u20AC \\u0024\\u00A3]/;\n    if (!value.toString().match(regExp2)) {\n      label.formatCurrency(\n      {\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n    return label.text();\n  },\n\n  /*\r\n      *   Return the allow decimals default property based on the datatype\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /*\r\n      *   Return the group digits default property based on the datatype\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  } });","/*\r\n*   Name: BizAgi Render Layout Money Class\r\n*   Author: Andrés Fernando Muñoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for money renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutMoney\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol :\n      typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n    } else\n    {\n      properties.symbol = \"\";\n    }\n    properties.groupDigits = true;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Sánchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutPlaceholder\", {}, {\n\n  /*\r\n                                                            * Constructor\r\n                                                            */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-placeholder\");\n    var value = self.properties.value || self.properties.displayName || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/**\r\n *   Name: Bizagi Render Geolocation control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for geolocation renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.geolocation\", {}, {\n\n  /**\r\n                                                      * Constructor\r\n                                                      * @param {} data\r\n                                                      */\n  init: function init(data) {\n    // Call base\n    this._super(data);\n    this.geolocation = window.navigator.geolocation;\n\n    var properties = this.properties;\n    properties.allowUpdate = bizagi.util.parseBoolean(properties.allowUpdate) === true;\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"geolocation\");\n\n    // Render template\n    var html = $.fasttmpl(template, self.properties);\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Call base\n    return this._super(invalidElements);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} succes_callback\r\n      * @param {} fail_callback\r\n      */\n  getCurrentPosition: function getCurrentPosition(succes_callback, fail_callback) {\n    var self = this;\n\n    if (typeof self.geolocation === \"undefined\") {\n      if (fail_callback)\n      fail_callback(bizagi.localization.getResource(\"render-control-unsuported-by-browser\").replace(\"{0}\", self.properties.type));\n      return;\n    }\n\n    var onSuccess = function onSuccess(position) {\n      if (succes_callback)\n      succes_callback(position);\n    };\n\n    var onError = function onError(error) {\n      var strMessage = self.getErrorMessage(error);\n\n      if (fail_callback)\n      fail_callback(strMessage);\n    };\n\n    return self.geolocation.getCurrentPosition(onSuccess, onError);\n  },\n\n  /**\r\n      * Get message of error\r\n      * @param error\r\n      * @returns {*|string}\r\n      */\n  getErrorMessage: function getErrorMessage(error) {\n    var strMessage = \"\";\n\n    // Check for known errors\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n      case 1:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;\n      case error.POSITION_UNAVAILABLE:\n      case 2:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-position-unavailable\");\n        break;\n      case error.TIMEOUT:\n      case 3:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-timeout\");\n        break;\n      default:\n        strMessage = \"WD: \" + bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;}\n\n\n    return strMessage;\n  },\n\n  /**\r\n      * Change precision number of coordinates\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  performPrecision: function performPrecision(data) {\n    var geolocation = data.split(\" \") || \"\";\n\n    if (!geolocation) return data;\n\n    try {\n      var latitude = parseFloat(geolocation[0].trim());\n      var longitude = parseFloat(geolocation[1].trim());\n\n      return latitude.toPrecision(10) + \" \" + longitude.toPrecision(10);\n    } catch (e) {\n      return data;\n    }\n  } });","/*\r\n*   Name: BizAgi Render Association Class\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define basic stuff for association renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.association\", {}, {\n\n  /*\r\n                                                     *   Update or init the element data\r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var properties = self.properties;\n\n    // Fill default properties\n    properties.property = \"flipped\";\n    properties.idRender = self.properties.id;\n    properties.allowFlip = typeof properties.allowFlip != \"undefined\" ? bizagi.util.parseBoolean(properties.allowFlip) : true;\n    properties.flipped = typeof properties.flipped != \"undefined\" ? bizagi.util.parseBoolean(properties.flipped) : false;\n    properties.flipstate = properties.flipped;\n\n\n    // data of entities (left and right)\n    properties.leftData = properties.leftData || [];\n    properties.rightData = properties.rightData || [];\n\n    if (properties.value) {\n      self.processPropertyValue();\n    }\n  },\n\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).\n    done(function (flip) {\n\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var html = $.fasttmpl(template, self.properties, {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n\n  /*\r\n     * Returns the flip state\r\n     */\n  getFlipAssociation: function getFlipAssociation() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode == \"execution\")\n    return self.dataService.getFlipAssociation(self.properties);\n\n    return false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var value = self.getValue();\n\n    return value;\n  },\n\n  /*\r\n     *   Get the template \r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"association\";\n  },\n\n\n  /**\r\n     * Get Left Data, verify if flipper flags sets true\r\n     * \r\n     * @param column {'0'||'1'}\r\n     */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.data;\n    var data = [];\n    var associationData = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(associationData, function (key, item) {\n      data.push({ id: item.id, value: item.value });\n    });\n\n    return data;\n  },\n\n  /**\r\n     * Association of right elements\r\n     */\n  getRightAssociation: function getRightAssociation(leftId) {\n    var self = this;\n    var properties = self.data;\n    var association = [];\n\n\n    var isChecked = function isChecked(leftId, idRight) {\n      var checked = false;\n      $.each(properties.formatJson.value, function (key, value) {\n        if (!checked && value.id == leftId && value.value.indexOf(idRight) >= 0) {\n          checked = true;\n        }\n      });\n\n      return checked;\n    };\n\n    // create association and check element\n    if (properties.flipped) {\n      // left element\n      $.each(properties.leftData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(data.id, leftId) });\n\n\n      });\n    } else {\n      $.each(properties.rightData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(leftId, data.id) });\n\n      });\n    }\n\n    return association;\n  },\n\n\n  removeElement: function removeElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Remove right element from left panel\n          $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n            if (leftId == removeValue) {\n              // Splice from array\n              self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n            }\n          });\n        }\n      } else if (data.id == leftId) {\n        // Remove right element from left panel\n        $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n          if (rightId == removeValue) {\n            // Splice from array\n            self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n          }\n        });\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n\n  addElement: function addElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Add right element to left panel\n          self.properties.formatJson.value[key][\"value\"].push(leftId);\n        }\n      } else if (data.id == leftId) {\n        // Add right element to left panel\n        self.properties.formatJson.value[key][\"value\"].push(rightId);\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n  makeJsonBase: function makeJsonBase() {\n    var self = this;\n    self.properties.formatJson = self.properties.formatJson || {\n      leftXpath: self.properties.leftXpath,\n      rightXpath: self.properties.rightXpath,\n      leftFactName: self.properties.leftFactName,\n      rightFactName: self.properties.rightFactName,\n      value: self.properties.value };\n\n  },\n\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n\n    if (self.properties.formatJson) {\n      var values = self.properties.formatJson.value;\n    } else {\n      values = self.properties.value;\n    }\n\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var data = values[i];\n      if (data && data.value.length > 0) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /*\r\n     * This method process the value.\r\n     * changes the format to send request\r\n     */\n  processPropertyValue: function processPropertyValue() {\n    var self = this;\n    var properties = self.properties;\n    var values = properties.value;\n    var result = [];\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var value = values[i];\n      result.push({ id: value[0], value: value[1] });\n    }\n\n    properties.value = result;\n  } });","/**\r\n *   Name: Bizagi Render Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for uploads\r\n */\n\n$.Class.extend(\"bizagi.rendering.upload\", {}, {\n  /***\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    var maxFileSizeOfProperty = Number(properties.maxSize) || 0;\n    var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 4091904;\n\n    properties.maxSize = maxFileSizeOfProperty || maxFileSizeOfUser;\n    properties.maxfiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n      var defExtensions = [];\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length > 0) {\n          defExtensions.push(\"*.\" + singleExtensions[i]);\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = defExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddUrl();\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) || false;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null && properties.editable ? bizagi.util.parseBoolean(properties.allowDelete) : false;\n\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"upload\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable,\n      haveFiles: self.filesCount !== 0,\n      noFiles: self.filesCount === 0,\n      allowSendInMail: properties.allowSendInMail });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {jQuery|*}\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var itemTemplate = self.getTemplateItemName();\n    var template = self.renderFactory.getTemplate(itemTemplate);\n    var form = self.getFormContainer();\n    var printVersion = form.params && form.params.printversion;\n\n    // Don't render urls when not running in execution mode\n    var url = !self.isExecutionMode() ? \"\" : self.buildItemUrl(file); // TODO: Review if need it: javascript:void(0);\n\n    var html = $.fasttmpl(template, {\n      id: file.id,\n      mode: mode,\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: bizagi.util.decodeURI(file.fileName),\n      editable: self.properties.editable,\n      printVersion: printVersion || false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getUploadXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: form.properties.sessionId,\n      contexttype: properties.contexttype });\n\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Removes a file from the upload control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = self.getUploadXpath() + (bizagi.util.isNumeric(fileId) ? \"[id=\" + fileId + \"]\" : \"[id='\" + fileId + \"']\");\n\n    return self.dataService.deleteUploadFile({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype }).\n    pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n\n    // Set files property\n    self.files = value || []; // Dont remove this line\n    self.filesCount = self.files.length;\n\n    // Call base\n    self._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*}\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var bValid = true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && properties.editable) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (self.filesCount <= 0 && !newRow) {\n        var inlineEdit = self.grid ? self.grid.properties.inlineEdit : true;\n\n        if (inlineEdit) {\n          message = self.getResource(\"render-required-upload\").replaceAll(\"#label#\", properties.displayName);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    data[prefix + \"xpath\"] = self.getUploadXpath();\n    data[prefix + \"idRender\"] = properties.id;\n    data[prefix + \"xpathContext\"] = properties.xpathContext;\n    data[prefix + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[prefix + \"contexttype\"] = properties.contexttype;\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the xpathContext to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpathContext: function getUploadXpathContext() {\n    return this.getXpathContext() || this.properties.xpathContext;\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (self.grid && self.grid.properties.inlineAdd === true) {\n        if (!self.hasValue() && !self.getControl().parents(\"tr\").data(\"new-row\")) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      } else {\n        if (!self.hasValue()) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  setRenderRequired: function setRenderRequired(invalidElements, properties) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n    invalidElements.push({ xpath: properties.xpath, message: message });\n  },\n\n  /**\r\n      * Templates\r\n      */\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  },\n\n  /**\r\n      * Method to perform the format to value\r\n      * @param value\r\n      * @returns {((*)[]|*)[]}\r\n      */\n  formatValue: function formatValue(value) {\n    var validateObjectStructure = function validateObjectStructure(item) {\n      return !!(item.uploadId && item.fileName);\n    };\n    var validateArrayStructure = function validateArrayStructure(item) {\n      return !!(item[0] && item[1]);\n    };\n\n    return (value || []).reduce(function (result, item) {\n      var isFormatValid = false;\n      var validator = bizagi.util.bzValidator(item).\n      add(validateObjectStructure).\n      validate(function (response) {\n        isFormatValid = response.errors && !response.errors.length;\n        if (isFormatValid) {\n          result.push([item.uploadId, item.fileName]);\n        }\n      });\n\n      if (!isFormatValid) {\n        validator.add(validateArrayStructure, \"The value is not in a valid format\").\n        validate(function (response) {\n          if (response.errors && response.errors.length > 0) {\n            console.warn(response.errors);\n          } else {\n            result.push([item]);\n          }\n        });\n      }\n\n      return result;\n    }, []);\n  } });","/**\r\n *   Name: Bizagi Render ECM upload control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for ECM Control\r\n */\n\n$.Class.extend(\"bizagi.rendering.ecm\", {}, {\n\n  /**\r\n                                              * Update or init the element data\r\n                                              * @param data\r\n                                              */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var self = this;\n    var properties = self.properties;\n\n    properties.maxSize = Number(properties.maxSize) || (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : properties.maxSize = Number(properties.maxSize) || 4091904);\n    properties.maxFiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.split(\";\");\n      for (var i = 0; i < singleExtensions.length; i++) {\n        singleExtensions[i] = \"*.\" + singleExtensions[i];\n      }\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=uploadECMFile\";\n    properties.editUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=updateECMFileContent\";\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n    properties.q_xpath = bizagi.util.encodeXpath(properties.xpath);\n    properties.showMetadata = properties.showMetadata === undefined || properties.showMetadata === null ? true : bizagi.util.parseBoolean(properties.showMetadata);\n\n    var dateFormat = this.getResource(\"dateFormat\");\n    var timeFormat = this.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n\n    properties.xpathContext = this.parent.properties.xpathContext || properties.xpathContext || \"\";\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param listControl\r\n      * @param fileProperties\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl(listControl, fileProperties) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"ecm\");\n    var mode = self.getMode();\n    var defer = new $.Deferred();\n\n    properties.value = fileProperties ? [[fileProperties.idFileUpload, fileProperties.fileName]] : self.value;\n    var html = $.fasttmpl(template, properties, {\n      getFileExtension: self.getFileExtension,\n      isImage: self.isImage });\n\n\n    if (self.properties.value != undefined) {\n\n      var lengthValues = self.properties.value.length;\n\n      if (lengthValues === 0) {\n        defer.resolve(html);\n      }\n\n      $.each(self.properties.value, function (key, value) {\n        var data = {};\n\n        data.idFileUpload = value[0];\n        data.fileName = value[1];\n        data.idPageCache = self.properties.idPageCache;\n        data.xpathContext = self.getXpathContext();\n        data.xPath = self.properties.xpath;\n        data.editable = self.properties.editable;\n        data.idAttrib = self.properties.idAttrib;\n\n        var form = self.getFormContainer();\n        if (form && form.properties && form.properties.sessionId) {\n          data.sessionId = form.properties.sessionId;\n        }\n\n        if (mode === \"execution\") {\n          $.when(self.renderFileLayout(data, fileProperties)).done(function (item) {\n            lengthValues--;\n\n            if (bizagi.loader.productBuildToAbout && bizagi.loader.productBuildToAbout.indexOf(\"10.4\") === 0) {\n              item = item.replaceAll(\"Handlers/MetadataFile\", \"Handlers/Metadata\");\n            }\n\n            html = self.replaceItemHtml(html, self.properties.id + \"-\" + data.idFileUpload, item);\n            if (lengthValues === 0) {\n              defer.resolve(html);\n            }\n          });\n\n        }\n      });\n    } else {\n      defer.resolve(html);\n    }\n    return defer.promise();\n  },\n\n  replaceItemHtml: function replaceItemHtml(html, id, replace) {\n    return html.replace(\"{{\" + id + \"}}\", replace);\n  },\n\n  renderFileLayout: function renderFileLayout(data, fileProperties) {\n    var self = this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\n\n    var deferred = $.Deferred();\n\n    $.when(self.dataService.getECMMetadata(data),\n    fileProperties ? [fileProperties] : self.dataService.getFileProperties(data)).\n    done(function (metaData, fileProperties) {\n\n      fileProperties[0].data = data;\n\n      // Make xpath context\n      fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\n      fileProperties[0].xpath = self.properties.xpath;\n\n      metaData[0].filename = data.fileName;\n      metaData[0].url = self.buildItemUrl(fileProperties[0]);\n\n      // Define File Properties\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].ecm_isVisible = fileProperties[0].isVisible;\n      metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\n      metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\n      metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\n      metaData[0].ecm_allowView = fileProperties[0].allowView;\n      metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\n      metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\n      metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].idFileUploads = fileProperties[0].idFileUpload;\n      metaData[0].xpath = fileProperties[0].xpath;\n      metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\n      metaData[0].deviceType = bizagi.detectDevice();\n\n      var html = $.fasttmpl(metadataTemplate, metaData[0]);\n      deferred.resolve(html);\n    });\n\n    return deferred.promise();\n  },\n\n  isImage: function isImage(file) {\n    var extension = this.getFileExtension(file);\n    var image = [\"JPG\", \"JPEG\", \"GIF\", \"PNG\", \"BMP\"];\n\n    return image.indexOf(extension.toUpperCase()) > -1 ? true : false;\n  },\n\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n\n    if (!file.data) {\n      file.data = { fileName: file.fileName, idAttrib: file.idAttrib };\n    }\n\n    return self.dataService.getECMFileUrl({\n      idFileUpload: file.idFileUpload,\n      xPath: file.xpath || file.xPath,\n      xpathContext: file.xpathContext,\n      idAttrib: file.data.idAttrib,\n      idPageCache: self.properties.idPageCache,\n      fileName: file.data.fileName.replace(/ /g, \"_\"),\n      p_sessionId: p_sessionId,\n      sessionId: file.data.sessionId || \"\" });\n\n  },\n\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var data = {};\n\n    // data.fileExt = properties.validExtensions;\n    // data.fileDesc = properties.validExtensions ? self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions : \"\";\n    data.xPath = properties.xpath;\n    data.idAttrib = properties.idAttrib;\n    data.xpathContext = properties.xpathContext;\n    data.metaValues = [];\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n\n    return data;\n  },\n\n  /**\r\n      * Get name of file extension\r\n      * @param fileName\r\n      * @returns {*}\r\n      */\n  getFileExtension: function getFileExtension(fileName) {\n    fileName = fileName || \"\";\n    return fileName.split(\".\").pop();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super(value, triggerEvents);\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length ? self.files.length : properties.value;\n  },\n\n  /**\r\n      * Gets xpath context\r\n      * @returns {*|string}\r\n      */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Removes a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.deleteECMFile(params).pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Lock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  lockUploadItem: function lockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.checkOutFile(params);\n  },\n\n  /**\r\n      * Unlock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  unlockUploadItem: function unlockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.cancelCheckOut(params);\n  } });","/**\r\n *   Name: Bizagi Render Yes-no Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for yes-no renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.yesno\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"yesno\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {boolean}\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmptyValue(value)) return false;\n    return bizagi.util.parseBoolean(value) !== null;\n  } });","/**\r\n *   Name: Bizagi Render Letter Class\r\n*   Author: Diego Parra\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for letter renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.letter\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Create a variable to check if the letter has been opened when editable\n    this.letterOpened = false;\n  },\n\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"letter\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"letter.readonly\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getLetterContent: function getLetterContent() {\n    // Set flag to true\n    this.letterOpened = true;\n\n    return this.dataService.getLetterContent({\n      url: this.properties.getUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Sends the content to the server in order to save\r\n      * @param {} content\r\n      */\n  saveLetterContent: function saveLetterContent(content) {\n    return this.dataService.saveLetterContent({\n      url: this.properties.saveUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache,\n      content: content });\n\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter() {\n    return this.dataService.getCanGenerateLetter({\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Saves the form\r\n      */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) return true;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) return true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required) {\n      if (self.letterOpened == false) {\n        message = self.getResource(\"render-letter-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Returns the current xpath\r\n      */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the current context xpath\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  } });","/**\r\n *   Name: Bizagi Render Form Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for form link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.formLink\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n\n    properties.displayType = \"value\";\n    properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"formLink\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      id: properties.id,\n      align: properties.valueAlign,\n      displayName: properties.displayName,\n      value: properties.value,\n      editable: properties.editable,\n      likeButton: bizagi.util.parseBoolean(properties.likeButton) || false });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n\n  },\n\n  /**\r\n      * Method to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Submits a edit request for a link display form\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    return self.dataService.editLinkForm({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: self.getFormLinkXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache });\n\n  },\n\n  /**\r\n      * Submits a link save request for the displayed form\r\n      * @param data\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: xpathContext,\n      submitData: data }).\n    done(function (response) {\n      var executeSubmitOnChange = true;\n\n      if (response && response.type === \"validationMessages\")\n      executeSubmitOnChange = false;\n\n      if (executeSubmitOnChange)\n      self.submitOnChange({});\n    });\n  },\n\n  /**\r\n      * Sends all the data to the server then refreshes the form\r\n      * @param data\r\n      * @returns {*} Returns a promise\r\n      */\n  saveFormLinkData: function saveFormLinkData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    var submitData = $.extend({}, data);\n    delete submitData.idPageCache;\n\n    return $.when(!bizagi.util.isEmpty(submitData) ? self.dataService.multiaction().submitData({\n      action: \"SAVE\",\n      data: submitData,\n      idPageCache: data.idPageCache,\n      xpathContext: xpathContext }) :\n    undefined);\n  },\n\n  /**\r\n      * Submits a rollback request\r\n      * @param params\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.rollbackLinkForm({\n          url: properties.rollbackUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: params ? params.idPageCache : properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a commit request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCommitRequest: function submitCommitRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.commitLinkForm({\n          url: properties.commitUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a checkpoint request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCheckpointRequest: function submitCheckpointRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.sendCheckpoint({\n          url: properties.checkpointUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a submitData request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitDataRequest: function submitDataRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.submitData({\n          url: properties.checkpointUrl,\n          action: \"SUBMITDATA\",\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Get Form Link xpath to use\r\n      * @returns {*}\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Don't do anything\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    // Don't do anything\n  } });","/**\r\n *   Name: Bizagi Render Document Generator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for document generator render\r\n */\n\n$.Class.extend(\"bizagi.rendering.document\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    var properties = this.properties;\n\n    properties.validate = bizagi.util.parseBoolean(properties.validate) != null ? bizagi.util.parseBoolean(properties.validate) : false;\n    properties.downloadalldocuments = properties.downloadalldocuments ? properties.downloadalldocuments : false;\n    properties.allowGenerate = properties.allowGenerate !== undefined ? properties.allowGenerate : true;\n    properties.append = properties.append ? properties.append : false;\n\n    if (properties.caption) {\n      properties.caption = $.trim(properties.caption);\n\n      if (properties.caption.length === 0) {\n        properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n      }\n    } else {\n      properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n\n    self.preRenderControl();\n\n    var properties = self.properties;\n    var mode = self.getMode();\n    var downloadAllDocuments = properties.downloadalldocuments;\n    var allowGenerate = properties.allowGenerate;\n    var template = self.renderFactory.getTemplate(self.getTemplate());\n    var documents = properties.value || [];\n    var noFiles = documents ? documents.length === 0 : true;\n\n    // Render template\n    var html = self.getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles);\n\n    // Render current children\n    var items = this.renderDocumentsHtml(documents);\n    items += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param template\r\n      * @param mode\r\n      * @param downloadAllDocuments\r\n      * @param allowGenerate\r\n      * @param properties\r\n      * @param noFiles\r\n      * @returns {*|jQuery}\r\n      */\n  getControlHtml: function getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n\n    return $.fasttmpl(template, {\n      noActivateButton: false,\n      editable: mode !== \"execution\",\n      mode: mode,\n      downloadalldocuments: downloadAllDocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append,\n      caption: properties.caption,\n      noFiles: noFiles,\n      allowSendInMail: properties.allowSendInMail });\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getXpath: function getXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  preRenderControl: function preRenderControl() {\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {boolean}\r\n      */\n  activateButton: function activateButton() {\n    return true;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  },\n\n  /**\r\n      * Renders a single document item\r\n      * @param file\r\n      * @returns {*|jQuery}\r\n      */\n  renderDocumentItem: function renderDocumentItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildItemUrl(file);\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: file.fileName,\n      id: file.id,\n      mode: mode,\n      editable: self.properties.editable,\n      joined: false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: self.getSessionId() });\n\n  },\n\n  /**\r\n      * Builds the download all items item url\r\n      * @returns {*}\r\n      */\n  buildAllDocumentsUrl: function buildAllDocumentsUrl() {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getAllDocumentsDownloadUrl({\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      idCase: properties.caseId,\n      idWorkItem: properties.workitemId,\n      sessionId: self.getSessionId() });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @returns {string}\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    return \"<div></div>\";\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode !== \"design\") {\n      var control = self.getControl();\n      var htmlControl = self.renderControl();\n\n      control.append(htmlControl);\n\n      self.updateControlForPrintMode(control);\n\n      // Execute the same as post-render\n      self.postRender();\n    }\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  validateContainer: function validateContainer() {\n    // Check if the form is valid, then generate\n    var form = this.getFormContainer();\n    return form.validateForm();\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  save: function save() {\n    var form = this.getFormContainer();\n\n    return form.saveForm();\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Replaces a {{actions}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceActionsHtml: function replaceActionsHtml(html, replace) {\n    return html.replace(\"{{actions}}\", replace);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) return true;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false) return true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && !properties.buttonExecuted) {\n      if (self.value) {\n        if (self.value.length > 0) return true;\n        message = self.getResource(\"render-document-required-text\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Attach handler\n    var $generateLink = $(\".ui-bizagi-button-documentgenerator\", self.getControl());\n\n    if (self.isExecutionMode()) {\n      $generateLink.click(function (e) {\n        if (e.isPropagationStopped()) return;\n        e.stopPropagation();\n\n        self.properties.buttonExecuted = true;\n\n        if (self.properties.validate) {\n          // Check if the form is valid, then generate\n          var isValid = self.validateContainer();\n          if (isValid) {\n            self.documentTemplateGenerate();\n          }\n        } else {\n          // Just generate the form\n          self.documentTemplateGenerate();\n        }\n\n        self.properties.buttonExecuted = false;\n      });\n\n      // Configure basic handlers\n      self.attachEvents();\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    if (this.isExecutionMode()) {\n      this.attachEvents();\n    }\n  },\n\n  /**\r\n      *  Configure event handlers\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var $control = self.getControl();\n\n    // Configure download handler for document item\n    $(\".ui-bizagi-document-upload-item a > span\", $control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      var $item = $(this).closest(\".ui-bizagi-document-upload-item\");\n      var file = $item.data();\n\n      if (!file.joined) {\n        self.downloadFile(file);\n      } else {\n        self.downloadAllFiles({ filename: \"TemplatesConcatFilesToPDF.pdf\" });\n      }\n    });\n\n    // Configure preview handler\n    $(\".ui-bizagi-container-documents-item-delete\", $control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      self.deleteDocumentTemplate($(this).data(\"filename\"));\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      * @param filename\r\n      */\n  deleteDocumentTemplate: function deleteDocumentTemplate(filename) {\n    var self = this;\n    var params = {\n      xpath: self.properties.xpath + \"[fileName='\" + filename + \"']\",\n      idRender: self.properties.id,\n      xpathContext: self.getContextXpath(),\n      idPageCache: self.properties.idPageCache };\n\n\n    self.startLoading();\n\n    $.when(self.dataService.deleteUploadFile(params)).\n    done(function () {\n      $.when(self.dataService.multiaction().getPropertyData({\n        xpath: self.properties.xpath,\n        idRender: self.properties.id,\n        xpathContext: self.getContextXpath(),\n        idPageCache: self.properties.idPageCache,\n        property: \"value\" })).\n      done(function (documents) {\n        self.resolveDeleteDocumentTemplate(documents, false, self.properties.downloadalldocuments);\n\n        // Finish loading\n        self.endLoading();\n      });\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n\n    self.startLoading();\n\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    self.save().done(function () {\n\n      bizagi.showErrorAlertDialog = false;\n\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function () {\n\n        // Fetch again the value property\n        $.when(self.dataService.multiaction().getPropertyData({\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: self.getContextXpath(),\n          idPageCache: properties.idPageCache,\n          property: \"value\" })).\n        done(function (documents) {\n          self.resolveDocumentTemplateGenerate(documents, false, properties.downloadalldocuments);\n\n          // Finish loading\n          self.endLoading();\n        });\n\n      }).fail(function (error) {\n        self.endLoading();\n\n        // Add error messages\n        self.showErrorMessage(error);\n      });\n    }).fail(function (message) {\n      self.endLoading();\n\n      // Add error messages\n      self.showErrorMessage(message);\n    });\n  },\n\n  /**\r\n      * Show the error message when something went wrong with the service.\r\n      * @param error\r\n      */\n  showErrorMessage: function showErrorMessage(error) {\n    var self = this;\n    var form = self.getFormContainer();\n    var messageText = self.resources.getResource('render-upload-alert-maxsize').replace(\"{0}\", BIZAGI_SETTINGS.UploadMaxFileSize);\n\n    try {\n      messageText = error && typeof error.responseText !== \"undefined\" ? JSON.parse(error.responseText).message : error;\n    } catch (e) {\n    }\n\n    form.addErrorMessage(messageText);\n    form.endLoading();\n  },\n\n  /**\r\n      * Shows the document if the flag is set. (virtual Function)\r\n      */\n  autoOpenDocuments: function autoOpenDocuments() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @param url\r\n      * @param filename\r\n      */\n  showDocumentPreview: function showDocumentPreview(url, filename) {\n  },\n\n  /**\r\n      * Identifies the extension of the file in a simpler way that ECM does\r\n      * @param file\r\n      * @returns {string}\r\n      */\n  returnCssTypeFile: function returnCssTypeFile(file) {\n\n    if (file == undefined || file.lenght === 0) {\n      return \"ui-bizagi-document-upload-item-generic-file\";\n    }\n\n    var extension = file.substr(file.lastIndexOf('.') + 1);\n\n    switch (extension) {\n      case 'docx':\n        return \"ui-bizagi-document-upload-item-doc\";\n      case 'pdf':\n        return \"ui-bizagi-document-upload-item-pdf\";\n      case 'xlsx':\n        return \"ui-bizagi-document-upload-item-xls\";\n      default:\n        return \"ui-bizagi-document-upload-item-generic-file\";}\n\n  },\n\n  /**\r\n      * Redraw documents when needed\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadAllDocuments) {\n    var self = this;\n    var control = self.getControl();\n    var html = \"\";\n    var documentContainer = $(\"[data-component='files']\", control);\n\n    // Clear current links\n    documentContainer.empty();\n\n    // Draw links again\n    html += this.renderDocumentsHtml(documents);\n\n    // Check if there are documents and the flag to download all are available to show the link.\n    html += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    documentContainer.append(html);\n\n    //Set value\n    self.setValue(documents);\n  },\n\n  /**\r\n      * This method must be implemented by the specific class of each device. (Virtual method)\r\n      * @param file\r\n      * @returns {*|*|*}\r\n      */\n  renderAllDocumentDownload: function renderAllDocumentDownload(file) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildAllDocumentsUrl();\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: properties.allowDelete,\n      filename: file.fileName,\n      mode: mode,\n      joined: true });\n\n\n    return self.removeDeleteButton(html);\n  },\n\n  /**\r\n      * removeDeleteButton\r\n      * @param html\r\n      * @returns {*}\r\n      */\n  removeDeleteButton: function removeDeleteButton(html) {\n    var startIndex = html.indexOf(\"<span class=\\\"ui-bizagi-container-documents-item-delete\");\n\n    if (startIndex > 0) {\n      var restOfWord = html.substring(startIndex);\n      var finishIndex = restOfWord.indexOf(\"</span>\") + 7;\n\n      return html.substring(0, startIndex) + restOfWord.substring(finishIndex);\n    } else {\n      return html;\n    }\n  },\n\n  /**\r\n      * Process request of DeleteDocumentTemplate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDocumentTemplateGenerate: function resolveDocumentTemplateGenerate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.autoOpenDocuments();\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Process request of DocumentTemplateGenerate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDeleteDocumentTemplate: function resolveDeleteDocumentTemplate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Method to renders the documents\r\n      * @param documents\r\n      * @returns {string}\r\n      */\n  renderDocumentsHtml: function renderDocumentsHtml(documents) {\n    var items = \"\";\n\n    for (var i = 0; i < documents.length; i++) {\n      var document = { id: documents[i][0], fileName: documents[i][1] };\n      var item = this.renderDocumentItem(document);\n\n      items += item;\n    }\n\n    return items;\n  },\n\n  /**\r\n      * Methos to renders action of document\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      * @returns {string}\r\n      */\n  renderActionsHtml: function renderActionsHtml(documents, noFiles, downloadAllDocuments) {\n    var actions = \"\";\n\n    if (downloadAllDocuments && !noFiles && documents.length > 0) {\n      var downloadAllDocumentsLink = { fileName: this.getResource(\"render-document-downloadalldocuments\") };\n      var action = this.renderAllDocumentDownload(downloadAllDocumentsLink);\n\n      actions += action;\n    }\n\n    return actions;\n  },\n\n  getTemplate: function getTemplate() {\n    return \"document\";\n  },\n\n  getTemplateItem: function getTemplateItem() {\n    return \"document-item\";\n  },\n\n  getErrorTemplate: function getErrorTemplate() {\n    return \"form-error\";\n  },\n\n  getTemplateDownload: function getTemplateDownload() {\n    return \"document-download\";\n  },\n\n  getTemplateReadonly: function getTemplateReadonly() {\n    return \"document-readonly\";\n  },\n\n  /**\r\n      * Get blob file\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  getDocumentFile: function getDocumentFile(file) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getFile({\n      idRender: properties.id,\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      contexttype: properties.contexttype }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  /**\r\n      * Get the download all items item\r\n      * @returns {*}\r\n      */\n  getAllDocumentFiles: function getAllDocumentFiles() {\n    return this.dataService.getAllDocuments({\n      xpath: this.getDocumentXpath(this.properties.xpath),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache,\n      idCase: this.properties.caseId,\n      idWorkItem: this.properties.workitemId }).\n    then(function (response) {\n      return bizagi.util.handleJSONResponse(response);\n    });\n  },\n\n  /**\r\n      * Download file\r\n      * @param file\r\n      */\n  downloadFile: function downloadFile(file) {\n    var self = this;\n\n    this.getDocumentFile(file).then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (error) {\n      var form = self.getFormContainer();\n      form && form.failHandler(error);\n    });\n  },\n\n  /**\r\n      * Download file\r\n      * @param file\r\n      */\n  downloadAllFiles: function downloadAllFiles(file) {\n    var self = this;\n\n    this.getAllDocumentFiles().then(function (blobFile) {\n      bizagi.util.downloadBlobFile(blobFile, file.filename);\n    }).fail(function (error) {\n      var form = self.getFormContainer();\n      form && form.failHandler(error);\n    });\n  } });","/*\r\n*   Name: Bizagi Render Cascading Combo Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for cascading combo renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.cascadingCombo\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Create dependency collection\n    self.dependants = [];\n    self.isDependant = false;\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.hasLocalData = bizagi.util.isEmpty(properties.parentCombo) ? properties.hasLocalData : false;\n\n    if (properties.value && properties.value.id === undefined)\n    properties.value = null;\n\n    self.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData)\n    properties.data = self.complementData(properties.data);\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n\n    // Check if this is a dependant combo\n    var parentCombo = self.parentCombo = self.getParentCombo();\n    if (parentCombo != null) {\n      var renderType = bizagi.util.normalizeType(parentCombo.properties.type);\n\n      if (/^cascadingcombo$/i.test(renderType)) {\n        self.isDependant = true;\n      }\n    }\n\n    // Apply element plugin, set a flag to avoid dependant combo ajax requests\n    self.initializingCascadingCombo = true;\n\n    // Call base\n    var result = this._super();\n\n    if (mode !== \"execution\") {\n      self.initializingCascadingCombo = false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n  /*\r\n     *   Refresh the combo, after it has been painted\r\n     */\n  refresh: function refresh(params, isInitialValue) {\n    var self = this;\n\n    // Wait until current element is rendered\n    $.when(self.isRendered()).done(function () {\n\n      // Unbind previous handler\n      // self.parentCombo.unbindDependantCombo(self);\n\n      // Clear current control\n      var control = self.getControl();\n      var mode = self.getMode();\n      control.empty();\n\n      // Render combo again\n      $.when(self.renderCombo(params)).then(function (html) {\n        // Append new element\n        control.html(html);\n\n        // Post-render method\n        self.postRender();\n\n        if (mode == \"execution\") {\n          self.configureHandlers();\n        }\n\n        // Set current value\n        if (self.getValue() !== undefined) {\n          self.setDisplayValue(self.getValue());\n        }\n\n        if (self.deferredVisible) {\n          self.deferredVisible.resolve();\n        }\n\n        self.trigger(\"select\", [self.value, isInitialValue]);\n\n      });\n    });\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode != \"execution\") return self.getDummyData();\n\n    // Do not load dependant combos when there are no parent id\n    if (self.isDependant) {\n      if (self.parentCombo && params) {\n        self.properties.remoteDataLoaded = false;\n      }\n\n      // Return an empty array when there are no parent defined when the combo is dependant\n\n      var parentValue = self.parentCombo.selectedValue ? self.parentCombo.selectedValue.id : '';\n\n      if (parentValue != '') {\n        params = params || {};\n        if (!params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"]) {\n          params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n        }\n        return this._super(params);\n      } else {\n        return [];\n      }\n    }\n\n    return this._super(params);\n  },\n\n\n  /* \r\n     *   Bind the combos to create the cascading feature\r\n     */\n  bindDependantCombo: function bindDependantCombo(dependantCombo) {\n    var self = this;\n    var renderType = bizagi.util.normalizeType(dependantCombo.properties.type);\n\n    // Check it is a cascading combo\n    if (/^cascadingcombo$/i.test(renderType)) {\n\n      // Append to dependant combos\n      self.dependants.push(dependantCombo);\n\n      // When this combo is selected we need to make the other combo to auto fill with an extra filter\n      dependantCombo.onChangeFunction = function (event, item, isInitialValue) {\n        // Fill items for next combo\n        self.refreshDependantCombo(dependantCombo, item.id, self.focusDependant, isInitialValue);\n\n        //if initial value is true, it prevents deleting the next combo\n        if (!isInitialValue) {\n          // Clean next inputs\n          dependantCombo.cleanInput();\n        }\n      };\n\n      if (!self.isEventBinded(\"select\")) {\n        self.bind(\"select\", dependantCombo.onChangeFunction);\n      }\n\n      // After the event binding has been made, we need to fill the new dependant render if this instance (the parent) has a value\n      if (!bizagi.util.isEmpty(self.getValue())) {\n\n        // Auto fill dependant items with current value\n        if (self.properties.hasLocalData) {\n          self.refreshDependantCombo(dependantCombo, self.getValue().id);\n        }\n\n      }\n    }\n  },\n  isEventBinded: function isEventBinded(event) {\n    if (typeof $._data(this.observableElement.get(0), \"events\") === \"undefined\") {\n      return false;\n    } else {\n      if (typeof $._data(this.observableElement.get(0), \"events\")[event] === \"undefined\") {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n\n\n  /* \r\n     *   Unbind the combos that are being redrawn\r\n     */\n  unbindDependantCombo: function unbindDependantCombo(dependantCombo) {\n    // When this combo is selected we need to make the other combo to auto fill with an extra filter\n    this.unbind(\"select\", dependantCombo.onChangeFunction);\n  },\n\n  /*\r\n     *   Fills the next dependant combo based on the given value\r\n     */\n  refreshDependantCombo: function refreshDependantCombo(dependant, parentValue, focus, isInitialValue) {\n    var self = this;\n    var params = {};\n    params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n\n    dependant.deferredVisible = $.Deferred();\n\n    if (!isInitialValue) {\n      // Clear dependant value\n      dependant.setValue(\"\", false);\n    }\n\n    dependant.refresh(params, isInitialValue);\n\n    if (focus) {\n      $.when(dependant.deferredVisible.promise()).done(function () {\n        dependant.inputCombo.trigger(\"click\");\n      });\n    }\n  },\n\n  /*\r\n     *   Empty html when render from action\r\n      */\n\n  emptyControlByChangeEditability: function emptyControlByChangeEditability() {\n    var control = this.getControl();\n    control.empty();\n  },\n\n  /* \r\n     *   Cleans the combo value\r\n     */\n  cleanInput: function cleanInput() {\n    this.triggerHandler(\"select\", { id: 0 });\n  },\n\n  /*\r\n     *   Search for the other cascading combo refering this one, by idRender\r\n     */\n  getParentCombo: function getParentCombo() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check if parentCombo is defined\n    if (properties.parentCombo === undefined)\n    return null;\n\n    // Get form reference\n    var form = self.getFormContainer();\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n    var controls = /^cascadingcombo$/i.test(renderType) ? form.getRenderByType(properties.type) : [];\n\n    var i = 0;\n    var j = 0;\n    var parents = [];\n\n    var control = null;\n\n    for (; i < controls.length; i++) {\n      if (properties.parentCombo === controls[i].properties.id) {\n        parents.push({ control: controls[i], index: i });\n      }\n    }\n\n    if (parents.length > 1) {\n      var parentLength, parent, xpathParent, parentArray;\n\n      for (; j < parents.length; j++) {\n        parent = parents[j].control;\n        xpathParent = parent.properties.xpath;\n        parentArray = xpathParent.split(\".\");\n        parentLength = parentArray.length;\n        xpathParent = parentArray.slice(0, parentLength - 1).join(\".\");\n\n        if (xpathParent === properties.xpath) {\n          control = controls[parents[j].index];\n          break;\n        }\n      }\n    } else {\n      control = form.getRenderById(properties.parentCombo);\n    }\n\n    // Return parent combo\n    return control;\n  },\n\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this;\n\n    // If the render has dependants we can't send to the server\n    return self._super() && bizagi.util.isMapEmpty(self.dependants);\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    var mode = this.getMode();\n\n    if (mode != \"execution\") return true;\n    return false;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n\n    if (!self.configured) {\n      // Call super\n      self._super();\n      self.configured = true;\n    }\n  },\n\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (self.isDependant && self.canBeSent() && self.itemSelected !== undefined)\n    return self._super(data, bRefreshForm);\n    return defer.resolve();\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    // Call original method\n    self._super();\n\n    if (self.value && self.isDependant == false) {\n      self.internalSetInitialValueFlag = true;\n      self.trigger(\"select\", [self.value, true]);\n    }\n\n    self.internalSetInitialValueFlag = false;\n  } });","/*\r\n*   Name: Bizagi Render List Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for list renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.list\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data \r\n                                               * @returns {} \r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.listSize = properties.listSize || 0;\n  },\n\n  /**\r\n      * Gets the template used by the combo render can be overriden in subclasses\r\n      * to reuse logic and just change the template\r\n      * @returns {} \r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"list\";\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs\r\n      * to data or not Can be overriden to change behaviour    \r\n      * @returns {} \r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  } });","/**\r\n *   Name: Bizagi Render MultiSelect Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for multiselect renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.multiSelect\", {}, {\n\n  /**\r\n                                                      * Update or init the element data\r\n                                                      * @param data\r\n                                                      */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    if (Array.isArray(this.value)) {\n      this.value = this.properties.value = JSON.encode({ \"value\": this.value });\n      this.properties.originalValue = this.properties.previousValue = this.value;\n    }\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.enableTyping = bizagi.util.parseBoolean(properties.enableTyping) !== null ? bizagi.util.parseBoolean(properties.enableTyping) : true;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @returns {*[]}\r\n      */\n  getData: function getData() {\n    var self = this;\n    var defer = new $.Deferred();\n    var properties = this.properties;\n\n    // Go to server\n    self.dataService.multiaction().getData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contexttype || null,\n      idPageCache: properties.idPageCache }).\n    done(function (data) {\n      properties.data = self.normalizeData(data);\n\n      defer.resolve(properties.data);\n\n    }).fail(function (data) {\n      var allowActions = true;\n      var form = self.getFormContainer();\n\n      if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\") {\n        allowActions = form.allowOnlineActions();\n      }\n\n      if (data.type === \"not-processed\" && allowActions) return;\n\n      defer.reject(data);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (Array.isArray(value)) {\n      value = JSON.encode({ \"value\": value });\n    }\n\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.value || [];\n  },\n\n  /**\r\n      * Get list of data\r\n      * @returns {*|Array}\r\n      */\n  getDataValue: function getDataValue() {\n    var list;\n\n    try {\n      list = JSON.parse(this.value);\n\n      return list.value || [];\n    } catch (e) {\n      return [];\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {*|Array|boolean}\r\n      */\n  hasValue: function hasValue() {\n    var values = this.getDataValue();\n\n    return values && values.length > 0;\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".bz-multiselect .bz-multiselect__tag:not(.bz-multiselect__plus)\", context);\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value\r\n      */\n  addElement: function addElement(value) {\n    var newValue = this.getDataValue();\n\n    newValue.push(value);\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value\r\n      */\n  removeElement: function removeElement(value) {\n    var idToRemove = value.id;\n    var newValue = this.getDataValue().\n    filter(function (item) {\n      return item.id !== idToRemove;\n    });\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Submit the selected data to the server in order to be saved\r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Mark a item how checked\r\n      * @param id\r\n      * @returns {*}\r\n      */\n  markAsChecked: function markAsChecked(id) {\n    var self = this;\n\n    return self.selected.some(function (item, index) {\n      var found = item.id === id;\n\n      if (found) self.selected.splice(index, 1);\n      return found;\n    });\n  },\n\n  isChecked: function isChecked(values, id) {\n    return values.some(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Method to verify if can add more items\r\n      * @param $tagsContainer\r\n      * @returns {boolean}\r\n      */\n  canAddMoreItems: function canAddMoreItems($tagsContainer) {\n    var self = this;\n    var containerWidth = parseInt($tagsContainer.css(\"width\"));\n    var $children = $tagsContainer.children();\n\n    var childrenWidth = $children.\n    toArray().\n    reduce(function (acc, child) {\n      acc += self.getElementWidth(child);\n      return acc;\n    }, 0);\n\n    return containerWidth > childrenWidth + self.Class.MORE_OPTION_WIDTH;\n\n  },\n\n  /**\r\n      * getElementWidth\r\n      * @param element\r\n      * @returns {*}\r\n      */\n  getElementWidth: function getElementWidth(element) {\n    var styles = window.getComputedStyle(element);\n    var outerWidth = $(element).outerWidth();\n    return outerWidth + [\n    \"padding-left\",\n    \"padding-right\",\n    \"margin-left\",\n    \"margin-right\"].\n    reduce(function (acc, property) {\n      acc += parseInt(styles[property]);\n      return acc;\n    }, 0);\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * @param query\r\n      * @param $container\r\n      */\n  filterList: function filterList(query, $container) {\n\n    $container.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = query.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n  },\n\n  /**\r\n      * Find item by id\r\n      * @param id\r\n      * @returns {[]}\r\n      */\n  findItemById: function findItemById(id) {\n    return (this.properties.data || []).find(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  },\n\n  /**\r\n      * Complement data from server before control implementation\r\n      * @param data\r\n      */\n  normalizeData: function normalizeData(data) {\n    (data || []).forEach(function (item) {\n      item.value = typeof item.value !== \"undefined\" && item.value !== null ? item.value : \"\";\n    });\n\n    return data;\n  } });","/*\r\n*   Name: Bizagi Render Search List Control\r\n*   Author: UI Forms Team\r\n*/\n\n$.Class.extend(\"bizagi.rendering.searchList\", {}, {\n\n  /**\r\n                                                     * Update or init the element data\r\n                                                     * @param {} data \r\n                                                     * @returns {} \r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // Set value\n    self.setValue(properties.value);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {} \r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      value: properties.value,\n      allowTyping: properties.allowTyping,\n      items: properties.value,\n      hasSearchForm: properties.searchForms ? true : false,\n      editable: properties.editable },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {} \r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setValue: function setValue(value) {\n    this.value = JSON.encode({ \"value\": value });\n    this.triggerRenderChange();\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value = { id:integer,value:[string || array] }\r\n      * @returns {} \r\n      */\n  addElement: function addElement(value) {\n    var list = JSON.parse(this.value);\n\n    list.value.push(value);\n\n    this.setValue(list.value);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value = { id:integer }\r\n      * @returns {} \r\n      */\n  removeElement: function removeElement(value) {\n    var list = JSON.parse(this.value);\n    var result = [];\n\n    $.each(list.value, function (key, val) {\n      if (val.id != value.id) {\n        result.push({ id: val.id, value: val.value });\n      }\n    });\n\n    this.setValue(result);\n  },\n\n  /**\r\n      * Remove last element to global value\r\n      * @returns {} \r\n      */\n  removeLastElement: function removeLastElement() {\n    var list = JSON.parse(this.value);\n\n    if (list.value.length > 0) {\n      list.value.pop();\n      this.setValue(list.value);\n    }\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    self.dataService.getSearchData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {} \r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {} \r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Check if the control has value\r\n      * @returns {} \r\n      */\n  hasValue: function hasValue() {\n    var list = this.getListItems();\n\n    return list.length > 0;\n  },\n\n  getListItems: function getListItems() {\n    var value = this.getValue();\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    return finalValue || [];\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","/**\r\n *   Name: Bizagi Render Money Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for money numbers\r\n */\n\n$.Class.extend(\"bizagi.rendering.money\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      var symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol : symbol;\n    } else {\n      properties.symbol = \"\";\n    }\n\n    properties.groupDigits = true;\n  } });","/**\r\n *   Name: Bizagi Render Radio Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.radio\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param data\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n\n    // Set a random identifier to fix a problem when using radio buttons inside grids and the plugin mismatch the elements because all of them have the same name\n    properties.unique = bizagi.util.randomNumber(1000, 1000000);\n  },\n\n  /**\r\n      * Gets the template used by the combo render\r\n      * Can be overridden in subclasses to reuse logic and just change the template\r\n      * @returns {string}\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"radio\";\n  },\n\n  /**\r\n      * Determines if we need to show the empty node or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs to data or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /**\r\n      * Adds custom parameters to process the template\r\n      * @returns {{vertical: boolean}}\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal,\n      horizontal: properties.horizontal };\n\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n    var selectedItem = self.element.find(\".ui-radio-state-checked\");\n\n    selectedItem.removeClass(\"ui-radio-state-checked\");\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n    self.clearDisplayValue();\n  },\n\n  /**\r\n      * Check value of control is changed\r\n      * @returns {boolean}\r\n      */\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n\n    var result = true;\n\n    if (value && value.length !== undefined) {\n      value = value[0];\n    }\n    if (compareValue && compareValue.length !== undefined) {\n      compareValue = compareValue[0];\n    }\n    if (baseValue && baseValue.length !== undefined) {\n      baseValue = baseValue[0];\n    }\n\n    value = value && value.id !== undefined ? value.id : value;\n    compareValue = compareValue && compareValue.id !== undefined ? compareValue.id : compareValue;\n    baseValue = baseValue && baseValue.id !== undefined ? baseValue.id : baseValue;\n\n    if (baseValue !== undefined) {\n      if (baseValue == value && value == compareValue) {\n        result = false;\n      } else {\n        if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n          result = false;\n        } else {\n          result = compareValue == value ? false : true;\n        }\n      }\n    } else {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    }\n\n    return result;\n  },\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var control = this.getControl();\n    control.empty();\n  } });","/*\r\n*   Name: BizAgi User field render\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the basic behavior for userfields\r\n*/\n$.Class.extend(\"bizagi.rendering.userfieldDefinition\", {}, {\n\n  /*************************************************************/\n  /* Private section of the userfield                          */\n  /*************************************************************/\n\n  /*\r\n                                                                  *   Method to be overriden by userfields in order to ensure that custom files are loaded before the execution\r\n                                                                  */\n  getFileDependencies: function getFileDependencies() {\n    return null;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    var defer = $.Deferred();\n    var fileDependencies = self.getFileDependencies();\n    if (fileDependencies && fileDependencies.length > 0) {\n      bizagi.loader.loadFile(fileDependencies).\n      then(function () {\n        // After all dependencies has been resolved\n        self.internalRenderControl();\n        defer.resolve();\n      });\n\n    } else {\n      $.when(self.renderUserfieldControl()).done(function () {\n        defer.resolve();\n      });\n    }\n\n    return defer.promise();\n  },\n\n  renderUserfieldControl: function renderUserfieldControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n\n    var loadUserfield = function loadUserfield() {\n      var userEditableControl = self.getEditableControl();\n      if (userEditableControl) {\n        self.input = control.html(userEditableControl);\n      }\n      self.renderComplex();\n      def.resolve();\n    };\n\n\n    loadUserfield();\n\n\n    return def.promise();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n    var loadUserfieldReadOnly = function loadUserfieldReadOnly() {\n      try {\n        var userReadOnlyControl = self.getReadonlyControl();\n        if (userReadOnlyControl) {\n          self.input = control.html(userReadOnlyControl);\n        }\n        self.renderComplex();\n\n      } catch (error) {\n        var displayName = self.properties.displayName || \"Widget\";\n        control.html(\"<h6>\" + displayName + \"</h6>\");\n      }\n\n    };\n\n    if (self.ready) {\n      self.ready().done(function () {\n        loadUserfieldReadOnly();\n      });\n    } else {\n      loadUserfieldReadOnly();\n    }\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getReadonlyValue();\n  },\n\n  /*\r\n     *   Sets the value in the rendered control \r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call base\n    self.setValue(value);\n\n    // Set editable value in control\n    self.setEditableValue(value);\n  },\n\n  getValue: function getValue() {\n    var self = this;\n    return self.getEditableValue();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type == \"error\") {\n        // Workflow engine error, we gotta show it with error\n        self.getFormContainer().addErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Saves the form\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderElements: function getRenderElements(xpath) {\n    var self = this;\n    var result = $();\n    var controls = self.getFormContainer().getRenders(xpath);\n    $.each(controls, function (i, item) {\n      result = result.add($(item.element));\n    });\n\n    return result;\n  },\n\n  getServerResourceURL: function getServerResourceURL(resource) {\n    var self = this;\n    var url = \"Rest/Userfields/{0}/resource/{1}/{2}\";\n    url = url.replace(\"{0}\", self.properties.userfieldGuid);\n    resource = resource.replace(\"\\\\\", \"__\").replace(\"/\", \"__\");\n    var device = bizagi.util.detectDevice();\n    url = url.replace(\"{1}\", device);\n    url = url.replace(\"{2}\", resource);\n    //Rest/Userfields/{0}/resource/desktop/{1}\n    return url;\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderValue: function getRenderValue(xpath) {\n    var self = this;\n    var controls = self.getFormContainer().getRenders(xpath);\n    var control;\n    $.each(controls, function (index, item) {\n      if (!control || item.properties.editable) {\n        control = item;\n      }\n    });\n    if (control) {\n      return control.getValue();\n    } else {\n      return null;\n    }\n  },\n\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var form = self.getFormContainer();\n    form.refreshForm(properties.id);\n  },\n\n  /*\r\n     * Shows a jquery dialog\r\n     */\n  showDialog: function showDialog(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showDialog method\");\n  },\n\n  /*\r\n     *   Shows a browser popup\r\n     */\n  showPopup: function showPopup(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showPopup method\");\n  },\n\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value = self.properties.value;\n  } });\n\n\n\n\n\n$.Class.extend(\"bizagi.rendering.basicUserField\", {}, {\n\n  /*************************************************************/\n  /* methods to be overriden by the implementations            */\n  /*************************************************************/\n  getEditableControl: function getEditableControl() {\n  },\n\n  renderComplex: function renderComplex() {\n  },\n\n  // Returns the value of the control\n  getEditableValue: function getEditableValue() {\n    return bizagi.rendering.render.prototype.getValue.apply(this, arguments);\n  },\n\n  // \n  setEditableValue: function setEditableValue(value) {\n    return bizagi.rendering.render.prototype.setValue.apply(this, arguments);\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n  },\n\n  getReadonlyValue: function getReadonlyValue() {\n    // if the method is not overriden then call the parent method \n    return bizagi.rendering.render.prototype.getDisplayValue.apply(this, arguments);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    // Call base\n    self._super();\n  } });\n\n\n\n/*\r\n        *   This control will wrap any userfield in order to load the code remotely, \r\n        *   when executing renderControl, which is an async method\r\n        */\n$.Class.extend(\"bizagi.rendering.userfieldWrapper\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n    // Save userfield guid and name\n    self.initialParams = params;\n    self.userfieldGuid = this.properties.userfieldGuid;\n    self.userfieldName = this.properties.control;\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startUserfieldLoading: function startUserfieldLoading() {\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endUserfieldLoading: function endUserfieldLoading() {\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  internalPostRender: function internalPostRender() {\n    var self = this;\n    self.startUserfieldLoading();\n    $.when(self.getUserfieldControl()).\n    done(function (control) {\n      control.element = self.element;\n\n      // Add grid and surrogatekey properties if the userfield is a column userfield\n      if (self.column) {\n        control.isColumn = true;\n        control.grid = self.grid;\n        control.surrogateKey = self.surrogateKey;\n        control.properties.xpathContext = self.getControlXpathContext(control);\n        control.getControl = self.column.getControl;\n      }\n\n      return control.internalPostRender();\n    }).\n    always(function () {\n      self.endUserfieldLoading();\n    });\n  },\n\n  /*\r\n     *   Helper for userfields to fetch the xpathContext\r\n     */\n  getControlXpathContext: function getControlXpathContext(control) {\n    var self = this;\n    var properties = control.properties;\n\n    if (control.isColumn) {\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\" : control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\";\n    }\n\n    return properties.xpathContext;\n  },\n\n\n  getUserFieldInstance: function getUserFieldInstance(params) {\n    console.log(\"not implemented\");\n  },\n\n  /*\r\n     *   Replicate all userfield methods to this instance in order to create a proxy\r\n     */\n  replicateUserfieldMethods: function replicateUserfieldMethods(control) {\n    var self = this;\n    for (var key in control.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"subscribe\" || key == \"unsubscribe\" ||\n      key == \"publish\" || key == \"render\" || key == \"triggerHandler\" || key == \"dispose\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ if (this.userfieldInstance) return this.userfieldInstance.' + key + '.apply(this.userfieldInstance, arguments); return null;};tmp');\n    }\n\n    // Replicate properties and value\n    control.properties = self.properties;\n    control.value = self.value;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutUserField = setTimeout(function () {\n      if (self.userfieldInstance) {\n        self.userfieldInstance.unbind(\"renderchange\");\n        self.userfieldInstance.dispose();\n      }\n      clearTimeout(timeOutUserField);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","/**\r\n *   Name: Bizagi Render Image Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for image control\r\n */\n\n$.Class.extend(\"bizagi.rendering.image\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\n{\n\n  BASE_IMAGE: \"data:image/png;base64,\",\n\n  /**\r\n                                         * Update or init the element data\r\n                                         * @param data\r\n                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var maxSize = 4091904;\n\n    if (properties.maxSize) {\n      maxSize = Number(properties.maxSize);\n    } else if (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\") {\n      maxSize = Number(BIZAGI_SETTINGS.UploadMaxFileSize);\n    }\n\n    properties.maxSize = maxSize;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) === true;\n    properties.validExtensions = properties.validExtensions || \"\";\n    properties.isChanged = false;\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length != 0) {\n          singleExtensions[i] = \"*.\" + singleExtensions[i].replaceAll(\" \", \"\");\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddFileUrl(properties.isUserPreference);\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null;\n    self.initializeWidthAndHeight();\n\n  },\n\n  /**\r\n      * Update or init the element data\r\n      * @param data\r\n      */\n  initializeWidthAndHeight: function initializeWidthAndHeight() {\n    var properties = this.properties;\n\n    properties.isAutoWidth = false;\n    properties.isAutoHeight = false;\n\n    if (properties.width === -1) {\n      properties.width = \"100%\";\n      properties.isAutoWidth = true;\n    } else {\n      properties.width = properties.width + \"px\";\n    }\n\n    if (properties.height === -1) {\n      properties.height = \"auto\";\n      properties.isAutoHeight = true;\n    } else {\n      properties.height = properties.height + \"px\";\n    }\n  },\n\n  setData: function setData(value) {\n    var self = this;\n    var previousValue = self.getData();\n    if (bizagi.util.isEmpty(value)) {\n      this.properties.binaryValue = null;\n    } else {\n      this.properties.binaryValue = value instanceof Blob ? value : bizagi.util.b64toBlob(value, \"image/png\");\n    }\n\n    if (previousValue != this.properties.binaryValue) {\n\n      if (self.properties.required && self.isExecutionMode()) {\n        var isValidField = !self.checkRequired([]);\n        self.changeRequiredLabel(isValidField);\n      }\n\n      if (this.properties.isChanged) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  getData: function getData() {\n    return this.properties.binaryValue || [];\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"image\");\n    var form = self.getFormContainer();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      if (!self.isDisposed()) {\n        self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\n\n        if (!bizagi.util.isEmpty(self.properties.url)) {\n          if (form.properties.compatibilityVersion < 2)\n          self.properties.value = [[0, \"uploaded\"]];\n        } else {\n          self.properties.value = [];\n        }\n\n        self.setValue(self.properties.value);\n\n        var html = $.fasttmpl(template, { url: self.properties.url });\n        return html;\n      }\n    });\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"image-readonly\");\n    var html = $.fasttmpl(template);\n\n    return html;\n  },\n\n  /**\r\n      * This method return the name of template of items, please make a override in each device\r\n      * @returns {*}\r\n      */\n  getTemplateItem: function getTemplateItem() {\n    return this.renderFactory.getTemplate(\"image-item\");\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  renderUploadItem: function renderUploadItem() {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.getTemplateItem();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      var url = dataUrl || \"\";\n\n      var html = $.fasttmpl(template, {\n        url: url,\n        allowDelete: self.properties.allowDelete,\n        editable: self.properties.editable,\n        mode: mode });\n\n\n      self.properties.url = url;\n\n      return html;\n    });\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(params) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var url = \"\";\n\n    if (!this.isExecutionMode()) return $.Deferred().resolve(\"\").promise();\n\n    var parameters = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype,\n      property: params && params.property ? params.property : \"fileContent\",\n      dataType: \"text\" };\n\n\n    if (properties.isUserPreference) {\n      self.currentUser = bizagi.currentUser.idUser;\n      parameters.xpathContext = \"@Context.Users[id == \" + self.currentUser + \"]\";\n      parameters.contexttype = \"entity\";\n      parameters.surrogatekey = self.currentUser;\n    }\n\n    if (isVersion2OrSuperior) {\n      if (bizagi.util.isEmpty(self.properties.value) && !self.hasValue()) return $.Deferred().resolve(\"\").promise();\n\n      // forceBase64 - Allow to get the thumbnail image on desktop devices\n      if (!self.properties.forceBase64) {\n        parameters.sessionId = form.properties.sessionId;\n        parameters.property = \"fileBinaryContent\";\n        return self.dataService.downloadFile(parameters).\n        then(function (blob) {\n          self.setData(blob);\n          if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n          return bizagi.util.blobTob64(blob, false);\n        }).\n        then(function (base64) {\n          return bizagi.util.getDataUrl(base64, properties.url);\n        });\n      }\n    }\n\n    return self.dataService.multiaction().getPropertyData(parameters, \"text\").\n    then(function (data) {\n      if (data.charAt(0) === \"\\\"\") data = data.slice(1, -1);\n      if (data !== \"\") url = self.BASE_IMAGE + data;\n      self.setData(bizagi.util.b64toBlob(data));\n      return url;\n    });\n  },\n\n  buildItemUrlOffline: function buildItemUrlOffline() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getFormParams();\n    var loadImageFromForm = !properties.isChanged;\n    var id = self.buildOfflineImageId();\n\n    var parameters = {\n      idCase: formParams.idCase,\n      idWorkitem: formParams.idWorkitem,\n      id: id,\n      offlineType: formParams.offlineType,\n      loadImageFromForm: loadImageFromForm };\n\n\n    return $.when(self.dataService.getOfflineImage(parameters, bizagi.util.db.AttachmentType.Blob)).\n    then(function (blob) {\n      self.setData(blob);\n      if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n      return bizagi.util.blobTob64(blob, false);\n    }).\n    then(function (base64) {\n      return bizagi.util.getDataUrl(base64, properties.url);\n    });\n  },\n\n  /**\r\n      * Create an image offline\r\n      * @param path File in Browser or Path in Mobile Devices\r\n      * @param promise Promise to be resolved when save is completed\r\n      */\n  saveImageOffline: function saveImageOffline(path) {\n    var self = this;\n    var id = self.buildOfflineImageId();\n    var fileName = self.fileProperties !== undefined ? self.fileProperties.name : path.name;\n\n    return self.dataService.getFileService().resolveBlobFromPath(path, fileName).\n    then(function (blobImage) {\n      // Save the image as attachment\n      var formParams = self.getFormParams();\n      var parameters = {\n        idCase: formParams.idCase,\n        idWorkitem: formParams.idWorkitem,\n        id: id,\n        operationType: \"edition\",\n        offlineType: formParams.offlineType };\n\n\n      return self.dataService.saveOfflineImage(parameters, blobImage);\n    });\n  },\n\n  /**\r\n      * Builds the upload item url in real size\r\n      * @returns {*}\r\n      */\n  buildFullItemUrl: function buildFullItemUrl() {\n    return this.buildItemUrl({ \"property\": \"fileFullContent\" });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return this.properties.isChanged;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.properties.value || [];\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.visible) === false) {\n      return true;\n    }\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (self.properties.required) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (!newRow) {\n        var value = self.getValue();\n\n        if (value.length === 0) {\n          var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({ xpath: self.properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = self.getUploadXpath();\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = properties.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = properties.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = 'savefile';\n\n    if (properties.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contexttype;\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var $control = this.getControl();\n    $control.empty();\n  },\n\n  buildOfflineImageId: function buildOfflineImageId() {\n    var self = this;\n    var form = self.getFormContainer();\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n\n    return self.dataService.fileService.buildOfflineImageId(self.properties.value, self.properties.xpathContext, self.properties.xpath, isVersion2OrSuperior);\n  } });","/**\r\n *   Name: Bizagi Render Column ReadOnly Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly-columns\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.columns.readonly\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    // Define the column as readonly\n    properties.editable = required = false;\n  },\n\n  /**\r\n      * Return true if the column is read-only, so we can make a quick render\r\n      */\n  isReadonly: function isReadonly() {\n    return true;\n  },\n\n  /**\r\n      * Method to check if a value is valid or not in this render\r\n      */\n  isValueValid: function isValueValid() {\n    // It is always valid because the column is readonly\n    return true;\n  } });","/*\r\n*   Name: BizAgi Render Combo Column Decorator Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for Combo Columns\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.combo\", {}, {\n\n  /*\r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n    properties.recalculate = bizagi.util.parseBoolean(properties.recalculate) || false;\n\n    if (bizagi.util.isOfflineForm({ context: this })) {\n      properties.recalculate = false;\n    }\n  },\n\n\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n    var properties = this.properties;\n\n    this._super(decorated);\n\n    if (!properties.recalculate) {\n      decorated.originalGetData = decorated.getData;\n      decorated.getData = this.getDataForAllCells;\n      decorated.findDataById = this.findDataById;\n    }\n  },\n\n  findDataById: function findDataById(id) {\n    var self = this;\n    var result = {};\n    if (this.column && this.column.comboData) {\n      $.each(this.column.comboData, function (key, value) {\n        if (value.id == id) {\n          result = value;\n        }\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Single data fetch for all the cells\r\n     */\n  getDataForAllCells: function getDataForAllCells(params) {\n    var column = this.column;\n    if (column.comboData) return column.comboData;\n    if (column.fetchingData) return column.dataPromise;\n\n    // Start fetching\n    column.fetchingData = true;\n    column.dataPromise = $.when(this.originalGetData(params)).\n    pipe(function (result) {\n      column.comboData = result;\n      column.fetchingData = false;\n      return result;\n    });\n\n    return column.dataPromise;\n  },\n\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    if (value && bizagi.util.isString(value)) {\n      self._super(surrogateKey, value);\n    } else if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {return i != 0;}) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (self.properties.type == \"columnRadio\") {\n      self._super(surrogateKey, null);\n      decorated.selectedValue = value;\n    } else if (value && typeof value == \"number\") {\n      self._super(surrogateKey, value);\n    } else {\n      // Set null values when the entry array is null\n      self._super(surrogateKey, null);\n      decorated.selectedValue = \"\";\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultValue[0];\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value.id;\n\n    return value;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    var label = decorated.getSelectedValue();\n\n    // Build value for grid data\n    var valueForGrid = [];\n    if (value && (value.id > 0 || bizagi.util.isString(value.id))) {\n      valueForGrid.push([]);\n      valueForGrid[0].push(value.id);\n      valueForGrid[0].push(label);\n    } else {\n      valueForGrid.push([]);\n    }\n\n    return valueForGrid;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    if (value) return value.id;\n    return value;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  renderReadOnly: function renderReadOnly(key, value) {\n    var self = this;\n    var decorated = self.getDecorated(key);\n    var properties = self.properties;\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + key + \"]\" : self.grid.properties.xpath + \"[id=\" + key + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(key, value);\n\n    return result;\n  } });","/**\r\n*   Name: Bizagi Render Date Column Decorator Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for Date Columns\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.columns.date\", {}, {\n\n  /*\r\n                                                      *   Sets the internal value\r\n                                                      */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) return;\n\n    self._super(surrogateKey, value);\n    if ((value === null || value === undefined) && self.properties.defaultvalue !== undefined) {\n      value = self.setDefaultValue(surrogateKey, decorated);\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey === \"summary\") return self._super(surrogateKey, value);\n\n    if (value == null) {\n      decorated.setValue(value, false);\n      decorated.properties.displayValue = \"\";\n    }\n\n    var date = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime);\n\n    if (date === 0) {\n      // force another attempt in order to check invariant format for the value with time or without time (reverse option)\n      date = bizagi.util.dateFormatter.getDateFromInvariant(value, !decorated.properties.showTime);\n    }\n    // Format date to current format\n    if (date !== 0) {\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      var formattedDate = bizagi.util.dateFormatter.formatDate(date, decorated.properties.fullFormat, datePickerRegional);\n\n      // Set formatted value in display value property\n      decorated.properties.displayValue = formattedDate;\n\n      // Send original value to decorated control, because it must be with invariant format\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultvalue;\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n\n    value = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime || false);\n\n    value = bizagi.util.dateFormatter.formatInvariant(value, true);\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  } });","/**\r\n *   Name: BizAgi Render Combo Column Decorator Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define basic stuff for Combo Columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.search\", {}, {\n  /*\r\n                                                        *   Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    if (properties.advancedSearch && this.getMode() === \"execution\") {\n      properties.submitOnChange = bizagi.util.parseBoolean(properties.submitOnChange) || false;\n      properties.submitOnChange = (properties.submitVersion || 1) > 1 ? properties.submitOnChange : true;\n    }\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param decorated\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    // Change the xpath context\n    var xpathContext;\n\n    if (this.properties.xpathContext.length > 0) {\n      xpathContext = this.properties.xpathContext + \".\" + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    } else {\n      xpathContext = this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    }\n\n    decorated.properties.xpathContext = xpathContext;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    return value;\n  },\n\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    var compositeValue = self.getCompositeValue(surrogateKey);\n    if (!!compositeValue && typeof compositeValue.id !== \"undefined\" && compositeValue.id == value) {\n      value = compositeValue;\n    }\n\n    if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\n          return i != 0;\n        }) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (value && value.id && value.label) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.label;\n    } else {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = \"\";\n    }\n  } });","/**\r\n *   Name: Bizgi Render Hidden Column Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hidden-columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.hidden\", {}, {\n\n  /**\r\n                                                         * Method to determine if the render value can be sent to the server or not\r\n                                                         * @returns {}\r\n                                                         */\n  canBeSent: function canBeSent() {\n    return true;\n  } });","/**\r\n * Base definition of a range control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.range\", {}, {\n  /*\r\n                                                * Constructor\r\n                                                */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n  },\n\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    properties = self.properties;\n    var template;\n    var html = \"\";\n    // Render template\n    template = self.renderFactory.getTemplate(\"render-range\");\n    html = $.fasttmpl(template, {});\n    return html;\n  },\n  /**\r\n      * Sets the range controls in DOM\r\n      * @param minControl: min range control\r\n      * @param maxControl: max range control\r\n      */\n  setRanageControls: function setRanageControls(minControl, maxControl) {\n    var self = this;\n    self.minControl = minControl || null;\n    self.maxControl = maxControl || null;\n    var control = self.getControl();\n\n    var $maxCanvas = $(\".bz-range-maximum\", control);\n    var $minCanvas = $(\".bz-range-minimum\", control);\n\n    //var $maxCanvas = $('<div>hola</div>');\n    //var $minCanvas = $('<div>hola</div>');\n\n    self.renderRangeControl($minCanvas, minControl);\n    self.renderRangeControl($maxCanvas, maxControl);\n  },\n\n  /*\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    var self = this;\n    var minValue = self.minControl.getValue();\n    var maxValue = self.maxControl.getValue();\n\n    var value = {\n      min: minValue,\n      max: maxValue };\n\n    return value;\n  },\n\n  renderRangeControl: function renderRangeControl($canvas, control) {\n    $.when(control.render(\"render\")).done(function (html) {\n      $canvas.empty().append(html);\n      control.postRenderElement($canvas);\n    });\n  } });","/**\r\n * Base definition of a range date control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeDate\", {}, {\n\n  /**\r\n                                                    * Defines de min date an de max date to the range control\r\n                                                    */\n  defineRangeControl: function defineRangeControl(params) {\n    var self = this;\n\n    var dateMin = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var dateMax = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n\n    var minControl = new dateMin(self.getRenderProperties(\"min\"));\n    var maxControl = new dateMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range money control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeMoney\", {}, {\n\n  /**\r\n                                                     * Defines de min money an de max money to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var moneyMin = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var moneyMax = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new moneyMin(self.getRenderProperties(\"min\"));\n    var maxControl = new moneyMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range number control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeNumber\", {}, {\n\n  /**\r\n                                                     * Defines de min number an de max number to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var numberMin = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var numberMax = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new numberMin(self.getRenderProperties(\"min\"));\n    var maxControl = new numberMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    return renderProperties;\n  } });","/*\r\n *   Name: Bizagi Tablet slide form implementation\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n\n// Extends itself\n$.Class.extend('bizagi.rendering.tablet.slide.form', {}, {\n\n  /* CONSTRUCTOR\r\n                                                            =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n\n    if (self.slideContainer && self.slideContainer.destroy) {\n      self.slideContainer.destroy();\n    }\n    // Create container\n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {}\r\n      */\n  goBack: function goBack() {\n    var self = this;\n    self.slideContainer.destroy();\n  },\n\n  /**\r\n      * Handlers de la vista de kendo\r\n      * @returns {}\r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n    var self = this;\n  },\n\n  /**\r\n      * Render the form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params\r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n    // Fill content\n    self.renderSlideForm(params);\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n\n    var self = this;\n\n    var defer = new $.Deferred();\n\n    // Load template and data\n    $.when(self.dataService.getFormData(params)).then(function (data) {\n      /*** SUCCESS FILTER **/\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Render dialog template\n      var formClass = bizagi.rendering.form.extend({\n        submitForm: function submitForm() {\n          if (self.form) {\n            this.endLoading();\n            // Perform validations\n            if (self.form.validateForm()) {\n              // Collect data\n              var data = {};\n\n              self.form.collectRenderValues(data);\n\n              // Add page cache for this form\n              data.idPageCache = self.form.getPageCache();\n\n              // Call user callback\n              if (self.slideFormParams.onSave) {\n                $.when(self.slideFormParams.onSave(data)).\n                done(function (result) {\n                  if (result === null || result === true || result.type === \"success\") {\n                    defer.resolve();\n                    self.goBack();\n                  } else if (result.type === \"validationMessages\") {\n                    // Add validation messages\n                    self.form.addValidationMessage(result.messages);\n                    // Update original value to use as reference to other futures changes in the dialogBox\n                    $.each(data, function (key, value) {\n                      var renders = self.form.getRenders(key);\n                      $.each(renders, function (i, render) {\n                        render.updateOriginalValue();\n                      });\n                    });\n                  } else if (result.type === \"error\") {\n                    // Add error messages\n                    self.form.addErrorMessage(result.message);\n                  }\n                });\n\n              } else {\n                defer.resolve();\n                self.goBack();\n              }\n            }\n          }\n        } });\n\n\n      var containerParams = $.extend({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.slideContainer },\n      {\n        renderFactory: self.renderFactory,\n        dataService: self.renderFactory.dataService });\n\n\n      // Stop creating forms like there's no tomorrow\n      if (!self.form) {\n        self.form = new formClass(containerParams);\n      }\n\n      // Return rendering promise\n      return self.form.render();\n    }).done(function (element) {\n      // Append form  in the view\n      self.slideContainer.element.html(element);\n\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n\n      $(\".ui-bizagi-button-container div\", self.form.container).remove();\n\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append('<div ordinal=\"0\" id=\"formButton0\" class=\"action-button ui-bizagi-form-button\">Save</div>').\n      delegate('div[ordinal=\"0\"]', \"click\", function () {\n        self.form.submitForm();\n      });\n\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append('<div ordinal=\"1\" id=\"formButton1\" class=\"action-button ui-bizagi-form-button\">' +\n      bizagi.localization.getResource(\"render-form-dialog-box-cancel\") + \"</div>\").\n      delegate('div[ordinal=\"1\"]', \"click\", function () {\n        self.slideFormParams.onCancel && self.slideFormParams.onCancel();\n        self.goBack();\n      });\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function () {\n        self.renderSlideForm(params);\n      });\n    }).fail(function (xhr, errorType, message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.kendoTmpls(errorTemplate, { message: error_message }).appendTo(self.slideContainer.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    });\n\n    return defer.promise();\n  } });","/*\r\n *   Name: BizAgi Tablet slide view implementation\r\n *   Author: Richar Urbano - RicharU\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n\n// Extends itself\n/**\r\n * @todo-nelson VIEW\r\n * @type {*}\r\n */\n\n$.Class.extend(\"bizagi.rendering.tablet.slide.view\", {}, {\n  /* CONSTRUCTOR\r\n                                                            =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n    self.slideFormDeferred = new $.Deferred();\n    self.container = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n  },\n\n  buttons: [],\n\n  processButtons: function processButtons(form) {\n    var self = this;\n\n    var onSaveClick = function onSaveClick() {\n      if (form) {\n        // Perform validations\n        if (form.validateForm()) {\n\n          // Collect data\n          var data = {};\n          form.collectRenderValues(data);\n\n          if (self.slideFormParams.allowGetOriginalFormValues) {\n            data.formValues = form.children;\n          }\n\n          // Add page cache for this form\n          data.idPageCache = form.getPageCache();\n\n          // Call user callback\n          if (self.slideFormParams.onSave) {\n            $.when(self.slideFormParams.onSave(data)).\n            done(function (result) {\n              if (!result || result === true || result.type === \"success\") {\n                // Close slide\n                self.goBack();\n\n                // Resolve deferred\n                self.slideFormDeferred.resolve(data);\n\n              } else if (result.type === \"validationMessages\") {\n                // Add validation messages\n                form.addValidationMessage(result.messages);\n              } else if (result.type === \"error\") {\n                // Add error messages\n                form.addErrorMessage(result.message);\n              }\n            }).fail(function (dataFail) {\n\n              var message = dataFail.responseText ? dataFail.responseText : typeof dataFail === \"string\" ? dataFail : dataFail.toString();\n\n              // Convert String to object\n              if (typeof message === \"string\") {\n                try {\n                  message = JSON.parse(message).message;\n                } catch (e) {\n                  message = message.match(/\"message\":(.*)\",/)[0];\n                  message = message.substr(11, message.length - 13);\n                }\n\n              } else if (!message.message) {\n                message = dataFail;\n              }\n\n              form.validateForm();\n              form.clearValidationMessages();\n              form.addValidationMessage(message);\n\n              // Close slide\n              self.goBack();\n\n              //reject defered\n              self.slideFormDeferred.resolve(data);\n            });\n\n          } else {\n            // Close slide\n            self.goBack();\n\n            //reject defered\n            self.slideFormDeferred.reject();\n          }\n        }\n      }\n    };\n\n    var onCancelClick = function onCancelClick() {\n      // Close slide\n      self.goBack();\n      //reject defered\n      self.slideFormDeferred.reject();\n    };\n\n    form.buttons = [$.extend(form.buttons[0] || {},\n    {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 0,\n      \"action\": \"save\",\n      \"save\": true,\n      \"style\": \"\",\n      callback: onSaveClick }),\n\n    $.extend(form.buttons[1] || {}, {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 1,\n      \"action\": \"back\",\n      \"save\": true,\n      \"style\": \"\",\n      callback: onCancelClick })];\n\n\n\n    // If form is editable, add \"save\" button\n    if (!self.slideFormParams.showSaveButton) {\n      form.buttons.shift();\n    }\n\n    //self._renderButtons(form);\n  },\n\n  /*\r\n      *   Render the form\r\n      *   The params are the same that will be send to the ajax service\r\n      *   Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill content\n    self.renderSlideForm(self.slideForm, params);\n\n    // Return promise\n    return self.slideFormDeferred.promise();\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(slideForm, params) {\n\n    var self = this;\n    var defer = new $.Deferred();\n\n    bizagi.loading.start();\n\n    // Load template and data\n    $.when(self.dataService.getFormData(params)).\n    then(function (data) {\n      /*** SUCCESS FILTER **/\n      if (params.recordXPath) {\n        data.form.properties.recordXpath = params.recordXPath;\n      }\n\n      // Apply editable param\n      if (!self.slideFormParams.showSaveButton || params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      if (typeof data.form.properties !== \"undefined\") {\n        data.form.properties.orientation = self.slideFormParams.orientation || \"ltr\";\n      }\n\n      // Render dialog template\n      self.form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.container });\n\n\n      self.form.params = params.formParams;\n\n      self.processButtons(self.form);\n\n      // Return rendering promise\n      return self.form.render();\n\n    }).done(function (element) {\n\n      // Append form in the slide view\n      self.container.element.html(element);\n\n      if (!params.isRefresh) {\n        self.slideFormParams.navigation.navigate(self.container.id);\n      }\n\n      self.container.setNavigationButtons(self.form);\n\n      // Remove default form buttons\n      $(\".ui-bizagi-button-container .action-button\", self.form.container).remove();\n      // Add Button\n      $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (data, refreshParams) {\n        refreshParams.formParams = refreshParams.params || self.form.params;\n        self.render(refreshParams);\n      });\n    }).fail(function (message) {\n      /*** Form load failure ***/\n\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.kendoTmpls(errorTemplate, { message: error_message }).appendTo(self.container.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.container.id);\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n\n    return defer.promise();\n  },\n\n  // Go back and destroy\n  goBack: function goBack() {\n    this.container.destroy();\n  },\n\n  /**\r\n      * Process render buttons\r\n      */\n  _renderButtons: function _renderButtons(form) {\n    var self = this;\n    var content = $(\"<div class='bz-slide-button-container'></div>\");\n\n    $.each(form.buttons, function (ui, value) {\n      $(\"<div class='action-button'>\" + value.caption + \"</div>\").click(\n      value.callback).\n      appendTo(content);\n    });\n\n    self.buttonContainer = content;\n  } });","/*\r\n *   Name: BizAgi Tablet slide grid view implementation\r\n *   Author: Richar Urbano - RicharU\r\n *   Comments:\r\n *   -   Serves as an slide view that will show hidden columns for a grid\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.tablet.slide.view.grid\", {}, {\n\n  /* CONSTRUCTOR\r\n                                                                 =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.slideFormDeferred = new $.Deferred();\n    this.slideFormParams = slideFormParams || {};\n\n    // Create container\n    self.container = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n  },\n\n  /**\r\n      * Render the grid view form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params\r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill content\n    self.renderSlideForm(self.slideForm, params);\n\n    self.slideFormDeferred.resolve();\n\n    // Return promise\n    return self.slideFormDeferred.promise();\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(slideForm, params) {\n\n    var self = this;\n    var data = self.transformData(params);\n\n    // Load template and data\n    self.form = self.renderFactory.getContainer({\n      type: \"form\",\n      data: data.form,\n      navigation: self.slideFormParams.navigation,\n      view_container: self.container });\n\n\n    self.form.buttons = [$.extend(self.form.buttons[0] || {},\n    {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 0,\n      \"action\": \"save\",\n      \"save\": true,\n      \"style\": \"\",\n      // This callback avoid to call the default processButton in the form\n      callback: function callback() {\n        self.goBack();\n        // Resolve deferred with form data\n        var data = {};\n        self.form.collectRenderValues(data);\n        self.slideFormDeferred.resolve(data);\n      } }),\n\n    $.extend(self.form.buttons[1] || {},\n    {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 1,\n      \"action\": \"back\",\n      \"save\": true,\n      \"style\": \"\",\n      //This callback avoid to call the default processButton in the form\n      callback: function callback() {\n        // Close slide\n        self.goBack();\n        self.slideFormDeferred.reject();\n      } })];\n\n\n\n    // Add save button if the form is editable\n    if (!self.slideFormParams.allowEdition) {\n      self.form.buttons.shift();\n    }\n\n    //self._renderButtons(self.form);\n\n    $.when(self.form.render()).\n    done(function (element) {\n\n      // Append form in the slide view\n      self.container.element.html(element);\n\n      self.slideFormParams.navigation.navigate(self.container.id);\n\n      self.container.setNavigationButtons(self.form);\n\n      // Remove default form buttons\n      $(\".ui-bizagi-button-container .action-button\", self.form.container).remove();\n\n      // Add Button\n      $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n    });\n  },\n\n  /**\r\n      * Transform data into a JSON standard rendering format\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  transformData: function transformData(params) {\n    var self = this;\n    var row = params.row;\n    var columns = params.columns;\n\n    // Set xpath context\n    var xpathContext = params.xpathContext.length > 0 ?\n    params.xpathContext + \".\" + params.xpath + \"[\" + params.row[0] + \"]\" :\n    params.xpath + \"[id=\" + params.row[0] + \"]\";\n\n    var data = {\n      type: \"form\",\n      form: {\n        elements: [],\n        pageCacheId: params.pageCacheId,\n        sessionId: params.sessionId,\n        properties: {\n          xpathContext: xpathContext },\n\n        actions: self.transformActions(params.xpath, params.actions),\n        validations: self.transformValidations(params.xpath, params.validations) } };\n\n\n\n    $.each(row, function (i, item) {\n\n      // Skip first data (key not need to be rendered)\n      if (i > 0) {\n        var element = { render: { properties: $.extend({}, columns[i - 1].properties) } };\n\n        // Hack properties\n        element.render.properties.type = self.mapRenderType(element.render.properties.type);\n        element.render.properties.displayType = 'both';\n        if (self.slideFormParams.allowEdition == false) element.render.properties.editable = false;\n        element.render.properties.value = self.mapValue(element.render.properties.type, item);\n        if (element.render.properties.recalculate) element.render.properties.data = null;\n\n        // Check columnVisible property\n        if (typeof element.render.properties.columnVisible != \"undefined\") {\n          element.render.properties.visible = element.render.properties.columnVisible;\n        }\n\n        // Fix upload columns\n        if (element.render.properties.type == \"upload\") {\n          element.render.properties.isColumn = true;\n        }\n\n        // Fix search columns\n        if (element.render.properties.type == \"search\") {\n          var value = element.render.properties.value;\n          if (value.length > 0) {\n            value = [].concat(value[0]);\n            element.render.properties.value = {\n              id: value[0],\n              label: value[1],\n              additionallabel: value[2] || undefined };\n\n          }\n        }\n\n\n        // Add element\n        data.form.elements.push(element);\n      }\n    });\n\n    return data;\n  },\n\n  /**\r\n      * Map column renderType into normal render\r\n      * @param {} type\r\n      * @returns {}\r\n      */\n  mapRenderType: function mapRenderType(type) {\n    type = type.substring(6, type.length);\n\n    //some exceptions\n    if (type === \"FormLink\") {\n      return \"formLink\";\n    }\n\n    type = type.toLowerCase();\n    return type;\n  },\n\n  /**\r\n      * Method to traslate grid values into render values\r\n      * @param {} type\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  mapValue: function mapValue(type, value) {\n    if (type === \"combo\" || type === \"radio\") {\n      if (value && value.length > 0) {\n\n        // Transform the value property\n        return [{\n          id: value[0][0],\n          value: value[0].length > 2 ?\n          $.grep(value[0], function (item, i) {\n            return i !== 0;\n          }) :\n          value[0][1] }];\n\n\n      } else {\n        return null;\n      }\n    }\n\n    // Else: Don't do anything\n    return value;\n  },\n\n  /**\r\n      * Parse form actions into just grid form actions\r\n      * @param {} xpath\r\n      * @param {} actions\r\n      * @returns {}\r\n      */\n  transformActions: function transformActions(xpath, actions) {\n    var self = this;\n    var gridActions = [];\n\n    if (bizagi.util.isEmpty(actions)) return gridActions;\n\n    $.each(actions, function (i, action) {\n      var bDependencyFound = false;\n      for (var i = 0; i < action.dependencies.length; i++) {\n        if (action.dependencies[i].indexOf(xpath) != -1) {\n          bDependencyFound = true;\n        }\n      }\n\n      if (bDependencyFound) {\n        var newAction = JSON.parse(JSON.encode(action));\n\n        // Replace dependencies\n        for (var i = 0; i < newAction.dependencies.length; i++) {\n          newAction.dependencies[i] = newAction.dependencies[i].replaceAll(xpath + \"[].\", \"\");\n        }\n\n        // Replace conditions\n        self.transformConditions(xpath, newAction.conditions);\n\n        // Replace commands\n        self.transformCommands(xpath, newAction.commands);\n        self.transformCommands(xpath, newAction.elseCommands);\n\n        // Add to grid actions\n        gridActions.push(newAction);\n      }\n    });\n\n    return gridActions;\n  },\n\n  /*\r\n      *   Parse form validations into just grid form validations\r\n      */\n  transformValidations: function transformValidations(xpath, validations) {\n    var self = this;\n    var gridValidations = [];\n\n    if (bizagi.util.isEmpty(validations)) return gridValidations;\n\n    $.each(validations, function (i, validation) {\n      var newValidation = JSON.parse(JSON.encode(validation));\n\n      // Replace conditions\n      self.transformConditions(xpath, newValidation.conditions);\n\n      // Add to grid actions\n      gridValidations.push(newValidation);\n\n    });\n\n    return gridValidations;\n  },\n\n  /**\r\n      * Parse a single condition or a complex condition in order to prepare a grid action/validation\r\n      * @param {} xpath\r\n      * @param {} condition\r\n      * @returns {}\r\n      */\n  transformConditions: function transformConditions(xpath, condition) {\n    var self = this;\n\n    if (condition.expressions) {\n      for (i in condition.expressions) {\n        self.transformConditions(xpath, condition.expressions[i]);\n      }\n\n    } else if (condition.simple) {\n      self.transformConditions(xpath, condition.simple);\n\n    } else if (condition.complex) {\n      self.transformConditions(xpath, condition.complex);\n\n    } else {\n      if (condition.xpath) {\n        condition.xpath = condition.xpath.replaceAll(xpath + \"[].\", \"\");\n        if (condition.argumentType == 'xpath') {\n          condition.argument = condition.argument.replaceAll(xpath + \"[].\", \"\");\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Parse a command action to prepare a grid action\r\n      * @param {} xpath\r\n      * @param {} commands\r\n      * @returns {}\r\n      */\n  transformCommands: function transformCommands(xpath, commands) {\n    var self = this;\n    var refreshIndex = null;\n    if (commands == null || commands.length === 0) return;\n\n    for (var i = 0; i < commands.length; i++) {\n      if (commands[i].command === \"refresh\") {\n        refreshIndex = i;\n      } else {\n        if (commands[i].xpath) {\n          commands[i].xpath = commands[i].xpath.replaceAll(xpath + \"[].\", \"\");\n        }\n        if (commands[i].argumentType === 'xpath') {\n          commands[i].argument = commands[i].argument.replaceAll(xpath + \"[].\", \"\");\n        }\n      }\n    }\n\n    if (refreshIndex != null) {\n      commands.splice(i, 1);\n    }\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {}\r\n      */\n  goBack: function goBack() {\n    var self = this;\n    self.container.destroy();\n  },\n\n  /**\r\n      * Process render buttons\r\n      * @param {} options\r\n      * @returns {}\r\n      */\n  _renderButtons: function _renderButtons(form) {\n    var self = this;\n    var content = $(\"<div class='bz-slide-button-container'></div>\");\n\n    $.each(form.buttons, function (ui, value) {\n      var button = $(\"<div class='action-button'>\" + value.caption + \"</div>\").click(\n      value.callback).\n      appendTo(content);\n    });\n\n    self.buttonContainer = content;\n  } });","\n/*\r\n*   Name: Bizagi Tablet slide view Upload implementation\r\n*   Author: Richar Urbano - RicharU\r\n*   Comments:\r\n*   -   Serves as an slide view that will show an upload file without exiting the application\r\n*/\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.tablet.slide.view.upload\", {}, {\n  /* CONSTRUCTOR\r\n                                                                  =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.slideFormDeferred = new $.Deferred();\n    this.slideFormParams = slideFormParams || {};\n\n    // Create container    \t\n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n\n    self.processButtons().\n    done(function (data) {\n      self.slideFormDeferred.resolve(data);\n    }).fail(function () {\n      self.slideFormDeferred.reject();\n    });\n  },\n\n  /**\r\n      * Shows the slideForm form container in the browser \r\n      * @returns {} Returns a promise that the dialog will be closed\r\n      */\n  processButtons: function processButtons() {\n    var self = this;\n    var dfd = new $.Deferred();\n\n    // Create buttons object\n    var slideOptions = { buttons: [] };\n\n    // Add cancel button by default\n    var onClose = function onClose() {\n      // Close slide\n      self.goBack();\n      //reject defered\n      dfd.reject();\n    };\n    slideOptions.buttons.push({\n      text: bizagi.localization.getResource(\"workportal-case-dialog-box-close\"),\n      caption: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      actions: [\"submitData\", \"refresh\"],\n      submitData: false,\n      refresh: false,\n      ordinal: 0,\n      action: \"back\",\n      save: true,\n      style: \"\",\n      //This callback avoid to call the default processButton in the form\n      callback: onClose,\n      click: onClose });\n\n\n    // Apply dialog plugin\n    this.slideFormParams = $.extend(slideOptions, this.slideFormParams);\n    self._renderButtons(this.slideFormParams);\n\n    // Return promise\n    return dfd.promise();\n  },\n\n  /**\r\n      * Render the grid view form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params \r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill content\n    self.renderUploadFile(self.slideForm, params);\n\n    // Return promise\n    return self.slideFormDeferred.promise();\n  },\n\n  /* Render the file inside a frame\r\n     =====================================================*/\n  renderUploadFile: function renderUploadFile(slideForm, params) {\n    var self = this;\n    var template = self.renderFactory.getCommonTemplate(\"uploadSlide\");\n\n    // Render template\n    var content = $.kendoTmpls(template, { url: params.url });\n\n    // Append content in the slide view\n    self.slideContainer.element.html(content);\n\n    // Navigate on view\n    self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    // Add Button\n    // $(\".ui-bizagi-button-container\", self.slideContainer).append(self.buttonContainer);\n\n    // No need to create a real form cause it just shows the back button\n    var virtualForm = $.extend({\n      originalProperties: {\n        uniqueId: 101,\n        id: 101 } },\n\n    self.slideFormParams);\n    virtualForm.container = self.slideContainer.element;\n\n    self.slideFormParams.navigation.setNavigationButtons(virtualForm);\n\n    content.find(\".ui-slide-upload-link\").click(function () {\n      $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"render-tablet-slide-upload-confirmation\"))).\n      done(function () {\n        window.location.href = params.url;\n      });\n    });\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {} \r\n      */\n  goBack: function goBack() {\n    var self = this;\n\n    self.slideContainer.destroy();\n  },\n\n  /**\r\n      * Process render buttons\r\n      * @param {} options \r\n      * @returns {} \r\n      */\n  _renderButtons: function _renderButtons(options) {\n    var self = this;\n    var content = $(\"<div class=\\\"bz-slide-button-container\\\"></div>\");\n\n    $.each(options.buttons, function (ui, value) {\n      $(\"<div class=\\\"action-button\\\">\" + value.text + \"</div>\").click(\n      value.click).\n      appendTo(content);\n    });\n\n    self.buttonContainer = content;\n  } });","/*\r\n *   Name: Bizagi Tablet slide form implementation\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n\n// Extends itself\n$.Class.extend('bizagi.rendering.tablet.startForm', {}, {\n\n  /* CONSTRUCTOR\r\n                                                           =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n\n    // Create container        \n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * Handlers kendo view\r\n      * @returns {} \r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n    var self = this;\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {} \r\n      */\n  goBack: function goBack() {\n    var self = this;\n    self.slideContainer.destroy();\n  },\n\n  /**\r\n      * Render the form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params \r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n    // Fill content\n    self.renderSlideForm(params);\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n\n    var self = this;\n\n    var defer = new $.Deferred();\n\n    // Load template and data\n    $.when(self.dataService.getStartForm(params)).then(function (data) {\n      /*** SUCCESS FILTER **/\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Render dialog template\n      var formClass = bizagi.rendering.form.extend({\n        submitForm: function submitForm() {\n          if (self.form) {\n            this.endLoading();\n            // Perform validations\n            if (self.form.validateForm()) {\n              // Collect data\n              var data = {};\n\n              self.form.collectRenderValues(data);\n\n              // Add page cache for this form\n              data.idPageCache = self.form.getPageCache();\n\n              // Call user callback\n              if (self.slideFormParams.onSave) {\n                $.when(self.slideFormParams.onSave(data)).\n                done(function (result) {\n                  if (result == null || result == true || result.type == \"success\") {\n                    defer.resolve();\n                    self.goBack();\n                  } else if (result.type == \"validationMessages\") {\n                    // Add validation messages\n                    self.form.addValidationMessage(result.messages);\n                    // Update original value to use as reference to other futures changes in the dialogBox\n                    $.each(data, function (key, value) {\n                      var renders = self.form.getRenders(key);\n                      $.each(renders, function (i, render) {\n                        render.updateOriginalValue();\n                      });\n                    });\n                  } else if (result.type == \"error\") {\n                    // Add error messages\n                    self.form.addErrorMessage(result.message);\n                  }\n                });\n\n              } else {\n                defer.resolve();\n                self.goBack();\n              }\n            }\n          }\n        } });\n\n\n      var containerParams = $.extend({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.slideContainer },\n      {\n        renderFactory: self.renderFactory,\n        dataService: self.renderFactory.dataService });\n\n\n      self.form = new formClass(containerParams);\n\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        refreshParams = $.extend({\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true },\n        params, refreshParams, { idStartScope: self.form.properties.idStartScope });\n\n        self.renderSlideForm(refreshParams);\n      });\n\n      self.form.buttons = [\n      $.extend(\n      self.form.buttons[0] || {},\n      {\n        \"caption\": self.slideFormParams.saveButtonLabel,\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\" })];\n\n\n      // Return rendering promise\n      return self.form.render();\n    }).done(function (element) {\n      // Append form  in the view\n      self.slideContainer.element.html(element);\n\n      if (!params.isRefresh) {\n        self.slideFormParams.navigation.navigate(self.slideContainer.id);\n      }\n\n      $('.ui-bizagi-button-container div', self.form.container).remove();\n\n      $('.ui-bizagi-button-container', self.form.container).append('<div ordinal=\"0\" id=\"formButton0\" class=\"action-button ui-bizagi-form-button\">' + (self.slideFormParams.saveButtonLabel ? self.slideFormParams.saveButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-save\")) + '</div>').delegate('div[ordinal=\"0\"]', 'click', function () {\n        self.form.submitForm();\n      });\n\n      $('.ui-bizagi-button-container', self.form.container).append('<div ordinal=\"1\" id=\"formButton1\" class=\"action-button ui-bizagi-form-button\">' + bizagi.localization.getResource(\"render-form-dialog-box-cancel\") + '</div>').delegate('div[ordinal=\"1\"]', 'click', function () {\n        self.slideFormParams.onCancel && self.slideFormParams.onCancel();\n        self.goBack();\n      });\n\n      //self.view.scroller.reset();\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n    }).fail(function (xhr, errorType, message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.kendoTmpls(errorTemplate, { message: error_message }).appendTo(self.slideContainer.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    });\n\n    return defer.promise();\n  } });","/*\r\n*   Name: BizAgi Tablet Form Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*   -   Will apply a desktop form template\r\n*/\n\n// Auto extend\nbizagi.rendering.form.extend(\"bizagi.rendering.form\", {\n\n  /**\r\n                                                         * CONSTRUCTOR\r\n                                                         * \r\n                                                         * @param {} params \r\n                                                         * @returns {} \r\n                                                         */\n  init: function init(params) {\n    var self = this;\n    params = params || {};\n    // Define variables\n    self.warnings = {};\n    self.errors = {};\n\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    if (form.length > 1) {\n      $(form).each(function () {\n        if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\n          complexGatewayContainer = this;\n        }\n      });\n    } else {\n      complexGatewayContainer = $(\".ui-bizagi-container-complexgateway\", form);\n    }\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Process buttons\n    self.processButtons(form);\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations);\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.configureMediaQueryHandlers();\n      self.readyDeferred.resolve();\n    });\n\n\n    //Event to notify the native code the form will be showing a modal view \n    self.bind(\"modalViewDidAppear\", function () {\n      self.params.navigation.modalViewDidAppear();\n    });\n\n    //Event to notify the native code the form will be hiding a modal view \n    self.bind(\"modalViewDidDisappear\", function () {\n      self.params.navigation.modalViewDidDisappear();\n    });\n\n    // Set events for complex gateway interface - Tablet flat\n    $(\".bz-rn-cg-checkbox-control\", complexGatewayContainer).bind(\"click\", function () {\n      var checkboxLabel = $(\"label\", this);\n      var transitionId = checkboxLabel.data(\"value\") || \"\";\n\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      if (bizagi.util.parseBoolean(checkboxLabel.data(\"checked\"))) {\n        // Uncheck element\n        checkboxLabel.removeClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", false);\n        self.activeTransitions[transitionId] = false;\n      } else {\n        // Check element\n        checkboxLabel.addClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", true);\n        self.activeTransitions[transitionId] = true;\n      }\n    });\n\n  },\n\n  /**\r\n      * Just to tablet devices is called after the form is in the dom\r\n      * in order to define if the form must be showed vertical\r\n      * @param {}\r\n      * @returns {}\r\n      */\n  configureMediaQueryHandlers: function configureMediaQueryHandlers() {\n    var self = this;\n    var mediaquery = window.matchMedia(\"(max-width: 600px)\");\n    function handleOrientationChange(mediaquery) {\n      if (mediaquery.matches) {\n        // mediaquery dentro de 600                \n        if (self.container) {\n          $(\".ui-bizagi-render\", self.container).addClass(\"vertical\");\n        }\n      } else {\n        // mediaquery fuera de 600                \n        if (self.container) {\n          $(\".ui-bizagi-render\", self.container).removeClass(\"vertical\");\n        }\n      }\n    }\n    mediaquery.addListener(handleOrientationChange);\n    handleOrientationChange(mediaquery);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each container after processed\r\n      * \r\n      * @param {} container \r\n      * @returns {} \r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var properties = self.properties;\n    self._super(container);\n    var buttons = self.getButtons();\n\n    //disable overflow-scrolling touch untill the form is loaded QA-2178\n    if (bizagi.util.detectDevice() != \"tablet_android\") {\n      $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"inherit\");\n    }\n\n    // Show warnings\n    if (!bizagi.util.isObjectEmpty(self.warnings)) {\n      var warningContainer = $('<ul class=\"ui-bizagi-form-warnings\"></ul>');\n      for (var key in self.warnings) {\n        warningContainer.append($('<li>' + key + '</li>'));\n      }\n\n      // Add button\n      $(\"<button>\" + \"X\" + \"</button>\").appendTo(warningContainer);\n\n      // Append to body \n      warningContainer.prependTo(self.container);\n      warningContainer.click(function () {\n        warningContainer.detach();\n      });\n    }\n\n    // Show errors\n    if (!bizagi.util.isObjectEmpty(self.errors)) {\n      var errorContainer = $('<ul class=\"ui-bizagi-form-errors\"></ul>');\n      for (var ekey in self.errors) {\n        errorContainer.append($('<li>' + ekey + '</li>'));\n      }\n\n      // Add button\n      $(\"<button>\" + \"X\" + \"</button>\").prependTo(errorContainer);\n\n      // Append to body \n      errorContainer.appendTo(self.container);\n      errorContainer.click(function () {\n        errorContainer.detach();\n      });\n\n      // Hide routing buttons when an error was found\n      $.each(properties.buttons, function (i, button) {\n        if (button.routing) {\n          self.getButtons().eq(i).prop(\"disabled\", true);\n        }\n      });\n    }\n\n    //Set button length\n    var lengthButtons = buttons ? buttons.length : 0;\n\n    if (lengthButtons) {\n\n      $(document).data(\"auto-save\", \"auto-save\");\n\n      //bind event auto-save\n      $(document).unbind(\"save-form\").bind(\"save-form\", function (e, deferredSave) {\n        self.autoSaveEvents(deferredSave);\n      });\n\n      //bind event beforeunload\n      $(window).unbind('beforeunload').bind('beforeunload', function (e) {\n        var newData = {};\n        self.collectRenderValues(newData);\n\n        //if there are changes in the form show a message\n        if (!$.isEmptyObject(newData) && $(document).data('auto-save'))\n        return bizagi.localization.getResource(\"confirmation-savebox-message2\");\n\n        return;\n      });\n\n    }\n\n    //enable overflow-scrolling touch to avoid black frame over the form QA-2178\n    if (bizagi.util.detectDevice() != \"tablet_android\") {\n      setTimeout(function () {\n        $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"touch\");\n      }, 1000);\n    }\n\n  },\n  /**\r\n      * Auto Save Events\r\n      * \r\n      * @param {} deferredSave \r\n      * @param {} saveBox \r\n      * @returns {} \r\n      */\n  autoSaveEvents: function autoSaveEvents(deferredSave, saveBox) {\n    var self = this;\n    var data = {};\n    var hasChanges = false;\n\n    if (bizagi.util.isOfflineForm({ context: self })) {\n      data = [];\n      self.hasChanged(data);\n      hasChanges = !bizagi.util.isEmpty(data);\n\n    } else {\n      self.collectRenderValues(data);\n      hasChanges = !$.isEmptyObject(data);\n    }\n\n\n    if (hasChanges) {\n\n      $.when(bizagi.showSaveBox(bizagi.localization.getResource(\"confirmation-savebox-message1\"), \"Bizagi\", \"warning\")).done(function () {\n        self.saveForm();\n        deferredSave.resolve();\n      }).fail(function () {\n        deferredSave.resolve();\n      });\n\n    } else {\n      deferredSave.resolve();\n    }\n  },\n\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    // Assemble the actions\n    var actions = [];\n    var defer = $.Deferred();\n    var submitDataAction = null,executeButtonAction = null,performAction = null,checkpointAction = null,commitAction = null;\n    var data;\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi.\n          localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      performAction = self.dataService.submitData({\n        action: buttonProperties.action,\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n\n      performAction.tag = \"performAction\";\n    }\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n\n      //Validates if the method CHECKPOINT is supported\n      if (checkpointAction) {\n        actions.push(checkpointAction);\n      }\n\n      actions.push(executeButtonAction);\n\n      ///Validates if the method COMMIT is supported\n      if (commitAction) {\n        actions.push(commitAction);\n      }\n\n      actions.push(executeButtonAction);\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    // Execute the batch\n    bizagi.chrono.initAndStart(\"submitForm-ajax\");\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply(this, data.deferreds).\n      done(function (response) {\n        flowControlDeferred.resolve(response);\n      }).\n      fail(function () {\n        flowControlDeferred.reject();\n        console.log(\"Error: It was not possible resolve async actions on form \");\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    $.when(flowControlDeferred).done(function () {\n      bizagi.util.tablet.startLoading();\n      $.when(self.dataService.multiaction().execute({ actions: actions })).done(function (responses) {\n        bizagi.chrono.stop(\"submitForm-ajax\");\n        // Find validations\n        var bHasValidations;\n        $.each(responses, function (i, response) {\n          if (response.result.type == \"validationMessages\") {\n            // Something went wrong, we gotta display messages in notifications grid\n            self.addValidationMessage(response.result.messages);\n            bHasValidations = true;\n          }\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else\n        {\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        //Removes the nonSupportedMethods to prevent further iterations\n        delete self.nonSupportedMethods;\n\n        defer.resolve();\n      }).fail(function (res, res2, response) {\n        if (buttonProperties.executeRule) {\n          self.sendRollbackAction(buttonProperties.id);\n        }\n\n        if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\n        response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\n            return $.when(self.internalSubmitForm($.extend({}, buttonProperties, { forcePlanCompletion: true })));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          self.failHandler({ \"error\": typeof response === \"undefined\" ? bizagi.localization.getResource(\"workportal-general-error\") : response });\n          defer.reject(response);\n        }\n      }).always(function () {\n        bizagi.util.tablet.stopLoading();\n      });\n    }).always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n    return defer.promise();\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(id) {\n    var self = this;\n    if (bizagi.util.validateFeatureSupport(\"commitRollbackActions\")) {\n      return self._super(id);\n    }\n\n    return null;\n  },\n\n  prepareCommitAction: function prepareCommitAction(id) {\n    var self = this;\n    if (bizagi.util.validateFeatureSupport(\"commitRollbackActions\")) {\n      return self._super(id);\n    }\n\n    return null;\n  },\n\n  /**\r\n      * Retorna el pane donde se pintó la forma para facilitar navegacion de kendo\r\n      * @returns {*}\r\n      */\n  getPane: function getPane() {\n    var self = this;\n    return self.pane;\n  },\n\n  /* TEMPLATE METHOD TO GET THE BUTTONS OBJECTS\r\n      ======================================================*/\n  getButtons: function getButtons() {\n    var self = this;\n    var container = self.container;\n\n    return $(\".ui-bizagi-button-container .action-button\", container);\n  },\n\n  processButtons: function processButtons() {\n    var self = this;\n    var params = self.getParams();\n\n    //si no es con un if es con un publish\n    if (params && params.processButtons) {\n      var handler = params.processButtons;\n      handler(self);\n    }\n\n    var properties = self.properties;\n    var buttons = self.getButtons();\n\n    properties.buttons = self.buttons || buttons;\n\n    //to cache a submit Data Buttom if exist\n    self.saveButton = null;\n    self.nextButton = null;\n\n    //Set saveButton and nextButton if exist\n    for (var i = 0, length = properties.buttons.length; i < length; i++) {\n      if (properties.buttons[i].action == 'save') {\n        self.saveButton = properties.buttons[i];\n      } else if (properties.buttons[i].action == 'next') {\n        self.nextButton = properties.buttons[i];\n      }\n    }\n\n    var navigation = self.getNavigation();\n\n    if (typeof navigation !== \"undefined\") {\n      //si tiene un viewConteiner sera proque es una forma dentro de container de edicion\n      var view_container = self.getViewContainer();\n      if (typeof view_container !== \"undefined\") {\n        view_container.setNavigationButtons(self);\n      } else\n\n      {\n        navigation.setNavigationButtons(self);\n      }\n    }\n\n    self._super();\n  },\n\n  /*\r\n      *   Refresh the current form\r\n      */\n  refreshForm: function refreshForm(focus) {\n    var self = this;\n    var properties = self.properties;\n    var params = self.getParams();\n    var deferred = $.Deferred();\n    var options;\n\n    focus = focus || self.getFocus();\n\n    // Normalize new focus structure if not present\n    if (focus && !focus.id) {\n      focus = {\n        id: focus };\n\n    }\n\n    options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      isRefresh: true,\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\",\n      navigation: params.navigation,\n      view_container: params.view_container };\n\n\n    if (params.postRenderEdit || params.processButtons) {\n      options.isOfflineForm = self.params.isOfflineForm || false;\n      options.formsRenderVersion = self.params.formsRenderVersion || 0;\n      options.postRenderEdit = params.postRenderEdit;\n      options.processButtons = params.processButtons;\n      options.originalParams = params.originalParams || {};\n      options.getButtons = params.getButtons;\n    }\n\n    $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"inherit\");\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    self.startLoading();\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n      setTimeout(function () {\n        $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"touch\");\n      }, 1000);\n\n      deferred.resolve();\n    }).fail(function () {\n      deferred.reject();\n    }).always(function () {\n      self.endLoading();\n    });\n\n    return deferred.promise();\n  },\n\n  checkWidgetsData: function checkWidgetsData() {\n    var popupResponse = null;\n    if (bizagi.workportal.tablet.popup) {\n      if (bizagi.workportal.tablet.popup.instance) {\n        if (bizagi.workportal.tablet.popup.instance.getResponseValues) {\n          popupResponse = bizagi.workportal.tablet.popup.instance.getResponseValues(bizagi.workportal.tablet.popup.instance.getResponseValuesParams);\n          if (popupResponse === null) {\n            bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-complexgateway-path\"),\n            bizagi.localization.getResource(\"workportal-widget-complexgateway-error\"));\n            return -1;\n          } else {\n            bizagi.workportal.tablet.popup.instance.dontClose = false;\n            bizagi.workportal.tablet.popup.instance.close();\n          }\n        }\n      }\n    }\n\n    return popupResponse;\n  },\n\n  repaintComplexGateway: function repaintComplexGateway() {\n    var self = this;\n    if (self.focus !== undefined) {\n      if (self.focus.idCaseObject !== undefined) {\n        if (self.focus.idCaseObject.isComplex !== undefined) {\n          self.dataService.getWorkitems({\n            idCase: self.focus.idCaseObject.idCase }).\n          done(function (data) {\n            if (data.workItems.length == 1) {\n              if (data.workItems[0].taskType == \"ComplexGateway\") {\n                var transitions = data.workItems[0].transitions;\n\n                self.currentPopup = \"complexgateway\";\n                $(document).triggerHandler(\"popupWidget\", {\n                  widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_COMPLEXGATEWAY,\n                  options: {\n                    transitions: transitions,\n                    sourceElement: \".ui-bizagi-form\",\n                    insertAfter: \".ui-bizagi-form .ui-bizagi-button-container\",\n                    height: 'auto',\n                    offset: \"8 0\", //x y\n                    activeScroll: false,\n                    dontClose: true,\n                    closed: function closed() {\n                      self.currentPopup = null;\n                    } } });\n\n\n              }\n            }\n          });\n        }\n      }\n    }\n  },\n\n  /* METHOD TO ADD WARNINGS TO THE FORM\r\n     ======================================================*/\n  addWarning: function addWarning(message) {\n    var self = this;\n    self.warnings[message] = message;\n  },\n\n  /* METHOD TO ADD ERRORS TO THE FORM\r\n     ======================================================*/\n  addError: function addError(message) {\n    var self = this;\n    self.errors[message] = message;\n  },\n\n  /*  Executes a single button action\r\n     ======================================================= */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    // Disable routing button\n    if (!bizagi.util.isObjectEmpty(self.errors)) {\n      deferred.resolve();\n      if (bizagi.util.parseBoolean(buttonProperties.routing))\n      return deferred.promise();\n    }\n\n    // Call base\n    return this._super(buttonProperties);\n  },\n\n\n  getNavigation: function getNavigation() {\n    var params = this.getFormContainer().getParams();\n    return params.navigation;\n  },\n\n  getViewContainer: function getViewContainer() {\n    var params = this.getFormContainer().getParams();\n    return params.view_container;\n  },\n\n  isFloatingButtonsEnabled: function isFloatingButtonsEnabled() {\n    var navigation = this.getNavigation();\n    return navigation && navigation.isFloatingButtonsEnabled();\n  },\n\n  /**\r\n     *   Adds an overlay to the form, and sets a waiting message\r\n     *\r\n     *   @argument {bool} delay Apply delay\r\n     */\n  startLoading: function startLoading() {\n    bizagi.loading.start();\n  },\n\n  /*\r\n     *   Removes the overlay and restores the form edition\r\n     */\n  endLoading: function endLoading() {\n    bizagi.loading.stop();\n  },\n\n  dispose: function dispose(params) {\n    var self = this;\n\n    // Active refresh on tablet\n    if (typeof params === \"undefined\" || typeof params.isRefresh === \"undefined\" || params.isRefresh == false) {\n      self._super();\n    }\n  },\n\n  failHandler: function failHandler(error) {\n    var self = this;\n    self._super(error);\n\n    var error_obj = {};\n    try {\n      error_obj = JSON.parse(error) || {};\n    } catch (e) {\n      error_obj = error.length && error.length > 1 ? error[0] : error;\n    } finally {\n\n      //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n      if (error_obj.error) error_obj = error_obj.error;\n      if (error_obj.error) error_obj = error_obj.error;\n\n      //trigger the routing event in order to refresh the case\n      if (typeof error_obj.code !== \"undefined\" && error_obj.code == \"AUTH_ERROR\") {\n\n        $.notifier.add({\n          class_name: \"error\",\n          title: \"Error\",\n          text: bizagi.localization.getResource(\"render-idle-expired-error\", \"Idle timer expired. For safety reasons this view will be refreshed automatically in 5 seconds. Note that any unsaved data is lost.\").replace(\"%s\", \"5\"),\n          sticky: false,\n          time: 5000 });\n\n\n        setTimeout(function () {\n          self.triggerHandler(\"routing\", {\n            idCase: self.params.idCase,\n            idWorkitem: self.params.idWorkitem });\n\n        }, 5000);\n      }\n    }\n  },\n\n  /*\r\n     *   Build the container html\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    var html = $.kendoTmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() == \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: BizAgi Desktop Panel Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to desktop devices\r\n*/\n\n// Auto extend\nbizagi.rendering.panel.extend(\"bizagi.rendering.panel\", {}, {});","/*\r\n*   Name: BizAgi Tablet Tab Container Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.tab.extend(\"bizagi.rendering.tab\", {\n  VISIBLE_TABS: 4 },\n{\n\n  /* POST RENDER CONTAINER ACTIONS\r\n  =================================================*/\n  postRenderContainer: function postRenderContainer(tab) {\n    var self = this;\n    self._super(tab);\n\n    // Apply any plugin or custom code to implement smartphone tabs\n    self.suscribeMethods();\n  },\n\n  suscribeMethods: function suscribeMethods() {\n    var self = this;\n    var tab = self.container;\n\n    //tabs\n    $(tab).bztabs({\n      activeTab: self.activeTab !== undefined && self.activeTab !== null ? self.activeTab : 0,\n      tabNumber: self.Class.VISIBLE_TABS,\n      domIncluded: self.ready(),\n      activate: function activate(event, ui) {\n        self.activeTab = $(event.currentTarget) ? $(event.currentTarget).data(\"index\") : 0;\n\n        var index = self.activeTab;\n        var form = self.getFormContainer();\n        var selectedTab = {};\n        selectedTab[self.children[index].parent.properties.id] = index;\n        form.setParam(\"selectedTabs\", selectedTab);\n      } });\n\n  },\n\n  /**\r\n      * Checks the visibility of the plus icon after partial refresh of itemTabs\r\n      */\n  checkPlusVisibility: function checkPlusVisibility() {\n    var self = this;\n    var visible_tabs = $(\".bz-header_select > .bz-wp-tabs-ui:not(:hidden)\", self.container);\n    if (visible_tabs.length <= self.Class.VISIBLE_TABS) {\n      $(\".bz-wp-tabs-arrow-container.show-pluss\", self.container).hide();\n    } else\n    {\n      $(\".bz-wp-tabs-arrow-container.show-pluss\", self.container).show();\n    }\n  } });","/*\r\n*   Name: BizAgi Tablet Panel Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.tabItem.extend(\"bizagi.rendering.tabItem\", {}, {\n\n  /*\r\n                                                                   *   Constructor\r\n                                                                   */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Set tab ready deferred\n    self.tabReadyDeferred = new $.Deferred();\n    self.loadingDeferred = new $.Deferred();\n    self.tabActiveDeferred = new $.Deferred();\n  },\n\n  /**\r\n      * Change selected item \r\n      * \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n    var self = this;\n\n    $.when(self.ready()).done(function () {\n      // Changes item\n      var tabContainer = self.parent;\n      if (tabContainer && tabContainer.container.tabs.hasOwnProperty(\"option\")) {\n        tabContainer.container.tabs(\"option\", \"active\", self.container.data(\"tab-counter\"));\n      }\n    });\n  },\n\n  /**\r\n      * Focus on container\r\n      * \r\n      * @returns {} \r\n      */\n  focus: function focus() {\n    var self = this;\n\n    // Set this tab as an active container\n    self.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      *  Hides / Show container \r\n      * \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n    var tabContainer = self.parent.container;\n    var activeTab = self.parent.getActiveTab();\n\n    var id = \"ui-bizagi-tab-\" + properties.id;\n    var header = $(\".bz-wp-tabs-item[data-reference-tab='#\" + id + \"']\", tabContainer);\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    $.when(self.ready()).\n    done(function () {\n      // Hide - show the render\n      if (properties.visible) {\n        self.container.css(\"display\", \"\");\n        self.setAsActiveContainer();\n        if (header && header.css(\"display\", \"none\")) {\n          var headerShow = $(\"div[data-reference-tab='#\" + id + \"']\", tabContainer);\n          headerShow && headerShow.css(\"display\", \"\");\n        }\n\n      } else {\n        self.container.hide();\n        if (header && header.css(\"display\", \"block\")) {\n          var headerHide = $(\"div[data-reference-tab='#\" + id + \"']\", tabContainer);\n          headerHide && headerHide.hide();\n        }\n      }\n    }).always(function () {\n      if (tabContainer && tabContainer.tabs.hasOwnProperty(\"option\")) {\n        tabContainer.tabs(\"option\", \"active\", activeTab);\n      }\n      self.parent.checkPlusVisibility();\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Horizontal Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the horizontal container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.horizontal.extend(\"bizagi.rendering.horizontal\", {}, {\n  // TODO: Review Scenario\n  /*\r\n  postRenderContainer: function(container) {\r\n      var self = this;\r\n      var children = self.children;\r\n      var iCount = children.length;\r\n        // Call base\r\n      self._super(container);\r\n        //console.log(\"bizagi.rendering.horizontal: \" + iCount);\r\n        // Process each child\r\n      $.each(children, function(i, child) {\r\n          // Process width\r\n          var renderWidth = child.properties.width;\r\n          if (renderWidth == null || renderWidth.length == 0) {\r\n              // Set default size\r\n              renderWidth = 100;\r\n              // renderWidth = 100 / iCount;\r\n          } else {\r\n              // Set custom size\r\n              renderWidth = bizagi.util.percent2Number(renderWidth);\r\n          }\r\n            // Set width\r\n          if (i != (iCount - 1)) {\r\n              child.getRenderedElement().css({ width: renderWidth + \"%\" });\r\n          } else {\r\n              // Set class for last render\r\n              child.getRenderedElement().addClass(\"ui-bizagi-render-last\");\r\n              child.getRenderedElement().css({ width: (renderWidth - 3.3) + \"%\" });\r\n          }\r\n      });\r\n  }\r\n  */});","/*\r\n*   Name: BizAgi Tablet Accordion Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.accordion.extend(\"bizagi.rendering.accordion\", {}, {});","/*\r\n*   Name: BizAgi Tablet Panel Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.accordionItem.extend(\"bizagi.rendering.accordionItem\", {}, {\n\n\n  /* \r\n                                                                              *   Change selected item \r\n                                                                              */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n\n  },\n\n  /* \r\n     *   Focus on container\r\n     */\n  focus: function focus() {\n    var self = this;\n\n    self.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  } });","/*\r\n*   Name: BizAgi Tablet Group Extension\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will redefine the group class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.group.extend(\"bizagi.rendering.group\", {}, {\n  /* \r\n                                                              *   Template method to implement in each device to customize each container after processed\r\n                                                              */\n  postRenderContainer: function postRenderContainer(group) {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    self._super(group);\n\n    group = self.container;\n\n    // Define expanded property\n    properties.expanded = true;\n\n    self.subscribeOnTouch();\n  },\n\n  /**\r\n     * Check if group its open\r\n     * \r\n     * @return boolean\r\n     */\n  isOpen: function isOpen() {\n    var self = this;\n    var group = self.container;\n\n    return $(\".childrenContainer\", group).is(\":visible\") ? true : false;\n  },\n\n  /* Focus on container*/\n  focus: function focus() {\n    var self = this;\n\n    // Expand container\n    self.expand();\n\n    // Call base\n    this._super();\n  },\n\n  /* \r\n     *   Expands group container \r\n     */\n  expand: function expand() {\n    var self = this;\n    var group = self.container;\n\n    if (!self.isOpen()) {\n      $(\"h1\", group).trigger(\"click\");\n    }\n  },\n\n  /* \r\n     *   Collapses group container \r\n     */\n  collapse: function collapse() {\n    var self = this;\n    var group = self.container;\n\n    if (self.isOpen()) {\n      $(\"h1\", group).trigger(\"click\");\n    }\n  },\n\n  /* \r\n     *   Expands or collapse the container \r\n     */\n  toogleContainer: function toogleContainer(argument) {\n    var self = this;\n\n    if (argument) {\n      self.expand();\n    } else {\n      self.collapse();\n    }\n  },\n\n  subscribeOnTouch: function subscribeOnTouch() {\n    var self = this;\n    var group = self.container;\n\n    // Delegate event click\n    $(group).find(\">div.headertitle\").bind(\"click\", function () {\n      $(group).toggleClass(\"collapsed\");\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Search Form Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.searchForm.extend(\"bizagi.rendering.searchForm\", {}, {\n  /*\r\n                                                                        *   Render the results of the query\r\n                                                                        *   Resolved in each device\r\n                                                                        */\n  renderResult: function renderResult() {\n    var self = this;\n    var properties = self.properties;\n\n    // Creates grid definition\n    var data = {};\n    data.properties = {\n      displayName: self.getResource(\"render-search-advanced-results-label\"),\n      type: \"grid\",\n      xpath: \"searchForm\" + properties.id,\n      id: properties.id,\n      skipInitialLoad: true,\n      rowsPerPage: 10,\n      visible: false,\n      sortBy: properties.sortBy,\n      sortOrder: properties.sortOrder,\n      overrideGetRemoteData: function overrideGetRemoteData(params) {\n        return self.getRemoteData(params);\n      } };\n\n\n    data.elements = [];\n\n    // Creates columns\n    var columns = properties.columns;\n    $.each(columns, function (i) {\n      var column = {\n        render: {} };\n\n\n      column.render.properties = {\n        displayName: columns[i].caption,\n        xpath: columns[i].xpath,\n        editable: false };\n\n\n      $.extend(column.render.properties, self.parseAdditionalProperties(columns[i].dataType));\n\n      // Next conditional added to print only columns and not labels\n      // if type = label then column is not rendered on the results table\n      if (columns[i].dataType == 0)\n      column.render.properties.columnVisible = false;\n\n      // if column is number or monetary push allowDecimals property\n      if (columns[i].dataType == 7 || columns[i].dataType == 8)\n      column.render.properties.allowDecimals = columns[i].allowDecimals;\n\n      // if column is real or float set allowDecimals property to true\n      if (columns[i].dataType == 10 || columns[i].dataType == 11)\n      column.render.properties.allowDecimals = true;\n\n      // if column is date push showtime property\n      if (columns[i].dataType == 12)\n      column.render.properties.showTime = columns[i].showTime;\n\n      data.elements.push(column);\n    });\n\n    var grid = self.renderFactory.getRender({\n      type: \"grid\",\n      data: data,\n      parent: self,\n      mode: self.getMode() });\n\n\n    grid.properties.inlineAdd = false;\n    grid.properties.allowDelete = false;\n    grid.properties.allowAdd = false;\n    grid.properties.allowEdit = false;\n\n    // Saves reference\n    self.resultsGrid = grid;\n\n    return grid.render();\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each container after processed\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var searchCriteria = container.find(\".ui-bizagi-container-search-criteria\");\n    var results = container.find(\".ui-bizagi-container-search-results\");\n    var childrenElements = searchCriteria.children();\n    var mode = self.getMode();\n\n    // Process children elements\n    self.container = container;\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) child.postRenderContainer(childElement);\n        }\n      }\n    });\n\n    // Process result\n    var grid = $(results.children()[0]);\n    self.resultsGrid.postRenderElement(grid);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n\n  },\n\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Saves reference\n    self.criteriaContainer = $(\".ui-bizagi-container-search-criteria\", self.container);\n    self.resultsContainer = $(\".ui-bizagi-container-search-results\", self.container);\n\n    // Bind to grid row select event\n    self.resultsGrid.bind(\"rowSelected\", function (e, ui) {\n      if (self.properties.searchParams.hasOwnProperty(\"multiSelect\")) {\n        self.trigger(\"multiSelect\", ui);\n      } else {\n        // Trigger event to bubble up to main container\n        self.trigger(\"instanceSelected\", ui);\n      }\n    });\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n    var self = this;\n\n    self.trigger(\"instancerefresh\");\n    self.resultsGrid.refresh();\n  },\n\n  /*\r\n     * Method added for IPAD version. Before showing search results form\r\n     */\n  onSearchFinished: function onSearchFinished() {\n    var self = this;\n\n    if (!self.properties.deviceMaxRecordsExceeded) {\n\n      // Next line returns visibility with the results of the search\n      self.resultsGrid.changeVisibility(true);\n\n      if (self.properties)\n      if (self.properties.records == 0) {\n        $(\".ui-bizagi-container-search-results .ui-bizagi-label\", self.container).hide();\n      } else {\n        $(\".ui-bizagi-container-search-results .ui-bizagi-label\", self.container).show();\n      }\n    }\n  } });","/**\r\n * Device definition of Polymorphic launcher\r\n *\r\n * @author: Ricardo Perez\r\n */\n\nbizagi.rendering.polymorphicLauncher.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\n  /**\r\n                                                                                           * Render a specific implementation for Tablet device\r\n                                                                                           */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var html, template;\n\n    if (mode == \"design\" || !self.properties.surrogatedKey) {\n      return \"\";\n    }\n\n    self.configureQueueVisibility();\n\n    /**\r\n                                      * Define params to get list of actions\r\n                                      */\n    return $.when(self.dataService.multiaction().getPolymorphicActions(self.processPropertyValueArgs)).done(function (response) {\n      // Convert default response to tree data structure\n      response = self.dataService.serializePolymorphicActions(response);\n      self.totalActions = bizagi.clone(response);\n      var actions = bizagi.clone(response);\n      self.lessActions = bizagi.clone(actions);\n\n      // NOTE: Code extracted\n      var templateArguments = {\n        actions: actions,\n        allowSearch: properties.allowSearch,\n        treeActionsList: self.getTreeItems(actions) };\n\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree\");\n\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-polymorphic-launcher-constructors-container\", control);\n      actionsContainer.append($.kendoTmpl(template, templateArguments));\n      self.bindHandlers();\n    });\n  },\n\n  /**\r\n      * Get rendered html of each node of constructors\r\n      * @param actions\r\n      * @param level\r\n      * @return {string}\r\n      */\n  getTreeItems: function getTreeItems(actions, level) {\n    var self = this;\n    var item = \"<ul>\";\n    var templateTreeItem = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree-item\");\n    actions = actions || {};\n    level = level || 1;\n\n    $.each(actions, function (key, value) {\n      item += $.kendoTmpl(templateTreeItem, value);\n\n      if (value.children) {\n        item += self.getTreeItems(value.children, level + 1);\n      }\n    });\n    item += \"</ul>\";\n    return item;\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  bindHandlers: function bindHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var actionLauncherControls = $(\".bz-polymorphic-launcher-constructors-container li span\", control);\n\n    //Binding for click action on buttons\n    actionLauncherControls.on(\"click\", function () {\n      var $targetData = $(this).parent();\n      var action = {\n        guidEntity: $targetData.data(\"guidentity\"),\n        guidObject: $targetData.data(\"guidobject\"),\n        guidConstructor: $targetData.data(\"guidconstructor\"),\n        displayName: $targetData.data(\"display-name\"),\n        actionType: $targetData.data(\"action-type\"),\n        xpathContext: $targetData.data(\"xpathcontext\") };\n\n      self.onActionClicked(action);\n    });\n    //Catch the typed text in the search field and filter the action list\n    $.expr[\":\"].FilterAction = function (entity, i, array) {\n      var search = array[3];\n      if (!search) {\n        return false;\n      }\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n    $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n      var search = $(this).val();\n      $(\".bz-polymorphic-launcher-constructors-container li\", control).show();\n      if (search) {\n        $(\".bz-polymorphic-launcher-constructors-container li\", control).not(\":FilterAction(\" + search + \")\").hide();\n      }\n    });\n\n  },\n  /**\r\n      * Execute an Action\r\n      * @param action\r\n      */\n  onActionClicked: function onActionClicked(action) {\n    var self = this;\n\n    $.when(self.actionManager(action)).done(function (act) {\n      self.executeAction(act);\n    });\n  },\n  /**\r\n      * Show a message when action has been executed\r\n      * @param status\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(status, action) {\n    var self = this;\n    if (status == \"success\") {\n      $.notifier.add({\n        class_name: \"success\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-success-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n\n    } else {\n      $.notifier.add({\n        class_name: \"error\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-failed-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n    }\n  },\n  /**\r\n      * Show a dialog with a form\r\n      * @param action\r\n      * @return {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext || \"\";\n    var formParams = form.getParams();\n\n    var recordXpath = self.properties.recordXpath;\n\n    // Show dialog with new form after that\n    var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        var pageCache = data.idPageCache;\n        data.idPageCache = null;\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: slideForm.form.properties.xpathContext, //self.properties.xpathContext,\n          idPageCache: pageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) == 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    slideForm.render({\n      \"idForm\": action.guidObject,\n      \"contextType\": \"entity\",\n      \"guidEntity\": action.guidEntity,\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      //\"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"recordXpath\": recordXpath });\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var def = new $.Deferred();\n    var formParams = form.getParams();\n    args = args || {};\n\n\n    var slideForm = new bizagi.rendering.tablet.startForm(self.dataService, self.renderFactory, {\n      //showSaveButton: properties.editable,\n      maximized: properties.maximized,\n      title: args.title || \"\",\n      navigation: formParams.navigation,\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || this.typeForm == \"SummaryForm\" ? bizagi.localization.getResource(\"render-form-button-create\") : bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        form.startLoading();\n\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          form.endLoading();\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n\n    slideForm.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n  /**\r\n      * Execute and action if a form is global form or summary, or send to queue\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show confirmation dialog\r\n      * @param action\r\n      */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n\n    $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n    done(function () {\n      self.setValue([]);\n\n      $.when(self.actionManager(action)).\n      done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-actions-to-execute\");\n    self.configureQueueVisibility();\n\n    $.when($.kendoTmpl(template, { actions: data })).done(function (html) {\n      actionsToExecuteContainer.empty();\n      actionsToExecuteContainer.append(html);\n      var removeActionSelector = $(\".action-to-execute-control .delete-action\", actionsToExecuteContainer);\n      var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n      removeActionSelector.on(\"click\", function () {\n        var index = $(this).parent().data(\"index\");\n        self.removeActionToQueue(index);\n      });\n      openActionSelector.bind(\"click\", function () {\n        var $target = $(this).parent();\n        var type = $target.data(\"actiontype\");\n        var guidprocess = $target.data(\"guidprocess\");\n        var idStartScope = $target.data(\"idstartscope\");\n        var title = $target.data(\"title\");\n        var xpathContext = $target.data(\"xpathcontext\");\n        var idEntity = $target.data(\"identity\") || \"\";\n        var guidEntity = $target.data(\"guidentity\");\n        var recordXpath = xpathContext || self.properties.xpathContext;\n\n        switch (type) {\n          case \"Process\":\n            if (idStartScope) {\n              self.processStartForm({\n                guidprocess: guidprocess,\n                idStartScope: idStartScope,\n                title: title,\n                xpathContext: xpathContext,\n                recordXpath: recordXpath });\n\n            }\n            break;\n          case \"Form\":\n            var action = {\n              guidProcess: guidprocess,\n              idStartScope: idStartScope,\n              editMode: true,\n              xpathContext: xpathContext,\n              idEntity: idEntity,\n              guidEntity: guidEntity,\n              guidObject: guidprocess };\n\n\n            self.processActionForm(action);\n            break;\n          case \"Rule\":\n            // Rules dont have forms or something like that\n            break;}\n\n      });\n    });\n  },\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".actions-to-execute-title\", control);\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/**\r\n * Tablet definition of Action Launcher\r\n *\r\n * @author: Ricardo Pérez\r\n */\n\nbizagi.rendering.actionLauncher.extend(\"bizagi.rendering.actionLauncher\", {}, {\n  /**\r\n                                                                                 * Render a specific implementation for Desktop device\r\n                                                                                 */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var template;\n    var def = new $.Deferred();\n    self.actions = [];\n\n    self.configureQueueVisibility();\n\n    self.startLoading();\n\n    // Define params to get list of actions        \n    $.when(self.dataService.multiaction().getActions(self.processPropertyValueArgs)).\n    then(function (response) {\n      response = self.getPropertiesActionLaucher(response);\n      self.actions = response;\n      self.deferredActions.resolve(response);\n\n      if (properties.isHorizontal) {\n        if (properties.templatetype !== \"none\") {\n          return self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs).\n          then(function (templateData) {\n            return self.engine.render($.extend(templateData, {\n              isDefaultTemplate: properties.templatetype === \"default\",\n              sessionId: self.properties.sessionId }),\n            $.extend({}, self.processPropertyValueDataTmplArgs, { formParams: self.getFormParams(self.getFormContainer()) }));\n          }).then(function (tmpl) {\n            template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n            var html = $($.kendoTmpl(template, {\n              actions: self.actions,\n              template: true }));\n\n\n            $(\".template-container\", html.wrap(\"<div>\").parent()).append(tmpl);\n            return html;\n          });\n        } else {\n          template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n          return $.kendoTmpl(template, {\n            actions: self.actions,\n            maxItems: properties.maxItems });\n\n        }\n      } else {\n        template = self.renderFactory.getTemplate(\"render-actionLauncher-vertical\");\n        return $.kendoTmpl(template, {\n          actions: self.actions,\n          allowSearch: properties.allowSearch,\n          maxItems: properties.maxItems });\n\n      }\n\n    }).done(function (html) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n\n      self.endLoading();\n\n      actionsContainer.append(html);\n      self.configureHandlers();\n      self.configureTemplateHandlers();\n\n      def.resolve(actionsContainer);\n    }).fail(function (error) {\n      self.endLoading();\n      def.fail(error);\n    });\n    return def.promise();\n  },\n\n  /**\r\n      * \r\n     */\n  getFormParams: function getFormParams(form) {\n    if (form.parent) {\n      return this.getFormParams(form.parent.getFormContainer());\n    } else\n    {\n      return form.getParams();\n    }\n\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var multipleSelection = typeof properties.multipleSelection == \"undefined\" ? true : properties.\n    multipleSelection;\n    var actionLauncherControls = $(\".action-launcher-control\", control);\n\n    //Binding for click action on buttons\n    actionLauncherControls.on(\"click\", function () {\n      var item = self.actions[parseInt($(this).data(\"index\"))];\n      var action = {\n        guidProcess: item[0],\n        guidAction: item[4],\n        displayName: item[1],\n        actionType: item[3],\n        xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n        readOnlyForm: item[6] || false,\n        guidEntity: self.properties.guidEntity,\n        xpathActions: self.properties.xpathActions || \"\" };\n\n\n      if (multipleSelection) {\n        if (action.actionType == \"Form\" && self.countSameActions(action) >= 1 && !action.xpathContext) {\n          //Open action\n          $(\".action-to-execute-control[data-guidaction='\" + action.guidAction + \"'] label\", control).click();\n        } else {\n          $.when(self.actionManager(action)).done(function (act) {\n            self.executeAction(act);\n          });\n        }\n      } else if (self.getValue().length > 0) {\n        self.showConfirmationDialog(action);\n      } else {\n        $.when(self.actionManager(action)).done(function (act) {\n          self.executeAction(act);\n        });\n      }\n    });\n\n    // Catch the typed text in the search field and filter the action list\n    $.expr[\":\"].FilterAction = function (entity, i, array) {\n      var search = array[3];\n      if (!search) {\n        return false;\n      }\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n\n    var plusBtn = $(\".action-container .wp-action-more span\", control);\n\n    $(\".action-container .wp-action-more\", control).click(function () {\n      if (plusBtn.hasClass(\"km-minus\")) {\n        hideActions();\n      } else {\n        showActions();\n      }\n    });\n\n    function hideActions() {\n      plusBtn.addClass(\"km-plus\").removeClass(\"km-minus\");\n      $(\".action-container .bz-actions-to-hide\", control).addClass('hidden');\n    }\n\n    function showActions() {\n      plusBtn.addClass(\"km-minus\").removeClass(\"km-plus\");\n      $(\".action-container .bz-actions-to-hide\", control).removeClass('hidden');\n    }\n\n    $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n      var search = $(this).val();\n      $(\".ui-bizagi-render-actionLauncher-actions-list .action-launcher-control\", control).show();\n      if (search) {\n        if (plusBtn.hasClass(\"km-plus\")) {\n          showActions();\n        }\n        $(\".ui-bizagi-render-actionLauncher-actions-list .action-launcher-control\", control).\n        not(\":FilterAction(\" + search + \")\").hide();\n      }\n    });\n  },\n  /**\r\n      *\r\n      */\n  configureTemplateHandlers: function configureTemplateHandlers() {\n    var self = this;\n\n    //Catch the event from the layout link\n    self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n      params.filters = [];\n      params.calculateFilters = params.calculateFilters || true;\n      self.triggerGlobalHandler(\"dataNavigation\", params);\n    });\n  },\n  /**\r\n      *\r\n      * @param data\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(data, action) {\n    var self = this;\n\n    if (data.response == \"success\") {\n      $.notifier.add({\n        class_name: \"success\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-success-excecution\").replace(\"%s\", action.displayName),\n        sticky: false });\n\n    } else {\n      $.notifier.add({\n        class_name: \"error\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-failed-excecution\").replace(\"%s\", action.displayName),\n        sticky: false });\n\n    }\n  },\n  /**\r\n      *\r\n      * @param action\r\n      * @returns {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getParams();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.\n    properties.xpathActions;\n    var def = new $.Deferred();\n\n    // Show dialog with new form after that\n    var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: slideForm.form.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) == 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    var renderParams = {\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath };\n\n\n    if (action.actionType === \"Form\") {\n      renderParams.contextType = \"entitytemplate\";\n      renderParams.xpathContext = undefined;\n      renderParams.guidEntity = action.guidEntity;\n      renderParams.rewriteContextType = true;\n    }\n\n    slideForm.render(renderParams);\n\n    return def.promise();\n  },\n\n  /**\r\n      *\r\n      * @param action\r\n      * @returns {*}\r\n      */\n  processActionFormCollection: function processActionFormCollection(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.\n    properties.xpathActions;\n    var xpathPattern = \"%s[id=%s]\";\n    var xpathPatternWithoutkey = \"%s[]\";\n    var xpathContextWithKey = xpathContext !== \"\" ? printf(xpathPattern, xpathContext, action.idEntity) :\n    xpathContext;\n    var xpathContextWithoutKey = xpathContext !== \"\" ? printf(xpathPatternWithoutkey, xpathContext) :\n    xpathContext;\n    var formParams = form.getParams();\n\n    var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        if (action.editMode) {\n          return self.dataService.multiaction().submitData({\n            action: \"SAVE\",\n            data: data,\n            xpathContext: xpathContextWithKey,\n            idPageCache: data.idPageCache,\n            isOfflineForm: false,\n            isActionStartForm: true }).\n          done(function (savedData) {\n            def.resolve(savedData.IdScope);\n          });\n        } else {\n          return self.dataService.addGridRecordData({\n            idRender: properties.id,\n            //xpath: properties.xpath,\n            xpathContext: xpathContext,\n            contexttype: \"start\",\n            idPageCache: data.idPageCache,\n            submitData: data }).\n          done(function (savedData) {\n            action.idStartScope = savedData.IdScope;\n            action.idEntity = savedData.IdEntity;\n            self.addActionToQueue(action);\n            def.resolve(savedData.IdScope);\n          });\n        }\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    slideForm.render({\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": formParams.idCase,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": action.editMode ? xpathContextWithKey : xpathContextWithoutKey,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath });\n\n\n    return def.promise();\n  },\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var def = new $.Deferred();\n    args = args || {};\n    var formParams = self.getFormContainer().getParams();\n\n    // Show dialog\n    var slideForm = new bizagi.rendering.tablet.startForm(self.dataService, self.renderFactory, {\n      title: args.title || \"\",\n      navigation: formParams.navigation,\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || self.typeForm === \"SummaryForm\" ? bizagi.localization.getResource(\"render-form-button-create\") :\n      bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n\n    // Render the search form\n    slideForm.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n  /**\r\n      *\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show the confirmation dialog\r\n      * bizagi.createOkCancelPopup\r\n      * @param action\r\n      * */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n\n    $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n    done(function () {\n      self.setValue([]);\n\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-actionLauncher-actions-to-execute\");\n\n    self.configureQueueVisibility();\n    $.when(self.deferredActions).done(function (listOfActions) {\n      var getMappingAction = function getMappingAction(guidAction) {\n        var mapping = [];\n        $.each(listOfActions, function (key, value) {\n          if (value[4] == guidAction) {\n            mapping = value;\n          }\n        });\n        return mapping;\n\n      };\n      $.each(data, function (key, value) {\n        var mapping = getMappingAction(value.guidAction);\n        data[key].displayName = mapping[1];\n        data[key].guidProcess = mapping[0];\n        data[key].actionType = mapping[3];\n        data[key].xpathContext = mapping[5];\n        data[key].readOnlyForm = mapping[6];\n\n        if (data[key].params && data[key].params.idStartScope) {\n          data[key].idStartScope = data[key].params.idStartScope;\n        }\n        if (data[key].params && data[key].params.idPageCache) {\n          data[key].idPageCache = data[key].params.idPageCache;\n        }\n        if (data[key].params && data[key].params.idEntity) {\n          data[key].idEntity = data[key].params.idEntity;\n        }\n      });\n      $.when($.kendoTmpl(template, { actions: data })).done(function (html) {\n        actionsToExecuteContainer.empty();\n        actionsToExecuteContainer.append(html);\n        var removeActionSelector = $(\".action-to-execute-control .delete-action\", actionsToExecuteContainer);\n        var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n\n        removeActionSelector.on(\"click\", function () {\n          var index = $(this).parent().data(\"index\");\n          self.removeActionToQueue(index);\n        });\n\n        openActionSelector.on(\"click\", function () {\n          var target = $(this).parent();\n          var type = target.data(\"actiontype\");\n          var guidprocess = target.data(\"guidprocess\");\n          var idStartScope = target.data(\"idstartscope\");\n          var title = target.data(\"title\");\n          // When undefined return string \"undefined\" instead of type \"undefined\"\n          var xpathContext = target.data(\"xpathcontext\");\n          var readOnlyForm = target.data(\"readonlyform\") || false;\n          var idEntity = target.data(\"identity\") || \"\";\n          var guidAction = target.data(\"guidaction\");\n          var recordXpath = xpathContext || self.properties.xpathContext;\n\n          switch (type) {\n            case \"Process\":\n              if (idStartScope) {\n                self.processStartForm({\n                  guidprocess: guidprocess,\n                  idStartScope: idStartScope,\n                  title: title,\n                  xpathContext: xpathContext,\n                  recordXpath: recordXpath });\n\n              }\n              break;\n            case \"Form\":\n              var action = {\n                guidProcess: guidprocess,\n                idStartScope: idStartScope,\n                editMode: true,\n                xpathContext: xpathContext,\n                readOnlyForm: readOnlyForm,\n                idEntity: idEntity,\n                recordXpath: recordXpath };\n\n\n              if (action.xpathContext) {\n                self.processActionFormCollection(action);\n\n              } else {\n                // Convert string \"undefined\" into type \"undefined\"                                \n                action.xpathContext = undefined;\n\n                // Add parameters if action form\n                var extraParams = {};\n                var dataAction = self.value.filter(function (item) {\n                  return item.guidAction == guidAction;\n                });\n\n                if (dataAction.length > 0) {\n                  extraParams = {\n                    actionType: \"Form\",\n                    contextType: \"entitytemplate\",\n                    guidEntity: self.properties.guidEntity || dataAction[0].guidEntity };\n\n                }\n\n                self.processActionForm($.extend(action, extraParams));\n              }\n              break;\n            case \"Rule\":\n              // Rules dont have forms or something like that\n              break;}\n\n        });\n      });\n    });\n  },\n\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".action-to-execute-label\", control);\n\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/**\r\n * Tablet definition of entity template\r\n *\r\n * @author: Ricardo Pérez\r\n */\n\nbizagi.rendering.actionLauncher.extend(\"bizagi.rendering.entityTemplate\", {}, {\n\n  /**\r\n                                                                                 * Render a specific implementation for Desktop device\r\n                                                                                 */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    self.actions = [];\n\n    self.configureQueueVisibility();\n\n    /**\r\n                                      * Define params to get template\r\n                                      */\n    self.startLoading();\n    self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs).\n    then(function (templateData) {\n      return self.engine.render(templateData, self.processPropertyValueDataTmplArgs).\n      then(function (tmpl) {\n        var template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n        if (properties.allowactions) {\n          return self.dataService.multiaction().getActions(self.processPropertyValueArgs).\n          then(function (response) {\n            self.deferredActions.resolve(response);\n            self.actions = response;\n            var htmlTemplate = $($.kendoTmpl(template, {\n              actions: self.actions,\n              template: true }));\n\n            $(\".template-container\", htmlTemplate.wrap('<div>').parent()).append(tmpl);\n            return htmlTemplate;\n          });\n        } else {\n          var htmlTemplate = $($.kendoTmpl(template, { template: true }));\n          $(\".template-container\", htmlTemplate.wrap('<div>').parent()).append(tmpl);\n          return htmlTemplate;\n        }\n      });\n\n    }).done(function (html) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n\n      self.endLoading();\n\n      actionsContainer.append(html);\n      self.configureHandlers();\n      self.configureTemplateHandlers();\n\n      def.resolve(actionsContainer);\n    }).fail(function (error) {\n      self.endLoading();\n      def.fail(error);\n    });\n    return def.promise();\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var entityTemplateControls = $(\".action-launcher-control\", control);\n\n    /**\r\n                                                                          * Binding for click action on buttons\r\n                                                                          */\n    entityTemplateControls.on(\"click\", function () {\n      var item = self.actions[parseInt($(this).data(\"index\"))];\n      var action = {\n        guidProcess: item[0],\n        guidAction: item[4],\n        displayName: item[1],\n        actionType: item[3],\n        xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n        xpathActions: self.properties.xpathActions || \"\" };\n\n\n      if (action.actionType === \"Form\") {\n        action.xpathContext = undefined;\n        action.contextType = \"entitytemplate\";\n        action.guidEntity = self.properties.guidEntity;\n      }\n\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  configureTemplateHandlers: function configureTemplateHandlers() {\n    var self = this;\n    /**\r\n                      * Catch the event from the layout link\r\n                      */\n    self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n      params.filters = [];\n      params.calculateFilters = params.calculateFilters || true;\n      self.triggerGlobalHandler(\"dataNavigation\", params);\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Render Text Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the text render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.text.extend(\"bizagi.rendering.text\", {}, {\n\n  /* POSTRENDER \r\n                                                            =====================================================*/\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super();\n\n    // Set the default maxlenght for the input\n    if (properties.maxLength > 0) {\n      self.input.prop(\"maxlength\", properties.maxLength);\n    }\n  },\n\n  /**\r\n     * Creates the markup for the readonly text field\r\n     * Comment: includes the default value in the markup\r\n     * @returns {html}\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * Readonly\r\n      * @returns {} \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    self._super();\n    self.input = control.find(\".bz-rn-readonly\");\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    // Set value in input\n    if (!bizagi.util.isEmpty(value) && properties.editable) {\n      value = value.replaceAll(\"\\\\n\", \" \").replaceAll(\"\\n\", \" \");\n      value = value.replaceAll(\"&amp;\", \"&\");\n      self.input.prop(\"value\", value);\n    } else if (!self.properties.editable) {\n      value = typeof value == \"boolean\" ? value.toString() : value;\n\n      // Render as simple value\n      if (typeof value == \"string\") {\n        var displayValue = self.getDisplayValue();\n        var decodedDisplayValue = bizagi.util.decodeURI(displayValue);\n\n        // Replace line breaks for html line breaks\n        var valueToDisplay = decodedDisplayValue.replaceAll(\"&\", \"&amp;\");\n        valueToDisplay = valueToDisplay.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n        valueToDisplay = valueToDisplay.replaceAll(\"\\\"\", \"&#34;\").replaceAll(\"'\", \"&#39;\").replaceAll(\"/\", \"&#47;\");\n        valueToDisplay = valueToDisplay.replaceAll(\"\\\\n\", \"<br/>\");\n        valueToDisplay = valueToDisplay.replaceAll(\"\\n\", \"<br/>\");\n\n        self.input.html(valueToDisplay);\n\n      } else {\n        if (bizagi.util.isNull(value)) {\n          self.input.html(\"\");\n        }\n      }\n    }\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      if ($(control).attr(\"type\") !== \"hidden\" &&\n      $(control).css(\"display\") !== \"none\" &&\n      $(control).css(\"visibility\") !== \"hidden\") {\n\n        if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n          // Check that there is something in the value\n          // Check if a value has already been set\n          if (control.val() === \"\" || control.val() === control.attr(\"newValue\"))\n          return;\n\n          control.data(\"oldValue\", control.val());\n          control.val(\"\");\n\n          try {\n            // Create new tooltip\n            control.tooltip(\"destroy\");\n          } catch (e) {\n\n          }\n\n          control.attr(\"title\", self.getResource(\"render-number-retype\")); //\"Re-escriba el valor\"\n          control.tooltip();\n          control.tooltip(\"open\");\n\n          // Focus after 100ms to avoid bubbling\n          setTimeout(function () {\n            control.focus();\n          }, 100);\n\n        } else {\n          if (control.val() !== control.data(\"oldValue\")) {\n            self.setValue(\"\");\n            control.val(\"\");\n            control.data(\"oldValue\", \"\");\n            control.tooltip(\"destroy\");\n            control.attr(\"title\", self.getResource(\"render-text-retype-error\"));\n            control.tooltip();\n            control.tooltip(\"open\");\n\n            setTimeout(function () {\n              control.focus();\n            }, 100);\n\n          } else {\n\n            control.data(\"newValue\", control.val());\n            control.data(\"oldValue\", \"\");\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          }\n        }\n      }\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Render Label Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the label render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.label.extend(\"bizagi.rendering.label\", {}, {\n  /*\r\n                                                              *   Template method to implement in each device to customize each render after processed\r\n                                                              */\n  postRender: function postRender() {\n    var self = this;\n\n    // Apply a css class\n    self.getLabel().addClass(\"ui-bizagi-render-label\");\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Apply a css class\n    self._super();\n    self.getLabel().addClass(\"ui-bizagi-render-label\");\n  } });","/*\r\n*   Name: BizAgi Tablet Render Number Extension\r\n*   Author: Bizagi Mobile Team \r\n*   Comments:\r\n*   -   This script will redefine the number render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.number.extend(\"bizagi.rendering.number\", {}, {\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var value = self._super();\n    var template = self.renderFactory.getTemplate(\"readonlyNumber\");\n\n    return $.kendoTmpl(template, { value: value });\n  },\n\n  /* POSTRENDER \r\n     =====================================================*/\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n    self.numericInput = $(\"input\", self.getControl());\n\n    //Adjust the input in order to accept the comma input as decimal separator for certain language standars\n    if (self.properties.decimalSymbol == ',') {\n      self.numericInput.attr(\"lang\", \"en-150\");\n    }\n\n    var input = $(\"input\", self.element);\n    if (!input || input.length === 0) return;\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    control.closest(\".ui-bizagi-render\").addClass(\"bz-rn-read-only\");\n    self.numericInput = $(\".ui-bizagi-render-numeric\", control);\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set internal value\n    self.setValue(value, false);\n\n    if (typeof value == \"string\" || typeof value == \"number\") {\n      if (properties.editable && self.numericInput) {\n        self.numericInput.prop(\"value\", value);\n\n        // Formats the input\n        self.executeFormatCurrencyPlugin();\n      } else if (!properties.editable) {\n        self.numericInput.text(self.getDisplayValue());\n      }\n    }\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n    var input = $(\"input\", element);\n\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n\n      self.retypeDouble(control);\n    });\n  },\n\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n\n    if ($(control).attr(\"type\") !== \"hidden\" &&\n    $(control).css(\"display\") !== \"none\" &&\n    $(control).css(\"visibility\") !== \"hidden\") {\n\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n        // Check that there is something in the value or if a value has already been set\n        if (control.val() === \"\" || control.val() === control.attr(\"newValue\"))\n        return;\n\n        control.data(\"oldValue\", control.val());\n        control.val(\"\");\n\n        // Create new tooltip\n        try {\n          control.tooltip(\"destroy\");\n        } catch (e) {}\n\n        // Re-type value\n        control.attr(\"title\", self.getResource(\"render-number-retype\"));\n        control.tooltip();\n        control.tooltip(\"open\");\n\n        // Focus after 100ms to avoid bubbling\n        setTimeout(function () {\n          control.focus();\n        }, 100);\n\n      } else {\n\n        // Check that there is something in the value\n        if (control.val() === \"\") {\n          return;\n        }\n\n        if (control.val() !== control.data(\"oldValue\")) {\n          self.setValue(\"\");\n          control.val(\"\");\n          control.data(\"oldValue\", \"\");\n\n          try {\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          } catch (e) {}\n\n          control.attr(\"title\", self.getResource(\"render-number-retype-fail\"));\n          control.tooltip();\n          control.tooltip(\"open\");\n\n          setTimeout(function () {\n            control.focus();\n          }, 100);\n\n        } else {\n          control.data(\"newValue\", control.val());\n          control.data(\"oldValue\", \"\");\n\n          try {\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          } catch (e) {}\n        }\n\n      }\n    }\n  } });","/*\r\n *   Name: Bizagi Rendering Tablet numberScientificNotation\r\n *   Author: Luis Cabarique - LuisCE\r\n *   Comments:\r\n *   -   This script will define a base class to define the Scientific number notation\r\n */\n\n\nbizagi.rendering.numberScientificNotation.extend(\"bizagi.rendering.numberScientificNotation\", {}, {\n\n  /*\r\n                                                                                                     * Template method to implement in each device to customize each render after processed\r\n                                                                                                     */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    self.inputDisplay = $(\"input\", control).first();\n    self.numericInput = self.input = $(\"input\", control).last();\n    self.numericIcon = $(\"span\", self.getControl());\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n    // Attach Format Currency Plugin to format the input\n    self.attachFormatSientificNotation();\n\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var value = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 38);\n    var displayValue = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 20);\n\n\n    this._super(displayValue);\n\n    // Set value in input\n    if (value != null && properties.editable) {\n      self.numericInput.val(value);\n      self.inputDisplay.val(displayValue);\n    }\n\n  },\n\n  attachFormatSientificNotation: function attachFormatSientificNotation() {\n    var self = this;\n\n    self.inputDisplay.focus(function () {\n      $(this).val(self.getDisplayValue());\n    });\n\n    // Attach events\n    self.inputDisplay.blur(function () {\n      if (typeof self.getFormContainer().validationController == \"undefined\") self.getFormContainer().validationController = new bizagi.command.controllers.validation(self.getFormContainer(), self.validations);\n\n      var scientificNotationNumber = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol, 38);\n      var scientificNotationNumberDisplay = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol, 20);\n\n      self.numericInput.val(scientificNotationNumber);\n      self.inputDisplay.val(scientificNotationNumberDisplay);\n      // Updates internal value\n      self.setValue(scientificNotationNumber);\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Render Yes-No Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the Yes-No render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.yesno.extend(\"bizagi.rendering.yesno\", {}, {\n\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base \n    this._super();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-boolean-yesno\");\n\n    // Bind change event\n    control.bind(\"optiongroupchange\", function (evt, ui) {\n      // Only change the internal value when it truly changes\n      if (self.value != ui.value) {\n        self.setValue(ui.value);\n      }\n    });\n\n    control.find(\".ui-bizagi-render-boolean-radio\").bind(\"click\", function () {\n      self.getControl().find(\".ui-bizagi-render-boolean-radio\").removeClass(\"ui-radio-state-checked\");\n      self.getControl().find(\".ui-bizagi-render-boolean-radio\").removeClass(\"bz-check\").addClass(\"bz-unchecked\");\n\n      $(this).addClass(\"ui-radio-state-checked\");\n      $(this).addClass(\"ui-radio-state-checked\").addClass(\"bz-check\").removeClass(\"bz-unchecked\");\n\n      var val = $(this).attr(\"value\");\n\n      if (self.value != val) {\n        self.setValue(val);\n      }\n    });\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    self.setValue(value.toString().toLowerCase(), false);\n\n    // Set value in control\n    if (value != null && properties.editable) {\n      var parsedValue = bizagi.util.parseBoolean(value);\n      control.find(\".ui-bizagi-render-boolean-radio.yes\").\n      prop(\"checked\", parsedValue === true).\n      toggleClass(\"bz-unchecked\", parsedValue !== true).\n      toggleClass(\"bz-check\", parsedValue === true);\n\n      control.find(\".ui-bizagi-render-boolean-radio.no\").\n      prop(\"checked\", parsedValue === false).\n      toggleClass(\"bz-unchecked\", parsedValue !== false).\n      toggleClass(\"bz-check\", parsedValue === false);\n    } else {\n      // Call base\n      this._super(value);\n    }\n  } });","/**\r\n*   Name: BizAgi Tablet Render Check\r\n*   Author: Bizagi Mobile Team\r\n*   Comments: Check implementation for tablet\r\n*/\n\n// Extends itself\nbizagi.rendering.check.extend(\"bizagi.rendering.check\", {}, {\n\n  /**\r\n                                                               * Post render control\r\n                                                               * @returns {} \r\n                                                               */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    self.input = self.getControl().find(\"input\");\n\n    // Bind changes to set value\n    self.input.change(function () {\n      var isChecked = self.input.is(\":checked\");\n      if (isChecked) {\n        self.input.removeClass(\"bz-unchecked\").addClass(\"bz-check\");\n      } else {\n        self.input.addClass(\"bz-unchecked\").removeClass(\"bz-check\");\n      }\n      self.setValue(isChecked);\n    });\n  },\n\n  /**\r\n      * Set display value\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var input = self.getControl().find(\"input\");\n\n    self.setValue(value, false);\n\n    var parsedValue = \"\";\n    if (properties.editable) {\n      parsedValue = bizagi.util.parseBoolean(value);\n    } else {\n      parsedValue = bizagi.util.parseBoolean(self.properties.value);\n    }\n\n    input.prop(\"checked\", parsedValue === true);\n    input.toggleClass(\"bz-check\", parsedValue === true).toggleClass(\"bz-unchecked\", parsedValue !== true);\n  } });","/*\r\n*   Name: Bizagi Tablet Render upload Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the label render class to adjust to smartphones devices\r\n*/\n\n// Extends itself\nbizagi.rendering.upload.extend(\"bizagi.rendering.upload\", {\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  QUALITY_PICTURE: 50,\n  LIMIT: 1, // limit: The maximum number of multimedia files in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\n  EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"] },\n{\n\n  /**\r\n   * Template method to implement in each children to customize each control     \r\n   */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"upload\");\n    var allow_upload = true;\n    var items = \"\";\n\n    // Check files extensions\n    self.checkExtensions();\n\n    if (bizagi.util.isCordovaSupported()) {\n      allow_upload = self.validOptions && (self.validOptions.image || self.validOptions.video);\n    }\n\n    // Render template\n    var html = $.kendoTmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable && allow_upload,\n      noFiles: self.filesCount == 0,\n      allow_upload: allow_upload,\n      nonSupportedExtension: self.nonSupportedExtension,\n      allowSendInMail: properties.allowSendInMail });\n\n\n    // Render current children       \n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super();\n\n    if (!bizagi.util.isCordovaSupported() && !bizagi.util.media.fileAPISupported() || !properties.editable) {\n      self.addEventToOpenSlide();\n    } else if (!bizagi.util.isCordovaSupported()) {\n      self.activeUploadWebControl();\n    } else {\n      self.activateUploadNative();\n    }\n\n    // Handler to download the file\n    $(\"ul.files\", self.getControl()).on(\"click\", \".ui-bizagi-render-link.button\", function (e) {\n      bizagi.loading.start();\n      $.when(bizagi.util.media.downloadFile($(this).data(\"url\"), this.title)).fail(function (error) {\n        self.executeFormFailHandler(error);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n     * Render readonly\r\n     * @returns {}\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var container = self.getControl();\n\n    // Call base\n    self._super();\n\n    if (!bizagi.util.isOfflineForm({ context: self }) && typeof self.files !== \"undefined\" && self.files.length > 0) {\n      var filesLinkElements = container.find(\".ui-bizagi-render-link\");\n\n      filesLinkElements.on(\"click\", function () {\n        bizagi.loading.start();\n        $.when(bizagi.util.media.downloadFile($(this).data(\"url\"), this.title)).fail(function (error) {\n          self.executeFormFailHandler(error);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      });\n    }\n  },\n\n  /**\r\n     * Attach open slide\r\n     * @returns {}\r\n     */\n  addEventToOpenSlide: function addEventToOpenSlide() {\n    var self = this;\n    var mode = self.getMode();\n    var container = self.getControl();\n\n    self.itemAddfile = $(\".bz-rn-upload-show-menu\", container);\n    self.itemAddfile.hide();\n\n    if (!bizagi.util.isCordovaSupported() && !bizagi.util.media.fileAPISupported()) {\n      self.element.addClass(\"bz-rn-read-only\");\n    }\n\n    $(\"li\", container).click(function (event) {\n      if (mode === \"execution\") {\n        bizagi.loading.start();\n        // Avoid redirect & download\n        event.preventDefault();\n        event.stopPropagation();\n\n        var title = this.title || $(this).data(\"name\");\n\n        $.when(bizagi.util.media.downloadFile($(this).data(\"url\"), title)).fail(function (error) {\n          self.executeFormFailHandler(error);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }\n    });\n  },\n\n  /**\r\n     * Active upload by native mode\r\n     * @returns {}\r\n     */\n  activateUploadNative: function activateUploadNative() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getControl();\n\n    self.renderControl();\n    self.itemAddfile = $(\".bz-rn-upload-show-menu\", container);\n\n    if (!bizagi.util.isCordovaSupported() || !properties.editable) {\n      self.itemAddfile.hide();\n    }\n\n    // Check files number\n    self.checkMaxFiles();\n\n    // Attach delete option\n    self.attachDeleteHandler();\n\n    // Not has valid extensions\n    if (self.validOptions && !self.validOptions.image && !self.validOptions.video) {\n      $(\"> *\", self.itemAddfile).hide();\n      return;\n    }\n\n    var uploadTemplate = self.renderFactory.getTemplate(\"uploadModalView\");\n    var kendoTemplate = kendo.template(uploadTemplate, { useWithBlock: false });\n\n    // Check is offline form\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Creating modal view\n    var $modalView = $.trim(kendoTemplate({\n      editable: self.properties.editable,\n      noFiles: self.properties.noFiles,\n      displayName: self.properties.displayName || \"\",\n      validExtensions: self.validOptions,\n      isOfflineForm: isOfflineForm }));\n\n\n    self.itemAddfile.bind(\"click\", function (e) {\n      var modalView = new kendo.mobile.ui.ModalView($modalView, {\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        modal: false,\n        useNativeScrolling: true });\n\n\n      self.configureModalViewHandlers(modalView.element);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.open();\n    });\n  },\n\n  /**\r\n     * Configure the modalView Handlers for the new combo control.\r\n     * @param {} inputContainer\r\n     * @returns {}\r\n     */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    // Getting combo list elements\n    self.listOptions = inputContainer.find(\".bz-rn-upload-options li\");\n\n    // Setting the initial selected display value\n    self.listOptions.bind(\"click\", function () {\n      self.applyPlugin($(this).data(\"role\"), this.getBoundingClientRect());\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      if (inputContainer.data(\"kendoMobileModalView\")) {\n        inputContainer.data(\"kendoMobileModalView\").close();\n      }\n    });\n  },\n\n  /**\r\n     * Attach delete option\r\n     * @returns {}\r\n     */\n  attachDeleteHandler: function attachDeleteHandler() {\n    var self = this;\n    var control = self.getControl();\n\n    $(\".bz-rn-upload-delete-icon\", control).bind(\"click\", function () {\n      var item = $(this).parent(\".ui-bizagi-render-upload-item\");\n      var file = item.data();\n\n      $.when(self.deleteUploadItem(item, file.id)).\n      done(function () {\n        // Remove item\n        item.hide();\n        item.remove();\n\n        // Update value\n        self.setValue(self.files, false);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n        // Trigger change\n        self.triggerRenderChange();\n      });\n    });\n  },\n\n  /**\r\n     * Apply plugin\r\n     * @param {} option\r\n     * @param {} coordinates\r\n     * @returns {}\r\n     */\n  applyPlugin: function applyPlugin(option, coordinates) {\n    var self = this;\n    var resolutionUpload;\n\n    // If android version is less than 4.4 avoid to show upload sizes due to compatibility with blob files\n    var version = bizagi.util.getAndroidVersion();\n    var hideUploadSizes = version && version <= 4.4;\n\n    // Resolution upload menu\n    if (hideUploadSizes) {\n      resolutionUpload = [\n      { \"guid\": 4, \"displayName\": bizagi.localization.getResource(\"workportal-size-original\") }];\n\n    } else {\n      resolutionUpload = bizagi.util.media.getImageResolutionItems();\n    }\n\n    // Attach document\n    $(\".bz-resolution-container\", self.getControl()).actionSheet({\n      actions: resolutionUpload,\n      actionClicked: function actionClicked(action) {\n        bizagi.loading.start();\n\n        $.when(self.resolutionButtonHandler(action.guid)).always(function () {\n          bizagi.loading.stop();\n        });\n      },\n      appear: function appear(action) {\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      cancelClicked: function cancelClicked(action) {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n\n    switch (option) {\n      case \"image\":\n        // Check is offline form\n        var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n        // Select image\n        var popover = new CameraPopoverOptions(coordinates.left, coordinates.top - 20, 200, 100, 4);\n        var options = {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n          popoverOptions: popover };\n\n\n        navigator.camera.getPicture(function (dataImage) {\n          self.dataImage = dataImage;\n          var extensions = self.Class.EXTENSIONSIMG.\n          concat(self.Class.EXTENSIONSVIDEO);\n\n          bizagi.loading.start();\n          self.closeModalView();\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).\n          then(function () {\n            return $.when(bizagi.util.media.getFileDataInfo(self.dataImage)).\n            then(function (file) {\n\n              self.fileProperties = file;\n\n              if (bizagi.util.media.checkFileTypes(file, self.properties, extensions)) {\n                // \"new Blob\" constructor is not supported in android version 4.2.2\n                var version = bizagi.util.getAndroidVersion();\n\n                if (version && version <= 4.2 || isOfflineForm) {\n                  return self.saveImage(self, self.dataImage);\n                } else {\n\n                  if (!bizagi.util.isAndroid()) {\n                    return $.when(bizagi.util.media.modalResolutionUpload()).then(\n                    function (buttonIndex) {\n                      if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\n                        return self.resolutionButtonHandler(buttonIndex);\n                      }\n                    });\n\n                  } else {\n                    // Force click to show actionsheet menu\n                    $(\".bz-resolution-container\", self.getControl()).click();\n                  }\n                }\n              }\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        }, self.onFail.bind(self), options);\n        break;\n\n      case \"file\":\n        // TODO: Add handlers to upload web                \n        break;\n\n      case \"cimage\":\n        navigator.camera.getPicture(function (dataImage) {\n          bizagi.loading.start();\n          self.closeModalView();\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\n            return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (file) {\n              self.fileProperties = file;\n              return self.saveImage(self, dataImage);\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        }, self.onFail.bind(self), {\n          quality: self.Class.QUALITY_PICTURE,\n          targetWidth: 1280,\n          targetHeight: 960,\n          correctOrientation: true });\n\n        break;\n\n      case \"cvideo\":\n        navigator.device.capture.captureVideo(function (dataImage) {\n          bizagi.loading.start();\n          self.closeModalView();\n\n          $.when(bizagi.util.media.checkMaxSizeVideo(dataImage, self.properties)).then(function () {\n            return self.saveVideo(self, dataImage);\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        }, self.onFail.bind(self), { limit: self.Class.LIMIT });\n        break;\n\n      default:\n        break;}\n\n  },\n\n  closeModalView: function closeModalView() {\n    var self = this;\n    var modalView = self.listOptions.closest(\".modalview-upload-options\");\n\n    if (self.listOptions && modalView) {\n      if (modalView.data(\"kendoMobileModalView\")) {\n        modalView.data(\"kendoMobileModalView\").close();\n      }\n    }\n  },\n\n  resolutionButtonHandler: function resolutionButtonHandler(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    $(\".ui-bizagi-resolution-container\").css(\"display\", \"none\");\n    $(\".ui-bizagi-mask\").remove();\n\n    // If original, save image normally, if not, reduce quality and size\n    if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\n      return self.saveImage(self, self.dataImage);\n    } else {\n      var resolution = bizagi.util.media.getImageResolution(actionSelected);\n\n      return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).\n      then(function (result) {\n        self.editedImageURL = result.localUrl;\n        self.properties.url = result.base64Image;\n\n        return self.saveImage(self, self.dataImage);\n      });\n    }\n\n  },\n\n  /**\r\n     * Call the form failhandler with an specific error\r\n     * @param {} error\r\n     * @returns {}\r\n     */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var self = this;\n    var errorResponse = error.responseText ? error.responseText : bizagi.localization.getResource(\"workportal-general-error\");\n    self.getFormContainer().failHandler(errorResponse);\n  },\n\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(\"uploadItem\");\n\n    // Don't render urls when not running in execution mode\n    var url = mode !== \"execution\" ? \"javascript:void(0);\" : self.buildItemUrl(file);\n\n    var html = $.kendoTmpl(template, {\n      url: url,\n      image: false,\n      allowDelete: properties.allowDelete,\n      editable: properties.editable,\n      filename: file.fileName,\n      id: file.id,\n      mode: mode,\n      isNativeContext: bizagi.util.isNativePluginSupported(),\n      isCordovaSupported: bizagi.util.isCordovaSupported() });\n\n\n    return html;\n\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"upload\";\n  },\n\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  },\n\n  getTemplateEditionName: function getTemplateEditionName() {\n    return \"edition.upload\";\n  },\n\n  getTemplateEditionMenu: function getTemplateEditionMenu() {\n    return \"edition.upload.menu\";\n  },\n\n  /**\r\n     * Send image using HTTP\r\n     * @param {} context\r\n     * @param {} dataImage\r\n     * @returns {}\r\n     */\n  saveImage: function saveImage(context, dataImage) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n    var fileName = self.fileProperties.name;\n\n    if (self.editedImageURL) {\n      params.dataFile = self.editedImageURL;\n    } else {\n      params.dataFile = self.fileProperties.url;\n    }\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.mimeType = \"image/jpeg\";\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n\n    //Cleans variables related previous gallery uploads\n    self.editedImageURL = null;\n    self.fileProperties = null;\n\n    // Fix android 4.4 getting images from recent folder\n    params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n    return $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      var response = JSON.parse(decodeURIComponent(r.response));\n      if (response.type === \"error\") {\n        bizagi.showMessageBox(response.message, response.errorType);\n      } else {\n        self.onUploadFileCompleted(context, response);\n      }\n    }).fail(function (error) {\n      var response = JSON.parse(decodeURIComponent(error.responseText));\n      bizagi.showMessageBox(response.message, response.type);\n    });\n  },\n\n  /**\r\n     * saveVideo\r\n     * @param {} context\r\n     * @param {} dataVideo\r\n     * @returns {}\r\n     */\n  saveVideo: function saveVideo(context, dataVideo) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileName = dataVideo[0].name;\n    params.options.mimeType = \"video/quicktime\";\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataVideo[0].fullPath;\n\n    return $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      var response = JSON.parse(decodeURIComponent(r.response));\n      if (response.type === \"error\") {\n        bizagi.showMessageBox(response.message, response.errorType);\n      } else {\n        self.onUploadFileCompleted(context, response);\n      }\n    });\n  },\n\n  /**\r\n      * Management fail messages\r\n      */\n  onFail: function onFail(error) {\n    var messageError = bizagi.util.processFailMessage(error);\n\n    if (typeof messageError == \"string\" && messageError.indexOf(\"No Activity found to handle Intent\") !== -1) {\n      var hasResource = bizagi.util.isValidResource(\"render-upload-error-media-app\");\n      var message = hasResource ? bizagi.localization.getResource(\"render-upload-error-media-app\") : \"Your device does not have an app to execute this action.\";\n\n      bizagi.showMessageBox(message);\n    }\n  },\n\n  onUploadFileCompleted: function onUploadFileCompleted(context, result) {\n    var self = context;\n    var control = self.getControl();\n    var uploadWrapper = $(\"ul.files\", control);\n\n    if (result.id && result.fileName) {\n      // Locate it before the upload wrapper\n      var newItem = self.renderUploadItem(result);\n      $(uploadWrapper).append(newItem);\n\n      // Increment counter\n      self.filesCount = self.filesCount + 1;\n\n      // Copy the files value but not its reference\n      var files = self.files.slice();\n\n      //Add the new item to this temporal array\n      files.push([result.id, result.fileName]);\n\n      // Update value\n      self.setValue(files, true);\n\n      // Check maxFiles\n      self.checkMaxFiles();\n\n      control.find(\".ui-bizagi-render-upload-item-no-upload\").hide();\n\n      //Add delete functionality just for elements included in common forms, not inside columns\n      if (self.properties.type !== \"columnUpload\" && self.properties.allowDelete && self.properties.editable) {\n        self.attachDeleteHandler();\n      }\n\n      self.editedImageURL = null;\n    } else {\n      bizagi.showMessageBox(result.message, \"Error\");\n    }\n  },\n\n  /**\r\n     * Checks if the total files uploaded reachs the maximun supported\r\n     * @returns {}\r\n     */\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var maxFiles = properties.maxfiles;\n    var actualFiles = properties.value ? properties.value.length : 0;\n\n    if (properties.editable) {\n      if (maxFiles !== 0 && self.filesCount >= maxFiles && actualFiles >= maxFiles) {\n        self.itemAddfile.hide();\n      } else {\n        self.itemAddfile.show();\n      }\n    } else {\n      //Checks if the files count is equals to 0, to show the no files dialog\n      if (self.filesCount == 0) {\n        $(\"#no-files\", control).show();\n      }\n    }\n  },\n\n  /**\r\n     * Checks the file Extension in each filetype that the device supports\r\n     * @returns {}\r\n     */\n  checkExtensions: function checkExtensions() {\n    var self = this;\n    var validExtensions = self.properties.validExtensions || \"\";\n\n    //Helps to get the non-supported extensions for mobile\n    var nonSupportedExtensionsArr = [];\n\n    // Remove spaces in the list\n    validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\n    validExtensions = validExtensions.split(\";\");\n\n    // Initizalice the nonSupportedExtension element\n    self.nonSupportedExtension = \"\";\n\n    self.validOptions = { video: false, image: false, file: false };\n\n    if (typeof validExtensions === \"undefined\" || validExtensions[0] === \"\") {\n      self.validOptions = { video: true, image: true, file: false };\n\n      return;\n    }\n\n    if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) return;\n\n    for (var index = 0, length = validExtensions.length; index < length; index++) {\n      validExtensions[index] = validExtensions[index].replace(\"*.\", \"\");\n\n      /*if (self.Class.EXTENSIONSFILE.toString().indexOf(validExtensions[index]) >= 0) {\r\n                                                                             self.validOptions.file = true;\r\n                                                                         } else */\n      if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[index]) >= 0) {\n        self.validOptions.image = true;\n      } else if (self.Class.EXTENSIONSVIDEO.toString().indexOf(validExtensions[index]) >= 0) {\n        self.validOptions.video = true;\n      } else {\n        //If the extension is not part or any category, it is stored in nonSupportedExtensions array\n        nonSupportedExtensionsArr.push(validExtensions[index]);\n      }\n    }\n\n    // Adjust file extension, in order to make it multiline & Stores the non-supported extensions\n    self.nonSupportedExtension = nonSupportedExtensionsArr.join(\", \") || \"\";\n  },\n\n  /**\r\n     * Active upload web control\r\n     * @returns {}\r\n     */\n  activeUploadWebControl: function activeUploadWebControl() {\n    var self = this;\n    var container = self.getControl();\n    var uploadfile = $(\".bz-rn-upload-web\", container);\n    var file = $(\".bz-rn-upload-show-menu span.bz-cm-icon\", container);\n\n    self.itemAddfile = $(\".bz-rn-upload-show-menu\", container);\n\n    // Check maximum files number\n    if (self.itIsMaxNumberFilesReached()) {\n      self.itemAddfile.hide();\n    }\n\n    self.itemAddfile.click(function () {\n      uploadfile.click();\n    });\n\n    // attach events to file-icon\n    file.addClass(\"bz-rn-upload-native\");\n    file.on(\"click\", function () {\n      uploadfile.click();\n    });\n\n    // Attach event to upload-control\n    uploadfile.on(\"change\", function () {\n      var that = this;\n      var dataFile = that.files[0];\n      var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSFILE, self.Class.EXTENSIONSVIDEO);\n\n      dataFile.fullPath = that.value;\n\n      bizagi.loading.start();\n\n      if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n        $.when(self.processUploadFile(dataFile)).\n        then(function (result) {\n          self.onUploadFileCompleted(self, JSON.parse(decodeURIComponent(result)));\n        }).fail(function (error) {\n          if (error.statusText !== \"Unauthorized\" || error.statusText.toLowerCase() !== \"ok\") {\n            bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-language-error\"));\n          }\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      } else {\n        bizagi.loading.stop();\n      }\n\n      // Clearing input Values\n      $(that).val(\"\");\n    });\n\n    // Check files number\n    self.checkMaxFiles();\n\n    // Attach delete option\n    self.attachDeleteHandler();\n  },\n\n  /**\r\n     * Check the maximun file than can be uploaded\r\n     * @returns {}\r\n     */\n  itIsMaxNumberFilesReached: function itIsMaxNumberFilesReached() {\n    var self = this;\n    var properties = self.properties;\n    var maxFiles = properties.maxfiles;\n    var actualFiles = properties.value ? properties.value.length : 0;\n\n    return maxFiles !== 0 && actualFiles >= maxFiles;\n  },\n\n  /**\r\n     * Build add params to send to the server\r\n     * @param {} dataFile\r\n     * @returns {}\r\n     */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n    var properties = self.properties;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(prefix + \"xpath\", self.getUploadXpath());\n    formData.append(prefix + \"idRender\", properties.id);\n    formData.append(prefix + \"xpathContext\", properties.xpathContext);\n    formData.append(prefix + self.Class.BA_PAGE_CACHE, properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(properties.xpath, dataFile);\n\n    if (properties.contexttype) {\n      formData.append(prefix + \"contexttype\", properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  },\n\n  /**\r\n     * Process an upload file into the server\r\n     * @param {} context\r\n     * @param {} dataFile\r\n     * @returns {}\r\n     */\n  processUploadFile: function processUploadFile(dataFile) {\n    var data = { url: this.properties.addUrl, formData: this.buildAddFileParams(dataFile) };\n    return this.dataService.processUploadFile(data);\n  },\n\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var items = $(\".ui-bizagi-render-upload-item\", self.getControl());\n\n    items.each(function (index, item) {\n      item = $(item);\n      var file = item.data();\n      $.when(self.deleteUploadItem(item, file.id)).done(function () {\n        // Remove item\n        item.hide();\n        item.remove();\n\n        // Update value\n        self.setValue(self.files, false);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n        // Trigger change\n        self.triggerRenderChange();\n      });\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Render upload Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the label render class to adjust to smartphones devices\r\n*/\n\n// Extends itself\nbizagi.rendering.upload.extend(\"bizagi.rendering.upload.offline\", {\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  QUALITY_PICTURE: 50,\n  LIMIT: 1, // limit: The maximum number of multimedia files in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\n  EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"] },\n{\n  postRender: function postRender() {\n    var self = this;\n\n    if (!bizagi.util.isCordovaSupported() || !self.properties.editable) {\n      self.addEventToOpenSlide();\n    } else {\n      self.activateUploadNative();\n    }\n\n\n\n    // Attach Events\n    self.atachOpenFileEvent();\n    self.configureHelpText();\n  },\n\n  /**\r\n      * Attach open slide\r\n      * @returns {} \r\n      */\n  addEventToOpenSlide: function addEventToOpenSlide() {\n    this.itemAddfile = $(\".bz-rn-upload-show-menu\", this.getControl());\n    this.itemAddfile.hide();\n  },\n\n  atachOpenFileEvent: function atachOpenFileEvent() {\n    var self = this;\n    // Handler to open or download the file\n    $(\"ul.files\", self.getControl()).on(\"click\", \".ui-bizagi-render-link.button\", function (e) {\n\n      var dataIndex = $(this).data(\"index\");\n      var selectedValue = typeof dataIndex == \"number\" ? self.properties.value[dataIndex] : null;\n\n      if (selectedValue) {\n        var fileData = selectedValue[1] ? selectedValue[1].value : \"\";\n        var fileMimeType = selectedValue[2] ? selectedValue[2].value : \"image/jpeg\";\n\n        bizagi.loading.start();\n        $.when(bizagi.util.media.openOfflineFile(fileData, fileMimeType, this.title)).fail(function (error) {\n          bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-language-error\"));\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }\n    });\n  },\n\n  /**  \r\n      *  Template method to implement in each children to customize each control\r\n      * @returns {} \r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var allow_upload = true;\n    var items = \"\";\n    var template = self.renderFactory.getTemplate(\"upload\");\n\n    // Check files extensions\n    self.checkExtensions();\n\n    if (bizagi.util.isCordovaSupported()) {\n      allow_upload = self.validOptions && self.validOptions.image;\n    }\n\n    var maxFileSizeOfProperty = Number(self.properties.maxSize) || 1048576;\n    var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 1048576;\n\n    self.properties.maxSize = maxFileSizeOfProperty < maxFileSizeOfUser ? maxFileSizeOfProperty : maxFileSizeOfUser;\n\n    // Render template\n    var html = $.kendoTmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: self.properties.editable && allow_upload,\n      noFiles: self.filesCount === 0,\n      allow_upload: allow_upload,\n      validExtensions: self.properties.validExtensions,\n      nonSupportedExtension: self.nonSupportedExtension,\n      allowSendInMail: self.properties.allowSendInMail });\n\n\n    // Render current children        \n    for (var i = 0, length = self.filesCount; i < length; i++) {\n      var item = self.renderUploadItem(self.files[i], i);\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Render readonly\r\n      * @returns {} \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.atachOpenFileEvent();\n  },\n\n  /**\r\n      * Active upload by native mode\r\n      * @returns {} \r\n      */\n  activateUploadNative: function activateUploadNative() {\n    this._super();\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"upload\";\n  },\n\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  },\n\n  getTemplateEditionName: function getTemplateEditionName() {\n    return \"edition.upload\";\n  },\n\n  getTemplateEditionMenu: function getTemplateEditionMenu() {\n    return \"edition.upload.menu\";\n  },\n\n  saveImage: function saveImage(context, dataImage) {\n    var self = this;\n\n    // Fix android 4.4 getting images from recent folder        \n    dataImage = bizagi.util.media.getImagePath(dataImage);\n\n    // Load image\n    self.getDataUri(dataImage, function (dataUrl) {\n      var fileExtension = self.fileProperties ? self.fileProperties.extension : \"\";\n      var fileName = bizagi.util.uniqueID() + fileExtension;\n\n      self.onUploadFileCompletedOffline(fileName, dataUrl);\n    });\n  },\n\n  /**\r\n      * Create an offline image\r\n      * @param {} context \r\n      * @param {} url \r\n      * @param {} callback \r\n      * @returns {} \r\n      */\n  getDataUri: function getDataUri(path, callback) {\n    var self = this;\n    var xhr = new XMLHttpRequest();\n\n    try {\n\n      xhr.onload = function () {\n        var reader = new FileReader();\n\n        reader.onloadend = function () {\n          var content = reader.result;\n          callback(content);\n        };\n        reader.readAsDataURL(xhr.response);\n      };\n\n      xhr.open(\"GET\", path);\n      xhr.responseType = \"blob\";\n      xhr.send();\n\n    } catch (error) {\n      callback(\"\");\n    }\n  },\n\n  saveVideo: function saveVideo(context, dataVideo) {\n    var self = context;\n\n    window.resolveLocalFileSystemURL(dataVideo[0].fullPath, function (fileEntry) {\n      fileEntry.file(function (file) {\n        var reader = new FileReader();\n\n        reader.onloadend = function (evt) {\n          var fileExtension = bizagi.util.media.getFileExtension(dataVideo[0].name);\n          var fileName = bizagi.util.uniqueID() + fileExtension;\n\n          self.onUploadFileCompletedOffline(fileName, evt.target.result);\n        };\n\n        reader.readAsDataURL(file);\n      }, self.failReadFile);\n    }, self.failReadFile);\n  },\n\n  renderUploadItem: function renderUploadItem(objectUpload, index) {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(\"uploadItem\");\n\n    var html = $.kendoTmpl(template, {\n      url: \"javascript:void(0);\",\n      image: false,\n      allowDelete: self.properties.allowDelete || false,\n      id: bizagi.util.randomNumber(),\n      mode: mode,\n      editable: self.properties.editable,\n      filename: objectUpload[0].value,\n      isNativeContext: false,\n      isCordovaSupported: bizagi.util.isCordovaSupported(),\n      index: index });\n\n\n    return html;\n  },\n\n  /**\r\n      * Collect Data\r\n      * @param {} renderValues \r\n      * @returns {} \r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n\n    if (self.filesCount > 0) {\n      renderValues[self.properties.xpath] = self.files;\n    } else if (self.properties.method === \"delete\") {\n      renderValues[self.properties.xpath] = [];\n\n      delete self.properties.method;\n    }\n  },\n\n  onUploadFileCompletedOffline: function onUploadFileCompletedOffline(name, dataimage) {\n    var self = this;\n    var control = self.getControl();\n    var uploadWrapper = $(\"ul.files\", control);\n    var dataUrltoSave = dataimage.replace(/^data:.*;base64,/, \"\");\n    var properties = self.properties;\n    var dataMimeType = dataimage.match(/data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/);\n    dataMimeType = dataMimeType && dataMimeType.length ? dataMimeType[1] : \"image/jpeg\";\n\n    var fileToSave = [\n    { xpath: \"fileName\", DataType: \"15\", value: name },\n    { xpath: \"data\", DataType: \"19\", value: dataUrltoSave },\n    { xpath: \"mimeType\", DataType: \"15\", value: dataMimeType }];\n\n\n    // Locate it before the upload wrapper\n    var newItem = self.renderUploadItem(fileToSave, self.filesCount);\n    $(uploadWrapper).append(newItem);\n\n    // Copy the files value but not its reference\n    var files = self.files.slice();\n\n    //Add the new item to this temporal array\n    files.push(fileToSave);\n\n    // Increment counter\n    self.filesCount = self.filesCount + 1;\n\n    // Update value\n    self.setValue(files, false);\n\n    // Check maxFiles\n    self.checkMaxFiles();\n\n    self.triggerRenderChange();\n\n    control.find(\".ui-bizagi-render-upload-item-no-upload\").hide();\n\n    if (properties.allowDelete && properties.editable) {\n      self.attachDeleteHandler();\n    }\n\n    // Close modalview\n    self.closeModalView();\n    bizagi.util.tablet.stopLoading();\n  },\n\n  failReadFile: function failReadFile(evt) {\n    try {\n      bizagi.log(\"Error code: \" + evt.target.error.code);\n    } catch (e) {\n    }\n  },\n\n  onFail: function onFail(error) {\n    this._super(error);\n    this.closeModalView();\n  },\n\n  checkMaxFiles: function checkMaxFiles() {\n    bizagi.rendering.upload.prototype.checkMaxFiles.apply(this, arguments);\n  },\n\n  checkExtensions: function checkExtensions() {\n    var self = this;\n    var validExtensions = self.properties.validExtensions || \"\";\n\n    //Helps to get the non-supported extensions for mobile\n    var nonSupportedExtensionsArr = [];\n\n    // Remove spaces in the list\n    validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\n    validExtensions = validExtensions.split(\";\");\n\n    // Initialize the nonSupportedExtension element\n    self.nonSupportedExtension = \"\";\n\n    self.validOptions = { video: false, image: false, file: false };\n\n    if (typeof validExtensions === \"undefined\" || validExtensions[0] === \"\") {\n      self.validOptions.image = true;\n\n      return;\n    }\n\n    if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) return;\n\n    for (var index = 0, length = validExtensions.length; index < length; index++) {\n      validExtensions[index] = validExtensions[index].replace(\"*.\", \"\");\n\n      if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[index]) >= 0) {\n        self.validOptions.image = true;\n      } else {\n        // If the extension is not part or any category, it is stored in nonSupportedExtensions array\n        nonSupportedExtensionsArr.push(validExtensions[index]);\n      }\n    }\n\n    // Adjust file extension, in order to make it multiline & Stores the non-supported extensions\n    self.nonSupportedExtension = nonSupportedExtensionsArr.join(\", \") || \"\";\n  },\n\n  checkMaxSize: function checkMaxSize(objectUri) {\n    return bizagi.util.media.checkMaxSize(objectUri, this.properties);\n  },\n\n  checkMaxSizeVideo: function checkMaxSizeVideo(objectVideo) {\n    return bizagi.util.media.checkMaxSizeVideo.apply(objectVideo, this.properties);\n  },\n\n  /**  \r\n      * This render cannot be sent because it is full ajax\r\n      * @returns {} \r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Attach delete option & Removes a file from the upload control\r\n      * @returns {} \r\n      */\n  attachDeleteHandler: function attachDeleteHandler() {\n    var self = this;\n    var control = self.getControl();\n\n    $(\".bz-rn-upload-delete-icon\", control).bind(\"click\", function () {\n      var context = $(this);\n      var item = context.parent(\".ui-bizagi-render-upload-item\");\n      var file = item.data();\n      var fileIndex = item.index();\n\n      // Substract counter\n      self.filesCount = self.filesCount - 1;\n\n      if (self.filesCount === 0) {\n        self.properties.method = \"delete\";\n      }\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem, index) {\n        return index !== fileIndex && fileItem !== file.name;\n      });\n\n      // Remove item\n      item.hide();\n      item.remove();\n\n      // Update value\n      self.setValue(self.files, false);\n\n      // Check maxFiles\n      self.checkMaxFiles();\n\n      // Trigger change\n      self.triggerRenderChange();\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Render Grid Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the grid render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.grid.extend(\"bizagi.rendering.grid\", {\n  GRID_PAGE_SIZE: 10 },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    this._super(params);\n\n    // Create a data-structure to keep track of each cell properties\n    this.cellMetadata = {};\n\n    // Fill default properties\n    var properties = this.properties;\n    var form = self.getFormContainer();\n\n    // If not helptext configured, Just apply display-type: vertical, align it to the left\n    if (self.properties.helpText && self.properties.helpText != null && self.properties.helpText != \"\") {\n      properties.displayType = \"value\";\n    } else {\n      properties.displayType = \"vertical\";\n    }\n\n    properties.labelAlign = \"left\";\n\n    if (properties.groupBy || properties.groupSummary) {\n      // Add warning\n      form.addWarning(self.getResource(\"render-tablet-warning-grid\"));\n    }\n  },\n\n  /* method overrides\r\n     *  from base or virtual\r\n     */\n\n  /*\r\n        *   Update or init the element data\r\n        */\n  initializeData: function initializeData(data) {\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    this._super(data);\n  },\n\n  /*\r\n     * Updates manually the affected cell \r\n     */\n  updateAffectedCellManually: function updateAffectedCellManually() {\n  },\n\n  /*\r\n     * Get the row index using the key as a reference\r\n     */\n  getRowIndexByKey: function getRowIndexByKey() {\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    self.initialLoadDone = false;\n    self.isPaginatorActive = false;\n\n    // Call base \n    self._super();\n\n    // Find component holder\n    self.grid = $(\">div\", control);\n\n    // Hide common label\n    self.getLabel().hide();\n\n    // Grid plugin\n    self.applyGridPlugin();\n\n    // Set initial data\n    if (properties.data) {\n      self.updateData(properties.data);\n\n      // Trigger change in order to start up the actions when the controls is ready\n      $.when(self.ready()).\n      done(function () {\n        self.triggerRenderChange({ changed: false });\n      });\n    }\n\n    // Execute pending actions\n    self.initialLoadDone = true;\n\n    for (var i in self.pendingActions) {\n      if (self.pendingActions.hasOwnProperty(i)) {\n        self.pendingActions[i].method.apply(self, self.pendingActions[i].arguments);\n      }\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {} \r\n      */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var grid = self.grid;\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Build column metadata\n    var columns = self.buildColumnModel();\n\n    var columnsTotalizers = jQuery.grep(columns, function (a) {\n      return a.summarizeBy;\n    });\n\n    // Apply grid plugin\n    grid.bizagi_grid_tablet({\n      columns: columns,\n      maxColumns: 4,\n      title: properties.displayName,\n      isOfflineForm: isOfflineForm || false,\n      mode: mode,\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\n        pager: self.renderFactory.getTemplate(\"bizagi.grid.pager\"),\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons\"),\n        dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\"),\n        totalizer: self.renderFactory.getTemplate(\"bizagi.grid.totalizer\") },\n\n      actions: {\n        add: properties.allowAdd, //|| properties.inlineAdd,\n        edit: properties.allowEdit && properties.withEditForm && properties.data != null,\n        remove: properties.allowDelete,\n        inlineAdd: false, //properties.inlineAdd,\n        allowMore: properties.allowMore,\n        enableXlsExport: false,\n        enablePdfExport: false,\n        hasTotalizer: columnsTotalizers.length > 0 && properties.data.rows.length > 0 ? true : false },\n\n      pageRequested: function pageRequested(ui) {\n        if (mode != \"execution\") return;\n        self.fetchData(ui.page, ui.sortBy, ui.sortType);\n      },\n      sortRequested: function sortRequested(ui) {\n        if (mode != \"execution\") return;\n        self.fetchData(ui.page, ui.sortBy, ui.sortType);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        if (mode != \"execution\") return;\n        self.triggerHandler(\"rowSelected\", { id: ui.key, data: ui });\n      },\n      addRow: function addRow(ui) {\n        if (mode != \"execution\") return;\n        self.addRow();\n      },\n      editRow: function editRow(ui) {\n        if (mode != \"execution\") return;\n        self.editRow(ui.key);\n      },\n      deleteRow: function deleteRow(ui) {\n        if (mode != \"execution\") return;\n        self.deleteRow(ui.key);\n      },\n      moreRows: function moreRows(ui) {\n        if (mode != \"execution\")\n        return;\n        self.moreRows(ui);\n      },\n      showMore: function showMore(ui) {\n        self.showMore(ui.key);\n      },\n      totalData: function totalData(ui) {\n        if (mode != \"execution\") return;\n        self.onTotalData();\n      } });\n\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Do the same as the post-render            \n    self.postRender();\n  },\n\n  /** \r\n     *   Creates the column model required to initialize the grid plugin\r\n     */\n  buildColumnModel: function buildColumnModel() {\n    var self = this;\n    var properties = self.properties;\n    var columns = self.columns;\n\n    // Create id column first\n    var keyColumn = {\n      name: \"id\",\n      index: 0,\n      label: \"id\",\n      hidden: true,\n      align: \"center\",\n      key: true };\n\n\n    // Add to column model\n    var columnModel = [];\n    columnModel.push(keyColumn);\n\n    $.each(columns, function (index, column) {\n\n      // Set grid column\n      column.columnIndex = index + 1;\n      var columnLabel = !bizagi.util.isEmpty(column.properties.displayName) ? column.properties.displayName : \" \";\n      var gridColumn = {\n        name: column.properties.xpath,\n        index: index + 1,\n        label: columnLabel,\n        key: false,\n        hidden: !column.properties.visible || column.properties.type == \"columnHidden\" || column.properties.columnVisible == false,\n        summarizeBy: column.properties.totalize && column.properties.totalize.operation ? column.properties.totalize.operation : undefined,\n        bizAgiProperties: column.properties };\n\n\n      columnModel.push(gridColumn);\n    });\n\n    return columnModel;\n  },\n\n  /**\r\n     * Makes the grid to refresh\r\n     */\n  refresh: function refresh() {\n    var self = this;\n    self.fetchData();\n  },\n\n  /*\r\n     *   Holds the execution until the grid data is ready after a load operation\r\n     */\n  dataReady: function dataReady() {\n    var self = this;\n\n    return self.dataReadyDeferred != null ? self.dataReadyDeferred.promise() : null;\n  },\n\n  /*\r\n     * Update data from local changes\r\n     */\n  loadChanges: function loadChanges(rows) {\n    var self = this;\n    var idRow = [],i;\n    // get data from the rows\n    for (i = 0, length = rows.length; i < length; i++) {\n      idRow.push([rows[i][0], i]); // save id and index\n    }\n\n    for (i = 0, idRowLength = idRow.length; i < idRowLength; i++) {\n      var properties = self.changes[idRow[i][0]];\n      var index;\n      // search for changes\n      if (properties !== undefined) {\n        var xpath, columnNumber;\n        index = idRow[i][1];\n        // update all properties in data\n        for (xpath in properties) {\n          if (properties.hasOwnProperty(xpath)) {\n            columnNumber = self.getColumn(xpath).columnIndex;\n            rows[index][columnNumber] = properties[xpath];\n          }\n        }\n      }\n    }\n  },\n\n  /*\r\n     *   Method to set data and update the grid\r\n     */\n  updateData: function updateData(data) {\n    var self = this;\n    var grid = self.grid;\n    var columns = self.columns;\n\n    // Set value in control\n    if (data) {\n      self.properties.data = data;\n      self.setCellOverrides(data, columns);\n      grid.bizagi_grid_tablet(\"setData\", data);\n\n\n      if (self.properties.data && self.properties.data.total > self.Class.GRID_PAGE_SIZE) {\n        self.alternativePaginator();\n        self.isPaginatorActive = true;\n      }\n    }\n  },\n\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n    var properties = self.properties;\n\n    self.dataReadyDeferred = new $.Deferred();\n\n    // Define defaults\n    page = page || properties.page || 1;\n    sortBy = sortBy || properties.sortBy || \"\";\n    sortType = sortType || properties.sortOrder || \"asc\";\n\n    // Update control properties\n    properties.page = page;\n    properties.sortBy = sortBy;\n    properties.sortType = sortType;\n    properties.sort = sortBy + \" \" + sortType;\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).\n    then(function (data) {\n      if (data) {\n        if (data.deviceMaxRecordsExceeded) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-maximum-records-allowed\"));\n        } else {\n          if (self.isRTL()) {\n            data.rows = self.changeOrderData(data.rows);\n          }\n          self.loadChanges(data.rows);\n          self.updateData(data);\n          self.triggerRenderChange();\n          self.dataReadyDeferred.resolve();\n\n          //focus on page clicked\n          if (self.isPaginatorActive) {\n            var pageSelected = $(\".ui-bizagi-grid-pager\", self.element).find(\"li[data-page-number=\" + data.page + \"]\");\n            var pageLeftPosition = pageSelected.length > 0 ? pageSelected.position().left : 0;\n\n            pageLeftPosition = Number(pageLeftPosition - 30) * -1;\n            var pagerContentWidth = Number($(\".ui-bizagi-grid .ui-bizagi-grid-pager\", self.getControl()).css(\"width\").replace(/[^-\\d\\.]/g, ''));\n            var lastLiElementPosition = $(\".ui-bizagi-grid .ui-bizagi-grid-pager ul li:last\", self.getControl());\n            lastLiElementPosition = lastLiElementPosition.length > 0 ? lastLiElementPosition.position().left : 0;\n            var pagerMarginAnimate = -lastLiElementPosition + pagerContentWidth - 90;\n\n            if (pagerContentWidth < lastLiElementPosition) {\n              if (pageLeftPosition < pagerMarginAnimate) {\n                pageLeftPosition = pagerMarginAnimate;\n              }\n              $(\".ui-bizagi-grid .ui-bizagi-grid-pager ul\", self.getControl()).css({ \"margin-left\": pageLeftPosition + \"px\" });\n            }\n          }\n        }\n      }\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var grid = self.grid;\n\n    // Save pending inline add rows\n    if (self.grid && (self.properties.inlineAdd || self.properties.inlineEdit)) {\n      var newKeys = grid.bizagi_grid_tablet.hasOwnProperty(\"getNewRowKeys\") ? grid.bizagi_grid_tablet(\"getNewRowKeys\") : [];\n\n      // Save new rows then save the whole screen\n      if (newKeys.length > 0 && !self.properties.alreadySaved && self.isValid()) {\n        var saveDeferred = self.saveInlineAddedRows(newKeys, true);\n\n        // Add to deferred collections in order to sync when saving\n        renderValues.deferreds = renderValues.deferreds || [];\n        renderValues.deferreds.push(saveDeferred);\n      }\n\n      // Remove adding keys from current changes\n      for (var i = 0; i < newKeys.length; i++) {\n        if (self.changes[newKeys[i]]) {\n          delete self.changes[newKeys[i]];\n        }\n      }\n    }\n\n    // Call base method\n    self._super(renderValues);\n  },\n\n  /*\r\n     *   Customizes the content drawing inside the cell\r\n     */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n    if (column.key) return value;\n\n    self.newRecords = self.newRecords || {};\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n\n    // Get cell properties\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) self.cellMetadata[key][columnIndex] = {};\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n    properties.editable = false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) editable = true;\n    renderColumn.properties.displayType = 'value';\n\n    if (key == \"summary\") {\n      editable = false;\n    }\n\n\n    renderColumn.setValue(key, value);\n    renderColumn.setSurrogateKey(key);\n\n    if (properties.visible) {\n      renderColumn.properties = properties;\n      var defer = new $.Deferred();\n\n      $.when(renderColumn.renderReadOnly(key, value)).done(function (cell) {\n        // Register array with new records              \n        for (var j = 0; j < self.columns.length; j++) {\n          self.cellOverrides[key] = self.cellOverrides[key] || {};\n          self.getCellOverride(key, j).visible = true;\n        }\n        defer.resolve(cell);\n      });\n      //return renderColumn.renderReadOnly(key, value);\n      return defer.promise();\n    } else {\n\n      return \"\";\n    }\n  },\n\n\n  /*\r\n     *   Executes when the cell is ready and inserted into the DOM\r\n     */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    var self = this;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n    var properties = (self.cellMetadata[key][columnIndex] != undefined ? self.cellMetadata[key][columnIndex].properties : undefined) || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) editable = true;else\n    editable = false;\n    if (visible) {\n      if (editable) {\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        if (renderColumn.properties.submitOnChange) {\n          var control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n          }\n        }\n\n\n        // Execute cell post render\n        renderColumn.postRender(key, cell);\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n      } else {\n        renderColumn.postRenderReadOnly(key, cell);\n      }\n    }\n  },\n\n  /**\r\n     *  Adds a row to the grid\r\n     */\n  addRow: function addRow() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    // Start loading\n    self.startLoading();\n\n    // Send add request\n    $.when(self.submitAddRequest()).\n    done(function (newid) {\n\n      // Show a slide with new form after that\n      var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\n        title: self.properties.displayName || \"\",\n        container: form.container,\n        formParams: formParams,\n        navigation: formParams.navigation,\n        showSaveButton: true,\n        onSave: function onSave(data) {\n          return self.submitSaveRequest(newid, data);\n        } });\n\n\n      // End Loading\n      self.endLoading();\n\n      var recordXpath = properties.xpath + \"[id=\" + newid + \"]\";\n\n      slideView.render({\n        idRender: properties.id,\n        recordXPath: recordXpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        requestedForm: \"addForm\",\n        url: properties.addPage,\n        formParams: formParams,\n        navigation: formParams.navigation }).\n      done(function () {\n\n        self.endLoading();\n\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n\n        } else {\n          // Submits the entire form\n          self.submitOnChange();\n        }\n\n      }).fail(function () {\n        self.endLoading();\n        self.submitRollbackRequest();\n      });\n    });\n\n  },\n\n  /**\r\n     *  Edits a row in the grid\r\n     */\n  editRow: function editRow(id) {\n\n    if (id == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    var self = this;\n    var properties = self.properties;\n\n    // Use tablet inline edit when there are no edit form\n    if (properties.inlineEdit == true && properties.allowEdit == false) {\n      self.editInline(id);\n      return;\n    }\n\n    if (self.cleanActionChanges && self.cleanActionChanges[id] !== undefined) {\n\n      self.changes = self.cleanActionChanges;\n      var data = $.extend(self.changes[id], {});\n      data.idPageCache = properties.idPageCache;\n\n      $(\".ui-tooltip\").remove();\n\n      $.when(self.submitSaveRequest(id, data)).done(function () {\n        // Set loading status\n        self.startLoading();\n\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.endLoading();\n\n          self.fetchData();\n        } else {\n          // Submits the entire form\n          self.submitForGridChange().always(function () {\n            self.endLoading();\n\n            // Send edit request\n            self.executeSubmitEditRequest(id);\n          });\n        }\n      });\n    } else {\n      self.executeSubmitEditRequest(id);\n    }\n  },\n\n  executeSubmitEditRequest: function executeSubmitEditRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n\n    var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      formParams: formParams,\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      onSave: function onSave(data) {\n        return self.submitSaveRequest(id, data);\n      } });\n\n\n    self.startLoading();\n\n    $.when(self.submitEditRequest(id)).\n    done(function () {\n\n      // Show dialog with new form after that\n      var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n      slideView.render({\n        idRender: properties.id,\n        recordXPath: recordXpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        requestedForm: \"editForm\",\n        url: properties.editPage,\n        formParams: formParams,\n        navigation: formParams.navigation }).\n      done(function () {\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n\n        } else {\n          // Submits the entire form\n          self.submitOnChange();\n        }\n      }).fail(function () {\n        self.startLoading();\n        $.when(self.submitRollbackRequest()).always(function () {\n          self.endLoading();\n        });\n      });\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n  /**\r\n     *  Deletes  a row to the grid\r\n     */\n  deleteRow: function deleteRow(id) {\n    if (id === 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"),\n      bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    var self = this;\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      // Do a grid record deletion\n      $.when(self.submitDeleteRequest(id)).\n      done(function (data) {\n        // Reload grid\n        self.fetchData();\n\n        if (data.type === \"success\") {\n          // Trigger the event\n          //'key' must be included to trigger a single call to actions and validations\n          //line 310 bizagi.command.controllers.action\n          self.triggerRenderChange({ rowDeleted: true, changed: false, key: id });\n        }\n      });\n    });\n  },\n\n  moreRows: function moreRows(ui) {\n    var self = this;\n    var properties = self.properties;\n\n    if (typeof properties.originalrowsPerPage === \"undefined\") {\n      properties.originalrowsPerPage = properties.rowsPerPage;\n    }\n\n    properties.rowsPerPage += properties.originalrowsPerPage;\n\n    var dataToSend = {};\n    self.collectData(dataToSend);\n\n    self.startLoading();\n\n    if (jQuery.isEmptyObject(dataToSend)) {\n      self.moreRowsCommon(ui);\n      return;\n    }\n    // Send the data\n    self.dataService.submitData({\n      action: \"SUBMITONCHANGE\",\n      data: dataToSend,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache }).\n    done(function () {\n\n      self.endLoading();\n\n      self.moreRowsCommon(ui);\n    });\n\n  },\n\n  moreRowsCommon: function moreRowsCommon(ui) {\n    var self = this;\n    var properties = self.properties;\n\n    self.fetchData(ui.page, ui.sortBy, ui.sortType);\n\n    $.when(self.dataReadyDeferred).done(function () {\n\n      if (properties.records != 0)\n      if (properties.records + 1 <= properties.rowsPerPage) {\n        $(\".ui-bizagi-grid-dynamic-pager\", self.getControl()).hide();\n      }\n\n    });\n  },\n\n  /**\r\n     *  Shows more info about a grid row\r\n     */\n  showMore: function showMore(id) {\n    var self = this;\n    var data = self.properties.data;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    // Search row\n    var currentRow = [];\n    for (var i = 0, length = data.rows.length; i < length; i++) {\n      if (data.rows[i][0] == id) {\n        currentRow = data.rows[i];\n        break;\n      }\n    }\n\n    // Render grid view\n    var slideView = new bizagi.rendering.tablet.slide.view.grid(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      allowEdition: false,\n      formParams: formParams,\n      navigation: formParams.navigation });\n\n\n    self.startLoading();\n\n    slideView.render({\n      row: currentRow,\n      columns: self.columns,\n      pageCacheId: properties.idPageCache,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      sessionId: form.properties.sessionId,\n      actions: form.actions,\n      formParams: formParams,\n      navigation: formParams.navigation }).\n    done(function () {\n      self.endLoading();\n    });\n  },\n\n  /**\r\n     *  Edits the entire row (inline) in another slide\r\n     */\n  editInline: function editInline(id) {\n    var self = this;\n    var data = self.properties.data;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    // Search row\n    var currentRow = [];\n    for (var i = 0, length = data.rows.length; i < length; i++) {\n      if (data.rows[i][0] == id) {\n        currentRow = data.rows[i];\n        break;\n      }\n    }\n\n    // Render grid view\n    var slideView = new bizagi.rendering.tablet.slide.view.grid(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      formParams: formParams,\n      navigation: formParams.navigation,\n      allowEdition: true });\n\n\n    // Render the editable view\n    $.when(\n    slideView.render({\n      row: currentRow,\n      columns: self.columns,\n      pageCacheId: properties.idPageCache,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      sessionId: form.properties.sessionId,\n      actions: form.actions,\n      validations: form.validations,\n      formParams: formParams,\n      navigation: formParams.navigation })).\n\n    done(function (data) {\n      // This code is executed when the user press save on the slide\n\n      // Update internal data\n      for (xpath in data) {\n        self.collectGridChange({ id: id, xpath: xpath, value: data[xpath], trigger: false });\n      }\n\n      // Prepare grid data\n      var dataToSend = {};\n      self.collectData(dataToSend);\n\n      // Send the data\n      self.dataService.submitData({\n        action: \"SUBMITONCHANGE\",\n        data: dataToSend,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache }).\n      done(function () {\n        // After successfully response refresh the grid\n        self.fetchData();\n      });\n    });\n  },\n\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      for (var j = 0; j < self.columns.length; j++) {\n        var isVisible = self.getCellOverride(key, j).visible;\n        if (self.columns[j].properties.xpath == xpath && isVisible) {\n          var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\n\n          if (self.properties.editable) {\n            cell = cell.find(\"input\");\n          }\n\n          cell.css(\"background-color\", argument);\n          break;\n        }\n      }\n\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: sel * f.changeCellBackgroundColor,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      for (var j = 0; j < self.columns.length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\n\n          if (self.properties.editable) {\n            cell = cell.find(\"input\");\n          }\n\n          cell.css(\"color\", argument);\n          $(cell).find(\".ui-bizagi-cell-readonly\").css(\"color\", argument);\n          break;\n        }\n      }\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: self.changeCellColor,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *   Changes the visibility for a cell\r\n     */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      for (var j = 0; j < self.columns.length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\n          // Change visibility\n          if (argument == true) {\n            cell.show();\n          } else {\n            cell.hide();\n          }\n\n          self.cellOverrides[key] = self.cellOverrides[key] || {};\n          self.getCellOverride(key, j).visible = argument;\n          break;\n        }\n      }\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: self.changeCellVisibility,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *  Changes the required for cell\r\n     */\n  changeCellValue: function changeCellValue(key, xpath, argument) {\n    var self = this;\n  },\n\n  /*\r\n     *   Sets an error on the cell\r\n     */\n  setError: function setError(key, xpath) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      for (var j = 0; j < self.columns.length; j++) {\n        var isVisible = self.getCellOverride(key, j).visible;\n        if (self.columns[j].properties.xpath == xpath && isVisible) {\n          var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\n          cell.parent().addClass(\"ui-bizagi-render-grid-cell-error\");\n          break;\n        }\n      }\n\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: self.setError,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    var parentPromise = self._super();\n    var inlineAddPromise = self.inlineAddDeferred ? self.inlineAddDeferred.promise() : null;\n    return $.when(parentPromise, inlineAddPromise);\n  },\n\n  /*\r\n     *   Method to start loading for ajax data and update the ui\r\n     */\n  startLoading: function startLoading(bUseTimeout) {\n    var self = this;\n\n    bizagi.loading.start();\n\n    self._super(bUseTimeout);\n  },\n\n  /*\r\n     *   Method to remove the loading message\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n\n    bizagi.loading.stop();\n\n    self._super();\n  },\n\n  cleanCellData: function cleanCellData(key, xpath) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.cleanData();\n        for (var j = 0; j < self.columns.length; j++) {\n          if (self.columns[j].properties.xpath == xpath) {\n            break;\n          }\n        }\n\n        var rows = self.properties.data.rows;\n        var i = 0;\n        var rowLength = rows.length;\n\n        for (; i < rowLength; i++) {\n          if (Number(key) === rows[i][0]) {\n            rows[i][j + 1] = [[\"\", \"\"]];\n            break;\n          }\n        }\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, j).value = null;\n\n        if (!self.cleanActionChanges) {\n          self.cleanActionChanges = {};\n        }\n        if (!self.cleanActionChanges[key]) {\n          self.cleanActionChanges[key] = {};\n        }\n        self.cleanActionChanges[key][xpath] = \"\";\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.cleanData,\n        arguments: \"\" });\n\n    }\n  },\n\n  onTotalData: function onTotalData(ui) {\n    var self = this;\n    var properties = self.properties;\n    var data = properties.data || {};\n    var rows = data.rows;\n    var rowsLength = rows.length;\n    var showTotal = [];\n    var columnsModel = self.buildColumnModel();\n    var result;\n\n    bizagi.util.tablet.startLoading();\n\n    columnsModel.forEach(function callback(column, columnIndex) {\n      if (column.bizAgiProperties) {\n        operationState = column.bizAgiProperties.totalize.operation;\n\n        switch (operationState) {\n          case \"sum\":\n            result = rows.sum(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n            break;\n\n          case \"count\":\n            result = rows.count(function (row) {\n              //Checks if there is a DefaultValue, so assign it to the returnedvalu in case it doesn't have value\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n\n              if (!bizagi.util.isArray(return_value)) {\n                return return_value;\n              }\n\n              if (bizagi.util.isArray(return_value) && return_value.length > 0) {\n                return return_value; //If the returned value is not undefined, neither null, it will count +1\n              }\n            }, column, columnIndex);\n\n            break;\n\n          case \"max\":\n            result = rows.max(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n\n            break;\n\n          case \"min\":\n            result = rows.min(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n            break;\n\n          case \"avg\":\n            result = rows.avg(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n\n            result = result.toFixed(2);\n            break;}\n\n\n        if (operationState) {\n          result = self.formatTotalizedResult(operationState, column.bizAgiProperties.type, result);\n          showTotal.push({ label: column.label, total: result });\n        }\n      }\n    });\n    self.showTotals(showTotal);\n    bizagi.loading.stop();\n  },\n\n  formatTotalizedResult: function formatTotalizedResult(operation, controlType, value) {\n    switch (operation) {\n      case 'sum':\n      case 'avg':\n      case 'min':\n      case 'max':\n        if (controlType == \"columnMoney\" || controlType == \"money\") {\n          return bizagi.util.formatMonetaryCell(value);\n        }\n        break;}\n\n\n    return value || 0;\n  },\n\n  showTotals: function showTotals(params) {\n    var self = this;\n    var modalViewTemplate = self.renderFactory.getTemplate('bizagi.grid.totalizer');\n    var data = $.extend(params, { \"orientation\": self.properties.orientation });\n    var modalView = $.fasttmpl(modalViewTemplate, data);\n\n    $(\".bz-rn-grid-totalize-container\").remove();\n\n    modalView.kendoMobileModalView({\n      close: function close() {\n        this.destroy();\n        this.element.remove();\n      },\n      useNativeScrolling: true });\n\n\n    modalView.delegate(\".bz-rn-grid-totalize-close-btn\", \"click\", function () {\n      modalView.data(\"kendoMobileModalView\").close();\n    });\n\n    modalView.kendoMobileModalView(\"open\");\n  },\n\n  alternativePaginator: function alternativePaginator() {\n  } });","/*\r\n*   Name: BizAgi Tablet Render Letter Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the letter render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.letter.extend(\"bizagi.rendering.letter\", {}, {\n  /*\r\n                                                                *   Constructor\r\n                                                                */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // Fix required\n    // No letter can be required on the iPad, \n    // NOTE: We must implement something to warn the user that there is an editable letter that must be filled in the PC version\n    properties.required = false;\n\n  } });","/*\r\n*   Name: BizAgi Tablet Render Button Extension\r\n*   Author: Bizagi Bizagi Team\r\n*   Comments:\r\n*   -   This script will redefine the button render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.button.extend(\"bizagi.rendering.button\", {}, {\n  /*\r\n                                                                *   Template method to implement in each device to customize each render after processed\r\n                                                                */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var button = $(\":button\", control);\n\n    // Stylize button\n    button.button();\n    button.removeClass(\"ui-state-default\");\n\n    // Bind event\n    button.click(function () {\n      // Process button actions\n      self.processButton();\n    });\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    // Execute the same as post-render\n    self.postRender();\n\n    // Set as disabled\n    var button = $(\":button\", control);\n    button.button(\"option\", \"disabled\", \"true\");\n  },\n  /*\r\n     *   Process the button actions workflow\r\n     */\n  processButton: function processButton() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable) {\n\n      // Check if action need conformation\n      if (properties.needsUserConfirmation) {\n        $.when(bizagi.showConfirmationBox(properties.userConfirmationMessage, \"Bizagi\", \"warning\")).\n        done(function () {\n          // Trigger change\n          self.triggerRenderChange({ pressed: true });\n        });\n      } else {\n        if (!properties.preventDefault) {\n          self.runButtonAction();\n        }\n        // Trigger change\n        self.triggerRenderChange({ pressed: true });\n      }\n    }\n  },\n\n  runButtonAction: function runButtonAction() {\n    var self = this;\n\n    // Save the form prior opening the dialog\n    self.getFormContainer().clearValidationMessages();\n\n    self.saveForm().pipe(function () {\n      return self.executeButton();\n    }).done(function (result) {\n      if (result == null || result == true || result.result == \"success\" || result.type == \"success\") {\n        return self.refreshForm();\n      } else if (result.type == \"validationMessages\") {\n        try {\n          // Add validation messages \n          self.getFormContainer().addValidationMessage(result.messages);\n        } catch (e) {\n          bizagi.showMessageBox(result.messages, \"Error\");\n        }\n      }\n    }).fail(function (a, b, message) {\n      // Add error messages \n      try {\n        self.getFormContainer().addErrorMessage(message);\n      } catch (e) {\n        bizagi.showMessageBox(message, \"Error\");\n      }\n    });\n  },\n\n  // rewrite method to prevent the button on the tablet be affected when customizing on other platforms\n  processLayout: function processLayout() {\n    var self = this;\n    var properties = self.properties;\n    var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Set required and visiblity\n    properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\n\n    if (properties.required) {\n      self.changeRequired(properties.required);\n    }\n\n    if (!visible) {\n      self.changeVisibility(visible);\n    }\n  } });","/*\r\n *   Name: BizAgi Desktop Render fileprint Extension\r\n *   Author: Christian Collazos\r\n *   Comments:\r\n *   -   This script will redefine the fileprint render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.fileprint.extend(\"bizagi.rendering.fileprint\", {}, {\n  /*\r\n                                                                      *   Template method to implement in each device to customize each render after processed\r\n                                                                      */\n  postRender: function postRender() {\n    var self = this;\n    self.getControl().parent().hide();\n  } });","/*\r\n *   Name: Bizagi Tablet Render Link Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.link.extend(\"bizagi.rendering.link\", {}, {\n\n  /**\r\n                                                             * Configure the controls interactions\r\n                                                             * @returns {} \r\n                                                             */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var link = $(\".ui-bizagi-render-link\", control);\n\n    self.input = control.find(\"a\");\n\n    if (properties.value) {\n      $(self.input).on(\"click\", function (event) {\n        event.preventDefault();\n\n        if (self.isValidValue(properties.value)) {\n          window.open(encodeURI(this.getAttribute(\"href\")), \"_system\");\n        }\n      });\n    } else {\n      link.addClass(\"bz-rn-link-disabled\");\n      control.closest(\".ui-bizagi-render\").addClass(\"bz-rn-read-only\");\n    }\n  },\n\n  /**\r\n      * Checks if the value is a valid url (http/https valid urls)\r\n      *\r\n      * @param {String} value The control's value that is needed to be displayed\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    if (self.isValidValue(value)) {\n      //Get the decoded version of the URL\n      value = getFullyDecodedURI($.trim(value));\n      self.input.attr(\"href\", value);\n      self.input.attr(\"target\", \"_blank\");\n      self.input.attr(\"data-rel\", \"external\");\n    }\n  },\n\n  /*\r\n      *   Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute configure handlers\n    if (properties.value) {\n      self.configureHandlers();\n    }\n\n    // Help Text Control\n    self.configureHelpText();\n  },\n\n  /**\r\n      * Checks if the value is a valid url (http/https valid urls)\r\n      *\r\n      * @param {String} value Stored value in the control\r\n      */\n  isValidValue: function isValidValue(value) {\n    return value && $.trim(value + \"\").toLowerCase().match(/^(http|https):\\/\\//) !== null || false;\n  } });","/*  \r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Iván Ricardo Taimal Narváez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from base list\nbizagi.rendering.checkList.extend(\"bizagi.rendering.checkList\", {}, {\n\n  /*\r\n                                                                       *   Template method to implement in each device to customize each render after processed\r\n                                                                       */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    // Call base \n    this._super();\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    self.properties.unique = Math.ceil(Math.random() * 1000);\n    // Apply plugin\n    //$(\".ui-bizagi-render-checkList-label\", self.checkListGroup).check();\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    // Call base\n    self._super();\n    // Bind change event\n    if (!bizagi.util.isIE()) {\n      // PLUGIN IMPLEMENTATION\n      //todo: change bind type for IE\n      $(\"input[type=checkbox]\", self.checkListGroup).bind(\"change\", function (evt, ui) {\n        var itemId = $(this).data(\"item-guid\");\n        var checked = false;\n        if ($(this).hasClass(\"bz-check\")) {\n          $(this).removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n          checked = false;\n        } else {\n          $(this).removeClass(\"bz-full-ball\").addClass(\"bz-check\");\n          checked = true;\n        }\n        self.onCheckListGroupChange(itemId, checked);\n      });\n    } else {\n      // NON PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).bind(\"change\", function (evt, ui) {\n        var itemId = $(this).data(\"item-guid\");\n        var checked = false;\n        if ($(this).hasClass(\"bz-check\")) {\n          $(this).removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n          checked = false;\n        } else {\n          $(this).removeClass(\"bz-full-ball\").addClass(\"bz-check\");\n          checked = true;\n        }\n        self.onCheckListGroupChange(itemId, checked);\n      });\n    }\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.checked = checked;\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    if (!bizagi.util.isIE()) {\n      // PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).check(\"uncheckItem\");\n    } else {\n      // NON PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).removeAttr(\"checked\");\n    }\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n  } });","/*  \r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Iván Ricardo Taimal Narváez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from base list\nbizagi.rendering.checkList.extend(\"bizagi.rendering.activityCheckList\", {}, {\n\n  /*\r\n                                                                               *   Template method to implement in each device to customize each render after processed\r\n                                                                               */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    // Call base\n    this._super();\n    self.header = $(\".ui-bizagi-render-checkList-activity-work\", self.element);\n    self.addButton = $(\".ui-bizagi-render-checkList-add-item\", self.control);\n    self.newItemName = $(\".ui-bizagi-render-checkList-input-name\", self.control);\n    self.separator = $(\".ui-bizagi-render-checkList-separator\", self.element);\n    self.goalActivity = $(\".ui-bizagi-render-checkList-goal-activity\", self.element);\n    self.addEditButton = $(\".add-edit-item-button-checklist\", self.control);\n    self.cancelEditButton = $(\".cancel-edit-item-button-checklist\", self.control);\n    self.additionalElements();\n    //self.configureHandlers();\n\n    self.notifyLoadItems();\n\n    //self.configureProgressHandlers();\n  },\n\n  /**\r\n      * Event Handlers\r\n      *\r\n     configureProgressHandlers: function () {\r\n         var self = this;\r\n           bizagi.webpart.subscribe('onLoadDataFromFormActivityPlan', function (e, params) {\r\n             var activityWorkTitle = self.getResource(\"render-activity-check-list-activitywork\") + \" (\" + params.activityWork.progress + \"%)\";\r\n               $(\".ui-bizagi-render-checkList-activity-work\").text(activityWorkTitle);\r\n             e.stopImmediatePropagation();\r\n         });\r\n     },*/\n\n\n\n  notifyLoadItems: function notifyLoadItems() {\n    var self = this;\n    setTimeout(function () {\n      var resolvedItems = self.properties.items.filter(function (i) {\n        return i.resolved;\n      }).length;\n      bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\n        'hasChanges': true,\n        'idActivity': self.properties.idActivity,\n        'itemsResolved': resolvedItems,\n        'items': self.properties.items,\n        'progress': self.properties.activityWork }));\n\n\n      bizagi.webpart.publish(\"onLoadDataItemsFromFormActivityPlan\", { \"items\": self.properties.items, \"activityWork\": self.properties.activityWork });\n    }, 100);\n  },\n\n  additionalElements: function additionalElements() {\n    var self = this;\n    var control = self.getControl();\n    var activityWorkTitle = this.getResource(\"render-activity-check-list-activitywork\") + \" (\" + self.properties.activityWork + \"%)\";\n    var activityFormTitle = this.getResource(\"render-activity-check-list-form\");\n    if (!(self.header && self.header.length > 0)) {\n      self.element.prepend($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-activity-work\").append($(\"<span/>\").text(bizagi.localization.getResource(\"workportal-project-plan-activity-work-title\"))));\n    }\n    if (!(self.goalActivity && self.goalActivity.length > 0)) {\n      if (self.properties.activityDescription && self.properties.activityDescription !== \"\") {\n        self.element.prepend($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-goal-activity\").append(\"<h4><span class='ui-bizagi-wp-bold'>\" +\n        bizagi.localization.getResource(\"workportal-project-plan-activity-goal\") +\n        \": </span><span>\" + self.properties.activityDescription + \"</span></h4>\"));\n      }\n    }\n    if (!(self.addButton && self.addButton.length > 0)) {\n      self.control.append($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-add-item\").append($(\"<button/>\").text(\"+\")));\n    }\n    if (!(self.separator && self.separator.length > 0)) {\n      self.element.append($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-separator\").append($(\"<span/>\").text(activityFormTitle)));\n    }\n    if (self.addEditButton && self.addEditButton.length > 0) {\n      self.addEditButton.hide();\n    }\n    if (self.cancelEditButton && self.cancelEditButton.length > 0) {\n      self.cancelEditButton.hide();\n    }\n    control.parent().addClass(\"render-activity-check\");\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    this._super();\n\n    $(\".ui-bizagi-render-checkList-add-item button\", control).unbind(\"click\").click(function () {\n      var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n      if (itemSelected.length <= 0) {\n        self.prepareNewItem();\n      } else {\n        $(\".ui-bizagi-render-checkList-input-name\", itemSelected).focus();\n      }\n    });\n\n    $(\".delete-item-from-activity\", self.control).bind(\"click\", function () {\n      var that = this;\n      var message = bizagi.localization.getResource(\"workportal-widget-reports-confirm\");\n      var contentHolder = $(this).closest(\".ui-bizagi-render-checkList-item\");\n\n      contentHolder.addClass(\"ui-bizagi-to-remove\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n\n        var itemId = $(that).closest(\".ui-bizagi-render-checkList-item\").data(\"item-guid\");\n\n        self.deleteItem(itemId);\n        self.addButton.show();\n\n      }).fail(function () {\n        contentHolder.removeClass(\"ui-bizagi-to-remove\");\n      });\n    });\n\n    $(\".activity-work-items\", self.control).bind(\"click\", function () {\n      var element = $(this).closest(\".ui-bizagi-render-checkList-item\");\n      var itemId = element.data(\"item-guid\");\n      var itemPosition = element.data(\"item-position\");\n      self.selectItem(itemId, itemPosition);\n    });\n  },\n\n  selectItem: function selectItem(itemId) {\n    var self = this;\n\n    for (var i = 0; i < self.properties.items.length; i++) {\n      self.properties.items[i].selected = self.properties.items[i].guid === itemId;\n    }\n    self.repaintControl();\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\");\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var itemContent = itemSelectedName.val();\n    itemSelectedName.focus();\n    itemSelectedName[0].setSelectionRange(itemContent.length, itemContent.length);\n    self.configureHandlers();\n    self.addSelectedHandlers();\n  },\n\n  deleteItem: function deleteItem(itemId) {\n    var self = this;\n    for (var i = 0; i < self.properties.items.length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items.splice(i, 1);\n        break;\n      }\n    }\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.configureHandlers();\n    self.addSelectedHandlers();\n  },\n\n  prepareNewItem: function prepareNewItem() {\n    var self = this;\n    var newItem = {\n      guid: Math.guid(),\n      resolved: false,\n      name: \"\",\n      selected: true };\n\n    self.properties.items.push(newItem);\n    self.repaintControl();\n    self.addButton.hide();\n    self.newItemName.focus();\n    self.newItemName.blur(function () {\n      var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n      var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n      var valueInput = itemSelectedName.val();\n\n      if (valueInput === \"\" && self.properties.items && self.properties.items.length >= 1 &&\n      self.properties.items.slice(-1)[0].name === \"\") {\n        self.properties.items.pop();\n      }\n    });\n    self.addSelectedHandlers();\n    self.newItemName.keypress(function (event) {\n      if (event.which == 13) {\n        event.preventDefault();\n        self.addItem();\n        self.prepareNewItem();\n      }\n    });\n  },\n\n  addSelectedHandlers: function addSelectedHandlers() {\n    var self = this;\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    itemSelectedName.focus();\n    $(\".add-item-button-checklist\", itemSelected).bind(\"click\", function () {\n      var newItemName = itemSelectedName.val();\n      if (newItemName && newItemName !== \"\") {\n        self.addItem();\n      }\n    });\n    $(\".cancel-item-button-checklist\", itemSelected).bind(\"click\", function (e) {\n      var newItemName = itemSelectedName.val();\n      var element = $(this).closest(\".ui-bizagi-render-checkList-item\");\n      var itemPosition = element.data(\"item-position\");\n      var guidItem = element.data(\"item-guid\");\n\n      if (newItemName && newItemName !== \"\" && self.properties.items[itemPosition].name !== \"\") {\n        self.properties.items[itemPosition].selected = false;\n      }\n      if (newItemName === \"\" || self.properties.items[itemPosition].name === \"\") {\n        self.deleteItem(guidItem);\n      }\n      self.addButton.show();\n      self.repaintControl();\n      self.configureHandlers();\n    });\n  },\n\n  addItem: function addItem() {\n    var self = this;\n    var control = self.getControl();\n\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var newItemName = itemSelectedName.val();\n\n    $.each(self.properties.items, function (index, item) {\n      if (item.selected) {\n        item.name = newItemName;\n        item.selected = false;\n      }\n    });\n    self.updateOriginalValue();\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.configureHandlers();\n    self.addButton.show();\n  },\n\n  repaintControl: function repaintControl() {\n    var self = this;\n    var control = self.getControl();\n    var checkListHtml = self.renderControl();\n    $(\".ui-bizagi-render-checkList\", self.control).replaceWith(checkListHtml);\n    self.postRender();\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.resolved = checked;\n    self.setValue(self.properties.items);\n    self.refreshValue(self.properties.items);\n  },\n\n  refreshValue: function refreshValue(items) {\n    var self = this,\n    control = self.getControl(),\n    length = items.length,\n    completed = 0;\n\n    for (var i = 0; i < length; i++) {\n      if (items[i].resolved) {\n        completed += 1;\n      }\n    }\n\n    if (length > 0) {\n      self.properties.activityWork = Math.floor(100 * completed / length);\n    } else\n    {\n      self.properties.activityWork = 100;\n    }\n\n    self.notifyLoadItems();\n  },\n\n  getValue: function getValue(data) {\n    var self = this;\n\n    return self.value || [];\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var originalValue = JSON.stringify(self.properties.originalValue);\n    var newValue = JSON.stringify(self.value);\n    return originalValue !== newValue;\n  },\n\n  /*\r\n      *   Updates original value for some comparisons\r\n      */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = bizagi.clone(self.value);\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var idActivity = self.properties.idActivity;\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath) && !bizagi.util.isEmpty(idActivity)) {\n        if (Array.isArray(value)) {\n          renderValues[properties.xpath] = {\n            idActivity: idActivity,\n            items: value };\n\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    } else {\n      bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\n        'hasChanges': false }));\n\n    }\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties,\n    message;\n    var items = self.getValue();\n    message = self.getResource(\"render-activity-check-list-validation\");\n    for (var i = 0; i < items.length; i += 1) {\n      var item = items[i];\n      if (!item.resolved) {\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        break;\n      }\n    }\n  } });","/*\r\n *   Name: BizAgi Render Layout Image Class\r\n *   Author: Ricardo Pérez\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable image control inside templates\r\n *   -   This control is based on the image no flash render control\r\n */\n\nbizagi.rendering.layoutImage.extend(\"bizagi.rendering.layoutImage\", {},\n\n{\n  renderControl: function renderControl() {\n    var self = this;\n    var templateUri = self.renderFactory.getTemplate(\"layout-image\");\n    self.control = self.getControl();\n    return $.kendoTmpl(templateUri, {});\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.value && typeof self.value.value !== \"undefined\" && self.value.value !== \"\" && self.value.value !== null) {\n      //Get image of customer in binary format\n      var url = self.getImageUri();\n      $.ajax({\n        url: url,\n        type: \"GET\",\n        dataType: \"binary\",\n        processData: false,\n        success: function success(blob) {\n\n          if (typeof blob == \"string\") {\n            var xhr = arguments[2];\n            var contentType = xhr.getResponseHeader('Content-type');\n            blob = bizagi.util.media.byteArrayToBlob(bizagi.util.media.stringToByteArray(blob), contentType);\n          }\n\n          var urlCreator = window.URL || window.webkitURL;\n          var imageUrl = urlCreator.createObjectURL(blob);\n\n          $(control).find('img').attr(\"src\", imageUrl);\n        } });\n\n    }\n  },\n  /**\r\n      * Gets the url to get the array image\r\n      */\n  getImageUri: function getImageUri() {\n    var self = this;\n    var templateControl = self.parent.parent;\n    var renderParams = templateControl.properties.paramsRender || {};\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value,\n      idcase: renderParams.idRender ? renderParams.formParams.idCase : \"_\",\n      idworkitem: renderParams.idRender ? renderParams.formParams.idWorkitem : \"_\",\n      contextxpath: renderParams.idRender ? renderParams.xpathActions : \"_\" };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  },\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return [self.value];\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Ricardo Pérez\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n *   -   This control is based on the link render control\r\n */\n\nbizagi.rendering.layoutLink.extend(\"bizagi.rendering.layoutLink\", {}, {\n  /*\r\n                                                                         *   Template method to implement in each children to customize each control\r\n                                                                         */\n  render: function render() {\n    var self = this;\n    var container = self.getContainerRender();\n    container.addClass(\"bz-command-not-edit\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    var element = self.element;\n    if (element) {\n      element.on(\"click\", $.proxy(self.onClickElement, self));\n    }\n  },\n\n  onClickElement: function onClickElement() {\n    var self = this;\n    var params = {\n      'displayName': self.properties.displayName,\n      'navigateFromRender': false,\n      'reference': self.properties.reference,\n      'referenceType': self.properties.referenceType,\n      'xpath': self.properties.xpath };\n\n\n    if (bizagi.kendoMobileApplication && bizagi.kendoMobileApplication.view().id === \"#renderSplitView\") {\n      params.navigateFromRender = true;\n    }\n\n    self.triggerGlobalHandler(\"DATA-NAVIGATION\", params);\n  } });","/*\r\n*   Name: BizAgi Render Layout Label Class\r\n*   Author: Ricardo Pérez\r\n*   Comments:\r\n*   -   This script will define basic stuff for labels inside templates\r\n*/\n\nbizagi.rendering.layoutLabel.extend(\"bizagi.rendering.layoutLabel\", {}, {\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    self.properties.displayName = val;\n    this._super(val, triggerEvents);\n    var control = self.getControl();\n\n    if (control) {\n      $(\".ui-bizagi-render-label\", control).text(val);\n    }\n  } });","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Ricardo Pérez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\nbizagi.rendering.layoutText.extend(\"bizagi.rendering.layoutText\", {}, {});","/*\r\n*   Name: BizAgi Desktop Render Template dateTime Extension\r\n*   Author: Andres Fernando Muñoz\r\n*   Comments:\r\n*   -   This script will redefine the date time render class inside templates to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.layoutDateTime.extend(\"bizagi.rendering.layoutDateTime\", {}, {});","/*\r\n *   Name: BizAgi Desktop Render Template number Extension\r\n *   Author: Mauricio Sanchez\r\n *   Comments:\r\n *   -   This script will redefine the number render class inside templates to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.layoutNumber.extend(\"bizagi.rendering.layoutNumber\", {}, {\n  /*\r\n                                                                             *   Sets the value in the rendered control\r\n                                                                             */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    value = value ? self.getDisplayValue(value) : self.getDisplayValue(0);\n    self.properties.displayName = value;\n    this._super(value, triggerEvents);\n    var control = self.getControl();\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(value);\n    }\n  } });","/*\r\n *   Name: BizAgi Desktop Render Template Money Extension\r\n *   Author: Andres Fernando Muñoz\r\n *   Comments:\r\n *   -   This script will redefine the money render class inside templates to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.layoutMoney.extend(\"bizagi.rendering.layoutMoney\", {}, {\n  /*\r\n                                                                           *   Sets the value in the rendered control\r\n                                                                           */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    value = value ? self.getDisplayValue(value) : self.getDisplayValue(0);\n    self.properties.displayName = value;\n    this._super(value, triggerEvents);\n    var control = self.getControl();\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(value);\n    }\n  } });","/*\r\n *   Name: BizAgi Desktop Render Layout Upload\r\n *   Author: Bizagi\r\n *   Comments:\r\n *   -   This script will define the upload on entity template\r\n */\n\nbizagi.rendering.layoutUpload.extend(\"bizagi.rendering.layoutUpload\", {}, {\n  /**\r\n                                                                             *   Template method to implement in each children to customize each control\r\n                                                                             */\n  renderControl: function renderControl() {\n    var self = this,\n    properties = self.properties,\n    defer = $.Deferred();\n\n    $.when(self.getValueFilesByData(bizagi.clone(properties))).done(function (properties, valueResult) {\n      self.properties = properties;\n      self.files = valueResult.files;\n      defer.resolve(self.getHTMLFiles());\n    });\n\n    return defer.promise();\n  },\n\n  getHTMLFiles: function getHTMLFiles() {\n    var self = this;\n    var files = $.map(self.files, function (el) {\n      var file = { \"id\": el[0], \"filename\": el[1] };\n      file.url = self.buildItemUrl(file);\n      return file;\n    });\n\n    var template = self.renderFactory.getTemplate(\"layout-upload\");\n    return $.fasttmpl(template, { \"files\": files });\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    var filesLinkElements = control.find(\".ui-bizagi-render-layout-upload-item a\");\n\n    filesLinkElements.on(\"click\", function () {\n      bizagi.loading.start();\n      $.when(bizagi.util.media.downloadFile($(this).attr(\"data-url\"), this.title)).fail(function (error) {\n        if (error.responseText) {\n          self.getFormContainer().failHandler(error.responseText);\n        }\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n      *   Builds the upload item url\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this,\n    properties = self.properties;\n\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileEntityUrl({\n      isContextContainerWidgetRender: self.isContextContainerWidgetRender(),\n      xpath: self.getUploadXpath(),\n      fileId: file.id,\n      idRender: form.properties.paramsRender.idRender || \"undefined\",\n      xpathContext: properties.xpathContext,\n      idPageCache: form.properties.paramsRender.idPageCache || \"undefined\",\n      xpathActions: form.properties.paramsRender.xpathActions || \"undefined\",\n      sessionId: form.properties.sessionId,\n      surrogatekey: self.properties.value.surrogateKey,\n      guidentity: self.properties.value.guid });\n\n  } });","/*\r\n *   Name: BizAgi Tablet Render Form Link Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.formLink.extend(\"bizagi.rendering.formLink\", {}, {\n  /* POSTRENDER\r\n                                                                     ===========================================*/\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var link = $(\".ui-bizagi-render-link\", control);\n\n    // Bind click event\n    link.click(function () {\n      // Open the link inside a slideForm\n      if (self.properties.hasentryrule) {\n        var form = self.getFormContainer();\n        $.when(form.saveForm()).done(function () {\n          self.submitCheckpointRequest().done(function () {\n            return self.openLinkRule(\"entryrule\");\n          });\n        });\n      } else {\n        self.openLink();\n      }\n\n    });\n\n    if (!self.properties.editable) {\n      self.element.addClass(\"bz-rn-read-only\");\n    }\n  },\n\n  /* OPENS LINK DISPLAY FORM INSIDE A DIALOG\r\n      ===========================================*/\n  openLink: function openLink() {\n    var self = this;\n    // var form = self.getFormContainer();\n\n    // Fixed multiple recursion of Formlinks inside Formlinks\n    // var formParams = $.extend({}, form.params, self.getFormParams());\n\n    // Send edit request\n    $.when(self.submitEditRequest()).\n    done(function () {\n      bizagi.util.tablet.startLoading();\n      //self.paintFormLink();\n\n      $.when(self.paintFormLink()).done(function () {\n        bizagi.util.tablet.stopLoading();\n      }).fail(function () {//Executes Rollback actionpaintForm\n        bizagi.util.tablet.startLoading();\n        self.rollbackForm();\n      }).always(function () {\n        bizagi.util.tablet.stopLoading();\n      });\n\n    }).always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n  },\n\n  /*\r\n      *\r\n      */\n  openLinkRule: function openLinkRule(property) {\n    var self = this;\n    var def = new $.Deferred();\n\n    bizagi.util.tablet.startLoading();\n\n    self.getPropertyValue(property, {}).\n    done(function (dataRuleResp) {\n      dataRuleResp = dataRuleResp || {};\n      if (typeof dataRuleResp.messages !== \"undefined\" && dataRuleResp.messages !== null) {\n        var message = dataRuleResp.messages[0];\n        var form = self.getFormContainer();\n        form.validationController.showErrorMessage(message);\n        def.reject();\n      } else {\n        if (property == \"entryrule\") {\n          self.openLink();\n        }\n      }\n      def.resolve();\n    }).fail(function () {\n      def.reject();\n    }).\n    always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n    return def.promise();\n  },\n\n  /*\r\n      *   Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Execute the same as post-render\n    self.postRender();\n  },\n\n  /*\r\n      *\r\n      */\n  paintFormLink: function paintFormLink() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    var deferred = $.Deferred();\n\n    // Instantiate slide form object\n    var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      navigation: self.getParams().navigation,\n      showSaveButton: properties.editable,\n      orientation: properties.orientation || \"ltr\",\n      onSave: function onSave(data) {\n        // When the data is saved then\n        return self.actionSave(data).then(function (result) {\n          //Process the result\n          return self.submitForm(result).\n          done(function () {\n            deferred.resolve(result);\n          }).fail(function () {\n            deferred.reject();\n          });\n        }).fail(function (result) {\n          deferred.reject(result);\n        });\n      },\n      goBack: function goBack() {\n        self.rollbackForm();\n      } });\n\n\n    slideView.render({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      recordXPath: self.getFormLinkXpath(),\n      requestedForm: \"linkform\",\n      editable: properties.editable,\n      formParams: formParams,\n      url: properties.editPage }).\n    fail(function () {\n      // Sends a rollback request to delete checkpoints\n      deferred.reject();\n    });\n\n    return deferred.promise();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type == \"error\") {\n        // Workflow engine error, we gotta show it with error\n        var form = self.getFormContainer();\n        form.validationController.showErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      // Add error messages\n      var form = self.getFormContainer();\n      form.validationController.showErrorMessage(jqXHR.message);\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  actionSave: function actionSave(data) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.submitSaveRequest(data)).done(function (result) {\n      try {\n        if (result.type == \"validationMessages\") {\n          // Add validation messages\n          self.form.addValidationMessage(result.messages);\n        } else if (result.type == \"error\") {\n          // Add error messages\n          deferred.reject(result);\n        }\n\n        deferred.resolve(result);\n      } catch (ex) {\n        deferred.reject({ noAction: true });\n      }\n    }).fail(function (data) {\n      deferred.reject(data);\n    });\n\n    return deferred.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (properties.editable === false && !properties.value) {\n      return null;\n    }\n\n    var xpath = self.getFormLinkXpath();\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext === undefined || properties.xpathContext === \"\" ? xpath : xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext,\n      submitData: data });\n\n  },\n\n  /*\r\n      *\r\n      */\n  submitForm: function submitForm(result) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    var executeSubmitOnChange = true;\n\n    if (result && result.type == \"validationMessages\") {\n      executeSubmitOnChange = false;\n    }\n\n    if (self.properties.hasexitrule) {\n      self.closeExitRule().done(function () {\n        if (executeSubmitOnChange) {\n          //All commits must be resolved before the submitOnChange is executed\n          self.submitCommitRequest().done(function () {\n            if (self.properties.hasentryrule) {\n              self.submitCommitRequest().done(function () {\n                $.when(self.submitOnChange()).done(function () {\n                  deferred.resolve(result);\n                });\n              });\n            } else {\n              $.when(self.submitOnChange()).done(function () {\n                deferred.resolve(result);\n              });\n            }\n          });\n        }\n      }).fail(function () {\n        deferred.reject();\n      });\n\n    } else if (executeSubmitOnChange) {\n      if (executeSubmitOnChange) {\n        //All commits must be resolved before the submitOnChange is executed\n        self.submitCommitRequest().done(function () {\n          if (self.properties.hasentryrule) {\n            self.submitCommitRequest().done(function () {\n              $.when(self.submitOnChange()).done(function () {\n                deferred.resolve(result);\n              });\n            });\n          } else {\n            $.when(self.submitOnChange()).done(function () {\n              deferred.resolve(result);\n            });\n          }\n        }).fail(function () {\n          deferred.reject();\n        });\n      }\n    }\n\n    return deferred.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  closeExitRule: function closeExitRule() {\n    var self = this;\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.hasexitrule) {\n      $.when(self.openLinkRule(\"exitrule\")).done(function (result) {\n        def.resolve(result);\n      }).fail(function () {\n        def.reject();\n      });\n    }\n\n    return def.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  rollbackForm: function rollbackForm() {\n    var self = this;\n\n    $.when(self.submitRollbackRequest()).done(function () {\n      //Sends additional rollback request to delete checkpoint from entry rule\n      if (self.properties.hasentryrule) {\n        self.submitRollbackRequest();\n      }\n    });\n  },\n\n  getFormLinkXpathContext: function getFormLinkXpathContext() {\n    var self = this;\n    var xpathContext = self.properties.xpathContext;\n    var parentXpathContext = self.getXpathContext();\n    if (parentXpathContext && xpathContext) {\n      if (xpathContext.indexOf(parentXpathContext) === 0) {\n        return xpathContext;\n      } else {\n        return parentXpathContext + \".\" + xpathContext;\n      }\n    } else {\n      return xpathContext;\n    }\n  } });","/*\r\n*   Name: BizAgi tablet Render Hidden Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the hidden render class to adjust to tablet devices\r\n*/\n\n\n// Extends itself\nbizagi.rendering.hidden.extend(\"bizagi.rendering.hidden\", {}, {});","/*\r\n*   Name: BizAgi Tablet Render Money Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the money render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.money.extend(\"bizagi.rendering.money\", {}, {\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var value = self._super();\n    var template = self.renderFactory.getTemplate(\"readonlyNumber\");\n    var tmpl = $($.kendoTmpl(template, { value: value }));\n    $(\".bz-cm-icon\", tmpl).removeClass(\"bz-rn-icon-number\").removeClass(\"bz-number-icon\").addClass(\"bz-coin-input\").addClass(\"bz-rn-icon-coin\");\n\n    return tmpl.get(0).outerHTML;\n  },\n\n  /* POSTRENDER \r\n     =====================================================*/\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    self.numericInput = $(\".ui-bizagi-render-numeric\", self.getControl());\n    self.numericIcon = $(\".bz-cm-icon\", self.getControl());\n\n    self.numericIcon.removeClass(\"bz-rn-icon-number\").addClass(\"bz-rn-icon-coin\");\n    self.numericIcon.removeClass(\"bz-number-icon\").addClass(\"bz-coin-input\");\n\n    //Adjust the input in order to accept the comma input as decimal separator for certain language standars\n    if (self.properties.decimalSymbol == ',') {\n      self.numericInput.attr(\"lang\", \"en-150\");\n    }\n\n    var input = $(\"input\", self.element);\n    if (!input || input.length == 0) return;\n  },\n\n\n  /*\r\n     *\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    control.closest(\".ui-bizagi-render\").addClass(\"bz-rn-read-only\");\n    self.numericInput = $(\".ui-bizagi-render-numeric\", control);\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set value in input\n    if (value != null) {\n      if (properties.editable) {\n        self.numericInput.val(value);\n\n        // Formats the input\n        self.attachFormatCurrency();\n        self.executeFormatCurrencyPlugin();\n      } else {\n        self.numericInput.text(self.getDisplayValue());\n      }\n    }\n  } });","/*  \r\n *   Name: BizAgi Tablet Render list Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to tablet devices\r\n */\n\n// Extends from base list\nbizagi.rendering.radio.extend('bizagi.rendering.radio', {}, {\n\n  /**\r\n                                                               * Post render\r\n                                                               * @returns {} \r\n                                                               */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base \n    this._super();\n\n    self.combo = self.getControl();\n\n    // Set control container to behave as a block\n    self.combo.addClass(\"ui-bizagi-render-control-radio\");\n\n    // Help Text Control\n    self.configureHelpText();\n\n    // Bind changes to set value\n    self.combo.change(function () {\n      var selectedRadio = self.combo.find(\"input:radio:checked\");\n\n      self.combo.find(\".checked\").removeClass(\"checked\");\n      self.combo.find(\".bz-check\").addClass(\"bz-unchecked\").removeClass(\"bz-check\");\n\n      selectedRadio.closest(\"div\").addClass(\"checked\");\n      selectedRadio.addClass(\"bz-check\");\n      selectedRadio.removeClass(\"bz-unchecked\");\n\n      // The value is the Id LOL\n      var newValue = {\n        id: selectedRadio.prop(\"value\"),\n        value: selectedRadio.siblings(\"label\").text() };\n\n\n      self.setValue(newValue);\n    });\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * Set display readonly\r\n      * @returns {} \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var container = self.getControl();\n\n    self._super();\n\n    container.addClass(\"bz-rn-read-only\");\n\n    // Help Text Control\n    self.configureHelpText();\n  },\n\n  /**\r\n      * Set display value\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    if (value !== undefined && value.id != null) {\n      if (properties.editable) {\n        // Find the control to check where value is\n        var comboItem = self.combo.find(\"input[type='radio'][value='\" + value.id + \"']\");\n        comboItem.prop(\"checked\", \"checked\");\n        comboItem.closest(\"div\").addClass(\"checked\");\n        comboItem.addClass(\"bz-check\").removeClass(\"bz-unchecked\");\n      } else {\n        // Find the control to check where value is\n        self.getControl().html(value.value);\n      }\n    }\n  },\n\n\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", value: \"\" };\n    var selectedItem = self.element.find(\".ui-bizagi-render-radio-item .bz-check\");\n\n    selectedItem.prop(\"checked\", false).removeClass(\"bz-check\").addClass(\"bz-unchecked\");\n    self.setValue(value, false);\n    self.setDisplayValue(value);\n  } });","/*\r\n *   Name: BizAgi Tablet Render Cascading combo Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the cascading combo render class to adjust to tablet devices\r\n */\n\n// Extends from base cascading combo, then apply tablet combo stuff\nbizagi.rendering.cascadingCombo.extend(\"bizagi.rendering.cascadingCombo\", {}, {\n\n  init: function init(params) {\n    var self = this;\n    self._super(params);\n    this.properties.data = this.properties.data || [];\n\n    self.bind(\"select\", function (ex, value) {\n      self.onComboChange(value);\n    });\n  },\n  /*\r\n      * Generates the read-only render control\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return bizagi.rendering.combo.prototype.renderReadOnly.apply(this, arguments);\n  },\n\n  initializeCombo: function initializeCombo() {\n    var self = this;\n    var parentCombo = self.getParentCombo();\n    if (parentCombo != null) {\n      if (parentCombo.properties.type == \"cascadingCombo\") {\n        self.isDependant = true;\n        parentCombo.dependants.push(self);\n        if (self.getValue() != null) {\n          self.properties.parentComboValue = self.getValue().id;\n        } else {\n          self.initializingCascadingCombo = true;\n        }\n      }\n    }\n\n    self.initialValueSet = true;\n    $.when(bizagi.rendering.combo.prototype.initializeCombo.apply(self, arguments)).\n    done(function () {\n      if (self.value && self.isDependant == false) {\n        self.triggerHandler(\"select\", self.value);\n      }\n      self.initialValueSet = false;\n    });\n  },\n\n  bindDependantCombo: function bindDependantCombo() {\n\n  },\n\n  postRender: function postRender() {\n    bizagi.rendering.combo.prototype.postRender.apply(this, arguments);\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    bizagi.rendering.combo.prototype.postRenderReadOnly.apply(this, arguments);\n  },\n\n  renderEdition: function renderEdition() {\n    bizagi.rendering.combo.prototype.renderEdition.apply(this, arguments);\n  },\n\n  configureCombo: function configureCombo() {\n    bizagi.rendering.combo.prototype.configureCombo.apply(this, arguments);\n  },\n\n  configureModalViewHandlers: function configureModalViewHandlers() {\n    bizagi.rendering.combo.prototype.configureModalViewHandlers.apply(this, arguments);\n  },\n\n  filterList: function filterList() {\n    bizagi.rendering.combo.prototype.filterList.apply(this, arguments);\n  },\n\n  actionSave: function actionSave() {\n    bizagi.rendering.combo.prototype.actionSave.apply(this, arguments);\n  },\n\n  setModalViewDisplayValue: function setModalViewDisplayValue() {\n    bizagi.rendering.combo.prototype.setModalViewDisplayValue.apply(this, arguments);\n  },\n\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    bizagi.rendering.combo.prototype.setDisplayValue.apply(this, arguments);\n  },\n\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (value === \"\") {\n      value = { id: \"\", value: \"\" };\n    }\n\n    if (!!value) {\n      if (self.value === null || self.value.id !== value.id) {\n        self.triggerHandler(\"select\", value);\n      }\n\n      this._super(value, triggerEvents);\n    }\n  },\n\n  /**\r\n      * Finds an element in the combo data values by id\r\n      * @param {int} id\r\n      * @returns {Object}\r\n      */\n  findDataValueById: function findDataValueById(id) {\n    return (this.properties.data || []).find(function (e) {\n      return e.id == id;\n    });\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    bizagi.rendering.combo.prototype.cleanData.apply(this, arguments);\n  },\n\n  resetData: function resetData() {\n    bizagi.rendering.combo.prototype.resetData.apply(this, arguments);\n  },\n\n  changeCombo: function changeCombo(valueItem, valueObjet) {\n    bizagi.rendering.combo.prototype.changeCombo.apply(this, arguments);\n  },\n\n  processComboData: function processComboData(data) {\n    bizagi.rendering.combo.prototype.processComboData.apply(this, arguments);\n  },\n\n  validateValue: function validateValue(value) {\n    bizagi.rendering.combo.prototype.validateValue.apply(this, arguments);\n  },\n\n  /*\r\n      *   Returns the selected value in the template\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return bizagi.rendering.combo.prototype.getSelectedValue.call(this, arguments);\n  },\n\n  /*\r\n      *   Handler for combo change\r\n      */\n  onComboChange: function onComboChange(newValue) {\n    var self = this;\n    self.selectedValue = newValue.value;\n    var params = {};\n    params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = newValue.id;\n\n    $.each(this.dependants, function (key, dependant) {\n      dependant.properties.params = params;\n      dependant.properties.parentComboValue = newValue.id;\n\n      if (newValue.id == \"\") {\n        dependant.resetData();\n        dependant.setDisplayValue({ id: \"\", value: \"\" });\n      } else {\n        $.when(dependant.getData(params)).done(function (data) {\n          dependant.properties.data = data;\n          if (dependant.value !== null) {\n            var selected = dependant.findDataValueById(dependant.value.id);\n            if (selected) {\n              if (selected.id == \"\" && self.value && self.value.value == \"\") {\n                dependant.resetData();\n                dependant.setDisplayValue({ id: \"\", value: \"\" });\n              } else {\n                dependant.triggerHandler(\"select\", selected);\n              }\n            } else\n            {\n              dependant.setDisplayValue({ id: \"\", value: \"\" });\n              dependant.triggerHandler(\"select\", { id: \"\", value: \"\" });\n            }\n          } else {\n            dependant.triggerHandler(\"select\", { id: \"\", value: \"\" });\n          }\n        });\n      }\n    });\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  } });","/**\r\n*   Name: BizAgi Tablet Render list Extension\r\n*   Author: Cristian O\r\n*   Date: 2015 - Oct - 10\r\n*   Comments:\r\n*   -   This script will redefine the list render class to adjust to tablet devices\r\n*/\n\n// Extends from base list \nbizagi.rendering.list.extend(\"bizagi.rendering.list\", {}, {\n  postRender: function postRender() {\n    // Call combo postRender\n    var self = this;\n    var control = self.getControl();\n\n    // Call base \n    this._super();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n\n    // Apply plugin\n    self.list = $(\".ui-bizagi-render-list\", control);\n\n    if (!self.properties.editable) {\n      //Add styles class\n      container.addClass(\"bz-command-not-edit\");\n      self.list.attr('readonly', \"readonly\");\n\n      var value = self.properties.value ? self.properties.value.value : \"- - \";\n\n      self.control.html(\"<span class=\\\"bz-command-not-edit bz-rn-align-class bz-rn-text\\\">\" + value + \"</span>\");\n    }\n\n    //Show clear icon\n    $.when(self.ready()).done(function () {\n      if (!self.hasValue()) {\n        self.getControl().find(\".bz-rn-input-selected\").html(\"-------------\");\n        self.getControl().find(\".bz-wp-list-clear-icon-list\").hide(500);\n      } else {\n        self.getControl().find(\".bz-wp-list-clear-icon-list\").show(500);\n      }\n    });\n\n    self.configureListHandlers();\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"readonly\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n     * Set display readonly\r\n     * @returns {} \r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    self._super();\n    self.list = control.find(\".readonly-control\");\n  },\n\n  /**\r\n      * Setting the control events\r\n      * */\n  configureListHandlers: function configureListHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    self.list.find(\".see-more-icon\").bind(\"click\", function () {\n      var template = self.renderFactory.getTemplate(\"listModalView\");\n      var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n      var data = {\n        'items': self.properties.data,\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView(\"open\");\n\n      modalView.closest(\".k-animation-container\").addClass(\"bz-rn-new-modalview-position\");\n    });\n\n    //Setting the initial selected display value\n    self.list.on(\"click\", \".bz-rn-regular-element\", function () {\n      var val = $(this).data(\"value\");\n      var label = $(this).text();\n\n      var newValue = { \"id\": val, \"value\": label };\n      self.selectedValue = newValue.value;\n      self.setValue(newValue);\n      self.setDisplayValue(newValue);\n    });\n\n    //Set clear event\n    control.find(\".bz-rn-first-element-container\").on(\"click\", \".bz-wp-list-clear-icon-list\", function () {\n      var val = \"\";\n      var label = \"-------------\";\n\n      var newValue = { \"id\": val, \"value\": label };\n      self.setValue(newValue);\n      self.selectedValue = newValue.value;\n      self.setDisplayValue(newValue);\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //getting combo list elements\n    var container = inputContainer.find(\".ui-bizagi-render-list-elements li\");\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    //Closing modalview\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Filtering list\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('change keypress keyup change', function () {\n      self.filterList(this.value, container, inputContainer);\n    });\n\n    //Cleaning list\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind('click', function () {\n      self.filterList(\"\", container, inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //Configuring list as a selectable element\n    self.modalViewList = $(\".ui-bizagi-render-list-elements\", inputContainer);\n    self.setModalViewDisplayValue();\n\n    //Setting the initial selected display value\n    self.modalViewList.on(\"click\", \"li\", function () {\n      self.modalViewList.find(\"li\").filter(function () {\n        if ($(this).hasClass(\"ui-state-active\")) {\n          return $(this);\n        }\n      }).removeClass(\"ui-state-focus ui-selected ui-state-active\");\n\n      $(this).addClass(\"ui-state-focus ui-selected ui-state-active\");\n      $(\".bz-wp-modalview-header-input-search\", inputContainer).blur();\n    });\n\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      var selected = $(\"li.ui-selected\", self.modalViewList);\n      var _value = $(selected).data(\"value\");\n      var label = $(selected).text();\n\n      //Update internal value\n      if (typeof _value !== \"undefined\") {\n        var newValue = { \"id\": _value, \"value\": label };\n        self.setValue(newValue);\n        self.selectedValue = newValue.value;\n        self.setDisplayValue(newValue);\n      }\n    }).fail(function () {\n    });\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * */\n  filterList: function filterList(search, $li, inputContainer) {\n    if (search !== \"\") {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n    } else {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n    }\n\n    $li.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = search.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  /**\r\n                                                             *   Sets the value in the rendered control\r\n                                                             */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (typeof value !== \"undefined\") {\n      if (properties.editable) {\n\n        control.find(\".bz-rn-input-selected\").html(value.value);\n\n        if (value.value === \"-------------\" || value.value === \"\") {\n          control.find(\".bz-wp-list-clear-icon-list\").hide();\n        } else {\n          control.find(\".bz-wp-list-clear-icon-list\").show();\n        }\n      } else {\n        self.list.text(value.value);\n      }\n    }\n  },\n\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", value: \"\" };\n\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n\n  /**\r\n      * Setting the selected element.\r\n      * */\n  setModalViewDisplayValue: function setModalViewDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.list && properties.editable &&\n    self.properties.value && typeof self.properties.value !== \"undefined\" &&\n    self.properties.value.id !== \"\") {\n      $(\"#ui-bizagi-list-\" + self.properties.value.id, self.modalViewList).\n      addClass(\"ui-state-focus ui-selected ui-state-active\");\n    }\n  },\n\n  /**\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n    // Nothing todo, all events apply in selectable plugin\n  },\n\n  /**\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n    var self = this;\n    return self.selectedValue;\n  } });","/*\r\n *   Name: Bizagi Tablet Render MultiSelect Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the MultiSelect render class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.multiSelect.extend(\"bizagi.rendering.multiSelect\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.multiSelect.extend(\"bizagi.rendering.multiSelect\", {\n  MORE_OPTION_WIDTH: 40,\n  SEARCH_MIN_LENGTH: 1,\n  temporalElements: {} },\n{\n\n  /**\r\n   * Template method to implement in each device to customize each render after processed\r\n   */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n  },\n\n  configureHandlers: function configureHandlers() {\n    var $control = this.getControl();\n    $(\".bz-multiselect__arrow\", $control).\n    on(\"click\", this.openModalView.bind(this));\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li div.bz-btn-icn\", this.onUnselectElement.bind(this)).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var $control = this.getControl();\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  onUnselectElement: function onUnselectElement(ev) {\n    var $element = $(ev.target);\n    var idToRemove = $element.data(\"id\");\n\n    // Remove element\n    this.removeElement({ id: idToRemove });\n    this.addSelectedElements();\n  },\n\n  onShowSelectedElements: function onShowSelectedElements(ev) {\n    var self = this;\n    var $element = $(ev.currentTarget);\n    var index = $element.data('index');\n    var values = self.getDataValue();\n    var valuesToShow = (values || []).slice(index);\n    var template = this.renderFactory.getTemplate(\"list-multiselect-tags\");\n    var $listView = this.showFloatListView(template, {\n      datasource: valuesToShow,\n      editable: self.properties.editable });\n\n\n    var $tagElements = $('ul.bz-multiselect__tags', $listView);\n\n    $tagElements.on(\"click, mousedown\", \"li div.bz-btn-icn\", function (ev) {\n      self.onUnselectElement(ev);\n      $listView.remove();\n    });\n\n    $listView.on(\"closeView\", function () {\n      $tagElements.off(\"click\", \"li div.bz-btn-icn\", self.onUnselectElement.bind(self));\n      $listView.remove();\n    });\n\n  },\n\n  openModalView: function openModalView() {\n    //Creating modal view\n    var self = this;\n    //Reset the temporal array\n    self.Class.temporalElements = {};\n    var template = self.renderFactory.getTemplate('multiselectModalView');\n    var values = self.getDataValue();\n    var options = {\n      selected: values,\n      isChecked: function isChecked(id) {\n        return self.markAsChecked.call(this, id);\n      } };\n\n\n    this.getData().done(function (result) {\n      var data = {\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation,\n        \"datasource\": result,\n        \"options\": options };\n\n      try {\n        var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n        for (var i = 0, length = values.length; i < length; i++) {\n          self.Class.temporalElements[values[i].id] = values[i];\n        }\n        var modalView = $($.trim(modalViewTemplate(data)));\n        self.modalListHandlers(modalView);\n\n        modalView.kendoMobileModalView({\n          close: function close() {\n            self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n            this.destroy();\n            this.element.remove();\n          },\n          useNativeScrolling: true,\n          modal: false });\n\n\n        self.configureModalViewHandlers(modalView);\n\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        modalView.kendoMobileModalView('open');\n\n        modalView.closest(\".k-animation-container\").addClass(\"bz-rn-new-modalview-position\");\n      } catch (e) {\n        bizagi.log(e.message);\n      }\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n    var $listContainer = inputContainer.find(\".bz-multiselect__list li\");\n    var closeModalViewPromise = new $.Deferred();\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Showing found results\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('keypress keyup', function () {\n      if (this.value !== \"\") {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n      } else {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n        $(\"#ui-bizagi-wp-filter-results-multiselect-wrapper ul li\", inputContainer).show();\n      }\n\n      // Getting and showing the data\n      self.filterList(this.value, $listContainer);\n    }).focus(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").addClass(\"searching\");\n    }).blur(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").removeClass(\"searching\");\n    });\n\n    //Cleaning search\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind('click', function () {\n      $(\"#ui-bizagi-wp-filter-results-multiselect-wrapper ul li\", inputContainer).show();\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //when click on apply button\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Trigger delete event for tags\n    inputContainer.find(\".filter-searchlist-modal-view-tags\").on(\"click\", '.bz-rn-remove-tag-on-search-list', function () {\n      self.removeItem($(this), true);\n\n      var term = inputContainer.find(\".bz-wp-modalview-header-input-search\").val();\n\n      // Getting and showing the data\n      self.filterList(term, $listContainer);\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      self.addNewValuesToInput();\n      self.Class.temporalElements = {};\n    }).fail(function () {\n      self.Class.temporalElements = {};\n    });\n  },\n\n  /**\r\n      * Adding new values to input\r\n      * */\n  addNewValuesToInput: function addNewValuesToInput() {\n    var self = this;\n\n    //Create a temporal array\n    var tempArray = [];\n\n    $.each(self.Class.temporalElements, function (i, ele) {\n      tempArray.push(ele);\n    });\n\n    self.setValue(tempArray);\n    self.addSelectedElements();\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n    var self = this;\n    var $control = self.getControl();\n    var values = self.getDataValue();\n    var totalValues = values.length;\n    var $tagsContainer = $('ul.bz-multiselect__tags', $control);\n    var editable = this.properties.editable;\n    $tagsContainer.empty();\n\n    if (totalValues > 0) {\n\n      var template = this.renderFactory.getTemplate(\"list-multiselect-tag\");\n\n      for (var i = 0; i < totalValues; i++) {\n        var item = values[i];\n        var data = { id: item.id, value: item.value, editable: editable };\n        var elementTemplate = kendo.template(template, { useWithBlock: false });\n        var $ChildToAdd = $($.trim(elementTemplate(data)));\n\n        $tagsContainer.append($ChildToAdd);\n\n        // Process the control in the layout\n        this.processControlLayout(this.properties.valueFormat || {});\n\n        if (!this.canAddMoreItems($tagsContainer)) {\n          // Remove last item added\n          $tagsContainer.\n          children().\n          last().\n          remove();\n\n          // Add the view mode item\n          var data = {\n            'value': totalValues - i,\n            'index': i };\n\n\n          var viewMoreTemplate = kendo.template(this.renderFactory.getTemplate(\"list-multiselect-view-more\"), { useWithBlock: false });\n          var $viewMore = $($.trim(viewMoreTemplate(data)));\n          $tagsContainer.append($viewMore);\n          break;\n        }\n      }\n    }\n\n  },\n\n  modalListHandlers: function modalListHandlers($floatListContext) {\n    var self = this;\n    var $listContainer = $floatListContext.find(\".bz-multiselect__list li\");\n    var checkbox = $listContainer.find(\"input[type=checkbox]\");\n\n    $floatListContext.find(\".bz-multiselect__search_input\").bind(\"change keypress keyup mousedown\", function (evt) {\n      evt.stopPropagation();\n\n      self.filterList(this.value, $listContainer);\n    });\n\n    checkbox.change(function () {\n      var $context = $(this);\n      var isChecked = $context.is(\":checked\");\n      var newValue = { id: $context.data(\"id\"), value: $context.data(\"value\") };\n\n      if (isChecked) {\n        self.addTemporalElement(newValue, false);\n      } else {\n        self.addTemporalElement(newValue, true);\n      }\n    });\n\n    $floatListContext.on(\"closeView\", function () {\n      self.closeFloatView();\n\n      $(document).unbind(\"mousedown.multiselect\");\n    });\n  },\n\n  addTemporalElement: function addTemporalElement(element, elementToRemove) {\n    var self = this;\n    if (elementToRemove) {\n      delete self.Class.temporalElements[element.id];\n    } else {\n      self.Class.temporalElements[element.id] = element;\n    }\n  },\n\n  showFloatListView: function showFloatListView(template, data) {\n    var self = this;\n    var $control = self.getControl();\n    var multiSelect = $(\".bz-multiselect\", $control);\n    var $containerControl = $control.closest(\".ui-bizagi-render-control\");\n    var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n    var $floatList = $($.trim(modalViewTemplate(data))); //$.tmpl(template, data, options);\n    var widthControl = multiSelect.width();\n    $containerControl.append($floatList);\n    $floatList.width(widthControl);\n    $floatList.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: multiSelect,\n      collision: \"fit\" }).\n    hide();\n    // Display view\n    $floatList.show();\n    // Stop bubbling outside the dropdown\n    $floatList.on(\"mousedown\", function (ev) {\n      ev.preventDefault();\n      return false;\n    });\n    // Add global handler to close the float view\n    $(document).one(\"mousedown.multiselect\", function (evt) {\n      $floatList.trigger('closeView');\n    });\n    return $floatList;\n  } });","/*\r\n*   Name: BizAgi Tablet Render Association\r\n*   Author: RicharU (based on Edward Morales)\r\n*   Comments: Defines the association control\r\n*/\n\nbizagi.rendering.association.extend('bizagi.rendering.association', {}, {\n  /**\r\n                                                                           * Template method to implement in each children to customize each control\r\n                                                                           * \r\n                                                                           * @returns {} \r\n                                                                           */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).\n    done(function (flip) {\n\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var columnData = self.getColumnData();\n\n      var html = $.kendoTmpl(template, $.extend(self.properties, { columnData: columnData }), {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n  /**\r\n     * Get Left Data, verify if flipper flags sets true\r\n     *\r\n     * @param column {'0'||'1'}\r\n     */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.properties;\n    var data = [];\n\n    self.data = properties;\n\n    var dataAssociation = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(dataAssociation, function (key, item) {\n      data.push({\n        id: item.id,\n        value: item.value,\n        association: self.getRightAssociation(item.id) });\n\n    });\n\n    return data;\n  },\n\n  /**\r\n      * Post render control\r\n      * @returns {} \r\n      */\n  postRender: function postRender() {\n\n    var self = this;\n    var control = self.getControl();\n\n    // Cache control\n    self.association = $(\".bz-rn-association-control\", control);\n\n    // Add Event at Association Control\n    self.addEventControl();\n\n    self.showDefaultContainer();\n  },\n\n  showDefaultContainer: function showDefaultContainer() {\n    var self = this;\n    var control = self.getControl();\n    var associations = $('.bz-rn-association-group .bz-rn-association-header', control);\n\n    if (associations.length > 0) {\n      var defaultHeader = $($('.bz-rn-association-group .bz-rn-association-header', control)[0]);\n      var defaultContainer = $($('.bz-rn-association-group .bz-rn-association-items', control)[0]);\n\n      self.closeAccordionSection(true);\n      defaultHeader.addClass('active');\n      defaultContainer.slideDown(300).addClass('open');\n    }\n  },\n\n  closeAccordionSection: function closeAccordionSection(i) {\n    var self = this;\n    var control = self.getControl();\n    var headers = $('.bz-rn-association-group .bz-rn-association-header', control);\n    var contents = $('.bz-rn-association-group .bz-rn-association-items', control);\n\n    if (i) {\n      headers = headers.not(':first').removeClass('active');\n      contents = contents.not(':first').slideUp(300).removeClass('open');\n    }\n\n    headers.removeClass('active');\n    contents.slideUp(300).removeClass('open');\n  },\n\n  /**\r\n      * Add event to control\r\n      * @returns {} \r\n      */\n  addEventControl: function addEventControl() {\n\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var control = self.getControl();\n\n    // Bind check toggle\n    self.association.delegate(\"input:checkbox\", \"change\", function () {\n\n      var contextElement = $(this);\n\n      if (contextElement.prop(\"checked\")) {\n        // Associate item\n        contextElement.addClass(\"bz-check\");\n        self.associateElement(contextElement);\n      } else {\n        // Dissociate item\n        contextElement.removeClass(\"bz-check\");\n        self.dissociateElement(contextElement);\n      }\n    });\n\n    // Bind flip actions\n    self.association.delegate(\".bz-rn-association-flip-button\", \"click\", function () {\n\n      $(control).empty();\n\n      // Define flipped\n      self.properties.flipped = !self.properties.flipped;\n\n      // Send flip data to server\n      self.properties.flipstate = self.properties.flipped;\n      self.dataService.getFlipAssociation(self.properties);\n\n      var columnData = self.getColumnData();\n\n      // Render template\n      $.kendoTmpls(template, $.extend(self.properties, { columnData: columnData }), {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation,\n        getLeftName: self.getLeftName }).\n      appendTo(control);\n\n      self.postRender();\n    });\n\n    self.association.delegate(\".bz-rn-association-container .bz-rn-association-header\", \"click\", function () {\n      if (!$(this).is('.active')) {\n        self.closeAccordionSection();\n        $(this).addClass('active');\n        $(this).siblings().slideDown(300).addClass('open');\n      }\n    });\n  },\n\n  /**\r\n      * Render for readonly\r\n      * @returns {} \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var template = self.renderFactory.getTemplate(\"association\");\n\n    control.empty();\n\n    // Make json base, create self.properties.formatJson\n    self.makeJsonBase();\n\n    var columnData = self.getColumnData();\n\n    // Render template  \n    $.kendoTmpls(template, $.extend(self.properties, { columnData: columnData }), {\n      getColumnData: self.getColumnData,\n      getRightAssociation: self.getRightAssociation,\n      getLeftName: self.getLeftName }).\n    appendTo(control);\n\n    self.association = $(\".bz-rn-association-control\", control);\n    self.association.find(\"input:checkbox\").hide();\n    self.association.find(\".ui-bz-rn-check-item label\").addClass(\"bz-rn-association-non-editable\");\n\n    $.when(self.ready()).done(function () {\n      self.showDefaultContainer();\n\n      // Bind event for flip botton\n      if (self.properties.allowFlip) {\n        self.association.delegate(\".bz-rn-association-flip-button\", \"click\", function () {\n          $(control).empty();\n          // Define flipped\n          self.properties.flipped = !self.properties.flipped;\n\n          self.postRenderReadOnly();\n        });\n      }\n\n      self.association.delegate(\".bz-rn-association-container .bz-rn-association-header\", \"click\", function () {\n        if (!$(this).is('.active')) {\n          self.closeAccordionSection();\n          $(this).addClass('active');\n          $(this).siblings().slideDown(300).addClass('open');\n        }\n      });\n    });\n  },\n\n  /**\r\n      * Associate the left item with the active parent\r\n      * @param {} element \r\n      * @returns {} \r\n      */\n  associateElement: function associateElement(element) {\n\n    var self = this;\n    var context = self.getControl();\n\n    // Get the parent id\n    var parentId = $(element.parents(\"ul\"), context).data(\"parent-id\");\n    var itemAdd = element.data(\"id\");\n\n    // Update JSON object\n    self.addElement(parentId, itemAdd);\n  },\n\n  /**\r\n      * Dissociates an item from the active collection\r\n      * @param {} element \r\n      * @returns {} \r\n      */\n  dissociateElement: function dissociateElement(element) {\n\n    var self = this;\n    var context = self.getControl();\n\n    // Get the parent id\n    var parentId = $(element.parents(\"ul\"), context).data(\"parent-id\");\n    var itemRemove = element.data(\"id\");\n\n    // Update JSON object\n    self.removeElement(parentId, itemRemove);\n  } });","/*\r\n*   Name: BizAgi User Field render tablet Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the basic behaviour for userfields\r\n*/\n\n// Auto-extension\nbizagi.rendering.basicUserField.extend(\"bizagi.rendering.basicUserField\", {}, {\n\n  /*\r\n                                                                                *   Constructor\r\n                                                                                */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Check if the userfield is supported\n    if (!this.isSupported()) {\n      var form = self.getFormContainer();\n      form.addError(self.getResource(\"render-tablet-error-userfield\"));\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  getEditableControl: function getEditableControl() {\n    if (!this.isSupported()) {\n      return bizagi.rendering.defaultUserField.prototype.getEditableControl.apply(this, arguments);\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  getReadonlyControl: function getReadonlyControl() {\n    if (!this.isSupported()) {\n      return bizagi.rendering.defaultUserField.prototype.getReadonlyControl.apply(this, arguments);\n    }\n  },\n\n  /*\r\n     *   Returns if the userfield is supported in this device\r\n     */\n  isSupported: function isSupported() {return true;} });\n\n\n/*\r\n                                                         *   Default implementation for user fields\r\n                                                         */\nbizagi.rendering.basicUserField.extend(\"bizagi.rendering.defaultUserField\", {}, {\n\n  /*\r\n                                                                                  *   Template method to implement in each device to customize each render after processed\r\n                                                                                  */\n  getEditableControl: function getEditableControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control.replace(/column/g, \"\");\n\n    self.input = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\n    self.input.addClass(\"ui-bizagi-render-userfield-notSupported\");\n\n    return self.input;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  getReadonlyControl: function getReadonlyControl() {\n    return this.getEditableControl();\n  },\n\n  /*\r\n     *  Dont send the data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n  } });","/**\r\n *   Name: BizAgi Render Image Class\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the image render class to adjust to tablet devices\r\n */\n// Extends itself\n//noinspection JSValidateTypes\nbizagi.rendering.image.extend(\"bizagi.rendering.image\", {\n  QUALITY_PICTURE: 50,\n  EXTENSIONSIMG: [\"jpeg\", \"jpg\", \"png\"] },\n{\n  /**\r\n   * Just listing the order of function calls (bizagi.rendering.render)\r\n   * 1. renderControl (found it on bizagi.rendering.image)\r\n   * 2. postRender / postRenderReadOnly / postRenderPrintVersion\r\n   * 3. configureHandlers / configureHandlersReadOnly\r\n   *\r\n   * Other functions are just local implementation\r\n   *\r\n   */\n\n  /**\r\n       * DOM elements to use as an ADD option button\r\n       * @var $actionImage jQuery DOM\r\n       */\n  $addImage: null,\n  /**\r\n                    * DOM elements to use as a REMOVE option button\r\n                    * @var $actionImage jQuery DOM\r\n                    */\n  $deleteImage: null,\n  /**\r\n                       * DOM input to handle HTML uploads\r\n                       * @var $inputFile jQuery DOM\r\n                       */\n  $inputFile: null,\n  /**\r\n                     * Whether or not is a native device 'Just a shortcut\r\n                     * @var isNative boolean\r\n                     */\n  isNative: false,\n  /**\r\n                    * Whether or not we are offline 'Just a shortcut\r\n                    * @var isOfflineForm boolean\r\n                    */\n  isOfflineForm: false,\n  /**\r\n                         * resolution options to show in menu after selecting an image\r\n                         * @var resolutionUpload Array\r\n                         */\n  resolutionUpload: [],\n\n  /**\r\n                         * This method tries to get the HTML template an render the current object inside\r\n                         * @return {jQuery} $.Deferred()\r\n                         */\n  renderControl: function renderControl() {\n    var self = this;\n\n    /**\r\n                      * Check if this is an offline form\r\n                      * It doesn't validate if the device goes offline so..\r\n                      */\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: this });\n    //noinspection JSValidateTypes,JSUnresolvedVariable\n    this.isNative = bizagi.util.isCordovaSupported();\n\n    if (this.isOfflineForm) {\n      var maxFileSizeOfProperty = Number(self.properties.maxSize) || 1048576;\n      var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 1048576;\n\n      self.properties.maxSize = maxFileSizeOfProperty < maxFileSizeOfUser ? maxFileSizeOfProperty : maxFileSizeOfUser;\n    }\n\n    var template = self.renderFactory.getTemplate(\"image\");\n\n    var allowDelete = self.isOfflineForm ? false : self.properties.allowDelete && self.properties.editable;\n    var html = $.kendoTmpl(template, {\n      url: \"\",\n      allowDelete: allowDelete,\n      editable: self.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * There is no difference when rendering a readonly image, so ...\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * After rendering element\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self.showAsyncImage();\n  },\n\n  /**\r\n      * After rendering a readonly element\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Just a little colors\n    self.element.addClass(\"bz-rn-read-only bz-rn-non-editable\");\n    self.showAsyncImage();\n  },\n  /**\r\n      * Add action handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var version = bizagi.util.getAndroidVersion();\n    var modalOptions = null;\n\n    this.resolutionUpload = [];\n    this.$addImage = $(\".bz-rn-image-actions-add\", this.getControl());\n    this.$deleteImage = $(\".bz-rn-image-actions-delete\", this.getControl());\n    this.$inputFile = $(\".bz-rn-upload-image-web\", this.getControl());\n\n    this._super();\n\n    if (this.isNative) {\n\n      this.$addImage.off(\"click\").click(function () {\n\n        var modal = self.createModal();\n        // Upload Image Options\n        modalOptions = modal.find(\"ul.bz-rn-image-options\");\n\n        // Can't remove from here\n        modalOptions.find(\"li[data-role=\\\"dimage\\\"]\").remove();\n\n        modal.find(\"ul.bz-rn-image-options li\").bind(\"click\", function () {\n          modal.kendoMobileModalView(\"close\");\n          switch ($(this).data(\"role\")) {\n            case \"image\":\n              self.imageAdd();\n              break;\n            case \"cimage\":\n              self.imageAdd(true);\n              break;\n            default:}\n\n        });\n        modal.find(\".bz-wp-modalview-close\").unbind(\"click\").bind(\"click\", function () {\n          modal.kendoMobileModalView(\"close\");\n        });\n\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        modal.kendoMobileModalView(\"open\");\n        modal.adjustSize();\n\n        modal.closest(\".km-modalview-root\").unbind(\"click\").bind(\"click\", function () {\n          modal.kendoMobileModalView(\"close\");\n        });\n\n      });\n\n    } else {\n      if (bizagi.util.media.fileAPISupported() && !self.isOfflineForm) {\n        this.$addImage.off(\"click\").click(function () {\n          self.$inputFile.click();\n        });\n      } else {\n        this.element.addClass(\"bz-rn-read-only bz-rn-non-editable\");\n        this.$addImage.removeClass(\"bz-plus\").addClass(\"bz-rn-read-only\");\n      }\n    }\n\n    // remove Image\n    this.$deleteImage.off(\"click\").click(function () {\n      self.imageDelete();\n    });\n    // Image change (Hybrid only)\n    this.$inputFile.off(\"change\").on(\"change\", function () {\n      self.imageAdd();\n      this.value = \"\";\n    });\n\n    // Just in case\n    this.$inputFile.off(\"click\").on(\"click\", function (e) {\n      e.stopPropagation();\n    });\n\n    this.getControl().find(\"img\").off(\"click\").click(function () {\n      self.renderEdition();\n    });\n\n    // Resolution upload menu\n    // If android version is less than 4.4 avoid to show upload sizes due to compatibility with blob files\n    if (version && version <= 4.4) {\n      resolutionUpload = [\n      { \"guid\": 4, \"displayName\": bizagi.localization.getResource(\"workportal-size-original\") }];\n\n    } else {\n      resolutionUpload = bizagi.util.media.getImageResolutionItems();\n    }\n\n    $(\".bz-resolution-container\", self.getControl()).off(\"click\").actionSheet({\n      actions: resolutionUpload,\n      actionClicked: function actionClicked(action) {\n        bizagi.loading.start();\n        $.when(self.resolutionButtonHandler(action.guid)).\n        always(function () {\n          bizagi.loading.stop();\n        });\n      },\n      appear: function appear(action) {\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      cancelClicked: function cancelClicked(action) {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n  },\n\n  clearDisplayValue: function clearDisplayValue() {\n    this.$deleteImage.click();\n  },\n\n  /**\r\n      * Render edition view\r\n      */\n  renderEdition: function renderEdition() {\n    var self = this;\n    var properties = self.properties;\n\n    // TODO Creates a container, be careful you must destroy it later\n    var baseParams = self.getParams();\n    var container = baseParams.navigation.createRenderContainer({\n      title: properties.displayName,\n      view: {\n        zoom: true,\n        useNativeScrolling: false } });\n\n\n\n    var img = $.kendoTmpls(self.renderFactory.getTemplate(\"image-preview\"), { \"url\": self.value && self.value[0] !== \"\" ? self.value[0] : \"\" });\n    container.element.css(\"display\", \"none\");\n    self.inputEdition = container.element.html(img);\n    baseParams.navigation.navigate(container.id);\n\n    if (self.isOfflineForm) {\n      container.element.on(\"close\", self.onPreviewActionBack.bind(self));\n    }\n\n    bizagi.loading.start();\n\n    // TODO review fail scenario, should it call the forms.failHandler method?\n    $.when(self.buildFullItemUrl()).done(function (dataUrl) {\n      container.element.css(\"display\", \"block\");\n\n      if (dataUrl.indexOf(\"error\") < 0) {\n        $(\".bz-rn-image-render-preview\", container.element).attr(\"src\", dataUrl);\n        var originalImage = $(\".bz-rn-image-render-preview\", container.element)[0];\n        var originalImageWidth = $(originalImage).css(\"width\");\n        originalImageWidth = Number(originalImageWidth.substring(0, originalImageWidth.length - 2));\n\n        if (self.properties.width !== -1 && self.properties.width < originalImageWidth) {\n          $(\".bz-rn-image-render-preview\", container.element).css(\"width\", \"100%\");\n        }\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  },\n\n  /**\r\n      * Refresh data\r\n      * @param {} event      \r\n      */\n  onPreviewActionBack: function onPreviewActionBack(event) {\n    var self = this;\n    var dataUrl = $(\".bz-rn-image-render-preview\", event.target).attr(\"src\") || \"\";\n\n    var dataUrlToSave = dataUrl.length > 0 ? [].concat(dataUrl) : null;\n    self.setValue(dataUrlToSave);\n  },\n\n  /**\r\n      * Creates the modalview based on template\r\n      * @returns {jQuery} kendoMobileModalView\r\n      */\n  createModal: function createModal() {\n    var self = this;\n\n    var imageTemplate = self.renderFactory.getTemplate(\"imageModalView\");\n    var modalViewTemplate = kendo.template(imageTemplate, { useWithBlock: false });\n\n    var modalView = $($.trim(modalViewTemplate({\n      editable: self.properties.editable,\n      displayName: self.properties.displayName || \"\",\n      orientation: self.properties.orientation || \"\" })));\n\n\n    //noinspection JSUnresolvedFunction\n    modalView.kendoMobileModalView({\n      close: function close(event) {\n        event.preventDefault();\n\n        if (window.event && window.event.stopPropagation)\n        window.event.stopPropagation();\n\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n        this.destroy();\n        this.element.remove();\n      },\n      show: function show() {\n\n      },\n      modal: false });\n\n\n    // Adjust modal to window size\n    modalView.adjustSize = function () {\n      var maxHeight = 0;\n      var elements = $(this).parent();\n\n      var windowHeightSize = window.innerHeight;\n      var windowWidthSize = window.innerWidth;\n\n      var listHeight = $(\".bz-wp-modalview-results-wrapper\", elements).height();\n      var maxWidth = $(\".bz-wp-modalview-results-wrapper\", elements).width();\n      var popupHeight = $(\"[data-role=header]\", elements).height();\n\n      if (listHeight + popupHeight >= windowHeightSize) {\n        maxHeight = windowHeightSize - 20;\n      } else {\n        maxHeight = listHeight + popupHeight + 10;\n      }\n\n      var top = (windowHeightSize - maxHeight) / 2;\n      var left = (windowWidthSize - maxWidth) / 2;\n\n      elements.css(\"height\", maxHeight);\n\n      elements.parent().css(\"top\", top);\n      elements.parent().css(\"left\", left);\n      elements.parent().css(\"height\", maxHeight);\n    };\n\n    return modalView;\n  },\n\n  /**\r\n      * Add an image\r\n      * @param useCamera boolean Whether or not to use device's camera\r\n      */\n  imageAdd: function imageAdd(useCamera) {\n    var self = this;\n\n    if (!this.isNative) {\n      var dataFile = this.$inputFile[0].files[0];\n      dataFile.fullPath = this.$inputFile[0].value;\n      var extensions = this.Class.EXTENSIONSIMG;\n\n      bizagi.loading.start();\n      if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n      bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n        $.when(self.uploadFile(dataFile)).done(function (result) {\n          self.uploadFileCompleted(self);\n        }).fail(function (error) {\n          self.executeFormFailHandler(error);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      } else {\n        bizagi.loading.stop();\n      }\n    } else {\n\n      var options = {\n        quality: self.Class.QUALITY_PICTURE,\n        targetWidth: 1280,\n        targetHeight: 960,\n        correctOrientation: true };\n\n\n      if (!useCamera) {\n        var coordinates = self.getControl()[0].getBoundingClientRect();\n        //noinspection JSUnresolvedVariable,JSUnresolvedFunction\n        options = {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n          popoverOptions: new CameraPopoverOptions(coordinates.left, coordinates.top - 20, 200, 100, 4),\n          destinationType: navigator.camera.DestinationType.FILE_URI };\n\n      }\n\n      //noinspection JSUnresolvedFunction,JSUnresolvedVariable\n      navigator.camera.getPicture(function (dataImage) {\n        bizagi.loading.start();\n\n        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\n          return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n            if (bizagi.util.media.checkFileTypes(fileData, self.properties, self.Class.EXTENSIONSIMG)) {\n              self.dataImage = dataImage;\n              self.fileProperties = fileData;\n              // \"new Blob\" constructor is not supported in android version 4.2.2\n              var version = bizagi.util.getAndroidVersion();\n              if (version && version <= 4.2 || self.isOfflineForm) {\n\n                return $.when(self.uploadFile(self.dataImage)).done(function (result) {\n                  self.uploadFileCompleted(self);\n                }).fail(function (error) {\n                  self.executeFormFailHandler(error);\n                });\n              } else {\n\n                if (!bizagi.util.isAndroid()) {\n                  return $.when(bizagi.util.media.modalResolutionUpload()).then(function (buttonIndex) {\n                    if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\n                      return self.resolutionButtonHandler(buttonIndex);\n                    }\n                  });\n\n                } else {\n                  // force click to show actionsheet menu\n                  $(\".bz-resolution-container\", self.getControl()).click();\n                }\n              }\n            }\n          });\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }, self.onFail, options);\n\n    }\n  },\n\n  /**\r\n      * Management fail messages\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  onFail: function onFail(error) {\n    bizagi.loading.stop();\n  },\n\n  /**\r\n      * Remove the current image\r\n      */\n  imageDelete: function imageDelete() {\n    var self = this;\n\n    bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-actionsheet-upload-remove-photo\")).\n    done(function () {\n      bizagi.loading.start();\n      $.when(self.dataService.deleteImage({\n        url: self.properties.deleteUrl,\n        idRender: self.properties.id,\n        xpath: self.properties.xpath,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        contexttype: self.properties.contexttype })).\n      done(function () {\n        self.uploadFileCompleted(self);\n      }).fail(function (msg) {\n        var message;\n        var responseText = msg.responseText;\n\n        try {\n          message = JSON.parse(responseText);\n          message = message.message || responseText;\n        } catch (e) {\n          message = responseText;\n        }\n        bizagi.showMessageBox(message, \"Error\");\n\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n      * Send file using HTTP\r\n      * @param dataFile\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  uploadFile: function uploadFile(dataFile) {\n\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (!this.isOfflineForm) {\n      if (this.isNative) {\n        //noinspection JSUnresolvedFunction\n        var params = {};\n        var addParams = self.buildAddParams();\n        var fileName = self.fileProperties.name;\n\n        if (self.editedImageURL) {\n          params.dataFile = self.editedImageURL;\n        } else if (self.fileProperties) {\n          params.dataFile = self.fileProperties.url;\n        }\n\n        addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n        params.data = addParams;\n        params.options = new FileUploadOptions();\n        params.options.fileKey = \"file\";\n        params.options.fileName = fileName;\n        params.options.mimeType = \"image/jpeg\";\n        params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n        params.options.addUrl = self.properties.addUrl;\n\n        //Cleans variables related previous gallery uploads\n        self.editedImageURL = null;\n        self.fileProperties = null;\n\n        // Fix android 4.4 getting images from recent folder\n        params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n        $.when(bizagi.util.media.uploadFile(params)).done(function (result) {\n          var response = JSON.parse(decodeURIComponent(result.response));\n\n          if (response.type === \"error\") {\n            defer.reject(response);\n          } else {\n            defer.resolve(response);\n          }\n        }).fail(function (error) {\n          defer.reject(error);\n        }).always(function () {\n        });\n\n      } else {\n        if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n        bizagi.util.media.checkFileTypes(dataFile, self.properties, self.Class.EXTENSIONSIMG)) {\n\n          self.dataService.processUploadFile({\n            url: self.properties.addUrl,\n            formData: self.buildAddFileParams(dataFile) }).\n          done(function (response) {\n            defer.resolve(response);\n          }).fail(function (error) {\n            defer.reject(error);\n          });\n        } else {\n          defer.reject();\n        }\n      }\n    } else {\n      // Load image\n      self.saveImageOffline(dataFile, function (dataUrl) {\n        var dataUrltoSave = dataUrl.replace(/^data:.*;base64,/, \"\");\n\n        self.setValue(dataUrltoSave);\n        defer.resolve();\n      });\n\n      // Enables canbesent on offline mode\n      self.canBeSent = function () {\n        $.forceCollectData = true;\n        return true;\n      };\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * File upload is done\r\n      * @param context\r\n      */\n  uploadFileCompleted: function uploadFileCompleted(context) {\n    var self = context;\n\n    try {\n      self.showAsyncImage();\n      self.editedImageURL = null;\n    } catch (error) {\n      self.getFormContainer().refreshForm();\n    }\n  },\n\n  /**\r\n      * Show aync image\r\n      * */\n  showAsyncImage: function showAsyncImage() {\n    var self = this;\n    var control = self.getControl();\n\n    $.when(self.buildItemUrl()).done(function (dataUrl) {\n      if (!self.isDisposed()) {\n        self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\n        self.properties.value = self.properties.url.length > 0 ? [].concat(self.properties.url) : null;\n        self.setValue(self.properties.value);\n\n        if (self.isOfflineForm && dataUrl.indexOf(\"Invalid case id\") !== -1) {\n          self.properties.url = \"\";\n        }\n\n        control.find(\".bz-rn-image-container\").off(\"click\").\n        toggleClass(\"bz-rn-image-actions-add\", self.properties.editable && self.properties.url === \"\");\n\n        if (self.properties.url !== \"\") {\n          control.find(\".bz-rn-image-container img\").css(\"display\", \"inherit\").attr(\"src\", self.properties.url);\n          control.find(\".bz-rn-image-container img\").off(\"click\").click(function () {\n            self.renderEdition();\n          });\n          control.find(\".bz-rn-image-actions-add\").toggle(self.properties.editable);\n          control.find(\".bz-rn-image-actions-delete\").toggle(self.properties.allowDelete && self.properties.\n          editable);\n        } else {\n          control.find(\".bz-rn-image-container img\").css(\"display\", \"none\");\n          control.find(\".bz-rn-image-actions-add.bz-upload\").hide();\n          control.find(\".bz-rn-image-actions-delete\").hide();\n        }\n\n        if (self.properties.required) {\n          self.getControl().\n          children(\".ui-bizagi-render-control-required, .ui-bizagi-render-control-required-rtl\").\n          addClass(\"image-required\");\n        }\n        self.configureHandlers();\n      }\n    }).fail(function () {\n    });\n  },\n\n  /**\r\n      * Create an image offline\r\n      * @param context\r\n      * @param url\r\n      * @param callback\r\n      */\n  saveImageOffline: function saveImageOffline(path, callback) {\n    var self = this;\n\n    // Fix android 4.4 getting images from recent folder        \n    var dataImage = bizagi.util.media.getImagePath(path);\n    var xhr = new XMLHttpRequest();\n\n    try {\n\n      xhr.onload = function () {\n        var reader = new FileReader();\n\n        reader.onloadend = function () {\n          var content = reader.result;\n          callback(content);\n        };\n        reader.readAsDataURL(xhr.response);\n      };\n\n      xhr.open(\"GET\", dataImage);\n      xhr.responseType = \"blob\";\n      xhr.send();\n\n    } catch (error) {\n      callback(\"\");\n    }\n  },\n\n  /**\r\n      * resolutionButtonHandler\r\n      * @param buttonOrdinal\r\n      */\n  resolutionButtonHandler: function resolutionButtonHandler(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    // If original, save image normally, if not, reduce quality and size\n    if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\n      return $.when(self.uploadFile(self.dataImage)).done(function (result) {\n        self.uploadFileCompleted(self);\n      }).fail(function (error) {\n        self.executeFormFailHandler(error);\n      });\n\n    } else {\n      var resolution = bizagi.util.media.getImageResolution(actionSelected);\n      return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).\n      then(function (result) {\n\n        self.editedImageURL = result.localUrl;\n        self.properties.url = result.base64Image;\n\n        return $.when(self.uploadFile(self.dataImage)).\n        done(function (result) {\n          self.uploadFileCompleted(self);\n        }).fail(function (error) {\n          self.executeFormFailHandler(error);\n        });\n\n      });\n    }\n\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var self = this;\n    var errorResponse = error.responseText ? error.responseText : bizagi.localization.getResource(\"workportal-general-error\");\n    self.getFormContainer().failHandler(errorResponse);\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var properties = self.properties;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\", properties.xpath);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\", properties.id);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\", properties.xpathContext);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE, properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\", \"savefile\");\n    formData.append(properties.xpath, dataFile);\n\n    if (self.properties.contexttype) {\n      formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  } });","/*\r\n *   Name: BizAgi Smarphone Render Document Generator Extension\r\n *   Author: Dario Estupiñan\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.document.extend(\"bizagi.rendering.document\", {}, {\n  /*\r\n                                                                     *   Template method to implement in each device to customize each render after processed\r\n                                                                     */\n  postRender: function postRender() {\n    var self = this;\n\n    self.configureHelpText();\n    self.applyDocumentTemplatesFormat();\n    self.configureHandlers();\n  },\n\n  /*\r\n      *   Put formating to the documents that are generated by the control\r\n      */\n  applyDocumentTemplatesFormat: function applyDocumentTemplatesFormat() {\n    var self = this;\n    var control = self.getControl();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n\n    // Resolve the type of the document based on the extension and put the icon to acconding to it\n    var documentList = $(\".ui-bizagi-document-upload-item\", control);\n\n\n    //Configure items\n    $.each(documentList, function (index, value) {\n      $(\".ui-bizagi-document-type\", value).addClass(\"ui-bizagi-document-extension\");\n\n      // Add the tooltip to the document preview icon\n      var previewTooltip = $(\".ui-bizagi-document-preview\", value);\n      previewTooltip.attr(\"title\", self.resources.getResource(\"render-document-preview-tooltip\"));\n      previewTooltip.tooltip();\n\n      // Add file extension\n      var returnType = self.returnCssTypeFile($(\"a > span\", value).html());\n      $(\".ui-bizagi-document-type\", value).addClass(returnType);\n\n      // Disable preview\n      $(\".ui-bizagi-button\", value).remove();\n      $(\".ui-bizagi-document-preview\", value).attr(\"display\", \"none\");\n\n    });\n\n    // Configure preview handler\n    $(\".ui-bizagi-document-upload-item > .ui-bizagi-document-upload-element\", control).click(function (e) {\n      self.showDocumentPreview($(this).data(\"url\"), $(this).attr(\"title\"));\n    });\n\n\n    // Configure delete handler\n    $(\".bz-rn-document-delete-icon\", control).click(function (e) {\n      if (e.isPropagationStopped())\n      return;\n      e.stopPropagation();\n\n      self.deleteDocumentTemplate($(this).parent().data(\"filename\"));\n    });\n  },\n\n  /**\r\n      * Identifies the extension of the file in a simpler way that ECM does\r\n      * @param {} file\r\n      * @returns {}\r\n      */\n  returnCssTypeFile: function returnCssTypeFile(file) {\n\n    if (file == undefined || file.lenght === 0) {\n      return \"ui-bizagi-document-upload-item-generic-file bz-file-text\";\n    }\n\n    var extension = file.substr(file.lastIndexOf(\".\") + 1);\n\n    switch (extension) {\n      case \"docx\":\n        return \"ui-bizagi-document-upload-item-doc bz-file-word\";\n      case \"pdf\":\n        return \"ui-bizagi-document-upload-item-pdf bz-file-pdf\";\n      case \"xlsx\":\n        return \"ui-bizagi-document-upload-item-xls bz-file-excel\";\n      default:\n        return \"ui-bizagi-document-upload-item-generic-file bz-file-text\";}\n\n  },\n\n  /*\r\n      *   Redraw documents when needed\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadalldocuments) {\n    var self = this;\n\n    self._super(documents, noFiles, downloadalldocuments);\n\n    // Add icons\n    self.applyDocumentTemplatesFormat();\n  },\n\n  /*\r\n      *   Shows the document if the flag is set.\r\n      */\n  autoOpenDocuments: function autoOpenDocuments() {\n  },\n\n  updateControlForPrintMode: function updateControlForPrintMode() {\n  },\n\n  showDocumentPreview: function showDocumentPreview(url, title) {\n    bizagi.loading.start();\n\n    $.when(bizagi.util.media.downloadFile(url, title)).fail(function (error) {\n      if (error.responseText) {\n        self.getFormContainer().failHandler(error.responseText);\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  } });","/**\r\n * Desktop definition of range date control\r\n *\r\n * @author: Andr�s Fernando Mu�oz\r\n */\n\nbizagi.rendering.rangeDate.extend(\"bizagi.rendering.rangeDate\", {}, {\n  /**\r\n                                                                       * Render actual value of control and set events\r\n                                                                       * @param data\r\n                                                                       */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/**\r\n * Desktop definition of range money control\r\n *\r\n * @author: Andr�s Fernando Mu�oz\r\n */\n\nbizagi.rendering.rangeMoney.extend(\"bizagi.rendering.rangeMoney\", {}, {\n\n  /**\r\n                                                                         * Render a specific implementation for Desktop device\r\n                                                                         */\n  postRender: function postRender() {\n    var self = this;\n\n    var minControl = new bizagi.rendering.money(self.getRenderProperties(\"min\"));\n    var maxControl = new bizagi.rendering.money(self.getRenderProperties(\"max\"));\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/**\r\n * Desktop definition of range number control\r\n *\r\n * @author: Andr�s Fernando Mu�oz\r\n */\n\nbizagi.rendering.rangeNumber.extend(\"bizagi.rendering.rangeNumber\", {}, {\n\n  /**\r\n                                                                           * Render a specific implementation for Desktop device\r\n                                                                           */\n  postRender: function postRender() {\n    var self = this;\n\n    var minControl = new bizagi.rendering.number(self.getRenderProperties(\"min\"));\n    var maxControl = new bizagi.rendering.number(self.getRenderProperties(\"max\"));\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/*\r\n*   Name: Bizagi Render Geolocation control\r\n*   Author: Ricardo Perez\r\n*   Comments:\r\n*   -   This script will define basic stuff for form link renders\r\n*/\n\nbizagi.rendering.geolocation.extend(\"bizagi.rendering.geolocation\", {}, {\n\n  /* \r\n                                                                          * Template method to implement in each device to customize each render after processed \r\n                                                                          */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base \n    self._super();\n\n    var control = self.getControl();\n\n    self.cordinate = $(\".bz-rn-geolocation-coordinate\", control);\n  },\n  /* \r\n     * Public method to determine if a value is valid or not \r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Call base\n    var bValid = self._super(invalidElements);\n\n    return bValid;\n  },\n\n  /* \r\n     * Template method to implement in each device to customize the render's behaviour to add handlers \r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    if (self.getMode() === \"execution\") {\n\n      //If the control doesn't have a value set the position\n      if (self.value == null)\n      self.updateDisplayValue();\n\n      $(\".bz-rn-geolocation-selector\", self.getControl()).on(\"click\", function () {\n        self.cordinate.empty();\n\n        //this retun a promise if is usefull\n        self.updateDisplayValue();\n      });\n    }\n  },\n\n  /* \r\n     * Sets the value in the rendered control \r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var def = new $.Deferred();\n\n    if (value != null && value !== \"\") {\n      if (!self.cordinate)\n      self.cordinate = self.getControl();\n\n      self.cordinate.html(value);\n\n      // Set internal value \n      self.setValue(value, false);\n      def.resolve();\n    } else {\n      var onSuccess = function onSuccess(position) {\n        var latitude = position.coords.latitude.toString();\n        var longitude = position.coords.longitude.toString();\n        var cordinate = latitude + \" \" + longitude;\n\n        self.cordinate.html(cordinate);\n\n        // Set internal value \n        self.setValue(cordinate, false);\n        def.resolve();\n      };\n\n      // onError Callback receives a PositionError object\n      var onError = function onError(message) {\n        var strMessage = message;\n\n        if (bizagi.util.isCordovaSupported() && bizagi.util.isiOSDevice()) {\n          strMessage = self.getErrorMessage(message);\n        }\n\n        def.reject(strMessage);\n      };\n\n      if (bizagi.util.isCordovaSupported() && bizagi.util.isiOSDevice()) {\n        navigator.geolocation.getCurrentPosition(onSuccess, onError);\n      } else {\n        self.getCurrentPosition(onSuccess, onError);\n      }\n    }\n\n    return def.promise();\n  },\n\n  updateDisplayValue: function updateDisplayValue() {\n    var self = this;\n\n    self.setDisplayValue().then(function () {}).fail(function (message) {\n      self.cordinate.val(\"\");\n      self.cordinate.html(\"<span style='color: red'>\" + message + \"</span>\");\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.column\", {}, {\n\n  /*\r\n                                                                                *   Apply custom overrides to each decorated instance\r\n                                                                                */\n  applyOverrides: function applyOverrides(decorated) {\n\n    if (!decorated) return;\n\n    // Hacks the getControl method in the decorated render to add features\n    if (decorated && decorated.getControl) {\n      this.originalGetControl = decorated.getControl;\n      decorated.getControl = this.getControl;\n    }\n\n    /* Customizes the font weight */\n    decorated.getFormattingLabel = function (bold) {\n      var self = this;\n      return self.getControl();\n    };\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This code runs under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var result = this._super();\n\n    if (!result || result.length == 0) {\n      result = $(\".ui-bizagi-cell-readonly\", self.element || self.observableElement);\n    }\n\n    return result;\n  },\n\n\n  /**\r\n      * Overrides the normal flow in order to set the grid to decorator always\r\n      * @param surrogateKey\r\n      * @returns {*}\r\n      */\n  getDecorated: function getDecorated(surrogateKey) {\n    var decorated = this._super(surrogateKey);\n    if (typeof decorated.grid === \"undefined\") {\n      decorated.grid = this.grid;\n    }\n\n    return decorated;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var result = this._super(surrogateKey, value, tableCell);\n    var decorated = this.getDecorated(surrogateKey);\n    if (decorated.element) {\n      // Clean all display types\n      decorated.element.removeClass(\"ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed\").\n      removeClass(\"ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value\");\n\n      // Add a new common class for all cells\n      decorated.element.addClass(\"ui-bizagi-render-display-cell\");\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var editable = self.properties.editable;\n    decorated.properties.editable = false;\n\n    if (decorated.grid == undefined) {\n      decorated.grid = self.grid;\n    }\n\n    if (self.properties.singleInstance) {\n      decorated.element = cell;\n    }\n\n    decorated.postRenderElement(cell);\n    decorated.properties.editable = editable;\n  },\n\n  /*\r\n     *   Apply column styles to a specified element\r\n     */\n  applyColumnStyles: function applyColumnStyles(element) {\n    var self = this;\n    var properties = self.properties;\n\n    element = $(element);\n\n    // Set cell alignment\n    element.css(\"-webkit-box-pack\", properties.align);\n\n    // Set cell back color\n    if (properties.textFormat.background) {\n      element.css(\"background-color\", properties.textFormat.background);\n      element.css(\"background-image\", \"none\");\n    }\n  } });","/*\r\n*   Name: BizAgi Desktop Render Document Generator Extension\r\n*   Author: Mauricio Gonzalez\r\n*   Comments:\r\n*   -   This script will redefine the document generator render class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.document\", {}, {\n\n\n  /*\r\n                                                                                  *   Apply custom overrides to each decorated instance\r\n                                                                                  */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n    self._super(decorated);\n\n    decorated.getControlHtml = self.getControlHtml;\n\n    if (mode != \"design\") {\n      self.surrogateKey = decorated.surrogateKey;\n      decorated.getXpath = this.getXpath;\n      decorated.getDocumentXpath = this.getDocumentXpath;\n      decorated.getContextXpath = this.getContextXpath;\n      decorated.documentTemplateGenerate = this.documentTemplateGenerate;\n      decorated.preRenderControl = this.preRenderControl;\n      decorated.properties.xpathContext = self.getContextXpath();\n    }\n  },\n\n  /*\r\n     *   Creates the event of generation of templates.\r\n     */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n    self.startLoading();\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    var grid = self.parent;\n\n    $.when(grid.submitOnChange(\"\", false)).\n    done(function () {\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function (response) {\n        $.when(grid.refresh()).\n        done(function () {\n          self.autoOpenDocuments();\n        });\n\n        self.endLoading();\n      }).fail(function (error) {\n        self.endLoading();\n\n        // Add error messages       \n        self.showErrorMessage(error);\n\n      });\n    }).fail(function (error) {\n      self.endLoading();\n\n      // Add error messages                 \n      self.showErrorMessage(error);\n    });\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  getControlHtml: function getControlHtml(template, mode, downloadalldocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n    var isInlineRow = true;\n\n    for (var i = 0, length = self.parent.properties.data.rows.length; i < length; i++) {\n      if (self.parent.properties.data.rows[i][0] == self.surrogateKey) {\n        isInlineRow = false;\n        break;\n      }\n    }\n\n    var html = $.kendoTmpl(template, {\n      noActivateButton: isInlineRow,\n      editable: mode != \"execution\",\n      downloadalldocuments: downloadalldocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append ? properties.append : false,\n      caption: properties.caption,\n      noFiles: noFiles });\n\n\n    return html.replace(\"ui-bizagi-document-upload-item-design\", \"ui-bizagi-document-upload-item-design-column\");\n  },\n\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  getXpath: function getXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return xpathPath;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell, tableCell);\n  },\n\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getContextXpath: function getContextXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  preRenderControl: function preRenderControl() {\n    var self = this;\n    self.properties.value = self.value;\n  } });","/*\r\n*   Name: BizAgi Desktop Date Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the date column decorator class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.date\", {}, {\n  /*\r\n                                                                              *   Apply custom overrides to each decorated instance\r\n                                                                              */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  } });","/*\r\n*   Name: BizAgi Tablet Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.text\", {}, {});","/*\r\n*   Name: BizAgi Tablet Number Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the number column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.number\", {}, {\n  /*\r\n                                                                                *   Post process the element after it has been rendered\r\n                                                                                */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input\", cell);\n    this.applyColumnStyles(input);\n  },\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    return self.renderReadOnly(key, value);\n  },\n\n  postRenderSummary: function postRenderSummary(key, value) {\n    var self = this;\n    self.postRenderReadOnly(key, value);\n    return true;\n  } });","\n/*\r\n *   Name: Bizagi Column Rendering Tablet numberScientificNotation\r\n *   Author: Luis Cabarique - LuisCE\r\n *   Comments:\r\n *   -   This script will define a base class to define the Column Scientific number notation\r\n */\n\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.numberScientificNotation\", {}, {\n  /*\r\n                                                                                                   *   Post process the element after it has been rendered\r\n                                                                                                   */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input\", cell);\n    this.applyColumnStyles(input);\n  },\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    return self.renderReadOnly(key, value);\n  },\n  postRenderSummary: function postRenderSummary(key, value) {\n    var self = this;\n    self.postRenderReadOnly(key, value);\n    return true;\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.image\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    var properties = this.properties;\n    this._super(decorated);\n\n    decorated.getXpathContext = this.getImageXpathContext;\n\n    decorated.setDisplayValue = function () {\n      return true;\n    };\n\n    // Change xpath context\n    // Taken from desktop version to fix non existence of \"xpathContext\" property\n    if (this.getMode() === \"execution\") {\n      decorated.properties.xpathContext = (properties.xpathContext ? properties.xpathContext + \".\" : \"\") + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    }\n  },\n\n  getImageXpathContext: function getImageXpathContext() {\n    return (this.column.properties.xpathContext ? this.column.properties.xpathContext + \".\" : \"\") + this.column.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  } });","/*\r\n*   Name: BizAgi Tablet Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.upload\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    decorated.getUploadXpath = this.getUploadXpath;\n    // hack apply upload plugin method in order to execute it only when the control is inserted in the DOM\n    var originalMethod = decorated.applyUploadPlugin;\n\n    decorated.getXpathContext = function () {\n      var surrogateKey = this.surrogateKey || \"\";\n      var self = this;\n      var properties = self.properties;\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n    };\n\n    decorated.buildItemUrl = function (file) {\n      var self = this;\n      var properties = self.properties;\n\n      var form = self.getFormContainer();\n      var xpathContext = self.getXpathContext();\n      var contextXpath = \"\";\n\n      return self.dataService.getUploadFileUrl({\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        idPageCache: properties.idPageCache,\n        fileId: file.id,\n        sessionId: form.properties.sessionId,\n        contexttype: properties.contexttype });\n\n    };\n  },\n\n  getUploadXpath: function getUploadXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + this.properties.xpath;\n  } });","/*\r\n *   Name: Bizagi Tablet Link Column Decorator Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the link column decorator class to adjust to tablet devices\r\n */\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.link\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n\n    self._super(decorated);\n\n    if (mode !== \"design\" && mode !== \"layout\") {\n      self.surrogateKey = decorated.surrogateKey;\n      decorated.getXpath = self.getXpath;\n\n      decorated.properties.xpathContext = self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n\n      if (self.grid.properties.xpathContext && decorated.properties.xpathContext.indexOf(self.grid.properties.xpathContext) == -1)\n      decorated.properties.xpathContext = self.grid.properties.xpathContext + \".\" + decorated.properties.xpathContext;\n    }\n\n    if (decorated.properties.type == \"columnFormLink\") {\n      decorated.getFormLinkXpath = this.getFormLinkXpath;\n    }\n  },\n\n  /*\r\n      *   Apply custom overrides to each decorated instance\r\n      */\n  getXpath: function getXpath(xpath) {\n    var self = this;\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(self.grid.properties.xpath);\n\n    if (index !== -1) {\n      xpathPath = xpathPath.substr(index + self.grid.properties.xpath.length + 1);\n    }\n\n    return self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /*\r\n      *   Get Form Link xpath to use\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    // Calculate layout properties to maximized property\n    this.properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n    this.calculateInitialLayoutProperties();\n\n    if (!this.properties.xpath) {\n      return;\n    }\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Desktop Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.uploadecm\", {}, {\n  /*\r\n                                                                                   *   Apply custom overrides to each decorated instance\r\n                                                                                   */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    self._super(decorated);\n\n    if (decorated && decorated.getControl) {\n      self.originalGetControl = decorated.getControl;\n      decorated.getControl = self.getControl;\n    }\n\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    decorated.buildItemUrl = function (file) {\n      var self = this;\n      var properties = self.properties;\n\n      var form = self.getFormContainer();\n\n      var columnXpath = self.getUploadXpath(self.surrogateKey);\n      columnXpath = columnXpath.split(\".\");\n      var nameFile = columnXpath[columnXpath.length - 1];\n      var xpathContext = self.getXpathContext(self.surrogateKey);\n\n      return self.dataService.getUploadFileUrl({\n        idRender: properties.id,\n        xpath: nameFile,\n        xpathContext: xpathContext,\n        idPageCache: properties.idPageCache,\n        fileId: file.idFileUpload,\n        sessionId: form.properties.sessionId,\n        contexttype: properties.contexttype });\n\n    };\n\n    decorated.getXpathContext = function () {\n      var self = this;\n      var properties = self.properties;\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n    };\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    var cell = \"<div></div>\";\n\n    var decorated = this.getDecorated(surrogateKey);\n    decorated.setValue(value);\n    self.setValue(surrogateKey, value);\n    self.setSurrogateKey(surrogateKey);\n\n    self.applyOverrides(decorated);\n    // Set grid and id references to the control in order to render the content\n    decorated.grid = this.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set ready deferred\n    self.readyDeferred = new $.Deferred();\n\n    // We need to render the inner control as read-only\n    if (decorated.files.length > 0) {\n      // Changes editable to false to render read-only\n      var editable = this.properties.editable;\n      decorated.properties.editable = false;\n      cell = decorated.render(\"cell.upload\");\n    }\n    return cell;\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n\n  getUploadXpath: function getUploadXpath(surrogateKey) {\n    surrogateKey = this.surrogateKey || surrogateKey || \"\";\n    return this.grid.properties.xpath + \"[id=\" + surrogateKey + \"].\" + this.properties.xpath;\n  },\n\n  getControl: function getControl() {\n    var self = this;\n    var result = self._super();\n\n    if (!result || result.length == 0) {\n      return $(\".ui-bizagi-cell-readonly\", self.element || self.observableElement);\n    } else {\n      return $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n\n  } });","/**\r\n* Grid control Column Button\r\n*\r\n* @author Ricardo Pérez\r\n*/\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.button\", {}, {});","/*\r\n*   Name: BizAgi Tablet Radio Column Decorator Extension\r\n*   Author: Richar Urbano\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.radio\", {}, {});","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.list\", {}, {});","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.search.extend(\"bizagi.rendering.columns.search\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  },\n\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    if (value.length > 0) {\n      value = [].concat(value[0]);\n      return self._super(surrogateKey, {\n        id: value[0],\n        label: value[1],\n        additionallabel: value[2] || undefined });\n\n    } else\n    {\n      return self._super(surrogateKey, value);\n    }\n  } });","/*\r\n*   Name: BizAgi tablet Date Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the check column to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.exclusiveCheck\", {}, {});","/*\r\n *   Name: Bizagi Base Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define an abstract render factory in order to do common stuff for all device factories\r\n */\n\n$.Class.extend(\"bizagi.rendering.base.factory\", {}, {\n  /* \r\n                                                      *   Constructor\r\n                                                      */\n  init: function init(dataService) {\n    this.templates = {};\n    this.dataService = dataService;\n  },\n\n  /**\r\n     * Load client resources in order to override a default behavior\r\n     */\n  loadOverrides: function loadOverrides() {\n  },\n  /*\r\n     *   This function will load asynchronous stuff needed in the module\r\n     */\n  initAsyncStuff: function initAsyncStuff() {\n    return $.when.apply($, [this.loadOverrides(), this.loadTemplates()]);\n  },\n  /*\r\n     *   Load all the templates used for rendering\r\n     */\n  loadTemplates: function loadTemplates() {\n  },\n  /*\r\n     *   Load one template and save it internally\r\n     */\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return bizagi.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedTemplate) {\n      self.templates[template] = resolvedTemplate;\n    });\n  },\n  /*\r\n     * Returns a common  used template for the framework\r\n     */\n  getCommonTemplate: function getCommonTemplate(template) {\n    return this.templates[template];\n  },\n  /*\r\n     *   Returns the appropiate container based on the container type\r\n     */\n  getContainer: function getContainer(params) {\n    // TODO: REMOVE IMPLEMENTATION\n\n    var type = params.type;\n    var data = params.data;\n    var containerParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"form\") {\n      return new bizagi.rendering.form(containerParams);\n    }\n\n    if (type == \"mobileform\") {\n      return new bizagi.rendering.mobileform(containerParams);\n    }\n\n    if (type == \"template\") {\n      return new bizagi.rendering.formTemplate(containerParams);\n    }\n\n    if (type == \"queryForm\") {\n      return new bizagi.rendering.queryForm(containerParams);\n    }\n\n    if (type == \"layout\") {\n      return new bizagi.rendering.layout(containerParams);\n    }\n\n    if (type == \"usersForm\") {\n      return new bizagi.rendering.usersForm(containerParams);\n    }\n\n    if (type == \"panel\") {\n      return new bizagi.rendering.panel(containerParams);\n    }\n\n    if (type == \"section\") {\n      return new bizagi.rendering.section(containerParams);\n    }\n\n    if (type == \"contentPanel\" || type == \"contentpanel\") {\n      return new bizagi.rendering.contentPanel(containerParams);\n    }\n\n    if (type.toLowerCase() == \"nestedform\") {\n      return new bizagi.rendering.nestedForm(containerParams);\n    }\n\n    if (type == \"tab\") {\n      return new bizagi.rendering.tab(containerParams);\n    }\n\n    if (type == \"tabItem\" || type == \"tabitem\") {\n      return new bizagi.rendering.tabItem(containerParams);\n    }\n\n    if (type == \"horizontal\") {\n      return new bizagi.rendering.horizontal(containerParams);\n    }\n\n    if (type == \"accordion\") {\n      return new bizagi.rendering.accordion(containerParams);\n    }\n\n    if (type == \"accordionItem\") {\n      return new bizagi.rendering.accordionItem(containerParams);\n    }\n\n    if (type == \"group\") {\n      return new bizagi.rendering.group(containerParams);\n    }\n\n    if (type == \"mobilegroup\") {\n      return new bizagi.rendering.mobilegroup(containerParams);\n    }\n\n    if (type == \"searchForm\") {\n      containerParams.context = \"search\";\n      containerParams.contexttype = \"metadata\";\n      return new bizagi.rendering.searchForm(containerParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate render based on the render type\r\n     */\n  getRender: function getRender(params) {\n\n    // TODO: REMOVE IMPLEMENTATION\n    var type = params.type;\n    var data = params.data;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (!type)\n    type = \"label\";\n\n    if (type == \"text\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(renderParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(renderParams);\n    }\n    if (type == \"mobiletext\") {\n      return new bizagi.rendering.mobiletext(renderParams);\n    }\n\n    if (type == \"association\") {\n      return new bizagi.rendering.association(renderParams);\n    }\n\n    if (type == \"label\") {\n      return new bizagi.rendering.label(renderParams);\n    }\n\n    if (type == \"hidden\") {\n      return new bizagi.rendering.hidden(renderParams);\n    }\n\n    if (type == \"number\") {\n      return new bizagi.rendering.number(renderParams);\n    }\n\n    if (type == \"money\") {\n      return new bizagi.rendering.money(renderParams);\n    }\n\n    if (type == \"date\") {\n      return new bizagi.rendering.date(renderParams);\n    }\n\n    if (type == \"boolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(renderParams);\n    }\n\n    if (type == \"combo\") {\n      return new bizagi.rendering.combo(renderParams);\n    }\n\n    if (/^cascadingcombo$/i.test(type)) {\n      return new bizagi.rendering.cascadingCombo(renderParams);\n    }\n\n    if (type == \"list\") {\n      return new bizagi.rendering.list(renderParams);\n    }\n\n    if (type == \"multiSelect\") {\n      return new bizagi.rendering.multiSelect(renderParams);\n    }\n\n    if (type == \"radio\") {\n      return new bizagi.rendering.radio(renderParams);\n    }\n\n    if (type == \"image\") {\n      // Override for test purposes\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"uploadecm\") {\n      // Check if its ECM file            \n      return new bizagi.rendering.ecm(renderParams);\n    }\n\n    if (type == \"upload\") {\n      return new bizagi.rendering.upload(renderParams);\n    }\n    if (type == \"grid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"groupedgrid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"search\") {\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"suggest\") {\n      renderParams.data.properties.enableQuerySuggestBehavior = true;\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"searchList\") {\n      return new bizagi.rendering.searchList(renderParams);\n    }\n\n    if (type == \"letter\") {\n      return new bizagi.rendering.letter(renderParams);\n    }\n\n    if (type == \"button\") {\n      return new bizagi.rendering.button(renderParams);\n    }\n\n    if (type == \"formLink\") {\n      return new bizagi.rendering.formLink(renderParams);\n    }\n\n    if (type == \"link\") {\n      return new bizagi.rendering.link(renderParams);\n    }\n\n    if (type == \"layoutImage\") {\n      return new bizagi.rendering.layoutImage(renderParams);\n    }\n\n    if (type == \"layoutLink\") {\n      return new bizagi.rendering.layoutLink(renderParams);\n    }\n\n    if (type == \"layoutLabel\") {\n      return new bizagi.rendering.layoutLabel(renderParams);\n    }\n\n    if (type == \"layoutText\") {\n      return new bizagi.rendering.layoutText(renderParams);\n    }\n\n    if (type == \"layoutDateTime\") {\n      return new bizagi.rendering.layoutDateTime(renderParams);\n    }\n\n    if (type == \"layoutNumber\") {\n      return new bizagi.rendering.layoutNumber(renderParams);\n    }\n\n    if (type == \"layoutMoney\") {\n      return new bizagi.rendering.layoutMoney(renderParams);\n    }\n\n    if (type == \"layoutPlaceholder\") {\n      return new bizagi.rendering.layoutPlaceholder(renderParams);\n    }\n\n    if (type == \"actionLauncher\") {\n      return new bizagi.rendering.actionLauncher(renderParams);\n    }\n\n    if (type == \"layoutBoolean\") {\n      return new bizagi.rendering.layoutBoolean(renderParams);\n    }\n\n    if (type == \"layoutUpload\") {\n      return new bizagi.rendering.layoutUpload(renderParams);\n    }\n\n    if (type == \"entityTemplate\") {\n      return new bizagi.rendering.entityTemplate(renderParams);\n    }\n\n    if (type == \"polymorphicLauncher\") {\n      return new bizagi.rendering.polymorphicLauncher(renderParams);\n    }\n\n    if (type == \"userfield\") {\n      return new bizagi.rendering.userfieldWrapper(renderParams);\n    }\n\n    // Check search renders (starts with \"search\")\n    if (type.indexOf(\"search\") == 0) {\n      return this.getSearchRender(params);\n    }\n\n    if (type.indexOf(\"query\") == 0) {\n      return this.getQueryRender(params);\n    }\n\n    if (type == \"document\") {\n      return new bizagi.rendering.document(renderParams);\n    }\n\n    if (type == \"image\") {\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"fileprint\") {\n      return new bizagi.rendering.fileprint(renderParams);\n    }\n    if (type == \"geolocation\") {\n      return new bizagi.rendering.geolocation(renderParams);\n    }\n\n    if (type == \"collectionnavigator\") {\n      return new bizagi.rendering.collectionnavigator(renderParams);\n    }\n\n    if (type == \"getUser\") {\n      return new bizagi.rendering.getUser(renderParams);\n    }\n\n    if (type == \"rangeDate\") {\n      return new bizagi.rendering.rangeDate(renderParams);\n    }\n\n    if (type == \"rangeMoney\") {\n      return new bizagi.rendering.rangeMoney(renderParams);\n    }\n\n    if (type == \"rangeNumber\") {\n      return new bizagi.rendering.rangeNumber(renderParams);\n    }\n\n    if (type == \"activityCheckList\") {\n      return new bizagi.rendering.activityCheckList(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate column based on the render type\r\n     */\n  getColumn: function getColumn(params) {\n    var type = params.type;\n    var data = params.data;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type == \"columnText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        columnParams.decorated = bizagi.rendering.extendedText;\n      } else {\n        // Creates one normal text render\n        columnParams.decorated = bizagi.rendering.text;\n      }\n      return new bizagi.rendering.columns.text(columnParams);\n    }\n\n    if (type == \"columnSearchList\") {\n      columnParams.decorated = bizagi.rendering.searchList;\n      return new bizagi.rendering.columns.searchList(columnParams);\n    }\n\n    if (type == \"columnNumber\") {\n      columnParams.decorated = bizagi.rendering.number;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnMoney\") {\n      columnParams.decorated = bizagi.rendering.money;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnDate\") {\n      columnParams.decorated = bizagi.rendering.date;\n      return new bizagi.rendering.columns.date(columnParams);\n    }\n\n    if (type == \"columnBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        columnParams.decorated = bizagi.rendering.check;\n        if (params.data.properties.isExclusive) {\n          return new bizagi.rendering.columns.exclusiveCheck(columnParams);\n        }\n      } else {\n        // Creates one yes-no render\n        columnParams.decorated = bizagi.rendering.yesno;\n      }\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnCombo\") {\n      columnParams.decorated = bizagi.rendering.combo;\n      return new bizagi.rendering.columns.combo(columnParams);\n    }\n\n    if (type == \"columnRadio\") {\n      columnParams.decorated = bizagi.rendering.radio;\n      return new bizagi.rendering.columns.radio(columnParams);\n    }\n\n    if (type == \"columnList\") {\n      columnParams.decorated = bizagi.rendering.list;\n      return new bizagi.rendering.columns.list(columnParams);\n    }\n\n    if (type == \"columnHidden\") {\n      columnParams.decorated = bizagi.rendering.hidden;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnUpload\") {\n      columnParams.decorated = bizagi.rendering.upload;\n      return new bizagi.rendering.columns.upload(columnParams);\n    }\n\n    if (type == \"columnImage\") {\n      columnParams.decorated = bizagi.rendering.image;\n      return new bizagi.rendering.columns.image(columnParams);\n    }\n\n    if (type == \"columnUploadEcm\") {\n      columnParams.decorated = bizagi.rendering.ecm;\n      return new bizagi.rendering.columns.uploadecm(columnParams);\n    }\n    if (type == \"columnLink\") {\n      columnParams.decorated = bizagi.rendering.link;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnFormLink\") {\n      columnParams.decorated = bizagi.rendering.formLink;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnUserfield\") {\n      columnParams.decorated = bizagi.rendering.userfieldWrapper;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnSearch\") {\n      columnParams.decorated = bizagi.rendering.search;\n      return new bizagi.rendering.columns.search(columnParams);\n    }\n\n    if (type == \"columnLabel\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnReadonly\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.readonly(columnParams);\n    }\n\n    if (type == \"columnDocument\") {\n      columnParams.decorated = bizagi.rendering.document;\n      return new bizagi.rendering.columns.document(columnParams);\n    }\n\n    if (type == \"columnLetter\") {\n      columnParams.decorated = bizagi.rendering.letter;\n      return new bizagi.rendering.columns.letter(columnParams);\n    }\n\n    if (type == \"columnButton\") {\n      columnParams.decorated = bizagi.rendering.button;\n      return new bizagi.rendering.columns.button(columnParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getSearchRender: function getSearchRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"searchText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(searchParams);\n    }\n\n    if (type == \"searchBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(searchParams);\n    }\n\n    if (type == \"searchNumber\") {\n      if (data.properties.dataType == 29) {\n        //Creates a Scientific Notation render\n        return new bizagi.rendering.numberScientificNotation(searchParams);\n      }\n      return new bizagi.rendering.number(searchParams);\n    }\n\n    if (type == \"searchMoney\") {\n      return new bizagi.rendering.money(searchParams);\n    }\n\n    if (type == \"searchDate\") {\n      return new bizagi.rendering.date(searchParams);\n    }\n\n    if (type == \"searchCombo\") {\n      return new bizagi.rendering.combo(searchParams);\n    }\n\n    if (type == \"searchSuggest\") {\n      return new bizagi.rendering.search(searchParams);\n    }\n\n    if (type == \"searchLabel\") {\n      return new bizagi.rendering.label(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getQueryRender: function getQueryRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"queryText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.queryExtendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.queryText(searchParams);\n    }\n\n    if (type == \"queryBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.queryCheck(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.queryYesNo(searchParams);\n    }\n\n    if (type == \"queryNumber\") {\n\n      return new bizagi.rendering.queryNumber(searchParams);\n    }\n\n    if (type == \"queryMoney\") {\n      return new bizagi.rendering.queryMoney(searchParams);\n    }\n\n    if (type == \"queryDate\") {\n      return new bizagi.rendering.queryDate(searchParams);\n    }\n\n    if (type == \"queryCombo\") {\n      return new bizagi.rendering.queryCombo(searchParams);\n    }\n\n    if (type == \"queryCascadingCombo\") {\n      return new bizagi.rendering.queryCascadingCombo(searchParams);\n    }\n\n    if (type == \"querySuggest\") {\n      return new bizagi.rendering.querySuggest(searchParams);\n    }\n\n    if (type == \"queryLabel\") {\n      return new bizagi.rendering.queryLabel(searchParams);\n    }\n\n    if (type == \"queryList\") {\n      return new bizagi.rendering.queryList(searchParams);\n    }\n\n    if (type == \"queryMultiSelect\") {\n      return new bizagi.rendering.queryMultiSelect(searchParams);\n    }\n\n    if (type == \"querySearch\") {\n      return new bizagi.rendering.querySearch(searchParams);\n    }\n\n    if (type == \"queryRadio\") {\n      return new bizagi.rendering.queryRadio(searchParams);\n    }\n\n    if (type == \"queryState\") {\n      return new bizagi.rendering.queryState(searchParams);\n    }\n\n    if (type == \"queryCaseState\") {\n      return new bizagi.rendering.queryCaseState(searchParams);\n    }\n\n    if (type == \"queryProcess\") {\n      return new bizagi.rendering.queryProcess(searchParams);\n    }\n\n    if (type == \"querySearchUser\") {\n      return new bizagi.rendering.querySearchUser(searchParams);\n    }\n\n    if (type == \"queryHidden\") {\n      return new bizagi.rendering.hidden(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Method to fetch templates from a private dictionary\r\n     */\n  getTemplate: function getTemplate(template) {\n    var self = this;\n    return self.templates[template];\n  } });","/*\r\n *   Name: BizAgi Tablet Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a render factory to create tablet versions of each render type\r\n */\n\nbizagi.rendering.base.factory.extend(\"bizagi.rendering.tablet.factory\", {}, {\n\n  init: function init(dataService) {\n    var self = this;\n\n    self._super(dataService);\n\n    if (bizagi.override.enableMSF) {\n      if (bizagi.hasOwnProperty(\"kendo\")) {\n        self.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n      } else {\n        self.templateService = new bizagi.templates.services.service(bizagi.localization);\n      }\n    } else {\n      self.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n    }\n  },\n\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return self.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedRemplate) {\n      self.templates[template] = resolvedRemplate;\n    });\n  },\n\n  /**\r\n      * Load all the templates used for rendering\r\n      */\n  loadTemplates: function loadTemplates() {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(\n    // Common\n    self.loadTemplate(\"form-error\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.form-error\")),\n    self.loadTemplate(\"form-waiting\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.form-waiting\")),\n    // Icons\n    self.loadTemplate(\"icons\", bizagi.getTemplate(\"common.bizagi.rendering.icons\")),\n    // Containers\n    self.loadTemplate(\"form\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.form\") + \"#ui-bizagi-render-form\"),\n    self.loadTemplate(\"complexgateway\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.form\") + \"#ui-bizagi-render-complexGateway\"),\n    self.loadTemplate(\"panel\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.panel\")),\n    self.loadTemplate(\"tab\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.tab\")),\n    self.loadTemplate(\"tabItem\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.tabItem\")),\n    self.loadTemplate(\"horizontal\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.horizontal\")),\n    self.loadTemplate(\"accordion\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.accordion\")),\n    self.loadTemplate(\"accordionItem\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.accordionItem\")),\n    self.loadTemplate(\"group\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.group\")),\n    self.loadTemplate(\"searchForm\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchForm\")),\n    self.loadTemplate(\"contentPanel\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.contentPanel\")),\n\n    // Renders\n    self.loadTemplate(\"render\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.render\")),\n    self.loadTemplate(\"render-layout\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.render.layout\")),\n    self.loadTemplate(\"text\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.text\")),\n    self.loadTemplate(\"extendedText\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.extendedText\") + \"#ui-bz-mobile-extended-text-control\"),\n    self.loadTemplate(\"readonlyExtendedText\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.extendedText\") + \"#ui-bz-mobile-readonly-extended-text-control\"),\n    self.loadTemplate(\"number\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.number\") + \"#ui-bz-mobile-number-control\"),\n    self.loadTemplate(\"readonlyNumber\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.number\") + \"#ui-bz-mobile-readonly-number-control\"),\n    self.loadTemplate(\"numberScientificNotation\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.numberScientificNotation\")),\n    self.loadTemplate(\"date\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.date\") + \"#bz-rn-date\"),\n    self.loadTemplate(\"readonlyDate\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.date\") + \"#bz-rn-readonly-date\"),\n    self.loadTemplate(\"yesno\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.yesno\")),\n    self.loadTemplate(\"check\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.check\")),\n    self.loadTemplate(\"combo\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.combo\") + \"#ui-bz-mobile-combo-control\"),\n    self.loadTemplate(\"readonlyCombo\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.combo\") + \"#ui-bz-mobile-readonly-combo-control\"),\n    self.loadTemplate(\"comboModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.combo\") + \"#ui-bz-wp-popup-combo-control\"),\n    self.loadTemplate(\"list\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.list\") + \"#ui-bz-mobile-list-control\"),\n    self.loadTemplate(\"listModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.list\") + \"#ui-bz-wp-popup-list-control\"),\n    self.loadTemplate(\"radio\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.radio\")),\n    self.loadTemplate(\"image\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.image\") + \"#ui-bizagi-render-image\"),\n    self.loadTemplate(\"image-item\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.image\") + \"#ui-bizagi-render-image-item\"),\n    self.loadTemplate(\"image-preview\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.image\") + \"#bz-rd-upload-render-edition\"),\n    self.loadTemplate(\"imageModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.image\") + \"#ui-bizagi-render-image-modalview\"),\n    self.loadTemplate(\"upload\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.upload\") + \"#ui-bz-mobile-upload-control\"),\n    self.loadTemplate(\"uploadModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.upload\") + \"#ui-bz-wp-popup-upload-control\"),\n    self.loadTemplate(\"uploadItem\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.uploadItem\")),\n    self.loadTemplate(\"uploadSlide\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.slide.upload\")),\n    self.loadTemplate(\"grid\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid\")),\n    self.loadTemplate(\"cell\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.cell\")),\n    self.loadTemplate(\"cell.readonly\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.cell.readonly\")),\n    self.loadTemplate(\"cell.upload\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.cell.upload\")),\n    self.loadTemplate(\"search\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.search\") + \"#ui-bz-mobile-search-control\"),\n    self.loadTemplate(\"readonlySearch\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.search\") + \"#ui-bz-mobile-readonly-search-control\"),\n    self.loadTemplate(\"searchAddItem\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchAddItem\")),\n    self.loadTemplate(\"searchItem\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchItem\")),\n    self.loadTemplate(\"searchList\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchList\") + \"#ui-bz-mobile-searchlist-control\"),\n    self.loadTemplate(\"searchListModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchList\") + \"#ui-bz-wp-popup-searchlist-control\"),\n    self.loadTemplate(\"searchListModalViewAuxTemplates\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchList\") + \"#ui-bz-wp-searchlist-control-modalview-auxiliary-templates\"),\n    self.loadTemplate(\"searchListInputAuxTemplates\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchList\") + \"#ui-bz-wp-searchlist-control-input-auxiliary-templates\"),\n    self.loadTemplate(\"letter\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.letter\")),\n    self.loadTemplate(\"letter.readonly\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.letter.readonly\")),\n    self.loadTemplate(\"letter.dialog\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.dialog-letter\")),\n    self.loadTemplate(\"button\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.button\")),\n    self.loadTemplate(\"link\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.link\")),\n    self.loadTemplate(\"geolocation\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.geolocation\")),\n    self.loadTemplate(\"association\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.association\")),\n    self.loadTemplate(\"ecm\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.ecm\") + \"#bz-rn-ecm-view-default-item\"),\n    self.loadTemplate(\"ecm-metadata\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.ecm\") + \"#bz-rn-ecm-metadata\"),\n    self.loadTemplate(\"ecmModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.ecm\") + \"#ui-bizagi-render-ecm-modalview\"),\n    self.loadTemplate(\"checkList\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.checkList\")),\n    self.loadTemplate(\"document\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.document\") + \"#bz-document-generator\"),\n    self.loadTemplate(\"document-item\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.document\") + \"#bz-document-generator-item\"),\n    self.loadTemplate(\"render-actionLauncher\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher\"),\n    self.loadTemplate(\"render-actionLauncher-horizontal\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-horizontal\"),\n    self.loadTemplate(\"render-actionLauncher-vertical\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-vertical\"),\n    self.loadTemplate(\"render-actionLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-polymorphicLauncher\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree-item\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree-item\"),\n    self.loadTemplate(\"render-polymorphicLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-polymorphicLauncher-confirm\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-confirm\"),\n    self.loadTemplate(\"readonly\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.readonly\")),\n    self.loadTemplate(\"list-multiselect\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.multiSelect\") + \"#ui-bz-mobile-multiselect-control\"),\n    self.loadTemplate(\"list-multiselect-tag\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.multiSelect\") + \"#ui-bz-mobile-multiselect-tag\"),\n    self.loadTemplate(\"list-multiselect-tags\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.multiSelect\") + \"#bz-list-multiselect-tags\"),\n    self.loadTemplate(\"list-multiselect-view-more\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.multiSelect\") + \"#ui-bz-mobile-multiselect-view-more\"),\n    self.loadTemplate(\"multiselectModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.multiSelect\") + \"#ui-bz-wp-popup-multiselect-control\"),\n\n\n    // Slide View\n    self.loadTemplate(\"render-slide-view\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.slide.view\")),\n    self.loadTemplate(\"render-slide-view-item\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.slide.view.item\")),\n\n    //Renders Layouts\n    self.loadTemplate(\"layout-image\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.image\") + \"#ui-bizagi-render-layout-image\"),\n    self.loadTemplate(\"layout-image64\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.image\") + \"#ui-bizagi-render-layout-image64\"),\n    self.loadTemplate(\"layout-label\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.label\")),\n    self.loadTemplate(\"layout-link\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.link\")),\n    self.loadTemplate(\"layout-text\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.text\")),\n    self.loadTemplate(\"layout-date-time\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.dateTime\")),\n    self.loadTemplate(\"layout-money\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.money\")),\n    self.loadTemplate(\"layout-number\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.number\")),\n    self.loadTemplate(\"layout-upload\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.upload\")),\n\n    // Grid plugin stuff\n    self.loadTemplate(\"bizagi.grid.grid\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid\"),\n    self.loadTemplate(\"bizagi.grid.waiting\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-waiting\"),\n    self.loadTemplate(\"bizagi.grid.table\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-table\"),\n    self.loadTemplate(\"bizagi.grid.table.empty\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-table-empty\"),\n    self.loadTemplate(\"bizagi.grid.column\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-column\"),\n    self.loadTemplate(\"bizagi.grid.column.special\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-column-special\"),\n    self.loadTemplate(\"bizagi.grid.row\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-row\"),\n    self.loadTemplate(\"bizagi.grid.row.buttons\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-row-buttons\"),\n    self.loadTemplate(\"bizagi.grid.cell\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-cell\"),\n    self.loadTemplate(\"bizagi.grid.cell.special\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-cell-special\"),\n    self.loadTemplate(\"bizagi.grid.pager\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-pager\"),\n    self.loadTemplate(\"bizagi.grid.buttons\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-buttons\"),\n    self.loadTemplate(\"bizagi.grid.dynamicpager\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-dynamic-pager\"),\n    self.loadTemplate(\"bizagi.grid.totalizer\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-totalizer\"),\n\n    // Grid Offline\n    self.loadTemplate(\"bizagi.grid.buttons.offline\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-buttons-offline\"),\n    self.loadTemplate(\"bizagi.grid.row.buttons.offline\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-row-buttons-offline\")).\n    done(function () {\n      var tmplIcons = self.getTemplate(\"icons\");\n      var svgStoreCounter = $(\"head\").find('#genome-forms-icons').length;\n\n      if (svgStoreCounter === 0) {\n        $(\"head\").append(tmplIcons);\n      }\n      // Resolve when all templates are loaded\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Load javascripts after render has been rendered\r\n      */\n  loadOverrides: function loadOverrides() {\n    // Load custom javascript overrides\n    if (bizagi.enableCustomizations) {\n      return bizagi.util.loadFile({\n        src: bizagi.getJavaScript(\"bizagi.workportal.tablet.overrides\"),\n        type: \"js\" });\n\n    }\n\n    return;\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getRender: function getRender(params) {\n    var self = this;\n    var type = params.type;\n    var data = params.data;\n\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ container: params.parent });\n\n    if (type === \"grid\") {\n      // Review the offline status or context \n      if (bizagi.util.isTabletDevice()) {\n        if (isOfflineForm) {\n          return new bizagi.rendering.grid.offline(renderParams);\n        } else {\n          return new bizagi.rendering.grid(renderParams);\n        }\n      } else {\n        return new bizagi.rendering.grid(renderParams);\n      }\n    }\n\n    if (type === \"upload\") {\n      // Review the offline status or context  \n      if (bizagi.util.isTabletDevice()) {\n        if (isOfflineForm) {\n          return new bizagi.rendering.upload.offline(renderParams);\n        } else {\n          return new bizagi.rendering.upload(renderParams);\n        }\n      } else {\n        return new bizagi.rendering.upload(renderParams);\n      }\n    }\n\n    if (type === \"number\") {\n      var properties = data.properties;\n      if (properties && properties.dataType === 29) {\n        return new bizagi.rendering.numberScientificNotation(renderParams);\n      }\n\n    }\n\n    // Call base\n    return self._super(params);\n  },\n  /**\r\n      * Returns the appropiate column based on the render type\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getColumn: function getColumn(params) {\n    var self = this;\n    var type = params.type;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type === \"columnNumber\") {\n      var data = params.data;\n      var properties = data.properties;\n\n      if (properties && properties.dataType === 29) {\n        columnParams.decorated = bizagi.rendering.numberScientificNotation;\n        return new bizagi.rendering.columns.numberScientificNotation(columnParams);\n      }\n    }\n\n    // Call base\n    return self._super(params);\n  } });","/*\r\n*   Name: Bizagi Device Render Factory\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will detect the current device and then will load the appropriate factory on demand\r\n*/\n\n$.Class.extend(\"bizagi.rendering.device.factory\", {}, {\n\n  /**\r\n                                                         * Constructor, detects the device\r\n                                                         * @param params\r\n                                                         */\n  init: function init(params) {\n    this.execution_device = bizagi.util.detectDevice();\n    this.cachedFactory = {};\n  },\n\n  /**\r\n      * Returns the appropriate render factory based on the device detection\r\n      * Because it loads the scripts on demand it must return a promise\r\n      * @param dataService\r\n      * @param device\r\n      * @returns {*}\r\n      */\n  getRenderFactory: function getRenderFactory(dataService, device) {\n    var self = this;\n    device = device || \"desktop\";\n    var defer = new $.Deferred();\n\n    if (typeof self.cachedFactory[device] !== \"undefined\") {\n      // Reset print version value\n      self.cachedFactory[device].printVersion = false;\n      // Resolve with cached factory                \n      defer.resolve(self.cachedFactory[device]);\n    } else {\n      // If factory is not cached then build it\n      if (device === \"print\") {\n\n        // Load print version references\n        self.cachedFactory[device] = new bizagi.rendering.print.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (device === \"desktop\") {\n\n        // Load desktop references\n        self.cachedFactory[device] = new bizagi.rendering.desktop.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (bizagi.util.isTabletDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.tablet.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else if (bizagi.util.isSmartphoneDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.smartphone.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else {\n        // if no device suuported\n        bizagi.showMessageBox(\"Not supported device: \" + device);\n        defer.reject(\"Not supported device: \" + device);\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns the current data service being used\r\n      * @returns {*}\r\n      */\n  getDataService: function getDataService() {\n    return this.dataService;\n  } });"]}