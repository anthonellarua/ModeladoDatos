{"version":3,"sources":["jquery/common/bizagi/js/bizagi.util.js","jquery/common/bizagi/js/services/bizagi.template.services.service.kendo.js","jquery/mashup/js/services/bizagi.mashup.services.ajax.js","jquery/mashup/js/services/bizagi.mashup.services.ajax.autologin.js","jquery/workportalflat/common/services/bizagi.workportal.services.endPoints.js","jquery/workportalflat/common/services/bizagi.workportal.services.service.js","jquery/workportalflat/common/services/bizagi.workportal.services.routing.js","jquery/common/bizagi.resize/js/bizagi.resize.js","jquery/workportalflat/common/services/bizagi.workportal.services.context.js","jquery/mashup/js/bizagi.mashup.facade.js","jquery/mashup/js/services/authentication/bizagi.mashup.authentication.js","jquery/mashup/js/services/authentication/bizagi.mashup.authentication.basic.js","jquery/mashup/js/services/authentication/bizagi.mashup.authentication.bizagi.js","jquery/mashup/js/services/authentication/bizagi.mashup.authentication.oauth.js","jquery/mashup/js/bizagi.mashup.device.factory.js","jquery/mashup/js/tablet/bizagi.mashup.tablet.facade.js","jquery/mashup/js/controllers/bizagi.mashup.controllers.controller.js","jquery/mashup/js/controllers/action/bizagi.mashup.action.routing.js","jquery/mashup/js/controllers/base/bizagi.mashup.controllers.main.js","jquery/mashup/js/controllers/base/dialog/bizagi.mashup.controllers.dialog.js","jquery/mashup/js/controllers/base/render/bizagi.mashup.controllers.render.navigation.js","jquery/mashup/js/controllers/base/render/bizagi.mashup.controllers.render.routing.js","jquery/mashup/js/controllers/base/render/bizagi.mashup.controllers.render.async.js","jquery/mashup/js/controllers/base/render/bizagi.mashup.controllers.render.js","jquery/mashup/js/controllers/base/caseSummary/bizagi.mashup.controllers.caseSummary.js","jquery/mashup/js/controllers/base/newCase/bizagi.mashup.controllers.newCase.js","jquery/mashup/js/controllers/base/startForm/bizagi.mashup.controllers.startForm.js","jquery/mashup/js/controllers/base/entityTemplates/bizagi.mashup.controllers.entityTemplates.js","jquery/mashup/js/controllers/tablet/render/bizagi.mashup.controllers.tablet.render.js","jquery/mashup/js/controllers/tablet/caseSummary/bizagi.mashup.controllers.tablet.caseSummary.js","jquery/mashup/js/controllers/tablet/startForm/bizagi.mashup.controllers.tablet.startForm.js","jquery/mashup/js/controllers/tablet/entityTemplates/bizagi.mashup.controllers.tablet.entityTemplates.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","$","Class","extend","customTemplateFile","bizagi","loader","getResource","detectDevice","cachedFiles","cachedTemplates","customTemplates","init","localization","this","cssRegex","loadingFileDeferred","loadCustomTemplates","self","defer","Deferred","when","getTemplateFile","done","response","temp","html","responseParts","each","i","responsePart","attr","resolve","promise","getTemplate","template","id","isCustomTemplate","replace","enableCustomizations","hash","getHash","environment","internalGetTemplate","pipe","resolvedTemplate","getTemplateForRelease","getTemplateWidget","then","getTemplateWebpart","url","containsHash","getUrlWithoutHashes","processAndReturnTemplate","loadTemplateFileForRelease","ajax","dataType","ready","index","valueTemplate","translatedTemplate","reject","JSON","parse","hasOwnProperty","translate","cachedTemplate","getTemplatePart","templateUrl","loadingTemplatePartExecution","loadingTemplatePart","BIZAGI_ENVIRONMENT","length","console","warn","matches","match","cssFile","loadFile","src","type","outerHTML","indexOf","substring","override","enableMSF","jQuery","fn","fastEmpty","kendoTmplEmpty","fasttmpl","tmpl","data","kendoTmpl","cacheTemplate","cacheKendoTemplate","children","remove","element","hasClass","loadingMessage","kendo","useWithBlock","tempTmpl","trim","kendoTmpls","templates","services","service","util","context","smartphone","tablet","DEVICES","printf","msg","arg","args","Array","slice","call","arguments","a","val","undefined","shift","charCodeAt","Math","round","String","bizagiQueue","async","sync","queue","add","callback","push","callbacks","addParallel","execute","starter","queueLength","apply","map","deferred","fail","deviceEnum","callInside","fx","tagName","toLowerCase","contentWindow","e","browser","msie","execScript","toString","webkit","mozilla","eval","callInsidePopup","document","CSSStyleDeclaration","getPropertyValue","getAttribute","setProperty","styleName","value","priority","setAttribute","rule","RegExp","escape","cssText","removeProperty","removeAttribute","getPropertyPriority","test","text","style","get","nl2br","br2nl","controlValueIsChanged","control","properties","getValue","compareValue","originalValue","result","forceCollectData","state","includes","parseBoolean","Date","getTime","getMaxZindex","elm","maxZindex","key","zindex","parseInt","css","equalizeHeights","selector","heights","outerHeight","max","autoSave","deferredSave","trigger","_data","anonymizedUserInformation","name","username","email","domain","picture","isAnonymized","datepickerResource","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","dateFormat","firstDay","isRTL","showMonthAfterYear","yearSuffix","liveProcessesEvents","newLiveProcess","createEvent","initEvent","routeEvents","route","saveEvent","lastWidget","nextWidget","liveSave","widgetName","deferredLiveSave","indeX","find","location","href","workportal","widgets","widget","BIZAGI_WORKPORTAL_WIDGET_PROFLY","saveLivePromise","dispatchEvent","md5","message","CryptoJS","s","p","m","l","lib","n","r","Base","b","h","mixIn","$super","create","clone","q","WordArray","words","sigBytes","t","stringify","concat","j","clamp","g","ceil","random","v","enc","Hex","k","join","substr","Latin1","fromCharCode","u","Utf8","decodeURIComponent","Error","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_nDataBytes","_append","_process","blockSize","_minBufferSize","min","_doProcessBlock","splice","Hasher","cfg","_doReset","update","finalize","_doFinalize","_createHelper","_createHmacHelper","HMAC","algo","abs","sin","MD5","_hash","w","x","y","z","A","B","C","D","c","d","f","floor","HmacMD5","multiReplace","mapDataToReplace","reg","replaceAll","pcFrom","pcTo","replaceAllGlobalRegExp","re","capitalize","charAt","toUpperCase","startsWith","str","getInitials","initials","split","sign","isNaN","encode","measureString","string","fontSize","appendTo","width","detach","endsWith","suffix","isIE7","isIE","documentMode","isIE8","isIE9","isIE10","isIE11","navigator","userAgent","isIE11OrLower","isIE10OrLower","isEdge","appName","objectValues","array","Object","keys","itm","values","getIEVersion","sAgent","window","indexMSIE","version","isChrome","vendor","isFirefox","minVersion","ua","M","tem","exec","appVersion","getBrowser","bw","emptyNavigatorInfo","info","addClass","language","setIphoneXOverrides","isNativePluginSupported","bizagiapp","isIphoneX","append","isiOSDevice","isString","isObject","isArray","isNull","isBoolean","getInternetExplorerVersion","Number","isNumeric","parseFloat","isFinite","isGUID","mustImplement","notImplementedMethod","log","exe","encodeXpath","xpath","isEmpty","isEmptyObject","isEmptyCombo","object","property","other","decodeURI","infinityControl","finishDecoded","decodedValue","hasNonVisibleChars","ch","percent2Number","isObjectEmpty","isMapEmpty","replaceSelector","container","elementToReplace","unwrap","hasScroll","el","direction","identicalObjects","obj1","obj2","countProps","count","isScrolledIntoView","elem","layout","scrollTop","elemTop","offset","top","height","centerElementIntoScroll","actualScroll","elementTop","elementHeight","newTop","encodeHtml","decodeHtmlEntities","getHashParams","params","initWebpart","webpart","device","initialized","initializing","loadingDeferred","getQueryString","pairs","pos","argname","extendQueryString","additionalParams","plainUrl","existingParams","newParams","param","getStackTrace","callstack","isCallstackPopulated","dont","exist","stack","len","lines","opera","entry","currentFunction","callee","caller","fname","highLightElement","setTimeout","removeClass","autoScrollBottom","elScrollHeight","scrollHeight","autoScrollInterval","autoScroll","itemScroll","limitTop","limitBottom","idInterval","outSide","clearInterval","mousemove","event","pageY","autoScrollTopInterval","autoScrollBottomInterval","classCSS","setInterval","valueMaxScrollBottom","innerHeight","removeAutoScroll","unbind","getMaxZIndex","zIndex","showPopup","callbackFn","left","newWindow","open","BAPopupWindow","BAPopupCallback","BACloseWindow","controls","submitForm","close","showQuirksModePopup","quirksModePage","BIZAGI_PATH_TO_BASE","BAQuirksPopupWindow","title","windowParams","popupWindow","quirksOnLoad","loadedBody","iframe","show","afterLoad","userParams","callbackParams","loadingFunction","body","resolveResult","createPopup","popupName","onClose","popupTitle","handleClose","overlay","popup","closeButton","popupContent","hide","additionalClass","center","closeHandler","click","fullPopup","content","createOkCancelPopup","onOk","onCancel","buttonsContainer","buttonOk","buttonCancel","okHandler","cancelHandler","ok","cancel","dialog","modal","buttons","closeQuirksModePopup","quirksPopup","getStyle","pathName","getFontFace","getAllChildrens","matchStyles","stringCss","awesomeBrowser","file","styleSheets","rules","cssRules","cssTextOriginal","selectorText","lastLevel","styleSheet","suckBrowser","cookie","options","expires","days","setDate","getDate","raw","toUTCString","path","secure","decode","randomNumber","setContext","reloadCSS","queryString","_name","_call","_params","_singleton","singleton","_timeOut","timeout","_maxIterations","iterations","_context","_killWhenExitContext","killWhenExitContext","timeOut","maxIterations","itsRunning","timeInit","executeTimeOut","now","actualIterations","ieFunction","clearTimeout","pointer","timeOutRunning","isDate","dateField","timeField","resultDate","hasTime","resultTime","arrayDate","unicode2htmlencode","input","htmlHex","getHeadElement","hd","getElementsByTagName","docEl","documentElement","createElement","insertBefore","firstChild","loadStyle","styleText","layoutGuid","node","getElementById","createTextNode","childNodes","nodeValue","replaceChild","appendChild","loadIconStyle","icon","userfieldname","innerHTML","formatDecimalAndMoneyCell","tableData","externalMoneyFormat","moneyFormat","decimalFormat","externalDecimalFormat","decimalSymbol","decimalSeparator","digitGroupSymbol","groupSeparator","roundToDecimalPlace","decimalDigits","symbol","colorize","groupDigits","negativeFormat","positiveFormat","columnTitle","rows","fields","formatMoney","numberValue","formatDecimal","removeTrailingZeros","positive","BIZAGI_DEFAULT_CURRENCY_INFO","formatBoolean","formatInvariantBoolean","htmlContent","not","$element","format","formatCurrency","formatMonetaryCells","tmpResult","intSection","decimalSection","decimalResult","isNegative","decimalDigitPosition","fixDecimalDigits","getOnlyNumbersByString","stringValue","toFixed","formatInvariantMoney","defaultFormat","allowDecimals","formatInvariantNumber","numberFormat","thousands","containsLetter","NaN","formatNumber","percentage","formatInvariantDate","dateTimeFormat","isValidDate","getFormatDate","formatDate","dateFormatter","formatDateFromInvariantStringDate","stringInvariantDate","dateValue","defaultFormatDate","H","getHours","getMinutes","getSeconds","ms","getMilliseconds","hideTimeWhenHourMinutesSecondsAreZero","formatValueByDataType","replaceLineBreak","formatMonetaryCell","formatDecimalCell","parseDate","valueOf","LZ","getDateFromFormat","getRelativeTime","date","onlyUnitsTime","timeZone","moment","tz","currentUser","timeZoneName","time","diff","timeDiff","getTimeDiffDescription","unit","timeDivisor","unitAmount","resourceAgo","compareDates","date1","dateformat1","date2","dateformat2","d1","d2","getDifferenceBetweenDates","i18n","token","i_format","getFullYear","getMonth","E","getDay","isValidResource","months","i_val","year","getYear","month","hh","mm","ss","ampm","_getInt","month_name","day_name","ff","_isInteger","_val","minlength","maxlength","_token","preferEuro","generalFormats","monthFirst","dateFirst","checkList","analyzeTimeFormat","timeFormat","returnObj","show24Hours","showSeconds","separator","lastToken","getDateFromInvariant","showTime","INVARIANT_FORMAT","setHours","formatInvariant","getDateFromISO","ISO_FORMAT","formatISO","formatISO8601","dateObject","restartTimeToMidnight","isFormatISO8601","stringDate","sleep","delay","start","getDateFormatByDatePickerJqueryUI","sleepUntil","def","internalSleepUntil","sleepFor","browserSupportLocalStorage","setItemLocalStorage","localStorage","setItem","getItemLocalStorage","getItem","removeItemLocalStorage","removeItem","clearLocalStorage","clear","bizagiConfig","showConsoleLog","startLoading","stopLoading","elementToapply","isEventSupported","eventName","isSupported","needsFallback","circularDependencies","Function","list","lastNodeAdded","addNode","OBJ","foundObjChildNode","_search","_addNode","nodeObj","timeStamp","addChild","resolved","seen","_getFirstNodeWithChilds","_resolve","_resetList","childs","hasObject","error","dependencyFrom","dependencyFromObj","dependencyTo","dependencyToObj","standardError","status","responseText","makeErrorMessage","multiactionError","toSearch","collection","cssExtended","instance","cssToAdd","cssExtendedApplyChanges","option","$this","attrToAdd","tmpStyle","arrProperties","resultProperties","cssProperty","canvas","parent","sortJSON","way","sort","shortNumber","number","newNumber","lenghtNumber","escapeHtml","div","formatMonetaryValue","formatDecimalValue","formatDateValue","showNotification","div_sync","fadeIn","stop","fadeOut","isModeOnline","isOfflineForm","dispose","arrayEach","getStandardNotation","tmp","decimalNumber","exponentialNumber","scientificNotationFormat","sdLimit","expMinLimit","expMaxLimit","sNregex","sNFormat","exp","prefix","originalPointIndex","tempParts","significantDigits","intPart","from","to","significantFlag","firstDigit","restDigits","stripslashes","isHTMLValidText","resetData","sessionStorage","isAuthenticate","changeData","isMobileDevice","isNativeMobileDevice","isTabletDevice","isAndroidTabletDevice","isiOSTabletDevice","isSmartphoneDevice","isAndroidSmartphoneDevice","isiOSSmartphoneDevice","formContainer","getFormContainer","formParams","getParams","detectAndroidVersion","indexAndroid","androidVersion","getPathUrl","solvedUrl","locationParts","pathname","basePath","protocol","host","pathToBaseBackwards","getAndroidVersion","mobileImagePath","image","dataImage","photoSplit","resource","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","byteNumbers","byteArray","Uint8Array","Blob","stringToByteArray","hasOfflineFormsEnabled","BIZAGI_ENABLE_OFFLINE_FORMS","isFlatDesignEnabled","BIZAGI_ENABLE_FLAT","isMobileGridEnabled","BIZAGI_ENABLE_MOBILE_GRID","isNativeHeaderEnabled","NATIVE_HEADER_ENABLE","isQuickSearchEnabled","BIZAGI_ENABLE_QUICK_SEARCH","isOAuth2Enabled","BIZAGI_AUTH_TYPE","getNativeComponent","BIZAGI_NATIVE_COMPONENT","isVersionSupported","supported","BIZAGI_SERVER_VERSION","isCordovaSupported","cordova","isTabletNativeSupported","isSmartphoneNativeSupported","plugins","Keyboard","hideKeyboardAccessoryBar","detectRealDevice","settedDevice","BIZAGI_DEFAULT_DEVICE","isAndroid","isAndroidDevice","getChannelType","BIZAGI_SERVER_CHANNEL","channel","isDataUrl","getDataUrl","currentUrl","tempUrl","processFailMessage","getErrorFormatted","code","statusText","errorCode","errorType","tmp_block_header","disableWorkPortalMenu","blockHeight","prependTo","position","background","opacity","z-index","enableWorkPortalMenu","enableMenuSection","idMenu","controllers","menu","setActiveSection","getURLWithASlashAtTheEnd","downloadFile","isCompleteUrl","showModalOnFail","_defer","_showModalOnFail","_urlDownload","applicationUrl","_iframeExists","_onCantDownload","that","defaultMessage","tryCatch","contentDocument","isMaintenanceWindow","jsonResponse","showModal","maintenanceWindows","modalError","_reject","onload","downloadFileByPOST","inputValues","formPOST","contents","showErrorAlertDialog","submit","executeActionRoutingFromWorkportal","idCase","idWorkItem","publish","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","getMessageFromNetworkState","sanitizeHTML","sanified","DOMPurify","sanitize","arrayUnique","items","debounce","func","wait","immediate","later","callNow","debounce2","fire","isNativeImageEditorSupported","enableImageEditor","errorMessage","validateUrlWellFormed","urlWithProtocol","nodeWithUrl","cleanNodeWithUrl","IN_PLACE","urlWithoutSpaces","encodeHtmlText","valueToDisplay","decodedDisplayValue","encodeString","setCaretPosition","ctrl","setSelectionRange","focus","createTextRange","range","collapse","moveEnd","moveStart","select","getCaretPosition","oField","iCaretPos","selection","oSel","createRange","selectionStart","escapeRegex","getFeatureObject","arr","featureObjectCache","features","getConfigFeatures","pivot","getFeatureObjectIte","bizagiConfiguration","BIZAGI_MOBILE_FEATURES","resetConfigFeatures","isFailResponse","formatItem","performTermMatches","strValue","term","withoutFormat","highlightMatches","regEx","getDesktopResolution","resolution","devicePixelRatio","screenWidth","screen","screenHeight","deviceXDPI","logicalXDPI","getDeviceCode","BIZAGI_DEVICE_MARKET_NAME","normalizeType","normalizeQueryType","hideOrShowXToCloseDialog","isEnableFeature","feature","isHtml","possibleHtml","_try","_catch","listFunctions","_listFunctions","next","end","variable","reduce","newVar","prop","getComputedStyle","scroll","overflow","scrollerParent","HTMLElement","SVGElement","ps","parents","parentNode","scrollingElement","startkendo","kendoMobileApplication","mobile","Application","skin","browserHistory","ui","progress","started","bizagiNavigate","navigate","isMashupContext","BIZAGI_MASHUP_CONTEXT","isSharepointContext","BIZAGI_SHAREPOINT_CONTEXT","isWebpartContext","isWebpart","startTimeline","showTimeLine","startGraphicquery","showGraphicQuery","startSelectUser","showSelectUser","userId","userName","guid","isEmptyValue","initializeReferrerParams","referrerParams","getLPQueriesParameters","sidebarData","getLPQueriesSelectedItemFromTree","selectedTreeItem","setLPQueriesParameters","parametersSidebar","tree","cleanLPQueriesParameters","setLPQueriesReferrer","referrer","isConnected","connection","Connection","NONE","onLine","isRenderingUrlAllowed","request","endPoint","whiteList","pattern","applyEyeFunction","setShowIcon","after","addEvent","setHideIcon","direct","className","ev","accessibilityEnter","cb","extraEvent","bind","preventDefault","stopPropagation","which","recreateNativeButtons","navigation","setNavigationButtons","isOverrideFeatureEnabled","featureName","createDynamicClass","nameClass","renderParams","dynamicFunction","languages","es","es-ES","es-AR","es-BO","es-Cl","es-CO","es-CR","es-DO","es-EC","es-SV","es-GT","es-HN","es-MX","es-NI","es-PA","es-PY","es-PR","es-PE","es-US","es-UY","es-VE","en","en-AU","en-BZ","en-CA","en-029","en-IN","en-IE","en-JM","en-MY","en-NZ","en-PH","en-SG","en-ZA","en-TT","en-GB","en-US","en-ZW","de","de-AT","de-DE","de-LI","de-LU","de-CH","fr","fr-BE","fr-CA","fr-LU","fr-MC","fr-CH","fr-FR","it","it-IT","it-CH","ja","ja-JA","ja-JP","nl","nl-NL","nl-BE","pt","pt-BR","pt-PT","ru","ru-RU","cs","cs-CZ","ar","ar-DZ","ar-BH","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LB","ar-LY","ar-MA","ar-OM","ar-QA","ar-SA","ar-SY","ar-TN","ar-AE","ar-YE","zh","zh-HK","zh-MO","zh-CN","zh-Hans","zh-SG","zh-TW","zh-Hant","getNormalizedDate","fullFormat","dateTime","setMilliseconds","isFeatureEnabled","getLastProcessInboxKey","lastProcessInboxKey","getUserHash","lastProcessInboxInit","getLastProcessInboxCreate","processInfo","createLastProcessInboxProcess","sortInfo","createLastProcessInboxSort","filterInfo","createLastProcessInboxFilter","processColumnsInfo","createLastProcessInboxColumns","inputTrayInfo","createLastProcessInboxInputTray","processInfoName","idWorkflow","sortDirection","sortFieldName","sortOrder","filterValue","filterFieldName","filterType","processColumns","getLastProcessInbox","lastProcessInbox","setLastProcessInbox","smartInboxId","setLastProcessInboxProcessColumns","getLiveFiltersFromStorage","filters","modelStorage","serialize","setLiveFiltersToStorage","assign","setLastProcessInboxLiveFilter","liveFilters","setLastProcessInboxSort","setLastProcessInboxFilter","setLastProcessInboxInputTray","inputTray","getLastProcessInboxProcessInfo","allProcesses","getLastProcessInboxSmartInboxId","getLastProcessInboxSort","getLastProcessInboxFilter","getLastProcessInboxLiveFilter","getLastProcessInboxProcessColumns","getLastProcessInboxInputTray","removeLastProcessInbox","removeLastProcessInboxSort","removeLastProcessLiveFilters","getSyncTimeStampKey","syncTimeStampKey","storeSyncTimeStamp","currentDate","getSyncTimeStamp","syncTimeStamp","BIZAGI_USER","BIZAGI_PROXY_PREFIX","BIZAGI_DOMAIN","hashCode","defaultWidget","newValueStr","_preferService","preferences","_widgets","_mobile","set","newVal","_desktop","_newValueView","changePreference","INBOX_VIEW_TYPE","_actualValue","getPreference","BIZAGI_WORKPORTAL_WIDGET_INBOX","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","_device","isMobile","getMobileFeaturesKey","userKey","mobileFeaturesKey","getMobileFeatures","stringFeatures","storeMobileFeatures","mobileFeatures","storedFeatures","updatedFeatures","getCardviewMaxColumsAllowed","maxColumns","maxColumnsEnabled","enabled","blobTob64","blob","onlyData","reader","FileReader","readAsDataURL","onloadend","base64data","blobToText","readAsText","binaryData","newUrl","deepExtend","out","getColumnType","originalType","mapAlignClassName","align","rigth","justify","default","isMobileErrorTracesEnabled","mobileErrorTracesEnabled","mobileErrorTraces","isMobileSmartInboxEnabled","mobileSmartInboxEnabled","mobileSmartInbox","isMobileLiveFiltersEnabled","mobileLiveFiltersEnabled","mobileLiveFilters","any","grep","first","groupBy","item","downloadBlobFile","blobFile","fileName","msSaveOrOpenBlob","URL","createObjectURL","link","download","revokeObjectURL","removeChild","handleJSONResponse","jsonFile","err","bzValidator","validators","errors","callbackValidator","validate","callbackResponse","forEach","validator","isValid","assert","useAbsolutePath","BIZAGI_USE_ABSOLUTE_PATH","pathToBase","getLocationPrefix","loginPage","errorPage","rpcEnabled","rpcHandler","logEnabled","logSuccess","logSubmits","logFail","batch","batchCount","batchTimer","batchTimeoutInstance","parseJSON","ex","ajaxSetup","converters","text json","beforeSend","jqXHR","settings","batchRequest","_loading","loading","complete","responseJSON","validationMethod","redirectToLoginPage","startPageMaintenance","jqAutoLogin","user","intercept","refreshing","buffer","currentRequests","_resetOptions","_setupInterceptor","_resetData","logout","_deactivateInterceptor","_fireEvent","login","setUserData","_activateInterceptor","password","_addToBuffer","_clearBuffer","_fireBuffer","promises","refreshRetry","_setRefreshingFlag","eventType","_hasEvent","events","bufferInterval","bufferWaitLimit","newFlag","ajaxPrefilter","originalOptions","jqxhr","always","inArray","waited","interval","rejectWith","_defineProperty","defineProperty","enumerable","configurable","writable","endPoints","getEndPoints","_endPoints","user-handler","proxyPrefix","process-handler","query-handler","case-handler","query-form","query-form-edit","query-form-delete","query-form-delete-cube","favorites-handler","file-handler","login-handler","login-handlerv10","logoff-handler","logoff-handlerv1","authorization-handler-getMenuAuthorization","authorization-handler-isCaseCreationAuthorized","case-handler-getCaseSummary","case-handler-releaseActivity","case-handler-getCasesList","case-handler-getActivityList","offline-getProcessTree","offline-tasks","offline-getForms","offline-sendForm","case-handler-getCaseTasks","case-handler-getCaseEvents","case-handler-getCaseSubprocesses","case-handler-getTaskAssignees","case-handler-getCaseAssignees","case-handler-getWorkItems","case-handler-getAsynchExecutionState","case-handler-addNewCase","case-handler-startProcess","handler-execute-action-start","case-handler-supportedLogTypes","case-handler-getActivityLog","case-handler-getActivityDetailLog","case-handler-getEntityLog","case-handler-getEntityDetailLog","case-handler-getUserLog","case-handler-getUserDetailLog","case-handler-getAdminLog","case-handler-getCaseFormsRenderVersion","case-handler-validateHasStartForm","favorites-handler-saveFavorite","favorites-handler-deleteFavorite","process-getIcon","collections-getIcon","bamAnalytics-handler-getAnalisysQueries","bamAnalytics-handler-updateQuery","inbox-handler-getInboxSummary","inbox-handler-getFullInboxSummary","MessageHandler-NewComment","MessageHandler-GetComments","MessageHandler-SetCategoryToComment","MessageHandler-RemoveComment","MessageHandler-ReplyComment","MessageHandler-RemoveReply","MessageHandler-GetCategoryColors","MessageHandler-RenameCategoryColor","MessageHandler-CountNewComments","process-handler-getAllProcesses","process-handler-getFavourites","process-handler-getFavouriteCases","process-handler-getCustomizedColumnsData","process-handler-getCategory","process-handler-getRecentProcesses","process-handler-getCustomizedColumnsDataInfo","process-handler-getOrganizations","process-handler-getOrganizationsByUser","smartinbox-entity-values","smartinbox-getAllInbox","smartinbox-user-tasks","smartinbox-user-tasks-process","process-handler-getMyStuff","process-handler-getIdCasesOfProcessEntities","templates-handler-getCollectionData","data-navigation-handler-collection","data-navigation-handler-entity","data-navigation-handler-entity-filters","action-handler-getProcessAddAction","my-search-getSearchLists","my-search-getFilters","my-search-getFiltersData","my-search-getData","templates-handler-getVirtualCollectionData","templates-handler-getMultipleActions","process-handler-getMapping","process-handler-getForm","process-handler-startform","process-handler-rule","process-action-execute","process-handler-getActivitiesData","process-handler-getPendingsData","entities-handler-getActions","entities-handler-getUsersAndEvents","entities-handler-getUsers","entities-handler-getEvents","entities-handler-getUsersImages","entities-handler-getShotCuts","query-handler-getqueries","query-handler-getQueryForm","user-handler-getCurrentUser","old-render","Reports","reports-handler-deleteQueries","folders-handler-getUserQueries","folders-associate-deleteSmartFolder","folders-handler","folders-associate","smartfolders-integration","AlarmAdmin","AnalyticsProcess","AnalyticsSensor","AnalyticsTask","AsynchronousWorkitemRetries","AuthenticationLogQuery","BAMProcess","BAMTask","BusinessPolicies","CaseAdmin","adminReassignCases","asyncECMUpload","CasesMonitor","Closed","CurrentUser","EncryptionAdmin","MobileUpdatesAdmin","EntityAdmin","LocationResources","NewCase","Pending","Profiles","Search","UserAdmin","UserDefaultAssignation","UserPendingRequests","ListPreferences","UserPreferencesUrl","GRDimensionAdmin","Licenses","AnalysisQueries","DocumentTemplates","ProcessAdmin","ResourceBAM","WorkPortalVersion","entities-administration","theme-handler-getLogoImagePath","logoutDotNet","authenticationConfig","logout-oauth2","FederateLogoffUrl","oauth2AuthenticationConfig","massive-activity-assignments-getOrganizationInfo","massive-activity-assignments-getCasesByOrganization","massive-activity-assignments-reassignCases","massive-activity-assignments-searchUsers","async-ecm-upload-baseService","domains","getCurrentTheme","admin-getAuthenticationLog","admin-getAuthenticationDomains","admin-getAuthenticationEventsTypes","admin-getAuthenticationEventSubTypes","admin-EncryptString","admin-UserPendingRequests","admin-UserAuthenticationInfo","admin-updateUserAuthenticationInfo","admin-generateRandomPassword","admin-GenerateDataToSendByEmail","admin-sendEmail","admin-getApplicationList","admin-getApplicationProcesses","admin-getProcessVersion","admin-getProcessTasks","admin-getTaskAlarms","admin-getLapseMode","admin-getRecurrMode","admin-getScheduleType","admin-getBossList","admin-addAlarm","admin-editAlarm","admin-deleteAlarm","admin-alarmRecipients","admin-deleteAlarmRecipients","admin-recipientToAlarm","admin-enableAlarm","admin-getCategoriesList","admin-getCasesList","admin-abortItems","admin-reassignItems","admin-getDefaultAssignationUserToAllProcess","admin-getDefaultAssignationUserToProcess","admin-setDefaultAssignationUserToProcess","admin-getProfilesTypes","admin-searchProfiles","admin-getUsersByProfile","admin-removeUserFromProfile","admin-addUserToProfile","admin-async-activities-get-activities","admin-async-activities-get-retry-now","admin-async-activities-get-activities-by-task","admin-async-activities-enable-execution","admin-async-activities-enable-multiple","admin-async-activities-async-execution","admin-async-activities-async-execution-log","admin-Licenses","admin-GetDimensions","admin-EditDimension","admin-CreateAdministrableDimension","admin-DeleteDimension","admin-EntityPathChildNodesAction","admin-GetActiveWFClasses","admin-document-templates-storeDocumentTemplates","admin-document-templates-restoreDocumentTemplates","admin-document-templates-uploadDocumentTemplate","admin-processes-workflowClasses","admin-processes-tasksByWorkflow","admin-processes-modifyProcessDuration","admin-processes-modifyTaskDuration","admin-language-resource","admin-language-languages","bam-resourcemonitor-myteam","reports-analysisquery","reports-analysisquery-update","reports-analysisquery-delete","processviewer-processdefinition","processviewer-processgraphicinfo","mobile-getLastUpdate","discussion-case","discussion-case-v1","get-users","new-discussion","count-comments","comment-case","new-comment","new-comment-attach","get-list-files","get-list-files-v1","project-resource-action","thumbnail-file","get-attachment","get-mobile-attachment","project-files-upload","count-files","count-files-v1","remove-comment","time-schemas-effectiveduration","getUrl","setProxyPrefix","BA_CONTEXT_PARAMETER_PREFIX","ENTITIES_QUERY_PAGE_SIZE","normalizeUrl","RPproxyPrefix","sharepointProxyPrefix","serviceLocator","pageSize","deviceType","desktop","deviceCode","BIZAGI_INBOX_ROWS_PER_PAGE","activeForm","configureGlobalHandlers","getOverrides","overrides","valueUppercase","read","authenticatedUser","urlSend","BIZAGI_PASSWORD","logoutUser","logOffUser","getCurrentUser","getInboxSummary","getAllProcesses","taskState","onlyFavorites","myActivities","myPendings","smartfoldersParameters","skipAggrupate","includeAllProcessesItem","responseData","categories","allCases","category","isFavorite","guidFavorite","idworkflow","guidWFClass","workflows","workflow","getUserWorkportalPreferences","_userPreferences","getPreferencesWorkportalCurrentUser","userPreferences","getUserPreferences","preference","mobFeatures","localStoragePreferences","getLastProcessInboxWorkflow","validateFeatureSupport","isMobileInboxByProcessSupported","inputtray","mobileDevice","getAllSmartInbox","processesData","smartinboxes","idWorkFlowResult","_preferDefaultOpenInbox","defaultOpenInboxWorkflowId","_preferDefaultOpenSmartInbox","defaultOpenInboxSmartInboxId","_hasPreferDefaultOpenInbox","_hasPreferDefaultOpenSmartInbox","workflowFound","smartinboxFound","smartinbox","getFavourites","getMyStuff","getFavouriteCases","page","getCasesList","numberOfFields","idWfClass","elementToHtml","overdue","today","tomorrow","upcoming","totalPages","actualDate","actualMonth","actualDay","actualYear","lengthData","elements","counter","tmpElement","tmpdate","tmpDay","tmpMonth","tmpYear","getCasesListBeta","getMobileCasesList","adapterDataOfActivitiesToTemplate","getMobileActivities","resp","row","field","tempElement","headers","fieldName","displayName","serializeActivity","syncErrors","appendActivityElementSyncError","appendActivityRowsSyncError","currentPage","advanceSearch","urlMobile","radNumber","groupedData","statusFunction","defineActivityStateByTaskState","defineActivityStateByDate","taskstate","tmpEndDate","endDate","idworkitem","idwfclass","adapterServerResponseTemplateBindingObject","serverResponse","activityDate","group","shortEndDate","isEvent","dataChangeset","creatorFullName","caseSyncError","syncError","hasSyncError","idcase","syncerror","hassyncerror","getCurrentActivities","processActivitiesResponse","highlight","process_filter","processes","highlightedNumber","highlightsString","processname","active","expresion","getDiscussionCase","globalParent","editDiscussion","getUsersDiscussion","getEffectiveDuration","getUsersData","getSummaryCaseTaskOptions","idWorkitem","createNewDiscussion","createNewComment","updateProjectFile","createProjectFile","getFilesCount","getCommentCase","getCommentsByParent","getFilesList","deleteFile","destroy","getFilesThumbnail","getAttachment","guidAttachment","idAttachment","getMobileAttachment","getAllAdministrableEntities","kind","entities","getEntitiesList","getCasesByWorkflow","keyvalue","radnumber","cases","newFieldsValue","fieldsKey","fieldsValue","isRadNumber","Value","DisplayName","workitems","getOrganizationsList","getOrganizationsByUserList","getCustomizedColumnsData","orderFieldName","orderType","order","idTask","getCustomizedColumnsDataBeta","lstIdCases","noResults","getCategories","idCategory","idApp","groupByApp","getRecentProcesses","getCaseSummary","eventAsTasks","onlyUserWorkItems","serviceType","getCaseAssignees","getCaseTasks","getCaseEvents","getCaseSubprocesses","getCaseFormsRenderVersion","getCaseFormsRenderVersionDataContent","getTaskAssignees","getWorkitems","fromTask","fromWorkItemId","getQueries","hashQueries","idElement","processQueries","query","queries","idParent","nodes","createNewCase","caseData","idOrganization","validateHasStartForm","processId","startProcess","idProcess","entityMapping","mapping","idParentCase","oldParams","oldVersion","actionCreateCase","guidProcess","parentCaseId","getFirstParentPlan","searchCases","h_action","onlyUserCases","queryCases","filter","outputxpath","queryEntities","idEntity","getMenuAuthorization","isCaseCreationAuthorized","getAsynchExecutionState","idAsynchWorkitem","supportedLogTypes","getActivityLog","orden","idActualPage","getActivityDetailLog","idWorkItemFrom","getEntityLog","getEntityDetailLog","userFullName","attribDisplayName","getUserLog","getUserDetailLog","idUser","entDisplayName","getAdminLog","addFavorite","idObject","favoriteType","delFavorite","summaryAssigness","baseAssignees","assignees","assigneesLength","assigneesFix","showAssignees","activities","assigneesEvents","assigneesActivities","assigneesEventsList","assigneesActivitiesList","Name","summarySubProcess","subprocess","summaryCaseEvents","summaryCaseDetails","getCaseSummaryDataContent","currentState","dataCurrentStateLength","showEvents","countEvents","showParentProcess","parentProcess","parentDisplayName","isClosedForAllUsers","isClosed","isOpen","countAssigness","showSubProcess","countSubProcesses","showForm","hasGlobalForm","allowsReassign","currentStateTypes","assignToCurrentUser","showActivities","releaseActivity","summaryActivities","icoTaskState","process","createdBy","createdByName","createdByUserName","caseDescription","processPath","showWorkOnIt","getSmartFolders","idFolder","searchFolders","deleteSmartFolder","idSmartFolder","getFolders","folders","getCasesByFolder","cache","makeFolder","folderName","idParentFolder","updateFolder","associateCaseToFolder","idCustomFolder","dissasociateCaseFromFolder","deleteFolder","getFile","uploadId","entityId","entityKey","getComments","encodeURI","idColorCategory","pag","pagSize","comments","users","Id","Picture","makeNewComment","comment","makeNewReply","idComment","Replies","removeMobileComment","removeComment","removeReply","idReply","renameCommentCategory","colorName","setCommentCategory","getCommentsCategories","getNewComments","getAnalisysQueries","updateQueries","idQuery","queryName","queryDescription","deleteQueries","queryId","QueryId","getConfiguration","javaLogout","reload","logoutMobile","logoutData","sourceLogout","redirectErrorPage","authenticationType","logOffURL","federationLogoutBindingProtocol","authenticationSubType","res","federateLogoffUrl","write","nativeAjax","samlUrlRedirect","on","logoutUrl","callbackUrl","homeUrl","getOrganizationInfo","getCasesByOrganization","roles","skills","locations","reassignCases","searchUsers","fullName","getDomainList","getEcmAllScheduledJobs","retryECMPendingScheduledJob","getWorkPortalVersion","productBuild","getAuthenticationLogData","getAuthenticationLogResult","dtFrom","dtTo","eventSubType","encryptString","userPendingRequests","userAuthenticationInfo","updateUserAuthenticationInfo","enable","expired","locked","generateRandomPassword","generateDataToSendByEmail","sendEmail","emailTo","subject","getApplicationCategoriesList","filterStartEvent","getAdminCasesList","getApplicationProcesses","getProcessVersion","getProcessTasks","getTaskAlarms","getLapseMode","getRecurrMode","getScheduleType","getBossList","addAlarm","editAlarm","deleteAlarm","getAlarmRecipients","addRecipientToAlarm","deleteRecipientsFromAlarm","enableAlarm","abortReassignItems","asyncActivitiesServices","getDefaultAssignationUserToAllProcess","serviceAction","getDefaultAssignationUserToProcess","idWFClass","setDefaultAssignationUserToProcess","getProcessIcon","getCollectionIcon","collectionId","getProfilesTypes","searchProfiles","getUsersByProfile","removeUserFromProfile","addUserToProfile","licenses","getDimensions","editDimension","entityPath","description","createAdministrableDimension","deleteDimension","administrable","entityPathChildNodesAction","nodeType","idNode","nodeDisplayPath","nodePath","getActiveWFClasses","storeDocumentTemplates","restoreDocumentTemplates","Guid","getWorkFlowClasses","getTaskByWorkFlow","modifyProcessDuration","duration","modifyTaskDuration","getDataForMyTeam","getReporstAnalysisQuery","updateReportData","deleteReportData","getStoreLanguageTemplates","justActives","getLanguageTemplate","cultureName","processDefinition","graphicInfo","getLastUpdateByMobile","getCollectionData","idFact","getVirtualCollectionData","guidVirtualCollection","getSearchData","guidSearch","calculateFilters","serializeEntityData","getCollectionEntityData","templateType","referenceType","surrogateKey","defaultFilterApplied","reference","guidEntityCurrent","getFiltersEntityData","getProcessAddAction","getMultipleActions","getMapping","getForm","hasStartForm","executeAction","surrogatedKey","ruleId","actionRule","getActivitiesData","pagsize","getPendingsData","getActionsData","getUsersAndEvents","idCases","getUsers","caseId","getEvents","getUsersImages","userIds","square","getPreferencesCurrentUser","getShortCuts","getSearchLists","getIdCasesOfProcessEntities","ids","server","lessThanOrEqualsTo","getQueryForm","defineFilterObject","filterObject","rangeQuery","searchType","typeSearch","setValues","isDefaultFilter","defaultFilter","getPlan","getActivities","updatePlan","putExecutePlan","deletePlan","closePlan","getWorkitemsPlan","getTransitionsByPlan","editActivityPlan","activity","idPlan","getPlanByParent","getItemsByActivity","getPlanParent","serializedData","_buildNewObject","header","newObject","guidEntity","timestamp","columns","rowData","kRow","iCell","cells","kReturnObject","getCardViewCustomizedColumns","sortData","smartInboxGuid","liveFilterData","smartInboxFilter","encodeLiveFilter","ajaxParams","avoidLoader","includeSyncErrors","getInboxSyncErrors","localSyncErrors","serializeFilter","o","Base64","_map","_","S","EvpKDF","keySize","hasher","compute","Cipher","createEncryptor","_ENC_XFORM_MODE","createDecryptor","_DEC_XFORM_MODE","_xformMode","_key","ivSize","encrypt","decrypt","StreamCipher","mode","_iv","_prevBlock","BlockCipherMode","Encryptor","Decryptor","_cipher","processBlock","encryptBlock","decryptBlock","CBC","pad","Pkcs7","unpad","BlockCipher","padding","iv","_mode","CipherParams","formatter","OpenSSL","ciphertext","salt","SerializableCipher","algorithm","_parse","kdf","PasswordBasedCipher","AES","_nRounds","_keySchedule","_invKeySchedule","_doCryptBlock","encoded","allProcessItem","orderValue","unshift","isInboxSystemHeaderSortable","viewType","headersEnabled","wiestimatedsolutiondate","isfavorite","currenttask","wfclsdisplayname","disableProcessColumn","isSmartInbox","fieldFilterName","isInboxHeaderASystemColumn","taskstateColor","cascreationdate","cassolutiondate","taskid","atrisktime","currentuser","currentfullname","guidfavorite","creatorfullname","validateCustomColumn","maxColumnsAllowedOnView","columnsAddedCount","selectedColumnsCount","isCustomColumn","off","form","getSpecificSmartInbox","settingName","owner","getAllProcessesSmartInbox","getAllCustomizedColumnsSmartInbox","createSmartInbox","updateSmartInbox","model","deleteSmartInbox","shareSmartInbox","getEntityValuesForInboxFilter","entityGuid","getUserTasksForInboxFilter","callServiceWithNetworkRetries","serviceInvocation","pArguments","maxRetries","delayBetweenRetry","currentRetry","currentDeferred","getAndSaveMobileFeaturesFromBizagiConfig","validateIfSaveMobileFeaturesIsEnabled","configuration","BIZAGI_WORKPORTAL_WIDGET_START_FORM","dataService","modules","render","oldRender","activitySelector","renderVersion","resetRouteInformation","module","moduleParams","setRenderParams","getRenderParams","_renderParams","formsRenderVersion","isComplex","offlineType","skipSubprocessGlobalForm","BIZAGI_SETTINGS","getRoute","getRenderVersion","getWorkItems","workItems","hasWorkItems","includeSyncErrorIntoModuleparams","setRenderModuleName","getRenderModuleName","searchIdTask","idWorkFlow","mobileAccess","forceOffline","workitemstate","getSyncError","listAsyncWorkItems","checkAsyncWorkItems","msgTask","routeToMessageForm","routeToGlobalForm","routeToGlobalFormWithoutData","workItemIndex","workitemCounter","isAsynch","checkProcess","subProcesses","checkWorkItems","xhr","renderName","workItemsList","workItemToSearch","idCaseForGlobalForm","withOutGlobalForm","messageForm","formsVersion","isOfflineErrorsViewSupported","getTaskSyncError","idEdited","isOfflineErrorMode","config","defaultParams","authentication","deviceFactory","mashup","factory","authenticator","oauth","basic","routing","executionDeferred","deviceFacade","getMashupFacade","mashupFacade","controller","getMainController","layoutHeader","showHeader","transition","renderCase","onRender","hideInternalHeader","getUser","showInternalHeader","authenticateUser","auth","setAccessToken","accessToken","showSummaryCase","onError","renderCaseSummary","facade","creationParams","userProperty","userProperties","sUserProperties","_super","autologin","sessionExpiration","crossDomain","loginOption","refreshTokenCallback","oauth2","jqOAuth","tokenName","tokenExpiration","refreshToken","hasAccessToken","cachedFacade","initializeTemplates","initAsyncStuff","alert","getDataService","setMobileMetaTags","templateService","rel","loadTemplates","getStyleSheet","getJavaScript","loadTemplate","configureHomeHandlers","templateDestination","getAction","main","loadTemplateWebpart","resolvedRemplate","resources","componentContainers","subscribers","disposed","triggerHandler","subscribe","docEventName","handler","subscribeOneTime","one","unsubscribe","templatesDeferred","internalRender","configureHandlers","renderContent","postRender","tmplPromises","useNewEngine","getContent","getComponentSelector","component","getComponentContainer","componentElement","is","actionName","actionParams","resizeLayout","performResizeLayout","resizeParent","formElement","sendDimensionsToParent","canvasobject","attachEvent","onresize","addResizeListener","disposeTime","parameters","isThereAsync","asyncWidget","modalParameters","wi","componentRegex","setWidget","renderController","renderRoutingDialog","pushWidget","onRenderAction","onMashupResize","renderWorkarea","caseSummaryController","caseSummary","startFormController","startForm","entityTemplatesController","entityTemplates","newCaseController","newCase","mashup-dialog","dialogTmpl","kendoMobileModalView","useNativeScrolling","modalView","PRIORITY_UNDEFINED","PRIORITY_PRIMARY","PRIORITY_SECONDARY","PRIORITY_LIST","view","$pane","wrapper","closest","pane","navBar","containersQueue","resetParams","createRenderContainer","zoom","Boolean","$view","viewId","setContainerParams","viewItem","View","tmplView","previousViewId","scrollElement","scroller","currentScrollY","returnObject","contentElement","hasButtons","changeButtonVisibilityByContainer","dynamic","initFormButton","modalViewDidAppear","modalViewDidDisappear","buttonsToShow","visible","additional","label","caption","ordinal","ranked","formButtons","getListWithPriority","processButton","indexNext","findPriorityAction","indexSave","actionsList","findIndex","button","btn","routingTmpl","showWorkitem","taskName","ASYNC_CHECK_TIMER","executeAsync","$template","ModalView","checkAsycnExecutionState","prepend","summaryForm","renderForm","routingParameters","rendering","empty","toggle","rfParams","renderContainer","infoTemplate","online","paramsFacade","triggerparams","navbar","drawer","Drawer","swipeToOpen","delegate","routingExecute","renderCurrentTab","currentTab","idLastComment","COMMENT_SIZE","totalRecords","getTimeAgo","release","defered","showConfirmationBox","showMessageBox","mashup-newcase-modal-multiorganization","isMultiOrganization","createOrganizationList","notification","isBatch","createNewCaseNotification","newCaseParams","dataCase","categoryName","createCase","resultData","buildCaseParameters","isShortcut","startShortcutProcess","caseResponse","assignessResponse","navigateProcess","notifier","isAdjusted","multiorganizationModal","multiorganizationTemplate","isAdhocProcess","getKendoMobileModalView","configureModalHandlers","adjustSize","maxHeight","listHeight","maxWidth","popupHeight","windowHeightSize","windowWidthSize","innerWidth","orientation","addEventListener","showProcess","isMultiInstance","caseInfo","caseNumber","sticky","class_name","target","modalContext","_back","_navigateProcess","_refreshTemplate","original_params","_type","_origin","origin","h_idParentCase","h_guidprocess","h_mappingstakeholders","h_idProcess","h_contexttype","h_guidEntity","h_guidForm","formGuid","h_showDisabled","h_readonlyform","readonlyform","entitySurrogateKey","h_surrogateKey","h_mapping","_form","changeButtons","startFormFacade","originalParams","postRenderEdit","originalProcessButton","buttonProperties","endLoading","contextType","validateForm","refreshTemplate","accumulatedContext","homePortalFramework","what","preventNavigate","acumContext","entityDataSource","DataSource","transport","listParams","getEntities","dataCalled","success","schema","total","serverFiltering","serverPaging","templateLoaderPush","templateLoaderRefresh","entityList","kendoMobileCustomListView","autoBind","loadMore","messages","pullTemplate","releaseTemplate","loadMoreText","dataSource","pullToRefresh","itemBind","getKendoMobileCustomListView","engineReady","engine","getData","entityData","getEntityTemplates","_referenceType","processEntities","entity","isDefaultTemplate","guidTemplate","renderedTemplate","mashup-render-view","mashup-render-layout","mashup-render-edition-view","mashup-info-message","mashup-routing","mashup-async","mashup-summary-view","mashup-summary-main","mashup-summary-subprocess","mashup-summary-comments","mashup-summary-assigness","mashup-summary-activities","mashup-summary-events","renderSummary","estimatedSolutionDate","solutionDate","getStatusTimeLabel","creationDate","mainTemplate","bztabs","activate","currentTarget","tabNumber","allowReleaseActivity","mashup-start-form","mashup-entity-templates","mashup-entity-templates-item","mashup-entity-templates-item-actions","mashup-entity-templates-pull-loader","mashup-entity-templates-refresh-loader","templateDataService","renderFactory","templateEngine","forcePersonalizedColumns","resize","requestFrame","raf","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","resetTriggers","triggers","__resizeTriggers__","expand","firstElementChild","contract","lastElementChild","expandChild","scrollLeft","scrollWidth","offsetWidth","offsetHeight","checkTriggers","__resizeLast__","scrollListener","__resizeRAF__","__resizeListeners__","removeResizeListener","detachEvent","removeEventListener"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Utils\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide misc helpers to all modules\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Create or Define BizAgi namespace\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.util = typeof bizagi.util !== \"undefined\" ? bizagi.util : {};\nbizagi.context = typeof bizagi.context !== \"undefined\" ? bizagi.context : {};\nbizagi.util.smartphone = typeof bizagi.util.smartphone !== \"undefined\" ? bizagi.util.smartphone : {};\nbizagi.util.tablet = typeof bizagi.util.tablet !== \"undefined\" ? bizagi.util.tablet : {};\n\nvar DEVICES = {};\n\n// Device Type\nDEVICES[DEVICES['desktop'] = 0] = 'desktop';\nDEVICES[DEVICES['smartphone'] = 1] = 'smartphone';\nDEVICES[DEVICES['tablet'] = 2] = 'tablet';\n\n// Add definition\nbizagi.deviceEnum = DEVICES;\n\n/*\r\n                              *   Define mini-plugin to acceess iframe's boundaries\r\n                              */\n(function ($) {\n  $.fn.callInside = function (fx, args) {\n    if ($(this)[0].tagName.toLowerCase() != \"iframe\")\n    return null;\n    // Don't execute the code when the content window is not ready yet    \n    if ($(this)[0].contentWindow == null)\n    return null;\n    // Check if the iframe is cross domain\n    try {\n      // Evals the content\n      $(this)[0].contentWindow.args = args;\n    } catch (e) {\n      // If an exception is thrown here this is a cross domain access\n      return null;\n    }\n\n    if ($.browser.msie) {\n      return $(this)[0].contentWindow.execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    } else if ($.browser.webkit || $.browser.mozilla) {\n      return $(this)[0].contentWindow.eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    }\n  };\n})(jQuery);\n(function ($) {\n  $.fn.callInsidePopup = function (fx, args) {\n    // This is window here\n    var self = this;\n    $(document).ready(function () {\n      // Check if the iframe is cross domain\n      try {\n        // Evals the content\n        $(self)[0].args = args;\n      } catch (e) {\n        // If an exception is thrown here this is a cross domain access\n        return null;\n      }\n\n      if ($.browser.msie) {\n        return $(self)[0].execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      } else if ($.browser.webkit || $.browser.mozilla) {\n        return $(self)[0].eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      }\n\n    });\n  };\n})(jQuery);\n(function ($) {\n\n  // add support for CSS functions for \"setProperty\" in ie8\n  var isStyleFuncSupported = !!CSSStyleDeclaration.prototype.getPropertyValue;\n  if (!isStyleFuncSupported) {\n    CSSStyleDeclaration.prototype.getPropertyValue = function (a) {\n      return this.getAttribute(a);\n    };\n    CSSStyleDeclaration.prototype.setProperty = function (styleName, value, priority) {\n      this.setAttribute(styleName, value);\n      var priority = typeof priority != 'undefined' ? priority : '';\n      if (priority != '') {\n        // Add priority manually\n        var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*' + RegExp.escape(value) + '(\\\\s*;)?', 'gmi');\n        this.cssText = this.cssText.replace(rule, styleName + ': ' + value + ' !' + priority + ';');\n      }\n    };\n\n    CSSStyleDeclaration.prototype.removeProperty = function (a) {\n      return this.removeAttribute(a);\n    };\n\n    CSSStyleDeclaration.prototype.getPropertyPriority = function (styleName) {\n      var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*[^\\\\s]*\\\\s*!important(\\\\s*;)?', 'gmi');\n      return rule.test(this.cssText) ? 'important' : '';\n    };\n  }\n\n  // Escape regex chars with \\\n  RegExp.escape = function (text) {\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n  };\n\n  // The style function\n  jQuery.fn.style = function (styleName, value, priority) {\n    // DOM node\n    var node = this.get(0);\n    // Ensure we have a DOM node \n    if (typeof node == 'undefined') {\n      return;\n    }\n    // CSSStyleDeclaration\n    var style = this.get(0).style;\n    // Getter/Setter\n    if (typeof styleName != 'undefined') {\n      if (typeof value != 'undefined') {\n        // Set style property\n        var priority = typeof priority != 'undefined' ? priority : '';\n        // Hack to IE8\n        if (style.setProperty) {\n          style.setProperty(styleName, value, priority);\n        } else {\n          style.setAttribute(styleName, value, priority);\n        }\n      } else {\n        // Get style property\n\n        return style.getPropertyValue(styleName);\n      }\n    } else {\n      // Get CSSStyleDeclaration\n      return style;\n    }\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.nl2br = function (value) {\n    return value.replace(/(\\r\\n|\\n\\r|\\r|\\n|\\\\r\\\\n|\\\\n\\\\r|\\\\r|\\\\n)/g, \"<br>\");\n  };\n})(jQuery);\n\n\n\n(function ($) {\n  jQuery.br2nl = function (value) {\n    return value.replace(/\\r\\n|\\r|\\n/g, \"\\r\");\n  };\n})(jQuery);\n\n/**\r\n             *   Can be compare control between their intance value and existing value\r\n             */\n//TODO: DEPL- Please move this out of here, this is rendering logic, it must exists as a function for the render, and every erender could override its implementation\n(function ($) {\n  jQuery.controlValueIsChanged = function (control) {\n    var self = control;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (control.properties.type == \"grid\" && control.ready().state() == \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\", \"queryState\"].includes(properties.type) || /^cascadingcombo$/i.test(properties.type)) {\n      if (value && value.length !== undefined)\n      value = value[0];\n      if (compareValue && compareValue.length !== undefined)\n      compareValue = compareValue[0];\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      result = compareValue == value ? false : true;\n    } else if (properties.type == \"boolean\" || properties.type == \"queryBoolean\" || properties.type == \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (properties.type == \"searchNumber\") {\n\n      result = value ? true : false;\n    } else if (properties.type === \"date\") {\n      result = new Date(compareValue).getTime() !== new Date(value).getTime();\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.getMaxZindex = function () {\n    var elm = $(\"*\");\n    var maxZindex = 1;\n\n    $.each(elm, function (key, value) {\n      var zindex = parseInt($(value).css(\"z-index\"));\n      if (zindex > maxZindex) {\n        maxZindex = zindex + 1;\n      }\n\n    });\n\n    return maxZindex;\n  };\n})(jQuery);\n\n/**\r\n             * Set the same max height to multiples divs\r\n             */\n(function ($) {\n  jQuery.equalizeHeights = function (selector) {\n    var heights = new Array();\n    // Loop to get all element heights\n    $(selector).each(function () {\n\n      // Need to let sizes be whatever they want so no overflow on resize\n      $(this).css('min-height', '0');\n      $(this).css('max-height', 'none');\n      $(this).css('height', 'auto');\n\n      // Then add size (no units) to array\n      heights.push($(this).outerHeight());\n    });\n\n    // Find max height of all elements\n    var max = Math.max.apply(Math, heights);\n\n    // Set all heights to max height\n    $(selector).each(function () {\n      $(this).css('height', max + 'px');\n    });\n  };\n})(jQuery);\n\n//TODO: DEPL - Move this to rendering\nbizagi.util.autoSave = function () {\n  var deferredSave = $.Deferred();\n  //if attr data-event exist trigger event auto-save or resolve the deferred\n  if (bizagi.util.detectDevice() !== \"desktop\") {\n    if ($(document).data('auto-save')) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  } else {\n    if ($._data($(document)[0], 'events')[\"save-form\"] && $._data($(document)[0], 'events')[\"save-form\"].length > 0) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  }\n  return deferredSave.promise();\n};\n//--  **Users Deleted** the name will fill on first reques in UsersPictures\nbizagi.util.anonymizedUserInformation = {\n  id: \"00000000-0000-0000-0000-000000000000\",\n  name: \"\",\n  username: \"\",\n  email: \"\",\n  domain: \"\",\n  picture: \"\",\n  isAnonymized: true };\n\n\n//-- **Resources for date picker**\nbizagi.util.datepickerResource = [];\n// taken  from https://github.com/jquery/jquery-ui/tree/master/ui/i18n\nbizagi.util.datepickerResource[\"en\"] = { closeText: \"Done\", prevText: \"Prev\", nextText: \"Next\", currentText: \"Today\", monthNames: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"], dayNames: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"], dayNamesShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"], dayNamesMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"], weekHeader: \"Wk\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"es\"] = { closeText: \"Cerrar\", prevText: \"&#x3C;Ant\", nextText: \"Sig&#x3E;\", currentText: \"Hoy\", monthNames: [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"], monthNamesShort: [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"sep\", \"oct\", \"nov\", \"dic\"], dayNames: [\"domingo\", \"lunes\", \"martes\", \"miércoles\", \"jueves\", \"viernes\", \"sábado\"], dayNamesShort: [\"dom\", \"lun\", \"mar\", \"mié\", \"jue\", \"vie\", \"sáb\"], dayNamesMin: [\"D\", \"L\", \"M\", \"X\", \"J\", \"V\", \"S\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ar\"] = { closeText: \"إغلاق\", prevText: \"&#x3C;السابق\", nextText: \"التالي&#x3E;\", currentText: \"اليوم\", monthNames: [\"يناير\", \"ٝبراير\", \"مارس\", \"أبريل\", \"مايو\", \"يونيو\", \"يوليو\", \"أغسطس\", \"سبتمبر\", \"أكتوبر\", \"نوٝمبر\", \"ديسمبر\"], monthNamesShort: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], dayNames: [\"الأحد\", \"الاثنين\", \"الثلاثاء\", \"الأربعاء\", \"الخميس\", \"الجمعة\", \"السبت\"], dayNamesShort: [\"أحد\", \"اثنين\", \"ثلاثاء\", \"أربعاء\", \"خميس\", \"جمعة\", \"سبت\"], dayNamesMin: [\"ح\", \"ن\", \"ث\", \"ر\", \"خ\", \"ج\", \"س\"], weekHeader: \"أسبوع\", dateFormat: \"dd/mm/yy\", firstDay: 0, isRTL: true, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"cs\"] = { closeText: \"Zavřít\", prevText: \"&#x3C;Dříve\", nextText: \"Později&#x3E;\", currentText: \"Nyní\", monthNames: [\"leden\", \"únor\", \"březen\", \"duben\", \"květen\", \"ĝerven\", \"ĝervenec\", \"srpen\", \"září\", \"říjen\", \"listopad\", \"prosinec\"], monthNamesShort: [\"led\", \"úno\", \"bře\", \"dub\", \"kvě\", \"ĝer\", \"ĝvc\", \"srp\", \"zář\", \"říj\", \"lis\", \"pro\"], dayNames: [\"neděle\", \"pondělí\", \"úterý\", \"středa\", \"ĝtvrtek\", \"pátek\", \"sobota\"], dayNamesShort: [\"ne\", \"po\", \"út\", \"st\", \"ĝt\", \"pá\", \"so\"], dayNamesMin: [\"ne\", \"po\", \"út\", \"st\", \"ĝt\", \"pá\", \"so\"], weekHeader: \"Týd\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"de\"] = { closeText: \"Schließen\", prevText: \"&#x3C;Zurück\", nextText: \"Vor&#x3E;\", currentText: \"Heute\", monthNames: [\"Januar\", \"Februar\", \"März\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mär\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"], dayNames: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"], dayNamesShort: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], dayNamesMin: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], weekHeader: \"KW\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"fr\"] = { closeText: \"Fermer\", prevText: \"Précédent\", nextText: \"Suivant\", currentText: \"Aujourd'hui\", monthNames: [\"janvier\", \"février\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"août\", \"septembre\", \"octobre\", \"novembre\", \"décembre\"], monthNamesShort: [\"janv.\", \"févr.\", \"mars\", \"avr.\", \"mai\", \"juin\", \"juil.\", \"août\", \"sept.\", \"oct.\", \"nov.\", \"déc.\"], dayNames: [\"dimanche\", \"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\"], dayNamesShort: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"], dayNamesMin: [\"D\", \"L\", \"M\", \"M\", \"J\", \"V\", \"S\"], weekHeader: \"Sem.\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"it\"] = { closeText: \"Chiudi\", prevText: \"&#x3C;Prec\", nextText: \"Succ&#x3E;\", currentText: \"Oggi\", monthNames: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"], monthNamesShort: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"], dayNames: [\"Domenica\", \"Lunedì\", \"Martedì\", \"Mercoledì\", \"Giovedì\", \"Venerdì\", \"Sabato\"], dayNamesShort: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"], dayNamesMin: [\"Do\", \"Lu\", \"Ma\", \"Me\", \"Gi\", \"Ve\", \"Sa\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ja\"] = { closeText: \"閉㝘る\", prevText: \"&#x3C;剝\", nextText: \"次&#x3E;\", currentText: \"今日\", monthNames: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"], monthNamesShort: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"], dayNames: [\"日曜日\", \"月曜日\", \"睫曜日\", \"水曜日\", \"木曜日\", \"金曜日\", \"土曜日\"], dayNamesShort: [\"日\", \"月\", \"睫\", \"水\", \"木\", \"金\", \"土\"], dayNamesMin: [\"日\", \"月\", \"睫\", \"水\", \"木\", \"金\", \"土\"], weekHeader: \"週\", dateFormat: \"yy/mm/dd\", firstDay: 0, isRTL: false, showMonthAfterYear: true, yearSuffix: \"年\" };\nbizagi.util.datepickerResource[\"nl\"] = { closeText: \"Sluiten\", prevText: \"←\", nextText: \"→\", currentText: \"Vandaag\", monthNames: [\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"], monthNamesShort: [\"jan\", \"feb\", \"mrt\", \"apr\", \"mei\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"], dayNames: [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"], dayNamesShort: [\"zon\", \"maa\", \"din\", \"woe\", \"don\", \"vri\", \"zat\"], dayNamesMin: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"], weekHeader: \"Wk\", dateFormat: \"dd-mm-yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"pt\"] = { closeText: \"Fechar\", prevText: \"Anterior\", nextText: \"Seguinte\", currentText: \"Hoje\", monthNames: [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"], monthNamesShort: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"], dayNames: [\"Domingo\", \"Segunda-feira\", \"Terça-feira\", \"Quarta-feira\", \"Quinta-feira\", \"Sexta-feira\", \"Sábado\"], dayNamesShort: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sáb\"], dayNamesMin: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sáb\"], weekHeader: \"Sem\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ru\"] = { closeText: \"Закрыть\", prevText: \"&#x3C;Пред\", nextText: \"След&#x3E;\", currentText: \"Сегоднѝ\", monthNames: [\"Январь\", \"Февраль\", \"Март\", \"Нпрель\", \"Май\", \"Июнь\", \"Июль\", \"Нвгуѝт\", \"Сентѝбрь\", \"Октѝбрь\", \"Ноѝбрь\", \"Декабрь\"], monthNamesShort: [\"Янв\", \"Фев\", \"Мар\", \"Нпр\", \"Май\", \"Июн\", \"Июл\", \"Нвг\", \"Сен\", \"Окт\", \"Ноѝ\", \"Дек\"], dayNames: [\"воѝкреѝенье\", \"понедельник\", \"вторник\", \"ѝреда\", \"четверг\", \"пѝтница\", \"ѝуббота\"], dayNamesShort: [\"вѝк\", \"пнд\", \"втр\", \"ѝрд\", \"чтв\", \"птн\", \"ѝбт\"], dayNamesMin: [\"Вѝ\", \"Пн\", \"Вт\", \"Ср\", \"Чт\", \"Пт\", \"Сб\"], weekHeader: \"Нед\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"zh\"] = { closeText: \"关闭\", prevText: \"&#x3C;上月\", nextText: \"下月&#x3E;\", currentText: \"今天\", monthNames: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"坝月\", \"坝一月\", \"坝二月\"], monthNamesShort: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"坝月\", \"坝一月\", \"坝二月\"], dayNames: [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"], dayNamesShort: [\"周日\", \"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\"], dayNamesMin: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"], weekHeader: \"周\", dateFormat: \"yy-mm-dd\", firstDay: 1, isRTL: false, showMonthAfterYear: true, yearSuffix: \"年\" };\n\n//--  **Communication between Workportal and LiveProcesses**\n\n// Create new Live Process\nbizagi.util.liveProcessesEvents = bizagi.util.liveProcessesEvents || {};\nbizagi.util.liveProcessesEvents.newLiveProcess = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.newLiveProcess.initEvent('new-live-process', true, true);\n\n// Event for changing route inside LiveProcesses\nbizagi.util.liveProcessesEvents.routeEvents = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.routeEvents.initEvent('parent-route-events', true, true);\nbizagi.util.liveProcessesEvents.routeEvents.route = '/';\n\n// Verify save condition\nbizagi.util.liveProcessesEvents.saveEvent = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.saveEvent.initEvent('save-live', true, true);\nbizagi.util.liveProcessesEvents.saveEvent.lastWidget = '';\nbizagi.util.liveProcessesEvents.saveEvent.nextWidget = '';\n\nbizagi.util.liveSave = function (widgetName) {\n  bizagi.util.liveProcessesEvents.saveEvent.nextWidget = widgetName;\n  var deferredLiveSave = $.Deferred();\n  var indeX = 0;\n  // next try/catch avoids crossdomain messages in the middle of \"Next button\" execution\n  try {\n    indeX = $(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess');\n  }\n  catch (e) {\n    indeX = -1;\n  }\n  if (\n  (widgetName !== bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY || widgetName === bizagi.util.liveProcessesEvents.saveEvent.lastWidget) &&\n  $(document).find('iframe').length > 0 && indeX > 0)\n  {\n    bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise = deferredLiveSave;\n    document.dispatchEvent(bizagi.util.liveProcessesEvents.saveEvent);\n  } else {\n    deferredLiveSave.resolve();\n  }\n  $.when(deferredLiveSave).done(function () {bizagi.util.liveProcessesEvents.saveEvent.lastWidget = widgetName;});\n  return deferredLiveSave.promise();\n};\n\n/**\r\n    * CryptoJS MD5\r\n    * @param {} message\r\n    * @returns {}\r\n    */\nbizagi.util.md5 = function (message) {\n  // Code here will be linted with JSHint.\n  /* jshint ignore:start */\n  var CryptoJS = CryptoJS || function (s, p) {var m = {},l = m.lib = {},n = function n() {},r = l.Base = { extend: function extend(b) {n.prototype = this;var h = new n();b && h.mixIn(b);h.hasOwnProperty(\"init\") || (h.init = function () {h.$super.init.apply(this, arguments);});h.init.prototype = h;h.$super = this;return h;}, create: function create() {var b = this.extend();b.init.apply(b, arguments);return b;}, init: function init() {}, mixIn: function mixIn(b) {for (var h in b) {b.hasOwnProperty(h) && (this[h] = b[h]);}b.hasOwnProperty(\"toString\") && (this.toString = b.toString);}, clone: function clone() {return this.init.prototype.extend(this);} },q = l.WordArray = r.extend({ init: function init(b, h) {b = this.words = b || [];this.sigBytes = h != p ? h : 4 * b.length;}, toString: function toString(b) {return (b || t).stringify(this);}, concat: function concat(b) {var h = this.words,a = b.words,j = this.sigBytes;b = b.sigBytes;this.clamp();if (j % 4) for (var g = 0; g < b; g++) {h[j + g >>> 2] |= (a[g >>> 2] >>> 24 - 8 * (g % 4) & 255) << 24 - 8 * ((j + g) % 4);} else if (65535 < a.length) for (g = 0; g < b; g += 4) {h[j + g >>> 2] = a[g >>> 2];} else h.push.apply(h, a);this.sigBytes += b;return this;}, clamp: function clamp() {var b = this.words,h = this.sigBytes;b[h >>> 2] &= 4294967295 << 32 - 8 * (h % 4);b.length = s.ceil(h / 4);}, clone: function clone() {var b = r.clone.call(this);b.words = this.words.slice(0);return b;}, random: function random(b) {for (var h = [], a = 0; a < b; a += 4) {h.push(4294967296 * s.random() | 0);}return new q.init(h, b);} }),v = m.enc = {},t = v.Hex = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {var k = a[j >>> 2] >>> 24 - 8 * (j % 4) & 255;g.push((k >>> 4).toString(16));g.push((k & 15).toString(16));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j += 2) {g[j >>> 3] |= parseInt(b.substr(j, 2), 16) << 24 - 4 * (j % 8);}return new q.init(g, a / 2);} },a = v.Latin1 = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {g.push(String.fromCharCode(a[j >>> 2] >>> 24 - 8 * (j % 4) & 255));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j++) {g[j >>> 2] |= (b.charCodeAt(j) & 255) << 24 - 8 * (j % 4);}return new q.init(g, a);} },u = v.Utf8 = { stringify: function stringify(b) {try {return decodeURIComponent(escape(a.stringify(b)));} catch (g) {throw Error(\"Malformed UTF-8 data\");}}, parse: function parse(b) {return a.parse(unescape(encodeURIComponent(b)));} },g = l.BufferedBlockAlgorithm = r.extend({ reset: function reset() {this._data = new q.init();this._nDataBytes = 0;}, _append: function _append(b) {\"string\" == typeof b && (b = u.parse(b));this._data.concat(b);this._nDataBytes += b.sigBytes;}, _process: function _process(b) {var a = this._data,g = a.words,j = a.sigBytes,k = this.blockSize,m = j / (4 * k),m = b ? s.ceil(m) : s.max((m | 0) - this._minBufferSize, 0);b = m * k;j = s.min(4 * b, j);if (b) {for (var l = 0; l < b; l += k) {this._doProcessBlock(g, l);}l = g.splice(0, b);a.sigBytes -= j;}return new q.init(l, j);}, clone: function clone() {var b = r.clone.call(this);b._data = this._data.clone();return b;}, _minBufferSize: 0 });l.Hasher = g.extend({ cfg: r.extend(), init: function init(b) {this.cfg = this.cfg.extend(b);this.reset();}, reset: function reset() {g.reset.call(this);this._doReset();}, update: function update(b) {this._append(b);this._process();return this;}, finalize: function finalize(b) {b && this._append(b);return this._doFinalize();}, blockSize: 16, _createHelper: function _createHelper(b) {return function (a, g) {return new b.init(g).finalize(a);};}, _createHmacHelper: function _createHmacHelper(b) {return function (a, g) {return new k.HMAC.init(b, g).finalize(a);};} });var k = m.algo = {};return m;}(Math);(function (s) {function p(a, k, b, h, l, j, m) {a = a + (k & b | ~k & h) + l + m;return (a << j | a >>> 32 - j) + k;}function m(a, k, b, h, l, j, m) {a = a + (k & h | b & ~h) + l + m;return (a << j | a >>> 32 - j) + k;}function l(a, k, b, h, l, j, m) {a = a + (k ^ b ^ h) + l + m;return (a << j | a >>> 32 - j) + k;}function n(a, k, b, h, l, j, m) {a = a + (b ^ (k | ~h)) + l + m;return (a << j | a >>> 32 - j) + k;}for (var r = CryptoJS, q = r.lib, v = q.WordArray, t = q.Hasher, q = r.algo, a = [], u = 0; 64 > u; u++) {a[u] = 4294967296 * s.abs(s.sin(u + 1)) | 0;}q = q.MD5 = t.extend({ _doReset: function _doReset() {this._hash = new v.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function _doProcessBlock(g, k) {for (var b = 0; 16 > b; b++) {var h = k + b,w = g[h];g[h] = (w << 8 | w >>> 24) & 16711935 | (w << 24 | w >>> 8) & 4278255360;}var b = this._hash.words,h = g[k + 0],w = g[k + 1],j = g[k + 2],q = g[k + 3],r = g[k + 4],s = g[k + 5],t = g[k + 6],u = g[k + 7],v = g[k + 8],x = g[k + 9],y = g[k + 10],z = g[k + 11],A = g[k + 12],B = g[k + 13],C = g[k + 14],D = g[k + 15],c = b[0],d = b[1],e = b[2],f = b[3],c = p(c, d, e, f, h, 7, a[0]),f = p(f, c, d, e, w, 12, a[1]),e = p(e, f, c, d, j, 17, a[2]),d = p(d, e, f, c, q, 22, a[3]),c = p(c, d, e, f, r, 7, a[4]),f = p(f, c, d, e, s, 12, a[5]),e = p(e, f, c, d, t, 17, a[6]),d = p(d, e, f, c, u, 22, a[7]),c = p(c, d, e, f, v, 7, a[8]),f = p(f, c, d, e, x, 12, a[9]),e = p(e, f, c, d, y, 17, a[10]),d = p(d, e, f, c, z, 22, a[11]),c = p(c, d, e, f, A, 7, a[12]),f = p(f, c, d, e, B, 12, a[13]),e = p(e, f, c, d, C, 17, a[14]),d = p(d, e, f, c, D, 22, a[15]),c = m(c, d, e, f, w, 5, a[16]),f = m(f, c, d, e, t, 9, a[17]),e = m(e, f, c, d, z, 14, a[18]),d = m(d, e, f, c, h, 20, a[19]),c = m(c, d, e, f, s, 5, a[20]),f = m(f, c, d, e, y, 9, a[21]),e = m(e, f, c, d, D, 14, a[22]),d = m(d, e, f, c, r, 20, a[23]),c = m(c, d, e, f, x, 5, a[24]),f = m(f, c, d, e, C, 9, a[25]),e = m(e, f, c, d, q, 14, a[26]),d = m(d, e, f, c, v, 20, a[27]),c = m(c, d, e, f, B, 5, a[28]),f = m(f, c, d, e, j, 9, a[29]),e = m(e, f, c, d, u, 14, a[30]),d = m(d, e, f, c, A, 20, a[31]),c = l(c, d, e, f, s, 4, a[32]),f = l(f, c, d, e, v, 11, a[33]),e = l(e, f, c, d, z, 16, a[34]),d = l(d, e, f, c, C, 23, a[35]),c = l(c, d, e, f, w, 4, a[36]),f = l(f, c, d, e, r, 11, a[37]),e = l(e, f, c, d, u, 16, a[38]),d = l(d, e, f, c, y, 23, a[39]),c = l(c, d, e, f, B, 4, a[40]),f = l(f, c, d, e, h, 11, a[41]),e = l(e, f, c, d, q, 16, a[42]),d = l(d, e, f, c, t, 23, a[43]),c = l(c, d, e, f, x, 4, a[44]),f = l(f, c, d, e, A, 11, a[45]),e = l(e, f, c, d, D, 16, a[46]),d = l(d, e, f, c, j, 23, a[47]),c = n(c, d, e, f, h, 6, a[48]),f = n(f, c, d, e, u, 10, a[49]),e = n(e, f, c, d, C, 15, a[50]),d = n(d, e, f, c, s, 21, a[51]),c = n(c, d, e, f, A, 6, a[52]),f = n(f, c, d, e, q, 10, a[53]),e = n(e, f, c, d, y, 15, a[54]),d = n(d, e, f, c, w, 21, a[55]),c = n(c, d, e, f, v, 6, a[56]),f = n(f, c, d, e, D, 10, a[57]),e = n(e, f, c, d, t, 15, a[58]),d = n(d, e, f, c, B, 21, a[59]),c = n(c, d, e, f, r, 6, a[60]),f = n(f, c, d, e, z, 10, a[61]),e = n(e, f, c, d, j, 15, a[62]),d = n(d, e, f, c, x, 21, a[63]);b[0] = b[0] + c | 0;b[1] = b[1] + d | 0;b[2] = b[2] + e | 0;b[3] = b[3] + f | 0;}, _doFinalize: function _doFinalize() {var a = this._data,k = a.words,b = 8 * this._nDataBytes,h = 8 * a.sigBytes;k[h >>> 5] |= 128 << 24 - h % 32;var l = s.floor(b / 4294967296);k[(h + 64 >>> 9 << 4) + 15] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;k[(h + 64 >>> 9 << 4) + 14] = (b << 8 | b >>> 24) & 16711935 | (b << 24 | b >>> 8) & 4278255360;a.sigBytes = 4 * (k.length + 1);this._process();a = this._hash;k = a.words;for (b = 0; 4 > b; b++) {h = k[b], k[b] = (h << 8 | h >>> 24) & 16711935 | (h << 24 | h >>> 8) & 4278255360;}return a;}, clone: function clone() {var a = t.clone.call(this);a._hash = this._hash.clone();return a;} });r.MD5 = t._createHelper(q);r.HmacMD5 = t._createHmacHelper(q);})(Math);\n  /* jshint ignore:end */\n  return CryptoJS.MD5(message).toString();\n};\n\n/**\r\n    * Replace all coincidences in a text, based on key value object\r\n    *  @argument mapDataToReplace = {\"keyTofind\":\"valueToReplace\",...}\r\n    */\nbizagi.util.multiReplace = function (text, mapDataToReplace) {\n  mapDataToReplace = mapDataToReplace || {};\n\n  for (var key in mapDataToReplace) {\n    var reg = new RegExp(key, \"g\");\n    text = text.replace(reg, mapDataToReplace[key]);\n  }\n  return text;\n};\n/*\r\n    *   Creates a replace all method that is left from the String Class\r\n    */\nbizagi.util.replaceAll = function (text, pcFrom, pcTo) {\n  // Call the method located in bizagi.loader\n  return bizagi.replaceAll(text, pcFrom, pcTo);\n};\n/*\r\n    *replaces global expressions regulars\r\n    */\nbizagi.util.replaceAllGlobalRegExp = function (text, pcFrom, pcTo) {\n  var temp = text;\n\n  var re = new RegExp(pcFrom, \"g\");\n  temp = temp.replace(re, pcTo);\n\n  return temp.toString();\n};\n// Also append it to the string class\nString.prototype.replaceAll = function (pcFrom, pcTo) {\n  return bizagi.util.replaceAll(this, pcFrom, pcTo);\n};\n// Capitalize a string\nString.prototype.capitalize = function () {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n};\n// Add this (Create an starts with function) to the string prototype\nString.prototype.startsWith = function (str) {\n  return this.slice(0, str.length) == str;\n};\n\n/**\r\n    * get Initials of a string/name and if the name is empty return the anonymized icon\r\n    */\nString.prototype.getInitials = function () {\n  var initials = \"\";\n  if (this.length === 0) {\n    initials = '<svg  class=\"bz-icon bz-icon-24 bz-icon-svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-user-deactivated\"></use></svg>';\n  } else {\n    try {\n      var removeRepeatSpaces = this.replace(/  +/g, ' ');\n      var words = removeRepeatSpaces.split(' ');\n      for (var i = 0; i < words.length; i += 1) {\n        initials += words[i][0] || '';\n        if (initials.length == 2) {\n          break;\n        }\n      }\n    } catch (e) {}\n\n    initials = initials.toUpperCase();\n  }\n  return initials;\n};\n\nMath.sign = Math.sign || function (x) {\n  x = +x; // convert to a number\n  if (x === 0 || isNaN(x)) {\n    return x;\n  }\n  return x > 0 ? 1 : -1;\n};\n\n// Add a clone to the object prototype\nbizagi.clone = function (obj) {\n  if (obj == undefined) return undefined;\n  if (obj == null) return null;\n  return JSON.parse(JSON.encode(obj));\n};\n// Measures the pixel size of a string\nbizagi.measureString = function (string, fontSize) {\n  var test = $(\"<span/>\").appendTo(\"body\");\n  test.text(string);\n  if (fontSize)\n  test.css(\"font-size\", fontSize);\n  var width = test.width();\n  test.detach();\n  return width;\n};\n/*\r\n    *   Creates a trim method\r\n    */\nbizagi.util.trim = function (text) {\n  if (typeof text === \"undefined\" || text == null)\n  return text;\n  // Call the method located in bizagi.loader\n  return text.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n};\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n/*\r\n    * Method to detect IE7 visitors\r\n    */\nbizagi.util.isIE7 = function () {\n  return bizagi.util.isIE() && document.documentMode == 7;\n};\n/*\r\n    * Method to detect IE8 visitors\r\n    */\nbizagi.util.isIE8 = function () {\n  return bizagi.util.isIE() && document.documentMode == 8;\n};\n/*\r\n    * Method to detect IE9 visitors\r\n    */\nbizagi.util.isIE9 = function () {\n  return bizagi.util.isIE() && document.documentMode == 9;\n};\n/*\r\n    * Method to detect IE10 visitors\r\n    */\nbizagi.util.isIE10 = function () {\n  return bizagi.util.isIE() && document.documentMode == 10;\n};\n/*\r\n    * Method to detect IE11 visitors\r\n    */\nbizagi.util.isIE11 = function () {\n  return !!navigator.userAgent.match(/Trident\\/7.0/) && !navigator.userAgent.match(/MSIE/i);\n};\n\n/*\r\n    * Method to detect IE11 or lower\r\n    */\nbizagi.util.isIE11OrLower = function () {\n  return bizagi.util.isIE11() || bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE10 or lower\r\n    */\nbizagi.util.isIE10OrLower = function () {\n  return bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE12 or Edge(Windows 10) visitors\r\n    */\nbizagi.util.isEdge = function () {\n  if (/Edge\\/*./i.test(navigator.userAgent)) {\n    return true;\n  }\n  return false;\n};\n/*\r\n    * Method to detect IE visitors\r\n    */\nbizagi.util.isIE = function () {\n  return navigator.appName.indexOf(\"Internet Explorer\") > 0 || !!navigator.userAgent.match(/Trident/);\n};\n/*\r\n    *   Object Values wrapper\r\n    */\nbizagi.util.objectValues = function (array) {\n  if (bizagi.util.isIE())\n  return Object.keys(array).map(function (itm) {return array[itm];});else\n\n  return Object.values(array);\n};\n/*\r\n    * Get the specific version of IE \r\n    */\nbizagi.util.getIEVersion = function () {\n  var sAgent = window.navigator.userAgent;\n  var indexMSIE = sAgent.indexOf(\"MSIE\");\n  var version = 0;\n  if (indexMSIE > 0) {\n    version = parseInt(sAgent.substring(indexMSIE + 5, sAgent.indexOf(\".\", indexMSIE)));\n  } else\n  if (!!navigator.userAgent.match(/Trident/) || window.navigator.userAgent.indexOf(\"Edge\") > -1) {// Condition Check IF IE 11 and or MS Edge\n    version = 11;\n  }\n  return version;\n};\n/*\r\n    * Method to detect is chrome browser\r\n    */\nbizagi.util.isChrome = function () {\n  return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n/*\r\n    * Method to detect is Firefox browser\r\n    */\nbizagi.util.isFirefox = function (minVersion) {\n  function getVersion() {\n    var ua = navigator.userAgent,tem,M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return { name: 'IE', version: tem[1] || '' };\n    }\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\bOPR|Edge\\/(\\d+)/);\n      if (tem != null) {return { name: 'Opera', version: tem[1] };}\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {M.splice(1, 1, tem[1]);}\n    return {\n      name: M[0],\n      version: M[1] };\n\n  }\n  return /Firefox/.test(navigator.userAgent) && (minVersion === undefined || minVersion <= getVersion().version);\n};\n/*\r\n    * return the browser name this function can be modified if needs more browsers\r\n    */\nbizagi.util.getBrowser = function () {\n  var bw = \"undetected\";\n  if (bizagi.util.isChrome()) {\n    bw = \"chrome\";\n  } else if (bizagi.util.isFirefox()) {\n    bw = \"firefox\";\n  } else if (bizagi.util.isEdge()) {\n    bw = \"edge\";\n  } else if (bizagi.util.isIE11()) {\n    bw = \"ie11\";\n\n  } else if (bizagi.util.isIE10()) {\n    bw = \"ie10\";\n  }\n  return bw;\n};\n\n/**\r\n    * Empty Navigator Info\r\n    */\nbizagi.util.emptyNavigatorInfo = function () {\n  if (bizagi.navigator && bizagi.navigator.info) {\n    bizagi.navigator.info = {};\n  }\n};\n\n/**\r\n    * Auto call setting the browser class for css specific selectors, etc..\r\n    */\n$(document).ready(function () {\n  $(\"html\").\n  addClass(\"browser-\" + bizagi.util.getBrowser()).\n  addClass(\"device-\" + bizagi.detectDevice());\n  if (bizagi.language) {\n    var language = bizagi.language.split(\"-\");\n    if (language && language.length > 0) {\n      $(\"html\").addClass(\"language-\" + language[0]);\n    }\n  }\n});\n\n\n\n\n/**\r\n     * Method to detect iOS version X and apply styles to that device \r\n     */\nbizagi.util.setIphoneXOverrides = function () {\n  if (bizagi.util.isNativePluginSupported() && typeof bizagiapp.isIphoneX !== 'undefined') {\n    bizagiapp.isIphoneX(function (value) {\n      var flagIphoneX = value;\n      var styleIphoneX = \".bz-menu-home .bz-menu-carousel .bz-menu-carousel-seat{padding:0 16px 16px}.bz-home-header .km-navbar{padding:35px 16px 5px}#menuHome .bz-home-header .km-navbar{padding:30px 3px 0}#menuHome .km-navbar .km-rightitem{font-size:19px;right:.4em;top:32px}#menuHome .km-navbar .km-leftitem{font-size:24px;left:0;top:25px}#taskFeed .km-navbar .km-rightitem{font-size:19px;top:25px;right:0}#taskFeed .km-navbar .km-leftitem{font-size:24px;top:20px;left:0}#homePortal #menuHome .km-view-title .km-buttongroup{margin-left:0;top:2px}.bz-render-header,.search-container{padding-top:25px}#activity-search,.search-container .bz-wp-mu-button-search{padding-top:40px}#content-newCase-drawer{padding-top:25px}#menuHome{background:#EBEDF1!important}.km-flat .km-content{background-color:#fff} .k-loading-mask{top:0!important}\";\n\n      if (flagIphoneX === 'true') {\n        $('head').append('<style type=\"text/css\" id=\"iphoneXStyle\"></style>');\n        $('#iphoneXStyle').text(styleIphoneX);\n\n      } else if (bizagi.util.isiOSDevice()) {\n        $('head').append('<style type=\"text/css\" id=\"iphoneStyle\"></style>');\n        var paddingStyle = \"#homePortal .bz-home-header > div{padding-top:.8em}\";\n        $('#iphoneStyle').text(paddingStyle);\n      }\n    });\n  }\n};\n\nbizagi.util.isString = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object String]\";\n};\n\nbizagi.util.isObject = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Object]\";\n};\n\nbizagi.util.isArray = function (value) {\n  return Array.isArray(value);\n};\nbizagi.util.isNull = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Null]\";\n};\nbizagi.util.isBoolean = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Boolean]\";\n};\n\n/*\r\n    *   Method to detect IE version\r\n    */\nbizagi.util.getInternetExplorerVersion = function () {\n  if (!bizagi.util.isIE())\n  return -1;\n  return Number(document.documentMode);\n};\n/*  \r\n    *   Detect a device based on the width\r\n    */\nbizagi.util.detectDevice = function () {\n  // Call the method located in bizagi.loader\n  return bizagi.detectDevice();\n};\n\n// Check if a string is number\nbizagi.util.isNumeric = function (n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\n// Check if a string is GUID\nbizagi.util.isGUID = function (n) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n);\n};\n// Throw not implemented exception\nbizagi.util.mustImplement = function (notImplementedMethod) {\n  try {\n    console.log(\"Not implemented exception: \" + notImplementedMethod);\n  } catch (exe) {\n  } //IE console variable not exist\n  //throw \"You must implement \" + notImplementedMethod;\n};\n// Encodes the xpath \nbizagi.util.encodeXpath = function (xpath) {\n  if (bizagi.util.isEmpty(xpath) || typeof xpath.replaceAll === \"undefined\")\n  return \"\";\n  return xpath.replaceAll(\".\", \"_\").replaceAll(\"=\", \"_\").replaceAll(\"[\", \"_\").replaceAll(\"]\", \"_\");\n};\n// Parses a value to return the correct boolean value\nbizagi.util.parseBoolean = function (value) {\n  if (value === undefined) {\n    return null;\n  }\n\n  if (value === null) {\n    return null;\n  }\n\n  if (value === '') {\n    return null;\n  }\n\n  // Parse true values\n  if (value === true || value === 1 || value.toString() === \"true\" || value === \"1\") {\n    return true;\n  }\n  if (value.toString().toLowerCase() === \"true\") {\n    return true;\n  }\n\n  // Parse false values\n  if (value !== null && value === false || value === 0 || value.toString() === \"false\" || value === \"0\") {\n    return false;\n  }\n  if (value.toString().toLowerCase() === \"false\") {\n    return false;\n  }\n\n  return null;\n};\n/*\r\n    *   Checks if a given string is empty\r\n    */\nbizagi.util.isEmpty = function (value) {\n  if (value === 0)\n  return false;\n\n  if (value === undefined || value === null || value === \"\") {\n    return true;\n  }\n\n  if (typeof value === \"Array\") {\n    return value.length == 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n    return value.length === 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    if ($.isEmptyObject(value)) {\n      return true;\n    } else {\n      return bizagi.util.isEmptyCombo(value);\n    }\n  }\n\n  // Side effect - I can't delete the last item in the multiselect and searchlist\n  /* if (value == \"{\\\"value\\\":[]}\"){\r\n       return true;\r\n   }  */\n\n  return false;\n};\n\nbizagi.util.isEmptyCombo = function (object) {\n  if (Object.prototype.toString.apply(object) === \"[object Object]\") {\n    var property,id = false,\n    value = false,\n    other = false;\n    for (property in object) {\n      if (object.hasOwnProperty(property)) {\n        if (property === \"id\") {\n          id = true;\n        } else {\n          if (property === \"value\") {\n            value = true;\n          } else {\n            other = true;\n          }\n        }\n        if (other) {\n          return false;\n        }\n      }\n    }\n    if (id) {\n      if (object[\"id\"] === \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n  return undefined;\n};\n\n/**\r\n    * Decode data from encodeURI charset\r\n    */\nbizagi.util.decodeURI = function (value) {\n  value = value || \"\";\n  var finishDecoded = false;\n  var decodedValue = value;\n  var infinityControl;\n\n  // Try to decode data value\n  while (!finishDecoded) {\n    try {\n      infinityControl = decodeURI(decodedValue);\n      if (bizagi.util.hasNonVisibleChars(infinityControl)) {\n        decodedValue = value;\n        break;\n      }\n      if (infinityControl == decodedValue) {\n        finishDecoded = true;\n      } else {\n        decodedValue = infinityControl;\n      }\n    } catch (e) {\n      finishDecoded = true;\n    }\n  }\n\n  return decodedValue;\n};\n\nbizagi.util.hasNonVisibleChars = function (value) {\n  value = value || \"\";\n  var length = value.length;\n  var i = 0,\n  result = false,\n  ch;\n  for (; i < length;) {\n    ch = value.charCodeAt(i++);\n    if (ch < 32 || ch > 126) {\n      result = true;\n      break;\n    }\n  }\n  return result;\n};\n\n/* \r\n    *   Converts a percent into a number\r\n    */\nbizagi.util.percent2Number = function (value) {\n  return Number(String(value).replace(\"%\", \"\"));\n};\n/*\r\n    *   Check if a object is empty\r\n    */\nbizagi.util.isObjectEmpty = function (obj) {\n  if (obj.length > 0)\n  return false;\n  return true;\n};\n/*\r\n    *   Check if a map object is empty\r\n    */\nbizagi.util.isMapEmpty = function (map) {\n  // First we validate a special case\n  if (map.length == 1 && map[0].length == 0)\n  return true;\n  // Then we do normal validation\n  for (var key in map) {\n    if (map.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n};\n/*\r\n    *   Replaces a matched selector in the container for the specified \"replace\" element\r\n    */\nbizagi.util.replaceSelector = function (container, selector, replace) {\n  // Replace children tag\n  var elementToReplace = $(selector, container);\n  if (elementToReplace.length > 0) {\n    elementToReplace.append(replace);\n    elementToReplace.children().unwrap();\n  }\n};\n/*\r\n    *   Determines if a control as a scrollbar \r\n    */\nbizagi.util.hasScroll = function (el, direction) {\n  if (el.length)\n  el = el[0];\n  direction = direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n  var result = !!el[direction];\n  if (!result) {\n    el[direction] = 1;\n    result = !!el[direction];\n    el[direction] = 0;\n  }\n  return result;\n};\n\n//TODO: DEPL - Rename this to areIdenticalObjects\nbizagi.util.identicalObjects = function (obj1, obj2) {\n  var self = this;\n\n  if (_typeof(obj1) !== _typeof(obj2)) {\n    return false;\n  }\n\n  if (typeof obj1 === \"function\") {\n    return obj1.toString() === obj2.toString();\n  }\n\n  if (obj1 instanceof Object && obj2 instanceof Object) {\n\n    // Count properties\n    if (bizagi.util.countProps(obj1) !== bizagi.util.countProps(obj2)) {\n      return false;\n    }\n\n    var r = true;\n    for (k in obj1) {\n      r = bizagi.util.identicalObjects(obj1[k], obj2[k]);\n      if (!r) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return obj1 === obj2;\n  }\n};\n\nbizagi.util.countProps = function (obj) {\n  var count = 0;\n  for (k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      count++;\n    }\n  }\n  return count;\n};\n/*\r\n    *   Determines if a element has visibility\r\n    */\nbizagi.util.isScrolledIntoView = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var scrollTop = layout.scrollTop();\n  var elemTop = $(elem).offset().top;\n  var elemBottom = elemTop + $(elem).height();\n  var docViewBottom = scrollTop + $(layout).height();\n  return elemBottom <= docViewBottom && elemTop >= scrollTop;\n};\nbizagi.util.centerElementIntoScroll = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var actualScroll = layout.scrollTop();\n  var elementTop = $(elem).offset().top;\n  var elementHeight = $(elem).height();\n  var offset = 0;\n  if (elementTop > 0) {\n    offset = elementTop + elementHeight;\n  } else {\n    offset = elementTop - elementHeight;\n  }\n  var newTop = actualScroll + offset;\n  layout.scrollTop(newTop);\n};\n/*\r\n    *   Encode a html string\r\n    */\nbizagi.util.encodeHtml = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  return text;\n};\n\n/*\r\n    *   Encode a string as HTML\r\n    */\nbizagi.util.decodeHtmlEntities = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&apos;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\\'');\n  }\n  return text;\n};\n/*\r\n    *   Read the location hash\r\n    */\nbizagi.util.getHashParams = function () {\n  var params = window.location.hash.substring(1).split(\"#\");\n  return params;\n};\n/*\r\n    *   Loads a file on-demand\r\n    */\nbizagi.util.loadFile = function (params) {\n  var defer = new $.Deferred();\n  var url = params && params.src ? params.src : params;\n  var type = params && params.type ? params.type : null;\n\n  bizagi.loader.loadFile({ src: url, type: type }).\n  then(function () {\n    defer.resolve();\n  });\n\n  return defer.promise();\n};\n\n/*\r\n    *   Initializes a webpart on-demand\r\n    */\nbizagi.util.initWebpart = function (webpart, device) {\n  var defer = new $.Deferred();\n\n  device = device || bizagi.detectDevice();\n\n  if (webpart.initialized) {\n    // If already initialized resolve the deferred\n    defer.resolve();\n  } else {\n\n    if (webpart.initializing) {\n      $.when(webpart.loadingDeferred.promise()).\n      done(function () {\n        defer.resolve();\n      });\n    } else {\n\n      webpart.loadingDeferred = new $.Deferred();\n      webpart.initializing = true;\n      bizagi.loader.initWebpart(webpart, device, function () {\n\n        // Resolve deferreds\n        webpart.loadingDeferred.resolve();\n        webpart.initializing = false;\n        defer.resolve();\n      });\n    }\n  }\n\n  return defer.promise();\n};\n/*\r\n    *   Read the query string parameteres\r\n    */\nbizagi.util.getQueryString = function (url) {\n  var params = {};\n  url = url || window.location.href;\n  var query = url.indexOf(\"?\") > 0 ? url.substring(url.indexOf(\"?\") + 1) : \"\";\n  var pairs = query.split(\"&\");\n  for (var i = pairs.length - 1; i >= 0; i--) {\n    var pos = pairs[i].indexOf('=');\n    if (pos == -1)\n    continue;\n    var argname = pairs[i].substring(0, pos);\n    var value = pairs[i].substring(pos + 1);\n    params[argname] = unescape(value);\n  }\n  return params;\n};\n/*\r\n    *   Extend querystring\r\n    */\nbizagi.util.extendQueryString = function (url, additionalParams) {\n  var plainUrl = url.indexOf(\"?\") > 0 ? url.substring(0, url.indexOf(\"?\")) : url;\n  var existingParams = bizagi.util.getQueryString(url);\n  var newParams = $.extend({}, existingParams, additionalParams);\n  return plainUrl + \"?\" + $.param(newParams);\n};\nbizagi.util.getStackTrace = function () {\n  var callstack = [];\n  var isCallstackPopulated = false;\n  try {\n    i.dont.exist += 0; //doesn't exist- that's the point\n  } catch (e) {\n    if (e.stack) {//Firefox\n      var lines = e.stack.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          callstack.push(lines[i]);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    } else if (window.opera && e.message) {//Opera\n      var lines = e.message.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          var entry = lines[i];\n          //Append next line also since it has the file info\n          if (lines[i + 1]) {\n            entry += ' at ' + lines[i + 1];\n            i++;\n          }\n          callstack.push(entry);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    }\n  }\n  if (!isCallstackPopulated) {//IE and Safari\n    var currentFunction = arguments.callee.caller;\n    while (currentFunction) {\n      var fn = currentFunction.toString();\n      var fname = fn.substring(fn.indexOf(\"function\") + 8, fn.indexOf('')) || 'anonymous';\n      callstack.push(fname);\n      currentFunction = currentFunction.caller;\n    }\n  }\n  return callstack;\n};\n/*\r\n    *\thighlight elements\r\n    */\nbizagi.util.highLightElement = function (el) {\n  el.addClass('ui-highlight-control');\n  $.when(\n  setTimeout(function () {\n    el.addClass('ui-highlight-off-control');\n  }, 450)).\n  done(\n  setTimeout(function () {\n    el.removeClass('ui-highlight-control ui-highlight-off-control');\n  }, 800));\n};\n/*\r\n    *\tscroll to bottom\r\n    */\nbizagi.util.autoScrollBottom = function (el) {\n  try {\n    var elScrollHeight;\n    elScrollHeight = el[0].scrollHeight;\n    el.scrollTop(elScrollHeight);\n  } catch (e) {}\n};\n\n/*create auto scroll with limit top and limit bottom */\nbizagi.util.autoScrollInterval = { init: false };\nbizagi.util.autoScroll = function (itemScroll, limitTop, limitBottom, idInterval) {\n  var outSide = false;\n  /* prevent a previous interval */\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval[idInterval] = 0;\n  bizagi.util.autoScrollInterval['init'] = true;\n  $('body').addClass('autoscroll');\n  $('body.autoscroll').mousemove(function (event) {\n    if (event.pageY < limitTop) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollTopInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else if (event.pageY > limitBottom) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollBottomInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else {\n      clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      outSide = false;\n    }\n  });\n};\n/*create auto scroll movement top */\nbizagi.util.autoScrollTopInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  if (itemScroll.scrollTop() == 0) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      if (itemScroll.scrollTop() > 0) {\n        itemScroll.scrollTop(itemScroll.scrollTop() - 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n\n/*create auto scroll movement bottom */\nbizagi.util.autoScrollBottomInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  var valueMaxScrollBottom = $(itemScroll)[0].scrollHeight - $(itemScroll).innerHeight();\n  if (itemScroll.scrollTop() >= valueMaxScrollBottom) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      bizagi.util.autoScrollBottom($('html'));\n      if (itemScroll.scrollTop() < valueMaxScrollBottom) {\n        itemScroll.scrollTop(itemScroll.scrollTop() + 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n/*remove auto scroll*/\nbizagi.util.removeAutoScroll = function (classCSS, idInterval) {\n  $('body.' + classCSS).unbind('mousemove').removeClass(classCSS);\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval.init = false;\n};\n\nbizagi.util.getMaxZIndex = function (selector) {\n  selector = selector || $(\"div,span\");\n  return Math.max.apply(null, $(selector).map(function () {\n    var zIndex;\n    return isNaN(zIndex = parseInt($(this).css(\"z-index\"), 10)) ? 0 : zIndex;\n  }));\n};\n\n/*\r\n    * Creates a native popup to open an url\r\n    */\nbizagi.showPopup = function (url, params, callbackFn) {\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(url, \"\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  // Define args to call the function\n  window.BAPopupWindow = newWindow;\n  window.BAPopupCallback = callbackFn;\n  // Define BACLoseWindow in this context, so the external content calls window.opener.BACloseWindow\n  window.BACloseWindow = function (controls, submitForm) {\n    // Close dialog\n    window.BAPopupWindow.close();\n    // Executes the callback to assign values and submit form (if requested)\n    window.BAPopupCallback(controls, submitForm);\n  };\n};\n/**\r\n    * Creates a native popup in quirks mode to open an url\r\n    * \r\n    * @param url string page to open into popup\r\n    * @param params json {width,height,title,afterLoad}\r\n    */\nbizagi.showQuirksModePopup = function (url, params) {\n  var quirksModePage = window.BIZAGI_PATH_TO_BASE + \"quirks.html\";\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(quirksModePage, \"bizagiPopup\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  window.BAQuirksPopupWindow = newWindow;\n  // Attempto to set a window title\n  setTimeout(function () {\n    try {\n      newWindow.document.title = params.title;\n    } catch (e) {}\n  }, 50);\n  // We use a hack to eval content inside the popup\n  $(newWindow).callInsidePopup(function (windowParams) {\n\n    var $ = windowParams.jQuery;\n    var popupWindow = windowParams.popupWindow;\n    popupWindow.quirksOnLoad = function () {\n      var loadedBody = $(\"body\", popupWindow.document);\n      var iframe = $(\"iframe\", loadedBody);\n      // Remove waiting\n      loadedBody.removeClass(\"ui-bizagi-loading-message\");\n      iframe.show();\n      // Hacks the iframe\n      // This event will fire each time the iframe change its location\n      var afterLoad = windowParams.userParams.afterLoad;\n      if (afterLoad && afterLoad != null) {\n        var callbackParams = $.extend(windowParams.userParams, {\n          popupWindow: popupWindow });\n\n        iframe.callInside(afterLoad, callbackParams);\n      }\n    };\n    var loadingFunction = function loadingFunction() {\n      var body = $(\"body\", popupWindow.document);\n      // Create the iframe inside the new window\n      if (body.length > 0) {\n        body.append(\"<iframe scrolling='yes' id='innerFrameContent' src='\" + windowParams.url + \"' style='width: 100%; height: 100%; display:none' frameborder='0' onload='quirksOnLoad();'></iframe>\");\n      } else {\n        // Try again\n        setTimeout(function () {\n          loadingFunction();\n        }, 50);\n      }\n    };\n    // Execute loading function\n    loadingFunction();\n  }, {\n    jQuery: $,\n    userParams: params,\n    popupWindow: newWindow,\n    url: url });\n\n};\n/*\r\n    *   Returns the resolved result from a promise when the promise has been executed already\r\n    */\nbizagi.resolveResult = function (promise) {\n  var result;\n  promise.done(function (data) {\n    result = data;\n  });\n  return result;\n};\n/*\r\n    *   Creates a popup using overlay style\r\n    */\nbizagi.createPopup = function (params) {\n  var popupName = params.name,\n  onClose = params.onClose,\n  popupHeader;\n  var popupTitle = params.title ? params.title : '';\n  var handleClose = typeof params.handleClose == 'boolean' ? params.handleClose : true;\n  var overlay = $('<div class=\"ui-widget-overlay ' + popupName + '-overlay\" />');\n  var popup = $('<div class=\"' + popupName + '-popup  ui-popup-modal\"/>').appendTo(overlay);\n  var closeButton = $('<div class=\"' + popupName + '-btn-close biz-btn-close\"><i class=\"biz-icon ui-close-btn bz-studio bz-black bz-false_16x16_black\"></i></div>').appendTo(popup);\n  if (params.title) {\n    popupHeader = $('<div class=\"' + popupName + '-popup-header ui-popup-header\" ><h3>' + popupTitle + '</h3></div>').appendTo(popup);\n  }\n\n  var popupContent = $('<div class=\"' + popupName + '-popup-content\" />').appendTo(popup);\n  // Add to body\n  popup.hide();\n  if (params.additionalClass)\n  popup.addClass(params.additionalClass);\n  var container = params.container || \"body\";\n  overlay.appendTo($(container, document));\n\n  if (params.center) {\n    // Resize popup to the center\n    popup.css(\"top\", (overlay.height() - popup.height()) / 2);\n    popup.css(\"left\", (overlay.width() - popup.width()) / 2);\n  }\n  popup.show();\n  // Close handler\n  var closeHandler = function closeHandler(params) {\n    overlay.detach();\n    if (onClose)\n    onClose(params);\n  };\n\n  if (handleClose) {\n    closeButton.click(closeHandler);\n  }\n  // Return a full independent object\n  return {\n    fullPopup: popup,\n    overlay: overlay,\n    content: popupContent,\n    close: function close(params) {\n      closeHandler(params);\n    } };\n\n};\n/*\r\n    * Create an Ok, Cancel popup using bizagi.createPopup()\r\n    */\n\nbizagi.createOkCancelPopup = function (params) {\n  params.name = \"popup-ok-cancel\";\n  var onOk = params.onOk,\n  onCancel = params.onCancel;\n  var popup = bizagi.createPopup(params);\n  var container = $(\"<div></div>\").addClass(\"container-okcancel-popup\");\n  var message = $(\"<div></div>\").addClass(\"message-okcancel-popup ui-light-bevel-border biz-gradient-v\");\n  var buttonsContainer = $(\"<div></div>\").addClass(\"buttonsContainer-okcancel-popup biz-actions-bar\");\n  message.text(params.message);\n  message.appendTo(container);\n  var buttonOk = $(\"<span></span>\").addClass(\"ok-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  var buttonCancel = $(\"<span></span>\").addClass(\"cancel-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  buttonOk.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-ok\"));\n  buttonCancel.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-cancel\"));\n  buttonOk.appendTo(buttonsContainer);\n  buttonCancel.appendTo(buttonsContainer);\n  buttonsContainer.appendTo(container);\n  container.appendTo(popup.content);\n  var okHandler = function okHandler() {\n    popup.close();\n    if (typeof onOk == \"function\") {\n      onOk();\n    }\n  };\n  buttonOk.click(okHandler);\n  var cancelHandler = function cancelHandler() {\n    popup.close();\n    if (typeof onCancel == \"function\") {\n      onCancel();\n    }\n  };\n  buttonCancel.click(cancelHandler);\n  return {\n    close: function close() {\n      popup.close();\n    },\n    ok: function ok() {\n      okHandler();\n    },\n    cancel: function cancel() {\n      cancelHandler();\n    } };\n\n};\n/*\r\n    * Create an generic dialog\r\n    */\nbizagi.dialog = function (params) {\n\n  var dialog = $(\"<div></div>\").addClass(\"biz-dialog\");\n  var msg = $(\"<p></p>\");\n  msg.text(params.message || \"\");\n  msg.appendTo(dialog);\n  dialog.appendTo($(\"body\", document));\n  dialog.dialog({\n    title: params.title,\n    modal: true,\n    buttons: params.buttons,\n    close: function close() {\n      dialog.dialog(\"destroy\");\n    } });\n\n};\n/*\r\n    *   Close the quirks mode popup window\r\n    */\nbizagi.closeQuirksModePopup = function () {\n  var quirksPopup = window.BAQuirksPopupWindow;\n  window.BAQuirksPopupWindow = null;\n  try {\n    if (quirksPopup)\n    quirksPopup.close();\n  } catch (e) {}\n};\n/**\r\n    * Get css class definition to string\r\n    */\nbizagi.getStyle = function (style) {\n  var pathName = location.href.replace(\"/default.aspx\", \"\");\n  var getFontFace = style.match(/@/) ? true : false;\n  var matchFontFace = \"@font-face\";\n  var getAllChildrens = style.match(/\\*/) ? true : false;\n  var matchStyles = new RegExp(style.replace(\"*\", \"\"), \"g\");\n  var stringCss = \"\";\n  var css;\n  if (style == \"\") {\n    return \"\";\n  }\n  var awesomeBrowser = function awesomeBrowser(style) {\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].rules || document.styleSheets[file].cssRules;\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (document.styleSheets[file].href != null && (document.styleSheets[file].href.match(/less.css/g) == null || BIZAGI_ENVIRONMENT == \"release\")) {\n\n            var cssTextOriginal = css[key].cssText ? css[key].cssText : '';\n            // Get all matches\n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n\n                if ($.browser.webkit) {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"\");\n                } else if ($.browser.msie && $.browser.version == \"8.0\") {\n                  stringCss += css[key].style.cssText;\n                } else {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"../../jquery/workportal/css/desktop\");\n                }\n              }\n            } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n              stringCss += css[key].cssText;\n            }\n\n            // Get @font-face\n            if (getFontFace) {\n              if (css[key] != undefined && cssTextOriginal != undefined) {\n                if (cssTextOriginal.indexOf(matchFontFace) != -1) {\n\n                  if ($.browser.webkit) {\n                    stringCss += cssTextOriginal.replace(/jquery\\/workportal\\/css\\/desktop\\//g, \"\").replace(/\\(path\\)/g, \"\");\n                  } else {\n                    stringCss += cssTextOriginal.replace(/\\(path\\)/g, \"../../\");\n                  }\n\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var suckBrowser = function suckBrowser(style) {\n    if ($.browser.version == \"8.0\") {\n      // That is crazy, but it has the same document.styleSheets structure to chrome and mozilla\n      return awesomeBrowser(style);\n    }\n    var lastLevel;\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].cssRules || document.styleSheets[file].rules;\n\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (BIZAGI_ENVIRONMENT == \"release\") {\n            // Get all matches \n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          } else if (css[key].href != null && css[key].href != undefined && css[key].href.match(/less.css/g) == null) {\n            // Get all matches \n            lastLevel = css[key].styleSheet.cssRules || [];\n            for (var n = 0; n < lastLevel.length; n++) {\n              if (getAllChildrens) {\n                if ((lastLevel[n].selectorText != undefined || lastLevel[n].selectorText != null) && lastLevel[n].selectorText.match(matchStyles) != null) {\n                  //stringCss += lastLevel[n].cssText;\n                  stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n                }\n              } else if (lastLevel[n].selectorText != undefined && lastLevel[n].selectorText == style) {\n                // stringCss += lastLevel[n].cssText;\n                stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var result = $.browser.msie ? suckBrowser(style) : awesomeBrowser(style);\n  return result;\n};\n/**\r\n    * Set and retrieve Cookie\r\n    */\nbizagi.cookie = function (key, value, options) {\n  // key and at least value given, set cookie...\n  if (arguments.length > 1 && String(value) !== \"[object Object]\") {\n    options = $.extend({}, options);\n    if (value === null || value === undefined) {\n      options.expires = -1;\n    }\n\n    if (typeof options.expires === 'number') {\n      var days = options.expires,\n      t = options.expires = new Date();\n      t.setDate(t.getDate() + days);\n    }\n\n    value = String(value);\n    return document.cookie = [\n    encodeURIComponent(key), '=',\n    options.raw ? value : encodeURIComponent(value),\n    options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n    options.path ? '; path=' + options.path : '',\n    options.domain ? '; domain=' + options.domain : '',\n    options.secure ? '; secure' : ''].\n    join('');\n  }\n\n  // key and possibly options given, get cookie...\n  options = value || {};\n  var result,decode = options.raw ? function (s) {\n    return s;\n  } : decodeURIComponent;\n  return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;\n};\n/**\r\n    * Returns a random integer between min and max\r\n    */\nbizagi.util.randomNumber = function (min, max) {\n  min = min || 1;\n  max = max || 10000000;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\r\n    * Set global context values\r\n    * @param params onject\r\n    * @param reset boolean\r\n    */\nbizagi.util.setContext = function (params, reset) {\n  params = params || {};\n  reset = reset || false;\n  if (reset) {\n    bizagi.context = {};\n  }\n  $.each(params, function (key, value) {\n    bizagi.context[key] = value;\n  });\n\n  // Fix camel case in idWorkItem Property\n  bizagi.context[\"idWorkItem\"] = bizagi.context[\"idWorkitem\"];\n};\n\nbizagi.util.reloadCSS = function () {\n  var queryString = '?reload=' + new Date().getTime();\n  $('link[rel=\"stylesheet\"]').each(function () {\n    this.href = this.href.replace(/\\?.*|$/, queryString);\n  });\n};\n\n/**\r\n    * Control recursive calls of setTimeout\r\n    * @param params json {name:name of call,call: function call}\r\n    * @return void\r\n    */\nbizagi.util.setInterval = function (params) {\n  var _name = params.name || 'default';\n  var _call = params.call || function () {};\n  var _params = params.params || {};\n  var _singleton = params.singleton || false;\n  var _timeOut = params.timeout || 5000;\n  var _maxIterations = params.iterations || 1000;\n  var _context = params.context || \"true;\";\n  // If callback its diferent to context, remove from hash\n  var _killWhenExitContext = params.hasOwnProperty('killWhenExitContext') ? params.killWhenExitContext : true;\n  bizagi.timeOut = bizagi.timeOut || {};\n  if (bizagi.timeOut[_name] == undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n  // Check if singleton (run once)\n  if (_singleton && bizagi.timeOut[_name] != undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n\n  bizagi.timeOut[_name].push({\n    name: _name,\n    params: _params,\n    call: _call,\n    singleton: _singleton,\n    timeOut: _timeOut,\n    iterations: 0,\n    maxIterations: _maxIterations,\n    context: _context,\n    killWhenExitContext: _killWhenExitContext,\n    itsRunning: false,\n    timeInit: Math.round(new Date().getTime()) });\n\n  var executeTimeOut = function executeTimeOut() {\n    $.each(bizagi.timeOut, function (k, v) {\n      $.each(v, function (key, value) {\n        var now = Math.round(new Date().getTime());\n        var actualIterations = Math.round((now - value.timeInit) / value.timeOut);\n        bizagi.timeOut[value.name][key]['iterations'] = actualIterations;\n        if (actualIterations < value.maxIterations) {\n          // Check context\t\t\t\t\t\n          if (eval(value.context)) {\n            if (!value.itsRunning) {\n              if (value.params)\n                // Create a virtual function to IE\n                if ($.browser.msie) {\n                  var ieFunction = function ieFunction() {\n                    return value.call(value.params);\n                  };\n                }\n\n              bizagi.timeOut[value.name][key]['pointer'] = $.browser.msie ? setInterval(ieFunction, value.timeOut, 'JavaScript') : setInterval(value.call, value.timeOut, value.params);\n              bizagi.timeOut[value.name][key]['itsRunning'] = true;\n            }\n          } else if (value.killWhenExitContext) {\n            bizagi.timeOut[value.name].splice(key, 1);\n            clearTimeout(value.pointer);\n          } else {\n            bizagi.timeOut[value.name][key]['itsRunning'] = false;\n            clearTimeout(value.pointer);\n          }\n        } else {\n          // Cancel timeout and remove call from hash\n          clearTimeout(value.pointer);\n          bizagi.timeOut[value.name].splice(key, 1);\n        }\n      });\n    });\n  };\n\n  if (!bizagi.timeOutRunning) {\n    bizagi.timeOutRunning = true;\n    setInterval(executeTimeOut, 1000);\n  }\n};\nbizagi.util.isDate = function (value) {\n  // type A) dd/mm/aaaa \n  // type B) aaaa/mm/dd\n  // type C) aa/mm/dd\n\n  var dateRegEx_typeA = /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/,\n  dateRegEx_typeB = /^\\d{4}\\/\\d{1,2}\\/\\d{1,2}$/,\n  dateRegEx_typeC = /^\\d{1,2}\\/\\d{1,2}\\/\\d{1,2}$/,\n  timeRegEx = /^\\d{1,2}:\\d{2}(:\\d{2})?(\\s[aApP][mM])?$/,\n  result = false,\n  resultDate = false,\n  hasTime = false,\n  resultTime = false;\n\n  value = value || '';\n\n  var arrayDate = value.toString().split(\" \"),\n  dateField,\n  timeField;\n\n  dateField = arrayDate[0];\n\n  if (dateRegEx_typeA.test(dateField) || dateRegEx_typeB.test(dateField) || dateRegEx_typeC.test(dateField)) {\n    resultDate = true;\n  }\n\n  if (arrayDate.length > 1) {\n\n    timeField = arrayDate[1];\n\n    hasTime = true;\n\n    //Checks if AM/PM included in the time element\n    if (arrayDate.length == 3)\n    timeField = timeField + ' ' + arrayDate[2];\n\n    if (timeRegEx.test(timeField))\n    resultTime = true;\n  }\n\n  if (hasTime)\n  result = resultDate && resultTime;else\n\n  result = resultDate;\n\n  return result;\n};\n/*\r\n    *   Encodes unicode characters into html\r\n    */\nbizagi.util.unicode2htmlencode = function (input) {\n  // Shorten\n  var natCCA = 'charCodeAt';\n  input = input.replace(/\\r\\n/g, '\\n');\n  var i,b1,hex,\n  len = input.length,\n  htmlHex = '';\n  for (i = 0; i < len; i++) {\n    b1 = input[natCCA](i);\n    hex = b1.toString(16);\n    htmlHex += '&#x' + hex + ';';\n  }\n  return htmlHex;\n};\n/*\r\n    *   Gets the head element from the DOM\r\n    */\nbizagi.util.getHeadElement = function () {\n  var hd = document.getElementsByTagName(\"head\")[0];\n  var docEl = document && document.documentElement;\n  if (!hd) {\n    hd = document.createElement(\"head\");\n    docEl.insertBefore(hd, docEl.firstChild);\n  }\n  // replace head so it runs fast next time.\n  bizagi.util.getHeadElement = function () {\n    return hd;\n  };\n  return hd;\n};\n/*\r\n    *   Loads a css text into the current document\r\n    */\nbizagi.util.loadStyle = function (styleText, layoutGuid) {\n\n  var element = document.getElementById(layoutGuid);\n\n  if (styleText && !element) {// less\n    var css = document.createElement(\"style\");\n    css.type = \"text/css\";\n    css.id = layoutGuid;\n    if (css.styleSheet) {// IE\n      css.styleSheet.cssText = styleText;\n    } else {\n      (function (node) {\n        if (css.childNodes.length) {\n          if (css.firstChild.nodeValue !== node.nodeValue) {\n            css.replaceChild(node, css.firstChild);\n          }\n        } else {\n          css.appendChild(node);\n        }\n      })(document.createTextNode(styleText));\n    }\n    bizagi.util.getHeadElement().appendChild(css);\n  }\n};\n\n/*\r\n    *   Loads a css text of the icon widget into the current document\r\n    */\nbizagi.util.loadIconStyle = function (icon, userfieldname) {\n  bizagi.log(\"bizagi.util.loadIconStyle\");\n  var css = document.createElement(\"style\");\n  css.type = \"text/css\";\n\n  var cssText = \".mtool-item-image-\" + userfieldname + \" { background:url(data:image/png;base64,\" + icon + \"); }\";\n  css.innerHTML = cssText;\n\n  bizagi.util.getHeadElement().appendChild(css);\n};\n\nbizagi.util.formatDecimalAndMoneyCell = function (tableData, externalMoneyFormat) {\n  var moneyFormat, decimalFormat, i, j;\n  var externalDecimalFormat = {\n    decimalSymbol: externalMoneyFormat.decimalSeparator,\n    digitGroupSymbol: externalMoneyFormat.groupSeparator,\n    roundToDecimalPlace: externalMoneyFormat.decimalDigits };\n\n  var defaultMoneyFormat = {\n    symbol: \"€\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n\n  moneyFormat = $.extend(defaultMoneyFormat, externalMoneyFormat);\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n\n  for (i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n    if (tableData.columnTitle[i].type.toUpperCase() == \"FLOAT\" || tableData.columnTitle[i].type.toUpperCase() == \"REAL\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        var numberValue = bizagi.util.formatDecimal(tableData.rows[j].fields[i], decimalFormat);\n        //Gets rids of unnecessary zeros\n        if (bizagi.override.removeTrailingZeros === true) {\n          var positive = true;\n          if (numberValue.toString().indexOf(\")\") != -1) {\n            positive = false;\n            numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n          }\n          var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"$1\");\n          re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"\");\n\n          if (!positive) numberValue = \"(\" + numberValue + \")\";\n        }\n        tableData.rows[j].fields[i] = numberValue;\n      }\n    }\n  }\n\n  return tableData;\n};\n\n\nbizagi.util.formatBoolean = function (value) {\n  if (bizagi.util.parseBoolean(value) == true) {\n    return bizagi.localization.getResource(\"render-boolean-yes\");\n  } else if (bizagi.util.parseBoolean(value) == false) {\n    return bizagi.localization.getResource(\"render-boolean-no\");\n  } else {\n    return \"\";\n  }\n};\n\nbizagi.util.formatInvariantBoolean = function (htmlContent) {\n  htmlContent = htmlContent || \"\";\n  $(\".formatBoolean\", htmlContent).not(\".formatted\").each(function (index, element) {\n    var $element = $(element);\n    var content = $element.html();\n    $element.addClass(\"formatted\");\n    try {\n      var formatBoolean = bizagi.util.formatBoolean(content);\n      $element.html(formatBoolean);\n    } catch (e) {\n      $element.html(content);\n    }\n  });\n};\n\nbizagi.util.formatDecimal = function (value, format) {\n  var i = $(\"<i/>\").text(value);\n  if (i.formatCurrency) {i.formatCurrency(format);}\n  return i.text();\n};\n\n/*\r\n    * Format monetary cells\r\n    */\nbizagi.util.formatMonetaryCells = function (tableData, moneyFormat) {\n\n  var defaultFormat = {\n    symbol: \"€\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n\n  moneyFormat = moneyFormat || defaultFormat;\n\n  for (var i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (var j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n  }\n\n  return tableData;\n\n};\n\n/*\r\n    * Format monetary values, the format must have the structure of the next example:\r\n    *\r\n    * var defaultFormat = {\r\n    *        symbol: \"€\",\r\n    *        decimalSeparator: \",\",\r\n    *        groupSeparator: \".\",\r\n    *        decimalDigits: \"2\"\r\n    *    };\r\n    */\nbizagi.util.formatMoney = function (value, format) {\n  var result = \"\",\n  tmpResult = \"\",\n  intSection = \"\",\n  decimalSection = \"\",\n  decimalResult = \"\",\n  isNegative = value < 0;\n\n  if (value == null) {\n    value = \"\";\n  }\n\n  value = value.toString();\n\n  if (value.length >= 1) {\n    var decimalDigitPosition = value.indexOf(\".\");\n\n    if (decimalDigitPosition > 0) {\n      value = bizagi.util.fixDecimalDigits(value, format.decimalDigits);\n      intSection = value.substring(0, decimalDigitPosition).replace(/\\D/g, '');\n    } else {\n      var zeroChar = \"0\";\n\n      for (var i = 0; i < format.decimalDigits; i++) {\n        decimalResult += zeroChar;\n      }\n      intSection = value.replace(/\\D/g, '');\n    }\n\n    //take only the number characters removing other characters\n    value = value.replace(/\\D/g, '');\n    //take the decimal section\n    if (format.decimalDigits > 0) {\n      decimalSection = decimalDigitPosition > 0 ? format.decimalSeparator + value.substring(value.length - format.decimalDigits, value.length) : format.decimalSeparator + decimalResult;\n    } else {\n      decimalSection = \"\";\n    }\n    //insert groupSeparators into int section\n    if (intSection.length > 3) {\n      var count = 0;\n\n      //insert separator from end to begin\n      for (var i = intSection.length - 1; i >= 0; i--) {\n        if (count == 3) {\n          tmpResult += \".\";\n          count = 0;\n        }\n        tmpResult += intSection[i];\n        count += 1;\n      }\n      //revert the string to get the result value\n      for (var i = tmpResult.length - 1; i >= 0; i--) {\n        result += tmpResult[i];\n      }\n    } else {\n      result = intSection;\n    }\n\n    //replace the correct group separator\n    result = result.replaceAll(\".\", format.groupSeparator);\n    //unify all sections and finish format\n    if (isNegative) {\n      var negativeFormat = bizagi.localization.getResource('numericFormat').negativeFormat;\n      result = negativeFormat.replace(\"%s\", format.symbol).replace(\"%n\", result + decimalSection);\n    } else {\n      result = format.symbol + result + decimalSection;\n    }\n\n    return result;\n  } else {\n    return value;\n  }\n\n\n};\n\n/**\r\n    * Remove all characters except numbers\r\n    */\nbizagi.util.getOnlyNumbersByString = function (stringValue) {\n  return stringValue.replace(/\\D/g, '');\n};\n\n/*\r\n       This method was created because the \"toFixed()\" JavaScript method in some cases round the numbers when it is not needed.\r\n       Can return string or number.\r\n   */\nbizagi.util.fixDecimalDigits = function (value, decimalDigits) {\n  var decimalDigitPosition,\n  intSection,\n  decimalSection;\n\n  decimalDigitPosition = value.indexOf('.');\n  intSection = value.substring(0, decimalDigitPosition);\n  decimalSection = value.substring(decimalDigitPosition + 1, value.length);\n\n  if (decimalDigits > decimalSection.length) {\n    for (var i = decimalSection.length; i < decimalDigits; i++) {\n      value += '0';\n    }\n  } else {\n    value = parseFloat(value).toFixed(decimalDigits);\n  }\n\n  return value;\n\n};\n\n/*\r\n    * Format html  money\r\n    */\nbizagi.util.formatInvariantMoney = function (htmlContent, moneyFormat) {\n  htmlContent = htmlContent || \"\";\n  var defaultFormat = {\n    symbol: moneyFormat.symbol,\n    decimalSeparator: moneyFormat.decimalSeparator || \",\",\n    groupSeparator: moneyFormat.groupSeparator || \".\",\n    decimalDigits: moneyFormat.decimalDigits || \"2\" };\n\n  if (moneyFormat.allowDecimals === false) {\n    defaultFormat.decimalDigits = \"0\";\n  }\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = parseFloat(content);\n      if (!isNaN(value)) {\n        var formatMoney = bizagi.util.formatMoney(value, defaultFormat);\n        $(elem).html(formatMoney);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html  number\r\n    */\nbizagi.util.formatInvariantNumber = function (htmlContent, numberFormat) {\n  htmlContent = htmlContent || \"\";\n  var decimalDigits = \"2\";\n  if (numberFormat.decimalDigits == \"0\")\n  decimalDigits = \"0\";else\n\n  decimalDigits = numberFormat.decimalDigits || \"2\";\n\n  var groupSeparator = bizagi.util.isString(numberFormat.groupSeparator) && numberFormat.groupSeparator ? numberFormat.groupSeparator : \".\";\n\n  var defaultFormat = {\n    symbol: \"\",\n    decimalSeparator: numberFormat.decimalSeparator || \",\",\n    groupSeparator: numberFormat.groupSeparator || numberFormat.thousands ? groupSeparator : \"\",\n    decimalDigits: decimalDigits };\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var containsLetter = content.match(/[a-zA-Z]/);\n      var value = containsLetter != null && containsLetter.length > 0 ? NaN : parseFloat(content);\n      if (!isNaN(value)) {\n        var formatNumber = bizagi.util.formatMoney(value, defaultFormat);\n        if (numberFormat.percentage) {\n          formatNumber = formatNumber.toString() + \"%\";\n        }\n        $(elem).html(formatNumber);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html with invariant date\r\n    */\nbizagi.util.formatInvariantDate = function (htmlContent, dateFormat) {\n  htmlContent = htmlContent || \"\";\n  dateFormat = dateFormat || \"MM/dd/yyyy hh:mm:ss\";\n  $(\".formatDate\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = new Date(content);\n      var dateTimeFormat = dateFormat;\n\n      if (bizagi.util.isValidDate(value))\n      dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n      var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat /*self.getResource(\"dateFormat\")*/);\n      $(elem).html(formatDate);\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/**\r\n    * Return format date with resources from string invariant date. It use the format specified\r\n    * @param stringInvariantDate\r\n    */\nbizagi.util.formatDateFromInvariantStringDate = function (stringInvariantDate) {\n  if (bizagi.util.isValidDate(stringInvariantDate)) {\n    var dateTimeFormat = bizagi.localization.getResource(\"dateFormat\") + ' ' + bizagi.localization.getResource(\"timeFormat\");\n    var value = new Date(stringInvariantDate);\n    dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n    var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat);\n    return formatDate;\n  }\n  return stringInvariantDate || \"\";\n};\n\nbizagi.util.getFormatDate = function (dateValue, defaultFormatDate) {\n  var dateTimeFormat = defaultFormatDate;\n\n  var H = dateValue.getHours();\n  var m = dateValue.getMinutes();\n  var s = dateValue.getSeconds();\n  var ms = dateValue.getMilliseconds();\n  var hide = bizagi.override.hideTimeWhenHourMinutesSecondsAreZero;\n\n  //Don't show time when hour, minutes, seconds and milliseconds are 0\n  if (H === 0 && m === 0 && s === 0 && ms === 0 && hide)\n  dateTimeFormat = bizagi.localization.getResource(\"dateFormat\");\n\n  return dateTimeFormat;\n};\n\n/**\r\n    * Format value by dataType\r\n    */\nbizagi.util.formatValueByDataType = function (value, dataType) {\n  /**\r\n                                                                 * Types Definedin Backend\r\n                                                                 * None = 0,BigInt = 1,Int = 2,SmallInt = 3,TinyInt = 4,Boolean = 5,Decimal = 6,Numeric = 7,Money = 8,Float = 10,Real = 11,DateTime = 12,SmallDateTime = 13,\r\n                                                                 Char = 14,VarChar = 15,Text = 16,Binary = 17,VarBinary = 18,Image = 19,Guid = 20,NChar = 21,NVarChar = 22,NText = 23,MxMBidirectionalRelationship = 24,\r\n                                                                 MxMUnidirectionalRelationship = 25,EntityDisabled = 26,UserAuth = 27,MxMUnidirectionalRelationshipWithoutFilter = 28,OracleNumber = 29,\r\n                                                                 Stakeholder = 30,ActivityItems = 31\r\n                                                                 *\r\n                                                                 * */\n  var result = value;\n  switch (dataType) {\n    case \"NText\":\n    case 23:\n    case \"Char\":\n    case 14:\n    case \"VarChar\":\n    case 15:\n    case \"Text\":\n    case 16:\n      if (value && value.length > 30) {\n        result = bizagi.util.replaceLineBreak(value);\n      }\n      break;\n    case \"Boolean\":\n    case 5:\n    case \"Binary\":\n    case 17:\n      result = bizagi.util.formatBoolean(value);\n      break;\n    case \"Int\":\n    case 2:\n    case \"BigInt\":\n    case 1:\n    case \"SmallInt\":\n    case 3:\n    case \"TinyInt\":\n    case 4:\n    case \"Numeric\":\n    case 7:\n      result = value === undefined || value === null ? \"\" : value;\n      break;\n    case \"Money\":\n    case 8:\n      result = bizagi.util.formatMonetaryCell(value);\n      break;\n    case \"Float\":\n    case 10:\n    case \"Real\":\n    case 11:\n    case \"Decimal\":\n    case 6:\n      result = bizagi.util.formatDecimalCell(value);\n      break;\n    case \"DateTime\":\n    case 12:\n    case \"SmallDateTime\":\n    case 13:\n      result = bizagi.util.formatDateFromInvariantStringDate(value);\n      break;}\n\n  if (result == null) {\n    result = \"\";\n  }\n  return result;\n};\n\n/**\r\n    * Check if it is a valid date\r\n    */\nbizagi.util.isValidDate = function (params) {\n  if (typeof params != \"undefined\" && params != null) {\n    var parseDate = new Date(params);\n    return !isNaN(parseDate.valueOf());\n  } else return false;\n};\n\n/*\r\n    *   Defines a date time formatter that will be available globally\r\n    */\nbizagi.util.monthNames = new Array('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');\nbizagi.util.dayNames = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat');\n\nbizagi.util.dateFormatter = new function () {\n  this.LZ = function (x) {\n    return (x < 0 || x > 9 ? \"\" : \"0\") + x;\n  };\n  /*\r\n      *   isDate ( date_string, format_string )\r\n      *   Returns true if date string matches format of format string and\r\n      *   is a valid date. Else returns false.\r\n      *   It is recommended that you trim whitespace around the value before\r\n      *   passing it to this function, as whitespace is NOT ignored!\r\n      */\n  this.isDate = function (val, format) {\n    var date = this.getDateFromFormat(val, format);\n    if (date == 0) {\n      return false;\n    }\n    return true;\n  };\n\n  this.getRelativeTime = function (date, dateFormat, onlyUnitsTime, timeZone) {\n\n    var self = this;\n    var now = timeZone ? new Date(moment().tz(bizagi.currentUser.timeZoneName).format()) : new Date();\n    var time = date instanceof Date ? date : kendo.parseDate(date, dateFormat);\n    var diff = now.getTime() - time.getTime();\n    var timeDiff = getTimeDiffDescription(diff, 'year', 31536000000, onlyUnitsTime);\n\n    if (!timeDiff) {\n      timeDiff = getTimeDiffDescription(diff, 'month', 2628000000, onlyUnitsTime);\n      if (!timeDiff) {\n        timeDiff = getTimeDiffDescription(diff, 'week', 604800000, onlyUnitsTime);\n        if (!timeDiff) {\n          timeDiff = getTimeDiffDescription(diff, 'day', 86400000, onlyUnitsTime);\n          if (!timeDiff) {\n            timeDiff = getTimeDiffDescription(diff, 'hour', 3600000, onlyUnitsTime);\n            if (!timeDiff) {\n              timeDiff = getTimeDiffDescription(diff, 'minute', 60000, onlyUnitsTime);\n              if (!timeDiff) {\n                if (onlyUnitsTime) {\n                  if (diff === 0) {\n                    timeDiff = getTimeDiffDescription(diff + 1, 'minute', 1, onlyUnitsTime);\n                  } else {\n                    timeDiff = getTimeDiffDescription(diff, 'minute', 1, onlyUnitsTime);\n                  }\n                } else {\n                  timeDiff = getTimeDiffDescription(diff, 'second', 2000, onlyUnitsTime);\n                  if (!timeDiff) {\n                    timeDiff = bizagi.localization.getResource(\"workportal-relativetime-momentago\");\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return timeDiff;\n\n    /*\r\n                      * Get Time Difference\r\n                      */\n    function getTimeDiffDescription(diff, unit, timeDivisor, onlyUnitsTime) {\n      var unitAmount = (diff / timeDivisor).toFixed(0);\n\n      if (unitAmount > 0) {\n        if (onlyUnitsTime) {\n          return unitAmount == 1 ? bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount) : bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount);\n        } else {\n          var resourceAgo = bizagi.localization.getResource(\"workportal-relativetime-ago\");\n          return unitAmount == 1 ? resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount)) : resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount));\n        }\n\n      } else {\n        return null;\n      }\n    }\n  };\n\n  /*\r\n      *   compareDates(date1,date1format,date2,date2format)\r\n      *   Compare two date strings to see which is greater.\r\n      *   Returns:\r\n      *   1 if date1 is greater than date2\r\n      *   0 if date2 is greater than date1 of if they are the same\r\n      *  -1 if either of the dates is in an invalid format\r\n      */\n  this.compareDates = function (date1, dateformat1, date2, dateformat2) {\n    var d1 = getDateFromFormat(date1, dateformat1);\n    var d2 = getDateFromFormat(date2, dateformat2);\n    if (d1 == 0 || d2 == 0) {\n      return -1;\n    } else if (d1 > d2) {\n      return 1;\n    }\n    return 0;\n  };\n  /*\r\n      *   getDifferenceBetweenDates(date1,date2, unit)\r\n      *   Compare two date objects to see difference between them. The number result by unit specified.\r\n      *\r\n      *   Returns:\r\n      *   Difference value between two dates.\r\n      *   Message string if either of the dates is in an invalid format\r\n      */\n  this.getDifferenceBetweenDates = function (date1, date2, unit) {\n    if (date1 instanceof Date && date1 instanceof Date) {\n      switch (unit) {\n        case \"seconds\":\n          return (date2.getTime() - date1.getTime()) / 1000;\n        case \"milliseconds\":\n          return date2.getTime() - date1.getTime();\n        default:\n          return \"unit is not Defined\";}\n\n    } else {\n      return \"one param not is Date\";\n    }\n\n  };\n  /*\r\n      *   formatDate (date_object, format)\r\n      *   Returns a date in the output format specified.\r\n      *   The format string uses the same abbreviations as in getDateFromFormat()\r\n      */\n  this.formatDate = function (date, format, i18n) {\n    // Check if date is valid\n    if (!bizagi.util.isValidDate(date) || date == 0) {\n      return \"\";\n    }\n\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    format = format + \"\";\n    var result = \"\";\n    var i_format = 0;\n    var c;\n    var token;\n    var y = date.getFullYear() + \"\";\n    var M = date.getMonth() + 1;\n    var d = date.getDate();\n    var E = date.getDay();\n    var H = date.getHours();\n    var m = date.getMinutes();\n    var s = date.getSeconds();\n    var f = date.getMilliseconds();\n    // Convert real date parts into formatted versions\n    var value = new Object();\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    if (y.length < 4 || y.charAt(0) === \"-\" && y.length < 5) {\n      y = \"\" + (y - 0 + 1900);\n    }\n    value[\"y\"] = \"\" + y;\n    value[\"yyyy\"] = y;\n    value[\"yy\"] = y.substring(2, 4);\n    value[\"M\"] = M;\n    value[\"MM\"] = this.LZ(M);\n    value[\"MMM\"] = monthNames[M + 11];\n    value[\"MMMM\"] = monthNames[M - 1];\n    value[\"NNN\"] = monthNames[M + 11];\n    value[\"d\"] = d;\n    value[\"dd\"] = this.LZ(d);\n    value[\"ddd\"] = dayNames[E + 7];\n    value[\"dddd\"] = dayNames[E];\n    value[\"E\"] = dayNames[E + 7];\n    value[\"EE\"] = dayNames[E];\n    value[\"H\"] = H;\n    value[\"HH\"] = this.LZ(H);\n    value[\"tt\"] = H < 12 ? \"am\" : \"pm\";\n    value[\"TT\"] = H < 12 ? \"AM\" : \"PM\";\n\n\n    if (H == 0) {\n      value[\"h\"] = 12;\n    } else if (H > 12) {\n      value[\"h\"] = H - 12;\n    } else {\n      value[\"h\"] = H;\n    }\n    value[\"hh\"] = this.LZ(value[\"h\"]);\n    if (H > 11) {\n      value[\"K\"] = H - 12;\n    } else {\n      value[\"K\"] = H;\n    }\n    value[\"k\"] = H + 1;\n    value[\"KK\"] = this.LZ(value[\"K\"]);\n    value[\"kk\"] = this.LZ(value[\"k\"]);\n    if (H > 11) {\n      value[\"a\"] = \"PM\";\n    } else {\n      value[\"a\"] = \"AM\";\n    }\n    value[\"m\"] = m;\n    value[\"mm\"] = this.LZ(m);\n    value[\"s\"] = s;\n    value[\"ss\"] = this.LZ(s);\n    value[\"FFF\"] = f;\n\n    while (i_format < format.length) {\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      if (value[token] != null) {\n        result = result + value[token];\n      } else {\n        result = result + token;\n      }\n    }\n    return result;\n  };\n  /*\r\n      *   getDateFromFormat( date_string , format_string )\r\n      *\r\n      *   This function takes a date string and a format string. It matches\r\n      *   If the date string matches the format string, it returns the \r\n      *   getTime() of the date. If it does not match, it returns 0.\r\n      */\n  this.getDateFromFormat = function (val, format, i18n) {\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    val = val + \"\";\n    format = format + \"\";\n    var i_val = 0;\n    var i_format = 0;\n    var c;\n    var token;\n    var x = 0,\n    y = 0;\n    var now = new Date();\n    var year = now.getYear();\n    var month = now.getMonth() + 1;\n    var date = 1;\n    var hh = now.getHours();\n    var mm = now.getMinutes();\n    var ss = now.getSeconds();\n    var FFF = now.getMilliseconds();\n    var ampm = \"\";\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    while (i_format < format.length) {\n      // Get next token from format string\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      // Extract contents of value based on format token\n      if (token == \"yyyy\" || token == \"yy\" || token == \"y\") {\n        if (token == \"yyyy\") {\n          x = 4;\n          y = 4;\n        }\n        if (token == \"yy\") {\n          x = 2;\n          y = 2;\n        }\n        if (token == \"y\") {\n          x = 2;\n          y = 4;\n        }\n        year = _getInt(val, i_val, x, y);\n        if (year == null) {\n          return 0;\n        }\n        i_val += year.length;\n        if (year.length == 2) {\n          if (year > 70) {\n            year = 1900 + (year - 0);\n          } else {\n            year = 2000 + (year - 0);\n          }\n        }\n      } else if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\") {\n        month = 0;\n        for (var i = 0; i < monthNames.length; i++) {\n          var month_name = monthNames[i];\n          if (val.substring(i_val, i_val + month_name.length).toLowerCase() == month_name.toLowerCase()) {\n            if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\" && i > 11) {\n              month = i + 1;\n              if (month > 12) {\n                month -= 12;\n              }\n              i_val += month_name.length;\n              break;\n            }\n          }\n        }\n\n        //This is because bizagi assumes MM and M like integers in some cases\n        if (month == 0) {\n          month = _getInt(val, i_val, 1, 2);\n          if (month == null || month < 1 || month > 12) {\n            return 0;\n          }\n          i_val += month.length;\n        }\n\n        if (month < 1 || month > 12) {\n          return 0;\n        }\n      } else if (token == \"dddd\" || token == \"EE\" || token == \"E\") {\n        for (var j = 0; j < dayNames.length; j++) {\n          var day_name = dayNames[j];\n          if (val.substring(i_val, i_val + day_name.length).toLowerCase() == day_name.toLowerCase()) {\n            i_val += day_name.length;\n            break;\n          }\n        }\n      } else if (token == \"MM\" || token == \"M\") {\n        month = _getInt(val, i_val, 1, 2);\n        if (month == null || month < 1 || month > 12) {\n          return 0;\n        }\n        i_val += month.length;\n      } else if (token == \"dd\" || token == \"d\") {\n        date = _getInt(val, i_val, 1, 2);\n        if (date == null || date < 1 || date > 31) {\n          return 0;\n        }\n        i_val += date.length;\n      } else if (token == \"hh\" || token == \"h\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 12) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"HH\" || token == \"H\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 23) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"KK\" || token == \"K\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 11) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"kk\" || token == \"k\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 24) {\n          return 0;\n        }\n        i_val += hh.length;\n        hh--;\n      } else if (token == \"mm\" || token == \"m\") {\n        mm = _getInt(val, i_val, token.length, 2);\n        if (mm == null || mm < 0 || mm > 59) {\n          return 0;\n        }\n        i_val += mm.length;\n      } else if (token == \"ss\" || token == \"s\") {\n        ss = _getInt(val, i_val, token.length, 2);\n        if (ss == null || ss < 0 || ss > 59) {\n          return 0;\n        }\n        i_val += ss.length;\n      } else if (token == \"FFF\") {\n        ff = _getInt(val, i_val, token.length, 3);\n        if (ff == null || ff < 0 || ff > 999) {\n          return 0;\n        }\n        i_val += ff.length;\n      } else if (token == \"a\" || token == \"tt\") {\n        if (val.substring(i_val, i_val + 2).toLowerCase() == \"am\") {\n          ampm = \"AM\";\n        } else if (val.substring(i_val, i_val + 2).toLowerCase() == \"pm\") {\n          ampm = \"PM\";\n        } else {\n          return 0;\n        }\n        i_val += 2;\n      } else {\n        if (val.substring(i_val, i_val + token.length) != token) {\n          return 0;\n        } else {\n          i_val += token.length;\n        }\n      }\n    }\n\n    // Is date valid for month?\n    if (month == 2) {\n      // Check for leap year\n      if (year % 4 == 0 && year % 100 != 0 || year % 400 == 0) {// leap year\n        if (date > 29) {\n          return 0;\n        }\n      } else {\n        if (date > 28) {\n          return 0;\n        }\n      }\n    }\n    if (month == 4 || month == 6 || month == 9 || month == 11) {\n      if (date > 30) {\n        return 0;\n      }\n    }\n    // Correct hours value\n    if (hh < 12 && ampm == \"PM\") {\n      hh = hh - 0 + 12;\n    } else if (hh > 11 && ampm == \"AM\") {\n      hh -= 12;\n    }\n    var newdate = new Date(year, month - 1, date, hh, mm, ss);\n    return newdate;\n\n    /*\r\n                     *   Utility method for parsing in getDateFromFormat()\r\n                     */\n    function _isInteger(_val) {\n      var digits = \"1234567890\";\n      for (var k = 0; k < _val.length; k++) {\n        if (digits.indexOf(_val.charAt(k)) == -1) {\n          return false;\n        }\n      }\n      return true;\n    };\n    /*\r\n        *   Utility method for parsing in getDateFromFormat()\r\n        */\n    function _getInt(str, l, minlength, maxlength) {\n      for (var m = maxlength; m >= minlength; m--) {\n        var _token = str.substring(l, l + m);\n        if (_token.length < minlength) {\n          return null;\n        }\n        if (_isInteger(_token)) {\n          return _token;\n        }\n      }\n      return null;\n    };\n  };\n  /*\r\n      * parseDate( date_string [, prefer_euro_format] )\r\n      *\r\n      * This function takes a date string and tries to match it to a\r\n      * number of possible date formats to get the value. It will try to\r\n      * match against the following international formats, in this order:\r\n      * y-M-d   MMM d, y   MMM d,y   y-MMM-d   d-MMM-y  MMM d\r\n      * M/d/y   M-d-y      M.d.y     MMM-d     M/d      M-d\r\n      * d/M/y   d-M-y      d.M.y     d-MMM     d/M      d-M\r\n      * A second argument may be passed to instruct the method to search\r\n      * for formats like d/M/y (european format) before M/d/y (American).\r\n      * Returns a Date object or null if no patterns match.\r\n      */\n  this.parseDate = function (val) {\n    var preferEuro = arguments.length == 2 ? arguments[1] : false;\n    var generalFormats = new Array('y-M-d', 'MMM d, y', 'MMM d,y', 'y-MMM-d', 'd-MMM-y', 'MMM d');\n    var monthFirst = new Array('M/d/y', 'M-d-y', 'M.d.y', 'MMM-d', 'M/d', 'M-d');\n    var dateFirst = new Array('d/M/y', 'd-M-y', 'd.M.y', 'd-MMM', 'd/M', 'd-M');\n    var checkList = new Array(generalFormats, preferEuro ? dateFirst : monthFirst, preferEuro ? monthFirst : dateFirst);\n    var d;\n    for (var i = 0; i < checkList.length; i++) {\n      var l = window[checkList[i]];\n      for (var j = 0; j < l.length; j++) {\n        d = getDateFromFormat(val, l[j]);\n        if (d != 0) {\n          return new Date(d);\n        }\n      }\n    }\n    return null;\n  };\n  /*\r\n      *   Method to analyze a time format and checks separator, and hour format, and seconds\r\n      */\n  this.analyzeTimeFormat = function (timeFormat) {\n    var i = 0;\n    var c;\n    // Define return object\n    var returnObj = {\n      show24Hours: false,\n      showSeconds: false,\n      separator: \":\" };\n\n    // Analize format\n    var token,lastToken = \"\";\n    while (i < timeFormat.length) {\n      // Get next token from format string\n      c = timeFormat.charAt(i);\n      token = \"\";\n      while (timeFormat.charAt(i) == c && i < timeFormat.length) {\n        token += timeFormat.charAt(i++);\n      }\n\n      // Extract contents of value based on format token\n      if (token == \"hh\" || token == \"h\") {\n        lastToken = token;\n        returnObj.show24Hours = false;\n      } else if (token == \"HH\" || token == \"H\") {\n        lastToken = token;\n        returnObj.show24Hours = true;\n      } else if (token == \"mm\" || token == \"m\") {\n        lastToken = token;\n      } else if (token == \"ss\" || token == \"s\") {\n        lastToken = token;\n        returnObj.showSeconds = true;\n      } else if (token == \"a\") {\n        lastToken = token;\n      } else {\n        if (lastToken.toUpperCase() == \"H\" || lastToken.toUpperCase() == \"HH\") {\n          returnObj.separator = token;\n        }\n      }\n    }\n\n    return returnObj;\n  };\n  this.getDateFromInvariant = function (value, showTime) {\n    value = value == null ? \"\" : value;\n    value = typeof value != \"string\" ? value.toString() : value;\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" H:mm:ss\" : \"\");\n    if (showTime) {\n      if (value && (value.toLowerCase().indexOf(\"am\") > 0 || value.toLowerCase().indexOf(\"pm\") > 0)) {\n        INVARIANT_FORMAT = \"MM/dd/yyyy h:mm:ss a\";\n      }\n    }\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    } else if (date == 0 && showTime && value != null && value != \"\") {\n      INVARIANT_FORMAT = \"MM/dd/yyyy\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n      date.setHours(0, 0, 0, 0);\n    }\n\n    return date;\n  };\n  this.formatInvariant = function (date, showTime) {\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" HH:mm:ss\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, INVARIANT_FORMAT);\n    return formattedDate;\n  };\n  this.getDateFromISO = function (value, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    // If the date could not be parsed, try it out with seconds\n    if (date == 0 && showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm:ss\" : \"\");\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    }\n\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd HH:mm\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      // If the date could not be parsed, try it out with seconds\n      if (date == 0) {\n        ISO_FORMAT = \"yyyy-MM-dd HH:mm:ss\";\n        date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      }\n    }\n\n    return date;\n  };\n  this.formatISO = function (date, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, ISO_FORMAT);\n    return formattedDate;\n  };\n\n  this.formatISO8601 = function (dateObject, restartTimeToMidnight) {\n    var restartTimeToMidnight = restartTimeToMidnight || false;\n    var ISO_FORMAT8601 = \"yyyy-MM-ddTHH:mm:ss\";\n    if (restartTimeToMidnight) {\n      dateObject.setHours(0, 0, 0, 0);\n    }\n    return bizagi.util.dateFormatter.formatDate(dateObject, ISO_FORMAT8601);\n  };\n\n  this.isFormatISO8601 = function (stringDate) {\n    var ISO_8601_WITH_TIME = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n    return ISO_8601_WITH_TIME.test(stringDate);\n  };\n\n  this.sleep = function (delay) {\n    // Delay in miliseconds\n    var start = new Date().getTime();\n    while (new Date().getTime() < start + delay) {\n      // wait\n    }\n  };\n  this.getDateFormatByDatePickerJqueryUI = function () {\n    return bizagi.localization.getResource(\"dateFormat\").replace(\"yyyy\", \"yy\");\n  };\n}();\n\nbizagi.util.sleepUntil = function (callback, delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepUntil() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      var continueWaiting = !callback();\n      if (!continueWaiting) {\n        def.resolve();\n        clearTimeout(timeout);\n        return;\n      } else\n      internalSleepUntil(name);\n    }, delay);\n  }\n  internalSleepUntil();\n  return def.promise();\n};\n\nbizagi.util.sleepFor = function (delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepFor() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      def.resolve();\n      clearTimeout(timeout);\n    }, delay);\n  }\n  internalSleepFor();\n  return def.promise();\n};\n\n\n/*\r\n    * Use localStorage in html5 verfiy supports and operations \r\n    * http://dev.w3.org/html5/webstorage/#dom-storage-setitem\r\n    */\n\nbizagi.util.browserSupportLocalStorage = function () {\n  try {\n    return 'localStorage' in window && window['localStorage'] !== null;\n  } catch (e) {\n    return false;\n  }\n};\n/*\r\n    *set the item  in the local storage\r\n    */\nbizagi.util.setItemLocalStorage = function (key, value) {\n  if (bizagi.util.browserSupportLocalStorage()) {\n    localStorage.setItem(key, value);\n    return true;\n  } else {\n    return false;\n  }\n};\n\nbizagi.util.getItemLocalStorage = function (key) {\n  return localStorage.getItem(key);\n};\n\nbizagi.util.removeItemLocalStorage = function (key) {\n  localStorage.removeItem(key);\n};\n\nbizagi.util.clearLocalStorage = function () {\n  if (bizagi.util.browserSupportLocalStorage())\n  localStorage.clear();\n};\n\nfunction printf(msg) {\n  var args = Array.prototype.slice.call(arguments, 1),arg;\n  return msg.replace(/(%[disv])/g, function (a, val) {\n    arg = args.shift();\n    if (arg !== undefined) {\n      switch (val.charCodeAt(1)) {\n        case 100:\n          return +arg; // d\n        case 105:\n          return Math.round(+arg); // i\n        case 115:\n          return String(arg); // s\n        case 118:\n          return arg; // v\n      }\n    }\n    return val;\n  });\n}\n\n\n// Fix problem with console.log when we forgot to remove it\n(function () {\n  var environment = typeof BIZAGI_ENVIRONMENT != \"undefined\" ? BIZAGI_ENVIRONMENT : \"release\";\n  if (environment == 'debug') {\n    if (_typeof(window.console) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    }\n  } else {\n    if ((typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    } else if (bizagiConfig && !bizagiConfig.showConsoleLog) {\n      console.log = function (a) {/*Nothing to do*/};\n    }\n  }\n})();\n\n\nbizagi.util.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"ui-widget-overlay ui-front\" style=\"z-index: 1001;\"><div class=\"ui-bizagi-loading-message-center\" style=\"position: absolute; top: 48%; left: 48%; display: ;\"><div class=\"ui-bizagi-loading-icon\"></div></div></div>');\n};\nbizagi.util.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".ui-widget-overlay:first\", elementToapply).remove();\n};\n\nbizagi.util.smartphone.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"bz-util-loading-container\"> <div class=\"ui-bizagi-loading-icon bz-util-loading\"></div>  </div>');\n};\nbizagi.util.smartphone.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".bz-util-loading-container\", elementToapply).remove();\n};\n\n\n\n/**\r\n    * determines whether the element in the browser supports the event we are looking for, eg 'paste', 'input', 'blur', etc. More info check modernizer.js.\r\n    * @param  {string|*}           eventName  is the name of an event to test for (e.g. \"resize\")\r\n    * @param  {(Object|string|*)=} element    is the element|document|window|tagName to test on\r\n    * @return {boolean}\r\n    */\nbizagi.util.isEventSupported = function (eventName, element) {\n  var needsFallback = !('onblur' in document.documentElement);\n  var isSupported;\n\n  if (!eventName) {\n    return false;\n  }\n  if (!element || typeof element === 'string') {\n    element = document.createElement(element || 'div');\n  }\n\n  // Testing via the `in` operator is sufficient for modern browsers and IE.\n  // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n  // \"resize\", whereas `in` \"catches\" those.\n  eventName = 'on' + eventName;\n  isSupported = eventName in element;\n\n  // Fallback technique for old Firefox - bit.ly/event-detection\n  if (!isSupported && needsFallback) {\n    if (!element.setAttribute) {\n      // Switch to generic element if it lacks `setAttribute`.\n      // It could be the `document`, `window`, or something else.\n      element = document.createElement('div');\n    }\n    if (element.setAttribute && element.removeAttribute) {\n      element.setAttribute(eventName, '');\n      isSupported = typeof element[eventName] === 'function';\n\n      if (element[eventName] !== undefined) {\n        // If property was created, \"remove it\" by setting value to `undefined`.\n        element[eventName] = undefined;\n      }\n      element.removeAttribute(eventName);\n    }\n  }\n  return isSupported;\n};\n\n\n/**\r\n    * Execute deferreds in order\r\n    * @example var a = new bizagiQueue(); a.add(function);\r\n    * \r\n    */\nfunction bizagiQueue() {\n  var self = this;\n  var queue = [];\n  var async;\n  var sync;\n\n  self.length = function () {\n    return queue.length;\n  };\n\n  self.add = function (callback) {\n    if (!sync) {\n      sync = true;\n      async = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.addParallel = function (callback) {\n    if (!async) {\n      async = true;\n      sync = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    // Put a parallel on last item\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.execute = function () {\n    var starter = new $.Deferred();\n    var promise = starter.promise();\n    var queueLength = queue.length;\n    for (var i = 0; i < queueLength; i++) {\n      promise = promise.pipe(function () {\n        var element = queue.shift();\n        return $.when.apply($, $.map(element.callbacks, function (callback) {\n          // Function support\n          if (typeof callback == \"function\") {\n            var deferred = $.Deferred();\n            $.when(callback()).done(function () {\n              deferred.resolve();\n            }).fail(function () {\n              deferred.reject();\n            });\n            return deferred.promise();\n          }\n          // Deferred support\n          return callback;\n        }));\n      });\n    }\n\n    starter.resolve();\n    promise = promise.done(function () {\n      // Reset queue\n      queue = [];\n    });\n\n    return promise;\n  };\n}\n\n\n/**\r\n   * Calculate circular dependencies \r\n   * \r\n   * @example var a = new bizagi.circularDependencies(); a.addNode('name',obj);\r\n   * a.resolve(node);\r\n   * \r\n   */\n//TODO: DEPL - Check this because we agreed to a much simpler solution\nbizagi.circularDependencies = function () {\n  var circularDependencies = new Function();\n  var self = circularDependencies.prototype;\n  self.list = []; //[{ name: \"root\", obj: {}, nodeObj: {}, childs: {} }];\n  self.lastNodeAdded; // Undefined reference\n\n  self.addNode = function (name, obj) {\n    var OBJ = JSON.encode(obj);\n    var foundObjChildNode = _search(name, OBJ);\n    if (foundObjChildNode) {\n      var lastNode = self.lastNodeAdded || self.list[self.list.length - 1];\n      lastNode.nodeObj.addChild(foundObjChildNode.nodeObj);\n      self.lastNodeAdded = foundObjChildNode;\n    } else {\n      var node = new _addNode(name, OBJ);\n      self.list.push({\n        name: name,\n        obj: OBJ,\n        nodeObj: node,\n        timeStamp: new Date().getTime() });\n\n      return node;\n    }\n  };\n\n  self.resolve = function (node, resolved, seen) {\n    // if dont setted node variable, take the first one -> root\n    node = node || _getFirstNodeWithChilds() || self.list[0].nodeObj;\n    var resolveDependencies = new _resolve(node, resolved, seen);\n    return resolveDependencies;\n  };\n\n  var _resetList = function _resetList() {\n    self.list = [];\n  };\n\n  var _getFirstNodeWithChilds = function _getFirstNodeWithChilds() {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].nodeObj.childs.length > 0) {\n        return self.list[i].nodeObj;\n      }\n    }\n    return self.list.length > 0 ? self.list[0].nodeObj : {};\n  };\n\n  var _search = function _search(name, obj) {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].name == name) {\n        // remove tag element\n        var now = new Date().getTime();\n        var timeToKeep = 1000; //milliseconds\n        if (self.list[i].timeStamp + timeToKeep < now) {\n          //remove element from the list\n          self.list.splice(i, 1);\n        } else if (self.list[i].obj == obj) {\n          return self.list[i];\n        }\n      }\n    }\n    return false;\n  };\n\n  var _addNode = function (name, obj) {\n    name = name || \"\";\n    obj = obj || {};\n    var node = function node(name, obj) {\n      this.name = name;\n      this.obj = obj;\n      this.childs = [];\n    };\n    var self = node.prototype;\n\n    self.addChild = function (node) {\n      this.childs.push(node);\n    };\n\n    return node;\n  }();\n\n  var _resolve = function (node, resolved, seen) {\n    var resolve = function resolve(node, resolved, seen) {\n      this.node = node || {};\n      this.node.childs = this.node.childs || [];\n      this.resolved = resolved || [];\n      this.seen = seen || [];\n\n      this.seen.push(this.node);\n\n      for (var i = 0; i < this.node.childs.length; i++) {\n        if (!self.hasObject(this.node.childs[i], this.resolved)) {\n          if (self.hasObject(this.node.childs[i], this.seen)) {\n            //throw new _error(\"error node:\" + node.name + \" -> \" + node.childs[i].name);\n            _resetList();\n            var error = {\n              dependencyFrom: this.node.name,\n              dependencyFromObj: this.node.obj,\n              dependencyTo: this.node.childs[i].name,\n              dependencyToObj: this.node.childs[i].obj,\n              path: this.seen };\n\n\n            return {\n              error: $.extend({\n                standardError: {\n                  status: \"error\",\n                  responseText: JSON.encode({ message: self.makeErrorMessage(error), type: \"alert\" }) },\n\n                multiactionError: {\n                  message: self.makeErrorMessage(error),\n                  type: \"alert\" } },\n\n              error) };\n\n          } else {\n            return resolve(this.node.childs[i], this.resolved, this.seen);\n          }\n        }\n      }\n      if (this.resolved) {\n        this.resolved.push(this.node);\n      }\n    };\n\n    var self = resolve.prototype;\n\n    self.hasObject = function (toSearch, collection) {\n\n      for (var i = 0; i < collection.length; i++) {\n        if (collection[i].name == toSearch.name) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    self.makeErrorMessage = function (error) {\n      var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n      return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n\n      /*  return {\r\n                                                                                  responseText: parsedMessage,\r\n                                                                                  message: parsedMessage,\r\n                                                                                  extraInfo: error\r\n                                                                              };*/\n    };\n\n    return resolve;\n  }();\n\n  return self;\n};\n\n/**\r\n    * Apply css string style (one or more). It works to add or override a specific style even if it has !important\r\n    * \r\n    * @example bizagi.util.cssExtended($('.myClass'), 'display:none!important;color:red');\r\n    * \r\n    */\nbizagi.util.cssExtended = function (instance, options) {\n  var cssToAdd = options.split(\";\");\n\n  for (i = 0; i < cssToAdd.length; i++) {\n    if (cssToAdd[i] != \"\") {\n      bizagi.util.cssExtendedApplyChanges(instance, cssToAdd[i]);\n    }\n  }\n\n};\n\n/**\r\n    * Apply the style change \r\n    * \r\n    */\nbizagi.util.cssExtendedApplyChanges = function (instance, option) {\n\n  for (var i = 0; i < instance.length; i++) {\n    var $this = $(instance[i]);\n    var attrToAdd = option.split(\":\")[0];\n\n    if ($this.attr('style')) {\n      var tmpStyle = $this.attr('style').split(\";\");\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      for (j = 0; j < tmpStyle.length; j++) {\n        var cssProperty = tmpStyle[j].split(\":\");\n\n        if ($.trim(cssProperty[0]) != attrToAdd && $.trim(cssProperty[0]) != \"\") {\n          arrProperties.push(cssProperty[0] + \":\" + cssProperty[1] + \";\");\n        }\n        resultProperties = JSON.stringify(arrProperties).replace(/\\\",\"/g, ' ').replace(/\\[\"/g, ' ').replace(/\\\"]/g, ' ');\n      }\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    } else if ($this.css(attrToAdd)) {\n      var tmpStyle = $this.css(attrToAdd);\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      arrProperties.push(option + \";\");\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    }\n  }\n};\n\n/*\r\n    * Find element to make scroll top\r\n    */\nbizagi.util.scrollTop = function (canvas) {\n  if (canvas && canvas[0]) {\n    while (canvas[0].tagName !== \"HTML\" && canvas.css(\"overflow-y\") != \"scroll\" && canvas.css(\"overflow-y\") != \"auto\" && canvas.parent().length > 0) {\n      canvas = canvas.parent();\n    }\n  }\n  return canvas;\n};\n\n/*\r\n    * Sort a JSON array by attribute and order type (ascendant or descendant)\r\n    * example: data = [ {attr1:val1, attr2:val2} , {attr1:val3, attr2:val4 },... ]  , key = \"attr2\" , way = \"asc\"\r\n    */\nbizagi.util.sortJSON = function (data, key, way) {\n  return data.sort(function (a, b) {\n    var x = a[key];\n    var y = b[key];\n    if (way === 'asc') {\n      return x < y ? -1 : x > y ? 1 : 0;\n    }\n    if (way === 'desc') {\n      return x > y ? -1 : x < y ? 1 : 0;\n    }\n  });\n};\n\n/*\r\n    * Reducir formato numérico a notación abrevidad (K:1000 - M:1000000 - B:1000000000)\r\n    */\nbizagi.util.shortNumber = function (number) {\n  var newNumber = number.toString();\n  var lenghtNumber = newNumber.length;\n\n  if (lenghtNumber >= 4 && lenghtNumber < 7) {\n    newNumber = '+' + newNumber.charAt(0) + 'K';\n  } else if (lenghtNumber >= 7 && lenghtNumber < 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'M';\n  } else if (lenghtNumber >= 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'B';\n  }\n\n  return '&nbsp;&nbsp;&nbsp;' + newNumber;\n};\n\n/*\r\n    * Aplicar formato salto de linea\r\n    */\nbizagi.util.replaceLineBreak = function (string) {\n  return typeof string === \"string\" ? string.replace(/\\r\\n|\\r|\\n|<br>|<br\\/>/g, \"<br/>\") : string;\n};\n\n// http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/\nbizagi.util.escapeHtml = function (str) {\n  var div = document.createElement('div');\n  div.appendChild(document.createTextNode(str));\n  return div.innerHTML;\n};\n\n/*\r\n    * Aplicar formato Tipo moneda\r\n    */\nbizagi.util.formatMonetaryCell = function (value) {\n  return bizagi.util.formatMonetaryValue(value);\n};\n\n/*\r\n    * Aplicar formato tipo decimal\r\n    */\nbizagi.util.formatDecimalCell = function (value) {\n  return bizagi.util.formatDecimalValue(value);\n};\n\n/**\r\n    * Add format to date value\r\n    */\nbizagi.util.formatDateValue = function (value) {\n  return bizagi.util.formatDateFromInvariantStringDate(value);\n};\n\n/**\r\n    * Add format to money value\r\n    * @param value\r\n    * @returns {*|string|string}\r\n    */\nbizagi.util.formatMonetaryValue = function (value) {\n  return bizagi.util.formatMoney(value, BIZAGI_DEFAULT_CURRENCY_INFO);\n};\n\n/**\r\n    * Add format for decimal value\r\n    * @param value\r\n    * @returns {*}\r\n    */\nbizagi.util.formatDecimalValue = function (value) {\n  var decimalFormat;\n  var externalDecimalFormat = {\n    decimalSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator,\n    digitGroupSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator,\n    roundToDecimalPlace: BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n  var numberValue = bizagi.util.formatDecimal(value, decimalFormat);\n  if (bizagi.override.removeTrailingZeros === true) {\n    var positive = true;\n    if (numberValue.toString().indexOf(\")\") != -1) {\n      positive = false;\n      numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n    }\n    var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"$1\");\n    re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"\");\n\n\n    if (!positive) numberValue = \"(\" + numberValue + \")\";\n  }\n  return numberValue;\n};\n\n/*\r\n    * Crea notificacion de corta duracion, principalmente uilizada en para los procesos offline\r\n    */\nbizagi.util.showNotification = function (params) {\n  var params = params || {};\n  var div_sync = $('<div id=\"sync-notification\" class=\"bz-cm-icon\"></div>').text(params.text || \"\");\n  div_sync.appendTo($('body'));\n  div_sync.fadeIn(1500, function () {\n    div_sync.stop();\n  });\n\n  div_sync.fadeOut(2000, function () {\n    div_sync.remove();\n  });\n};\n\n/*\r\n    * Verificar el estado de la conexión\r\n    */\nbizagi.util.isModeOnline = function () {\n  return typeof bizagi.context.isOfflineForm !== \"undefined\" && !bizagi.context.isOfflineForm;\n};\n\nbizagi.util.dispose = function (obj) {\n  for (key in obj) {\n    if (_typeof(obj[key]) == \"object\") delete obj[key];\n    if (typeof obj[key] == \"function\") {obj[key] = null;delete obj[key];}\n  }\n};\n\nbizagi.util.arrayEach = function (array, callback) {\n  if (!!array) {\n    if (Object.prototype.toString.apply(array) === \"[object Array]\" && Object.prototype.toString.apply(callback) === \"[object Function]\") {\n      var index, value;\n      for (index in array) {\n        if (array.hasOwnProperty(index)) {\n          value = callback.call(array[index], index, array[index]);\n          if (value === false) {\n            return;\n          }\n        }\n      }\n    } else {\n      $.each(array, callback);\n    }\n  }\n};\n\n//remove all the character except the +, - and decimal point\nbizagi.util.getStandardNotation = function (number, decimalSymbol) {\n  var plusCharacter = '+';\n  var minusCharacter = '-';\n  var decimalSymbol = decimalSymbol || '.';\n  var expSymbol = 'e';\n  var tmp = '';\n  //remove all the character except the +, -, decimal point and the numbers\n  var decimalNumber = false;\n  var exponentialNumber = false;\n  number = (number.length > 0 ? number.toString().toLowerCase() : '').replace(/ /g, '');\n  for (var i = 0; i < number.length; i++) {\n    if ((number[i] === plusCharacter || number[i] === minusCharacter) && (i === 0 || number[i - 1] == expSymbol)) {\n      tmp += number[i];\n    } else if (!isNaN(Number(number[i]))) {\n      tmp += number[i];\n    } else if (number[i] === decimalSymbol && !decimalNumber) {\n      tmp += number[i];\n      decimalNumber = true;\n    } else if (number[i] === expSymbol && !exponentialNumber) {\n      tmp += number[i];\n      exponentialNumber = true;\n    }\n  }\n  return tmp;\n};\n//Return it in normalized scientific notation\nbizagi.util.scientificNotationFormat = function (number, decimalSymbol, sdLimit, expMinLimit, expMaxLimit) {\n  decimalSymbol = decimalSymbol || '.';\n  number = bizagi.util.getStandardNotation(number, decimalSymbol);\n  sdLimit = sdLimit > 0 ? sdLimit : 38;\n  expMinLimit = expMinLimit > 0 ? expMinLimit : -125;\n  expMaxLimit = expMaxLimit > 0 ? expMaxLimit : 125;\n  var expSimbol = 'e';\n  var sNregex = new RegExp('[0-9]+(' + decimalSymbol + '[0-9]+)?(e[+-]?[0-9]+)?');\n  var sNFormat = number.match(sNregex);\n\n  //get que prefix\n  var exp = 0;\n\n  var prefix = number[0] === '-' ? number[0] : '';\n  var originalPointIndex = 0;\n\n  number = number.replace(prefix, '');\n\n  //if the number is not in scientific notation\n  if (sNFormat && sNFormat[0] && sNFormat[2]) {\n    var tempParts = sNFormat[0] ? sNFormat[0].replace(sNFormat[2], '').split(decimalSymbol) : '';\n\n    var significantDigits = '';\n    var intPart = '';\n\n    //calculate significant digits\n    //remove zeros at the left\n    tempParts[0] = tempParts[0].replace(/^0+/g, '');\n\n    if (tempParts[0].length > 1) {\n      significantDigits = tempParts[0].slice(1);\n      originalPointIndex = significantDigits.length;\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(sNFormat[1] || '');\n    } else if (tempParts[0].length === 1) {\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(tempParts[1] || '');\n    } else {\n      originalPointIndex = tempParts[1].length;\n      tempParts[1] = tempParts[1].replace(/^0+/g, '');\n      originalPointIndex = tempParts[1].length - 1 - originalPointIndex;\n      intPart = tempParts[1][0];\n      significantDigits = tempParts[1].slice(1);\n    }\n    //remove . and zeros from significant digits\n    significantDigits = significantDigits.replace(decimalSymbol, '').replace(/0+$/g, '');\n\n    if (significantDigits.length >= sdLimit) {\n      significantDigits = significantDigits.slice(0, sdLimit - 1);\n    }\n    exp = Number(sNFormat[2].replace(expSimbol, '')) + originalPointIndex;\n    exp = exp > expMaxLimit ? expMaxLimit : exp < expMinLimit ? expMinLimit : exp;\n    return prefix + intPart + (significantDigits ? decimalSymbol + significantDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n  } else if (number) {\n\n    originalPointIndex = number.indexOf(decimalSymbol);\n    var from = 0;\n    var to = number.length - 1;\n\n    //remove decimal point\n    number = number.replace(decimalSymbol, '');\n\n    //from\n    var i = from;\n    while (!significantFlag) {\n      if (number[i] !== '0' && number[i] !== decimalSymbol) {\n        significantFlag = true;\n        from = i;\n      } else {i++;}\n    }\n    //to\n    var significantFlag = false;\n    var j = to;\n    while (!significantFlag) {\n      if (number[j] !== '0' && number[j] !== decimalSymbol && '-') {\n        significantFlag = true;\n        to = j + 1;\n      } else {j--;}\n    }\n    to = to > sdLimit + from ? sdLimit + from : to;\n    if (originalPointIndex !== -1) {\n      //find significant digits\n      var significantFlag = false;\n      var significantDigits = number.slice(from, to);\n      var pointIndex = from + 1;\n      exp = originalPointIndex - pointIndex;\n      if (significantDigits.length > 0 && !isNaN(Number(significantDigits[0]))) {\n        return prefix + significantDigits[0] + (significantDigits.length > 1 ? decimalSymbol + significantDigits.slice(1) : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n\n    } else {\n      //Int numbers\n      var firstDigit = number.slice(from, from + 1);\n      var restDigits = number.slice(from + 1, number.length);\n      exp = restDigits.length;\n      restDigits = restDigits.replace(/0+$/g, '');\n      if (restDigits.length > sdLimit) {\n        restDigits = number.slice(from + 1, sdLimit + from);\n      }\n      if (Number(firstDigit)) {\n        return prefix + firstDigit + (restDigits.length > 0 ? decimalSymbol + restDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n    }\n  } else {return '';}\n};\n\n/**\r\n    * Remove all backslashes that represent scape of characters\r\n    */\nbizagi.util.stripslashes = function (str) {\n  return str.replace(/\\\\'/g, '\\'').replace(/\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\').replace(/\\\\0/g, '\\0');\n};\n\n/*\r\n    * Validates if the text is a valid opening and closing tags, including classes\r\n    */\nbizagi.util.isHTMLValidText = function (text) {\n  var ex = new RegExp(/<(.|\\n)*?>/g);\n  return ex.test(text);\n};\n\nbizagi.util.resetData = function () {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, { isAuthenticate: \"false\" });\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\nbizagi.util.changeData = function (params) {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, params);\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR MOBILE DEVICE\n// ------------------------------------------------------------------------\n\nbizagi.util.isMobileDevice = function (device) {\n  device = device || bizagi.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\",\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Check is native mobile device\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeMobileDevice = function (device) {\n  return bizagi.util.isMobileDevice(device) && bizagi.util.isNativePluginSupported();\n};\n\n/** \r\n    * Verify mobile device type\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Tablet android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Tablet iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && !(device.indexOf(\"android\") === -1);\n};\n\n\n/**\r\n    * Verify mobile device type\r\n    * @returns {}\r\n    */\nbizagi.util.isSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Smartphone android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Smartphone iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"ios\") !== -1;\n};\n\n/**\r\n    * Check is offline form\r\n    * @param {} container \r\n    * @returns {} \r\n    */\nbizagi.util.isOfflineForm = function (params) {\n  if (!bizagi.util.isMobileDevice() || typeof params === \"undefined\")\n  return false;\n\n  var context = params.context || null;\n  var container = params.container || null;\n\n  var formContainer = container !== null ?\n  container : context !== null ? context.getFormContainer() : null;\n\n  if (formContainer === null)\n  return false;\n\n  var formParams = formContainer.getParams() || {};\n  var isOfflineForm = typeof formParams.isOfflineForm !== \"undefined\" &&\n  bizagi.util.parseBoolean(formParams.isOfflineForm);\n\n  return isOfflineForm;\n};\n\nbizagi.util.detectAndroidVersion = function () {\n  var indexAndroid = navigator.userAgent.toLowerCase().indexOf(\"android\");\n  var androidVersion = navigator.userAgent.toLowerCase().substring(indexAndroid + 8, indexAndroid + 13);\n  androidVersion = androidVersion.replaceAll(\".\", \"\");\n  return Number(androidVersion);\n};\n\nbizagi.util.getPathUrl = function (url) {\n  var solvedUrl = \"\";\n  var locationParts = location.pathname.split(\"/\");\n  var basePath = location.protocol + \"//\" + location.host;\n\n  if (BIZAGI_PATH_TO_BASE[0] == \"/\") {\n    solvedUrl = basePath + BIZAGI_PATH_TO_BASE + url;\n  } else {\n    var pathToBaseBackwards = BIZAGI_PATH_TO_BASE.split(\"../\").length;\n    for (var i = 0, l = locationParts.length; i < l - pathToBaseBackwards; i++) {\n      basePath += locationParts[i] + \"/\";\n    }\n\n    basePath = basePath[basePath.length - 1] === \"/\" ? basePath : basePath + \"/\";\n    solvedUrl = basePath + url;\n  }\n  return solvedUrl;\n};\n\n/**\r\n    * Get Android version\r\n    * @returns {} \r\n    */\nbizagi.util.getAndroidVersion = function () {\n  var userAgent = navigator.userAgent.toLowerCase();\n  var match = userAgent.match(/android\\s([0-9\\.]*)/);\n\n  return match ? parseFloat(match[1]) : false;\n};\n\n/**\r\n    * Get image path to android device\r\n    * @param {} image \r\n    * @returns {} \r\n    */\nbizagi.util.mobileImagePath = function (image) {\n  var dataImage = image;\n  var version = bizagi.util.getAndroidVersion();\n\n  if (!version)\n  return dataImage;\n\n  if (dataImage.substring(0, 21) === \"content://com.android\" && version <= 4.4) {\n    var photoSplit = dataImage.split(\"%3A\");\n    if (photoSplit.length > 1) {\n      dataImage = \"content://media/external/images/media/\" + photoSplit[1];\n    } else {\n      photoSplit = dataImage.split(\"/\");\n      dataImage = \"content://media/external/images/media/\" + photoSplit[photoSplit.length - 1];\n    }\n  }\n\n  return dataImage;\n};\n\n/**\r\n    * Validate resource \r\n    * @param {} resource resource name\r\n    * @returns {} \r\n    */\nbizagi.util.isValidResource = function (resource) {\n  if (!bizagi.localization) return false;\n  return bizagi.localization.getResource(resource) !== resource;\n};\n\n/***\r\n    * Transform base64 image to blob\r\n    * @b64Data \r\n    * @contentType \r\n    * @sliceSize \r\n    */\nbizagi.util.b64toBlob = function (b64Data, contentType, sliceSize) {\n  contentType = contentType || '';\n  sliceSize = sliceSize || 512;\n\n  var byteCharacters = atob(b64Data);\n  var byteArrays = [];\n\n  for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    var byteNumbers = new Array(slice.length);\n    for (var i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    var byteArray = new Uint8Array(byteNumbers);\n\n    byteArrays.push(byteArray);\n  }\n\n  var blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\n/**\r\n    * Converts an string to a byte array, util in old browsers requests\r\n    * @param str\r\n    */\nbizagi.util.stringToByteArray = function (str) {\n  var byteArray = new Uint8Array(str.length);\n  for (var i = 0; i < str.length; i++) {\n    byteArray[i] = str.charCodeAt(i) & 0xff;\n  }\n  return byteArray;\n};\n\n// ------------------------------------------------------------------------\n// NATIVE-HYBRID ENVIRONMENT\n// ------------------------------------------------------------------------\n\n/** \r\n * Verify the offline forms is enabled\r\n * @returns {} \r\n */\nbizagi.util.hasOfflineFormsEnabled = function () {\n  return typeof BIZAGI_ENABLE_OFFLINE_FORMS !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_OFFLINE_FORMS) === true;\n};\n\n/**\r\n    * \r\n    * Verify the flat design is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isFlatDesignEnabled = function () {\n  return typeof BIZAGI_ENABLE_FLAT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_FLAT) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isMobileGridEnabled = function () {\n  return typeof BIZAGI_ENABLE_MOBILE_GRID !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_MOBILE_GRID) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeHeaderEnabled = function () {\n  return typeof NATIVE_HEADER_ENABLE !== \"undefined\" && bizagi.util.parseBoolean(NATIVE_HEADER_ENABLE) === true;\n};\n\n/**\r\n    * Validate the Quick search is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isQuickSearchEnabled = function () {\n  return typeof BIZAGI_ENABLE_QUICK_SEARCH !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_QUICK_SEARCH) === true;\n};\n\n/** \r\n    * Verify the OAuth2 is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isOAuth2Enabled = function () {\n  return typeof BIZAGI_AUTH_TYPE !== \"undefined\" && BIZAGI_AUTH_TYPE === \"OAuth\";\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.getNativeComponent = function () {\n  return typeof BIZAGI_NATIVE_COMPONENT !== \"undefined\" ? BIZAGI_NATIVE_COMPONENT : \"\";\n};\n\n/**\r\n    * Check server version\r\n    * @returns {}\r\n    */\nbizagi.util.isVersionSupported = function () {\n  var supported = true;\n\n  if (typeof BIZAGI_SERVER_VERSION !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_VERSION)) {\n    var version = BIZAGI_SERVER_VERSION.match(/\\d+\\.\\d+/);\n    supported = version ? parseFloat(version.shift()) >= 11.0 : true;\n  }\n\n  return supported;\n};\n\n/**\r\n    * Cordova componet is supported\r\n    * @returns {} \r\n    */\nbizagi.util.isCordovaSupported = function () {\n  return typeof cordova !== \"undefined\";\n};\n\n/**\r\n    * Native plugin of Cordova is supported \r\n    * @returns {} \r\n    */\nbizagi.util.isNativePluginSupported = function () {\n  return typeof bizagiapp !== \"undefined\";\n};\n\n/**\r\n    * Tablet native\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Smartphone native\r\n    * @returns {} \r\n    */\nbizagi.util.isSmartphoneNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isSmartphoneDevice();\n};\n\n/**\r\n    * Enables accesory bar\r\n    */\nif (bizagi.util.isNativePluginSupported() && window.cordova && window.cordova.plugins.Keyboard) {\n  cordova.plugins.Keyboard.hideKeyboardAccessoryBar(false);\n};\n\n/**\r\n    * Verify real device\r\n    * @returns {} \r\n    */\nbizagi.util.detectRealDevice = function () {\n  var settedDevice = typeof BIZAGI_DEFAULT_DEVICE !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEFAULT_DEVICE) ?\n  BIZAGI_DEFAULT_DEVICE : null;\n\n  BIZAGI_DEFAULT_DEVICE = \"\";\n  var device = bizagi.detectDevice();\n  BIZAGI_DEFAULT_DEVICE = settedDevice;\n\n  return device;\n};\n\n/**\r\n    * Method to detect Android visitors\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroid = function () {\n  return navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n};\n\nbizagi.util.isAndroidDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") > -1;\n};\n\nbizagi.util.isiOSDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") === -1;\n};\n\n\n/**\r\n    * Get server channel\r\n    * @returns {}\r\n    */\nbizagi.util.getChannelType = function () {\n  if (typeof BIZAGI_SERVER_CHANNEL !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_CHANNEL)) {\n    return BIZAGI_SERVER_CHANNEL;\n  }\n  return bizagi.loader.channel || \"\";\n};\n\n/**\r\n    * Check data url\r\n    * @param {} data \r\n    * @returns {} \r\n    */\nbizagi.util.isDataUrl = function (data) {\n  var regex = /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i;\n\n  try {\n    return !!data.toString().match(regex);\n  } catch (error) {}\n\n  return false;\n};\n\n/**\r\n    * Get valid data url\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\n/**\r\n    * Get response message of services\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.processFailMessage = function (data) {\n  var message = data || {};\n\n  try {\n    message = typeof message == \"string\" ? JSON.parse(message) : message;\n    message = message.responseText || message.message || message;\n  } catch (e) {\n    message = data;\n  }\n\n  return message;\n};\n\n/**\r\n    * Get object jSON\r\n    */\nbizagi.util.getErrorFormatted = function (str) {\n  var error = str;\n\n  if (!error) return str;\n\n  if (typeof error == \"string\") {\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n      error = {\n        type: \"error\",\n        code: \"code\",\n        message: str };\n\n    }\n  }\n\n  if (_typeof(error) == \"object\" && (error.message || error.statusText)) {\n    return {\n      type: error.type || \"error\",\n      code: error.code || error.errorCode || error.errorType || error.statusText || \"code\",\n      message: error.message };\n\n  } else {\n    if (error && error.length && error.length >= 1) error = error[0];\n    if (error.responseText) error = error.responseText;\n    if (error.error) error = error.error;\n  }\n\n  return bizagi.util.getErrorFormatted(error);\n};\n/**\r\n    * Disable and enable workportal menu from live process\r\n    */\nvar tmp_block_header = \"<div class='blockHeaderByLiveProcess'></div>\";\nbizagi.util.disableWorkPortalMenu = function () {\n  var blockHeight = $(\"body\").find(\"#ui-bizagi-wp-menu\").height();\n  $(tmp_block_header).prependTo(\"body\");\n  $(\"body\").find(\".blockHeaderByLiveProcess\").css({ \"position\": \"absolute\", \"width\": \"100%\", \"height\": blockHeight + \"px\", \"background\": \"gray\", \"opacity\": \"0.9\", \"z-index\": \"101\" });\n};\n\nbizagi.util.enableWorkPortalMenu = function () {\n  $(\"body\").find(\".blockHeaderByLiveProcess\").detach();\n};\n\n/**\r\n    * this method activates the section of the menu that is sent in the idMenu variable\r\n    */\nbizagi.util.enableMenuSection = function (idMenu) {\n  var menu = new bizagi.workportal.controllers.menu();\n  menu.setActiveSection.apply($(\"#main_menu li#\" + idMenu)[0]);\n};\n\nbizagi.util.getURLWithASlashAtTheEnd = function (url) {\n  var getLastChar = function getLastChar(stringValue) {\n    return stringValue.substr(stringValue.length - 1);\n  };\n  return getLastChar(url) === '/' ? url : url + '/';\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a file\r\n    * validate if the Maintenance Window has started and redirect the user\r\n    * validate if an error is returned\r\n    * rejects defer on download fails\r\n    * IMPORTANT: defer never resolves (technical restriction)\r\n    * @param {String} url \r\n    * @param {Boolean} isCompleteUrl \r\n    * @param {Boolean} showModalOnFail \r\n    */\nbizagi.util.downloadFile = function (url, isCompleteUrl, showModalOnFail) {\n  var _defer = new $.Deferred(),\n  _showModalOnFail = showModalOnFail === undefined ? true : showModalOnFail,\n  _firstURlPart = isCompleteUrl ? \"\" : bizagi.util.getURLWithASlashAtTheEnd(bizagiConfig.applicationUrl),\n  _urlDownload = _firstURlPart + url,\n  _iframeID = \"iframe-download\",\n  _iframeExists = $('#' + _iframeID).length !== 0,\n  _reject = function _reject(jsonResponse, showModal) {\n    if (showModal)\n    bizagi.modalError.show(jsonResponse.message, undefined, false);\n    _defer.reject(jsonResponse);\n  },\n  _onCantDownload = function _onCantDownload() {\n    var that = $(this)[0],\n    defaultMessage = bizagi.localization.getResource(\"workportal-general-error-message-contact-administrator\"),\n    text = bizagi.util.tryCatch(\n    function () {return $(that.contentDocument).text();},\n    defaultMessage),\n\n    isMaintenanceWindow = text.indexOf(\"HTTP Error 503\") !== -1,\n    jsonResponse = bizagi.util.tryCatch(\n    function () {return JSON.parse(text);},\n    {\n      code: \"error\",\n      status: \"error\",\n      message: text === \"\" ? defaultMessage : text }),\n\n\n    showModal = _showModalOnFail && !isMaintenanceWindow;\n    if (isMaintenanceWindow)\n    bizagiConfig.maintenanceWindows.start();\n    _reject(jsonResponse, showModal);\n  },\n  _createIframe = function _createIframe() {\n    var iframe = $(\"<iframe/>\");\n    iframe.attr({\n      style: \"visibility:hidden;display:none\",\n      id: _iframeID }).\n\n    appendTo('body');\n    iframe[0].onload = _onCantDownload;\n  };\n\n  if (!_iframeExists)\n  _createIframe();\n  $('#' + _iframeID).attr(\"src\", _urlDownload);\n  return _defer;\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a excel file\r\n    * @param {String} url \r\n    * @param {} params \r\n    */\nbizagi.util.downloadFileByPOST = function (url, params) {\n  if ($('#iframe-download').length !== 0) {//If the iframe already exists, remove it\n    $('#iframe-download').remove();\n  }\n\n  $(\"<iframe/>\").attr({\n    style: \"visibility:hidden;display:none\",\n    id: \"iframe-download\" }).\n  appendTo('body');\n\n  var inputValues = \"\";\n  for (var i = 0; i < params.length; i++) {\n    inputValues = inputValues + \"<input type='text' name='\" + params[i].name + \"' value='\" + params[i].value + \"'>\";\n  }\n\n  var formPOST = \"<form id='formPOST' action='\" + url + \"' method='POST'>\" +\n  inputValues +\n  \"</form>\";\n\n  $('#iframe-download').contents().find(\"body\").append(formPOST);\n  if (bizagi.util.isIE11()) {\n    bizagi.showErrorAlertDialog = false;\n    $.ajax({ type: \"POST\",\n      url: url,\n      data: params,\n      dataType: 'text' }).\n    then(function () {\n      $(\"#formPOST\", $('#iframe-download').contents()).submit();\n    });\n  } else {\n    $(\"#formPOST\", $('#iframe-download').contents()).submit();\n  }\n};\n\nbizagi.util.executeActionRoutingFromWorkportal = function (idCase, idWorkItem) {\n  bizagi.workportal.controllers.menu.prototype.publish(\"executeAction\", {\n    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n    idCase: idCase,\n    idWorkItem: idWorkItem });\n\n};\n\n/**\r\n   * Gets the final message when the user is offline or online (In Offline forms)\r\n   * @param {} state \r\n   * @returns {} The corresponding message depending on the case\r\n   */\n\nbizagi.util.getMessageFromNetworkState = function (state) {\n  if (state) {\n    return bizagi.localization.getResource(\"render-without-globalform-offline-userOnline\", \"The case has been created successfully, please wait until the server synchronizes\");\n  } else {\n    return bizagi.localization.getResource(\"render-without-globalform-offline\", \"Your offline case has been created successfully. It will synchronized as soon as you go online.\");\n  }\n};\n\n/**\r\n    * DOMPurify sanitizes HTML and prevents XSS attacks\r\n    * @param str\r\n    * @returns {null|*|string}\r\n    */\nbizagi.util.sanitizeHTML = function (str) {\n  var value = typeof str !== \"undefined\" && str !== null ? str.toString() : str;\n  var sanified = DOMPurify.sanitize(value);\n  var decode = document.createElement(\"div\");\n\n  decode.innerHTML = sanified;\n\n  return decode.childNodes.length === 0 ? \"\" : String(decode.childNodes[0].nodeValue);\n};\n\nbizagi.util.arrayUnique = function (array) {\n  var items = array.concat();\n\n  for (var i = 0, length = items.length; i < length; ++i) {\n    for (var j = i + 1; j < length; ++j) {\n      if (items[i] === items[j]) {\n        items.splice(j -= 1, 1);\n      }\n\n    }\n  }\n\n  return items;\n};\n\n\n/**\r\n    * Debounce\r\n    * Taken from https://davidwalsh.name/javascript-debounce-function\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce = function (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n};\n\n/**\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce2 = function (func, wait, immediate) {\n  var self = this;\n  var timeout;\n  var fn = function fn() {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n  return {\n    timeout: timeout,\n    cancel: function cancel() {\n      clearTimeout(timeout);\n    },\n    fire: function fire() {\n      fn.call(self, arguments);\n    } };\n\n};\n\n/**\r\n    * Validate if the mobile image editor is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeImageEditorSupported = function () {\n  return bizagi.util.isNativePluginSupported() && bizagi.util.isiOSDevice() && bizagi.override.enableImageEditor;\n};\n/**\r\n    * Error Message\r\n    */\nbizagi.util.errorMessage = function (message) {\n  return \"<div class=\\\"admin-stakeholder-message\\\"> \" +\n  \"<i class=\\\"bz-wp-empty__img\\\"></i> \" +\n  \"<p class=\\\"bz-wp-empty__info bz-wp-empty__info--first\\\"> \" +\n  message +\n  \"</p></div>\";\n};\n\n\n/**\r\n    * Validate URL \r\n    */\nbizagi.util.validateUrlWellFormed = function (url) {\n  var patternToValidateUrl = /^((http|https|ftp):\\/\\/)/,\n  urlWithProtocol = patternToValidateUrl.test(url) ? url : \"http://\" + url,\n  nodeWithUrl = document.createElement('a');\n  nodeWithUrl.setAttribute('href', urlWithProtocol);\n  var cleanNodeWithUrl = DOMPurify.sanitize(nodeWithUrl, { IN_PLACE: true }),\n  urlWithoutSpaces = url ? url.replace(/ /g, \"\") : \"\";\n  return bizagi.util.isEmpty(urlWithoutSpaces) ? null : cleanNodeWithUrl.href;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @param data\r\n    * @returns {string}\r\n    */\nbizagi.util.encodeHtmlText = function (data) {\n  var value = data || \"\";\n  var valueToDisplay = \"\";\n\n  if (typeof value === \"string\") {\n    var decodedDisplayValue = bizagi.util.decodeURI(value);\n\n    valueToDisplay = bizagi.util.encodeString(decodedDisplayValue);\n  }\n\n  return valueToDisplay;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @returns {string}\r\n    * @param str\r\n    */\nbizagi.util.encodeString = function (str) {\n  var result = str || \"\";\n\n  result = result.replaceAll(\"&\", \"&amp;\");\n  result = result.replaceAll(\"$\", \"&#36;\");\n  result = result.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n  result = result.replaceAll(\"\\\"\", \"&#34;\").replaceAll(\"'\", \"&#39;\").replaceAll(\"/\", \"&#47;\");\n  result = result.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, \"$1<br />$2\");\n\n  return result;\n};\n\n/**\r\n    * Set Caret position \r\n    * Set the caret in specific position of an element type input\r\n    * @param {} func, position, input element \r\n    * @returns {} The function not return any value.\r\n    */\nbizagi.util.setCaretPosition = function (pos, ctrl) {\n  var self = this;\n\n  // Modern browsers\n  if (ctrl.setSelectionRange) {\n    ctrl.focus();\n    ctrl.setSelectionRange(pos, pos);\n\n    // IE8 and below\n  } else if (ctrl.createTextRange) {\n    var range = ctrl.createTextRange();\n    range.collapse(true);\n    range.moveEnd('character', pos);\n    range.moveStart('character', pos);\n    range.select();\n  }\n};\n\n\n/**\r\n    * Get position of caret\r\n    * Get the position of caret in a specific element input\r\n    * @param {} func, input element \r\n    * @returns {} Return the position of caret in an element input\r\n    */\nbizagi.util.getCaretPosition = function (oField) {\n\n  // Initialize\n  var iCaretPos = 0;\n\n  // IE Support\n  if (document.selection) {\n\n    // Set focus on the element\n    oField.focus();\n\n    // To get cursor position, get empty selection range\n    var oSel = document.selection.createRange();\n\n    // Move selection start to 0 position\n    oSel.moveStart('character', -oField.value.length);\n\n    // The caret position is selection length\n    iCaretPos = oSel.text.length;\n  } else if (oField.selectionStart || oField.selectionStart == '0') // Firefox support\n    iCaretPos = oField.selectionStart;\n\n  // Return results\n  return iCaretPos;\n};\n\n/**\r\n    * To escape values\r\n    * @param {} value \r\n    * @returns {} \r\n    */\nbizagi.util.escapeRegex = function (value) {\n  value = value || \"\";\n\n  return value.replace(/([\\^\\$\\(\\)\\[\\]\\{\\}\\*\\.\\+\\?\\|\\\\])/gi, \"\\\\$1\");\n};\n\n/**\r\n    * Function to get a featureObject by path within the global bizagiConfig.features object. Example: \"userService.v1.enabled\"\r\n    */\nbizagi.util.getFeatureObject = function (path) {\n  var arr = path.split('.');\n  this.featureObjectCache = this.featureObjectCache || {};\n\n  function getFeatureObjectIte(arr) {\n    var features = bizagi.util.getConfigFeatures();\n\n    if (typeof path !== \"string\" || typeof features == \"undefined\") return;\n\n    var pivot = features;\n    for (var i = 0, len = arr.length; i < len; i++) {\n      pivot = pivot[arr[i]];\n      if (typeof pivot === \"undefined\") return;\n    }\n    return pivot;\n  };\n  if (path in this.featureObjectCache) {\n    return this.featureObjectCache[path];\n  } else {\n    return this.featureObjectCache[path] = getFeatureObjectIte(arr);\n  }\n};\n\n/**\r\n    * Load features from mobile\r\n    */\nbizagi.util.getConfigFeatures = function () {\n  var bizagiConfiguration = window.bizagiConfig || bizagiConfig || {};\n\n  if (bizagi.util.isMobileDevice() && typeof BIZAGI_MOBILE_FEATURES !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_MOBILE_FEATURES)) {\n    bizagiConfiguration.features = JSON.parse(BIZAGI_MOBILE_FEATURES || \"{}\");\n  }\n\n  return bizagiConfiguration.features;\n};\n\n/**\r\n    * Reset features flag\r\n    */\nbizagi.util.resetConfigFeatures = function () {\n  bizagi.util.featureObjectCache = undefined;\n};\n\n/**\r\n    * Check fail request\r\n    * @param result\r\n    * @returns {*|boolean}\r\n    */\nbizagi.util.isFailResponse = function (result) {\n  return result && (result.type && result.type === \"error\" || result.status && result.status === \"error\" || result.code && result.code === \"UNKNOWN_ERROR\");\n};\n\n/**\r\n    * Formats value of each item\r\n    * @param {string, boolean or array} value\r\n    * @example\r\n    * value = \"string\" => \"string\"\r\n    * value = true => \"yes\" or \"si\", the localized value\r\n    * value = false => \"no\", the localized value\r\n    * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n    * @returns {string}\r\n    */\nbizagi.util.formatItem = function (value) {\n  if (value !== undefined && value !== null) {\n    if ($.isArray(value)) {\n\n      for (var i = 0, length = value.length; i < length; i++) {\n        if (value[i] != null && typeof value[i] == \"boolean\") {\n          if (bizagi.util.parseBoolean(value[i]) === true) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n\n          } else if (bizagi.util.parseBoolean(value[i]) === false) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n          }\n        }\n        value[i] = bizagi.util.sanitizeHTML(value[i]);\n      }\n\n      return value.join(\" - \");\n    } else {\n      return bizagi.util.sanitizeHTML(value);\n    }\n  } else {\n    return \"\";\n  }\n};\n\n\n/**\r\n    * Process response matches\r\n    * @param {} strValue\r\n    * @param term\r\n    * @param withoutFormat\r\n    * @returns {}\r\n    */\nbizagi.util.performTermMatches = function (strValue, term, withoutFormat) {\n  var parseValue;\n\n  if (_typeof(strValue) === \"object\") {\n    parseValue = bizagi.util.formatItem(strValue);\n  } else if (typeof strValue === \"string\") {\n    if (withoutFormat) {\n      parseValue = bizagi.util.sanitizeHTML(strValue);\n    } else {\n      parseValue = bizagi.util.highlightMatches(strValue, term);\n    }\n  } else {\n    parseValue = strValue;\n  }\n\n  return parseValue;\n};\n\n/**\r\n    * Process response to highlight matches\r\n    * @param strValue\r\n    * @param term\r\n    * @returns {string}\r\n    */\nbizagi.util.highlightMatches = function (strValue, term) {\n  var data = bizagi.util.escapeRegex(term).replaceAll(\"%\", \"\");\n  var regEx = new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + data + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\");\n\n  return bizagi.util.sanitizeHTML(strValue).replace(regEx, \"<strong>$1</strong>\");\n};\n\n/**\r\n    * Calculate window resolution for Desktop\r\n    * @returns {string}\r\n    */\nbizagi.util.getDesktopResolution = function () {\n  var resolution = \"\";\n  var devicePixelRatio = 1;\n  var screenWidth = window.screen.width;\n  var screenHeight = window.screen.height;\n\n  if ('deviceXDPI' in screen) {\n    devicePixelRatio = screen.deviceXDPI / screen.logicalXDPI;\n  } else if ('devicePixelRatio' in window) {\n    devicePixelRatio = window.devicePixelRatio;\n  }\n\n  devicePixelRatio = Number(devicePixelRatio.toFixed(3));\n\n  if (screenWidth && screenWidth > 0 && screenHeight && screenHeight > 0) {\n    resolution = screenWidth * devicePixelRatio + \"x\" + screenHeight * devicePixelRatio;\n  }\n\n  return resolution;\n};\n\n/**\r\n    * Get the market name for device\r\n    * @returns {*|string}\r\n    */\nbizagi.util.getDeviceCode = function () {\n  var deviceCode = \"\";\n\n  if (bizagi.util.isMobileDevice()) {\n    deviceCode = typeof BIZAGI_DEVICE_MARKET_NAME !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEVICE_MARKET_NAME) ? BIZAGI_DEVICE_MARKET_NAME : \"\";\n  } else {\n    deviceCode = bizagi.util.getDesktopResolution();\n  }\n\n  return deviceCode;\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/smartphone/, '').\n  replace(/tablet/, '').\n  replace(/offline/, '');\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeQueryType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/query/, '').\n  toLowerCase();\n};\n\n/**\r\n    * Hide or show the X button in the show dialog method \r\n    * \r\n    */\nbizagi.util.hideOrShowXToCloseDialog = function (dialog, show) {\n  var selector = \".ui-dialog-titlebar-close\";\n  if (show) {\n    $(selector, dialog).show();\n  } else {\n    $(selector, dialog).hide();\n  }\n};\n\n/**\r\n    * review if a feature key is enabled\r\n    * @param {string} feature nombre de la llave del feature\r\n    */\nbizagi.util.isEnableFeature = function (feature) {\n  if (bizagi.features === undefined) bizagi.features = [];\n  return bizagi.features[feature] !== false;\n};\n\n\n/**\r\n    * review if the posibleHtml has html content\r\n    * @param {string} possibleHtml to review\r\n    */\nbizagi.util.isHtml = function (possibleHtml) {\n  return /<[a-z][\\s\\S]*>/i.test(possibleHtml);\n};\n\n/**\r\n    * if the _try function fails the _catch() or _catch value will be executed and returned\r\n    * @param {Function} _try \r\n    * @param {Function | any} _catch \r\n    */\nbizagi.util.tryCatch = function (_try, _catch) {\n  try {\n    return _try();\n  } catch (e) {\n    return typeof _catch === \"function\" ? _catch() : _catch;\n  }\n};\n\n/**\r\n    * keep functions with next and at the end execute all functions are reduced by with method like a pipe using the variable\r\n    */\nbizagi.util.pipe = function (f, listFunctions) {\n  var _listFunctions = listFunctions === undefined ? [] : listFunctions;\n  _listFunctions.push(f);\n\n  return {\n    next: function next(f) {\n      return bizagi.util.pipe(f, _listFunctions);\n    },\n    end: function end(variable) {\n      return _listFunctions.reduce(function (newVar, f) {\n        return f(newVar);\n      }, variable);\n    } };\n\n},\n\n/**\r\n    * A function to get the scrolling parent of an html element.\r\n    */\nfunction ($) {\n\n  var parents = function parents(node, ps) {\n    if (node.parentNode === null) return ps;\n\n    return parents(node.parentNode, ps.concat([node]));\n  };\n\n  var style = function style(node, prop) {\n    return getComputedStyle(node, null).getPropertyValue(prop);\n  };\n\n  var overflow = function overflow(node) {\n    return style(node, \"overflow\") + style(node, \"overflow-y\") + style(node, \"overflow-x\");\n  };\n\n  var scroll = function scroll(node) {\n    return /(auto|scroll)/.test(overflow(node));\n  };\n\n  // Get the closest ancestor element that is scrollable.\n  $.scrollerParent = function (node) {\n    if (!(node instanceof HTMLElement || node instanceof SVGElement)) return;\n\n    var ps = parents(node.parentNode, []);\n\n    for (var i = 0; i < ps.length; i += 1) {\n      if (scroll(ps[i])) return ps[i];\n    }\n\n    return document.scrollingElement || document.documentElement;\n  };\n}(jQuery);\n\nbizagi.util.startkendo = function (params) {\n  if (typeof bizagi.kendoMobileApplication === \"undefined\") {\n    bizagi.kendoMobileApplication = new kendo.mobile.Application($(\"body\"), {\n      skin: \"flat\",\n      browserHistory: false,\n      init: function init(e) {\n        kendo.ui.progress($(\".km-flat\"), true);\n        params.started && params.started();\n      } });\n\n\n    bizagi.kendoMobileApplication.bizagiNavigate = function (e, t) {\n      this.navigate(e, t);\n    };\n  } else {\n    params.started && params.started();\n  }\n};\n\n/**\r\n    * Checks if bizagi is running in mashup.\r\n    */\nbizagi.util.isMashupContext = function () {\n  return typeof BIZAGI_MASHUP_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_MASHUP_CONTEXT) === true;\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.isSharepointContext = function () {\n  return typeof BIZAGI_SHAREPOINT_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_SHAREPOINT_CONTEXT) === true;\n};\n\n/**\r\n    * Checks if bizagi is running in webpart.\r\n    */\nbizagi.util.isWebpartContext = function () {\n  return typeof isWebpart !== \"undefined\" && bizagi.util.parseBoolean(isWebpart) === true;\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number }\r\n    */\nbizagi.util.startTimeline = function (data) {\n  new bizagi.workportal.widgets.widget().showTimeLine(data);\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number, isAdhoc: Boolean, idProcess: Number }\r\n    */\nbizagi.util.startGraphicquery = function (data) {\n  new bizagi.workportal.widgets.widget().showGraphicQuery(data);\n};\n\n/**\r\n    * start select user functionality\r\n    */\nbizagi.util.startSelectUser = function () {\n  return function (resolve, reject) {\n    var defer = $.Deferred();\n    new bizagi.workportal.widgets.widget().showSelectUser(defer);\n    defer.done(function (userId, userName, guid) {\n      resolve({\n        userId: userId,\n        userName: userName,\n        guid: guid });\n\n    }).fail(function () {\n      resolve({});\n    });\n  };\n};\n\n/* Checks if a given value with format {id, value} is empty\r\n   * @param value\r\n   * @returns {boolean}\r\n   */\nbizagi.util.isEmptyValue = function (value) {\n  if (value === 0) return false;\n  if (value === undefined || value === null || value === \"\") return true;\n  if (typeof value === \"Array\") return value.length === 0;\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") return value.length === 0;\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    for (var key in value) {\n      if (value.hasOwnProperty(key) && !bizagi.util.isEmptyValue(value[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR LIVE PROCESSES\n// ------------------------------------------------------------------------\n\n/**\r\n * Init refferer Params as an empty object\r\n */\nbizagi.util.initializeReferrerParams = function () {\n  if (!bizagi.referrerParams) {\n    bizagi.referrerParams = {};\n  }\n};\n\n/**\r\n    * Get data to update sidebar\r\n    */\nbizagi.util.getLPQueriesParameters = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.sidebarData;\n};\n\n/**\r\n    * Get selected tree item (Selected process)\r\n    */\nbizagi.util.getLPQueriesSelectedItemFromTree = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.selectedTreeItem;\n};\n\n/**\r\n    * Set data and save \r\n    */\nbizagi.util.setLPQueriesParameters = function (parametersSidebar, tree) {\n  bizagi.util.initializeReferrerParams();\n  bizagi.referrerParams.sidebarData = parametersSidebar;\n  bizagi.referrerParams.selectedTreeItem = tree;\n};\n\n/**\r\n    * Clean data to reset LP Queries component\r\n    */\nbizagi.util.cleanLPQueriesParameters = function () {\n  if (bizagi.referrerParams) {\n    bizagi.referrerParams.sidebarData = null;\n    bizagi.referrerParams.selectedTreeItem = null;\n  }\n};\n\n/**\r\n    * Set referrerParams referrer \r\n    */\nbizagi.util.setLPQueriesReferrer = function () {\n  bizagi.referrerParams.referrer = \"LPQueries\";\n};\n\n/**\r\n    * Check if there is internet connection\r\n    */\nbizagi.util.isConnected = function () {\n  if (bizagi.util.isNativeMobileDevice()) {\n    if (navigator && typeof navigator.connection !== \"undefined\" && typeof Connection !== \"undefined\")\n    return !(navigator.connection.type == Connection.NONE || navigator.connection.type == \"unknown\");\n    return true;\n  } else if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n    return window.navigator ? window.navigator.onLine : true;\n  }\n\n  return true;\n};\n\n/**\r\n    * Check If rendering url is allowed\r\n    * @param request\r\n    * @returns {boolean}\r\n    */\nbizagi.util.isRenderingUrlAllowed = function (request) {\n  var endPoint;\n  //The url Rest/Processes/RecentProcesses and Rest/Processes/OfflineProcessTree should be excluded from the whitelist\n  var whiteList = [\n  \"Rest/(Handlers|Userfields|DocumentTemplates|(Processes(?!/(RecentProcesses|OfflineProcessTree)))|Cases|Authentication|Users)\",\n  \"Api/(Authentication|Entities|Users)\"];\n\n  var url = (request || \"\").\n  replaceAll(\"..\\/\", \"\").\n  replaceAll(\".\\/\", \"\");\n\n  while (endPoint = whiteList.shift()) {\n    var pattern = new RegExp(endPoint, \"i\");\n    if (url.match(pattern) !== null) return true;\n  }\n\n  return false;\n};\n\n/**\r\n    * Captura todos los elementos input de tipo contraseña y añade el icono de ver/ocultar el valor (el icono incluye\r\n    * funcionalidad propia).\r\n    *\r\n    * Para mas información ver la aplicación de esta función en los widget de login.\r\n    *\r\n    * - Esta función requiere jQuery (variable $) globalmente.\r\n    * - Se aplica generalmente en la función render de los widget.\r\n    * - Asegurarse que todos los input de contraseña han sido cargados antes de ejecutar esta función, de lo contrario los\r\n    *   nuevos inputs no tendran la funcionalidad de ver/ocultar valor.\r\n    *\r\n    * @param {jQuery | HTMLElement} content\r\n    */\nbizagi.util.applyEyeFunction = function (content) {\n  function setShowIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg  class='eye_show_icon'  xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M15 7.8C14.9 7.6 12.7 3 8 3S1.1 7.6 1 7.8v.4c.1.2 2.3 4.8 7 4.8s6.9-4.6 7-4.8v-.4zM8 12c-3.5 0-5.5-3.1-5.9-4 .4-.9 2.4-4 5.9-4 3.5 0 5.5 3.1 5.9 4-.4.9-2.4 4-5.9 4z\\\"/>\\n\" +\n    \"<path d=\\\"M8 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='text']\").attr(\"type\", \"password\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function setHideIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg class='eye_hide_icon' xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M3.6 10.5l.7-.7a12.1 12.1 0 0 1-2-1.6C3.1 7.3 5.4 5 8 5h1l.8-.8A6 6 0 0 0 8 4C4.3 4 1.4 7.8 1.2 7.9l-.2.3.3.3a12.3 12.3 0 0 0 2.3 2zm8.7-4.9l-.7.7a12.4 12.4 0 0 1 2.1 1.9C12.9 9 10.6 11 8 11H7l-.8.8L8 12c3.7 0 6.6-3.3 6.7-3.5l.3-.3-.2-.3a12.8 12.8 0 0 0-2.5-2.3zM1.5 15h-.4a.5.5 0 0 1 0-.7l13-13a.5.5 0 1 1 .7.7l-13 13h-.3z\\\"/><path d=\\\"M6.3 7.8a1.7 1.7 0 0 1 1.5-1.5l.9-.9H8A2.7 2.7 0 0 0 5.3 8a2.7 2.7 0 0 0 .1.7l.9-.9zm3.4.4a1.7 1.7 0 0 1-1.5 1.5l-.9.9H8A2.7 2.7 0 0 0 10.7 8a2.7 2.7 0 0 0-.1-.7l-.9.9z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='password']\").attr(\"type\", \"text\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function addEvent(direct) {\n    return function (element) {\n      if (direct) {\n        var className = $(this).attr('class') || '';\n        var input = $(this).parent().find(\"input\");\n        if (className === 'eye_show_icon') {\n          setHideIcon(input);\n        } else {\n          setShowIcon(input);\n        }\n      } else {\n        $($(element, content).parent().find('svg')[0]).click(function (ev) {\n          var className = $(this).attr('class') || '';\n          var input = $(this).parent().find(\"input\");\n          if (className === 'eye_show_icon') {\n            setHideIcon(input);\n          } else {\n            setShowIcon(input);\n          }\n        });\n      }\n    };\n  }\n\n  $(content).find(\"input[type='password']\").map(function (index, element) {\n    if (index > 0) {\n      setShowIcon(element);\n      addEvent(false)(element);\n    }\n  });\n};\n\n/**\r\n    * Añadir eventos de accessibility a un elemento, el evento consiste en las siguientes teclas:\r\n    * - Enter, Click, Space.\r\n    * Ayuda a que los elementos puedan ser accedidos (activar evento de click) de multiples maneras incluyendo teclado.\r\n    * @param {*} element jQuery element\r\n    * @param {Function} cb Callback\r\n    * @param {string[]} [extraEvent] Array of extra events\r\n    */\nbizagi.util.accessibilityEnter = function (element, cb, extraEvent) {\n  if (typeof cb !== \"function\") {\n    throw new Error('Error in \"accessibilityEnter\" function: You must provide a valid callback');\n  }\n  /**\r\n     * @type {*|jQuery|HTMLElement}\r\n     * @const\r\n     */\n  extraEvent = $.isArray(extraEvent) ? extraEvent : [];\n  extraEvent.indexOf('click') !== -1 ? extraEvent : extraEvent.push('click');\n\n  element.bind(\"keypress\", function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n\n    if (e.which === 13 || e.which === 32) {// Events: enter or space\n      cb(e);\n    }\n  });\n\n  element.bind(extraEvent.join(', '), function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n    cb(e);\n  });\n};\n\n/**\r\n    * Recreate native buttons for iOS\r\n    */\n\nbizagi.util.recreateNativeButtons = function (context) {\n  var params = context.getFormContainer().getParams();\n  if (bizagi.util.isNativePluginSupported() && bizagi.util.isiOSSmartphoneDevice()) {\n    var navigation = params.navigation;\n    if (typeof navigation !== \"undefined\") {\n      navigation.setNavigationButtons(context);\n    }\n  }\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isOverrideFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName] || null;\n\n  return bizagi.util.parseBoolean(feature) === true;\n};\n\n/**\r\n    * Create dynamic class using the name\r\n    */\nbizagi.util.createDynamicClass = function (nameClass, renderParams) {\n  if (nameClass) {\n    try {\n      // Create a dynamic function to avoid problem with eval calls when minifying the code\n      var dynamicFunction = \"var dynamicFn = function(renderParams){ \\r\\n\";\n      dynamicFunction += \"return new \" + nameClass + \"(renderParams);\\r\\n\";\n      dynamicFunction += \"}\\r\\n\";\n      dynamicFunction += \"dynamicFn\";\n      dynamicFunction = eval(dynamicFunction);\n\n      // Call the dynamic function\n      return dynamicFunction(renderParams);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  // No class supported\n  return null;\n};\n\n/**\r\n    * Mobiscroll languages\r\n    */\nbizagi.util.languages = {\n  \"es\": \"es\", \"es-ES\": \"es\", \"es-AR\": \"es\", \"es-BO\": \"es\", \"es-Cl\": \"es\", \"es-CO\": \"es\", \"es-CR\": \"es\", \"es-DO\": \"es\", \"es-EC\": \"es\", \"es-SV\": \"es\", \"es-GT\": \"es\", \"es-HN\": \"es\", \"es-MX\": \"es\", \"es-NI\": \"es\", \"es-PA\": \"es\", \"es-PY\": \"es\", \"es-PR\": \"es\", \"es-PE\": \"es\", \"es-US\": \"es\", \"es-UY\": \"es\", \"es-VE\": \"es\",\n  \"en\": \"en-US\", \"en-AU\": \"en-US\", \"en-BZ\": \"en-US\", \"en-CA\": \"en-US\", \"en-029\": \"en-US\", \"en-IN\": \"en-US\", \"en-IE\": \"en-US\", \"en-JM\": \"en-US\", \"en-MY\": \"en-US\", \"en-NZ\": \"en-US\", \"en-PH\": \"en-US\", \"en-SG\": \"en-US\", \"en-ZA\": \"en-US\", \"en-TT\": \"en-US\", \"en-GB\": \"en-US\", \"en-US\": \"en-US\", \"en-ZW\": \"en-US\",\n  \"de\": \"de\", \"de-AT\": \"de\", \"de-DE\": \"de\", \"de-LI\": \"de\", \"de-LU\": \"de\", \"de-CH\": \"de\",\n  \"fr\": \"fr\", \"fr-BE\": \"fr\", \"fr-CA\": \"fr\", \"fr-LU\": \"fr\", \"fr-MC\": \"fr\", \"fr-CH\": \"fr\", \"fr-FR\": \"fr\",\n  \"it\": \"it\", \"it-IT\": \"it\", \"it-CH\": \"it\",\n  \"ja\": \"ja\", \"ja-JA\": \"ja\", \"ja-JP\": \"ja\",\n  \"nl\": \"nl\", \"nl-NL\": \"nl\", \"nl-BE\": \"nl\",\n  \"pt\": \"pt-PT\", \"pt-BR\": \"pt-PT\", \"pt-PT\": \"pt-PT\",\n  \"ru\": \"ru\", \"ru-RU\": \"ru\",\n  \"cs\": \"cs\", \"cs-CZ\": \"cs\",\n  \"ar\": \"ar\", \"ar-DZ\": \"ar\", \"ar-BH\": \"ar\", \"ar-EG\": \"ar\", \"ar-IQ\": \"ar\", \"ar-JO\": \"ar\", \"ar-KW\": \"ar\", \"ar-LB\": \"ar\", \"ar-LY\": \"ar\", \"ar-MA\": \"ar\", \"ar-OM\": \"ar\", \"ar-QA\": \"ar\", \"ar-SA\": \"ar\", \"ar-SY\": \"ar\", \"ar-TN\": \"ar\", \"ar-AE\": \"ar\", \"ar-YE\": \"ar\",\n  \"zh\": \"zh\", \"zh-HK\": \"zh\", \"zh-MO\": \"zh\", \"zh-CN\": \"zh\", \"zh-Hans\": \"zh\", \"zh-SG\": \"zh\", \"zh-TW\": \"zh\", \"zh-Hant\": \"zh\" };\n\n\n/**\r\n                                                                                                                              * Sets time to 0 in the date\r\n                                                                                                                              * @param value\r\n                                                                                                                              * @param fullFormat\r\n                                                                                                                              * @param showTime\r\n                                                                                                                              * @returns {Date} date converted with milliseconds 0\r\n                                                                                                                              */\nbizagi.util.getNormalizedDate = function (value, fullFormat, showTime) {\n  var dateTime = value;\n\n  try {\n    if (!!value && typeof value === \"string\") {\n      dateTime = bizagi.util.dateFormatter.getDateFromInvariant(value, showTime);\n    }\n\n    if (dateTime && dateTime !== 0 && dateTime != null) {\n      if (!showTime) {\n        dateTime.setHours(0, 0, 0, 0);\n      } else {\n        dateTime.setMilliseconds(0);\n      }\n\n      dateTime = bizagi.util.dateFormatter.formatDate(dateTime, fullFormat);\n    }\n  } catch (e) {\n  }\n\n  return dateTime;\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName];\n\n  return bizagi.util.parseBoolean(feature);\n};\n\n/**\r\n    * LOCAL STORAGE\r\n    */\n\n/**\r\n        * Last process inbox\r\n        * @returns lastProcessInboxKey string\r\n        */\nbizagi.util.getLastProcessInboxKey = function () {\n  var lastProcessInboxKey = 'lastProcessInbox';\n  lastProcessInboxKey = lastProcessInboxKey.concat(\"_\", bizagi.util.getUserHash());\n  return lastProcessInboxKey;\n};\n\n/**\r\n    * Constructor();\r\n    */\n\n/**\r\n       * Set last process inbox in local storage\r\n       * @returns void()\r\n       */\nbizagi.util.lastProcessInboxInit = function () {\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(bizagi.util.getLastProcessInboxCreate()));\n};\n\n/**\r\n    * Create last process inbox\r\n    * @returns {} lastProcessInbox\r\n    */\nbizagi.util.getLastProcessInboxCreate = function () {\n  return {\n    \"processInfo\": bizagi.util.createLastProcessInboxProcess(),\n    \"sortInfo\": bizagi.util.createLastProcessInboxSort(),\n    \"filterInfo\": bizagi.util.createLastProcessInboxFilter(),\n    \"processColumnsInfo\": bizagi.util.createLastProcessInboxColumns(),\n    \"inputTrayInfo\": bizagi.util.createLastProcessInboxInputTray() };\n\n};\n\n/**\r\n    * Create last process inbox default\r\n    * @returns {} processInfo\r\n    */\nbizagi.util.createLastProcessInboxProcess = function () {\n  return {\n    \"processInfoName\": null,\n    \"idWorkflow\": -1 };\n\n};\n\n/**\r\n    * Create sort info\r\n    * @return {} sortInfo\r\n    */\nbizagi.util.createLastProcessInboxSort = function () {\n  return {\n    \"sortDirection\": \"asc\",\n    \"sortFieldName\": null,\n    \"sortOrder\": null };\n\n};\n\n/**\r\n    * Create filter info\r\n    * filterType (equal, like, startsWith, endsWith )\r\n    * @return {} filterInfo\r\n    */\nbizagi.util.createLastProcessInboxFilter = function () {\n  return {\n    \"filterValue\": null,\n    \"filterFieldName\": null,\n    \"filterType\": \"equal\" };\n\n};\n\n/**\r\n    * Create process columns info\r\n    * @return {} columnsInfo\r\n    */\nbizagi.util.createLastProcessInboxColumns = function () {\n  return {\n    \"processColumns\": [] };\n\n};\n\n/**\r\n    * Create input tray info\r\n    * @return string inputTrayInfo\r\n    */\nbizagi.util.createLastProcessInboxInputTray = function () {\n  return \"inbox\";\n};\n\n/**\r\n    * INIT\r\n    */\n\n/**\r\n        * Init last process inbox\r\n        * @returns lastProcessInbox {}\r\n        */\nbizagi.util.getLastProcessInbox = function () {\n  var lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n\n  if (!lastProcessInbox) {\n    // New object\n    bizagi.util.lastProcessInboxInit();\n    // Get object\n    lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n  }\n\n  return JSON.parse(lastProcessInbox);\n};\n\n/**\r\n    * SET\r\n    */\n\n/**\r\n        * Save current process info\r\n        * @param processName string\r\n        * @param idWorkflow integrer\r\n        * @return void()\r\n        */\nbizagi.util.setLastProcessInbox = function (processInfoName, idWorkflow, smartInboxId) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  if (lastProcessInbox.processInfo) {\n    if (lastProcessInbox.processInfo.idWorkflow != idWorkflow) {\n      lastProcessInbox.processColumnsInfo = null;\n    } else if (!bizagi.util.isEmpty(smartInboxId) && lastProcessInbox.processInfo.smartInboxId != smartInboxId) {\n      lastProcessInbox.processColumnsInfo = null;\n    }\n  }\n\n  // set data\n  lastProcessInbox.processInfo.processInfoName = processInfoName;\n  lastProcessInbox.processInfo.idWorkflow = parseInt(idWorkflow || -1);\n  lastProcessInbox.processInfo.smartInboxId = typeof smartInboxId != \"undefined\" ? smartInboxId : null;\n\n  // When last process inbox change is required to delete Filters\n  if (lastProcessInbox.filterInfo) {\n    lastProcessInbox.filterInfo = bizagi.util.createLastProcessInboxFilter();\n  }\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save process columns info\r\n    * @param processColumns []\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxProcessColumns = function (processColumns) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.processColumnsInfo = lastProcessInbox.processColumnsInfo || {};\n  lastProcessInbox.processColumnsInfo.processColumns = processColumns || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/*\r\n   * Get Live filter from storage\r\n   * @param id object\r\n   * @return object\r\n   */\nbizagi.util.getLiveFiltersFromStorage = function (id) {\n  var filters = [];\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\");\n  try {\n    var serialize = JSON.parse(modelStorage);\n    filters = typeof serialize[id] != \"undefined\" ? JSON.parse(serialize[id]) : filters;\n  } catch (e) {\n    filters = [];\n  }\n\n  return filters;\n};\n\n/*\r\n   * Save Live filter in storage\r\n   * @param id object\r\n   * @param value object\r\n   * @return void()\r\n   */\nbizagi.util.setLiveFiltersToStorage = function (id, value) {\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\") || \"[]\";\n  var serialize = JSON.parse(modelStorage);\n\n  serialize[id] = JSON.stringify(value);\n\n\n  bizagi.util.setItemLocalStorage(\"livefilters\", JSON.encode(Object.assign({}, serialize)));\n};\n\n/**\r\n    * Save sort info\r\n    * @param liveFilters array\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxLiveFilter = function (liveFilters) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.liveFilters = liveFilters || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n\n/**\r\n    * Save sort info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxSort = function (sortFieldName, direction, sortOrder) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.sortInfo.sortFieldName = sortFieldName || null;\n  lastProcessInbox.sortInfo.sortDirection = direction || 'asc';\n  lastProcessInbox.sortInfo.sortOrder = sortOrder || null;\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save filter info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxFilter = function (filterValue, filterFieldName, filterType) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.filterInfo.filterValue = filterValue || null;\n  lastProcessInbox.filterInfo.filterFieldName = filterFieldName || null;\n  lastProcessInbox.filterInfo.filterType = filterType || 'equal';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save input Tray inbox info\r\n    * @param inputTray string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxInputTray = function (inputTray) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.inputTrayInfo = inputTray || '';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * GET\r\n    */\n\n/**\r\n        * Get process info\r\n        * @return {} process info\r\n        */\nbizagi.util.getLastProcessInboxProcessInfo = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // localization / default\n  if (bizagi.localization && lastProcessInbox.processInfo.processInfoName == null) {\n    lastProcessInbox.processInfo.processInfoName = bizagi.localization.getResource(\"workportal-widget-inbox-all-processes\");\n  }\n  lastProcessInbox.processInfo.allProcesses = lastProcessInbox.processInfo.idWorkflow === -1;\n  // response\n  return lastProcessInbox.processInfo;\n};\n\n/**\r\n    * Get smartinbox id\r\n    * @return string smartinbox id\r\n    */\nbizagi.util.getLastProcessInboxSmartInboxId = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processInfo.smartInboxId;\n};\n\n/**\r\n    * Get sort info\r\n    * @return {} sort info\r\n    */\nbizagi.util.getLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.sortInfo;\n};\n\n/**\r\n    * Get filter info\r\n    * @return {} filter info\r\n    */\nbizagi.util.getLastProcessInboxFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.filterInfo;\n};\n\n/**\r\n    * Get live filter info\r\n    * @return {} live filter info\r\n    */\nbizagi.util.getLastProcessInboxLiveFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.liveFilters;\n};\n\n/**\r\n    * Get process columns info\r\n    * @return [] process columns info\r\n    */\nbizagi.util.getLastProcessInboxProcessColumns = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processColumnsInfo;\n};\n\n/**\r\n    * Get input tray info\r\n    * @return string inputTray info\r\n    */\nbizagi.util.getLastProcessInboxInputTray = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.inputTrayInfo;\n};\n\n/**\r\n    * DELETE\r\n    */\n\n/**\r\n        * Remove last process inbox\r\n        * @return void()\r\n        */\nbizagi.util.removeLastProcessInbox = function () {\n  bizagi.util.removeItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.sortInfo) {\n    // set data\n    lastProcessInbox.sortInfo = bizagi.util.createLastProcessInboxSort();\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessLiveFilters = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.liveFilters) {\n    // set data\n    lastProcessInbox.liveFilters = [];\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\nbizagi.util.getSyncTimeStampKey = function () {\n  var syncTimeStampKey = 'syncTimeStamp';\n  syncTimeStampKey = syncTimeStampKey.concat(\"_\", bizagi.util.getUserHash());\n  return syncTimeStampKey;\n};\n\nbizagi.util.storeSyncTimeStamp = function (currentDate) {\n  bizagi.util.setItemLocalStorage(bizagi.util.getSyncTimeStampKey(), currentDate.toString());\n};\n\nbizagi.util.getSyncTimeStamp = function () {\n  var syncTimeStamp = bizagi.util.getItemLocalStorage(bizagi.util.getSyncTimeStampKey());\n  return syncTimeStamp ? new Date(syncTimeStamp) : undefined;\n};\n\nbizagi.util.getUserHash = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  return userKey.hashCode();\n};\n\n/**\r\n    * set or get the value in the defaultWidget\r\n    * if is mobile use cookie\r\n    * if is desktop save the value DETAIL or TABLE\r\n    * if is desktop on get returns inbox or inboxGrid only\r\n    */\nbizagi.util.defaultWidget = function (newValueStr) {\n  var _preferService = bizagi.services.preferences(),\n  _widgets = bizagi.workportal.widgets.widget,\n  _val2Str = function _val2Str(val) {\n    return val === 'DETAIL' ? _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX : _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n  },\n  _str2Val = function _str2Val(str) {\n    return str === 'inbox' ? 'DETAIL' : 'TABLE';\n  },\n  _mobile = {\n    set: function set(newVal) {\n      bizagi.cookie(\"bizagiDefaultWidget\", newVal, { expires: 30 });\n    },\n    get: function get() {\n      return bizagi.cookie(\"bizagiDefaultWidget\");\n    } },\n\n  _desktop = {\n    set: function set(newVal) {\n      var _newValueView = _str2Val(newVal);\n      _preferService.changePreference(_preferService.name.INBOX_VIEW_TYPE, _newValueView);\n    },\n    get: function get() {\n      var _actualValue = _preferService.getPreference(_preferService.name.INBOX_VIEW_TYPE);\n      return _val2Str(_actualValue);\n    } },\n\n  _device = bizagi.util.isMobile ? _mobile : _desktop;\n\n  if (newValueStr !== undefined)\n  _device.set(newValueStr);\n  return _device.get();\n};\n\nbizagi.util.getMobileFeaturesKey = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  var mobileFeaturesKey = 'mobileFeatures';\n  mobileFeaturesKey = mobileFeaturesKey.concat(\"_\", userKey);\n  return mobileFeaturesKey;\n};\n\nbizagi.util.getMobileFeatures = function () {\n  var stringFeatures = bizagi.util.getItemLocalStorage(bizagi.util.getMobileFeaturesKey());\n  var updatedFeatures = $.extend(!bizagi.util.isEmpty(stringFeatures) ? JSON.parse(stringFeatures) : {}, bizagiConfig.features);\n  return updatedFeatures;\n};\n\nbizagi.util.storeMobileFeatures = function (mobileFeatures) {\n  var storedFeatures = bizagi.util.getMobileFeatures();\n  var updatedFeatures = $.extend(storedFeatures, mobileFeatures);\n  bizagi.util.setItemLocalStorage(bizagi.util.getMobileFeaturesKey(), JSON.stringify(updatedFeatures));\n};\n\nbizagi.util.getCardviewMaxColumsAllowed = function () {\n  var maxColumns = 100;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n  if (mobileFeatures && mobileFeatures.maxColumnsEnabled &&\n  mobileFeatures.maxColumnsEnabled.enabled === true) {\n    maxColumns = mobileFeatures.maxColumnsEnabled.value;\n  }\n  return maxColumns;\n};\n\nbizagi.util.blobTob64 = function (blob, onlyData) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n  reader.readAsDataURL(blob);\n  reader.onloadend = function () {\n    base64data = reader.result;\n    if (onlyData) {\n      base64data = base64data.split(',')[1];\n    }\n    def.resolve(base64data);\n  };\n  return def;\n};\n/**\r\n    * Convert blob to text\r\n    * @param {*} blob \r\n    */\nbizagi.util.blobToText = function (blob) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n\n  reader.readAsText(blob);\n  reader.onloadend = function () {\n    def.resolve(reader.result);\n  };\n\n  return def.promise();\n};\n\n/**\r\n    * Get valid data url\r\n    * @param {} properties\r\n    * @returns {}\r\n    */\n\n/**\r\n       * Get valid data url\r\n       * @param {} properties\r\n       * @returns {}\r\n       */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.getDataUrl = function (binaryData, url) {\n  var currentUrl;\n\n  try {\n    if (typeof binaryData !== \"undefined\" && !bizagi.util.isEmpty(binaryData)) {\n      var data = binaryData;\n      var newUrl = data.value || data;\n\n      if (Array.isArray(newUrl)) {\n        var tempUrl = newUrl.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = newUrl;\n      }\n    } else {\n      currentUrl = url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.console = {};\nbizagi.util.console.log = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.log(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.log.apply(this, arguments);\n};\n\nbizagi.util.console.error = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.error(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.error.apply(this, arguments);\n};\n\nbizagi.util.deepExtend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    var obj = arguments[i];\n\n    if (!obj)\n    continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (_typeof(obj[key]) === 'object') {\n          if (obj[key] instanceof Array == true)\n          out[key] = obj[key].slice(0);else\n\n          out[key] = deepExtend(out[key], obj[key]);\n        } else\n\n        out[key] = obj[key];\n      }\n    }\n  }\n\n  return out;\n};\n\nbizagi.util.extend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    if (!arguments[i])\n    continue;\n\n    for (var key in arguments[i]) {\n      if (arguments[i].hasOwnProperty(key))\n      out[key] = arguments[i][key];\n    }\n  }\n\n  return out;\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n/**\r\n    * Get the justify-content property to apply to a control according to the specified \"align\" property\r\n    * @param {string} align - left, right, center, default or justify\r\n    */\nbizagi.util.mapAlignClassName = function (align) {\n  var descs = {\n    'rigth': 'flex-end',\n    'left': 'flex-start',\n    'justify': 'flex-start',\n    'default': 'center',\n    'center': 'center' };\n\n  return descs[align] || \"center\";\n};\n\nbizagi.util.isMobileErrorTracesEnabled = function () {\n  var mobileErrorTracesEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileErrorTraces && mobileFeatures.mobileErrorTraces.enabled === true) {\n    mobileErrorTracesEnabled = true;\n  }\n\n  return mobileErrorTracesEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileSmartInboxEnabled = function () {\n  var mobileSmartInboxEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileSmartInbox && mobileFeatures.mobileSmartInbox.enabled === true) {\n    mobileSmartInboxEnabled = true;\n  }\n\n  return mobileSmartInboxEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileLiveFiltersEnabled = function () {\n  var mobileLiveFiltersEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileLiveFilters && mobileFeatures.mobileLiveFilters.enabled === true) {\n    mobileLiveFiltersEnabled = true;\n  }\n\n  return mobileLiveFiltersEnabled && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n$.any = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return false;\n  var result = $.grep(data, callback);\n  return result != null && result !== undefined && result.length > 0;\n};\n\n$.first = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return null;\n  var result = $.grep(data, callback);\n  return result == null || result === undefined || result.length == 0 ? null : result[0];\n};\n\n$.groupBy = function (data, property) {\n  if (data === undefined || data == null || data.length == 0) return {};\n  var result = {};\n  $.each(data, function (i, item) {\n    if (item === undefined) return;\n    if (result[item[property]] === undefined) result[item[property]] = [];\n    result[item[property]].push(item);\n  });\n  return result;\n};\n\n/**\r\n    * Downloads the file and try to open it\r\n    * @param blobFile\r\n    * @param fileName\r\n    */\nbizagi.util.downloadBlobFile = function (blobFile, fileName) {\n  if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n    window.navigator.msSaveOrOpenBlob(blobFile, fileName);\n  } else {\n    var url = window.URL.createObjectURL(blobFile);\n    var link = document.createElement(\"a\");\n\n    link.style = \"display: none\";\n    document.body.appendChild(link);\n\n    link.href = url;\n    link.download = fileName;\n\n    link.click();\n\n    window.URL.revokeObjectURL(url);\n    link.parentNode.removeChild(link);\n  }\n};\n\n/**\r\n    * Verify if blob type json is an error\r\n    * @param {*} jsonFile Blob tipo JSON\r\n    */\nbizagi.util.handleJSONResponse = function (jsonFile) {\n  var deferred = new $.Deferred();\n\n  if (jsonFile && /application\\/json/i.test(jsonFile.type)) {\n    bizagi.util.blobToText(jsonFile).then(function (result) {\n      var json = JSON.parse(result);\n\n      if (json.type === \"error\") {\n        deferred.reject(result);\n      } else {\n        deferred.resolve(jsonFile);\n      }\n    }).fail(function (err) {\n      deferred.reject(err);\n    });\n  } else {\n    deferred.resolve(jsonFile);\n  }\n\n  return deferred.promise();\n};\n\n/**\r\n    * Method to validate the valid format of values\r\n    * @param value\r\n    * @returns {{add: function(), validate: function()}}\r\n    */\nbizagi.util.bzValidator = function (value) {\n  var validators = [];\n  var errors = [];\n\n  return {\n    add: function add(callbackValidator, message) {\n      if (typeof callbackValidator == \"function\") {\n        validators.push({\n          callback: callbackValidator,\n          message: message });\n\n      } else {\n        console.warn(\"Callback is not a function\");\n      }\n\n      return this;\n    },\n    validate: function validate(callbackResponse) {\n      errors = [];\n\n      try {\n        if (validators && validators.length > 0) {\n          validators.forEach(function (validator) {\n            var result = validator.callback(value);\n            if (!bizagi.util.isBoolean(result)) {\n              errors.push(\"Callback evaluation is not a function: \" + validator.message);\n            } else if (!result) {\n              errors.push(validator.message || \"Validation error\");\n            }\n          });\n        } else {\n          errors.push(\"There are not validators added\");\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n\n      // Call response\n      callbackResponse({ errors: errors });\n\n      // Clean validators\n      validators = [];\n\n      return this;\n    },\n    isValid: function isValid() {\n      return errors && !errors.length;\n    } };\n\n};","/*\r\n*   Name: Bizagi Template Services\r\n*   Author: Bizagi UI Team\r\n*   Comments:\r\n*   -   This class will provide a facade to access to all templates available on bizagi\r\n*/\n\n$.Class.extend(\"bizagi.kendo.templates.services.service\", {\n  // Static templates\n  customTemplateFile: bizagi.loader.getResource(\"tmpl\", \"bizagi.overrides.\" + bizagi.detectDevice() + \".custom.templates\"),\n  cachedFiles: {},\n  cachedTemplates: {},\n  customTemplates: {} },\n{\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(localization) {\n    this.localization = localization;\n    this.cssRegex = /{{css \"(.+)\"}}/g;\n    this.loadingFileDeferred = {};\n  },\n\n  /*\r\n     *   Load custom templates info in order to override framework stuff\r\n     */\n  loadCustomTemplates: function loadCustomTemplates() {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(this.getTemplateFile(this.Class.customTemplateFile)).\n    done(function (response) {\n      var temp = $(\"<div />\").html(response);\n      var responseParts = $(\"script\", temp);\n\n      $.each(responseParts, function (i, responsePart) {\n        responsePart = $(responsePart);\n        self.Class.customTemplates[responsePart.attr(\"id\")] = responsePart.html();\n      });\n\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Returns the template from cache or from ajax\r\n     *   Must return a deferred\r\n     */\n  getTemplate: function getTemplate(template, id) {\n    var self = this;\n    var isCustomTemplate = false;\n\n    // If the template contains double hash, it's because its in release mode, then we got to ignore the first hash\n    template = template.replace(/([^#]*#)([^#]*#)([^#]*)/g, \"$1$3\");\n\n    // If the template contains the hash before the question mark, we need to exchange them\n    template = template.replace(/([a-zA-Z_\\/.-=]*)#([a-zA-Z_\\/.-]*)\\?(build=[a-zA-Z0-9.-]*)/g, \"$1?$3#$2\");\n\n    if (bizagi.enableCustomizations) {\n      var hash = self.getHash(template);\n\n      // Check if a custom template has been given in order to override it\n      if (self.Class.customTemplates[hash]) {\n        isCustomTemplate = true;\n      }\n    }\n\n    if (isCustomTemplate || bizagi.loader.environment !== \"release\") {\n      return this.internalGetTemplate(template, id).\n      pipe(function (resolvedTemplate) {\n        // Creates a in-memory element to hold the template\n        return resolvedTemplate;\n      });\n    } else {\n      return this.getTemplateForRelease(template, id).\n      pipe(function (resolvedTemplate) {\n        return resolvedTemplate;\n      });\n    }\n  },\n\n  /*\r\n      *   Returns the template from cache or from ajax\r\n      *   Must return a deferred\r\n      */\n  getTemplateWidget: function getTemplateWidget(template, id) {\n    var self = this;\n    var isCustomTemplate = false;\n\n    // If the template contains double hash, it's because its in release mode, then we got to ignore the first hash\n    template = template.replace(/([^#]*#)([^#]*#)([^#]*)/g, \"$1$3\");\n\n    // If the template contains the hash before the question mark, we need to exchange them\n    template = template.replace(/([a-zA-Z_\\/.-=]*)#([a-zA-Z_\\/.-]*)\\?(build=[a-zA-Z0-9.-]*)/g, \"$1?$3#$2\");\n\n    if (bizagi.enableCustomizations) {\n      var hash = self.getHash(template);\n\n      // Check if a custom template has been given in order to override it\n      if (self.Class.customTemplates[hash]) {\n        isCustomTemplate = true;\n      }\n    }\n\n    if (isCustomTemplate || bizagi.loader.environment !== \"release\") {\n      return this.internalGetTemplate(template, id).\n      pipe(function (resolvedTemplate) {\n        // Creates a in-memory element to hold the template\n        return resolvedTemplate;\n      });\n    } else {\n      return this.getTemplateForRelease(template, id).then(function (resolvedTemplate) {\n        return resolvedTemplate;\n      });\n    }\n  },\n\n  /*\r\n     *   Returns the template from cache or from ajax\r\n     *   Must return a deferred\r\n     */\n  getTemplateWebpart: function getTemplateWebpart(template, id) {\n    // If the template contains double hash, it's because its in release mode, then we got to ignore the first hash\n    template = template.replace(/([^#]*#)([^#]*#)([^#]*)/g, \"$1$3\");\n\n    // If the template contains the hash before the question mark, we need to exchange them\n    template = template.replace(/([a-zA-Z_\\/.-=]*)#([a-zA-Z_\\/.-]*)\\?(build=[a-zA-Z0-9.-]*)/g, \"$1?$3#$2\");\n    return this.internalGetTemplate(template, id).\n    pipe(function (resolvedTemplate) {\n      // Creates a in-memory element to hold the template\n      return resolvedTemplate;\n    });\n  },\n\n  /*\r\n     * Load the production template and return requested template\r\n     */\n  getTemplateForRelease: function getTemplateForRelease(template, id) {\n    var self = this;\n    var defer = $.Deferred();\n    var url;\n    var hash;\n\n    // extract url\n    if (self.containsHash(template)) {\n      url = self.getUrlWithoutHashes(template);\n      hash = self.getHash(template);\n    } else {\n      url = template;\n      hash = \"\";\n    }\n\n    var cachedTemplate = self.Class.cachedTemplates[url];\n\n    if (!cachedTemplate) {\n      $.when(self.loadTemplateFileForRelease(url)).\n      done(function () {\n        defer.resolve(self.processAndReturnTemplate(url, hash, id));\n      });\n\n    } else {\n      defer.resolve(self.processAndReturnTemplate(url, hash, id));\n    }\n\n    return defer.promise();\n  },\n\n  loadTemplateFileForRelease: function loadTemplateFileForRelease(url) {\n    var self = this;\n    var defer = $.Deferred();\n\n    // Check in cache\n    if (self.Class.cachedTemplates[url]) {\n      return self.Class.cachedTemplates[url];\n    }\n\n    // Check if it is already being loaded\n    if (self.loadingFileDeferred[url]) {\n      $.when(self.loadingFileDeferred[url]).\n      done(function () {\n        // Resolve with cached content\n        defer.resolve(self.Class.cachedTemplates[url]);\n      });\n      return defer.promise();\n    }\n\n    // Load file via ajax\n    self.loadingFileDeferred[url] = $.Deferred();\n    $.when($.ajax({ url: url, dataType: \"text\" }), self.localization.ready()).\n    done(function (response) {\n      if (!response)\n      defer.reject(\"\");\n\n      // response is an object\n      if (typeof response != \"string\")\n      response = JSON.parse(response[0]);\n\n      self.Class.cachedTemplates[url] = response;\n\n      // process templates for translate, remove CSS and generate global function template\n      var index;\n      var valueTemplate;\n      var translatedTemplate;\n\n      for (index in response) {\n        if (response.hasOwnProperty(index)) {\n          valueTemplate = response[index];\n          translatedTemplate = self.localization.translate(valueTemplate);\n\n          // Remove css tags\n          translatedTemplate = translatedTemplate.replace(self.cssRegex, \"\");\n          self.Class.cachedTemplates[url][index] = translatedTemplate;\n        }\n      }\n\n      self.loadingFileDeferred[url].resolve();\n      defer.resolve(response);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     * Return hashed template\r\n     */\n  processAndReturnTemplate: function processAndReturnTemplate(url, hash, id) {\n    var self = this;\n    var template = self.Class.cachedTemplates[id];\n\n    if (!template) {\n      template = self.Class.cachedTemplates[url][hash];\n\n      if (!template) {\n        throw \"template \" + template + \"doesn't exist\";\n      } else {\n        self.Class.cachedTemplates[id] = template;\n      }\n    }\n\n    return template;\n  },\n\n  /*\r\n     *   Returns the template from cache or from ajax\r\n     *   Must return a deferred\r\n     */\n  internalGetTemplate: function internalGetTemplate(template, id) {\n    var self = this;\n    var defer = new $.Deferred();\n    var cachedTemplate = this.Class.cachedTemplates[id];\n\n    if (!cachedTemplate) {\n\n      // Check if the template has a hash\n      if (self.containsHash(template)) {\n        var url = self.getUrlWithoutHashes(template);\n        var hash = self.getHash(template);\n\n        // Check if a custom template has been given in order to override it\n        if (self.Class.customTemplates[url]) {\n          // Resolve deferred\n          if (self.Class.customTemplates[url][id]) {\n            defer.resolve(self.Class.customTemplates[hash]);\n            return defer.promise();\n          }\n        }\n\n        $.when(self.getTemplatePart(url, hash, id)).\n        done(function (response) {\n          // Set in cache\n          self.Class.cachedTemplates[id] = response;\n\n          // Resolve deferred\n          defer.resolve(response);\n        });\n\n      } else {\n        // Gets the full template\n        $.when(self.getTemplateFile(template)).\n        done(function (response) {\n          self.Class.cachedTemplates[id] = response;\n          // Resolve deferred\n          defer.resolve(response);\n        });\n      }\n    } else {\n      defer.resolve(cachedTemplate);\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Gets a template part from a composite template file\r\n     *   Just load one template at a time to avoid multiple loadings of the same file\r\n     */\n  getTemplatePart: function getTemplatePart(templateUrl, hash) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // If it is already loading a template set a timeout to check later\n    $.when(self.loadingTemplatePartExecution).\n    done(function () {\n      // Set a async flag to synchronize this method\n      self.loadingTemplatePart = true;\n      self.loadingTemplatePartExecution = new $.Deferred();\n\n      // Load template file\n      $.when(self.getTemplateFile(templateUrl)).\n      done(function (response) {\n        var temp = $(\"<div />\").html(response);\n        var responsePart = $(\"#\" + hash, temp);\n\n        // Assertion to check that hash exists inside the main template                \n        if (BIZAGI_ENVIRONMENT === \"debug\" && responsePart.length === 0) {\n          console.warn(\"No template part (\" + hash + \") found in content for:\" + templateUrl);\n        }\n\n        // Set response\n        response = responsePart.html();\n\n        // Free async flag\n        self.loadingTemplatePartExecution.resolve();\n        self.loadingTemplatePart = true;\n\n        // Resolve main deferred\n        defer.resolve(response);\n      });\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Loads a full template file and keeps it on cache\r\n     */\n  getTemplateFile: function getTemplateFile(template) {\n    var self = this;\n    var cachedTemplate = this.Class.cachedFiles[template];\n\n    if (cachedTemplate) return cachedTemplate;\n\n    // Not found in cache, fetch it with ajax\n    return $.when($.ajax({ url: template, dataType: \"text\" }), self.localization.ready()).\n    pipe(function (response) {\n      // if no response has been found in the source file return an empty template\n      if (!response) return \"\";\n\n      if (typeof response != \"string\")\n      response = response[0];\n\n      // Translate template\n      var translatedTemplate = self.localization.translate(response);\n\n      // Find css and import them\n      var matches = translatedTemplate.match(self.cssRegex);\n\n      if (matches) {\n        $.each(matches, function (i, match) {\n          var cssFile = match.replace(self.cssRegex, \"$1\");\n\n          bizagi.loader.loadFile({ src: cssFile, type: \"css\", environment: \"debug\" });\n        });\n      }\n      // Remove css tags\n      translatedTemplate = translatedTemplate.replace(self.cssRegex, \"\");\n\n      // Set in cache\n      self.Class.cachedFiles[template] = typeof translatedTemplate === \"string\" ? translatedTemplate :\n      translatedTemplate[0].outerHTML;\n\n      return translatedTemplate;\n    });\n  },\n\n  /*\r\n     *   Check if a url contains hashes\r\n     */\n  containsHash: function containsHash(url) {\n    return url.indexOf(\"#\") !== -1;\n  },\n\n  /*\r\n     *   Get url hash\r\n     */\n  getHash: function getHash(url) {\n    return url.substring(url.indexOf(\"#\") + 1, url.length);\n  },\n\n  /*\r\n     *   Get url without hashes\r\n     */\n  getUrlWithoutHashes: function getUrlWithoutHashes(url) {\n    return url.substring(0, url.indexOf(\"#\"));\n  } });\n\n\nif (!bizagi.override.enableMSF) {\n\n  jQuery.fn.fastEmpty = function () {\n    $(this).kendoTmplEmpty();\n  };\n\n  jQuery.fasttmpl = function (tmpl, data) {\n    return jQuery.kendoTmpl(tmpl, data);\n  };\n\n  //jQuery.tmpl = function (tmpl, data) {\n  //    return jQuery.kendoTmpls(tmpl, data);\n  //};\n\n  jQuery.cacheTemplate = function (tmpl, data) {\n    jQuery.cacheKendoTemplate(tmpl, data);\n  };\n\n}\n// KENDO TEMPLATES\n\n/**\r\n *   Overrides detach method to apply custom stuff\r\n */\njQuery.fn.kendoTmplEmpty = function () {\n  this.children().remove();\n\n  // Check if it has loading property to apply plugin\n  var element = $(this);\n  if (element.hasClass(\"ui-bizagi-component-loading\")) {\n    element.loadingMessage();\n  }\n};\n\n/**\r\n    *   JQuery tmpl extension\r\n    */\njQuery.kendoTmpl = function (tmpl, data) {\n  if (typeof tmpl === \"undefined\") return \"\";\n\n  tmpl = tmpl.replace(/(\\n*)|(\\r*)|(\\t*)/g, \"\");\n  tmpl = tmpl.replace(/\\s+/g, \" \");\n\n  var tempTmpl = kendo.template(tmpl, { useWithBlock: false });\n  var html = tempTmpl(data);\n\n  return $.trim(html.replace(/>\\s*</g, \"><\"));\n};\n\njQuery.kendoTmpls = function (tmpl, data) {\n  return $(jQuery.kendoTmpl(tmpl, data));\n};\n\njQuery.cacheKendoTemplate = function (tmpl, data) {\n  var tempTmpl = bizagi.kendo.templates.services.service.cachedTemplates[tmpl];\n  return jQuery.kendoTmpl(tempTmpl, data);\n};","/**\r\n * Created by RicardoPD on 4/6/2016.\r\n */\n\n// Create or define namespace\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.services = typeof bizagi.services !== \"undefined\" ? bizagi.services : {};\nbizagi.services.ajax = typeof bizagi.services.ajax !== \"undefined\" ? bizagi.services.ajax : {};\nbizagi.log = bizagi.log || function () {};\nbizagi.assert = bizagi.assert || function () {};\n// Global variables\nbizagi.services.ajax.useAbsolutePath = typeof BIZAGI_USE_ABSOLUTE_PATH !== \"undefined\" ? BIZAGI_USE_ABSOLUTE_PATH : false;\nbizagi.services.ajax.pathToBase = bizagi.services.ajax.useAbsolutePath ? bizagi.loader.getLocationPrefix() : typeof BIZAGI_PATH_TO_BASE !== \"undefined\" ? BIZAGI_PATH_TO_BASE : \"\";\nbizagi.services.ajax.loginPage = bizagi.services.ajax.pathToBase || \"default.htm\";\nbizagi.services.ajax.errorPage = bizagi.services.ajax.pathToBase + \"error.html\";\nbizagi.services.ajax.rpcEnabled = false;\nbizagi.services.ajax.rpcHandler = \"RestServices/JsonRpcHandler.ashx\";\nbizagi.services.ajax.logEnabled = true;\nbizagi.services.ajax.logSuccess = true;\nbizagi.services.ajax.logSubmits = true;\nbizagi.services.ajax.logFail = true;\nbizagi.services.ajax.batch = {};\nbizagi.services.ajax.batchCount = 0;\nbizagi.services.ajax.batchTimer = 100;\nbizagi.services.ajax.batchTimeoutInstance = null;\n\nbizagi.services.ajax.parseJSON = function (data) {\n  var result = {};\n  // Remove break line\n  data = data.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n\n  try {\n    result = $.parseJSON(data);\n  } catch (e) {\n    try {\n      // Try to fix some known problems regarding rare ascii characters\n      result = $.parseJSON(data.replace(/\\x1d/g, \".\"));\n    } catch (ex) {\n      result.type = \"error\";\n      result.code = e.errorCode;\n      result.message = data;\n      //Throw exception in next layer\n    }\n  }\n\n  if (result.type && result.type == \"error\" || result.status && result.status == \"error\") {\n    if (result.code == \"AUTH_ERROR\" || result.code == \"AUTHENTICATION_ERROR\") {\n      // Redirect to login page\n      /*if (typeof bizagi.services.ajax.loginPage === \"string\") {\r\n       // Remove session storage of authentication data\r\n       sessionStorage.removeItem(\"bizagiAuthentication\");\r\n       if (localStorage.getItem(\"clientLog\") != \"true\") {\r\n       // Reload page\r\n       //window.location = bizagi.services.ajax.loginPage;\r\n       console.warn(\"Debe autenticarse\");\r\n       }\r\n       } else {\r\n       bizagi.services.ajax.loginPage();\r\n       }*/\n\n    } else if (result.code == \"FED_AUTHENTICATION_ERROR\") {\n      /*if (typeof bizagi.services.ajax.loginPage === \"string\") {\r\n                                                            sessionStorage.setItem(\"FED_AUTHENTICATION_ERROR\", true);\r\n                                                            window.location = result.message;\r\n                                                            } else {\r\n                                                            bizagi.services.ajax.loginPage();\r\n                                                            }*/\n    }\n\n    if (result.code == \"licenseError\") {\n      window.location = bizagi.services.ajax.errorPage + \"?message=\" + result.message + \"&type=\" + result.type;\n    }\n\n    var message = (result.code ? result.code : \"\") + (result.message ? \"\" + result.message : \"\");\n    jQuery.error(message);\n  }\n  localStorage.setItem(\"clientLog\", \"false\");\n  return result;\n};\n\n$.ajaxSetup({\n  converters: {\n    \"text json\": bizagi.services.ajax.parseJSON },\n\n  beforeSend: function beforeSend(jqXHR, settings) {\n    if (settings.dataType == \"json\" && !settings.batchRequest) {\n      jqXHR._loading = true;\n      bizagi && bizagi.loading && bizagi.loading.start();\n\n    }\n  },\n  complete: function complete(jqXHR) {\n    if (jqXHR._loading) {\n      bizagi && bizagi.loading && bizagi.loading.stop();\n    }\n    if (jqXHR.status === 401) {\n      if (jqXHR.responseJSON && jqXHR.responseJSON.validationMethod === \"implicitPrincipalInjection\") {\n        return;\n      }\n\n      bizagi.services.redirectToLoginPage();\n    } else if (jqXHR.status === 503 && typeof cordova === \"undefined\") {\n      bizagi.loader.startPageMaintenance();\n    }\n  } });\n\nvar jqAutoLogin = function jqAutoLogin(options) {\n  this.options = {};\n  this.user = {};\n  this.intercept = false;\n  this.refreshing = false;\n  this.buffer = [];\n  this.currentRequests = [];\n\n  this._resetOptions();\n  this._setupInterceptor();\n\n  $.extend(this.options, options);\n\n  this._resetData();\n};\n\n// Public methods\n\njqAutoLogin.prototype.logout = function logout() {\n  this._resetData();\n  this._deactivateInterceptor();\n  this._fireEvent(\"logout\");\n};\n\njqAutoLogin.prototype.login = function login(user) {\n  this.setUserData(user);\n  this._activateInterceptor();\n  this._fireEvent(\"login\");\n};\n\njqAutoLogin.prototype.setUserData = function setUserData(user) {\n  this.user = {\n    user: user.user || null,\n    password: user.password || null,\n    domain: user.domain || null };\n\n};\n\n// Private methods\n\njqAutoLogin.prototype._activateInterceptor = function _activateInterceptor() {\n  this.intercept = true;\n};\n\njqAutoLogin.prototype._addToBuffer = function _addToBuffer(settings, deferred) {\n  this.buffer.push({\n    deferred: deferred,\n    settings: settings });\n\n};\n\njqAutoLogin.prototype._clearBuffer = function _clearBuffer() {\n  this.buffer = [];\n};\n\njqAutoLogin.prototype._deactivateInterceptor = function _deactivateInterceptor() {\n  this.intercept = false;\n};\n\njqAutoLogin.prototype._fireBuffer = function _fireBuffer() {\n  var self = this;\n  var deferred;\n  var promises = [];\n\n  for (var i in this.buffer) {\n    deferred = this.buffer[i].deferred;\n\n    this.buffer[i].settings.refreshRetry = true;\n\n    promises.push($.ajax(this.buffer[i].settings).then(deferred.resolve, deferred.reject));\n  }\n\n  this._clearBuffer();\n\n  $.when.apply($, promises).\n  done(function () {\n    self._setRefreshingFlag(false);\n  }).\n  fail(function () {\n    self._setRefreshingFlag(false);\n    self.logout();\n  });\n};\n\njqAutoLogin.prototype._fireEvent = function _fireEvent(eventType) {\n  if (this._hasEvent(eventType)) {\n    return this.options.events[eventType]();\n  }\n};\n\njqAutoLogin.prototype._hasEvent = function _hasEvent(eventType) {\n  return this.options.events[eventType] !== undefined && typeof this.options.events[eventType] === \"function\";\n};\n\njqAutoLogin.prototype._resetData = function _resetData() {\n  this.user = {\n    user: null,\n    password: null,\n    domain: null };\n\n};\n\njqAutoLogin.prototype._resetOptions = function _resetOptions() {\n  this.options = {\n    bufferInterval: 25,\n    bufferWaitLimit: 500,\n    events: {} };\n\n};\n\njqAutoLogin.prototype._setRefreshingFlag = function _setRefreshingFlag(newFlag) {\n  this.refreshing = newFlag;\n};\n\njqAutoLogin.prototype._setupInterceptor = function _setupInterceptor() {\n  var self = this;\n\n  // Credits to gnarf @ http://stackoverflow.com/a/12446363/602488\n  $.ajaxPrefilter(function (options, originalOptions, jqxhr) {\n    if (options.refreshRetry === true) {\n      return;\n    }\n\n    var deferred = $.Deferred();\n\n    self.currentRequests.push(options.url);\n    jqxhr.always(function () {\n      self.currentRequests.splice($.inArray(options.url, self.currentRequests), 1);\n    });\n    jqxhr.done(deferred.resolve);\n    jqxhr.fail(function () {\n      var args = Array.prototype.slice.call(arguments);\n\n      if (self.intercept && jqxhr.status === 401 && self._hasEvent(\"sessionExpiration\")) {\n        self._addToBuffer(options, deferred);\n\n        if (!self.refreshing) {\n          self._setRefreshingFlag(true);\n          self._fireEvent(\"sessionExpiration\").\n          done(function () {\n            // Setup buffer interval that waits for all sent requests to return\n            var waited = 0;\n            self.interval = setInterval(function () {\n              waited += self.options.bufferInterval;\n\n              // All requests have returned 401 and have been buffered\n              if (self.currentRequests.length === 0 || waited >= self.options.bufferWaitLimit) {\n                clearInterval(self.interval);\n                self._fireBuffer();\n              }\n            }, self.options.bufferInterval);\n          }).\n          fail(function () {\n            self.logout();\n          });\n        }\n      } else {\n        deferred.rejectWith(jqxhr, args);\n      }\n    });\n\n    return deferred.promise(jqxhr);\n  });\n};","var jqAutoLogin = function jqAutoLogin(options) {\n  this.options = {};\n  this.user = {};\n  this.intercept = false;\n  this.refreshing = false;\n  this.buffer = [];\n  this.currentRequests = [];\n\n  this._resetOptions();\n  this._setupInterceptor();\n\n  $.extend(this.options, options);\n\n  this._resetData();\n};\n\n// Public methods\n\njqAutoLogin.prototype.logout = function logout() {\n  this._resetData();\n  this._deactivateInterceptor();\n  this._fireEvent(\"logout\");\n};\n\njqAutoLogin.prototype.login = function login(user) {\n  this.setUserData(user);\n  this._activateInterceptor();\n  this._fireEvent(\"login\");\n};\n\njqAutoLogin.prototype.setUserData = function setUserData(user) {\n  this.user = {\n    user: user.user || null,\n    password: user.password || null,\n    domain: user.domain || null };\n\n};\n\n// Private methods\n\njqAutoLogin.prototype._activateInterceptor = function _activateInterceptor() {\n  this.intercept = true;\n};\n\njqAutoLogin.prototype._addToBuffer = function _addToBuffer(settings, deferred) {\n  this.buffer.push({\n    deferred: deferred,\n    settings: settings });\n\n};\n\njqAutoLogin.prototype._clearBuffer = function _clearBuffer() {\n  this.buffer = [];\n};\n\njqAutoLogin.prototype._deactivateInterceptor = function _deactivateInterceptor() {\n  this.intercept = false;\n};\n\njqAutoLogin.prototype._fireBuffer = function _fireBuffer() {\n  var self = this;\n  var deferred;\n  var promises = [];\n\n  for (var i in this.buffer) {\n    deferred = this.buffer[i].deferred;\n\n    this.buffer[i].settings.refreshRetry = true;\n\n    promises.push($.ajax(this.buffer[i].settings).then(deferred.resolve, deferred.reject));\n  }\n\n  this._clearBuffer();\n\n  $.when.apply($, promises).\n  done(function () {\n    self._setRefreshingFlag(false);\n  }).\n  fail(function () {\n    self._setRefreshingFlag(false);\n    self.logout();\n  });\n};\n\njqAutoLogin.prototype._fireEvent = function _fireEvent(eventType) {\n  if (this._hasEvent(eventType)) {\n    return this.options.events[eventType]();\n  }\n};\n\njqAutoLogin.prototype._hasEvent = function _hasEvent(eventType) {\n  return this.options.events[eventType] !== undefined && typeof this.options.events[eventType] === \"function\";\n};\n\njqAutoLogin.prototype._resetData = function _resetData() {\n  this.user = {\n    user: null,\n    password: null,\n    domain: null };\n\n};\n\njqAutoLogin.prototype._resetOptions = function _resetOptions() {\n  this.options = {\n    bufferInterval: 25,\n    bufferWaitLimit: 500,\n    events: {} };\n\n};\n\njqAutoLogin.prototype._setRefreshingFlag = function _setRefreshingFlag(newFlag) {\n  this.refreshing = newFlag;\n};\n\njqAutoLogin.prototype._setupInterceptor = function _setupInterceptor() {\n  var self = this;\n\n  // Credits to gnarf @ http://stackoverflow.com/a/12446363/602488\n  $.ajaxPrefilter(function (options, originalOptions, jqxhr) {\n    if (options.refreshRetry === true) {\n      return;\n    }\n\n    var deferred = $.Deferred();\n\n    self.currentRequests.push(options.url);\n    jqxhr.always(function () {\n      self.currentRequests.splice($.inArray(options.url, self.currentRequests), 1);\n    });\n    jqxhr.done(deferred.resolve);\n    jqxhr.fail(function () {\n      var args = Array.prototype.slice.call(arguments);\n      var code = \"OLD_SUPPORT\";\n      try {\n        var response = JSON.parse(jqxhr.responseText);\n        code = response.code;\n      }\n      catch (e) {}\n\n      if (self.intercept && (jqxhr.status === 401 || code === \"AUTHENTICATION_ERROR\") && self._hasEvent(\"sessionExpiration\")) {\n        self._addToBuffer(options, deferred);\n\n        if (!self.refreshing) {\n          self._setRefreshingFlag(true);\n          self._fireEvent(\"sessionExpiration\").\n          done(function () {\n            // Setup buffer interval that waits for all sent requests to return\n            var waited = 0;\n            self.interval = setInterval(function () {\n              waited += self.options.bufferInterval;\n\n              // All requests have returned 401 and have been buffered\n              if (self.currentRequests.length === 0 || waited >= self.options.bufferWaitLimit) {\n                clearInterval(self.interval);\n                self._fireBuffer();\n              }\n            }, self.options.bufferInterval);\n          }).\n          fail(function () {\n            self.logout();\n          });\n        }\n      } else {\n        deferred.rejectWith(jqxhr, args);\n      }\n    });\n\n    return deferred.promise(jqxhr);\n  });\n};","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /*\r\n                                                                                                                                                                                                           *   Name: BizAgi Services WorkPortal End Points\r\n                                                                                                                                                                                                           *   Author: Diego Parra (based on Edward Morales version)\r\n                                                                                                                                                                                                           *   Comments:\r\n                                                                                                                                                                                                           *   -   This script defines all the end-points used to retrieve ajax stuff\r\n                                                                                                                                                                                                           *   -   All urls must be relative to the base application\r\n                                                                                                                                                                                                           */\n\n// Create or define namespace\nbizagi.workportal = typeof bizagi.workportal !== \"undefined\" ? bizagi.workportal : {};\nbizagi.workportal.services = typeof bizagi.workportal.services !== \"undefined\" ? bizagi.workportal.services : {};\nbizagi.workportal.services.endPoints = [];\n\n// Creates a endpoint hash factory to resolve custom requirements\nbizagi.workportal.services.getEndPoints = function (params) {\n  // Default workportal end-points\n  if (params.context == \"workportal\") {var _endPoints;\n    var endPoints = (_endPoints = {\n      \"user-handler\": params.proxyPrefix + \"RestServices/UserHandler.ashx\",\n      \"process-handler\": params.proxyPrefix + \"RestServices/ProcessHandler.ashx\",\n      \"query-handler\": params.proxyPrefix + \"Rest/Handlers/Query\",\n      \"case-handler\": params.proxyPrefix + \"RestServices/CaseHandler.ashx\",\n      \"query-form\": params.proxyPrefix + \"App/ListaDetalle/QueryForm.aspx\",\n      \"query-form-edit\": params.proxyPrefix + \"App/ListaDetalle/SaveQuery.aspx\",\n      \"query-form-delete\": params.proxyPrefix + \"App/ListaDetalle/QueryForm.aspx\",\n      \"query-form-delete-cube\": params.proxyPrefix + \"Rest/Queries/Cubes/{idCube}\",\n      \"favorites-handler\": params.proxyPrefix + \"RestServices/FavoritesHandler.ashx\",\n      \"file-handler\": params.proxyPrefix + \"RestServices/EntityHandler.ashx\",\n      \"login-handler\": params.proxyPrefix + \"Rest/Users/UserAuthentication\",\n      \"login-handlerv10\": params.proxyPrefix + \"RestServices/UserHandler.ashx?action=authenticateUser&userName={0}&password={1}&domain={2}\",\n      \"logoff-handler\": params.proxyPrefix + \"RestServices/UserHandler.ashx?action=logOff\",\n      \"logoff-handlerv1\": params.proxyPrefix + \"Rest/Users/LogOff\",\n\n      // Rest Services\n      \"authorization-handler-getMenuAuthorization\": params.proxyPrefix + \"Rest/Authorization/MenuAuthorization\",\n      \"authorization-handler-isCaseCreationAuthorized\": params.proxyPrefix + \"Rest/Authorization/Processes/{0}/IsCaseCreationAuthorized\",\n      \"case-handler-getCaseSummary\": params.proxyPrefix + \"Rest/Cases/{idCase}/Summary\",\n\n      //ReleaseActivityResponse\n      \"case-handler-releaseActivity\": params.proxyPrefix + \"Rest/Cases/{idCase}/ReleaseActivity\",\n\n      //mobile beta services\n      \"case-handler-getCasesList\": params.proxyPrefix + \"Rest/Processes/SearchCases\",\n      \"case-handler-getActivityList\": params.proxyPrefix + \"Api/Cases/Activities\",\n\n      // Services to Offline capability\n      \"offline-getProcessTree\": params.proxyPrefix + \"Rest/Processes/OfflineProcessTree\",\n\n      //\"offline-getForms\": params.proxyPrefix + \"Rest/Handlers/Render\",\n      \"offline-tasks\": params.proxyPrefix + \"Api/Cases/GetOfflineTasks\",\n      \"offline-getForms\": params.proxyPrefix + \"Rest/RenderForm/offlineForms\",\n      \"offline-sendForm\": params.proxyPrefix + \"Rest/Cases/SaveAsynchWorkItemOffLine\",\n\n      // StartProcess\n      \"case-handler-getCaseTasks\": params.proxyPrefix + \"Rest/Cases/{idCase}/Tasks\",\n      \"case-handler-getCaseEvents\": params.proxyPrefix + \"Rest/Cases/{idCase}/Events\",\n      \"case-handler-getCaseSubprocesses\": params.proxyPrefix + \"Rest/Cases/{idCase}/Subprocesses\",\n      \"case-handler-getTaskAssignees\": params.proxyPrefix + \"Rest/Cases/{idCase}/Tasks/{idTask}/Assignees\",\n      \"case-handler-getCaseAssignees\": params.proxyPrefix + \"Rest/Cases/{idCase}/Assignees\",\n      \"case-handler-getWorkItems\": params.proxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getAsynchExecutionState\": params.proxyPrefix + \"Rest/Cases/{idCase}/AsynchExecutionState\",\n      \"case-handler-addNewCase\": params.proxyPrefix + \"Rest/Cases\",\n      \"case-handler-startProcess\": params.proxyPrefix + \"Rest/Processes/StartProcess/{idProcess}\",\n      \"handler-execute-action-start\": params.proxyPrefix + \"Api/Cases/{processId}/Start\",\n      \"case-handler-supportedLogTypes\": params.proxyPrefix + \"Rest/Cases/SupportedLogsTypes\",\n      \"case-handler-getActivityLog\": params.proxyPrefix + \"Rest/Cases/{idCase}/ActivityLog\",\n      \"case-handler-getActivityDetailLog\": params.proxyPrefix + \"Rest/Cases/{idCase}/{idWorkItemFrom}/ActivityDetailLog\",\n      \"case-handler-getEntityLog\": params.proxyPrefix + \"Rest/Cases/{idCase}/EntityLog\",\n      \"case-handler-getEntityDetailLog\": params.proxyPrefix + \"Rest/Cases/{idCase}/EntityDetailLog\",\n      \"case-handler-getUserLog\": params.proxyPrefix + \"Rest/Cases/{idCase}/UserLog\",\n      \"case-handler-getUserDetailLog\": params.proxyPrefix + \"Rest/Cases/{idCase}/{idUser}/UserDetailLog\",\n      \"case-handler-getAdminLog\": params.proxyPrefix + \"Rest/Cases/{idCase}/AdminLog\",\n      \"case-handler-getCaseFormsRenderVersion\": params.proxyPrefix + \"Rest/Cases/{idCase}/FormsRenderVersion\",\n      \"case-handler-validateHasStartForm\": params.proxyPrefix + \"Api/Processes/{processId}/StartContext\",\n\n      //Favorites Restful\n      \"favorites-handler-saveFavorite\": params.proxyPrefix + \"Rest/Favorites\",\n      \"favorites-handler-deleteFavorite\": params.proxyPrefix + \"Rest/Favorites/{guidFavorite}\",\n\n      //ICONS && IMAGES\n      \"process-getIcon\": params.proxyPrefix + \"Api/Processes/{processId}/Icon\",\n      \"collections-getIcon\": params.proxyPrefix + \"Api/CurrentUser/Collections/{collectionId}/Icon\",\n\n      //BAMAnalytics Restful\n      \"bamAnalytics-handler-getAnalisysQueries\": params.proxyPrefix + \"Rest/BAMAnalytics/AnalisysQueries\",\n      \"bamAnalytics-handler-updateQuery\": params.proxyPrefix + \"Rest/BAMAnalytics/Reports/Ids/{idQuery}\",\n\n      //Inbox Restful\n      \"inbox-handler-getInboxSummary\": params.proxyPrefix + \"Rest/Inbox/Summary\",\n      \"inbox-handler-getFullInboxSummary\": params.proxyPrefix + \"Rest/Inbox/FullSummary\",\n\n      //Messages Restful\n      \"MessageHandler-NewComment\": params.proxyPrefix + \"Rest/Cases/Comments\",\n      \"MessageHandler-GetComments\": params.proxyPrefix + \"Rest/Cases/Comments\",\n      \"MessageHandler-SetCategoryToComment\": params.proxyPrefix + \"Rest/Cases/Comments/{idComment}\",\n      \"MessageHandler-RemoveComment\": params.proxyPrefix + \"Rest/Cases/Comments/{idComment}\",\n      \"MessageHandler-ReplyComment\": params.proxyPrefix + \"Rest/Cases/Comments/{idComment}/Replies\",\n      \"MessageHandler-RemoveReply\": params.proxyPrefix + \"Rest/Cases/Comments/{idComment}/Replies/{idReply}\",\n      \"MessageHandler-GetCategoryColors\": params.proxyPrefix + \"Rest/Cases/Comments/CategoryColors\",\n      \"MessageHandler-RenameCategoryColor\": params.proxyPrefix + \"Rest/Cases/Comments/CategoryColors/{idColorCategory}\",\n      \"MessageHandler-CountNewComments\": params.proxyPrefix + \"Rest/Cases/Comments/{idComment}/NewComments/Count\",\n\n      //Processes Restful\n      \"process-handler-getAllProcesses\": params.proxyPrefix + \"Rest/Processes\",\n      \"process-handler-getFavourites\": params.proxyPrefix + \"Rest/Home/MyFavorites/Count\",\n      \"process-handler-getFavouriteCases\": params.proxyPrefix + \"Rest/Home/MyFavorites\",\n      \"process-handler-getCustomizedColumnsData\": params.proxyPrefix + \"Rest/Processes/CustomizedColumnsData\",\n      \"process-handler-getCategory\": params.proxyPrefix + \"Rest/Processes/Categories\",\n      \"process-handler-getRecentProcesses\": params.proxyPrefix + \"Rest/Processes/RecentProcesses\",\n      \"process-handler-getCustomizedColumnsDataInfo\": params.proxyPrefix + \"Rest/Processes/CustomizedColumnsDataInfo\",\n      \"process-handler-getOrganizations\": params.proxyPrefix + \"Rest/Profile/Organizations\",\n      \"process-handler-getOrganizationsByUser\": params.proxyPrefix + \"Rest/Profile/OrganizationsByUser\",\n\n      //SmartInbox\n      \"smartinbox-entity-values\": params.proxyPrefix + \"api/SmartInbox/Detail/EntityValues/{entityGuid}\",\n      \"smartinbox-getAllInbox\": params.proxyPrefix + \"api/SmartInbox/All\",\n      \"smartinbox-user-tasks\": params.proxyPrefix + \"api/SmartInbox/Detail/UserTasks/{smartInboxId}\",\n      \"smartinbox-user-tasks-process\": params.proxyPrefix + \"api/SmartInbox/Detail/UserTasks/ByProcess/{workflowId}\",\n\n      //workportal\n      \"process-handler-getMyStuff\": params.proxyPrefix + \"Api/CurrentUser/Collections\",\n      \"process-handler-getIdCasesOfProcessEntities\": params.proxyPrefix + \"Api/Entities/Cases\",\n      \"templates-handler-getCollectionData\": params.proxyPrefix + \"Api/Collection/{idFact}/Data\",\n      //\"data-navigation-handler\": params.proxyPrefix + \"Api/Entities/{guidLeftEntity}/Data/{surrogateKeyLeftEntity}\",\n      \"data-navigation-handler-collection\": params.proxyPrefix + \"Api/CurrentUser/Collections/{reference}/Data/{surrogateKey}\",\n      \"data-navigation-handler-entity\": params.proxyPrefix + \"Api/CurrentUser/Entities/{reference}/Data/{surrogateKey}/{xpath}\",\n      \"data-navigation-handler-entity-filters\": params.proxyPrefix + \"Api/CurrentUser/Entities/{reference}/Filters/{surrogateKey}/{xpath}\",\n\n      //\"action-handler-getProcessAddAction\": params.proxyPrefix + \"Api/Entities/{guidLeftEntity}/Collection/{guidFact}/Actions\",\n      \"action-handler-getProcessAddAction\": params.proxyPrefix + \"Api/CurrentUser/Collections/{reference}/{surrogateKey}/Actions\",\n\n      //My Searches\n      'my-search-getSearchLists': params.proxyPrefix + \"Api/CurrentUser/Searches\",\n      'my-search-getFilters': params.proxyPrefix + \"Api/CurrentUser/Searches/{guidSearch}/Filters\",\n      'my-search-getFiltersData': params.proxyPrefix + \"Api/CurrentUser/Searches/{guidSearch}/FilterData\",\n      'my-search-getData': params.proxyPrefix + \"Api/CurrentUser/Searches/{guidSearch}/Data\",\n\n      \"templates-handler-getVirtualCollectionData\": params.proxyPrefix + \"Api/Collection/{guidVirtualCollection}/VirtualData\",\n      \"templates-handler-getMultipleActions\": params.proxyPrefix + \"Rest/Entities/multipleInstancesActions\",\n\n      \"process-handler-getMapping\": params.proxyPrefix + \"Rest/Entities/Mapping\",\n      \"process-handler-getForm\": params.proxyPrefix + \"Rest/Handlers/Render\",\n      \"process-handler-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      //\"process-handler-rule\": params.proxyPrefix + \"Rest/Action/Rule\",\n      \"process-handler-rule\": params.proxyPrefix + \"Api/Rules/{ruleId}/Execute\",\n      //\"process-action-execute\" : params.proxyPrefix + \"Api/Action/Execute\",\n      \"process-action-execute\": params.proxyPrefix + \"Api/Rules/{ruleId}/ExecuteMultiple\",\n      \"process-handler-getActivitiesData\": params.proxyPrefix + \"Api/Processes/CasesData/MyActivities\",\n      \"process-handler-getPendingsData\": params.proxyPrefix + \"Api/Processes/CasesData/MyPendings\",\n\n      //\"entities-handler-getActions\" : params.proxyPrefix + \"Rest/Entities/Actions\",\n      \"entities-handler-getActions\": params.proxyPrefix + \"Api/Entities/{guidEntity}/{surrogateKey}/actions\",\n      \"entities-handler-getUsersAndEvents\": params.proxyPrefix + \"Rest/Processes/CasesData/UsersAndEvents\",\n      \"entities-handler-getUsers\": params.proxyPrefix + \"Api/Cases/{caseId}/Users\",\n      \"entities-handler-getEvents\": params.proxyPrefix + \"Api/Cases/{caseId}/CurrentEvents\",\n      \"entities-handler-getUsersImages\": params.proxyPrefix + \"Rest/Users/UserPictures\",\n      \"entities-handler-getShotCuts\": params.proxyPrefix + \"Api/CurrentUser/Shortcuts\",\n\n      //Queries Restful\n      \"query-handler-getqueries\": params.proxyPrefix + \"Rest/Queries\",\n      \"query-handler-getQueryForm\": params.proxyPrefix + \"Rest/Handlers/Render\",\n\n      //Users Restful\n      \"user-handler-getCurrentUser\": params.proxyPrefix + \"Rest/Users/CurrentUser\",\n\n      // Old render integration, readonly\n      \"old-render\": params.proxyPrefix + \"App/ListaDetalle/Detalle.aspx\",\n\n      //Service locator for reports\n      \"Reports\": params.proxyPrefix + \"RestServices/BAMAnalyticsHandler.ashx\",\n      \"reports-handler-deleteQueries\": params.proxyPrefix + \"Rest/BAMAnalytics/Reports/{QueryId}\",\n\n      //Service locator for bizagi folders\n      \"folders-handler-getUserQueries\": params.proxyPrefix + \"Rest/SmartFolders\",\n      \"folders-associate-deleteSmartFolder\": params.proxyPrefix + \"Rest/SmartFolders/{idSmartFolder}\",\n      \"folders-handler\": params.proxyPrefix + \"RestServices/SmartFoldersHandler.ashx\",\n      \"folders-associate\": params.proxyPrefix + \"App/Ajax/AJAXGateway.aspx\",\n      \"smartfolders-integration\": params.proxyPrefix + \"App/WorkPortal/ConfigureFilteredFolder.aspx\",\n\n      //Service locator for menu\n      \"AlarmAdmin\": params.proxyPrefix + \"App/Admin/AlarmsAdmin.aspx\",\n      \"AnalyticsProcess\": params.proxyPrefix + \"App/Cockpit/AnalyticsProcess.aspx\",\n      \"AnalyticsSensor\": params.proxyPrefix + \"App/Cockpit/AnalyticsSensor.aspx\",\n      \"AnalyticsTask\": params.proxyPrefix + \"App/Cockpit/AnalyticsTask.aspx\",\n      \"AsynchronousWorkitemRetries\": params.proxyPrefix + \"App/Admin/AsynchDisabledWorkitems.aspx\",\n      \"AuthenticationLogQuery\": params.proxyPrefix + \"App/Admin/AuthLogQuery.aspx\",\n      \"BAMProcess\": params.proxyPrefix + \"App/Cockpit/BAMProcess.aspx\",\n      \"BAMTask\": params.proxyPrefix + \"App/Cockpit/BAMTask.aspx\",\n      \"BusinessPolicies\": params.proxyPrefix + \"App/Admin/BusinessPolicies/BusinessPoliciesSelector.aspx\",\n      \"CaseAdmin\": params.proxyPrefix + \"App/Admin/CaseSearch.aspx\",\n      \"adminReassignCases\": \"CaseAdmin\", // Open workportal module called 'adminCases'\n      \"asyncECMUpload\": \"asyncECMUpload\", // Open workportal module called 'asyncECMUpload'\n      \"CasesMonitor\": params.proxyPrefix + \"App/Admin/CasesMonitor.aspx\",\n      \"Closed\": params.proxyPrefix + \"App/ListaDetalle/listaitems.aspx?h_Location=Cerrados&I_ProcessState=Completed\",\n      \"CurrentUser\": params.proxyPrefix + \"App/Admin/CurrentUser.aspx\",\n      \"EncryptionAdmin\": params.proxyPrefix + \"App/Admin/Encrypt.aspx\",\n      \"MobileUpdatesAdmin\": params.proxyPrefix + \"App/MobileUpdates/default.aspx\",\n      \"EntityAdmin\": params.proxyPrefix + \"App/Admin/Entity.aspx\",\n      \"LocationResources\": params.proxyPrefix + \"App/Admin/AdminLocResources.aspx\",\n      \"NewCase\": params.proxyPrefix + \"App/Radicar/application.aspx\",\n      \"Pending\": params.proxyPrefix + \"App/ListaDetalle/listaitems.aspx?h_Location=Pendientes&I_processState=Running\",\n      \"Profiles\": params.proxyPrefix + \"App/Admin/ProfilesAdminSearch.aspx\",\n      \"Search\": params.proxyPrefix + \"App/ListaDetalle/Search.aspx\",\n      \"UserAdmin\": params.proxyPrefix + \"App/Admin/ListUsers.aspx\",\n      \"UserDefaultAssignation\": params.proxyPrefix + \"App/Admin/DefaultAssignationUser.aspx?h_AdminDefaultAssign=1\",\n      \"UserPendingRequests\": params.proxyPrefix + \"App/Admin/UserPendingRequests.aspx\",\n      \"ListPreferences\": bizagi.UserPreferencesUrl !== \"\" ? params.proxyPrefix + bizagi.UserPreferencesUrl : params.proxyPrefix + \"App/Admin/CurrentUser.aspx\",\n      \"GRDimensionAdmin\": params.proxyPrefix + \"App/Cockpit/DimensionEdit.aspx\",\n      \"Licenses\": params.proxyPrefix + \"App/Admin/Licenses.aspx\",\n      \"AnalysisQueries\": params.proxyPrefix + \"App/Inicio/WPAnalysisQuery.aspx\",\n      \"DocumentTemplates\": params.proxyPrefix + \"App/Admin/AdminDocumentTemplates.aspx\",\n      \"ProcessAdmin\": params.proxyPrefix + \"App/Admin/AdminProcess.aspx\",\n      \"ResourceBAM\": params.proxyPrefix + \"App/Cockpit/BAMResourceMonitor.aspx\",\n      \"WorkPortalVersion\": params.proxyPrefix + \"Rest/Util/Version\",\n\n      // entities administration\n      \"entities-administration\": \"RestServices/EntityHandler.ashx\",\n\n      //Theme Rest Service Handler\n      \"theme-handler-getLogoImagePath\": params.proxyPrefix + \"Rest/Theme/LogoImage\",\n\n      // Logout Service, already implemented on java environment\n      \"logout\": params.proxyPrefix + \"Rest/Authentication/logout\",\n      \"logoutDotNet\": params.proxyPrefix + \"App/Inicio/LogOff.aspx\",\n      \"authenticationConfig\": params.proxyPrefix + \"Api/Authentication/BizagiConfig\",\n      \"logout-oauth2\": params.proxyPrefix + \"Api/Authentication/OAuth2/IdentityProvider/Server/Logout\",\n      \"FederateLogoffUrl\": params.proxyPrefix + \"Api/Authentication/FederateLogoffUrl\",\n      \"oauth2AuthenticationConfig\": params.proxyPrefix + \"Api/Authentication/OAuth2/OAuth2AuthenticationConfig\",\n\n      //Massive Activity Asigments\n      \"massive-activity-assignments-getOrganizationInfo\": params.proxyPrefix + \"Rest/Users/OrganizationInfo\",\n      \"massive-activity-assignments-getCasesByOrganization\": params.proxyPrefix + \"Rest/Queries/GetCasesByOrganization\",\n      \"massive-activity-assignments-reassignCases\": params.proxyPrefix + \"Rest/Cases/ReassignCases\",\n      \"massive-activity-assignments-searchUsers\": params.proxyPrefix + \"Rest/Users/\",\n\n      //Asynchronous ECM Upload\n      \"async-ecm-upload-baseService\": params.proxyPrefix + \"Rest/Handlers/Metadata\",\n\n      // Workportal\n      \"domains\": params.proxyPrefix + \"Rest/Authentication/Domains\",\n\n      // Theme Builder\n      //\"ThemeBuilder\": params.proxyPrefix + \"ThemeBuilder/index.html?language=\" + bizagi.localization.language,\n      \"getCurrentTheme\": params.proxyPrefix + \"Api/Theme/Current\",\n\n      //Frankenstein\n      \"admin-getAuthenticationLog\": params.proxyPrefix + \"Rest/Users/AuthLog\",\n      \"admin-getAuthenticationDomains\": params.proxyPrefix + \"Rest/Users/Domains\",\n      \"admin-getAuthenticationEventsTypes\": params.proxyPrefix + \"Rest/Users/EventTypes\",\n      \"admin-getAuthenticationEventSubTypes\": params.proxyPrefix + \"Rest/Users/EventSubTypes\",\n      \"admin-EncryptString\": params.proxyPrefix + \"Rest/Util/EncryptString\",\n      \"admin-UserPendingRequests\": params.proxyPrefix + \"Rest/Users/UserPendingRequests\",\n      \"admin-UserAuthenticationInfo\": params.proxyPrefix + \"Rest/Users/UserAuthenticationInfo\",\n      \"admin-updateUserAuthenticationInfo\": params.proxyPrefix + \"Rest/Users/UpdateUserAuthenticationInfo\",\n      \"admin-generateRandomPassword\": params.proxyPrefix + \"Rest/Util/GenerateRandomPassword\",\n      \"admin-GenerateDataToSendByEmail\": params.proxyPrefix + \"Rest/Users/GenerateDataToSendByEmail\",\n      \"admin-sendEmail\": params.proxyPrefix + \"Rest/Util/SendEmail/\",\n      \"admin-getApplicationList\": params.proxyPrefix + \"Rest/Application\",\n      \"admin-getApplicationProcesses\": params.proxyPrefix + \"Rest/Application/{idApp}/Process\",\n      \"admin-getProcessVersion\": params.proxyPrefix + \"Rest/Processes/Version\",\n      \"admin-getProcessTasks\": params.proxyPrefix + \"Rest/Processes/Version/{version}/Tasks\",\n\n      //servicios alarmas\n      \"admin-getTaskAlarms\": params.proxyPrefix + \"Rest/Alarm/TaskAlarms\",\n      \"admin-getLapseMode\": params.proxyPrefix + \"Rest/Alarm/LapseMode\",\n      \"admin-getRecurrMode\": params.proxyPrefix + \"Rest/Alarm/RecurrMode\",\n      \"admin-getScheduleType\": params.proxyPrefix + \"Rest/Alarm/ScheduleType\",\n      \"admin-getBossList\": params.proxyPrefix + \"Rest/Alarm/Boss\",\n      \"admin-addAlarm\": params.proxyPrefix + \"Rest/Alarm\",\n      \"admin-editAlarm\": params.proxyPrefix + \"Rest/Alarm/{idAlarm}\",\n      \"admin-deleteAlarm\": params.proxyPrefix + \"Rest/Alarm\",\n      \"admin-alarmRecipients\": params.proxyPrefix + \"Rest/Alarm/{idAlarm}/Recipient\",\n      \"admin-deleteAlarmRecipients\": params.proxyPrefix + \"Rest/Alarm/Recipient\",\n      \"admin-recipientToAlarm\": params.proxyPrefix + \"Rest/Alarm/{idAlarm}/Recipient/{idRecipient}\",\n      \"admin-enableAlarm\": params.proxyPrefix + \"Rest/Alarm/Task/{idTask}/ToggleAlarm\",\n      \"admin-getCategoriesList\": params.proxyPrefix + \"Rest/Application/Category\",\n      \"admin-getCasesList\": params.proxyPrefix + \"Rest/Queries/SearchCases\",\n      \"admin-abortItems\": params.proxyPrefix + \"Rest/Cases/Abort\",\n      \"admin-reassignItems\": params.proxyPrefix + \"Rest/Cases/Reassign\",\n      \"admin-getDefaultAssignationUserToAllProcess\": params.proxyPrefix + \"Rest/Users/{serviceAction}/\",\n      \"admin-getDefaultAssignationUserToProcess\": params.proxyPrefix + \"Rest/Users/Process/{process}/AssignationUser\",\n      \"admin-setDefaultAssignationUserToProcess\": params.proxyPrefix + \"Rest/Users/Process/{process}/AssignationUser\",\n      \"admin-getProfilesTypes\": params.proxyPrefix + \"Rest/Profile/Types\",\n      \"admin-searchProfiles\": params.proxyPrefix + \"Rest/Profile\",\n      \"admin-getUsersByProfile\": params.proxyPrefix + \"Rest/Users/Profile/{type}/{id}\",\n      \"admin-removeUserFromProfile\": params.proxyPrefix + \"Rest/Profile/{type}/{id}/User/{idUser}/\",\n      \"admin-addUserToProfile\": params.proxyPrefix + \"Rest/Profile/{type}/{id}/User/{idUser}/\",\n      \"admin-async-activities-get-activities\": params.proxyPrefix + \"Rest/Cases/Asynchronous/Activities\",\n      \"admin-async-activities-get-retry-now\": params.proxyPrefix + \"Rest/Cases/{idCase}/Workitem/{idworkItem}/RetryNow\",\n      \"admin-async-activities-get-activities-by-task\": params.proxyPrefix + \"Rest/Cases/Asynchronous/Activities/Task\",\n      \"admin-async-activities-enable-execution\": params.proxyPrefix + \"Rest/Cases/Asynchronous/Enable\",\n      \"admin-async-activities-enable-multiple\": params.proxyPrefix + \"Rest/Cases/Asynchronous/EnableMultiple\",\n      \"admin-async-activities-async-execution\": params.proxyPrefix + \"Rest/Cases/{idCase}/Workitem/{idWorkitem}/AsynchExecution\",\n      \"admin-async-activities-async-execution-log\": params.proxyPrefix + \"Rest/Cases/{idCase}/Workitem/{idworkItem}/AsynchExecutionLog\",\n      \"admin-Licenses\": params.proxyPrefix + \"Rest/Licenses\",\n      \"admin-GetDimensions\": params.proxyPrefix + \"Rest/Dimensions\",\n      \"admin-EditDimension\": params.proxyPrefix + \"Rest/Dimensions/{id}\",\n      \"admin-CreateAdministrableDimension\": params.proxyPrefix + \"Rest/Dimensions/Administrable\",\n      \"admin-DeleteDimension\": params.proxyPrefix + \"Rest/Dimensions/{id}?isAdministrable={administrable}\",\n      \"admin-EntityPathChildNodesAction\": params.proxyPrefix + \"Rest/Dimensions/EntityChildNodes\",\n      \"admin-GetActiveWFClasses\": params.proxyPrefix + \"Rest/Dimensions/ActiveProcess\",\n      \"admin-document-templates-storeDocumentTemplates\": params.proxyPrefix + \"Rest/DocumentTemplates/StoreDocumentTemplates\",\n      \"admin-document-templates-restoreDocumentTemplates\": params.proxyPrefix + \"Rest/DocumentTemplates/RestoreDocumentTemplate\",\n      \"admin-document-templates-uploadDocumentTemplate\": params.proxyPrefix + \"Rest/DocumentTemplates/UploadDocumentTemplate\",\n      \"admin-processes-workflowClasses\": params.proxyPrefix + \"Rest/Processes/WorkflowClasses\",\n      \"admin-processes-tasksByWorkflow\": params.proxyPrefix + \"Rest/Processes/TasksByWorkflow\",\n      \"admin-processes-modifyProcessDuration\": params.proxyPrefix + \"Rest/Processes/{idWorkflow}/Duration/\",\n      \"admin-processes-modifyTaskDuration\": params.proxyPrefix + \"Rest/Processes/Task/{idTask}/Duration/\",\n      \"admin-language-resource\": params.proxyPrefix + \"Rest/Multilanguage/Resource\",\n      \"admin-language-languages\": params.proxyPrefix + \"Rest/Multilanguage/Languages\",\n      \"bam-resourcemonitor-myteam\": params.proxyPrefix + \"Rest/Reports/BAM/Resources/MyTeam\",\n      \"reports-analysisquery\": params.proxyPrefix + \"Rest/Reports/AnalysisQueries\",\n      \"reports-analysisquery-update\": params.proxyPrefix + \"Rest/Reports/AnalysisQueries\",\n      \"reports-analysisquery-delete\": params.proxyPrefix + \"Rest/Reports/AnalysisQueries\",\n      \"processviewer-processdefinition\": params.proxyPrefix + \"Rest/Reports/Components/ProcessDefinition\",\n      \"processviewer-processgraphicinfo\": params.proxyPrefix + \"Rest/Reports/Components/ProcessGraphicInfo\",\n\n      // Mobile Updates\n      \"mobile-getLastUpdate\": params.proxyPrefix + \"Rest/Util/mobileUpdates\",\n\n      //discussionCase\n      \"discussion-case\": params.proxyPrefix + \"Api/CaseResource/Discussion?globalParent={globalParent}\",\n      \"discussion-case-v1\": params.proxyPrefix + \"Api/CaseResource/{globalParent}/Discussion\",\n      \"get-users\": params.proxyPrefix + \"Rest/Users/UserPictures\",\n      \"new-discussion\": params.proxyPrefix + \"Api/CaseResource/Discussion\",\n      \"count-comments\": params.proxyPrefix + \"Api/CaseResource/{idParent}/Comment/Count\",\n      \"comment-case\": params.proxyPrefix + \"Api/CaseResource/{idParent}/Comment\",\n      \"new-comment\": params.proxyPrefix + \"Api/CaseResource/Comment\",\n      \"new-comment-attach\": params.proxyPrefix + \"Api/CaseResource/Attachment\",\n      \"get-list-files\": params.proxyPrefix + \"Api/CaseResource/File?globalParent={globalParent}\",\n      \"get-list-files-v1\": params.proxyPrefix + \"Api/CaseResource/{globalParent}/File\",\n      \"project-resource-action\": params.proxyPrefix + \"Api/CaseResource/{typeResource}\",\n      \"thumbnail-file\": params.proxyPrefix + \"Api/CaseResource/File/Thumbnails?globalParent={globalParent}\",\n      \"get-attachment\": params.proxyPrefix + \"Api/CaseResource/Attachment/{idAttachment}\",\n      \"get-mobile-attachment\": params.proxyPrefix + \"Api/CaseResource/Mobile/Attachment/{idAttachment}\",\n\n      //Files and Attachments\n      \"project-files-upload\": params.proxyPrefix + \"Api/CaseResource/File\",\n      \"count-files\": params.proxyPrefix + \"Api/CaseResource/File/Count?globalParent={globalParent}\",\n      \"count-files-v1\": params.proxyPrefix + \"Api/CaseResource/{globalParent}/File/Count\",\n      \"remove-comment\": params.proxyPrefix + \"Api/CaseResource/Comment\",\n\n      //Mobile CaseSummary\n      \"time-schemas-effectiveduration\": params.proxyPrefix + \"Api/WorkingTimeSchema/EffectiveDuration?idUser={idUser}&fromDate={fromDate}&toDate={toDate}\" }, _defineProperty(_endPoints, \"case-handler-getCaseAssignees\",\n    params.proxyPrefix + \"Rest/Cases/{idCase}/Assignees\"), _defineProperty(_endPoints,\n    \"project-users-get\", params.proxyPrefix + \"Rest/Users/UserPictures\"), _defineProperty(_endPoints,\n    \"case-summary-task-options\", params.proxyPrefix + \"Rest/Cases/WorkItems/{idWorkitem}/TaskOptions?idCase={idCase}\"), _defineProperty(_endPoints,\n\n    \"project-plan-get\", params.proxyPrefix + \"Api/Plans/{idPlan}\"), _defineProperty(_endPoints,\n    \"project-plan-activities\", params.proxyPrefix + \"Api/Plans/{idPlan}/Activities\"), _defineProperty(_endPoints,\n    \"project-plan-workitems\", params.proxyPrefix + \"Api/Plans/{idPlan}/WorkItems\"), _defineProperty(_endPoints,\n    \"project-plan-transitions-get\", params.proxyPrefix + \"Api/Plans/{idPlan}/Activities/Transitions\"), _defineProperty(_endPoints,\n    \"project-plan-activity-edit\", params.proxyPrefix + \"Api/Plans/{idPlan}/Activities/{id}\"), _defineProperty(_endPoints,\n    \"project-plan-get-by-parent\", params.proxyPrefix + \"Api/Plans?parentWorkItem={parentWorkItem}\"), _defineProperty(_endPoints,\n    \"project-plan-parent\", params.proxyPrefix + \"Api/Plans/{idPlan}/ParentCase\"), _defineProperty(_endPoints,\n    \"project-plan-update\", params.proxyPrefix + \"Api/Plans/{idPlan}\"), _defineProperty(_endPoints,\n    \"project-plan-execute\", params.proxyPrefix + \"Api/Plans/Execute\"), _defineProperty(_endPoints,\n    \"project-plan-close\", params.proxyPrefix + \"Api/Plans/Close\"), _defineProperty(_endPoints,\n    \"project-plan-delete\", params.proxyPrefix + \"Api/Plans/{idPlan}\"), _defineProperty(_endPoints,\n    \"project-plan-first-parent-plan\", params.proxyPrefix + \"Api/Plans/{idPlan}/FirstParentPlan\"), _defineProperty(_endPoints,\n\n\n    \"PreferencesWorkportalCurrentUser\", params.proxyPrefix + \"Api/Users/Data/WindowPreferences\"), _defineProperty(_endPoints,\n\n\n    \"diagnostics-sync-system-error\", params.proxyPrefix + \"api/ErrorLogs/Import\"), _endPoints);\n\n\n    var newUserServices = bizagi.util.getFeatureObject(\"userService.v1.enabled\");\n    if (newUserServices) {\n\n      endPoints[\"user-handler-getCurrentUser\"] = params.proxyPrefix + \"Rest/Users/CurrentUserGuid\";\n      endPoints[\"get-users\"] = params.proxyPrefix + \"Rest/Users/UserPicturesGuid\";\n      endPoints[\"entities-handler-getUsersImages\"] = params.proxyPrefix + \"Rest/Users/UserPicturesGuid\";\n      endPoints[\"project-users-get\"] = params.proxyPrefix + \"Rest/Users/UserPicturesGuid\";\n\n      endPoints[\"entities-handler-getUsers\"] = params.proxyPrefix + \"Api/Cases/{caseId}/UsersGuid\";\n      //endPoints[\"case-handler-getWorkItems\"] = params.proxyPrefix + \"Rest/Cases/{idCase}/WorkItemsGuid\";\n      endPoints[\"case-handler-getCaseSummary\"] = params.proxyPrefix + \"Rest/Cases/{idCase}/SummaryGuid\";\n      endPoints[\"case-handler-getCaseAssignees\"] = params.proxyPrefix + \"Rest/Cases/{idCase}/AssigneesGuid\";\n\n      endPoints[\"discussion-case\"] = params.proxyPrefix + \"Api/CaseResource/DiscussionGuid?globalParent={globalParent}\";\n      //endPoints[\"discussion-case-v1\"] = params.proxyPrefix + \"Api/CaseResource/{globalParent}/DiscussionGuid\";\n      endPoints[\"new-discussion\"] = params.proxyPrefix + \"Api/CaseResource/DiscussionGuid\";\n\n      endPoints[\"comment-case\"] = params.proxyPrefix + \"Api/CaseResource/{idParent}/CommentGuid\";\n      endPoints[\"new-comment\"] = params.proxyPrefix + \"Api/CaseResource/CommentGuid\";\n\n      endPoints[\"project-files-upload\"] = params.proxyPrefix + \"Api/CaseResource/FileGuid\";\n      endPoints[\"get-list-files\"] = params.proxyPrefix + \"Api/CaseResource/FileGuid?globalParent={globalParent}\";\n\n      //Mobile case summary\n      endPoints[\"time-schemas-effectiveduration\"] = params.proxyPrefix + \"Api/WorkingTimeSchema/EffectiveDurationGuid?idUser={idUser}&fromDate={fromDate}&toDate={toDate}\";\n      //Mobile plans\n      endPoints[\"project-plan-get\"] = params.proxyPrefix + \"Api/Plans/Guid/{idPlan}\";\n      endPoints[\"project-plan-update\"] = params.proxyPrefix + \"Api/Plans/Guid/{idPlan}\";\n      endPoints[\"project-plan-activities\"] = params.proxyPrefix + \"Api/Plans/{idPlan}/ActivitiesGuid\";\n      endPoints[\"project-plan-workitems\"] = params.proxyPrefix + \"Api/Plans/{idPlan}/WorkItemsGuid\";\n      endPoints[\"project-plan-first-parent-plan\"] = params.proxyPrefix + \"Api/Plans/{idPlan}/FirstParentPlanGuid\";\n      endPoints[\"project-plan-activity-edit\"] = params.proxyPrefix + \"Api/Plans/{idPlan}/ActivitiesGuid/{id}\";\n\n    }\n\n    return endPoints;\n  }\n  return {};\n};","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra (based on Edward Morales version)\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to workportal REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.workportal.services.service\", {\n  // Statics\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  ENTITIES_QUERY_PAGE_SIZE: 10 },\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(params) {\n    var self = this;\n    params = _typeof(params) == \"object\" ? params : {};\n    params.context = !bizagi.util.isEmpty(params.context) ? params.context : \"workportal\";\n\n    params.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    params.proxyPrefix = this.normalizeUrl(params.proxyPrefix);\n    bizagi.RPproxyPrefix = params.proxyPrefix;\n\n\n    params.sharepointProxyPrefix = !bizagi.util.isEmpty(params.sharepointProxyPrefix) ? params.sharepointProxyPrefix : \"\";\n    params.sharepointProxyPrefix = this.normalizeUrl(params.sharepointProxyPrefix);\n\n    this.serviceLocator = new bizagi.workportal.services.context(params);\n\n    // Define default value of number of records to show\n    this.pageSize = 10;\n\n    this.deviceType = params.deviceType || (bizagi.util.isSmartphoneDevice() ? bizagi.deviceEnum.smartphone : bizagi.util.isTabletDevice() ? bizagi.deviceEnum.tablet : bizagi.deviceEnum.desktop);\n    this.deviceCode = bizagi.util.getDeviceCode();\n\n    // Get override for pageSize, use BIZAGI_INBOX_ROWS_PER_PAGE constant within config file\n    if (typeof BIZAGI_INBOX_ROWS_PER_PAGE !== \"undefined\") {\n      this.pageSize = $.isNumeric(BIZAGI_INBOX_ROWS_PER_PAGE) ? BIZAGI_INBOX_ROWS_PER_PAGE : this.pageSize;\n    }\n    this.activeForm = undefined;\n\n    this.configureGlobalHandlers();\n  },\n\n  /**\r\n      * This method will return the url defined as endPoint using the parameter 'endPoint' name\r\n      */\n  getUrl: function getUrl(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(params.endPoint);\n    return url;\n  },\n  /**\r\n      * This method will return the url normalized\r\n      */\n  normalizeUrl: function normalizeUrl(url) {\n    if (url !== \"\") {\n      if (url[url.length - 1] != \"/\") {\n        url = url.concat(\"/\");\n      }\n\n      if (url.indexOf(\"http://\") == -1 && url.indexOf(\"https://\") == -1) {\n        url = \"http://\" + url;\n      }\n    }\n    return url;\n  },\n\n  /**\r\n      * This service get all overrides keys within configuration project\r\n      *\r\n      * @return {json}\r\n      */\n  getOverrides: function getOverrides() {\n    var self = this;\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"overrides\") }).\n    pipe(function (overrides) {\n      overrides = overrides || {};\n\n      $.each(overrides, function (key, value) {\n        var valueUppercase = value.toUpperCase();\n        if (valueUppercase == \"TRUE\" || valueUppercase == \"FALSE\") {\n          overrides[key] = bizagi.util.parseBoolean(value);\n        }\n      });\n\n      return overrides;\n    });\n  },\n\n  /**\r\n      * This service get json of theme definition\r\n      *@return {json} theme definition\r\n      */\n  getCurrentTheme: function getCurrentTheme() {\n    var self = this;\n    var url = self.serviceLocator.getUrl('getCurrentTheme');\n\n    return $.read(url);\n  },\n\n  /**\r\n      * This method will return the response of the user information login is correct\r\n      * this method is use for native smartphone\r\n      **/\n  authenticatedUser: function authenticatedUser(params) {\n    var self = this;\n    var urlSend = self.serviceLocator.getUrl(\"login-handler\");\n\n    return $.read({\n      url: urlSend,\n      data: {\n        \"userName\": BIZAGI_USER,\n        \"password\": BIZAGI_PASSWORD,\n        \"domain\": BIZAGI_DOMAIN } }).\n\n    pipe(\n    function (response) {\n      return response;\n    },\n    function (data) {\n      urlSend = self.serviceLocator.getUrl('login-handlerv10');\n      urlSend = urlSend.replace('{0}', BIZAGI_USER || '');\n      urlSend = urlSend.replace('{1}', BIZAGI_PASSWORD || '');\n      urlSend = urlSend.replace('{2}', BIZAGI_DOMAIN || '');\n      return $.ajax({\n        url: urlSend,\n        type: 'GET',\n        dataType: 'json' });\n\n    });\n\n  },\n\n  /**\r\n      *\r\n      * this method is use for native smartphone\r\n      **/\n  logoutUser: function logoutUser(params) {\n    var self = this;\n    var urlSend = self.serviceLocator.getUrl('logoff-handlerv1');\n    return $.read({\n      url: urlSend });\n\n  },\n  /*\r\n      *   Logoff the current user\r\n      */\n  logOffUser: function logOffUser(params) {\n    var self = this;\n    var urlSend = self.serviceLocator.getUrl(\"logoff-handler\");\n    return $.read({\n      url: urlSend });\n\n  },\n  /*\r\n      *   Gets the current working user\r\n      */\n  getCurrentUser: function getCurrentUser(params) {\n    var self = this;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl(\"user-handler-getCurrentUser\"));\n  },\n  /*\r\n      *   Gets the inbox summary for the current logged user\r\n      *   Returns a promise of the data being retrieved\r\n      */\n  getInboxSummary: function getInboxSummary(params) {\n    var self = this;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl(\"inbox-handler-getInboxSummary\")).\n    pipe(function (response) {\n      // Extract inboxSummary property\n      return response[\"inboxSummary\"];\n    });\n  },\n  /*\r\n      *   Return all the available processes in bizagi\r\n      */\n  getAllProcesses: function getAllProcesses(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    var url = self.serviceLocator.getUrl('process-handler-getAllProcesses');\n\n    if (params.taskState != undefined) {\n      data['taskState'] = params.taskState;\n    }\n\n    if (params.onlyFavorites != undefined && params.onlyFavorites != '') {\n      data['onlyFavorites'] = params.onlyFavorites;\n    }\n\n    if (params.myActivities != undefined && params.myActivities != \"\") {\n      data[\"myActivities\"] = params.myActivities;\n    }\n\n    if (params.myPendings != undefined && params.myPendings != \"\") {\n      data[\"myPendings\"] = params.myPendings;\n    }\n\n    if (params.smartfoldersParameters) {\n      url = url + '?' + params.smartfoldersParameters;\n    }\n\n    if (bizagi.isMobile()) {\n      data['mobileDevice'] = true;\n    }\n\n    // Call ajax and returns promise\n    return $.read(url, data).\n    pipe(function (response) {\n      // !! (double Not) (bang bang) <-- For Boolean Type Casting http://jibbering.com/faq/notes/type-conversion/#tcBool\n      if (!!params.skipAggrupate) {\n        self.includeAllProcessesItem(response);\n        return response;\n      }\n\n      // Aggrupate workflows by categories\n      var responseData = {};\n      var categories = {};\n      var allProcesses = bizagi.localization.getResource('workportal-widget-inbox-all-processes');\n      var allCases = {\n        name: bizagi.localization.getResource('workportal-widget-inbox-all-cases'),\n        path: '',\n        category: allProcesses,\n        isFavorite: params.onlyFavorites || false,\n        guidFavorite: '',\n        idworkflow: '',\n        guidWFClass: '',\n        count: 0 };\n\n\n      // Create a default category\n      categories[allProcesses] = [];\n      categories[allProcesses].workflows = [];\n      categories[allProcesses].workflows.push(allCases);\n      if (response.workflows) {\n        $.each(response.workflows.workflow, function (i, workflow) {\n          // Creates the category if it doesn't exist\n          if (!categories[workflow.category]) {\n            categories[workflow.category] = [];\n            categories[workflow.category].workflows = [];\n          }\n\n          // Push the workflow\n          categories[workflow.category].workflows.push(workflow);\n\n          // Sum the cases count\n          //  if (bizagi.util.isEmpty(params.onlyFavorites) || params.onlyFavorites == false) {\n          allCases.count += Number(workflow.count);\n          // }\n        });\n      }\n\n      // Build result array once grouped\n      responseData.categories = [];\n      for (key in categories) {\n        responseData.categories.push({\n          name: key,\n          workflows: categories[key].workflows });\n\n      }\n\n      return responseData;\n    });\n  },\n\n  /**\r\n      * do request if the preferences have not been load, else resolve with preferences\r\n      */\n  getUserWorkportalPreferences: function getUserWorkportalPreferences() {\n    var self = this,\n    _defer = new $.Deferred(),\n    _thePreferencesAreSaved = self._userPreferences !== undefined,\n    _doRequest = function _doRequest() {\n      self.getPreferencesWorkportalCurrentUser().done(function (response) {\n        self._userPreferences = bizagi.util.tryCatch(\n        function () {return response.workportal;},\n        {});\n\n\n        // ::ALERT:: This code is from workportal user preferences page settings\n        bizagi.util.storeMobileFeatures({ userPreferences: self._userPreferences });\n\n        _defer.resolve(self._userPreferences);\n      }).fail(function (params) {\n        console.error(params);\n        _defer.resolve({});\n      });\n    };\n\n    _thePreferencesAreSaved ? _defer.resolve(self._userPreferences) : _doRequest();\n    return _defer;\n  },\n\n  /**\r\n      * return all preferences or the specific preference if is set\r\n      */\n  getUserPreferences: function getUserPreferences(preference) {\n    var self = this;\n\n    // Get mobile features from workportal\n    var mobFeatures = bizagi.util.getMobileFeatures();\n\n    // for read local information\n    var localStorage = mobFeatures ? mobFeatures : {};\n    var localStoragePreferences = localStorage.userPreferences ? localStorage.userPreferences : {};\n\n    // Set user preference for result\n    var userPreferences = self._userPreferences || localStoragePreferences;\n\n    // return object or property\n    return preference === undefined ? userPreferences : userPreferences[preference];\n  },\n\n  /**\r\n      * get last process inbox workflow\r\n      * @return {workflow} \r\n      */\n  getLastProcessInboxWorkflow: function getLastProcessInboxWorkflow() {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // localstorage\n    var lastProcessInbox = bizagi.util.getLastProcessInboxProcessInfo();\n\n    if (bizagi.util.validateFeatureSupport(\"defaultInboxEnabled\") == false || bizagi.util.isMobileInboxByProcessSupported() == false) {\n      if (lastProcessInbox.idWorkflow != -1)\n      bizagi.util.setLastProcessInbox(lastProcessInbox.processInfoName, lastProcessInbox.idWorkflow);\n      defer.resolve(lastProcessInbox);\n    } else\n    {\n      // Last Open Inbox -> Default Open Inbox -> All processes\n      $.when(\n      self.getUserWorkportalPreferences(),\n      self.getAllProcesses({\n        taskState: \"all\",\n        onlyFavorites: false,\n        inputtray: \"inbox\",\n        skipAggrupate: true,\n        mobileDevice: true }),\n\n      self.getAllSmartInbox()).\n      then(function (userPreferences, processesData, smartinboxes) {\n        // Preferences result\n        var idWorkFlowResult = lastProcessInbox.idWorkflow,\n        smartInboxId = lastProcessInbox.smartInboxId,\n        _preferDefaultOpenInbox = parseInt(userPreferences.defaultOpenInboxWorkflowId),\n        _preferDefaultOpenSmartInbox = userPreferences.defaultOpenInboxSmartInboxId,\n        _hasPreferDefaultOpenInbox = _preferDefaultOpenInbox > 0,\n        _hasPreferDefaultOpenSmartInbox = !bizagi.util.isEmpty(_preferDefaultOpenSmartInbox);\n\n        // First way ask by last Open Inbox\n        if (idWorkFlowResult == -1 && _hasPreferDefaultOpenInbox && bizagi.util.isEmpty(smartInboxId)) {\n          idWorkFlowResult = _preferDefaultOpenInbox;\n          smartInboxId = null;\n        } else if (bizagi.util.isEmpty(smartInboxId) && _hasPreferDefaultOpenSmartInbox && idWorkFlowResult == -1) {\n          smartInboxId = _preferDefaultOpenSmartInbox;\n          idWorkFlowResult = -1;\n        }\n\n        if (processesData && processesData.workflows && idWorkFlowResult != -1)\n        {\n          // search processName by workflowId\n          var workflowFound = $.first(processesData.workflows.workflow, function (workflow) {return workflow.idworkflow == idWorkFlowResult;});\n          if (workflowFound) {\n            bizagi.util.setLastProcessInbox(workflowFound.name, idWorkFlowResult);\n          } else {\n            bizagi.util.setLastProcessInbox(null, -1);\n          }\n\n        } else if (smartinboxes && smartinboxes.length > 0 && !bizagi.util.isEmpty(smartInboxId)) {\n          // search smartinbox by id\n          var smartinboxFound = $.first(smartinboxes, function (smartinbox) {return smartinbox.id == smartInboxId;});\n          if (smartinboxFound) {\n            bizagi.util.setLastProcessInbox(smartinboxFound.name, -1, smartInboxId);\n          } else {\n            bizagi.util.setLastProcessInbox(null, -1);\n          }\n        }\n\n        // get info from local storage\n        defer.resolve(bizagi.util.getLastProcessInboxProcessInfo());\n\n      }).fail(function () {\n        defer.reject('Error in bizagi.workportal.services.service.getLastProcessInboxWorkflow');\n      });\n\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n      *   Return my favourites count\r\n      */\n  getFavourites: function getFavourites() {\n    var self = this;\n    var data = {};\n    var url = self.serviceLocator.getUrl(\"process-handler-getFavourites\");\n\n    // Call ajax and returns promise\n    return $.read(url, data).\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Return my favourites count\r\n      */\n  getMyStuff: function getMyStuff(params) {\n    var self = this;\n    var data = {};\n    var url = self.serviceLocator.getUrl(\"process-handler-getMyStuff\");\n\n    if (typeof params.icon !== \"undefined\" && params.icon) {\n      data.icon = true;\n    }\n\n    // Call ajax and returns promise\n    return $.read(url, data);\n  },\n  /*\r\n      *   Return my favourites cases\r\n      */\n  getFavouriteCases: function getFavouriteCases(params) {\n    var self = this;\n    var data = {};\n    var url = self.serviceLocator.getUrl(\"process-handler-getFavouriteCases\");\n\n    data[\"pageSize\"] = params.pageSize || self.pageSize;\n    data[\"page\"] = params.page || 1;\n\n    if (bizagi.isMobile()) {\n      data[\"mobileDevice\"] = true;\n    }\n\n    // Call ajax and returns promise\n    return $.read(url, data).\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Return all the available cases in bizagi and thinking for mobile response\r\n      */\n  getCasesList: function getCasesList(params) {\n    var self = this;\n    var data = {};\n    var url = self.serviceLocator.getUrl(\"case-handler-getCasesList\");\n\n    params = params || {};\n\n    data[\"pageSize\"] = params.pageSize || 10;\n    data[\"page\"] = params.page || 1;\n    data[\"numberOfFields\"] = params.numberOfFields || \"-1\"; //1;\n    data[\"idWfClass\"] = params.idWfClass || \"-1\";\n\n    return $.read(url, data).\n    pipe(function (response) {\n      var elementToHtml = {\n        overdue: [],\n        today: [],\n        tomorrow: [],\n        upcoming: [],\n        page: response.page,\n        totalPages: response.totalPages };\n\n      var actualDate = new Date();\n      var actualMonth = actualDate.getMonth();\n      var actualDay = actualDate.getDate();\n      var actualYear = actualDate.getYear();\n      var lengthData = typeof response.elements !== \"undefined\" ? response.elements.length : 0;\n\n      for (var counter = 0; lengthData > counter; counter++) {\n        var tmpElement = response.elements[counter];\n        var tmpdate = new Date(tmpElement[3]);\n        var tmpDay = tmpdate.getDate();\n        var tmpMonth = tmpdate.getMonth();\n        var tmpYear = tmpdate.getYear();\n\n        if (actualDay > tmpDay || actualMonth > tmpMonth || actualYear > tmpYear) {\n          tmpElement[3] = bizagi.util.dateFormatter.formatDate(new Date(tmpElement[3]), \"dd MMM yyyy\");\n          elementToHtml.overdue.push(tmpElement);\n        } else {\n          if (actualDay == tmpDay) {\n            tmpElement[3] = bizagi.util.dateFormatter.formatDate(new Date(tmpElement[3]), \"hh:mm\");\n            elementToHtml.today.push(tmpElement);\n\n          } else if (actualDay + 1 == tmpDay) {\n            tmpElement[3] = bizagi.util.dateFormatter.formatDate(new Date(tmpElement[3]), \"hh:mm\");\n            elementToHtml.tomorrow.push(tmpElement);\n\n          } else {\n            tmpElement[3] = bizagi.util.dateFormatter.formatDate(new Date(tmpElement[3]), \"dd MMM yyyy\");\n            elementToHtml.upcoming.push(tmpElement);\n          }\n        }\n      }\n      return elementToHtml;\n    });\n\n  },\n\n  /*\r\n      *   Return all the available cases in bizagi and thinking for mobile response\r\n      */\n  getCasesListBeta: function getCasesListBeta(params) {\n    var self = this;\n    return self.getMobileCasesList(params).then(function (response) {\n      return self.adapterDataOfActivitiesToTemplate(response);\n    });\n  },\n\n  getMobileCasesList: function getMobileCasesList(params) {\n    var self = this;\n    var data = {};\n\n    params = params || {};\n\n    //if server version is less than server version where the new service was implemented, then call last version of service\n    if (!bizagi.util.validateFeatureSupport(\"advancedSearch\")) {\n      var urlMobile = self.serviceLocator.getUrl(\"case-handler-getCasesList\");\n      if (typeof params.radNumber !== \"undefined\") {\n        data[\"radNumber\"] = params.radNumber;\n      }\n      data[\"pageSize\"] = params.pageSize || 10;\n      data[\"page\"] = params.page || 1;\n      data[\"numberOfFields\"] = params.numberOfFields || \"-1\"; //1;\n      data[\"idWfClass\"] = params.idWfClass || \"-1\";\n      return $.read(urlMobile, data);\n    } else\n    {\n      return $.when(self.getMobileActivities(params)).then(function (resp) {\n        var response = { elements: [], rows: [] };\n        var row,i = -1;\n        while (row = resp.rows[++i]) {\n          var tempElement = {},el = [\"\", \"\", \"\", \"\", \"\", \"\", [], \"\", \"\", \"\", \"\", \"\", \"\"];\n          var field,j = -1;\n          while (field = resp.headers[++j]) {\n            tempElement[field.fieldName.toLowerCase()] = {\n              \"displayName\": field.displayName,\n              \"value\": row[j] };\n\n            self.serializeActivity(el, field.fieldName.toLowerCase(), tempElement[field.fieldName.toLowerCase()]);\n          }\n\n          if (resp.syncErrors) {\n            self.appendActivityElementSyncError(el, resp.syncErrors);\n            self.appendActivityRowsSyncError(tempElement, resp.syncErrors);\n          }\n\n          response.elements.push(el);\n          response.rows.push(tempElement);\n        }\n        return {\n          \"page\": resp.page || resp.currentPage,\n          \"totalPages\": resp.totalPages,\n          \"elements\": response.elements,\n          \"rows\": response.rows,\n          \"advanceSearch\": true };\n\n      });;\n    }\n  },\n\n  /**\r\n      * Calc some activity properties to map easier on template \r\n      * @param {Any} serverResponse \r\n      */\n  adapterDataOfActivitiesToTemplate: function adapterDataOfActivitiesToTemplate(response) {\n    var self = this;\n    var groupedData = {\n      elements: [],\n      page: response.page,\n      totalPages: response.totalPages,\n      advanceSearch: response.advanceSearch || false,\n      headers: response.headers,\n      rows: response.rows };\n\n\n    var actualDate = new Date();\n    var statusFunction = response.advanceSearch ? self.defineActivityStateByTaskState : self.defineActivityStateByDate;\n\n    for (var counter = 0; response.elements.length > counter; counter++) {\n      var tmpElement = response.elements[counter];\n      var status = {};\n\n      status = statusFunction(tmpElement[3], tmpElement.taskstate);\n\n      // Time to atRiskTimeDelta\n      if (tmpElement.length >= 10 && parseInt(tmpElement[11], 10) > 0) {\n        var tmpEndDate = new Date(tmpElement[3]);\n\n        if (actualDate.getTime() > tmpEndDate.getTime()) {\n          status.state = \"red\";\n        } else {\n          if (actualDate.getTime() > tmpEndDate.getTime() - parseInt(tmpElement[11], 10) * 60000) {\n            status.state = \"yellow\";\n          } else {\n            status.state = \"green\";\n          }\n        }\n      }\n\n      groupedData.elements.push($.extend({}, tmpElement, status, {\n        \"endDate\": tmpElement[3],\n        \"idworkitem\": tmpElement[1],\n        \"idwfclass\": !bizagi.util.validateFeatureSupport(\"advancedSearch\") ? tmpElement[7] : tmpElement[10] }));\n\n    }\n    return groupedData;\n  },\n\n  /**\r\n      * Return compatible object for Template binding \r\n      * @param {Any} serverResponse \r\n      */\n  adapterServerResponseTemplateBindingObject: function adapterServerResponseTemplateBindingObject(serverResponse) {\n    var self = this;\n    var response = { elements: [], rows: [] };\n    var row,i = -1;\n    while (row = serverResponse.rows[++i]) {\n      var tempElement = {},el = [\"\", \"\", \"\", \"\", \"\", \"\", [], \"\", \"\", \"\", \"\", \"\", \"\"];\n      var field,j = -1;\n\n      while (field = serverResponse.headers[++j]) {\n\n        tempElement[field.fieldName.toLowerCase()] = {\n          \"displayName\": field.displayName,\n          \"value\": row[j] };\n\n        self.serializeActivity(el, field.fieldName.toLowerCase(), tempElement[field.fieldName.toLowerCase()]);\n      }\n\n      if (serverResponse.syncErrors) {\n        self.appendActivityElementSyncError(el, serverResponse.syncErrors);\n        self.appendActivityRowsSyncError(tempElement, serverResponse.syncErrors);\n      }\n\n      response.elements.push(el);\n      response.rows.push(tempElement);\n    }\n    return {\n      \"page\": serverResponse.page || serverResponse.currentPage,\n      \"totalPages\": serverResponse.totalPages,\n      \"elements\": response.elements,\n      \"rows\": response.rows,\n      \"advanceSearch\": true,\n      \"headers\": serverResponse.headers };\n\n  },\n\n  /**\r\n      * Returns the activity status based on the end date and the risk\r\n      * @param {String} endDate ISO representation of a date\r\n      * @returns {{}}\r\n      */\n  defineActivityStateByDate: function defineActivityStateByDate(endDate) {\n    var status = {};\n\n    if (endDate) {\n      var activityDate = new Date(endDate);\n      var now = new Date();\n      var today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n      var second = 1000;\n      var minute = 60 * second;\n      var day = 24 * 60 * minute;\n\n      // Before today\n      if (activityDate.getTime() < today.getTime()) {\n        status = { group: \"1|\" + bizagi.localization.getResource(\"workportal-taskfeed-overdue\"), state: \"red\", type: \"overdue\", icon: \"overdue\", shortEndDate: bizagi.util.dateFormatter.formatDate(new Date(endDate), bizagi.localization.getResource(\"dateFormat\") + ' | ' + bizagi.localization.getResource(\"timeFormat\")) };\n      }\n      // Today but before now\n      else if (activityDate.getTime() < now.getTime() + minute) {\n          status = { group: \"2|\" + bizagi.localization.getResource(\"workportal-taskfeed-today\"), state: \"red\", type: \"today\", icon: \"overdue\", shortEndDate: bizagi.util.dateFormatter.formatDate(new Date(endDate), bizagi.localization.getResource(\"dateFormat\") + ' | ' + bizagi.localization.getResource(\"timeFormat\")) };\n        }\n        // Today but after now\n        else if (activityDate.getTime() < today.getTime() + day) {\n            status = { group: \"2|\" + bizagi.localization.getResource(\"workportal-taskfeed-today\"), state: \"yellow\", type: \"today\", icon: \"ontime\", shortEndDate: bizagi.util.dateFormatter.formatDate(new Date(endDate), bizagi.localization.getResource(\"dateFormat\") + ' | ' + bizagi.localization.getResource(\"timeFormat\")) };\n          }\n          // Tomorrow\n          else if (activityDate.getTime() < today.getTime() + 2 * day) {\n              status = { group: \"3|\" + bizagi.localization.getResource(\"workportal-taskfeed-tomorrow\"), state: \"green\", type: \"tomorrow\", icon: \"upcoming\", shortEndDate: bizagi.util.dateFormatter.formatDate(new Date(endDate), bizagi.localization.getResource(\"dateFormat\") + ' | ' + bizagi.localization.getResource(\"timeFormat\")) };\n            }\n            // After tomorrow\n            else {\n                status = { group: \"4|\" + bizagi.localization.getResource(\"workportal-taskfeed-upcomming\"), state: \"green\", type: \"upcoming\", icon: \"upcoming\", shortEndDate: bizagi.util.dateFormatter.formatDate(new Date(endDate), bizagi.localization.getResource(\"dateFormat\") + ' | ' + bizagi.localization.getResource(\"timeFormat\")) };\n              }\n    } else {\n      status = { group: \"1|\" + bizagi.localization.getResource(\"workportal-taskfeed-overdue\"), state: \"red\", type: \"overdue\", shortEndDate: \"--\", icon: \"overdue\" };\n    }\n\n    return status;\n  },\n\n  /**\r\n      * Returns the activity status based on the taskstate property\r\n      * @param {String} endDate ISO representation of a date\r\n      * @param {String} taskstate Color name\r\n      * @returns {{}}\r\n      */\n  defineActivityStateByTaskState: function defineActivityStateByTaskState(endDate, taskstate) {\n    var status = {\n      group: \"1|\" + bizagi.localization.getResource(\"workportal-taskfeed-overdue\"),\n      state: taskstate,\n      type: \"overdue\",\n      shortEndDate: \"--\",\n      icon: \"overdue\" };\n\n\n    if (endDate && taskstate) {\n      var activityDate = new Date(endDate);\n      var now = new Date();\n      var today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n      var second = 1000;\n      var minute = 60 * second;\n      var day = 24 * 60 * minute;\n\n      status = {\n        group: \"\",\n        state: taskstate,\n        type: \"\",\n        icon: \"\",\n        shortEndDate: bizagi.util.dateFormatter.formatDate(new Date(endDate), bizagi.localization.getResource(\"dateFormat\") + ' | ' + bizagi.localization.getResource(\"timeFormat\")) };\n\n      // Before today\n      if (activityDate.getTime() < today.getTime()) {\n        status.group = \"1|\" + bizagi.localization.getResource(\"workportal-taskfeed-overdue\");\n        status.type = \"overdue\";\n      }\n      // Today\n      else if (activityDate.getTime() < today.getTime() + day) {\n          status.group = \"2|\" + bizagi.localization.getResource(\"workportal-taskfeed-today\");\n          status.type = \"today\";\n        }\n        // Tomorrow\n        else if (activityDate.getTime() < today.getTime() + 2 * day) {\n            status.group = \"3|\" + bizagi.localization.getResource(\"workportal-taskfeed-tomorrow\");\n            status.type = \"tomorrow\";\n          }\n          // After tomorrow\n          else {\n              status.group = \"4|\" + bizagi.localization.getResource(\"workportal-taskfeed-upcomming\");\n              status.type = \"upcoming\";\n            }\n\n      switch (taskstate) {\n        case \"green\":\n          status.icon = \"upcoming\";\n          break;\n        case \"yellow\":\n          status.icon = \"ontime\";\n          break;\n        case \"red\":\n        default:\n          status.icon = \"overdue\";\n          break;}\n\n    }\n    return status;\n  },\n\n  serializeActivity: function serializeActivity(el, fieldName, element) {\n    switch (fieldName) {\n      case \"radnumber\":\n        el[6].push([element.displayName, element.value]);\n        el.radNumber = element.value;\n        break;\n      //Proceso\n      case \"wfclsdisplayname\":\n        el[4] = element.value != null ? element.value.toString() : bizagi.localization.getResource(\"workportal-project-activity-plan\");\n        break;\n      //Actividad\n      case \"currenttask\":\n        el[5] = element.value != null ? element.value.toString() : bizagi.localization.getResource(\"workportal-project-casedashboard-activity\");\n        break;\n      //Fecha creación caso\n      case \"cascreationdate\":\n        el[12] = element.value;\n        break;\n      // Actividad vence en\n      case \"wiestimatedsolutiondate\":\n        el[3] = element.value;\n        break;\n      //Fecha Solución caso\n      case \"cassolutiondate\":\n        //el[6] = [\"\"];\n        break;\n      // Id de caso\n      case \"idcase\":\n        el[0] = element.value;\n        break;\n      // idWorkItem\n      case \"idworkitem\":\n        el[1] = element.value.toString();\n        break;\n      //Fecha de entrada al estado\n      case \"wientrydate\":\n        //el[6] = [\"\"];\n        break;\n      case \"taskid\":\n        el[2] = element.value;\n        break;\n      case \"taskstate\":\n        el.taskstate = element.value ? (\"\" + element.value).toLowerCase() : \"\";\n        break;\n      //idWorkflow\"\n      case \"idwfclass\":\n        el[10] = el.idwfclass = element.value;\n        break;\n      //Is Favorite\n      case \"isfavorite\":\n        el[9] = element.value;\n        break;\n      case \"atrisktime\":\n        el[11] = element.value;\n        break;\n      case \"guidfavorite\":\n        el[8] = element.value;\n        break;\n      case \"isevent\":\n        el.isEvent = element.value;\n        break;\n      case \"datachangesetversion\":\n        el.dataChangeset = element.value;\n        break;\n      case \"creatorfullname\":\n        el.creatorFullName = element.value;\n        break;}\n\n  },\n\n  /**\r\n      * Assign the sync error to element passed by parameter\r\n      * @param {} element The array element that represent an activity\r\n      * @param {*} syncErrors The sync errors map\r\n      */\n  appendActivityElementSyncError: function appendActivityElementSyncError(element, syncErrors) {\n    var offlineId = element[0] + \"-\" + element[1];\n    var caseSyncError = syncErrors[offlineId];\n    if (caseSyncError) {\n      element.syncError = caseSyncError;\n      element.hasSyncError = true;\n    }\n  },\n\n  /**\r\n      * Assign the sync error to element passed by parameter\r\n      * @param {*} row The object that represent an activity\r\n      * @param {*} syncErrors The sync errors map\r\n      */\n  appendActivityRowsSyncError: function appendActivityRowsSyncError(row, syncErrors) {\n    var offlineId = row.idcase.value + \"-\" + row.idworkitem.value;\n    var caseSyncError = syncErrors[offlineId];\n    if (caseSyncError) {\n      row.syncerror = {\n        displayName: \"syncError\",\n        value: caseSyncError };\n\n      row.hassyncerror = {\n        displayName: \"hasSyncError\",\n        value: true };\n\n    }\n  },\n\n  /**\r\n      * Obtiene la lista de actividades para el usuario actual con filtros\r\n      * Version: 2, Llamado al servicio con todas las prestaciones de filtrado\r\n      */\n  getCurrentActivities: function getCurrentActivities(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[\"page\"] = params.page || 1;\n    data[\"pageSize\"] = params.pageSize || 10;\n\n    if (typeof params.radNumber !== \"undefined\") {\n      data[\"radNumber\"] = params.radNumber;\n    }\n\n    var url = self.serviceLocator.getUrl('case-handler-getActivityList');\n    return $.read(url, data).then(function (resp) {\n      return self.processActivitiesResponse(resp);\n    });\n  },\n\n  processActivitiesResponse: function processActivitiesResponse(resp, highlight, process_filter) {\n    var self = this;\n    var row;\n    var i = -1;\n\n    resp.elements = [];\n    resp.processes = [];\n\n    while (row = resp.rows[++i]) {\n      var tempElement = {};\n      var field,j = -1;\n      while (field = resp.headers[++j]) {\n        tempElement[\"o_\" + field.fieldName.toLowerCase()] = { \"displayName\": field.displayName, \"value\": row[j] };\n        tempElement[field.fieldName.toLowerCase()] = row[j];\n      }\n      $.extend(tempElement, self.defineActivityStateByDate(tempElement[\"wiestimatedsolutiondate\"]), { highlightedNumber: self.highlightsString(tempElement[\"radnumber\"], highlight) });\n      resp.elements.push(tempElement);\n\n      var process = resp.processes.find(function (el) {\n        return el.processname == tempElement[\"wfclsdisplayname\"];\n      });\n\n      if (typeof process === \"undefined\") {\n        resp.processes.push({\n          processname: tempElement[\"wfclsdisplayname\"],\n          idwfclass: tempElement[\"idwfclass\"],\n          active: process_filter || false ? \"active\" : \"\" });\n\n      }\n    }\n    return resp;\n  },\n\n  highlightsString: function highlightsString(string, highlight) {\n    if (typeof string !== \"string\" || typeof highlight !== \"string\") {\n      return string;\n    }\n\n    var expresion = new RegExp(highlight, \"gi\");\n    return string.replace(expresion, function (match, offset) {\n      return \"<strong>\" + match + \"</strong>\";\n    });\n  },\n\n  getDiscussionCase: function getDiscussionCase(params) {\n    var self = this;\n    var data = data || {};\n    data['globalParent'] = params.globalParent;\n    var url = bizagi.util.validateFeatureSupport(\"discussionCase\") ? self.serviceLocator.getUrl('discussion-case') : self.serviceLocator.getUrl('discussion-case-v1');\n\n    return $.read({\n      url: url,\n      data: data,\n      contentType: \"application/json\" }).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  editDiscussion: function editDiscussion(data) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"new-discussion\");\n    return $.update({\n      url: url,\n      data: JSON.stringify(data),\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  getUsersDiscussion: function getUsersDiscussion(params) {\n    var self = this;\n    var data = data || {};\n    data[\"userIds\"] = params;\n    data[\"width\"] = 50;\n    data[\"height\"] = 50;\n    var url = self.serviceLocator.getUrl(\"get-users\");\n\n    var newUserServices = bizagi.util.getFeatureObject(\"userService.v1.enabled\");\n    if (newUserServices) {\n      return $.ajax({\n        url: url,\n        data: data,\n        type: \"POST\",\n        dataType: \"json\" });\n\n    } else {\n      return $.read(url, data).\n      pipe(function (response) {\n        return response;\n      });\n    }\n  },\n\n  getEffectiveDuration: function getEffectiveDuration(data) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"time-schemas-effectiveduration\");\n\n    return $.read({\n      url: url,\n      data: data,\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  getUsersData: function getUsersData(data) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-users-get\");\n    var newUserServices = bizagi.util.getFeatureObject(\"userService.v1.enabled\");\n    if (newUserServices) {\n      return $.ajax({\n        url: url,\n        data: data,\n        type: \"POST\",\n        dataType: \"json\" });\n\n    } else {\n      return $.read({\n        url: url,\n        data: data,\n        dataType: \"json\" });\n\n    }\n\n\n  },\n\n  getSummaryCaseTaskOptions: function getSummaryCaseTaskOptions(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"case-summary-task-options\");\n\n    params = params || {};\n\n    // Required params: idWorkitem\n    return $.read(url, {\n      idWorkitem: params.idWorkitem,\n      idCase: params.idCase });\n\n  },\n\n  createNewDiscussion: function createNewDiscussion(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"new-discussion\");\n\n    params = params || {};\n\n    return $.create({\n      url: url,\n      data: JSON.stringify(params),\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  createNewComment: function createNewComment(params) {\n    var self = this;\n    params = params || {};\n    var data = params.data || {};\n    var url = self.serviceLocator.getUrl(\"new-comment\");\n\n    return $.create({\n      url: url.replace(\"{typeResource}\", \"Comment\"),\n      data: JSON.stringify(data),\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  /**\r\n      * Update Project File\r\n      */\n  updateProjectFile: function updateProjectFile(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-files-upload\");\n\n    return $.update({\n      url: url,\n      data: JSON.stringify(params),\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  /**\r\n      * Update Project File\r\n      */\n  createProjectFile: function createProjectFile(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-files-upload\");\n\n    return $.create({\n      url: url,\n      data: JSON.stringify(params),\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  /**\r\n      * Count the files number\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getFilesCount: function getFilesCount(params) {\n    var self = this;\n    params = params || {};\n    var url = bizagi.util.validateFeatureSupport(\"filesCount\") ? self.serviceLocator.getUrl(\"count-files\") : self.serviceLocator.getUrl(\"count-files-v1\");\n\n    return $.read({\n      url: url,\n      data: params,\n      contentType: \"application/json\" }).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  getCommentCase: function getCommentCase(data) {\n    var self = this;\n    data = data || {};\n\n    var url = self.serviceLocator.getUrl(\"comment-case\");\n\n    return $.read({\n      url: url,\n      data: data,\n      contentType: \"application/json\" }).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  getCommentsByParent: function getCommentsByParent(params) {\n    var self = this;\n    params = params || {};\n    var url = self.serviceLocator.getUrl(\"count-comments\");\n\n    return $.read({\n      url: url,\n      data: params,\n      contentType: \"application/json\" }).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  getFilesList: function getFilesList(params) {\n    var self = this;\n    var url = bizagi.util.validateFeatureSupport(\"filesList\") ? self.serviceLocator.getUrl(\"get-list-files\") : self.serviceLocator.getUrl(\"get-list-files-v1\");\n\n    return $.read({\n      url: url,\n      data: params,\n      dataType: \"json\",\n      contentType: \"application/json\" }).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  deleteFile: function deleteFile(data) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-resource-action\");\n    return $.destroy({\n      url: url.replace(\"{typeResource}\", \"Attachment\"),\n      data: JSON.stringify(data),\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  getFilesThumbnail: function getFilesThumbnail(data) {\n    var self = this;\n    data = data || {};\n    var url = self.serviceLocator.getUrl(\"thumbnail-file\");\n\n    return $.read({\n      url: url,\n      data: data,\n      dataType: \"json\",\n      contentType: \"application/json\" }).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  getAttachment: function getAttachment(guidAttachment) {\n    var self = this;\n\n    var url = self.serviceLocator.getUrl(\"get-attachment\");\n    url = url.replace(\"{idAttachment}\", guidAttachment.idAttachment);\n    return url;\n  },\n\n  getMobileAttachment: function getMobileAttachment(guidAttachment) {\n    var self = this;\n\n    var url = self.serviceLocator.getUrl(\"get-mobile-attachment\");\n    url = url.replace(\"{idAttachment}\", guidAttachment.idAttachment);\n    return url + \"?sessionId=\";\n  },\n\n  /*\r\n      *   Return all the available processes in bizagi\r\n      */\n  getAllAdministrableEntities: function getAllAdministrableEntities(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[\"action\"] = \"entitiesList\";\n    data[\"kind\"] = \"administrable\";\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"entities-administration\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" }).\n    pipe(function (data) {\n      var result = {\n        entities: [] };\n\n      $.each(data, function (i, item) {\n        result.entities.push(item);\n      });\n      return result;\n    });\n  },\n  /*\r\n      *   Return all the available processes in bizagi\r\n      */\n  getEntitiesList: function getEntitiesList(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    params[\"action\"] = \"entitiesList\";\n    params[\"kind\"] = \"entitiesData\";\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"entities-administration\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *   Returns all the cases for the current user filtered by a workflow\r\n      */\n  getCasesByWorkflow: function getCasesByWorkflow(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    var url = self.serviceLocator.getUrl('process-handler-getCustomizedColumnsDataInfo');\n\n\n    // Required params\n    if (!bizagi.util.isEmpty(params.taskState))\n    data['taskState'] = params.taskState;\n    if (!bizagi.util.isEmpty(params.smartInboxId))\n    data['smartInboxGuid'] = params.smartInboxId;else\n    if (!bizagi.util.isEmpty(params.idWorkflow))\n    data['idWorkflow'] = params.idWorkflow;\n\n    // Special case to search all favorite cases for all processes\n    if (params.onlyFavorites == true) {\n      data['onlyFavorites'] = true;\n      data['taskState'] = 'all';\n    }\n\n    // Optional params\n    data['pageSize'] = params.pageSize || self.pageSize;\n    data['page'] = params.page || 1;\n\n    if (bizagi.isMobile()) {\n      data['mobileDevice'] = true;\n    }\n\n    if (params.smartfoldersParameters) {\n      var param = params.smartfoldersParameters.split('&');\n      $.each(param, function (k, v) {\n        var keyvalue = v.split('=');\n        data[keyvalue[0]] = keyvalue[1];\n      });\n    }\n\n    if (params.radnumber || params.radNumber) {\n      data['radNumber'] = params.radNumber ? params.radNumber : params.radnumber;\n    }\n\n    if ((params.idcase || params.idCase) && bizagi.util.isNumeric(params.idcase || params.idCase)) {\n      data['idCase'] = params.idCase ? params.idCase : params.idcase;\n    }\n\n    // Call ajax and returns promise\n    return $.read(url, data).\n    pipe(function (response) {\n      $.each(response.cases.rows, function (key, value) {\n        var newFieldsValue = [];\n\n        //  Set id of case to radnumber\n        response.cases.rows[key]['radnumber'] = value.id;\n        $.each(value.fields, function (fieldsKey, fieldsValue) {\n          // when delete element from fields array, each function lose key value\n          if (fieldsValue != undefined) {\n            // Radnumber\n            try {\n              if (fieldsValue.isRadNumber != undefined && fieldsValue.isRadNumber == 'true') {\n                response.cases.rows[key]['radnumber'] = fieldsValue.Value;\n                response.cases.rows[key]['casenumberdisplayname'] = fieldsValue.DisplayName;\n              } else if (fieldsValue.workitems != undefined) {\n                response.cases.rows[key]['workitems'] = fieldsValue.workitems;\n              } else {\n                newFieldsValue.push(fieldsValue);\n              }\n            } catch (e) {}\n          }\n        });\n\n        // Update Fields\n        response.cases.rows[key]['fields'] = newFieldsValue;\n      });\n      return response.cases;\n    });\n  },\n  /*\r\n      *   Returns the Organization List\r\n      */\n  getOrganizationsList: function getOrganizationsList() {\n    var self = this;\n\n    var url = self.serviceLocator.getUrl('process-handler-getOrganizations');\n    var data = {};\n    data['type'] = 12;\n    data['name'] = '';\n\n    return $.read(url, data);\n  },\n  getOrganizationsByUserList: function getOrganizationsByUserList() {\n    var self = this;\n\n    var url = self.serviceLocator.getUrl(\"process-handler-getOrganizationsByUser\");\n\n    return $.read(url, {});\n  },\n  /*\r\n      *   Returns the data for the inbox grid view\r\n      */\n  getCustomizedColumnsData: function getCustomizedColumnsData(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    var url = self.serviceLocator.getUrl(\"process-handler-getCustomizedColumnsData\");\n    data[\"pageSize\"] = params.pageSize || self.pageSize;\n    data[\"page\"] = params.page || 1;\n\n    // data for sort columns\n    data[\"orderFieldName\"] = params.orderFieldName || \"\";\n    data[\"orderType\"] = params.orderType || \"0\";\n    data[\"order\"] = params.order || \"\";\n\n    if (bizagi.isMobile()) {\n      data[\"mobileDevice\"] = true;\n    }\n\n    // Fixes stuff\n    // TODO: this must be fixed in the server\n    params.taskState = params.taskState || 'all';\n    if (params.taskState.toString().toLowerCase() === '')\n    params.taskState = 'all';\n    if (params.taskState.toString().toLowerCase() === 'red')\n    params.taskState = 'Red';\n    if (params.taskState.toString().toLowerCase() === 'yellow')\n    params.taskState = 'Yellow';\n    if (params.taskState.toString().toLowerCase() === 'green')\n    params.taskState = 'Green';\n\n    data.taskState = params.taskState;\n    // Required params\n    if (!bizagi.util.isEmpty(params.idWorkflow)) {\n      data['idWorkflow'] = params.idWorkflow;\n    }\n    if (!bizagi.util.isEmpty(params.idTask)) {\n      data['idTask'] = params.idTask;\n    }\n\n    if (!bizagi.util.isEmpty(params.radNumber)) {\n      data['radNumber'] = params.radNumber;\n    }\n\n    // Special case to search all favorite cases for all processes\n    if (params.onlyFavorites == true) {\n      data['onlyFavorites'] = true;\n      data['taskState'] = 'all';\n    }\n\n    if (params.smartfoldersParameters) {\n      var param = params.smartfoldersParameters.split('&');\n      $.each(param, function (k, v) {\n        var keyvalue = v.split('=');\n        data[keyvalue[0]] = keyvalue[1];\n      });\n    }\n\n    // Call ajax and returns promise\n    return $.read(url, data);\n  },\n\n  /*\r\n      *   Returns the data for the inbox grid view\r\n      */\n  getCustomizedColumnsDataBeta: function getCustomizedColumnsDataBeta(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    var url = self.serviceLocator.getUrl('process-handler-getCustomizedColumnsData');\n\n    data['pageSize'] = params.pageSize || self.pageSize;\n    data['page'] = params.page || 1;\n\n    // data for sort columns\n    data['orderFieldName'] = params.orderFieldName || '';\n    data['orderType'] = params.orderType || '0';\n    data['order'] = params.order || '';\n    data['mobileDevice'] = bizagi.isMobile() ? true : false;\n\n    // Fixes stuff\n    // TODO: this must be fixed in the server\n    params.taskState = params.taskState || 'all';\n    if (params.taskState.toString().toLowerCase() === '')\n    params.taskState = 'all';\n    if (params.taskState.toString().toLowerCase() === 'red')\n    params.taskState = 'Red';\n    if (params.taskState.toString().toLowerCase() === 'yellow')\n    params.taskState = 'Yellow';\n    if (params.taskState.toString().toLowerCase() === 'green')\n    params.taskState = 'Green';\n\n    data.taskState = params.taskState;\n    // Required params\n    if (!bizagi.util.isEmpty(params.idWorkflow)) {\n      data['idWorkflow'] = params.idWorkflow;\n    }\n    if (!bizagi.util.isEmpty(params.idTask)) {\n      data['idTask'] = params.idTask;\n    }\n\n    if (!bizagi.util.isEmpty(params.radNumber)) {\n      data['radNumber'] = params.radNumber;\n    }\n\n    // Special case to search all favorite cases for all processes\n    if (params.onlyFavorites == true) {\n      data['onlyFavorites'] = true;\n      data['taskState'] = 'all';\n    }\n\n    if (params.smartfoldersParameters) {\n      var param = params.smartfoldersParameters.split('&');\n      $.each(param, function (k, v) {\n        var keyvalue = v.split('=');\n        data[keyvalue[0]] = keyvalue[1];\n      });\n    }\n\n    // Call ajax and returns promise\n    //return $.read(url, data);\n    return $.read(url, data).\n    pipe(function (response) {\n\n      var groupedData = {\n        columnTitle: [],\n        lstIdCases: [],\n        elements: [],\n        page: response.page,\n        totalPages: response.totalPages };\n\n\n      var actualDate = new Date();\n      var actualMonth = actualDate.getMonth();\n      var actualDay = actualDate.getDate();\n      var actualYear = actualDate.getYear();\n\n      groupedData.columnTitle = response.cases.columnTitle;\n      groupedData.lstIdCases = response.cases.lstIdCases;\n      groupedData.page = response.cases.page;\n      groupedData.totalPages = response.cases.totalPages;\n\n      for (var counter = 0, length = response.cases.rows.length; counter < length; counter++) {\n        var tmpElement = response.cases.rows[counter];\n\n        var tmpdate = new Date(tmpElement.fields[3]);\n        var tmpDay = tmpdate.getDate();\n        var tmpMonth = tmpdate.getMonth();\n        var tmpYear = tmpdate.getYear();\n\n        if (actualDay > tmpDay || actualMonth > tmpMonth || actualYear > tmpYear) {\n          tmpElement.fields[3] = bizagi.util.dateFormatter.formatDate(new Date(tmpElement.fields[3]), 'dd MMM'); // 'dd MMM hh:mm'\n          groupedData.elements.push($.extend({}, tmpElement, { 'group': 'overdue' }));\n\n        } else {\n          if (actualDay == tmpDay) {\n            tmpElement.fields[3] = bizagi.util.dateFormatter.formatDate(new Date(tmpElement.fields[3]), 'hh:mm');\n            groupedData.elements.push($.extend({}, tmpElement, { 'group': 'today' }));\n\n          } else if (actualDay + 1 == tmpDay) {\n            tmpElement.fields[3] = bizagi.util.dateFormatter.formatDate(new Date(tmpElement.fields[3]), 'hh:mm');\n            groupedData.elements.push($.extend({}, tmpElement, { 'group': 'tomorrow' }));\n\n          } else {\n            tmpElement.fields[3] = bizagi.util.dateFormatter.formatDate(new Date(tmpElement.fields[3]), 'dd MMM');\n            groupedData.elements.push($.extend({}, tmpElement, { 'group': 'upcoming' }));\n          }\n        }\n      }\n\n      // No data items\n      if (typeof groupedData.elements === 'undefined' || typeof groupedData.elements !== 'undefined' && groupedData.elements.length === 0) {\n        groupedData.elements.push({ noResults: true, message: bizagi.localization.getResource('workportal-menu-search-found-no-cases') });\n      }\n\n      return groupedData;\n    });\n  },\n  /*\r\n      *   Returns the available categories filtered by a parent category\r\n      *   If not parent category is sent, it will return the base categories\r\n      */\n  getCategories: function getCategories(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n\n    // Required params\n    if (params.idCategory)\n    data['idCategory'] = params.idCategory;\n    if (params.idApp)\n    data['idApp'] = params.idApp;\n\n    if (bizagi.isMobile()) {\n      data['mobileDevice'] = true;\n    }\n\n\n    data['groupByApp'] = params.groupByApp || false;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl('process-handler-getCategory'), data);\n  },\n  /*\r\n      *   Returns the recent process\r\n      */\n  getRecentProcesses: function getRecentProcesses(params) {\n    var self = this;\n    params = params || {};\n    params.mobileDevice = bizagi.isMobile() || \"false\";\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl('process-handler-getRecentProcesses'), params);\n  },\n\n  /*\r\n      *   Returns the summary for a case\r\n      */\n  getCaseSummary: function getCaseSummary(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.read({\n      url: self.serviceLocator.getUrl('case-handler-getCaseSummary'),\n      data: {\n        idCase: params.idCase,\n        eventAsTasks: params.eventAsTasks || \"false\",\n        onlyUserWorkItems: params.onlyUserWorkItems || \"true\",\n        mobileDevice: bizagi.isMobile() || \"false\" },\n\n      serviceType: \"GETSUMMARY\" }).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  /*\r\n      *   Returns the assigness for a case (all users assigned to any task of this case)\r\n      */\n  getCaseAssignees: function getCaseAssignees(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(self.serviceLocator.getUrl('case-handler-getCaseAssignees'), {\n      idCase: params.idCase }).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  /*\r\n      *   Returns all the tasks belonging to a process, aditionally return if it has an active workitem or not\r\n      */\n  getCaseTasks: function getCaseTasks(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl('case-handler-getCaseTasks'), {\n      idCase: params.idCase });\n\n\n  },\n  /*\r\n      *   Returns all the events available for a case\r\n      */\n  getCaseEvents: function getCaseEvents(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.read({\n      url: self.serviceLocator.getUrl('case-handler-getCaseEvents'),\n      data: {\n        idCase: params.idCase },\n\n      serviceType: 'GETEVENTS' }).\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Returns all the available subprocesses for a case\r\n      */\n  getCaseSubprocesses: function getCaseSubprocesses(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.read({\n      url: self.serviceLocator.getUrl('case-handler-getCaseSubprocesses'),\n      data: {\n        idCase: params.idCase },\n\n      serviceType: 'GETSUBPROCESSES' }).\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Returns forms render version for a case\r\n      */\n  getCaseFormsRenderVersion: function getCaseFormsRenderVersion(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl('case-handler-getCaseFormsRenderVersion'), {\n      idCase: params.idCase });\n\n\n  },\n  /**\r\n      *  Get json from forms render version service\r\n      */\n  getCaseFormsRenderVersionDataContent: function getCaseFormsRenderVersionDataContent(options) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(self.getCaseFormsRenderVersion(options)).\n    done(function (data) {\n      // return json content\n      defer.resolve(data);\n    });\n    return defer.promise();\n  },\n  /*\r\n      *   Returns all the assignees belonging to a workitem (case - task combination)\r\n      */\n  getTaskAssignees: function getTaskAssignees(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase, idTask\n    return $.read(\n    self.serviceLocator.getUrl('case-handler-getTaskAssignees'), {\n      idCase: params.idCase,\n      idTask: params.idTask });\n\n\n  },\n  /*\r\n      *   Returns the available workitems for a case (Routing service)\r\n      */\n  getWorkitems: function getWorkitems(params) {\n    var self = this;\n    var data = {};\n\n    params = params || {};\n\n    data.idCase = params.idCase;\n    data.fromTask = params.fromTask;\n    data.fromWorkItemId = params.fromWorkItemId;\n    data.mobileDevice = bizagi.isMobile();\n\n    params.eventAsTasks ? data.eventAsTasks = params.eventAsTasks : \"\";\n\n    if (typeof params.onlyUserWorkItems !== \"undefined\") {\n      data.onlyUserWorkItems = params.onlyUserWorkItems;\n    }\n\n    // Required params: idCase\n    return $.read({\n      url: self.serviceLocator.getUrl('case-handler-getWorkItems'),\n      data: data,\n      serviceType: 'GETWORKITEMS' });\n\n  },\n  /*\r\n      *   Returns the available workitems for a case (Routing service)\r\n      */\n  getQueries: function getQueries(params) {\n    var self = this;\n\n    if (self.hashQueries && params.idElement) {\n      return self.hashQueries[params.idElement];\n    } else {\n      var defer = new $.Deferred();\n\n      // Call ajax and returns promise\n      $.read(self.serviceLocator.getUrl('query-handler-getqueries')).\n      done(function (response) {\n        self.hashQueries = {};\n        self.hashQueries[0] = {};\n\n        // Process the full response converting it into small entries inside a hashtable\n        self.processQueries(response.query);\n        defer.resolve(self.hashQueries['-1']);\n      });\n      return defer.promise();\n    }\n  },\n  /*\r\n      *   Creates a hash of queries to simulate each category request\r\n      */\n  processQueries: function processQueries(queries) {\n    var self = this;\n    $.each(queries, function (i, query) {\n      if (!self.hashQueries[query.idParent]) {\n        self.hashQueries[query.idParent] = [];\n      }\n      self.hashQueries[query.idParent].push(query);\n      if (query.nodes) {\n        self.processQueries(query.nodes);\n      } else {\n        query.nodes = {};\n      }\n    });\n  },\n  /*\r\n      *   Creates a new case in BizAgi\r\n      */\n  createNewCase: function createNewCase(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.create({\n      url: self.serviceLocator.getUrl('case-handler-addNewCase'),\n      data: {\n        idWfClass: params.idWfClass,\n        caseData: params.caseData ? JSON.stringify(params.caseData) : null,\n        idOrganization: params.idOrganization ? params.idOrganization : null },\n\n      serviceType: 'NEWCASE' });\n\n  },\n\n  /*\r\n      * La idea con este servicio es por ahora quitar el hatStartForm del servicio de Shortcuts y de acciones\r\n      * retorna si tiene forma de inicio y el guid de la entidad de proceso\r\n      */\n  validateHasStartForm: function validateHasStartForm(params) {\n    var self = this;\n    var data = {\n      processId: params.processId };\n\n\n    // Call ajax and returns promise\n    return $.read({\n      url: self.serviceLocator.getUrl(\"case-handler-validateHasStartForm\"),\n      data: data,\n      batchRequest: true });\n\n  },\n\n\n  /*\r\n      *   Start process in Bizagi\r\n      */\n  startProcess: function startProcess(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {\n      idProcess: params.idProcess,\n      entityMapping: params.mapping ? JSON.stringify(params.mapping) : {} };\n\n\n    if (typeof params.idParentCase !== \"undefined\") {\n      data.idParentCase = params.idParentCase;\n    }\n\n    var defer = $.Deferred();\n\n    $.create({\n      url: self.serviceLocator.getUrl(\"case-handler-startProcess\"),\n      data: data,\n      serviceType: \"STARTPROCESS\" }).\n    fail(function (error) {\n      var response = $.parseJSON(error.responseText);\n      if (response.status === \"error\" && !bizagi.util.isVersionSupported()) {\n        var oldParams = {\n          idWfClass: params.idProcess || params.idWfClass,\n          idOrganization: params.idOrganization || null };\n\n\n        self.createNewCase(oldParams).\n        then(function (result) {\n          result.oldVersion = true;\n\n          defer.resolve(result);\n        }).fail(function (error) {\n          defer.reject(error);\n        });\n      } else {\n        defer.reject(error);\n      }\n    }).done(function (data) {\n      defer.resolve(data);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n      *   Start process in BizAgi\r\n      */\n  actionCreateCase: function actionCreateCase(params) {\n    var self = this;\n    var data = {\n      processId: typeof params.idProcess !== \"undefined\" ? params.idProcess : params.guidProcess };\n\n    // When the proccess is a shortcut it does not have mapping and parentCaseId,\n    // but when the process is not a shortcut, it has a context, so it comes with mapping and parentCaseId\n    if (typeof params.parentCaseId !== \"undefined\") {\n      data.parentCaseId = params.parentCaseId;\n    }\n    if (typeof params.mapping !== \"undefined\") {\n      data.entityMapping = params.mapping ? JSON.stringify(params.mapping) : {};\n    }\n\n    return $.create({\n      url: self.serviceLocator.getUrl(\"handler-execute-action-start\"),\n      data: data,\n      serviceType: \"STARTPROCESS\" });\n\n  },\n\n  /**\r\n      * Get the first parent plan on not contextualizeds plans\r\n      * */\n  getFirstParentPlan: function getFirstParentPlan(data) {\n    var self = this,\n    url = self.serviceLocator.getUrl(\"project-plan-first-parent-plan\");\n    var defer = $.Deferred();\n    $.when($.read({\n      url: url,\n      data: data,\n      dataType: \"json\" })).\n    done(function (response) {\n      defer.resolve(response);\n    }).fail(function () {\n      defer.resolve(null);\n    });\n    return defer.promise();\n  },\n  /*\r\n      *   Search cases with radNumber\r\n      */\n  searchCases: function searchCases(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n\n    data['h_action'] = 'SEARCHCASES';\n    data['onlyUserCases'] = false;\n    data['active'] = false;\n    data['page'] = params.page || 1;\n    if (params.radNumber)\n    data['radNumber'] = $.trim(params.radNumber);\n    data['pageSize'] = params.pageSize || self.pageSize;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('query-handler'),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n  /*\r\n      *   Search cases with radNumber\r\n      */\n  queryCases: function queryCases(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n\n    data.h_action = 'QUERYCASES';\n    data.onlyUserCases = params.onlyUserCases || false;\n    data.active = params.active && true;\n    data.page = params.page || 1;\n    if (params.radNumber)\n    data.radNumber = $.trim(params.radNumber);\n    data.pageSize = params.pageSize || self.pageSize;\n\n    data.filter = params.filter;\n    data.outputxpath = params.outputxpath;\n\n    // data for sort columns\n    data.orderFieldName = params.orderFieldName || '';\n    data.orderType = params.orderType == 'asc' || params.orderType == 1 ? 1 : 0;\n    data.order = params.order || '';\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('query-handler'),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n  /*\r\n      *   Search entities service\r\n      */\n  queryEntities: function queryEntities(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n\n    data.h_action = 'QUERYENTITIES';\n    data.page = params.page || 1;\n    data.pageSize = self.Class.ENTITIES_QUERY_PAGE_SIZE;\n\n    // Query parameters\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + 'idEnt'] = params.idEntity;\n    data.filter = params.filter;\n    data.outputxpath = params.outputxpath;\n\n    // Data to sort columns\n    data.orderFieldName = params.orderFieldName || '';\n    data.orderType = params.orderType || '';\n    data.order = params.order || '';\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('query-handler'),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n  /*\r\n      *  Get Menu Authorization\r\n      */\n  getMenuAuthorization: function getMenuAuthorization() {\n    var self = this;\n\n    return $.read(\n    self.serviceLocator.getUrl('authorization-handler-getMenuAuthorization'));\n\n  },\n  /*\r\n      *  The user have permissions to excecute this Case\r\n      */\n  isCaseCreationAuthorized: function isCaseCreationAuthorized(params) {\n    var self = this;\n    var urlSend = self.serviceLocator.getUrl('authorization-handler-isCaseCreationAuthorized');\n    urlSend = urlSend.replace('{0}', params.idWfClass || '');\n\n    return $.read({\n      url: urlSend //,\n      //data: { 'idWfClass': params.idWfClass }\n      //data: { 'userName': BIZAGI_USER, 'password': BIZAGI_PASSWORD, 'domain': BIZAGI_DOMAIN }\n    });\n  },\n  /*\r\n      *   Returns the execution state of an async workitem\r\n      */\n  getAsynchExecutionState: function getAsynchExecutionState(params) {\n    var self = this;\n    var idAsynchWorkitem;\n    params = params || {};\n\n    if (params.idCase != -1) {\n      return $.read({\n        url: self.serviceLocator.getUrl(\"case-handler-getAsynchExecutionState\"),\n        data: {\n          idCase: params.idCase,\n          idAsynchWorkitem: params.idAsynchWorkitem },\n\n        serviceType: \"ASYNCHEXECUTION\" });\n\n    } else {\n      return $.read({\n        url: self.serviceLocator.getUrl(\"case-handler-getAsynchExecutionState\"),\n        data: {\n          idCase: params.idCase,\n          idAsynchWorkitem: params.idAsynchWorkitem },\n\n        serviceType: \"ASYNCHEXECUTION\" });\n\n    }\n  },\n\n  /*\r\n      *  Returns the supported log types\r\n      */\n  supportedLogTypes: function supportedLogTypes() {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl('case-handler-supportedLogTypes'));\n  },\n  /*\r\n      *   Returns the Activity Log for a case\r\n      */\n  getActivityLog: function getActivityLog(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl('case-handler-getActivityLog'), {\n      idCase: params.idCase,\n      orden: params.sort || 0,\n      idActualPage: params.idActualPage || 1,\n      pageSize: params.pageSize || 10 }).\n\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Returns the Activity Detail Log for a case\r\n      */\n  getActivityDetailLog: function getActivityDetailLog(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idWorkItemFrom\n    return $.read(\n    self.serviceLocator.getUrl('case-handler-getActivityDetailLog'), {\n      idCase: params.idCase,\n      idWorkItemFrom: params.idWorkItemFrom,\n      idActualPage: params.idActualPage || 1,\n      pageSize: params.pageSize || 10 }).\n\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Returns the Entity Log for a case\r\n      */\n  getEntityLog: function getEntityLog(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl('case-handler-getEntityLog'), {\n      idCase: params.idCase,\n      orden: params.sort || 0,\n      idActualPage: params.idActualPage || 1,\n      pageSize: params.pageSize || 10 }).\n\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Returns the Entity Detail Log for a case\r\n      */\n  getEntityDetailLog: function getEntityDetailLog(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl('case-handler-getEntityDetailLog'), {\n      idCase: params.idCase,\n      idEntity: params.idEntity || -1,\n      userFullName: params.userFullName || '',\n      attribDisplayName: params.attribDisplayName || '',\n      idActualPage: params.idActualPage || 1,\n      pageSize: params.pageSize || 10 }).\n\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Returns the User Log for a case\r\n      */\n  getUserLog: function getUserLog(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl('case-handler-getUserLog'), {\n      idCase: params.idCase,\n      orden: params.sort || 0,\n      idActualPage: params.idActualPage || 1,\n      pageSize: params.pageSize || 10 }).\n\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Returns the User Detail Log for a case\r\n      */\n  getUserDetailLog: function getUserDetailLog(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase , idUser\n    return $.read(\n    self.serviceLocator.getUrl('case-handler-getUserDetailLog'), {\n      idCase: params.idCase,\n      idUser: params.idUser,\n      entDisplayName: params.entDisplayName || '',\n      attribDisplayName: params.attribDisplayName || '',\n      idActualPage: params.idActualPage || 1,\n      pageSize: params.pageSize || 10 }).\n\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Returns the Admin Log for a case\r\n      */\n  getAdminLog: function getAdminLog(params) {\n    var self = this;\n\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl('case-handler-getAdminLog'), {\n      idCase: params.idCase,\n      orden: params.sort || 0,\n      idActualPage: params.idActualPage || 1,\n      pageSize: params.pageSize || 10 }).\n\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Adds a New Favorite\r\n      */\n  addFavorite: function addFavorite(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n\n    return $.create(\n    self.serviceLocator.getUrl('favorites-handler-saveFavorite'), {\n      idObject: params.idObject,\n      favoriteType: params.favoriteType }).\n\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n  /*\r\n      *   Favorites service\r\n      */\n  delFavorite: function delFavorite(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n\n    // Required params: guidFavorite\n    return $.destroy(\n    self.serviceLocator.getUrl('favorites-handler-deleteFavorite'), {\n      guidFavorite: params.idObject }).\n\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n  // Data Transformations for Summary Widget\n  /*\r\n   * Render Assigness\r\n   */\n  summaryAssigness: function summaryAssigness(options) {\n    var self = this;\n    var def = new $.Deferred();\n    var idCase = options.idCase || \"\";\n\n    $.when(\n    self.getCaseAssignees({\n      idCase: idCase })).\n\n    done(function (baseAssignees) {\n\n      var assignees = baseAssignees.assignees || [];\n      var assigneesLength = assignees.length;\n      var assigneesFix = {\n        showAssignees: bizagi.override.showAssignees && assignees.length > 0 ? true : false,\n        assignees: {},\n        events: \"\",\n        activities: \"\" };\n\n\n      var assigneesEvents = \"\";\n      var assigneesActivities = \"\";\n      var assigneesEventsList = [];\n      var assigneesActivitiesList = [];\n\n      for (var i = 0; i < assigneesLength; i++) {\n        if (bizagi.util.parseBoolean(assignees[i].isEvent)) {\n          if (assigneesEventsList.indexOf(assignees[i].idUser) == -1) {\n            assigneesEventsList.push(assignees[i].idUser);\n            assigneesEvents += assignees[i].Name + \", \";\n          }\n        } else {\n          if (assigneesActivitiesList.indexOf(assignees[i].idUser) == -1) {\n            assigneesActivitiesList.push(assignees[i].idUser);\n            assigneesActivities += assignees[i].Name + \", \";\n          }\n        }\n      }\n      //join assignees to event and activities\n      assigneesFix.events = assigneesEvents.substring(0, assigneesEvents.length - 2);\n      assigneesFix.activities = assigneesActivities.substring(0, assigneesActivities.length - 2);\n\n\n      def.resolve(assigneesFix);\n    });\n\n    return def.promise();\n  },\n  /*\r\n      * Render Assigness\r\n      */\n  summarySubProcess: function summarySubProcess(options) {\n    var self = this;\n    var def = $.Deferred();\n    var idCase = options.idCase || '';\n\n    $.when(\n    self.getCaseSubprocesses({\n      idCase: idCase })).\n\n    done(function (subprocess) {\n      subprocess['showSubProcess'] = subprocess['subProcesses'].length >= 1 ? true : false;\n      subprocess['showSubProcesColumns'] = subprocess['CustFields'][0] !== undefined && subprocess['CustFields'][0][0].length >= 1 ? true : false;\n\n      // Prepare json for subprocess\n      if (subprocess['showSubProcesColumns']) {\n        subprocess['subProcPersonalized'] = {};\n        var len;\n        for (var n = 0; n < subprocess['CustFields'].length; n++) {\n          len = 0;\n          for (var i = 0; i < subprocess['subProcesses'].length; i++) {\n            if (subprocess['subProcesses'][i]['idCustData'] == n) {\n              subprocess['subProcPersonalized'][n] = subprocess['subProcPersonalized'][n] || {};\n              subprocess['subProcPersonalized'][n]['subProcesses'] = subprocess['subProcPersonalized'][n]['subProcesses'] || {};\n              subprocess['subProcPersonalized'][n]['subProcesses'][len++] = subprocess['subProcesses'][i];\n            }\n          }\n\n          if (subprocess[\"subProcesses\"][n][\"idCustData\"] != -1 && subprocess[\"subProcPersonalized\"][n] != undefined) {\n            subprocess[\"subProcPersonalized\"][n][\"CustFields\"] = subprocess[\"CustFields\"][n];\n            subprocess[\"subProcPersonalized\"][n][\"idCase\"] = subprocess[\"idCase\"];\n          }\n        }\n      }\n\n      def.resolve(subprocess);\n    });\n\n    return def.promise();\n  },\n  /*\r\n      * Render Case Events\r\n      */\n  summaryCaseEvents: function summaryCaseEvents(options) {\n    var self = this;\n    var def = $.Deferred();\n    var idCase = options.idCase || '';\n\n    $.when(\n    self.getCaseEvents({\n      idCase: idCase })).\n\n    done(function (events) {\n      events['showEvents'] = events['events'].length >= 1 ? true : false;\n      def.resolve(events);\n    }).fail(function (error) {\n      def.reject();\n    });\n\n    return def.promise();\n  },\n  /*\r\n      * Render Details\r\n      * @param idWorkitem\r\n      */\n  summaryCaseDetails: function summaryCaseDetails(options) {\n    var self = this;\n    var def = new $.Deferred();\n    var idWorkitem = options.idWorkitem || 0;\n\n    $.when(\n    self.getCaseSummaryDataContent(options)).\n    done(function (data) {\n      data.currentState = data.currentState || [];\n      var dataCurrentStateLength = data.currentState.length;\n      // Show or hide tabs\n      data.showEvents = data.countEvents >= 1 ? true : false;\n      data.showParentProcess = data.idParentCase >= 1 ? true : false;\n      data.parentProcess = {\n        \"displayName\": data.parentDisplayName,\n        \"idCase\": data.idParentCase };\n\n\n      //data.isOpen: if request have onlyUserWorkItems = true, so verify workitems of current user\n      //data.isClosed: if request have onlyUserWorkItems = false, not verify workitems of current user\n      data.isClosedForAllUsers = bizagi.util.parseBoolean(data.isClosed);\n      data.isClosed = bizagi.util.parseBoolean(data.isOpen) ? false : true;\n      data.showAssignees = bizagi.override.showAssignees && data.countAssigness > 0 ? true : false;\n      data.showSubProcess = data.countSubProcesses > 0 ? true : false;\n      data.showForm = bizagi.util.parseBoolean(data.hasGlobalForm) ? true : false;\n      data.allowsReassign = \"false\";\n\n      for (i = 0; i < dataCurrentStateLength; i++) {\n        if (data.currentState[i].idWorkItem == idWorkitem) {\n          data.allowsReassign = data.currentState[i].allowsReassign;\n        }\n      }\n\n      // edit original data, no show events in activities tab\n      var currentStateTypes = [];\n      var m = 0; // counter for new activities array\n      for (i = 0; i < dataCurrentStateLength; i++) {\n        if (!bizagi.util.parseBoolean(data.currentState[i].isEvent) && bizagi.util.parseBoolean(data.\n        currentState[i].assignToCurrentUser) && data.currentState[i].idWorkItem != idWorkitem) {\n          currentStateTypes[m++] = data.currentState[i];\n        }\n      }\n\n      data.currentStateTypes = currentStateTypes;\n      data.showActivities = currentStateTypes.length > 0 ? true : false;\n\n      def.resolve(data);\n    });\n\n    return def.promise();\n  },\n\n  releaseActivity: function releaseActivity(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"case-handler-releaseActivity\");\n    url = url.replace(\"{idCase}\", params.idCase);\n    var data = {};\n    // Define data\n    if (params) {\n      data[\"idCase\"] = params.idCase;\n      data[\"idWorkItem\"] = params.idWorkItem;\n    }\n    // Call ajax and returns promise\n    return $.ajax({\n      url: url,\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n\n  },\n  /**\r\n      *\r\n      * Segment Activities for summary in render module\r\n      * @param options {data,idWorkItem}\r\n      */\n  summaryActivities: function summaryActivities(options) {\n    var activities = {};\n    var data = options['data'] || {};\n    var idWorkItem = idWorkItem || options['idWorkitem'] || 0;\n\n    try {\n      activities['showActivities'] = data['currentStateTypes'].length >= 1 ? true : false;\n      activities['currentState'] = data['currentStateTypes'];\n      activities['globalIdWorkitem'] = idWorkItem;\n      activities['creationDate'] = data['creationDate'];\n    } catch (e) {}\n\n    return activities;\n  },\n  /**\r\n      *  Get json from cases service\r\n      */\n  getCaseSummaryDataContent: function getCaseSummaryDataContent(options) {\n    var self = this;\n    var promise = new $.Deferred();\n\n    $.when(self.getCaseSummary(options)).\n    done(function (data) {\n      // Completes data\n      data.taskState = self.icoTaskState;\n      data.process = data.process ? data.process : \"\";\n\n      if (data.createdBy) {\n        data.createdByName = data.createdBy.Name;\n        data.createdByUserName = data.createdBy.userName;\n        data.caseDescription = data.caseDescription == \"\" ? \"\" : data.caseDescription;\n        data.processPath = data.processPath.replace(/\\//g, \" > \") + data.process;\n        data.showWorkOnIt = true;\n      }\n\n      // return json content\n      promise.resolve(data);\n    });\n\n    return promise.promise();\n  },\n  /**\r\n      * Definition service for bizagi smart folders\r\n      *\r\n      * @param id optional with filter purpose\r\n      */\n  getSmartFolders: function getSmartFolders(id) {\n    var self = this;\n    var data = {};\n\n    data.idFolder = id || '';\n    // Call read and returns promise\n    return $.read(self.serviceLocator.getUrl('folders-handler-getUserQueries'), data).pipe(function (response) {\n      if (id == -1 || id == '') {\n        return response;\n      } else {\n        return self.searchFolders(id, response) || [];\n      }\n    });\n  },\n  /**\r\n      * Delete smart folder\r\n      * @param options {idSmartFolder,idUser}\r\n      */\n  deleteSmartFolder: function deleteSmartFolder(options) {\n    var self = this;\n    var data = {};\n\n    data.action = '6';\n    options = options || {};\n\n    data.idSmartFolder = options.idSmartFolder || '';\n    data.idUser = options.idUser || '';\n\n    return $.destroy(self.serviceLocator.getUrl('folders-associate-deleteSmartFolder'), data);\n  },\n  /**\r\n      * Definition service for bizagi folders\r\n      *\r\n      * @param id optional with filter purpose\r\n      */\n  getFolders: function getFolders(id) {\n    var self = this;\n    var data = {};\n\n    data.action = 'getUserFolder';\n    data.idFolder = id || '';\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('folders-handler'),\n      type: 'POST',\n      data: data,\n      dataType: 'json' }).\n    pipe(function (response) {\n      if (id == '') {\n        var folders = {\n          folders: [{\n            name: bizagi.localization.getResource('workportal-widget-folders'),\n            id: '-1',\n            idParent: 0,\n            childs: response }] };\n\n\n        return folders;\n      } else if (id == -1) {\n        return response;\n      } else {\n        return self.searchFolders(id, response) || [];\n      }\n    });\n  },\n  searchFolders: function searchFolders(idFolder, data) {\n    for (var i = 0; i < data.folders.length; i++) {\n      var value = data.folders[i];\n      if (value.id == idFolder) {\n        return data.folders[i]['childs'];\n        break;\n      }\n    }\n    return undefined;\n  },\n  getCasesByFolder: function getCasesByFolder(query) {\n    query = query || '';\n\n    return $.ajax({\n      cache: true,\n      url: 'RestServices/' + query,\n      type: 'GET',\n      dataType: 'json' });\n\n  },\n  makeFolder: function makeFolder(options) {\n    var self = this;\n    var data = {};\n\n    data.action = 'CreateUpdateFolder';\n    data.folderName = options.folderName || 'No Name';\n\n    // Make folder under subcategory\n    if (options.idParentFolder != undefined && options.idParentFolder > 1) {\n      data.idParentFolder = options.idParentFolder;\n    }\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl('folders-handler'),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n  updateFolder: function updateFolder(options) {\n    var self = this;\n    var data = {};\n    options = options || {};\n\n    data.action = 'CreateUpdateFolder';\n    // Define idFolder\n    data.idFolder = options.idFolder || '';\n\n    // Update name\n    if (options.folderName) {\n      data.folderName = options.folderName;\n    }\n\n    // Update path\n    if (options.idParentFolder) {\n      data.idParentFolder = options.idParentFolder;\n    }\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl('folders-handler'),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n  /**\r\n      * Associate cases to folders\r\n      *\r\n      * @param options {idcase,idCustomFolder}\r\n      */\n  associateCaseToFolder: function associateCaseToFolder(options) {\n    var self = this;\n    var data = {};\n\n    data.action = '4';\n    options = options || {};\n\n    data.idCase = options.idCase || '';\n    data.idCustomFolder = options.idCustomFolder;\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl('folders-associate'),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n  /*\r\n      * Dissasociate cases to folder\r\n      *\r\n      * @param options {idFolder, idCase}\r\n      */\n  dissasociateCaseFromFolder: function dissasociateCaseFromFolder(options) {\n    var self = this;\n    var data = {};\n\n    data.action = 'DeleteCaseFromFolder';\n    options = options || {};\n\n    data.idFolder = options.idFolder;\n    data.idCase = options.idCase;\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl('folders-handler'),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n  /**\r\n      * Delete folder\r\n      * @param options {idCustomFolder}\r\n      */\n  deleteFolder: function deleteFolder(options) {\n    var self = this;\n    var data = {};\n\n    data.action = '5';\n    options = options || {};\n\n    data.idCustomFolder = options.idCustomFolder || '';\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl('folders-associate'),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n  /**\r\n      * Gets a file binary from the server\r\n      * @param options {fileId}\r\n      */\n  getFile: function getFile(options) {\n    var self = this;\n    var data = {};\n    var url = this.serviceLocator.getUrl('file-handler');\n    options = options || {};\n\n    data.action = 'getFileContent';\n    data.uploadId = options.uploadId || '';\n    data.entityId = options.entityId || '';\n    data.entityKey = options.entityKey || '';\n\n    return bizagi.services.ajax.pathToBase + url + '?' + jQuery.param(data);\n  },\n  /**\r\n      * Get Comments per case\r\n      * @param params {idCase=int&idColorCategory=int&pag=int&pagSize=int}\r\n      * @return json\r\n      */\n  getComments: function getComments(params) {\n    //params.idCase = params.idCase || 0;\n    var self = this;\n\n    params = params || {};\n\n    return $.read(encodeURI(self.serviceLocator.getUrl('MessageHandler-GetComments')), {\n      idCase: params.idCase || '',\n      idColorCategory: typeof params.idColorCategory == 'number' ? params.idColorCategory : '',\n      pag: params.pag || 1,\n      pagSize: params.pagSize || 10 }).\n\n    pipe(function (result) {\n      var def = new $.Deferred();\n      var picture = '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';\n      if (!result.comments) {\n        result.comments = [];\n      } else {\n        // Add CategoryColor for each comment\n        $.each(result.comments, function (key, value) {\n          if (!result.comments[key].hasOwnProperty('CategoryColor')) {\n            result.comments[key]['CategoryColor'] = '';\n          }\n        });\n      }\n      if (!result.users) {\n        $.when(self.getCurrentUser()).\n        done(function (user) {\n          result.users = [];\n          result.users.push({\n            Id: user.idUser,\n            Name: user.user,\n            DisplayName: user.userName,\n            Picture: picture });\n\n        });\n      } else {\n        $.each(result.users, function (key, value) {\n          // Add picture to all users\n          result.users[key]['Picture'] = result.users[key]['Picture'] === '' ? picture : result.users[key]['Picture'];\n        });\n      }\n      def.resolve(result);\n      return def.promise();\n    });\n  },\n  /**\r\n      * This function allow create new comment into the activity\r\n      *\r\n      * @param options {idCase,comment}\r\n      * @return json\r\n      */\n  makeNewComment: function makeNewComment(options) {\n    var self = this;\n    var picture = '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';\n    return $.create(self.serviceLocator.getUrl('MessageHandler-NewComment'), {\n      idCase: options.idCase || '',\n      comment: options.comment.replace(/\\n/g, '<br>') || '' }).\n\n    pipe(function (result) {\n      if (result.comments) {\n        var comments = [result.comments];\n        $.each(comments, function (key, value) {\n          // Add CategoryColor for each comment\n          comments[key]['CategoryColor'] = '';\n        });\n        result.comments = comments;\n      }\n\n      if (result.users) {\n        var users = [result.users];\n        $.each(users, function (key, value) {\n          // Add picture to all users\n          users[key]['Picture'] = users[key]['Picture'] == '' ? picture : users[key]['Picture'];\n        });\n        result.users = users;\n      }\n\n      return result;\n    });\n  },\n  /**\r\n      * This function allow create new replies into the comment\r\n      *\r\n      * @param options {idCase=int&idComment=int&comment=string}\r\n      * @return json\r\n      */\n  makeNewReply: function makeNewReply(options) {\n    var self = this;\n    var picture = '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';\n\n    options = options || {};\n\n    return $.create(self.serviceLocator.getUrl('MessageHandler-ReplyComment'), {\n      idCase: options.idCase || '',\n      idComment: options.idComment || '',\n      comment: options.comment.replace(/\\n/g, '<br>') || '' }).\n\n    pipe(function (result) {\n      if (result.comments) {\n        result.Replies = [result.comments];\n      }\n\n      if (result.users) {\n        var users = [result.users];\n        $.each(users, function (key, value) {\n          // Add picture to all users\n          users[key]['Picture'] = users[key]['Picture'] == '' ? picture : users[key]['Picture'];\n        });\n        result.users = users;\n      }\n\n      return result;\n    });\n  },\n  /**\r\n      * Remove one comment from the list in mobiles\r\n      *\r\n      * @param options {content:{guid:\"...\"},attachmentsToDelete:[\"...\", \"...\", ...]};\r\n      * @return json {action:true|false, message:'if error, explain why'}\r\n      */\n  removeMobileComment: function removeMobileComment(options) {\n    var self = this;\n    var url = self.serviceLocator.getUrl('remove-comment');\n\n    options = options || {};\n\n    return $.destroy({\n      url: url,\n      data: JSON.stringify(options),\n      dataType: \"json\",\n      contentType: \"application/json\" }).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  /**\r\n      * Remove one comment from the list\r\n      *\r\n      * @param options {idCase=int&idComment=int}\r\n      * @return json {action:true|false, message:'if error, explain why'}\r\n      */\n  removeComment: function removeComment(options) {\n    var self = this;\n\n    options = options || {};\n\n    return $.destroy(self.serviceLocator.getUrl('MessageHandler-RemoveComment'), {\n      idCase: options.idCase || '',\n      idComment: options.idComment || '' });\n\n  },\n  /**\r\n      * Remove one replies from the list\r\n      *\r\n      * @param options {idCase=int&idComment=int&idReply=int}\r\n      * @return json {action:true|false, message:'if error, explain why'}\r\n      */\n  removeReply: function removeReply(options) {\n    var self = this;\n\n    options = options || {};\n\n    return $.destroy(self.serviceLocator.getUrl('MessageHandler-RemoveReply'), {\n      idCase: options.idCase || '',\n      idComment: options.idComment || '',\n      idReply: options.idReply || '' });\n\n\n  },\n  /**\r\n      * Rename category\r\n      *\r\n      * @param options {idColorCategory=int&colorName=string}\r\n      * @return json\r\n      */\n  renameCommentCategory: function renameCommentCategory(options) {\n    var self = this;\n\n    options = options || {};\n\n    return $.update(self.serviceLocator.getUrl('MessageHandler-RenameCategoryColor'), {\n      idColorCategory: options.idColorCategory >= 0 ? options.idColorCategory : '',\n      colorName: options.colorName || '' });\n\n  },\n  /**\r\n      * @param options {idCase=int&idComment=int&idColorCategory={0-5}}\r\n      * return json\r\n      */\n  setCommentCategory: function setCommentCategory(options) {\n    var self = this;\n\n    options = options || {};\n\n    return $.update(self.serviceLocator.getUrl('MessageHandler-SetCategoryToComment'), {\n      idCase: options.idCase || '',\n      idComment: options.idComment || '',\n      idColorCategory: typeof options.idColorCategory == 'number' ? options.idColorCategory : '' });\n\n  },\n  /**\r\n      * @return json Definition of all categories of message\r\n      */\n  getCommentsCategories: function getCommentsCategories() {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl('MessageHandler-GetCategoryColors')).\n    pipe(function (result) {\n      if (result.length > 1 && result[0]['categories']) {\n        return result[0];\n      } else {\n        return result;\n      }\n    });\n  },\n  /**\r\n      * This service can be define number of new comments based on idComment\r\n      * @param json  options {idCase=int, idLastComment=int}\r\n      * @return int\r\n      */\n  getNewComments: function getNewComments(options) {\n    var self = this;\n\n    options = options || {};\n\n    return $.read(encodeURI(self.serviceLocator.getUrl('MessageHandler-CountNewComments')), {\n      idCase: options.idCase || 0,\n      idComment: options.idComment || 0 });\n\n  },\n  /**\r\n      * Get all analisys queries\r\n      * @return json\r\n      */\n  getAnalisysQueries: function getAnalisysQueries() {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl('bamAnalytics-handler-getAnalisysQueries'));\n  },\n  /**\r\n      * Update name and comment\r\n      *\r\n      * @param options json {queryName,queryDescription,idQuery }\r\n      * @return json  {response:true}\r\n      */\n  updateQueries: function updateQueries(options) {\n    var self = this;\n\n    return $.update(self.serviceLocator.getUrl('bamAnalytics-handler-updateQuery'), {\n      idQuery: options.idQuery >= 0 ? options.idQuery : '',\n      queryName: options.queryName || '',\n      queryDescription: options.queryDescription || '' });\n\n  },\n  /**\r\n      * Delete query\r\n      *\r\n      * @param queryId integer\r\n      * @return json  {response:true}\r\n      */\n  deleteQueries: function deleteQueries(queryId) {\n    var self = this;\n    var data = {};\n\n    data.action = '1612';\n    data.QueryId = queryId || '';\n\n    return $.destroy(self.serviceLocator.getUrl('reports-handler-deleteQueries'), data);\n  },\n\n  /**\r\n      * Get bizagi configuration\r\n      * @param {Function}   type    callback function when the file load is succed\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getConfiguration: function getConfiguration() {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"authenticationConfig\");\n\n    return $.read(url);\n  },\n\n  /**\r\n      * Logout Service\r\n      */\n  logout: function logout() {\n    var self = this;\n    // Remove session storage of authentication data\n    sessionStorage.removeItem('bizagiAuthentication');\n\n    //Call to the restfull service for domain list\n    try {\n      var javaLogout = $.create(self.serviceLocator.getUrl('logout'));\n\n      $.when(javaLogout).done(function () {\n        location.reload();\n      }).fail(function () {\n        bizagi.log('Error logging out');\n      });\n    } catch (e) {}\n  },\n\n  /**\r\n      * Logout from different types of services\r\n      * This method can reload the page after calling the logout service required\r\n      */\n  logoutMobile: function logoutMobile() {\n    var self = this;\n    var logoutData = { sourceLogout: \"user\" };\n\n    // Remove session storage of authentication data\n    sessionStorage.removeItem(\"bizagiAuthentication\");\n\n    // Remove last process inbox\n    bizagi.util.removeLastProcessInbox();\n\n    // Hybrid will use normal system\n    if (bizagi.util.isCordovaSupported()) {\n      var url = self.serviceLocator.getUrl(\"logout\");\n      return $.create(url);\n    } else {\n      // Call to the restfull service for domain list\n      try {\n\n        $.when(self.getConfiguration()).done(function (data) {\n          if (data.redirectErrorPage) {\n            window.location.href = data.redirectErrorPage;\n            return;\n          }\n\n          var authenticationType = data.authenticationType;\n          switch (authenticationType) {\n            case \"Federate\":\n              var logOffURL = data.logOffURL;\n              var federationLogoutBindingProtocol = data.federationLogoutBindingProtocol;\n              var authenticationSubType = data.authenticationSubType;\n              if (authenticationSubType === 'WSFederated') {\n                $.when($.create(self.serviceLocator.getUrl(\"logout\"), logoutData)).done(function () {\n                  location.href = logOffURL;\n                }).fail(function () {\n                  bizagi.log(\"Error logging out\");\n                }).always(function () {\n                  location.href = data.logOffURL;\n                });\n              } else\n              if (authenticationSubType === 'Saml') {\n                var param = {};\n                $.when($.read(self.serviceLocator.getUrl(\"FederateLogoffUrl\"), param)).done(function (res) {\n                  if (res.federateLogoffUrl) {\n                    logOffURL = res.federateLogoffUrl;\n                  }\n\n                  $.when($.create(self.serviceLocator.getUrl(\"logout\"), logoutData)).done(function () {\n                    if (federationLogoutBindingProtocol === 'POST') {\n                      window.document.open('text/html');\n                      window.document.write(logOffURL);\n                      window.document.close();\n                    } else\n                    {\n                      window.location.href = logOffURL;\n                    }\n                  }).fail(function () {\n                    bizagi.log(\"Error logging out\");\n                  }).always(function () {\n                  });\n\n                }).fail(function () {\n                  bizagi.log(\"Error logging out\");\n                }).always(function () {\n                });\n              }\n              break;\n            case \"SAML\":\n              loader.nativeAjax(loader.getPathUrl(self.serviceLocator.getUrl(\"logout\"), logoutData),\n              function (response) {\n                var jsonResponse = JSON.parse(response.responseText);\n\n                if (jsonResponse.logout === true) {\n                  if (typeof jsonResponse.samlUrlRedirect != \"undefined\") {\n                    var url = decodeURI(jsonResponse.samlUrlRedirect);\n                    var iframe = document.createElement(\"iframe\");\n\n                    document.getElementsByTagName(\"body\")[0].appendChild(iframe);\n\n                    $(iframe).on(\"load\", function () {\n                      var iframeContent = bizagi.util.isIE8() ?\n                      $(this.contentWindow.document.body) :\n                      $(this.contentWindow.eval(\"document.body\"));\n                      var rawResponse = iframeContent.text();\n\n                      location.reload();\n                    });\n\n                    iframe.src = url;\n\n                  } else {\n                    location.reload();\n                  }\n                } else {\n                  bizagi.log(\"Error logging out\");\n                }\n              });\n              break;\n            case \"OAuth2\":\n              $.when($.create(self.serviceLocator.getUrl(\"logout\"), logoutData)).done(function () {\n                $.when($.read(self.serviceLocator.getUrl(\"oauth2AuthenticationConfig\"))).\n                done(function (response) {\n                  if (response.logoutUrl && response.logoutUrl != \"\") {\n                    var logoutUrl = response.logoutUrl;\n                    var callbackUrl = response.homeUrl;\n\n                    logoutUrl = logoutUrl.replace(/post_logout_redirect_uri=[^&]*/,\n                    \"post_logout_redirect_uri=\" + callbackUrl);\n                    location.href = logoutUrl;\n                  } else {\n                    location.reload();\n                  }\n\n                }).fail(function () {\n                  bizagi.log(\"Error logging out\");\n                });\n              }).fail(function () {\n                bizagi.log(\"Error logging out\");\n              });\n              break;\n            default:\n              //Normal\n              $.when($.create(self.serviceLocator.getUrl(\"logout\"), logoutData)).\n              done(function () {\n                window.location = bizagi.services.ajax.loginPage;\n              }).fail(function () {\n                bizagi.log(\"Error logging out\");\n              });\n              break;}\n\n        }).fail(function (message) {\n          bizagi.log(message);\n        });\n      } catch (e) {\n        bizagi.log(e);\n      }\n    }\n  },\n\n  /**\r\n      * Services for Massive Activity Assignment\r\n      */\n\n  /*\r\n          * Obtain the organization info, such as roles, skills or locations. One of this options\r\n          * must be specified as a parameter\r\n          * @param object  {objectType=Roles|Skills|Locations}\r\n          * @return json\r\n          */\n  getOrganizationInfo: function getOrganizationInfo(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n\n    data['objectType'] = params;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('massive-activity-assignments-getOrganizationInfo'),\n      data: data,\n      type: 'GET',\n      dataType: 'json' });\n\n  },\n  /*\r\n      *   Get Cases By Organization, using parameters suchs as roles, skills and locations\r\n      * @param object  {roles=(string),roles=(skills), locations=(string)}\r\n      * @return json\r\n      */\n  getCasesByOrganization: function getCasesByOrganization(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n\n\n    data['roles'] = params.roles ? '[' + params.roles.toString() + ']' : '[]';\n\n    data['skills'] = params.skills ? '[' + params.skills.toString() + ']' : '[]';\n\n    data['locations'] = params.locations ? '[' + params.locations.toString() + ']' : '[]';\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('massive-activity-assignments-getCasesByOrganization'),\n      data: data,\n      type: 'GET',\n      dataType: 'json' });\n\n  },\n  /*\r\n      *   Get Cases By Organization, using parameters suchs as roles, skills and locations\r\n      * @param object  {user=[array], roles=(string),roles=(skills), locations=(string)}\r\n      */\n  reassignCases: function reassignCases(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n\n    data['users'] = params.user ? '[' + params.user.toString() + ']' : '[]';\n    data['roles'] = params.roles ? '[' + params.roles.toString() + ']' : '[]';\n    data['skills'] = params.skills ? '[' + params.skills.toString() + ']' : '[]';\n    data['locations'] = params.locations ? '[' + params.locations.toString() + ']' : '[]';\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('massive-activity-assignments-reassignCases'),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n  /*\r\n      * Search the users inside the Organization, using parameters suchs as userName, full name, domain, roles, skills and locations\r\n      * All parameters are optional\r\n      * @param object  {userName=(string), fullName=(string), domain=(string), roles=(string),roles=(skills), locations=(string)}\r\n      * @return json\r\n      */\n  searchUsers: function searchUsers(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n\n    data['userName'] = params.userName || '';\n\n    data['fullName'] = params.fullName || '';\n\n    data['domain'] = params.domain || '';\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('massive-activity-assignments-searchUsers'),\n      data: data,\n      type: 'GET',\n      dataType: 'json' });\n\n  },\n  /**\r\n      * Get json with bizagi domains list\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getDomainList: function getDomainList() {\n    var self = this;\n    var url = self.serviceLocator.getUrl('domains');\n\n    return $.read(url);\n  },\n  /**\r\n      * Services for Asynchronous ECM Upload\r\n      */\n\n  /* Get the ECM Pending Scheduled Jobs\r\n          * @return {deferred} ajax object with JSON content\r\n          */\n  getEcmAllScheduledJobs: function getEcmAllScheduledJobs() {\n    var self = this;\n\n    // Define data\n    var data = {};\n    data['action'] = 'getEcmAllScheduledJobs';\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl('async-ecm-upload-baseService'), data);\n  },\n  /* Retries an especific ECM Pending Scheduled Job\r\n      * @param object  {jobId=(string)} //The id of the job wich is going to be retried\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  retryECMPendingScheduledJob: function retryECMPendingScheduledJob(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    data['action'] = 'retryECMPendingScheduledJob';\n    data['idJob'] = params;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl('async-ecm-upload-baseService'), data);\n  },\n  /*\r\n      *   Returns the current workportal version\r\n      */\n  getWorkPortalVersion: function getWorkPortalVersion() {\n    var self = this;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('WorkPortalVersion'),\n      type: 'GET',\n      dataType: 'json' }).\n    always(function (data) {\n      // Compatibility with java version\n      data = data || {};\n\n      if (data.version == '') {\n        // Take the build version\n        data.version = bizagi.loader.productBuild || '';\n      }\n      return data;\n    });\n  },\n  /*\r\n      *   Returns the combo's data to authentication log depending of the params\r\n      */\n  getAuthenticationLogData: function getAuthenticationLogData(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var url = '';\n\n    if (params['dataType'] == 'domains') {\n      url = 'admin-getAuthenticationDomains';\n    } else if (params['dataType'] == 'events') {\n      url = 'admin-getAuthenticationEventsTypes';\n    } else {\n      url = 'admin-getAuthenticationEventSubTypes';\n    }\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(url),\n      data: data,\n      type: 'GET',\n      dataType: 'json' });\n\n  },\n  /*\r\n      *   Get the search result of authentication log\r\n      */\n  getAuthenticationLogResult: function getAuthenticationLogResult(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n\n    data['action'] = params.action;\n    data['domain'] = params.domain;\n    data['userName'] = params.userName;\n    data['dtFrom'] = params.dtFrom;\n    data['dtTo'] = params.dtTo;\n    data['eventSubType'] = params.eventSubType;\n    data['eventType'] = params.eventType;\n    data['pag'] = params.pag;\n    data['pagSize'] = params.pagSize;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('admin-getAuthenticationLog'),\n      data: data,\n      type: 'GET',\n      dataType: 'json' });\n\n  },\n  /*\r\n      *   Return the password encrypted\r\n      */\n  encryptString: function encryptString(params) {\n    var self = this;\n\n    var data = {};\n\n    // Define data\n    params = params || {};\n\n    data.entry = params.entry;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('admin-EncryptString'),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n\n  /*\r\n      *   Return the users requests\r\n      */\n  userPendingRequests: function userPendingRequests(params) {\n    var self = this;\n    var data = {\n      pag: params.pag,\n      pagSize: params.pagSize };\n\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl(\"admin-UserPendingRequests\"), data);\n  },\n\n  /*\r\n      *   Return the User Authentication Info\r\n      */\n  userAuthenticationInfo: function userAuthenticationInfo(params) {\n    var self = this;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl('admin-UserAuthenticationInfo'), {\n      idUser: params.idUser });\n\n  },\n\n  /*\r\n      *   Return Update User Authentication Info\r\n      */\n  updateUserAuthenticationInfo: function updateUserAuthenticationInfo(params) {\n    var self = this;\n\n    // Call ajax and returns promise\n    return $.create(self.serviceLocator.getUrl('admin-updateUserAuthenticationInfo'), {\n      idUser: params.idUser,\n      password: params.password,\n      enable: params.enable,\n      expired: params.expired,\n      locked: params.locked });\n\n  },\n\n  /*\r\n      *   Return generate Data To Send By Email\r\n      */\n  generateRandomPassword: function generateRandomPassword(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    params['action'] = 'generateRandomPassword';\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('admin-generateRandomPassword'),\n      data: params,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n\n  /*\r\n      *   Return generate Data To Send By Email\r\n      */\n  generateDataToSendByEmail: function generateDataToSendByEmail(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data['action'] = 'GenerateDataToSendByEmail';\n    data['idUser'] = params.idUser;\n    data['password'] = params.password;\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('admin-GenerateDataToSendByEmail'),\n      data: params,\n      type: 'POST',\n      dataType: 'json' });\n\n\n  },\n\n  /*\r\n      *   Return generate Send Mail\r\n      */\n  sendEmail: function sendEmail(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data['action'] = 'sendEmail';\n    data['emailTo'] = params.emailTo;\n    data['subject'] = params.subject;\n    data['body'] = params.body;\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('admin-sendEmail'),\n      data: params,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n\n  /*\r\n      *   Return Applications, Categories or processes list\r\n      */\n  getApplicationCategoriesList: function getApplicationCategoriesList(params) {\n    var self = this;\n    var data = {};\n    var url = '';\n\n    if (params.action == 'Applications') {\n      url = 'admin-getApplicationList';\n\n      // Call ajax and returns promise\n      return $.ajax({\n        url: self.serviceLocator.getUrl(url),\n        type: 'GET',\n        dataType: 'json' });\n\n    } else {\n      url = 'admin-getCategoriesList';\n      data.idApp = params.idApp;\n      data.idCategory = params.idCategory;\n      if (data.idCategory == '') {\n        data.idCategory = -1;\n      }\n\n      if (typeof params.filterStartEvent !== 'undefined') {\n        data.filterStartEvent = params.filterStartEvent;\n      }\n\n      // Call ajax and returns promise\n      return $.ajax({\n        url: self.serviceLocator.getUrl(url),\n        data: data,\n        type: 'GET',\n        dataType: 'json' });\n\n    }\n  },\n\n  /*\r\n      *   Return the list of all cases that matched the filters\r\n      */\n  getAdminCasesList: function getAdminCasesList(params) {\n    var self = this;\n    var data = params || {};\n\n    // Call ajax and returns promise\n    return $.ajax({\n      //eliminar esto con el servicio restfull\n      cache: true,\n      url: self.serviceLocator.getUrl('admin-getCasesList'),\n      data: data,\n      type: 'GET',\n      dataType: 'json' });\n\n\n  },\n\n  /*\r\n      *   Return the application's processes\r\n      */\n  getApplicationProcesses: function getApplicationProcesses(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-getApplicationProcesses');\n\n    var data = {};\n\n    data['idApp'] = params['idApp'] ? params['idApp'] : -1;\n\n\n    return $.read(url, data);\n  },\n\n  /*\r\n      *   Return the application's processes\r\n      */\n  getProcessVersion: function getProcessVersion(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-getProcessVersion');\n\n    var data = {};\n\n    data['idWfClass'] = params['idWFClass'];\n\n    return $.read(url, data);\n  },\n\n  /*\r\n      *   Return the the workflow's versions task\r\n      */\n  getProcessTasks: function getProcessTasks(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-getProcessTasks');\n\n    var data = {};\n\n    data['idWfClass'] = params['idWFClass'];\n    data['version'] = params['version'] ? params['version'] : undefined;\n\n    return $.read(url, data);\n  },\n\n  /*\r\n      * Retrieves the alarms from an specific task\r\n      */\n  getTaskAlarms: function getTaskAlarms(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-getTaskAlarms');\n\n    var data = {};\n\n    data['idTask'] = params['idTask'];\n\n    return $.read(url, data);\n  },\n\n  /*\r\n      * Retrieves each kind of alarm lapse\r\n      */\n  getLapseMode: function getLapseMode() {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-getLapseMode');\n\n    return $.read(url);\n  },\n\n  /*\r\n      * Retrieves each kind of alarm recurrence\r\n      */\n  getRecurrMode: function getRecurrMode() {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-getRecurrMode');\n\n    return $.read(url);\n  },\n\n\n  /*\r\n      * Retrieves each kind of alarm recurrence\r\n      */\n  getScheduleType: function getScheduleType() {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-getScheduleType');\n\n    return $.read(url);\n  },\n\n  /*\r\n      *   Retrieves the boss list\r\n      */\n  getBossList: function getBossList(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-getBossList');\n    return $.read(url);\n  },\n\n  /**\r\n      *   Add a new alarm\r\n      */\n  addAlarm: function addAlarm(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-addAlarm');\n\n    var data = {};\n\n    data['idTask'] = params['idTask'];\n    data['idRecurrMode'] = params['idRecurrMode'];\n    data['idLapseMode'] = params['idLapseMode'];\n    data['scheduleType'] = params['scheduleType'];\n    data['alarmTime'] = params['alarmTime'];\n    data['alarmRecurrTime'] = params['alarmRecurrTime'];\n    data['sendToCurrentAssignee'] = params['sendToCurrentAssignee'];\n\n    return $.update(url, data);\n    /*\r\n                                 return $.ajax({\r\n                                 url: self.serviceLocator.getUrl('admin-addAlarm'),\r\n                                 data: data,\r\n                                 type: 'PUT',\r\n                                 dataType: 'json'\r\n                                 });\r\n                                 */\n  },\n\n  /*\r\n      *   Edits an existin alarm\r\n      */\n  editAlarm: function editAlarm(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-editAlarm');\n\n    var data = {};\n\n    data['idTask'] = params['idTask'];\n    data['idAlarm'] = params['idAlarm'];\n    data['idRecurrMode'] = params['idRecurrMode'];\n    data['idLapseMode'] = params['idLapseMode'];\n    data['scheduleType'] = params['scheduleType'];\n    data['alarmTime'] = params['alarmTime'];\n    data['alarmRecurrTime'] = params['alarmRecurrTime'];\n    data['sendToCurrentAssignee'] = params['sendToCurrentAssignee'];\n\n\n    return $.update(url, data);\n\n\n  },\n\n  /*\r\n      *   Delete an alarm\r\n      */\n  deleteAlarm: function deleteAlarm(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-deleteAlarm');\n\n    var data = {};\n\n    data['idAlarm'] = params['idAlarm'];\n\n    return $.destroy(url, params);\n\n  },\n\n  /*\r\n      * Returns the Alarm Recipients\r\n      * @param param: idAlarm : the alarm id to get the related recipients\r\n      */\n  getAlarmRecipients: function getAlarmRecipients(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-alarmRecipients');\n\n    var data = {};\n\n    data['idAlarm'] = params['idAlarm'];\n\n    return $.read(url, data);\n  },\n\n  /*\r\n      * Adds a new Alarm Recipient to the current alam\r\n      * @param param: idAlarm : the alarm id to get the related recipients\r\n      * @param param: idRecipient : the recipient id\r\n      */\n  addRecipientToAlarm: function addRecipientToAlarm(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-recipientToAlarm');\n\n    var data = {};\n\n    data['idAlarm'] = params['idAlarm'];\n    data['idRecipient'] = params['idRecipient'];\n\n    return $.update(url, data);\n\n\n  },\n\n  /*\r\n      * Delete/s the alarm recipient/s from the current task\r\n      * @param param: idRecipient : the recipient id/s who is going to be deleted\r\n      */\n  deleteRecipientsFromAlarm: function deleteRecipientsFromAlarm(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-deleteAlarmRecipients');\n\n    var data = {};\n\n    data['idRecipients'] = params['idRecipients'];\n\n    return $.destroy(url, data);\n  },\n\n  /*\r\n      * Send the action to toggle the alarms state: enable or disable\r\n      * @param param: idTask : the task id who is going to be actvidated/deactivaded his alarms\r\n      */\n  enableAlarm: function enableAlarm(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-enableAlarm');\n\n    var data = {};\n\n    data['idTask'] = params['idTask'];\n\n    return $.create(url, data);\n  },\n\n  /*\r\n      * Invalidate or Reassign a set of cases\r\n      */\n  abortReassignItems: function abortReassignItems(params) {\n    var self = this;\n    var data = params || {};\n    var url = params.action == 'abort' ? 'admin-abortItems' : 'admin-reassignItems';\n    // Call ajax and returns promise\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl(url),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n  /*\r\n      * Services for Asynchronous Activities\r\n      */\n  asyncActivitiesServices: function asyncActivitiesServices(params) {\n    var self = this;\n    var data = params;\n    var url = '';\n    var type = 'GET';\n    if (params.action == 'getActivities') {\n      url = self.serviceLocator.getUrl('admin-async-activities-get-activities');\n    } else if (params.action == 'retryNow') {\n      type = 'POST';\n      url = self.serviceLocator.getUrl('admin-async-activities-get-retry-now');\n      url = url.replace('{idCase}', params.idCase);\n      url = url.replace('{idworkItem}', params.idWorkitem);\n      url = url.replace(\"{idAsynchWorkitem}\", params.idAsynchWorkitem);\n    } else if (params.action == 'getActivitiesByTask') {\n      url = self.serviceLocator.getUrl('admin-async-activities-get-activities-by-task');\n    } else if (params.action == 'enableExecution') {\n      type = 'POST';\n      url = self.serviceLocator.getUrl('admin-async-activities-enable-execution');\n    } else if (params.action == 'enableMultiple') {\n      url = self.serviceLocator.getUrl('admin-async-activities-enable-multiple');\n      type = 'POST';\n    } else if (params.action == 'asyncExecution') {\n      url = self.serviceLocator.getUrl('admin-async-activities-async-execution');\n    } else if (params.action == 'asyncExecutionLog') {\n      url = self.serviceLocator.getUrl('admin-async-activities-async-execution-log');\n      url = url.replace('{idCase}', params.idCase);\n      url = url.replace('{idworkItem}', params.idWorkItem);\n      url = url.replace(\"{idAsynchWorkitem}\", params.idAsynchWorkitem);\n    } else if (params.action == 'getAsyncExecution') {\n      url = self.serviceLocator.getUrl('admin-async-activities-async-get-current-execution-log');\n    }\n    // Call ajax and returns promise\n    var response = $.ajax({\n      url: url,\n      data: data,\n      type: type,\n      dataType: 'json' });\n\n\n    return response;\n  },\n\n  /*\r\n      *  Return generate Default Assignation To all Process\r\n      */\n  getDefaultAssignationUserToAllProcess: function getDefaultAssignationUserToAllProcess(params) {\n    var self = this;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl('admin-getDefaultAssignationUserToAllProcess'), {\n      serviceAction: 'getDefaultAssignationUserToAllProcess' });\n\n  },\n\n  /*\r\n      *  Return generate Default Assignation To Process\r\n      */\n  getDefaultAssignationUserToProcess: function getDefaultAssignationUserToProcess(params) {\n    var self = this;\n    var process;\n    // Call ajax and returns promise\n    if (params.idWFClass == '') {\n      process = -1;\n    } else {\n      process = params.idWfClass;\n    }\n    return $.read(self.serviceLocator.getUrl('admin-getDefaultAssignationUserToProcess'), {\n      serviceAction: 'getDefaultAssignationUserToProcess',\n      process: process });\n\n\n  },\n\n  /*\r\n      * Return Assignation Process\r\n      */\n  setDefaultAssignationUserToProcess: function setDefaultAssignationUserToProcess(params) {\n    var self = this;\n    if (params.idWFClass == '') {\n      process = -1;\n    } else {\n      process = params.idWfClass;\n    }\n\n    // Call ajax and returns promise\n    return $.create(self.serviceLocator.getUrl('admin-setDefaultAssignationUserToProcess'), {\n      serviceAction: 'setDefaultAssignationUserToProcess',\n      process: process,\n      idUser: params.idUser });\n\n  },\n\n  /**\r\n      * Get the icon of a given process\r\n      * @param params\r\n      */\n  getProcessIcon: function getProcessIcon(params) {\n    var self = this;\n    var data = {\n      processId: params.processId };\n\n\n    // Call ajax and returns promise\n    return $.read({\n      url: self.serviceLocator.getUrl(\"process-getIcon\"),\n      data: data,\n      batchRequest: true });\n\n  },\n  /**\r\n      * Get the icon of a given collection\r\n      * @param params\r\n      */\n  getCollectionIcon: function getCollectionIcon(params) {\n    var self = this;\n    var data = {\n      collectionId: params.collectionId };\n\n\n    // Call ajax and returns promise\n    return $.read({\n      url: self.serviceLocator.getUrl(\"collections-getIcon\"),\n      data: data,\n      batchRequest: true });\n\n  },\n\n  /*\r\n      *   Returns the combo's data to Type Profiles depending of the params\r\n      */\n  getProfilesTypes: function getProfilesTypes(params) {\n    var self = this;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl('admin-getProfilesTypes'));\n  },\n\n  /*\r\n      *  Return generate Search Profiles\r\n      */\n  searchProfiles: function searchProfiles(params) {\n    var self = this;\n\n    var url = self.serviceLocator.getUrl('admin-searchProfiles');\n    var data = {};\n    data['type'] = params['profileType'];\n    data['name'] = params['profileName'];\n\n    data[\"orgId\"] = params[\"orgId\"] ? params[\"orgId\"] : null;\n\n    return $.read(url, data);\n  },\n\n  /*\r\n      *  Return Users By Profiles\r\n      */\n  getUsersByProfile: function getUsersByProfile(params) {\n    var self = this;\n\n    var url = self.serviceLocator.getUrl('admin-getUsersByProfile');\n    var data = {};\n    data['type'] = params['profileType'];\n    data['id'] = params['idProfile'];\n\n    return $.read(url, data);\n  },\n\n  /*\r\n      *  Remove User Profiles\r\n      */\n  removeUserFromProfile: function removeUserFromProfile(params) {\n    var self = this;\n\n    var url = self.serviceLocator.getUrl('admin-removeUserFromProfile');\n    var data = {};\n    data['type'] = params['profileType'];\n    data['id'] = params['idProfile'];\n    data['idUser'] = params['idUser'];\n\n    return $.destroy(url, data);\n  },\n\n  /*\r\n      *  Add Users Profiles\r\n      */\n  addUserToProfile: function addUserToProfile(params) {\n    var self = this;\n\n    var url = self.serviceLocator.getUrl('admin-addUserToProfile');\n    var data = {};\n    data['type'] = params['profileType'];\n    data['id'] = params['idProfile'];\n    data['idUser'] = params['idUser'];\n\n    return $.update(url, data);\n  },\n  /*\r\n      *  Display Licenses\r\n      */\n  licenses: function licenses() {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-Licenses');\n    return $.read(url);\n  },\n\n  /*\r\n      *   Return Dimensions List\r\n      */\n  getDimensions: function getDimensions() {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-GetDimensions');\n    return $.read(url);\n  },\n\n  /*\r\n      *   Edit Dimensions\r\n      */\n  editDimension: function editDimension(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data['id'] = params.id;\n    data['displayName'] = params.displayName;\n    data['name'] = params.name;\n    data['idWfClass'] = params.idWfClass;\n    data['entityPath'] = params.entityPath;\n    data['description'] = params.description;\n    var url = self.serviceLocator.getUrl('admin-EditDimension');\n    // Call ajax and returns promise\n    return $.create(url, data);\n    /*return $.ajax({\r\n                                 url: self.serviceLocator.getUrl('admin-EditDimension'),\r\n                                 data: params,\r\n                                 type: 'POST',\r\n                                 dataType: 'json'\r\n                                 });*/\n  },\n\n  /*\r\n      *   Create Dimensions\r\n      */\n  createAdministrableDimension: function createAdministrableDimension(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data['displayName'] = params.displayName;\n    data['name'] = params.name;\n    data['idWfClass'] = params.idWfClass;\n    data['entityPath'] = params.entityPath;\n    data['Description'] = params.description;\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('admin-CreateAdministrableDimension'),\n      data: params,\n      type: 'PUT',\n      dataType: 'json' });\n\n  },\n\n  /*\r\n      * Delete manageable dimensions\r\n      */\n  deleteDimension: function deleteDimension(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-DeleteDimension');\n    // Define data\n    params = params || {};\n    var data = {};\n    data['id'] = params.id;\n    data['idDimension'] = params.id;\n    data['administrable'] = params.administrable;\n    // Call ajax and returns promise\n    return $.destroy(url, data);\n  },\n\n  /*\r\n      *   Dimensions Process Tree\r\n      */\n  entityPathChildNodesAction: function entityPathChildNodesAction(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data['pathNodeType'] = params.nodeType;\n    data['idNode'] = params.idNode;\n    data['nodeDisplayPath'] = params.nodeDisplayPath;\n    data['nodePath'] = params.nodePath;\n    data['idWfClass'] = params.idWfClass;\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl('admin-EntityPathChildNodesAction'),\n      data: params,\n      type: 'GET',\n      dataType: 'json' });\n\n  },\n\n  /*\r\n      *   Return list of available processes\r\n      */\n  getActiveWFClasses: function getActiveWFClasses(params) {\n    var self = this;\n    var data = params || {};\n\n    // Call ajax and returns promise\n\n    return $.ajax({\n      //eliminar esto con el servicio restfull\n      cache: true,\n      url: self.serviceLocator.getUrl('admin-GetActiveWFClasses'),\n      data: data,\n      type: 'GET',\n      dataType: 'json' });\n\n  },\n\n  /*\r\n      *   Resturn the list of Stored Document Templates\r\n      */\n  storeDocumentTemplates: function storeDocumentTemplates() {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-document-templates-storeDocumentTemplates');\n    return $.read(url);\n  },\n\n  /*\r\n      * Restore an selected document template using his Guid as parameter\r\n      * @param params {Object} Guid: the associated Guid from the desired document template\r\n      */\n  restoreDocumentTemplates: function restoreDocumentTemplates(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-document-templates-restoreDocumentTemplates');\n\n    url += '?Guid=' + params.Guid;\n\n    return $.read(url);\n  },\n\n  /*\r\n      * Retreieves the workflow from the actual processes\r\n      */\n  getWorkFlowClasses: function getWorkFlowClasses() {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-processes-workflowClasses');\n    return $.read(url);\n  },\n\n\n  /*\r\n      * Retreives the task from a desired workflow\r\n      * @param params {Object} idWorkFlow: the desired workflow id\r\n      */\n  getTaskByWorkFlow: function getTaskByWorkFlow(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-processes-tasksByWorkflow');\n\n    var data = {};\n    data['idWorkflow'] = params.idWorkflow;\n\n\n    return $.read(url, data);\n  },\n\n  /*\r\n      * Modifies the process durationworkflow\r\n      * @param params {Object} idWorkflow: the desired process id to modify\r\n      * @param params {Object} duration: the duracion, converted in minutes\r\n      */\n  modifyProcessDuration: function modifyProcessDuration(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-processes-modifyProcessDuration');\n\n    var data = {};\n    data['idWorkflow'] = params.idWorkflow;\n    data['duration'] = params.duration;\n\n    return $.create(url, data);\n  },\n\n  /*\r\n      * Modifies the task duration form a desired workflow\r\n      * @param params {Object} idTask: the desired task id to modifie\r\n      * @param params {Object} duration: the duracion, converted in minutes\r\n      */\n  modifyTaskDuration: function modifyTaskDuration(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-processes-modifyTaskDuration');\n\n    var data = {};\n    data['idTask'] = params.idTask;\n    data['duration'] = params.duration;\n\n    return $.create(url, data);\n  },\n\n  /*\r\n      * this retrive data for the report my team\r\n      */\n  getDataForMyTeam: function getDataForMyTeam() {\n\n    var self = this;\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl('bam-resourcemonitor-myteam'),\n      type: 'GET',\n      dataType: 'json' });\n\n  },\n\n  /*\r\n      * Retrive data for reports\r\n      */\n  getReporstAnalysisQuery: function getReporstAnalysisQuery() {\n\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl('reports-analysisquery'));\n  },\n\n  /*\r\n      * Update report data\r\n      */\n  updateReportData: function updateReportData(params) {\n\n    var self = this;\n\n    return $.update(self.serviceLocator.getUrl('reports-analysisquery-update'), params);\n  },\n\n  /*\r\n      * Delete report data\r\n      */\n  deleteReportData: function deleteReportData(params) {\n\n    var self = this;\n\n    return $.destroy(self.serviceLocator.getUrl('reports-analysisquery-delete') + '?' + params);\n  },\n  /*\r\n      *Entrega la lista de idiomas soportados\r\n      */\n  getStoreLanguageTemplates: function getStoreLanguageTemplates() {\n    var self = this;\n    var url = self.serviceLocator.getUrl('admin-language-languages');\n    var data = { justActives: false };\n    return $.read(url, data);\n  },\n\n  /*\r\n      *Download template language list\r\n      */\n  getLanguageTemplate: function getLanguageTemplate(params) {\n    var self = this;\n    var defer = $.Deferred();\n    var url = self.serviceLocator.getUrl('admin-language-resource') + '?cultureName=' + params.cultureName;\n    defer.resolve('OK');\n    window.location.href = url;\n    /*\r\n                                 var response=  $.ajax({\r\n                                 type: 'GET',\r\n                                 url: url\r\n                                 });\r\n                                 response.always(function(response, status, xhr) {\r\n                                 if(response.responseText.indexOf('error') >= 0){\r\n                                 defer.reject('Download error');\r\n                                 }else{\r\n                                 defer.resolve('OK');\r\n                                 window.location.href=url;\r\n                                 }\r\n                                 });*/\n    return defer.promise();\n  },\n  /*\r\n      * Process definition service for process viewer\r\n      */\n  processDefinition: function processDefinition(params) {\n    var self = this;\n    return $.read(self.serviceLocator.getUrl('processviewer-processdefinition'), params);\n  },\n\n  /*\r\n      * Graphic info for process viewer\r\n      */\n  graphicInfo: function graphicInfo(params) {\n    var self = this;\n    return $.read(self.serviceLocator.getUrl('processviewer-processgraphicinfo'), params);\n  },\n\n  /**\r\n      * This service get the last version of BizagiBPM\r\n      *\r\n      * @return {json}\r\n      */\n  getLastUpdateByMobile: function getLastUpdateByMobile() {\n    var self = this;\n    return $.read({\n      url: self.serviceLocator.getUrl(\"mobile-getLastUpdate\") });\n\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getCollectionData: function getCollectionData(params) {\n    var self = this,\n    data = {},\n    url = self.serviceLocator.getUrl('templates-handler-getCollectionData');\n\n    data.idFact = params.idFact;\n    data.pag = params.page || 1;\n    data.pagSize = params.pageSize || 10;\n    data.filters = params.filters ? !Array.isArray(params.filters) ? JSON.stringify(params.filters) : undefined : undefined;\n\n    // Call ajax and returns promise\n    return $.read(url, data).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getVirtualCollectionData: function getVirtualCollectionData(params) {\n    var self = this,\n    data = {},\n    url = self.serviceLocator.getUrl('templates-handler-getVirtualCollectionData');\n\n    data.guidVirtualCollection = params.guidVirtualCollection;\n    data.pag = params.page || 1;\n    data.pagSize = params.pageSize || 10;\n    data.filters = params.filters ? !Array.isArray(params.filters) ? JSON.stringify(params.filters) : undefined : undefined;\n\n    // Call ajax and returns promise\n    return $.read(url, data).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getSearchData: function getSearchData(params) {\n    var self = this;\n    // Call ajax and returns promise\n    var urlSend = self.serviceLocator.getUrl(\"my-search-getData\");\n    urlSend = urlSend.replace(\"{guidSearch}\", params.guidSearch);\n    var filters = params.filters || [];\n\n    var data = {\n      filters: JSON.stringify(filters),\n      pag: params.page || 1,\n      calculateFilters: params.calculateFilters || false,\n      pagSize: params.pageSize || 10 };\n\n    return $.read(urlSend, data).then(function (data) {\n      return self.serializeEntityData(data);\n    });\n  },\n\n  /**\r\n      * Return an array with the collections or entity related to stakeholder entities\r\n      * @param params\r\n      */\n  getCollectionEntityData: function getCollectionEntityData(params) {\n    var self = this,url;\n    params = params || {};\n    var data = {\n      templateType: params.referenceType === \"VIRTUAL\" || params.referenceType === \"FACT\" ? \"List\" : \"Content\",\n      surrogateKey: params.surrogateKey,\n      pag: params.page || 1,\n      pagSize: params.pageSize || 10,\n      defaultFilterApplied: params.defaultFilterApplied,\n      filters: JSON.stringify(params.filters) };\n\n\n    // VIRTUAL\n    if (params.referenceType === \"VIRTUAL\") {\n      url = self.serviceLocator.getUrl('data-navigation-handler-collection');\n      data.reference = params.reference;\n    }\n    // ENTITY AND FACTS\n    else {\n        url = self.serviceLocator.getUrl('data-navigation-handler-entity');\n        data.reference = params.guidEntityCurrent;\n        data.xpath = params.xpath;\n        data.collectionId = params.reference;\n      }\n\n    // Call ajax and returns promise\n    return $.read(url, data).then(function (response) {\n      return self.serializeEntityData(response);\n    });\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      */\n  getFiltersEntityData: function getFiltersEntityData(params) {\n    var self = this;\n    params = params || {};\n    var data = {\n      reference: params.guidEntityCurrent,\n      collectionId: params.reference,\n      surrogateKey: params.surrogateKey,\n      xpath: params.xpath,\n      templateType: \"List\",\n      defaultFilterApplied: params.defaultFilterApplied,\n      filters: JSON.stringify(params.filters) };\n\n\n    // Call ajax and returns promise\n    return $.read({\n      url: self.serviceLocator.getUrl(\"data-navigation-handler-entity-filters\"),\n      data: data });\n\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getProcessAddAction: function getProcessAddAction(params) {\n    var self = this,\n    url = self.serviceLocator.getUrl(\"action-handler-getProcessAddAction\");\n\n    // Call ajax and returns promise\n    return $.read(url, params).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getMultipleActions: function getMultipleActions(params) {\n    var self = this,\n    url = self.serviceLocator.getUrl(\"templates-handler-getMultipleActions\");\n\n    // Call ajax and returns promise\n    return $.read(url, params).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getMapping: function getMapping(params) {\n    var self = this;\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"process-handler-getMapping\"),\n      data: params,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  getForm: function getForm(data) {\n    var self = this;\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"process-handler-getForm\"),\n      data: data,\n      type: 'POST',\n      dataType: 'json' });\n\n  },\n\n  /**\r\n      * Chek if an entity has startform\r\n      * @param params\r\n      * @return {*}\r\n      */\n  hasStartForm: function hasStartForm(params) {\n    var self = this;\n    var data = {};\n\n    if (params.guid) {\n      data.guidWFClass = params.guid;\n    }\n\n    return $.read(self.serviceLocator.getUrl(\"process-handler-startform\"), data);\n  },\n\n  /**\r\n      * Executes the action\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  executeAction: function executeAction(params) {\n    var self = this;\n    var data = {\n      surrogateKey: JSON.stringify(params.surrogatedKey),\n      entityId: params.entityId,\n      ruleId: params.processId };\n\n\n    // Call ajax and returns promise\n    return $.create({\n      url: self.serviceLocator.getUrl(\"process-action-execute\"),\n      data: data });\n\n  },\n\n  /**\r\n      * executes a rule\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  actionRule: function actionRule(params) {\n    var self = this;\n    var data = {\n      surrogateKey: params.surrogateKey,\n      entityId: params.entityId,\n      ruleId: params.processId };\n\n\n    return $.create({\n      url: self.serviceLocator.getUrl(\"process-handler-rule\"),\n      data: data,\n      batchRequest: false });\n\n  },\n\n  /**\r\n      * Get following cases\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getActivitiesData: function getActivitiesData(params) {\n    var self = this,\n    url = self.serviceLocator.getUrl(\"process-handler-getActivitiesData\");\n    params = params || {};\n    var data = {\n      page: params.page || 1,\n      pagsize: params.pageSize || 10 };\n\n\n    if (typeof params.idworkflow !== \"undefined\" && params.idworkflow ||\n    typeof params.idWorkflow !== \"undefined\" && params.idWorkflow) {\n      data.idWorkflow = params.idworkflow || params.idWorkflow;\n    }\n    if (typeof params.idCase !== \"undefined\" && params.idCase) {\n      data.idCase = params.idCase;\n    }\n\n    // Call ajax and returns promise\n    return $.read(url, data).then(function (response) {\n      return self.serializeEntityData(response);\n    });\n  },\n\n  /**\r\n      * Return an array with the collections related to stakeholder entities\r\n      */\n  getPendingsData: function getPendingsData(params) {\n    var self = this,\n    url = self.serviceLocator.getUrl(\"process-handler-getPendingsData\");\n    params = params || {};\n    var data = {\n      page: params.page || 1,\n      pagsize: params.pageSize || 10 };\n\n\n    if (typeof params.idworkflow !== \"undefined\" && params.idworkflow ||\n    typeof params.idWorkflow !== \"undefined\" && params.idWorkflow) {\n      data.idWorkflow = params.idworkflow || params.idWorkflow;\n    }\n    if (typeof params.idCase !== \"undefined\" && params.idCase) {\n      data.idCase = params.idCase;\n    }\n    if (typeof params.taskState !== \"undefined\" && params.taskState) {\n      data.taskState = params.taskState;\n    }\n\n    // Call ajax and returns promise\n    return $.read(url, data).then(function (response) {\n      return self.serializeEntityData(response);\n    });\n  },\n\n  /**\r\n      * Get actions\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getActionsData: function getActionsData(params) {\n    var self = this;\n    params = params || {};\n\n    // Call ajax and returns promise\n    return $.read({\n      url: self.serviceLocator.getUrl('entities-handler-getActions'),\n      data: params,\n      batchRequest: true }).\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  /**\r\n      * Get Users, assignees and events from cases\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getUsersAndEvents: function getUsersAndEvents(params) {\n    var self = this;\n    var data = {};\n\n    if (params.idCases && params.idCases.length > 0) {\n      data.idCases = params.idCases.toString();\n    }\n\n    return $.read(self.serviceLocator.getUrl(\"entities-handler-getUsersAndEvents\"), data);\n  },\n\n  /**\r\n      * Get Users, assignees and events from cases\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getUsers: function getUsers(params) {\n    var self = this;\n    var data = {\n      caseId: params.caseId };\n\n\n    // Call ajax and returns promise\n    return $.read({\n      url: self.serviceLocator.getUrl(\"entities-handler-getUsers\"),\n      data: params,\n      batchRequest: true });\n\n  },\n\n  /**\r\n      * Get Users, assignees and events from cases\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getEvents: function getEvents(params) {\n    var self = this;\n    var data = {\n      caseId: params.caseId };\n\n\n    // Call ajax and returns promise\n    return $.read({\n      url: self.serviceLocator.getUrl(\"entities-handler-getEvents\"),\n      data: params,\n      batchRequest: true });\n\n  },\n\n  /**\r\n      * Get Users images\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getUsersImages: function getUsersImages(params, userIds) {\n    var self = this;\n    var data = {};\n    var url = self.serviceLocator.getUrl(\"entities-handler-getUsersImages\");\n\n    if (userIds && userIds.length > 0) {\n      data.userIds = userIds.toString();\n    }\n\n    data.width = params.width;\n    data.height = params.height;\n    data.square = params.square;\n\n    var newUserServices = bizagi.util.getFeatureObject(\"userService.v1.enabled\");\n    if (newUserServices) {\n      return $.ajax({\n        url: url,\n        data: data,\n        type: \"POST\",\n        dataType: \"json\" });\n\n    } else {\n      return $.read({\n        url: url,\n        data: data,\n        dataType: \"json\" });\n\n    }\n  },\n\n  getPreferencesCurrentUser: function getPreferencesCurrentUser() {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"currentUser\");\n    return $.ajax({\n      url: url,\n      type: \"GET\" });\n\n  },\n\n  getPreferencesWorkportalCurrentUser: function getPreferencesWorkportalCurrentUser() {\n    var self = this;\n    var resp = $.read(self.serviceLocator.getUrl(\"PreferencesWorkportalCurrentUser\"));\n    return resp;\n  },\n\n  /**\r\n      * Get stakeholder shortCurts\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getShortCuts: function getShortCuts(params) {\n    var self = this,\n    data = {},\n    url = self.serviceLocator.getUrl(\"entities-handler-getShotCuts\");\n\n    if (typeof params.icon !== \"undefined\" && params.icon) {\n      data.icon = true;\n    }\n\n    // Call ajax and returns promise\n    return $.read(url, data);\n  },\n\n  /**\r\n      *   Returns the available list of searches\r\n      */\n  getSearchLists: function getSearchLists() {\n    var self = this;\n    return $.read(self.serviceLocator.getUrl(\"my-search-getSearchLists\"), {});\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      */\n  getIdCasesOfProcessEntities: function getIdCasesOfProcessEntities(params) {\n    params = params || {};\n    var self = this;\n    var ids = {\n      ids: JSON.stringify(params) };\n\n\n    // TODO: Validate compatibility\n    if (bizagi.version.server.lessThanOrEqualsTo(\"11.0.0.2608\")) {\n      // Call ajax and returns promise\n      return $.read({\n        url: self.serviceLocator.getUrl(\"process-handler-getIdCasesOfProcessEntities\"),\n        data: ids });\n\n\n    } else {\n      return $.ajax({\n        url: self.serviceLocator.getUrl(\"process-handler-getIdCasesOfProcessEntities\"),\n        data: ids,\n        type: \"POST\" });\n\n    }\n  },\n\n  /**\r\n      * Retuns query form to searches\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getQueryForm: function getQueryForm(params) {\n    var self = this;\n    params = params || {};\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"query-handler-getQueryForm\"),\n      data: params,\n      type: \"POST\",\n      dataType: params.dataType || \"json\" });\n\n  },\n\n  /**\r\n      * Returns an object with the filter to send to the server\r\n      * @param params\r\n      * @param filterObject\r\n      * @param callback is called when a filter is added to the array\r\n      */\n  defineFilterObject: function defineFilterObject(params, filterObject, callback) {\n    var properties = params.properties;\n    var xpath = properties.xpath.split('@')[0];\n\n    var filter = filterObject.find(function (el) {\n      return el.xpath == xpath;\n    });\n\n    //if the control exists is because it is a range\n    if (filter) {\n      if (properties.rangeQuery == \"from\") {\n        filter.value = filter.value || {};\n        filter.searchType = 'range';\n        filter.value.min = params.value;\n      } else\n      if (properties.rangeQuery == \"to\") {\n        filter.value = filter.value || {};\n        filter.searchType = 'range';\n        filter.value.max = params.value;\n      } else\n      {\n        params.properties.typeSearch = filter.searchType;\n        var values = setValues(params);\n        $.extend(filter, values);\n      }\n\n      if (properties.orderType) {\n        filter.orderType = properties.orderType;\n      }\n      if (callback) {\n        callback(bizagi.clone(filter));\n      }\n    } else\n    {\n      var isDefaultFilter = properties.defaultFilter || false;\n      filter = setValues(params);\n\n      if (properties.orderType) {\n        filter.orderType = properties.orderType;\n      }\n\n      if (typeof filter.value != 'undefined' || filter.orderType || isDefaultFilter) {\n        filterObject.push(filter);\n        if (callback) {\n          callback(bizagi.clone(filter));\n        }\n      }\n    }\n\n\n    function setValues(params) {\n      var properties = params.properties;\n      var searchType = properties.typeSearch;\n      var value = params.value;\n\n      //Identifing the type control in order to define search type\n      if (properties.type == \"boolean\") {\n        if (value.toLowerCase() === \"null\") {\n          value = null;\n          searchType = \"Nullable\";\n        } else\n        {\n          value = bizagi.util.parseBoolean(value);\n          searchType = \"exact\";\n        }\n      }\n\n      if (properties.type == \"number\" || properties.type == \"money\" || properties.type == \"date\") {\n        searchType = \"exact\";\n      }\n\n      if (_typeof(params.value) == 'object') {\n        value = [];\n        if (Array.isArray(params.value)) {\n          for (var i = 0, len = params.value.length; i < len; i++) {\n            var val = parseInt(params.value[i].id);\n            if (!isNaN(val)) {\n              value.push(val);\n            }\n          }\n        } else\n        {\n          var val = parseInt(params.value.id);\n          if (!isNaN(val)) {\n            value.push(val);\n          }\n        }\n        searchType = \"exact\";\n        value = value.length > 0 ? value : undefined;\n      }\n\n      if (properties.rangeQuery && properties.rangeQuery !== \"none\") {\n        value = {\n          min: params.value,\n          max: params.value };\n\n        searchType = \"range\";\n      }\n\n      searchType = searchType || \"approx\";\n\n      var filter = {\n        xpath: xpath,\n        searchType: searchType };\n\n\n      if (typeof value !== 'undefined') {\n        filter.value = value;\n      }\n\n      return filter;\n    }\n  },\n\n  /*PLAN*/\n  getPlan: function getPlan(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-plan-get\");\n\n    return $.read({\n      url: url,\n      data: params,\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  getActivities: function getActivities(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-plan-activities\");\n\n    return $.read({\n      url: url,\n      data: params,\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  updatePlan: function updatePlan(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-plan-update\");\n    return $.update({\n      url: url.replace(\"{idPlan}\", params.id),\n      data: JSON.stringify(params),\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  putExecutePlan: function putExecutePlan(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-plan-execute\");\n\n    return $.create({\n      url: url,\n      data: params,\n      contentType: \"application/x-www-form-urlencoded\" });\n\n  },\n\n  deletePlan: function deletePlan(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-plan-delete\");\n\n    return $.destroy({\n      url: url.replace(\"{idPlan}\", params.id),\n      data: params,\n      contentType: \"application/x-www-form-urlencoded\" });\n\n  },\n\n  closePlan: function closePlan(params) {\n\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-plan-close\");\n\n    return $.create({\n      url: url,\n      data: params,\n      contentType: \"application/x-www-form-urlencoded\" });\n\n  },\n\n  getWorkitemsPlan: function getWorkitemsPlan(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-plan-workitems\");\n\n    return $.read({\n      url: url,\n      data: params,\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  getTransitionsByPlan: function getTransitionsByPlan(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-plan-transitions-get\");\n\n    return $.read({\n      url: url,\n      data: params,\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  editActivityPlan: function editActivityPlan(params) {\n    var self = this;\n    var data = {};\n\n    if (params.activity) {\n      data = params.activity;\n      data.items = params.items;\n    } else {\n      data = params;\n    }\n\n    var url = self.serviceLocator.getUrl(\"project-plan-activity-edit\").replace(\"{idPlan}\", data.idPlan).replace(\"{id}\", data.id);\n\n    return $.update({\n      url: url,\n      data: JSON.stringify(data),\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  getPlanByParent: function getPlanByParent(data) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-plan-get-by-parent\");\n    var def = $.Deferred();\n\n    $.when($.read({\n      url: url,\n      data: data,\n      dataType: \"json\",\n      contentType: \"application/json\" })).\n    done(function (response) {\n      def.resolve(response);\n    });\n\n    return def.promise();\n\n  },\n\n  getItemsByActivity: function getItemsByActivity(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"project-plan-activity-tasks-get\");\n    return $.read({\n      url: url,\n      data: params,\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  getPlanParent: function getPlanParent(data) {\n    var self = this,\n    url = self.serviceLocator.getUrl(\"project-plan-parent\");\n    return $.read({\n      url: url,\n      data: data,\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Serializador de servicio de entitiData\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  serializeEntityData: function serializeEntityData(data) {\n    var serializedData = data;\n    serializedData.entities = [];\n\n    /**\r\n                                   * build the return object.\r\n                                   * @param header\r\n                                   * @param row\r\n                                   * @returns {{data: {}, guid: *, surrogateKey: *, timestamp: *}}\r\n                                   * @private\r\n                                   */\n    function _buildNewObject(header, row) {\n      var newObject = {\n        data: {},\n        guid: row.guidEntity,\n        timestamp: header.timestamp },\n\n      columns = header.columns,\n      rowData = row.row;\n\n      for (name in row) {\n        if (row.hasOwnProperty(name) && name.toString() !== \"row\" && name.toString() !== \"id\") {\n          newObject[name] = row[name];\n        }\n      }\n\n      for (var i = 0, len = columns.length; i < len; i += 1) {\n        newObject.data[columns[i]] = rowData[i];\n      }\n\n      return newObject;\n    };\n\n    var k = -1,kRow;\n    while (kRow = data.rows[++k]) {\n      var i = -1,iCell;\n      while (iCell = data.cells[++i]) {\n        if (iCell.id === kRow.id) {\n          var kReturnObject = _buildNewObject(iCell, kRow);\n          serializedData.entities.push(kReturnObject);\n          break;\n        }\n      }\n    }\n\n    return serializedData;\n  },\n\n  getCardViewCustomizedColumns: function getCardViewCustomizedColumns(params) {\n    var self = this;\n    params = params || {};\n    params.sortData = bizagi.util.getLastProcessInboxSort();\n    return this.getMobileActivities(params);\n  },\n  /**\r\n      * Method that calls the activities endpoint and handles sorting and filtering\r\n      */\n  getMobileActivities: function getMobileActivities(params) {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"case-handler-getActivityList\");\n\n    var data = params || {};\n    // information for sort\n    var sortData = params.sortData;\n    if (sortData) {\n      if (bizagi.util.isMobileInboxByProcessSupported() && sortData.sortOrder && sortData.sortDirection && sortData.sortFieldName) {\n        data.orderFieldName = sortData.sortFieldName;\n        data.orderType = sortData.sortDirection == 'asc' ? 0 : 1;\n        data.order = sortData.sortOrder;\n      } else\n      {\n        delete data.sortData;\n      }\n    }\n    if (typeof params.radNumber !== \"undefined\") {\n      data.radNumber = params.radNumber;\n    }\n    if (params.idWfClass != -1) {\n      data.idWfClass = params.idWfClass;\n    }\n    data.mobileDevice = bizagi.util.isMobileDevice();\n    data.page = data.page || 1;\n    data.pageSize = data.pageSize || 10;\n    if (data.idWfClass != undefined && data.idWfClass < 0) {\n      delete data.idWfClass;\n    }\n\n    if (params.smartInboxId) {\n      data.smartInboxGuid = params.smartInboxId;\n    }\n\n    if (params.liveFilterData) {\n      data.smartInboxFilter = self.encodeLiveFilter(params.liveFilterData);\n      delete params.liveFilterData;\n    }\n\n    var ajaxParams = {\n      url: url,\n      data: data,\n      type: \"GET\",\n      dataType: \"json\" };\n\n    if (params.avoidLoader) {\n      ajaxParams.avoidLoader = true;\n      delete data.avoidLoader;\n    }\n\n\n    var serverResponse;\n    return $.ajax(ajaxParams).then(function (response) {\n      bizagi.util.setLastProcessInboxProcessColumns(response.headers);\n      serverResponse = response;\n      return params.includeSyncErrors && params.inputtray == \"inbox\" ? self.getInboxSyncErrors() : undefined;\n    }).\n    then(function (localSyncErrors) {\n      if (localSyncErrors != undefined) {\n        serverResponse.syncErrors = localSyncErrors;\n      }\n      return serverResponse;\n    });\n\n  },\n\n  /**\r\n      * Encode json filter to base64\r\n      * @param {json} filter \r\n      */\n  encodeLiveFilter: function encodeLiveFilter(filter) {\n    var serializeFilter = \"\";\n\n    var CryptoJS = CryptoJS || function (t, e) {var r = {},i = r.lib = {},n = function n() {},o = i.Base = { extend: function extend(t) {n.prototype = this;var e = new n();return t && e.mixIn(t), e.hasOwnProperty(\"init\") || (e.init = function () {e.$super.init.apply(this, arguments);}), e.init.prototype = e, e.$super = this, e;}, create: function create() {var t = this.extend();return t.init.apply(t, arguments), t;}, init: function init() {}, mixIn: function mixIn(t) {for (var e in t) {t.hasOwnProperty(e) && (this[e] = t[e]);}t.hasOwnProperty(\"toString\") && (this.toString = t.toString);}, clone: function clone() {return this.init.prototype.extend(this);} },s = i.WordArray = o.extend({ init: function init(t, e) {t = this.words = t || [], this.sigBytes = null != e ? e : 4 * t.length;}, toString: function toString(t) {return (t || a).stringify(this);}, concat: function concat(t) {var e = this.words,r = t.words,i = this.sigBytes;if (t = t.sigBytes, this.clamp(), i % 4) for (var n = 0; n < t; n++) {e[i + n >>> 2] |= (r[n >>> 2] >>> 24 - n % 4 * 8 & 255) << 24 - (i + n) % 4 * 8;} else if (65535 < r.length) for (n = 0; n < t; n += 4) {e[i + n >>> 2] = r[n >>> 2];} else e.push.apply(e, r);return this.sigBytes += t, this;}, clamp: function clamp() {var e = this.words,r = this.sigBytes;e[r >>> 2] &= 4294967295 << 32 - r % 4 * 8, e.length = t.ceil(r / 4);}, clone: function clone() {var t = o.clone.call(this);return t.words = this.words.slice(0), t;}, random: function random(e) {for (var r = [], i = 0; i < e; i += 4) {r.push(4294967296 * t.random() | 0);}return new s.init(r, e);} }),c = r.enc = {},a = c.Hex = { stringify: function stringify(t) {var e = t.words;t = t.sigBytes;for (var r = [], i = 0; i < t; i++) {var n = e[i >>> 2] >>> 24 - i % 4 * 8 & 255;r.push((n >>> 4).toString(16)), r.push((15 & n).toString(16));}return r.join(\"\");}, parse: function parse(t) {for (var e = t.length, r = [], i = 0; i < e; i += 2) {r[i >>> 3] |= parseInt(t.substr(i, 2), 16) << 24 - i % 8 * 4;}return new s.init(r, e / 2);} },f = c.Latin1 = { stringify: function stringify(t) {var e = t.words;t = t.sigBytes;for (var r = [], i = 0; i < t; i++) {r.push(String.fromCharCode(e[i >>> 2] >>> 24 - i % 4 * 8 & 255));}return r.join(\"\");}, parse: function parse(t) {for (var e = t.length, r = [], i = 0; i < e; i++) {r[i >>> 2] |= (255 & t.charCodeAt(i)) << 24 - i % 4 * 8;}return new s.init(r, e);} },h = c.Utf8 = { stringify: function stringify(t) {try {return decodeURIComponent(escape(f.stringify(t)));} catch (t) {throw Error(\"Malformed UTF-8 data\");}}, parse: function parse(t) {return f.parse(unescape(encodeURIComponent(t)));} },u = i.BufferedBlockAlgorithm = o.extend({ reset: function reset() {this._data = new s.init(), this._nDataBytes = 0;}, _append: function _append(t) {\"string\" == typeof t && (t = h.parse(t)), this._data.concat(t), this._nDataBytes += t.sigBytes;}, _process: function _process(e) {var r = this._data,i = r.words,n = r.sigBytes,o = this.blockSize,c = n / (4 * o);if (e = (c = e ? t.ceil(c) : t.max((0 | c) - this._minBufferSize, 0)) * o, n = t.min(4 * e, n), e) {for (var a = 0; a < e; a += o) {this._doProcessBlock(i, a);}a = i.splice(0, e), r.sigBytes -= n;}return new s.init(a, n);}, clone: function clone() {var t = o.clone.call(this);return t._data = this._data.clone(), t;}, _minBufferSize: 0 });i.Hasher = u.extend({ cfg: o.extend(), init: function init(t) {this.cfg = this.cfg.extend(t), this.reset();}, reset: function reset() {u.reset.call(this), this._doReset();}, update: function update(t) {return this._append(t), this._process(), this;}, finalize: function finalize(t) {return t && this._append(t), this._doFinalize();}, blockSize: 16, _createHelper: function _createHelper(t) {return function (e, r) {return new t.init(r).finalize(e);};}, _createHmacHelper: function _createHmacHelper(t) {return function (e, r) {return new p.HMAC.init(t, r).finalize(e);};} });var p = r.algo = {};return r;}(Math);!function () {var t = CryptoJS,e = t.lib.WordArray;t.enc.Base64 = { stringify: function stringify(t) {var e = t.words,r = t.sigBytes,i = this._map;t.clamp(), t = [];for (var n = 0; n < r; n += 3) {for (var o = (e[n >>> 2] >>> 24 - n % 4 * 8 & 255) << 16 | (e[n + 1 >>> 2] >>> 24 - (n + 1) % 4 * 8 & 255) << 8 | e[n + 2 >>> 2] >>> 24 - (n + 2) % 4 * 8 & 255, s = 0; 4 > s && n + .75 * s < r; s++) {t.push(i.charAt(o >>> 6 * (3 - s) & 63));}}if (e = i.charAt(64)) for (; t.length % 4;) {t.push(e);}return t.join(\"\");}, parse: function parse(t) {var r = t.length,i = this._map;(n = i.charAt(64)) && -1 != (n = t.indexOf(n)) && (r = n);for (var n = [], o = 0, s = 0; s < r; s++) {if (s % 4) {var c = i.indexOf(t.charAt(s - 1)) << s % 4 * 2,a = i.indexOf(t.charAt(s)) >>> 6 - s % 4 * 2;n[o >>> 2] |= (c | a) << 24 - o % 4 * 8, o++;}}return e.create(n, o);}, _map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\" };}(), function (t) {function e(t, e, r, i, n, o, s) {return ((t = t + (e & r | ~e & i) + n + s) << o | t >>> 32 - o) + e;}function r(t, e, r, i, n, o, s) {return ((t = t + (e & i | r & ~i) + n + s) << o | t >>> 32 - o) + e;}function i(t, e, r, i, n, o, s) {return ((t = t + (e ^ r ^ i) + n + s) << o | t >>> 32 - o) + e;}function n(t, e, r, i, n, o, s) {return ((t = t + (r ^ (e | ~i)) + n + s) << o | t >>> 32 - o) + e;}for (var o = CryptoJS, s = (a = o.lib).WordArray, c = a.Hasher, a = o.algo, f = [], h = 0; 64 > h; h++) {f[h] = 4294967296 * t.abs(t.sin(h + 1)) | 0;}a = a.MD5 = c.extend({ _doReset: function _doReset() {this._hash = new s.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function _doProcessBlock(t, o) {for (var s = 0; 16 > s; s++) {var c = t[a = o + s];t[a] = 16711935 & (c << 8 | c >>> 24) | 4278255360 & (c << 24 | c >>> 8);}s = this._hash.words;var a = t[o + 0],h = (c = t[o + 1], t[o + 2]),u = t[o + 3],p = t[o + 4],d = t[o + 5],l = t[o + 6],y = t[o + 7],_ = t[o + 8],v = t[o + 9],g = t[o + 10],B = t[o + 11],x = t[o + 12],S = t[o + 13],k = t[o + 14],m = t[o + 15],z = e(z = s[0], D = s[1], w = s[2], C = s[3], a, 7, f[0]),C = e(C, z, D, w, c, 12, f[1]),w = e(w, C, z, D, h, 17, f[2]),D = e(D, w, C, z, u, 22, f[3]);z = e(z, D, w, C, p, 7, f[4]), C = e(C, z, D, w, d, 12, f[5]), w = e(w, C, z, D, l, 17, f[6]), D = e(D, w, C, z, y, 22, f[7]), z = e(z, D, w, C, _, 7, f[8]), C = e(C, z, D, w, v, 12, f[9]), w = e(w, C, z, D, g, 17, f[10]), D = e(D, w, C, z, B, 22, f[11]), z = e(z, D, w, C, x, 7, f[12]), C = e(C, z, D, w, S, 12, f[13]), w = e(w, C, z, D, k, 17, f[14]), z = r(z, D = e(D, w, C, z, m, 22, f[15]), w, C, c, 5, f[16]), C = r(C, z, D, w, l, 9, f[17]), w = r(w, C, z, D, B, 14, f[18]), D = r(D, w, C, z, a, 20, f[19]), z = r(z, D, w, C, d, 5, f[20]), C = r(C, z, D, w, g, 9, f[21]), w = r(w, C, z, D, m, 14, f[22]), D = r(D, w, C, z, p, 20, f[23]), z = r(z, D, w, C, v, 5, f[24]), C = r(C, z, D, w, k, 9, f[25]), w = r(w, C, z, D, u, 14, f[26]), D = r(D, w, C, z, _, 20, f[27]), z = r(z, D, w, C, S, 5, f[28]), C = r(C, z, D, w, h, 9, f[29]), w = r(w, C, z, D, y, 14, f[30]), z = i(z, D = r(D, w, C, z, x, 20, f[31]), w, C, d, 4, f[32]), C = i(C, z, D, w, _, 11, f[33]), w = i(w, C, z, D, B, 16, f[34]), D = i(D, w, C, z, k, 23, f[35]), z = i(z, D, w, C, c, 4, f[36]), C = i(C, z, D, w, p, 11, f[37]), w = i(w, C, z, D, y, 16, f[38]), D = i(D, w, C, z, g, 23, f[39]), z = i(z, D, w, C, S, 4, f[40]), C = i(C, z, D, w, a, 11, f[41]), w = i(w, C, z, D, u, 16, f[42]), D = i(D, w, C, z, l, 23, f[43]), z = i(z, D, w, C, v, 4, f[44]), C = i(C, z, D, w, x, 11, f[45]), w = i(w, C, z, D, m, 16, f[46]), z = n(z, D = i(D, w, C, z, h, 23, f[47]), w, C, a, 6, f[48]), C = n(C, z, D, w, y, 10, f[49]), w = n(w, C, z, D, k, 15, f[50]), D = n(D, w, C, z, d, 21, f[51]), z = n(z, D, w, C, x, 6, f[52]), C = n(C, z, D, w, u, 10, f[53]), w = n(w, C, z, D, g, 15, f[54]), D = n(D, w, C, z, c, 21, f[55]), z = n(z, D, w, C, _, 6, f[56]), C = n(C, z, D, w, m, 10, f[57]), w = n(w, C, z, D, l, 15, f[58]), D = n(D, w, C, z, S, 21, f[59]), z = n(z, D, w, C, p, 6, f[60]), C = n(C, z, D, w, B, 10, f[61]), w = n(w, C, z, D, h, 15, f[62]), D = n(D, w, C, z, v, 21, f[63]);s[0] = s[0] + z | 0, s[1] = s[1] + D | 0, s[2] = s[2] + w | 0, s[3] = s[3] + C | 0;}, _doFinalize: function _doFinalize() {var e = this._data,r = e.words,i = 8 * this._nDataBytes,n = 8 * e.sigBytes;r[n >>> 5] |= 128 << 24 - n % 32;var o = t.floor(i / 4294967296);for (r[15 + (n + 64 >>> 9 << 4)] = 16711935 & (o << 8 | o >>> 24) | 4278255360 & (o << 24 | o >>> 8), r[14 + (n + 64 >>> 9 << 4)] = 16711935 & (i << 8 | i >>> 24) | 4278255360 & (i << 24 | i >>> 8), e.sigBytes = 4 * (r.length + 1), this._process(), r = (e = this._hash).words, i = 0; 4 > i; i++) {n = r[i], r[i] = 16711935 & (n << 8 | n >>> 24) | 4278255360 & (n << 24 | n >>> 8);}return e;}, clone: function clone() {var t = c.clone.call(this);return t._hash = this._hash.clone(), t;} }), o.MD5 = c._createHelper(a), o.HmacMD5 = c._createHmacHelper(a);}(Math), function () {var t,e = CryptoJS,r = (t = e.lib).Base,i = t.WordArray,n = (t = e.algo).EvpKDF = r.extend({ cfg: r.extend({ keySize: 4, hasher: t.MD5, iterations: 1 }), init: function init(t) {this.cfg = this.cfg.extend(t);}, compute: function compute(t, e) {for (var r = (c = this.cfg).hasher.create(), n = i.create(), o = n.words, s = c.keySize, c = c.iterations; o.length < s;) {a && r.update(a);var a = r.update(t).finalize(e);r.reset();for (var f = 1; f < c; f++) {a = r.finalize(a), r.reset();}n.concat(a);}return n.sigBytes = 4 * s, n;} });e.EvpKDF = function (t, e, r) {return n.create(r).compute(t, e);};}(), CryptoJS.lib.Cipher || function (t) {var e = (d = CryptoJS).lib,r = e.Base,i = e.WordArray,n = e.BufferedBlockAlgorithm,o = d.enc.Base64,s = d.algo.EvpKDF,c = e.Cipher = n.extend({ cfg: r.extend(), createEncryptor: function createEncryptor(t, e) {return this.create(this._ENC_XFORM_MODE, t, e);}, createDecryptor: function createDecryptor(t, e) {return this.create(this._DEC_XFORM_MODE, t, e);}, init: function init(t, e, r) {this.cfg = this.cfg.extend(r), this._xformMode = t, this._key = e, this.reset();}, reset: function reset() {n.reset.call(this), this._doReset();}, process: function process(t) {return this._append(t), this._process();}, finalize: function finalize(t) {return t && this._append(t), this._doFinalize();}, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function _createHelper(t) {return { encrypt: function encrypt(e, r, i) {return (\"string\" == typeof r ? l : p).encrypt(t, e, r, i);}, decrypt: function decrypt(e, r, i) {return (\"string\" == typeof r ? l : p).decrypt(t, e, r, i);} };} });e.StreamCipher = c.extend({ _doFinalize: function _doFinalize() {return this._process(!0);}, blockSize: 1 });var a = d.mode = {},f = function f(t, e, r) {var i = this._iv;i ? this._iv = void 0 : i = this._prevBlock;for (var n = 0; n < r; n++) {t[e + n] ^= i[n];}},h = (e.BlockCipherMode = r.extend({ createEncryptor: function createEncryptor(t, e) {return this.Encryptor.create(t, e);}, createDecryptor: function createDecryptor(t, e) {return this.Decryptor.create(t, e);}, init: function init(t, e) {this._cipher = t, this._iv = e;} })).extend();h.Encryptor = h.extend({ processBlock: function processBlock(t, e) {var r = this._cipher,i = r.blockSize;f.call(this, t, e, i), r.encryptBlock(t, e), this._prevBlock = t.slice(e, e + i);} }), h.Decryptor = h.extend({ processBlock: function processBlock(t, e) {var r = this._cipher,i = r.blockSize,n = t.slice(e, e + i);r.decryptBlock(t, e), f.call(this, t, e, i), this._prevBlock = n;} }), a = a.CBC = h, h = (d.pad = {}).Pkcs7 = { pad: function pad(t, e) {for (var r, n = (r = (r = 4 * e) - t.sigBytes % r) << 24 | r << 16 | r << 8 | r, o = [], s = 0; s < r; s += 4) {o.push(n);}r = i.create(o, r), t.concat(r);}, unpad: function unpad(t) {t.sigBytes -= 255 & t.words[t.sigBytes - 1 >>> 2];} }, e.BlockCipher = c.extend({ cfg: c.cfg.extend({ mode: a, padding: h }), reset: function reset() {c.reset.call(this);var t = (e = this.cfg).iv,e = e.mode;if (this._xformMode == this._ENC_XFORM_MODE) var r = e.createEncryptor;else r = e.createDecryptor, this._minBufferSize = 1;this._mode = r.call(e, this, t && t.words);}, _doProcessBlock: function _doProcessBlock(t, e) {this._mode.processBlock(t, e);}, _doFinalize: function _doFinalize() {var t = this.cfg.padding;if (this._xformMode == this._ENC_XFORM_MODE) {t.pad(this._data, this.blockSize);var e = this._process(!0);} else e = this._process(!0), t.unpad(e);return e;}, blockSize: 4 });var u = e.CipherParams = r.extend({ init: function init(t) {this.mixIn(t);}, toString: function toString(t) {return (t || this.formatter).stringify(this);} }),p = (a = (d.format = {}).OpenSSL = { stringify: function stringify(t) {var e = t.ciphertext;return ((t = t.salt) ? i.create([1398893684, 1701076831]).concat(t).concat(e) : e).toString(o);}, parse: function parse(t) {var e = (t = o.parse(t)).words;if (1398893684 == e[0] && 1701076831 == e[1]) {var r = i.create(e.slice(2, 4));e.splice(0, 4), t.sigBytes -= 16;}return u.create({ ciphertext: t, salt: r });} }, e.SerializableCipher = r.extend({ cfg: r.extend({ format: a }), encrypt: function encrypt(t, e, r, i) {i = this.cfg.extend(i);var n = t.createEncryptor(r, i);return e = n.finalize(e), n = n.cfg, u.create({ ciphertext: e, key: r, iv: n.iv, algorithm: t, mode: n.mode, padding: n.padding, blockSize: t.blockSize, formatter: i.format });}, decrypt: function decrypt(t, e, r, i) {return i = this.cfg.extend(i), e = this._parse(e, i.format), t.createDecryptor(r, i).finalize(e.ciphertext);}, _parse: function _parse(t, e) {return \"string\" == typeof t ? e.parse(t, this) : t;} })),d = (d.kdf = {}).OpenSSL = { execute: function execute(t, e, r, n) {return n || (n = i.random(8)), t = s.create({ keySize: e + r }).compute(t, n), r = i.create(t.words.slice(e), 4 * r), t.sigBytes = 4 * e, u.create({ key: t, iv: r, salt: n });} },l = e.PasswordBasedCipher = p.extend({ cfg: p.cfg.extend({ kdf: d }), encrypt: function encrypt(t, e, r, i) {return r = (i = this.cfg.extend(i)).kdf.execute(r, t.keySize, t.ivSize), i.iv = r.iv, (t = p.encrypt.call(this, t, e, r.key, i)).mixIn(r), t;}, decrypt: function decrypt(t, e, r, i) {return i = this.cfg.extend(i), e = this._parse(e, i.format), r = i.kdf.execute(r, t.keySize, t.ivSize, e.salt), i.iv = r.iv, p.decrypt.call(this, t, e, r.key, i);} });}(), function () {for (var t = CryptoJS, e = t.lib.BlockCipher, r = t.algo, i = [], n = [], o = [], s = [], c = [], a = [], f = [], h = [], u = [], p = [], d = [], l = 0; 256 > l; l++) {d[l] = 128 > l ? l << 1 : l << 1 ^ 283;}var y = 0,_ = 0;for (l = 0; 256 > l; l++) {var v = (v = _ ^ _ << 1 ^ _ << 2 ^ _ << 3 ^ _ << 4) >>> 8 ^ 255 & v ^ 99;i[y] = v, n[v] = y;var g = d[y],B = d[g],x = d[B],S = 257 * d[v] ^ 16843008 * v;o[y] = S << 24 | S >>> 8, s[y] = S << 16 | S >>> 16, c[y] = S << 8 | S >>> 24, a[y] = S, S = 16843009 * x ^ 65537 * B ^ 257 * g ^ 16843008 * y, f[v] = S << 24 | S >>> 8, h[v] = S << 16 | S >>> 16, u[v] = S << 8 | S >>> 24, p[v] = S, y ? (y = g ^ d[d[d[x ^ g]]], _ ^= d[d[_]]) : y = _ = 1;}var k = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];r = r.AES = e.extend({ _doReset: function _doReset() {for (var t = (r = this._key).words, e = r.sigBytes / 4, r = 4 * ((this._nRounds = e + 6) + 1), n = this._keySchedule = [], o = 0; o < r; o++) {if (o < e) n[o] = t[o];else {var s = n[o - 1];o % e ? 6 < e && 4 == o % e && (s = i[s >>> 24] << 24 | i[s >>> 16 & 255] << 16 | i[s >>> 8 & 255] << 8 | i[255 & s]) : (s = i[(s = s << 8 | s >>> 24) >>> 24] << 24 | i[s >>> 16 & 255] << 16 | i[s >>> 8 & 255] << 8 | i[255 & s], s ^= k[o / e | 0] << 24), n[o] = n[o - e] ^ s;}}for (t = this._invKeySchedule = [], e = 0; e < r; e++) {o = r - e, s = e % 4 ? n[o] : n[o - 4], t[e] = 4 > e || 4 >= o ? s : f[i[s >>> 24]] ^ h[i[s >>> 16 & 255]] ^ u[i[s >>> 8 & 255]] ^ p[i[255 & s]];}}, encryptBlock: function encryptBlock(t, e) {this._doCryptBlock(t, e, this._keySchedule, o, s, c, a, i);}, decryptBlock: function decryptBlock(t, e) {var r = t[e + 1];t[e + 1] = t[e + 3], t[e + 3] = r, this._doCryptBlock(t, e, this._invKeySchedule, f, h, u, p, n), r = t[e + 1], t[e + 1] = t[e + 3], t[e + 3] = r;}, _doCryptBlock: function _doCryptBlock(t, e, r, i, n, o, s, c) {for (var a = this._nRounds, f = t[e] ^ r[0], h = t[e + 1] ^ r[1], u = t[e + 2] ^ r[2], p = t[e + 3] ^ r[3], d = 4, l = 1; l < a; l++) {var y = i[f >>> 24] ^ n[h >>> 16 & 255] ^ o[u >>> 8 & 255] ^ s[255 & p] ^ r[d++],_ = i[h >>> 24] ^ n[u >>> 16 & 255] ^ o[p >>> 8 & 255] ^ s[255 & f] ^ r[d++],v = i[u >>> 24] ^ n[p >>> 16 & 255] ^ o[f >>> 8 & 255] ^ s[255 & h] ^ r[d++];p = i[p >>> 24] ^ n[f >>> 16 & 255] ^ o[h >>> 8 & 255] ^ s[255 & u] ^ r[d++], f = y, h = _, u = v;}y = (c[f >>> 24] << 24 | c[h >>> 16 & 255] << 16 | c[u >>> 8 & 255] << 8 | c[255 & p]) ^ r[d++], _ = (c[h >>> 24] << 24 | c[u >>> 16 & 255] << 16 | c[p >>> 8 & 255] << 8 | c[255 & f]) ^ r[d++], v = (c[u >>> 24] << 24 | c[p >>> 16 & 255] << 16 | c[f >>> 8 & 255] << 8 | c[255 & h]) ^ r[d++], p = (c[p >>> 24] << 24 | c[f >>> 16 & 255] << 16 | c[h >>> 8 & 255] << 8 | c[255 & u]) ^ r[d++], t[e] = y, t[e + 1] = _, t[e + 2] = v, t[e + 3] = p;}, keySize: 8 });t.AES = e._createHelper(r);}();\n\n    try {\n      serializeFilter = JSON.encode(filter);\n    } catch (e) {\n      serializeFilter = JSON.encode(\"[]\");\n    }\n\n    var encoded = CryptoJS.enc.Utf8.parse(serializeFilter);\n\n    return CryptoJS.enc.Base64.stringify(encoded);;\n  },\n\n  /**\r\n      * Include default all processes item in server resposne\r\n      */\n  includeAllProcessesItem: function includeAllProcessesItem(response) {\n    // all Process - no filter\n    var allProcessItem = {\n      idworkflow: \"-1\",\n      guidWFClass: \"-1\",\n      name: bizagi.localization.getResource(\"workportal-widget-inbox-all-processes\"),\n      path: \"App/\",\n      count: 0,\n      isFavorite: \"false\",\n      icon: \"\",\n      category: \"Processes\",\n      guidFavorite: \"\",\n      orderValue: String.fromCharCode(0) };\n\n\n    if (response.workflows) {\n      // each for count all cases or activities\n      $.each(response.workflows.workflow, function (i, workflow) {\n        response.workflows.workflow[i].orderValue = response.workflows.workflow[i].name;\n        allProcessItem.count += Number(workflow.count);\n      });\n      // Set first element in the list\n      response.workflows.workflow.unshift(allProcessItem);\n    };\n  },\n\n  /**\r\n      * validate column enabled / currentInboxView\r\n      * @returns {bool} header enabled\r\n      */\n  isInboxSystemHeaderSortable: function isInboxSystemHeaderSortable(field, lastProcessInbox, viewType) {\n    var result = false;\n    var headersEnabled = {};\n\n    if (viewType === 'detailView') {\n      headersEnabled = {\n        \"radnumber\": true,\n        \"wiestimatedsolutiondate\": true,\n        \"isfavorite\": true,\n        \"currenttask\": true,\n        \"wfclsdisplayname\": true };\n\n    } else\n    if (viewType === 'cardView') {\n      headersEnabled = {\n        \"radnumber\": true,\n        \"wiestimatedsolutiondate\": true,\n        \"isfavorite\": true,\n        \"currenttask\": true,\n        \"wfclsdisplayname\": true,\n        \"taskstate\": true };\n\n    }\n\n    // Only if wfclsdisplayname is enabled\n    if (headersEnabled.wfclsdisplayname) {\n      // specific process list \n      var isSmartInbox = lastProcessInbox.smartInboxId != undefined && lastProcessInbox.smartInboxId != null;\n      var disableProcessColumn = isSmartInbox && field.fieldName == \"wfclsdisplayname\" && !field.isSmartInbox;\n      if (lastProcessInbox.idWorkflow != -1 || disableProcessColumn) {\n        headersEnabled.wfclsdisplayname = false;\n      }\n    }\n\n    if (field && field.fieldName) {\n      // columns enabled\n      var columnEnabled = headersEnabled[field.fieldName.toLowerCase()];\n      // validate\n      if (columnEnabled && (field.order || field.fieldFilterName)) {\n        result = true;\n      }\n    }\n\n    return result;\n  },\n\n  isInboxHeaderASystemColumn: function isInboxHeaderASystemColumn(field) {\n    var systemHeaders = {\n      \"taskstate\": true,\n      \"taskstateColor\": true,\n      \"radnumber\": true,\n      \"wfclsdisplayname\": true,\n      \"currenttask\": true,\n      \"cascreationdate\": true,\n      \"wiestimatedsolutiondate\": true,\n      \"cassolutiondate\": true,\n      \"idcase\": true,\n      \"idworkitem\": true,\n      \"taskid\": true,\n      \"atrisktime\": true,\n      \"currentuser\": true,\n      \"currentfullname\": true,\n      \"fieldName\": true,\n      \"idwfclass\": true,\n      \"isfavorite\": true,\n      \"guidfavorite\": true,\n      \"creatorfullname\": true };\n\n    return systemHeaders[field.toLowerCase()] || false;\n  },\n\n  /**\r\n      * Verify if custom column is enabled\r\n      * @returns {boolean} customcolumn enabled\r\n      */\n  validateCustomColumn: function validateCustomColumn(field, maxColumnsAllowedOnView, columnsAddedCount) {\n    var result = { isValid: false, selectedColumnsCount: columnsAddedCount };\n\n    // validate if countColumnsAdded < maxColumnsAllowedOnView\n    if (columnsAddedCount < maxColumnsAllowedOnView) {\n      // is customColumn\n      if (field.isSmartInbox || field.isCustomColumn) {\n        result.isValid = true;\n        result.selectedColumnsCount = columnsAddedCount + 1;\n      }\n    }\n\n    return result;\n  },\n  /**\r\n      * Configure for usage in online and offline services\r\n      */\n  configureGlobalHandlers: function configureGlobalHandlers() {\n    var self = this;\n    $(document).off(\"openForm.services\");\n    $(document).on(\"openForm.services\", function (_, params) {\n      self.activeForm = params.form;\n    });\n    $(document).off(\"disposeForm.services\");\n    $(document).on(\"disposeForm.services\", function (_, params) {\n      self.activeForm = undefined;\n    });\n  },\n\n\n\n  /**\r\n      * <SMART_INBOX>\r\n      */\n  getAllSmartInbox: function getAllSmartInbox() {\n    var self = this;\n    var data = {};\n\n    // Call ajax and returns promise\n    return $.read({ url: self.serviceLocator.getUrl(\"smartinbox-getAllInbox\"), data: data });\n  },\n\n  getSpecificSmartInbox: function getSpecificSmartInbox(params) {\n    var self = this;\n    var data = {};\n    var endPoint = self.serviceLocator.getUrl(\"smartinbox-specific-inbox\");\n    var url = endPoint.replace(\"{settingName}\", params.settingName);\n    url = url.replace(\"{owner}\", params.owner);\n    url = url.replace(\"{smartInboxId}\", params.smartInboxId);\n\n\n    // Call ajax and returns promise\n    return $.read({ url: url, data: data });\n  },\n\n\n  /*\r\n      *   Return all the available processes to SmartInbox\r\n      */\n  getAllProcessesSmartInbox: function getAllProcessesSmartInbox(params) {\n    var self = this;\n    var data = {};\n\n    // Call ajax and returns promise\n    return $.read({ url: self.serviceLocator.getUrl(\"smartinbox-processes\"), data: data });\n  },\n\n  /*\r\n      *   Return all the available processes to SmartInbox\r\n      */\n  getAllCustomizedColumnsSmartInbox: function getAllCustomizedColumnsSmartInbox(params) {\n    var self = this;\n    var data = JSON.stringify(params);\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"smartinbox-customized-columns\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  createSmartInbox: function createSmartInbox(params) {\n    var self = this;\n    var data = JSON.stringify(params);\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"smartinbox-createinbox\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  updateSmartInbox: function updateSmartInbox(params, model) {\n    var self = this;\n    var data = JSON.stringify(model);\n\n    var endPoint = self.serviceLocator.getUrl(\"smartinbox-specific-inbox\");\n    var url = endPoint.replace(\"{settingName}\", params.settingName);\n    url = url.replace(\"{owner}\", params.owner);\n    url = url.replace(\"{smartInboxId}\", params.smartInboxId);\n\n    return $.ajax({\n      url: url,\n      data: data,\n      type: \"PUT\",\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  deleteSmartInbox: function deleteSmartInbox(params) {\n    var self = this;\n    var data = {};\n    var endPoint = self.serviceLocator.getUrl(\"smartinbox-specific-inbox\");\n    var url = endPoint.replace(\"{settingName}\", params.settingName);\n    url = url.replace(\"{owner}\", params.owner);\n    url = url.replace(\"{smartInboxId}\", params.smartInboxId);\n\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: url,\n      //data: data,\n      type: \"DELETE\",\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n\n  },\n\n  shareSmartInbox: function shareSmartInbox(params, model) {\n    var self = this;\n    var data = JSON.stringify(model);\n    var endPoint = self.serviceLocator.getUrl(\"smartinbox-share\");\n    var url = endPoint.replace(\"{smartInboxId}\", params.smartInboxId);\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: url,\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n\n  },\n\n  getEntityValuesForInboxFilter: function getEntityValuesForInboxFilter(params) {\n    var self = this;\n\n    var url = self.serviceLocator.getUrl(\"smartinbox-entity-values\");\n    url = url.replace(\"{entityGuid}\", params.entityGuid);\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: url,\n      type: \"GET\",\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  getUserTasksForInboxFilter: function getUserTasksForInboxFilter(params) {\n    var self = this;\n    var url = \"\";\n\n    if (params.isSmartInbox) {\n      url = self.serviceLocator.getUrl(\"smartinbox-user-tasks\");\n      url = url.replace(\"{smartInboxId}\", params.id);\n    } else {\n      url = self.serviceLocator.getUrl(\"smartinbox-user-tasks-process\");\n      url = url.replace(\"{workflowId}\", params.id);\n    }\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: url,\n      type: \"GET\",\n      dataType: \"json\",\n      contentType: \"application/json\" });\n\n  },\n\n  /**\r\n      * END OF CODE SECTION FOR : </SMART_INBOX>\r\n      */\n\n  /**\r\n          * callServiceWithNetworkRetries\r\n          */\n  callServiceWithNetworkRetries: function callServiceWithNetworkRetries(context, serviceInvocation, pArguments, maxRetries, delayBetweenRetry, currentRetry, currentDeferred) {\n    var self = this;\n    var currentDeferred = currentDeferred || $.Deferred();\n    currentRetry = isNaN(currentRetry) ? 0 : currentRetry;\n    maxRetries = isNaN(maxRetries) ? 1 : maxRetries;\n    delayBetweenRetry = isNaN(delayBetweenRetry) ? 100 : delayBetweenRetry;\n    if (currentRetry >= maxRetries) {\n      console.error(\"Max retries reached\");\n      currentDeferred.reject(\"Max retries reached\");\n      return;\n    }\n\n    $.when(serviceInvocation.apply(context, pArguments)).\n    then(function (response) {\n      currentDeferred.resolve(response);\n    }).\n    fail(function (params) {\n      if (params.status === 0) {\n        setTimeout(function () {\n          self.callServiceWithNetworkRetries(context, serviceInvocation, pArguments, maxRetries, delayBetweenRetry, currentRetry + 1, currentDeferred);\n        }, delayBetweenRetry);\n      } else\n      {\n        currentDeferred.reject(params);\n      }\n    });\n\n    return currentDeferred.promise();\n  },\n\n  getAndSaveMobileFeaturesFromBizagiConfig: function getAndSaveMobileFeaturesFromBizagiConfig() {\n    var self = this;\n\n    if (bizagi.util.validateIfSaveMobileFeaturesIsEnabled()) {\n      $.when(self.getConfiguration()).then(function (configuration) {\n        if (configuration && configuration.features) {\n          bizagi.util.storeMobileFeatures(configuration.features);\n        }\n      });\n    }\n  } });","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n/**\r\n                                                                                                                                                                                                           * Routing service\r\n                                                                                                                                                                                                           *\r\n                                                                                                                                                                                                           * @author Edward J Morales\r\n                                                                                                                                                                                                           * @description This class has been created based on jira story DRAGON-4943\r\n                                                                                                                                                                                                           */\n\n$.Class.extend(\"bizagi.workportal.services.routing\",\n{\n  BIZAGI_WORKPORTAL_WIDGET_START_FORM: \"startForm\" },\n\n{\n  /**\r\n  * Main method\r\n  *\r\n  * @param params <object> json with parameters to route\r\n  * @return object deferred\r\n  */\n  init: function init(args) {\n    var self = this;\n    args = args || {};\n    self.params = args.params || {};\n    self.dataService = args.dataService || {};\n    self.modules = {\n      render: \"activityform\",\n      oldRender: \"oldrenderintegration\",\n      async: \"async\",\n      activitySelector: \"routing\" };\n\n\n    // By default render version is Bizagi GO\n    self.renderVersion = 2;\n\n    self.resetRouteInformation();\n  },\n\n  resetRouteInformation: function resetRouteInformation() {\n    var self = this;\n    self.route = {\n      module: \"\", // Name of module to route\n      moduleParams: {} // parameters of module\n    };\n  },\n\n  setRenderParams: function setRenderParams(params) {\n    var self = this;\n    self.params = self.getRenderParams(params);\n  },\n\n  /**\r\n     * Parse a format incoming parameters\r\n     * @param params object\r\n     * @return object json with render parameters\r\n     */\n  getRenderParams: function getRenderParams(params) {var _renderParams;\n    var self = this;\n\n    var renderParams = (_renderParams = {\n      idCase: parseInt(params.idCase || 0),\n      idWorkflow: parseInt(params.idWorkflow || 0),\n      idWorkitem: params.idWorkitem || params.idWorkItem || 0,\n      idTask: parseInt(params.idTask || 0),\n      eventAsTasks: params.eventAsTasks || false,\n      onlyUserWorkItems: params.onlyUserWorkItems || \"true\",\n      formsRenderVersion: params.formsRenderVersion || 0,\n      referrer: params.referrer || \"\",\n      isComplex: params.isComplex !== undefined ? true : false }, _defineProperty(_renderParams, \"formsRenderVersion\",\n    2), _defineProperty(_renderParams, \"onClose\",\n    params.onClose || \"\"), _defineProperty(_renderParams, \"isOfflineForm\",\n    params.isOfflineForm || false), _defineProperty(_renderParams, \"radNumber\",\n    params.radNumber || null), _defineProperty(_renderParams, \"offlineType\",\n    params.offlineType || null), _renderParams);\n\n\n    var skipSubprocessGlobalForm = true;\n    try {\n      skipSubprocessGlobalForm = BIZAGI_SETTINGS[\"skipSubprocessGlobalForm\"] || true;\n    } catch (e) {\n    }\n\n    self.skipSubprocessGlobalForm = skipSubprocessGlobalForm == \"true\";\n\n    return renderParams;\n  },\n  /**\r\n     * Define the next route to take\r\n     * @param params object\r\n     * @return deferred with specific path\r\n     */\n  getRoute: function getRoute(params) {\n    var self = this;\n    var def = new $.Deferred();\n\n    // Params Override\n    self.params = params ? params : self.params;\n\n    var fromTask = params.fromTask || params.idTask || \"\";\n    var fromWorkItemId = params.fromWorkItemId || params.idWorkitem || params.idWorkItem || \"\";\n\n    /**\r\n                                                                                                * Get form version\r\n                                                                                                */\n    $.when(self.getRenderVersion(self.params)).\n    done(function (renderVersion) {\n      self.renderVersion = renderVersion;\n      self.route.moduleParams = self.getRenderParams(self.params);\n\n      // Looking for workitems\n      $.when(self.dataService.getWorkitems({\n        idCase: self.params.idCase,\n        onlyUserWorkItems: self.params.onlyUserWorkItems,\n        isOfflineForm: self.params.isOfflineForm,\n        fromTask: fromTask,\n        fromWorkItemId: fromWorkItemId })).\n      done(function (getWorkItems) {\n        var workItems = getWorkItems.workItems.length;\n\n        /**\r\n                                                       * If routing has been called with idCase and idWorkitem\r\n                                                       * then go to the render\r\n                                                       */\n        self.route.moduleParams.hasWorkItems = workItems ? true : false;\n        self.route.moduleParams.isEvent = self.params.isEvent || false;\n        self.route.moduleParams.hasGlobalForm = bizagi.util.parseBoolean(getWorkItems.hasGlobalForm);\n\n        if (!bizagi.util.isEmpty(getWorkItems.idWfClass)) {\n          self.route.moduleParams.idWfClass = getWorkItems.idWfClass;\n        }\n\n        //The error came from the inbox\n        if (self.params.hasSyncError === true && self.params.syncError != undefined) {\n          self.includeSyncErrorIntoModuleparams(self.params.syncError);\n        }\n\n        if (self.route.moduleParams.idWorkitem > 0) {\n          self.setRenderModuleName(self.getRenderModuleName(renderVersion));\n          if (self.route.moduleParams.idTask === 0) {\n            // Try to found idTask\n            self.route.moduleParams.idTask = self.searchIdTask(self.route.moduleParams.idWorkitem);\n          }\n\n          // We have enough information to instance the render\n          self.route.moduleParams.radNumber = bizagi.util.isEmpty(params.radNumber) ?\n          getWorkItems.radNumber || \"\" : params.radNumber;\n          self.route.moduleParams.idWorkflow = getWorkItems.idWorkFlow || \"\";\n\n          var item = getWorkItems.workItems.find(function (el) {\n            return Number(el.idWorkItem) === Number(self.route.moduleParams.idWorkitem);\n          });\n          if (item != undefined) {\n            if (item.displayName != undefined) {\n              self.route.moduleParams.displayName = item.displayName;\n            }\n            self.route.moduleParams.mobileAccess = !(item.mobileAccess === false);\n            self.route.moduleParams.forceOffline = item.forceOffline === true;\n            self.route.moduleParams.workitemstate = params.workitemstate;\n          }\n\n          self.getSyncError(self.route.moduleParams).\n          then(function (syncError) {\n            if (syncError == undefined) return;\n            self.includeSyncErrorIntoModuleparams(syncError);\n          }).\n          always(function () {\n            def.resolve(self.route);\n            self.resetRouteInformation();\n          });\n        } else {\n\n          var listAsyncWorkItems = self.checkAsyncWorkItems(getWorkItems);\n\n          // Check if case has workItems\n          if (workItems === 0) {\n\n            self.route.moduleParams.idWorkflow = getWorkItems.idWorkFlow || \"\";\n            self.route.moduleParams.radNumber = getWorkItems.radNumber || \"\";\n\n            if ($.trim(getWorkItems.msgTask) !== \"\") {\n              def.resolve(self.routeToMessageForm(getWorkItems.msgTask));\n            } else if (bizagi.util.parseBoolean(getWorkItems.hasGlobalForm)) {\n              // hasn't work items, show global form\n              // Resolve route -> Global Form\n              self.route.moduleParams.displayName = null;\n              def.resolve(self.routeToGlobalForm(getWorkItems));\n            } else {\n              // Resolve route -> Global form without data\n              def.resolve(self.routeToGlobalFormWithoutData());\n            }\n          } else if (workItems === 1 || listAsyncWorkItems.length > 0) {\n            // it has one workItem\n            // Check if it is asyncronous activity\n            var workItemIndex = 0;\n            if (listAsyncWorkItems.length > 0) {\n              for (var workitemCounter = 0; workitemCounter < workItems; workitemCounter++) {\n\n                if (getWorkItems.workItems[workitemCounter].isAsynch == \"true\") {\n                  workItemIndex = workitemCounter;\n                  break;\n                }\n              }\n            }\n\n            // Change idCase\n            self.route.moduleParams.idCase = getWorkItems.workItems[workItemIndex].idCase;\n            self.route.moduleParams.idTask = getWorkItems.workItems[workItemIndex].idTask;\n            self.route.moduleParams.fromTask = getWorkItems.workItems[workItemIndex].idTask;\n            self.route.moduleParams.idWorkitem = getWorkItems.workItems[workItemIndex].idWorkItem;\n            self.route.moduleParams.idWorkflow = getWorkItems.workItems[workItemIndex].idWorkFlow;\n            self.route.moduleParams.displayName = getWorkItems.workItems[workItemIndex].displayName ?\n            getWorkItems.workItems[workItemIndex].displayName : \"\";\n            self.route.moduleParams.radNumber = getWorkItems.radNumber || \"\";\n            self.route.moduleParams.mobileAccess = !(getWorkItems.workItems[workItemIndex].mobileAccess === false);\n            self.route.moduleParams.forceOffline = getWorkItems.workItems[workItemIndex].forceOffline === true;\n\n            if (listAsyncWorkItems.length > 0) {\n              // Resolve asynchronous activity\n              self.setRenderModuleName(self.modules.async);\n            } else {\n              // Resolve render\n              self.setRenderModuleName(self.getRenderModuleName(renderVersion));\n            }\n\n            self.getSyncError(self.route.moduleParams).\n            then(function (syncError) {\n              if (syncError == undefined) return;\n              self.includeSyncErrorIntoModuleparams(syncError);\n            }).\n            always(function () {\n              def.resolve(self.route);\n              self.resetRouteInformation();\n            });\n          } else {\n\n            // it has many workItems or subprocess\n            // show routing window\n            getWorkItems.checkProcess = getWorkItems.subProcesses.length > 0 &&\n            self.skipSubprocessGlobalForm ? true : false;\n            getWorkItems.checkWorkItems = workItems > 1 ? true : false;\n\n            getWorkItems[\"fromSearchWidget\"] = self.params.referrer == \"search\" ? true : false;\n            self.setRenderModuleName(self.modules.activitySelector);\n            self.route.moduleParams.data = getWorkItems;\n\n\n            def.resolve(self.route);\n            self.resetRouteInformation();\n          }\n        }\n      }).fail(function (error) {\n        var msgTask = bizagi.localization.getResource(\"workportal-menu-search-found-no-cases\");\n        def.resolve(self.routeToMessageForm(msgTask));\n      });\n    }).fail(function (xhr, errorType, message) {\n      def.reject();\n    });\n\n    return def.promise();\n  },\n\n  /**\r\n     * Set name of module to instance\r\n     * @param renderName\r\n     */\n  setRenderModuleName: function setRenderModuleName(renderName) {\n    var self = this;\n\n    self.route.module = renderName;\n    self.route.moduleParams.widgetName = renderName;\n  },\n  /**\r\n     * Get render module\r\n     * @param renderVersion integer 1 || 2\r\n     * @returns boolean\r\n     */\n  getRenderModuleName: function getRenderModuleName(renderVersion) {\n    var self = this;\n    return renderVersion == 1 ? self.modules.oldRender : self.modules.render;\n  },\n  /**\r\n     * Search idTask from workItems object\r\n     * @return {number} idTask\r\n     * @param workItemsList\r\n     * @param workItemToSearch\r\n     */\n  searchIdTask: function searchIdTask(workItemsList, workItemToSearch) {\n    var idTask = 0;\n    workItemsList = workItemsList || [];\n\n    for (var i = 0, length = workItemsList.length; i < length; i++) {\n      //search idTask\n      if (parseInt(workItemsList[i][\"idWorkItem\"]) == parseInt(workItemToSearch)) {\n        idTask = parseInt(workItemsList[i][\"idTask\"]);\n        break;\n      }\n    }\n    return idTask;\n  },\n\n  /**\r\n     * Check if workitems has asynchronous activities\r\n     * @param data\r\n     * @returns {Array}\r\n     */\n  checkAsyncWorkItems: function checkAsyncWorkItems(data) {\n    var result = [];\n\n    $.each(data[\"workItems\"], function (key) {\n      if (data[\"workItems\"][key][\"isAsynch\"] == \"true\") {\n        result.push({\n          idCase: data[\"idCase\"],\n          idWorkitem: data.workItems[key].idWorkItem,\n          idTask: data.workItems[key].idTask });\n\n      }\n    });\n    return result;\n  },\n\n  /**\r\n     * Resolve global form route\r\n     * @param getWorkitems\r\n     * @returns {{module: string, moduleParams: {}}|*}\r\n     */\n  routeToGlobalForm: function routeToGlobalForm(getWorkitems) {\n    var self = this;\n\n    // Override idCase and idWorkflow\n    self.route.moduleParams.idCase = $.isNumeric(getWorkitems.idCaseForGlobalForm) && getWorkitems.\n    idCaseForGlobalForm > 0 ?\n    getWorkitems.idCaseForGlobalForm : self.route.moduleParams.idCase;\n\n    self.route.moduleParams.idWorkflow = parseInt(getWorkitems.idWorkFlow || 0);\n\n    if (self.renderVersion == 1) {\n      // Old render\n      var urlTemplate = self.dataService.serviceLocator.getUrl(\"old-render\") +\n      \"?PostBack=1&idCase=%s&idWorkitem=%s&idTask=%s\";\n      var idCase = self.route.moduleParams.idCase || \"\";\n      var idWorkitem = self.route.moduleParams.idWorkitem || \"\";\n      var idTask = self.route.moduleParams.idTask || \"\";\n      var url = printf(urlTemplate, idCase, idWorkitem, idTask);\n\n      self.route.moduleParams.onlyUserWorkItems = self.route.moduleParams.idCase || \"\";\n\n      self.setRenderModuleName(self.modules.oldRender);\n      self.route.moduleParams.url = url;\n    } else {\n      // Bizagi\n      self.setRenderModuleName(self.modules.render);\n    }\n\n    return self.route;\n  },\n  /**\r\n     * Resolve global form\r\n     * @returns {{module: string, moduleParams: {}}|*}\r\n     */\n  routeToGlobalFormWithoutData: function routeToGlobalFormWithoutData() {\n    var self = this;\n\n    self.setRenderModuleName(self.modules.render);\n    self.route.moduleParams.withOutGlobalForm = true;\n\n    return self.route;\n  },\n\n  /**\r\n     * Resolve Render with personalized message\r\n     * @param message\r\n     * @returns {{module: string, moduleParams: {}}|*|bizagi.workportal.services.routing.route}\r\n     */\n  routeToMessageForm: function routeToMessageForm(message) {\n    var self = this;\n    message = message || \"\";\n\n    self.setRenderModuleName(self.modules.render);\n    self.route.moduleParams.withOutGlobalForm = true;\n    self.route.moduleParams.messageForm = message;\n\n    return self.route;\n  },\n\n  /**\r\n     * Return the forms render version from parameters or service\r\n     * @param params object\r\n     * @returns {integer}\r\n     */\n  getRenderVersion: function getRenderVersion(params) {\n    var self = this,defer = new $.Deferred();\n\n    // Try get from parameters\n    var formsVersion = params.formsRenderVersion || 0;\n    if (formsVersion != 0) {\n      // Response from parameters\n      defer.resolve(formsVersion);\n    } else {\n\n      // Get from service\n      $.when(self.dataService.getCaseFormsRenderVersion({\n        idCase: params.idCase })).\n      done(function (data) {\n        formsVersion = parseInt(data.formsRenderVersion);\n        defer.resolve(formsVersion);\n      }).fail(function (xhr, errorType, message) {\n        defer.reject();\n      });\n    }\n\n    return defer.promise();\n  },\n\n\n  getSyncError: function getSyncError(params) {\n    var self = this;\n\n    //From the offline services is ensured that for new offline cases offlineType is start.\n    //Additionally, in new cases created online the function getRoute is called only after the case is successfully created\n    if (!bizagi.util.isOfflineErrorsViewSupported() ||\n    params.offlineType == \"start\" ||\n    self.route.moduleParams.syncError != undefined) {\n\n      return $.Deferred().resolve(undefined).promise();\n    }\n    return self.dataService.getTaskSyncError(params);\n  },\n\n  includeSyncErrorIntoModuleparams: function includeSyncErrorIntoModuleparams(syncError) {\n    if (!bizagi.util.isOfflineErrorsViewSupported()) return;\n    var self = this;\n    self.route.moduleParams.hasSyncError = true;\n    self.route.moduleParams.syncError = syncError;\n    self.route.moduleParams.offlineType = self.params.offlineType == \"start\" ? \"start\" : \"task\";\n    self.route.moduleParams.idEdited = true;\n    self.route.moduleParams.isOfflineForm = true;\n    self.route.moduleParams.isOfflineErrorMode = true;\n  } });","/*\r\n*   Name: BizAgi Resize Wrapper\r\n*   Author: Juan Pablo Manrique\r\n*   Comments:\r\n*   -   This script will define a base class to handle a div resize event\r\n*   -   allow the resize event in div element\r\n*/\n\n// Create or Define BizAgi namespace\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.resize = [];\n\nbizagi.resize.attachEvent = document.attachEvent;\n\nif (!bizagi.resize.attachEvent) {\n  var requestFrame = function () {\n    var raf = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame ||\n    function (fn) {return window.setTimeout(fn, 20);};\n    return function (fn) {return raf(fn);};\n  }();\n\n  var cancelFrame = function () {\n    var cancel = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame ||\n    window.clearTimeout;\n    return function (id) {return cancel(id);};\n  }();\n\n  window.resetTriggers = function (element) {\n    var triggers = element.__resizeTriggers__,\n    expand = triggers.firstElementChild,\n    contract = triggers.lastElementChild,\n    expandChild = expand.firstElementChild;\n    contract.scrollLeft = contract.scrollWidth;\n    contract.scrollTop = contract.scrollHeight;\n    expandChild.style.width = expand.offsetWidth + 1 + 'px';\n    expandChild.style.height = expand.offsetHeight + 1 + 'px';\n    expand.scrollLeft = expand.scrollWidth;\n    expand.scrollTop = expand.scrollHeight;\n  };\n\n  window.checkTriggers = function (element) {\n    return element.offsetWidth != element.__resizeLast__.width ||\n    element.offsetHeight != element.__resizeLast__.height;\n  };\n\n  window.scrollListener = function (e) {\n    var element = this;\n    resetTriggers(this);\n    if (this.__resizeRAF__) cancelFrame(this.__resizeRAF__);\n    this.__resizeRAF__ = requestFrame(function () {\n      if (checkTriggers(element)) {\n        element.__resizeLast__.width = element.offsetWidth;\n        element.__resizeLast__.height = element.offsetHeight;\n        element.__resizeListeners__.forEach(function (fn) {\n          fn.call(element, e);\n        });\n      }\n    });\n  };\n}\n\nwindow.bizagi.addResizeListener = function (element, fn) {\n  if (bizagi.resize.attachEvent) element.attachEvent('resize', fn);else\n  {\n    if (!element.__resizeTriggers__) {\n      if (getComputedStyle(element).position == 'static') element.style.position = 'relative';\n      element.__resizeLast__ = {};\n      element.__resizeListeners__ = [];\n      (element.__resizeTriggers__ = document.createElement('div')).className = 'resize-triggers';\n      element.__resizeTriggers__.innerHTML = '<div class=\"expand-trigger\"><div></div></div>' +\n      '<div class=\"contract-trigger\"></div>';\n      element.appendChild(element.__resizeTriggers__);\n      resetTriggers(element);\n      element.addEventListener('scroll', scrollListener, true);\n    }\n    element.__resizeListeners__.push(fn);\n  }\n};\n\nwindow.bizagi.removeResizeListener = function (element, fn) {\n  if (bizagi.resize.attachEvent) element.detachEvent('resize', fn);else\n  {\n    element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n    if (!element.__resizeListeners__.length) {\n      element.removeEventListener('scroll', scrollListener);\n      element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\n    }\n  }\n};","/*\r\n*   Name: BizAgi Work Portal Service Context Factory\r\n*   Author: Diego Parra (based on Edward Morales version)\r\n*   Comments:\r\n*   -   This script will define the endpoints to be used based on the given context\r\n*/\n\n$.Class.extend(\"bizagi.workportal.services.context\", {}, {\n  /* \r\n                                                           *   Constructor\r\n                                                           */\n  init: function init(params) {\n    this.context = params.context;\n    this.endPoints = bizagi.workportal.services.getEndPoints(params);\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n  },\n\n  /*\r\n     *   Returns the given url for a specified service\r\n     */\n  getUrl: function getUrl(service) {\n    if (typeof this.endPoints[service] === 'undefined') {\n      bizagi.log(\"Url not found\", \"No endpoint defined for: \" + service);\n    }\n    return this.endPoints[service];\n  },\n\n  setProxyPrefix: function setProxyPrefix(params) {\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.endPoints = bizagi.workportal.services.getEndPoints(params);\n  } });","/**\r\n *   Name: BizAgi Mashups SDK\r\n *   Author: Ricardo Perez\r\n *   Comments:\r\n *   -   This script will process a mashups page using a device factory to use the adequate rendering\r\n *       to create the layout\r\n */\n\n/**\r\n     * Creates a new facade object to interact with all Bizagi's SDK capabilities.\r\n     * @module facade\r\n     * @class bizagi.mashup.facade\r\n     * @summary\r\n     * Creates an interaction facade instance 'new bizagi.mashup.facade(config)'\r\n     * @param {object}   config                         Object configuration parameters.\r\n     * @param {object}   [config.authentication={}]     Object for authentication configuration parameters.\r\n     * @param {string}   [config.authentication.type=\"OAuth\"]    Currently supported: \"OAuth\" | \"Bizagi\".\r\n     * @param {callback} [config.authentication.refreshTokenCallback] Function callable on every refresh token needed for the App, just optional for\r\n     * Bizagi's authentication, in OAUth authentication is required in order to keep synchronized the access token.\r\n     * @param {boolean} [config.authentication.autologin=true] Only will have effect for OAuth authentication, and indicates the Bizagi's SDK will try to\r\n     * login the user again when the se session is lost.\r\n     * @param {callback} [config.onError]               Event callback indicating errors in the App, (e) shows the detailed error.\r\n     * @param {callback} [config.onClose]               Event callback indicating the user wants to go back (from the internal header).\r\n     * @param {callback} [config.onRenderAction]        Event callback indicating actions performed in the form.\r\n     *      actions [\"validate, \"refresh\", \"submitOnChange\", \"next\", \"routing\", \"release\"];\r\n     *      {@linkcode validate->} Indicating the form performed the modeled validations, for instance:  required fields, valid ranges,.. etc.\r\n     *      {@linkcode refresh->} Indicating the form performed a repaint.\r\n     *      {@linkcode submitOnChange->} Indicating the form did save the new data.\r\n     *      {@linkcode next->} Indicating the form performed a request to advance the activity.\r\n     *      {@linkcode routing->} Indicating the form try to perform a routing to the activity it must show.\r\n     *      {@linkcode release->} the form indicates, that the current user has released the current activity.\r\n     * @param {string}   [config.proxyPrefix='']       URL prefix for the render services.\r\n     * @param {boolean}  [config.showHeader=false]     Flag to define if the component must shows the internal header at the beginning\r\n     * @example\r\n     *  const mashup = new bizagi.mashup.facade({\r\n     *      proxyPrefix: \"http://myhost.com/for/services\",\r\n     *      authentication: {\r\n     *          type: \"OAuth\",\r\n     *          refreshTokenCallback: function (successCallback, errorCallback) { ... }\r\n     *      },\r\n     *      onClose: function () {},\r\n     *      onError: function(e){console.log(\"error\", e);},\r\n     *      onRenderAction: function(e){console.log(\"actions\", e);},\r\n     *      showHeader: true\r\n     *  });\r\n     *\r\n     */\n$.Class.extend(\"bizagi.mashup.facade\", {},\n/** @lends bizagi.mashup.facade.prototype */\n{\n  init: function init(config) {\n    // Set default config\n\n    bizagi.loading.start();\n    this.initialized = false;\n    this.defaultParams = config || {};\n    this.defaultParams.authentication = this.defaultParams.authentication || {};\n    this.defaultParams.authentication.type = this.defaultParams.authentication.type || \"OAuth\";\n\n    // Defines a device factory for all rendering\n    this.deviceFactory = new bizagi.mashup.device.factory(this, config);\n\n    // Creates a data service instance\n    this.dataService = new bizagi.workportal.services.service(config);\n\n    // Creates authentication instance\n    switch (this.defaultParams.authentication.type) {\n      case \"OAuth\":\n        this.authenticator = new bizagi.mashup.authentication.oauth(this, this.defaultParams.authentication);\n        break;\n      case \"Basic\":\n        this.authenticator = new bizagi.mashup.authentication.basic(this, this.defaultParams.authentication);\n        break;\n      default:\n        this.authenticator = new bizagi.mashup.authentication.bizagi(this, this.defaultParams.authentication);\n        break;}\n\n\n    // Create instance of routing service\n    this.dataService.routing = new bizagi.workportal.services.routing({ dataService: this.dataService });\n\n    this.execute().then(function () {\n      bizagi.loading.stop();\n    });\n\n    $.when(this.dataService.getCurrentUser()).done(function (data) {\n      bizagi.currentUser = data;\n    });\n  },\n\n  /**\r\n      * Start point method to use in the main javascript pages.\r\n      * This method will process everything and attach the HTML directly to the DOM.\r\n      * @summary Start the execution.\r\n      * @ignore\r\n      * @private\r\n      * @access private\r\n      */\n  execute: function execute() {\n    var self = this;\n    var canvas = self.defaultParams.canvas || $(\"body\");\n\n    if (self.initialized) {\n      return self.ready();\n    }\n    // Creates ready deferred\n    self.executionDeferred = new $.Deferred();\n\n    // Create a workportal facade\n    this.deviceFacade = self.deviceFactory.getMashupFacade(self.dataService);\n\n    // Set callback when requests have been done\n    return this.deviceFacade.then(function (mashupFacade) {\n      // Creates workportal component\n      self.mashupFacade = mashupFacade;\n\n      // Get main controller\n      self.controller = mashupFacade.getMainController({\n        canvas: canvas,\n        layoutHeader: self.defaultParams.showHeader || false });\n\n\n      // Render the full content\n      return self.controller.render().then(function () {\n\n        //Resolves promise\n        self.initialized = true;\n        self.executionDeferred.resolve();\n\n      });\n    });\n  },\n\n  /**\r\n      * Returns the execution deferred to determine whether the component is ready or not.\r\n      * @summary Whether or not the component is ready.\r\n      * @public\r\n      * @returns {object} Promise\r\n      */\n  ready: function ready() {\n    return this.executionDeferred.promise();\n  },\n\n  /**\r\n      * Navigates to the desired view identified by \"id\" with a \"transition\".\r\n      * @summary View a specific element.\r\n      * @private\r\n      * @param {int|string} id       The viewId to navigate to, usually a render.\r\n      * @param {string} transition   The animation type for transitions like: slide, zoom, overlay, ...\r\n      * @ignore\r\n      * @example\r\n      * mashup.navigate(10001, 'slide:up');\r\n      */\n  navigate: function navigate(id, transition) {\n    var self = this;\n    $.when(self.executionDeferred).then(function () {\n      self.mashupFacade.navigate(id, transition, true);\n    });\n  },\n\n  /**\r\n      * Generates the visual elements for the requested case.\r\n      * @summary View case.\r\n      * @public\r\n      * @param {object}  params              Object parameters\r\n      * @param {int}     params.idCase       Case identifier.\r\n      * @param {int}     params.idworkitem   WorkItem identifier.\r\n      * @example\r\n      * mashup.renderCase({\"idCase\": 110});\r\n      * @example\r\n      * mashup.renderCase({\"idCase\": 110, idWorkitem: 120});\r\n      */\n  renderCase: function renderCase(params) {\n    var self = this;\n    //if (typeof self.authenticator.getUser() !== \"undefined\") {\n    self.ready().then(function () {\n      if (typeof self.controller !== \"undefined\") {\n        self.controller.publish(\"renderCase\", params);\n        self.navigate(\"#render\");\n\n        if (typeof self.defaultParams.onRender == \"function\") {\n          self.defaultParams.onRender.apply(this, arguments);\n        }\n\n      } else {\n        bizagi.log(\"Sorry we're not ready yet, please try again\");\n      }\n    });\n    /*} else {\r\n            if (typeof self.defaultParams.onError === \"function\") {\r\n                self.defaultParams.onError(\"You must log in to complete the action\");\r\n            }\r\n        }*/\n  },\n\n  /**\r\n      * By default Bizagi's SDK deliver a an integrated header in the rendered view\r\n      * @summary Hides the default view header\r\n      * @public\r\n      * @example\r\n      * mashup.hideInternalHeader();\r\n      */\n  hideInternalHeader: function hideInternalHeader() {\n    var self = this;\n    self.ready().then(function () {\n      if (typeof self.controller !== \"undefined\") {\n        self.controller.publish(\"toggleHeader\", { showHeader: false });\n      } else {\n        bizagi.log(\"Sorry we're not ready yet, please try again\");\n      }\n    });\n  },\n\n  /**\r\n      * Ends the session of the authenticated user.\r\n      * @summary close the user's session\r\n      * @public\r\n      * @example\r\n      * mashup.logoutUser();\r\n      */\n  logoutUser: function logoutUser() {\n    var self = this;\n    if (typeof self.authenticator.getUser() !== \"undefined\") {\n      self.authenticator.logout();\n    } else {\n      console.log(\"there's not a user authenticated\");\n    }\n  },\n\n  /**\r\n      * By default Bizagi's SDK deliver a an integrated header in the rendered view\r\n      * @summary Shows the default view header.\r\n      * @public\r\n      * @example\r\n      * mashup.showInternalHeader();\r\n      */\n  showInternalHeader: function showInternalHeader() {\n    var self = this;\n    self.ready().then(function () {\n      if (typeof self.controller !== \"undefined\") {\n        self.controller.publish(\"toggleHeader\", { showHeader: true });\n      } else {\n        bizagi.log(\"Sorry we're not ready yet, please try again\");\n      }\n    });\n  },\n\n  /**\r\n      * This method tries to get user access to Bizagi using the authentication credentials passed as arguments.\r\n      * Depending on the actual method/type of authentication it will use different properties of the \"auth\" object.\r\n      * @public\r\n      * @summary\r\n      * Authenticates the user\r\n      * @param {object} auth                 Object parameters.\r\n      *\r\n      * @param {string} auth.user            Username or email (Bizagi Auth Only)\r\n      * @param {string} auth.password        User's password (Bizagi Auth Only)\r\n      * @param {string} auth.domain          User's domain when needed (Bizagi Auth Only)\r\n      *\r\n      * @param {string} auth.accessToken     User's OAuth access token (OAuth Only)\r\n        * @returns {promise}                    Returns a promise with user's data.\r\n      * @example <caption>Authentication sample returning user's data</caption>\r\n      * mashup.authenticateUser({\r\n      *  accessToken: access_token\r\n      *  }).then(function(user){...});\r\n      * // OR\r\n      * mashup.authenticateUser({\r\n      *  user: 'user1',\r\n      *  password: '1234',\r\n      *  domain: 'domain'\r\n      * }).then(function(user){...});\r\n      **/\n\n  authenticateUser: function authenticateUser(auth) {\n    return this.authenticator.authenticateUser(auth);\n  },\n\n  /**\r\n      * This method allows to update the Bizagi's SDK access token, when client access token has been refreshed in order\r\n      * to synchronize the access token on both sides\r\n      * @public\r\n      * @summary\r\n      * Sets the authentication access token\r\n      * @param {string} accessToken        User access token\r\n      * @example\r\n      * mashup.setAccessToken(access_token);\r\n      **/\n  setAccessToken: function setAccessToken(accessToken) {\n    if (this.defaultParams.authentication.type == \"OAuth\") {\n      this.authenticator.setAccessToken({ accessToken: accessToken });\n    } else {\n      console.log(\"this call will not have any effect\");\n    }\n  },\n\n  /**\r\n      * Shows a summary data for the last or actual case opened.\r\n      * @summary Shows a summary case.\r\n      * @public\r\n      * @example\r\n      * mashup.showSummaryCase();\r\n      */\n  showSummaryCase: function showSummaryCase(params) {\n    var self = this;\n    params = params || {};\n\n    if (typeof self.authenticator.getUser() !== \"undefined\") {\n      self.ready().then(function () {\n        if (typeof self.controller !== \"undefined\") {\n          self.controller.publish(\"showSummary\", params);\n        } else {\n          bizagi.log(\"No se ha ejecutado el mashup facade.\");\n        }\n      });\n    } else {\n      if (typeof self.defaultParams.onError === \"function\") {\n        self.defaultParams.onError(\"You must login to complete the action.\");\n      }\n    }\n  },\n\n  /**\r\n      * Creates a brand new case with the provided configuration, if server version is older then 11.0, call\r\n      * method with the param idWFClass, for server version greater than or equals call the method with the param\r\n      * idProcess.\r\n      * @summary Create a new case.\r\n      * @param {object}  params                 Object parameters.\r\n      *\r\n      * @param {int}     params.idWFClass       Id of the WFClass or process for (For server versions lower than 11.0).\r\n      * @param {int}     params.idProcess       Id of the process (For server versions 11.0 and higher).\r\n      * @example\r\n      * mashup.createNewCase({\"idWFClass\": 1});\r\n      * //OR\r\n      * mashup.createNewCase({\"idProcess\": 1});\r\n      */\n  createNewCase: function createNewCase(params) {\n    var self = this;\n\n    //if (typeof self.authenticator.getUser() !== \"undefined\") {\n    self.ready().then(function () {\n      if (self.controller) {\n        self.controller.publish(\"createNewCase\", params);\n      } else {\n        bizagi.log(\"No se ha ejecutado el mashup facade.\");\n      }\n    });\n    /*} else {\r\n            if (typeof self.defaultParams.onError === \"function\") {\r\n                self.defaultParams.onError(\"You must login to complete the action.\");\r\n            }\r\n        }*/\n  },\n\n  renderCaseSummary: function renderCaseSummary(params) {\n    var self = this;\n    params = params || {};\n\n    self.ready().then(function () {\n      if (typeof self.controller !== \"undefined\") {\n        self.controller.publish('renderSummaryCase', params);\n      } else {\n        bizagi.log(\"No se ha ejecutado el mashup facade\");\n      }\n    });\n  } });","/*\r\n *   Name: BizAgi Mashups\r\n *   Author: Ricardo Perez\r\n *   Comments:\r\n *   -   This script will allow to configure the user authentication\r\n */\n\n$.Class.extend(\"bizagi.mashup.authentication\", {}, {\n\n\n  /**\r\n                                                      * Authentication class constructor\r\n                                                      * @param facade\r\n                                                      * @param params\r\n                                                      */\n  init: function init(facade, params) {\n    this.facade = facade;\n    this.dataService = facade.dataService;\n    this.creationParams = params;\n  },\n\n  authenticateUser: function authenticateUser() {\n  },\n\n  logout: function logout() {\n  },\n\n  /**\r\n      * fethc the current user information form bizagi platform \r\n      * @returns {*}\r\n      */\n  getCurrentUser: function getCurrentUser() {\n    var self = this;\n\n    return self.dataService.getCurrentUser().then(\n    function (currentUser) {\n      // Sacar de este lugar cuando se adicione el security al currentUser\n      currentUser.userProperties = {};\n      var userProperty;\n      var i = -1;\n\n      while (userProperty = currentUser.sUserProperties[++i]) {\n        currentUser.userProperties[userProperty.key] = userProperty.value;\n      }\n\n      self.currentUser = bizagi.currentUser = currentUser;\n\n      return currentUser;\n    });\n  },\n\n  getUser: function getUser() {\n    return this.currentUser;\n  } });","/*\r\n *   Name: BizAgi Mashups\r\n *   Author: Ricardo Perez\r\n *   Comments:\r\n *   -   This script will allow to configure the user authentication\r\n */\n\nbizagi.mashup.authentication.extend(\"bizagi.mashup.authentication.basic\", {}, {\n  /**\r\n                                                                                 * Authentication class constructor\r\n                                                                                 * @param facade\r\n                                                                                 * @param params\r\n                                                                                 */\n  init: function init(facade, params) {\n    this._super(facade, params);\n  },\n\n  authenticateUser: function authenticateUser() {\n  } });","/*\r\n *   Name: BizAgi Mashups\r\n *   Author: Ricardo Perez\r\n *   Comments:\r\n *   -   This script will allow to configure the user authentication\r\n */\n\nbizagi.mashup.authentication.extend(\"bizagi.mashup.authentication.bizagi\", {}, {\n  /**\r\n                                                                                  * Authentication class constructor\r\n                                                                                  * @param facade\r\n                                                                                  * @param params\r\n                                                                                  */\n  init: function init(facade, params) {\n    var self = this;\n\n    self._super(facade, params);\n\n    self.autologin = new jqAutoLogin({\n      events: {\n        logout: function logout() {\n        },\n        login: function login() {\n        },\n        sessionExpiration: function sessionExpiration() {\n          return $.ajax({\n            url: bizagiConfig.proxyPrefix + \"Api/Authentication/User\",\n            crossDomain: true,\n            type: \"POST\",\n            dataType: \"json\",\n            //timeout: 6000,\n            data: self.data }).\n          fail(function (fail) {\n            if (self.facade.defaultParams.onError) {\n              self.facade.defaultParams.onError(fail);\n            }\n          });\n        } } });\n\n\n  },\n\n  authenticateUser: function authenticateUser(params) {\n    var self = this;\n    self.data = {\n      \"user\": params.user,\n      \"password\": params.password,\n      \"domain\": params.domain,\n      \"loginOption\": \"AlwaysAsk\" };\n\n\n    return $.ajax({\n      url: bizagiConfig.proxyPrefix + \"Api/Authentication/User\",\n      crossDomain: true,\n      type: \"POST\",\n      dataType: \"json\",\n      //timeout: 6000,\n      data: self.data }).\n    then(function (resp) {\n      //console.log(resp);\n      if (resp.isAuthenticate === \"true\") {\n        self.autologin.login(self.data);\n        return self.getCurrentUser();\n      }\n      throw \"Authentication error\";\n    });\n  },\n\n  logout: function logout() {\n    var self = this;\n    return $.ajax({\n      url: bizagiConfig.proxyPrefix + \"Rest/Authentication/logout\",\n      crossDomain: true,\n      type: \"POST\",\n      dataType: \"json\" }).\n    then(function (resp) {\n      self.autologin.logout();\n      delete self.currentUser;\n      return \"Success logout\";\n    });\n  } });","/*\r\n *   Name: BizAgi Mashups\r\n *   Author: Ricardo Perez\r\n *   Comments:\r\n *   -   This script will allow to configure the user authentication\r\n */\n\nbizagi.mashup.authentication.extend(\"bizagi.mashup.authentication.oauth\", {}, {\n  /**\r\n                                                                                 * Authentication class constructor\r\n                                                                                 * @param facade\r\n                                                                                 * @param params\r\n                                                                                 */\n  init: function init(facade, params) {\n    var self = this;\n    self._super(facade, params);\n\n\n    if (typeof params.refreshTokenCallback === \"undefined\") {\n      if (self.facade.defaultParams.onError) {\n        self.facade.defaultParams.onError(\"you should define a refresh callback to oauth authentication\");\n      }\n      return;\n    }\n\n    self.refreshTokenCallback = params.refreshTokenCallback;\n\n    self.oauth2 = new jqOAuth({\n      tokenName: \"bizagi.mashup.token\",\n      events: {\n        logout: function logout() {\n        },\n        login: function login() {\n        },\n        tokenExpiration: function tokenExpiration() {\n          var def = new $.Deferred();\n\n          self.refreshTokenCallback(function (accessToken) {\n\n            var refreshToken = \"\";\n            self.oauth2.setAccessToken(accessToken, refreshToken);\n            def.resolve(accessToken);\n\n          }, function (error) {\n            if (self.facade.defaultParams.onError) {\n              self.facade.defaultParams.onError(error);\n            }\n            def.reject(error);\n          });\n\n          return def.promise();\n        } } });\n\n\n  },\n\n  authenticateUser: function authenticateUser(params) {\n    var self = this;\n    params = params || {};\n    params.refreshToken = params.refreshToken || \"\";\n    params.accessToken = params.accessToken || \"\";\n\n    self.oauth2.login(params.accessToken, params.refreshToken);\n    return self.getCurrentUser();\n\n  },\n\n  setAccessToken: function setAccessToken(params) {\n    var self = this;\n    params = params || {};\n    params.refreshToken = params.refreshToken || \"\";\n    params.accessToken = params.accessToken || \"\";\n\n    if (self.oauth2.hasAccessToken()) {\n      self.oauth2.setAccessToken(params.accessToken, params.refreshToken);\n    } else\n    {\n      console.log(\"It's necessary call the authenticateUser method before set a new Access Token\");\n    }\n\n  },\n\n  logout: function logout() {\n    var self = this;\n    self.oauth2.logout();\n    delete self.currentUser;\n  } });","/*\r\n*   Name: BizAgi Device Render Factory\r\n*   Author: Ricardo P�rez\r\n*   Comments:\r\n*   -   This script will detect the current device and then will load the appropiate factory on demand\r\n*/\n\n$.Class.extend(\"bizagi.mashup.device.factory\", {}, {\n\n  /**\r\n                                                      * Constructor\r\n                                                      * @param mashup\r\n                                                      */\n  init: function init(mashup, params) {\n    this.device = params.device || bizagi.detectDevice();\n    this.mashup = mashup;\n    this.cachedFacade = null;\n  },\n\n\n  /**\r\n      * Returns the appropiate mashup facade based on the device detection\r\n      * Because it loads the scripts on demand it must return a promise\r\n      * @param dataService\r\n      * @param initializeTemplates\r\n      * @returns {*}\r\n      */\n  getMashupFacade: function getMashupFacade(dataService, initializeTemplates) {\n    var self = this;\n    var defer = new $.Deferred();\n    initializeTemplates = typeof initializeTemplates !== \"undefined\" ? initializeTemplates : true;\n\n    if (self.cachedFacade != null) {\n      // Resolve with cached factory                \n      defer.resolve(self.cachedFacade);\n\n    } else {\n      if (bizagi.util.isTabletDevice()) {\n\n        self.cachedFacade = new bizagi.mashup.tablet.facade(this.mashup, dataService);\n\n        // Chain template loading\n        $.when(self.cachedFacade.initAsyncStuff({\n          device: this.device })).\n\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFacade);\n        });\n\n        return defer.promise();\n      } else if (bizagi.util.isSmartphoneDevice()) {\n\n        self.cachedFacade = new bizagi.mashup.smartphone.facade(this.mashup, dataService);\n\n        // Chain template loading\n        $.when(self.cachedFacade.initAsyncStuff({\n          device: this.device })).\n\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFacade);\n        });\n\n        return defer.promise();\n      } else {\n        // If no device suuported\n        alert(\"Not supported device: \" + this.device);\n        defer.resolve(\"\");\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Returns the current data service being used\r\n     */\n  getDataService: function getDataService() {\n    return this.dataService;\n  } });","/*\r\n *   Name: BizAgi Tablet mashup Facade\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a workportal facade to access to all components\r\n */\n\n\n$.Class.extend(\"bizagi.mashup.tablet.facade\", {},\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(mashup, dataService) {\n    var self = this;\n    this.mashup = mashup;\n    this.templates = {};\n    this.dataService = dataService;\n    self.device = bizagi.detectDevice();\n\n    // Add meta to head in order to disable zoom\n    this.setMobileMetaTags();\n    if (bizagi.override.enableMSF) {\n      if (bizagi.hasOwnProperty(\"kendo\")) {\n        self.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n      } else {\n        self.templateService = new bizagi.templates.services.service(bizagi.localization);\n      }\n    } else {\n      self.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n    }\n  },\n\n  /* SETS Mobile META TAGS\r\n      =====================================================*/\n  setMobileMetaTags: function setMobileMetaTags() {\n\n    // Removes iPad address bar when launched from home screen // temporarily disabled\n    /*\r\n     $('<meta>', {\r\n     name : \"apple-mobile-web-app-capable\",\r\n     content : \"yes\"\r\n     }).appendTo('head');\r\n     */\n    // Disables safari zooming on iPad when running as web app\n    $(\"<meta>\", {\n      name: \"viewport\",\n      content: \"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no\" }).\n    appendTo(\"head\");\n\n    $(\"<link>\", {\n      rel: \"apple-touch-icon-precomposed\",\n      href: \"jquery/css/bizagi/tablet/images/BizAgi_logo.png\" }).\n    appendTo(\"head\");\n\n    /*$('<link>', {\r\n                       rel: 'apple-touch-startup-image',\r\n                       href: 'jquery/css/bizagi/tablet/images/splash-screen-landscape.png',\r\n                       media: '(orientation:landscape)'\r\n                       }).appendTo('head');\r\n                         $('<link>', {\r\n                       rel: 'apple-touch-startup-image',\r\n                       href: 'jquery/css/bizagi/tablet/images/splash-screen-portrait.png',\r\n                       media: '(orientation:portrait)'\r\n                       }).appendTo('head');*/\n\n  },\n\n  /*\r\n      *   This function will load asynchronous stuff needed in the module\r\n      */\n  initAsyncStuff: function initAsyncStuff(params) {\n    params = params || {};\n    var self = this;\n    var device = params.device || bizagi.detectDevice();\n    //TODO BUG IN ANDROID;\n    //bizagi.enableCustomizations = true;\n\n    if (bizagi.enableCustomizations) {\n      return $.when(\n      // Load custom templates\n      bizagi.templateService.loadCustomTemplates().\n      then(function () {\n        // Load default templates\n        return self.loadTemplates();\n      }),\n      // Load Custom styles\n      bizagi.util.loadFile({\n        src: bizagi.getStyleSheet(\"bizagi.overrides.\" + device + \".custom.styles\"),\n        type: \"css\" }),\n\n      // Load custom javascript overrides\n      bizagi.util.loadFile({\n        src: bizagi.getJavaScript(\"bizagi.mashup.\" + device + \".overrides\"),\n        type: \"js\" }));\n\n\n    } else {\n      return self.loadTemplates();\n    }\n  },\n\n  /*\r\n      *   Load all the templates used in the workportal\r\n      */\n  loadTemplates: function loadTemplates() {\n    var self = this;\n    // var defer = new $.Deferred();\n\n    return $.when(self.loadTemplate(\"home\", bizagi.getTemplate(\"bizagi.mashup.common.home\"))).\n    then(function () {\n      var def = new $.Deferred();\n\n      // Resolve when all templates are loaded\n      $(\"body\").append(self.getTemplate(\"home\"));\n\n      bizagi.util.startkendo({\n        started: function started() {\n          self.configureHomeHandlers();\n          def.resolve();\n        } });\n\n\n      return def.promise();\n    });\n  },\n\n  configureHomeHandlers: function configureHomeHandlers() {\n    var self = this;\n    $(\".bz-home-back\", \"#home\").click(function (e) {\n      self.close();\n    });\n  },\n\n  navigate: function navigate(id, transition, replace) {\n    if (typeof replace !== \"undefined\" && replace) {\n      bizagi.kendoMobileApplication.replace(id, transition);\n    } else\n    {\n      bizagi.kendoMobileApplication.navigate(id, transition);\n    }\n  },\n\n  /**\r\n      * Close the render view & call callback\r\n      */\n  close: function close() {\n    if (typeof this.mashup.defaultParams.onClose !== \"undefined\") {\n      this.mashup.defaultParams.onClose();\n    }\n    //this.navigate(\"#:back\");\n  },\n\n  /*\r\n      *   Load one template and save it internally\r\n      */\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n    // Go fetch the template\n    return self.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedTemplate) {\n      if (typeof resolvedTemplate === \"string\") {\n        self.templates[template] = $.trim(resolvedTemplate.replace(/\\n/g, \"\"));\n      }\n    });\n  },\n\n  /*\r\n      *   Returns the desired action\r\n      */\n  getAction: function getAction(action, params) {\n    if (action == \"routing\") {\n      return new bizagi.mashup.actions.routing(this, this.dataService, params);\n    }\n\n    // No type supported\n    bizagi.log(action + \" action not supported\", params, \"error\");\n    return null;\n  },\n\n  /*\r\n      *   Method to fetch templates from a private dictionary\r\n      */\n  getTemplate: function getTemplate(template) {\n    var self = this;\n    return self.templates[template];\n  },\n\n  /*\r\n      *   Returns the main controller to be used\r\n      */\n  getMainController: function getMainController(params) {\n    return new bizagi.mashup.controllers.main(this, this.dataService, params);\n  },\n  /*\r\n     *   Load one template and save it internally\r\n     */\n  loadTemplateWebpart: function loadTemplateWebpart(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return self.templateService.getTemplateWebpart(templateDestination, template).\n    done(function (resolvedRemplate) {\n      self.templates[template] = $.trim(resolvedRemplate.replace(/\\n/g, \"\"));\n    });\n  } });","/*\r\n *   Name: BizAgi Workportal Main Controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to handle workportal layouts for any device\r\n */\n\n$.Class.extend(\"bizagi.mashup.controllers.controller\", {}, {\n\n  /**\r\n                                                              *   Constructor\r\n                                                              */\n  init: function init(mashupFacade, dataService, params) {\n    // Set mashup facade\n    this.mashupFacade = mashupFacade;\n\n    // Set data service\n    this.dataService = dataService;\n\n    // Set l10n service\n    this.resources = bizagi.localization;\n\n    // Set a component container hash to use with templates\n    this.componentContainers = {};\n\n    // Define an object to hold the templates used in the widget\n    this.tmpl = {};\n\n    // Define an object to hold the subscribe collection\n    this.subscribers = [];\n\n    // Flag to check if the element is disposed\n    this.disposed = false;\n\n    this.creationParams = params || {};\n\n    this.canvas = this.creationParams.canvas || $(\"<div />\");\n  },\n\n  /**\r\n      *\r\n      * @param id\r\n      * @param transition\r\n      */\n  navigate: function navigate(id, transition, replace) {\n    var self = this;\n    self.mashupFacade.navigate(id, transition, replace);\n  },\n\n  /**\r\n      *   Publish an event so any controller can subscribe to it\r\n      */\n  publish: function publish(eventName, params) {\n    if (this.disposed) return null;\n    return $(document).triggerHandler(eventName, params);\n  },\n\n  /**\r\n      *   Subscribe to an event that any controller could trigger\r\n      */\n  subscribe: function subscribe(eventName, callback) {\n    if (this.disposed) return null;\n\n    var docEvents = jQuery._data(document, \"events\");\n    var docEventName = docEvents[eventName];\n    if (docEventName) {\n      var length = docEventName.length;\n\n      for (var i = 0, len = length; i < len; i++) {\n        if (docEventName[i].handler.toString() === callback.toString()) {\n          return;\n        }\n      }\n    }\n\n    $(document).bind(eventName, callback);\n    this.subscribers.push({ event: eventName });\n  },\n\n  /**\r\n      *   Subscribe to one time event that any controller could trigger\r\n      */\n  subscribeOneTime: function subscribeOneTime(eventName, callback) {\n    if (this.disposed) return null;\n    $(document).one(eventName, callback);\n    this.subscribers.push({ event: eventName });\n  },\n\n  /**\r\n      *   Un Subscribe to an event that any controller could trigger in this document\r\n      */\n  unsubscribe: function unsubscribe(eventName, callback) {\n    if (this.disposed) return null;\n    if (callback) {\n      $(document).unbind(eventName, callback);\n    } else\n    {$(document).unbind(eventName);}\n  },\n\n  /**\r\n      *   Makes the base processing of the layout (mix templates + data)\r\n      *   after all that processing will call a post-render method to\r\n      *   be implemented in each device to apply custom plugins\r\n      *   Returns a promise because the rendering could be asynchronous\r\n      */\n  render: function render(params) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (typeof self.templatesDeferred !== \"undefined\") {\n      self.templatesDeferred.then(function () {\n        // Render content\n        self.internalRender(params).done(function (content) {\n          defer.resolve(content);\n        });\n      });\n    } else\n    {\n      self.internalRender(params).done(function (content) {\n        defer.resolve(content);\n      });\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * to implement in each device\r\n      * @param params\r\n      */\n  configureHandlers: function configureHandlers(params) {},\n\n  /**\r\n                                                             *\r\n                                                             * @returns {*}\r\n                                                             */\n  internalRender: function internalRender(params) {\n    var self = this;\n    return $.when(self.renderContent(params)).\n    then(function (content) {\n      self.content = content || \"\";\n\n      self.canvas.append(content);\n      // Call post-render method\n      self.postRender();\n      // Resolve deferred\n      return self.content;\n    });\n  },\n\n\n  /**\r\n      * Allows load templates\r\n      * @param templates\r\n      * @returns promise of load templates excecutions\r\n      */\n  loadTemplates: function loadTemplates(templates) {\n    var self = this,\n    def = self.templatesDeferred = new $.Deferred(),\n    tmplPromises = [];\n\n    var useNewEngine = templates.useNewEngine != undefined ? templates.useNewEngine : true;\n\n    for (var name in templates) {\n      if (name != \"useNewEngine\") {\n        tmplPromises.push(\n        self.loadTemplate({\n          \"name\": name,\n          \"path\": templates[name],\n          \"useNewEngine\": useNewEngine }));\n\n\n      }\n    }\n\n    $.when.apply($, tmplPromises).\n    done(function () {\n      def.resolve();\n    });\n\n    return def.promise();\n  },\n\n\n  /*\r\n      * Loads template\r\n      */\n  loadTemplate: function loadTemplate(data) {\n    var self = this;\n\n    if (self.tmpl[data.name]) {\n      return self.tmpl[data.name];\n    } else {\n      if (data.useNewEngine) {\n        return bizagi.templateService.getTemplateWidget(data.path, data.name).\n        done(function (tmpl) {\n          self.tmpl[data.name] = tmpl;\n        });\n      }\n\n      return self.templateService.getTemplate(data.path, data.name).\n      done(function (tmpl) {\n        self.tmpl[data.name] = tmpl;\n      });\n\n    }\n  },\n\n  /*\r\n      * Gets template\r\n      */\n  getTemplate: function getTemplate(name) {\n    if (this.tmpl.hasOwnProperty(name)) {\n      return this.tmpl[name];\n    }\n    return null;\n\n  },\n\n  /*\r\n      *   Returs the rendered content\r\n      */\n  getContent: function getContent() {\n    return this.content;\n  },\n\n  /*\r\n      *   Returns the mapped resource\r\n      */\n  getResource: function getResource(key) {\n    return this.resources.getResource(key);\n  },\n\n  /*\r\n      *   Renders the content for the current controller\r\n      *\r\n      */\n  renderContent: function renderContent() {\n    // Override on implementations\n    return \"\";\n  },\n\n  /*\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {},\n\n  /*\r\n                                         *   Returns the component replaced tag selector\r\n                                         */\n  getComponentSelector: function getComponentSelector(component) {\n    return \"[data-bizagi-component=\" + component + \"]\";\n  },\n\n  /*\r\n      *   Returns the component replaced tag selector\r\n      */\n  getComponentContainer: function getComponentContainer(component) {\n    var self = this;\n    var content = self.getContent();\n    if (!content || content.length == 0) return null;\n\n    // Find component parent and cache it\n    var componentElement = self.componentContainers[component];\n    if (componentElement == null) {\n      // Find the component inside the main content\n      componentElement = $(self.getComponentSelector(component), content);\n\n      // If still not found, try to check if content element is the component\n      if (componentElement.length == 0 && content.is(self.getComponentSelector(component))) {\n        componentElement = content;\n      }\n\n      // Cache the component\n      self.componentContainers[component] = componentElement;\n    }\n    return self.componentContainers[component];\n  },\n\n  /*\r\n      *   Executes a mashup action\r\n      */\n  executeAction: function executeAction(actionName, params) {\n    var self = this;\n    params = params || {};\n    var actionParams = $.extend(params, {\n      action: actionName });\n\n\n    var actionController = self.mashupFacade.getAction(actionParams.action);\n\n    // Executes the action\n    actionController.execute(actionParams);\n  },\n\n  /*\r\n      *   Asks for a full resize\r\n      */\n  resizeLayout: function resizeLayout() {\n    this.publish(\"resizeLayout\");\n  },\n\n  /*\r\n      * Do stuff when a resize has been triggered\r\n      */\n  performResizeLayout: function performResizeLayout() {},\n\n  resizeParent: function resizeParent(formElement) {\n    var self = this;\n    this.sendDimensionsToParent(formElement);\n    var canvasobject = formElement[0];\n    if (canvasobject.attachEvent) {\n      canvasobject.onresize = function () {\n        self.sendDimensionsToParent(formElement);\n      };\n    } else {\n      bizagi.addResizeListener(canvasobject, function (e) {\n        self.sendDimensionsToParent(formElement);\n      });\n    }\n  },\n\n  sendDimensionsToParent: function sendDimensionsToParent(formElement) {\n    this.publish(\"mashup-resize-content\", { height: formElement.outerHeight() });\n  },\n\n  /*\r\n      *   Disposes the widget\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    self.disposed = true;\n\n    setTimeout(function () {\n      if (self.subscribers != null) {\n        // Remove all subcriptions\n        $.each(self.subscribers, function (i, item) {\n          self.unsubscribe(item.event);\n        });\n      }\n      bizagi.util.dispose(self);\n    }, bizagi.override.disposeTime || 50);\n  } });","/**\r\n * Created by RicardoPD on 4/8/2016.\r\n */\n\nbizagi.mashup.controllers.controller.extend(\"bizagi.mashup.actions.routing\", {}, {\n\n  /*\r\n                                                                                    *   Executes the action\r\n                                                                                    *   Could return a deferred\r\n                                                                                    */\n  execute: function execute(params) {\n    var self = this;\n    self.params = params || {};\n    /* New implementation of routing*/\n\n    $.when(self.dataService.routing.getRoute(params)).done(function (route) {\n      route = route || {};\n\n      var isOfflineForm = false;\n      if (typeof self.params != \"undefined\") {\n        isOfflineForm = typeof self.params.isOfflineForm !== \"undefined\" &&\n        bizagi.util.parseBoolean(self.params.isOfflineForm);\n      }\n\n      if (isOfflineForm) {\n        route.moduleParams = $.extend(route.moduleParams,\n        {\n          formsRenderVersion: self.params.formsRenderVersion,\n          isOfflineForm: isOfflineForm,\n          idCase: self.params.idCase,\n          idWorkitem: self.params.idWorkitem }) ||\n        {};\n      } else {\n        route.moduleParams = route.moduleParams || {};\n      }\n\n      switch (route.module) {\n        case \"activityform\":\n          self.publish(\"renderCase\", route.moduleParams);\n          break;\n        case \"oldrenderintegration\":\n          self.publish(\"renderCase\", route.moduleParams);\n          break;\n        case \"async\":\n          self.publish(\"render-async\", route.moduleParams);\n          break;\n        case \"routing\":\n          var parameters = {\n            title: self.getResource(\"workportal-widget-routing-window-selector\"),\n            onClose: route.moduleParams.onClose };\n\n\n          if (self.isThereAsync(route.moduleParams.data)) {\n            self.asyncWidget(route.moduleParams);\n          } else {\n            self.publish(\"showDialog\", {\n              widgetName: \"routing\",\n              data: route.moduleParams.data,\n              modalParameters: parameters,\n              onClose: parameters.onClose });\n\n          }\n          break;}\n\n\n    }).fail(function (error) {\n      self.publish(\"error\", error);\n    });\n  },\n\n  /*\r\n      * Search for async workitems\r\n      */\n  isThereAsync: function isThereAsync(data) {\n    var workitems = data.workItems,wi,index = 0;\n    var length = workitems.length,result = false;\n    if (length > 0) {\n      for (; index < length;) {\n        wi = workitems[index++];\n        if (wi.isAsynch === \"true\") {\n          result = result || [];\n          result.push(wi);\n        }\n      }\n    }\n    return result;\n  },\n\n  asyncWidget: function asyncWidget(params) {\n    var self = this;\n    params.widgetName = \"async\";\n    self.publish(\"changeWidget\", params);\n  } });","/*\r\n *   Name: BizAgi Workportal Main Controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to handle workportal layouts for any device\r\n *   -   This layout must contain a menu and widget container placeholders\r\n */\n\n\n// Defines the main controller\nbizagi.mashup.controllers.controller.extend(\"bizagi.mashup.controllers.main\", {}, {\n\n  /*\r\n                                                                                     *   Constructor\r\n                                                                                     */\n  init: function init(mashupFacade, dataService, params) {\n    var self = this;\n\n    // Define regex to apply to templates\n    self.componentRegex = /{{component (\\w+)}}/g;\n\n    // Call base\n    this._super(mashupFacade, dataService, params);\n\n    // Subscribe to change widget event\n    this.subscribe(\"changeWidget\", function (e, params) {\n\n      $.when(bizagi.util.autoSave()).done(function () {\n\n        $(document).data('auto-save', '');\n\n        if (params.widgetName == bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX || params.widgetName == bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID) {\n          bizagi.cookie(\"bizagiDefaultWidget\", params.widgetName, { expires: 30 });\n        }\n\n        bizagi.util.setContext({\n          widget: params.widgetName },\n        true);\n\n        self.setWidget(params);\n\n      });\n\n    });\n\n    // Subscribe to pop widget event\n    this.subscribe(\"showDialog\", function (e, params) {\n      // Shows a pop a widget\n      switch (params.widgetName) {\n        case \"routing\":\n          self.renderController.renderRoutingDialog(params);\n          break;\n        default:\n          break;}\n\n    });\n\n\n    // Subscribe to push widget event\n    this.subscribe(\"pushWidget\", function (e, params) {\n      // Shows a push a widget\n      self.pushWidget(params);\n    });\n\n    // Subscribe to execute action event\n    this.subscribe(\"executeAction\", function (e, params) {\n      // Executes the action\n      self.executeAction(params);\n    });\n    /**\r\n         * subscribe the error\r\n         */\n    this.subscribe(\"renderActionButton\", function (e, params) {\n      // Executes the action\n      if (typeof self.mashupFacade.mashup.defaultParams.onRenderAction !== \"undefined\") {\n        self.mashupFacade.mashup.defaultParams.onRenderAction(params);\n      }\n    });\n\n\n    this.subscribe(\"error\", function (e, params) {\n      // attach the widget to a given element\n      if (typeof self.mashupFacade.mashup.defaultParams.onError !== \"undefined\") {\n        var result = {};\n        try {\n          result = $.parseJSON(params.responseText);\n        } catch (e) {\n          try {\n            // Try to fix some known problems regarding rare ascii characters\n            result = $.parseJSON(data.replace(/\\x1d/g, \".\"));\n          } catch (ex) {\n            result.type = \"error\";\n            result.code = e.errorCode;\n            result.message = params ? params.responseText : \"\";\n            //Throw exception in next layer\n          }\n        }\n\n        self.mashupFacade.mashup.defaultParams.onError(result);\n      }\n      //self.mashupFacade.navigate(\"#home\");\n    });\n\n    this.subscribe(\"mashup-resize-content\", function (e, params) {\n      self.mashupFacade.mashup.defaultParams.onMashupResize(params);\n    });\n\n  },\n\n  /*\r\n      *   Renders the content for the current controller\r\n      *\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    // render workarea\n    return self.renderWorkarea();\n  },\n\n  /*\r\n      *   Renders the workarea based on the current widget\r\n      */\n  renderWorkarea: function renderWorkarea() {\n    var self = this;\n    // clean widgets\n    //TODO Implementacion de un factory de controllers\n\n    self.renderController = new bizagi.mashup.controllers.render(self.mashupFacade, self.dataService, { canvas: self.canvas, layoutHeader: self.creationParams.layoutHeader || false });\n    self.caseSummaryController = new bizagi.mashup.controllers.caseSummary(self.mashupFacade, self.dataService, { canvas: self.canvas });\n    self.startFormController = new bizagi.mashup.controllers.startForm(self.mashupFacade, self.dataService, { canvas: self.canvas });\n    self.entityTemplatesController = new bizagi.mashup.controllers.entityTemplates(self.mashupFacade, self.dataService, { canvas: self.canvas, layoutHeader: self.creationParams.layoutHeader || false });\n\n    //starts non visual controllers\n\n    self.newCaseController = new bizagi.mashup.controllers.newCase(self.mashupFacade, self.dataService, { canvas: self.canvas, layoutHeader: self.creationParams.layoutHeader || false });\n\n    return $.when(self.renderController.render(),\n    self.caseSummaryController.render(),\n    self.newCaseController.render(),\n    self.startFormController.render(),\n    self.entityTemplatesController.render());\n\n  } });","/**\r\n * Controlador de dialogos de bizagi, este controlador esta hecho especificamente para kendo, si se usa otro framework \r\n * debe escribir una clase que sobreescriba esta o sobre escribir los metodos aqui consignados de nuevo.\r\n * Created by RicardoPD on 4/18/2016.\r\n */\n\nbizagi.mashup.controllers.controller.extend(\"bizagi.mashup.controllers.dialog\", {}, {\n  init: function init(mashupFacade, dataService, params) {\n    var self = this;\n    //Load templates\n    self._super(mashupFacade, dataService, params);\n\n    if (bizagi.hasOwnProperty(\"kendo\")) {\n      this.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n    } else {\n      this.templateService = new bizagi.templates.services.service(bizagi.localization);\n    }\n\n    self.loadTemplates({\n      \"mashup-dialog\": bizagi.getTemplate(\"bizagi.mashup.common.dialog\").concat(\"#mashup-dialog\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n      * Render the Dialog\r\n      * @param params\r\n      */\n  renderContent: function renderContent(params) {\n    var self = this;\n    var dialogTmpl = self.getTemplate(\"mashup-dialog\");\n    var now = $.now();\n    self.id = \"modal-\" + now;\n    var content = $.kendoTmpls(bizagi.util.trim(dialogTmpl), { id: self.id }).clone();\n    content.html(params.content);\n    return content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    self.content.kendoMobileModalView({\n      close: function close() {\n        this.destroy();\n        this.element.remove();\n      },\n      useNativeScrolling: true,\n      modal: self.creationParams.modal || true });\n\n\n    self.modalView = self.content.data(\"kendoMobileModalView\");\n\n    self.modalView.open();\n  },\n\n  close: function close() {\n    if (typeof this.modalView !== \"undefined\") {\n      this.modalView.close();\n    }\n  } });","/**\r\n *\r\n * Created by RicardoPD on 4/13/2016.\r\n */\n\n// Auto extend\n$.Class.extend(\"bizagi.mashup.controller.navigation\", {\n  PRIORITY_UNDEFINED: -1,\n  PRIORITY_PRIMARY: 1,\n  PRIORITY_SECONDARY: 2,\n  PRIORITY_LIST: [\"next\", \"save\", \"validate\", \"nextWithoutValidations\", \"createnewcase\", \"search\", \"select\", \"add\", \"\"] },\n{\n\n  /**\r\n   * Constructor\r\n   * @param params\r\n   */\n  init: function init(controller) {\n    var self = this;\n    self.controller = controller;\n    self.view = self.controller.view;\n    self.$pane = self.view.wrapper.closest(\"[data-role='pane']\");\n    self.pane = self.$pane.data(\"kendoMobilePane\");\n    self.navBar = $(\".km-navbar\", self.view.header).data(\"kendoMobileNavBar\");\n\n    //Will contains all the dinamic views created\n    self.containersQueue = [];\n  },\n\n  resetParams: function resetParams() {\n    var self = this;\n    if (typeof self.navBar !== \"undefined\") {\n      self.navBar.title(\"\");\n      $(\".bz-render-dynamic\", self.navBar.element).hide();\n    }\n  },\n\n  /**\r\n      * creates a container to paint a new render form\r\n      */\n  createRenderContainer: function createRenderContainer(params) {\n    var self = this;\n    params = params || {};\n    params.view = params.view || {};\n    var now = $.now();\n    var id = \"render-edition-\" + now;\n    var zoom = typeof params.view.zoom !== \"undefined\" ? Boolean(params.view.zoom) : false;\n    var useNativeScrolling = typeof params.view.useNativeScrolling !== \"undefined\" ? Boolean(params.view.useNativeScrolling) : true;\n\n    var $view = $.kendoTmpls(self.controller.getTemplate(\"mashup-render-edition-view\"), {\n      \"viewId\": id,\n      \"title\": params.title || \"\" });\n\n\n    self.setContainerParams(params);\n\n    self.$pane.append($view);\n    var viewItem = new kendo.mobile.ui.View($view,\n    {\n      \"zoom\": zoom,\n      \"useNativeScrolling\": useNativeScrolling,\n      \"destroy\": function destroy() {\n        var tmplView = this;\n        var el = self.containersQueue.find(function (el) {\n          return \"#\".concat(el.id) === tmplView.id;\n        });\n        var index = self.containersQueue.indexOf(el);\n        self.containersQueue.splice(index, 1);\n        self.controller.navigate(el.previousViewId, \"\", true);\n        this.element.remove();\n\n        //IMPORTANT\n        //This block of code helps to fix an issue with mashups inside iframe for Sharepoint Projects.\n        //After the user opens an formlink and then close it, the scroll from the parent container is affected\n        //and does not let scroll the page again. Moving the scroll helps to readjust the focus\n        var view = self.pane.view();\n        var scrollElement = view.scroller.scrollElement;\n\n        if (scrollElement) {\n          var currentScrollY = scrollElement.scrollTop();\n          $(scrollElement).scrollTop(currentScrollY - 1).scrollTop(currentScrollY + 1);\n        }\n      } });\n\n\n\n    var returnObject = {\n      id: id,\n      element: viewItem.contentElement(),\n      destroy: function destroy() {\n        viewItem.destroy();\n      },\n      setNavigationButtons: function setNavigationButtons(form) {\n        self.setNavigationButtons(form, this.id);\n      } };\n\n\n    $(\".bz-render-back\", viewItem.header).bind(\"click\", function () {\n      returnObject.element.trigger(\"close\", {});\n      viewItem.destroy();\n    });\n\n    self.containersQueue.push($.extend(returnObject, { view: viewItem }));\n\n    return returnObject;\n  },\n\n  navigate: function navigate(id) {\n    var self = this;\n    var view = self.containersQueue.find(function (el) {\n      return el.id === id;\n    });\n\n    if (typeof view !== \"undefined\") {\n      view.previousViewId = bizagi.kendoMobileApplication.view().id;\n      self.controller.navigate(view.id, \"\", true);\n    }\n  },\n\n  setNavigationButtons: function setNavigationButtons(form) {\n    var self = this;\n    var buttons,\n    hasButtons = false,\n    properties = {};\n\n    if (form && form.buttons && form.buttons.length > 0) {\n      buttons = form.buttons;\n      hasButtons = true;\n      properties = form.properties;\n    }\n\n    self.changeButtonVisibilityByContainer(form);\n\n    if (hasButtons && typeof self.navBar !== \"undefined\") {\n      var dynamic = properties.buttons || buttons;\n\n      self.initFormButton(form, dynamic);\n      /*$(\".bz-render-dynamic\", self.navBar.element).show().actionSheet({\r\n                                              setDataToShow: function () {\r\n                                                  var buttonsToShow = [];\r\n                                                  for (var i = 0; i < dynamic.length; i++) {\r\n                                                      dynamic[i].guid = dynamic[i].ordinal;\r\n                                                      dynamic[i].displayName = dynamic[i].caption;\r\n                                                        buttonsToShow.push(dynamic[i]);\r\n                                                  }\r\n                                                  return buttonsToShow;\r\n                                              },\r\n                                              actionClicked: function (action) {\r\n                                                  // Default back/close if not ordinal\r\n                                                  var buttonProperties = form.buttons[action.guid];\r\n                                                  form.processButton(buttonProperties);\r\n                                              }\r\n                                          });*/\n\n    }\n  },\n\n  modalViewDidAppear: function modalViewDidAppear() {\n  },\n\n  modalViewDidDisappear: function modalViewDidDisappear() {\n  },\n\n  setContainerParams: function setContainerParams(params) {\n  },\n\n  initFormButton: function initFormButton(form, dynamic) {\n    var self = this;\n    var buttonsToShow = dynamic.filter(function (item) {\n      return ![\"back\", \"cancel\"].includes(item.action) && bizagi.util.parseBoolean(item.visible) !== false;\n    }).map(function (item) {\n      return {\n        id: item.id,\n        action: item.action,\n        additional: false,\n        label: item.caption,\n        ordinal: item.ordinal,\n        priority: self.Class.PRIORITY_SECONDARY,\n        visible: bizagi.util.parseBoolean(item.visible) !== false,\n        ranked: false };\n\n    });\n\n    if (buttonsToShow.length > 0) {\n      $(form.container).formButtons({\n        buttons: self.getListWithPriority(buttonsToShow),\n        click: function click(element, params) {\n          self.processButton(params.ordinal, form);\n        } });\n\n    }\n  },\n\n  changeButtonVisibilityByContainer: function changeButtonVisibilityByContainer(form) {\n    if (form && form.container) {\n      $(\".ui-bizagi-container-children-form\", form.container).addClass(\"ui-bizagi-form-no-buttons\");\n      $(\".ui-bizagi-button-container, .ui-bizagi-container-button-edit\", form.container).hide();\n    }\n  },\n\n  getListWithPriority: function getListWithPriority(buttonsToShow) {\n    var self = this;\n    var list = bizagi.clone(buttonsToShow);\n    var counter = 0;\n\n    var indexNext = self.findPriorityAction(list, 0);\n    if (indexNext !== self.Class.PRIORITY_UNDEFINED) {\n      list[indexNext].priority = self.Class.PRIORITY_PRIMARY;\n      list[indexNext].ranked = true;\n      counter++;\n    }\n\n    // Only has one action\n    if (list.length === 1) return list;\n\n    var indexSave = self.findPriorityAction(list, 0);\n    if (indexSave !== self.Class.PRIORITY_UNDEFINED) {\n      list[indexSave].priority = self.Class.PRIORITY_SECONDARY;\n      list[indexSave].ranked = true;\n      counter++;\n    }\n\n    list.forEach(function (item) {\n      if (!item.ranked) {\n        item.priority = counter++;\n        item.ranked = true;\n        item.additional = true;\n\n      }\n    });\n\n    // The list was ordered\n    bizagi.util.sortJSON(list, \"priority\", \"desc\");\n\n    return list;\n  },\n\n  findPriorityAction: function findPriorityAction(list, index) {\n    var actionsList = this.Class.PRIORITY_LIST;\n\n    var indexNext = list.findIndex(function (item) {\n      return item.action === actionsList[index] && !item.ranked;\n    });\n\n    if (indexNext !== this.Class.PRIORITY_UNDEFINED) return indexNext;\n    return this.findPriorityAction(list, ++index);\n  },\n\n  /**\r\n      * process the button for principal form or form whit callback in form-edition\r\n      * @param button\r\n      * @param form\r\n      */\n  processButton: function processButton(ordinal, form) {\n    var button = form.buttons.find(function (btn) {\n      return btn.ordinal === ordinal;\n    });\n\n    if (button.callback) {\n      button.callback();\n    } else {\n      form.processButton(button);\n    }\n  } });","/**\r\n *\r\n * Created by RicardoPD on 4/18/2016.\r\n */\n\nbizagi.mashup.controllers.controller.extend(\"bizagi.mashup.controllers.routing\", {},\n{\n\n  renderContent: function renderContent(params) {\n    var routingTmpl = this.creationParams.routingTmpl || \"\";\n    return $.kendoTmpls(routingTmpl, params);\n  },\n\n  /*\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var dialog = new bizagi.mashup.controllers.dialog(self.dataService, self.mashupFacade);\n\n    dialog.render({ content: self.content }).done(function () {\n\n      // Assing even style\n      $(\"tr:nth-child(even)\", self.content).addClass(\"event\");\n\n      $(\"#ui-bizagi-wp-app-routing-activity-wf .bz-wp-routing-action\", self.content).on(\"click\", function () {\n        var item = $(this).closest(\".bz-wp-routing-item\").data(\"item\");\n\n        self.showWorkitem({\n          idCase: item.idCase || 0,\n          idWorkitem: item.idWorkItem || 0,\n          idTask: item.idTask || 0,\n          taskName: item.displayName || \"\",\n          radNumber: item.radNumber || 0 });\n\n\n        // close dialog\n        dialog.close();\n      });\n\n    });\n  },\n\n  /*\r\n      *   Shows the rendering widget\r\n      */\n  showWorkitem: function showWorkitem(params) {\n    var self = this;\n    // Shows render widget\n\n    self.publish(\"renderCase\", {\n      idCase: params.idCase,\n      idWorkitem: params.idWorkitem,\n      idTask: params.idTask,\n      taskName: params.taskName,\n      radNumber: params.radNumber });\n\n  } });","/**\r\n *\r\n * Created by RicardoPD on 6/7/2016.\r\n */\n\n// Auto extend\n$.Class.extend(\"bizagi.mashup.controllers.async\", {\n  ASYNC_CHECK_TIMER: 3000 },\n{\n\n  init: function init(renderController) {\n    var self = this;\n    self.renderController = renderController;\n    self.configureHandlers();\n  },\n\n  configureHandlers: function configureHandlers() {\n    var async = this;\n    async.renderController.subscribe(\"render-async\", function (e, params) {\n      async.executeAsync(params).done(function () {\n        async.renderController.publish(\"renderCase\", {\n          action: \"routing\",\n          idCase: params.idCase });\n\n      });\n    });\n  },\n\n  executeAsync: function executeAsync(params) {\n    var self = this;\n    var defer = new $.Deferred();\n    var $template = $.tmpl(self.renderController.getTemplate(\"mashup-async\"), params);\n    self.modal = new kendo.mobile.ui.ModalView($template,\n    {\n      close: function close() {\n        this.destroy();\n        this.element.remove();\n      },\n      modal: true });\n\n\n    $(\".render-async-close\", self.modal.element).bind(\"click\", function () {\n      self.modal.close();\n    });\n\n    self.modal.open();\n\n    self.checkAsycnExecutionState(defer, params);\n\n    return defer.promise();\n  },\n\n  checkAsycnExecutionState: function checkAsycnExecutionState(defer, params) {\n    var self = this.renderController;\n    var async = this;\n    $.when(self.dataService.getAsynchExecutionState({\n      idCase: params.idCase })).\n    done(function (response) {\n      // verify errors in response\n      if (response.state == \"Error\" && response.errorMessage !== undefined) {\n        $(\"#modalview-async-message\", self.modal.element).height(130);\n        // Change default error\n        $(\".ui-bizagi-wp-async-error\", self.modal.element).show();\n        $(\".ui-bizagi-wp-waiting-message\", self.modal.element).hide();\n        $(\".ui-bizagi-wp-async-error-txt\", self.modal.element).html(response.errorMessage || bizagi.localization.getResource(\"render-async-error\"));\n      }\n\n      // Check for finish signal\n      if (response.state == \"Processing\") {\n        // Check for non-error message\n        if (response.errorMessage.length === 0) {\n          setTimeout(function () {\n            // Refresh widget after a timer\n            async.checkAsycnExecutionState(defer, params);\n          }, bizagi.mashup.controllers.async.ASYNC_CHECK_TIMER);\n        }\n\n      } else if (response.state == \"Finished\") {\n        // Resolve main deferred\n        async.modal.close();\n        defer.resolve();\n      }\n    });\n  } });","/*\r\n *   Name: BizAgi Workportal Main Controller\r\n *   Author: Ricardo Perez\r\n *   Comments:\r\n *   -   This script will define a base class to handle workportal layouts for any device\r\n *   -   This layout must contain a menu and widget container placeholders\r\n */\n\n\n// Defines the main controller\nbizagi.mashup.controllers.controller.extend(\"bizagi.mashup.controllers.render\", {}, {\n\n  init: function init(mashupFacade, dataService, params) {\n    var self = this;\n    self._super(mashupFacade, dataService, params);\n\n    if (bizagi.hasOwnProperty(\"kendo\")) {\n      this.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n    } else {\n      this.templateService = new bizagi.templates.services.service(bizagi.localization);\n    }\n  },\n\n  /*    loadTemplate: function(template, templateDestination) {\r\n             var self = this;\r\n     \r\n             // Go fetch the template\r\n             return self.templateService.getTemplate(templateDestination, template)\r\n                 .done(function (resolvedTemplate) {\r\n                     self.templates[template] = resolvedTemplate;\r\n                 });\r\n         },*/\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"mashup-render-view\");\n    // Render content\n    return $.kendoTmpls(template, {});\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    var template = self.getTemplate(\"mashup-render-layout\");\n    self.content.prepend($.kendoTmpls(template, {}));\n\n\n    self.view = new kendo.mobile.ui.View(self.content,\n    {\n      \"useNativeScrolling\": true });\n\n\n\n    if (!self.creationParams.layoutHeader) {\n      self.view.header.hide();\n    }\n\n    self.navigation = new bizagi.mashup.controller.navigation(self);\n    self.async = new bizagi.mashup.controllers.async(self);\n    self.configureHandlers();\n  },\n\n  /**\r\n      * Configures all handlers and subscribers for this controller\r\n      *\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self.subscribe(\"renderCase\", function (e, params) {\n      //First tell to navigator, to reset params\n      self.navigation.resetParams();\n\n      // Check if the required params are filled\n      if (bizagi.util.isEmpty(params.idCase)) {\n        bizagi.log(\"Se requiere el id del caso 'idCase' para poder renderizar la forma\");\n        return null;\n      }\n\n      if (!bizagi.util.isEmpty(params.summaryForm)) {\n        self.renderForm(params);\n        return null;\n      }\n\n      // Check if the required params are filled\n      if (bizagi.util.isEmpty(params.idWorkitem)) {\n        var routingParameters = {};\n        routingParameters.idCase = params.idCase;\n        if (params.summaryForm) {\n          routingParameters.summaryForm = true;\n        }\n        self.executeAction(\"routing\", routingParameters);\n        return null;\n      }\n\n      self.renderForm(params);\n    });\n\n    self.subscribe(\"refreshProxyPrefix\", function (e, params) {\n      if (typeof self.rendering !== \"undefined\") {\n        self.rendering.dataService.serviceLocator.setProxyPrefix(params);\n      }\n    });\n\n    $(\".bz-render-back\", self.view.header).bind(\"click\", function () {\n      self.view.contentElement().empty();\n      self.mashupFacade.close();\n    });\n\n    self.subscribe(\"toggleHeader\", function (e, params) {\n      if (typeof params.showHeader !== \"undefined\") {\n        if (params.showHeader) {\n          self.view.header.show();\n        } else\n        {\n          self.view.header.hide();\n        }\n      } else\n      {\n        self.view.header.toggle();\n      }\n    });\n  },\n\n\n  /**\r\n      * Shows complex gateway inside a modal dialog\r\n      * @param data\r\n      * @returns {bizagi.dialog|dialog|bizagi.rendering.dialog.form}\r\n      */\n  renderRoutingDialog: function renderRoutingDialog(params) {\n    var self = this;\n    //show Loading\n\n    var routing = new bizagi.mashup.controllers.routing(self.dataService, self.mashupFacade,\n    {\n      routingTmpl: self.getTemplate(\"mashup-routing\") });\n\n\n\n    routing.render(params.data).done(function () {\n      //hide Loading\n    });\n  },\n\n  /**\r\n      * Defines a method to render the form\r\n      * @param params\r\n      */\n  renderForm: function renderForm(params) {\n    var self = this;\n    var rfParams = params;\n    var renderContainer = self.view.contentElement();\n    renderContainer.empty();\n\n    if (!params.withOutGlobalForm) {\n      if (typeof self.rendering === \"undefined\") {\n        var proxyPrefix = typeof self.dataService.serviceLocator.proxyPrefix !== \"undefined\" ?\n        self.dataService.serviceLocator.proxyPrefix : \"\";\n\n        var paramsFacade = { \"proxyPrefix\": proxyPrefix, device: bizagi.util.detectDevice() };\n\n        // Load render page\n        self.rendering = new bizagi.rendering.facade(paramsFacade);\n\n        // Attach handler to render container to subscribe for routing events\n        renderContainer.bind(\"routing\", function (context, triggerparams) {\n          // Executes routing action\n          var parameters = {\n            idCase: rfParams.idCase,\n            fromTask: rfParams.fromTask || rfParams.idTask,\n            fromWorkItemId: rfParams.fromWorkItemId || rfParams.idWorkitem,\n            isOfflineForm: rfParams.isOfflineForm || false,\n            formsRenderVersion: rfParams.formsRenderVersion };\n\n\n          parameters = $.extend(parameters, triggerparams);\n          self.executeAction(\"routing\", parameters);\n        });\n\n        //Binds rendering error form\n        renderContainer.bind(\"errorform\", function (error) {\n          //trigger error form to notify the facade\n          self.publish(\"error\", error);\n        });\n\n        self.rendering.subscribe(\"renderActionButton\", function (e, data) {\n          self.publish(\"renderActionButton\", {\n            actions: data.actions,\n            data: {\n              idCase: rfParams.idCase,\n              idWorkitem: rfParams.idWorkitem,\n              idTask: rfParams.idTask,\n              idWorkflow: rfParams.idWorkflow } });\n\n\n        });\n\n        /* Data navigation communication*/\n        this.rendering.subscribe(\"dataNavigation\", function (e, params) {\n          self.publish(\"dataNavigation\", params);\n          /* var etController = new bizagi.mashup.controllers.entityTemplates(self.mashupFacade, self.dataService, {canvas : self.canvas, navigation: self.navigation, data: params});\r\n                                                   etController.render({title: params.data.displayName});*/\n        });\n      }\n\n      // Executes rendering into render container\n      bizagi.loading.start(); //Init loading\n      $.when(self.rendering.execute(\n      $.extend(params, {\n        canvas: renderContainer,\n        navigation: self.navigation }))).\n\n      then(function () {\n        //this returns a form, Once the form is rendered you can bind events to the form\n        self.resizeParent($(\"#render .bz-form\"));\n      }).fail(function (error) {\n        //self.publish(\"error\", error);\n      }).always(function () {\n        bizagi.loading.stop(); //Whatever happens remove loading\n      });\n    } else\n    {\n      var infoTemplate = self.getTemplate(\"mashup-info-message\");\n      var message = params.messageForm || self.resources.getResource(\"render-without-globalform\");\n      var isOfflineForm = false;\n\n      if (typeof self.params !== \"undefined\") {\n        isOfflineForm = typeof self.params.isOfflineForm !== \"undefined\" &&\n        bizagi.util.parseBoolean(self.params.isOfflineForm);\n      }\n\n      if (isOfflineForm) {\n        message = bizagi.util.getMessageFromNetworkState(self.dataService.online);\n      }\n\n      var infoHtml = $.kendoTmpls(infoTemplate, {\n        message: message });\n\n      // Remove loading icon from summary container\n      infoHtml.appendTo(renderContainer);\n\n      $(\".ui-bizagi-info-message-button\", renderContainer).click(function () {\n        self.view.contentElement().empty();\n        self.mashupFacade.close();\n      });\n    }\n\n    var navbar = $(\".km-navbar\", self.view.header).data(\"kendoMobileNavBar\");\n    if (typeof navbar !== \"undefined\") {\n      var title = typeof params.displayName !== \"undefined\" ? params.displayName : params.radNumber || params.idCase;\n      navbar.title(title);\n    }\n\n    //Call the evento to paint summaryCase\n    self.publish('renderSummaryCase', params);\n    // Keep reference to rendering facade\n    //self.renderingFacade = rendering;\n  } });","/*\r\n *   Name: Bizagi CaseSummary\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will define a base class to handle workportal layouts for any device\r\n *   -   This layout must contain a menu and widget container placeholders\r\n */\n\n\n// Defines the main controller\nbizagi.mashup.controllers.controller.extend(\"bizagi.mashup.controllers.caseSummary\", {}, {\n  init: function init(mashupFacade, dataService, params) {\n    this._super(mashupFacade, dataService, params);\n\n    if (bizagi.hasOwnProperty(\"kendo\")) {\n      this.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n    } else {\n      this.templateService = new bizagi.templates.services.service(bizagi.localization);\n    }\n\n    this.initialized = false;\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"mashup-summary-view\");\n    // Render content\n    var content = $.kendoTmpls(template);\n\n    return content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    self.drawer = new kendo.mobile.ui.Drawer(self.content,\n    {\n      \"swipeToOpen\": false,\n      \"position\": \"rigth\" });\n\n\n  },\n\n  /**\r\n      * Base event handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    self._super();\n\n    self.subscribe(\"showSummary\", function () {\n      if (typeof self.drawer !== \"undefined\" && self.initialized) {\n        self.drawer.show();\n      } else {\n        bizagi.log(\"The summary case controller has not been initialized\");\n      }\n    });\n\n    self.drawer.bind(\"show\", function () {\n      $(\".bz-header_select\", self.canvas).trigger(\"resizeHeader\");\n    });\n\n    /* istanbul ignore next */\n    $(\"#case-summary\", self.canvas).delegate(\".summaryLink\", \"click\", function (e) {\n\n      e.preventDefault();\n\n      self.routingExecute($(this));\n\n      $($(this), self.canvas).remove();\n      self.cache = {};\n    });\n  },\n\n  /**\r\n      * Renders the tabs component of the webpart\r\n      * @param args\r\n      * @returns {*}\r\n      */\n  renderCurrentTab: function renderCurrentTab(args) {\n    var self = this;\n    var htmlContent = \"\";\n    var defer = new $.Deferred();\n    var params = args.params || self.params || {};\n\n    self.cache = self.cache || {};\n    self.data = self.data || {};\n\n    switch (args.currentTab) {\n      case \"#ui-bizagi-tab-assignees\":\n        if (typeof self.cache[\"assignees\"] === \"undefined\") {\n          $.when(\n          self.dataService.summaryAssigness({\n            idCase: params.idCase })).\n          done(function (assignees) {\n            htmlContent = $.kendoTmpls(bizagi.util.trim(self.getTemplate(\"mashup-summary-assigness\")), assignees);\n            self.cache[\"assignees\"] = true;\n\n            $(args.currentTab, self.content).empty();\n            $(args.currentTab, self.canvas).html(htmlContent);\n\n            bizagi.loading.stop();\n            defer.resolve();\n          });\n        } else {\n          bizagi.loading.stop();\n          defer.resolve();\n        }\n        break;\n      case \"#ui-bizagi-tab-comments\":\n        if (typeof self.cache[\"comments\"] === \"undefined\") {\n          $.when(\n          self.dataService.getComments({\n            idCase: params.radNumber || params.idCase,\n            idLastComment: self.Class.COMMENT_SIZE })).\n          done(function (comments) {\n            comments[\"showComments\"] = comments.totalRecords > 0 ? true : false;\n            comments[\"timeAgo\"] = bizagi.getTimeAgo;\n            comments[\"getUserName\"] = function (idUser) {\n              var users = comments.users || [];\n              var name = \"\";\n              $.each(users, function (key, value) {\n                if (users[key][\"Id\"] == idUser) {\n                  name = value.DisplayName;\n                }\n              });\n\n              return name;\n            };\n\n            htmlContent = $.kendoTmpls(bizagi.util.trim(self.getTemplate(\"mashup-summary-comments\")), comments);\n            self.cache[\"comments\"] = true;\n\n            $(args.currentTab, self.content).empty();\n            $(args.currentTab, self.canvas).html(htmlContent);\n\n            bizagi.loading.stop();\n            defer.resolve();\n          });\n        } else {\n          bizagi.loading.stop();\n          defer.resolve();\n        }\n\n        break;\n      case \"#ui-bizagi-tab-subprocess\":\n        if (typeof self.cache[\"subprocess\"] === \"undefined\") {\n          $.when(\n          self.dataService.summarySubProcess({\n            idCase: params.idCase })).\n          done(function (subprocess) {\n            htmlContent = $.kendoTmpls(bizagi.util.trim(self.getTemplate(\"mashup-summary-subprocess\")), subprocess);\n            self.cache[\"subprocess\"] = true;\n\n            $(args.currentTab, self.content).empty();\n            $(args.currentTab, self.canvas).html(htmlContent);\n\n            bizagi.loading.stop();\n            defer.resolve();\n          });\n        } else {\n          bizagi.loading.stop();\n          defer.resolve();\n        }\n        break;\n      case \"#ui-bizagi-tab-events\":\n        if (typeof self.cache[\"events\"] === \"undefined\") {\n          $.when(\n          self.dataService.summaryCaseEvents({\n            idCase: params.idCase })).\n          done(function (events) {\n            htmlContent = $.kendoTmpls(bizagi.util.trim(self.getTemplate(\"mashup-summary-events\")), events);\n            self.cache[\"events\"] = true;\n\n            $(args.currentTab, self.content).empty();\n            $(args.currentTab, self.canvas).html(htmlContent);\n\n            bizagi.loading.stop();\n            defer.resolve();\n          });\n        } else {\n          bizagi.loading.stop();\n          defer.resolve();\n        }\n        break;\n      case \"#ui-bizagi-tab-activities\":\n        if (typeof self.cache[\"activities\"] === \"undefined\") {\n          $.when(\n          self.dataService.summaryActivities({\n            data: self.data,\n            idWorkitem: params.idWorkitem })).\n          done(function (activities) {\n            activities[\"idCase\"] = params.idCase;\n\n            htmlContent = $.kendoTmpls(bizagi.util.trim(self.getTemplate(\"mashup-summary-activities\")), activities);\n            self.cache[\"activities\"] = true;\n\n            $(args.currentTab, self.content).empty();\n            $(args.currentTab, self.canvas).html(htmlContent);\n\n            htmlContent.delegate(\".summaryLink\", \"click\", function (e) {\n              e.preventDefault();\n              self.routingExecute($(this));\n            });\n\n            bizagi.loading.stop();\n            defer.resolve();\n          });\n        } else {\n          bizagi.loading.stop();\n          defer.resolve();\n        }\n        break;\n      default:\n        bizagi.loading.stop();\n        defer.resolve();\n        break;}\n\n    return defer.promise();\n  },\n  /*\r\n      *   Executes routing action\r\n      */\n  routingExecute: function routingExecute(element) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (element) {\n      var idCase = element.data(\"case\") || self.params.idCase;\n      var idWorkItem = element.data(\"workitem\");\n      var idTask = element.data(\"task\");\n      var displayName = element.data(\"displayname\") || self.params.displayName;\n\n      $(\".km-content:visible\").data(\"kendoMobileScroller\").reset();\n      $(\"#case-summary\").data(\"kendoMobileDrawer\").hide();\n\n\n      self.publish(\"renderCase\", {\n        idCase: idCase,\n        idWorkitem: idWorkItem,\n        idTask: idTask,\n        displayName: displayName });\n\n      defer.resolve(true);\n\n    } else {\n      defer.resolve(false);\n    }\n    return defer.promise();\n  },\n\n  /*\r\n      * Action release\r\n      */\n  release: function release(params) {\n    var self = this;\n    var defered = new $.Deferred();\n    var buttons = [\n    { \"label\": self.getResource(\"workportal-widget-dialog-box-release-ok\"), \"action\": \"resolve\" },\n    { \"label\": self.getResource(\"workportal-widget-dialog-box-release-cancel\") }];\n\n\n    $.when(bizagi.showConfirmationBox(self.getResource(\"workportal-widget-dialog-box-release\"), self.\n    getResource(\"render-actions-release\"), \"\", buttons)).\n    done(function () {\n\n      bizagi.loading.start();\n\n      $.when(self.dataService.releaseActivity({\n        idCase: params.idCase,\n        idWorkItem: params.idWorkitem })).\n      done(function (data) {\n\n        var status = data && data.status ? data.status : \"Error\";\n\n        switch (status) {\n          case \"Success\":\n            //bizagi.kendoMobileApplication.navigate(\"homePortal\"); //TODO:Review taskFeed\n            self.publish(\"renderActionButton\", { actions: [\"release\", \"routing\"] });\n            self.publish(\"renderCase\", {\n              action: \"routing\",\n              idCase: params.idCase,\n              idWorkitem: params.idWorkitem });\n\n            //Show message on rubik\n            break;\n          case \"ConfigurationError\":\n            bizagi.showMessageBox(self.\n            getResource(\"workportal-widget-dialog-box-release-configuration-error-message\").\n            replace(\"{0}\", params.idWorkitem), self.\n            getResource(\"workportal-widget-dialog-box-release-error\"), \"error\", false);\n            break;\n          case \"Error\":\n            bizagi.showMessageBox(self.getResource(\"workportal-widget-dialog-box-release-error-message\").\n            replace(\"{0}\", params.idWorkitem), self.\n            getResource(\"workportal-widget-dialog-box-release-error\"), \"error\", false);\n            break;\n          default:\n            break;}\n\n\n        bizagi.loading.stop();\n\n        defered.resolve();\n      }).fail(function () {\n        var message = self.getResource(\"workportal-widget-dialog-box-release-error-message\").replace(\"{0}\",\n        params.idWorkitem);\n        bizagi.showMessageBox(message, self.getResource(\"workportal-widget-dialog-box-release-error\"),\n        \"error\", false);\n        bizagi.loading.stop();\n        defered.reject();\n      });\n    });\n    return defered.promise();\n  } });","/*\r\n *   Name: BizAgi Workportal new Case Controller\r\n *   Author: RicardoPD on 2/16/2017.\r\n *   Comments:\r\n *      - this script will allow the bizagi case creation\r\n */\n\nbizagi.mashup.controllers.controller.extend(\"bizagi.mashup.controllers.newCase\", {}, {\n\n\n  /**\r\n                                                                                        * Constructor\r\n                                                                                        * @param mashupFacade\r\n                                                                                        * @param dataService\r\n                                                                                        * @param params\r\n                                                                                        */\n  init: function init(mashupFacade, dataService, params) {\n    var self = this;\n    self._super(mashupFacade, dataService, params);\n\n    if (bizagi.hasOwnProperty(\"kendo\")) {\n      this.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n    } else {\n      this.templateService = new bizagi.templates.services.service(bizagi.localization);\n    }\n\n    self.loadTemplates({\n      \"mashup-newcase-modal-multiorganization\": bizagi.getTemplate(\"bizagi.mashup.common.newCase\").concat(\"#mashup-newcase-multiorganization\"),\n      useNewEngine: false });\n\n  },\n  /**\r\n      * This controller haven''t a visual interface\r\n      */\n  renderContent: function renderContent() {\n  },\n\n  postRender: function postRender() {\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Configures all the events implementation\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self.subscribe(\"createNewCase\", function (e, params) {\n      if (typeof bizagi.currentUser !== \"undefined\" && bizagi.util.parseBoolean(bizagi.currentUser.isMultiOrganization)) {\n        return self.createOrganizationList(params);\n      } else\n      if (params.notification) {\n        if (params.isBatch) {\n          return self.createNewCaseNotification(params);\n        } else {\n          return self.hasStartForm(params);\n        }\n      }\n      return self.createNewCase(params);\n    });\n  },\n\n  /**\r\n      * Creates a simple new case\r\n      * @param newCaseParams\r\n      * @returns {jQuery.Deferred}\r\n      */\n  createNewCase: function createNewCase(newCaseParams) {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    bizagi.loading.start();\n\n    if (newCaseParams.isOfflineForm) {\n      var dataCase = {\n        idWfClass: newCaseParams.idProcess || newCaseParams.idWFClass,\n        displayName: newCaseParams.displayName,\n        isOfflineForm: newCaseParams.isOfflineForm,\n        categoryName: newCaseParams.categoryName };\n\n\n      return self.createCase(dataCase);\n    } else {\n      $.when(self.dataService.startProcess(newCaseParams)).then(function (resultData) {\n        var response = self.buildCaseParameters(newCaseParams, resultData);\n\n        if (response.hasStartForm) {\n          response.displayName = newCaseParams.displayName;\n          self.publish(\"renderStartForm\", { params: response });\n          self.mashupFacade.navigate(\"#startForm\");\n        } else {\n          self.publish(\"renderCase\", response);\n          self.mashupFacade.navigate(\"#render\");\n        }\n\n        deferred.resolve();\n      }).fail(function (msg) {/* istanbul ignore next: untestable fail */\n        var response = $.parseJSON(msg.responseText);\n        bizagi.showMessageBox(response.message, \"Error\");\n        deferred.fail();\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n\n      return deferred;\n    }\n  },\n\n  /**\r\n      * Create new case for organizations\r\n      * @param newCaseParams\r\n      * @returns\r\n      */\n  createCase: function createCase(newCaseParams) {\n    var self = this;\n    bizagi.loading.start();\n\n    return self.dataService.createNewCase(newCaseParams).then(function (response) {\n      self.publish(\"renderCase\", response);\n      self.mashupFacade.navigate(\"#render\");\n\n    }).fail(function (msg) {\n      var response = $.parseJSON(msg.responseText);\n      bizagi.showMessageBox(response.message, \"Error\");\n\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  },\n\n  /**\r\n      *\r\n      * @param newCaseParams\r\n      * @returns {*}\r\n      */\n  hasStartForm: function hasStartForm(newCaseParams) {\n    var self = this;\n    newCaseParams = newCaseParams || {};\n\n    if (!newCaseParams.hasStartForm && newCaseParams.isShortcut) {\n      return self.startShortcutProcess(newCaseParams);\n    } else {\n      return self.createNewCaseNotification(newCaseParams);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param newCaseParams\r\n      */\n  startShortcutProcess: function startShortcutProcess(newCaseParams) {\n    var self = this;\n    self.dataService.actionCreateCase(newCaseParams).done(function (caseResponse) {\n      var idCase = caseResponse.caseId;\n\n      self.dataService.getCaseAssignees({ idCase: idCase }).done(function (assignessResponse) {\n        var assignees = assignessResponse.assignees;\n        var navigateProcess = false;\n\n        if (typeof assignees !== \"undefined\" && assignees.length > 0) {\n          var currentUser = bizagi.currentUser.idUser;\n          var assigned = assignees.find(function (el) {\n            return el.idUser == currentUser;\n          });\n\n          if (typeof assigned !== \"undefined\") {\n            navigateProcess = true;\n          }\n        }\n\n        if (navigateProcess) {\n          self.publish(\"renderCase\", { action: \"routing\", idCase: idCase });\n        } else {\n          var message = bizagi.localization.\n          getResource(\"workportal-widget-templateengine-action-process-notification\");\n          message = message.replace(\"{0}\", idCase);\n\n          $.notifier.add({ text: message });\n        }\n      });\n    }).fail(function (msg) {\n      var response = $.parseJSON(msg.responseText);\n      bizagi.showMessageBox(response.message, \"Error\");\n    });\n  },\n\n  /**\r\n      * Create list of organizations\r\n      * @param newCaseParams\r\n      * @returns\r\n      */\n  createOrganizationList: function createOrganizationList(newCaseParams) {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    // Initialize adjusted modalview\n    self.isAdjusted = false;\n\n    self.dataService.getOrganizationsList().\n    done(function (data) {\n\n      var template = self.getTemplate(\"mashup-newcase-modal-multiorganization\");\n      var multiorganizationTemplate = kendo.template(template, { useWithBlock: false });\n\n      var multiorganizationModal = multiorganizationTemplate({\n        list: data.response,\n        idWfClass: newCaseParams.idProcess,\n        isAdhocProcess: newCaseParams.isAdhocProcess || false });\n\n\n      var modalView = $(multiorganizationModal.trim()).kendoMobileModalView({\n        close: function close() {\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false }).\n      getKendoMobileModalView();\n\n      // Configure Handler modal new Case\n      self.configureModalHandlers();\n\n      $(\".bz-wp-modal-organization-footer div.km-rightitem\").addClass(\"inactive\");\n\n      modalView.open();\n\n      /* istanbul ignore next: untestable */\n      modalView.adjustSize = function () {\n        // Adjust summary popup to window size\n        var maxHeight;\n        var listHeight = $(\".bz-wp-modal-organization-list\", this.element).height();\n\n        // Do nothing\n        if (listHeight === 0) return;\n\n        var maxWidth = $(\".bz-wp-modal-organization-content\", this.element).width();\n        var popupHeight = $(\".bz-wp-modal-organization-header\", this.wrapper).height() +\n        $(\".bz-wp-modal-organization-footer\", this.wrapper).height();\n        var windowHeightSize = window.innerHeight;\n        var windowWidthSize = window.innerWidth;\n\n        if (listHeight + popupHeight >= windowHeightSize) {\n          maxHeight = windowHeightSize - 20;\n        } else {\n          maxHeight = listHeight + popupHeight;\n\n          if (bizagi.util.detectDevice() !== \"tablet_ios\") {\n            maxHeight += !self.isAdjusted ? 20 : Math.abs(window.orientation) === 90 ? 8 : 35;\n          } else {\n            maxHeight += Math.abs(window.orientation) === 90 ? 20 : 22;\n          }\n        }\n\n        var top = (windowHeightSize - maxHeight) / 2;\n        var left = (windowWidthSize - maxWidth) / 2;\n\n        this.wrapper.parent().css(\"top\", top);\n        this.wrapper.parent().css(\"left\", left);\n        this.wrapper.parent().css(\"height\", maxHeight);\n\n        self.isAdjusted = true;\n      };\n\n      modalView.adjustSize();\n\n      /* istanbul ignore next: untestable */\n      window.addEventListener(\"orientationchange\", function () {\n        if (bizagi.util.isAndroidDevice()) {\n          setTimeout(function () {\n            modalView.adjustSize();\n          }, 500);\n        } else {\n          modalView.adjustSize();\n        }\n      }, false);\n\n      deferred.resolve();\n    }).fail(function (msg) {\n      var message;\n      var responseText = msg.responseText;\n\n      try {\n        message = JSON.parse(responseText);\n        message = message.message || responseText;\n      } catch (e) {\n        message = responseText;\n      }\n\n      bizagi.showMessageBox(message, \"Error\");\n      deferred.fail();\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n\n    return deferred;\n  },\n\n  /**\r\n      *\r\n      * @param newCaseParams\r\n      * @returns {jQuery.Deferred}\r\n      */\n  createNewCaseNotification: function createNewCaseNotification(newCaseParams) {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    if (newCaseParams.hasStartForm) {\n      self.publish(\"renderStartForm\", { params: newCaseParams });\n      self.mashupFacade.navigate(\"#startForm\");\n\n      bizagi.loading.stop();\n\n      deferred.resolve();\n    } else {\n      self.dataService.actionCreateCase(newCaseParams).\n      done(function (resp) {\n        var mapping = newCaseParams.mapping || {};\n        var type = newCaseParams.type || \"Process\";\n\n        var response = {\n          showProcess: false,\n          isMultiInstance: newCaseParams.isMultiInstance,\n          notification: true,\n          hasStartForm: resp.hasStartForm,\n          idProcess: resp.idProcess,\n          displayName: newCaseParams.displayName,\n          mapping: mapping,\n          type: type,\n          idParentCase: newCaseParams.idParentCase };\n\n\n        $.extend(response, resp.caseInfo);\n\n        if (newCaseParams.isBatch) {\n          var message = bizagi.localization.\n          getResource(\"workportal-widget-templateengine-action-process-notification\");\n          message = message.replace(\"{0}\", resp.caseNumber);\n\n          var title = printf(bizagi.localization.\n          getResource(\"workportal-widget-templateengine-message-summary-create-cases-singular\"), 1);\n          $.notifier.add({ title: title, text: message, sticky: true });\n\n\n          bizagi.loading.stop();\n        } else {/* istanbul ignore next: untestable fail */\n          self.dataService.getCaseAssignees({ idCase: resp.caseId }).\n          done(function (response) {\n            var assignees = response.assignees;\n            var navigateProcess = false;\n\n            if (typeof assignees !== \"undefined\" && assignees.length > 0) {\n              var currentUser = bizagi.currentUser.idUser;\n              var assigned = assignees.find(function (el) {\n                return el.idUser == currentUser;\n              });\n\n              if (typeof assigned !== \"undefined\") {\n                navigateProcess = true;\n              }\n            }\n\n            bizagi.loading.stop();\n\n            if (navigateProcess) {\n              self.publish(\"render-case\", { action: \"routing\", idCase: resp.caseId });\n            } else {\n              var message = bizagi.localization.\n              getResource(\"workportal-widget-templateengine-action-process-notification\");\n              message = message.replace(\"{0}\", resp.caseNumber);\n              var title = printf(bizagi.localization.\n              getResource(\"workportal-widget-templateengine-message-summary-create-cases-singular\"), 1);\n              $.notifier.add({ title: title, text: message, sticky: true });\n            }\n          });\n        }\n\n        deferred.resolve();\n      }).fail(function (msg) {/* istanbul ignore next: untestable fail */\n        var response = $.parseJSON(msg.responseText);\n        bizagi.loading.stop();\n\n        $.notifier.add({\n          title: \"Error\",\n          class_name: \"error\",\n          text: response.message,\n          sticky: true });\n\n\n        deferred.fail();\n      });\n    }\n    return deferred;\n  },\n\n  /**\r\n      * Configure events handler\r\n      * @returns {}\r\n      */\n  configureModalHandlers: function configureModalHandlers() {\n    var self = this;\n\n    /* Modal Summary*/\n    // .bz-wp-modal-organization-close\n    $(\".bz-wp-modal-organization\").delegate(\".bz-wp-modal-organization-footer .km-leftitem\", \"click\",\n    function () {\n      $(\".bz-wp-modal-organization\").data(\"kendoMobileModalView\").close();\n    });\n\n    $(\".bz-wp-modal-organization\").delegate(\".bz-wp-modal-organization-list > li\", \"click\", function (event) {\n      var item = $(event.target);\n\n      // Remove others selected\n      $(\".bz-wp-modal-organization-list > li\").removeClass(\"bz-wp-modal-organization-list-item-selected\");\n\n      // Enable Create new case\n      if ($(\".bz-wp-modal-organization-footer div.km-rightitem\").hasClass(\"inactive\")) {\n        $(\".bz-wp-modal-organization-footer div.km-rightitem\").removeClass(\"inactive\");\n        $(\".bz-wp-modal-organization-footer div.km-rightitem\").addClass(\"active\");\n      }\n\n      // Selected item\n      item.addClass(\"bz-wp-modal-organization-list-item-selected\");\n    });\n\n    // .bz-wp-modal-organization-newcase\n    $(\".bz-wp-modal-organization\").delegate(\".bz-wp-modal-organization-footer .km-rightitem\", \"click\",\n    function (event) {\n      event.stopPropagation();\n\n      // If not selected item not action\n      if ($(\".bz-wp-modal-organization-footer div.km-rightitem\").hasClass(\"inactive\")) return;\n\n      bizagi.loading.start();\n\n      var modalContext = $(this).closest(\".bz-wp-modal-organization\");\n      var isAdhocProcess = modalContext.data(\"adhoc\");\n      var caseNumber = modalContext.data(\"workflow\");\n      var idOrganization = $(\".bz-wp-modal-organization-list-item-selected\").data(\"id\") || null;\n\n      var newCaseParams = {};\n      if (isAdhocProcess) {\n        newCaseParams.idProcess = caseNumber;\n        return self.createNewCase(newCaseParams);\n      } else {\n        newCaseParams.idWfClass = caseNumber;\n        newCaseParams.idOrganization = idOrganization;\n        return self.createCase(newCaseParams);\n      }\n    });\n  },\n\n  buildCaseParameters: function buildCaseParameters(newCaseParams, data) {\n    var response;\n\n    if (data.oldVersion) {\n      response = data;\n      response[\"hasStartForm\"] = (newCaseParams.isOfflineForm ? false : data.hasStartForm) || false;\n      response[\"displayName\"] = newCaseParams.displayName;\n    } else {\n      var mapping = newCaseParams.mapping || {};\n      var type = newCaseParams.type || \"Process\";\n\n      response = {\n        showProcess: true,\n        isMultiInstance: newCaseParams.isMultiInstance,\n        hasStartForm: newCaseParams.isOfflineForm ? false : data.hasStartForm,\n        idProcess: data.idProcess,\n        displayName: newCaseParams.displayName,\n        mapping: mapping,\n        type: type,\n        idParentCase: newCaseParams.idParentCase };\n\n\n      $.extend(response, data.caseInfo);\n    }\n\n    return response;\n  } });","/*\r\n *   Name: BizAgi Workportal Main Controller\r\n *   Author: RicardoPD on 2/16/2017.\r\n *   Comments:\r\n *      - this script will allow the bizagi case creation with start form\r\n */\n\nbizagi.mashup.controllers.controller.extend(\"bizagi.mashup.controllers.startForm\", {}, {\n\n  /**\r\n                                                                                          * Constructor\r\n                                                                                          * @param mashupFacade\r\n                                                                                          * @param dataService\r\n                                                                                          * @param params\r\n                                                                                          */\n  init: function init(mashupFacade, dataService, params) {\n    var self = this;\n    self._super(mashupFacade, dataService, params);\n  },\n  /**\r\n      * This controller haven''t a visual interface\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"mashup-start-form\");\n    // Render content\n    return $.kendoTmpls(template, {});\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.view = new kendo.mobile.ui.View(self.content, { \"useNativeScrolling\": true }); //self.initNavigation();\n    self.view.header.hide();\n    this.configureHandlers();\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    self.subscribe(\"renderStartForm\", function (e, params) {\n      return self.renderForm(params.params);\n    });\n\n    $(\".bz-render-back\", self.view.header).bind(\"click\", function () {\n      self.view.contentElement().empty();\n      self.mashupFacade.close();\n    });\n\n    // Attach handler to render container to subscribe for routing events\n    self.view.content.bind(\"routing\", function (context, triggerparams) {\n      if (triggerparams.notification) {\n        var message = bizagi.localization.getResource(\"workportal-widget-templateengine-action-process-notification\");\n        message = message.replace(\"{0}\", triggerparams.idCase);\n        $.notifier.add({ text: message });\n        self._back();\n      } else if (typeof triggerparams.idCase !== \"undefined\") {\n        // Executes routing action\n        var params = {\n          action: \"routing\", //bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING\n          idCase: triggerparams.idCase };\n\n\n        self.dataService.getCaseAssignees(triggerparams).done(function (response) {\n          var assignees = response.assignees;\n          self._navigateProcess = false;\n\n          if (typeof assignees !== \"undefined\" && assignees.length > 0) {\n            var currentUser = bizagi.currentUser.idUser;\n            var assigned = assignees.find(function (el) {\n              return el.idUser == currentUser;\n            });\n\n            if (typeof assigned !== \"undefined\") {\n              self._navigateProcess = true;\n            }\n          }\n\n          if (self._navigateProcess) {\n            bizagi.loading.start();\n            $.when(self.publish(\"renderCase\", params)).done(function () {\n              bizagi.loading.stop();\n              self.mashupFacade.navigate(\"#render\");\n            });\n\n          } else {\n            var message = bizagi.localization.getResource(\"workportal-widget-templateengine-action-process-notification\");\n            message = message.replace(\"{0}\", params.idCase);\n\n            self._refreshTemplate();\n\n            //if(self.original_params.showConfirmation) {\n            $.notifier.add({ text: message, sticky: true });\n            //}\n            bizagi.loading.stop();\n          }\n        });\n      }\n    });\n  },\n\n  /**\r\n      * Renders the form component of the widget\r\n      * @param params\r\n      * @return {*}\r\n      */\n  renderForm: function renderForm(params) {\n    var self = this;\n    self.view.content.empty();\n\n    var navbar = $(\".km-navbar\", self.view.header).data(\"kendoMobileNavBar\");\n    navbar.title(params.displayName);\n\n    self.original_params = params;\n\n    self._type = params.type;\n    self._navigateProcess = typeof params.showProcess !== \"undefined\" ? params.showProcess : false;\n    self._origin = params.origin;\n\n    if (params.type === \"Process\") {\n      self._renderParams = {\n        h_action: params.hasStartForm ? \"LOADSTARTFORM\" : \"LOADFORM\" };\n\n      if (typeof params.idParentCase !== \"undefined\") {\n        self._renderParams.h_idParentCase = params.idParentCase;\n      }\n      if (typeof params.guidProcess !== \"undefined\") {\n        self._renderParams.h_guidprocess = params.guidProcess;\n        if (typeof params.mapping === \"undefined\" && params.isShortcut) {\n          self._renderParams.h_mappingstakeholders = true;\n        }\n      } else {\n        self._renderParams.h_idProcess = params.idProcess;\n      }\n      if (params.mapping) {\n        for (var i = 0; i < params.mapping.length; i++) {\n          var map = params.mapping[i];\n          if (map.surrogateKey) {\n            self._renderParams[map.xpath] = JSON.stringify(map.surrogateKey);\n          }\n        }\n      }\n    } else if (params.type === \"Form\") {\n      self._renderParams = {\n        h_action: \"LOADENTITYFORM\",\n        h_contexttype: \"entity\",\n        h_guidEntity: params.entityGuid,\n        h_guidForm: params.formGuid,\n        h_showDisabled: false,\n        h_readonlyform: params.readonlyform };\n\n      if (params.entitySurrogateKey !== null) {\n        self._renderParams.h_surrogateKey = params.entitySurrogateKey;\n      }\n      if (typeof params.mapping !== \"undefined\" && params.mapping !== null) {\n        self._renderParams.h_mapping = JSON.stringify(params.mapping);\n      }\n    }\n\n    // Load render page\n    /* istanbul ignore if: rendering is declared on unit test */\n    if (typeof self.rendering === \"undefined\") {\n      var proxyPrefix = params.proxyPrefix || self.dataService.serviceLocator.proxyPrefix;\n      bizagi.rendering.facade.extend(\"bizagi.rendering.startFormFacade\", {}, {\n        process: function process(params) {\n          return this._super(params).then(function (form) {\n            self._form = form;\n            self.changeButtons(params.origin);\n            return form;\n          });\n        } });\n\n      self.navigation = new bizagi.mashup.controller.navigation(self);\n      self.rendering = new bizagi.rendering.startFormFacade({\n        \"proxyPrefix\": proxyPrefix,\n        \"device\": bizagi.util.detectRealDevice() });\n\n    }\n\n    bizagi.util.setContext({\n      idCase: params.idCase || null,\n      displayName: params.displayName || params.taskName,\n      caseNumber: params.caseNumber || null });\n\n\n\n    return $.when(self.dataService.getForm(self._renderParams)).then(function (data) {\n      return self.rendering.execute({\n        data: data,\n        navigation: self.navigation,\n        originalParams: params,\n        postRenderEdit: self.postRenderEdit.bind(self),\n        getTemplate: self.getTemplate,\n        canvas: self.view.content,\n        type: \"\" });\n\n    }).done(function () {\n      self.view.scroller.reset();\n      self.resizeParent($(\"#startForm .bz-form\"));\n    });\n  },\n\n  /**\r\n      * edit Items on render\r\n      */\n  postRenderEdit: function postRenderEdit() {\n  },\n\n  /**\r\n      *\r\n      * @private\r\n      */\n  changeButtons: function changeButtons() {\n    var self = this;\n    var form = self._form;\n    var originalProcessButton = form.processButton;\n\n    if (form) {\n      form.processButton = function (buttonProperties) {\n        if (buttonProperties.action === \"cancel\") {\n          form.endLoading();\n          self._back();\n        } else {\n          bizagi.loading.start();\n\n          if (typeof self._renderParams.h_surrogateKey !== \"undefined\") {\n            form.properties.surrogateKey = self._renderParams.h_surrogateKey;\n          }\n          form.properties.contextType = self._renderParams.h_contexttype;\n\n          if (form.validateForm()) {\n            $.forceCollectData = true;\n            $.when(originalProcessButton.apply(form, arguments)).then(function () {\n\n              if (typeof self._renderParams.h_surrogateKey !== \"undefined\" || typeof self._renderParams.h_mapping !== \"undefined\") {\n                self.refreshTemplate();\n              }\n\n            }).always(function () {\n              bizagi.loading.stop();\n              $.forceCollectData = false;\n            });\n          } else\n          {\n            bizagi.loading.stop();\n          }\n        }\n      };\n      if (self._type === \"Form\") {\n        form.bind(\"refresh\", function () {\n          bizagi.loading.stop();\n        });\n      }\n    }\n  },\n\n  /**\r\n      *\r\n      * @private\r\n      */\n  refreshTemplate: function refreshTemplate() {\n    var self = this;\n\n    if (typeof self._origin !== \"undefined\") {\n      var accumulatedContext = self.homePortalFramework.accumulatedContext;\n      var args = {\n        data: accumulatedContext[accumulatedContext.length - 1],\n        filters: [],\n        eventType: \"DATA-NAVIGATION\",\n        calculateFilters: true };\n\n\n      self._back();\n\n      self.publish(\"homeportalShow\", { \"what\": self._origin, \"title\": typeof args.data !== \"undefined\" ? args.data.displayName : \"\", \"params\": args, \"preventNavigate\": true });\n      //TODO dejar unicamente el homeportalShow con el refresh cuando se soporte la actualización de un solo resgitro\n      //self.publish(\"homeportalShow\", {\"what\": origin, params : {refresh:true, surrogateKey: self._renderParams.h_surrogateKey, idCase: bizagi.context.idCase}});\n    } else {\n      self._back();\n    }\n  } });","/*\r\n *   Name: BizAgi Workportal entity Templates Controller\r\n *   Author: RicardoPD on 2/16/2017.\r\n *   Comments:\r\n *      - this script will paint the list of elments in an entity list - with the render - Template component.\r\n */\n\nbizagi.mashup.controllers.controller.extend(\"bizagi.mashup.controllers.entityTemplates\", {}, {\n  /**\r\n                                                                                                * Constructor\r\n                                                                                                * @param mashupFacade\r\n                                                                                                * @param dataService\r\n                                                                                                * @param params\r\n                                                                                                */\n  init: function init(mashupFacade, dataService, params) {\n    var self = this;\n    self._super(mashupFacade, dataService, params);\n    self.acumContext = [];\n\n    if (bizagi.hasOwnProperty(\"kendo\")) {\n      this.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n    } else {\n      this.templateService = new bizagi.templates.services.service(bizagi.localization);\n    }\n  },\n  /**\r\n      * This controller haven''t a visual interface\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"mashup-entity-templates\");\n    return $.kendoTmpls(template, {});\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.view = new kendo.mobile.ui.View(self.content, {});\n    self.navbar = $(\".km-navbar\", self.view.header).data(\"kendoMobileNavBar\");\n\n    self.entityDataSource = new kendo.data.DataSource({\n      transport: {\n        read: function read(options) {\n          bizagi.loading.start();\n          // make JSONP request to http://demos.telerik.com/kendo-ui/service/products\n          var listParams = $.extend({\n            page: options.data.page || 1,\n            pageSize: options.data.pageSize || 40 },\n          options.data.filter.filters[0].value);\n\n          $.when(self.getEntities(listParams)).then(function (result) {\n            self.dataCalled(result);\n            options.success(result);\n          }).fail(function (error) {\n            options.error(error);\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        } },\n\n      schema: {\n        data: \"entities\",\n        total: \"totalRecords\" },\n\n      serverFiltering: true,\n      serverPaging: true,\n      page: 1,\n      pageSize: self.Class.pageSize });\n\n\n    var templateLoaderPush = self.getTemplate(\"mashup-entity-templates-pull-loader\");\n    var templateLoaderRefresh = self.getTemplate(\"mashup-entity-templates-refresh-loader\");\n\n    self.entityList = self.content.find(\".entity-list\").kendoMobileCustomListView({\n      autoBind: false,\n      loadMore: true,\n      messages: {\n        pullTemplate: templateLoaderPush,\n        refreshTemplate: templateLoaderRefresh,\n        releaseTemplate: templateLoaderRefresh,\n        loadMoreText: self.getResource(\"workportal-widget-inbox-load-more\") },\n\n      dataSource: self.entityDataSource,\n      template: self.getTemplate(\"mashup-entity-templates-item\"),\n      pullToRefresh: true,\n      itemBind: function itemBind(item) {\n        $(\".wp-tender-template-item\", item.element).append(item.data.tmpl);\n      } }).\n    getKendoMobileCustomListView();\n\n    self.configureHandlers();\n\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    $.when(self.engineReady).then(function () {\n      self.subscribe(\"dataNavigation\", function (e, params) {\n        self.entityDataSource.filter({ field: \"data\", value: params.data });\n        self.entityList.scroller().reset();\n\n        //Empty the array\n        self.acumContext.splice(0, self.acumContext.length);\n\n        self.acumContext.push(params.data);\n        self.navbar.title(params.data.displayName);\n        self.mashupFacade.navigate(\"#entityTemplates\", \"slide\");\n      });\n\n      self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n        self.entityDataSource.filter({ field: \"data\", value: params.data });\n        self.entityList.scroller().reset();\n\n        self.acumContext.push(params.data);\n        self.navbar.title(params.data.displayName);\n      });\n    });\n\n    $(\".bz-render-back\", self.view.header).bind(\"click\", function () {\n      self.acumContext.splice(self.acumContext.length - 1, 1);\n      if (self.acumContext.length > 0) {\n        var data = self.acumContext.slice(self.acumContext.length - 1, 1)[0];\n        self.entityDataSource.filter({ field: \"data\", value: data });\n        self.entityList.scroller().reset();\n\n        self.navbar.title(data.displayName);\n      } else\n      {\n        self.mashupFacade.navigate(\"#render\", \"slide:right\");\n      }\n    });\n  },\n\n  getEntities: function getEntities(params) {\n    var self = this;\n    return self.getData(params).then(function (entityData) {\n      return self.getEntityTemplates(entityData);\n    });\n  },\n\n  getData: function getData(params) {\n    var self = this;\n    return self.dataService.getCollectionEntityData(params).then(function (data) {\n      return data;\n    });\n  },\n\n  /**\r\n      * Invokes the template engine, to gets the custom columns\r\n      * @param entityData\r\n      * @return {Deferred}\r\n      */\n  getEntityTemplates: function getEntityTemplates(entityData) {\n    var self = this;\n    var templateType = self._referenceType === \"ENTITY\" ? \"Content\" : \"List\";\n    var processEntities = [];\n\n    //Se crea una promesa por cada template\n    var promises = $.map(entityData.entities, function (entity) {\n      processEntities.push({ surrogateKey: entity.surrogateKey, entityId: entity.guid });\n      return self.engine.render($.extend(entity, { isDefaultTemplate: entity.guidTemplate === null, templateType: templateType })).then(function (renderedTemplate) {\n        entity.tmpl = renderedTemplate;\n      });\n    });\n\n    return $.when.apply($, promises).then(function () {\n      return entityData;\n    });\n  },\n\n  dataCalled: function dataCalled(data) {\n    var self = this;\n    if (data.entities.length > 0) {\n      self.view.content.find(\".activity-empty-list\").hide();\n    } else {\n      self.view.content.find(\".activity-empty-list\").show();\n    }\n  } });","/*\r\n *   Name: BizAgi Mashup Main Controller\r\n *   Author: Ricardo Pérez\r\n *   Comments:\r\n *   -   This script will define a base class to handle workportal layouts for any device\r\n *   -   This layout must contain a menu and widget container placeholders\r\n */\n\n\n// Defines the main controller\nbizagi.mashup.controllers.render.extend(\"bizagi.mashup.controllers.render\", {}, {\n  init: function init(mashupFacade, dataService, params) {\n    var self = this;\n    //Load templates\n    self._super(mashupFacade, dataService, params);\n\n    self.loadTemplates({\n      \"mashup-render-view\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.render\").concat(\"#mashup-render-view\"),\n      \"mashup-render-layout\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.render\").concat(\"#mashup-render-layout\"),\n      \"mashup-render-edition-view\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.render\").concat(\"#mashup-render-edition-view\"),\n      \"mashup-info-message\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.render\").concat(\"#mashup-info-message\"),\n      \"mashup-routing\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.render\").concat(\"#mashup-routing\"),\n      \"mashup-async\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.render\").concat(\"#mashup-async\"),\n      useNewEngine: false });\n\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n  } });","/*\r\n *   Name: BizAgi mashup Main Controller\r\n *   Author: Ricardo Pérez\r\n *   Comments:\r\n *   -   This script will define a base class to handle mashup layouts for any device\r\n *   -   This layout must contain a menu and widget container placeholders\r\n */\n\n\n// Defines the main controller\nbizagi.mashup.controllers.caseSummary.extend(\"bizagi.mashup.controllers.caseSummary\", {}, {\n\n  init: function init(mashupFacade, dataService, params) {\n    var self = this;\n    //Load templates\n    self._super(mashupFacade, dataService, params);\n\n    self.loadTemplates({\n      \"mashup-summary-view\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.caseSummary\").concat(\"#mashup-summary-view\"),\n      \"mashup-summary-main\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.caseSummary\").concat(\"#mashup-summary-main\"),\n      \"mashup-summary-subprocess\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.caseSummary\").concat(\"#mashup-summary-subprocess\"),\n      \"mashup-summary-comments\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.caseSummary\").concat(\"#mashup-summary-comments\"),\n      \"mashup-summary-assigness\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.caseSummary\").concat(\"#mashup-summary-assigness\"),\n      \"mashup-summary-activities\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.caseSummary\").concat(\"#mashup-summary-activities\"),\n      \"mashup-summary-events\": bizagi.getTemplate(\"bizagi.mashup.controller.tablet.caseSummary\").concat(\"#mashup-summary-events\"),\n      useNewEngine: false });\n\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n    self.configureHandlers();\n  },\n\n  /*\r\n      * Event Handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self._super();\n\n    self.subscribe(\"renderSummaryCase\", function (e, params) {\n      return self.renderSummary(params);\n    });\n  },\n\n  /**\r\n      * Renders the summary component of the controller\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  renderSummary: function renderSummary(params) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    self.params = params || {};\n    self.cache = {};\n\n    self.dataService.summaryCaseDetails({\n      idCase: params.idCase,\n      eventAsTasks: params.eventAsTasks || false,\n      onlyUserWorkItems: params.onlyUserWorkItems || false,\n      idWorkitem: params.idWorkitem,\n      isOfflineForm: params.isOfflineForm || false }).\n    done(function (data) {\n      var date = typeof data.estimatedSolutionDate !== \"undefined\" ? data.estimatedSolutionDate : data.solutionDate;\n      data.params = self.params;\n\n      data.group = bizagi.util.cases.getStatusTimeLabel(date);\n      self.data = data;\n\n      self.data.estimatedSolutionDate = bizagi.util.dateFormatter.formatDate(new Date(self.data.estimatedSolutionDate), self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n      self.data.solutionDate = bizagi.util.dateFormatter.formatDate(new Date(self.data.solutionDate), self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n      self.data.creationDate = bizagi.util.dateFormatter.formatDate(new Date(self.data.creationDate), self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n      var mainTemplate = $.kendoTmpls(self.getTemplate(\"mashup-summary-main\"), self.data);\n\n      $(\".km-scroll-container\", self.content).empty().html(mainTemplate);\n      if ($(\".km-content\", self.content).data(\"kendoMobileScroller\")) {\n        $(\".km-content\", self.content).data(\"kendoMobileScroller\").reset();\n      }\n\n      /* istanbul ignore next */\n      $(\".ui-bizagi-container-tab\", self.content).bztabs({\n        activate: function activate(e) {\n          bizagi.loading.start();\n\n          data.currentTab = $(e.currentTarget).data(\"reference-tab\");\n\n          self.renderCurrentTab(data);\n        },\n        tabNumber: 2 });\n\n\n      if (data.currentState && data.currentState.length > 0 && typeof data.currentState[0].allowReleaseActivity !== \"undefined\" && data.currentState[0].allowReleaseActivity) {\n        /* istanbul ignore next */\n        $(\".bz-wp-summary-release\", self.content).bind(\"click\", function () {\n          self.release(params);\n        });\n      }\n\n      self.initialized = true;\n      defer.resolve();\n    });\n    return defer.promise();\n  } });","/*\r\n *   Name: BizAgi Mashup Main Controller\r\n *   Author: Ricardo Pérez\r\n *   Comments:\r\n *   -   This script will define a base class to handle workportal layouts for any device\r\n *   -   This layout must contain a menu and widget container placeholders\r\n */\n\n\n// Defines the main controller\nbizagi.mashup.controllers.startForm.extend(\"bizagi.mashup.controllers.startForm\", {}, {\n  init: function init(mashupFacade, dataService, params) {\n    var self = this;\n    //Load templates\n    self._super(mashupFacade, dataService, params);\n    if (bizagi.hasOwnProperty(\"kendo\")) {\n      this.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n    } else {\n      this.templateService = new bizagi.templates.services.service(bizagi.localization);\n    }\n\n    self.loadTemplates({\n      \"mashup-start-form\": bizagi.getTemplate(\"bizagi.mashup.common.startForm\").concat(\"#mashup-start-form\"),\n      \"mashup-render-edition-view\": bizagi.getTemplate(\"bizagi.mashup.common.startForm\").concat(\"#mashup-render-edition-view\"),\n      useNewEngine: false });\n\n  } });","/*\r\n *   Name: BizAgi mashup entityTemplates Controller\r\n *   Author: Ricardo Pérez\r\n *   Comments:\r\n *   -   This script will define a base class to handle mashup layouts for any device\r\n *   -   This layout must contain a menu and widget container placeholders\r\n */\n\nbizagi.mashup.controllers.entityTemplates.extend(\"bizagi.mashup.controllers.entityTemplates\", {\n  pageSize: 30 },\n{\n\n  init: function init(mashupFacade, dataService, params) {\n    var self = this;\n    //Load templates\n    self._super(mashupFacade, dataService, params);\n\n    self.loadTemplates({\n      \"mashup-entity-templates\": bizagi.getTemplate(\"bizagi.mashup.common.entityTemplates\").concat(\"#mashup-entity-templates\"),\n      \"mashup-entity-templates-item\": bizagi.getTemplate(\"bizagi.mashup.common.entityTemplates\").concat(\"#mashup-entity-templates-item\"),\n      \"mashup-entity-templates-item-actions\": bizagi.getTemplate(\"bizagi.mashup.common.entityTemplates\").concat(\"#mashup-entity-templates-item-actions\"),\n      \"mashup-entity-templates-pull-loader\": bizagi.getTemplate(\"bizagi.mashup.common.entityTemplates\").concat(\"#mashup-entity-templates-pull-loader\"),\n      \"mashup-entity-templates-refresh-loader\": bizagi.getTemplate(\"bizagi.mashup.common.entityTemplates\").concat(\"#mashup-entity-templates-refresh-loader\"),\n      useNewEngine: false });\n\n\n    var proxyPrefix = params.proxyPrefix || dataService.serviceLocator.proxyPrefix;\n    var templateDataService = new bizagi.render.services.service({ proxyPrefix: proxyPrefix });\n    var renderFactory = new bizagi.rendering.tablet.factory(templateDataService);\n\n    //Sets a promise in order to know when the template engine is loaded\n    self.engineReady = $.when(renderFactory.initAsyncStuff()).then(function () {\n      self.engine = new bizagi.templateEngine({ renderFactory: renderFactory, cache: true, forcePersonalizedColumns: false });\n    });\n  } });"]}