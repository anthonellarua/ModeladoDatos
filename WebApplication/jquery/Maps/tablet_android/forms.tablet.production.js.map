{"version":3,"sources":["jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.searchForm.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.combo.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.grid.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.grid.offline.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.search.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.list.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.combo.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.view.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.form.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.grid.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.adhocForm.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.upload.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.startForm.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.ecm.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.container.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.render.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.form.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.panel.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.contentPanel.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.nestedForm.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.tab.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.tabItem.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.horizontal.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.layout.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.accordion.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.accordionItem.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.group.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.section.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.searchForm.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.text.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.readonly.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.extendedText.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.label.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.number.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.money.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.numberScientificNotation.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.date.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.yesno.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.check.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.collectionnavigator.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.upload.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.upload.offline.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.grid.grouped.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.letter.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.button.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.fileprint.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.link.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.formLink.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.hidden.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.radio.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.cascadingCombo.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.multiSelect.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.handSignature.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.association.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.ecm.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.searchList.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.userfield.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.image.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.document.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.geolocation.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.actionLauncher.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.entityTemplate.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.polymorphicLauncher.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.checkList.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.activityCheckList.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.range.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.rangeDate.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.rangeMoney.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.rangeNumber.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.column.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.document.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.date.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.text.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.number.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.numberScientificNotation.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.image.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.upload.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.link.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.uploadecm.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.button.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.radio.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.readonly.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.search.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.list.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.exclusiveCheck.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.hidden.js","jquery/rendering/js/tablet/bizagi.rendering.tablet.factory.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.queryForm.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.formTemplate.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.usersForm.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","$","Class","extend","init","dataService","renderFactory","slideFormParams","this","slideFormDeferred","Deferred","container","navigation","createRenderContainer","title","buttons","processFormButtons","form","self","caption","bizagi","localization","getResource","actions","submitData","refresh","ordinal","action","save","style","callback","validateForm","data","collectRenderValues","allowGetOriginalFormValues","formValues","children","idPageCache","getPageCache","onSave","when","done","result","type","addValidationMessage","messages","addErrorMessage","message","goBack","resolve","fail","dataFail","responseText","toString","JSON","parse","e","match","substr","length","clearValidationMessages","reject","showSaveButton","shift","render","params","renderSlideForm","promise","defer","loading","start","getFormData","then","recordXPath","properties","recordXpath","editable","orientation","getContainer","view_container","formParams","element","html","isRefresh","navigate","id","remove","append","buttonContainer","triggerHandler","bind","refreshParams","errorTemplate","getCommonTemplate","error_message","fasttmpl","appendTo","always","stop","destroy","_renderButtons","content","each","ui","value","click","slideContainer","configureViewHandlers","formClass","rendering","tablet","submitForm","endLoading","key","renders","getRenders","i","updateOriginalValue","containerParams","delegate","onCancel","xhr","errorType","slideForm","transformData","allowEdition","setNavigationButtons","row","columns","xpathContext","xpath","elements","pageCacheId","sessionId","transformActions","validations","transformValidations","item","mapRenderType","displayType","mapValue","recalculate","columnVisible","visible","isColumn","concat","label","additionallabel","undefined","push","replaceAll","toLowerCase","includes","grep","gridActions","util","isEmpty","index","bDependencyFound","dependencies","indexOf","newAction","encode","j","transformConditions","conditions","transformCommands","commands","elseCommands","gridValidations","validation","newValidation","condition","expressions","simple","complex","argumentType","argument","renderId","refreshIndex","command","splice","elementsWithDefaultValue","getRender","defaultValue","isArray","setDisplayValue","isAddForm","columnProperties","defaultvalue","isDisabledControl","isExclusiveCheck","isExclusive","searchForms","searchParams","searchFormParams","searchFormDeferred","renderSearchForm","getSearchContainerData","getSearchButtons","Object","keys","map","firstChild","currentSearchForm","searchResultContainer","show","_","scrollTop","parent","focus","selectedTabs","getSelectedTabs","contextType","ev","containerSearchCriteria","find","hide","error_obj","hasSessionFormException","goToStartPage","renderAddForm","addContainer","getFormParams","guidEntity","entity","idStartScope","idRender","requestedForm","addFormParams","getAddFormButtons","processButtons","getButtons","innerHTML","saveDataAddForm","indicator","currentAddForm","handleSearchFormZindex","error","getErrorFormatted","forceCollectData","contexttype","formData","collectRenderValuesForSubmit","isMapEmpty","showMessageBox","response","dataHasXpath","found","mapping","setValue","setDisplayValueToControl","renderControlSearchForm","addForm","getDisplayValue","searchFormOptions","performSearch","allowNew","idCase","displayName","deferred","searchFormToLoad","tabContainer","otherElements","searchForm","isDefault","tab","getSearchFormData","searchFormData","Math","guid","idSearchForm","url","pipe","option","modalViewDisplayed","n","css","code","setTimeout","dfd","slideOptions","onClose","text","renderUploadFile","template","virtualForm","originalProperties","uniqueId","showConfirmationBox","window","location","href","options","getStartForm","saveButtonLabel","getMetadataForm","$renderEdition","onSaveDataMetadataForm","fileData","metadata","renderType","getRenderType","metadataType","newRender","assign","metadataId","description","required","parseBoolean","readOnly","toUpperCase","dataType","allowDecimals","thousands","maxLength","autoExtend","update","metadataValues","idMetadata","idFileUpload","fileName","xPath","idAttrib","metaValues","updateECMMetadata","fileProperties","startLoading","base","initializeData","_super","formContainer","getFormContainer","getParams","getLabel","observableElement","getFormattingLabel","getControl","control","getControlFiller","controlFiller","getContainerMessage","containerMessage","getColumnContainerMessage","getDisplayOptionClass","changeDisplayOption","getAlignClass","alignType","changeLabelAlign","changeValueAlign","customizeRenderWidth","labelWidth","valueWidth","percent2Number","width","setValidationMessage","normalizeType","isGridControl","$message","grid","column","test","replace","attr","addClass","removeClass","display","displayValue","getElementsToStylize","context","changeRequired","triggerRenderValidate","changeRequiredLabel","clearDisplayValue","input","filter","ele","val","getValue","warnings","errors","syncError","isOfflineErrorMode","syncMessage","makeArray","forEach","currentMessage","console","showToastOnSuccessSync","removeSyncErrorOnSubmit","configureHandlers","configureComplexGateway","$canvas","getValidationsContainer","validationController","controllers","actionController","readyDeferred","modalViewDidAppear","modalViewDidDisappear","configureNetworkHandlers","postRenderContainer","isiOSTabletDevice","isObjectEmpty","warningContainer","prependTo","detach","ekey","document","unbind","deferredSave","allowOnlineActions","autoSaveEvents","newData","isEmptyObject","selectedSections","selectedSection","setParam","section","getRenderById","expand","saveBox","isStartForm","formtype","confirmation","showSaveBox","saveForm","isOfflineForm","offlineType","online","syncDeferred","syncParams","trigger","log","arguments","internalSubmitForm","buttonProperties","submitDataAction","executeButtonAction","performAction","checkpointAction","commitAction","executeRule","createnewcase","animate","prepare","tag","prepareCheckpointAction","executeButton","prepareCommitAction","next","back","nextWithoutValidations","transitions","activeTransitions","countProps","forcePlanCompletion","surrogatekey","surrogateKey","chrono","initAndStart","flowControlDeferred","deferreds","apply","multiaction","execute","responses","bHasValidations","join","sendRollbackAction","postProcessButton","refreshForm","routing","buttonPropertiesAction","IdCase","caseNumber","CaseNumber","nonSupportedMethods","res","res2","failHandler","stopLoading","validateFeatureSupport","getPane","pane","handler","saveButton","nextButton","getNavigation","getViewContainer","showLoading","getFocus","idWorkitem","idTask","getSelectedSection","getEndPointAction","isOfflineRefreshWithEdition","isEdited","postRenderEdit","formsRenderVersion","originalParams","checkWidgetsData","popupResponse","workportal","popup","instance","getResponseValues","getResponseValuesParams","dontClose","close","repaintComplexGateway","idCaseObject","isComplex","getWorkitems","workItems","taskType","currentPopup","widgetName","widgets","widget","BIZAGI_WORKPORTAL_WIDGET_COMPLEXGATEWAY","sourceElement","insertAfter","height","offset","activeScroll","closed","addWarning","addError","processButton","isFloatingButtonsEnabled","isFormButtonsEnabled","dispose","refreshAfterSessionIdle","showMessageSessionIdle","routingToProcess","notifier","add","sticky","time","processParams","idProcess","webpart","publish","showProcess","hasStartForm","fromNewCase","renderContainer","getTemplate","helptext","helpText","mode","getMode","queryForm","getFormType","summaryForm","globalForm","displayAsReadOnly","processPath","breadCrumb","replaceChildrenHtml","renderChildrenHtml","triggerGlobalHandler","eventType","complexGatewayContainer","hasClass","on","$selected","transitionId","is","mainForm","$currentView","view","footer","panel","contentPanel","material_bizagi_tabs","direction","active_index_tab","activeTab","info","stopPropagation","setActiveTab","rippleEffect","tabItem","setAsActiveContainer","ready","tabs","activate","changeVisibility","counter","afterToRefresh","horizontal","layout","accordion","accordionItem","group","toggleClass","collapse","isOpen","toogleContainer","expandedClassIcon","expandedIcon","isDesign","messageValidation","displayAs","dir","getSectionOrientationRTL","mobileModal","displayNameParent","getParentDisplayName","anchor","onBeforeShow","m","addToHistoryNavigation","p","getSectionParent","isFirstLevel","onShow","removeFromHistoryNavigation","selected","pop","renderResult","skipInitialLoad","rowsPerPage","sortBy","sortOrder","overrideGetRemoteData","getRemoteData","parseAdditionalProperties","showTime","inlineAdd","allowDelete","allowAdd","allowEdit","resultsGrid","searchCriteria","results","childrenElements","childElement","Number","child","childrenHash","getElementType","ELEMENT_TYPE_RENDER","postRenderElement","ELEMENT_TYPE_CONTAINER","configureDesignView","configureLayoutView","criteriaContainer","resultsContainer","hasOwnProperty","refreshResults","onSearchFinished","deviceMaxRecordsExceeded","records","postRender","renderReadOnly","sanitizeHTML","decodedValue","decodeURI","validateValue","attachRetypeDouble","blur","retypeDouble","currentValue","tooltip","createTooltip","$context","currentTitle","cloneRender","readonly","extendedText","minLines","maxLines","maxCharactersToShow","textarea","resize","showChar","startString","endString","encodedText","encodeHtmlText","actualMaxLength","which","prop","updateTextareaSize","configureHandlersReadOnly","$control","delegateTarget","currentRows","scrollHeight","offsetHeight","previousValue","newValue","number","numericInput","executeFormatCurrencyPlugin","money","numberScientificNotation","inputDisplay","first","last","numericSN","decimalSymbol","attachFormatSientificNotation","scientificNotationFormat","scientificNotationNumber","scientificNotationNumberDisplay","date","MAX_YEARS_DISPLAY","dateFormat","ud","dateFormatter","format","substring","search","formatDate","getDateFromFormat","i18n","fullFormat","postRenderReadOnly","getDateControl","dateControl","inputDate","configureMobiscollCalendar","calendarInstance","mobiscroll","preventDefault","isCordovaSupported","isAndroidDevice","cordova","plugins","Keyboard","disableScroll","controlElements","getOrientation","calendar","touchUi","controls","min","getNormalizeDate","Date","minValue","max","maxValue","timeFormat","timePickerFormat","getTimeFormat","datePickerFormat","dateWheels","select","selectType","rtl","lang","languages","BIZAGI_LANGUAGE","language","setValueFromCalendarButtons","v","getCalendarInstance","setVal","inst","clear","onSet","onChangeHandler","onDayChange","onClear","event","getDateFromInvariant","isiOSDevice","isNow","currentDate","getVal","currentDateString","formatInvariant","getFullFormatedDate","currentTime","fullDate","formatISO","dateFromFormat","preprocessDateValue","isValid","invalidElements","bValid","checkMinAndMaxValue","hasValue","showMandatoryMessage","isMinValue","vValue","resultValue","getTime","formatedDate","setHour","timeS","isValidMinMaxValue","validateMinAndMaxValue","formattedDate","isNumeric","ci","callBack","yesno","radio","parsedValue","change","cleanData","check","removeAttr","evt","isCheck","combo","renderControl","itemSelected","mobileView","customHeader","hideSearch","enableTyping","contentTemplate","open","configureActions","modalView","isDependant","getParentCombo","parentValue","BA_ACTION_PARAMETER_PREFIX","renderCombo","list","configureModalViewHandlers","processComboData","comboValue","findDataValueById","formatItem","selectedValue","valueObjet","header","$elementsList","$clearButton","$searchInput","filterList","$li","stringContainer","stringToSearch","renderComboTemplate","items","selectedId","hasItems","validateItem","getSelectedValue","collectionnavigator","services","service","BA_CONTEXT_PARAMETER_PREFIX","BA_PAGE_CACHE","upload","QUALITY_PICTURE","LIMIT","EXTENSIONSIMG","EXTENSIONSFILE","EXTENSIONSVIDEO","EXTENSIONSAUDIO","isNative","renderItem","noFiles","filesCount","file","files","renderUploadItem","replaceFilesHtml","$contentFile","$inputFile","$nativeFile","checkFileExtensions","attachEvents","media","downloadFile","executeFormFailHandler","counterChoseFiles","off","chooseFile","removeFile","getUploadChoices","actionSheet","actionClicked","handlerUploadFile","appear","cancelClicked","getImageResolutionSizes","withoutCancel","handlerResolutionUpload","addFile","navigator","camera","getPicture","dataImage","extensions","checkMaxSize","getFileDataInfo","checkFileTypes","getAndroidVersion","isAndroid","modalResolutionUpload","buttonIndex","getImageResolutionItems","onFail","quality","sourceType","Camera","PictureSourceType","PHOTOLIBRARY","correctOrientation","saveImage","CAMERA","mediaType","MediaType","PICTURE","destinationType","DestinationType","FILE_URI","targetWidth","targetHeight","device","capture","captureVideo","dataVideo","checkMaxSizeVideo","saveVideo","limit","actionSelected","ResolutionType","ORIGINAL","resolution","getImageResolution","transformImageSize","editedImageURL","localUrl","base64Image","dataItem","dataFile","getImagePath","name","mimeType","uploadFile","fullPath","addParams","buildAddParams","queueID","encodeXpath","getUploadXpath","FileUploadOptions","fileKey","uploadKey","addUrl","decodeURIComponent","onUploadFileCompleted","messageError","processFailMessage","isValidResource","$wrapper","newItem","slice","checkMaxFiles","isMaxFilesReached","maxFiles","maxfiles","actualFiles","validExtensions","validOptions","video","image","split","fileAPISupported","buildAddFileParams","prefix","FormData","BIZAGI_SESSION_NAME","processUploadFile","promises","itemsUpload","errorResponse","checkMaxSizeFile","deleteUploadItem","triggerRenderChange","getTemplateItemName","maxFileSizeOfProperty","maxSize","maxFileSizeOfUser","BIZAGI_SETTINGS","UploadMaxFileSize","updateFilesCount","originalValue","clone","status","openOfflineFile","handlerWebUploadFile","removeOfflineFile","attachNativeEvents","fileId","randomNumber","getFileService","resolveBlobFromPath","blob","saveOfflineFile","onUploadOfflineFileCompleted","choosePhoto","takePhoto","addInteractions","collectData","renderValues","identicalObjects","saveResponse","fileUploaded","itemTemplate","filename","canBeSent","failReadFile","target","fileIndex","fileValue","triggerEvents","method","dataIndex","getFileParams","getOfflineFile","binaryFile","handleBinaryFile","blobFile","parameters","operationType","GRID_PAGE_SIZE","MIN_SUPPORTED_WIDTHS","LIST","minimum","appliesTo","get","controlType","defaultWidth","singleInstance","cellMetadata","labelAlign","groupBy","groupSummary","updateAffectedCellManually","getRowIndexByKey","initialLoadDone","applyGridPlugin","rows","page","fetchData","sortType","updateData","changed","pendingActions","buildColumnModel","columnsTotalizers","summarizeBy","bizagi_grid_tablet","subType","isSortable","waiting","table","emptyTable","specialColumn","rowButtons","cell","specialCell","pager","dynamicPager","totalizer","edit","withEditForm","details","allowDetail","allowMore","enableXlsExport","enablePdfExport","hasTotalizer","pageRequested","isExecutionMode","hasColumnChanges","changes","exclusiveChanges","isSummaryOrGlobalForm","sortRequested","drawCell","isNewRow","cellReady","onCellReady","rowSelected","addRow","addVirtualRow","editRow","editVirtualRow","deleteRow","moreRows","showFormDetails","showDetailForm","showMore","totalData","onTotalData","columnModel","hidden","align","columnIndex","columnLabel","gridColumn","totalize","operation","bizAgiProperties","dataReady","dataReadyDeferred","loadChanges","rowIndex","rowChanges","getExclusiveChangeByRow","columnData","getColumn","mapChangeValue","comboData","el","setCellOverrides","triggerGridPluginHandler","applyColumnsWidth","sort","isRTL","changeOrderData","inlineEdit","newKeys","alreadySaved","saveDeferred","saveInlineAddedRows","cellOverride","getCellOverride","renderColumn","newRecords","setSurrogateKey","columntitlealign","valueAlign","columnAlign","drawEditableCell","drawReadonlyCell","columnWidth","columnwidth","getColumnType","isHorizontalRadio","isCheckbox","applyElementWidth","originalEditable","submitOnChange","getDecorated","submitOnChangexpathContext","submitAddRequest","newid","slideView","slide","addExclusiveChange","submitSaveRequest","addPage","submitRollbackRequest","executeFailHandlerOnForm","currentRow","adhocForm","saveAddedRow","addGridRecordData","cleanActionChanges","submitForGridChange","executeSubmitEditRequest","editInline","collectGridChange","dataToSend","submitEditRequest","editPage","submitDeleteRequest","refreshAfterDeleteRows","rowDeleted","rowsDeleted","newTotalRows","newTotalPages","ceil","originalrowsPerPage","moreRowsCommon","changeCellBackgroundColor","getControlCell","changeBackgroundColor","changeCellColor","changeColor","changeCellVisibility","findIndex","isCurrentGridCell","cellOverrides","changeCellValue","_value","getCellValueFormatted","compositeValue","getCompositeValue","changeCellRequired","changeCellEditability","changeEditabilityCellControl","getIndexForCurrentCell","changeEditability","setError","isVisible","parentPromise","inlineAddPromise","inlineAddDeferred","querySelectorAll","columnHeader","querySelector","dataset","isHeader","minValidWidth","parseInt","minWidth","maxWidth","bUseTimeout","cleanCellData","emptyValue","rowLength","showTotal","columnsModel","operationState","sum","return_value","count","avg","toFixed","formatTotalizedResult","total","showTotals","formatMonetaryCell","transition","cssClass","showBorder","color","formatted","setHours","onCellChange","args","RegExp","setMilliseconds","warn","overrideProperties","Array","call","hasExclusiveCheck","simpleXpath","changeCellMaxValue","changeMaxValue","changeCellMinValue","changeMinValue","originalRows","isTaskForm","editedImages","offlineFiles","initProperties","isValidGrid","saveAddedRows","beforeInlineAdd","afterInlineAdd","businessKey","cancelEdition","removeNewRecords","processChanges","rowsList","sortArray","columnXpath","canColumnBeSent","columnNumber","unshift","creationTimestamp","a","b","collectOfflineTaskData","temporalNew","currentChanges","newImages","newFiles","buildCellXpathFilter","columnValue","isChanged","copyChanges","addRowData","idRow","isNew","images","stringify","processOldRows","collectOfflineStartData","internalRedersValues","DataType","processRow","merge","newRows","tempRows","col","leng","temp","database","convertUploadOnlineValueInOfflineValue","len","now","originalFormat","textFormat","renderSummary","gridXpath","fullXpath","offlineId","buildOfflineImageId","fileService","getOfflineImageName","bRefresh","updateRowsFromChanges","updateNewRowsAsSaved","setRowAsSaved","mergeArray","rowToModify","getRowByKey","mergeRow","r","rowA","rowB","totalPages","delInfo","deleteUrl","errorsMessage","showValidationMessage","getIndexes","getDataNewRows","ADVANCED_SEARCH_ID","ADVANCED_ADDITION_ID","CLEAR_SEARCH_ID","NO_RESULTS_SEARCH_ID","DEFAULT_SEARCH_ID","SEARCH_MIN_LENGTH","SEARCH_DELAY","SEARCH_MAX_RECORDS","deferredReference","searchInput","advancedSearch","_simplySearchView","_advanceSearchView","readyActionExecution","modalViewList","suggestFilter","debounce","autoCompleteSearchResults","trim","selectItem","formSearchParams","allowFullSearch","maxRecords","refreshControl","getContentTemplate","afterOpenAnimation","processRequest","term","renderSearchItem","searchItem","tmpl","req","suggestions","allowSuggest","searchLength","getSuggestData","getOfflineData","getData","state","hideStatus","parseValue","performTermMatches","inputText","allowClear","dataList","startsWith","letter","button","needsUserConfirmation","userConfirmationMessage","runButtonAction","pressed","changeFontBold","$label","bold","fileprint","link","preventDefaultForAnchorTag","isValidValue","getFullyDecodedURI","linkEncode","encodeURI","getAttribute","linkSolver","linktarget","linkTarget","processLayout","isLabelFormat","background","formLink","openLink","paintFormLink","rollbackForm","openLinkRule","property","def","getPropertyValue","dataRuleResp","showErrorMessage","actionSave","getFormLinkXpath","propertyName","getPropertyData","dataUrl","extra","jqXHR","textStatus","errorThrown","ex","noAction","saveLinkForm","saveUrl","executeSubmitOnChange","hasexitrule","closeExitRule","submitCommitRequest","hasentryrule","getFormLinkXpathContext","parentXpathContext","getXpathContext","submitCheckpointRequest","siblings","cascadingCombo","parentCombo","initializingCascadingCombo","isInitialValue","isRendered","empty","deferredVisible","configureCombo","changeCombo","valueItem","getTemplateName","multiSelect","MORE_OPTION_WIDTH","getDataValue","openModalView","dataMapped","template_content","values","isChecked","template_footer","footerTemplate","$listContainer","$suggestInput","newList","checked","findItemById","normalizeData","handSignature","$actions","$container","getSignatureContainer","autoSave","debounce2","saveSignature","DELAY_TO_SAVE","BzjSignature","saveTimestamp","toDataURL","fire","setData","setState","STATE_TYPE","cancel","onSignatureClear","onSignatureEdit","onSignatureSave","EMPTY_VALUE","deleteSignature","draw","renderSignature","sizeRatio","cssclass","pluginInitialized","setSignature","renderSignatureValue","round","sleepUntil","isLoading","buildItemUrl","isDisposed","BASE_IMAGE","EMPTY_IMAGE","postSignature","signature","postSignatureOffline","postSignatureOnline","saveImageOffline","deleteImage","buildItemUrlOffline","association","getFlipAssociation","flip","makeJsonBase","flipped","getColumnData","getRightAssociation","formatJson","dataAssociation","rightData","leftData","isExecution","addEventControl","showDefaultGroupList","$groups","slideDown","$input","parentId","addElement","removeElement","flipstate","$element","$groupList","parents","closeAccordionSection","active","slideUp","ecm","ERROR_ECM_NO_AVAILABLE","ACTION_DETAILS","ACTION_EDIT","originalData","getFileProperties","renderFileLayout","metadataECMMultiaction","getECMMetadata","metaData","showMetadata","Filename","attackMenuEvents","addMenuEvents","$fileItem","viewMore","fn","processActionByType","allowUpdateMetadata","allowCheckOut","lockECMFile","allowCancelCheckOut","unlockECMFile","deleteECMFile","overflowMenu","lockUploadItem","replaceWith","unlockUploadItem","performValidationMessage","isFailResponse","lastIndexOf","searchList","SEARCH_ELEMENTS","searchListInput","_searchListViewModal","getHeaderTemplate","getFooterTemplate","cssClassHeader","adjustResize","finalValue","deleteItem","templateItem","getTagTemplate","modalViewTagList","modalFooter","modalHeader","getListItems","initialScreenSize","innerHeight","emptyItems","userfieldWrapper","getUserfieldControl","sControl","userfieldName","exists","eval","createUserfieldInstance","userfield","userfieldGuid","getUserfieldDefinition","loadUserfield","dynamicFunction","initialParams","getUserFieldInstance","isUserField","userfieldInstance","replicateUserfieldMethods","styleContent","styleGuid","str","loadStyle","defaultUserField","designUserField","startUserfieldLoading","endUserfieldLoading","userfieldDefinition","basicUserField","isSupported","getEditableControl","getReadonlyControl","controlName","isDesignMode","showAsyncImage","configureNativeHandlers","configureHybridHandlers","imageAdd","resolutionButtonHandler","imagePreview","useCamera","imageAddNative","imageAddHybrid","performUploadFile","coordinates","getBoundingClientRect","popoverOptions","CameraPopoverOptions","left","top","imageAddNativeFromCamera","version","imageDelete","uploadFileCompleted","msg","uploadFileNativeOnline","uploadFileHybridOnline","changeOfflineImageName","htmlImage","configureMenu","baseParams","zoom","useNativeScrolling","imageData","img","inputEdition","getFullImage","compatibilityVersion","buildFullItemUrl","$preview","originalImageWidth","$viewMore","buildItemUrlOnline","isOfflineFormsV2Supported","ACTION_SHOW","ACTION_DOWNLOAD","ACTION_DELETE","documents","downloadalldocuments","allowgenerate","allowGenerate","renderDocumentsHtml","renderActionsHtml","replaceActionsHtml","$inputDocument","$listDocuments","$listActions","getTemplateReadonly","buttonExecuted","validate","validateContainer","documentTemplateGenerate","documentFile","processAction","renderAllDocumentDownload","getTemplateDownload","buildAllDocumentsUrl","joined","redrawDocuments","downloadAllDocuments","$documentContainer","$actionContainer","showDocumentPreview","resolveDocumentTemplateGenerate","resolveDeleteDocumentTemplate","deleteDocumentTemplate","geolocation","ALLOW_UPDATE","coordinate","updateDisplayValue","performPrecision","onSuccess","position","coords","latitude","longitude","getCurrentPosition","actionLauncher","getActions","processPropertyValueArgs","getPropertiesActionLaucher","deferredActions","isHorizontal","templatetype","processPropertyValueDataTmplArgs","templateData","engine","isDefaultTemplate","wrap","configureActionsHandlers","configureTemplateHandlers","guidProcess","guidAction","actionType","readOnlyForm","xpathActions","expr","FilterAction","array","keyup","not","subscribe","filters","multipleSelection","countSameActions","actionManager","act","executeAction","showConfirmationDialog","notifyExecution","class_name","processActionForm","additionalXpaths","additionalXpath","detailLabel","cancelButtonLabel","isActionStartForm","savedData","editMode","IdScope","renderParams","idForm","caseId","typeForm","surrogatedKey","rewriteContextType","processActionFormCollection","xpathContextWithKey","printf","idEntity","xpathContextWithoutKey","IdEntity","addActionToQueue","processStartForm","startForm","guidprocess","mappingstakeholders","executeActionImmediately","actionsToExecuteContainer","configureQueueVisibility","listOfActions","getMappingAction","removeActionSelector","openActionSelector","removeActionToQueue","extraParams","dataAction","actionsToExecuteTitle","allowactions","calculateFilters","polymorphicLauncher","getPolymorphicActions","serializePolymorphicActions","totalActions","lessActions","templateArguments","allowSearch","treeActionsList","getTreeItems","bindHandlers","level","templateTreeItem","$targetData","guidObject","guidConstructor","onActionClicked","pageCache","maximized","$target","checkList","unique","random","itemId","onCheckListGroupChange","goal","activityDescription","newItemName","addEditButton","cancelEditButton","additionalElements","notifyLoadItems","resolvedItems","resolved","setItemLocalStorage","hasChanges","idActivity","itemsResolved","progress","activityWork","prepareNewItem","that","contentHolder","closest","itemPosition","repaintControl","itemSelectedName","itemContent","setSelectionRange","addSelectedHandlers","keypress","addItem","guidItem","checkListHtml","refreshValue","completed","floor","controlValueIsChanged","range","rangeDate","rangeMoney","minControl","getRenderProperties","maxControl","setRanageControls","typeRangeControl","renderProperties","resources","rangeNumber","applyOverrides","decorated","originalGetControl","tableCell","applyColumnStyles","isValueValid","propertyOverrides","getXpath","getDocumentXpath","getContextXpath","preRenderControl","xpathcontext","generateDocumentTemplate","autoOpenDocuments","xpathPath","deleteUploadFile","postRenderSummary","applyUploadPlugin","getUploadFileUrl","calculateInitialLayoutProperties","nameFile","idSession","refreshCell","gridChanges","tmpCheck","enabledChecks","overrideDecoratedRenderProperties","tmpDecorated","handleOfflineChange","simpleXpathArray","newChange","factory","loadTemplates","loadTemplate","getFileTemplate","tmplIcons","src","onDemand","detectDevice","formTemplate","usersForm","nestedForm","mobileform","mobilegroup","columnParams","isExtended","exclusiveCheck","offline","uploadecm","old","enableQuerySuggestBehavior","entityTemplate","getSearchRender","getLayoutRender","getRangeRender","activityCheckList","mobiletext","layoutImage","layoutLink","layoutLabel","layoutText","layoutDateTime","layoutNumber","layoutMoney","layoutPlaceholder","layoutBoolean","layoutUpload"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Tablet Search Slide view Implementation\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will shows a sliding search form  order to edit\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.tablet.slide.searchForm\", {}, {\n\n  /**\r\n                                                                  * Constructor\r\n                                                                  */\n  init: function init(dataService, renderFactory, searchForms, searchParams, searchFormParams) {\n    var self = this;\n\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.searchForms = searchForms;\n    self.searchParams = searchParams;\n    self.searchFormParams = searchFormParams;\n\n    self.searchFormDeferred = new $.Deferred();\n\n    // Creates a container, be careful you must destroy it later\n    self.container = self.searchFormParams.navigation.createRenderContainer({ title: self.searchFormParams.title });\n  },\n\n  /**\r\n      * Render the form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params\r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    this.properties = params;\n\n    // Render the search form\n    this.renderSearchForm(params);\n\n    // Return promise\n    return this.searchFormDeferred.promise();\n  },\n\n  /**\r\n      * Render the search form\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  renderSearchForm: function renderSearchForm(params) {\n    var self = this;\n\n    bizagi.loading.start();\n\n    // Creates a dialog\n    $.when(self.getSearchContainerData(params)).then(function (data) {\n      if (data.form.properties) {\n        data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\n      }\n\n      // Render dialog form\n      var form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        navigation: self.searchFormParams.navigation,\n        view_container: self.container });\n\n\n      form.buttons = self.getSearchButtons();\n\n      // Save form reference\n      self.form = form;\n\n      (Object.keys(form.children) || []).\n      map(function (key) {\n        form.children[key].params = $.extend({}, form.children[key].params, self.searchFormParams);\n      });\n\n      // Return rendering promise\n      return form.render();\n    }).done(function (element) {\n      var firstChild = self.form.firstChild();\n\n      // Append form in the slide view\n      self.container.element.html(element);\n      self.searchFormParams.navigation.navigate(self.container.id);\n\n      // Show action buttons\n      //self.container.setNavigationButtons(self.form);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Set currents search form\n      self.currentSearchForm = firstChild;\n      self.currentSearchForm.triggerHandler(\"ondomincluded\");\n\n      self.currentSearchForm.bind(\"instancerefresh\", function () {\n        // Show search results container\n        self.searchResultContainer.show();\n      });\n\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        refreshParams.scrollTop = self.form.container.parent().scrollTop();\n        refreshParams = $.extend({\n          focus: focus,\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true,\n          contextType: self.properties.contextType || \"\",\n          navigation: self.searchFormParams.navigation,\n          view_container: self.container },\n        refreshParams);\n\n        return self.renderSearchForm(refreshParams);\n      });\n\n      // Add row selected handlers to resolve the deferred\n      self.currentSearchForm.bind(\"instanceSelected\", function (ev, ui) {\n        // Close slide\n        self.goBack();\n\n        self.searchFormDeferred.resolve({ id: ui.id, label: \"\" });\n      });\n\n      // if is any modal view displayed, hide it to allow this search form been displayed\n      // self.handleSearchFormZindex(\"show\");\n\n      // Hide content\n      self.containerSearchCriteria = self.currentSearchForm.container.find(\".bz-container__search-criteria\");\n      self.searchResultContainer = $(\".bz-container__search-results\", element);\n      self.searchResultContainer.hide();\n\n    }).fail(function (error_obj) {\n      if (self.hasSessionFormException(error_obj)) {\n        self.goToStartPage(error_obj);\n      } else {\n        var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n        var message = error_obj && error_obj.message ? error_obj.message : error_obj;\n\n        $($.fasttmpl(errorTemplate, { message: message })).\n        appendTo(self.container.element);\n\n        self.searchFormParams.navigation.navigate(self.container.id);\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  },\n\n  /**\r\n      * Get the addform and show it\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  renderAddForm: function renderAddForm(params) {\n    var self = this;\n    params = params || {};\n    var properties = self.properties;\n\n    if (typeof self.addContainer === \"undefined\") {\n      self.addContainer =\n      self.searchFormParams.navigation.createRenderContainer({\n        title: bizagi.localization.getResource(\"render-dialog-entity\") });\n\n\n      // Binds the view close event, and send the RollBack\n      self.addContainer.element.bind(\"close\", function () {\n        delete self.addContainer;\n      });\n    }\n\n    var isRefresh = params.isRefresh || false;\n\n    var getFormParams = {\n      idPageCache: params.idPageCache,\n      guidEntity: properties.entity,\n      contextType: \"entity\" };\n\n\n    if (isRefresh) {\n      getFormParams.isRefresh = true;\n      getFormParams.idStartScope = params.idStartScope;\n    } else {\n      getFormParams.idRender = properties.idRender;\n      getFormParams.requestedForm = \"addForm\";\n    }\n\n    bizagi.loading.start();\n\n    //Get the addform\n    $.when(self.dataService.getFormData(getFormParams)).then(function (data) {\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      if (data.form.properties) {\n        data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\n      }\n\n      data.form.contextType = \"entity\";\n\n      var form = self.renderFactory.getContainer($.extend({}, self.addFormParams, {\n        type: \"form\",\n        data: data.form,\n        focus: params.focus || false,\n        selectedTabs: params.selectedTabs,\n        isRefresh: isRefresh,\n        requestedForm: params.requestedForm,\n        navigation: self.searchFormParams.navigation,\n        view_container: self.addContainer }));\n\n\n\n      form.buttons = self.getAddFormButtons(form);\n\n      $.extend(form, {\n        processButtons: function processButtons() {\n          //not send information set in memory and save\n\n          $.each(form.buttons, function (index, element) {\n            switch (element[\"ordinal\"]) {\n              case 1:\n                // Next button will behave as a cancel button\n                $(form.getButtons()[index]).click(function () {\n                  self.addContainer.destroy();\n                  delete self.addContainer;\n                });\n\n                form.getButtons()[index].innerHTML = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                form.buttons[index].caption = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                form.buttons[index].action = \"back\";\n\n                break;\n\n              default:\n                $(form.getButtons()[index]).click(function () {\n                  self.saveDataAddForm(form);\n\n                  self.addContainer.destroy();\n                  delete self.addContainer;\n                });\n                break;}\n\n          });\n        } });\n\n\n      (Object.keys(form.children) || []).\n      map(function (indicator) {\n        form.children[indicator].params = $.extend({}, form.children[indicator].params, self.addFormParams);\n      });\n\n      return $.when(form.render()).done(function (element) {\n        // Set currents search form\n        self.currentAddForm = form.firstChild();\n        self.addContainer.element.html(element);\n\n        if (!isRefresh) {\n          self.searchFormParams.navigation.navigate(self.addContainer.id, \"overlay:up\");\n        }\n\n        self.addContainer.setNavigationButtons(form);\n\n        form.triggerHandler(\"ondomincluded\");\n\n        // if is any modal view displayed, hide it to allow this search form been displayed\n        self.handleSearchFormZindex(\"show\");\n\n        form.bind(\"refresh\", function (_, refreshParams) {\n          refreshParams.scrollTop = self.form.container.parent().scrollTop();\n          refreshParams = $.extend({\n            focus: focus,\n            selectedTabs: self.form.getSelectedTabs(),\n            isRefresh: true,\n            contextType: self.properties.contextType || \"\",\n            navigation: self.searchFormParams.navigation,\n            view_container: self.addContainer },\n          refreshParams);\n\n          return self.renderAddForm(refreshParams);\n        });\n      });\n    }).fail(function (error) {\n      var error_obj = bizagi.util.getErrorFormatted(error);\n\n      if (self.hasSessionFormException(error_obj)) {\n        self.goToStartPage(error_obj);\n      } else {\n        self.addContainer.destroy();\n        delete self.addContainer;\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  },\n\n  /**\r\n      * Save data to add form\r\n      * @param {} form\r\n      * @returns {}\r\n      */\n  saveDataAddForm: function saveDataAddForm(form) {\n    var self = this;\n    var defer = $.Deferred();\n\n    if (form.validateForm()) {\n      var data = {};\n      $.forceCollectData = true;\n\n      form.collectRenderValues(data);\n      data.idPageCache = form.idPageCache;\n\n      var params = {\n        action: \"SAVE\",\n        data: data,\n        idPageCache: data.idPageCache,\n        guidEntity: form.properties.entity,\n        contexttype: \"entity\" };\n\n\n      // Check if the add form has data\n      var formData = {};\n\n      form.collectRenderValuesForSubmit(formData);\n\n      // Turn off flag\n      $.forceCollectData = false;\n\n      if (!bizagi.util.isMapEmpty(formData)) {\n\n        bizagi.loading.start();\n\n        $.when(self.dataService.submitData(params)).done(function (response) {\n          function dataHasXpath(xpath) {\n            var render = self.currentSearchForm.getRender(xpath);\n            if (_typeof(render) === \"object\" && render !== null)\n            return { \"found\": true, \"obj\": render };\n            return { \"found\": false, \"obj\": {} };\n          }\n\n          if (response && response.type === \"validationMessages\") {\n            form.addValidationMessage(response.messages);\n            defer.reject();\n          } else {\n\n            for (var i in formData) {\n              var mapping = dataHasXpath(i);\n              if (mapping.found) {\n                mapping.obj.setValue(formData[i]);\n                self.setDisplayValueToControl(mapping.obj, form, i, formData);\n              }\n            }\n\n            defer.resolve();\n          }\n        }).fail(function (error) {\n          var error_obj = bizagi.util.getErrorFormatted(error);\n\n          if (self.hasSessionFormException(error_obj)) {\n            self.goToStartPage(error_obj);\n          } else {\n            var message = error_obj.message || bizagi.localization.getResource(\"workportal-general-error\");\n\n            form.addValidationMessage(message);\n          }\n\n          defer.reject();\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      } else {\n        // Form has not data\n        bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-advanced-no-filters\"));\n        defer.reject();\n      }\n    } else {\n      defer.reject();\n    }\n\n    return defer.promise();\n  },\n\n  /***\r\n      * Set display value by control type, when add new record\r\n      * @param renderControlSearchForm\r\n      * @param addForm\r\n      * @param xpath\r\n      * @param formData\r\n      */\n  setDisplayValueToControl: function setDisplayValueToControl(renderControlSearchForm, addForm, xpath, formData) {\n    if (renderControlSearchForm.properties.type === \"searchSuggest\") {\n      renderControlSearchForm.setDisplayValue(addForm.getRender(xpath).getDisplayValue());\n    } else {\n      renderControlSearchForm.setDisplayValue(formData[xpath]);\n    }\n  },\n\n  /**\r\n      * Get navigation buttons\r\n      */\n  getSearchButtons: function getSearchButtons() {\n    var self = this;\n\n    // Set initial actions\n    var searchFormOptions = [{\n      ordinal: 1,\n      action: \"search\",\n      caption: bizagi.localization.getResource(\"render-form-dialog-box-search\"),\n      callback: function callback() {\n        self.currentSearchForm.performSearch(self.searchParams);\n      } },\n    {\n      ordinal: 2,\n      action: \"cancel\",\n      caption: \"cancel\",\n      callback: function callback() {\n        // Close slide\n        self.goBack();\n      } }];\n\n\n    if (self.searchFormParams.allowNew) {\n      searchFormOptions.push({\n        ordinal: 3,\n        action: \"add\",\n        caption: bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n        callback: function callback() {\n          var params = {\n            idCase: self.searchFormParams.idCase,\n            idRender: self.properties.idRender,\n            displayName: self.properties.displayName,\n            idPageCache: self.properties.idPageCache };\n\n\n          self.renderAddForm(params);\n        } });\n\n    }\n\n    return searchFormOptions;\n\n  },\n\n  /**\r\n      * Creates the search dialog sub-containers\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getSearchContainerData: function getSearchContainerData(params) {\n    var self = this;\n    var deferred = new $.Deferred();\n    var data = {\n      form: {\n        properties: {},\n        elements: [] } };\n\n\n\n    var container = data.form;\n    var searchFormToLoad = self.searchForms[0];\n\n    // When there are more than one search form, render a tab container\n    if (self.searchForms.length > 1) {\n\n      var tabContainer = {\n        properties: {\n          type: \"tab\" },\n\n        elements: [] };\n\n\n      var otherElements = [];\n\n      $.each(self.searchForms, function (i, searchForm) {\n        var isDefault = searchForm[\"default\"] || false;\n\n        // Create tab item\n        var tab = {\n          properties: {\n            id: i,\n            type: \"tabItem\",\n            displayName: searchForm.caption },\n\n          elements: [] };\n\n\n        // Append children\n        if (isDefault) {\n\n          tabContainer.elements.push({ container: tab });\n\n          // Set properties to load default container\n          container = tab;\n          searchFormToLoad = self.searchForms[0];\n\n        } else {\n          otherElements.push({ container: tab });\n        }\n      });\n\n      // Append no defaults elements\n      $.each(otherElements, function (i, element) {\n        tabContainer.elements.push(element);\n      });\n\n      data.form.elements.push({\n        container: tabContainer });\n\n    }\n\n    bizagi.loading.start();\n\n    // Loads default form\n    $.when(self.getSearchFormData(params, searchFormToLoad)).\n    done(function (searchFormData) {\n      container.elements.push(searchFormData);\n      container.properties.id = Math.guid();\n\n      // Resolve deferred\n      deferred.resolve(data);\n    }).fail(function (error) {\n      var message = bizagi.util.getErrorFormatted(error);\n      deferred.reject(message);\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Loads a search form\r\n      * @param {} params\r\n      * @param {} searchForm\r\n      * @returns {}\r\n      */\n  getSearchFormData: function getSearchFormData(params, searchForm) {\n    var self = this;\n\n    return self.dataService.getSearchFormData($.extend(params, {\n      idSearchForm: searchForm.id,\n      url: searchForm.url })).\n    pipe(function (data) {\n      // Append search render properties\n      data.form.properties.idRender = params.idRender;\n\n      return data;\n    });\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {}\r\n      */\n  goBack: function goBack() {\n    this.handleSearchFormZindex(\"hide\");\n    this.container.destroy();\n  },\n\n  /**\r\n      * Show modal view\r\n      * @param option\r\n      */\n  handleSearchFormZindex: function handleSearchFormZindex(option) {\n    // If there is an open modal, change z-index to make searchForm visible\n    var modalViewDisplayed = $.grep($(\".km-modalview-root\"), function (n) {\n      return $(n).css(\"display\") === \"block\";\n    });\n\n    if (modalViewDisplayed.length > 0) {\n      var index = option === \"show\" ? 0 : 10001;\n      $(modalViewDisplayed).css(\"z-index\", index);\n    }\n  },\n\n  /**\r\n      * Idle timer expired exception\r\n      * @param error\r\n      * @returns {boolean}\r\n      */\n  hasSessionFormException: function hasSessionFormException(error) {\n    return typeof error !== \"undefined\" && error.code === \"AUTH_ERROR\";\n  },\n\n  /**\r\n      * Navigate to main page\r\n      * @param error\r\n      */\n  goToStartPage: function goToStartPage(error) {\n    if (this.searchFormParams.navigation) {\n      this.searchFormParams.navigation.goToStartPage(error);\n    }\n  },\n\n  /**\r\n      * Get buttons for Add form\r\n      * @param form\r\n      * @returns {[*, *]}\r\n      */\n  getAddFormButtons: function getAddFormButtons(form) {\n    var self = this;\n\n    return [\n    $.extend(form.buttons[0] || {}, {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 0,\n      \"action\": \"save\",\n      \"save\": true,\n      \"style\": \"\" },\n    {\n      //This callback avoid to call the default processButton in the form\n      callback: function callback() {\n        // When the data is saved then\n        self.saveDataAddForm(form).done(function () {\n\n          self.addContainer.destroy();\n          delete self.addContainer;\n\n          // TIMER: Prevent the Form is locked if not destroy the addForm\n          setTimeout(function () {\n            // Force a search after a new item is created!\n            self.currentSearchForm.performSearch(self.searchParams);\n          }, 350);\n        });\n      } }),\n\n    $.extend(form.buttons[1] || {}, {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 1,\n      \"action\": \"back\",\n      \"save\": true,\n      \"style\": \"\" },\n    {\n      // This callback avoid to call the default processButton in the form\n      callback: function callback() {\n        self.addContainer.destroy();\n        delete self.addContainer;\n      } })];\n\n\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Tablet Render option select\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   Renders an option html input with attached handlers\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.combo\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.tablet.combo.extend(\"bizagi.rendering.tablet.combo\", {\n  /*\r\n                                                                         *   Template method to implement in each children to customize each control\r\n                                                                         */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"combo\");\n\n    return $.fasttmpl(template, {\n      editable: this.properties.editable,\n      value: this.getDisplayValue() });\n\n\n  },\n\n  postRender: function postRender() {\n    var $control = this.getControl();\n\n    this._super();\n\n    this.combo = $control.find(\"input\");\n    this.itemSelected = undefined;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n\n    return $.fasttmpl(template, { value: this.getDisplayValue() });\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var $control = this.getControl();\n    this.combo = $control.find(\"input\");\n  },\n\n  /**\r\n      * Add event handlers to the combo control\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.getMode() !== \"execution\") {\n      return;\n    }\n\n    $(\".bz-form-combo\", control).bind(\"click\", function () {\n\n      $(this).mobileView({\n        customHeader: $.fasttmpl(self.renderFactory.getTemplate(\"modal-header-search\"), {\n          hideSearch: self.properties.enableTyping === false }),\n\n        displayName: self.properties.displayName || \"\",\n        orientation: self.properties.orientation || \"\",\n        contentTemplate: \"\",\n        style: \"width: 80%; height: 70%\",\n\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        },\n\n        open: function open() {\n          self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n\n        configureActions: function configureActions(modalView) {\n          var params = {};\n\n          if (self.isDependant && self.properties && /cascadingcombo/i.test(self.properties.type) && self.getParentCombo) {\n            var parentValue = self.getParentCombo().getValue();\n            if (parentValue && parentValue.id) {\n              params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue.id;\n            }\n          }\n\n          $.when(self.renderCombo(params)).done(function (list) {\n            $(\".bz-modal-view__content\", modalView.content).html(list);\n            self.configureModalViewHandlers(modalView);\n          });\n        } });\n\n    });\n\n  },\n\n  processComboData: function processComboData(data) {\n    var self = this;\n    data.forEach(function (value) {\n      self.validateValue(value);\n    });\n  },\n\n  /**\r\n      * Setting the display value, always you call a setDisplayValue yor are performing a setValue under the hood.\r\n      * */\n  setDisplayValue: function setDisplayValue(value) {\n    var comboValue = \"\";\n\n    value = this.mapValue(value);\n\n    if (value && _typeof(value) === \"object\" && typeof value.label !== \"undefined\") {\n\n      if (!bizagi.util.isEmpty(value.label)) {\n        comboValue = value.label;\n      } else {\n        var selected = this.findDataValueById(value.id);\n        comboValue = selected ? selected.value : \"\";\n      }\n\n      if ($.isArray(comboValue)) {\n        comboValue = comboValue.join(\" - \");\n      }\n\n      value = { \"id\": value.id, \"value\": comboValue };\n    }\n\n    if (this.properties.editable) {\n      this.combo.val(this.formatItem(value.value));\n    } else {\n      var control = this.getControl();\n      $(\".bz-input\", control).html(this.formatItem(value.value));\n    }\n\n    //Set Value\n    this.selectedValue = value;\n    this.setValue(value);\n  },\n\n  /**\r\n      * Set the handlers for the modal elements\r\n      * @param modalView full modal object\r\n      */\n  configureModalViewHandlers: function configureModalViewHandlers(modalView) {\n    var self = this;\n\n    $(\".bz-list__item\", modalView.content).on(\"click\", function () {\n      var valueObjet = {\n        \"id\": $(this).data(\"value\"),\n        \"value\": $(this).text() };\n\n\n      if (valueObjet.id == \"\") {\n        valueObjet.value = \"\";\n      }\n\n      self.itemSelected = true; //must be before the setDisplayValue\n      self.setDisplayValue(valueObjet);\n      self.trigger(\"select\", [valueObjet, false]);\n      modalView.close();\n    });\n\n    $(\"[data-action=close]\", modalView.header).bind(\"click\", function () {\n      modalView.close();\n    });\n\n    if (this.properties.enableTyping) {\n\n      var $elementsList = $(\".bz-list li\", modalView.content);\n      var $clearButton = $(\".bz-modal-view__clear\", modalView.header);\n      var $searchInput = $(\".bz-modal-view__search\", modalView.header);\n\n      $clearButton.bind(\"click\", function () {\n        $searchInput.val(\"\").trigger(\"change\");\n      });\n      // Filtering list\n      $searchInput.on(\"change keyup\", function () {\n        if (this.value == \"\") {\n          $clearButton.removeClass(\"bz-modal-view__clear--visible\");\n        } else {\n          $clearButton.addClass(\"bz-modal-view__clear--visible\");\n        }\n        self.filterList(this.value, $elementsList);\n      }).on(\"focus\", function () {\n        modalView.header.addClass(\"bz-modal-view__header--active\");\n      }).on(\"blur\", function () {\n        modalView.header.removeClass(\"bz-modal-view__header--active\");\n      });\n\n    }\n  },\n\n  cleanData: function cleanData() {\n    var value = { id: \"\", value: \"\" };\n    //Set Value\n    this.value = this.properties.value = this.selectedValue = value;\n    var control = this.getControl();\n    $(\"input\", control).val(this.formatItem(value.value));\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * @returns {}\r\n      */\n  filterList: function filterList(search, $li) {\n\n    $li.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = search.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n  },\n\n  /**\r\n      * Print the list of elements to show in the modal\r\n      * @param {object} data list of elements to print\r\n      */\n  renderComboTemplate: function renderComboTemplate(data) {\n    var template = this.renderFactory.getTemplate(\"combo-list\");\n    var value = this.getValue();\n    value = value !== null && typeof value !== \"undefined\" ? value : { \"id\": \"\", \"value\": \"\" };\n\n    return $.fasttmpl(template, {\n      \"items\": data,\n      \"selectedId\": value.id,\n      \"hasItems\": data.length > 0 },\n    {\n      \"validateItem\": this.validateValue });\n\n  },\n\n  /**\r\n      * Returns the selected value in the template\r\n      * @returns {{id: *, value: *}}\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return this.selectedValue;\n  }\n\n  /* getElementsToStylize: function ($context) {\r\n        return this.properties.editable ? $(\"input\", $context) : $(\".readonly-control\", $context);\r\n    } */ });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Tablet Render Grid Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the grid render class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.grid\", bizagi.rendering.grid.prototype);\n// Extends itself\nbizagi.rendering.tablet.grid.extend(\"bizagi.rendering.tablet.grid\", {\n  GRID_PAGE_SIZE: 10 },\n{\n\n  MIN_SUPPORTED_WIDTHS: {\n    LIST: [\n    {\n      minimum: 28,\n      appliesTo: [\"label\", \"readonly\", \"checkboxBoolean\"] },\n\n    {\n      minimum: 42,\n      appliesTo: [\"text\", \"formlink\", \"money\", \"number\", \"button\", \"link\"] },\n\n    {\n      minimum: 66,\n      appliesTo: [\"boolean\", \"radio\"] },\n\n    {\n      minimum: 74,\n      appliesTo: [\"combo\", \"date\", \"list\", \"search\", \"suggest\", \"userfield\", \"image\", \"upload\", \"uploadecm\", \"document\"] },\n\n    {\n      minimum: 132,\n      appliesTo: [\"horizontalRadio\"] }],\n\n\n    get: function get(controlType) {\n      var defaultWidth = this.LIST.find(function (item, index) {\n        return item.appliesTo.includes(controlType);\n      });\n      return defaultWidth && defaultWidth.minimum || 42;\n    } },\n\n\n  /**\r\n          * Constructor\r\n          * @param params\r\n          */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    this._super(params);\n\n    // Create a data-structure to keep track of each cell properties\n    this.cellMetadata = {};\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Fill default properties\n    var properties = this.properties;\n    var form = self.getFormContainer();\n\n    // If not helptext configured, Just apply display-type: vertical, align it to the left\n    if (self.properties.helpText && self.properties.helpText != null && self.properties.helpText != \"\") {\n      properties.displayType = \"value\";\n    } else {\n      properties.displayType = \"vertical\";\n    }\n\n    properties.labelAlign = \"left\";\n\n    if (properties.groupBy || properties.groupSummary) {\n      // Add warning\n      form.addWarning(self.getResource(\"render-tablet-warning-grid\"));\n    }\n  },\n\n  /**\r\n      * Update or init the element data\r\n      * @param data\r\n      */\n  initializeData: function initializeData(data) {\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    this._super(data);\n  },\n\n  /**\r\n      * Updates manually the affected cell\r\n      */\n  updateAffectedCellManually: function updateAffectedCellManually() {\n  },\n\n  /**\r\n      * Get the row index using the key as a reference\r\n      */\n  getRowIndexByKey: function getRowIndexByKey() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    self.initialLoadDone = false;\n\n    // Call base \n    self._super();\n\n    // Find component holder\n    self.grid = $(\">div\", control);\n\n    // Hide common label\n    self.getLabel().hide();\n\n    // Grid plugin\n    self.applyGridPlugin();\n\n    // Set initial data\n    if (properties.data) {\n      if (properties.data === \"\" || properties.data.rows.length === 0 && properties.data.page > 1) {\n        self.fetchData(undefined, self.sortBy, self.sortType);\n      } else {\n        self.updateData(properties.data);\n\n        // Trigger change in order to start up the actions when the controls is ready\n        $.when(self.ready()).done(function () {\n          self.triggerRenderChange({ changed: false });\n        });\n      }\n    }\n\n    // Execute pending actions\n    self.initialLoadDone = true;\n\n    for (var i in self.pendingActions) {\n      if (self.pendingActions.hasOwnProperty(i)) {\n        self.pendingActions[i].method.apply(self, self.pendingActions[i].arguments);\n      }\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var grid = self.grid;\n\n    // Build column metadata\n    var columns = self.buildColumnModel();\n\n    var columnsTotalizers = (columns || []).filter(function (item) {\n      return item.summarizeBy;\n    });\n\n    // Apply grid plugin\n    grid.bizagi_grid_tablet({\n      columns: columns,\n      subType: properties.subType || grid,\n      title: properties.displayName,\n      isOfflineForm: self.isOfflineForm || false,\n      mode: mode,\n      isSortable: properties.isSortable,\n      sortBy: properties.sortBy || \"\",\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\n        pager: self.renderFactory.getTemplate(\"bizagi.grid.pager\"),\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons\"),\n        dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\"),\n        totalizer: self.renderFactory.getTemplate(\"bizagi.grid.totalizer\") },\n\n      actions: {\n        add: properties.allowAdd, //|| properties.inlineAdd,\n        edit: properties.allowEdit && properties.withEditForm && properties.data != null || properties.subType === \"adhocGrid\" && properties.allowEdit,\n        details: properties.allowDetail,\n        remove: properties.allowDelete,\n        inlineAdd: false, //properties.inlineAdd,\n        allowMore: properties.allowMore,\n        enableXlsExport: false,\n        enablePdfExport: false,\n        hasTotalizer: columnsTotalizers && columnsTotalizers.length > 0 && properties.data.rows.length > 0 },\n\n      pageRequested: function pageRequested(ui) {\n        if (!self.isExecutionMode()) return;\n\n        var hasColumnChanges = self.changes && Object.keys(self.changes).length >= 1 ||\n        self.exclusiveChanges && Object.keys(self.exclusiveChanges).length >= 1;\n\n        if (!self.isSummaryOrGlobalForm() && hasColumnChanges) {\n          $.when(self.getFormContainer().saveForm()).done(function () {\n            self.fetchData(ui.page, ui.sortBy, ui.sortType);\n          });\n        } else {\n          self.fetchData(ui.page, ui.sortBy, ui.sortType);\n        }\n\n      },\n      sortRequested: function sortRequested(ui) {\n        if (!self.isExecutionMode()) return;\n        self.fetchData(ui.page, ui.sortBy, ui.sortType);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        if (!self.isExecutionMode()) return;\n        self.triggerHandler(\"rowSelected\", { id: ui.key, data: ui });\n      },\n      addRow: function addRow(ui) {\n        if (!self.isExecutionMode()) return;\n        if (self.properties.subType === \"adhocGrid\" || self.properties.inlineAdd) {\n          self.addVirtualRow();\n        } else {\n          self.addRow();\n        }\n      },\n      editRow: function editRow(ui) {\n        if (!self.isExecutionMode()) return;\n        if (self.properties.subType === \"adhocGrid\") {\n          self.editVirtualRow(ui.key);\n        } else {\n          self.editRow(ui.key);\n        }\n      },\n      deleteRow: function deleteRow(ui) {\n        if (!self.isExecutionMode()) return;\n        self.deleteRow(ui.key);\n      },\n      moreRows: function moreRows(ui) {\n        if (!self.isExecutionMode()) return;\n        self.moreRows(ui);\n      },\n      showFormDetails: function showFormDetails(ui) {\n        self.showDetailForm(ui.key);\n      },\n      showMore: function showMore(ui) {\n        if (!self.isExecutionMode()) return;\n        self.showMore(ui.key);\n      },\n      totalData: function totalData(ui) {\n        if (!self.isExecutionMode()) return;\n        self.onTotalData();\n      } });\n\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Do the same as the post-render            \n    this.postRender();\n  },\n\n  /**\r\n      *   Creates the column model required to initialize the grid plugin\r\n      */\n  buildColumnModel: function buildColumnModel() {\n    var self = this;\n    var columns = self.columns;\n\n    // Create id column first\n    var keyColumn = {\n      name: \"id\",\n      index: 0,\n      label: \"id\",\n      hidden: true,\n      align: \"center\",\n      required: false,\n      key: true };\n\n\n    // Add to column model\n    var columnModel = [];\n    columnModel.push(keyColumn);\n\n    $.each(columns, function (index, column) {\n\n      // Set grid column\n      column.columnIndex = index + 1;\n\n      var dataType = bizagi.util.normalizeType(column.properties.type);\n      var columnLabel = !bizagi.util.isEmpty(column.properties.displayName) ? column.properties.displayName : \" \";\n      var gridColumn = {\n        name: column.properties.xpath,\n        index: index + 1,\n        label: columnLabel,\n        required: column.properties.required || false,\n        key: false,\n        hidden: !column.properties.visible || /columnHidden/i.test(dataType) || column.properties.columnVisible == false,\n        summarizeBy: column.properties.totalize && column.properties.totalize.operation ? column.properties.totalize.operation : undefined,\n        bizAgiProperties: column.properties };\n\n\n      columnModel.push(gridColumn);\n    });\n\n    return columnModel;\n  },\n\n  /**\r\n      * Makes the grid to refresh\r\n      */\n  refresh: function refresh() {\n    this.fetchData();\n  },\n\n  /*\r\n     *   Holds the execution until the grid data is ready after a load operation\r\n     */\n  dataReady: function dataReady() {\n    return this.dataReadyDeferred != null ? this.dataReadyDeferred.promise() : null;\n  },\n\n  /*\r\n     * Update data from local changes\r\n     */\n  loadChanges: function loadChanges(rows) {\n    var self = this;\n\n    // Get data from the rows\n    for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n      var rowChanges = self.changes[rows[rowIndex][0]];\n      if (self.exclusiveChanges) {\n        rowChanges = $.extend(rowChanges || {}, self.getExclusiveChangeByRow(rows[rowIndex][0]));\n      }\n      // Search for changes\n      if (rowChanges !== undefined) {\n        // Update all rowChanges in data\n        for (var xpath in rowChanges) {\n          if (rowChanges.hasOwnProperty(xpath)) {\n            var columnData = self.getColumn(xpath);\n            rows[rowIndex][columnData.columnIndex] = self.mapChangeValue(columnData.properties.type, rowChanges[xpath], columnData.comboData);\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Mapper to data changes\r\n      * @param type\r\n      * @param change\r\n      * @param data\r\n      * @returns {(*|number)[][]}\r\n      */\n  mapChangeValue: function mapChangeValue(type, change, data) {\n    data = data || [];\n    var value = change;\n\n    if (change !== null && typeof change !== \"undefined\") {\n      if (/columnCombo/i.test(type) || /columnRadio/i.test(type)) {\n        if (!bizagi.util.isArray(change)) {\n          var item = data.find(function (el) {\n            return el.id == change;\n          });\n\n          if (item) {\n            value = [[item.id, item.value]];\n          }\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /*\r\n     *   Method to set data and update the grid\r\n     */\n  updateData: function updateData(data) {\n    var self = this;\n    var grid = self.grid;\n    var columns = self.columns;\n\n    // Set value in control\n    if (data) {\n      self.properties.data = data;\n\n      self.setCellOverrides(data, columns);\n      self.triggerGridPluginHandler(\"setData\", data);\n      self.applyColumnsWidth(grid, columns);\n    }\n  },\n\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n    var properties = self.properties;\n\n    self.dataReadyDeferred = new $.Deferred();\n\n    // Define defaults\n    page = page || properties.page || 1;\n    sortBy = sortBy || properties.sortBy || \"\";\n    sortType = sortType || properties.sortOrder || \"asc\";\n\n    // Update control properties\n    properties.page = page;\n    properties.sortBy = sortBy;\n    properties.sortType = sortType;\n    properties.sort = sortBy + \" \" + sortType;\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).\n    then(function (data) {\n      if (data) {\n        if (data.deviceMaxRecordsExceeded) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-maximum-records-allowed\"));\n        } else {\n          if (self.isRTL()) {\n            data.rows = self.changeOrderData(data.rows);\n          }\n\n          self.loadChanges(data.rows);\n          self.updateData(data);\n\n          self.triggerRenderChange({ changed: false });\n\n          self.dataReadyDeferred.resolve();\n        }\n      }\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var grid = self.grid;\n\n    // Save pending inline add rows\n    if (self.grid && (self.properties.inlineAdd || self.properties.inlineEdit)) {\n      var newKeys = grid.bizagi_grid_tablet.hasOwnProperty(\"getNewRowKeys\") ? grid.bizagi_grid_tablet(\"getNewRowKeys\") : [];\n\n      // Save new rows then save the whole screen\n      if (newKeys.length > 0 && !self.properties.alreadySaved && self.isValid()) {\n        var saveDeferred = self.saveInlineAddedRows(newKeys, true);\n\n        // Add to deferred collections in order to sync when saving\n        renderValues.deferreds = renderValues.deferreds || [];\n        renderValues.deferreds.push(saveDeferred);\n      }\n\n      // Remove adding keys from current changes\n      for (var i = 0; i < newKeys.length; i++) {\n        if (self.changes[newKeys[i]]) {\n          delete self.changes[newKeys[i]];\n        }\n      }\n    }\n\n    // Call base method\n    self._super(renderValues);\n  },\n\n  /**\r\n      * Customizes the content drawing inside the cell\r\n      * @param column\r\n      * @param key\r\n      * @param value\r\n      * @param isNewRow\r\n      * @returns {string|*}\r\n      */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n\n    if (column.key) return value;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var cellOverride = self.getCellOverride(key, columnIndex);\n    var renderColumn = self.columns[columnIndex];\n\n    // Data with null records\n    self.newRecords = self.newRecords || {};\n\n    // Get cell properties\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) self.cellMetadata[key][columnIndex] = {};\n\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.properties;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) || false;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Apply overrides from cellOverrides\n    visible = cellOverride.visible;\n    editable = properties.editable ? cellOverride.editable : false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) editable = true;\n\n    renderColumn.properties.displayType = \"value\";\n    renderColumn.setSurrogateKey(key);\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (key === \"summary\") {\n      editable = false;\n    }\n\n    // Set the value of labelAlign and valueAlign to use the rendering in the base\n    renderColumn.properties.labelAlign = \"default\";\n    if (renderColumn.properties.columntitlealign) {\n      renderColumn.properties.labelAlign = renderColumn.properties.columntitlealign;\n    }\n\n    renderColumn.properties.valueAlign = \"default\";\n    if (renderColumn.properties.columnAlign) {\n      renderColumn.properties.valueAlign = renderColumn.properties.columnAlign;\n    }\n\n    var cell = \"\";\n    if (editable) {\n      cell = self.drawEditableCell(renderColumn, properties, key, value, isNewRow);\n    } else {\n      cell = self.drawReadonlyCell(renderColumn, properties, key, value);\n    }\n    return visible ? cell : \"\";\n  },\n\n  /*\r\n     *   Executes when the cell is ready and inserted into the DOM\r\n     */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    var self = this;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var cellOverride = self.getCellOverride(key, columnIndex);\n    var renderColumn = self.columns[columnIndex];\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.properties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Apply overrides from cellOverrides\n    visible = cellOverride.visible;\n    editable = properties.editable ? cellOverride.editable : false;\n\n    var columnWidth = properties.columnwidth || 'auto';\n    var controlType = bizagi.util.getColumnType(properties.type);\n    var isHorizontalRadio = controlType === \"radio\" && properties.horizontal && editable;\n    var isCheckbox = controlType === \"boolean\" && properties.display === \"check\";\n    this.applyElementWidth(cell[0], columnWidth, controlType, isHorizontalRadio, isCheckbox, false);\n\n    // Show editable cell when we are performing inline add operation\n    editable = !!isNewRow;\n\n    if (visible) {\n      if (editable) {\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        if (renderColumn.properties.submitOnChange) {\n          var control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n          }\n        }\n\n        // Execute cell post render\n        renderColumn.postRender(key, cell);\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n      } else {\n        renderColumn.postRenderReadOnly(key, cell);\n      }\n    }\n  },\n\n  /**\r\n      *  Adds a row to the grid\r\n      */\n  addRow: function addRow() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    // Start loading\n    self.startLoading();\n\n    // Send add request\n    $.when(self.submitAddRequest()).\n    done(function (newid) {\n\n      // Show a slide with new form after that\n      var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\n        title: self.properties.displayName || \"\",\n        container: form.container,\n        formParams: formParams,\n        navigation: formParams.navigation,\n        showSaveButton: true,\n        onSave: function onSave(data) {\n          self.addExclusiveChange(newid, data);\n          return self.submitSaveRequest(newid, data);\n        } });\n\n\n      // End Loading\n      self.endLoading();\n\n      var recordXpath = properties.xpath + \"[id=\" + newid + \"]\";\n\n      slideView.render({\n        idRender: properties.id,\n        recordXPath: recordXpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        requestedForm: \"addForm\",\n        url: properties.addPage,\n        formParams: formParams,\n        navigation: formParams.navigation }).\n      done(function () {\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n        } else {\n          // Submits the entire form\n          self.submitOnChange();\n        }\n\n      }).fail(function () {\n        self.submitRollbackRequest();\n      }).always(function () {\n        self.endLoading();\n      });\n    }).fail(function (error) {\n      self.executeFailHandlerOnForm(error);\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  addVirtualRow: function addVirtualRow() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    // Create mock row\n    var currentRow = [\"mock_id\"];\n    self.columns.forEach(function () {\n      currentRow.push(null);\n    });\n\n    // Render grid view\n    var slideView = new bizagi.rendering.tablet.slide.adhocForm(self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      allowEdition: true,\n      navigation: formParams.navigation,\n      container: self.getFormContainer().container });\n\n\n    slideView.render({\n      row: currentRow,\n      columns: self.columns,\n      pageCacheId: properties.idPageCache,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      sessionId: form.properties.sessionId,\n      actions: form.actions,\n      validations: form.validations }).\n    done(function (data) {\n      $.when(self.saveAddedRow(data)).done(function () {\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n        } else {\n          // Submits the entire form\n          self.submitOnChange();\n        }\n      });\n    });\n  },\n\n  /*\r\n     *   Prepares the add action\r\n     */\n  saveAddedRow: function saveAddedRow(data) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.multiaction().addGridRecordData({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contexttype,\n      idPageCache: properties.idPageCache,\n      submitData: data });\n\n  },\n\n  /**\r\n      *  Edits a row in the grid\r\n      */\n  editRow: function editRow(id) {\n\n    if (id == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    var self = this;\n    var properties = self.properties;\n\n    // Use tablet inline edit when there are no edit form\n    if (properties.inlineEdit == true && properties.allowEdit == false) {\n      self.editInline(id);\n      return;\n    }\n\n    if (self.cleanActionChanges && self.cleanActionChanges[id] !== undefined) {\n\n      self.changes = self.cleanActionChanges;\n      var data = $.extend(self.changes[id], {});\n      data.idPageCache = properties.idPageCache;\n\n      $(\".ui-tooltip\").remove();\n\n      $.when(self.submitSaveRequest(id, data)).done(function () {\n        // Set loading status\n        self.startLoading();\n\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.endLoading();\n\n          self.fetchData();\n        } else {\n          // Submits the entire form\n          self.submitForGridChange().always(function () {\n            self.endLoading();\n\n            // Send edit request\n            self.executeSubmitEditRequest(id, function (data) {\n              self.addExclusiveChange(id, data);\n            });\n          });\n        }\n      });\n    } else {\n      self.executeSubmitEditRequest(id, function (data) {\n        self.addExclusiveChange(id, data);\n      });\n\n    }\n  },\n\n  editVirtualRow: function editVirtualRow(id) {\n    var self = this;\n    var data = self.properties.data;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n    // Search row\n    var currentRow = [];\n    for (var i = 0, length = data.rows.length; i < length; i++) {\n      if (data.rows[i][0] == id) {\n        currentRow = data.rows[i];\n        break;\n      }\n    }\n    // Render grid view\n    var slideView = new bizagi.rendering.tablet.slide.adhocForm(self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      allowEdition: true,\n      navigation: formParams.navigation,\n      container: self.getFormContainer().container });\n\n    slideView.render({\n      row: currentRow,\n      columns: self.columns,\n      pageCacheId: properties.idPageCache,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      sessionId: form.properties.sessionId,\n      actions: form.actions }).\n    done(function (formData) {\n      // This code is executed when the user press save on the slide\n      // Update internal data\n      for (xpath in formData) {\n        self.collectGridChange({ id: id, xpath: xpath, value: formData[xpath], trigger: false });\n      }\n      // Prepare grid data\n      var dataToSend = {};\n      self.collectData(dataToSend);\n      // Send the data\n      self.dataService.submitData({\n        action: \"SUBMITONCHANGE\",\n        data: dataToSend,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache }).\n      done(function () {\n        // After successfully response refresh the grid\n        self.fetchData();\n      });\n    });\n  },\n\n  executeSubmitEditRequest: function executeSubmitEditRequest(id, callback) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      formParams: formParams,\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      onSave: function onSave(data) {\n        if (callback) {\n          callback(data);\n        }\n        return self.submitSaveRequest(id, data);\n      } });\n\n\n    self.startLoading();\n\n    $.when(self.submitEditRequest(id)).\n    done(function () {\n\n      // Show dialog with new form after that\n      var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n      slideView.render({\n        idRender: properties.id,\n        recordXPath: recordXpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        requestedForm: \"editForm\",\n        url: properties.editPage,\n        formParams: formParams,\n        navigation: formParams.navigation }).\n      done(function () {\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n\n        } else {\n          // Submits the entire form\n          self.submitOnChange();\n        }\n      }).fail(function () {\n        self.startLoading();\n        $.when(self.submitRollbackRequest()).always(function () {\n          self.endLoading();\n        });\n      });\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  showDetailForm: function showDetailForm(id) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      formParams: formParams,\n      navigation: formParams.navigation,\n      showSaveButton: false });\n\n\n    // Show dialog with new form after that\n    var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    slideView.render({\n      idRender: properties.id,\n      recordXPath: recordXpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      requestedForm: \"detailForm\",\n      url: properties.editPage,\n      formParams: formParams,\n      editable: false,\n      navigation: formParams.navigation });\n\n  },\n  /**\r\n      *  Deletes  a row to the grid\r\n      */\n  deleteRow: function deleteRow(id) {\n    if (id === 0) {\n      bizagi.showMessageBox(\n      bizagi.localization.getResource(\"render-grid-message-no-selected-row\"),\n      bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n\n      return;\n    }\n\n    var self = this;\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      // Do a grid record deletion\n      $.when(self.submitDeleteRequest(id)).\n      done(function (data) {\n        // Refresh grid\n        self.refreshAfterDeleteRows();\n\n        if (data.type === \"success\") {\n          // Trigger the event\n          //'key' must be included to trigger a single call to actions and validations\n          //line 310 bizagi.command.controllers.action\n          self.triggerRenderChange({ rowDeleted: true, changed: false, key: id });\n        }\n      }).fail(function (error) {\n        self.executeFailHandlerOnForm(error);\n      });\n    });\n  },\n\n  /**\r\n      * Refresh the grid after delete rows\r\n      * @param rowsDeleted\r\n      * @returns {*}\r\n      */\n  refreshAfterDeleteRows: function refreshAfterDeleteRows(rowsDeleted) {\n    var self = this;\n    var page = self.triggerGridPluginHandler(\"getCurrentPage\");\n    rowsDeleted = rowsDeleted || 1;\n\n    if (page > 1) {\n      var data = bizagi.clone(self.properties.data || {});\n      var newTotalRows = data.records > 0 ? data.records - rowsDeleted : 0;\n      var newTotalPages = Math.ceil(newTotalRows / self.properties.rowsPerPage);\n\n      if (newTotalPages < page) {\n        page = newTotalPages;\n      }\n    }\n\n    return self.fetchData(page);\n  },\n\n  moreRows: function moreRows(ui) {\n    var self = this;\n    var properties = self.properties;\n\n    if (typeof properties.originalrowsPerPage === \"undefined\") {\n      properties.originalrowsPerPage = properties.rowsPerPage;\n    }\n\n    properties.rowsPerPage += properties.originalrowsPerPage;\n\n    var dataToSend = {};\n    self.collectData(dataToSend);\n\n    self.startLoading();\n\n    if ($.isEmptyObject(dataToSend)) {\n      self.moreRowsCommon(ui);\n      return;\n    }\n\n    // Send the data\n    self.dataService.submitData({\n      action: \"SUBMITONCHANGE\",\n      data: dataToSend,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache }).\n    done(function () {\n\n      self.endLoading();\n\n      self.moreRowsCommon(ui);\n    });\n\n  },\n\n  moreRowsCommon: function moreRowsCommon(ui) {\n    var self = this;\n    var properties = self.properties;\n\n    self.fetchData(ui.page, ui.sortBy, ui.sortType);\n\n    $.when(self.dataReadyDeferred).done(function () {\n\n      if (properties.records != 0)\n      if (properties.records + 1 <= properties.rowsPerPage) {\n        $(\".ui-bizagi-grid-dynamic-pager\", self.getControl()).hide();\n      }\n\n    });\n  },\n\n  /**\r\n      *  Shows more info about a grid row\r\n      */\n  showMore: function showMore(id) {\n    var self = this;\n    var data = self.properties.data;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    // Search row\n    var currentRow = [];\n    for (var i = 0, length = data.rows.length; i < length; i++) {\n      if (data.rows[i][0] == id) {\n        currentRow = data.rows[i];\n        break;\n      }\n    }\n\n    // Render grid view\n    var slideView = new bizagi.rendering.tablet.slide.grid(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      allowEdition: false,\n      formParams: formParams,\n      navigation: formParams.navigation });\n\n\n    self.startLoading();\n\n    slideView.render({\n      row: currentRow,\n      columns: self.columns,\n      pageCacheId: properties.idPageCache,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      sessionId: form.properties.sessionId,\n      actions: form.actions,\n      formParams: formParams,\n      navigation: formParams.navigation }).\n    done(function () {\n      self.endLoading();\n    });\n  },\n\n  /**\r\n      *  Edits the entire row (inline) in another slide\r\n      */\n  editInline: function editInline(id) {\n    var self = this;\n    var data = self.properties.data;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    // Search row\n    var currentRow = [];\n    for (var i = 0, length = data.rows.length; i < length; i++) {\n      if (data.rows[i][0] == id) {\n        currentRow = data.rows[i];\n        break;\n      }\n    }\n\n    // Render grid view\n    var slideView = new bizagi.rendering.tablet.slide.grid(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      formParams: formParams,\n      navigation: formParams.navigation,\n      allowEdition: true });\n\n\n    // Render the editable view\n    $.when(slideView.render({\n      row: currentRow,\n      columns: self.columns,\n      pageCacheId: properties.idPageCache,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      sessionId: form.properties.sessionId,\n      actions: form.actions,\n      validations: form.validations,\n      formParams: formParams,\n      navigation: formParams.navigation })).\n    done(function (data) {\n      // This code is executed when the user press save on the slide\n\n      // Update internal data\n      for (xpath in data) {\n        self.collectGridChange({ id: id, xpath: xpath, value: data[xpath], trigger: false });\n      }\n\n      // Prepare grid data\n      var dataToSend = {};\n      self.collectData(dataToSend);\n\n      // Send the data\n      self.dataService.submitData({\n        action: \"SUBMITONCHANGE\",\n        data: dataToSend,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache }).\n      done(function () {\n        // After successfully response refresh the grid\n        self.fetchData();\n      });\n    });\n  },\n\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      control && control.changeBackgroundColor(argument, false);\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: self.changeCellBackgroundColor,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      control && control.changeColor(argument, false);\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: self.changeCellColor,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *   Changes the visibility for a cell\r\n     */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n\n      var index = (self.columns || []).findIndex(function (cell) {\n        return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n      }) || 0;\n\n      var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, index);\n      if (cell) {\n        // Change visibility\n        if (argument == true) {\n          cell.css(\"visibility\", \"visible\");\n          cell.css(\"display\", \"\");\n\n          self.element && self.element.show();\n        } else {\n          cell.css(\"visibility\", \"hidden\");\n        }\n      }\n\n      self.cellOverrides[key] = self.cellOverrides[key] || {};\n      self.getCellOverride(key, index).visible = argument;\n\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: self.changeCellVisibility,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *  Changes the required for cell\r\n     */\n  changeCellValue: function changeCellValue(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.setDisplayValue(argument);\n\n        var renderColumn = control.column || {};\n        var dataType = renderColumn.properties && renderColumn.properties.type;\n\n        if (renderColumn) {\n          var _value = self.getCellValueFormatted(renderColumn, renderColumn.getValue(key));\n\n          control.setDisplayValue(argument);\n          control.triggerHandler(\"renderchange\", { render: self, changed: true });\n\n          self.collectGridChange({\n            id: key,\n            xpath: renderColumn.properties.xpath,\n            value: _value,\n            compositeValue: renderColumn.getCompositeValue(key),\n            columnIndex: control.columnIndex,\n            trigger: false,\n            dataType: dataType });\n\n        }\n      }\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: self.setDisplayValue,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeCellRequired(argument);\n\n        var index = (self.columns || []).findIndex(function (cell) {\n          return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n        }) || 0;\n\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, index).required = argument;\n      }\n    } else {\n      self.pendingActions.push({ method: self.changeCellRequired, arguments: arguments });\n    }\n  },\n\n  /**\r\n      * Changes the editability for a cell\r\n      * @param key\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeEditabilityCellControl(argument, key, xpath);\n\n        var index = self.getIndexForCurrentCell(xpath);\n\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, index).editable = argument;\n      }\n    } else {\n      self.pendingActions.push({ method: self.changeEditability, arguments: arguments });\n    }\n  },\n\n  /*\r\n     *   Sets an error on the cell\r\n     */\n  setError: function setError(key, xpath) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      for (var j = 0; j < self.columns.length; j++) {\n        var isVisible = self.getCellOverride(key, j).visible;\n        var columnProperties = self.columns[j].properties;\n\n        if (self.isCurrentGridCell(columnProperties.xpath, columnProperties.id, xpath) && isVisible) {\n          var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\n          cell.parent().addClass(\"ui-bizagi-render-grid-cell-error\");\n          break;\n        }\n      }\n\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: self.setError,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    var parentPromise = self._super();\n    var inlineAddPromise = self.inlineAddDeferred ? self.inlineAddDeferred.promise() : null;\n    return $.when(parentPromise, inlineAddPromise);\n  },\n\n  /*\r\n     * Apply Columns Width in postrender\r\n     */\n  applyColumnsWidth: function applyColumnsWidth(grid, columns) {\n    var self = this;\n    var resizableColumns = grid[0].querySelectorAll(\"th:not(.bz-hidden)\");\n    resizableColumns.forEach(function (column, i) {\n      var columnHeader = column.querySelector(\".bz-tablet-grid__label\");\n      var index = columnHeader ? Number(columnHeader.dataset[\"columnIndex\"]) - 1 : i;\n      var columnProperties = columns[index] && columns[index].properties ? columns[index].properties : {};\n      var columnWidth = columnProperties.columnwidth;\n      var editable = columnProperties.editable !== undefined ? columnProperties.editable : true;\n      var controlType = bizagi.util.getColumnType(columnProperties.type);\n      var isHorizontalRadio = controlType === \"radio\" && columnProperties.horizontal && editable;\n      var isCheckbox = controlType === \"boolean\" && columnProperties.display === \"check\";\n      self.applyElementWidth(column, columnWidth, controlType, isHorizontalRadio, isCheckbox, true);\n    });\n  },\n\n  /**\r\n      * Applies the given width to an element\r\n      * @param { DOMObject } element - DOM element to modify\r\n      * @param { string } width - Width set by user per element\r\n      * @param { string } type - Control type\r\n      * @param { boolean } isHorizontalRadio - True if the control is a horizontal radius. False in any other case.\r\n      * @param { boolean } isHeader - true if the element is an <th>. False otherwise.\r\n      */\n  applyElementWidth: function applyElementWidth(element, width, type, isHorizontalRadio, isCheckbox, isHeader) {\n    if (isHorizontalRadio) type = \"horizontalRadio\";else\n    if (isCheckbox) type = \"checkboxBoolean\";\n\n    var minValidWidth = this.MIN_SUPPORTED_WIDTHS.get(type);\n    if (width && width !== \"auto\") {\n      if (/px$/i.test(width)) {\n        width = Math.max(parseInt(width), minValidWidth) + \"px\";\n      }\n      element.style.width = width;\n      element.style.minWidth = width;\n      if (!isHeader) {\n        element.style.maxWidth = width;\n      }\n\n    }\n  },\n\n  /*\r\n     *   Method to start loading for ajax data and update the ui\r\n     */\n  startLoading: function startLoading(bUseTimeout) {\n    bizagi.loading.start();\n    this._super(bUseTimeout);\n  },\n\n  /*\r\n     *   Method to remove the loading message\r\n     */\n  endLoading: function endLoading() {\n    bizagi.loading.stop();\n    this._super();\n  },\n\n  cleanCellData: function cleanCellData(key, xpath) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        return $.when(control.cleanData()).then(function (emptyValue) {\n          //Not all empty values are \"\" or [], the best approach is to get the value from the control\n          emptyValue = emptyValue || [[\"\", \"\"]];\n\n          var index = (self.columns || []).findIndex(function (cell) {\n            return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n          }) || 0;\n\n          var rows = self.properties.data.rows;\n          var i = 0;\n          var rowLength = rows.length;\n\n          for (; i < rowLength; i++) {\n            if (Number(key) === rows[i][0]) {\n              rows[i][index + 1] = emptyValue;\n              break;\n            }\n          }\n          self.cellOverrides[key] = self.cellOverrides[key] || {};\n          self.getCellOverride(key, index).value = null;\n\n          if (!self.cleanActionChanges) {\n            self.cleanActionChanges = {};\n          }\n          if (!self.cleanActionChanges[key]) {\n            self.cleanActionChanges[key] = {};\n          }\n          self.cleanActionChanges[key][xpath] = \"\";\n        });\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.cleanData,\n        arguments: \"\" });\n\n    }\n  },\n\n  onTotalData: function onTotalData(ui) {\n    var self = this;\n    var properties = self.properties;\n    var data = properties.data || {};\n    var rows = data.rows;\n    var showTotal = [];\n    var columnsModel = self.buildColumnModel();\n    var result;\n\n    bizagi.util.tablet.startLoading();\n\n    columnsModel.forEach(function callback(column, columnIndex) {\n      if (column.bizAgiProperties) {\n        var operationState = column.bizAgiProperties.totalize.operation;\n\n        switch (operationState) {\n          case \"sum\":\n            result = rows.sum(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n            break;\n\n          case \"count\":\n            result = rows.count(function (row) {\n              //Checks if there is a DefaultValue, so assign it to the returnedvalu in case it doesn't have value\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n\n              if (!bizagi.util.isArray(return_value)) {\n                return return_value;\n              }\n\n              if (bizagi.util.isArray(return_value) && return_value.length > 0) {\n                return return_value; //If the returned value is not undefined, neither null, it will count +1\n              }\n            }, column, columnIndex);\n\n            break;\n\n          case \"max\":\n            result = rows.max(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n\n            break;\n\n          case \"min\":\n            result = rows.min(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n            break;\n\n          case \"avg\":\n            result = rows.avg(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n\n            result = result.toFixed(2);\n            break;}\n\n\n        if (operationState) {\n          result = self.formatTotalizedResult(operationState, column.bizAgiProperties.type, result);\n          showTotal.push({ label: column.label, total: result });\n        }\n      }\n    });\n    self.showTotals(showTotal);\n    bizagi.loading.stop();\n  },\n\n  formatTotalizedResult: function formatTotalizedResult(operation, controlType, value) {\n    switch (operation) {\n      case 'sum':\n      case 'avg':\n      case 'min':\n      case 'max':\n        if (/columnMoney/i.test(controlType) || /money/i.test(controlType)) {\n          return bizagi.util.formatMonetaryCell(value);\n        }\n        break;}\n\n\n    return value || 0;\n  },\n\n  showTotals: function showTotals(params) {\n    var self = this;\n    var content = $.fasttmpl(self.renderFactory.getTemplate('bizagi.grid.totalizer'), { items: params });\n\n    self.grid.mobileView({\n      displayName: bizagi.localization.getResource(\"render-grid-totalizer\"),\n      orientation: self.properties.orientation,\n      style: \"width: 80%; height: 70%\",\n      transition: \"fade:in\",\n      cssClass: \"bz-modal-view--totalizer\",\n      showBorder: true,\n      contentTemplate: content });\n\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var control = this.getControl();\n\n    if (control) {\n      $(\".bz-tablet-grid\", control).css(\"background-color\", color !== 'none' ? color : \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Get Cell value with format\r\n      * @param renderColumn\r\n      * @param _value\r\n      * @returns {string}\r\n      */\n  getCellValueFormatted: function getCellValueFormatted(renderColumn, _value) {\n    var dataType = renderColumn.properties.type;\n    var formatted = _value;\n\n    if (/columnDate/i.test(dataType)) {\n      var columnProperties = renderColumn.data.properties;\n\n      if (!bizagi.util.isEmpty(formatted)) {\n        // Formats the value in full invariant (with time) in order to send to the server\n        var date = bizagi.util.dateFormatter.getDateFromInvariant(formatted, columnProperties.showTime);\n\n        if (typeof date != \"undefined\" && date !== 0) {\n          if (!columnProperties.showTime) {\n            date.setHours(0, 0, 0, 0);\n          }\n\n          formatted = bizagi.util.dateFormatter.formatInvariant(date, true);\n        }\n      } else if (_value === \"\") {\n        formatted = \"\";\n      }\n    }\n\n    return formatted;\n  },\n\n  /**\r\n      * Defines the handler when a cell changes its value\r\n      * @param renderColumn\r\n      * @param cell\r\n      * @param key\r\n      * @param args\r\n      */\n  onCellChange: function onCellChange(renderColumn, cell, key, args) {\n    var self = this;\n    var dataType = bizagi.util.normalizeType(renderColumn.properties.type);\n    var excludedTypes = new RegExp([\"columnImage\", \"columnUpload\"].join(\"|\"), \"i\");\n\n    // Don't collect data for online column images, or upload\n    if (excludedTypes.test(dataType)) return;\n\n    try {\n      var _value = renderColumn.getValue(key);\n      var compositeValue = renderColumn.getCompositeValue(key);\n\n      if (/columnDate/i.test(dataType)) {\n        if (!bizagi.util.isEmpty(_value)) {\n          var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, true);\n          date.setMilliseconds(0);\n\n          _value = bizagi.util.dateFormatter.formatInvariant(date, true);\n        } else if (_value === \"\") {\n          _value = \"\";\n        }\n      }\n\n      var isExclusiveControl = /columnBoolean/i.test(dataType) && renderColumn.properties.isExclusive;\n\n      if (!isExclusiveControl && self.properties.allowEdit) {\n        self.collectGridChange($.extend(args, {\n          id: key,\n          xpath: renderColumn.properties.xpath || renderColumn.properties.id,\n          value: _value,\n          compositeValue: compositeValue,\n          columnIndex: renderColumn.columnIndex,\n          trigger: true,\n          dataType: dataType }));\n\n      }\n\n      // Update change in grid's component data\n      self.triggerGridPluginHandler(\"changeCellValue\", key, renderColumn.columnIndex, _value);\n    } catch (e) {\n      console.warn(\"onCellChange error: \", e, renderColumn);\n    }\n  },\n\n  /**\r\n      * Draws the editable version for the cell\r\n      * @param renderColumn\r\n      * @param properties\r\n      * @param key\r\n      * @param value\r\n      * @param isNewRow\r\n      */\n  drawEditableCell: function drawEditableCell(renderColumn, properties, key, value, isNewRow) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Set editable\n    var originalEditable = renderColumn.properties.editable;\n    renderColumn.properties.editable = true;\n\n    // Fix problem when required property lose\n    renderColumn.overrideProperties({ required: properties.required });\n\n    // Render cell\n    $.when(renderColumn.render(key, value)).done(function (cell) {\n\n      // Register array with new records\n      (self.columns || []).forEach(function (item, index) {\n        var visible = true;\n\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n\n        // Convert all row visible\n        if (typeof self.getCellOverride(key, index).visible !== \"undefined\") {\n          visible = self.getCellOverride(key, index).visible;\n        }\n\n        self.getCellOverride(key, index).visible = visible;\n      });\n\n      // Add change handler\n      renderColumn.getDecorated(key).\n      unbind(\"renderchange.draweditable\").\n      bind(\"renderchange.draweditable\", function (render, args) {\n        self.onCellChange(renderColumn, cell, key, args);\n      });\n\n      // Resolve cell\n      defer.resolve(cell);\n    });\n\n    // Restore editable\n    renderColumn.properties.editable = originalEditable;\n\n    // Return promise\n    return defer.promise();\n  },\n\n  /**\r\n      * Draws the readonly version for the cell\r\n      * @param renderColumn\r\n      * @param properties\r\n      * @param key\r\n      * @param value\r\n      */\n  drawReadonlyCell: function drawReadonlyCell(renderColumn, properties, key, value) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(renderColumn.renderReadOnly(key, value)).done(function (cell) {\n      // Register array with new records\n      (self.columns || []).forEach(function (item, index) {\n        var visible = true;\n\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n\n        if (typeof self.getCellOverride(key, index).visible !== \"undefined\") {\n          visible = self.getCellOverride(key, index).visible;\n        }\n\n        self.getCellOverride(key, index).visible = visible;\n      });\n\n      // Resolve cell\n      defer.resolve(cell);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Triggers the grid plugin event\r\n      * @returns {*}\r\n      */\n  triggerGridPluginHandler: function triggerGridPluginHandler() {\n    try {\n      var args = Array.prototype.slice.call(arguments, 0);\n      return this.grid.bizagi_grid_tablet.apply(this.grid, args);\n    } catch (e) {\n      console.warn(\"triggerGridPluginHandler error: \", e);\n    }\n  },\n\n  addExclusiveChange: function addExclusiveChange(id, data) {\n    var self = this;\n    if (self.properties.hasExclusiveCheck) {\n      for (var xpath in data) {\n        var column = self.columns.find(function (el) {\n          return el.properties.xpath == xpath;\n        });\n        // Check if some of the changes from the edit or add form match with the exclusive controls in the grid\n        var value = data[xpath];\n        if (column && column.properties.isExclusive && value) {\n          self.exclusiveChanges[xpath] = {\n            xpath: xpath,\n            simpleXpath: xpath,\n            value: value,\n            key: id };\n\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Changes the max value for a cell\r\n      * @param key\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeMaxValue(argument);\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeMaxValue,\n        arguments: arguments });\n\n    }\n  },\n\n  /**\r\n      * Changes the min value for a cell\r\n      * @param key\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.changeMinValue(argument);\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.changeMinValue,\n        arguments: arguments });\n\n    }\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFailHandlerOnForm: function executeFailHandlerOnForm(error) {\n    var error_obj = error && error.responseText ? error.responseText : bizagi.util.getErrorFormatted(error);\n\n    if (typeof error_obj === \"undefined\" || error_obj && !error_obj.message) {\n      message = Object.assign({}, _typeof(error_obj) === \"object\" ? error_obj : {}, {\n        \"message\": bizagi.localization.getResource(\"workportal-general-error\") });\n\n    }\n\n    this.getFormContainer().failHandler(error_obj);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Tablet Render Grid Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the offline grid render class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\nbizagi.rendering.tablet.grid.extend(\"bizagi.rendering.tablet.grid.offline\", {}, {\n  /*\r\n                                                                                  *   Constructor\r\n                                                                                  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Fill default properties\n    var form = self.getFormContainer();\n    var properties = this.properties;\n    properties.data.originalRows = bizagi.clone(properties.data.rows);\n\n    properties.isTaskForm = form.properties.isTaskForm;\n    self.newRecords = {};\n    //Preload new lines previously added offline and prepare deletions\n    if (properties.editable === true) {\n      self[\"new-records\"] = properties[\"new-records\"] ? properties[\"new-records\"] : {};\n      self[\"deleted-records\"] = properties[\"deleted-records\"] ? properties[\"deleted-records\"] : {};\n    }\n    self.editedImages = properties[\"edited-images\"] ? properties[\"edited-images\"] : {};\n    self.offlineFiles = properties[\"offline-files\"] ? properties[\"offline-files\"] : {};\n\n    // Just apply display-type: vertical, align it to the left\n    properties.displayType = \"vertical\";\n    properties.labelAlign = \"left\";\n\n    if (properties.groupBy || properties.groupSummary) {\n      // Add warning\n      form.addWarning(self.getResource(\"render-tablet-warning-grid\"));\n    }\n  },\n\n  initProperties: function initProperties() {\n    var self = this;\n    self._super();\n    self.properties.rowsPerPage = 1000;\n  },\n\n  /*\r\n     *   Updates original value for some comparisons\r\n     */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    var properties = self.properties;\n    self.changes = [];\n    properties.data.originalRows = bizagi.clone(properties.data.rows);\n    properties[\"new-records\"] = undefined;\n    properties[\"edited-images\"] = properties[\"offline-files\"] = properties[\"deleted-records\"] = {};\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    self.initialLoadDone = false;\n\n    // Find component holder\n    self.grid = $(\">div\", control);\n\n    // Hide common label\n    self.getLabel().hide();\n\n    // Grid plugin\n    self.applyGridPlugin();\n\n    // Set initial data\n    if (properties.data) {\n\n      self.updateData(properties.data);\n\n      // Trigger change in order to start up the actions when the controls is ready\n      $.when(self.ready()).done(function () {\n        self.triggerRenderChange({ changed: false });\n      });\n    }\n\n    // Execute pending actions\n    self.initialLoadDone = true;\n\n    for (var i in self.pendingActions) {\n      self.pendingActions[i].method.apply(self, self.pendingActions[i].arguments);\n    }\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Do the same as the post-render            \n    self.postRender();\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this;\n    var properties = self.properties;\n    var grid = self.grid;\n    var mode = self.getMode();\n\n    // Build column metadata\n    var columns = self.buildColumnModel();\n\n    // Apply grid plugin\n    grid.bizagi_grid_tablet({\n      columns: columns,\n      title: properties.displayName,\n      isOfflineForm: this.isOfflineForm || false,\n      mode: self.getMode(),\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        pager: self.renderFactory.getTemplate(\"bizagi.grid.pager\"),\n        dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\"),\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.offline.buttons\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.offline.row.buttons\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.offline.cell.special\") },\n\n      actions: {\n        add: properties.allowAdd,\n        edit: properties.allowEdit && properties.withEditForm && properties.data != null,\n        remove: properties.allowDelete,\n        details: false,\n        inlineAdd: !properties.editable ? properties.inlineAdd : true,\n        allowMore: false,\n        enableXlsExport: false,\n        enablePdfExport: false,\n        hasTotalizer: false },\n\n      isValid: function isValid() {\n        return self.isValidGrid();\n      },\n      pageRequested: function pageRequested(ui) {\n        if (mode !== \"execution\") return;\n        self.fetchData(ui.page, ui.sortBy, ui.sortType);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        if (mode !== \"execution\") return;\n        self.triggerHandler(\"rowSelected\", { id: ui.key, data: ui });\n      },\n      addRow: function addRow(ui) {\n        if (mode !== \"execution\") return;\n        self.addRow();\n      },\n      editRow: function editRow(ui) {\n        if (mode !== \"execution\") return;\n        self.editRow(ui.key);\n      },\n      deleteRow: function deleteRow(ui) {\n        if (mode !== \"execution\") return;\n        self.deleteRow(ui.key);\n      },\n      saveAddedRows: function saveAddedRows(ui) {\n        self.saveInlineAddedRows(ui.keys);\n      },\n      beforeInlineAdd: function beforeInlineAdd() {\n        self.inlineAddDeferred = new $.Deferred();\n      },\n      afterInlineAdd: function afterInlineAdd(data) {\n        if (self.inlineAddDeferred) {\n          self.inlineAddDeferred.resolve();\n        }\n        if (data && data.businessKey)\n        self.triggerRenderChange({ key: data.businessKey });\n      },\n      cancelEdition: function cancelEdition(ui) {\n        self.removeNewRecords(ui);\n      },\n      removeNewRecords: function removeNewRecords(ui) {\n        self.removeNewRecords(ui);\n      } });\n\n  },\n\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n\n    self.dataReadyDeferred = new $.Deferred();\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).then(function (data) {\n      if (data) {\n        self.updateData(data);\n        self.triggerRenderChange({ changed: false });\n        self.dataReadyDeferred.resolve();\n      }\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  processChanges: function processChanges() {\n    var self = this;\n    var rowsList = [];\n    var data = self.properties.data;\n    // Save pending inline add rows\n    for (var id in self.changes) {\n      var sortArray = [];\n      for (var columnXpath in self.changes[id]) {\n\n        if (self.canColumnBeSent(id, columnXpath)) {\n          var columnNumber = self.getColumn(columnXpath).columnIndex - 1;\n          var value = self.changes[id][columnXpath];\n\n          if (typeof value === \"string\") {\n            if (value.match(/\\n/gm) !== null) {\n              value = value.replaceAll(\"\\n\", \"\\\\n\");\n            }\n          }\n\n          sortArray[columnNumber] = value;\n        }\n      }\n      //Fill columnds\n      for (var i = 0; i < self.columns.length; i++) {\n        sortArray[i] = sortArray[i] != undefined ? sortArray[i] : null;\n      }\n      //If new record store action data\n      if (self.newRecords[id]) {\n        sortArray.unshift(parseInt(id + ''));\n        sortArray.creationTimestamp = self.newRecords[id].creationTimestamp;\n        rowsList[rowsList.length] = sortArray;\n      }\n    }\n\n    rowsList = rowsList.sort(function (a, b) {\n      return a.creationTimestamp - b.creationTimestamp;\n    });\n\n    rowsList = rowsList.map(function (row) {\n      if (row.creationTimestamp) {\n        delete row.creationTimestamp;\n      }\n      return row;\n    });\n\n    return rowsList;\n  },\n\n  collectOfflineTaskData: function collectOfflineTaskData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var errorsMessage = [];\n    var data = self.properties.data;\n    var temporalNew = {};\n    //Editions in the grid\n    var editedImages = self.editedImages;\n    var offlineFiles = self.offlineFiles;\n    // Save pending inline add rows\n    for (var id in self.changes) {\n      var sortArray = [];\n      var currentChanges = {};\n      var newImages = {};\n      var newFiles = {};\n      for (var columnXpath in self.changes[id]) {\n\n        if (self.canColumnBeSent(id, columnXpath)) {\n          var columnNumber = self.getColumn(columnXpath).columnIndex - 1;\n          var value = self.changes[id][columnXpath];\n\n          if (typeof value === \"string\") {\n            if (value.match(/\\n/gm) !== null) {\n              value = value.replaceAll(\"\\n\", \"\\\\n\");\n            }\n          }\n\n          sortArray[columnNumber] = value;\n          var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\n          var columnValue = self.changes[id][columnXpath];\n          var value = columnValue && columnValue.value ? columnValue.value : columnValue;\n          if (editedImages[id] && editedImages[id][columnXpath]) {\n            delete editedImages[id][columnXpath].isChanged;\n            newImages[columnXpath] = editedImages[id][columnXpath];\n          } else\n          if (offlineFiles[id] && offlineFiles[id][columnXpath]) {\n            newFiles[columnXpath] = offlineFiles[id][columnXpath];\n          } else\n          {\n            //Changes are stored to delete them if the row is new, the rest of changes can be saved by xpath\n            renderValues[xpath] = value;\n            currentChanges[xpath] = value;\n          }\n        }\n      }\n      //If new record store action data\n      if (self.newRecords[id]) {\n        //Use - to avoid issues with possible xpaths in renderValues used both in new and deleted records       \n        var copyChanges = $.extend({}, self.changes[id]);\n        var addRowData = {\n          url: properties.addUrl,\n          idRender: properties.id,\n          xpath: properties.xpath,\n          xpathContext: properties.xpathContext,\n          contexttype: properties.contexttype,\n          idPageCache: properties.idPageCache,\n          submitData: copyChanges,\n          prepare: true,\n          idRow: parseInt(id + ''),\n          creationTimestamp: self.newRecords[id].creationTimestamp };\n\n        temporalNew[id] = addRowData;\n        for (change in currentChanges) {\n          delete renderValues[change];\n        }\n        for (image in newImages) {\n          delete copyChanges[image];\n          editedImages[id][image].isNew = true;\n        }\n        for (file in newFiles) {\n          delete copyChanges[file];\n          offlineFiles[id][file].isNew = true;\n        }\n        if (Object.keys(newImages).length > 0)\n        editedImages[id].isNew = true;\n        if (Object.keys(newFiles).length > 0)\n        offlineFiles[id].isNew = true;\n        var details = {};\n        details.idRow = parseInt(id + '');\n        details.isNew = true;\n        details.changes = self.changes[id];\n        addRowData.images = newImages;\n        addRowData.files = newFiles;\n        sortArray.push(details);\n\n      }\n    }\n\n    // The following code is needed because when a grid row was added and the user did not click on save, then rows array is not updated\n    self.saveInlineAddedRows();\n\n    // Get data\n    if (JSON.stringify(data.rows) !== JSON.stringify(data.originalRows) || properties[\"new-records\"] != undefined && temporalNew != properties[\"new-records\"]) {\n      renderValues[properties.xpath] = renderValues[properties.xpath] ? renderValues[properties.xpath] : {};\n      if (typeof data.rows !== \"undefined\") {\n        renderValues[properties.xpath].rows = self.processOldRows(data.rows);\n      }\n      if (self[\"deleted-records\"] && Object.keys(self[\"deleted-records\"]).length > 0)\n      renderValues[properties.xpath][\"deleted-records\"] = self[\"deleted-records\"];\n      if (temporalNew && Object.keys(temporalNew).length > 0)\n      renderValues[properties.xpath][\"new-records\"] = temporalNew;\n      if (editedImages && Object.keys(editedImages).length > 0)\n      renderValues[properties.xpath][\"edited-images\"] = editedImages;\n      if (offlineFiles && Object.keys(offlineFiles).length > 0)\n      renderValues[properties.xpath][\"offline-files\"] = offlineFiles;\n    }\n\n  },\n\n  /*\r\n     * Old Method that collects data only for Offline start forms and prepares data for AsyncWorkItem\r\n     */\n  collectOfflineStartData: function collectOfflineStartData(renderValues) {\n    var self = this;\n    var errorsMessage = [];\n    var internalRedersValues = [];\n    var properties = self.properties;\n    var data = self.properties.data;\n    // Save pending inline add rows\n    if (self.isValid(errorsMessage)) {\n      for (var id in self.changes) {\n        var sortArray = [];\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var columnNumber = self.getColumn(columnXpath).columnIndex - 1;\n            var value = self.changes[id][columnXpath];\n            if (typeof value === \"string\") {\n              if (value.match(/\\n/gm) !== null) {\n                value = value.replaceAll(\"\\n\", \"\\\\n\");\n              }\n            }\n            sortArray[columnNumber] = {\n              value: value,\n              xpath: columnXpath,\n              DataType: self.getColumn(columnXpath).properties.dataType };\n\n          }\n        }\n        if (typeof self.properties.data.rows !== \"undefined\" && self.properties.data.rows.length > 0) {\n          // Search row\n          var currentRow = [];\n          for (var i = 0; i < data.rows.length; i++) {\n            if (data.rows[i][0] == id) {\n              currentRow = data.rows[i];\n              // Delete current data\n              data.rows.splice(i, 1);\n              i--;\n              // Mixed data\n              currentRow = self.processRow(currentRow);\n              sortArray = $.extend(true, currentRow, sortArray);\n              break;\n            }\n          }\n        }\n        internalRedersValues[internalRedersValues.length] = sortArray;\n      }\n    }\n\n\n    // Get data\n    if (JSON.stringify(data.rows) !== JSON.stringify(data.originalRows) || internalRedersValues.length > 0) {\n      if (typeof data.rows !== \"undefined\" && internalRedersValues.length > 0) {\n        renderValues[properties.xpath].rows = $.merge($.merge([], self.processOldRows(data.rows)),\n        internalRedersValues);\n      } else if (typeof data.rows !== \"undefined\" && data.rows.length > 0) {\n        renderValues[properties.xpath].rows = self.processOldRows(data.rows);\n      } else {\n        renderValues[properties.xpath].rows = internalRedersValues;\n      }\n    }\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    self.collectOfflineTaskData(renderValues);\n  },\n\n  /*\r\n     *   Delete field id array objects\r\n     */\n  processOldRows: function processOldRows(rows) {\n    var newRows = [];\n    var tempRows = rows;\n    var self = this;\n    for (var col = 0, leng = tempRows.length; col < leng; col++) {\n      var temp = tempRows[col];\n      newRows[col] = $.grep(temp, function (n, i) {\n        return i > 0;\n      });\n\n      var details = {};\n      details.idRow = parseInt(temp[0] + '');\n      details.isNew = self.newRecords[temp[0]] ? true : false;\n      details.changes = self.changes[temp[0]] ? self.changes[temp[0]] : {};\n      newRows[col].push(details);\n    }\n\n    return newRows;\n  },\n  /*\r\n     *   Delete field id array\r\n     */\n  processRow: function processRow(row) {\n    return $.grep(row, function (n, i) {\n      return i > 0;\n    });\n  },\n  /*\r\n     *   Customizes the content drawing inside the cell\r\n     */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n\n    if (column.key) return value;\n\n    if (_typeof(value) === \"object\" && value !== null && !isNewRow) {\n      value = value.hasOwnProperty(\"value\") ? value.value : value;\n    }\n\n    // Get render column                \n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n    var cellOverride = self.getCellOverride(key, column.index - 1);\n\n    self.newRecords = self.newRecords || {};\n\n    // Get cell properties\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) self.cellMetadata[key][columnIndex] = {};\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.properties;\n\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Apply overrides from cellOverrides\n    visible = cellOverride.visible;\n    editable = properties.editable ? cellOverride.editable : false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) editable = true;\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (key === \"summary\") editable = false;\n\n    // Prepare value for upload column\n    if (renderColumn.properties.type === \"columnUpload\") {\n      if (self.offlineFiles[key] && self.offlineFiles[key][renderColumn.properties.xpath]) {\n        value = self.offlineFiles[key][renderColumn.properties.xpath].value;\n      } else\n      if (value && Array.isArray(value) && value.length > 0) {\n        value = self.dataService.database.convertUploadOnlineValueInOfflineValue(value);\n      }\n    }\n\n    renderColumn.properties.displayType = 'value';\n    renderColumn.setValue(key, value);\n    renderColumn.setSurrogateKey(key);\n    renderColumn.properties.data = renderColumn.properties.data || [];\n\n    // Column search\n    if (renderColumn.properties.type === \"columnSearch\" && value != null) {\n      for (var i = 0, len = renderColumn.properties.data.length; i < len; i++) {\n        if (renderColumn.properties.data[i].id == value) {\n          value = { id: renderColumn.properties.data[i].id, label: renderColumn.properties.data[i].value };\n        }\n      }\n    }\n\n    if ((renderColumn.properties.type === \"columnCombo\" || renderColumn.properties.type === \"columnList\") && value != null) {//|| renderColumn.properties.type == \"columnRadio\"\n      for (var i = 0, len = renderColumn.properties.data.length; i < len; i++) {\n        if (renderColumn.properties.data[i].id == value) {\n          value = [[renderColumn.properties.data[i].id, renderColumn.properties.data[i].value]];\n        }\n      }\n    }\n\n    // Column text\n    if (renderColumn.properties.type === \"columnText\" && bizagi.util.isEmpty(value) && value != null) {\n      value = \"\";\n    }\n\n    if (renderColumn.properties.type === \"columnImage\") {\n      if (self.editedImages[key] && self.editedImages[key][renderColumn.properties.xpath]) {\n        renderColumn.getDecorated(key).properties.isChanged = self.editedImages[key][renderColumn.properties.xpath].isChanged;\n      }\n    }\n\n    if (renderColumn.properties.type === \"columnUpload\") {\n      renderColumn.getDecorated(key).properties.xpathContext = self.properties.xpath + self.buildCellXpathFilter(key);\n    }\n\n    // Do the render\n    if (visible) {\n      if (editable) {\n        return self.drawEditableCell(renderColumn, properties, key, value, isNewRow);\n      } else {\n        return self.drawReadonlyCell(renderColumn, properties, key, value);\n      }\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n     *   Draws the editable version for the cell\r\n     */\n  drawEditableCell: function drawEditableCell(renderColumn, properties, key, value, isNewRow) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Set editable\n    var originalEditable = renderColumn.properties.editable;\n    renderColumn.properties.editable = true;\n\n    // Fix problem when required property lose\n    renderColumn.overrideProperties({ required: properties.required });\n\n    // Render cell\n    $.when(renderColumn.render(key, value)).done(function (cell) {\n      // Register array with new records, just when this is a new-record\n      if (isNewRow && !self.newRecords[key]) {\n        self.newRecords[key] = { creationTimestamp: Date.now() };\n        self.changes[key] = {};\n      }\n\n      // convert all row visible\n      for (var j = 0; j < self.columns.length; j++) {\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, j).visible = self.getCellOverride(key, j).visible != undefined ? self.getCellOverride(key, j).visible : true;\n      }\n\n      // Add change handler  \n      renderColumn.getDecorated(key).bind(\"renderchange\", function (render) {\n        self.onCellChange(renderColumn, cell, key);\n      });\n\n      // Resolve cell\n      defer.resolve(cell);\n    });\n\n    // Restore editable\n    renderColumn.properties.editable = originalEditable;\n\n    // Return promise\n    return defer.promise();\n  },\n\n  /*\r\n     *   Draws the readonly version for the cell\r\n     */\n  drawReadonlyCell: function drawReadonlyCell(renderColumn, properties, key, value) {\n    var result = \"\";\n\n    // Use totalizer format when printing summary row\n    if (key === \"summary\") {\n      var originalFormat = renderColumn.properties.textFormat;\n      if (renderColumn.properties.totalize) {\n        renderColumn.properties.textFormat = renderColumn.properties.totalize.format;\n      }\n\n      result = renderColumn.renderSummary(key, value);\n\n      // Restore column format\n      renderColumn.properties.textFormat = originalFormat;\n    } else {\n      result = renderColumn.renderReadOnly(key, value);\n    }\n    return result;\n  },\n\n  /*\r\n     *   Defines the handler when a cell changes its value\r\n     */\n  onCellChange: function onCellChange(renderColumn, cell, key) {\n\n    var self = this;\n    var _value = renderColumn.getValue(key);\n    var compositeValue = renderColumn.getCompositeValue(key);\n\n    if (renderColumn.properties.type === \"columnDate\" && renderColumn.data.properties.showTime == true) {\n\n      if (!bizagi.util.isEmpty(_value)) {\n        var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, true);\n        _value = bizagi.util.dateFormatter.formatInvariant(date, true);\n      } else if (_value === \"\") {\n        _value = \"\";\n      }\n    } else if (renderColumn.properties.type === \"columnDate\") {\n\n      if (!bizagi.util.isEmpty(_value)) {\n        var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, false);\n        date.setHours(0, 0, 0, 0);\n        _value = bizagi.util.dateFormatter.formatInvariant(date, true);\n      } else if (_value === \"\") {\n        _value = \"\";\n      }\n    }\n    if (renderColumn.properties.type === \"columnImage\") {\n      var xpath = self.properties.xpath + self.buildCellXpathFilter(key) + \".\" + renderColumn.properties.xpath;\n      self.editedImages = self.editedImages || {};\n      self.editedImages[key] = self.editedImages[key] || {};\n      self.editedImages[key][renderColumn.properties.xpath] = {\n        id: key,\n        columnXpath: renderColumn.properties.xpath,\n        renderId: renderColumn.properties.id,\n        gridXpath: self.properties.xpath,\n        fullXpath: xpath,\n        value: _value,\n        offlineId: renderColumn.getDecorated(key).buildOfflineImageId(),\n        name: self.dataService.fileService.getOfflineImageName(_value),\n        isChanged: true };\n\n    }\n    if (renderColumn.properties.type === \"columnUpload\") {\n      var xpath = self.properties.xpath + self.buildCellXpathFilter(key) + \".\" + renderColumn.properties.xpath;\n      self.offlineFiles[key] = self.offlineFiles[key] || {};\n      self.offlineFiles[key][renderColumn.properties.xpath] = {\n        id: key,\n        columnXpath: renderColumn.properties.xpath,\n        renderId: renderColumn.properties.id,\n        gridXpath: self.properties.xpath,\n        fullXpath: xpath,\n        value: _value };\n\n\n    }\n\n    if (self.properties.allowEdit || self.grid.bizagi_grid_tablet(\"isNewRecord\", key)) {\n      var trigger = self.grid.bizagi_grid_tablet(\"isNewRecord\", key) ? false : true;\n      self.collectGridChange({\n        id: key,\n        xpath: renderColumn.properties.xpath,\n        value: _value,\n        compositeValue: compositeValue,\n        columnIndex: renderColumn.columnIndex,\n        trigger: trigger,\n        dataType: renderColumn.properties && renderColumn.properties.type });\n\n    }\n\n    // Update change in grid's component data\n    self.grid.bizagi_grid_tablet(\"changeCellValue\", key, renderColumn.columnIndex, _value);\n\n    // If the column has totalizers then we need to refresh the summary\n    if (renderColumn.properties.totalize && renderColumn.properties.totalize.operation) {\n      self.grid.bizagi_grid_tablet(\"refreshSummary\", renderColumn.columnIndex);\n    }\n  },\n  /*\r\n     *   Collect a single cell change made in the grid to send the data when the user saves the form\r\n     */\n  collectGridChange: function collectGridChange(params) {\n    var self = this;\n    params = params || {};\n    var id = params.id;\n    var xpath = params.xpath;\n    var value = params.value;\n    var trigger = typeof params.trigger !== \"undefined\" ? params.trigger : true;\n\n    self.changes[id] = self.changes[id] || {};\n    self.changes[id][xpath] = value;\n\n    if (trigger)\n    self.triggerRenderChange({ key: id, column: xpath });\n  },\n  /*\r\n     *   Executes when the cell is ready and inserted into the DOM\r\n     */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    // Available editable\n    isNewRow = true;\n    bizagi.rendering.tablet.grid.prototype.onCellReady.apply(this, arguments);\n  },\n\n  /**\r\n      *  Adds a row to the grid\r\n      */\n  addRow: function addRow() {\n    bizagi.showMessageBox(bizagi.localization.getResource(\"render-tablet-error-userfield\"), bizagi.localization.getResource(\"render-tablet-error-userfield\"));\n  },\n\n  /**\r\n      *  Edits a row in the grid\r\n      */\n  editRow: function editRow(id) {\n  },\n\n  /**\r\n      *  Deletes a row to the grid\r\n      */\n  deleteRow: function deleteRow(id) {\n    var self = this;\n\n    if (!id || id == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).done(function () {\n      // Save before deletion\n      self.saveInlineAddedRows();\n\n      // Do a grid record deletion\n      $.when(self.submitDeleteRequest(id)).\n      done(function () {\n        // Reload grid\n        self.fetchData();\n\n        // Trigger the event\n        //'key' must be included to trigger a single call to actions and validations\n        //line 310 bizagi.command.controllers.action\n        self.triggerRenderChange({ rowDeleted: true, changed: false, key: id });\n      });\n    });\n  },\n\n  /**\r\n      *  Edits the entire row (inline) in another slide\r\n      */\n  editInline: function editInline(id) {\n  },\n  /**\r\n      * Retrieve the data for the new rows and push them into the server\r\n      * @param keys\r\n      * @param bRefresh\r\n      */\n  saveInlineAddedRows: function saveInlineAddedRows(keys, bRefresh) {\n    var self = this;\n\n    // Update data\n    self.updateRowsFromChanges();\n    self.updateNewRowsAsSaved();\n  },\n\n  /**\r\n      * Update rows as saved\r\n      */\n  updateNewRowsAsSaved: function updateNewRowsAsSaved() {\n    var self = this;\n\n    if (!bizagi.util.isEmpty(self.newRecords)) {\n      self.triggerGridPluginHandler(\"hideHeaderButtons\");\n\n      Object.keys(self.newRecords || []).\n      forEach(function (key) {\n        self.setRowAsSaved(key);\n      });\n    }\n  },\n\n  updateRowsFromChanges: function updateRowsFromChanges() {\n    var self = this;\n    var rows = self.processChanges();\n\n    if (!bizagi.util.isEmpty(rows)) {\n      self.properties.data.rows = self.mergeArray(self.properties.data.rows, rows);\n    }\n  },\n\n  mergeArray: function mergeArray(a, b) {\n    var self = this;\n    var result = bizagi.clone(a);\n    b.forEach(function (row) {\n      var key = row[0];\n      var rowToModify = self.getRowByKey(result, key);\n      if (bizagi.util.isEmpty(rowToModify))\n      result.push(row);else\n\n      rowToModify = self.mergeRow(rowToModify, row);\n    });\n    return result;\n  },\n\n  getRowByKey: function getRowByKey(a, id) {\n    var result = a.filter(function (r) {return r[0] == id;});\n    if (result.length == 0) return null;\n    return result[0];\n  },\n\n  mergeRow: function mergeRow(rowA, rowB) {\n    rowB.forEach(function (item, i) {\n      if (item != null && item != undefined)\n      rowA[i] = item;\n    });\n    return rowA;\n  },\n\n  /*\r\n     * Removes invalid records \r\n     */\n  removeNewRecords: function removeNewRecords(ui) {\n    var self = this;\n\n    if (ui && ui.keys) {\n      $.each(ui.keys, function (_, key) {\n        if (self.newRecords[key]) {\n          delete self.newRecords[key];\n          delete self.changes[key];\n          delete self.offlineFiles[key];\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      var result = properties.overrideGetRemoteData(params);\n      return result != null ? result.promise() : null;\n    }\n\n    // Default ajax call\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    var data = properties.data;\n\n    // Resolve with fetched data    \n    properties.page = data.page;\n    properties.records = data.records;\n    properties.totalPages = data.totalPages;\n\n    // Check RTL\n    if (self.isRTL()) {\n      data.rows = self.changeOrderData(data.rows);\n    }\n\n    defer.resolve(data);\n\n    return defer.promise();\n  },\n  /*\r\n     *   Submits a grid delete record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var data = self.properties.data;\n    var statusAction = false;\n    // Found row by id\n    var currentRow = [];\n    for (var i = 0, length = data.rows.length; i < length; i++) {\n      if (data.rows[i][0] == id) {\n        currentRow = data.rows[i];\n\n        data.rows.splice(i, 1);\n        i--;\n\n        data.records--;\n        statusAction = true;\n        var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n        var delInfo = {\n          url: properties.deleteUrl,\n          idRender: properties.id,\n          xpath: xpath,\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache,\n          contexttype: properties.contextType,\n          prepare: true };\n\n        self[\"deleted-records\"][id] = delInfo;\n\n        delete self.newRecords[id];\n        delete self.editedImages[id];\n        delete self.offlineFiles[id];\n        delete self.changes[id];\n\n        break;\n      }\n    }\n\n    return data.rows;\n  },\n\n  isValidGrid: function isValidGrid() {\n    var self = this;\n    var errorsMessage = [];\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController !== \"undefined\")\n    form.validationController.clearValidationMessages();\n\n    self.isValid(errorsMessage);\n\n    if (errorsMessage.length > 0) {\n      if (typeof form.validationController !== \"undefined\") {\n        for (var index = 0; index < errorsMessage.length; index++) {\n          form.validationController.showValidationMessage(errorsMessage[index].message, errorsMessage[index].xpath);\n        }\n      }\n\n      return false;\n    } else {\n      return true;\n    }\n  },\n\n  /*\r\n      *   Returns the row indexes for the data\r\n      */\n  getIndexes: function getIndexes() {\n    var self = this;\n    var data = self.mergeArray(self.properties.data.rows, self.getDataNewRows());\n    return $.map(data, function (item, i) {\n      return item[0];\n    });\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Tablet Render Search Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi UI Forms\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the Search render class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.search\", bizagi.rendering.search.prototype);\n// Extends itself\nbizagi.rendering.tablet.search.extend(\"bizagi.rendering.tablet.search\", {\n  ADVANCED_SEARCH_ID: -1,\n  ADVANCED_ADDITION_ID: -2,\n  CLEAR_SEARCH_ID: -3,\n  NO_RESULTS_SEARCH_ID: -4,\n  DEFAULT_SEARCH_ID: \"\",\n  SEARCH_MIN_LENGTH: 3,\n  SEARCH_DELAY: 250,\n  SEARCH_MAX_RECORDS: 50 },\n{\n\n  /**\r\n   * Update or init the element data\r\n   * @param {} data submitData\r\n   * @returns {}\r\n   */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: this });\n    this.properties.submitOnChange = this.isOfflineForm ? false : this.properties.submitOnChange;\n\n    // Store reference of all ajax request in order to run only one instance of them\n    this.deferredReference = null;\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    var value = this.getDisplayValue();\n    var label = value.label || value.value;\n\n    if (typeof label != \"undefined\") {\n      if (_typeof(label) == \"object\")\n      label = label.join(\" - \");\n    } else {\n      label = \"\";\n    }\n\n    if (typeof label == \"string\") {\n      if (value.additionallabel) {\n        label += \" - \" + value.additionallabel;\n      }\n\n      label = bizagi.util.sanitizeHTML(label);\n    }\n\n    return $.fasttmpl(template, {\n      value: label,\n      editable: this.properties.editable });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      * @returns {}\r\n      */\n  postRender: function postRender() {\n    this.searchInput = $(\".bz-input-icon\", this.getControl());\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.searchInput = $(\".bz-input-icon\", this.getControl());\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    // Select new item\n    $(\".bz-input-icon\", control).on(\"click\", function () {\n      if (!self.properties.advancedSearch || self.isOfflineForm) {\n        self._simplySearchView();\n      } else {\n        self._advanceSearchView();\n      }\n    });\n\n    $(\".bz-icn--clear\", control).bind(\"click\", function (event) {\n      // Change display icon\n      $(\".bz-input-icon\", control).addClass(\"bz-input-icon--empty\");\n\n      // Call clean data\n      self.cleanData();\n\n      // Submit info to server\n      self.readyActionExecution().done(function () {\n        if (self.properties.submitOnChange) {\n          self.submitData();\n        }\n      });\n\n      event.stopPropagation();\n    });\n\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new suggest control\r\n      * @param {} inputContainer\r\n      * @returns {}\r\n      */\n  configureModalViewHandlers: function configureModalViewHandlers(modalView) {\n    var self = this;\n\n    // Configuring list as a selectable element\n    self.modalViewList = $(\".bz-list\", modalView.content);\n\n    // Suggest\n    var suggestFilter = bizagi.util.debounce(function (value) {\n      self.autoCompleteSearchResults($.trim(value));\n    }, self.Class.SEARCH_DELAY);\n\n    $(\"[data-action=close]\", modalView.header).bind(\"click\", function () {\n      modalView.close();\n    });\n\n    var $clearButton = $(\".bz-modal-view__clear\", modalView.header);\n    var $searchInput = $(\".bz-modal-view__search\", modalView.header);\n\n    $clearButton.bind(\"click\", function () {\n      $searchInput.val(\"\").trigger(\"clean\");\n    });\n\n    // Setting the initial selected display value\n    $(\".bz-list\", modalView.content).on(\"click\", \"li\", function () {\n      var item = $.data(this).item;\n\n      if (!item || item && item.id == self.Class.NO_RESULTS_SEARCH_ID)\n      return;\n\n      self.selectItem(item);\n\n      modalView.close();\n    });\n\n    // Filtering list\n    $searchInput.bind(\"clean keyup\", function () {\n      if (this.value == \"\") {\n        $clearButton.removeClass(\"bz-modal-view__clear--visible\");\n      } else {\n        $clearButton.addClass(\"bz-modal-view__clear--visible\");\n      }\n      suggestFilter(this.value);\n    }).on(\"focus\", function () {\n      modalView.header.addClass(\"bz-modal-view__header--active\");\n    }).on(\"blur\", function () {\n      modalView.header.removeClass(\"bz-modal-view__header--active\");\n    });\n  },\n\n\n  /**\r\n      * Opens the search slide\r\n      * @private\r\n      */\n  _advanceSearchView: function _advanceSearchView() {\n    var self = this;\n    var properties = self.properties;\n    var formSearchParams = $.extend({}, self.getParams(), {\n      container: self.getFormContainer().container,\n      title: properties.displayName || \"\",\n      allowNew: properties.allowNew });\n\n\n    // Create slide search object\n    var searchForm = new bizagi.rendering.tablet.slide.searchForm(\n    self.dataService,\n    self.renderFactory,\n    properties.searchForms, {\n      allowFullSearch: properties.allowFullSearch,\n      maxRecords: properties.maxRecords,\n      idRender: properties.id,\n      navigation: self.getParams().navigation,\n      idPageCache: properties.idPageCache,\n      orientation: properties.orientation || \"ltr\",\n      editable: properties.editable },\n    formSearchParams);\n\n    // Render the search form\n    searchForm.render({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache }).\n    done(function (item) {\n      // Set data\n      self.setValue(item);\n\n      self.readyActionExecution().done(function () {\n        var form = self.getFormContainer();\n\n        if (!self.properties.submitOnChange) {\n          $.when(form.submitData()).done(function () {\n            self.refreshControl();\n          });\n        }\n      });\n    });\n  },\n\n  /**\r\n      * Simply search autocomplete\r\n      * @private\r\n      */\n  _simplySearchView: function _simplySearchView() {\n    var self = this;\n    var content = self.getContentTemplate();\n\n    self.searchInput.mobileView({\n      customHeader: $.fasttmpl(self.renderFactory.getTemplate(\"modal-header-search\"), {}),\n      orientation: self.properties.orientation || \"\",\n      contentTemplate: content,\n      style: \"width: 80%; height: 70%\",\n      close: function close() {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      },\n      afterOpenAnimation: function afterOpenAnimation(event) {\n        $(\".bz-modal-view__search\", event.view.header).focus();\n      },\n      open: function open(event) {\n        self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      configureActions: function configureActions(context) {\n        self.configureModalViewHandlers(context);\n      } });\n\n  },\n\n  autoCompleteSearchResults: function autoCompleteSearchResults(currentValue) {\n    var self = this;\n\n    $.when(self.processRequest({ term: currentValue })).\n    done(function (response) {\n\n      self.modalViewList.find(\"li\").remove();\n\n      for (var i = 0, length = response.length; i < length; i++) {\n        var searchItem = self.renderSearchItem(response[i]);\n\n        searchItem.appendTo(self.modalViewList);\n      }\n    });\n  },\n\n  renderSearchItem: function renderSearchItem(item) {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"search.item\");\n\n    var searchItem = $.tmpl(template, {\n      id: item.id,\n      label: item.label,\n      value: item.value });\n\n\n    searchItem.data(\"item\", item);\n\n    return searchItem;\n  },\n\n  processRequest: function processRequest(req) {\n    var self = this;\n    var properties = self.properties;\n    var deferred = new $.Deferred();\n\n    // Create array for response objects\n    var suggestions = [];\n\n    if (self.properties.allowSuggest && req.term.length >= self.properties.searchLength) {\n\n      // Update term property to reflect the search\n      properties.term = req.term;\n\n      var getSuggestData = self.isOfflineForm ? self.getOfflineData() : self.getData();\n\n      // Cancel previous request in order to improve the performance\n      if (self.deferredReference && typeof self.deferredReference.reject === \"function\" && self.deferredReference.state() !== \"resolved\") {\n        self.deferredReference.reject({ hideStatus: true });\n      }\n\n      self.deferredReference = getSuggestData.done(function (data) {\n        if (data && data.length > 0) {\n          data = data.slice(0, properties.maxRecords);\n\n          if (data.length > self.Class.SEARCH_MAX_RECORDS) {\n            data = data.slice(0, self.Class.SEARCH_MAX_RECORDS);\n\n            suggestions.push({\n              id: self.Class.NO_RESULTS_SEARCH_ID,\n              label: self.getResource(\"render-search-maximum-records-allowed\"),\n              value: \"\" });\n\n\n\n          } else {\n            data = data.slice(0, properties.maxRecords);\n          }\n\n          // Default value\n          suggestions.push({\n            id: self.Class.DEFAULT_SEARCH_ID,\n            label: self.getResource(\"render-combo-empty-value\"),\n            value: \"\" });\n\n\n          $.each(data, function (i, val) {\n            if (properties.maxRecords === 0 || i < properties.maxRecords) {\n              var parseValue = bizagi.util.performTermMatches(val.value, req.term);\n\n              suggestions.push({ id: val.id, label: parseValue, value: val.value });\n            }\n          });\n\n        } else {\n          suggestions.push({\n            id: self.Class.NO_RESULTS_SEARCH_ID,\n            label: self.getResource(\"render-grid-no-records\"),\n            value: \"\" });\n\n        }\n\n        deferred.resolve(suggestions);\n\n      }).fail(function () {\n        deferred.reject();\n      });\n    } else {\n      deferred.resolve(suggestions);\n    }\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Sets the value to show and calls the method to sets the control value\r\n      * @param {object} value\r\n      * @param {int} value.id\r\n      * @param {string} value.label\r\n      * @param {string=} value.additionallabel\r\n      * @example\r\n      *   value = {\r\n      *     id: 123,\r\n      *     label: \"xx\",\r\n      *     additionallabel: \"yyyy\"\r\n      *   }\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var label = \"\";\n\n    value = self.mapValue(value);\n\n    if (value !== null && typeof value !== \"undefined\" && typeof value.id !== \"undefined\") {\n      if (value.additionallabel && value.label) {\n        label = value.label + \" - \" + value.additionallabel;\n      } else if (value.label) {\n        label = value.label;\n      } else {\n        label = \"\";\n      }\n\n      var inputText = self.searchInput.find(\"input\");\n      inputText.val(label);\n      inputText.attr(\"id\", value.id);\n\n      if (value.id !== \"\" && self.properties.allowClear) {\n        $(\".bz-input-icon\", self.getControl()).removeClass(\"bz-input-icon--empty\");\n      }\n\n      if (self.properties.editable) {\n        self.setValue(value, true);\n      }\n    }\n  },\n\n  /**\r\n      * on the tablet only sends the id to submit in the tablet it send the id and the value\r\n      * @returns {}\r\n      */\n  submitData: function submitData() {\n    var self = this;\n    var data = {};\n\n    // Add current data\n    data[self.properties.xpath] = self.getValue();\n\n    // Executes submit on change\n    if (self.properties.submitOnChange && data[self.properties.xpath].id != undefined)\n    self.submitOnChange(data, true);\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * @returns {}\r\n      */\n  cleanData: function cleanData() {\n    var value = { id: \"\", value: \"\" };\n\n    if (bizagi.util.isEmpty(this.value))\n    value = {};\n\n    this.setValue(value);\n    this.setDisplayValue(value);\n  },\n\n  getContentTemplate: function getContentTemplate() {\n    var template = this.renderFactory.getTemplate(\"search.items\");\n    var content = $.fasttmpl(template, {});\n\n    return $.trim(content);\n  },\n\n  selectItem: function selectItem(item) {\n    var self = this;\n    var previousValue = self.hasValue();\n    var label = Array.isArray(item.value) ? item.value.join(\" - \") : item.value;\n\n    self.setDisplayValue({ id: item.id, label: label });\n\n    if (self.properties.allowClear) {\n\n      if (item.id === self.Class.DEFAULT_SEARCH_ID) {\n        self.searchInput.find(\".bz-search__clear\").addClass(\"bz-search--hidden\");\n        self.searchInput.find(\".bz-search__icon\").removeClass(\"bz-search--hidden\");\n      } else {\n        if (!previousValue && item.id !== self.Class.DEFAULT_SEARCH_ID) {\n          self.searchInput.find(\".bz-search__clear\").removeClass(\"bz-search--hidden\");\n          self.searchInput.find(\".bz-search__icon\").addClass(\"bz-search--hidden\");\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Get offline data for request\r\n      * @param request\r\n      */\n  getOfflineData: function getOfflineData() {\n    var self = this;\n    var dataList = self.properties.data || [];\n    var filter = (self.properties.term || \"\").toLowerCase();\n\n    return $.when(filter.startsWith(\"%%\") ? dataList : dataList.filter(function (item) {\n      var value = item && item.value ? item.value : \"\";\n      if (_typeof(value) === \"object\") {\n        value = value.toString();\n      }\n      return value.toLowerCase().indexOf(filter) > -1;\n    }));\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Tablet Render list Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the list render class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.list\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.tablet.list.extend(\"bizagi.rendering.tablet.list\", bizagi.rendering.list.prototype);\n// Extends itself\nbizagi.rendering.tablet.list.extend(\"bizagi.rendering.tablet.list\", {}, {\n\n  /*\r\n                                                                            *   Template method to implement in each children to customize each control\r\n                                                                            */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"list\");\n\n    return $.fasttmpl(template, {\n      editable: this.properties.editable,\n      value: this.getDisplayValue() });\n\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Prevent call base\n  },\n\n  /**\r\n      * Add event handlers to the combo control\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.getMode() !== \"execution\") {\n      return;\n    }\n\n    $(\".bz-form-list\", control).bind(\"click\", function () {\n\n      $(this).mobileView({\n        customHeader: $.fasttmpl(self.renderFactory.getTemplate(\"modal-header-search\"), {}),\n        displayName: self.properties.displayName || \"\",\n        orientation: self.properties.orientation || \"\",\n        contentTemplate: \"\",\n        style: \"width: 80%; height: 70%\",\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        },\n\n        open: function open() {\n          self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n\n        configureActions: function configureActions(context) {\n          $.when(self.renderCombo({})).done(function (list) {\n            $(\".bz-modal-view__content\", context.content).html(list);\n            self.configureModalViewHandlers(context);\n          });\n        } });\n\n    });\n\n  },\n\n  processComboData: function processComboData(data) {\n    var self = this;\n    data.forEach(function (value) {\n      self.validateValue(value);\n    });\n  },\n\n  /**\r\n      * Setting the display value, always you call a setDisplayValue yor are performinng a setValue under the hood.\r\n      * */\n  setDisplayValue: function setDisplayValue(value) {\n    var comboValue;\n    var control = this.getControl();\n\n    value = this.mapValue(value);\n\n    if (value && _typeof(value) === \"object\" && typeof value.label !== \"undefined\") {\n\n      if (value.label !== \"\" && !bizagi.util.isNumeric(value.label)) {\n        comboValue = value.label;\n      } else {\n        var selected = this.findDataValueById(value.value);\n        comboValue = selected ? selected.value : \"\";\n      }\n\n      if ($.isArray(comboValue)) {\n        comboValue = comboValue.join(\" - \");\n      }\n\n      value = { \"id\": value.id, \"value\": comboValue };\n    }\n\n    $(\"input\", control).val(this.formatItem(value.value));\n\n    //Set Value\n    this.selectedValue = value;\n    this.setValue(value);\n  },\n\n  /**\r\n      * Set the handlers for the modal elements\r\n      * @param {kendoModalObject} context full modal object\r\n      */\n  configureModalViewHandlers: function configureModalViewHandlers(context) {\n    var self = this;\n\n    $(\".bz-list__item\", context.content).on(\"click\", function () {\n      var valueObjet = {\n        \"id\": $(this).data(\"value\"),\n        \"value\": $(this).text() };\n\n\n      if (valueObjet.id == \"\") {\n        valueObjet.value = \"\";\n      }\n\n      self.setDisplayValue(valueObjet);\n      self.trigger(\"select\", [valueObjet, false]);\n      context.close();\n    });\n\n    var $elementsList = $(\".bz-list li\", context.content);\n    var $clearButton = $(\".bz-modal-view__clear\", context.header);\n    var $searchInput = $(\".bz-modal-view__search\", context.header);\n\n    $(\"[data-action=close]\", context.header).bind(\"click\", function () {\n      context.close();\n    });\n\n    $clearButton.bind(\"click\", function () {\n      $searchInput.val(\"\").trigger(\"change\");\n    });\n    // Filtering list\n    $searchInput.bind(\"change keyup\", function () {\n      if (this.value == \"\") {\n        $clearButton.removeClass(\"bz-modal-view__clear--visible\");\n      } else {\n        $clearButton.addClass(\"bz-modal-view__clear--visible\");\n      }\n      self.filterList(this.value, $elementsList);\n    }).focus();\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * @returns {}\r\n      */\n  filterList: function filterList(search, $li) {\n\n    $li.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = search.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n  },\n\n  /**\r\n      * Print the list of elements to show in the modal\r\n      * @param {object} data list of elements to print\r\n      */\n  renderComboTemplate: function renderComboTemplate(data) {\n    var template = this.renderFactory.getTemplate(\"list-items\");\n    var value = this.getValue();\n    value = value !== null && typeof value !== \"undefined\" ? value : { \"id\": \"\", \"value\": \"\" };\n\n    return $.fasttmpl(template, {\n      \"items\": data,\n      \"selectedId\": value.id,\n      \"hasItems\": data.length > 0 },\n    {\n      \"validateItem\": this.validateValue });\n\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return this.properties.editable ? $(\"input\", $context) : $(\".readonly-control\", $context);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Column Decorator Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will redefine the column decorator class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.combo\", {}, bizagi.rendering.columns.combo.prototype);\n// Extends itself\nbizagi.rendering.tablet.columns.combo.extend(\"bizagi.rendering.tablet.columns.combo\", {}, {\n  /*\r\n                                                                                            *   Sets the internal value\r\n                                                                                            */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    // Check is offline form\t    \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    if (isOfflineForm && (typeof value == \"number\" || typeof value == \"string\")) {\n      var newValue = _typeof(self.properties.data) == \"object\" ? self.properties.data.find(function (item) {return item.id == value;}) : value;\n\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = value;\n    } else if (self.properties.type == \"columnRadio\") {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value;\n    } else if (value && value.length > 0) {\n\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {return i != 0;}) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (value && typeof value == \"number\") {\n      self._super(surrogateKey, value);\n    } else if (isOfflineForm && value !== null && _typeof(value) === \"object\" && value.value) {\n      self._super(surrogateKey, value.value);\n      decorated.selectedValue = value.value;\n    } else {\n      // Set null values when the entry array is null\n      self._super(surrogateKey, null);\n      decorated.selectedValue = \"\";\n    }\n  } });","/**\r\n *   Name: Bizagi Tablet slide view implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.tablet.slide.view\", {}, {\n  /* CONSTRUCTOR\r\n                                                            =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n    self.slideFormDeferred = new $.Deferred();\n\n    self.container = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n  },\n\n  buttons: [],\n\n  processFormButtons: function processFormButtons(form) {\n    var self = this;\n\n    var onSaveClick = function onSaveClick() {\n      if (form) {\n        // Perform validations\n        if (form.validateForm()) {\n\n          // Collect data\n          var data = {};\n          form.collectRenderValues(data);\n\n          if (self.slideFormParams.allowGetOriginalFormValues) {\n            data.formValues = form.children;\n          }\n\n          // Add page cache for this form\n          data.idPageCache = form.getPageCache();\n\n          // Call user callback\n          if (self.slideFormParams.onSave) {\n            $.when(self.slideFormParams.onSave(data)).\n            done(function (result) {\n              if (!result || result === true || result.type === \"success\") {\n                // Close slide\n                self.goBack();\n\n                // Resolve deferred\n                self.slideFormDeferred.resolve(data);\n\n              } else if (result.type === \"validationMessages\") {\n                // Add validation messages\n                form.addValidationMessage(result.messages);\n              } else if (result.type === \"error\") {\n                // Add error messages\n                form.addErrorMessage(result.message);\n              }\n            }).fail(function (dataFail) {\n\n              var message = dataFail.responseText ? dataFail.responseText : typeof dataFail === \"string\" ? dataFail : dataFail.toString();\n\n              // Convert String to object\n              if (typeof message === \"string\") {\n                try {\n                  message = JSON.parse(message).message;\n                } catch (e) {\n                  message = message.match(/\"message\":(.*)\",/)[0];\n                  message = message.substr(11, message.length - 13);\n                }\n\n              } else if (!message.message) {\n                message = dataFail;\n              }\n\n              form.validateForm();\n              form.clearValidationMessages();\n              form.addValidationMessage(message);\n\n              // Close slide\n              self.goBack();\n\n              //reject defered\n              self.slideFormDeferred.resolve(data);\n            });\n\n          } else {\n            // Close slide\n            self.goBack();\n\n            //reject defered\n            self.slideFormDeferred.reject();\n          }\n        }\n      }\n    };\n\n    var onCancelClick = function onCancelClick() {\n      // Close slide\n      self.goBack();\n      //reject defered\n      self.slideFormDeferred.reject();\n    };\n\n    form.buttons = [$.extend(form.buttons[0] || {},\n    {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 0,\n      \"action\": \"save\",\n      \"save\": true,\n      \"style\": \"\",\n      callback: onSaveClick }),\n\n    $.extend(form.buttons[1] || {}, {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 1,\n      \"action\": \"back\",\n      \"save\": true,\n      \"style\": \"\",\n      callback: onCancelClick })];\n\n\n\n    // If form is editable, add \"save\" button\n    if (!self.slideFormParams.showSaveButton) {\n      form.buttons.shift();\n    }\n\n    //self._renderButtons(form);\n  },\n\n  /*\r\n      *   Render the form\r\n      *   The params are the same that will be send to the ajax service\r\n      *   Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill content\n    self.renderSlideForm(params);\n\n    // Return promise\n    return self.slideFormDeferred.promise();\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n\n    var self = this;\n    var defer = new $.Deferred();\n\n    bizagi.loading.start();\n\n    // Load template and data\n    $.when(self.dataService.getFormData(params)).then(function (data) {\n      /*** SUCCESS FILTER **/\n      if (params.recordXPath) {\n        data.form.properties.recordXpath = params.recordXPath;\n      }\n\n      // Apply editable param\n      if (!self.slideFormParams.showSaveButton || params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      if (typeof data.form.properties !== \"undefined\") {\n        data.form.properties.orientation = self.slideFormParams.orientation || \"ltr\";\n      }\n\n      // Render dialog template\n      var form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.container });\n\n\n      form.params = $.extend({}, form.params, params.formParams);\n\n      self.processFormButtons(form);\n\n      self.form = form;\n\n      // Return rendering promise\n      return form.render();\n\n    }).done(function (element) {\n\n      // Append form in the slide view\n      self.container.element.html(element);\n\n      if (!params.isRefresh) {\n        self.slideFormParams.navigation.navigate(self.container.id);\n      }\n\n      //self.container.setNavigationButtons(self.form);\n\n      // Remove default form buttons\n      $(\".ui-bizagi-button-container .action-button\", self.form.container).remove();\n      // Add Button\n      $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (data, refreshParams) {\n        refreshParams.formParams = refreshParams.params || self.form.params;\n        self.render(refreshParams);\n      });\n    }).fail(function (message) {\n      /*** Form load failure ***/\n\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.fasttmpl(errorTemplate, { message: error_message }).appendTo(self.container.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.container.id);\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n\n    return defer.promise();\n  },\n\n  // Go back and destroy\n  goBack: function goBack() {\n    this.container.destroy();\n  },\n\n  /**\r\n      * Process render buttons\r\n      */\n  _renderButtons: function _renderButtons(form) {\n    var self = this;\n    var content = $(\"<div class='bz-slide-button-container'></div>\");\n\n    $.each(form.buttons, function (ui, value) {\n      $(\"<div class='action-button'>\" + value.caption + \"</div>\").click(\n      value.callback).\n      appendTo(content);\n    });\n\n    self.buttonContainer = content;\n  } });","/**\r\n *   Name: Bizagi Tablet slide form implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n\n// Extends itself\n$.Class.extend('bizagi.rendering.tablet.slide.form', {}, {\n\n  /* CONSTRUCTOR\r\n                                                            =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n\n    if (self.slideContainer && self.slideContainer.destroy) {\n      self.slideContainer.destroy();\n    }\n\n    // Create container\n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {}\r\n      */\n  goBack: function goBack() {\n    var self = this;\n    self.slideContainer.destroy();\n  },\n\n  /**\r\n      * Handlers de la vista de kendo\r\n      * @returns {}\r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n    var self = this;\n  },\n\n  /**\r\n      * Render the form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params\r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n    // Fill content\n    self.renderSlideForm(params);\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n\n    var self = this;\n\n    var defer = new $.Deferred();\n\n    // Load template and data\n    $.when(self.dataService.getFormData(params)).then(function (data) {\n      /*** SUCCESS FILTER **/\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Render dialog template\n      // Extends from container tblet base\n      var formClass = bizagi.rendering.tablet.form.extend({\n        submitForm: function submitForm() {\n          if (self.form) {\n            this.endLoading();\n            // Perform validations\n            if (self.form.validateForm()) {\n              // Collect data\n              var data = {};\n\n              self.form.collectRenderValues(data);\n\n              // Add page cache for this form\n              data.idPageCache = self.form.getPageCache();\n\n              // Call user callback\n              if (self.slideFormParams.onSave) {\n                $.when(self.slideFormParams.onSave(data)).\n                done(function (result) {\n                  if (result === null || result === true || result.type === \"success\") {\n                    defer.resolve();\n                    self.goBack();\n                  } else if (result.type === \"validationMessages\") {\n                    // Add validation messages\n                    self.form.addValidationMessage(result.messages);\n                    // Update original value to use as reference to other futures changes in the dialogBox\n                    $.each(data, function (key, value) {\n                      var renders = self.form.getRenders(key);\n                      $.each(renders, function (i, render) {\n                        render.updateOriginalValue();\n                      });\n                    });\n                  } else if (result.type === \"error\") {\n                    // Add error messages\n                    self.form.addErrorMessage(result.message);\n                  }\n                });\n\n              } else {\n                defer.resolve();\n                self.goBack();\n              }\n            }\n          }\n        } });\n\n\n      var containerParams = $.extend({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.slideContainer },\n      {\n        renderFactory: self.renderFactory,\n        dataService: self.renderFactory.dataService });\n\n\n      // Stop creating forms like there's no tomorrow\n      if (!self.form) {\n        self.form = new formClass(containerParams);\n      }\n\n      // Return rendering promise\n      return self.form.render();\n    }).done(function (element) {\n      // Append form  in the view\n      self.slideContainer.element.html(element);\n\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n\n      $(\".ui-bizagi-button-container div\", self.form.container).remove();\n\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append('<div ordinal=\"0\" id=\"formButton0\" class=\"action-button ui-bizagi-form-button\">Save</div>').\n      delegate('div[ordinal=\"0\"]', \"click\", function () {\n        self.form.submitForm();\n      });\n\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append('<div ordinal=\"1\" id=\"formButton1\" class=\"action-button ui-bizagi-form-button\">' +\n      bizagi.localization.getResource(\"render-form-dialog-box-cancel\") + \"</div>\").\n      delegate('div[ordinal=\"1\"]', \"click\", function () {\n        self.slideFormParams.onCancel && self.slideFormParams.onCancel();\n        self.goBack();\n      });\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function () {\n        self.renderSlideForm(params);\n      });\n    }).fail(function (xhr, errorType, message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.fasttmpl(errorTemplate, { message: error_message }).appendTo(self.slideContainer.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    });\n\n    return defer.promise();\n  } });","/**\r\n *   Name: Bizagi Tablet slide grid view implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide view that will show hidden columns for a grid\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.tablet.slide.grid\", {}, {\n\n  /* CONSTRUCTOR\r\n                                                            =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.slideFormDeferred = new $.Deferred();\n    this.slideFormParams = slideFormParams || {};\n\n    // Create container\n    self.container = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n  },\n\n  /**\r\n      * Render the grid view form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params\r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill content\n    self.renderSlideForm(self.slideForm, params);\n\n    self.slideFormDeferred.resolve();\n\n    // Return promise\n    return self.slideFormDeferred.promise();\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(slideForm, params) {\n\n    var self = this;\n    var data = self.transformData(params);\n\n    // Load template and data\n    self.form = self.renderFactory.getContainer({\n      type: \"form\",\n      data: data.form,\n      navigation: self.slideFormParams.navigation,\n      view_container: self.container });\n\n\n    self.form.buttons = [$.extend(self.form.buttons[0] || {},\n    {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 0,\n      \"action\": \"save\",\n      \"save\": true,\n      \"style\": \"\",\n      // This callback avoid to call the default processButton in the form\n      callback: function callback() {\n        self.goBack();\n        // Resolve deferred with form data\n        var data = {};\n        self.form.collectRenderValues(data);\n        self.slideFormDeferred.resolve(data);\n      } }),\n\n    $.extend(self.form.buttons[1] || {},\n    {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 1,\n      \"action\": \"back\",\n      \"save\": true,\n      \"style\": \"\",\n      //This callback avoid to call the default processButton in the form\n      callback: function callback() {\n        // Close slide\n        self.goBack();\n        self.slideFormDeferred.reject();\n      } })];\n\n\n\n    // Add save button if the form is editable\n    if (!self.slideFormParams.allowEdition) {\n      self.form.buttons.shift();\n    }\n\n    $.when(self.form.render()).\n    done(function (element) {\n\n      // Append form in the slide view\n      self.container.element.html(element);\n\n      self.slideFormParams.navigation.navigate(self.container.id);\n\n      self.container.setNavigationButtons(self.form);\n\n      // Remove default form buttons\n      $(\".ui-bizagi-button-container .action-button\", self.form.container).remove();\n\n      // Add Button\n      $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n    });\n  },\n\n  /**\r\n      * Transform data into a JSON standard rendering format\r\n      * @param params\r\n      * @returns {[]}\r\n      */\n  transformData: function transformData(params) {\n    var self = this;\n    var row = params.row;\n    var columns = params.columns;\n\n    // Set xpath context\n    var xpathContext = params.xpathContext.length > 0 ?\n    params.xpathContext + \".\" + params.xpath + \"[\" + params.row[0] + \"]\" :\n    params.xpath + \"[id=\" + params.row[0] + \"]\";\n\n    var data = {\n      type: \"form\",\n      form: {\n        elements: [],\n        pageCacheId: params.pageCacheId,\n        sessionId: params.sessionId,\n        properties: {\n          xpathContext: xpathContext },\n\n        actions: self.transformActions(params.xpath, params.actions),\n        validations: self.transformValidations(params.xpath, params.validations) } };\n\n\n\n    $.each(row, function (i, item) {\n\n      // Skip first data (key not need to be rendered)\n      if (i > 0) {\n        var element = { render: { properties: $.extend({}, columns[i - 1].properties) } };\n\n        // Hack properties\n        element.render.properties.type = self.mapRenderType(element.render.properties.type);\n        element.render.properties.displayType = 'both';\n        if (self.slideFormParams.allowEdition == false) element.render.properties.editable = false;\n        element.render.properties.value = self.mapValue(element.render.properties.type, item);\n        if (element.render.properties.recalculate) element.render.properties.data = null;\n\n        // Check columnVisible property\n        if (typeof element.render.properties.columnVisible != \"undefined\") {\n          element.render.properties.visible = element.render.properties.columnVisible;\n        }\n\n        // Fix upload columns\n        if (element.render.properties.type == \"upload\") {\n          element.render.properties.isColumn = true;\n        }\n\n        // Fix search columns\n        if (element.render.properties.type == \"search\") {\n          var value = element.render.properties.value;\n          if (value.length > 0) {\n            value = [].concat(value[0]);\n            element.render.properties.value = {\n              id: value[0],\n              label: value[1],\n              additionallabel: value[2] || undefined };\n\n          }\n        }\n\n\n        // Add element\n        data.form.elements.push(element);\n      }\n    });\n\n    return data;\n  },\n\n  /**\r\n      * Map column renderType into normal render\r\n      * @param type\r\n      * @returns {string}\r\n      */\n  mapRenderType: function mapRenderType(type) {\n    type = type.replaceAll(\"tablet\", \"\").replaceAll(\"column\", \"\");\n\n    //some exceptions\n    if (type === \"FormLink\") return \"formLink\";\n\n    type = type.toLowerCase();\n    return type;\n  },\n\n  /**\r\n      * Method to translate grid values into render values\r\n      * @param type\r\n      * @param value\r\n      * @returns {[]}\r\n      */\n  mapValue: function mapValue(type, value) {\n    if ([\"combo\", \"radio\", \"list\"].includes(type)) {\n      if (value && value.length > 0) {\n\n        // Transform the value property\n        return [{\n          id: value[0][0],\n          value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\n            return i !== 0;\n          }) : value[0][1] }];\n\n\n      } else {\n        return null;\n      }\n    }\n\n    // Else: Don't do anything\n    return value;\n  },\n\n  /**\r\n      * Parse form actions into just grid form actions\r\n      * @param xpath\r\n      * @param actions\r\n      * @returns {[]}\r\n      */\n  transformActions: function transformActions(xpath, actions) {\n    var self = this;\n    var gridActions = [];\n\n    if (bizagi.util.isEmpty(actions)) return gridActions;\n\n    $.each(actions, function (index, action) {\n      var bDependencyFound = false;\n      for (var i = 0; i < action.dependencies.length; i++) {\n        if (action.dependencies[i].indexOf(xpath) != -1) {\n          bDependencyFound = true;\n        }\n      }\n\n      if (bDependencyFound) {\n        var newAction = JSON.parse(JSON.encode(action));\n\n        // Replace dependencies\n        for (var j = 0; j < newAction.dependencies.length; j++) {\n          newAction.dependencies[j] = newAction.dependencies[j].replaceAll(xpath + \"[].\", \"\");\n        }\n\n        // Replace conditions\n        self.transformConditions(xpath, newAction.conditions);\n\n        // Replace commands\n        self.transformCommands(xpath, newAction.commands);\n        self.transformCommands(xpath, newAction.elseCommands);\n\n        // Add to grid actions\n        gridActions.push(newAction);\n      }\n    });\n\n    return gridActions;\n  },\n\n  /**\r\n      * Parse form validations into just grid form validations\r\n      * @param xpath\r\n      * @param validations\r\n      * @returns {[]}\r\n      */\n  transformValidations: function transformValidations(xpath, validations) {\n    var self = this;\n    var gridValidations = [];\n\n    if (bizagi.util.isEmpty(validations)) return gridValidations;\n\n    $.each(validations, function (index, validation) {\n      var newValidation = JSON.parse(JSON.encode(validation));\n\n      // Replace conditions\n      self.transformConditions(xpath, newValidation.conditions);\n\n      // Add to grid actions\n      gridValidations.push(newValidation);\n\n    });\n\n    return gridValidations;\n  },\n\n  /**\r\n      * Parse a single condition or a complex condition in order to prepare a grid action/validation\r\n      * @param xpath\r\n      * @param condition\r\n      */\n  transformConditions: function transformConditions(xpath, condition) {\n    var self = this;\n\n    if (condition.expressions) {\n      for (var index in condition.expressions) {\n        self.transformConditions(xpath, condition.expressions[index]);\n      }\n    } else if (condition.simple) {\n      self.transformConditions(xpath, condition.simple);\n    } else if (condition.complex) {\n      self.transformConditions(xpath, condition.complex);\n    } else {\n      if (condition.xpath) {\n        condition.xpath = condition.xpath.replaceAll(xpath + \"[].\", \"\");\n        if (condition.argumentType === 'xpath') {\n          condition.argument = condition.argument.replaceAll(xpath + \"[].\", \"\");\n        }\n      } else {\n        // Apply to button and label controls\n        if (condition && condition.renderId) {\n          condition.renderId = condition.renderId.replaceAll(xpath + \"[].\", \"\");\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Parse a command action to prepare a grid action\r\n      * @param xpath\r\n      * @param commands\r\n      */\n  transformCommands: function transformCommands(xpath, commands) {\n    var refreshIndex = null;\n    if (commands == null || commands.length === 0) return;\n\n    for (var i = 0; i < commands.length; i++) {\n      if (commands[i].command === \"refresh\") {\n        refreshIndex = i;\n      } else {\n        if (commands[i].xpath) {\n          commands[i].xpath = commands[i].xpath.replaceAll(xpath + \"[].\", \"\");\n        }\n        if (commands[i].argumentType === 'xpath') {\n          commands[i].argument = commands[i].argument.replaceAll(xpath + \"[].\", \"\");\n        }\n\n        if (!commands[i].xpath && commands[i].renderId) {\n          commands[i].renderId = commands[i].renderId.replaceAll(xpath + \"[].\", \"\");\n        }\n      }\n    }\n\n    if (refreshIndex != null) {\n      commands.splice(i, 1);\n    }\n  },\n\n  /**\r\n      * Go back and destroy\r\n      */\n  goBack: function goBack() {\n    this.container.destroy();\n  } });","/**\r\n *   Name: Bizagi Tablet slide Grid AdHoc implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide view that will show hidden columns for a grid\r\n */\n\n// Extends itself\n$.Class.extend('bizagi.rendering.tablet.slide.adhocForm', {}, {\n\n  /* CONSTRUCTOR\r\n                                                                  =====================================================*/\n  init: function init(renderFactory, slideFormParams) {\n    var self = this;\n\n    // Define instance variables\n    this.renderFactory = renderFactory;\n    this.slideFormDeferred = new $.Deferred();\n    this.slideFormParams = slideFormParams || {};\n\n    // Create container\n    self.container = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n  },\n\n  /**\r\n      * Render the grid view form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param params\r\n      * @returns Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill content\n    self.renderSlideForm(params);\n    // Return promise\n    return self.slideFormDeferred.promise();\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n\n    var self = this;\n    var data = self.transformData(params);\n\n    // Load template and data\n    self.form = self.renderFactory.getContainer({\n      type: \"form\",\n      data: data.form,\n      navigation: this.slideFormParams.navigation,\n      view_container: self.container });\n\n\n    self.form.buttons = [$.extend(self.form.buttons[0] || {},\n    {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 0,\n      \"action\": \"save\",\n      \"save\": true,\n      \"style\": \"\",\n      // This callback avoid to call the default processButton in the form\n      callback: function callback() {\n        if (self.form.validateForm()) {\n          self.goBack();\n          // Resolve deferred with form data\n          var data = {};\n          self.form.collectRenderValues(data);\n          self.slideFormDeferred.resolve(data);\n        }\n      } }),\n\n    $.extend(self.form.buttons[1] || {}, {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 1,\n      \"action\": \"back\",\n      \"save\": true,\n      \"style\": \"\",\n      //This callback avoid to call the default processButton in the form\n      callback: function callback() {\n        // Close slide\n        self.goBack();\n        self.slideFormDeferred.reject();\n      } })];\n\n\n\n    // Add save button if the form is editable\n    if (!self.slideFormParams.allowEdition) {\n      self.form.buttons.shift();\n    }\n\n    $.when(self.form.render()).\n    done(function (element) {\n\n      if (params.row[0] == \"mock_id\") {// If it is an add form\n        $.each(data.elementsWithDefaultValue, function (i, item) {\n          var render = self.form.getRender(item.xpath + \".\" + item.id);\n          if (!render) {\n            render = self.form.getRender(item.xpath);\n          }\n          var defaultValue = bizagi.util.isArray(item.defaultValue) ? item.defaultValue[0] : item.defaultValue;\n          render.setDisplayValue(defaultValue);\n        });\n      }\n\n      // Append form in the slide view\n      self.container.element.html(element);\n\n      self.slideFormParams.navigation.navigate(self.container.id);\n\n      //self.container.setNavigationButtons(self.form);\n\n      // Remove default form buttons\n      $(\".ui-bizagi-button-container .action-button\", self.form.container).remove();\n\n      // Add Button\n      $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n    });\n  },\n\n  /**\r\n      * Transform data into a JSON standard rendering format\r\n      * @param params\r\n      * @returns {[]}\r\n      */\n  transformData: function transformData(params) {\n    var self = this;\n    var row = params.row;\n    var columns = params.columns;\n    var isAddForm = false;\n\n    // Set xpath context\n    var xpathContext = params.xpathContext.length > 0 ?\n    params.xpathContext + \".\" + params.xpath + \"[\" + params.row[0] + \"]\" :\n    params.xpath + \"[id=\" + params.row[0] + \"]\";\n\n    var data = {\n      type: \"form\",\n      form: {\n        elements: [],\n        pageCacheId: params.pageCacheId,\n        sessionId: params.sessionId,\n        properties: {\n          xpathContext: xpathContext },\n\n        actions: self.transformActions(params.xpath, params.actions),\n        validations: self.transformValidations(params.xpath, params.validations) },\n\n      elementsWithDefaultValue: [] };\n\n\n    if (row[0] === \"mock_id\") {\n      isAddForm = true;\n    }\n\n    $.each(row, function (i, item) {\n\n      // Skip first data (key not need to be rendered)\n      if (i > 0) {\n        var columnProperties = columns[i - 1].properties;\n        var element = { render: { properties: $.extend({}, columnProperties) } };\n\n        // Hack properties\n        element.render.properties.type = self.mapRenderType(element.render.properties.type);\n        element.render.properties.defaultvalue = typeof element.render.properties.defaultvalue !== \"undefined\" ? element.render.properties.defaultvalue : element.render.properties.defaultValue;\n        element.render.properties.displayType = 'both';\n        if (self.slideFormParams.allowEdition == false) element.render.properties.editable = false;\n        element.render.properties.value = self.mapValue(element.render.properties.type, item);\n        if (element.render.properties.recalculate) element.render.properties.data = null;\n\n        // Check defaultValue property\n        if (typeof element.render.properties.defaultvalue !== \"undefined\") {\n          if (typeof element.render.properties.value === \"undefined\" || element.render.properties.value == null) {\n            //element.render.properties.value = element.render.properties.defaultvalue;\n            data.elementsWithDefaultValue.push({\n              id: element.render.properties.id,\n              xpath: element.render.properties.xpath,\n              defaultValue: element.render.properties.defaultvalue });\n\n\n            delete element.render.properties.defaultvalue;\n            delete element.render.properties.defaultValue;\n          }\n        }\n\n        // Check columnVisible property\n        if (typeof element.render.properties.columnVisible !== \"undefined\") {\n          element.render.properties.visible = element.render.properties.columnVisible;\n        }\n\n        // Fix readonly columns\n        if (element.render.properties.type === \"readonly\") {\n          element.render.properties.type = \"text\";\n          element.render.properties.editable = false;\n        }\n\n        // Fix upload columns\n        if (element.render.properties.type === \"upload\") {\n          element.render.properties.isColumn = true;\n        }\n\n        // Fix search columns\n        if (element.render.properties.type === \"search\") {\n          var value = element.render.properties.value;\n\n          if (value == null) {\n            element.render.properties.value = {};\n          } else if (value.length > 0) {\n            value = [].concat(value[0]);\n            element.render.properties.value = {\n              id: value[0],\n              label: value[1],\n              additionallabel: value[2] || undefined };\n\n          }\n        }\n        var isDisabledControl = [\"document\", \"formLink\", \"upload\", \"uploadecm\", \"image\", \"search\"].includes(element.render.properties.type);\n        var isExclusiveCheck = (element.render.properties.isExclusive || false) && \"boolean\" === element.render.properties.type;\n\n        if (isExclusiveCheck || isAddForm && isDisabledControl) {\n          element.render.properties.editable = false;\n        } else if (isExclusiveCheck) {\n          element.render.properties.value = value;\n          element.render.properties.editable = false;\n        }\n\n        // Add element\n        data.form.elements.push(element);\n      }\n\n    });\n\n    return data;\n  },\n\n  /**\r\n      * Map column renderType into normal render\r\n      * @param type\r\n      * @returns {string}\r\n      */\n  mapRenderType: function mapRenderType(type) {\n    type = type.replaceAll(\"tablet\", \"\").replaceAll(\"column\", \"\");\n\n    //some exceptions\n    if (type === \"FormLink\") return \"formLink\";\n\n    type = type.toLowerCase();\n    return type;\n  },\n\n  /**\r\n      * Method to translate grid values into render values\r\n      * @param type\r\n      * @param value\r\n      * @returns {[]}\r\n      */\n  mapValue: function mapValue(type, value) {\n    if ([\"combo\", \"radio\", \"list\"].includes(type)) {\n      if (value && value.length > 0) {\n\n        // Transform the value property\n        return [{\n          id: value[0][0],\n          value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\n            return i !== 0;\n          }) : value[0][1] }];\n\n\n      } else {\n        return null;\n      }\n    }\n\n    // Else: Don't do anything\n    return value;\n  },\n\n  /**\r\n      * Parse form actions into just grid form actions\r\n      * @param xpath\r\n      * @param actions\r\n      * @returns {[]}\r\n      */\n  transformActions: function transformActions(xpath, actions) {\n    var self = this;\n    var gridActions = [];\n\n    if (bizagi.util.isEmpty(actions)) return gridActions;\n\n    $.each(actions, function (index, action) {\n      var bDependencyFound = false;\n      for (var i = 0; i < action.dependencies.length; i++) {\n        if (action.dependencies[i].indexOf(xpath) != -1) {\n          bDependencyFound = true;\n        }\n      }\n\n      if (bDependencyFound) {\n        var newAction = JSON.parse(JSON.encode(action));\n\n        // Replace dependencies\n        for (var j = 0; j < newAction.dependencies.length; j++) {\n          newAction.dependencies[j] = newAction.dependencies[j].replaceAll(xpath + \"[].\", \"\");\n        }\n\n        // Replace conditions\n        self.transformConditions(xpath, newAction.conditions);\n\n        // Replace commands\n        self.transformCommands(xpath, newAction.commands);\n        self.transformCommands(xpath, newAction.elseCommands);\n\n        // Add to grid actions\n        gridActions.push(newAction);\n      }\n    });\n\n    return gridActions;\n  },\n\n  /**\r\n      * Parse form validations into just grid form validations\r\n      * @param xpath\r\n      * @param validations\r\n      * @returns {[]}\r\n      */\n  transformValidations: function transformValidations(xpath, validations) {\n    var self = this;\n    var gridValidations = [];\n\n    if (bizagi.util.isEmpty(validations)) return gridValidations;\n\n    $.each(validations, function (index, validation) {\n      var newValidation = JSON.parse(JSON.encode(validation));\n\n      // Replace conditions\n      self.transformConditions(xpath, newValidation.conditions);\n\n      // Add to grid actions\n      gridValidations.push(newValidation);\n\n    });\n\n    return gridValidations;\n  },\n\n  /**\r\n      * Parse a single condition or a complex condition in order to prepare a grid action/validation\r\n      * @param xpath\r\n      * @param condition\r\n      */\n  transformConditions: function transformConditions(xpath, condition) {\n    var self = this;\n\n    if (condition.expressions) {\n      for (var index in condition.expressions) {\n        self.transformConditions(xpath, condition.expressions[index]);\n      }\n    } else if (condition.simple) {\n      self.transformConditions(xpath, condition.simple);\n    } else if (condition.complex) {\n      self.transformConditions(xpath, condition.complex);\n    } else {\n      if (condition.xpath) {\n        condition.xpath = condition.xpath.replaceAll(xpath + \"[].\", \"\");\n        if (condition.argumentType === 'xpath') {\n          condition.argument = condition.argument.replaceAll(xpath + \"[].\", \"\");\n        }\n      } else {\n        // Apply to button and label controls\n        if (condition && condition.renderId) {\n          condition.renderId = condition.renderId.replaceAll(xpath + \"[].\", \"\");\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Parse a command action to prepare a grid action\r\n      * @param xpath\r\n      * @param commands\r\n      */\n  transformCommands: function transformCommands(xpath, commands) {\n    var refreshIndex = null;\n    if (commands == null || commands.length === 0) return;\n\n    for (var i = 0; i < commands.length; i++) {\n      if (commands[i].command === \"refresh\") {\n        refreshIndex = i;\n      } else {\n        if (commands[i].xpath) {\n          commands[i].xpath = commands[i].xpath.replaceAll(xpath + \"[].\", \"\");\n        }\n        if (commands[i].argumentType === 'xpath') {\n          commands[i].argument = commands[i].argument.replaceAll(xpath + \"[].\", \"\");\n        }\n\n        if (!commands[i].xpath && commands[i].renderId) {\n          commands[i].renderId = commands[i].renderId.replaceAll(xpath + \"[].\", \"\");\n        }\n      }\n    }\n\n    if (refreshIndex != null) {\n      commands.splice(i, 1);\n    }\n  },\n\n  /**\r\n      * Go back and destroy\r\n      */\n  goBack: function goBack() {\n    this.container.destroy();\n  } });","/**\r\n *   Name: Bizagi Tablet slide view Upload implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide view that will show an upload file without exiting the application\r\n */\n\n// Extends itself\n$.Class.extend('bizagi.rendering.tablet.slide.upload', {}, {\n\n  /* CONSTRUCTOR\r\n                                                             =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.slideFormDeferred = new $.Deferred();\n    this.slideFormParams = slideFormParams || {};\n\n    // Create container    \t\n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n\n    self.processButtons().\n    done(function (data) {\n      self.slideFormDeferred.resolve(data);\n    }).fail(function () {\n      self.slideFormDeferred.reject();\n    });\n  },\n\n  /**\r\n      * Shows the slideForm form container in the browser\r\n      * @returns {} Returns a promise that the dialog will be closed\r\n      */\n  processButtons: function processButtons() {\n    var self = this;\n    var dfd = new $.Deferred();\n\n    // Create buttons object\n    var slideOptions = { buttons: [] };\n\n    // Add cancel button by default\n    var onClose = function onClose() {\n      // Close slide\n      self.goBack();\n      //reject defered\n      dfd.reject();\n    };\n    slideOptions.buttons.push({\n      text: bizagi.localization.getResource(\"workportal-case-dialog-box-close\"),\n      caption: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      actions: [\"submitData\", \"refresh\"],\n      submitData: false,\n      refresh: false,\n      ordinal: 0,\n      action: \"back\",\n      save: true,\n      style: \"\",\n      //This callback avoid to call the default processButton in the form\n      callback: onClose,\n      click: onClose });\n\n\n    // Apply dialog plugin\n    this.slideFormParams = $.extend(slideOptions, this.slideFormParams);\n    self._renderButtons(this.slideFormParams);\n\n    // Return promise\n    return dfd.promise();\n  },\n\n  /**\r\n      * Render the grid view form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params\r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill content\n    self.renderUploadFile(self.slideForm, params);\n\n    // Return promise\n    return self.slideFormDeferred.promise();\n  },\n\n  /* Render the file inside a frame\r\n     =====================================================*/\n  renderUploadFile: function renderUploadFile(slideForm, params) {\n    var self = this;\n    var template = self.renderFactory.getCommonTemplate(\"uploadSlide\");\n\n    // Render template\n    var content = $.fasttmpl(template, { url: params.url });\n\n    // Append content in the slide view\n    self.slideContainer.element.html(content);\n\n    // Navigate on view\n    self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    // Add Button\n    // $(\".ui-bizagi-button-container\", self.slideContainer).append(self.buttonContainer);\n\n    // No need to create a real form cause it just shows the back button\n    var virtualForm = $.extend({\n      originalProperties: {\n        uniqueId: 101,\n        id: 101 } },\n\n    self.slideFormParams);\n    virtualForm.container = self.slideContainer.element;\n\n    self.slideFormParams.navigation.setNavigationButtons(virtualForm);\n\n    content.find(\".ui-slide-upload-link\").click(function () {\n      $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"render-tablet-slide-upload-confirmation\"))).\n      done(function () {\n        window.location.href = params.url;\n      });\n    });\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {}\r\n      */\n  goBack: function goBack() {\n    var self = this;\n\n    self.slideContainer.destroy();\n  },\n\n  /**\r\n      * Process render buttons\r\n      * @param {} options\r\n      * @returns {}\r\n      */\n  _renderButtons: function _renderButtons(options) {\n    var self = this;\n    var content = $(\"<div class=\\\"bz-slide-button-container\\\"></div>\");\n\n    $.each(options.buttons, function (ui, value) {\n      $(\"<div class=\\\"action-button\\\">\" + value.text + \"</div>\").click(\n      value.click).\n      appendTo(content);\n    });\n\n    self.buttonContainer = content;\n  } });","/**\r\n *   Name: Bizagi Tablet slide form implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n\n// Extends itself\n$.Class.extend('bizagi.rendering.tablet.startForm', {}, {\n\n  /* CONSTRUCTOR\r\n                                                           =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n\n    // Create container        \n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * Handlers kendo view\r\n      * @returns {}\r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n    var self = this;\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {}\r\n      */\n  goBack: function goBack() {\n    var self = this;\n    self.slideContainer.destroy();\n  },\n\n  /**\r\n      * Render the form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params\r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n    // Fill content\n    self.renderSlideForm(params);\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n\n    var self = this;\n\n    var defer = new $.Deferred();\n\n    // Load template and data\n    $.when(self.dataService.getStartForm(params)).then(function (data) {\n      /*** SUCCESS FILTER **/\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Render dialog template\n      var formClass = bizagi.rendering.tablet.form.extend({\n        submitForm: function submitForm() {\n          if (self.form) {\n            this.endLoading();\n            // Perform validations\n            if (self.form.validateForm()) {\n              // Collect data\n              var data = {};\n\n              self.form.collectRenderValues(data);\n\n              // Add page cache for this form\n              data.idPageCache = self.form.getPageCache();\n\n              // Call user callback\n              if (self.slideFormParams.onSave) {\n                $.when(self.slideFormParams.onSave(data)).\n                done(function (result) {\n                  if (result == null || result == true || result.type == \"success\") {\n                    defer.resolve();\n                    self.goBack();\n                  } else if (result.type == \"validationMessages\") {\n                    // Add validation messages\n                    self.form.addValidationMessage(result.messages);\n                    // Update original value to use as reference to other futures changes in the dialogBox\n                    $.each(data, function (key, value) {\n                      var renders = self.form.getRenders(key);\n                      $.each(renders, function (i, render) {\n                        render.updateOriginalValue();\n                      });\n                    });\n                  } else if (result.type == \"error\") {\n                    // Add error messages\n                    self.form.addErrorMessage(result.message);\n                  }\n                });\n\n              } else {\n                defer.resolve();\n                self.goBack();\n              }\n            }\n          }\n        } });\n\n\n      var containerParams = $.extend({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.slideContainer },\n      {\n        renderFactory: self.renderFactory,\n        dataService: self.renderFactory.dataService });\n\n\n      self.form = new formClass(containerParams);\n\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        refreshParams = $.extend({\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true },\n        params, refreshParams, { idStartScope: self.form.properties.idStartScope });\n\n        self.renderSlideForm(refreshParams);\n      });\n\n      self.form.buttons = [\n      $.extend(\n      self.form.buttons[0] || {},\n      {\n        \"caption\": self.slideFormParams.saveButtonLabel,\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\" })];\n\n\n      // Return rendering promise\n      return self.form.render();\n    }).done(function (element) {\n      // Append form  in the view\n      self.slideContainer.element.html(element);\n\n      if (!params.isRefresh) {\n        self.slideFormParams.navigation.navigate(self.slideContainer.id);\n      }\n\n      $('.ui-bizagi-button-container div', self.form.container).remove();\n\n      $('.ui-bizagi-button-container', self.form.container).append('<div ordinal=\"0\" id=\"formButton0\" class=\"action-button ui-bizagi-form-button\">' + (self.slideFormParams.saveButtonLabel ? self.slideFormParams.saveButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-save\")) + '</div>').delegate('div[ordinal=\"0\"]', 'click', function () {\n        self.form.submitForm();\n      });\n\n      $('.ui-bizagi-button-container', self.form.container).append('<div ordinal=\"1\" id=\"formButton1\" class=\"action-button ui-bizagi-form-button\">' + bizagi.localization.getResource(\"render-form-dialog-box-cancel\") + '</div>').delegate('div[ordinal=\"1\"]', 'click', function () {\n        self.slideFormParams.onCancel && self.slideFormParams.onCancel();\n        self.goBack();\n      });\n\n      //self.view.scroller.reset();\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n    }).fail(function (xhr, errorType, message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.fasttmpl(errorTemplate, { message: error_message }).appendTo(self.slideContainer.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    });\n\n    return defer.promise();\n  } });","/**\r\n *   Name: Bizagi tablet ECM Slide Implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will shows a ECM form\r\n */\n$.Class.extend(\"bizagi.rendering.tablet.slide.ecm\", {}, {\n\n  /**\r\n                                                           * Constructor\r\n                                                           * @param dataService\r\n                                                           * @param renderFactory\r\n                                                           * @param slideFormParams\r\n                                                           */\n  init: function init(dataService, renderFactory, slideFormParams) {\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n\n    self.slideFormParams = slideFormParams || {};\n    self.slideFormDeferred = new $.Deferred();\n\n    // Create container\n    self.container = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n  },\n\n  /**\r\n      * Render the form\r\n      * @param params\r\n      */\n  render: function render(params) {\n\n    // Fill content\n    this.renderSlideForm(params);\n\n    // Return promise\n    return this.slideFormDeferred.promise();\n  },\n\n  renderSlideForm: function renderSlideForm(params) {\n    var self = this;\n    var data = self.getMetadataForm(params);\n\n    // Load template and data\n    self.form = self.renderFactory.getContainer({\n      type: \"form\",\n      data: data.form,\n      navigation: self.slideFormParams.navigation,\n      view_container: self.container });\n\n\n    // Binds the view close event\n    /* self.container.element.bind(\"close\", function () {\r\n         // delete self.container;\r\n         console.log(\"closed!\");\r\n     });*/\n\n    $.when(self.form.render()).\n    done(function ($renderEdition) {\n\n      // Append form in the slide view\n      self.container.element.html($renderEdition);\n\n      self.slideFormParams.navigation.navigate(self.container.id);\n\n      self.processButtons(self.form, params);\n      self.container.setNavigationButtons(self.form);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Attach a refresh handler to recreate all the form\n      /*self.form.bind(\"refresh\", function () {\r\n          // self.renderSlideForm(params);\r\n      });*/\n\n    }).always(function () {\n      self.slideFormDeferred.resolve();\n    });\n\n  },\n\n  /**\r\n      * Shows the slideForm form container in the browser\r\n      * @returns {} Returns a promise that the dialog will be closed\r\n      */\n  processButtons: function processButtons(form, params) {\n    var self = this;\n\n    form.buttons = [\n    {\n      ordinal: 0,\n      action: \"save\",\n      caption: bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      callback: self.onSaveDataMetadataForm.bind(self, params.fileData) },\n\n    {\n      ordinal: 1,\n      action: \"back\",\n      caption: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      callback: function callback() {\n        self.slideFormParams.onCancel({});\n        self.goBack();\n      } }];\n\n\n\n    // Add save button if the form is editable\n    if (!self.slideFormParams.editable) {\n      form.buttons.shift();\n    }\n  },\n\n  /**\r\n      * Process render data\r\n      * @param params\r\n      * @returns {{form: *, type: string}}\r\n      */\n  getMetadataForm: function getMetadataForm(params) {\n    var self = this;\n    var data = {\n      type: \"form\",\n      form: {\n        elements: [],\n        pageCacheId: params.pageCacheId,\n        sessionId: params.sessionId,\n        properties: {\n          id: 101,\n          xpathContext: params.xpathContext,\n          editable: self.slideFormParams.editable,\n          orientation: self.slideFormParams.orientation || \"ltr\" } } };\n\n\n\n\n    // Mapping metadata to render\n    $.each(params.metadata, function (index, item) {\n      var renderType = self.getRenderType(item.metadataType);\n\n      var newRender = Object.assign({\n        \"id\": index + 1,\n        \"xpath\": item.metadataId,\n        \"displayName\": item.description,\n        \"required\": bizagi.util.parseBoolean(item.required) === true,\n        \"editable\": bizagi.util.parseBoolean(item.readOnly) === false,\n        \"value\": item.value },\n      renderType);\n\n      data.form.elements.push({ \"render\": { \"properties\": newRender } });\n    });\n\n    return data;\n  },\n\n  /**\r\n      * Get type of render\r\n      * @param type\r\n      * @returns {*}\r\n      */\n  getRenderType: function getRenderType(type) {\n    switch (type.toUpperCase()) {\n      case \"INTEGER\":\n        return {\n          type: \"number\",\n          dataType: 2,\n          allowDecimals: false,\n          thousands: false };\n\n      case \"DECIMAL\":\n        return {\n          type: \"number\",\n          dataType: 10,\n          allowDecimals: true,\n          thousands: true };\n\n      case \"DATETIME\":\n        return { type: \"date\", dataType: 12 };\n      case \"BOOL\":\n        return { type: \"boolean\", dataType: 5 };\n      case \"STRING\":\n      default:\n        return {\n          type: \"text\",\n          dataType: 15,\n          maxLength: 50,\n          autoExtend: false };}\n\n\n\n  },\n\n  /**\r\n      * Save data to ECM form\r\n      * @returns {jQuery}\r\n      * @param fileData\r\n      */\n  onSaveDataMetadataForm: function onSaveDataMetadataForm(fileData) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    if (self.form.validateForm()) {\n      // Check if the add form has data\n      var formData = {};\n      self.form.collectRenderValuesForSubmit(formData);\n\n      // Turn off flag\n      $.forceCollectData = false;\n\n      if (!bizagi.util.isMapEmpty(formData)) {\n\n        var metadataValues = Object.keys(formData).\n        map(function (key, index) {\n          return { \"idMetadata\": key, \"value\": formData[key] };\n        });\n\n        var params = {\n          \"idFileUpload\": fileData.idFileUpload,\n          \"fileName\": fileData.fileName,\n          \"idPageCache\": fileData.idPageCache,\n          \"xpathContext\": fileData.xpathContext,\n          \"xPath\": fileData.xpath,\n          \"idAttrib\": fileData.idAttrib };\n\n\n        params.metaValues = JSON.encode({ metadataValues: metadataValues });\n        bizagi.loading.start();\n\n        $.when(self.dataService.updateECMMetadata(params)).\n        done(function (fileProperties) {\n          if (fileProperties && fileProperties.idFileUpload) {\n\n            self.slideFormParams.onSave({\n              update: true,\n              idFileUpload: fileProperties.idFileUpload,\n              fileName: fileData.fileName });\n\n\n            deferred.resolve({ update: true });\n          }\n\n          self.goBack();\n\n        }).fail(function (message) {\n          self.form.addValidationMessage(message.message);\n          deferred.reject();\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      } else {\n        self.slideFormParams.onSave({ update: false });\n        deferred.resolve({ update: false });\n        self.goBack();\n      }\n    }\n\n    deferred.promise();\n  },\n\n  /**\r\n      * Go back and destroy\r\n      */\n  goBack: function goBack() {\n    this.container.destroy();\n  } });","/**\r\n *   Name: Bizagi Tablet Container Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.container.extend(\"bizagi.rendering.tablet.container\", {}, {\n  /**\r\n                                                                              * Starts waiting signal for async stuff\r\n                                                                              */\n  startLoading: function startLoading() {\n  },\n\n  /**\r\n      * Ends waiting for async stuff\r\n      */\n  endLoading: function endLoading() {\n  } });","/**\r\n *   Name: Bizagi Tablet Render Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the render class to adjust to tablet devices\r\n */\n\n// Extends from render base\nbizagi.rendering.render.extend(\"bizagi.rendering.tablet.render\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.render\", {}, {\n\n  /**\r\n                                                                               * Update or init the element data\r\n                                                                               * @param data\r\n                                                                               */\n  initializeData: function initializeData(data) {\n    this._super(data);\n\n    var formContainer = this.getFormContainer();\n    this.formParams = formContainer.getParams();\n  },\n\n  /**\r\n      * Returns the label element usually to apply styles\r\n      */\n  getLabel: function getLabel() {\n    if (!this.label)\n    this.label = $(\".bz-form-label label\", this.element || this.observableElement);\n\n    return this.label;\n  },\n\n  /**\r\n      * Return the label\r\n      */\n  getFormattingLabel: function getFormattingLabel() {\n    // TODO: Despues de cambiar a genome desktop, validar se solo se deja este metodo en la base\n    return this.getLabel();\n  },\n\n  /**\r\n      * Template method to get the control element\r\n      */\n  getControl: function getControl() {\n    if (!this.control || this.control.length === 0)\n    this.control = $(\".bz-control\", this.element || this.observableElement);\n\n    if (!this.control || this.control.length === 0) return null;\n\n    return this.control;\n  },\n\n  /**\r\n      * Template method to get the control filler element\r\n      */\n  getControlFiller: function getControlFiller() {\n    if (!this.controlFiller)\n    this.controlFiller = $(\".bz-form-item__control\", this.element || this.observableElement);\n\n    return this.controlFiller;\n  },\n\n  getContainerMessage: function getContainerMessage() {\n    if (!this.containerMessage)\n    this.containerMessage = $(\".bz-form-message__text\", this.element || this.observableElement);\n\n    return this.containerMessage;\n  },\n\n  getColumnContainerMessage: function getColumnContainerMessage() {\n    if (!this.containerMessage)\n    this.containerMessage = $(\".bz-form-cell-message__text\", this.element || this.observableElement);\n\n    return this.containerMessage;\n  },\n\n  /**\r\n      * Starts waiting signal for async stuff\r\n      */\n  startLoading: function startLoading() {\n  },\n\n  /**\r\n      * Ends waiting for async stuff\r\n      */\n  endLoading: function endLoading() {\n  },\n\n  /**\r\n      * Return the right display option class\r\n      * @param {} displayType\r\n      */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    if (displayType === \"normal\" || displayType === \"both\") {\n      return \"bz-form-item--display-normal\";\n    } else if (displayType === \"vertical\") {\n      return \"bz-form-item--display-vertical\";\n    } else if (displayType === \"reversed\") {\n      return \"bz-form-item--display-reversed\";\n    } else if (displayType === \"label\") {\n      return \"bz-form-item--display-label\";\n    } else if (displayType === \"value\") {\n      return \"bz-form-item--display-value\";\n    }\n  },\n\n  /**\r\n      * Customizes render display type with custom css classes\r\n      * @param displayType\r\n      */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    // var self = this,\n    // el = self.element;\n\n    // Clean old display type\n    // el.removeClass('ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed')\n    //   .removeClass('ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value');\n    // el.addClass(self.getDisplayOptionClass(displayType));\n  },\n\n  /**\r\n      * Return the right align class\r\n      * @param alignType\r\n      * @returns {*}\r\n      */\n  getAlignClass: function getAlignClass(alignType) {\n    return alignType;\n  },\n\n  /**\r\n      * Customizes render label align\r\n      * @param alignType\r\n      */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    // var self = this;\n\n    // Get label\n    // var label = self.getLabel();\n\n    // Remove old label align\n    // label.removeClass('ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right');\n\n    // Set label align\n    // label.addClass(self.getAlignClass(alignType));\n  },\n\n  /**\r\n      * Customizes render value align\r\n      * @param alignType\r\n      */\n  changeValueAlign: function changeValueAlign(alignType) {\n    // var self = this;\n\n    // Get control\n    // var controlFiller = self.getControlFiller();\n    //\n    // // Remove old value align\n    // controlFiller.removeClass('ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right');\n    //\n    // // Set value align\n    // controlFiller.addClass(self.getAlignClass(alignType));\n  },\n\n  /**\r\n      * Customizes render label and value width\r\n      * TODO: Review implementation on execution\r\n      */\n  customizeRenderWidth: function customizeRenderWidth() {\n    var self = this;\n    var label = self.getLabel();\n    var properties = self.properties;\n    var controlFiller = self.getControlFiller();\n\n    // Read values\n    // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\n    var labelWidth = properties.labelWidth ? properties.labelWidth != '0' ? properties.labelWidth : '50%' : null;\n    var valueWidth = properties.valueWidth ? properties.valueWidth != '0' ? properties.valueWidth : '50%' : null;\n\n    // Normalize percentages\n    if (labelWidth && !valueWidth) {\n      labelWidth = bizagi.util.percent2Number(labelWidth);\n      valueWidth = 100 - labelWidth;\n\n    } else if (!labelWidth && valueWidth) {\n      valueWidth = bizagi.util.percent2Number(valueWidth);\n      labelWidth = 100 - valueWidth;\n\n    } else {\n      labelWidth = bizagi.util.percent2Number(labelWidth);\n      valueWidth = bizagi.util.percent2Number(valueWidth);\n\n      // Check 100% percentage\n      if (labelWidth + valueWidth != 100) {\n        valueWidth = 100 - labelWidth;\n      }\n    }\n\n    // Now apply width\n    label.width(labelWidth + \"%\");\n    controlFiller.width(valueWidth - 0.01 + \"%\");\n  },\n\n  /**\r\n      * Adds a validation message to the render\r\n      * @param message\r\n      */\n  setValidationMessage: function setValidationMessage(message) {\n    // Call base\n    this._super(message);\n    var dataType = bizagi.util.normalizeType(this.properties.type);\n    var isGridControl = dataType === \"grid\" || dataType === \"groupedgrid\";\n    var isColumn = this.grid && this.column && /column/.test(dataType);\n    var $message = isColumn ? this.getColumnContainerMessage() : this.getContainerMessage();\n\n    if (message && message.length > 0) {\n      message = message.replace(/<\\w+>([^<]*)<\\/\\w+>/g, \"$1\");\n\n      $message.attr(\"data-error\", message);\n      $message.text(message);\n\n      if (this.element) {\n        isGridControl ? this.element.addClass(\"bz-form-item-grid--error\") : this.element.addClass(\"bz-form-item--error\");\n      }\n    } else {\n      $message.text(\"\");\n      if (this.element) {\n        isGridControl ? this.element.removeClass(\"bz-form-item-grid--error\") : this.element.removeClass(\"bz-form-item--error\");\n      }\n    }\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    // Set internal value\n    self.setValue(value, false);\n\n    if (!self.properties.editable && self.properties.display !== \"check\") {\n      // Render as simple value\n      var displayValue = self.getDisplayValue(value);\n\n      if (typeof displayValue == \"string\" || typeof displayValue == \"number\") {\n        $(control).html(\"<label class='bz-form-label'>\" + displayValue + \"</label>\");\n      }\n    }\n  },\n\n  /**\r\n      * in mobiles, don't apply styles to icon's elements\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".bz-input, .bz-input-icon__input\", context);\n  },\n\n  getFormParams: function getFormParams() {\n    return this.formParams || {};\n  },\n\n  changeRequired: function changeRequired(argument) {\n    // Update properties\n    this.properties.required = argument;\n\n    if (bizagi.util.parseBoolean(argument) && this.properties.editable) {\n      this.element.addClass(\"bz-form-item--required\");\n    } else {\n      this.element.removeClass(\"bz-form-item--required\");\n    }\n\n    // Perform validations again to check if the form is valid after this change\n    this.triggerRenderValidate();\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n\n    var input = control.find(\"input\").filter(function (index, ele) {\n      return ele.type !== \"file\" && ele.type !== \"radio\" && ele.type !== \"checkbox\";\n    });\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else {\n      self.setDisplayValue(\"\");\n    }\n  } });","/**\r\n *   Name: Bizagi Tablet Form Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n *   -   Will apply a desktop form template\r\n */\n\n// Extends from container tablet base\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.form\", bizagi.rendering.form.prototype);\n// Auto extend\nbizagi.rendering.tablet.form.extend(\"bizagi.rendering.tablet.form\", {}, {\n\n  /**\r\n                                                                           * CONSTRUCTOR\r\n                                                                           *\r\n                                                                           * @param {} params\r\n                                                                           * @returns {}\r\n                                                                           */\n  init: function init(params) {\n    var self = this;\n    params = params || {};\n    // Define variables\n    self.warnings = {};\n    self.errors = {};\n    if (params.syncError) {\n      params.data.properties.editable = params.isOfflineErrorMode !== true;\n      var syncMessage = params.syncError.type == \"business\" ? params.syncError.message : undefined;\n      if (!bizagi.util.isEmpty(syncMessage)) {\n        try {\n          syncMessage = $.makeArray(syncMessage);\n          syncMessage.forEach(function (currentMessage) {\n            self.errors[currentMessage] = currentMessage;\n          });\n        } catch (e) {\n          console.error(\"syncErrorMessage could not be parsed as array\", syncMessage);\n          self.errors[syncMessage] = syncMessage;\n        }\n      }\n      delete params.syncError;\n    }\n    self.isOfflineErrorMode = params.isOfflineErrorMode === true;\n    self.showToastOnSuccessSync = params.showToastOnSuccessSync === true;\n    self.removeSyncErrorOnSubmit = params.removeSyncErrorOnSubmit === true;\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var form = self.container;\n\n    // Process complex-gateway\n    self.configureComplexGateway();\n\n    // Process buttons\n    self.processButtons(form);\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      var $canvas = self.getValidationsContainer();\n\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations, $canvas);\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n\n\n    //Event to notify the native code the form will be showing a modal view \n    self.bind(\"modalViewDidAppear\", function () {\n      self.params.navigation.modalViewDidAppear();\n    });\n\n    self.bind(\"closeModalValidationMessage\", function () {\n      if (self.validationController) {\n        self.validationController.clearValidationMessages();\n      }\n    });\n\n    //Event to notify the native code the form will be hiding a modal view \n    self.bind(\"modalViewDidDisappear\", function () {\n      self.params.navigation.modalViewDidDisappear();\n    });\n\n    // Add network listener\n    self.configureNetworkHandlers();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each container after processed\r\n      *\r\n      * @param {} container\r\n      * @returns {}\r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var properties = self.properties;\n    self._super(container);\n    var buttons = self.getButtons();\n\n    //disable overflow-scrolling touch untill the form is loaded QA-2178\n    if (bizagi.util.isiOSTabletDevice()) {\n      $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"inherit\");\n    }\n\n    // Show warnings\n    if (!bizagi.util.isObjectEmpty(self.warnings)) {\n      var warningContainer = $('<ul class=\"ui-bizagi-form-warnings\"></ul>');\n      for (var key in self.warnings) {\n        warningContainer.append($('<li>' + key + '</li>'));\n      }\n\n      // Add button\n      $(\"<button>\" + \"X\" + \"</button>\").appendTo(warningContainer);\n\n      // Append to body \n      warningContainer.prependTo(self.container);\n      warningContainer.click(function () {\n        warningContainer.detach();\n      });\n    }\n\n    // Show errors\n    if (!bizagi.util.isEmpty(self.errors)) {\n      for (var ekey in self.errors) {\n        setTimeout(function () {\n          self.addValidationMessage(ekey);\n        }, 1);\n      }\n    }\n\n    //Set button length\n    var lengthButtons = buttons ? buttons.length : 0;\n\n    if (lengthButtons) {\n\n      $(document).data(\"auto-save\", \"auto-save\");\n\n      //bind event auto-save\n      $(document).unbind(\"save-form\").bind(\"save-form\", function (e, deferredSave) {\n        if (self.allowOnlineActions()) {\n          self.autoSaveEvents(deferredSave);\n        } else {\n          deferredSave.resolve();\n        }\n      });\n\n      //bind event beforeunload\n      $(window).unbind('beforeunload').bind('beforeunload', function (e) {\n        var newData = {};\n        self.collectRenderValues(newData);\n\n        //if there are changes in the form show a message\n        if (!$.isEmptyObject(newData) && $(document).data('auto-save'))\n        return bizagi.localization.getResource(\"confirmation-savebox-message2\");\n\n        return;\n      });\n    }\n\n    //enable overflow-scrolling touch to avoid black frame over the form QA-2178\n    if (bizagi.util.isiOSTabletDevice()) {\n      setTimeout(function () {\n        $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"touch\");\n      }, 1000);\n    }\n\n\n    // Process Sections opened\n    var formParams = this.getParams() || {};\n    var selectedSections = $.extend([], formParams.selectedSection);\n    this.setParam(\"selectedSection\", []);\n    if (selectedSections.length > 0) {\n      selectedSections.forEach(function (id) {\n        var section = self.getRenderById(id);\n        if (typeof section !== \"undefined\") {\n          section.expand();\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Auto Save Events\r\n      *\r\n      * @param {} deferredSave\r\n      * @param {} saveBox\r\n      * @returns {}\r\n      */\n  autoSaveEvents: function autoSaveEvents(deferredSave, saveBox) {\n    var self = this;\n    var data = {};\n\n    if (self.isOfflineErrorMode) {\n      deferredSave.resolve();\n      return;\n    }\n\n    self.collectRenderValues(data);\n\n    if (!$.isEmptyObject(data)) {\n      var isStartForm = self.properties.formtype === \"startform\";\n      var message = isStartForm ? bizagi.localization.getResource(\"confirmation-savebox-message4\") : bizagi.localization.getResource(\"confirmation-savebox-message1\");\n\n      var confirmation = isStartForm ? bizagi.showConfirmationBox(message, \"Bizagi\", \"warning\", [{ label: bizagi.localization.getResource(\"confirmation-box-ok\"), action: \"resolve\" }, { label: bizagi.localization.getResource(\"confirmation-box-cancel\"), action: \"reject\" }]) :\n      bizagi.showSaveBox(message, \"Bizagi\", \"warning\");\n      $.when(confirmation).\n      done(function () {\n        if (!isStartForm) {\n          bizagi.loading.start();\n          $.when(self.saveForm()).\n          always(function () {\n            if (self.params.isOfflineForm && self.params.offlineType === \"task\" && self.online) {\n              var syncDeferred = new $.Deferred();\n              var syncParams = $.extend({ deferred: syncDeferred }, self.params);\n              $(document).trigger(\"tryPushCase.offline\", syncParams);\n              $.when(syncDeferred).\n              then(function () {\n                deferredSave.resolve();\n              }).\n              fail(function () {\n                console.log(\"Auto-Save Sync Error\", arguments);\n                //Resolve the save to allow back to the inbox\n                deferredSave.resolve();\n              }).always(function () {\n                bizagi.loading.stop();\n              });\n            } else\n            {\n              bizagi.loading.stop();\n              deferredSave.resolve();\n            }\n          });\n        } else {\n          deferredSave.resolve();\n        }\n      }).fail(function () {\n        if (isStartForm) {\n          deferredSave.reject();\n        } else {\n          deferredSave.resolve();\n        }\n      });\n    } else {\n      deferredSave.resolve();\n    }\n  },\n\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    // Assemble the actions\n    var actions = [];\n\n    var defer = $.Deferred();\n    var submitDataAction = null;\n    var executeButtonAction = null;\n    var performAction = null;\n    var checkpointAction = null;\n    var commitAction = null;\n\n    var data = {};\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase || buttonProperties.nextWithoutValidations) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi.\n          localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      performAction = self.dataService.submitData({\n        action: buttonProperties.action,\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n\n      performAction.tag = \"performAction\";\n    }\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n\n      //Validates if the method CHECKPOINT is supported\n      if (checkpointAction) {\n        actions.push(checkpointAction);\n      }\n\n      actions.push(executeButtonAction);\n\n      ///Validates if the method COMMIT is supported\n      if (commitAction) {\n        actions.push(commitAction);\n      }\n\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    // Execute the batch\n    bizagi.chrono.initAndStart(\"submitForm-ajax\");\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply($, data.deferreds).\n      done(function (response) {\n        flowControlDeferred.resolve(response);\n        delete data.deferreds;\n      }).\n      fail(function () {\n        flowControlDeferred.reject();\n        console.log(\"Error: It was not possible resolve async actions on form \");\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    $.when(flowControlDeferred).done(function () {\n      bizagi.util.tablet.startLoading();\n      $.when(self.dataService.multiaction().execute({ actions: actions })).done(function (responses) {\n        bizagi.chrono.stop(\"submitForm-ajax\");\n        // Find validations\n        var bHasValidations;\n        $.each(responses, function (i, response) {\n          if (response.result.type == \"validationMessages\") {\n            // Something went wrong, we gotta display messages in notifications grid\n            self.addValidationMessage(response.result.messages);\n            bHasValidations = true;\n          }\n          if (response.result.type == \"alertMessages\") {\n            // Something went wrong, we are gonna display messages in an alert\n            bizagi.showMessageBox(response.result.messages.join(','), bizagi.localization.getResource(\"workportal-general-word-information\", \"Information\"));\n            bHasValidations = true;\n          }\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase,\n              buttonPropertiesAction: buttonProperties.action });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else {\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        //Removes the nonSupportedMethods to prevent further iterations\n        delete self.nonSupportedMethods;\n\n        defer.resolve();\n      }).fail(function (res, res2, response) {\n        if (buttonProperties.executeRule) {\n          self.sendRollbackAction(buttonProperties.id);\n        }\n\n        if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\n        response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\n            return $.when(self.internalSubmitForm($.extend({}, buttonProperties, { forcePlanCompletion: true })));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          self.failHandler({ \"error\": typeof response === \"undefined\" ? bizagi.localization.getResource(\"workportal-general-error\") : response });\n          defer.reject(response);\n        }\n      }).always(function () {\n        bizagi.util.tablet.stopLoading();\n      });\n    }).always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n\n    return defer.promise();\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(id) {\n    return bizagi.util.validateFeatureSupport(\"commitRollbackActions\") ? this._super(id) : null;\n  },\n\n  prepareCommitAction: function prepareCommitAction(id) {\n    return bizagi.util.validateFeatureSupport(\"commitRollbackActions\") ? this._super(id) : null;\n  },\n\n  /**\r\n      * Retorna el pane donde se pintó la forma para facilitar navegacion de kendo\r\n      * @returns {*}\r\n      */\n  getPane: function getPane() {\n    var self = this;\n    return self.pane;\n  },\n\n  /* TEMPLATE METHOD TO GET THE BUTTONS OBJECTS\r\n      ======================================================*/\n  getButtons: function getButtons() {\n    var self = this;\n\n    if (self.getParams() && (handler = self.getParams().getButtons))\n    handler(self);\n\n    return $(\".ui-bizagi-button-container :button\", self.container);\n  },\n\n  processButtons: function processButtons() {\n    var self = this;\n    var params = self.getParams();\n\n    //si no es con un if es con un publish\n    if (params && params.processButtons) {\n      var handler = params.processButtons;\n      handler(self);\n    }\n\n    var properties = self.properties;\n    var buttons = self.getButtons();\n\n    properties.buttons = self.buttons || buttons;\n\n    //to cache a submit Data Buttom if exist\n    self.saveButton = null;\n    self.nextButton = null;\n\n    //Set saveButton and nextButton if exist\n    for (var i = 0, length = properties.buttons.length; i < length; i++) {\n      if (properties.buttons[i].action == 'save') {\n        self.saveButton = properties.buttons[i];\n      } else if (properties.buttons[i].action == 'next') {\n        self.nextButton = properties.buttons[i];\n      }\n    }\n\n    var navigation = self.getNavigation();\n\n    if (typeof navigation !== \"undefined\") {\n      //si tiene un viewContainer sera porque es una forma dentro de container de edicion\n      var view_container = self.getViewContainer();\n      if (typeof view_container !== \"undefined\") {\n        view_container.setNavigationButtons(self);\n      } else {\n        navigation.setNavigationButtons(self);\n      }\n    }\n\n    self._super();\n  },\n\n  /*\r\n      *   Refresh the current form\r\n      */\n  refreshForm: function refreshForm(focus, showLoading) {\n    var self = this;\n    var properties = self.properties;\n    var params = self.getParams();\n    var deferred = $.Deferred();\n    var options;\n\n    focus = focus || self.getFocus();\n    showLoading = showLoading != false ? true : showLoading;\n\n    // Normalize new focus structure if not present\n    if (focus && !focus.id) {\n      focus = {\n        id: focus };\n\n    }\n\n    options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      selectedSection: self.getSelectedSection(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      isRefresh: true,\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\",\n      navigation: params.navigation,\n      view_container: params.view_container };\n\n\n    if (self.isOfflineRefreshWithEdition) {\n      options.isEdited = true;\n      self.isOfflineRefreshWithEdition = false;\n    }\n\n    if (params.postRenderEdit || params.processButtons) {\n      options.isOfflineForm = self.params.isOfflineForm || false;\n      options.formsRenderVersion = self.params.formsRenderVersion || 0;\n      options.postRenderEdit = params.postRenderEdit;\n      options.processButtons = params.processButtons;\n      options.originalParams = params.originalParams || {};\n      options.getButtons = params.getButtons;\n    }\n\n    $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"inherit\");\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    if (showLoading) {\n      self.startLoading();\n    }\n\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n\n      setTimeout(function () {\n        $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"touch\");\n      }, 1000);\n\n      deferred.resolve();\n    }).fail(function () {\n      deferred.reject();\n    }).always(function () {\n      if (showLoading) {\n        self.endLoading();\n      }\n    });\n    return deferred.promise();\n  },\n\n  checkWidgetsData: function checkWidgetsData() {\n    var popupResponse = null;\n    if (bizagi.workportal.tablet.popup) {\n      if (bizagi.workportal.tablet.popup.instance) {\n        if (bizagi.workportal.tablet.popup.instance.getResponseValues) {\n          popupResponse = bizagi.workportal.tablet.popup.instance.getResponseValues(bizagi.workportal.tablet.popup.instance.getResponseValuesParams);\n          if (popupResponse === null) {\n            bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-complexgateway-path\"),\n            bizagi.localization.getResource(\"workportal-widget-complexgateway-error\"));\n            return -1;\n          } else {\n            bizagi.workportal.tablet.popup.instance.dontClose = false;\n            bizagi.workportal.tablet.popup.instance.close();\n          }\n        }\n      }\n    }\n\n    return popupResponse;\n  },\n\n  repaintComplexGateway: function repaintComplexGateway() {\n    var self = this;\n    if (self.focus !== undefined) {\n      if (self.focus.idCaseObject !== undefined) {\n        if (self.focus.idCaseObject.isComplex !== undefined) {\n          self.dataService.getWorkitems({\n            idCase: self.focus.idCaseObject.idCase }).\n          done(function (data) {\n            if (data.workItems.length == 1) {\n              if (data.workItems[0].taskType == \"ComplexGateway\") {\n                var transitions = data.workItems[0].transitions;\n\n                self.currentPopup = \"complexgateway\";\n                $(document).triggerHandler(\"popupWidget\", {\n                  widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_COMPLEXGATEWAY,\n                  options: {\n                    transitions: transitions,\n                    sourceElement: \".ui-bizagi-form\",\n                    insertAfter: \".ui-bizagi-form .ui-bizagi-button-container\",\n                    height: 'auto',\n                    offset: \"8 0\", //x y\n                    activeScroll: false,\n                    dontClose: true,\n                    closed: function closed() {\n                      self.currentPopup = null;\n                    } } });\n\n\n              }\n            }\n          });\n        }\n      }\n    }\n  },\n\n  /* METHOD TO ADD WARNINGS TO THE FORM\r\n     ======================================================*/\n  addWarning: function addWarning(message) {\n    var self = this;\n    self.warnings[message] = message;\n  },\n\n  /* METHOD TO ADD ERRORS TO THE FORM\r\n     ======================================================*/\n  addError: function addError(message) {\n    var self = this;\n    self.errors[message] = message;\n  },\n\n  /*  Executes a single button action\r\n     ======================================================= */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    // Disable routing button\n    if (!bizagi.util.isObjectEmpty(self.errors)) {\n      deferred.resolve();\n      if (bizagi.util.parseBoolean(buttonProperties.routing))\n      return deferred.promise();\n    }\n\n    // Call base\n    return this._super(buttonProperties);\n  },\n\n\n  getNavigation: function getNavigation() {\n    var params = this.getFormContainer().getParams();\n    return params.navigation;\n  },\n\n  getViewContainer: function getViewContainer() {\n    var params = this.getFormContainer().getParams();\n    return params.view_container;\n  },\n\n  isFloatingButtonsEnabled: function isFloatingButtonsEnabled() {\n    var navigation = this.getNavigation();\n    return navigation && navigation.isFloatingButtonsEnabled();\n  },\n\n  isFormButtonsEnabled: function isFormButtonsEnabled() {\n    var navigation = this.getNavigation();\n    return navigation && navigation.isFormButtonsEnabled();\n  },\n\n  /**\r\n      *   Adds an overlay to the form, and sets a waiting message\r\n      *\r\n      *   @argument {bool} delay Apply delay\r\n      */\n  startLoading: function startLoading() {\n    bizagi.loading.start();\n  },\n\n  /*\r\n     *   Removes the overlay and restores the form edition\r\n     */\n  endLoading: function endLoading() {\n    bizagi.loading.stop();\n  },\n\n  dispose: function dispose(params) {\n    var self = this;\n\n    // Active refresh on tablet\n    if (typeof params === \"undefined\" || typeof params.isRefresh === \"undefined\" || params.isRefresh == false) {\n      self._super();\n    }\n  },\n\n  failHandler: function failHandler(error) {\n    var self = this;\n    self._super(error);\n\n    var error_obj = {};\n    try {\n      error_obj = JSON.parse(error) || {};\n    } catch (e) {\n      error_obj = error.length && error.length > 1 ? error[0] : error;\n    } finally {\n\n      //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n      if (error_obj.error) error_obj = error_obj.error;\n      if (error_obj.error) error_obj = error_obj.error;\n\n      //trigger the routing event in order to refresh the case\n      if (typeof error_obj.code !== \"undefined\" && error_obj.code === \"AUTH_ERROR\") {\n        self.refreshAfterSessionIdle();\n      }\n    }\n  },\n\n  /**\r\n      * Display session IDLE message error and routing to process\r\n      */\n  refreshAfterSessionIdle: function refreshAfterSessionIdle() {\n    // Show notification message\n    this.showMessageSessionIdle();\n\n    // Refresh the process\n    this.routingToProcess();\n  },\n\n  /**\r\n      * Show message for session idle error\r\n      * @constructor\r\n      */\n  showMessageSessionIdle: function showMessageSessionIdle() {\n    $.notifier.add({\n      title: bizagi.localization.getResource(\"workportal-sessiontimeout-expired-title\", \"Your session has expired\"),\n      text: bizagi.localization.getResource(\"render-idle-expired-error\", \"Idle timer expired. For safety reasons this view will be refreshed automatically in 5 seconds. Note that any unsaved data is lost.\").replace(\"%s\", \"5\"),\n      sticky: false,\n      time: 5000 });\n\n  },\n\n  /**\r\n      * Refresh the process\r\n      */\n  routingToProcess: function routingToProcess() {\n    var self = this;\n    var params = self.params || {};\n    var form = self.getFormContainer();\n    var isStartForm = form && form.isStartForm();\n\n    setTimeout(function () {\n      if (isStartForm) {\n        var processParams = params && params.originalParams || {};\n        if (processParams && processParams.idProcess) {\n          bizagi.webpart.publish(\"render-start-form\", {\n            params: {\n              showProcess: true,\n              hasStartForm: true,\n              fromNewCase: true,\n              idProcess: processParams.idProcess,\n              displayName: processParams.displayName || \"\",\n              mapping: {},\n              type: \"Process\" } });\n\n\n        }\n      } else {\n        self.triggerHandler(\"routing\", {\n          idCase: params.idCase,\n          idWorkitem: params.idWorkitem });\n\n      }\n    }, 5000);\n  },\n\n  /**\r\n      * Build the container html\r\n      * @returns {*|jQuery}\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    var html = $.fasttmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() == \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /**\r\n      * Publish a global event that the facade will replicate, also will be triggered in the form\r\n      */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    var self = this;\n\n    if (!self.parent) {\n      if (self.observableElement) {\n        self.observableElement.trigger(eventType, data);\n      }\n    } else {\n      self.parent.triggerGlobalHandler(eventType, data);\n    }\n\n    return self._super(eventType, data);\n  },\n\n  /**\r\n      * Configure actions to complex-gateway\r\n      */\n  configureComplexGateway: function configureComplexGateway() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    if (form.length > 1) {\n      $(form.children()).each(function () {\n        if ($(this).hasClass('.bz-complex-gateway'))\n        complexGatewayContainer = this;\n      });\n    } else {\n      complexGatewayContainer = $(\".bz-complex-gateway\", form);\n    }\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Set events for complex gateway interface\n    $(\".bz-checkbox__input\", complexGatewayContainer).on(\"click\", function () {\n      var $selected = $(this);\n      var transitionId = $selected.data(\"value\") || \"\";\n\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      self.activeTransitions[transitionId] = $selected.is(':checked') || false;\n\n    });\n  },\n\n  /**\r\n      * Perform validation container\r\n      * @param form\r\n      * @param mainForm\r\n      * @returns {*}\r\n      */\n  getValidationsContainer: function getValidationsContainer(mainForm) {\n    var form = this;\n    var navigation = form.getNavigation();\n\n    if (typeof navigation !== \"undefined\") {\n      var view_container = form.getViewContainer();\n      var $currentView = typeof view_container !== \"undefined\" ? view_container.view : navigation.view;\n\n      if ($currentView && $currentView.footer) {\n        return $currentView.footer;\n      }\n    }\n\n    return this._super(form, mainForm);\n  } });","/**\r\n *   Name: Bizagi tablet Panel Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\n\n// Extends from container tablet base\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.panel\", bizagi.rendering.panel.prototype);\n// Extends itself\nbizagi.rendering.tablet.panel.extend(\"bizagi.rendering.tablet.panel\", {}, {});","/**\r\n *   Name: Bizagi Tablet ContentPanel Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the content panel class to adjust to tablet devices\r\n */\n\n// Extends from container tablet base\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.contentPanel\", bizagi.rendering.contentPanel.prototype);\n// Extends itself\nbizagi.rendering.tablet.contentPanel.extend(\"bizagi.rendering.tablet.contentPanel\", {}, {});","/*\r\n*   Name: Bizagi tablet Nested Form Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define a nested form container class for tablet devices\r\n*/\n\n// Extends from panel tablet base\nbizagi.rendering.tablet.panel.extend(\"bizagi.rendering.tablet.nestedForm\", {}, {});","/**\r\n *   Name: Bizagi Tablet Tab Container Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\n\n// Extends from container tablet base\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.tab\", bizagi.rendering.tab.prototype);\n// Auto extend\nbizagi.rendering.tablet.tab.extend(\"bizagi.rendering.tablet.tab\", {}, {\n\n  /* POST RENDER CONTAINER ACTIONS\r\n                                                                        =================================================*/\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n\n    this._super(container);\n\n    container.material_bizagi_tabs({\n      direction: this.properties.orientation,\n      active_index_tab: this.activeTab }).\n    on(\"updateActive\", function (ev, info) {\n      ev.stopPropagation();\n\n      self.setActiveTab(info.index);\n\n    });\n\n    $(\"> .bz-tabs > .bz-tab\", container).rippleEffect();\n  } });","/**\r\n *   Name: Bizagi Tablet Panel Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\n\n// Extends from container tablet base\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.tabItem\", bizagi.rendering.tabItem.prototype);\n// Extends itself\nbizagi.rendering.tablet.tabItem.extend(\"bizagi.rendering.tablet.tabItem\", {}, {\n  /**\r\n                                                                                 * Change selected item\r\n                                                                                 *\r\n                                                                                 * @param {} argument\r\n                                                                                 * @returns {}\r\n                                                                                 */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n    var self = this;\n\n    $.when(self.ready()).done(function () {\n      var tabItem = $(\"[data-reference='#ui-bizagi-tab-\" + self.properties.id + \"']\", self.parent.tabs);\n\n      tabItem.css(\"display\", \"\");\n      tabItem.click();\n    });\n  },\n  /* \r\n     *   Focus on container\r\n     */\n  focus: function focus() {\n    // Activate the tab if it hasn't been loaded\n    this.activate();\n\n    // Set this tab as an active container\n    this.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      *  Hides / Show container\r\n      *\r\n      * @param {} argument\r\n      * @returns {}\r\n      */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n\n    // Store in properties\n    self.properties.visible = bizagi.util.parseBoolean(argument);\n\n    $.when(self.ready()).done(function () {\n      var tabItem = $(\"[data-reference='#ui-bizagi-tab-\" + self.properties.id + \"']\", self.parent.tabs);\n      var activeTab = self.parent.container.material_bizagi_tabs(\"getActiveTab\");\n\n      // Hide - show the render\n      if (self.properties.visible) {\n        tabItem.css(\"display\", \"\");\n        if (self.properties.counter === activeTab.index) {\n          self.container.css(\"display\", \"\");\n          self.setAsActiveContainer();\n        } else {\n          self.container.css(\"display\", \"none\");\n        }\n      } else {\n        self.container.css(\"display\", \"none\");\n        tabItem.css(\"display\", \"none\");\n\n        // If we are focus in the same tab is going to be invisible\n        activeTab = self.parent.container.material_bizagi_tabs(\"getActiveTab\");\n\n        if (self.properties.counter === activeTab.index) {\n          self.parent.container.material_bizagi_tabs(\"moveToNextTab\");\n        } else {\n          self.parent.container.material_bizagi_tabs(\"refreshPositions\");\n        }\n      }\n    });\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    var self = this;\n    self._super();\n    $.when(self.ready()).done(function () {\n      self.parent.container.material_bizagi_tabs(\"refreshTab\", self.properties.id);\n    });\n  } });","/*\r\n*   Name: BizAgi tablet Horizontal Container Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the horizontal container class to adjust to tablet devices\r\n*/\n\n// Extends from container tablet base\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.horizontal\", bizagi.rendering.horizontal.prototype);\n// Auto extend\nbizagi.rendering.tablet.horizontal.extend(\"bizagi.rendering.tablet.horizontal\", {}, {});","/*\r\n*   Name: Bizagi tablet Layout Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the layout class to adjust to tablet devices\r\n*/\n\n// Extends from container desktop base\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.layout\", bizagi.rendering.layout.prototype);\n// Extends itself\nbizagi.rendering.tablet.layout.extend(\"bizagi.rendering.tablet.layout\", {}, {});","/*\r\n*   Name: Bizagi Tablet Accordion Container Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Extends from container tablet base\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.accordion\", bizagi.rendering.accordion.prototype);\n// Extends itself\nbizagi.rendering.tablet.accordion.extend(\"bizagi.rendering.tablet.accordion\", {}, {});","/*\r\n*   Name: BizAgi Tablet Panel Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Extends from container tablet base\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.accordionItem\", bizagi.rendering.accordionItem.prototype);\n// Extends itself\nbizagi.rendering.tablet.accordionItem.extend(\"bizagi.rendering.tablet.accordionItem\", {}, {\n\n\n  /* \r\n                                                                                            *   Change selected item \r\n                                                                                            */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n\n  },\n\n  /* \r\n     *   Focus on container\r\n     */\n  focus: function focus() {\n    this.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  } });","/*\r\n *   Name: Bizagi Tablet Group Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the group class to adjust to tablet devices\r\n */\n\n// Extends from container tablet base\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.group\", bizagi.rendering.group.prototype);\n// Auto extend\nbizagi.rendering.tablet.group.extend(\"bizagi.rendering.tablet.group\", {}, {\n\n  /**\r\n                                                                            * Method to customize the container's behaviour to add handlers\r\n                                                                            */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    $(\">h5.bz-collapsible__header\", self.container).bind(\"click\", function () {\n      $(self.container).toggleClass(\"bz-collapsible--collapsed\");\n    });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each container after processeds\r\n      * @param {} group      \r\n      */\n  postRenderContainer: function postRenderContainer(group) {\n    // Call base\n    this._super(group);\n    if (this.properties.collapse) {\n      this.collapse();\n    }\n  },\n\n  /**\r\n     * Check if group its open\r\n     * \r\n     * @return boolean\r\n     */\n  isOpen: function isOpen() {\n    return this.container.hasClass(\"bz-collapsible--collapsed\") ? false : true;\n  },\n\n  /**\r\n      * Focus on container     \r\n      */\n  focus: function focus() {\n    // Expand container\n    this.expand();\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Expands group container \r\n      * @returns {} \r\n      */\n  expand: function expand() {\n    if (!this.isOpen()) {\n      $(\">h5.bz-collapsible__header\", this.container).trigger(\"click\");\n    }\n  },\n\n  /**\r\n      * Collapses group container \r\n      * @returns {} \r\n      */\n  collapse: function collapse() {\n    if (this.isOpen()) {\n      $(\">h5.bz-collapsible__header\", this.container).trigger(\"click\");\n    }\n  },\n\n  /**\r\n      * Expands or collapse the container from actions\r\n      * @param {} argument      \r\n      */\n  toogleContainer: function toogleContainer(argument) {\n    if (argument) {\n      this.expand();\n    } else {\n      this.collapse();\n    }\n  } });","/*\r\n *   Name: Bizagi Tablet Section Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the section class to adjust to tablet devices\r\n */\n\n// Extends from container tablet base\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.section\", bizagi.rendering.section.prototype);\n// Auto extend\nbizagi.rendering.tablet.section.extend(\n\"bizagi.rendering.tablet.section\",\n{},\n{\n  /*\r\n   *   Render the container layout\r\n   */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"section\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      expandedClassIcon: self.expandedIcon,\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      guid: properties.guid,\n      displayAs: properties.displayAs });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /**\r\n      * Method to customize the container's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    //Fix para establecer la orientación correcta en el modal\n    var dir = self.getSectionOrientationRTL(self) ? \"rtl\" : \"ltr\";\n    $(self.container).attr(\"dir\", dir);\n\n    self.bind(\"reopenSection\", function () {\n      self.expand();\n    });\n\n    $(\">div.bz-section__content\", self.container).mobileModal({\n      displayName: self.properties.displayName,\n      displayNameParent: self.getParentDisplayName(),\n      anchor: $(\">div.bz-section__header\", self.container),\n      dir: dir,\n      appendTo: self.container,\n      onBeforeShow: function onBeforeShow(m) {\n        self.addToHistoryNavigation();\n        setTimeout(function () {\n          var p = self.getSectionParent(self.parent);\n          $('header[data-role=header]').css({ \"display\": \"none\" });\n          $(\"div[data-role=footer] .bz-form-buttons\").css({ \"display\": \"none\" });\n          if (!self.isFirstLevel(true)) {\n            $($('div[data-role=header]', p.container)[0]).css({ \"display\": \"none\" });\n          }\n        }, 250);\n      },\n\n      onShow: function onShow(m) {\n\n      },\n\n      onClose: function onClose(m) {\n        if (m) m.close();\n        self.removeFromHistoryNavigation();\n        var p = self.getSectionParent(self.parent);\n        if (self.isFirstLevel()) {\n          $('header[data-role=header]').css({ \"display\": \"block\" });\n          $(\"div[data-role=footer] .bz-form-buttons\").css({ \"display\": \"flex\" });\n        } else {\n          $($('div[data-role=header]', p.container)[0]).css({ \"display\": \"flex\" });\n        }\n      } });\n\n  },\n\n  /**\r\n      * Return true if the section is on the main form, or false if it is nested.\r\n      */\n  isFirstLevel: function isFirstLevel(isOpen) {\n    var form = this.getFormContainer();\n    var params = form.getParams() || {};\n    var selected = params.selectedSection;\n    if (typeof selected === \"undefined\") return true;\n    return isOpen ? selected.length <= 1 : selected.length === 0;\n  },\n\n  /**\r\n      * Set the selected section opened\r\n      */\n  addToHistoryNavigation: function addToHistoryNavigation() {\n    var form = this.getFormContainer();\n    var params = form.getParams() || {};\n    if (typeof params.selectedSection === \"undefined\") {\n      form.setParam(\"selectedSection\", []);\n      params = form.getParams();\n    }\n    params.selectedSection.push(this.properties.id);\n  },\n\n  /**\r\n      * Unset the actual section as a opened section\r\n      */\n  removeFromHistoryNavigation: function removeFromHistoryNavigation() {\n    var form = this.getFormContainer();\n    var params = form.getParams() || {};\n    if (typeof params.selectedSection !== \"undefined\") {\n      params.selectedSection.pop();\n    }\n  },\n\n  /**\r\n      * Check if group its open\r\n      *\r\n      * @return boolean\r\n      */\n  isOpen: function isOpen() {\n    return this.container.hasClass(\"bz-section--collapsed\") ? false : true;\n  },\n\n  /**\r\n      * Focus on container\r\n      */\n  focus: function focus() {\n    // Expand container\n    this.expand();\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Expands group container\r\n      * @returns {}\r\n      */\n  expand: function expand() {\n    $(\">div.bz-section__header\", this.container).trigger(\"click\");\n  },\n\n  /**\r\n      * Collapses group container\r\n      * @returns {}\r\n      */\n  collapse: function collapse() {\n    if (this.isOpen()) {\n      $(\">div.bz-section__header\", this.container).trigger(\"click\");\n    }\n  },\n\n  /**\r\n      * Expands or collapse the container from actions\r\n      * @param {} argument\r\n      */\n  toogleContainer: function toogleContainer(argument) {\n    if (argument) {\n      this.expand();\n    } else {\n      this.collapse();\n    }\n  } });","/**\r\n *   Name: Bizagi tablet Search Form Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\n\nbizagi.rendering.tablet.form.extend(\"bizagi.rendering.tablet.searchForm\", bizagi.rendering.searchForm.prototype);\n// Extends itself\nbizagi.rendering.tablet.searchForm.extend(\"bizagi.rendering.tablet.searchForm\", {}, {\n  /**\r\n                                                                                       * Render the results of the query\r\n                                                                                       * @returns {*} Resolved in each device\r\n                                                                                       */\n  renderResult: function renderResult() {\n    var self = this;\n    var properties = self.properties;\n\n    // Creates grid definition\n    var data = {};\n    data.properties = {\n      displayName: self.getResource(\"render-search-advanced-results-label\"),\n      type: \"grid\",\n      xpath: \"searchForm\" + properties.id,\n      id: properties.id,\n      skipInitialLoad: true,\n      rowsPerPage: 10,\n      visible: false,\n      sortBy: properties.sortBy,\n      sortOrder: properties.sortOrder,\n      overrideGetRemoteData: function overrideGetRemoteData(params) {\n        return self.getRemoteData(params);\n      } };\n\n\n    data.elements = [];\n\n    // Creates columns\n    var columns = properties.columns;\n    $.each(columns, function (i) {\n      var column = {\n        render: {} };\n\n\n      column.render.properties = {\n        displayName: columns[i].caption,\n        xpath: columns[i].xpath,\n        editable: false };\n\n\n      $.extend(column.render.properties, self.parseAdditionalProperties(columns[i].dataType));\n\n      // Next conditional added to print only columns and not labels\n      // if type = label then column is not rendered on the results table\n      if (columns[i].dataType == 0)\n      column.render.properties.columnVisible = false;\n\n      // if column is number or monetary push allowDecimals property\n      if (columns[i].dataType == 7 || columns[i].dataType == 8)\n      column.render.properties.allowDecimals = columns[i].allowDecimals;\n\n      // if column is real or float set allowDecimals property to true\n      if (columns[i].dataType == 10 || columns[i].dataType == 11)\n      column.render.properties.allowDecimals = true;\n\n      // if column is date push showtime property\n      if (columns[i].dataType == 12)\n      column.render.properties.showTime = columns[i].showTime;\n\n      data.elements.push(column);\n    });\n\n    var grid = self.renderFactory.getRender({\n      type: \"grid\",\n      data: data,\n      parent: self,\n      mode: self.getMode() });\n\n\n    grid.properties.inlineAdd = false;\n    grid.properties.allowDelete = false;\n    grid.properties.allowAdd = false;\n    grid.properties.allowEdit = false;\n\n    // Saves reference\n    self.resultsGrid = grid;\n\n    return grid.render();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each container after processed\r\n      * @param container\r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var searchCriteria = container.find(\".bz-container__search-criteria\");\n    var results = container.find(\".bz-container__search-results\");\n    var childrenElements = searchCriteria.children();\n    var mode = self.getMode();\n\n    // Process children elements\n    self.container = container;\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) child.postRenderContainer(childElement);\n        }\n      }\n    });\n\n    // Process result\n    var grid = $(results.children()[0]);\n    self.resultsGrid.postRenderElement(grid);\n\n    // Apply handlers\n    if (mode === \"execution\") {\n      self.configureHandlers();\n    }\n\n    // Configure view\n    if (mode === \"design\") {\n      self.configureDesignView();\n    }\n\n    // Configure view\n    if (mode === \"layout\") {\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n\n  },\n\n  /**\r\n      * Customize the container's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Saves reference\n    self.criteriaContainer = $(\".bz-container__search-criteria\", self.container);\n    self.resultsContainer = $(\".bz-container__search-results\", self.container);\n\n    // Bind to grid row select event\n    self.resultsGrid.bind(\"rowSelected\", function (e, ui) {\n      if (self.properties.searchParams.hasOwnProperty(\"multiSelect\")) {\n        self.trigger(\"multiSelect\", ui);\n      } else {\n        // Trigger event to bubble up to main container\n        self.trigger(\"instanceSelected\", ui);\n      }\n    });\n  },\n\n  /**\r\n      * Refresh the result panel, making it to query data with current criteria\r\n      */\n  refreshResults: function refreshResults() {\n    var self = this;\n\n    self.trigger(\"instancerefresh\");\n\n    self.resultsGrid.refresh();\n  },\n\n  /**\r\n      * Method added for IPad version. Before showing search results form\r\n      */\n  onSearchFinished: function onSearchFinished() {\n    var self = this;\n\n    if (!self.properties.deviceMaxRecordsExceeded) {\n\n      // Next line returns visibility with the results of the search\n      self.resultsGrid.changeVisibility(true);\n\n      if (self.properties) {\n        if (self.properties.records == 0) {\n          $(\".bz-container__search-results label\", self.container).hide();\n        } else {\n          $(\".bz-container__search-results label\", self.container).show();\n        }\n      }\n    }\n  } });","/**\r\n *   Name: Bizagi Tablet Render Text Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the text render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.text\", bizagi.rendering.text.prototype);\n// Extends itself\nbizagi.rendering.tablet.text.extend(\"bizagi.rendering.tablet.text\", {}, {\n\n  //#region Side effects functions\n\n  /**\r\n   * Template method to implement in each device to customize each render after processed\r\n   */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    // Set the default maxlenght for the input\n    if (this.properties.maxLength > 0) {\n      this.input.attr('maxlength', this.properties.maxLength);\n    }\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"text-readOnly\");\n    var value = this.getValue();\n\n    if (typeof value !== \"undefined\" && value !== null) {\n      value = bizagi.util.sanitizeHTML(value);\n    }\n\n    var data = {\n      value: value || \"\",\n      editable: this.properties.editable };\n\n\n    return $.fasttmpl(template, data);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    value = this.validateValue(decodedValue, self.properties.maxLength);\n\n    // Set internal value\n    self.setValue(value, false);\n\n    // Set value in input\n    if (self.properties.editable) {\n      self.input.val(value);\n    } else {\n      $(\".bz-text-readonly\", self.getControl()).html(bizagi.util.sanitizeHTML(value));\n    }\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      self.retypeDouble(control);\n    });\n  },\n\n  /**\r\n      * Retype actions\r\n      * @param {} control\r\n      */\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n    var currentValue = control.val();\n    var isVisible = $(control).attr(\"type\") !== \"hidden\" && $(control).css(\"display\") !== \"none\" && $(control).css(\"visibility\") !== \"hidden\";\n\n    if (isVisible) {\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n        // Check that there is something in the value or if a value has already been set\n        if (currentValue === \"\" || currentValue === control.attr(\"newValue\")) return;\n\n        self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"));\n\n      } else {\n        // Check that there is something in the value\n        if (currentValue === \"\") return;\n\n        if (currentValue !== control.data(\"oldValue\")) {\n          self.setValue(\"\");\n\n          self.setValidationMessage(self.getResource(\"render-text-retype-error\"));\n          control.val(\"\");\n\n          setTimeout(function () {\n            control.focus();\n          }, 100);\n\n        } else {\n          control.data(\"newValue\", currentValue);\n        }\n        control.data(\"oldValue\", \"\");\n        if (control.data('ui-tooltip')) control.tooltip('destroy');\n      }\n    }\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return this.properties.editable ? $(\"input\", $context) : $(\".bz-text-readonly\", $context);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    this._super(control, currentValue, currentTitle);\n\n    $('body').bind('touchmove', function (e) {\n      $('body').unbind('touchmove');\n      if (control.data('ui-tooltip')) control.tooltip('destroy');\n    });\n  },\n\n  setValidationMessage: function setValidationMessage(message) {\n    // Call base\n    this._super(message);\n    if (this.cloneRender) {\n      this.cloneRender.setValidationMessage(message);\n    }\n  }\n\n  //#endregion Side effects functions\n});","/**\r\n *   Name: Bizagi Tablet Render Readonly Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the readonly render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.readonly\", bizagi.rendering.readonly.prototype);\n// Extends itself\nbizagi.rendering.tablet.readonly.extend(\"bizagi.rendering.tablet.readonly\", {}, {});","/**\r\n *   Name: Bizagi Tablet Render Text Extension\r\n *   Author: UI Forms Team\r\n *   Comments: Extended text implementation\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.extendedText\", bizagi.rendering.extendedText.prototype);\n// Extends itself\nbizagi.rendering.tablet.extendedText.extend(\"bizagi.rendering.tablet.extendedText\", {\n  minLines: 2,\n  maxLines: 8,\n  maxCharactersToShow: 200 },\n{\n\n  //#region Side effects functions\n\n  /**\r\n   * Template method to implement in each device to customize each render after processed\r\n   */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n    self.textarea = self.getControl().find(\"textarea\");\n    if (self.textarea) self.textarea.css({ resize: \"vertical\" });\n  },\n\n\n  /**\r\n      * Update or init the element data\r\n      * @param {} data\r\n      */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n    var maxLines = this.properties.maxLines;\n    this.properties.maxLines = maxLines > this.Class.maxLines ? this.Class.maxLines : maxLines < this.Class.minLines ? this.Class.minLines : maxLines;\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: this });\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"extendedText-readOnly\");\n    var value = this.getValue();\n    value = typeof value !== \"undefined\" && value !== null ? bizagi.util.sanitizeHTML(value) : \"\";\n    var showChar = this.Class.maxCharactersToShow;\n\n    var startString = value.substr(0, showChar);\n    var endString = value.substr(showChar - 1, value.length - showChar);\n\n    var data = {\n      \"value\": value,\n      \"startString\": startString,\n      \"endString\": endString };\n\n\n    return $.fasttmpl(template, data);\n  },\n\n  /**\r\n      * Sets the value in the redered control\r\n      * @param {} value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var decodedValue = bizagi.util.decodeURI(value);\n    decodedValue = !bizagi.util.isEmpty(decodedValue) && typeof decodedValue !== \"string\" ? decodedValue.toString() : decodedValue;\n    value = self.validateValue(typeof decodedValue == \"string\" ? decodedValue : \"\", self.properties.maxLength);\n\n    // Call base        \n    self.setValue(value, false);\n\n    // Set value in input\n    if (self.properties.editable) {\n      self.textarea.val(value);\n    } else {\n      var encodedText = bizagi.util.encodeHtmlText(self.getDisplayValue());\n      $(\".bz-textarea-readonly\", self.getControl()).html(encodedText);\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Define max length of element\n    if (self.properties.maxLength > 0) {\n      self.textarea.attr(\"maxlength\", self.properties.maxLength);\n      self.actualMaxLength = self.properties.maxLength;\n    }\n    $(self.textarea).bind(\"focus keyup paste\", function (e) {\n      if (e.which === 8 || e.which === 46) {\n        var currentRow = self.textarea.prop(\"rows\");\n        if (currentRow > self.properties.maxLines) {\n          self.textarea.prop(\"rows\", self.properties.maxLines);\n        }\n      }\n      self.updateTextareaSize(this);\n    });\n\n    $(self.textarea).bind(\"blur\", function (e) {\n      self.textarea.prop(\"rows\", self.properties.maxLines);\n    });\n  },\n\n  /**\r\n      * Sets the functions when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n\n    var $control = this.getControl();\n    $(\".bz-textarea-readonly\", $control).on(\"click\", \".bz-read-more\", function (e) {\n      if ($(e.delegateTarget).hasClass(\"bz-textarea-readonly--active\")) {\n        $(e.delegateTarget).removeClass(\"bz-textarea-readonly--active\");\n        $(this).html(self.getResource(\"workportal-project-discussion-comment-viewmore\"));\n      } else {\n        $(e.delegateTarget).addClass(\"bz-textarea-readonly--active\");\n        $(this).html(self.getResource(\"workportal-project-discussion-comment-viewless\"));\n      }\n      return false;\n    });\n  },\n\n  /**\r\n      * Changes control's height when it's auto extended\r\n      * @param {Object} control HTML Object\r\n      */\n  updateTextareaSize: function updateTextareaSize(textarea) {\n    if (this.properties.autoExtend) {\n      var currentRows = $(textarea).prop(\"rows\");\n      if (textarea.scrollHeight > textarea.offsetHeight && currentRows >= this.Class.minLines && currentRows < this.Class.maxLines) {\n        //Extend the rows\n        $(textarea).prop(\"rows\", currentRows + 1);\n        this.updateTextareaSize(textarea);\n      }\n    }\n  },\n\n  /**\r\n      * Handler of retype double actions\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input, textarea\", element);\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      var previousValue = self.previousValue;\n      var value = self.value;\n\n      if (previousValue != null && value != previousValue) {\n        if ($(this).data(\"newValue\") != undefined && control.val() != $(this).data(\"newValue\")) {\n          $(this).data().newValue = undefined;\n        }\n      }\n\n      self.retypeDouble(control);\n    });\n  },\n\n  /**\r\n      * Retype actions\r\n      * @param {} control\r\n      */\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n    var currentValue = control.val();\n    var isVisible = $(control).attr(\"type\") !== \"hidden\" && $(control).css(\"display\") !== \"none\" && $(control).css(\"visibility\") !== \"hidden\";\n\n    if (isVisible) {\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n        // Check that there is something in the value or if a value has already been set\n        if (currentValue === \"\" || currentValue === control.attr(\"newValue\")) return;\n\n        self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"));\n\n      } else {\n        // Check that there is something in the value\n        if (currentValue === \"\") return;\n\n        if (currentValue !== control.data(\"oldValue\")) {\n          self.setValue(\"\");\n\n          self.setValidationMessage(self.getResource(\"render-text-retype-error\"));\n          control.val(\"\");\n\n          setTimeout(function () {\n            control.focus();\n          }, 100);\n\n        } else {\n          control.data(\"newValue\", currentValue);\n        }\n        control.data(\"oldValue\", \"\");\n        if (control.data('ui-tooltip')) control.tooltip('destroy');\n      }\n    }\n  },\n\n  /**\r\n      * Gets jQuery Object to stylize\r\n      * @param {jQuery Object} $context jQuery Object\r\n      */\n  getElementsToStylize: function getElementsToStylize($context) {\n    return this.properties.editable ? $(\"textarea\", $context) : $(\".bz-textarea-readonly\", $context);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    this._super(control, currentValue, currentTitle);\n\n    $('body').bind('touchmove', function (e) {\n      $('body').unbind('touchmove');\n      if (control.data('ui-tooltip')) control.tooltip('destroy');\n    });\n  },\n\n  setValidationMessage: function setValidationMessage(message) {\n    // Call base\n    this._super(message);\n\n    if (this.cloneRender) {\n      this.cloneRender.setValidationMessage(message);\n    }\n  }\n\n  //#endregion Side effects functions\n});","/**\r\n *   Name: Bizagi Tablet Render Label Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the label render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.label\", bizagi.rendering.label.prototype);\n// Extends itself\nbizagi.rendering.tablet.label.extend(\"bizagi.rendering.tablet.label\", {}, {\n  /**\r\n                                                                            * Method to render non editable values\r\n                                                                            */\n  renderReadOnly: function renderReadOnly() {\n    this.setValue(this.properties.displayName);\n    return this._super();\n  },\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // DON'T DO ANYTHING\n  } });","/**\r\n *   Name: Bizagi Tablet Render Number Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the number render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.number\", bizagi.rendering.number.prototype);\n// Extends itself\nbizagi.rendering.tablet.number.extend(\"bizagi.rendering.tablet.number\", {}, {\n\n  /**\r\n                                                                               * Method to customize each render after processed in read-only mode\r\n                                                                               * @returns {*|jQuery}\r\n                                                                               */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"number\");\n\n    return $.fasttmpl(template, {\n      value: self.getDisplayValue(),\n      editable: self.properties.editable,\n      type: \"text\",\n      isDesign: self.getMode() !== \"execution\" });\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call base\n    self.setValue(value, false);\n\n    // Set value in input\n    if (value != null && self.properties.editable) {\n      self.numericInput.val(value);\n\n      self.value = self.properties.value = value;\n\n      // Formats the input\n      self.executeFormatCurrencyPlugin();\n    }\n  },\n\n  /**\r\n      * Retype function\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      var previousValue = self.previousValue;\n      var value = self.value;\n      var typeControl = self.parent.properties.type;\n\n      if (typeControl === \"grid\") {\n        if (previousValue != null && value !== previousValue) {\n          if ($(this).data(\"newValue\") !== undefined && control.val() !== $(this).data(\"newValue\"))\n          $(this).data().newValue = undefined;\n        }\n\n        self.retypeDouble(control);\n      } else {\n        self.retypeDouble(control);\n      }\n    });\n  },\n\n  /**\r\n      * Retype function\r\n      * @param control\r\n      */\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n    var currentValue = control.val();\n    var isVisible = $(control).attr(\"type\") !== \"hidden\" && $(control).css(\"display\") !== \"none\" &&\n    $(control).css(\"visibility\") !== \"hidden\";\n\n    if (isVisible && $(this).data(\"newValue\") == undefined) {\n\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n        // Check that there is something in the value or if a value has already been set\n        if (currentValue === \"\" || currentValue === control.attr(\"newValue\")) return;\n\n        self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"));\n\n      } else {\n        // Check that there is something in the value\n        if (currentValue === \"\") return;\n\n        if (currentValue !== control.data(\"oldValue\")) {\n          self.setValue(\"\");\n\n          self.createTooltip(control, \"\", self.getResource(\"render-text-retype-error\"));\n        } else {\n\n          control.data(\"newValue\", currentValue);\n          control.data(\"oldValue\", \"\");\n\n          // Destroy tooltips\n          control.tooltip(\"destroy\");\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"input\", $context);\n  } });","/**\r\n *   Name: Bizagi Tablet Render Money Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the money render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.money\", bizagi.rendering.number.prototype);\n// Extends itself\nbizagi.rendering.tablet.money.extend(\"bizagi.rendering.tablet.money\", bizagi.rendering.money.prototype);\n// Extends itself\nbizagi.rendering.tablet.money.extend(\"bizagi.rendering.tablet.money\", {}, {\n\n  /**\r\n                                                                             * Method to customize each render after processed in read-only mode\r\n                                                                             * @returns {*|jQuery}\r\n                                                                             */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"number\");\n\n    return $.fasttmpl(template, {\n      value: self.getDisplayValue(),\n      editable: self.properties.editable,\n      type: \"text\",\n      isDesign: self.getMode() !== \"execution\" });\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call base\n    self.setValue(value, false);\n\n    // Set value in input\n    if (value !== undefined && value !== null && self.properties.editable) {\n      self.numericInput.val(value);\n\n      // Formats the input\n      self.executeFormatCurrencyPlugin();\n    }\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"input\", $context);\n  } });","/*\r\n *   Name: Bizagi Rendering Tablet numberScientificNotation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a base class to define the Scientific number notation\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.numberScientificNotation\", bizagi.rendering.numberScientificNotation.prototype);\n// Extends itself\nbizagi.rendering.tablet.numberScientificNotation.extend(\"bizagi.rendering.tablet.numberScientificNotation\", {}, {\n\n  /*\r\n                                                                                                                   * Template method to implement in each device to customize each render after processed\r\n                                                                                                                   */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    self.inputDisplay = $('input', control).first();\n    self.numericInput = self.input = $('input', control).last();\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n    // Attach Format Currency Plugin to format the input\n    self.attachFormatSientificNotation();\n\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var value = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 38);\n    var displayValue = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 20);\n\n\n    this._super(displayValue);\n\n    // Set value in input\n    if (value != null && properties.editable) {\n      self.numericInput.val(value);\n      self.inputDisplay.val(displayValue);\n    }\n\n  },\n\n  attachFormatSientificNotation: function attachFormatSientificNotation() {\n    var self = this;\n\n    self.inputDisplay.focus(function () {\n      $(this).val(self.getDisplayValue());\n    });\n\n    // Attach events\n    self.inputDisplay.blur(function () {\n      var form = self.getFormContainer();\n\n      if (typeof form.validationController == \"undefined\") {\n        var $canvas = form.getValidationsContainer();\n        form.validationController = new bizagi.command.controllers.validation(form, self.validations, $canvas);\n      }\n\n      var scientificNotationNumber = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol, 38);\n      var scientificNotationNumberDisplay = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol, 20);\n\n      self.numericInput.val(scientificNotationNumber);\n      self.inputDisplay.val(scientificNotationNumberDisplay);\n      // Updates internal value\n      self.setValue(scientificNotationNumber);\n    });\n  } });","/**\r\n *   Name: Bizagi Tablet Render Date Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Date render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.date\", bizagi.rendering.date.prototype);\n// Extends itself\nbizagi.rendering.tablet.date.extend(\"bizagi.rendering.tablet.date\", {\n  MAX_YEARS_DISPLAY: 100 },\n{\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var dateFormat = properties.dateFormat;\n    var ud = bizagi.util.dateFormatter;\n\n    var format = dateFormat.substring(0, dateFormat.search(\"h|H\") != -1 ? dateFormat.search(\"h|H\") - 1 : dateFormat.length);\n    var value = ud.formatDate(ud.getDateFromFormat(self.getValue(), format, self.i18n), properties.fullFormat);\n    var data = {\n      value: self.getMode() !== \"execution\" ? properties.fullFormat : value,\n      editable: properties.editable };\n\n\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    return $.fasttmpl(template, data);\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.input = $(\"input\", this.getDateControl());\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var dateControl = self.getControl();\n    var inputDate = $(\".bz-input-icon\", dateControl);\n\n    self.configureMobiscollCalendar();\n    self.calendarInstance = inputDate.mobiscroll(\"getInst\");\n\n    // Bind event on input date\n    inputDate.on(\"focus\", function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (bizagi.util.isCordovaSupported() && bizagi.util.isAndroidDevice()) {\n        cordova.plugins.Keyboard.disableScroll(true);\n        cordova.plugins.Keyboard.close();\n      }\n      self.calendarInstance.show();\n    });\n\n    inputDate.attr(\"keyboard\", \"disable\");\n  },\n\n  /**\r\n      * Initializes the Mobiscroll Calendar with the indicated configuration\r\n      */\n  configureMobiscollCalendar: function configureMobiscollCalendar() {\n    var self = this;\n    var properties = self.properties;\n    var controlElements = properties.showTime ? [\"calendar\", \"time\"] : [\"calendar\"];\n    var dateControl = self.getControl();\n    var inputDate = $(\".bz-input-icon\", dateControl);\n    var orientation = self.getOrientation();\n\n    inputDate.mobiscroll().calendar({\n      mode: \"mixed\",\n      touchUi: true,\n      display: \"bottom\",\n      controls: controlElements,\n      min: self.getNormalizeDate(new Date(properties.minValue)),\n      max: self.getNormalizeDate(new Date(properties.maxValue)),\n      defaultValue: self.getDisplayValue(),\n      timeFormat: properties.timePickerFormat ? self.getTimeFormat(properties.timePickerFormat) : \"\",\n      dateFormat: properties.datePickerFormat,\n      dateWheels: 'dd/MM/yyyy',\n      select: \"single\",\n      selectType: \"Day\",\n      rtl: orientation && orientation === \"rtl\",\n      lang: bizagi.util.languages[BIZAGI_LANGUAGE] || bizagi.localization.language || \"en\",\n      buttons: self.properties.showTime ?\n      [\n      {\n        text: self.getResource(\"render-timeentry-now\"),\n        handler: function handler() {\n          self.setValueFromCalendarButtons(new Date(), function (v) {\n            self.getCalendarInstance().setVal(v, false, false, false);\n            self.getCalendarInstance().hide();\n          });\n        } },\n\n      {\n        text: self.getResource(\"render-plugin-search-users-select-link\"),\n        handler: \"set\" },\n\n      {\n        text: self.getResource(\"render-plugin-search-users-clear-button-name\"),\n        handler: function handler(e, inst) {\n          inst.clear();\n        } }] :\n\n\n      [\n      {\n        text: self.getResource(\"render-timeentry-now\"),\n        handler: function handler() {\n          self.setValueFromCalendarButtons(new Date(), function (v) {\n            self.getCalendarInstance().setVal(v, false, false, false);\n            self.getCalendarInstance().hide();\n          });\n        } },\n\n      {\n        text: self.getResource(\"render-plugin-search-users-clear-button-name\"),\n        handler: function handler(e, inst) {\n          inst.clear();\n        } }],\n\n\n      onSet: function onSet() {\n        self.onChangeHandler();\n      },\n      onDayChange: function onDayChange(obj) {\n        self.setValueFromCalendarButtons(obj.date, function (v) {\n          self.getCalendarInstance().setVal(v, false, false, false);\n          if (!self.properties.showTime) self.getCalendarInstance().hide();\n        });\n      },\n      onClear: function onClear() {\n        self.setValueFromCalendarButtons(null, function (v) {\n          self.getCalendarInstance().setVal(v, false, false, false);\n          self.getCalendarInstance().hide();\n        });\n      },\n      onBeforeShow: function onBeforeShow(event, inst) {\n        //self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n\n        inst.option({\n          max: bizagi.util.dateFormatter.getDateFromInvariant(properties.maxValue, properties.showTime),\n          min: bizagi.util.dateFormatter.getDateFromInvariant(properties.minValue, properties.showTime) });\n\n\n        //TODO temporal fix in ios smartphone when a notification container is already displayed (QAF-6385 / MOB-171), review mobiscroll.min versions\n        if (bizagi.util.isiOSDevice()) {\n          $(\".ui-bizagi-notifications-container\").css(\"display\", \"none\");\n        }\n      },\n      onClose: function onClose(event, inst) {\n        // Your custom event handler goes here\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"auto\");\n      },\n      onShow: function onShow(event, inst) {\n        $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"hidden\");\n      } });\n\n  },\n\n  /**\r\n      * Get the DOM Control\r\n      */\n  getDateControl: function getDateControl() {\n    return $(\".bz-input-icon\", this.getControl());\n  },\n\n  /**\r\n      * Set the control value when the control change\r\n      */\n  onChangeHandler: function onChangeHandler(isNow) {\n    var self = this;\n    var properties = self.properties;\n    var currentDate = self.getNormalizeDate(self.getCalendarInstance().getVal());\n    var currentDateString = \"\";\n    var ud = bizagi.util.dateFormatter;\n\n    if (!currentDate || currentDate == 0) {\n      return;\n    }\n    //Attemp set the value of the datepicker control. If not valid go back to the previous.\n    var previousValue = self.value;\n\n    //sets the value with the current format date, changed to use the same displayValue method\n    if (isNow == true) {\n      currentDate = self.getNormalizeDate(new Date());\n      currentDateString = ud.formatDate(currentDate, \"MM/dd/yyyy HH:mm:ss\");\n      self.value = currentDateString;\n    } else {\n      self.value = ud.formatInvariant(currentDate, properties.showTime);\n    }\n\n    if (isNow || currentDate) {\n      self.value = previousValue;\n      currentDateString = ud.formatDate(currentDate, \"MM/dd/yyyy HH:mm:ss\");\n      self.setValue(currentDateString);\n      self.setDisplayValue(currentDateString);\n    }\n  },\n\n  /**\r\n      * Apply the final format that will be showed on the input\r\n      */\n  getFullFormatedDate: function getFullFormatedDate(currentDate, currentTime) {\n    var fullDate = \"\";\n\n    if (currentDate.length > 0) {\n      fullDate = currentDate;\n    } else if (currentDate !== undefined) {\n      fullDate = bizagi.util.dateFormatter.formatISO(currentDate, false);\n    } else {\n      fullDate = bizagi.util.dateFormatter.formatISO(new Date(), false);\n    }\n\n    fullDate += currentTime;\n    var dateFromFormat = bizagi.util.dateFormatter.getDateFromFormat(fullDate, \"yyyy-MM-dd H:m\");\n\n    return bizagi.util.dateFormatter.formatDate(dateFromFormat !== 0 ? dateFromFormat : currentDate, \"yyyy-MM-dd H:mm:ss\");\n  },\n\n  /*\r\n      *  Checks if the date could be localized using site language\r\n      */\n  preprocessDateValue: function preprocessDateValue(date) {\n    return bizagi.util.dateFormatter.formatDate(date, this.properties.fullFormat);\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var bValid = true;\n    var value = self.getValue();\n\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable)) {\n        value = self.getNormalizeDate(bizagi.util.dateFormatter.getDateFromInvariant(value));\n\n        if (value != 0) {\n          // Check min value and max value\n          if (properties.minValue && typeof properties.minValue === \"string\") {\n            bValid = self.checkMinAndMaxValue(value, true, properties, invalidElements) ? false : bValid;\n          }\n\n          if (properties.maxValue && typeof properties.maxValue === \"string\") {\n            bValid = self.checkMinAndMaxValue(value, false, properties, invalidElements) ? false : bValid;\n          }\n        }\n      }\n    }\n\n    if (bizagi.util.parseBoolean(properties.editable)) {\n      // Check required\n      if (properties.required && !self.hasValue()) {\n        self.showMandatoryMessage(properties, invalidElements);\n      }\n    }\n\n    if (bValid) {\n      // Clear error message\n      self.setValidationMessage(\"\");\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * To validate the min and max values\r\n      * @param {} value\r\n      * @param {} isMinValue\r\n      * @param {} properties\r\n      * @param {} invalidElements\r\n      */\n  checkMinAndMaxValue: function checkMinAndMaxValue(value, isMinValue, properties, invalidElements) {\n    var vValue = this.getNormalizeDate(\n    bizagi.util.dateFormatter.getDateFromInvariant(isMinValue ? properties.minValue : properties.maxValue));\n\n\n    //In case the value from the minValue or maxValue are assigned from a Date control that does not have the option  \"showTime!\n    if (vValue == 0) {\n      var resultValue = \"\";\n      if (properties.timeFormat.indexOf(\":ss\") == -1) {\n        if (isMinValue) {\n          resultValue = properties.minValue + \":00\";\n        } else {\n          resultValue = properties.maxValue + \":00\";\n        }\n      }\n      vValue = this.getNormalizeDate(bizagi.util.dateFormatter.getDateFromFormat(resultValue, properties.fullFormat + \":ss\"));\n    }\n\n    if (isMinValue && value.getTime() < vValue.getTime() || !isMinValue && value.getTime() > vValue.getTime()) {\n      var formatedDate = bizagi.util.dateFormatter.formatDate(vValue, properties.fullFormat);\n      var message = \"\";\n\n      if (isMinValue) {\n        message = this.getResource(\"render-date-minimum-validation\").\n        replaceAll(\"#label#\", properties.displayName).\n        replaceAll(\"#minValue#\", formatedDate);\n      } else {\n        message = this.getResource(\"render-date-maximum-validation\").\n        replaceAll(\"#label#\", properties.displayName).\n        replaceAll(\"#maxValue#\", formatedDate);\n      }\n\n      invalidElements.push({ xpath: properties.xpath, message: message });\n      return true;\n    }\n    return false;\n  },\n\n  /**\r\n      * To show the mandatory values message\r\n      * */\n  showMandatoryMessage: function showMandatoryMessage(properties, invalidElements) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n\n    invalidElements.push({ xpath: properties.xpath, message: message });\n\n    return false;\n  },\n\n  setHour: function setHour(date) {\n    return date.replace(/\\s(\\d:)/, \" 0$1\");\n  },\n\n  /**\r\n      * Cleans the control fields as it requires\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n\n    self.date = undefined;\n    self.time = undefined;\n    self.timeS = undefined;\n    self.setValue(\"\");\n    self.setDisplayValue(\"\");\n  },\n\n  isValidMinMaxValue: function isValidMinMaxValue() {\n    var self = this;\n    var isValid = true;\n    var value = self.getValue();\n\n    if (value) {\n      value = bizagi.util.dateFormatter.getDateFromInvariant(value);\n\n      if (value !== 0) {\n        // Check min value and max value\n        if (self.properties.minValue && typeof self.properties.minValue === \"string\") isValid = self.validateMinAndMaxValue(value, true);\n\n        if (self.properties.maxValue && typeof self.properties.maxValue === \"string\") isValid = self.validateMinAndMaxValue(value, false);\n      }\n    }\n\n    return isValid;\n  },\n\n  validateMinAndMaxValue: function validateMinAndMaxValue(currentDate, isMinValue) {\n    var self = this;\n    var date = isMinValue ? self.properties.minValue : self.properties.maxValue;\n    var formattedDate = self.getNormalizeDate(bizagi.util.dateFormatter.getDateFromInvariant(date));\n\n    return !(\n    isMinValue && currentDate.getTime() < formattedDate.getTime() ||\n    !isMinValue && currentDate.getTime() > formattedDate.getTime());\n\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"input, .bz-input--readonly\", $context);\n  },\n\n  /**\r\n      * Gets Mobiscroll Calendar's instance\r\n      * @returns {Object} Mobiscroll's instance\r\n      */\n  getCalendarInstance: function getCalendarInstance() {\n    return this.calendarInstance || (this.calendarInstance = $(this.getDateControl()).mobiscroll(\"getInst\"));\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    if (self.getMode() !== \"execution\") {\n      return;\n    }\n\n    var properties = self.properties;\n    var dateControl = self.getControl();\n    var input = $(\".bz-input-icon__input, .bz-input--readonly\", dateControl);\n    var ud = bizagi.util.dateFormatter;\n\n    if (bizagi.util.isNumeric(value) && value !== 0) {\n      value = ud.formatInvariant(new Date(value), properties.showTime);\n    }\n\n    if (value) {\n      if (typeof value == \"string\") {\n        value = self.getNormalizeDate(ud.getDateFromInvariant(value, properties.showTime));\n      } else {\n        value = self.getNormalizeDate(value);\n      }\n    }\n\n    // Assert that the date could be parsed\n    var ci = self.getCalendarInstance();\n    if (properties.editable && ci.setVal) ci.setVal(value);\n    self.setValue(ud.formatInvariant(value, true));\n    properties.displayValue = ud.formatDate(value, properties.fullFormat, self.i18n);\n\n    // Set display value\n    if (typeof properties.displayValue === \"string\" || typeof properties.displayValue === \"number\") {\n      input.prop(\"value\", properties.displayValue);\n      input.prop(\"title\", properties.displayValue);\n    }\n\n    if (!properties.editable) {\n      input.html(properties.displayValue);\n    }\n  },\n  /**\r\n      * Sets value to the control and execute a callback function\r\n      * @param {Date} date date to asign\r\n      * @param {Function} callBack function to execute\r\n      * @returns {}\r\n      */\n  setValueFromCalendarButtons: function setValueFromCalendarButtons(date, callBack) {\n    this._super(date);\n    if (typeof callBack === \"function\") callBack(date);\n    this.onChangeHandler();\n  } });","/**\r\n *   Name: Bizagi Tablet Render Yes-No Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Yes-No render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.yesno\", bizagi.rendering.yesno.prototype);\n// Extends itself\nbizagi.rendering.tablet.yesno.extend(\"bizagi.rendering.tablet.yesno\", {}, {\n\n  /**\r\n                                                                             * Method to customize each render after processed\r\n                                                                             */\n  postRender: function postRender() {\n    var $control = this.getControl();\n    this.radio = $control.find(\"input[type=radio]\");\n\n    if (this.properties.editable && (this.value == null || this.value === undefined) && this.properties.value != null) {\n      this.value = this.properties.value;\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n\n    return $.fasttmpl(template, { value: this.getDisplayValue() });\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var $control = this.getControl();\n    this.radio = $control.find(\"input\");\n\n    // Call base\n    this._super();\n  },\n\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var $control = this.getControl();\n    var parsedValue = bizagi.util.parseBoolean(value);\n\n    this.setValue(parsedValue, false);\n    if (this.properties.editable) {\n      if (parsedValue) {\n        $control.find(\"input[value=true]\").prop('checked', true);\n        $control.find(\"input[value=false]\").prop('checked', false);\n      } else {\n        $control.find(\"input[value=false]\").prop('checked', true);\n        $control.find(\"input[value=true]\").prop('checked', false);\n      }\n    } else {\n      this.radio.val(this.getDisplayValue());\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    self.radio.change(function () {\n      var $selected = $(this);\n      var value = $selected.prop('value');\n\n      if (self.value !== value) {\n        self.setValue(value);\n      }\n    });\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\"label.bz-radio__label\", context);\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var value = null;\n    this.setValue(value, false);\n\n    this.clearDisplayValue();\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    if (this.properties.editable) {\n      this.radio.prop('checked', false);\n    } else {\n      this.radio.val(this.getDisplayValue());\n    }\n  } });","/**\r\n *   Name: Bizagi Tablet Render Check\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Check render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.check\", bizagi.rendering.check.prototype);\n// Extends itself\nbizagi.rendering.tablet.check.extend(\"bizagi.rendering.tablet.check\", {}, {\n\n  /**\r\n                                                                             * Template method to implement in each device to customize each render after processed\r\n                                                                             */\n  postRender: function postRender() {\n    var $control = this.getControl();\n    this.check = $control.find(\"input\");\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n\n    return $.fasttmpl(template, { value: this.getDisplayValue() });\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var $control = this.getControl();\n    this.check = $control.find(\"input\");\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Render as simple value\n    var displayValue = bizagi.util.parseBoolean(value);\n\n    // Set internal value\n    this.setValue(displayValue, false);\n\n    if (this.properties.editable) {\n      if (displayValue) {\n        this.check.attr(\"checked\", \"checked\");\n      } else {\n        this.check.removeAttr(\"checked\");\n      }\n    } else {\n      this.check.val(this.getDisplayValue());\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    this.check.on(\"click\", function (evt) {\n      var isCheck = $(this).is(':checked');\n\n      self.setValue(isCheck, true);\n\n    });\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    this.setDisplayValue(false);\n    this.setValue(false, false);\n  } });","/**\r\n *   Name: Bizagi Render CollectionNavigator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for collection navigator renders\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.collectionnavigator\", bizagi.rendering.collectionnavigator.prototype);\n// Extends itself\nbizagi.rendering.tablet.collectionnavigator.extend(\"bizagi.rendering.tablet.collectionnavigator\", {}, {\n\n  /**\r\n                                                                                                         * Method to customize each render after processed\r\n                                                                                                         */\n  postRender: function postRender() {\n    this.getControlFiller().addClass(\"bz-form-item__control--hidden\");\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.getControlFiller().addClass(\"bz-form-item__control--hidden\");\n  } });","/**\r\n *   Name: Bizagi Tablet Render upload Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the upload render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.upload\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.upload.prototype);\n\n// Extends itself\nbizagi.rendering.tablet.upload.extend(\"bizagi.rendering.tablet.upload\", {\n  QUALITY_PICTURE: 50,\n  LIMIT: 1, // The maximum number of media in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\n  EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"] },\n{\n  /**\r\n   * Whether or not is a native device\r\n   * @var isNative boolean\r\n   */\n  isNative: false,\n\n  /**\r\n                    * Whether or not we are offline\r\n                    * @var isOfflineForm boolean\r\n                    */\n  isOfflineForm: false,\n\n  /**\r\n                         * Update or init the element data\r\n                         * @param {} data\r\n                         */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: this });\n    this.isNative = bizagi.util.isCordovaSupported();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"upload\");\n\n    return this.renderItem(template, {});\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"upload-readonly\");\n    var data = {\n      noFiles: this.filesCount === 0 };\n\n\n    return this.renderItem(template, data);\n  },\n\n  /**\r\n      * Method to render items\r\n      * @returns {*|jQuery}\r\n      */\n  renderItem: function renderItem(template, data) {\n    var self = this;\n    var items = \"\";\n\n    // Render template\n    var html = $.fasttmpl(template, data);\n\n    // Render current children\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var $control = this.getControl();\n\n    this.$contentFile = $(\".bz-file-upload__container\", $control);\n    this.$inputFile = $(\".bz-file-upload__input\", $control);\n    this.$nativeFile = $(\".bz-file-upload__native\", $control);\n  },\n\n  /**\r\n      * Add action handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    this.checkFileExtensions();\n    this.attachEvents();\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    var $control = self.getControl();\n\n    // Handler to download a file\n    $(\"ul.bz-readonly-lists\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\n      var item = $(this).parent(\".bz-file\");\n      var file = item.data();\n\n      bizagi.loading.start();\n\n      $.when(bizagi.util.media.downloadFile(file.url, file.title)).fail(function (error) {\n        self.executeFormFailHandler(error);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n      * Method to configure the actions with control\r\n      * @return {}\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var $control = self.getControl();\n    var counterChoseFiles = 0;\n    // Attach all events\n    this.$contentFile.off(\"click\").on(\"click\", function (evt) {\n      if (!self.isNative || counterChoseFiles > 0) {\n        self.chooseFile();\n      } else {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"render-upload-error-files-extension-supported-app\", \"You can only add images or videos.\"), 'Userfield error');\n      }\n    });\n\n    // Handler to download the file\n    $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\n      var item = $(this).parent(\".bz-file\");\n      var file = item.data();\n\n      bizagi.loading.start();\n\n      $.when(bizagi.util.media.downloadFile(file.url, file.title)).fail(function (error) {\n        self.executeFormFailHandler(error);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n\n    // Attach delete option & Removes a file from the upload control\n    $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-icn\", function () {\n      var item = $(this).parent(\".bz-file\");\n      var file = item.data();\n\n      self.removeFile(item, file.id);\n    });\n\n    if (self.isNative) {\n      // Upload files\n      var actions = self.getUploadChoices();\n      counterChoseFiles = actions.length;\n      this.$nativeFile.off(\"click\").actionSheet({\n        actions: actions,\n        actionClicked: function actionClicked(action) {\n          self.handlerUploadFile(action.guid);\n        },\n        appear: function appear(action) {\n          self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n        cancelClicked: function cancelClicked(action) {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        } });\n\n\n      // Resolution upload\n      $(\".bz-file-upload__resolution\", $control).off(\"click\").actionSheet({\n        actions: bizagi.util.media.getImageResolutionSizes(),\n        withoutCancel: true,\n        actionClicked: function actionClicked(action) {\n          bizagi.loading.start();\n\n          $.when(self.handlerResolutionUpload(action.guid)).always(function () {\n            bizagi.loading.stop();\n          });\n        },\n        appear: function appear(action) {\n          self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n        cancelClicked: function cancelClicked(action) {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        } });\n\n    } else {\n\n      // Attach event to web upload-control\n      this.$inputFile.off(\"change\").on(\"change\", function () {\n        self.addFile();\n        this.value = \"\";\n      });\n\n      // Just in case\n      this.$inputFile.off(\"click\").on(\"click\", function (evt) {\n        evt.stopPropagation();\n      });\n    }\n  },\n\n  /**\r\n      * Handler of upload files\r\n      * @param {} ordinal\r\n      * @returns {}\r\n      */\n  handlerUploadFile: function handlerUploadFile(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    switch (actionSelected) {\n      case 2:\n\n        navigator.camera.getPicture(function (dataImage) {\n          self.dataImage = dataImage;\n          var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSVIDEO);\n\n          bizagi.loading.start();\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).\n          then(function () {\n            //Gets the real properties for the file\n            return $.when(bizagi.util.media.getFileDataInfo(self.dataImage)).\n            then(function (fileData) {\n              self.fileProperties = fileData;\n\n              if (bizagi.util.media.checkFileTypes(fileData, self.properties, extensions)) {\n                // \"new Blob\" constructor is not supported in android version 4.2.2\n                var version = bizagi.util.getAndroidVersion();\n\n                if (!bizagi.util.isAndroid()) {\n                  return $.when(bizagi.util.media.modalResolutionUpload()).then(function (buttonIndex) {\n                    if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\n                      return self.handlerResolutionUpload(buttonIndex);\n                    }\n                  });\n\n                } else {\n                  // Force click to show actionSheet menu\n                  $(\".bz-file-upload__resolution\", self.getControl()).click();\n                }\n              }\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n\n        }, self.onFail.bind(self), {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n          correctOrientation: true });\n\n        break;\n      case 1:\n        navigator.camera.getPicture(function (dataImage) {\n          bizagi.loading.start();\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\n            return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n              self.fileProperties = fileData;\n              return self.saveImage(dataImage);\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        },\n        self.onFail.bind(self), {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: navigator.camera.PictureSourceType.CAMERA,\n          mediaType: navigator.camera.MediaType.PICTURE,\n          destinationType: Camera.DestinationType.FILE_URI,\n          correctOrientation: true,\n          targetWidth: 1280,\n          targetHeight: 960 });\n\n        break;\n      case 3:\n        navigator.device.capture.captureVideo(function (dataVideo) {\n          bizagi.loading.start();\n\n          $.when(bizagi.util.media.checkMaxSizeVideo(dataVideo, self.properties)).\n          then(function () {\n            return self.saveVideo(dataVideo);\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n\n        }, self.onFail.bind(self), { limit: self.Class.LIMIT });\n        break;}\n\n  },\n\n  /**\r\n      * Handler of resolution upload\r\n      * @param {} ordinal\r\n      * @returns {}\r\n      */\n  handlerResolutionUpload: function handlerResolutionUpload(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    // If original, save image normally, if not, reduce quality and size\n    if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\n      return self.saveImage(self.dataImage);\n    } else {\n      var resolution = bizagi.util.media.getImageResolution(actionSelected);\n\n      return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).then(function (result) {\n        self.editedImageURL = result.localUrl;\n        self.properties.url = result.base64Image;\n\n        return self.saveImage(self.dataImage);\n      });\n    }\n  },\n\n  /**\r\n      * Send image using HTTP\r\n      * @param {} dataImage\r\n      */\n  saveImage: function saveImage(dataImage) {\n    var self = this;\n    var dataItem = \"\";\n\n    if (self.editedImageURL) {\n      dataItem = self.editedImageURL;\n    } else if (self.fileProperties) {\n      dataItem = self.fileProperties.url;\n    }\n\n    // Fix android 4.4 getting images from recent folder\n    var dataFile = bizagi.util.media.getImagePath(dataItem);\n    var data = {\n      dataFile: dataFile,\n      fileName: self.fileProperties.name,\n      mimeType: \"image/jpeg\" };\n\n\n    // Cleans variables related previous uploads\n    self.editedImageURL = null;\n    self.fileProperties = null;\n\n    return this.uploadFile(data);\n  },\n\n  /**\r\n      * Method to save a video file\r\n      * @param {} dataVideo\r\n      * @returns {}\r\n      */\n  saveVideo: function saveVideo(dataVideo) {\n    var data = {\n      dataFile: dataVideo[0].fullPath,\n      fileName: dataVideo[0].name,\n      mimeType: \"video/quicktime\" };\n\n\n    return this.uploadFile(data);\n  },\n\n  /**\r\n      * Method to save a file\r\n      * @param data\r\n      * @returns {*|void}\r\n      */\n  uploadFile: function uploadFile(data) {\n    var self = this;\n    var params = {};\n    var addParams = self.buildAddParams();\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = data.fileName;\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = data.dataFile;\n\n    if (data.mimeType)\n    params.options.mimeType = data.mimeType;\n\n    return $.when(bizagi.util.media.uploadFile(params)).then(function (result) {\n      var response = JSON.parse(decodeURIComponent(result.response));\n\n      if (response.type === \"error\") {\n        bizagi.showMessageBox(response.message, response.errorType);\n      } else {\n        self.onUploadFileCompleted(response);\n      }\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    });\n  },\n\n  /**\r\n      * onFail\r\n      * @param {} error\r\n      */\n  onFail: function onFail(error) {\n    var messageError = bizagi.util.processFailMessage(error);\n\n    bizagi.loading.stop();\n\n    if (messageError && typeof messageError === \"string\" && messageError.indexOf(\"No Activity found to handle Intent\") !== -1) {\n      var hasResource = bizagi.util.isValidResource(\"render-upload-error-media-app\");\n      var message = hasResource ? bizagi.localization.getResource(\"render-upload-error-media-app\") : \"Your device does not have an app to execute this action.\";\n\n      bizagi.showMessageBox(message);\n    }\n  },\n\n  /**\r\n      * onUploadFileCompleted\r\n      * @param {} result\r\n      */\n  onUploadFileCompleted: function onUploadFileCompleted(result) {\n    var self = this;\n    var $wrapper = $(\".bz-files\", self.getControl());\n\n    if (result.id && result.fileName) {\n      // Locate it before the upload wrapper\n      var newItem = self.renderUploadItem(result);\n      $wrapper.append(newItem);\n\n      // Increment counter\n      self.filesCount = self.filesCount + 1;\n\n      // Copy the files value but not its reference\n      var files = self.files.slice();\n\n      //Add the new item to this temporal array\n      files.push([result.id, result.fileName]);\n\n      // Update value\n      self.setValue(files, true);\n\n      // Check maxFiles\n      self.checkMaxFiles();\n\n      self.editedImageURL = null;\n    } else {\n      bizagi.showMessageBox(result.message, \"Error\");\n    }\n  },\n\n  /**\r\n      * Check maximum number of files\r\n      */\n  checkMaxFiles: function checkMaxFiles() {\n    if (this.isMaxFilesReached()) {\n      $(this.$contentFile).addClass(\"bz-file-upload__container--hidden\");\n    } else {\n      $(this.$contentFile).removeClass(\"bz-file-upload__container--hidden\");\n    }\n  },\n\n  /**\r\n      * Check if the maximum number of files than can be uploaded has been reached\r\n      * @returns {}\r\n      */\n  isMaxFilesReached: function isMaxFilesReached() {\n    var maxFiles = this.properties.maxfiles;\n    var actualFiles = this.properties.value ? this.properties.value.length : 0;\n\n    return maxFiles !== 0 && this.filesCount >= maxFiles && actualFiles >= maxFiles;\n  },\n\n  /**\r\n      * Check allow extensions and define possible choices\r\n      * @returns {}\r\n      */\n  checkFileExtensions: function checkFileExtensions() {\n    var self = this;\n    var validExtensions = self.properties.validExtensions || \"\";\n\n    self.validOptions = { video: false, image: false, file: false };\n\n    // Preprocess the extensions string\n    validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\n\n    if (typeof validExtensions === \"undefined\" || validExtensions === \"\") {\n      self.validOptions = { video: true, image: true, file: true };\n    } else {\n      validExtensions = validExtensions.split(\";\");\n\n      if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\n        self.validOptions.video = true;\n        self.validOptions.image = true;\n      } else {\n        for (var i = 0, length = validExtensions.length; i < length; i++) {\n          validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\n\n          if (self.Class.EXTENSIONSFILE.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.file = true;\n          } else if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.image = true;\n          } else if (self.Class.EXTENSIONSVIDEO.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.video = true;\n          }\n        }\n      }\n    }\n\n    // Media is not supported then upload control is disabled\n    if (!self.validOptions.file && !self.validOptions.image && !self.validOptions.video) {\n      $(self.$contentFile).addClass(\"bz-file-upload__container--hidden\");\n    }\n\n    // Limit of files is reached then upload control is disabled\n    if (self.isMaxFilesReached() || !self.isNative && (!bizagi.util.media.fileAPISupported() || self.isOfflineForm)) {\n      $(this.$contentFile).addClass(\"bz-file-upload__container--hidden\");\n    }\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @param {} dataFile\r\n      */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(prefix + \"xpath\", self.getUploadXpath());\n    formData.append(prefix + \"idRender\", self.properties.id);\n    formData.append(prefix + \"xpathContext\", self.properties.xpathContext);\n    formData.append(prefix + self.Class.BA_PAGE_CACHE, self.properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(self.properties.xpath, dataFile);\n\n    if (self.properties.contexttype)\n    formData.append(prefix + \"contexttype\", self.properties.contexttype);\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(dataFile) {\n    var data = {\n      url: this.properties.addUrl,\n      formData: this.buildAddFileParams(dataFile) };\n\n\n    return this.dataService.processUploadFile(data);\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    return this.clearDisplayValue();\n  },\n  /**\r\n      * Remove data of file upload\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var items = $(\".bz-files\", self.getControl());\n    var promises = [];\n\n    $(\".bz-file\", items).each(function (index, item) {\n      item = $(item);\n      var file = item.data();\n\n      promises.push($.when(self.removeFile(item, file.id)));\n    });\n\n    return $.when.apply($, promises).then(function () {\n      return self.getValue();\n    });\n  },\n\n  /**\r\n      * Add upload options\r\n      */\n  getUploadChoices: function getUploadChoices() {\n    var self = this;\n    var itemsUpload = [];\n\n    // Take photo, Choose photo\n    if (self.validOptions.image) {\n      itemsUpload.push({\n        \"guid\": 1,\n        \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\") });\n\n      itemsUpload.push({\n        \"guid\": 2,\n        \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\") });\n\n    }\n\n    // Take video\n    if (self.validOptions.video) {\n      itemsUpload.push({\n        \"guid\": 3,\n        \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-video\") });\n\n    }\n\n    // Stores the upload options        \n    return [].concat(itemsUpload);\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var errorResponse = \"\";\n\n    if (error && error.responseText) {\n      errorResponse = error.responseText;\n    } else {\n      errorResponse = bizagi.localization.getResource(\"workportal-general-error\");\n    }\n\n    this.getFormContainer().failHandler(errorResponse);\n  },\n\n  /**\r\n      * Method to add new file from native or hybrid environment\r\n      */\n  chooseFile: function chooseFile() {\n    if (this.isNative) {\n      this.$nativeFile.click();\n    } else if (bizagi.util.media.fileAPISupported() && !this.isOfflineForm) {\n      this.$inputFile.click();\n    }\n  },\n\n  /**\r\n      * Method to add new file\r\n      */\n  addFile: function addFile() {\n    var self = this;\n    var dataFile = this.$inputFile[0].files[0];\n    var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSFILE, self.Class.EXTENSIONSVIDEO);\n\n    dataFile.fullPath = this.$inputFile[0].value;\n    bizagi.loading.start();\n\n    if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n      $.when(self.processUploadFile(dataFile)).\n      then(function (result) {\n        self.onUploadFileCompleted(JSON.parse(decodeURIComponent(result)));\n      }).fail(function (error) {\n        self.executeFormFailHandler(error);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    } else {\n      bizagi.loading.stop();\n    }\n  },\n\n  /**\r\n      * Method to remove item\r\n      * @param item\r\n      * @param id\r\n      */\n  removeFile: function removeFile(item, id) {\n    var self = this;\n\n    return $.when(self.deleteUploadItem(item, id)).done(function () {\n      // Remove item\n      item.hide();\n      item.remove();\n\n      // Update value\n      self.setValue(self.files, false);\n\n      // Check maxFiles\n      self.checkMaxFiles();\n\n      // Trigger change\n      self.triggerRenderChange();\n    });\n  },\n\n  /**\r\n      * Template for upload items\r\n      */\n  getTemplateItemName: function getTemplateItemName() {\n    return \"upload-item\";\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".bz-input-icon__input\", context);\n  } });","/**\r\n *   Name: Bizagi Tablet Render upload Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the label render class to adjust to tablets devices\r\n */\n\n// Extends itself\nbizagi.rendering.tablet.upload.extend(\"bizagi.rendering.tablet.upload.offline\", {\n  QUALITY_PICTURE: 50,\n  LIMIT: 1, // The maximum number of media in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\n  EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"] },\n{\n\n  /**\r\n   * Update or init the element data\r\n   * @param {} data\r\n   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    var maxFileSizeOfProperty = Number(this.properties.maxSize) || 1048576;\n    var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 1048576;\n\n    this.properties.maxSize = maxFileSizeOfProperty < maxFileSizeOfUser ? maxFileSizeOfProperty : maxFileSizeOfUser;\n\n    this.updateFilesCount();\n    this.updateOriginalValue();\n  },\n\n  /*\r\n     *   Updates original value for some comparisons\r\n     */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = bizagi.clone(self.properties.value);\n  },\n\n  /**\r\n      * Method to render items\r\n      * @returns {*|jQuery}\r\n      */\n  renderItem: function renderItem(template, data) {\n    var self = this;\n    var items = \"\";\n\n    // Render template\n    var html = $.fasttmpl(template, data);\n\n    // Render current children\n    for (var i = 0; i < self.files.length; i++) {\n      var file = self.files[i];\n      if (file.status && file.status !== \"deleted\" && file.status !== \"new-deleted\") {\n        var item = self.renderUploadItem(file, i);\n        items += item;\n      }\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    var $control = self.getControl();\n\n    // Handler to download the file\n    $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\n      var item = $(this).parent(\".bz-file\");\n      self.openOfflineFile(item);\n    });\n  },\n\n  /**\r\n      * Method to configure the actions with control\r\n      * @return {}\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var $control = self.getControl();\n\n    // Attach all events\n    this.$contentFile.off(\"click\").on(\"click\", function (evt) {\n      if (self.isNative)\n      self.$nativeFile.click();else\n\n      self.$inputFile.click();\n      self.$inputFile.off(\"change\").on(\"change\", function () {\n        self.handlerWebUploadFile();\n      });\n    });\n\n    // Handler to download the file\n    $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\n      var item = $(this).parent(\".bz-file\");\n      self.openOfflineFile(item);\n    });\n\n    // Attach delete option & Removes a file from the upload control\n    $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-icn\", function () {\n      var item = $(this).parent(\".bz-file\");\n      self.removeOfflineFile(item);\n    });\n\n    if (self.isNative) {\n      self.attachNativeEvents();\n    }\n  },\n\n  attachNativeEvents: function attachNativeEvents() {\n    var self = this;\n\n    // Upload files\n    this.$nativeFile.off(\"click\").actionSheet({\n      actions: self.getUploadChoices(),\n      actionClicked: function actionClicked(action) {\n        self.handlerUploadFile(action.guid);\n      },\n\n      appear: function appear() {\n        self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      cancelClicked: function cancelClicked() {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n  },\n\n  //Only should be used for testing purposes\n  handlerWebUploadFile: function handlerWebUploadFile() {\n    var self = this;\n    var dataFile = self.$inputFile[0].files[0];\n\n    var fileId = bizagi.util.randomNumber();\n    var fileName, mimeType;\n    self.$inputFile[0].value = \"\";\n\n    if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties)) {\n      return self.dataService.getFileService().resolveBlobFromPath(dataFile).\n      then(function (blob) {\n        bizagi.loading.start();\n        mimeType = blob.type;\n        fileName = blob.name;\n        return self.saveOfflineFile(blob, fileId, mimeType);\n      }).then(function () {\n        self.onUploadOfflineFileCompleted(fileName, mimeType, fileId);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    }\n  },\n\n  /**\r\n      * Handler of upload image\r\n      * @param {} ordinal\r\n      * @returns {}\r\n      */\n  handlerUploadFile: function handlerUploadFile(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n    switch (actionSelected) {\n      case 2: // Choose photo\n        self.choosePhoto();\n        break;\n      case 1: // Take photo\n        self.takePhoto();\n        break;\n      default:\n        console.log(\"The option is not supported!\");\n        break;}\n\n  },\n\n  choosePhoto: function choosePhoto() {\n    var self = this;\n    navigator.camera.getPicture(function (dataImage) {\n      self.dataImage = dataImage;\n      var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSVIDEO);\n\n      bizagi.loading.start();\n\n      $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).\n      then(function () {\n        //Gets the real properties for the file\n        return $.when(bizagi.util.media.getFileDataInfo(self.dataImage)).\n        then(function (fileData) {\n          self.fileProperties = fileData;\n          if (bizagi.util.media.checkFileTypes(fileData, self.properties, extensions)) {\n            return self.saveImage(self.dataImage);\n          }\n        });\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n\n    }, self.onFail.bind(self), {\n      quality: self.Class.QUALITY_PICTURE,\n      sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n      correctOrientation: true });\n\n  },\n\n  takePhoto: function takePhoto() {\n    var self = this;\n    navigator.camera.getPicture(function (dataImage) {\n      bizagi.loading.start();\n\n      $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\n        return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n          self.fileProperties = fileData;\n          return self.saveImage(dataImage);\n        });\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    },\n    self.onFail.bind(self), {\n      quality: self.Class.QUALITY_PICTURE,\n      sourceType: navigator.camera.PictureSourceType.CAMERA,\n      mediaType: navigator.camera.MediaType.PICTURE,\n      destinationType: Camera.DestinationType.FILE_URI,\n      correctOrientation: true,\n      targetWidth: 1280,\n      targetHeight: 960 });\n\n  },\n\n  /**\r\n      * Add the interactions to the upload control items\r\n      * @return {}\r\n      */\n  addInteractions: function addInteractions() {\n    var self = this;\n    var control = self.getControl();\n\n    // Attach delete option & Removes a file from the upload control\n    $(\"ul.bz-files\", control).on(\"click\", \".bz-file .bz-file__delete\", function () {\n      var item = $(this).parent(\".bz-file\");\n      self.removeOfflineFile(item);\n    });\n  },\n\n  /**\r\n      * Collect Data\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n\n\n    if (bizagi.util.identicalObjects(self.properties.originalValue, self.files)) {\n      return;\n    }\n    renderValues[self.properties.xpath] = self.files;\n\n  },\n\n  /**\r\n      * Send image using HTTP\r\n      * @param {} dataImage\r\n      */\n  saveImage: function saveImage(dataImage) {\n    var self = this;\n    bizagi.loading.start();\n\n    var fileId = bizagi.util.randomNumber();\n    var fileName = self.fileProperties.name;\n    var mimeType;\n\n    //TODO: SWAT Check if the file already exists\n    $.when(self.dataService.getFileService().resolveBlobFromPath(dataImage, fileName)).\n    always(function () {\n      bizagi.loading.stop();\n    }).\n    then(function (blob) {\n      mimeType = blob.type;\n      fileName = blob.name;\n      return self.saveOfflineFile(blob, fileId, mimeType);\n    }).then(function (saveResponse) {\n      self.onUploadOfflineFileCompleted(fileName, mimeType, fileId);\n    });\n    self.$inputFile[0].value = \"\";\n  },\n\n  /**\r\n      * Check allow extensions and define possible choices\r\n      * Only support to image in offline capability\r\n      * @returns {}\r\n      */\n  checkFileExtensions: function checkFileExtensions() {\n    var self = this;\n    var validExtensions = self.properties.validExtensions || \"\";\n\n    self.validOptions = { video: false, image: false, file: false };\n\n    // Preprocess the extensions string\n    validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\n\n    if (typeof validExtensions === \"undefined\" || validExtensions === \"\") {\n      self.validOptions.image = true;\n    } else {\n      validExtensions = validExtensions.split(\";\");\n\n      if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\n        self.validOptions.image = true;\n      } else {\n        for (var i = 0, length = validExtensions.length; i < length; i++) {\n          validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\n\n          if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.image = true;\n          }\n        }\n      }\n    }\n\n    // Media is not supported then upload control is disabled\n    if (!self.validOptions.image) {\n      $(self.$contentFile).addClass(\"bz-file-upload__container--hidden\");\n    }\n\n    // Limit of files is reached then upload control is disabled\n    if (self.isMaxFilesReached() || !bizagi.util.media.fileAPISupported()) {\n      $(this.$contentFile).addClass(\"bz-file-upload__container--hidden\");\n    }\n  },\n\n  /**\r\n      * onUploadOfflineFileCompleted\r\n      * @param {} result\r\n      */\n  onUploadOfflineFileCompleted: function onUploadOfflineFileCompleted(fileName, mimeType, fileId) {\n    var self = this;\n    var $wrapper = $(\".bz-files\", self.getControl());\n\n    var fileUploaded = {\n      id: fileId,\n      fileName: fileName,\n      mimeType: mimeType,\n      status: \"new\" };\n\n\n    // Locate it before the upload wrapper\n    var newItem = self.renderUploadItem(fileUploaded, self.files.length);\n    $wrapper.append(newItem);\n\n    // Increment counter\n    self.filesCount = self.filesCount + 1;\n\n    // Copy the files value but not its reference\n    var files = self.files.slice();\n\n    //Add the new item to this temporal array\n    files.push(fileUploaded);\n\n    // Update value\n    self.setValue(files, false);\n\n    // Check maxFiles\n    self.checkMaxFiles();\n\n    // Trigger change\n    self.triggerRenderChange();\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {*|jQuery}\r\n      */\n  renderUploadItem: function renderUploadItem(file, index) {\n    var self = this;\n    var itemTemplate = self.getTemplateItemName();\n    var template = self.renderFactory.getTemplate(itemTemplate);\n\n    var html = $.fasttmpl(template, {\n      url: \"javascript:void(0);\",\n      id: file.id,\n      allowDelete: self.properties.allowDelete || false,\n      filename: file.fileName,\n      index: index });\n\n\n    return html;\n  },\n\n  /**\r\n      * This render cannot be sent because it is full ajax\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Fail action\r\n      * @param {} evt\r\n      * @returns {}\r\n      */\n  failReadFile: function failReadFile(evt) {\n    try {\n      bizagi.log(\"Error code: \" + evt.target.error.code);\n    } catch (e) {\n    }\n  },\n\n  /**\r\n      * Fail action\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  onFail: function onFail(error) {\n    this._super(error);\n  },\n\n  /**\r\n      * Method to remove item\r\n      * @param item\r\n      * @param id\r\n      */\n  removeOfflineFile: function removeOfflineFile(item) {\n    var self = this;\n    var file = item.data();\n    var fileIndex = file.index;\n\n    // Mark the file as deleted\n    var fileValue = self.files[fileIndex];\n    if (!fileValue) {\n      //Nothing to do\n      return;\n    }\n    if (fileValue.status !== \"new\") {\n      fileValue.status = \"deleted\";\n    } else\n    {\n      fileValue.status = \"new-deleted\";\n    }\n\n    // Remove item\n    item.hide();\n    item.remove();\n\n    // Update value\n    self.setValue(self.files, false);\n\n    // Check maxFiles\n    self.checkMaxFiles();\n\n    // Trigger change\n    self.triggerRenderChange();\n  },\n\n  /**\r\n      * Update the filesCount attribute based on the status (new|deleted) of each file\r\n      */\n  updateFilesCount: function updateFilesCount() {\n    var self = this;\n    var files = this.properties.value || [];\n\n    for (var i = 0; i < files.length; i++) {\n      var status = files[i].status;\n      if (status && status.includes(\"deleted\")) {\n        self.filesCount = self.filesCount - 1;\n      }\n    }\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    self._super(value, triggerEvents);\n    self.updateFilesCount();\n    if (self.filesCount === 0) {\n      self.properties.method = \"delete\";\n    }\n  },\n\n  /**\r\n      * Check if the maximum number of files than can be uploaded has been reached\r\n      * @returns {}\r\n      */\n  isMaxFilesReached: function isMaxFilesReached() {\n    var maxFiles = this.properties.maxfiles;\n    return maxFiles !== 0 && this.filesCount >= maxFiles;\n  },\n\n  openOfflineFile: function openOfflineFile(item) {\n    var self = this;\n    var file = item.data();\n    var dataIndex = file.index;\n    var selectedValue = typeof dataIndex == \"number\" ? self.properties.value[dataIndex] : null;\n    if (selectedValue) {\n      var formParams = self.getFormParams();\n      var getFileParams = {\n        idCase: formParams.idCase,\n        idWorkitem: formParams.idWorkitem,\n        id: (self.properties.xpathContext ? self.properties.xpathContext + \".\" : \"\") +\n        self.properties.xpath + '.' + selectedValue.id,\n        offlineType: formParams.offlineType };\n\n      bizagi.loading.start();\n      $.when(self.dataService.getOfflineFile(getFileParams, \"blob\", selectedValue.mimeType)).\n      then(function (binaryFile) {\n        if (binaryFile != undefined) {\n          var fileName = file.title;\n          var url = fileName || \"downloaded.jpg\";\n          if (bizagi.util.isAndroidDevice()) {\n            bizagi.util.media.handleBinaryFile(binaryFile, fileName, url);\n          } else {\n            bizagi.util.media.handleBinaryFile(binaryFile, fileName);\n          }\n        }\n      }).\n      fail(function (error) {\n        console.log(\"Error opening offline file\", error);\n      }).\n      always(function () {\n        bizagi.loading.stop();\n      });\n    }\n  },\n\n  saveOfflineFile: function saveOfflineFile(blobFile, fileId, mimeType) {\n    var self = this;\n    var formParams = self.getFormParams();\n    var parameters = {\n      idCase: formParams.idCase,\n      idWorkitem: formParams.idWorkitem,\n      id: (self.properties.xpathContext ? self.properties.xpathContext + \".\" : \"\") +\n      self.properties.xpath + '.' + fileId,\n      operationType: \"edition\",\n      offlineType: formParams.offlineType };\n\n    return self.dataService.saveOfflineFile(parameters, blobFile, mimeType);\n  } });","/**\r\n *   Name: Bizagi Tablet Render Grouped Grid Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Grouped Grid render class to adjust to tablet devices\r\n */\n\n// Extends from Grid Tablet base\nbizagi.rendering.tablet.grid.extend(\"bizagi.rendering.tablet.grid.grouped\", {}, {\n\n  /**\r\n                                                                                   * Method to customize each render after processed\r\n                                                                                   */\n  postRender: function postRender() {\n    this.getControlFiller().addClass(\"bz-form-item__control--hidden\");\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.getControlFiller().addClass(\"bz-form-item__control--hidden\");\n  } });","/**\r\n *   Name: Bizagi Tablet Render Letter Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the letter render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.letter\", bizagi.rendering.letter.prototype);\n// Extends itself\nbizagi.rendering.tablet.label.extend(\"bizagi.rendering.tablet.letter\", {}, {});","/**\r\n *   Name: Bizagi Tablet Render Button Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the button render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.button\", bizagi.rendering.button.prototype);\n// Extends itself\nbizagi.rendering.tablet.button.extend(\"bizagi.rendering.tablet.button\", {}, {\n\n  /**\r\n                                                                               * Whether or not we are offline 'Just a shortcut\r\n                                                                               * @var isOfflineForm boolean\r\n                                                                               */\n  isOfflineForm: false,\n\n  /**\r\n                         * Update or init the element data\r\n                         * @param {} data\r\n                         */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Check if the form is offline\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: this });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    $(\":button\", self.getControl()).on(\"click\", function () {\n      self.processButton();\n    });\n  },\n\n  /**\r\n      * In offline forms the button only works for actions and validations\r\n      * @returns {boolean|*}\r\n      */\n  executeButton: function executeButton() {\n    if (!this.isOfflineForm) {\n      return this._super();\n    } else {\n      // returns false to prevent form refreshing\n      return false;\n    }\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      * @returns {}\r\n      */\n  processButton: function processButton() {\n    var self = this;\n\n    if (self.properties.editable) {\n\n      // Check if action need conformation\n      if (self.properties.needsUserConfirmation) {\n        $.when(bizagi.showConfirmationBox(self.properties.userConfirmationMessage, \"Bizagi\", \"warning\")).\n        done(function () {\n          if (!self.properties.preventDefault)\n          self.runButtonAction();\n          // Trigger change\n          self.triggerRenderChange({ pressed: true });\n        });\n      } else {\n        if (!self.properties.preventDefault)\n        self.runButtonAction();\n\n        // Trigger change\n        self.triggerRenderChange({ pressed: true });\n      }\n    }\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"button\", $context);\n  },\n\n  /**\r\n      * Customizes the font weight\r\n      * @param {} $label\r\n      * @param {} bold\r\n      * @returns {}\r\n      */\n  changeFontBold: function changeFontBold($label, bold) {\n    if (bizagi.util.parseBoolean(bold)) {\n      $label.css(\"font-weight\", \"bold\");\n    }\n\n    return this;\n  } });","/**\r\n *   Name: Bizagi Tablet Render fileprint Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the fileprint render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.fileprint\", bizagi.rendering.fileprint.prototype);\n// Extends itself\nbizagi.rendering.tablet.fileprint.extend(\"bizagi.rendering.tablet.fileprint\", {}, {\n\n  /**\r\n                                                                                     * Method to customize each render after processed\r\n                                                                                     */\n  postRender: function postRender() {\n    this.getControl().parent().hide();\n  } });","/**\r\n *   Name: Bizagi Tablet Render Link Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.link\", bizagi.rendering.link.prototype);\n// Extends itself\nbizagi.rendering.tablet.link.extend(\"bizagi.rendering.tablet.link\", {}, {\n\n  /**\r\n                                                                           * Template method to implement in each device to customize each render after processed\r\n                                                                           * @returns {}\r\n                                                                           */\n  postRender: function postRender() {\n    var $control = this.getControl();\n    this.link = $control.find(\".bz-link\");\n\n    this._super();\n\n    this.preventDefaultForAnchorTag();\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var $control = this.getControl();\n    this.link = $control.find(\".bz-link\");\n\n    this._super();\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n\n    if (this.isValidValue()) {\n      // Get the decoded version of the URL\n      value = getFullyDecodedURI($.trim(value));\n\n      this.link.attr(\"href\", value);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Configure event handlers\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n\n    if (self.isValidValue()) {\n      self.link.on(\"click\", function (evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n\n        var linkEncode = encodeURI(this.getAttribute(\"href\"));\n\n        self.linkSolver(linkEncode, self.properties.linktarget);\n      });\n    } else {\n      self.link && self.link.addClass(\"bz-link--disabled\");\n    }\n  },\n\n  /**\r\n      * Checks if the value is a valid url (http/https valid urls)\r\n      * TODO: Check if this validation is necessary\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  isValidValue: function isValidValue() {\n    if (!this.hasValue()) return false;\n    var value = $.trim(this.getValue() || \"\");\n\n    return value.toLowerCase().match(/^(http|https):\\/\\//) !== null || false;\n  },\n\n  /**\r\n      * Executes the link\r\n      * @param {} linkEncode\r\n      * @param {} linkTarget\r\n      * @returns {}\r\n      */\n  linkSolver: function linkSolver(linkEncode, linkTarget) {\n    if (linkTarget === \"newwindow\" || bizagi.util.isCordovaSupported()) {\n      window.open(linkEncode, \"_system\", \"location=yes\");\n    } else {\n      window.open(linkEncode, \"_system\");\n    }\n  },\n\n  processLayout: function processLayout(isLabelFormat) {\n    if (!isLabelFormat) {\n      this._super(isLabelFormat, this.properties.textFormat);\n    } else {\n      if (typeof this.properties.textFormat.background !== \"undefined\") {\n        this._super(isLabelFormat, { background: this.properties.textFormat.background });\n      }\n    }\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\".bz-link\", $context);\n  } });","/**\r\n *   Name: Bizagi Tablet Render Form Link Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.formLink\", {\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\nbizagi.rendering.formLink.prototype);\n// Extends itself\nbizagi.rendering.tablet.formLink.extend(\"bizagi.rendering.tablet.formLink\", {}, {\n\n  /**\r\n                                                                                   * Template method to implement in each device to customize the render's behaviour to add handlers\r\n                                                                                   * @returns {}\r\n                                                                                   */\n  configureHandlers: function configureHandlers() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    this.attachEvents();\n  },\n\n  /**\r\n      * Open link display from inside a dialog\r\n      */\n  openLink: function openLink() {\n    var self = this;\n\n    // Send edit request\n    $.when(self.submitEditRequest()).\n    done(function () {\n      bizagi.loading.start();\n\n      $.when(self.paintFormLink()).done(function () {\n        bizagi.loading.stop();\n\n      }).fail(function () {\n        // Executes Rollback action paintForm\n        bizagi.loading.start();\n        self.rollbackForm();\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  },\n\n  openLinkRule: function openLinkRule(property) {\n    var self = this;\n    var def = new $.Deferred();\n\n    bizagi.loading.start();\n\n    self.getPropertyValue(property, {}).\n    done(function (dataRuleResp) {\n\n      dataRuleResp = dataRuleResp || {};\n\n      if (typeof dataRuleResp.messages !== \"undefined\" && dataRuleResp.messages !== null) {\n        var message = dataRuleResp.messages[0];\n        var form = self.getFormContainer();\n\n        form.validationController.showErrorMessage(message);\n        def.reject();\n      } else {\n        if (property === \"entryrule\") {\n          self.openLink();\n        }\n      }\n\n      def.resolve();\n    }).fail(function () {\n      def.reject();\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n\n    return def.promise();\n  },\n\n  paintFormLink: function paintFormLink() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    var deferred = $.Deferred();\n\n    // Instantiate slide form object\n    var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      navigation: self.getParams().navigation,\n      showSaveButton: properties.editable,\n      orientation: properties.orientation || \"ltr\",\n      onSave: function onSave(data) {\n        // When the data is saved then\n        return self.actionSave(data).then(function (result) {\n          //Process the result\n          return self.submitForm(result).\n          done(function () {\n            deferred.resolve(result);\n          }).fail(function () {\n            deferred.reject();\n          });\n        }).fail(function (result) {\n          deferred.reject(result);\n        });\n      },\n      goBack: function goBack() {\n        self.rollbackForm();\n      } });\n\n\n    slideView.render({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      recordXPath: self.getFormLinkXpath(),\n      requestedForm: \"linkform\",\n      editable: properties.editable,\n      formParams: formParams,\n      url: properties.editPage }).\n    fail(function () {\n      // Sends a rollback request to delete checkpoints\n      deferred.reject();\n    });\n\n    return deferred.promise();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type === \"error\") {\n        // Workflow engine error, we gotta show it with error\n        var form = self.getFormContainer();\n\n        form.validationController.showErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      // Add error messages\n      var form = self.getFormContainer();\n\n      form.validationController.showErrorMessage(jqXHR.message);\n\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  actionSave: function actionSave(data) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.submitSaveRequest(data)).done(function (result) {\n      try {\n        if (result.type === \"validationMessages\") {\n          // Add validation messages\n          self.form.addValidationMessage(result.messages);\n        } else if (result.type === \"error\") {\n          // Add error messages\n          deferred.reject(result);\n        }\n\n        deferred.resolve(result);\n      } catch (ex) {\n        deferred.reject({ noAction: true });\n      }\n    }).fail(function (data) {\n      deferred.reject(data);\n    });\n\n    return deferred.promise();\n  },\n\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (properties.editable === false && !properties.value) {\n      return null;\n    }\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (properties.xpathContext !== undefined && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: xpathContext,\n      submitData: data });\n\n  },\n\n  submitForm: function submitForm(result) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    var executeSubmitOnChange = true;\n\n    if (result && result.type === \"validationMessages\") {\n      executeSubmitOnChange = false;\n    }\n\n    if (self.properties.hasexitrule) {\n      self.closeExitRule().done(function () {\n        if (executeSubmitOnChange) {\n          // All commits must be resolved before the submitOnChange is executed\n          self.submitCommitRequest().done(function () {\n            if (self.properties.hasentryrule) {\n              self.submitCommitRequest().done(function () {\n                $.when(self.submitOnChange()).done(function () {\n                  deferred.resolve(result);\n                });\n              });\n            } else {\n              $.when(self.submitOnChange()).done(function () {\n                deferred.resolve(result);\n              });\n            }\n          });\n        }\n      }).fail(function () {\n        deferred.reject();\n      });\n\n    } else if (executeSubmitOnChange) {\n      if (executeSubmitOnChange) {\n        //  commits must be resolved before the submitOnChange is executed\n        self.submitCommitRequest().done(function () {\n          if (self.properties.hasentryrule) {\n            self.submitCommitRequest().done(function () {\n              $.when(self.submitOnChange()).done(function () {\n                deferred.resolve(result);\n              });\n            });\n          } else {\n            $.when(self.submitOnChange()).done(function () {\n              deferred.resolve(result);\n            });\n          }\n        }).fail(function () {\n          deferred.reject();\n        });\n      }\n    }\n\n    return deferred.promise();\n  },\n\n  closeExitRule: function closeExitRule() {\n    var self = this;\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.hasexitrule) {\n      $.when(self.openLinkRule(\"exitrule\")).done(function (result) {\n        def.resolve(result);\n      }).fail(function () {\n        def.reject();\n      });\n    }\n\n    return def.promise();\n  },\n\n  rollbackForm: function rollbackForm() {\n    var self = this;\n    var form = self.form || self.getFormContainer();\n\n    $.when(self.submitRollbackRequest({ idPageCache: form.idPageCache })).done(function () {\n      // Sends additional rollback request to delete checkpoint from entry rule\n      if (self.properties.hasentryrule) {\n        self.submitRollbackRequest({ idPageCache: form.idPageCache });\n      }\n    });\n  },\n\n  getFormLinkXpathContext: function getFormLinkXpathContext() {\n    var xpathContext = this.properties.xpathContext;\n    var parentXpathContext = this.getXpathContext();\n\n    if (parentXpathContext && xpathContext) {\n      return xpathContext.indexOf(parentXpathContext) === 0 ? xpathContext : parentXpathContext + \".\" + xpathContext;\n    } else {\n      return xpathContext;\n    }\n  },\n\n  /**\r\n      * Configure event handlers\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var $control = self.getControl();\n\n    // Bind click event\n    $(\"[data-action=open]\", $control).on(\"click\", function () {\n      // Open the link inside a slideForm\n      if (self.properties.hasentryrule) {\n        var form = self.getFormContainer();\n\n        $.when(form.saveForm()).done(function () {\n          self.submitCheckpointRequest().done(function () {\n            return self.openLinkRule(\"entryrule\");\n          });\n        });\n      } else {\n        self.openLink();\n      }\n    });\n  },\n\n  processLayout: function processLayout(isLabelFormat) {\n    if (!isLabelFormat) {\n      this._super(isLabelFormat, this.properties.textFormat);\n    } else {\n      if (typeof this.properties.textFormat.background !== \"undefined\") {\n        this._super(isLabelFormat, { background: this.properties.textFormat.background });\n      }\n    }\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\".bz-link\", $context);\n  } });","/**\r\n *   Name: Bizagi Tablet Render Hidden Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the hidden render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.hidden\", bizagi.rendering.hidden.prototype);\n// Extends itself\nbizagi.rendering.tablet.hidden.extend(\"bizagi.rendering.tablet.hidden\", {}, {});","/**\r\n *   Name: Bizagi Tablet Render list Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.radio\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.tablet.radio.extend(\"bizagi.rendering.tablet.radio\", bizagi.rendering.radio.prototype);\n// Extends itself\nbizagi.rendering.tablet.radio.extend(\"bizagi.rendering.tablet.radio\", {}, {\n\n  /**\r\n                                                                             * Template method to implement in each device to customize each render after processed\r\n                                                                             */\n  postRender: function postRender() {\n    var $control = this.getControl();\n    this.radio = $control.find(\"input[type=radio]\");\n\n    if (this.properties.editable && (this.value == null || this.value === undefined) && this.properties.value != null) {\n      this.value = this.properties.value;\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n\n    return $.fasttmpl(template, { value: this.getDisplayValue() });\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var $control = this.getControl();\n    this.radio = $control.find(\"input\");\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var $control = self.getControl();\n\n    // Map data from actions\n    value = self.mapValue(value);\n\n    // Set internal value\n    self.setValue(value, false);\n\n    if (value !== undefined && value.id != null && value.id !== \"\") {\n\n      if (this.properties.editable) {\n\n        var radioItem = $control.\n        find('input[type=\"radio\"][value=\"' + value.id + '\"]');\n\n        radioItem.prop('checked', 'checked');\n      } else {\n        self.radio.val(this.getDisplayValue());\n        self.radio.attr(\"id\", value.id);\n      }\n    }\n  },\n\n  /**\r\n      * Add action handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    this.radio.change(function () {\n      var $selected = $(this);\n      var newValue = {\n        id: $selected.prop('value'),\n        value: $.trim($selected.siblings(\"label\").text()) };\n\n\n      self.setValue(newValue);\n    });\n  },\n\n  /**\r\n      * Context to apply styles\r\n      * @param context\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\"label.bz-radio__label, .bz-input.bz-input--readonly\", context);\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var value = { id: \"\", label: \"\" };\n    this.setValue(value, false);\n\n    this.clearDisplayValue();\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    if (this.properties.editable) {\n      this.radio.prop('checked', false);\n    } else {\n      this.radio.val(this.getDisplayValue());\n    }\n  },\n\n  /**\r\n      * Returns the selected value in the template\r\n      * @returns {*}\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return this.selectedValue;\n  } });","/**\r\n *   Name: BizAgi Tablet Render Cascading combo Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the cascading combo render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.cascadingCombo\", bizagi.rendering.combo.prototype);\n// Extends itself\nbizagi.rendering.tablet.cascadingCombo.extend(\"bizagi.rendering.tablet.cascadingCombo\", bizagi.rendering.cascadingCombo.prototype);\n// Extends itself\nbizagi.rendering.tablet.cascadingCombo.extend(\"bizagi.rendering.tablet.cascadingCombo\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX },\n{\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var mode = this.getMode();\n\n    // Check if this is a dependant combo\n    this.parentCombo = this.getParentCombo();\n    if (this.parentCombo != null) {\n\n      if (/cascadingcombo/i.test(this.parentCombo.properties.type)) {\n        this.isDependant = true;\n      }\n    }\n\n    // Apply element plugin, set a flag to avoid dependant combo ajax requests\n    this.initializingCascadingCombo = true;\n\n    if (mode != \"execution\") {\n      this.initializingCascadingCombo = false;\n    }\n\n    return bizagi.rendering.tablet.combo.prototype.renderControl.apply(this, arguments);\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    bizagi.rendering.tablet.combo.prototype.postRender.apply(this, arguments);\n  },\n\n  /*\r\n           *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n           */\n  configureHandlers: function configureHandlers() {\n    // Call base\n    this._super();\n\n    // Call desktop.combo method\n    bizagi.rendering.tablet.combo.prototype.configureHandlers.apply(this, arguments);\n  },\n\n  /**\r\n      * Override to avoid the trigguer\r\n      */\n  cleanData: function cleanData() {\n    bizagi.rendering.tablet.combo.prototype.cleanData.apply(this, arguments);\n  },\n\n  /*\r\n     *   Refresh the combo, after it has been painted\r\n     */\n  refresh: function refresh(params, isInitialValue) {\n    var self = this;\n    // Wait until current element is rendered\n    $.when(self.isRendered()).done(function () {\n      // Clear current control\n      var control = self.getControl();\n      var mode = self.getMode();\n      control.empty();\n\n      // Render combo again\n      $.when(self.renderControl()).then(function (html) {\n        // Append new element\n        control.html(html);\n        // Post-render method\n        self.postRender();\n\n        if (mode == \"execution\") {\n          self.configureHandlers();\n        }\n\n        // Set current value\n        if (isInitialValue) {\n          self.setDisplayValue(self.getValue());\n        } else {\n          self.setDisplayValue({\n            \"id\": \"\",\n            \"value\": \"\" });\n\n        }\n\n        if (self.deferredVisible) {\n          self.deferredVisible.resolve();\n        }\n\n        self.trigger(\"select\", [self.getValue(), isInitialValue]);\n      });\n    });\n  },\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    bizagi.rendering.tablet.combo.prototype.setDisplayValue.apply(this, arguments);\n  },\n\n  processComboData: function processComboData() {\n    bizagi.rendering.tablet.combo.prototype.processComboData.apply(this, arguments);\n  },\n\n  validateValue: function validateValue() {\n    return bizagi.rendering.tablet.combo.prototype.validateValue.apply(this, arguments);\n  },\n\n  renderComboTemplate: function renderComboTemplate() {\n    return bizagi.rendering.tablet.combo.prototype.renderComboTemplate.apply(this, arguments);\n  },\n\n  configureModalViewHandlers: function configureModalViewHandlers() {\n    bizagi.rendering.tablet.combo.prototype.configureModalViewHandlers.apply(this, arguments);\n  },\n\n  configureCombo: function configureCombo() {\n    bizagi.rendering.tablet.combo.prototype.configureCombo.apply(this, arguments);\n  },\n\n  changeCombo: function changeCombo(valueItem, valueObjet) {\n    bizagi.rendering.tablet.combo.prototype.changeCombo.apply(this, arguments);\n  },\n\n  /*\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n    return bizagi.rendering.tablet.combo.prototype.getSelectedValue.call(this, arguments);\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  },\n  /**\r\n      * Filtering list of elements\r\n      * @returns {}\r\n      */\n  filterList: function filterList(search, $li) {\n    return bizagi.rendering.tablet.combo.prototype.filterList.call(this, search, $li);\n  } });","/**\r\n *   Name: Bizagi Tablet Render MultiSelect Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the multiSelect render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.multiSelect\", bizagi.rendering.multiSelect.prototype);\n// Extends itself\nbizagi.rendering.tablet.multiSelect.extend(\"bizagi.rendering.tablet.multiSelect\", {\n  MORE_OPTION_WIDTH: 40,\n  SEARCH_MIN_LENGTH: 1 },\n{\n\n  /**\r\n   * Update or init the element data\r\n   * @param {} data submitData\r\n   * @returns {}\r\n   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: this });\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"searchList.readonly\");\n    var dataList = self.getDataValue() || [];\n\n    // Render template\n    var content = $.fasttmpl(template, {\n      items: dataList,\n      editable: self.properties.editable || true },\n    {\n      formatItem: self.formatItem });\n\n\n    return content;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    if (this.isExecutionMode()) {\n      this.getData().done(function (data) {\n        self.properties.data = data;\n      });\n    }\n\n    // Call base\n    this._super();\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $control = self.getControl();\n\n    $(\"[data-action=modal]\", $control).bind(\"click\", function () {\n      self.openModalView();\n    });\n  },\n\n  /**\r\n      * Sets the value and display, avoid to include setValue in this method.\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    this._super(value);\n\n    if (value !== undefined) {\n      var dataList = self.getDataValue() || [];\n      var dataMapped = dataList.map(function (el) {\n        return self.formatItem(el.value);\n      }).join(\", \");\n\n      $(\".bz-input-icon__input\", this.getControl()).html(dataMapped);\n    }\n  },\n\n  /**\r\n      * Opens the modal view\r\n      */\n  openModalView: function openModalView() {\n    var self = this;\n    self.getData().done(function (result) {\n      var template_content = self.renderFactory.getTemplate('multiselect-list');\n      var value = self.getDataValue() || [];\n\n      var data = {\n        values: result,\n        isChecked: function isChecked(id) {\n          return self.isChecked(value, id);\n        } };\n\n\n      var content = $.fasttmpl(template_content, data, {\n        formatItem: self.formatItem });\n\n\n      var template_footer = self.renderFactory.getTemplate(\"modal-footer-done\");\n      var footer = $.fasttmpl(template_footer, {});\n\n      self.getControl().mobileView({\n        customHeader: $.fasttmpl(self.renderFactory.getTemplate(\"modal-header-search\"), {\n          hideSearch: self.properties.enableTyping === false }),\n\n        orientation: self.properties.orientation || \"\",\n        contentTemplate: content,\n        footerTemplate: footer,\n        style: \"width: 80%; height: 70%\",\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        },\n        afterOpenAnimation: function afterOpenAnimation(event) {\n          $(\".bz-modal-view__search\", event.view.header).focus();\n        },\n        open: function open() {\n          self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n        configureActions: function configureActions(modalView) {\n          self.configureModalViewHandlers(modalView);\n        } });\n\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(modalView) {\n    var self = this;\n\n    var $listContainer = $(\".bz-checkbox-list li\", modalView.content);\n    //clear button\n    var $clearButton = $(\".bz-modal-view__clear\", modalView.header);\n    // Suggest input\n    var $suggestInput = $(\".bz-modal-view__search\", modalView.header);\n\n    if (this.properties.enableTyping) {\n      $suggestInput.on(\"change keyup\", function () {\n        if (this.value === \"\") {\n          $clearButton.removeClass(\"bz-modal-view__clear--visible\");\n        } else {\n          $clearButton.addClass(\"bz-modal-view__clear--visible\");\n        }\n        self.filterList(this.value, $listContainer);\n      }).on(\"focus\", function () {\n        modalView.header.addClass(\"bz-modal-view__header--active\");\n      }).on(\"blur\", function () {\n        modalView.header.removeClass(\"bz-modal-view__header--active\");\n      });\n\n      //Clear the search\n      $clearButton.on(\"click\", function () {\n        $suggestInput.val(\"\").trigger(\"change\");\n      });\n    }\n\n    $(\"[data-action=close]\", modalView.header).on(\"click\", function () {\n      modalView.close();\n    });\n\n    $(modalView.footer).on(\"click\", \"[data-action=save]\", function () {\n      // Create a temporal array\n      var newList = [];\n\n      $.each.call(this, $listContainer, function (index, item) {\n        var check = item.querySelector(\"input\");\n\n        if (check.checked) {\n          var id = check.getAttribute(\"data-id\");\n          var element = this.findItemById(id);\n          var value = element.value;\n          newList.push({ id: id, value: value });\n        }\n      }.bind(self));\n\n      self.setDisplayValue(newList);\n\n      modalView.close();\n    });\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @returns {*[]}\r\n      */\n  getData: function getData() {\n    var self = this;\n\n    return this.isOfflineForm ?\n    this.getOfflineData() :\n    $.when(this._super()).fail(function (error) {\n      var error_obj = bizagi.util.getErrorFormatted(error);\n      var message = typeof error_obj === \"undefined\" ? {\n        \"message\": bizagi.localization.getResource(\"workportal-general-error\") } :\n      error_obj;\n\n      self.getFormContainer().failHandler(message);\n    });\n  },\n\n  /**\r\n      * Get offline data for request\r\n      */\n  getOfflineData: function getOfflineData() {\n    var data = this.properties.data || [];\n\n    return $.when(this.normalizeData(data));\n  } });","/**\r\n *   Name: Bizagi Render HandSignature Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Hand Signature render class to adjust to tablet devices\r\n */\n\n// Extends from render Tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.handSignature\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.handSignature.prototype);\n// Extends itself\nbizagi.rendering.tablet.handSignature.extend(\"bizagi.rendering.tablet.handSignature\", {}, {\n\n  /**\r\n                                                                                             * Whether or not is a native device\r\n                                                                                             * @var isNative boolean\r\n                                                                                             */\n  isNative: false,\n\n  /**\r\n                    * Whether or not is a offline control\r\n                    * @var isOfflineForm boolean\r\n                    */\n  isOfflineForm: false,\n\n  /**\r\n                         * Update or init the element data\r\n                         * @param {} data\r\n                         */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: this });\n    this.isNative = bizagi.util.isCordovaSupported();\n  },\n\n  /**\r\n      * Add action handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $actions = $(\".bz-actions\", this.getControl());\n    var $container = self.getSignatureContainer();\n\n    var autoSave = bizagi.util.debounce2(function (params) {\n      if (!changed) return;\n\n      var data = Array.prototype.slice.call(params || []);\n      var dataImage = (data && data[0] || []).dataImage || \"\";\n\n      self.saveDeferred = $.when(self.saveSignature(dataImage));\n    }, !self.isOfflineForm ? self.DELAY_TO_SAVE : 0);\n\n    var changed = false;\n\n    $container.bind(\"change\", function () {\n      changed = true;\n      if ($(this).BzjSignature(\"isModified\")) {\n        self.saveTimestamp = new Date().getTime();\n        var $canvas = $(\".bz-signature__container-canvas\", this)[0];\n        var dataImage = $canvas.toDataURL(\"image/png\");\n        autoSave.fire({ dataImage: dataImage });\n        self.setData(dataImage.replace(/^data:image\\/(png|jpg|jpeg);base64,/, \"\"));\n        self.properties.url = dataImage;\n        self.setState(self.STATE_TYPE.done);\n      }\n    });\n\n    $actions.on(\"click\", \"[data-action='clear']\", function () {\n      changed = true;\n      autoSave.cancel();\n      self.onSignatureClear($container);\n    });\n\n    $actions.on(\"click\", \"[data-action='edit']\", function () {\n      self.onSignatureEdit($container);\n      changed = false;\n    });\n\n    $actions.on(\"click\", \"[data-action='save']\", function () {\n      if (!changed) {\n        self.setState(self.STATE_TYPE.edit);\n        $container.BzjSignature(\"disable\");\n        return;\n      }\n\n      self.onSignatureSave($container, autoSave);\n      changed = false;\n    });\n\n  },\n\n  onSignatureClear: function onSignatureClear($container) {\n    var self = this;\n\n    $container.BzjSignature(\"reset\");\n\n    if (self.hasValue()) {\n      bizagi.loading.start();\n      self.setData(self.EMPTY_VALUE);\n      self.properties.url = self.EMPTY_VALUE;\n      $.when(self.deleteSignature()).then(function (result) {\n        self.setData(result);\n        self.properties.url = result;\n      }).fail(function (error) {\n        self.executeFormFailHandler(error);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    }\n  },\n\n  onSignatureEdit: function onSignatureEdit($container) {\n    this.setState(this.STATE_TYPE.draw);\n    $container.BzjSignature(\"enable\");\n  },\n\n  onSignatureSave: function onSignatureSave($container, autoSave) {\n    var self = this;\n\n    $container.BzjSignature(\"disable\");\n\n    if ($container && $container.BzjSignature(\"isModified\")) {\n      var $canvas = $(\".bz-signature__container-canvas\", $container)[0];\n      bizagi.loading.start();\n\n      autoSave.cancel();\n      self.saveSignature($canvas.toDataURL(\"image/png\")).always(function () {\n        self.setState(self.STATE_TYPE.edit);\n        bizagi.loading.stop();\n      });\n    } else {\n      self.setState(self.STATE_TYPE.edit);\n    }\n  },\n\n  /**\r\n      * Apply plugin\r\n      */\n  renderSignature: function renderSignature() {\n    var self = this;\n    var $container = self.getSignatureContainer();\n    var config = {\n      sizeRatio: 3,\n      cssclass: \"bz-signature__container-canvas\",\n      color: \"#000\" };\n\n\n    $container.empty();\n    $container.BzjSignature(config);\n    $container.BzjSignature(\"disable\");\n\n    if (self.pluginInitialized && self.properties.url) {\n      self.setSignature($container);\n    } else {\n      self.renderSignatureValue($container);\n    }\n\n    // Only apply for mobile\n    var $canvas = $(\".bz-signature__container-canvas\", $container);\n    var height = Math.round($canvas.width() / 3);\n\n    $canvas.attr(\"height\", height).css(\"height\", height);\n    $canvas.css(\"width\", \"100%\");\n\n    // Required for resize observer\n    self.pluginInitialized = true;\n  },\n\n  /**\r\n      * Set data to control\r\n      * @param $container\r\n      * @returns {*}\r\n      */\n  renderSignatureValue: function renderSignatureValue($container) {\n    var self = this;\n\n    bizagi.util.sleepUntil(function () {\n      return !self.dataService.getFileService().isLoading(self);\n    }).then(function () {\n      return self.buildItemUrl();\n    }).then(function (dataUrl) {\n      if (!self.isDisposed()) {\n        // Fake empty\n        if (dataUrl === self.BASE_IMAGE + self.EMPTY_IMAGE) {\n          dataUrl = \"\";\n        }\n\n        var url = dataUrl !== \"\" ? dataUrl : \"\";\n        self.properties.url = url;\n\n        if (!bizagi.util.isEmpty(url)) {\n          $container.BzjSignature(\"setData\", url);\n        } else {\n          self.setData(self.EMPTY_VALUE);\n        }\n      }\n    });\n  },\n\n  /**\r\n      * Execute upload image\r\n      * @param dataImage\r\n      * @returns {*}\r\n      */\n  postSignature: function postSignature(dataImage) {\n    var signature = dataImage.replace(/^data:image\\/(png|jpg|jpeg);base64,/, \"\");\n\n    if (!this.isOfflineForm) {\n      return this.postSignatureOnline(signature);\n    }\n\n    return this.postSignatureOffline(signature);\n  },\n\n  /**\r\n      * Execute upload image for offline mode\r\n      * @param signature\r\n      * @returns {*}\r\n      */\n  postSignatureOffline: function postSignatureOffline(signature) {\n    var self = this;\n\n    return self.saveImageOffline(signature).then(function () {\n      self.properties.isChanged = true;\n      return signature;\n    });\n  },\n\n  /**\r\n      * Delete data image\r\n      * @returns {*}\r\n      */\n  deleteSignature: function deleteSignature() {\n    var self = this;\n\n    if (!self.isOfflineForm) {\n      return this.deleteImage().then(function () {\n        return self.EMPTY_VALUE;\n      });\n    }\n    return self.saveImageOffline(self.EMPTY_IMAGE).then(function () {\n      self.properties.isChanged = true;\n      return self.EMPTY_VALUE;\n    });\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(params) {\n    if (this.isOfflineForm) {\n      return this.buildItemUrlOffline(params);\n    } else {\n      return this._super(params);\n    }\n  } });","/*\r\n*   Name: Bizagi Tablet Render Association\r\n*   Author: UI Forms Team\r\n*   Comments: Defines the association control\r\n*/\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.association\", bizagi.rendering.association.prototype);\n// Extends itself\nbizagi.rendering.tablet.association.extend(\"bizagi.rendering.tablet.association\", {}, {\n  /**\r\n                                                                                            * Template method to implement in each children to customize each control\r\n                                                                                            * \r\n                                                                                            * @returns {} \r\n                                                                                            */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).done(function (flip) {\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var columnData = self.getColumnData();\n\n      var html = $.fasttmpl(template, $.extend(self.properties, { columnData: columnData }), {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n\n\n  /**\r\n      * Get Left Data, verify if flipper flags sets true\r\n      *\r\n      * @param column {'0'||'1'}\r\n      */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.properties;\n    var data = [];\n\n    self.data = properties;\n\n    var dataAssociation = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(dataAssociation, function (key, item) {\n      data.push({\n        id: item.id,\n        value: item.value,\n        association: self.getRightAssociation(item.id) });\n\n    });\n\n    return data;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    var isExecution = self.getMode() === \"execution\";\n    var $control = self.getControl();\n\n    // Cache control\n    self.association = $(\".bz-association\", $control);\n\n    // Add Events at Association Control\n    if (isExecution) {self.addEventControl();}\n\n    self.showDefaultGroupList();\n  },\n\n  showDefaultGroupList: function showDefaultGroupList() {\n    var self = this;\n    var $control = self.getControl();\n    var $groups = $('.bz-association-group', $control);\n\n    if ($groups.length > 0) {\n      $(\"[data-action='collapse']\", $groups[0]).toggleClass(\"bz-icn--expanded\");\n\n      $(\".bz-association-group__list\", $groups[0]).\n      slideDown(300, function () {\n        $(this).toggleClass(\"bz-association-group__list--hidden\");\n      });\n    }\n  },\n\n  /**\r\n      * Add event to control\r\n      * @returns {} \r\n      */\n  addEventControl: function addEventControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var control = self.getControl();\n\n    // Bind check toggle\n    self.association.\n    on(\"change\", \"input:checkbox\", function () {\n      var $input = $(this);\n      var parentId = $input.data(\"parent-id\");\n      var id = $input.data(\"id\");\n\n      if ($input.prop(\"checked\")) {self.addElement(parentId, id);} else\n      {self.removeElement(parentId, id);}\n    });\n\n    // Bind flip actions\n    self.association.\n    find(\"[data-action='flip']\").\n    click(function () {\n      $(control).empty();\n\n      // Define flipped\n      self.properties.flipped = !self.properties.flipped;\n\n      // Send flip data to server\n      self.properties.flipstate = self.properties.flipped;\n\n      self.dataService.getFlipAssociation(self.properties);\n\n      var columnData = self.getColumnData();\n\n      // Render template\n      $($.fasttmpl(template, $.extend(self.properties, { columnData: columnData }), {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation })).\n      appendTo(control);\n\n      self.postRender();\n    });\n\n    self.association.on(\"click\", \"[data-action='collapse']\", function () {\n      var $element = $(this);\n      var $groupList =\n      $element.\n      parents('.bz-association-group').\n      find(\".bz-association-group__list\");\n\n      self.closeAccordionSection();\n      if ($groupList.hasClass(\"bz-association-group__list--hidden\")) {\n\n        $element.toggleClass(\"bz-icn--expanded\");\n\n        $groupList.slideDown(300, function () {\n          $(this).toggleClass(\"bz-association-group__list--hidden\");\n        });\n      }\n    });\n  },\n\n  closeAccordionSection: function closeAccordionSection(active) {\n    var self = this;\n    var $control = self.getControl();\n\n    $(\"[data-action='collapse']\", $control).removeClass('bz-icn--expanded');\n\n    $(\".bz-association-group__list\", $control).\n    slideUp(300, function () {\n      $(this).addClass(\"bz-association-group__list--hidden\");\n    });\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    return self.renderControl();\n  },\n\n  /**\r\n      * Render for readonly\r\n      * @returns {} \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.postRender();\n  },\n\n  /* SET-DISPLAY-VALUE\r\n      =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  },\n\n  getLabel: function getLabel() {\n    if (!this.label) {\n      var label = $(\"> .bz-form-label\", this.element || this.observableElement);\n\n      if (label.length > 0)\n      this.label = label;\n\n      return label;\n    }\n\n    return this.label;\n  } });","/**\r\n *   Name: Bizagi Tablet Render ECM Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the ecm render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.ecm\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.ecm.prototype);\n\n// Extends itself\nbizagi.rendering.tablet.ecm.extend(\"bizagi.rendering.tablet.ecm\", {\n  QUALITY_PICTURE: 50,\n  LIMIT: 1, // The maximum number of media in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\n  EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"],\n  ERROR_ECM_NO_AVAILABLE: 3,\n  ACTION_DETAILS: \"details\",\n  ACTION_EDIT: \"edit\" },\n{\n\n  /**\r\n   * Whether or not is a native device\r\n   * @var isNative boolean\r\n   */\n  isNative: false,\n\n  /**\r\n                    * Update or init the element data\r\n                    * @param {} data\r\n                    */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    this.isNative = bizagi.util.isCordovaSupported();\n    this.fileData = [];\n  },\n\n  /**\r\n      * Method to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = this.renderFactory.getTemplate(\"ecm\");\n\n    // Set files property\n    self.files = self.properties.value || [];\n    self.filesCount = self.files.length;\n\n    return this.renderItem(template, {});\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"ecm-readonly\");\n    var data = {\n      noFiles: this.filesCount === 0 };\n\n\n    return this.renderItem(template, data);\n  },\n\n  /**\r\n      * Method to render items\r\n      * @returns {*|jQuery}\r\n      */\n  renderItem: function renderItem(template, data) {\n    var self = this;\n    var items = \"\";\n    var html = $.fasttmpl(template, data);\n\n    // Render current children\n    for (var i = 0; i < self.filesCount; i++) {\n      var item = self.renderUploadItem(self.files[i]);\n\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n\n    return html;\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"ecm-item\");\n    var form = self.getFormContainer();\n\n    var data = {\n      id: self.properties.id,\n      idFileUpload: file[0],\n      fileName: file[1],\n      editable: self.properties.editable,\n      xPath: self.properties.xpath,\n      xpathContext: self.getXpathContext() || form.properties.xpathContext || \"\",\n      idPageCache: self.properties.idPageCache,\n      idAttrib: self.properties.idAttrib,\n      sessionId: form.properties.sessionId };\n\n\n    // Builds the upload item url\n    var originalData = $.extend({}, data);\n    data.url = self.buildItemUrl(originalData);\n\n    // Define File Properties\n    file.getFileProperties = $.when(self.renderFileLayout(data));\n\n    var html = $.fasttmpl(template, data);\n\n    return html;\n  },\n\n  /**\r\n      * Method to get properties and metadata of ECM item\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  renderFileLayout: function renderFileLayout(data) {\n    var self = this;\n    var form = self.getFormContainer();\n    var deferred = new $.Deferred();\n\n    var originalData = $.extend({}, data);\n\n    $.when(\n    self.dataService.metadataECMMultiaction().getECMMetadata(data),\n    self.dataService.metadataECMMultiaction().getFileProperties(originalData)).\n    done(function (metaData, fileProperties) {\n\n      if (Array.isArray(fileProperties)) {\n        fileProperties = fileProperties[0];\n      }\n\n      if (Array.isArray(metaData)) {\n        metaData = metaData[0];\n      }\n\n      fileProperties.idAttrib = self.properties.idAttrib;\n      fileProperties.showMetadata = self.properties.showMetadata;\n      fileProperties.xpathContext = self.getXpathContext() || form.properties.xpathContext || \"\";\n      fileProperties.xpath = self.properties.xpath;\n      fileProperties.fileName = data.fileName;\n      fileProperties.idPageCache = self.properties.idPageCache;\n      fileProperties.fileData = originalData;\n\n      var result = $.extend({}, fileProperties, metaData);\n\n      deferred.resolve(result);\n\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var $control = this.getControl();\n\n    this.$contentFile = $(\".bz-file-upload__container\", $control);\n    this.$inputFile = $(\".bz-file-upload__input\", $control);\n    this.$nativeFile = $(\".bz-file-upload__native\", $control);\n  },\n\n  configureHandlers: function configureHandlers() {\n    this.checkFileExtensions();\n    this.attachEvents();\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    var $control = self.getControl();\n    // Handler to download the file\n    $(\"ul.bz-readonly-lists\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\n      var item = $(this).parent(\".bz-file\");\n      var file = item.data();\n      bizagi.loading.start();\n      $.when(bizagi.util.media.downloadFile(file.url, file.title)).fail(function (error) {\n        self.executeFormFailHandler(error);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n      * Send image using HTTP\r\n      */\n  saveImage: function saveImage() {\n    var self = this;\n    var dataItem = \"\";\n\n    if (self.editedImageURL) {\n      dataItem = self.editedImageURL;\n    } else if (self.fileProperties) {\n      dataItem = self.fileProperties.url;\n    }\n\n    // Fix android 4.4 getting images from recent folder\n    var dataFile = bizagi.util.media.getImagePath(dataItem);\n    var data = {\n      dataFile: dataFile,\n      fileName: self.fileProperties.name,\n      mimeType: \"image/jpeg\" };\n\n\n    // Cleans variables related previous uploads\n    self.editedImageURL = null;\n    self.fileProperties = null;\n\n    return this.uploadFile(data);\n  },\n\n  /**\r\n      * Method to save a video file\r\n      * @param {} dataVideo\r\n      * @returns {}\r\n      */\n  saveVideo: function saveVideo(dataVideo) {\n    var data = {\n      dataFile: dataVideo[0].fullPath,\n      fileName: dataVideo[0].name,\n      mimeType: \"video/quicktime\" };\n\n\n    return this.uploadFile(data);\n  },\n\n  /**\r\n      * Method to save a file\r\n      * @param data\r\n      * @returns {*|void}\r\n      */\n  uploadFile: function uploadFile(data) {\n    var self = this;\n    var params = {};\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = data.fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = data.fileName;\n    params.options.uploadKey = { key: \"Filedata\" };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = data.dataFile;\n\n    if (data.mimeType)\n    params.options.mimeType = data.mimeType;\n\n    return $.when(bizagi.util.media.uploadFile(params)).then(function (result) {\n      self.onUploadFileCompleted(JSON.parse(decodeURIComponent(result.response)));\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    });\n  },\n\n  /**\r\n      * Method to configure the actions with control\r\n      * @return {}\r\n      */\n  attachEvents: function attachEvents() {\n    var self = this;\n    var $control = self.getControl();\n\n    // Handlers to management of menu actions\n    $.each(self.files, function (i, file) {\n      self.attackMenuEvents(file);\n    });\n\n    // Attach all events\n    this.$contentFile.off(\"click\").on(\"click\", function (evt) {\n      self.chooseFile();\n    });\n\n    // Handler to download the file\n    $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\n      var item = $(this).parent(\".bz-file\");\n      var file = item.data();\n\n      bizagi.loading.start();\n\n      $.when(bizagi.util.media.downloadFile(file.url, file.title)).fail(function (error) {\n        self.executeFormFailHandler(error);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n\n\n    if (self.isNative) {\n      // Upload files\n      this.$nativeFile.off(\"click\").actionSheet({\n        actions: self.getUploadChoices(),\n        actionClicked: function actionClicked(action) {\n          self.handlerUploadFile(action.guid);\n        },\n        appear: function appear(action) {\n          self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n        cancelClicked: function cancelClicked(action) {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        } });\n\n\n      // Resolution upload\n      $(\".bz-file-upload__resolution\", $control).off(\"click\").actionSheet({\n        actions: bizagi.util.media.getImageResolutionSizes(),\n        withoutCancel: true,\n        actionClicked: function actionClicked(action) {\n          bizagi.loading.start();\n\n          $.when(self.handlerResolutionUpload(action.guid)).always(function () {\n            bizagi.loading.stop();\n          });\n        },\n        appear: function appear(action) {\n          self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n        cancelClicked: function cancelClicked(action) {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        } });\n\n    } else {\n\n      // Attach event to web upload-control\n      this.$inputFile.off(\"change\").on(\"change\", function () {\n        self.addFile();\n        this.value = \"\";\n      });\n\n      // Just in case\n      this.$inputFile.off(\"click\").on(\"click\", function (evt) {\n        evt.stopPropagation();\n      });\n    }\n  },\n\n  /**\r\n      * Update menu options\r\n      * @param $fileItem\r\n      * @param fileProperties\r\n      */\n  addMenuEvents: function addMenuEvents($fileItem, fileProperties) {\n    var self = this;\n    var viewMore = $fileItem.find(\".bz-file-menu\");\n    var items = [];\n\n    if (fileProperties.showMetadata) {\n      items.push({\n        name: self.getResource(\"render-collection-navigator-details-form\"),\n        fn: function fn() {\n          self.processActionByType(self.Class.ACTION_DETAILS, fileProperties, $fileItem);\n        } });\n\n    }\n\n    if (fileProperties.showMetadata && fileProperties.allowUpdateMetadata)\n    items.push({\n      name: self.getResource(\"render-collection-navigator-edit-form\"),\n      fn: function fn() {\n        self.processActionByType(self.Class.ACTION_EDIT, fileProperties, $fileItem);\n      } });\n\n\n    if (fileProperties.allowCheckOut) {\n      items.push({\n        name: self.getResource(\"render-ecm-bt-lock\"),\n        fn: function fn() {\n          self.lockECMFile($fileItem, fileProperties);\n        } });\n\n    }\n\n    if (fileProperties.allowCancelCheckOut) {\n      items.push({\n        name: self.getResource(\"render-ecm-bt-unlock\"),\n        fn: function fn() {\n          self.unlockECMFile($fileItem, fileProperties);\n        } });\n\n    }\n\n    /*if (fileProperties.allowUpdateContent) {\r\n          items.push({\r\n              name: self.getResource(\"render-ecm-bt-upgrade\"),\r\n              fn: function () {\r\n                  self.processActionByType(\"upgrade\", fileProperties);\r\n              }\r\n          });\r\n      }*/\n\n    if (fileProperties.allowDelete) {\n      items.push({\n        name: self.getResource(\"render-ecm-bt-delete\"),\n        fn: function fn() {\n          self.deleteECMFile($fileItem, fileProperties.idFileUpload);\n        } });\n\n    }\n\n    // TODO: Check items has data\n    viewMore.overflowMenu({ items: items });\n  },\n\n  /**\r\n      * Removes a file from the ECM control\r\n      * @param $fileItem\r\n      * @param fileId\r\n      */\n  deleteECMFile: function deleteECMFile($fileItem, fileId) {\n    var self = this;\n\n    bizagi.showConfirmationBox(this.getResource(\"render-ecm-confirm-message\")).\n    done(function () {\n      $.when(self.deleteUploadItem($fileItem, fileId)).\n      done(function () {\n        // Detach item\n        $fileItem.hide();\n        $fileItem.remove();\n\n        // Update value\n        self.setValue(self.files, false);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n        // Trigger change\n        self.triggerRenderChange();\n      });\n    });\n  },\n\n  /**\r\n      * Check maximum number of files\r\n      */\n  checkMaxFiles: function checkMaxFiles() {\n    if (this.isMaxFilesReached()) {\n      $(this.$contentFile).addClass(\"bz-file-upload__container--hidden\");\n    } else {\n      $(this.$contentFile).removeClass(\"bz-file-upload__container--hidden\");\n    }\n  },\n\n  /**\r\n      * Check if the maximum number of files than can be uploaded has been reached\r\n      * @returns {}\r\n      */\n  isMaxFilesReached: function isMaxFilesReached() {\n    var maxFiles = this.properties.maxfiles;\n    var actualFiles = this.properties.value ? this.properties.value.length : 0;\n\n    return maxFiles !== 0 && this.filesCount >= maxFiles && actualFiles >= maxFiles;\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var errorResponse = \"\";\n\n    if (error && error.code === this.Class.ERROR_ECM_NO_AVAILABLE) {\n      errorResponse = this.getResource(\"render-ecm-service-not-available\");\n    } else if (error && error.responseText) {\n      errorResponse = error.responseText;\n    } else {\n      errorResponse = this.getResource(\"render-ecm-service-general-error\");\n    }\n\n    this.getFormContainer().failHandler(errorResponse);\n  },\n\n  lockECMFile: function lockECMFile($fileItem, fileProperties) {\n    var self = this;\n\n    $.when(self.lockUploadItem(fileProperties.idFileUpload)).done(\n    function (result) {\n      var file = [result.idFileUpload, fileProperties.fileName];\n      var newItem = self.renderUploadItem(file);\n\n      $fileItem.replaceWith(newItem);\n      self.attackMenuEvents(file);\n    });\n  },\n\n  unlockECMFile: function unlockECMFile($fileItem, fileProperties) {\n    var self = this;\n\n    $.when(self.unlockUploadItem(fileProperties.idFileUpload)).\n    done(function (result) {\n      var file = [result.idFileUpload, fileProperties.fileName];\n      var newItem = self.renderUploadItem(file);\n\n      $fileItem.replaceWith(newItem);\n      self.attackMenuEvents(file);\n    });\n  },\n\n  /**\r\n      * Method to add new file from native or hybrid environment\r\n      */\n  chooseFile: function chooseFile() {\n    if (this.isNative) {\n      this.$nativeFile.click();\n    } else if (bizagi.util.media.fileAPISupported()) {\n      this.$inputFile.click();\n    }\n  },\n\n  /**\r\n      * Check allow extensions and define possible choices\r\n      * @returns {}\r\n      */\n  checkFileExtensions: function checkFileExtensions() {\n    var self = this;\n    var validExtensions = self.properties.validExtensions || \"\";\n\n    self.validOptions = { video: false, image: false, file: false };\n\n    // Preprocess the extensions string\n    validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\n\n    if (typeof validExtensions === \"undefined\" || validExtensions === \"\") {\n      self.validOptions = { video: true, image: true, file: true };\n    } else {\n      validExtensions = validExtensions.split(\";\");\n\n      if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\n        self.validOptions.video = true;\n        self.validOptions.image = true;\n      } else {\n        for (var i = 0, length = validExtensions.length; i < length; i++) {\n          validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\n\n          if (self.Class.EXTENSIONSFILE.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.file = true;\n          } else if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.image = true;\n          } else if (self.Class.EXTENSIONSVIDEO.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.video = true;\n          }\n        }\n      }\n    }\n\n    // Media is not supported then upload control is disabled\n    if (!self.validOptions.file && !self.validOptions.image && !self.validOptions.video) {\n      $(self.$contentFile).addClass(\"bz-file-upload__container--hidden\");\n    }\n\n    // Limit of files is reached then upload control is disabled\n    if (self.isMaxFilesReached() || !self.isNative && !bizagi.util.media.fileAPISupported()) {\n      $(this.$contentFile).addClass(\"bz-file-upload__container--hidden\");\n    }\n  },\n\n  /**\r\n      * Add upload options\r\n      */\n  getUploadChoices: function getUploadChoices() {\n    var self = this;\n    var itemsUpload = [];\n\n    // Take photo, Choose photo\n    if (self.validOptions.image) {\n      itemsUpload.push({\n        \"guid\": 1,\n        \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\") });\n\n      itemsUpload.push({\n        \"guid\": 2,\n        \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\") });\n\n    }\n\n    // Take video\n    if (self.validOptions.video) {\n      itemsUpload.push({\n        \"guid\": 3,\n        \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-video\") });\n\n    }\n\n    // Stores the upload options\n    return [].concat(itemsUpload);\n  },\n\n  /**\r\n      * Handler of upload files\r\n      * @param {} ordinal\r\n      * @returns {}\r\n      */\n  handlerUploadFile: function handlerUploadFile(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    switch (actionSelected) {\n      case 2:\n\n        navigator.camera.getPicture(function (dataImage) {\n          self.dataImage = dataImage;\n          var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSVIDEO);\n\n          bizagi.loading.start();\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).\n          then(function () {\n            // Gets the real properties for the file\n            return $.when(bizagi.util.media.getFileDataInfo(self.dataImage)).\n            then(function (fileData) {\n              self.fileProperties = fileData;\n\n              if (bizagi.util.media.checkFileTypes(fileData, self.properties, extensions)) {\n                if (!bizagi.util.isAndroid()) {\n                  return $.when(bizagi.util.media.modalResolutionUpload()).then(function (buttonIndex) {\n                    if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\n                      return self.handlerResolutionUpload(buttonIndex);\n                    }\n                  });\n\n                } else {\n                  // Force click to show actionsheet menu\n                  $(\".bz-file-upload__resolution\", self.getControl()).click();\n                }\n              }\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n\n        }, self.onFail.bind(self), {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY });\n\n        break;\n      case 1:\n        navigator.camera.getPicture(function (dataImage) {\n          bizagi.loading.start();\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\n            return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n              self.fileProperties = fileData;\n              return self.saveImage(dataImage);\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        },\n        self.onFail.bind(self), {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: navigator.camera.PictureSourceType.CAMERA,\n          mediaType: navigator.camera.MediaType.PICTURE,\n          destinationType: Camera.DestinationType.FILE_URI,\n          correctOrientation: true,\n          targetWidth: 1280,\n          targetHeight: 960 });\n\n        break;\n      case 3:\n        navigator.device.capture.captureVideo(function (dataVideo) {\n          bizagi.loading.start();\n\n          $.when(bizagi.util.media.checkMaxSizeVideo(dataVideo, self.properties)).\n          then(function () {\n            return self.saveVideo(dataVideo);\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n\n        }, self.onFail.bind(self), { limit: self.Class.LIMIT });\n        break;}\n\n  },\n\n  /**\r\n      * Catch errors\r\n      * @param {} error\r\n      */\n  onFail: function onFail(error) {\n    var messageError = bizagi.util.processFailMessage(error);\n\n    bizagi.loading.stop();\n\n    if (messageError && typeof messageError === \"string\" && messageError.indexOf(\"No Activity found to handle Intent\") !== -1) {\n      var hasResource = bizagi.util.isValidResource(\"render-upload-error-media-app\");\n      var message = hasResource ? bizagi.localization.getResource(\"render-upload-error-media-app\") : \"Your device does not have an app to execute this action.\";\n\n      self.performValidationMessage(message);\n    }\n  },\n\n  /**\r\n      * Adds a validation message to the render\r\n      * @param message\r\n      */\n  performValidationMessage: function performValidationMessage(message) {\n    var fail = bizagi.util.processFailMessage(message);\n\n    bizagi.showMessageBox(fail);\n  },\n\n  /**\r\n      * Handler of resolution upload\r\n      * @param {} ordinal\r\n      * @returns {}\r\n      */\n  handlerResolutionUpload: function handlerResolutionUpload(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    // If original, save image normally, if not, reduce quality and size\n    if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\n      return self.saveImage(self.dataImage);\n    } else {\n      var resolution = bizagi.util.media.getImageResolution(actionSelected);\n\n      return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).then(function (result) {\n\n        self.editedImageURL = result.localUrl;\n        self.properties.url = result.base64Image;\n\n        return self.saveImage(self.dataImage);\n      });\n    }\n  },\n\n  /**\r\n      * Method to add new file\r\n      */\n  addFile: function addFile() {\n    var self = this;\n    var dataFile = this.$inputFile[0].files[0];\n    var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSFILE, self.Class.EXTENSIONSVIDEO);\n\n    dataFile.fullPath = this.$inputFile[0].value;\n    bizagi.loading.start();\n\n    if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n      $.when(self.processUploadFile(dataFile)).done(function (result) {\n        if (!bizagi.util.isFailResponse(result)) {\n          self.onUploadFileCompleted(JSON.parse(decodeURIComponent(result)));\n        } else {\n          self.performValidationMessage(result);\n        }\n      }).fail(function (error) {\n        self.executeFormFailHandler(error);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    } else {\n      bizagi.loading.stop();\n    }\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @param {} dataFile\r\n      */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n    var data = self.buildAddParams();\n\n    // Build add params to send to the server\n    var keys = Object.keys(data);\n\n    keys.map(function (key) {\n      formData.append(key, data[key]);\n    });\n\n    formData.append(\"Filedata\", dataFile);\n    formData.append(\"Filename\", dataFile.name.substr(dataFile.name.replace(/([\\\\\\/]+)/g, \"/\").lastIndexOf(\"/\") + 1));\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n\n    if (self.properties.contexttype)\n    formData.append(prefix + \"contexttype\", self.properties.contexttype);\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(dataFile) {\n    var data = {\n      url: this.properties.addUrl,\n      formData: this.buildAddFileParams(dataFile) };\n\n\n    return this.dataService.processUploadFile(data);\n  },\n\n  /**\r\n      * onUploadFileCompleted\r\n      * @param {} result\r\n      */\n  onUploadFileCompleted: function onUploadFileCompleted(result) {\n    var self = this;\n    var $wrapper = $(\".bz-files\", self.getControl());\n\n    if (result.idFileUpload && result.fileName) {\n      var file = [result.idFileUpload, result.fileName];\n      var newItem = self.renderUploadItem(file);\n\n      // Locate it before the upload wrapper\n      $wrapper.append(newItem);\n\n      // Copy the files value but not its reference\n      var files = self.files.slice();\n\n      //Add the new item to this temporal array\n      files.push(file);\n\n      // Update value\n      self.setValue(files, true);\n\n      // Check maxFiles\n      self.checkMaxFiles();\n      self.attackMenuEvents(file);\n\n      self.editedImageURL = null;\n    } else {\n      self.performValidationMessage(result.message);\n    }\n  },\n\n  attackMenuEvents: function attackMenuEvents(file) {\n    var self = this;\n    var $control = self.getControl();\n\n    if (file && file.getFileProperties) {\n      $.when(file.getFileProperties).done(function (fileProperties) {\n        // TODO: Fail scenario...\n        var $fileItem = $(\".\" + self.properties.id + \"-\" + fileProperties.idFileUpload, $control);\n\n        self.fileData[fileProperties.idFileUpload] = fileProperties.metadata || [];\n        self.addMenuEvents($fileItem, fileProperties);\n      });\n    }\n  },\n\n  processActionByType: function processActionByType(type, fileData, $fileItem) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    bizagi.loading.start();\n\n    // Instantiate slide form object\n    var slideView = new bizagi.rendering.tablet.slide.ecm(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      navigation: self.getParams().navigation,\n      editable: properties.editable && type !== self.Class.ACTION_DETAILS,\n      orientation: properties.orientation || \"ltr\",\n      onSave: function onSave(result) {\n        if (result.update) {\n          var file = [result.idFileUpload, result.fileName];\n          var newItem = self.renderUploadItem(file);\n\n          $fileItem.replaceWith(newItem);\n          self.attackMenuEvents(file);\n        }\n      },\n      onCancel: function onCancel() {\n        // console.log(\"CANCEL\");\n      } });\n\n\n    slideView.render({ metadata: fileData.metadata, fileData: fileData }).\n    always(function () {\n      bizagi.loading.stop();\n    });\n\n  } });","/*\r\n *   Name: BizAgi Tablet Render Search List Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the search-list render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.searchList\", bizagi.rendering.searchList.prototype);\n// Extends itself\nbizagi.rendering.tablet.searchList.extend(\"bizagi.rendering.tablet.searchList\", {\n  SEARCH_MIN_LENGTH: 2,\n  SEARCH_MAX_RECORDS: 50,\n  SEARCH_DELAY: 250,\n  SEARCH_ELEMENTS: {} },\n{\n\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      value: properties.value.map(function (el) {\n        return self.formatItem(el.value);\n      }).join(\", \") });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      * @returns {}\r\n      */\n  postRender: function postRender() {\n    this.searchListInput = $(\".bz-search-list__input\", this.getControl());\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.searchListInput = $(\".bz-search-list__input\", this.getControl());\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"searchList.readonly\");\n\n    // Render template\n    var content = $.fasttmpl(template, {\n      items: self.properties.value || {},\n      editable: self.properties.editable || true },\n    {\n      formatItem: self.formatItem });\n\n\n    return content;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Select new item\n    self.searchListInput.on(\"click\", function (evt) {\n      var parent = $(evt.target).parent() || {};\n      if (parent.hasClass('bz-pill')) return;\n\n      self._searchListViewModal();\n    });\n  },\n\n  _searchListViewModal: function _searchListViewModal() {\n    var self = this;\n    var header = self.getHeaderTemplate();\n    var content = self.getContentTemplate();\n    var footer = self.getFooterTemplate();\n\n    self.searchListInput.mobileView({\n      customHeader: header,\n      orientation: self.properties.orientation || \"\",\n      cssClassHeader: \"bz-modal-view__header-multiple\",\n      contentTemplate: content,\n      footerTemplate: footer,\n      style: \"width: 80%; height: 70%\",\n      close: function close() {\n        $(window).unbind(\"resize\");\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      },\n      afterOpenAnimation: function afterOpenAnimation(event) {\n        $(\".bz-modal-view__search\", event.view.header).focus();\n      },\n      open: function open() {\n        self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      configureActions: function configureActions(context) {\n        self.adjustResize();\n        self.configureModalViewHandlers(context);\n      } });\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    // Set internal value\n    self.setValue(finalValue);\n\n    if (value !== undefined) {\n      if (self.properties.editable) {\n        self.searchListInput.html(finalValue.map(function (el) {\n          return self.formatItem(el.value);\n        }).join(\", \"));\n      }\n    }\n  },\n\n  /**\r\n      * Remove a item from the list\r\n      * @param {} element\r\n      * @returns {}\r\n      */\n  deleteItem: function deleteItem(element) {\n    var self = this;\n    var item = element.parent('div');\n\n    // Remove from main memory and set the new value\n    self.removeElement({ id: item.data(\"id\") });\n\n    // Remove list element\n    item.remove();\n  },\n\n  selectItem: function selectItem(item) {\n    var templateItem = this.getTagTemplate(item, this.properties.editable);\n    this.modalViewTagList.append(templateItem);\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new suggest control\r\n      * @param {} inputContainer\r\n      * @returns {}\r\n      */\n  configureModalViewHandlers: function configureModalViewHandlers(modalView) {\n    var self = this;\n    var modalFooter = modalView.footer;\n    var modalHeader = modalView.header;\n\n    // Initialize data\n    var elements = {};\n\n    if (self.hasValue()) {\n      var list = self.getListItems();\n      $.each(list, function (index, item) {\n        elements[item.id] = item;\n      });\n    }\n\n    // Configuring list as a selectable element\n    self.modalViewList = $(\".bz-list\", modalView.content);\n    self.modalViewTagList = $(\".bz-search-pill__results\", modalHeader);\n\n    var $clearButton = $(\".bz-modal-view__clear\", modalHeader);\n\n    // Suggest\n    var $suggestInput = $(\".bz-modal-view__search\", modalHeader);\n    var suggestFilter = bizagi.util.debounce(function () {\n      if (this.value === \"\") {\n        $clearButton.removeClass(\"bz-modal-view__clear--visible\");\n      } else {\n        $clearButton.addClass(\"bz-modal-view__clear--visible\");\n      }\n      self.autoCompleteSearchResults($.trim(this.value));\n    }, this.Class.SEARCH_DELAY);\n\n    $suggestInput.on(\"change keyup\", suggestFilter).on(\"focus\", function () {\n      $(\".bz-search__header\", modalView.header).addClass(\"bz-search__header--active\");\n    }).on(\"blur\", function () {\n      $(\".bz-search__header\", modalView.header).removeClass(\"bz-search__header--active\");\n    });\n\n    //Clear the search\n    $clearButton.bind(\"click\", function () {\n      $suggestInput.val(\"\").trigger(\"change\");\n    });\n\n    $(\"[data-action=close]\", modalView.header).bind(\"click\", function () {\n      modalView.close();\n    });\n\n\n    // Add tags to list\n    self.modalViewList.on(\"click\", \"li\", function () {\n      var item = $.data(this).item;\n\n      // Prevent duplicate elements\n      if (!item || item && elements[item.id]) return;\n      elements[item.id] = item;\n\n      // Update state of button\n      $(modalFooter).find('.bz-btn').removeClass(\"bz-btn--secundary\");\n      $(modalFooter).find('.bz-btn').addClass(\"bz-btn--primary\");\n\n      // Update list\n      if ((Object.keys(elements) || []).length === 1) {\n        $(modalHeader).find(\".bz-search-pill__selected \").\n        removeClass(\"bz-search-pill__selected--hidden\");\n      }\n      self.selectItem(item);\n    });\n\n    // Remove tags of list\n    self.modalViewTagList.on(\"click\", '.bz-pill > .bz-btn-icn', function (evt) {\n      evt.preventDefault();\n      evt.stopPropagation();\n\n      var element = $(this);\n      var tag = element.parent('div');\n\n      // Update state of button\n      $(modalFooter).find('.bz-btn').removeClass(\"bz-btn--secundary\");\n      $(modalFooter).find('.bz-btn').addClass(\"bz-btn--primary\");\n\n      // Remove from main memory and set the new value\n      delete elements[tag.data(\"id\")];\n\n      // Remove list element\n      tag.remove();\n      // Update list\n      if ((Object.keys(elements) || []).length === 0) {\n        $(modalHeader).find(\".bz-search-pill__selected \").\n        addClass(\"bz-search-pill__selected--hidden\");\n      }\n    });\n\n    $(modalFooter).delegate(\"[data-action=save]\", \"click\", function (evt) {\n      // Create a temporal array\n      var newList = [];\n      $.each(elements, function (index, item) {\n        newList.push(item);\n      });\n\n      self.setDisplayValue({ value: newList });\n\n      modalView.close();\n    });\n  },\n\n  autoCompleteSearchResults: function autoCompleteSearchResults(currentValue) {\n    var self = this;\n\n    $.when(self.processRequest({ term: currentValue })).\n    done(function (response) {\n\n      self.modalViewList.find(\"li\").remove();\n\n      for (var i = 0, length = response.length; i < length; i++) {\n        var searchItem = self.renderSearchItem(response[i]);\n\n        searchItem.appendTo(self.modalViewList);\n      }\n    });\n  },\n\n  renderSearchItem: function renderSearchItem(item) {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"searchList.item\");\n\n    var searchItem = $.tmpl(template, {\n      id: item.id,\n      label: item.label,\n      value: this.formatItem(item.value) });\n\n\n    searchItem.data(\"item\", item);\n\n    return searchItem;\n  },\n\n  /**\r\n      * Process the request data for the autocomplete control\r\n      * @param {} req\r\n      * @returns {}\r\n      */\n  processRequest: function processRequest(req) {\n    var self = this;\n    var properties = self.properties;\n    var deferred = new $.Deferred();\n\n    // Create array for response objects   \n    var suggestions = [];\n\n    if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\n\n      // Update term property to reflect the search\n      properties.term = req.term;\n\n      // Cancel previous request in order to improve the performance\n      if (self.deferredReference && typeof self.deferredReference.reject === \"function\" &&\n      self.deferredReference.state() !== \"resolved\") {\n        self.deferredReference.reject({ hideStatus: true });\n      }\n\n      self.deferredReference = self.getData().done(function (data) {\n        if (data && data.length > 0) {\n          data = data.slice(0, properties.maxRecords);\n\n          if (data.length > self.Class.SEARCH_MAX_RECORDS) {\n            data = data.slice(0, self.Class.SEARCH_MAX_RECORDS);\n\n            suggestions.push({\n              id: self.Class.NO_RESULTS_SEARCH_ID,\n              label: self.getResource(\"render-search-maximum-records-allowed\"),\n              value: \"\" });\n\n\n\n          } else {\n            data = data.slice(0, properties.maxRecords);\n          }\n\n          $.each(data, function (i, val) {\n            if (properties.maxRecords === 0 || i < properties.maxRecords) {\n              var parseValue = bizagi.util.performTermMatches(val.value, req.term);\n\n              suggestions.push({ id: val.id, label: parseValue, value: val.value });\n            }\n          });\n\n        } else {\n          suggestions.push({\n            id: self.Class.NO_RESULTS_SEARCH_ID,\n            label: self.getResource(\"render-grid-no-records\"),\n            value: \"\" });\n\n        }\n\n        deferred.resolve(suggestions);\n\n      }).fail(function () {\n        deferred.reject();\n      });\n\n    } else {\n      deferred.resolve(suggestions);\n    }\n\n    return deferred.promise();\n  },\n\n  getContentTemplate: function getContentTemplate() {\n    var self = this;\n    var value = self.getValue();\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    var template = this.renderFactory.getTemplate(\"searchList.items\");\n    var content = $.fasttmpl(template, {\n      items: finalValue || {},\n      editable: self.properties.editable || true },\n    {\n      formatItem: self.formatItem });\n\n\n    return $.trim(content);\n  },\n\n  getFooterTemplate: function getFooterTemplate() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"searchList.actions\");\n    var content = $.fasttmpl(template, {\n      items: self.properties.value || {},\n      editable: self.properties.editable || true });\n\n\n    return $.trim(content);\n  },\n\n  getTagTemplate: function getTagTemplate(item, editable) {\n    var template = this.renderFactory.getTemplate(\"searchList.tag\");\n    var content = $.fasttmpl(template, {\n      id: item.id,\n      label: item.label,\n      value: this.formatItem(item.value),\n      editable: editable });\n\n    return $.trim(content);\n  },\n\n  adjustResize: function adjustResize() {\n    var self = this;\n    var initialScreenSize = window.innerHeight;\n\n    $(window).off(\"resize\").on(\"resize\", bizagi.util.debounce(function () {\n      var that = $(this);\n\n      // Hide the footer\n      if (that.height() < initialScreenSize) {\n        $(\".bz-mobile-view__footer_content\").addClass(\"bz-hidden\");\n      } else {\n        $(\".bz-mobile-view__footer_content\").removeClass(\"bz-hidden\");\n      }\n    }, self.Class.SEARCH_DELAY));\n  },\n\n  getHeaderTemplate: function getHeaderTemplate() {\n    var self = this;\n    var value = self.getValue();\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n    var template = this.renderFactory.getTemplate(\"searchList-modal-header\");\n\n    var content = $.fasttmpl(template, {\n      items: finalValue || {},\n      editable: self.properties.editable || true,\n      emptyItems: (finalValue || []).length === 0 },\n    {\n      formatItem: self.formatItem });\n\n\n    return $.trim(content);\n  } });","/**\r\n *   Name: Bizagi User Field render tablet Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define the basic behaviour for userfields\r\n */\n\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.userfieldWrapper\", bizagi.rendering.userfieldWrapper.prototype);\nbizagi.rendering.tablet.userfieldWrapper.extend(\"bizagi.rendering.tablet.userfieldWrapper\", {}, {\n\n  /**\r\n                                                                                                   *   Load userfield\r\n                                                                                                   */\n  getUserfieldControl: function getUserfieldControl() {\n    var self = this;\n    var sControl = self.userfieldName;\n    var mode = self.getMode();\n    var exists = eval(\"typeof bizagi.rendering.tablet.\" + sControl + \" !== 'undefined'\");\n    var def = new $.Deferred();\n\n    if (exists) {\n      // Creates the userfield instance\n      // Set true argument for tabItem\n      $.when(self.parent.ready()).done(function () {\n        def.resolve(self.createUserfieldInstance(sControl));\n      });\n\n    } else {\n      if (mode != \"execution\") {\n        setTimeout(function () {\n          $.when(self.triggerGlobalHandler(\"loadUserField\", { userfield: self.userfieldGuid, device: \"Tablet\" })).\n          pipe(function (result) {\n            if (result) {\n              // Creates the userfield instance\n              def.resolve(self.createUserfieldInstance(sControl));\n            }\n          });\n        }, 10);\n\n      } else\n      {\n        // Call ajax service in order to retrieve user field definitions\n        $.when(self.dataService.getUserfieldDefinition({\n          userfield: self.userfieldGuid,\n          device: \"tablet\" })).\n        pipe(function (data) {\n          // Load userfield in memory\n          self.loadUserfield(data);\n\n          // Creates the userfield instance\n          def.resolve(self.createUserfieldInstance(sControl));\n        });\n      }\n    }\n\n    return def.promise();\n  },\n\n  /**\r\n      * Creates the userfield instance when the userfield prototype is loaded in memory\r\n      */\n  createUserfieldInstance: function createUserfieldInstance(sControl) {\n    var self = this;\n    var control;\n    try {\n      // Create a dynamic function to avoid problem with eval calls when minifying the code\n      var dynamicFunction = \"var baDynamicFn = function(renderParams){ \\r\\n\";\n      dynamicFunction += \"return new bizagi.rendering.tablet.\" + sControl + \"(renderParams);\\r\\n\";\n      dynamicFunction += \"}\\r\\n\";\n      dynamicFunction += \"baDynamicFn\";\n      dynamicFunction = eval(dynamicFunction);\n\n      // Call the dynamic function\n      control = dynamicFunction(self.initialParams);\n    } catch (e) {\n      // If the call fails, return the default user field\n      control = self.getUserFieldInstance(self.initialParams);\n    }\n\n    control.properties.isUserField = true;\n\n    // Save userfield instance\n    self.userfieldInstance = control;\n\n    // Create proxy methods from the wrapper to the userfield instance\n    self.replicateUserfieldMethods(control);\n\n    // Replicate renderchange event from wrapped element to grid if applies\n    self.userfieldInstance.bind(\"renderchange\", function () {\n      self.triggerHandler(\"renderchange\", arguments);\n    });\n\n    return control;\n  },\n\n  /**\r\n      * Load userfield into memory\r\n      */\n  loadUserfield: function loadUserfield(data) {\n    var self = this;\n    var styleContent = \"\";\n\n    self.properties.styleGuid = self.properties.styleGuid || Math.guid();\n\n    try {\n      // Parse data\n      try {\n        data = eval(data);\n      } catch (e) {\n        bizagi.log(\"Could not parse result userfield \" + self.userfieldName, e.message);\n      }\n\n      // Iterate elements\n      $.each(data, function (index, val) {\n        if (val.type === \"js\") {\n          try {var\n\n            replaceWithDevice = function replaceWithDevice(str) {\n              return str.replace(/bizagi.rendering/gi, \"bizagi.rendering.tablet\");\n            };\n\n            val.content = val.content.replace(/bizagi\\.rendering\\.[^\\s]+\\.extend(\\s|\\n|\\s)*\\((\\s|\\n|\\s)*\\\"bizagi\\.rendering\\.[^\\s]+\\\"/gmi, replaceWithDevice);\n            window.eval(val.content);\n          } catch (ex) {\n            bizagi.log(\"Could not parse result userfield3 \" + self.userfieldName, ex.message);\n          }\n        }\n\n        if (val.type === \"css\") {\n          styleContent += val.content;\n        }\n      });\n\n      if ($.trim(styleContent) !== \"\") {\n        bizagi.util.loadStyle(styleContent, self.properties.styleGuid);\n      }\n\n      // Replicate userfield methods to the wrapper\n      var control = eval(\"bizagi.rendering.\" + self.userfieldName);\n\n    } catch (e) {\n      bizagi.log(\"Could not parse result userfield \" + self.userfieldName, e.message);\n    }\n  },\n\n\n  getUserFieldInstance: function getUserFieldInstance(params) {\n    var mode = this.getMode();\n\n    // If the call fails, return the default user field\n    return mode === \"execution\" ?\n    new bizagi.rendering.tablet.defaultUserField(params) :\n    new bizagi.rendering.tablet.designUserField(params);\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startUserfieldLoading: function startUserfieldLoading() {\n    this.element.addClass(\"bz-form-userfield__loader\");\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endUserfieldLoading: function endUserfieldLoading() {\n    this.element.removeClass(\"bz-form-userfield__loader\");\n  } });\n\n\n// Auto-extension\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.basicUserField\", bizagi.rendering.userfieldDefinition.prototype);\nbizagi.rendering.tablet.basicUserField.extend(\"bizagi.rendering.tablet.basicUserField\", bizagi.rendering.basicUserField.prototype);\nbizagi.rendering.tablet.basicUserField.extend(\"bizagi.rendering.tablet.basicUserField\", {}, {\n\n  /*\r\n                                                                                              *   Constructor\r\n                                                                                              */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Check if the userfield is supported\n    if (!this.isSupported()) {\n      var form = self.getFormContainer();\n      form.addError(self.getResource(\"render-tablet-error-userfield\"));\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  getEditableControl: function getEditableControl() {\n    if (!this.isSupported()) {\n      return bizagi.rendering.defaultUserField.prototype.getEditableControl.apply(this, arguments);\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  getReadonlyControl: function getReadonlyControl() {\n    if (!this.isSupported()) {\n      return bizagi.rendering.defaultUserField.prototype.getReadonlyControl.apply(this, arguments);\n    }\n  },\n\n  /*\r\n     *   Returns if the userfield is supported in this device\r\n     */\n  isSupported: function isSupported() {\n    return true;\n  } });\n\n\n/*\r\n        *   Default implementation for user fields\r\n        */\nbizagi.rendering.tablet.basicUserField.extend(\"bizagi.rendering.tablet.defaultUserField\", {}, {\n\n  /*\r\n                                                                                                *   Template method to implement in each device to customize each render after processed\r\n                                                                                                */\n  getEditableControl: function getEditableControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control.replace(/column/g, \"\");\n\n    self.input = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\n    self.input.addClass(\"ui-bizagi-render-userfield-notSupported\");\n\n    return self.input;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  getReadonlyControl: function getReadonlyControl() {\n    return this.getEditableControl();\n  },\n\n  /*\r\n     *  Dont send the data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n  } });","/**\r\n *   Name: Bizagi Render Image Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the image render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.image\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\nbizagi.rendering.image.prototype);\n\n// Extends itself\nbizagi.rendering.tablet.image.extend(\"bizagi.rendering.tablet.image\", {\n  QUALITY_PICTURE: 80,\n  EXTENSIONSIMG: [\"jpeg\", \"jpg\", \"png\"] },\n{\n\n  /**\r\n   * DOM input to handle HTML uploads\r\n   * @var $inputFile jQuery DOM\r\n   */\n  $inputFile: null,\n\n  /**\r\n                     * Whether or not is a native device 'Just a shortcut\r\n                     * @var isNative boolean\r\n                     */\n  isNative: false,\n\n  /**\r\n                    * Whether or not we are offline 'Just a shortcut\r\n                    * @var isOfflineForm boolean\r\n                    */\n  isOfflineForm: false,\n\n  /**\r\n                         * Update or init the element data\r\n                         * @param {} data\r\n                         */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: this });\n    this.isNative = bizagi.util.isCordovaSupported();\n\n    if (this.isOfflineForm) {\n      var maxFileSizeOfProperty = Number(this.properties.maxSize) || 1048576;\n      var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 1048576;\n      this.properties.maxSize = maxFileSizeOfProperty < maxFileSizeOfUser ? maxFileSizeOfProperty : maxFileSizeOfUser;\n    }\n  },\n\n  /**\r\n      * This method tries to get the HTML template an render the current object inside\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"image\");\n\n    return $.fasttmpl(template, { url: \"\" });\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $({});\n  },\n\n  /**\r\n      * There is no difference when rendering a readonly image, so...\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = this.renderFactory.getTemplate(\"image-readonly\");\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      var url = dataUrl || \"\";\n\n      if (!self.isDisposed()) {\n        self.properties.url = url;\n        var html = $.fasttmpl(template, { url: self.properties.url });\n        return html;\n      }\n    });\n  },\n\n  /**\r\n      * After rendering element\r\n      */\n  postRender: function postRender() {\n    var $control = this.getControl();\n    this.$inputFile = $(\".bz-image__input\", $control);\n    this.$nativeFile = $(\".bz-image__native\", $control);\n\n    if (!this.isDesignMode())\n    this.showAsyncImage();\n  },\n\n  /**\r\n      * Add action handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $control = this.getControl();\n\n    // Attach all events\n    $control.on(\"click\", \"[data-action=upload]\", function (evt) {\n      self.choosePhoto();\n    });\n\n    if (this.isNative) {\n      self.configureNativeHandlers();\n    } else {\n      self.configureHybridHandlers();\n    }\n  },\n\n  configureNativeHandlers: function configureNativeHandlers() {\n    var self = this;\n    var $control = this.getControl();\n\n    // Upload Image Options\n    this.$nativeFile.off(\"click\").actionSheet({\n      actions: self.getUploadChoices(),\n      actionClicked: function actionClicked(action) {\n        switch (action.guid) {\n          case 1:\n            self.imageAdd();\n            break;\n          case 2:\n            self.imageAdd(true);\n            break;}\n\n      },\n      appear: function appear() {\n        self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      cancelClicked: function cancelClicked(action) {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n\n    $(\".bz-image__resolution\", $control).off(\"click\").actionSheet({\n      actions: bizagi.util.media.getImageResolutionSizes(),\n      withoutCancel: true,\n      actionClicked: function actionClicked(action) {\n        bizagi.loading.start();\n        self.resolutionButtonHandler(action.guid).\n        always(function () {\n          bizagi.loading.stop();\n        });\n      },\n      appear: function appear(action) {\n        self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      cancelClicked: function cancelClicked(action) {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n  },\n\n  configureHybridHandlers: function configureHybridHandlers() {\n    var self = this;\n\n    // Image change (Hybrid only)\n    this.$inputFile.off(\"change\").on(\"change\", function () {\n      self.imageAdd();\n      this.value = \"\";\n    });\n\n    // Just in case\n    this.$inputFile.off(\"click\").on(\"click\", function (evt) {\n      evt.stopPropagation();\n    });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour\r\n      * to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    var $control = this.getControl();\n\n    $control.off(\"click\").on(\"click\", \".bz-image\", function () {\n      self.imagePreview();\n    });\n  },\n\n  /**\r\n      * Add an image\r\n      * @param useCamera boolean Whether or not to use device's camera\r\n      */\n  imageAdd: function imageAdd(useCamera) {\n    var self = this;\n\n    if (!this.isNative) {\n      self.imageAddHybrid();\n    } else {\n      self.imageAddNative(useCamera);\n    }\n  },\n\n  imageAddHybrid: function imageAddHybrid() {\n    var self = this;\n    var extensions = this.Class.EXTENSIONSIMG;\n    var dataFile = this.$inputFile[0].files[0];\n\n    dataFile.fullPath = this.$inputFile[0].value;\n    bizagi.loading.start();\n\n    if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n      self.performUploadFile(dataFile).\n      always(function () {\n        bizagi.loading.stop();\n      });\n    } else {\n      bizagi.loading.stop();\n    }\n  },\n\n  imageAddNative: function imageAddNative(useCamera) {\n    var self = this;\n    var options = {\n      quality: self.Class.QUALITY_PICTURE,\n      targetWidth: 1280,\n      targetHeight: 960,\n      correctOrientation: true };\n\n\n    if (!useCamera) {\n      var coordinates = self.getControl()[0].getBoundingClientRect();\n\n      options = {\n        quality: self.Class.QUALITY_PICTURE,\n        sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n        popoverOptions: new CameraPopoverOptions(coordinates.left, coordinates.top - 20, 200, 100, 4),\n        destinationType: navigator.camera.DestinationType.FILE_URI,\n        correctOrientation: true };\n\n    }\n\n    navigator.camera.getPicture(\n    function (dataImage) {// on success\n      return self.imageAddNativeFromCamera(dataImage);\n    }, function () {// on fail \n      bizagi.loading.stop();\n    }, options);\n\n  },\n\n  imageAddNativeFromCamera: function imageAddNativeFromCamera(dataImage) {\n    var self = this;\n    bizagi.loading.start();\n\n    // Check max size, then get file data info and upload file\n    bizagi.util.media.checkMaxSize(dataImage, self.properties).\n    then(function () {\n      return bizagi.util.media.getFileDataInfo(dataImage);\n    }).\n    then(function (fileData) {\n      if (bizagi.util.media.checkFileTypes(fileData, self.properties, self.Class.EXTENSIONSIMG)) {\n\n        self.dataImage = dataImage;\n        self.fileProperties = fileData;\n\n        // \"new Blob\" constructor is not supported in android version 4.2.2\n        var version = bizagi.util.getAndroidVersion();\n        if (version && version <= 4.2 || self.isOfflineForm) {\n          self.performUploadFile(self.dataImage).\n          always(function () {\n            bizagi.loading.stop();\n          });\n        } else {\n\n          if (!bizagi.util.isAndroid()) {\n            return $.when(bizagi.util.media.modalResolutionUpload()).\n            then(function (buttonIndex) {\n              if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\n                return self.resolutionButtonHandler(buttonIndex);\n              }\n            });\n          } else {\n            // Force click to show actionsheet menu\n            $(\".bz-image__resolution\", self.getControl()).click();\n          }\n        }\n      }\n    }).\n    always(function () {\n      bizagi.loading.stop();\n    });\n  },\n\n  /**\r\n      * Remove the current image\r\n      */\n  imageDelete: function imageDelete() {\n    var self = this;\n\n    bizagi.loading.start();\n\n    return self.dataService.deleteImage({\n      url: self.properties.deleteUrl,\n      idRender: self.properties.id,\n      xpath: self.properties.xpath,\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      contexttype: self.properties.contexttype }).\n    then(function () {\n      self.properties.value = [];\n      self.uploadFileCompleted();\n    }).fail(function (msg) {\n      var message;\n      var responseText = msg.responseText;\n\n      try {\n        message = JSON.parse(responseText);\n        message = message.message || responseText;\n      } catch (e) {\n        message = responseText;\n      }\n\n      self.setValidationMessage(message);\n\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  },\n\n  /**\r\n      * Send file using HTTP\r\n      * @param dataFile\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  uploadFile: function uploadFile(dataFile) {\n    var self = this;\n    self.properties.isChanged = true;\n\n    if (!this.isOfflineForm) {\n      if (this.isNative) {\n        return self.uploadFileNativeOnline(dataFile);\n      }\n      return self.uploadFileHybridOnline(dataFile);\n    }\n\n    // Offline code\n    if (bizagi.util.isEmpty(self.properties.value)) self.properties.value = [[null, null]];\n    var fileName = self.fileProperties != undefined ? self.fileProperties.name : dataFile.name;\n    self.dataService.fileService.changeOfflineImageName(self.properties.value, fileName);\n    return self.saveImageOffline(dataFile);\n  },\n\n  uploadFileNativeOnline: function uploadFileNativeOnline() {\n    var self = this;\n    var params = {};\n    var addParams = self.buildAddParams();\n    var fileName = self.fileProperties.name;\n\n    if (self.editedImageURL) {\n      params.dataFile = self.editedImageURL;\n    } else if (self.fileProperties) {\n      params.dataFile = self.fileProperties.url;\n    }\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.mimeType = \"image/jpeg\";\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n\n    //Cleans variables related previous uploads\n    self.editedImageURL = null;\n    self.fileProperties = null;\n\n    // Fix android 4.4 getting images from recent folder\n    params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n    return $.when(bizagi.util.media.uploadFile(params)).\n    then(function (result) {\n      var response = JSON.parse(decodeURIComponent(result.response));\n      if (response.type === \"error\") {\n        return $.Deferred().reject(response).promise();\n      }\n      return response;\n    });\n  },\n\n  uploadFileHybridOnline: function uploadFileHybridOnline(dataFile) {\n    var self = this;\n\n    if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n    bizagi.util.media.checkFileTypes(dataFile, self.properties, self.Class.EXTENSIONSIMG)) {\n\n      return self.dataService.processUploadFile({\n        url: self.properties.addUrl,\n        formData: self.buildAddFileParams(dataFile) });\n\n\n    } else {\n      return $.Deferred().reject().promise();\n    }\n  },\n\n  /**\r\n      * File upload is done\r\n      */\n  uploadFileCompleted: function uploadFileCompleted() {\n    try {\n      this.showAsyncImage();\n      this.editedImageURL = null;\n    } catch (error) {\n      // TODO: Review scenario\n      this.getFormContainer().refreshForm();\n    }\n  },\n\n  /**\r\n      * Show async image\r\n      * */\n  showAsyncImage: function showAsyncImage() {\n    var self = this;\n    var $control = self.getControl();\n    var $wrapper = $(\".bz-input-icon\", $control);\n\n    self.renderUploadItem().\n    then(function (htmlImage) {\n      if (!self.isDisposed()) {\n\n        // Empty container and add new image\n        $wrapper.empty();\n        $wrapper.append(htmlImage);\n\n        var action = self.hasValue() ? \"update\" : \"upload\";\n\n        $wrapper.attr(\"data-action\", action);\n\n        // Attack events to overflow-menu\n        if (self.hasValue()) {\n          self.configureMenu();\n        }\n      }\n    });\n  },\n\n  /**\r\n      * resolutionButtonHandler\r\n      * @param ordinal\r\n      */\n  resolutionButtonHandler: function resolutionButtonHandler(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    // If original, save image normally, if not, reduce quality and size\n    if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\n      return self.performUploadFile(self.dataImage);\n    } else {\n\n      var resolution = bizagi.util.media.getImageResolution(actionSelected);\n\n      return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).\n      then(function (result) {\n\n        self.editedImageURL = result.localUrl;\n        self.properties.url = result.base64Image;\n\n        return self.performUploadFile(self.dataImage);\n      });\n    }\n  },\n\n  /**\r\n      * Render edition view\r\n      * @returns {}\r\n      */\n  imagePreview: function imagePreview() {\n    var self = this;\n    var baseParams = self.getParams();\n    var container = baseParams.navigation.createRenderContainer({\n      title: self.properties.displayName,\n      view: {\n        zoom: true,\n        useNativeScrolling: false } });\n\n\n\n    var form = self.getFormContainer();\n    var template = self.renderFactory.getTemplate(\"image-preview\");\n    var imageData = { \"url\": self.properties.url && self.properties.url !== \"\" ? self.properties.url : \"\" };\n    var img = $.fasttmpl(template, imageData);\n\n    container.element.css(\"display\", \"none\");\n    self.inputEdition = container.element.html(img);\n    baseParams.navigation.navigate(container.id);\n\n    bizagi.loading.start();\n\n    var getFullImage = form.properties.compatibilityVersion >= 2 ? function () {\n      return imageData.url;\n    } : self.buildFullItemUrl.bind(self);\n\n    $.when(getFullImage()).then(function (dataUrl) {\n      container.element.css(\"display\", \"block\");\n\n      if (dataUrl.indexOf(\"error\") < 0) {\n        var $preview = $(\".bz-image__preview-item:first\", container.element).attr(\"src\", dataUrl);\n        var originalImageWidth = $preview.css(\"width\");\n\n        originalImageWidth = Number(originalImageWidth.substring(0, originalImageWidth.length - 2));\n\n        if (self.properties.width !== -1 && self.properties.width < originalImageWidth) {\n          $preview.css(\"width\", \"100%\");\n        }\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var properties = self.properties;\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(prefix + \"xpath\", properties.xpath);\n    formData.append(prefix + \"idRender\", properties.id);\n    formData.append(prefix + \"xpathContext\", properties.xpathContext);\n    formData.append(prefix + self.Class.BA_PAGE_CACHE, properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(prefix + \"action\", \"savefile\");\n    formData.append(self.properties.xpath, dataFile);\n\n    if (properties.contexttype) {\n      formData.append(prefix + \"contexttype\", properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var self = this;\n    var errorResponse = error.responseText ? error.responseText : bizagi.localization.getResource(\"workportal-general-error\");\n\n    self.getFormContainer().failHandler(errorResponse);\n  },\n\n  /**\r\n      * Execute upload file\r\n      * @param {} context\r\n      * @param {} dataImage\r\n      * @returns {}\r\n      */\n  performUploadFile: function performUploadFile(dataImage) {\n    var self = this;\n\n    return $.when(self.uploadFile(dataImage)).\n    then(function () {\n      if (bizagi.util.isEmpty(self.properties.value)) self.properties.value = [[0, \"uploaded\"]];\n      self.uploadFileCompleted();\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    });\n  },\n\n  /**\r\n      * Choose photo\r\n      */\n  choosePhoto: function choosePhoto() {\n    if (this.isNative) {\n      this.$nativeFile.click();\n    } else if (bizagi.util.media.fileAPISupported()) {\n      this.$inputFile.click();\n    }\n  },\n\n  /**\r\n      * Process an action in order to do something with the image\r\n      */\n  configureMenu: function configureMenu() {\n    var self = this;\n    var items = [];\n    var $control = this.getControl();\n    var $viewMore = $(\".bz-input-icon__input + .bz-icn\", $control);\n    var allowDelete = self.isOfflineForm ? false : self.properties.allowDelete && self.properties.editable;\n\n    items.push({\n      name: bizagi.localization.getResource(\"workportal-actionsheet-upload-image-preview\"),\n      fn: function fn() {\n        self.imagePreview();\n      } });\n\n\n    items.push({\n      name: bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\"),\n      fn: function fn() {\n        self.choosePhoto();\n      } });\n\n\n    if (allowDelete) {\n      items.push({\n        name: bizagi.localization.getResource(\"workportal-actionsheet-upload-remove-photo\"),\n        fn: function fn() {\n          bizagi.showConfirmationBox(self.getResource(\"render-grid-delete-confirmation\")).\n          then(function () {\n            self.imageDelete();\n          });\n        } });\n\n    }\n\n    $viewMore.overflowMenu({ items: items });\n  },\n\n  /**\r\n      * Add upload options\r\n      */\n  getUploadChoices: function getUploadChoices() {\n    return [\n    { \"guid\": 1, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\") },\n    { \"guid\": 2, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\") }];\n\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(params) {\n    var self = this;\n\n    if (self.isOfflineForm) {\n      return self.buildItemUrlOffline();\n    }\n\n    return self.buildItemUrlOnline(params);\n  },\n\n  buildItemUrlOffline: function buildItemUrlOffline() {\n    var self = this;\n    return bizagi.util.sleepUntil(function () {\n      return !self.dataService.getFileService().isLoading(self);\n    }).then(function () {\n      return bizagi.rendering.image.prototype.buildItemUrlOffline.apply(self, arguments);\n    });\n  },\n\n  buildItemUrlOnline: function buildItemUrlOnline() {\n    return bizagi.rendering.image.prototype.buildItemUrl.apply(this, arguments);\n  },\n\n  collectData: function collectData(renderValues) {\n    var self = this;\n\n    if (self.isOfflineForm && bizagi.util.isOfflineFormsV2Supported()) {\n      if (!self.properties.isChanged) return;\n\n      var xpath = self.properties.xpath;\n      if (!bizagi.util.isEmpty(xpath)) {\n        renderValues[xpath] = {\n          offlineId: self.buildOfflineImageId(),\n          name: self.dataService.fileService.getOfflineImageName(self.getValue()) };\n\n      }\n    }\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    if (!this.hasValue()) return;\n    return $.when(this.imageDelete());\n  } });","/**\r\n *   Name: Bizagi Tablet Render Document Generator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to tablet devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.document\", bizagi.rendering.document.prototype);\n// Extends itself\nbizagi.rendering.tablet.document.extend(\"bizagi.rendering.tablet.document\", {\n  ACTION_SHOW: \"show\",\n  ACTION_DOWNLOAD: \"download\",\n  ACTION_DELETE: \"delete\" },\n{\n\n  /**\r\n   * This method tries to get the HTML template an render the current object inside\r\n   * @return {jQuery} $.Deferred()\r\n   */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = this.renderFactory.getTemplate(self.getTemplate());\n    var documents = this.properties.value || [];\n\n    var data = {\n      downloadalldocuments: this.properties.downloadalldocuments,\n      allowgenerate: this.properties.allowGenerate,\n      noFiles: documents ? documents.length === 0 : true,\n      append: this.properties.append,\n      caption: this.properties.caption };\n\n\n    // Render template\n    var html = $.fasttmpl(template, data);\n\n    // Render current children\n    var items = this.renderDocumentsHtml(documents);\n    html = this.replaceFilesHtml(html, items);\n\n    // Render current children\n    var actions = this.renderActionsHtml(documents, data.noFiles, data.downloadalldocuments);\n    html = this.replaceActionsHtml(html, actions);\n\n    return html;\n  },\n\n  /**\r\n      * Method to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var $control = this.getControl();\n\n    this.$inputDocument = $(\".bz-document-template__container\", $control);\n    this.$listDocuments = $(\"[data-component=files]\", $control);\n    this.$listActions = $(\"[data-component=actions]\", $control);\n\n    this._super();\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = this.renderFactory.getTemplate(self.getTemplateReadonly());\n    var documents = this.properties.value || [];\n    var noFiles = documents ? documents.length === 0 : true;\n\n    // Render template\n    var html = $.fasttmpl(template, { noFiles: noFiles });\n\n    // Render current children\n    var items = this.renderDocumentsHtml(documents);\n    html = this.replaceFilesHtml(html, items);\n\n    return html;\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var $control = this.getControl();\n\n    this.$listDocuments = $(\"[data-component=files]\", $control);\n  },\n\n  /**\r\n      * TMethod to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Attach handler\n    this.$inputDocument.on(\"click\", function (evt) {\n      self.properties.buttonExecuted = true;\n\n      if (self.properties.validate) {\n        // Check if the form is valid, then generate\n        if (self.validateContainer()) self.documentTemplateGenerate();\n      } else {\n        // Just generate the form\n        self.documentTemplateGenerate();\n      }\n\n      self.properties.buttonExecuted = false;\n    });\n\n    // Configure delete and preview handler\n    this.$listDocuments.on(\"click\", \"[data-action]\", function (evt) {\n      var $context = $(this);\n\n      var item = $context.parent(\".bz-document\");\n      var documentFile = item.data();\n      var action = $context.data(\"action\");\n\n      self.processAction(action, documentFile);\n    });\n\n    // Configure delete and download handler\n    self.$listActions.on(\"click\", \"[data-action]\", function (evt) {\n      var $context = $(this);\n\n      var item = $context.parent(\".bz-document__download\");\n      var documentFile = item.data();\n      var action = $context.data(\"action\");\n\n      self.processAction(action, documentFile);\n    });\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n\n    // Configure delete and preview handler\n    this.$listDocuments.on(\"click\", \"[data-action]\", function (evt) {\n      var $context = $(this);\n\n      var item = $context.parent(\".bz-document\");\n      var documentFile = item.data();\n      var action = $context.data(\"action\");\n\n      self.processAction(action, documentFile);\n    });\n  },\n\n  /**\r\n      * This method must be implemented by the specific class of each device. (Virtual method)\r\n      * @param file\r\n      * @returns {*|*|*}\r\n      */\n  renderAllDocumentDownload: function renderAllDocumentDownload(file) {\n    var self = this;\n    var template = self.renderFactory.getTemplate(self.getTemplateDownload());\n    var url = self.buildAllDocumentsUrl();\n\n    // Don't render urls when not running in execution mode\n    if (!this.isExecutionMode()) url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      filename: file.fileName,\n      joined: true });\n\n\n    return html;\n  },\n\n  /**\r\n      * Redraw documents when needed\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadAllDocuments) {\n    var self = this;\n    var $control = self.getControl();\n    var $documentContainer = $(\"[data-component='files']\", $control);\n    var $actionContainer = $(\"[data-component='actions']\", $control);\n\n    // Clear current links\n    $documentContainer.empty();\n    $actionContainer.empty();\n\n    // Draw links again\n    var items = this.renderDocumentsHtml(documents);\n    $documentContainer.append(items);\n\n    // Check if there are documents and the flag to download all are available to show the link.\n    var actions = this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n    $actionContainer.append(actions);\n\n    //Set value\n    self.setValue(documents);\n  },\n\n  /**\r\n      * Method to customize each render after processed (Virtual method)\r\n      * @param url\r\n      * @param filename\r\n      */\n  showDocumentPreview: function showDocumentPreview(url, filename) {\n    var self = this;\n    bizagi.loading.start();\n\n    $.when(bizagi.util.media.downloadFile(url, filename)).\n    fail(function (error) {\n      if (error.responseText) {\n        self.getFormContainer().failHandler(error.responseText);\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  },\n\n  /**\r\n      * Process request of DocumentTemplateGenerate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDocumentTemplateGenerate: function resolveDocumentTemplateGenerate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n  },\n\n  /**\r\n      * Process request of DocumentTemplateGenerate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDeleteDocumentTemplate: function resolveDeleteDocumentTemplate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n  },\n\n  processAction: function processAction(action, documentFile) {\n    if (action === this.Class.ACTION_DELETE) {\n      this.deleteDocumentTemplate(documentFile.filename);\n    } else if (action === this.Class.ACTION_SHOW) {\n      this.showDocumentPreview(documentFile.url, documentFile.filename);\n    } else if (action === this.Class.ACTION_DOWNLOAD) {\n      this.showDocumentPreview(documentFile.url, documentFile.filename);\n    }\n  } });","/*\r\n*   Name: Bizagi Render Geolocation control\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the geolocation render class to adjust to tablet devices\r\n*/\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.geolocation\", bizagi.rendering.geolocation.prototype);\n// Extends itself\nbizagi.rendering.tablet.geolocation.extend(\"bizagi.rendering.tablet.geolocation\", {\n  ALLOW_UPDATE: \"update\" },\n{\n\n\n  /**\r\n   * Template method to implement in each device to customize each render after processed\r\n   */\n  postRender: function postRender() {\n    var $control = this.getControl();\n    this.coordinate = $control.find(\"input\");\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n\n    return $.fasttmpl(template, { value: this.getDisplayValue() });\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var $control = this.getControl();\n    this.coordinate = $control.find(\"input\");\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $control = self.getControl();\n\n    // If the control doesn't have a value set the position\n    if (self.value == null) {\n      self.updateDisplayValue();\n    }\n\n    $control.on(\"click\", \"[data-action=\" + self.Class.ALLOW_UPDATE + \"]\", self.processAction.bind(self));\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var def = new $.Deferred();\n\n    if (value != null && value !== \"\") {\n      if (self.coordinate)\n      self.coordinate.val(self.performPrecision(value));\n\n      // Set internal value\n      self.setValue(value, false);\n      def.resolve();\n    } else {\n      var onSuccess = function onSuccess(position) {\n        var coordinates = position.coords.latitude + \" \" + position.coords.longitude;\n\n        self.coordinate.val(self.performPrecision(coordinates));\n\n        // Set internal value\n        self.setValue(coordinates, false);\n        def.resolve();\n      };\n\n      var onFail = function onFail(message) {\n        def.reject(message);\n      };\n\n      if (bizagi.util.isCordovaSupported() && bizagi.util.isiOSDevice()) {\n        navigator.geolocation.getCurrentPosition(onSuccess, onFail);\n      } else {\n        self.getCurrentPosition(onSuccess, onFail);\n      }\n    }\n\n    return def.promise();\n  },\n\n\n  updateDisplayValue: function updateDisplayValue() {\n    var self = this;\n\n    self.setDisplayValue().then(function () {\n      self.setValidationMessage(\"\");\n    }).fail(function (message) {\n      self.coordinate.val(\"\");\n      self.setValidationMessage(message);\n    });\n  },\n\n  /**\r\n      * Process an action in order to do something with the geolocation\r\n      */\n  processAction: function processAction() {\n    this.coordinate.empty();\n    this.updateDisplayValue();\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return this.properties.editable ? $(\"input\", $context) : $(\".readonly-control\", $context);\n  } });","/**\r\n * Tablet definition of Action Launcher\r\n *\r\n * @author: Ricardo Pérez\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.actionLauncher\", bizagi.rendering.actionLauncher.prototype);\n// Extends itself\nbizagi.rendering.tablet.actionLauncher.extend(\"bizagi.rendering.tablet.actionLauncher\", {}, {\n  /**\r\n                                                                                                  * Render a specific implementation for Desktop device\r\n                                                                                                  */\n  postRender: function postRender() {\n    if (this.getMode() == \"design\") {\n      return;\n    }\n\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    self.actions = [];\n    self.startLoading();\n    // Define params to get list of actions        \n    $.when(self.dataService.multiaction().getActions(self.processPropertyValueArgs)).\n    then(function (response) {\n      response = self.getPropertiesActionLaucher(response);\n      self.actions = response;\n      self.deferredActions.resolve(response);\n\n      if (self.actions.length > 0) {\n        $(\"[data-element='actions-add-btn']\", control).show();\n      } else\n      {\n        $(\"[data-element='actions-add-btn']\", control).hide();\n      }\n\n      if (properties.isHorizontal) {\n        if (properties.templatetype != \"none\") {\n          return self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs).\n          then(function (templateData) {\n            return self.engine.render($.extend(templateData, {\n              isDefaultTemplate: properties.templatetype === \"default\",\n              sessionId: self.properties.sessionId }),\n            self.processPropertyValueDataTmplArgs);\n          }).then(function (tmpl) {\n            template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n            var html = $($.fasttmpl(template, {\n              template: true }));\n\n\n            $(\".bz-template\", html.wrap(\"<div>\").parent()).append(tmpl);\n            return html;\n          });\n        }\n      } else\n      {\n        template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n        return $.fasttmpl(template, {\n          template: false });\n\n      }\n    }).done(function (html) {\n      $(\"[data-element='template-container']\", control).append(html);\n      self.configureActionsHandlers();\n      self.configureTemplateHandlers();\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n\n  /**\r\n      * Validates if the action launcher control contains a valid value\r\n      * @returns {boolean}\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n    return typeof value !== \"undefined\" && value !== null && value.length > 0;\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureActionsHandlers: function configureActionsHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var actionLauncherControls = $(\".action-launcher-control\", control);\n\n    //Binding for click action on buttons\n    actionLauncherControls.on(\"click\", function () {\n      var item = self.actions[parseInt($(this).data(\"index\"))];\n      var action = {\n        guidProcess: item[0],\n        guidAction: item[4],\n        displayName: item[1],\n        actionType: item[3],\n        xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n        readOnlyForm: item[6] || false,\n        guidEntity: self.properties.guidEntity,\n        xpathActions: self.properties.xpathActions || \"\" };\n\n\n      self.processAction(action);\n    });\n\n    var actions = [];\n    for (var i = 0, length = self.actions.length; i < length; i++) {\n      actions.push({\n        guid: self.actions[i][0],\n        displayName: self.actions[i][1] });\n\n    }\n\n\n    //Binding for click action sheet\n    $(\"[data-element='actions-add-btn']\", control).actionSheet({\n      actions: actions,\n      actionClicked: function actionClicked(action) {\n        var item = self.actions.find(function (element) {\n          return element[0] == action.guid;\n        });\n\n        self.processAction({\n          guidProcess: item[0],\n          guidAction: item[4],\n          displayName: item[1],\n          actionType: item[3],\n          xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n          readOnlyForm: item[6] || false,\n          xpathActions: self.properties.xpathActions || \"\" });\n\n      } });\n\n\n    //Catch the typed text in the search field and filter the action list\n    $.expr[\":\"].FilterAction = function (entity, i, array) {\n      var search = array[3];\n      if (!search) {\n        return false;\n      }\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n    $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n      var search = $(this).val();\n      $(\".action-launcher-control\", control).show();\n      if (search) {\n        $(\".action-launcher-control\", control).\n        not(\":FilterAction(\" + search + \")\").hide();\n      }\n    });\n  },\n  /**\r\n      *\r\n      */\n  configureTemplateHandlers: function configureTemplateHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    //Catch the event from the layout link\n    self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n      params.filters = [];\n      self.triggerGlobalHandler(\"dataNavigation\", params);\n    });\n\n    $(\".bz-template-more-or-less\", control).bind(\"click\", function () {\n      $(\".bz-template\", control).toggleClass(\"bz-template--collapsed\");\n    });\n  },\n  /**\r\n      *\r\n      * @param action\r\n      */\n  processAction: function processAction(action) {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var multipleSelection = typeof properties.multipleSelection == \"undefined\" ? true : properties.multipleSelection;\n\n    if (multipleSelection) {\n      // If this is a form and has been queued, so open it\n      if (action.actionType == \"Form\" && self.countSameActions(action) >= 1 && !action.xpathContext) {\n        //Open action\n        $(\".action-to-execute-control[data-guidaction='\" + action.guidAction + \"'] label\", control).click();\n      } else {\n        $.when(self.actionManager(action)).done(function (act) {\n          self.executeAction(act);\n        });\n      }\n    } else if (self.getValue().length > 0) {\n      self.showConfirmationDialog(action);\n    } else {\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    }\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(data, action) {\n    var self = this;\n\n    if (data.response == \"success\") {\n      $.notifier.add({\n        class_name: \"success\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-success-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n    } else {\n      $.notifier.add({\n        class_name: \"error\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-failed-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n    }\n  },\n  /**\r\n      *\r\n      * @param action\r\n      * @returns {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getParams();\n\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\n    var def = new $.Deferred();\n\n    // Show dialog with new form after that\n    var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: slideForm.form.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) === 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    var renderParams = {\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath };\n\n\n    if (action.actionType === \"Form\") {\n      renderParams.contextType = \"entitytemplate\";\n      renderParams.xpathContext = undefined;\n      renderParams.guidEntity = action.guidEntity;\n      renderParams.rewriteContextType = true;\n    }\n\n    slideForm.render(renderParams);\n\n    return def.promise();\n  },\n  /**\r\n      *\r\n      * @param action\r\n      * @returns {*}\r\n      */\n  processActionFormCollection: function processActionFormCollection(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\n    var xpathPattern = \"%s[id=%s]\";\n    var xpathPatternWithoutkey = \"%s[]\";\n    var xpathContextWithKey = xpathContext !== \"\" ? printf(xpathPattern, xpathContext, action.idEntity) : xpathContext;\n    var xpathContextWithoutKey = xpathContext !== \"\" ? printf(xpathPatternWithoutkey, xpathContext) : xpathContext;\n    var formParams = form.getParams();\n\n    var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        if (action.editMode) {\n          return self.dataService.multiaction().submitData({\n            action: \"SAVE\",\n            data: data,\n            xpathContext: xpathContextWithKey,\n            idPageCache: data.idPageCache,\n            isOfflineForm: false,\n            isActionStartForm: true }).\n          done(function (savedData) {\n            def.resolve(savedData.IdScope);\n          });\n        } else {\n          return self.dataService.addGridRecordData({\n            idRender: properties.id,\n            //xpath: properties.xpath,\n            xpathContext: xpathContext,\n            contexttype: \"start\",\n            idPageCache: data.idPageCache,\n            submitData: data }).\n          done(function (savedData) {\n            action.idStartScope = savedData.IdScope;\n            action.idEntity = savedData.IdEntity;\n            self.addActionToQueue(action);\n            def.resolve(savedData.IdScope);\n          });\n        }\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    slideForm.render({\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": formParams.idCase,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": action.editMode ? xpathContextWithKey : xpathContextWithoutKey,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath });\n\n\n    return def.promise();\n  },\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var def = new $.Deferred();\n    args = args || {};\n    var formParams = self.getFormContainer().getParams();\n\n    // Show dialog\n    var slideForm = new bizagi.rendering.tablet.startForm(self.dataService, self.renderFactory, {\n      title: args.title || \"\",\n      navigation: formParams.navigation,\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\" ?\n      bizagi.localization.getResource(\"render-form-button-create\") :\n      bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n    // Render the search form\n    slideForm.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n  /**\r\n      *\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show the confirmation dialog\r\n      * bizagi.createOkCancelPopup\r\n      * @param action\r\n      * */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n\n    $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n    done(function () {\n      self.setValue([]);\n\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\"[data-element='actions-container']\", control);\n    var template = self.renderFactory.getTemplate(\"render-actionLauncher-actions-to-execute\");\n\n    self.configureQueueVisibility();\n\n    $.when(self.deferredActions).done(function (listOfActions) {\n      var getMappingAction = function getMappingAction(guidAction) {\n        var mapping = [];\n        $.each(listOfActions, function (key, value) {\n          if (value[4] == guidAction) {\n            mapping = value;\n          }\n        });\n\n        return mapping;\n\n      };\n\n      $.each(data, function (key, value) {\n        var mapping = getMappingAction(value.guidAction);\n        data[key].displayName = mapping[1];\n        data[key].guidProcess = mapping[0];\n        data[key].actionType = mapping[3];\n        data[key].xpathContext = mapping[5];\n        data[key].readOnlyForm = mapping[6];\n\n        if (data[key].params && data[key].params.idStartScope) {\n          data[key].idStartScope = data[key].params.idStartScope;\n        }\n        if (data[key].params && data[key].params.idPageCache) {\n          data[key].idPageCache = data[key].params.idPageCache;\n        }\n        if (data[key].params && data[key].params.idEntity) {\n          data[key].idEntity = data[key].params.idEntity;\n        }\n      });\n\n      if (data.length > 0) {\n        $.when($.fasttmpl(template, { actions: data })).done(function (html) {\n          actionsToExecuteContainer.empty();\n          actionsToExecuteContainer.append(html);\n\n          var removeActionSelector = $(\".bz-actions-to-execute .bz-btn-icn\", actionsToExecuteContainer);\n          var openActionSelector = $(\"label\", actionsToExecuteContainer);\n\n          removeActionSelector.on(\"click\", function () {\n            var index = $(this).parent().data(\"index\");\n            self.removeActionToQueue(index);\n          });\n\n          openActionSelector.on(\"click\", function () {\n            var target = $(this).parent();\n            var type = target.data(\"actiontype\");\n            var guidprocess = target.data(\"guidprocess\");\n            var idStartScope = target.data(\"idstartscope\");\n            var title = target.data(\"title\");\n            // When undefined return string \"undefined\" instead of type \"undefined\"\n            var xpathContext = target.data(\"xpathcontext\");\n            var readOnlyForm = target.data(\"readonlyform\") || false;\n            var idEntity = target.data(\"identity\") || \"\";\n            var guidAction = target.data(\"guidaction\");\n            var recordXpath = xpathContext || self.properties.xpathContext;\n            switch (type) {\n              case \"Process\":\n                if (idStartScope) {\n                  self.processStartForm({\n                    guidprocess: guidprocess,\n                    idStartScope: idStartScope,\n                    title: title,\n                    xpathContext: xpathContext,\n                    recordXpath: recordXpath });\n\n                }\n                break;\n              case \"Form\":\n                var action = {\n                  guidProcess: guidprocess,\n                  idStartScope: idStartScope,\n                  editMode: true,\n                  xpathContext: xpathContext,\n                  readOnlyForm: readOnlyForm,\n                  idEntity: idEntity,\n                  recordXpath: recordXpath };\n\n\n                if (action.xpathContext) {\n                  self.processActionFormCollection(action);\n                } else {\n                  // Convert string \"undefined\" into type \"undefined\"\n                  action.xpathContext = undefined;\n\n                  // Add parameters if action form\n                  var extraParams = {};\n                  var dataAction = self.value.filter(function (item) {\n                    return item.guidAction == guidAction;\n                  });\n\n                  if (dataAction.length > 0) {\n                    extraParams = {\n                      actionType: \"Form\",\n                      contextType: \"entitytemplate\",\n                      guidEntity: self.properties.guidEntity || dataAction[0].guidEntity };\n\n                  }\n\n                  self.processActionForm($.extend(action, extraParams));\n                }\n                break;\n              case \"Rule\":\n                // Rules dont have forms or something like that\n                break;}\n\n          });\n        });\n      } else {\n        actionsToExecuteContainer.empty();\n      }\n\n    });\n  },\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".action-to-execute-label\", control);\n\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/**\r\n * Tablet definition of entity template\r\n *\r\n * @author: Ricardo Pérez\r\n */\n\nbizagi.rendering.tablet.actionLauncher.extend(\"bizagi.rendering.tablet.entityTemplate\", {}, {\n  /**\r\n                                                                                                  * Render a specific implementation for tablet device\r\n                                                                                                  */\n  postRender: function postRender() {\n    if (this.getMode() == \"design\") {\n      return;\n    }\n\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    self.actions = [];\n    self.configureQueueVisibility();\n    self.startLoading();\n\n    // Define params to get template               \n    self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs).\n    then(function (templateData) {\n      return self.engine.render(templateData, $.extend(self.processPropertyValueDataTmplArgs, { formParams: self.getFormParams() })).\n      then(function (tmpl) {\n        var template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n        var html = $($.fasttmpl(template, { template: true }));\n        $(\".bz-template\", html.wrap(\"<div>\").parent()).append(tmpl);\n\n        if (properties.allowactions) {\n          return self.dataService.multiaction().getActions(self.processPropertyValueArgs).\n          then(function (response) {\n            self.deferredActions.resolve(response);\n            self.actions = response;\n\n            if (self.actions.length > 0) {\n              $(\"[data-element='actions-add-btn']\", control).show();\n            } else\n            {\n              $(\"[data-element='actions-add-btn']\", control).hide();\n            }\n            return html;\n          });\n        } else\n        {\n          return html;\n        }\n      });\n\n    }).done(function (html) {\n      $(\"[data-element='template-container']\", control).append(html);\n      self.configureActionsHandlers();\n      self.configureTemplateHandlers();\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureActionsHandlers: function configureActionsHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var entityTemplateControls = $(\".action-launcher-control\", control);\n\n    /**\r\n                                                                          * Binding for click action on buttons\r\n                                                                          */\n    entityTemplateControls.on(\"click\", function () {\n      var item = self.actions[parseInt($(this).data(\"index\"))];\n      var action = {\n        guidProcess: item[0],\n        guidAction: item[4],\n        displayName: item[1],\n        actionType: item[3],\n        xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n        xpathActions: self.properties.xpathActions || \"\" };\n\n\n      if (action.actionType === \"Form\") {\n        action.xpathContext = undefined;\n        action.contextType = \"entitytemplate\";\n        action.guidEntity = self.properties.guidEntity;\n      }\n\n      self.processAction(action);\n    });\n\n    var actions = [];\n    for (var i = 0, len = self.actions.length; i < len; i++) {\n      actions.push({\n        guid: self.actions[i][0],\n        displayName: self.actions[i][1] });\n\n    }\n\n    /**\r\n       * Binding for click action sheet\r\n       */\n    $(\"[data-element='actions-add-btn']\", control).actionSheet({\n      actions: actions,\n      actionClicked: function actionClicked(action) {\n        var item = self.actions.find(function (e) {\n          return e[0] == action.guid;\n        });\n        self.processAction({\n          guidProcess: item[0],\n          guidAction: item[4],\n          displayName: item[1],\n          actionType: item[3],\n          xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\" });\n\n      } });\n\n\n  },\n\n  configureTemplateHandlers: function configureTemplateHandlers() {\n    var self = this;\n    var control = self.getControl();\n    /**\r\n                                      * Catch the event from the layout link\r\n                                      */\n    self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n      params.filters = [];\n      params.calculateFilters = params.calculateFilters || true;\n\n      self.triggerGlobalHandler(\"dataNavigation\", params);\n    });\n\n    $(\".bz-template-more-or-less\", control).bind(\"click\", function () {\n      $(\".bz-template\", control).toggleClass(\"bz-template--collapsed\");\n    });\n  } });","/**\r\n * Device definition of Polymorphic launcher\r\n *\r\n * @author: Ricardo Perez\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.polymorphicLauncher\", bizagi.rendering.polymorphicLauncher.prototype);\n// Extends itself\nbizagi.rendering.tablet.polymorphicLauncher.extend(\"bizagi.rendering.tablet.polymorphicLauncher\", {}, {\n  /**\r\n                                                                                                            * Render a specific implementation for Tablet device\r\n                                                                                                            */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var html, template;\n\n    if (mode == \"design\" || !self.properties.surrogatedKey) {\n      return \"\";\n    }\n\n    self.configureQueueVisibility();\n\n    /**\r\n                                      * Define params to get list of actions\r\n                                      */\n    return $.when(self.dataService.multiaction().getPolymorphicActions(self.processPropertyValueArgs)).done(function (response) {\n      // Convert default response to tree data structure\n      response = self.dataService.serializePolymorphicActions(response);\n      self.totalActions = bizagi.clone(response);\n      var actions = bizagi.clone(response);\n      self.lessActions = bizagi.clone(actions);\n\n      // NOTE: Code extracted\n      var templateArguments = {\n        actions: actions,\n        allowSearch: properties.allowSearch,\n        treeActionsList: self.getTreeItems(actions) };\n\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree\");\n\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-polymorphic-launcher__constructors\", control);\n      actionsContainer.append($.fasttmpl(template, templateArguments));\n      self.bindHandlers();\n    });\n  },\n\n  /**\r\n      * Get rendered html of each node of constructors\r\n      * @param actions\r\n      * @param level\r\n      * @return {string}\r\n      */\n  getTreeItems: function getTreeItems(actions, level) {\n    var self = this;\n    var item = \"<ul>\";\n    var templateTreeItem = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree-item\");\n    actions = actions || {};\n    level = level || 1;\n\n    $.each(actions, function (key, value) {\n      item += $.fasttmpl(templateTreeItem, value);\n\n      if (value.children) {\n        item += self.getTreeItems(value.children, level + 1);\n      }\n    });\n    item += \"</ul>\";\n    return item;\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  bindHandlers: function bindHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var actionLauncherControls = $(\".bz-polymorphic-launcher__constructors li span\", control);\n\n    //Binding for click action on buttons\n    actionLauncherControls.on(\"click\", function () {\n      var $targetData = $(this).parent();\n      var action = {\n        guidEntity: $targetData.data(\"guidentity\"),\n        guidObject: $targetData.data(\"guidobject\"),\n        guidConstructor: $targetData.data(\"guidconstructor\"),\n        displayName: $targetData.data(\"display-name\"),\n        actionType: $targetData.data(\"action-type\"),\n        xpathContext: $targetData.data(\"xpathcontext\") };\n\n      self.onActionClicked(action);\n    });\n    //Catch the typed text in the search field and filter the action list\n    $.expr[\":\"].FilterAction = function (entity, i, array) {\n      var search = array[3];\n      if (!search) {\n        return false;\n      }\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n    $(\"input[data-action=search]\", control).keyup(function () {\n      var search = $(this).val();\n      $(\".bz-polymorphic-launcher__constructors li\", control).show();\n      if (search) {\n        $(\".bz-polymorphic-launcher__constructors li\", control).not(\":FilterAction(\" + search + \")\").hide();\n      }\n    });\n\n  },\n  /**\r\n      * Execute an Action\r\n      * @param action\r\n      */\n  onActionClicked: function onActionClicked(action) {\n    var self = this;\n\n    $.when(self.actionManager(action)).done(function (act) {\n      self.executeAction(act);\n    });\n  },\n  /**\r\n      * Show a message when action has been executed\r\n      * @param status\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(status, action) {\n    var self = this;\n    if (status == \"success\") {\n      $.notifier.add({\n        class_name: \"success\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-success-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n\n    } else {\n      $.notifier.add({\n        class_name: \"error\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-failed-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n    }\n  },\n  /**\r\n      * Show a dialog with a form\r\n      * @param action\r\n      * @return {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext || \"\";\n    var formParams = form.getParams();\n\n    var recordXpath = self.properties.recordXpath;\n\n    // Show dialog with new form after that\n    var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        var pageCache = data.idPageCache;\n        data.idPageCache = null;\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: slideForm.form.properties.xpathContext, //self.properties.xpathContext,\n          idPageCache: pageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) == 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    slideForm.render({\n      \"idForm\": action.guidObject,\n      \"contextType\": \"entity\",\n      \"guidEntity\": action.guidEntity,\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      //\"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"recordXpath\": recordXpath });\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var def = new $.Deferred();\n    var formParams = form.getParams();\n    args = args || {};\n\n\n    var slideForm = new bizagi.rendering.tablet.startForm(self.dataService, self.renderFactory, {\n      //showSaveButton: properties.editable,\n      maximized: properties.maximized,\n      title: args.title || \"\",\n      navigation: formParams.navigation,\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || this.typeForm == \"SummaryForm\" ? bizagi.localization.getResource(\"render-form-button-create\") : bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        form.startLoading();\n\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          form.endLoading();\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n\n    slideForm.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n  /**\r\n      * Execute and action if a form is global form or summary, or send to queue\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show confirmation dialog\r\n      * @param action\r\n      */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n\n    $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n    done(function () {\n      self.setValue([]);\n\n      $.when(self.actionManager(action)).\n      done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-actions-to-execute\");\n    self.configureQueueVisibility();\n\n    $.when($.fasttmpl(template, { actions: data })).done(function (html) {\n      actionsToExecuteContainer.empty();\n      actionsToExecuteContainer.append(html);\n      var removeActionSelector = $(\".bz-pill .bz-btn-icn\", actionsToExecuteContainer);\n      var openActionSelector = $(\".bz-pill__label\", actionsToExecuteContainer);\n      removeActionSelector.on(\"click\", function () {\n        var index = $(this).parent().data(\"index\");\n        self.removeActionToQueue(index);\n      });\n      openActionSelector.bind(\"click\", function () {\n        var $target = $(this).parent();\n        var type = $target.data(\"actiontype\");\n        var guidprocess = $target.data(\"guidprocess\");\n        var idStartScope = $target.data(\"idstartscope\");\n        var title = $target.data(\"title\");\n        var xpathContext = $target.data(\"xpathcontext\");\n        var idEntity = $target.data(\"identity\") || \"\";\n        var guidEntity = $target.data(\"guidentity\");\n        var recordXpath = xpathContext || self.properties.xpathContext;\n\n        switch (type) {\n          case \"Process\":\n            if (idStartScope) {\n              self.processStartForm({\n                guidprocess: guidprocess,\n                idStartScope: idStartScope,\n                title: title,\n                xpathContext: xpathContext,\n                recordXpath: recordXpath });\n\n            }\n            break;\n          case \"Form\":\n            var action = {\n              guidProcess: guidprocess,\n              idStartScope: idStartScope,\n              editMode: true,\n              xpathContext: xpathContext,\n              idEntity: idEntity,\n              guidEntity: guidEntity,\n              guidObject: guidprocess };\n\n\n            self.processActionForm(action);\n            break;\n          case \"Rule\":\n            // Rules dont have forms or something like that\n            break;}\n\n      });\n    });\n  },\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".bz-polymorphic-launcher__title\", control);\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/*  \r\n *   Name: BizAgi Tablet Render list Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from render tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.checkList\", bizagi.rendering.checkList.prototype);\n// Extends itself\nbizagi.rendering.tablet.checkList.extend(\"bizagi.rendering.tablet.checkList\", {}, {\n  /**\r\n                                                                                         *   Template method to implement in each device to customize each render after processed\r\n                                                                                         */\n  postRender: function postRender() {\n    this._super();\n    this.properties.unique = Math.ceil(Math.random() * 1000);\n    this.properties.required = true;\n  },\n\n  /**\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    // Call base\n    self._super();\n    $(\"input[type=checkbox]\", self.getControl()).bind(\"change\", function () {\n      var itemId = $(this).data(\"item-guid\");\n      self.onCheckListGroupChange(itemId, this.checked);\n    });\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.checked = checked;\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    $(\"input[type=checkbox]\", this.getControl()).removeAttr(\"checked\");\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n  } });","/*  \r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Iván Ricardo Taimal Narváez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from base list\nbizagi.rendering.tablet.checkList.extend(\"bizagi.rendering.tablet.activityCheckList\", {}, {\n  /**\r\n                                                                                              * Update or init the element data\r\n                                                                                              * @param data\r\n                                                                                              */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n    var goal = this.properties.activityDescription && this.properties.activityDescription !== \"\" ?\n    bizagi.localization.getResource(\"workportal-project-plan-activity-goal\") + \": \" + this.properties.activityDescription : \"\";\n    this.properties.displayName = goal !== \"\" ? goal : bizagi.localization.getResource(\"workportal-project-plan-activity-work-title\");\n    this.properties.displayType = \"vertical\";\n  },\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var $control = self.getControl();\n    // Call base\n    this._super();\n\n    self.newItemName = $(\".bz-checkList__input\", $control);\n    self.addEditButton = $(\".add-edit-item-button-checklist\", $control);\n    self.cancelEditButton = $(\".cancel-edit-item-button-checklist\", $control);\n\n    self.additionalElements();\n    self.notifyLoadItems();\n  },\n\n  notifyLoadItems: function notifyLoadItems() {\n    var self = this;\n    setTimeout(function () {\n      var resolvedItems = self.properties.items.filter(function (i) {\n        return i.resolved;\n      }).length;\n      bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\n        'hasChanges': true,\n        'idActivity': self.properties.idActivity,\n        'itemsResolved': resolvedItems,\n        'items': self.properties.items,\n        'progress': self.properties.activityWork }));\n\n\n      bizagi.webpart.publish(\"onLoadDataItemsFromFormActivityPlan\", { \"items\": self.properties.items, \"activityWork\": self.properties.activityWork });\n    }, 100);\n  },\n\n  additionalElements: function additionalElements() {\n    var self = this;\n\n    if (self.addEditButton && self.addEditButton.length > 0) {\n      self.addEditButton.hide();\n    }\n    if (self.cancelEditButton && self.cancelEditButton.length > 0) {\n      self.cancelEditButton.hide();\n    }\n    //control.parent().addClass(\"render-activity-check\");\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    this._super();\n    $(\"[data-action=add]\", control).unbind(\"click\").click(function () {\n      var itemSelected = $(\".bz-checkList__item.bz-checkList__item--selected\", self.control);\n      if (itemSelected.length <= 0) {\n        self.prepareNewItem();\n      } else {\n        $(\".bz-checkList__input\", itemSelected).focus();\n      }\n    });\n\n    $(\"[data-action=delete]\", self.control).bind(\"click\", function () {\n      var that = this;\n      var message = bizagi.localization.getResource(\"workportal-widget-reports-confirm\");\n      var contentHolder = $(this).closest(\".bz-checkList__item\");\n\n      contentHolder.addClass(\"ui-bizagi-to-remove\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n\n        var itemId = $(that).closest(\".bz-checkList__item\").data(\"item-guid\");\n\n        self.deleteItem(itemId);\n      }).fail(function () {\n        contentHolder.removeClass(\"ui-bizagi-to-remove\");\n      });\n    });\n\n    $(\"label[data-action=edit-item]\", self.control).bind(\"click\", function () {\n      var element = $(this).closest(\".bz-checkList__item\");\n      var itemId = element.data(\"item-guid\");\n      var itemPosition = element.data(\"item-position\");\n\n      self.selectItem(itemId, itemPosition);\n    });\n  },\n\n  selectItem: function selectItem(itemId) {\n    var self = this;\n\n    for (var i = 0, length = self.properties.items.length; i < length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items[i].selected = true;\n      } else {\n        self.properties.items[i].selected = false;\n      }\n    }\n\n    self.repaintControl();\n\n    var itemSelected = $(\".bz-checkList__item.bz-checkList__item--selected\", self.getControl());\n    var itemSelectedName = $(\".bz-checkList__input\", itemSelected);\n    var itemContent = itemSelectedName.val();\n\n    itemSelectedName.focus();\n    itemSelectedName[0].setSelectionRange(itemContent.length, itemContent.length);\n\n    self.addSelectedHandlers();\n  },\n\n  deleteItem: function deleteItem(itemId) {\n    var self = this;\n\n    for (var i = 0, length = self.properties.items.length; i < length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items.splice(i, 1);\n        break;\n      }\n    }\n\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.addSelectedHandlers();\n  },\n\n  prepareNewItem: function prepareNewItem() {\n    var self = this;\n    var newItem = {\n      guid: Math.guid(),\n      resolved: false,\n      name: \"\",\n      selected: true };\n\n\n    self.properties.items.push(newItem);\n    self.repaintControl();\n    self.newItemName.focus();\n\n    self.newItemName.blur(function () {\n      var itemSelected = $(\".bz-checkList__item.bz-checkList__item--selected\", self.control);\n      var itemSelectedName = $(\".bz-checkList__input\", itemSelected);\n      var valueInput = itemSelectedName.val();\n\n      if (valueInput === \"\" && self.properties.items && self.properties.items.length >= 1 &&\n      self.properties.items.slice(-1)[0].name === \"\") {\n        self.properties.items.pop();\n      }\n    });\n    self.addSelectedHandlers();\n    self.newItemName.keypress(function (event) {\n      if (event.which == 13) {\n        event.preventDefault();\n        self.addItem();\n        self.prepareNewItem();\n      }\n    });\n  },\n\n  addSelectedHandlers: function addSelectedHandlers() {\n    var self = this;\n    var itemSelected = $(\".bz-checkList__item.bz-checkList__item--selected\", self.control);\n    var itemSelectedName = $(\".bz-checkList__input\", itemSelected);\n    itemSelectedName.focus();\n    $(\"[data-action=accept-edit]\", itemSelected).bind(\"click\", function () {\n      var newItemName = itemSelectedName.val();\n      if (newItemName && newItemName !== \"\") {\n        self.addItem();\n      }\n    });\n\n\n    $(\"[data-action=cancel-edit]\", itemSelected).bind(\"click\", function (e) {\n      var newItemName = itemSelectedName.val();\n      var element = $(this).closest(\".bz-checkList__item\");\n      var itemPosition = element.data(\"item-position\");\n      var guidItem = element.data(\"item-guid\");\n\n      if (newItemName && newItemName !== \"\" && self.properties.items[itemPosition].name !== \"\") {\n        self.properties.items[itemPosition].selected = false;\n      }\n      if (newItemName === \"\" || self.properties.items[itemPosition].name === \"\") {\n        self.deleteItem(guidItem);\n      }\n      //self.addButton.show();\n      self.repaintControl();\n    });\n  },\n\n  addItem: function addItem() {\n    var self = this;\n    var $control = self.getControl();\n\n    var itemSelected = $(\".bz-checkList__item.bz-checkList__item--selected\", $control);\n    var itemSelectedName = $(\".bz-checkList__input\", itemSelected);\n    var newItemName = itemSelectedName.val();\n\n    $.each(self.properties.items, function (index, item) {\n      if (item.selected) {\n        item.name = newItemName;\n        item.selected = false;\n      }\n    });\n    self.updateOriginalValue();\n    self.setValue(self.properties.items);\n    self.repaintControl();\n  },\n\n  repaintControl: function repaintControl() {\n    var self = this;\n    var checkListHtml = self.renderControl();\n    $(\"[data-component=checkList]\", self.control).replaceWith(checkListHtml);\n    self.postRender();\n    self.configureHandlers();\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.resolved = checked;\n    self.setValue(self.properties.items);\n    self.refreshValue(self.properties.items);\n  },\n\n  refreshValue: function refreshValue(items) {\n    var self = this,\n    length = items.length,\n    completed = 0;\n\n    for (var i = 0; i < length; i++) {\n      if (items[i].resolved) {\n        completed += 1;\n      }\n    }\n\n    if (length > 0) {\n      self.properties.activityWork = Math.floor(100 * completed / length);\n    } else\n    {\n      self.properties.activityWork = 100;\n    }\n\n    self.notifyLoadItems();\n  },\n\n  getValue: function getValue() {\n    var self = this;\n    return self.value || [];\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var originalValue = JSON.stringify(self.properties.originalValue);\n    var newValue = JSON.stringify(self.value);\n    return originalValue !== newValue;\n  },\n\n  /*\r\n      *   Updates original value for some comparisons\r\n      */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = bizagi.clone(self.value);\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var idActivity = self.properties.idActivity;\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath) && !bizagi.util.isEmpty(idActivity)) {\n        if (Array.isArray(value)) {\n          renderValues[properties.xpath] = {\n            idActivity: idActivity,\n            items: value };\n\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    } else {\n      bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\n        'hasChanges': false }));\n\n    }\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties,\n    message;\n    var items = self.getValue();\n    message = self.getResource(\"render-activity-check-list-validation\");\n    for (var i = 0; i < items.length; i += 1) {\n      var item = items[i];\n      if (!item.resolved) {\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        break;\n      }\n    }\n  } });","/*  \r\n *   Name: Bizagi Tablet Range Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the range render class to adjust to tablet devices\r\n */\n\n// Extends from render Tablet base\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.range\", bizagi.rendering.range.prototype);\n// Extends itself\nbizagi.rendering.tablet.range.extend(\"bizagi.rendering.tablet.range\", {}, {\n\n  /**\r\n                                                                             * Render a specific implementation for tablet device\r\n                                                                             */\n  postRender: function postRender() {\n    var properties = this.properties;\n  },\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var control = this.getControl();\n  } });","/*  \r\n *   Name: Bizagi Tablet Range Date Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the range date render class to adjust to tablet devices\r\n */\n\n// Extends from range tablet base\nbizagi.rendering.tablet.range.extend(\"bizagi.rendering.tablet.rangeDate\", bizagi.rendering.rangeDate.prototype);\n// Extends itself\nbizagi.rendering.tablet.rangeDate.extend(\"bizagi.rendering.tablet.rangeDate\", {}, {\n\n  /**\r\n                                                                                     * Render actual value of control and set events\r\n                                                                                     * @param data\r\n                                                                                     */\n  setDisplayValue: function setDisplayValue(data) {\n    var control = this.getControl();\n  } });","/*  \r\n *   Name: Bizagi Tablet Range Date Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the range date render class to adjust to tablet devices\r\n */\n\n// Extends from range tablet base\nbizagi.rendering.tablet.range.extend(\"bizagi.rendering.tablet.rangeMoney\", bizagi.rendering.rangeMoney.prototype);\n// Extends itself\nbizagi.rendering.tablet.rangeMoney.extend(\"bizagi.rendering.tablet.rangeMoney\", {}, {\n\n  /**\r\n                                                                                       * Render a specific implementation for Desktop device\r\n                                                                                       */\n  postRender: function postRender() {\n    var minControl = new bizagi.rendering.money(this.getRenderProperties(\"min\"));\n    var maxControl = new bizagi.rendering.money(this.getRenderProperties(\"max\"));\n\n    this.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/*  \r\n *   Name: Bizagi Tablet Range Date Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the range date render class to adjust to tablet devices\r\n */\n\n// Extends from range tablet base\nbizagi.rendering.tablet.range.extend(\"bizagi.rendering.tablet.rangeNumber\", bizagi.rendering.rangeNumber.prototype);\n// Extends itself\nbizagi.rendering.tablet.rangeNumber.extend(\"bizagi.rendering.tablet.rangeNumber\", {}, {\n\n  /**\r\n                                                                                         * Render a specific implementation for Desktop device\r\n                                                                                         */\n  postRender: function postRender() {\n    var self = this;\n\n    var minControl = new bizagi.rendering.number(self.getRenderProperties(\"min\"));\n    var maxControl = new bizagi.rendering.number(self.getRenderProperties(\"max\"));\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.tablet.columns.column\", {}, {\n\n  /*\r\n                                                                                       *   Apply custom overrides to each decorated instance\r\n                                                                                       */\n  applyOverrides: function applyOverrides(decorated) {\n    // Hacks the getControl method in the decorated render to add features\n    if (decorated && decorated.getControl) {\n      this.originalGetControl = decorated.getControl;\n      decorated.getControl = this.getControl;\n    }\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This code runs under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var result = this._super();\n\n    if (!result || result.length == 0) {\n      result = $(self.element || self.observableElement);\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var result = this._super(surrogateKey, value, tableCell);\n    var decorated = this.getDecorated(surrogateKey);\n    if (decorated.element) {\n      // Clean all display types\n      decorated.element.removeClass(\"ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed\").\n      removeClass(\"ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value\");\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Returns the cell html to be inserted in the table\r\n     */\n  /* renderReadOnly: function (surrogateKey, value, tableCell) {\r\n             var self = this;\r\n             var decorated = this.getDecorated(surrogateKey);\r\n             var cell = this._super(surrogateKey, value, tableCell);\r\n               // Just draw render if the cell layout has been filled\r\n             if (cell && cell.length > 0) {\r\n                   // Add display value\r\n                 $(\".ui-bizagi-cell-readonly\", cell).html(decorated.getDisplayValue());\r\n                   // Apply styles to cell\r\n                 self.applyColumnStyles(cell);\r\n                   // Return just content\r\n                 return cell;\r\n             }\r\n               return \"\";\r\n         },*/\n\n\n\n\n\n\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var editable = self.properties.editable;\n    decorated.properties.editable = false;\n\n    if (decorated.grid == undefined) {\n      decorated.grid = self.grid;\n    }\n    if (self.properties.singleInstance) {\n      decorated.element = cell;\n    }\n    decorated.postRenderElement(cell);\n    decorated.properties.editable = editable;\n\n    /*var self = this;\r\n                                              var properties = self.properties;\r\n                                                // Call base\r\n                                                // var decorated = this.getDecorated(surrogateKey);\r\n                                              this._super(key, cell);\r\n                                                // Just draw render if the cell layout has been filled\r\n                                              if (cell && cell.length > 0) {\r\n                                              var cellIcon = $(\".ui-bizagi-cell-icon\", cell);\r\n                                              if (!properties.editable) cellIcon.detach();\r\n                                                // Apply styles to cell\r\n                                              self.applyColumnStyles(cell);\r\n                                                if (properties.align == \"left\") {\r\n                                              cellIcon.addClass(\"ui-bizagi-cell-icon-right\");\r\n                                              }\r\n                                              }*/\n\n\n\n\n\n  },\n\n  /*\r\n     *   Apply column styles to a specified element\r\n     */\n  applyColumnStyles: function applyColumnStyles(element) {\n    var self = this;\n    var properties = self.properties;\n    element = $(element);\n    // Set cell alignment\n    element.css(\"-webkit-box-pack\", properties.align);\n\n    // Set cell back color\n    if (properties.textFormat.background) {\n      element.css(\"background-color\", properties.textFormat.background);\n      element.css(\"background-image\", \"none\");\n    }\n  },\n\n  isValueValid: function isValueValid(surrogateKey, value, messages, propertyOverrides) {\n    var isValid = this._super(surrogateKey, value, messages, propertyOverrides);\n    var decorated = this.getDecorated(surrogateKey);\n\n    if (decorated && decorated.element) {\n      if (!isValid) {\n        decorated.element.addClass(\"bz-form-item--error\");\n      } else {\n        decorated.element.removeClass(\"bz-form-item--error\");\n      }\n    }\n\n    return isValid;\n  } });","/**\r\n *   Name: Bizagi Tablet Render Document Generator Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.document\", {}, {\n\n  /**\r\n                                                                                                 * Apply custom overrides to each decorated instance\r\n                                                                                                 * @param decorated\r\n                                                                                                 */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n\n    self._super(decorated);\n\n    if (mode !== \"design\") {\n      self.surrogateKey = decorated.surrogateKey;\n\n      decorated.getXpath = this.getXpath;\n      decorated.getDocumentXpath = this.getDocumentXpath;\n      decorated.getContextXpath = this.getContextXpath;\n      decorated.documentTemplateGenerate = this.documentTemplateGenerate;\n      decorated.preRenderControl = this.preRenderControl;\n      decorated.deleteDocumentTemplate = this.deleteDocumentTemplate;\n      decorated.properties.xpathContext = self.getContextXpath();\n    }\n  },\n\n  /**\r\n      * This method tries to get the HTML template an render the current object inside\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  renderControl: function renderControl() {\n    this.preRenderControl();\n\n    return this._super();\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n\n    self.startLoading();\n\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    var grid = self.parent;\n    var form = self.getFormContainer();\n\n    $.when(form.submitData()).done(function () {\n      $.when(self.dataService.generateDocumentTemplate(properties)).done(function (response) {\n        $.when(grid.refresh()).done(function () {\n          self.autoOpenDocuments();\n        });\n\n        self.endLoading();\n      }).fail(function () {\n        self.showErrorMessage();\n        self.endLoading();\n      });\n    }).fail(function (message) {\n      // Add error messages\n      self.getFormContainer().addErrorMessage(message);\n      self.endLoading();\n    });\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param xpath\r\n      * @returns {string}\r\n      */\n  getXpath: function getXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index !== -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @param xpath\r\n      * @returns {*|string}\r\n      */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index !== -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return xpathPath;\n  },\n\n  /**\r\n      * Post process the element after it has been rendered\r\n      * @param surrogateKey\r\n      * @param cell\r\n      * @param tableCell\r\n      */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell, tableCell);\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {string}\r\n      */\n  getContextXpath: function getContextXpath() {\n    var self = this;\n    var form = self.getFormContainer();\n    var xpathContext = form.properties.xpathContext ? form.properties.xpathContext + \".\" : \"\";\n    return xpathContext + this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  preRenderControl: function preRenderControl() {\n    if (this.value != undefined && this.properties.value != undefined) {\n      this.properties.value = this.value;\n    }\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      * @param filename\r\n      */\n  deleteDocumentTemplate: function deleteDocumentTemplate(filename) {\n    var self = this;\n    var grid = self.parent;\n    var params = {};\n\n    params.xpath = self.properties.xpath + \"[fileName='\" + filename + \"']\";\n    params.idRender = self.properties.id;\n    params.xpathContext = self.getContextXpath();\n    params.idPageCache = self.properties.idPageCache;\n\n    $.when(self.dataService.deleteUploadFile(params)).done(function () {\n      grid.refresh();\n    });\n  } });","/*\r\n*   Name: BizAgi Desktop Date Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the date column decorator class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.date\", {}, {\n  /*\r\n                                                                                            *   Apply custom overrides to each decorated instance\r\n                                                                                            */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  } });","/*\r\n*   Name: BizAgi Tablet Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.text\", {}, {});","/*\r\n*   Name: BizAgi Tablet Number Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the number column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.number\", {}, {});","\n/*\r\n *   Name: Bizagi Column Rendering Tablet numberScientificNotation\r\n *   Author: Luis Cabarique - LuisCE\r\n *   Comments:\r\n *   -   This script will define a base class to define the Column Scientific number notation\r\n */\n\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.numberScientificNotation\", {}, {\n  /*\r\n                                                                                                                 *   Post process the element after it has been rendered\r\n                                                                                                                 */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n    // Apply styles to input\n    var input = $(\"input\", cell);\n    this.applyColumnStyles(input);\n  },\n\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    return self.renderReadOnly(key, value);\n  },\n\n  postRenderSummary: function postRenderSummary(key, value) {\n    var self = this;\n    self.postRenderReadOnly(key, value);\n    return true;\n  } });","/**\r\n *   Name: Bizagi Tablet Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the column decorator class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.image\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var properties = self.properties;\n    this._super(decorated);\n\n    // decorated.getUploadXpath = this.getUploadXpath;\n    decorated.properties.xpathContext = properties.xpathContext.length > 0 ?\n    properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\" :\n    self.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n  }\n\n  /*\r\n    *   Returns the xpath to be used  \r\n    */\n  /*getUploadXpath: function () {\r\n           return (this.grid.properties.xpath || this.properties.xpath ) + \"[id=\" + this.surrogateKey + \"].\" + this.properties.xpath;\r\n       }*/ });","/*\r\n*   Name: BizAgi Tablet Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.upload\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    decorated.getUploadXpath = this.getUploadXpath;\n    // hack apply upload plugin method in order to execute it only when the control is inserted in the DOM\n    var originalMethod = decorated.applyUploadPlugin;\n\n    decorated.getXpathContext = function () {\n      var surrogateKey = this.surrogateKey || \"\";\n      var self = this;\n      var properties = self.properties;\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n    };\n\n    decorated.buildItemUrl = function (file) {\n      var self = this;\n      var properties = self.properties;\n\n      var form = self.getFormContainer();\n      var xpathContext = self.getXpathContext();\n      var contextXpath = \"\";\n\n      return self.dataService.getUploadFileUrl({\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        idPageCache: properties.idPageCache,\n        fileId: file.id,\n        sessionId: form.properties.sessionId,\n        contexttype: properties.contexttype });\n\n    };\n  },\n\n  getUploadXpath: function getUploadXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + this.properties.xpath;\n  } });","/**\r\n *   Name: Bizagi Tablet Link Column Decorator Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the link column decorator class to adjust to tablet devices\r\n */\n\n// Extends from column\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.link\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n\n    self._super(decorated);\n\n    if (mode !== \"design\" && mode !== \"layout\") {\n      self.surrogateKey = decorated.surrogateKey;\n\n      decorated.getXpath = self.getXpath;\n      decorated.properties.xpathContext = self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n\n      if (self.grid.properties.xpathContext && decorated.properties.xpathContext.indexOf(self.grid.properties.xpathContext) === -1)\n      decorated.properties.xpathContext = self.grid.properties.xpathContext + \".\" + decorated.properties.xpathContext;\n    }\n\n    if (decorated.properties.type === \"columnFormLink\") {\n      decorated.getFormLinkXpath = this.getFormLinkXpath;\n    }\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param xpath\r\n      * @returns {string}\r\n      */\n  getXpath: function getXpath(xpath) {\n    var self = this;\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(self.grid.properties.xpath);\n\n    if (index !== -1) {\n      xpathPath = xpathPath.substr(index + self.grid.properties.xpath.length + 1);\n    }\n\n    return self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {string}\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  },\n\n  /**\r\n      * Get Form Link xpath to use\r\n      * @returns {*}\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    // Calculate layout properties to maximized property\n    this.properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n    this.calculateInitialLayoutProperties();\n\n    if (!this.properties.xpath) return;\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Desktop Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.uploadecm\", {}, {\n  /*\r\n                                                                                                 *   Apply custom overrides to each decorated instance\r\n                                                                                                 */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    self._super(decorated);\n\n    if (decorated && decorated.getControl) {\n      self.originalGetControl = decorated.getControl;\n      decorated.getControl = self.getControl;\n    }\n\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    decorated.buildItemUrl = function (file) {\n      var self = this;\n      var properties = self.properties;\n\n      var form = self.getFormContainer();\n\n      var columnXpath = self.getUploadXpath(self.surrogateKey);\n      columnXpath = columnXpath.split(\".\");\n      var nameFile = columnXpath[columnXpath.length - 1];\n      var xpathContext = self.getXpathContext(self.surrogateKey);\n\n      return self.dataService.getUploadFileUrl({\n        idRender: properties.id,\n        xpath: nameFile,\n        xpathContext: xpathContext,\n        idPageCache: properties.idPageCache,\n        fileId: file.idFileUpload,\n        sessionId: form.properties.sessionId,\n        contexttype: properties.contexttype });\n\n    };\n\n    decorated.buildAddParams = function () {\n      var self = this;\n      var properties = self.properties;\n      var form = self.getFormContainer();\n      var columnXpath = self.getUploadXpath(self.surrogateKey);\n\n      columnXpath = columnXpath.split(\".\");\n      var nameFile = columnXpath[columnXpath.length - 1];\n      var xpathContext = self.getXpathContext(self.surrogateKey);\n\n      var data = {\n        url: properties.addUrl,\n        xpath: properties.xpath,\n        idAttrib: properties.idAttrib,\n        xpathContext: xpathContext,\n        metaValues: [],\n        idSession: form.properties.sessionId,\n        contexttype: \"entity\",\n        validExtensions: properties.validExtensions,\n        maxSize: properties.maxSize };\n\n\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n\n      return data;\n    };\n\n    decorated.getXpathContext = function () {\n      var self = this;\n      var properties = self.properties;\n      return properties.xpathContext.length > 0 ?\n      properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\" :\n      self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n    };\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    var cell = \"<div></div>\";\n\n    var decorated = this.getDecorated(surrogateKey);\n    decorated.setValue(value);\n    self.setValue(surrogateKey, value);\n    self.setSurrogateKey(surrogateKey);\n\n    self.applyOverrides(decorated);\n    // Set grid and id references to the control in order to render the content\n    decorated.grid = this.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set ready deferred\n    self.readyDeferred = new $.Deferred();\n\n    // We need to render the inner control as read-only\n    if (decorated.files.length > 0) {\n      // Changes editable to false to render read-only\n      var editable = this.properties.editable;\n      decorated.properties.editable = false;\n      cell = decorated.render(\"cell.upload\");\n    }\n    return cell;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  getUploadXpath: function getUploadXpath(surrogateKey) {\n    surrogateKey = this.surrogateKey || surrogateKey || \"\";\n    return this.grid.properties.xpath + \"[id=\" + surrogateKey + \"].\" + this.properties.xpath;\n  },\n\n  getControl: function getControl() {\n    var self = this;\n    var result = self._super();\n    //TODO: Tablet validar si esto es realmente necesario asi como esta\n    if (!result || result.length == 0) {\n      return $(\".ui-bizagi-cell-readonly\", self.element || self.observableElement);\n    } else {\n      return $(\".bz-form-item\", self.element || self.observableElement);\n    }\n  } });","/**\r\n* Grid control Column Button\r\n*\r\n* @author Ricardo Pérez\r\n*/\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.button\", {}, {});","/**\r\n *   Name: Bizagi Tablet Radio Column Decorator Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n */\n\n// Extends from column\nbizagi.rendering.tablet.columns.combo.extend(\"bizagi.rendering.tablet.columns.radio\", {}, {});","/**\r\n *   Name: Bizagi Tablet Readonly Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the readonly column decorator class to adjust to tablet devices\r\n */\n\n// Extends from column\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.readonly\", bizagi.rendering.columns.readonly.prototype);\n// Extends itself\nbizagi.rendering.tablet.columns.readonly.extend(\"bizagi.rendering.tablet.columns.readonly\", {}, {});","/**\r\n *   Name: Bizagi Tablet Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the column decorator class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.search\", {}, bizagi.rendering.columns.search.prototype);\n// Extends itself\nbizagi.rendering.tablet.columns.search.extend(\n\"bizagi.rendering.tablet.columns.search\",\n{},\n{\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    if (value && value.length > 0) {\n      value = [].concat(value[0]);\n      return this._super(surrogateKey, {\n        id: value[0],\n        label: value[1],\n        additionallabel: value[2] || undefined });\n\n    } else {\n      return this._super(surrogateKey, value);\n    }\n  },\n\n  render: function render(surrogateKey, value) {\n    var self = this;\n    if (value && value.length > 0) {\n      value = [].concat(value[0]);\n      return self._super(surrogateKey, {\n        id: value[0],\n        label: value[1],\n        additionallabel: value[2] || undefined });\n\n    } else {\n      return self._super(surrogateKey, value);\n    }\n  },\n\n  /*\r\n      *   Post process the element after it has been rendered\r\n      */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var decorated = this.getDecorated(surrogateKey);\n    decorated.refreshControl = this.refreshControl;\n  },\n\n  refreshControl: function refreshControl() {\n    this.grid.refreshCell({\n      key: this.surrogateKey,\n      column: this.properties.xpath,\n      xpathContext: this.getFormContainer().properties.xpathContext });\n\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.tablet.columns.combo.extend(\"bizagi.rendering.tablet.columns.list\", {}, {});","/*\r\n*   Name: BizAgi tablet exclusiveCheck Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the check column to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.exclusiveCheck\", {}, {\n  /*\r\n                                                                                                       *   Returns the in-memory processed element\r\n                                                                                                       *   so the caller could append it to any place\r\n                                                                                                       */\n  render: function render(surrogateKey, value) {\n\n    var self = this;\n    // Set flag to check when a render has changed\n    self.changed = false;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var gridChanges = self.grid.changes;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value                       \n    if (self.getMode() == \"execution\") {\n      self.setValue(surrogateKey, value || false);\n      var tmpCheck = self.grid.enabledChecks[self.properties.xpath].find(function (el) {\n        return el.id == surrogateKey;\n      });\n      if (typeof tmpCheck == \"undefined\") {\n        self.grid.enabledChecks[self.properties.xpath].push({\n          id: surrogateKey,\n          value: value || false,\n          originalValue: value || false,\n          changed: false });\n\n      }\n    }\n\n\n    if (value == null) {\n      self.changed = true;\n      var obj = {};\n      obj[self.properties.xpath] = self.getValue(surrogateKey);\n      if (bizagi.util.isEmpty(gridChanges[surrogateKey])) gridChanges[surrogateKey] = {};\n      gridChanges[surrogateKey] = $.extend({}, gridChanges[surrogateKey], obj);\n    }\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n\n    // If the render is not editable return the readonly version of the column\n    if (!properties.editable)\n    return self.renderReadOnly.apply(self, arguments);\n\n    // Returns the decorated render inside a custom layout for columns\n    self.readyDeferred = new $.Deferred();\n    var cell = decorated.render(\"cell\");\n\n    // If the render changes set the flag on\n    decorated.bind(\"renderchange\", function () {\n      self.changed = true;\n      var checkList = self.grid.enabledChecks[self.properties.xpath];\n\n      checkList.forEach(function (el) {\n        if (el.id == surrogateKey) {\n          el.value = decorated.value;\n          el.changed = true;\n        } else\n        if (decorated.value && el.value) {\n          var tmpDecorated = self.getDecorated(el.id);\n          tmpDecorated.setDisplayValue(false);\n          self.setValue(el.id, false);\n          el.value = false;\n          el.changed = true;\n          if (form.isOfflineForm) {\n            self.handleOfflineChange(tmpDecorated, el);\n          }\n        }\n      });\n\n      var simpleXpathArray = self.properties.xpath.split(\".\");\n      self.grid.exclusiveChanges[self.properties.xpath] = {\n        xpath: self.properties.xpath,\n        simpleXpath: simpleXpathArray[simpleXpathArray.length - 1],\n        value: self.getValue(surrogateKey),\n        key: surrogateKey };\n\n    });\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n\n    return cell;\n  },\n\n  /*\r\n      *   Post process the element after it has been rendered\r\n      */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    var self = this;\n    var mode = self.getMode();\n\n    this.setSurrogateKey(surrogateKey);\n    if (mode == \"execution\") {\n\n      var decorated = this.getDecorated(surrogateKey);\n      var control = decorated.getControl();\n\n      // Check if its new row\n      if (control.parents(\"tr\").data(\"new-row\")) {\n        //Set the column with this attribute, so when the control is evaluated in isValid(), validated\n        //also if it is required, and belongs from a new row\n        self.isNewRow = true;\n      } else {\n        self.isNewRow = false;\n      }\n    }\n  },\n\n  isValueValid: function isValueValid(surrogateKey, value, invalidElements, propertyOverrides) {\n    var self = this;\n    self.grid.enabledChecks = self.grid.enabledChecks || {};\n    var checkedValues = (self.grid.enabledChecks[self.properties.xpath] || []).filter(function (el) {\n      return el.value;\n    });\n\n    if (checkedValues.length > 1) {\n      var message = self.getResource(\"render-exclusive-column-check-error\").replaceAll(\"#label#\", self.properties.displayName);\n      /* var messageData = {xpath: self.properties.xpath, message: message}; */\n      invalidElements.push(message);\n      return false;\n    } else {\n      return true;\n    }\n\n  },\n  /**\r\n     * Add change in grid changes and update grid data rows\r\n     * @param {*} decorated \r\n     * @param {*} element \r\n     */\n  handleOfflineChange: function handleOfflineChange(decorated, element) {\n    var self = this;\n    var gridChanges = self.grid.changes;\n    var newChange = {};\n    newChange[decorated.properties.xpath] = element.value;\n    if (bizagi.util.isEmpty(gridChanges[element.id])) gridChanges[element.id] = {};\n    gridChanges[element.id] = $.extend({}, gridChanges[element.id], newChange);\n    //Update grid data (grid.properties.data)\n    self.grid.onCellChange(self, null, element.id);\n  } });","/**\r\n *   Name: Bizagi Render Hidden Column Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the hidden render class to adjust to tablet devices\r\n */\n\n// Extends from columns tablet base\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.hidden\", bizagi.rendering.columns.hidden.prototype);\n// Extends itself\nbizagi.rendering.tablet.columns.hidden.extend(\"bizagi.rendering.tablet.columns.hidden\", {}, {});","/**\r\n *   Name: Bizagi Tablet Render Factory\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a render factory to create tablet versions of each render type\r\n */\n\nbizagi.rendering.base.factory.extend(\"bizagi.rendering.tablet.factory\", {}, {\n\n  /**\r\n                                                                               * Load all the templates used for rendering     \r\n                                                                               */\n  loadTemplates: function loadTemplates() {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(\n\n    // Icons\n    self.loadTemplate(\"icons\", self.getFileTemplate(\"common.bizagi.rendering.icons\")),\n\n    // Common\n    self.loadTemplate(\"form-error\", self.getFileTemplate(\"bizagi.rendering.tablet.form-error\")),\n    self.loadTemplate(\"form-waiting\", self.getFileTemplate(\"bizagi.rendering.tablet.form-waiting\")),\n\n    // Containers\n    self.loadTemplate(\"form\", self.getFileTemplate(\"bizagi.rendering.tablet.form\") + \"#bz-form-container\"),\n    self.loadTemplate(\"complexgateway\", self.getFileTemplate(\"bizagi.rendering.tablet.form\") + \"#bz-form-complex-gateway\"),\n\n    self.loadTemplate(\"panel\", self.getFileTemplate(\"bizagi.rendering.tablet.panel\")),\n    self.loadTemplate(\"tab\", self.getFileTemplate(\"bizagi.rendering.tablet.tab\")),\n    self.loadTemplate(\"tabItem\", self.getFileTemplate(\"bizagi.rendering.tablet.tabItem\")),\n    self.loadTemplate(\"horizontal\", self.getFileTemplate(\"bizagi.rendering.tablet.horizontal\")),\n    self.loadTemplate(\"accordion\", self.getFileTemplate(\"bizagi.rendering.tablet.accordion\")),\n    self.loadTemplate(\"accordionItem\", self.getFileTemplate(\"bizagi.rendering.tablet.accordionItem\")),\n    self.loadTemplate(\"group\", self.getFileTemplate(\"bizagi.rendering.tablet.group\")),\n    self.loadTemplate(\"section\", self.getFileTemplate(\"bizagi.rendering.tablet.section\")),\n    self.loadTemplate(\"searchForm\", self.getFileTemplate(\"bizagi.rendering.tablet.searchForm\")),\n    self.loadTemplate(\"contentPanel\", self.getFileTemplate(\"bizagi.rendering.tablet.contentPanel\")),\n\n    // Renders\n    self.loadTemplate(\"render\", self.getFileTemplate(\"bizagi.rendering.tablet.render\")),\n    self.loadTemplate(\"readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.readonly\")),\n    self.loadTemplate(\"readonly-value\", self.getFileTemplate(\"bizagi.rendering.tablet.readonly\")),\n    self.loadTemplate(\"text\", self.getFileTemplate(\"bizagi.rendering.tablet.text\") + \"#bz-render-text\"),\n    self.loadTemplate(\"text-readOnly\", self.getFileTemplate(\"bizagi.rendering.tablet.text\") + \"#bz-render-text-readonly\"),\n    self.loadTemplate(\"extendedText\", self.getFileTemplate(\"bizagi.rendering.tablet.extendedText\") + \"#bz-render-extended-text\"),\n    self.loadTemplate(\"extendedText-readOnly\", self.getFileTemplate(\"bizagi.rendering.tablet.extendedText\") + \"#bz-render-extended-text-readonly\"),\n\n    self.loadTemplate(\"number\", self.getFileTemplate(\"bizagi.rendering.tablet.number\")),\n    self.loadTemplate(\"numberScientificNotation\", self.getFileTemplate(\"bizagi.rendering.tablet.numberScientificNotation\")),\n    self.loadTemplate(\"date\", self.getFileTemplate(\"bizagi.rendering.tablet.date\")),\n    self.loadTemplate(\"yesno\", self.getFileTemplate(\"bizagi.rendering.tablet.yesno\")),\n    self.loadTemplate(\"check\", self.getFileTemplate(\"bizagi.rendering.tablet.check\")),\n    self.loadTemplate(\"checkList\", self.getFileTemplate(\"bizagi.rendering.tablet.checkList\")),\n\n    self.loadTemplate(\"combo\", self.getFileTemplate(\"bizagi.rendering.tablet.combo\") + \"#bz-combo-control\"),\n    self.loadTemplate(\"combo-readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.combo\") + \"#bz-combo-control-readonly\"),\n    self.loadTemplate(\"combo-list\", self.getFileTemplate(\"bizagi.rendering.tablet.combo\") + \"#bz-combo-control-list\"),\n\n    self.loadTemplate(\"modal-header-search\", self.getFileTemplate(\"bizagi.rendering.tablet.modal\") + \"#bz-modal-view-header-search\"),\n    self.loadTemplate(\"modal-footer-done\", self.getFileTemplate(\"bizagi.rendering.tablet.modal\") + \"#bz-modal-view-footer-done\"),\n\n    self.loadTemplate(\"list\", self.getFileTemplate(\"bizagi.rendering.tablet.list\") + \"#bz-render-list\"),\n    self.loadTemplate(\"list-items\", self.getFileTemplate(\"bizagi.rendering.tablet.list\") + \"#bz-render-list-items\"),\n\n    self.loadTemplate(\"radio\", self.getFileTemplate(\"bizagi.rendering.tablet.radio\")),\n\n    self.loadTemplate(\"image\", self.getFileTemplate(\"bizagi.rendering.tablet.image\") + \"#bz-render-image\"),\n    self.loadTemplate(\"image-item\", self.getFileTemplate(\"bizagi.rendering.tablet.image\") + \"#bz-render-image-item\"),\n    self.loadTemplate(\"image-preview\", self.getFileTemplate(\"bizagi.rendering.tablet.image\") + \"#bz-render-image-preview\"),\n    self.loadTemplate(\"image-readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.image\") + \"#bz-render-image-readonly\"),\n\n    self.loadTemplate(\"uploadSlide\", self.getFileTemplate(\"bizagi.rendering.tablet.slide.upload\")),\n\n    self.loadTemplate(\"upload\", self.getFileTemplate(\"bizagi.rendering.tablet.upload\") + \"#bz-render-upload\"),\n    self.loadTemplate(\"upload-item\", self.getFileTemplate(\"bizagi.rendering.tablet.upload\") + \"#bz-render-upload-item\"),\n    self.loadTemplate(\"upload-readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.upload\") + \"#bz-render-upload-readonly\"),\n\n    self.loadTemplate(\"grid\", self.getFileTemplate(\"bizagi.rendering.tablet.grid\")),\n    self.loadTemplate(\"cell\", self.getFileTemplate(\"bizagi.rendering.tablet.cell\")),\n    self.loadTemplate(\"cell.readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.cell.readonly\")),\n    self.loadTemplate(\"cell.upload\", self.getFileTemplate(\"bizagi.rendering.tablet.cell.upload\")),\n\n    self.loadTemplate(\"search\", self.getFileTemplate(\"bizagi.rendering.tablet.search\") + \"#bz-render-search\"),\n    self.loadTemplate(\"search.item\", self.getFileTemplate(\"bizagi.rendering.tablet.search\") + \"#bz-render-search-item\"),\n    self.loadTemplate(\"search.items\", self.getFileTemplate(\"bizagi.rendering.tablet.search\") + \"#bz-render-search-items\"),\n\n    self.loadTemplate(\"searchItem\", self.getFileTemplate(\"bizagi.rendering.tablet.searchItem\")),\n\n    self.loadTemplate('searchList', self.getFileTemplate('bizagi.rendering.tablet.searchList') + \"#bz-render-search-list\"),\n    self.loadTemplate(\"searchList.item\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-item\"),\n    self.loadTemplate(\"searchList.items\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-items\"),\n    self.loadTemplate(\"searchList.actions\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-actions\"),\n    self.loadTemplate(\"searchList.tag\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-tag\"),\n    self.loadTemplate(\"searchList.readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-readonly\"),\n    self.loadTemplate(\"searchList-modal-header\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-modal-header\"),\n\n    self.loadTemplate(\"letter\", self.getFileTemplate(\"bizagi.rendering.tablet.letter\")),\n    self.loadTemplate(\"letter.readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.letter.readonly\")),\n    self.loadTemplate(\"letter.dialog\", self.getFileTemplate(\"bizagi.rendering.tablet.dialog-letter\")),\n    self.loadTemplate(\"button\", self.getFileTemplate(\"bizagi.rendering.tablet.button\")),\n    self.loadTemplate(\"link\", self.getFileTemplate(\"bizagi.rendering.tablet.link\")),\n    self.loadTemplate(\"formLink\", self.getFileTemplate(\"bizagi.rendering.tablet.formLink\")),\n    self.loadTemplate(\"geolocation\", self.getFileTemplate(\"bizagi.rendering.tablet.geolocation\")),\n    self.loadTemplate('association', self.getFileTemplate('bizagi.rendering.tablet.association')),\n\n    self.loadTemplate(\"ecm\", self.getFileTemplate(\"bizagi.rendering.tablet.ecm\") + \"#bz-render-ecm\"),\n    self.loadTemplate(\"ecm-item\", self.getFileTemplate(\"bizagi.rendering.tablet.ecm\") + \"#bz-render-ecm-item\"),\n    self.loadTemplate(\"ecm-readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.ecm\") + \"#bz-render-ecm-readonly\"),\n\n    self.loadTemplate(\"list-multiselect\", self.getFileTemplate(\"bizagi.rendering.tablet.multiSelect\") + \"#bz-multiselect\"),\n    self.loadTemplate(\"multiselect-list\", self.getFileTemplate(\"bizagi.rendering.tablet.multiSelect\") + \"#bz-multiselect-list\"),\n\n    self.loadTemplate(\"document\", self.getFileTemplate(\"bizagi.rendering.tablet.document\") + \"#bz-document-generator\"),\n    self.loadTemplate(\"document-item\", self.getFileTemplate(\"bizagi.rendering.tablet.document\") + \"#bz-document-generator-item\"),\n    self.loadTemplate(\"document-readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.document\") + \"#bz-document-generator-readonly\"),\n    self.loadTemplate(\"document-download\", self.getFileTemplate(\"bizagi.rendering.tablet.document\") + \"#bz-document-generator-download\"),\n\n    // Hand Signature\n    self.loadTemplate(\"hand-signature\", self.getFileTemplate(\"bizagi.rendering.tablet.handSignature\") + \"#bz-signature\"),\n    self.loadTemplate(\"hand-signature-readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.handSignature\") + \"#bz-signature-readonly\"),\n\n    // Action launcher\n    self.loadTemplate(\"render-actionLauncher\", self.getFileTemplate(\"bizagi.rendering.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher\"),\n    self.loadTemplate(\"render-actionLauncher-horizontal\", self.getFileTemplate(\"bizagi.rendering.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-horizontal\"),\n    self.loadTemplate(\"render-actionLauncher-vertical\", self.getFileTemplate(\"bizagi.rendering.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-vertical\"),\n    self.loadTemplate(\"render-actionLauncher-actions-to-execute\", self.getFileTemplate(\"bizagi.rendering.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-actionLauncher-design\", self.getFileTemplate(\"bizagi.rendering.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-design\"),\n\n    // Polymorphic launcher\n    self.loadTemplate(\"render-polymorphicLauncher\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree-item\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree-item\"),\n    self.loadTemplate(\"render-polymorphicLauncher-actions-to-execute\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-polymorphicLauncher-confirm\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-confirm\"),\n    self.loadTemplate(\"render-polymorphicLauncher-design\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-design\"),\n\n    //Renders Layouts\n    self.loadTemplate(\"render-layout\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.render\")),\n    self.loadTemplate(\"layout-image\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.image\") + \"#ui-bizagi-render-layout-image\"),\n    self.loadTemplate(\"layout-image64\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.image\") + \"#ui-bizagi-render-layout-image64\"),\n    self.loadTemplate(\"layout-label\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.label\")),\n    self.loadTemplate(\"layout-link\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.link\")),\n    self.loadTemplate(\"layout-text\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.text\")),\n    self.loadTemplate(\"layout-date-time\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.dateTime\")),\n    self.loadTemplate(\"layout-money\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.money\")),\n    self.loadTemplate(\"layout-number\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.number\")),\n    self.loadTemplate(\"layout-upload\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.upload\")),\n\n    // Grid plugin stuff\n    self.loadTemplate(\"bizagi.grid.grid\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid\"),\n    self.loadTemplate(\"bizagi.grid.waiting\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-waiting\"),\n    self.loadTemplate(\"bizagi.grid.table\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-table\"),\n    self.loadTemplate(\"bizagi.grid.table.empty\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-table-empty\"),\n    self.loadTemplate(\"bizagi.grid.column\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-column\"),\n    self.loadTemplate(\"bizagi.grid.column.special\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-column-special\"),\n    self.loadTemplate(\"bizagi.grid.row\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-row\"),\n    self.loadTemplate(\"bizagi.grid.row.buttons\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-row-buttons\"),\n    self.loadTemplate(\"bizagi.grid.cell\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-cell\"),\n    self.loadTemplate(\"bizagi.grid.cell.special\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-cell-special\"),\n    self.loadTemplate(\"bizagi.grid.pager\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-pager\"),\n    self.loadTemplate(\"bizagi.grid.buttons\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-buttons\"),\n    self.loadTemplate(\"bizagi.grid.dynamicpager\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-dynamic-pager\"),\n    self.loadTemplate(\"bizagi.grid.totalizer\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-totalizer\"),\n\n    // Grid Offline\n    self.loadTemplate(\"bizagi.grid.offline.buttons\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#bz-grid-offline-buttons\"),\n    self.loadTemplate(\"bizagi.grid.offline.row.buttons\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#bz-grid-offline-row-buttons\"),\n    self.loadTemplate(\"bizagi.grid.offline.cell.special\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#bz-grid-offline-cell-special\")).\n\n    done(function () {\n      var tmplIcons = $.fasttmpl(self.getTemplate(\"icons\"));\n      var svgStoreCounter = $(\"head\").find('#genome-forms-icons').length;\n\n      if (svgStoreCounter === 0)\n      $(\"head\").append(tmplIcons);\n\n      // Resolve when all templates are loaded\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  getFileTemplate: function getFileTemplate(src, onDemand) {\n    var device = bizagi.detectDevice();\n    return bizagi.getTemplate(src, onDemand, device == \"desktop\" ? \"tablet_ios\" : device);\n  },\n  /**\r\n      * Returns the appropiate container based on the container type    \r\n      */\n  getContainer: function getContainer(params) {\n    var self = this;\n    var type = params.type;\n    var containerParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    type = type.replace(/tablet/, '');\n\n    if (type == \"form\")\n    return new bizagi.rendering.tablet.form(containerParams);\n\n    if (type == \"template\")\n    return new bizagi.rendering.tablet.formTemplate(containerParams);\n\n    if (type == \"queryForm\")\n    return new bizagi.rendering.tablet.queryForm(containerParams);\n\n    if (type == \"layout\")\n    return new bizagi.rendering.tablet.layout(containerParams);\n\n    if (type == \"usersForm\")\n    return new bizagi.rendering.tablet.usersForm(containerParams);\n\n    if (type == \"panel\")\n    return new bizagi.rendering.tablet.panel(containerParams);\n\n    if (/^contentpanel$/i.test(type))\n    return new bizagi.rendering.tablet.contentPanel(containerParams);\n\n    if (/^nestedform$/i.test(type))\n    return new bizagi.rendering.tablet.nestedForm(containerParams);\n\n    if (type == \"tab\")\n    return new bizagi.rendering.tablet.tab(containerParams);\n\n    if (/^tabitem$/i.test(type))\n    return new bizagi.rendering.tablet.tabItem(containerParams);\n\n    if (type == \"horizontal\")\n    return new bizagi.rendering.tablet.horizontal(containerParams);\n\n    if (type == \"accordion\")\n    return new bizagi.rendering.tablet.accordion(containerParams);\n\n    if (type == \"accordionItem\")\n    return new bizagi.rendering.tablet.accordionItem(containerParams);\n\n    if (type == \"group\")\n    return new bizagi.rendering.tablet.group(containerParams);\n\n    if (type == \"section\")\n    return new bizagi.rendering.tablet.section(containerParams);\n\n    if (type == \"searchForm\") {\n      containerParams.context = \"search\";\n      containerParams.contexttype = \"metadata\";\n      return new bizagi.rendering.tablet.searchForm(containerParams);\n    }\n\n    if (type == \"mobileform\")\n    return new bizagi.rendering.mobileform(containerParams);\n\n    if (type == \"mobilegroup\")\n    return new bizagi.rendering.mobilegroup(containerParams);\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", params.data, \"error\");\n\n    return null;\n  },\n\n  /**\r\n      * Returns the appropriate column based on the render type\r\n      */\n  getColumn: function getColumn(params) {\n    var type = params.type;\n    var data = params.data;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n    var isOfflineForm = bizagi.util.isOfflineForm({ container: params.parent });\n\n    type = type.replace(/tablet/, '');\n\n    if (type == \"columnText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        columnParams.decorated = bizagi.rendering.tablet.extendedText;\n      } else {\n        // Creates one normal text render\n        columnParams.decorated = bizagi.rendering.tablet.text;\n      }\n\n      return new bizagi.rendering.tablet.columns.text(columnParams);\n    }\n\n    if (type == \"columnSearchList\") {\n      columnParams.decorated = bizagi.rendering.tablet.searchList;\n      return new bizagi.rendering.tablet.columns.searchList(columnParams);\n    }\n\n    if (type == \"columnNumber\") {\n      columnParams.decorated = bizagi.rendering.tablet.number;\n      return new bizagi.rendering.tablet.columns.number(columnParams);\n    }\n\n    if (type == \"columnMoney\") {\n      columnParams.decorated = bizagi.rendering.tablet.money;\n      return new bizagi.rendering.tablet.columns.number(columnParams);\n    }\n\n    if (type == \"columnDate\") {\n      columnParams.decorated = bizagi.rendering.tablet.date;\n      return new bizagi.rendering.tablet.columns.date(columnParams);\n    }\n\n    if (type == \"columnBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        columnParams.decorated = bizagi.rendering.tablet.check;\n        if (params.data.properties.isExclusive) {\n          return new bizagi.rendering.tablet.columns.exclusiveCheck(columnParams);\n        }\n      } else {\n        // Creates one yes-no render\n        columnParams.decorated = bizagi.rendering.tablet.yesno;\n      }\n      return new bizagi.rendering.tablet.columns.column(columnParams);\n    }\n\n    if (type == \"columnCombo\") {\n      columnParams.decorated = bizagi.rendering.tablet.combo;\n      return new bizagi.rendering.tablet.columns.combo(columnParams);\n    }\n\n    if (type == \"columnRadio\") {\n      columnParams.decorated = bizagi.rendering.tablet.radio;\n      return new bizagi.rendering.tablet.columns.radio(columnParams);\n    }\n\n    if (type == \"columnList\") {\n      columnParams.decorated = bizagi.rendering.tablet.list;\n      return new bizagi.rendering.tablet.columns.list(columnParams);\n    }\n\n    if (type == \"columnHidden\") {\n      columnParams.decorated = bizagi.rendering.tablet.hidden;\n      return new bizagi.rendering.tablet.columns.hidden(columnParams);\n    }\n\n    if (type == \"columnUpload\") {\n      if (isOfflineForm && bizagi.util.isOfflineFormsV2Supported()) {\n        columnParams.decorated = bizagi.rendering.tablet.upload.offline;\n      } else\n      {\n        columnParams.decorated = bizagi.rendering.tablet.upload;\n      }\n      return new bizagi.rendering.tablet.columns.upload(columnParams);\n    }\n\n    if (type == \"columnImage\") {\n      columnParams.decorated = bizagi.rendering.tablet.image;\n      return new bizagi.rendering.tablet.columns.image(columnParams);\n    }\n\n    if (type == \"columnUploadEcm\") {\n      columnParams.decorated = bizagi.rendering.tablet.ecm;\n      return new bizagi.rendering.tablet.columns.uploadecm(columnParams);\n    }\n\n    if (type == \"columnLink\") {\n      columnParams.decorated = bizagi.rendering.tablet.link;\n      return new bizagi.rendering.tablet.columns.link(columnParams);\n    }\n\n    if (type == \"columnFormLink\") {\n      columnParams.decorated = bizagi.rendering.tablet.formLink;\n      return new bizagi.rendering.tablet.columns.link(columnParams);\n    }\n\n    if (type == \"columnUserfield\") {\n      columnParams.decorated = bizagi.rendering.tablet.userfieldWrapper;\n      return new bizagi.rendering.tablet.columns.column(columnParams);\n    }\n\n    if (type == \"columnSearch\") {\n      columnParams.decorated = bizagi.rendering.tablet.search;\n      return new bizagi.rendering.tablet.columns.search(columnParams);\n    }\n\n    if (type == \"columnLabel\") {\n      columnParams.decorated = bizagi.rendering.tablet.label;\n      return new bizagi.rendering.tablet.columns.column(columnParams);\n    }\n\n    if (type == \"columnReadonly\") {\n      columnParams.decorated = bizagi.rendering.tablet.readonly;\n      return new bizagi.rendering.tablet.columns.readonly(columnParams);\n    }\n\n    if (type == \"columnDocument\") {\n      columnParams.decorated = bizagi.rendering.tablet.document;\n      return new bizagi.rendering.tablet.columns.document(columnParams);\n    }\n\n    /*\r\n      Not supported\r\n       if (type == \"columnLetter\") {\r\n          columnParams.decorated = bizagi.rendering.letter;\r\n          return new bizagi.rendering.columns.letter(columnParams);\r\n      } */\n\n    if (type == \"columnButton\") {\n      columnParams.decorated = bizagi.rendering.tablet.button;\n      return new bizagi.rendering.tablet.columns.button(columnParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n\n  getRender: function getRender(params) {\n    var self = this;\n    var type = params.type;\n    var data = params.data;\n    var properties = data.properties;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ container: params.parent });\n\n    if (!type)\n    type = \"label\";\n\n    type = type.replace(/tablet/, '');\n\n    if (type == \"text\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      // Creates one extended render\n      if (isExtended) {\n        return new bizagi.rendering.tablet.extendedText(renderParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.tablet.text(renderParams);\n    }\n\n    if (type == \"association\") {\n      return new bizagi.rendering.tablet.association(renderParams);\n    }\n\n    if (type == \"label\") {\n      return new bizagi.rendering.tablet.label(renderParams);\n    }\n\n    if (type == \"hidden\") {\n      return new bizagi.rendering.tablet.hidden(renderParams);\n    }\n\n    if (type == \"number\") {\n      // Number Scientific Notation\n      if (properties && properties.dataType === 29) {\n        return new bizagi.rendering.tablet.numberScientificNotation(renderParams);\n      }\n\n      return new bizagi.rendering.tablet.number(renderParams);\n    }\n\n    if (type == \"money\") {\n      return new bizagi.rendering.tablet.money(renderParams);\n    }\n\n    if (type == \"date\") {\n      return new bizagi.rendering.tablet.date(renderParams);\n    }\n\n    if (type == \"boolean\") {\n      var display = data.properties.display || \"option\";\n\n      // Creates one check render\n      if (display == \"check\") {\n        return new bizagi.rendering.tablet.check(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.tablet.yesno(renderParams);\n    }\n\n    if (type == \"combo\") {\n      return new bizagi.rendering.tablet.combo(renderParams);\n    }\n\n    if (/^cascadingcombo$/i.test(type)) {\n      return new bizagi.rendering.tablet.cascadingCombo(renderParams);\n    }\n\n    if (type == \"list\") {\n      return new bizagi.rendering.tablet.list(renderParams);\n    }\n\n    if (type == \"radio\") {\n      return new bizagi.rendering.tablet.radio(renderParams);\n    }\n\n    if (type == \"image\") {\n      if (isOfflineForm && !bizagi.util.isOfflineFormsV2Supported()) {\n        return new bizagi.rendering.tablet.image.old(renderParams);\n      } else\n      {\n        return new bizagi.rendering.tablet.image(renderParams);\n      }\n\n    }\n\n    if (type == \"uploadecm\") {\n      return new bizagi.rendering.tablet.ecm(renderParams);\n    }\n\n    if (type == \"upload\") {\n      // Review the offline status or context              \n      if (isOfflineForm) {\n        if (!bizagi.util.isOfflineFormsV2Supported()) {\n          return new bizagi.rendering.tablet.upload.offline.old(renderParams);\n        } else\n        {\n          return new bizagi.rendering.tablet.upload.offline(renderParams);\n        }\n      } else {\n        return new bizagi.rendering.tablet.upload(renderParams);\n      }\n    }\n\n    if (type == \"grid\") {\n      // Review the offline status or context             \n      if (isOfflineForm) {\n        if (!bizagi.util.isOfflineFormsV2Supported()) {\n          return new bizagi.rendering.tablet.grid.offline.old(renderParams);\n        } else\n        {\n          return new bizagi.rendering.tablet.grid.offline(renderParams);\n        }\n      } else {\n        return new bizagi.rendering.tablet.grid(renderParams);\n      }\n    }\n\n    if (type == \"groupedgrid\") {\n      // return new bizagi.rendering.tablet.grid.grouped(renderParams);\n      return new bizagi.rendering.tablet.grid(renderParams); // Not supported. Nonetheless, all entries are shown.\n    }\n\n    if (type == \"search\") {\n      return new bizagi.rendering.tablet.search(renderParams);\n    }\n\n    if (type == \"suggest\") {\n      renderParams.data.properties.enableQuerySuggestBehavior = true;\n      return new bizagi.rendering.tablet.search(renderParams);\n    }\n\n    if (type == \"searchList\") {\n      return new bizagi.rendering.tablet.searchList(renderParams);\n    }\n\n    if (type == \"multiSelect\") {\n      return new bizagi.rendering.tablet.multiSelect(renderParams);\n    }\n\n    if (type == \"button\") {\n      return new bizagi.rendering.tablet.button(renderParams);\n    }\n\n    if (type == \"formLink\") {\n      return new bizagi.rendering.tablet.formLink(renderParams);\n    }\n\n    if (type == \"link\") {\n      return new bizagi.rendering.tablet.link(renderParams);\n    }\n\n    if (type == \"actionLauncher\") {\n      return new bizagi.rendering.tablet.actionLauncher(renderParams);\n    }\n\n    if (type == \"entityTemplate\") {\n      return new bizagi.rendering.tablet.entityTemplate(renderParams);\n    }\n\n    if (type == \"polymorphicLauncher\") {\n      return new bizagi.rendering.tablet.polymorphicLauncher(renderParams);\n    }\n\n    if (type == \"userfield\") {\n      return new bizagi.rendering.tablet.userfieldWrapper(renderParams);\n    }\n\n    // Check query renders (starts with \"query\")\n    //if (type.indexOf(\"query\") == 0) {\n    //    return this.getQueryRender(params);\n    //}\n\n    // Check search renders (starts with \"search\")\n    if (type.indexOf(\"search\") == 0) {\n      return this.getSearchRender(params);\n    }\n\n    if (type == \"document\") {\n      return new bizagi.rendering.tablet.document(renderParams);\n    }\n\n    if (type == \"image\") {\n      return new bizagi.rendering.tablet.image(renderParams);\n    }\n\n    if (type == \"fileprint\") {\n      return new bizagi.rendering.tablet.fileprint(renderParams);\n    }\n\n    if (type == \"geolocation\") {\n      return new bizagi.rendering.tablet.geolocation(renderParams);\n    }\n\n    if (type == \"collectionnavigator\") {\n      return new bizagi.rendering.tablet.collectionnavigator(renderParams);\n    }\n\n    // Check layout renders (starts with \"layout\")\n    if (type.indexOf(\"layout\") === 0) {\n      return self.getLayoutRender(params);\n    }\n\n    // Check range renders (starts with \"range\")\n    if (type.indexOf(\"range\") === 0) {\n      return self.getRangeRender(params);\n    }\n\n    //if (type == \"getUser\") {\n    //    return new bizagi.rendering.tablet.getUser(renderParams);\n    //}\n\n    if (type == \"activityCheckList\") {\n      return new bizagi.rendering.tablet.activityCheckList(renderParams);\n    }\n\n    if (type == \"mobiletext\")\n    return new bizagi.rendering.mobiletext(renderParams);\n\n    // Deprecated control\n    if (type == \"letter\")\n    return new bizagi.rendering.tablet.letter(renderParams);\n\n    if (/^signature$/i.test(type)) {\n      return new bizagi.rendering.tablet.handSignature(renderParams);\n    }\n\n    if (/^readonly$/i.test(type)) {\n      return new bizagi.rendering.tablet.readonly(renderParams);\n    }\n\n    // No type supported\n    //bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    //return null;\n    return this._super(params);\n  },\n\n  /**\r\n     * Returns the appropiatelayout render based on the type   \r\n     */\n  getLayoutRender: function getLayoutRender(params) {\n    var type = params.type;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"layoutImage\")\n    return new bizagi.rendering.tablet.layoutImage(renderParams);\n\n    if (type == \"layoutLink\")\n    return new bizagi.rendering.tablet.layoutLink(renderParams);\n\n    if (type == \"layoutLabel\")\n    return new bizagi.rendering.tablet.layoutLabel(renderParams);\n\n    if (type == \"layoutText\")\n    return new bizagi.rendering.tablet.layoutText(renderParams);\n\n    if (type == \"layoutDateTime\")\n    return new bizagi.rendering.tablet.layoutDateTime(renderParams);\n\n    if (type == \"layoutNumber\")\n    return new bizagi.rendering.tablet.layoutNumber(renderParams);\n\n    if (type == \"layoutMoney\")\n    return new bizagi.rendering.tablet.layoutMoney(renderParams);\n\n    if (type == \"layoutPlaceholder\")\n    return new bizagi.rendering.tablet.layoutPlaceholder(renderParams);\n\n    if (type == \"layoutBoolean\")\n    return new bizagi.rendering.tablet.layoutBoolean(renderParams);\n\n    if (type == \"layoutUpload\")\n    return new bizagi.rendering.tablet.layoutUpload(renderParams);\n\n    return this._super(params);\n  },\n\n  /**\r\n      * Returns the appropiate search render based on the type     \r\n      */\n  getRangeRender: function getRangeRender(params) {\n    var type = params.type;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type === \"rangeDate\")\n    return new bizagi.rendering.tablet.rangeDate(renderParams);\n\n    if (type === \"rangeMoney\")\n    return new bizagi.rendering.tablet.rangeMoney(renderParams);\n\n    if (type === \"rangeNumber\")\n    return new bizagi.rendering.tablet.rangeNumber(renderParams);\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", params.data, \"error\");\n    return null;\n  },\n\n  /**\r\n      * Returns the appropiate search render based on the type         \r\n      */\n  getSearchRender: function getSearchRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    type = type.replace(/tablet/, '');\n\n    if (type == \"searchText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      // Creates one extended render\n      if (isExtended)\n      return new bizagi.rendering.tablet.extendedText(searchParams);\n\n      // Creates one normal text render\n      return new bizagi.rendering.tablet.text(searchParams);\n    }\n\n    if (type == \"searchBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      // Creates one check render\n      if (display == \"check\")\n      return new bizagi.rendering.tablet.check(searchParams);\n\n      // Creates one yes-no render\n      return new bizagi.rendering.tablet.yesno(searchParams);\n    }\n\n    if (type == \"searchNumber\") {\n      // Creates a Scientific Notation render\n      if (data.properties.dataType == 29)\n      return new bizagi.rendering.tablet.numberScientificNotation(searchParams);\n\n      return new bizagi.rendering.tablet.number(searchParams);\n    }\n\n    if (type == \"searchMoney\")\n    return new bizagi.rendering.tablet.money(searchParams);\n\n    if (type == \"searchDate\")\n    return new bizagi.rendering.tablet.date(searchParams);\n\n    if (type == \"searchCombo\")\n    return new bizagi.rendering.tablet.combo(searchParams);\n\n    if (type == \"searchSuggest\")\n    return new bizagi.rendering.tablet.search(searchParams);\n\n    if (type == \"searchLabel\")\n    return new bizagi.rendering.tablet.label(searchParams);\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  } });","/**\r\n *   Name: Bizagi tablet queryForm Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n *   -   Will apply a desktop form template\r\n */\n\n// Extends from form tablet base\nbizagi.rendering.tablet.form.extend(\"bizagi.rendering.tablet.queryForm\", {}, {});","/**\r\n *   Name: Bizagi tablet FormTemplate Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the form template class to adjust to tablet devices\r\n */\n\n// Extends from form tablet base\nbizagi.rendering.tablet.form.extend(\"bizagi.rendering.tablet.formTemplate\", bizagi.rendering.formTemplate.prototype);\n// Extends itself\nbizagi.rendering.tablet.formTemplate.extend(\"bizagi.rendering.tablet.formTemplate\", {}, {});","/**\r\n *   Name: Bizagi Rendering Users Form\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script override rendering.form to create and update users\r\n */\n\n// Extends from form tablet base\nbizagi.rendering.tablet.form.extend(\"bizagi.rendering.tablet.usersForm\", {}, {});"]}